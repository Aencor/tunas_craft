var vK=Object.defineProperty;var yK=(n,e,t)=>e in n?vK(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var vI=(n,e,t)=>yK(n,typeof e!="symbol"?e+"":e,t);function bK(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function Kc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yI={exports:{}},jb={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O4;function xK(){if(O4)return jb;O4=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:s,ref:i!==void 0?i:null,props:a}}return jb.Fragment=e,jb.jsx=t,jb.jsxs=t,jb}var D4;function _K(){return D4||(D4=1,yI.exports=xK()),yI.exports}var A=_K(),bI={exports:{}},Mn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L4;function SK(){if(L4)return Mn;L4=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),v=Symbol.iterator;function y(Z){return Z===null||typeof Z!="object"?null:(Z=v&&Z[v]||Z["@@iterator"],typeof Z=="function"?Z:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,S={};function w(Z,re,de){this.props=Z,this.context=re,this.refs=S,this.updater=de||x}w.prototype.isReactComponent={},w.prototype.setState=function(Z,re){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,re,"setState")},w.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function R(){}R.prototype=w.prototype;function N(Z,re,de){this.props=Z,this.context=re,this.refs=S,this.updater=de||x}var O=N.prototype=new R;O.constructor=N,E(O,w.prototype),O.isPureReactComponent=!0;var z=Array.isArray;function k(){}var U={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function C(Z,re,de){var ve=de.ref;return{$$typeof:n,type:Z,key:re,ref:ve!==void 0?ve:null,props:de}}function L(Z,re){return C(Z.type,re,Z.props)}function j(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===n}function B(Z){var re={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(de){return re[de]})}var V=/\/+/g;function Q(Z,re){return typeof Z=="object"&&Z!==null&&Z.key!=null?B(""+Z.key):re.toString(36)}function J(Z){switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason;default:switch(typeof Z.status=="string"?Z.then(k,k):(Z.status="pending",Z.then(function(re){Z.status==="pending"&&(Z.status="fulfilled",Z.value=re)},function(re){Z.status==="pending"&&(Z.status="rejected",Z.reason=re)})),Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason}}throw Z}function W(Z,re,de,ve,pe){var ye=typeof Z;(ye==="undefined"||ye==="boolean")&&(Z=null);var Ee=!1;if(Z===null)Ee=!0;else switch(ye){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(Z.$$typeof){case n:case e:Ee=!0;break;case d:return Ee=Z._init,W(Ee(Z._payload),re,de,ve,pe)}}if(Ee)return pe=pe(Z),Ee=ve===""?"."+Q(Z,0):ve,z(pe)?(de="",Ee!=null&&(de=Ee.replace(V,"$&/")+"/"),W(pe,re,de,"",function(qe){return qe})):pe!=null&&(j(pe)&&(pe=L(pe,de+(pe.key==null||Z&&Z.key===pe.key?"":(""+pe.key).replace(V,"$&/")+"/")+Ee)),re.push(pe)),1;Ee=0;var Xe=ve===""?".":ve+":";if(z(Z))for(var me=0;me<Z.length;me++)ve=Z[me],ye=Xe+Q(ve,me),Ee+=W(ve,re,de,ye,pe);else if(me=y(Z),typeof me=="function")for(Z=me.call(Z),me=0;!(ve=Z.next()).done;)ve=ve.value,ye=Xe+Q(ve,me++),Ee+=W(ve,re,de,ye,pe);else if(ye==="object"){if(typeof Z.then=="function")return W(J(Z),re,de,ve,pe);throw re=String(Z),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function $(Z,re,de){if(Z==null)return Z;var ve=[],pe=0;return W(Z,ve,"","",function(ye){return re.call(de,ye,pe++)}),ve}function se(Z){if(Z._status===-1){var re=Z._result;re=re(),re.then(function(de){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=de)},function(de){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=de)}),Z._status===-1&&(Z._status=0,Z._result=re)}if(Z._status===1)return Z._result.default;throw Z._result}var ce=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Z);return}console.error(Z)},fe={map:$,forEach:function(Z,re,de){$(Z,function(){re.apply(this,arguments)},de)},count:function(Z){var re=0;return $(Z,function(){re++}),re},toArray:function(Z){return $(Z,function(re){return re})||[]},only:function(Z){if(!j(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}};return Mn.Activity=p,Mn.Children=fe,Mn.Component=w,Mn.Fragment=t,Mn.Profiler=i,Mn.PureComponent=N,Mn.StrictMode=r,Mn.Suspense=c,Mn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Mn.__COMPILER_RUNTIME={__proto__:null,c:function(Z){return U.H.useMemoCache(Z)}},Mn.cache=function(Z){return function(){return Z.apply(null,arguments)}},Mn.cacheSignal=function(){return null},Mn.cloneElement=function(Z,re,de){if(Z==null)throw Error("The argument must be a React element, but you passed "+Z+".");var ve=E({},Z.props),pe=Z.key;if(re!=null)for(ye in re.key!==void 0&&(pe=""+re.key),re)!P.call(re,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&re.ref===void 0||(ve[ye]=re[ye]);var ye=arguments.length-2;if(ye===1)ve.children=de;else if(1<ye){for(var Ee=Array(ye),Xe=0;Xe<ye;Xe++)Ee[Xe]=arguments[Xe+2];ve.children=Ee}return C(Z.type,pe,ve)},Mn.createContext=function(Z){return Z={$$typeof:s,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider=Z,Z.Consumer={$$typeof:a,_context:Z},Z},Mn.createElement=function(Z,re,de){var ve,pe={},ye=null;if(re!=null)for(ve in re.key!==void 0&&(ye=""+re.key),re)P.call(re,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(pe[ve]=re[ve]);var Ee=arguments.length-2;if(Ee===1)pe.children=de;else if(1<Ee){for(var Xe=Array(Ee),me=0;me<Ee;me++)Xe[me]=arguments[me+2];pe.children=Xe}if(Z&&Z.defaultProps)for(ve in Ee=Z.defaultProps,Ee)pe[ve]===void 0&&(pe[ve]=Ee[ve]);return C(Z,ye,pe)},Mn.createRef=function(){return{current:null}},Mn.forwardRef=function(Z){return{$$typeof:o,render:Z}},Mn.isValidElement=j,Mn.lazy=function(Z){return{$$typeof:d,_payload:{_status:-1,_result:Z},_init:se}},Mn.memo=function(Z,re){return{$$typeof:f,type:Z,compare:re===void 0?null:re}},Mn.startTransition=function(Z){var re=U.T,de={};U.T=de;try{var ve=Z(),pe=U.S;pe!==null&&pe(de,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(k,ce)}catch(ye){ce(ye)}finally{re!==null&&de.types!==null&&(re.types=de.types),U.T=re}},Mn.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Mn.use=function(Z){return U.H.use(Z)},Mn.useActionState=function(Z,re,de){return U.H.useActionState(Z,re,de)},Mn.useCallback=function(Z,re){return U.H.useCallback(Z,re)},Mn.useContext=function(Z){return U.H.useContext(Z)},Mn.useDebugValue=function(){},Mn.useDeferredValue=function(Z,re){return U.H.useDeferredValue(Z,re)},Mn.useEffect=function(Z,re){return U.H.useEffect(Z,re)},Mn.useEffectEvent=function(Z){return U.H.useEffectEvent(Z)},Mn.useId=function(){return U.H.useId()},Mn.useImperativeHandle=function(Z,re,de){return U.H.useImperativeHandle(Z,re,de)},Mn.useInsertionEffect=function(Z,re){return U.H.useInsertionEffect(Z,re)},Mn.useLayoutEffect=function(Z,re){return U.H.useLayoutEffect(Z,re)},Mn.useMemo=function(Z,re){return U.H.useMemo(Z,re)},Mn.useOptimistic=function(Z,re){return U.H.useOptimistic(Z,re)},Mn.useReducer=function(Z,re,de){return U.H.useReducer(Z,re,de)},Mn.useRef=function(Z){return U.H.useRef(Z)},Mn.useState=function(Z){return U.H.useState(Z)},Mn.useSyncExternalStore=function(Z,re,de){return U.H.useSyncExternalStore(Z,re,de)},Mn.useTransition=function(){return U.H.useTransition()},Mn.version="19.2.4",Mn}var k4;function iy(){return k4||(k4=1,bI.exports=SK()),bI.exports}var G=iy();const Eg=Kc(G),hV=bK({__proto__:null,default:Eg},[G]);var xI={exports:{}},Bb={},_I={exports:{}},SI={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U4;function wK(){return U4||(U4=1,(function(n){function e(W,$){var se=W.length;W.push($);e:for(;0<se;){var ce=se-1>>>1,fe=W[ce];if(0<i(fe,$))W[ce]=$,W[se]=fe,se=ce;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var $=W[0],se=W.pop();if(se!==$){W[0]=se;e:for(var ce=0,fe=W.length,Z=fe>>>1;ce<Z;){var re=2*(ce+1)-1,de=W[re],ve=re+1,pe=W[ve];if(0>i(de,se))ve<fe&&0>i(pe,de)?(W[ce]=pe,W[ve]=se,ce=ve):(W[ce]=de,W[re]=se,ce=re);else if(ve<fe&&0>i(pe,se))W[ce]=pe,W[ve]=se,ce=ve;else break e}}return $}function i(W,$){var se=W.sortIndex-$.sortIndex;return se!==0?se:W.id-$.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var c=[],f=[],d=1,p=null,v=3,y=!1,x=!1,E=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function O(W){for(var $=t(f);$!==null;){if($.callback===null)r(f);else if($.startTime<=W)r(f),$.sortIndex=$.expirationTime,e(c,$);else break;$=t(f)}}function z(W){if(E=!1,O(W),!x)if(t(c)!==null)x=!0,k||(k=!0,B());else{var $=t(f);$!==null&&J(z,$.startTime-W)}}var k=!1,U=-1,P=5,C=-1;function L(){return S?!0:!(n.unstable_now()-C<P)}function j(){if(S=!1,k){var W=n.unstable_now();C=W;var $=!0;try{e:{x=!1,E&&(E=!1,R(U),U=-1),y=!0;var se=v;try{t:{for(O(W),p=t(c);p!==null&&!(p.expirationTime>W&&L());){var ce=p.callback;if(typeof ce=="function"){p.callback=null,v=p.priorityLevel;var fe=ce(p.expirationTime<=W);if(W=n.unstable_now(),typeof fe=="function"){p.callback=fe,O(W),$=!0;break t}p===t(c)&&r(c),O(W)}else r(c);p=t(c)}if(p!==null)$=!0;else{var Z=t(f);Z!==null&&J(z,Z.startTime-W),$=!1}}break e}finally{p=null,v=se,y=!1}$=void 0}}finally{$?B():k=!1}}}var B;if(typeof N=="function")B=function(){N(j)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Q=V.port2;V.port1.onmessage=j,B=function(){Q.postMessage(null)}}else B=function(){w(j,0)};function J(W,$){U=w(function(){W(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(W){switch(v){case 1:case 2:case 3:var $=3;break;default:$=v}var se=v;v=$;try{return W()}finally{v=se}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(W,$){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var se=v;v=W;try{return $()}finally{v=se}},n.unstable_scheduleCallback=function(W,$,se){var ce=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?ce+se:ce):se=ce,W){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=se+fe,W={id:d++,callback:$,priorityLevel:W,startTime:se,expirationTime:fe,sortIndex:-1},se>ce?(W.sortIndex=se,e(f,W),t(c)===null&&W===t(f)&&(E?(R(U),U=-1):E=!0,J(z,se-ce))):(W.sortIndex=fe,e(c,W),x||y||(x=!0,k||(k=!0,B()))),W},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(W){var $=v;return function(){var se=v;v=$;try{return W.apply(this,arguments)}finally{v=se}}}})(SI)),SI}var F4;function pV(){return F4||(F4=1,_I.exports=wK()),_I.exports}var wI={exports:{}},As={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z4;function EK(){if(z4)return As;z4=1;var n=iy();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,f,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:c,containerInfo:f,implementation:d}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return As.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,As.createPortal=function(c,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(c,f,null,d)},As.flushSync=function(c){var f=s.T,d=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=f,r.p=d,r.d.f()}},As.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(c,f))},As.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},As.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var d=f.as,p=o(d,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?r.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:v,fetchPriority:y}):d==="script"&&r.d.X(c,{crossOrigin:p,integrity:v,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},As.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=o(f.as,f.crossOrigin);r.d.M(c,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(c)},As.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,p=o(d,f.crossOrigin);r.d.L(c,d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},As.preloadModule=function(c,f){if(typeof c=="string")if(f){var d=o(f.as,f.crossOrigin);r.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(c)},As.requestFormReset=function(c){r.d.r(c)},As.unstable_batchedUpdates=function(c,f){return c(f)},As.useFormState=function(c,f,d){return s.H.useFormState(c,f,d)},As.useFormStatus=function(){return s.H.useHostTransitionStatus()},As.version="19.2.4",As}var j4;function mV(){if(j4)return wI.exports;j4=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),wI.exports=EK(),wI.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B4;function AK(){if(B4)return Bb;B4=1;var n=pV(),e=iy(),t=mV();function r(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var u=l,g=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(g=u.return),l=u.return;while(l)}return u.tag===3?g:null}function s(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function o(l){if(l.tag===31){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function c(l){if(a(l)!==l)throw Error(r(188))}function f(l){var u=l.alternate;if(!u){if(u=a(l),u===null)throw Error(r(188));return u!==l?null:l}for(var g=l,b=u;;){var I=g.return;if(I===null)break;var D=I.alternate;if(D===null){if(b=I.return,b!==null){g=b;continue}break}if(I.child===D.child){for(D=I.child;D;){if(D===g)return c(I),l;if(D===b)return c(I),u;D=D.sibling}throw Error(r(188))}if(g.return!==b.return)g=I,b=D;else{for(var X=!1,ie=I.child;ie;){if(ie===g){X=!0,g=I,b=D;break}if(ie===b){X=!0,b=I,g=D;break}ie=ie.sibling}if(!X){for(ie=D.child;ie;){if(ie===g){X=!0,g=D,b=I;break}if(ie===b){X=!0,b=D,g=I;break}ie=ie.sibling}if(!X)throw Error(r(189))}}if(g.alternate!==b)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?l:u}function d(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=d(l),u!==null)return u;l=l.sibling}return null}var p=Object.assign,v=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function B(l){return l===null||typeof l!="object"?null:(l=j&&l[j]||l["@@iterator"],typeof l=="function"?l:null)}var V=Symbol.for("react.client.reference");function Q(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===V?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case E:return"Fragment";case w:return"Profiler";case S:return"StrictMode";case z:return"Suspense";case k:return"SuspenseList";case C:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case x:return"Portal";case N:return l.displayName||"Context";case R:return(l._context.displayName||"Context")+".Consumer";case O:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case U:return u=l.displayName||null,u!==null?u:Q(l.type)||"Memo";case P:u=l._payload,l=l._init;try{return Q(l(u))}catch{}}return null}var J=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},ce=[],fe=-1;function Z(l){return{current:l}}function re(l){0>fe||(l.current=ce[fe],ce[fe]=null,fe--)}function de(l,u){fe++,ce[fe]=l.current,l.current=u}var ve=Z(null),pe=Z(null),ye=Z(null),Ee=Z(null);function Xe(l,u){switch(de(ye,u),de(pe,l),de(ve,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?n4(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=n4(u),l=r4(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}re(ve),de(ve,l)}function me(){re(ve),re(pe),re(ye)}function qe(l){l.memoizedState!==null&&de(Ee,l);var u=ve.current,g=r4(u,l.type);u!==g&&(de(pe,l),de(ve,g))}function mt(l){pe.current===l&&(re(ve),re(pe)),Ee.current===l&&(re(Ee),kb._currentValue=se)}var Ue,De;function Re(l){if(Ue===void 0)try{throw Error()}catch(g){var u=g.stack.trim().match(/\n( *(at )?)/);Ue=u&&u[1]||"",De=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ue+l+De}var Me=!1;function Fe(l,u){if(!l||Me)return"";Me=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(u){var ut=function(){throw Error()};if(Object.defineProperty(ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ut,[])}catch(Ke){var Ge=Ke}Reflect.construct(l,[],ut)}else{try{ut.call()}catch(Ke){Ge=Ke}l.call(ut.prototype)}}else{try{throw Error()}catch(Ke){Ge=Ke}(ut=l())&&typeof ut.catch=="function"&&ut.catch(function(){})}}catch(Ke){if(Ke&&Ge&&typeof Ke.stack=="string")return[Ke.stack,Ge.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var I=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");I&&I.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=b.DetermineComponentFrameRoot(),X=D[0],ie=D[1];if(X&&ie){var be=X.split(`
`),Be=ie.split(`
`);for(I=b=0;b<be.length&&!be[b].includes("DetermineComponentFrameRoot");)b++;for(;I<Be.length&&!Be[I].includes("DetermineComponentFrameRoot");)I++;if(b===be.length||I===Be.length)for(b=be.length-1,I=Be.length-1;1<=b&&0<=I&&be[b]!==Be[I];)I--;for(;1<=b&&0<=I;b--,I--)if(be[b]!==Be[I]){if(b!==1||I!==1)do if(b--,I--,0>I||be[b]!==Be[I]){var nt=`
`+be[b].replace(" at new "," at ");return l.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",l.displayName)),nt}while(1<=b&&0<=I);break}}}finally{Me=!1,Error.prepareStackTrace=g}return(g=l?l.displayName||l.name:"")?Re(g):""}function Ze(l,u){switch(l.tag){case 26:case 27:case 5:return Re(l.type);case 16:return Re("Lazy");case 13:return l.child!==u&&u!==null?Re("Suspense Fallback"):Re("Suspense");case 19:return Re("SuspenseList");case 0:case 15:return Fe(l.type,!1);case 11:return Fe(l.type.render,!1);case 1:return Fe(l.type,!0);case 31:return Re("Activity");default:return""}}function oe(l){try{var u="",g=null;do u+=Ze(l,g),g=l,l=l.return;while(l);return u}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}var yt=Object.prototype.hasOwnProperty,at=n.unstable_scheduleCallback,Tt=n.unstable_cancelCallback,ct=n.unstable_shouldYield,ae=n.unstable_requestPaint,Y=n.unstable_now,xe=n.unstable_getCurrentPriorityLevel,ke=n.unstable_ImmediatePriority,et=n.unstable_UserBlockingPriority,Ne=n.unstable_NormalPriority,It=n.unstable_LowPriority,rt=n.unstable_IdlePriority,Pt=n.log,Ot=n.unstable_setDisableYieldValue,it=null,tt=null;function Mt(l){if(typeof Pt=="function"&&Ot(l),tt&&typeof tt.setStrictMode=="function")try{tt.setStrictMode(it,l)}catch{}}var he=Math.clz32?Math.clz32:ge,Le=Math.log,bt=Math.LN2;function ge(l){return l>>>=0,l===0?32:31-(Le(l)/bt|0)|0}var dt=256,pt=262144,ht=4194304;function st(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Qe(l,u,g){var b=l.pendingLanes;if(b===0)return 0;var I=0,D=l.suspendedLanes,X=l.pingedLanes;l=l.warmLanes;var ie=b&134217727;return ie!==0?(b=ie&~D,b!==0?I=st(b):(X&=ie,X!==0?I=st(X):g||(g=ie&~l,g!==0&&(I=st(g))))):(ie=b&~D,ie!==0?I=st(ie):X!==0?I=st(X):g||(g=b&~l,g!==0&&(I=st(g)))),I===0?0:u!==0&&u!==I&&(u&D)===0&&(D=I&-I,g=u&-u,D>=g||D===32&&(g&4194048)!==0)?u:I}function gt(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function Wt(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nn(){var l=ht;return ht<<=1,(ht&62914560)===0&&(ht=4194304),l}function Kt(l){for(var u=[],g=0;31>g;g++)u.push(l);return u}function Ar(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Tr(l,u,g,b,I,D){var X=l.pendingLanes;l.pendingLanes=g,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=g,l.entangledLanes&=g,l.errorRecoveryDisabledLanes&=g,l.shellSuspendCounter=0;var ie=l.entanglements,be=l.expirationTimes,Be=l.hiddenUpdates;for(g=X&~g;0<g;){var nt=31-he(g),ut=1<<nt;ie[nt]=0,be[nt]=-1;var Ge=Be[nt];if(Ge!==null)for(Be[nt]=null,nt=0;nt<Ge.length;nt++){var Ke=Ge[nt];Ke!==null&&(Ke.lane&=-536870913)}g&=~ut}b!==0&&oa(l,b,0),D!==0&&I===0&&l.tag!==0&&(l.suspendedLanes|=D&~(X&~u))}function oa(l,u,g){l.pendingLanes|=u,l.suspendedLanes&=~u;var b=31-he(u);l.entangledLanes|=u,l.entanglements[b]=l.entanglements[b]|1073741824|g&261930}function fs(l,u){var g=l.entangledLanes|=u;for(l=l.entanglements;g;){var b=31-he(g),I=1<<b;I&u|l[b]&u&&(l[b]|=u),g&=~I}}function ho(l,u){var g=u&-u;return g=(g&42)!==0?1:ds(g),(g&(l.suspendedLanes|u))!==0?0:g}function ds(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function la(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Wo(){var l=$.p;return l!==0?l:(l=window.event,l===void 0?32:T4(l.type))}function Mr(l,u){var g=$.p;try{return $.p=l,u()}finally{$.p=g}}var Hi=Math.random().toString(36).slice(2),br="__reactFiber$"+Hi,kr="__reactProps$"+Hi,Ni="__reactContainer$"+Hi,Gi="__reactEvents$"+Hi,ca="__reactListeners$"+Hi,zs="__reactHandles$"+Hi,$o="__reactResources$"+Hi,qi="__reactMarker$"+Hi;function hs(l){delete l[br],delete l[kr],delete l[Gi],delete l[ca],delete l[zs]}function Fa(l){var u=l[br];if(u)return u;for(var g=l.parentNode;g;){if(u=g[Ni]||g[br]){if(g=u.alternate,u.child!==null||g!==null&&g.child!==null)for(l=u4(l);l!==null;){if(g=l[br])return g;l=u4(l)}return u}l=g,g=l.parentNode}return null}function ua(l){if(l=l[br]||l[Ni]){var u=l.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return l}return null}function Wi(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(r(33))}function fa(l){var u=l[$o];return u||(u=l[$o]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function te(l){l[qi]=!0}var Ae=new Set,He={};function ze(l,u){Ce(l,u),Ce(l+"Capture",u)}function Ce(l,u){for(He[l]=u,l=0;l<u.length;l++)Ae.add(u[l])}var At=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lt={},St={};function Ft(l){return yt.call(St,l)?!0:yt.call(Lt,l)?!1:At.test(l)?St[l]=!0:(Lt[l]=!0,!1)}function jt(l,u,g){if(Ft(u))if(g===null)l.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var b=u.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+g)}}function Ht(l,u,g){if(g===null)l.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+g)}}function Dt(l,u,g,b){if(b===null)l.removeAttribute(g);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(g);return}l.setAttributeNS(u,g,""+b)}}function Yt(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function En(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function rr(l,u,g){var b=Object.getOwnPropertyDescriptor(l.constructor.prototype,u);if(!l.hasOwnProperty(u)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var I=b.get,D=b.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return I.call(this)},set:function(X){g=""+X,D.call(this,X)}}),Object.defineProperty(l,u,{enumerable:b.enumerable}),{getValue:function(){return g},setValue:function(X){g=""+X},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function ne(l){if(!l._valueTracker){var u=En(l)?"checked":"value";l._valueTracker=rr(l,u,""+l[u])}}function Se(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var g=u.getValue(),b="";return l&&(b=En(l)?l.checked?"true":"false":l.value),l=b,l!==g?(u.setValue(l),!0):!1}function Te(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var _t=/[\n"\\]/g;function wt(l){return l.replace(_t,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Zt(l,u,g,b,I,D,X,ie){l.name="",X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?l.type=X:l.removeAttribute("type"),u!=null?X==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+Yt(u)):l.value!==""+Yt(u)&&(l.value=""+Yt(u)):X!=="submit"&&X!=="reset"||l.removeAttribute("value"),u!=null?dn(l,X,Yt(u)):g!=null?dn(l,X,Yt(g)):b!=null&&l.removeAttribute("value"),I==null&&D!=null&&(l.defaultChecked=!!D),I!=null&&(l.checked=I&&typeof I!="function"&&typeof I!="symbol"),ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"?l.name=""+Yt(ie):l.removeAttribute("name")}function Yn(l,u,g,b,I,D,X,ie){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(l.type=D),u!=null||g!=null){if(!(D!=="submit"&&D!=="reset"||u!=null)){ne(l);return}g=g!=null?""+Yt(g):"",u=u!=null?""+Yt(u):g,ie||u===l.value||(l.value=u),l.defaultValue=u}b=b??I,b=typeof b!="function"&&typeof b!="symbol"&&!!b,l.checked=ie?l.checked:!!b,l.defaultChecked=!!b,X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"&&(l.name=X),ne(l)}function dn(l,u,g){u==="number"&&Te(l.ownerDocument)===l||l.defaultValue===""+g||(l.defaultValue=""+g)}function Gn(l,u,g,b){if(l=l.options,u){u={};for(var I=0;I<g.length;I++)u["$"+g[I]]=!0;for(g=0;g<l.length;g++)I=u.hasOwnProperty("$"+l[g].value),l[g].selected!==I&&(l[g].selected=I),I&&b&&(l[g].defaultSelected=!0)}else{for(g=""+Yt(g),u=null,I=0;I<l.length;I++){if(l[I].value===g){l[I].selected=!0,b&&(l[I].defaultSelected=!0);return}u!==null||l[I].disabled||(u=l[I])}u!==null&&(u.selected=!0)}}function hn(l,u,g){if(u!=null&&(u=""+Yt(u),u!==l.value&&(l.value=u),g==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=g!=null?""+Yt(g):""}function ir(l,u,g,b){if(u==null){if(b!=null){if(g!=null)throw Error(r(92));if(J(b)){if(1<b.length)throw Error(r(93));b=b[0]}g=b}g==null&&(g=""),u=g}g=Yt(u),l.defaultValue=g,b=l.textContent,b===g&&b!==""&&b!==null&&(l.value=b),ne(l)}function qn(l,u){if(u){var g=l.firstChild;if(g&&g===l.lastChild&&g.nodeType===3){g.nodeValue=u;return}}l.textContent=u}var xr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rr(l,u,g){var b=u.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?b?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":b?l.setProperty(u,g):typeof g!="number"||g===0||xr.has(u)?u==="float"?l.cssFloat=g:l[u]=(""+g).trim():l[u]=g+"px"}function za(l,u,g){if(u!=null&&typeof u!="object")throw Error(r(62));if(l=l.style,g!=null){for(var b in g)!g.hasOwnProperty(b)||u!=null&&u.hasOwnProperty(b)||(b.indexOf("--")===0?l.setProperty(b,""):b==="float"?l.cssFloat="":l[b]="");for(var I in u)b=u[I],u.hasOwnProperty(I)&&g[I]!==b&&Rr(l,I,b)}else for(var D in u)u.hasOwnProperty(D)&&Rr(l,D,u[D])}function xi(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function js(l){return Sa.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function ja(){}var kd=null;function Bs(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var cc=null,po=null;function Jc(l){var u=ua(l);if(u&&(l=u.stateNode)){var g=l[kr]||null;e:switch(l=u.stateNode,u.type){case"input":if(Zt(l,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),u=g.name,g.type==="radio"&&u!=null){for(g=l;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+wt(""+u)+'"][type="radio"]'),u=0;u<g.length;u++){var b=g[u];if(b!==l&&b.form===l.form){var I=b[kr]||null;if(!I)throw Error(r(90));Zt(b,I.value,I.defaultValue,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name)}}for(u=0;u<g.length;u++)b=g[u],b.form===l.form&&Se(b)}break e;case"textarea":hn(l,g.value,g.defaultValue);break e;case"select":u=g.value,u!=null&&Gn(l,!!g.multiple,u,!1)}}}var yf=!1;function uc(l,u,g){if(yf)return l(u,g);yf=!0;try{var b=l(u);return b}finally{if(yf=!1,(cc!==null||po!==null)&&(il(),cc&&(u=cc,l=po,po=cc=null,Jc(u),l)))for(u=0;u<l.length;u++)Jc(l[u])}}function mo(l,u){var g=l.stateNode;if(g===null)return null;var b=g[kr]||null;if(b===null)return null;g=b[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(l=l.type,b=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!b;break e;default:l=!1}if(l)return null;if(g&&typeof g!="function")throw Error(r(231,u,typeof g));return g}var Vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bf=!1;if(Vs)try{var pr={};Object.defineProperty(pr,"passive",{get:function(){bf=!0}}),window.addEventListener("test",pr,pr),window.removeEventListener("test",pr,pr)}catch{bf=!1}var Ba=null,Ud=null,bl=null;function eu(){if(bl)return bl;var l,u=Ud,g=u.length,b,I="value"in Ba?Ba.value:Ba.textContent,D=I.length;for(l=0;l<g&&u[l]===I[l];l++);var X=g-l;for(b=1;b<=X&&u[g-b]===I[D-b];b++);return bl=I.slice(l,1<b?1-b:void 0)}function tu(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Xo(){return!0}function Yo(){return!1}function $i(l){function u(g,b,I,D,X){this._reactName=g,this._targetInst=I,this.type=b,this.nativeEvent=D,this.target=X,this.currentTarget=null;for(var ie in l)l.hasOwnProperty(ie)&&(g=l[ie],this[ie]=g?g(D):D[ie]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?Xo:Yo,this.isPropagationStopped=Yo,this}return p(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),u}var xl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ko=$i(xl),fc=p({},xl,{view:0,detail:0}),Fd=$i(fc),_l,xf,Zo,nu=p({},fc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dc,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Zo&&(Zo&&l.type==="mousemove"?(_l=l.screenX-Zo.screenX,xf=l.screenY-Zo.screenY):xf=_l=0,Zo=l),_l)},movementY:function(l){return"movementY"in l?l.movementY:xf}}),zd=$i(nu),ru=p({},nu,{dataTransfer:0}),Ip=$i(ru),jd=p({},fc,{relatedTarget:0}),iu=$i(jd),Bd=p({},xl,{animationName:0,elapsedTime:0,pseudoElement:0}),Ug=$i(Bd),Vd=p({},xl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Rp=$i(Vd),au=p({},xl,{data:0}),go=$i(au),_f={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Np={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hd(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=Np[l])?!!u[l]:!1}function dc(){return Hd}var wa=p({},fc,{key:function(l){if(l.key){var u=_f[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=tu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Pp[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dc,charCode:function(l){return l.type==="keypress"?tu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?tu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Sl=$i(wa),Sf=p({},nu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wl=$i(Sf),T=p({},fc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dc}),q=$i(T),K=p({},xl,{propertyName:0,elapsedTime:0,pseudoElement:0}),le=$i(K),Ie=p({},nu,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),We=$i(Ie),Nt=p({},xl,{newState:0,oldState:0}),_n=$i(Nt),ri=[9,13,27,32],Wn=Vs&&"CompositionEvent"in window,Ur=null;Vs&&"documentMode"in document&&(Ur=document.documentMode);var Va=Vs&&"TextEvent"in window&&!Ur,Qo=Vs&&(!Wn||Ur&&8<Ur&&11>=Ur),Jo=" ",ps=!1;function hc(l,u){switch(l){case"keyup":return ri.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wf(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Ef=!1;function x1(l,u){switch(l){case"compositionend":return wf(u);case"keypress":return u.which!==32?null:(ps=!0,Jo);case"textInput":return l=u.data,l===Jo&&ps?null:l;default:return null}}function My(l,u){if(Ef)return l==="compositionend"||!Wn&&hc(l,u)?(l=eu(),bl=Ud=Ba=null,Ef=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Qo&&u.locale!=="ko"?null:u.data;default:return null}}var Cy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iy(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Cy[l.type]:u==="textarea"}function Fg(l,u,g,b){cc?po?po.push(b):po=[b]:cc=b,u=AS(u,"onChange"),0<u.length&&(g=new Ko("onChange","change",null,g,b),l.push({event:g,listeners:u}))}var su=null,Af=null;function _1(l){Kk(l,0)}function Gd(l){var u=Wi(l);if(Se(u))return l}function Ry(l,u){if(l==="change")return u}var El=!1;if(Vs){var Op;if(Vs){var Py="oninput"in document;if(!Py){var Ny=document.createElement("div");Ny.setAttribute("oninput","return;"),Py=typeof Ny.oninput=="function"}Op=Py}else Op=!1;El=Op&&(!document.documentMode||9<document.documentMode)}function vo(){su&&(su.detachEvent("onpropertychange",Dp),Af=su=null)}function Dp(l){if(l.propertyName==="value"&&Gd(Af)){var u=[];Fg(u,Af,l,Bs(l)),uc(_1,u)}}function S1(l,u,g){l==="focusin"?(vo(),su=u,Af=g,su.attachEvent("onpropertychange",Dp)):l==="focusout"&&vo()}function Oy(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Gd(Af)}function w1(l,u){if(l==="click")return Gd(u)}function E1(l,u){if(l==="input"||l==="change")return Gd(u)}function Dy(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Ha=typeof Object.is=="function"?Object.is:Dy;function qd(l,u){if(Ha(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var g=Object.keys(l),b=Object.keys(u);if(g.length!==b.length)return!1;for(b=0;b<g.length;b++){var I=g[b];if(!yt.call(u,I)||!Ha(l[I],u[I]))return!1}return!0}function Lp(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Wd(l,u){var g=Lp(l);l=0;for(var b;g;){if(g.nodeType===3){if(b=l+g.textContent.length,l<=u&&b>=u)return{node:g,offset:u-l};l=b}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Lp(g)}}function Pr(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?Pr(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function A1(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=Te(l.document);u instanceof l.HTMLIFrameElement;){try{var g=typeof u.contentWindow.location.href=="string"}catch{g=!1}if(g)l=u.contentWindow;else break;u=Te(l.document)}return u}function Ly(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var T1=Vs&&"documentMode"in document&&11>=document.documentMode,Al=null,Tl=null,$d=null,zg=!1;function Xd(l,u,g){var b=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;zg||Al==null||Al!==Te(b)||(b=Al,"selectionStart"in b&&Ly(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),$d&&qd($d,b)||($d=b,b=AS(Tl,"onSelect"),0<b.length&&(u=new Ko("onSelect","select",null,u,g),l.push({event:u,listeners:b}),u.target=Al)))}function Ea(l,u){var g={};return g[l.toLowerCase()]=u.toLowerCase(),g["Webkit"+l]="webkit"+u,g["Moz"+l]="moz"+u,g}var Tf={animationend:Ea("Animation","AnimationEnd"),animationiteration:Ea("Animation","AnimationIteration"),animationstart:Ea("Animation","AnimationStart"),transitionrun:Ea("Transition","TransitionRun"),transitionstart:Ea("Transition","TransitionStart"),transitioncancel:Ea("Transition","TransitionCancel"),transitionend:Ea("Transition","TransitionEnd")},kp={},ky={};Vs&&(ky=document.createElement("div").style,"AnimationEvent"in window||(delete Tf.animationend.animation,delete Tf.animationiteration.animation,delete Tf.animationstart.animation),"TransitionEvent"in window||delete Tf.transitionend.transition);function pc(l){if(kp[l])return kp[l];if(!Tf[l])return l;var u=Tf[l],g;for(g in u)if(u.hasOwnProperty(g)&&g in ky)return kp[l]=u[g];return l}var jg=pc("animationend"),Up=pc("animationiteration"),Uy=pc("animationstart"),M1=pc("transitionrun"),jC=pc("transitionstart"),C1=pc("transitioncancel"),Fy=pc("transitionend"),yo=new Map,Fp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fp.push("scrollEnd");function bo(l,u){yo.set(l,u),ze(u,[l])}var zp=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},xo=[],mc=0,Xi=0;function jp(){for(var l=mc,u=Xi=mc=0;u<l;){var g=xo[u];xo[u++]=null;var b=xo[u];xo[u++]=null;var I=xo[u];xo[u++]=null;var D=xo[u];if(xo[u++]=null,b!==null&&I!==null){var X=b.pending;X===null?I.next=I:(I.next=X.next,X.next=I),b.pending=I}D!==0&&ou(g,I,D)}}function Yi(l,u,g,b){xo[mc++]=l,xo[mc++]=u,xo[mc++]=g,xo[mc++]=b,Xi|=b,l.lanes|=b,l=l.alternate,l!==null&&(l.lanes|=b)}function Bg(l,u,g,b){return Yi(l,u,g,b),_o(l)}function Ga(l,u){return Yi(l,null,null,u),_o(l)}function ou(l,u,g){l.lanes|=g;var b=l.alternate;b!==null&&(b.lanes|=g);for(var I=!1,D=l.return;D!==null;)D.childLanes|=g,b=D.alternate,b!==null&&(b.childLanes|=g),D.tag===22&&(l=D.stateNode,l===null||l._visibility&1||(I=!0)),l=D,D=D.return;return l.tag===3?(D=l.stateNode,I&&u!==null&&(I=31-he(g),l=D.hiddenUpdates,b=l[I],b===null?l[I]=[u]:b.push(u),u.lane=g|536870912),D):null}function _o(l){if(50<Tu)throw Tu=0,qf=null,Error(r(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var lu={};function zy(l,u,g,b){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(l,u,g,b){return new zy(l,u,g,b)}function Vg(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ms(l,u){var g=l.alternate;return g===null?(g=Wr(l.tag,u,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=u,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&65011712,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,u=l.dependencies,g.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g.refCleanup=l.refCleanup,g}function Yd(l,u){l.flags&=65011714;var g=l.alternate;return g===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,u=g.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Ml(l,u,g,b,I,D){var X=0;if(b=l,typeof l=="function")Vg(l)&&(X=1);else if(typeof l=="string")X=aK(l,g,ve.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case C:return l=Wr(31,g,u,I),l.elementType=C,l.lanes=D,l;case E:return cu(g.children,I,D,u);case S:X=8,I|=24;break;case w:return l=Wr(12,g,u,I|2),l.elementType=w,l.lanes=D,l;case z:return l=Wr(13,g,u,I),l.elementType=z,l.lanes=D,l;case k:return l=Wr(19,g,u,I),l.elementType=k,l.lanes=D,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case N:X=10;break e;case R:X=9;break e;case O:X=11;break e;case U:X=14;break e;case P:X=16,b=null;break e}X=29,g=Error(r(130,l===null?"null":typeof l,"")),b=null}return u=Wr(X,g,u,I),u.elementType=l,u.type=b,u.lanes=D,u}function cu(l,u,g,b){return l=Wr(7,l,b,u),l.lanes=g,l}function Hg(l,u,g){return l=Wr(6,l,null,u),l.lanes=g,l}function Kd(l){var u=Wr(18,null,null,0);return u.stateNode=l,u}function Gg(l,u,g){return u=Wr(4,l.children!==null?l.children:[],l.key,u),u.lanes=g,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var Bp=new WeakMap;function Hs(l,u){if(typeof l=="object"&&l!==null){var g=Bp.get(l);return g!==void 0?g:(u={value:l,source:u,stack:oe(u)},Bp.set(l,u),u)}return{value:l,source:u,stack:oe(u)}}var uu=[],fu=0,Zd=null,Qd=0,gs=[],Br=0,gc=null,$r=1,el="";function Cl(l,u){uu[fu++]=Qd,uu[fu++]=Zd,Zd=l,Qd=u}function I1(l,u,g){gs[Br++]=$r,gs[Br++]=el,gs[Br++]=gc,gc=l;var b=$r;l=el;var I=32-he(b)-1;b&=~(1<<I),g+=1;var D=32-he(u)+I;if(30<D){var X=I-I%5;D=(b&(1<<X)-1).toString(32),b>>=X,I-=X,$r=1<<32-he(u)+I|g<<I|b,el=D+l}else $r=1<<D|g<<I|b,el=l}function Il(l){l.return!==null&&(Cl(l,1),I1(l,1,0))}function qg(l){for(;l===Zd;)Zd=uu[--fu],uu[fu]=null,Qd=uu[--fu],uu[fu]=null;for(;l===gc;)gc=gs[--Br],gs[Br]=null,el=gs[--Br],gs[Br]=null,$r=gs[--Br],gs[Br]=null}function Wg(l,u){gs[Br++]=$r,gs[Br++]=el,gs[Br++]=gc,$r=u.id,el=u.overflow,gc=l}var ii=null,Nr=null,Vn=!1,vc=null,Gs=!1,Jd=Error(r(519));function Rl(l){var u=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pl(Hs(u,l)),Jd}function R1(l){var u=l.stateNode,g=l.type,b=l.memoizedProps;switch(u[br]=l,u[kr]=b,g){case"dialog":Xn("cancel",u),Xn("close",u);break;case"iframe":case"object":case"embed":Xn("load",u);break;case"video":case"audio":for(g=0;g<Do.length;g++)Xn(Do[g],u);break;case"source":Xn("error",u);break;case"img":case"image":case"link":Xn("error",u),Xn("load",u);break;case"details":Xn("toggle",u);break;case"input":Xn("invalid",u),Yn(u,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0);break;case"select":Xn("invalid",u);break;case"textarea":Xn("invalid",u),ir(u,b.value,b.defaultValue,b.children)}g=b.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||u.textContent===""+g||b.suppressHydrationWarning===!0||e4(u.textContent,g)?(b.popover!=null&&(Xn("beforetoggle",u),Xn("toggle",u)),b.onScroll!=null&&Xn("scroll",u),b.onScrollEnd!=null&&Xn("scrollend",u),b.onClick!=null&&(u.onclick=ja),u=!0):u=!1,u||Rl(l,!0)}function P1(l){for(ii=l.return;ii;)switch(ii.tag){case 5:case 31:case 13:Gs=!1;return;case 27:case 3:Gs=!0;return;default:ii=ii.return}}function eh(l){if(l!==ii)return!1;if(!Vn)return P1(l),Vn=!0,!1;var u=l.tag,g;if((g=u!==3&&u!==27)&&((g=u===5)&&(g=l.type,g=!(g!=="form"&&g!=="button")||nI(l.type,l.memoizedProps)),g=!g),g&&Nr&&Rl(l),P1(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));Nr=c4(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));Nr=c4(l)}else u===27?(u=Nr,xh(l.type)?(l=oI,oI=null,Nr=l):Nr=u):Nr=ii?ql(l.stateNode.nextSibling):null;return!0}function du(){Nr=ii=null,Vn=!1}function $g(){var l=vc;return l!==null&&(si===null?si=l:si.push.apply(si,l),vc=null),l}function Pl(l){vc===null?vc=[l]:vc.push(l)}var th=Z(null),hu=null,Nl=null;function yc(l,u,g){de(th,u._currentValue),u._currentValue=g}function Ol(l){l._currentValue=th.current,re(th)}function Xg(l,u,g){for(;l!==null;){var b=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,b!==null&&(b.childLanes|=u)):b!==null&&(b.childLanes&u)!==u&&(b.childLanes|=u),l===g)break;l=l.return}}function Yg(l,u,g,b){var I=l.child;for(I!==null&&(I.return=l);I!==null;){var D=I.dependencies;if(D!==null){var X=I.child;D=D.firstContext;e:for(;D!==null;){var ie=D;D=I;for(var be=0;be<u.length;be++)if(ie.context===u[be]){D.lanes|=g,ie=D.alternate,ie!==null&&(ie.lanes|=g),Xg(D.return,g,l),b||(X=null);break e}D=ie.next}}else if(I.tag===18){if(X=I.return,X===null)throw Error(r(341));X.lanes|=g,D=X.alternate,D!==null&&(D.lanes|=g),Xg(X,g,l),X=null}else X=I.child;if(X!==null)X.return=I;else for(X=I;X!==null;){if(X===l){X=null;break}if(I=X.sibling,I!==null){I.return=X.return,X=I;break}X=X.return}I=X}}function Dl(l,u,g,b){l=null;for(var I=u,D=!1;I!==null;){if(!D){if((I.flags&524288)!==0)D=!0;else if((I.flags&262144)!==0)break}if(I.tag===10){var X=I.alternate;if(X===null)throw Error(r(387));if(X=X.memoizedProps,X!==null){var ie=I.type;Ha(I.pendingProps.value,X.value)||(l!==null?l.push(ie):l=[ie])}}else if(I===Ee.current){if(X=I.alternate,X===null)throw Error(r(387));X.memoizedState.memoizedState!==I.memoizedState.memoizedState&&(l!==null?l.push(kb):l=[kb])}I=I.return}l!==null&&Yg(u,l,g,b),u.flags|=262144}function Vp(l){for(l=l.firstContext;l!==null;){if(!Ha(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function pu(l){hu=l,Nl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function pn(l){return N1(hu,l)}function nh(l,u){return hu===null&&pu(l),N1(l,u)}function N1(l,u){var g=u._currentValue;if(u={context:u,memoizedValue:g,next:null},Nl===null){if(l===null)throw Error(r(308));Nl=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else Nl=Nl.next=u;return g}var O1=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(g,b){l.push(b)}};this.abort=function(){u.aborted=!0,l.forEach(function(g){return g()})}},BC=n.unstable_scheduleCallback,VC=n.unstable_NormalPriority,_i={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jy(){return{controller:new O1,data:new Map,refCount:0}}function Mf(l){l.refCount--,l.refCount===0&&BC(VC,function(){l.controller.abort()})}var qs=null,Kg=0,bc=0,So=null;function By(l,u){if(qs===null){var g=qs=[];Kg=0,bc=$e(),So={status:"pending",value:void 0,then:function(b){g.push(b)}}}return Kg++,u.then(Vy,Vy),u}function Vy(){if(--Kg===0&&qs!==null){So!==null&&(So.status="fulfilled");var l=qs;qs=null,bc=0,So=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function Hy(l,u){var g=[],b={status:"pending",value:null,reason:null,then:function(I){g.push(I)}};return l.then(function(){b.status="fulfilled",b.value=u;for(var I=0;I<g.length;I++)(0,g[I])(u)},function(I){for(b.status="rejected",b.reason=I,I=0;I<g.length;I++)(0,g[I])(void 0)}),b}var D1=W.S;W.S=function(l,u){Rb=Y(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&By(l,u),D1!==null&&D1(l,u)};var mu=Z(null);function Zg(){var l=mu.current;return l!==null?l:vn.pooledCache}function Hp(l,u){u===null?de(mu,mu.current):de(mu,u.pool)}function Gy(){var l=Zg();return l===null?null:{parent:_i._currentValue,pool:l}}var Cf=Error(r(460)),Gp=Error(r(474)),Pn=Error(r(542)),Qg={then:function(){}};function vs(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Jg(l,u,g){switch(g=l[g],g===void 0?l.push(u):g!==u&&(u.then(ja,ja),u=g),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,Pf(l),l;default:if(typeof u.status=="string")u.then(ja,ja);else{if(l=vn,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=u,l.status="pending",l.then(function(b){if(u.status==="pending"){var I=u;I.status="fulfilled",I.value=b}},function(b){if(u.status==="pending"){var I=u;I.status="rejected",I.reason=b}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,Pf(l),l}throw Ll=u,Cf}}function If(l){try{var u=l._init;return u(l._payload)}catch(g){throw g!==null&&typeof g=="object"&&typeof g.then=="function"?(Ll=g,Cf):g}}var Ll=null;function Rf(){if(Ll===null)throw Error(r(459));var l=Ll;return Ll=null,l}function Pf(l){if(l===Cf||l===Pn)throw Error(r(483))}var Nf=null,Of=0;function qp(l){var u=Of;return Of+=1,Nf===null&&(Nf=[]),Jg(Nf,l,u)}function wo(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function rh(l,u){throw u.$$typeof===v?Error(r(525)):(l=Object.prototype.toString.call(u),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function e0(l){function u(Pe,we){if(l){var je=Pe.deletions;je===null?(Pe.deletions=[we],Pe.flags|=16):je.push(we)}}function g(Pe,we){if(!l)return null;for(;we!==null;)u(Pe,we),we=we.sibling;return null}function b(Pe){for(var we=new Map;Pe!==null;)Pe.key!==null?we.set(Pe.key,Pe):we.set(Pe.index,Pe),Pe=Pe.sibling;return we}function I(Pe,we){return Pe=ms(Pe,we),Pe.index=0,Pe.sibling=null,Pe}function D(Pe,we,je){return Pe.index=je,l?(je=Pe.alternate,je!==null?(je=je.index,je<we?(Pe.flags|=67108866,we):je):(Pe.flags|=67108866,we)):(Pe.flags|=1048576,we)}function X(Pe){return l&&Pe.alternate===null&&(Pe.flags|=67108866),Pe}function ie(Pe,we,je,ot){return we===null||we.tag!==6?(we=Hg(je,Pe.mode,ot),we.return=Pe,we):(we=I(we,je),we.return=Pe,we)}function be(Pe,we,je,ot){var an=je.type;return an===E?nt(Pe,we,je.props.children,ot,je.key):we!==null&&(we.elementType===an||typeof an=="object"&&an!==null&&an.$$typeof===P&&If(an)===we.type)?(we=I(we,je.props),wo(we,je),we.return=Pe,we):(we=Ml(je.type,je.key,je.props,null,Pe.mode,ot),wo(we,je),we.return=Pe,we)}function Be(Pe,we,je,ot){return we===null||we.tag!==4||we.stateNode.containerInfo!==je.containerInfo||we.stateNode.implementation!==je.implementation?(we=Gg(je,Pe.mode,ot),we.return=Pe,we):(we=I(we,je.children||[]),we.return=Pe,we)}function nt(Pe,we,je,ot,an){return we===null||we.tag!==7?(we=cu(je,Pe.mode,ot,an),we.return=Pe,we):(we=I(we,je),we.return=Pe,we)}function ut(Pe,we,je){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return we=Hg(""+we,Pe.mode,je),we.return=Pe,we;if(typeof we=="object"&&we!==null){switch(we.$$typeof){case y:return je=Ml(we.type,we.key,we.props,null,Pe.mode,je),wo(je,we),je.return=Pe,je;case x:return we=Gg(we,Pe.mode,je),we.return=Pe,we;case P:return we=If(we),ut(Pe,we,je)}if(J(we)||B(we))return we=cu(we,Pe.mode,je,null),we.return=Pe,we;if(typeof we.then=="function")return ut(Pe,qp(we),je);if(we.$$typeof===N)return ut(Pe,nh(Pe,we),je);rh(Pe,we)}return null}function Ge(Pe,we,je,ot){var an=we!==null?we.key:null;if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return an!==null?null:ie(Pe,we,""+je,ot);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case y:return je.key===an?be(Pe,we,je,ot):null;case x:return je.key===an?Be(Pe,we,je,ot):null;case P:return je=If(je),Ge(Pe,we,je,ot)}if(J(je)||B(je))return an!==null?null:nt(Pe,we,je,ot,null);if(typeof je.then=="function")return Ge(Pe,we,qp(je),ot);if(je.$$typeof===N)return Ge(Pe,we,nh(Pe,je),ot);rh(Pe,je)}return null}function Ke(Pe,we,je,ot,an){if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return Pe=Pe.get(je)||null,ie(we,Pe,""+ot,an);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case y:return Pe=Pe.get(ot.key===null?je:ot.key)||null,be(we,Pe,ot,an);case x:return Pe=Pe.get(ot.key===null?je:ot.key)||null,Be(we,Pe,ot,an);case P:return ot=If(ot),Ke(Pe,we,je,ot,an)}if(J(ot)||B(ot))return Pe=Pe.get(je)||null,nt(we,Pe,ot,an,null);if(typeof ot.then=="function")return Ke(Pe,we,je,qp(ot),an);if(ot.$$typeof===N)return Ke(Pe,we,je,nh(we,ot),an);rh(we,ot)}return null}function Xt(Pe,we,je,ot){for(var an=null,fr=null,Qt=we,Ln=we=0,Zn=null;Qt!==null&&Ln<je.length;Ln++){Qt.index>Ln?(Zn=Qt,Qt=null):Zn=Qt.sibling;var dr=Ge(Pe,Qt,je[Ln],ot);if(dr===null){Qt===null&&(Qt=Zn);break}l&&Qt&&dr.alternate===null&&u(Pe,Qt),we=D(dr,we,Ln),fr===null?an=dr:fr.sibling=dr,fr=dr,Qt=Zn}if(Ln===je.length)return g(Pe,Qt),Vn&&Cl(Pe,Ln),an;if(Qt===null){for(;Ln<je.length;Ln++)Qt=ut(Pe,je[Ln],ot),Qt!==null&&(we=D(Qt,we,Ln),fr===null?an=Qt:fr.sibling=Qt,fr=Qt);return Vn&&Cl(Pe,Ln),an}for(Qt=b(Qt);Ln<je.length;Ln++)Zn=Ke(Qt,Pe,Ln,je[Ln],ot),Zn!==null&&(l&&Zn.alternate!==null&&Qt.delete(Zn.key===null?Ln:Zn.key),we=D(Zn,we,Ln),fr===null?an=Zn:fr.sibling=Zn,fr=Zn);return l&&Qt.forEach(function(Ah){return u(Pe,Ah)}),Vn&&Cl(Pe,Ln),an}function fn(Pe,we,je,ot){if(je==null)throw Error(r(151));for(var an=null,fr=null,Qt=we,Ln=we=0,Zn=null,dr=je.next();Qt!==null&&!dr.done;Ln++,dr=je.next()){Qt.index>Ln?(Zn=Qt,Qt=null):Zn=Qt.sibling;var Ah=Ge(Pe,Qt,dr.value,ot);if(Ah===null){Qt===null&&(Qt=Zn);break}l&&Qt&&Ah.alternate===null&&u(Pe,Qt),we=D(Ah,we,Ln),fr===null?an=Ah:fr.sibling=Ah,fr=Ah,Qt=Zn}if(dr.done)return g(Pe,Qt),Vn&&Cl(Pe,Ln),an;if(Qt===null){for(;!dr.done;Ln++,dr=je.next())dr=ut(Pe,dr.value,ot),dr!==null&&(we=D(dr,we,Ln),fr===null?an=dr:fr.sibling=dr,fr=dr);return Vn&&Cl(Pe,Ln),an}for(Qt=b(Qt);!dr.done;Ln++,dr=je.next())dr=Ke(Qt,Pe,Ln,dr.value,ot),dr!==null&&(l&&dr.alternate!==null&&Qt.delete(dr.key===null?Ln:dr.key),we=D(dr,we,Ln),fr===null?an=dr:fr.sibling=dr,fr=dr);return l&&Qt.forEach(function(gK){return u(Pe,gK)}),Vn&&Cl(Pe,Ln),an}function Lr(Pe,we,je,ot){if(typeof je=="object"&&je!==null&&je.type===E&&je.key===null&&(je=je.props.children),typeof je=="object"&&je!==null){switch(je.$$typeof){case y:e:{for(var an=je.key;we!==null;){if(we.key===an){if(an=je.type,an===E){if(we.tag===7){g(Pe,we.sibling),ot=I(we,je.props.children),ot.return=Pe,Pe=ot;break e}}else if(we.elementType===an||typeof an=="object"&&an!==null&&an.$$typeof===P&&If(an)===we.type){g(Pe,we.sibling),ot=I(we,je.props),wo(ot,je),ot.return=Pe,Pe=ot;break e}g(Pe,we);break}else u(Pe,we);we=we.sibling}je.type===E?(ot=cu(je.props.children,Pe.mode,ot,je.key),ot.return=Pe,Pe=ot):(ot=Ml(je.type,je.key,je.props,null,Pe.mode,ot),wo(ot,je),ot.return=Pe,Pe=ot)}return X(Pe);case x:e:{for(an=je.key;we!==null;){if(we.key===an)if(we.tag===4&&we.stateNode.containerInfo===je.containerInfo&&we.stateNode.implementation===je.implementation){g(Pe,we.sibling),ot=I(we,je.children||[]),ot.return=Pe,Pe=ot;break e}else{g(Pe,we);break}else u(Pe,we);we=we.sibling}ot=Gg(je,Pe.mode,ot),ot.return=Pe,Pe=ot}return X(Pe);case P:return je=If(je),Lr(Pe,we,je,ot)}if(J(je))return Xt(Pe,we,je,ot);if(B(je)){if(an=B(je),typeof an!="function")throw Error(r(150));return je=an.call(je),fn(Pe,we,je,ot)}if(typeof je.then=="function")return Lr(Pe,we,qp(je),ot);if(je.$$typeof===N)return Lr(Pe,we,nh(Pe,je),ot);rh(Pe,je)}return typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint"?(je=""+je,we!==null&&we.tag===6?(g(Pe,we.sibling),ot=I(we,je),ot.return=Pe,Pe=ot):(g(Pe,we),ot=Hg(je,Pe.mode,ot),ot.return=Pe,Pe=ot),X(Pe)):g(Pe,we)}return function(Pe,we,je,ot){try{Of=0;var an=Lr(Pe,we,je,ot);return Nf=null,an}catch(Qt){if(Qt===Cf||Qt===Pn)throw Qt;var fr=Wr(29,Qt,null,Pe.mode);return fr.lanes=ot,fr.return=Pe,fr}finally{}}}var xc=e0(!0),t0=e0(!1),qa=!1;function Wp(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qy(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function _c(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function gu(l,u,g){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(Jt&2)!==0){var I=b.pending;return I===null?u.next=u:(u.next=I.next,I.next=u),b.pending=u,u=_o(l),ou(l,null,g),u}return Yi(l,b,u,g),_o(l)}function vu(l,u,g){if(u=u.updateQueue,u!==null&&(u=u.shared,(g&4194048)!==0)){var b=u.lanes;b&=l.pendingLanes,g|=b,u.lanes=g,fs(l,g)}}function rn(l,u){var g=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,g===b)){var I=null,D=null;if(g=g.firstBaseUpdate,g!==null){do{var X={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};D===null?I=D=X:D=D.next=X,g=g.next}while(g!==null);D===null?I=D=u:D=D.next=u}else I=D=u;g={baseState:b.baseState,firstBaseUpdate:I,lastBaseUpdate:D,shared:b.shared,callbacks:b.callbacks},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=u:l.next=u,g.lastBaseUpdate=u}var Wy=!1;function $p(){if(Wy){var l=So;if(l!==null)throw l}}function ih(l,u,g,b){Wy=!1;var I=l.updateQueue;qa=!1;var D=I.firstBaseUpdate,X=I.lastBaseUpdate,ie=I.shared.pending;if(ie!==null){I.shared.pending=null;var be=ie,Be=be.next;be.next=null,X===null?D=Be:X.next=Be,X=be;var nt=l.alternate;nt!==null&&(nt=nt.updateQueue,ie=nt.lastBaseUpdate,ie!==X&&(ie===null?nt.firstBaseUpdate=Be:ie.next=Be,nt.lastBaseUpdate=be))}if(D!==null){var ut=I.baseState;X=0,nt=Be=be=null,ie=D;do{var Ge=ie.lane&-536870913,Ke=Ge!==ie.lane;if(Ke?(In&Ge)===Ge:(b&Ge)===Ge){Ge!==0&&Ge===bc&&(Wy=!0),nt!==null&&(nt=nt.next={lane:0,tag:ie.tag,payload:ie.payload,callback:null,next:null});e:{var Xt=l,fn=ie;Ge=u;var Lr=g;switch(fn.tag){case 1:if(Xt=fn.payload,typeof Xt=="function"){ut=Xt.call(Lr,ut,Ge);break e}ut=Xt;break e;case 3:Xt.flags=Xt.flags&-65537|128;case 0:if(Xt=fn.payload,Ge=typeof Xt=="function"?Xt.call(Lr,ut,Ge):Xt,Ge==null)break e;ut=p({},ut,Ge);break e;case 2:qa=!0}}Ge=ie.callback,Ge!==null&&(l.flags|=64,Ke&&(l.flags|=8192),Ke=I.callbacks,Ke===null?I.callbacks=[Ge]:Ke.push(Ge))}else Ke={lane:Ge,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},nt===null?(Be=nt=Ke,be=ut):nt=nt.next=Ke,X|=Ge;if(ie=ie.next,ie===null){if(ie=I.shared.pending,ie===null)break;Ke=ie,ie=Ke.next,Ke.next=null,I.lastBaseUpdate=Ke,I.shared.pending=null}}while(!0);nt===null&&(be=ut),I.baseState=be,I.firstBaseUpdate=Be,I.lastBaseUpdate=nt,D===null&&(I.shared.lanes=0),Vl|=X,l.lanes=X,l.memoizedState=ut}}function ah(l,u){if(typeof l!="function")throw Error(r(191,l));l.call(u)}function L1(l,u){var g=l.callbacks;if(g!==null)for(l.callbacks=null,l=0;l<g.length;l++)ah(g[l],u)}var sh=Z(null),n0=Z(0);function k1(l,u){l=Ys,de(n0,l),de(sh,u),Ys=l|u.baseLanes}function $y(){de(n0,Ys),de(sh,sh.current)}function Xp(){Ys=n0.current,re(sh),re(n0)}var ys=Z(null),Wa=null;function Sc(l){var u=l.alternate;de(Hn,Hn.current&1),de(ys,l),Wa===null&&(u===null||sh.current!==null||u.memoizedState!==null)&&(Wa=l)}function Xy(l){de(Hn,Hn.current),de(ys,l),Wa===null&&(Wa=l)}function U1(l){l.tag===22?(de(Hn,Hn.current),de(ys,l),Wa===null&&(Wa=l)):bs()}function bs(){de(Hn,Hn.current),de(ys,ys.current)}function di(l){re(ys),Wa===l&&(Wa=null),re(Hn)}var Hn=Z(0);function Ws(l){for(var u=l;u!==null;){if(u.tag===13){var g=u.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||aI(g)||sI(g)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Vr=0,An=null,_r=null,zn=null,Eo=!1,oh=!1,Df=!1,r0=0,Yp=0,lh=null,Yy=0;function Xr(){throw Error(r(321))}function Ky(l,u){if(u===null)return!1;for(var g=0;g<u.length&&g<l.length;g++)if(!Ha(l[g],u[g]))return!1;return!0}function i0(l,u,g,b,I,D){return Vr=D,An=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,W.H=l===null||l.memoizedState===null?mS:gb,Df=!1,D=g(b,I),Df=!1,oh&&(D=Lf(u,g,b,I)),F1(l),D}function F1(l){W.H=ch;var u=_r!==null&&_r.next!==null;if(Vr=0,zn=_r=An=null,Eo=!1,Yp=0,lh=null,u)throw Error(r(300));l===null||Si||(l=l.dependencies,l!==null&&Vp(l)&&(Si=!0))}function Lf(l,u,g,b){An=l;var I=0;do{if(oh&&(lh=null),Yp=0,oh=!1,25<=I)throw Error(r(301));if(I+=1,zn=_r=null,l.updateQueue!=null){var D=l.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}W.H=Ao,D=u(g,b)}while(oh);return D}function kf(){var l=W.H,u=l.useState()[0];return u=typeof u.then=="function"?Kp(u):u,l=l.useState()[0],(_r!==null?_r.memoizedState:null)!==l&&(An.flags|=1024),u}function Zy(){var l=r0!==0;return r0=0,l}function Qy(l,u,g){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~g}function Jy(l){if(Eo){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Eo=!1}Vr=0,zn=_r=An=null,oh=!1,Yp=r0=0,lh=null}function Oi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?An.memoizedState=zn=l:zn=zn.next=l,zn}function hi(){if(_r===null){var l=An.alternate;l=l!==null?l.memoizedState:null}else l=_r.next;var u=zn===null?An.memoizedState:zn.next;if(u!==null)zn=u,_r=l;else{if(l===null)throw An.alternate===null?Error(r(467)):Error(r(310));_r=l,l={memoizedState:_r.memoizedState,baseState:_r.baseState,baseQueue:_r.baseQueue,queue:_r.queue,next:null},zn===null?An.memoizedState=zn=l:zn=zn.next=l}return zn}function a0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kp(l){var u=Yp;return Yp+=1,lh===null&&(lh=[]),l=Jg(lh,l,u),u=An,(zn===null?u.memoizedState:zn.next)===null&&(u=u.alternate,W.H=u===null||u.memoizedState===null?mS:gb),l}function yu(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Kp(l);if(l.$$typeof===N)return pn(l)}throw Error(r(438,String(l)))}function eb(l){var u=null,g=An.updateQueue;if(g!==null&&(u=g.memoCache),u==null){var b=An.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(u={data:b.data.map(function(I){return I.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),g===null&&(g=a0(),An.updateQueue=g),g.memoCache=u,g=u.data[u.index],g===void 0)for(g=u.data[u.index]=Array(l),b=0;b<l;b++)g[b]=L;return u.index++,g}function wc(l,u){return typeof u=="function"?u(l):u}function s0(l){var u=hi();return tb(u,_r,l)}function tb(l,u,g){var b=l.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=g;var I=l.baseQueue,D=b.pending;if(D!==null){if(I!==null){var X=I.next;I.next=D.next,D.next=X}u.baseQueue=I=D,b.pending=null}if(D=l.baseState,I===null)l.memoizedState=D;else{u=I.next;var ie=X=null,be=null,Be=u,nt=!1;do{var ut=Be.lane&-536870913;if(ut!==Be.lane?(In&ut)===ut:(Vr&ut)===ut){var Ge=Be.revertLane;if(Ge===0)be!==null&&(be=be.next={lane:0,revertLane:0,gesture:null,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null}),ut===bc&&(nt=!0);else if((Vr&Ge)===Ge){Be=Be.next,Ge===bc&&(nt=!0);continue}else ut={lane:0,revertLane:Be.revertLane,gesture:null,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null},be===null?(ie=be=ut,X=D):be=be.next=ut,An.lanes|=Ge,Vl|=Ge;ut=Be.action,Df&&g(D,ut),D=Be.hasEagerState?Be.eagerState:g(D,ut)}else Ge={lane:ut,revertLane:Be.revertLane,gesture:Be.gesture,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null},be===null?(ie=be=Ge,X=D):be=be.next=Ge,An.lanes|=ut,Vl|=ut;Be=Be.next}while(Be!==null&&Be!==u);if(be===null?X=D:be.next=ie,!Ha(D,l.memoizedState)&&(Si=!0,nt&&(g=So,g!==null)))throw g;l.memoizedState=D,l.baseState=X,l.baseQueue=be,b.lastRenderedState=D}return I===null&&(b.lanes=0),[l.memoizedState,b.dispatch]}function nb(l){var u=hi(),g=u.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=l;var b=g.dispatch,I=g.pending,D=u.memoizedState;if(I!==null){g.pending=null;var X=I=I.next;do D=l(D,X.action),X=X.next;while(X!==I);Ha(D,u.memoizedState)||(Si=!0),u.memoizedState=D,u.baseQueue===null&&(u.baseState=D),g.lastRenderedState=D}return[D,b]}function z1(l,u,g){var b=An,I=hi(),D=Vn;if(D){if(g===void 0)throw Error(r(407));g=g()}else g=u();var X=!Ha((_r||I).memoizedState,g);if(X&&(I.memoizedState=g,Si=!0),I=I.queue,ub(V1.bind(null,b,I,l),[l]),I.getSnapshot!==u||X||zn!==null&&zn.memoizedState.tag&1){if(b.flags|=2048,bu(9,{destroy:void 0},B1.bind(null,b,I,g,u),null),vn===null)throw Error(r(349));D||(Vr&127)!==0||j1(b,u,g)}return g}function j1(l,u,g){l.flags|=16384,l={getSnapshot:u,value:g},u=An.updateQueue,u===null?(u=a0(),An.updateQueue=u,u.stores=[l]):(g=u.stores,g===null?u.stores=[l]:g.push(l))}function B1(l,u,g,b){u.value=g,u.getSnapshot=b,H1(u)&&G1(l)}function V1(l,u,g){return g(function(){H1(u)&&G1(l)})}function H1(l){var u=l.getSnapshot;l=l.value;try{var g=u();return!Ha(l,g)}catch{return!0}}function G1(l){var u=Ga(l,2);u!==null&&On(u,l,2)}function rb(l){var u=Oi();if(typeof l=="function"){var g=l;if(l=g(),Df){Mt(!0);try{g()}finally{Mt(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wc,lastRenderedState:l},u}function ib(l,u,g,b){return l.baseState=g,tb(l,_r,typeof b=="function"?b:wc)}function HC(l,u,g,b,I){if(u0(l))throw Error(r(485));if(l=u.action,l!==null){var D={payload:I,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(X){D.listeners.push(X)}};W.T!==null?g(!0):D.isTransition=!1,b(D),g=u.pending,g===null?(D.next=u.pending=D,q1(u,D)):(D.next=g.next,u.pending=g.next=D)}}function q1(l,u){var g=u.action,b=u.payload,I=l.state;if(u.isTransition){var D=W.T,X={};W.T=X;try{var ie=g(I,b),be=W.S;be!==null&&be(X,ie),W1(l,u,ie)}catch(Be){ab(l,u,Be)}finally{D!==null&&X.types!==null&&(D.types=X.types),W.T=D}}else try{D=g(I,b),W1(l,u,D)}catch(Be){ab(l,u,Be)}}function W1(l,u,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(b){$1(l,u,b)},function(b){return ab(l,u,b)}):$1(l,u,g)}function $1(l,u,g){u.status="fulfilled",u.value=g,X1(u),l.state=g,u=l.pending,u!==null&&(g=u.next,g===u?l.pending=null:(g=g.next,u.next=g,q1(l,g)))}function ab(l,u,g){var b=l.pending;if(l.pending=null,b!==null){b=b.next;do u.status="rejected",u.reason=g,X1(u),u=u.next;while(u!==b)}l.action=null}function X1(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function sb(l,u){return u}function ob(l,u){if(Vn){var g=vn.formState;if(g!==null){e:{var b=An;if(Vn){if(Nr){t:{for(var I=Nr,D=Gs;I.nodeType!==8;){if(!D){I=null;break t}if(I=ql(I.nextSibling),I===null){I=null;break t}}D=I.data,I=D==="F!"||D==="F"?I:null}if(I){Nr=ql(I.nextSibling),b=I.data==="F!";break e}}Rl(b)}b=!1}b&&(u=g[0])}}return g=Oi(),g.memoizedState=g.baseState=u,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sb,lastRenderedState:u},g.queue=b,g=dS.bind(null,An,b),b.dispatch=g,b=rb(!1),D=mb.bind(null,An,!1,b.queue),b=Oi(),I={state:u,dispatch:null,action:l,pending:null},b.queue=I,g=HC.bind(null,An,I,D,g),I.dispatch=g,b.memoizedState=l,[u,g,!1]}function Y1(l){var u=hi();return lb(u,_r,l)}function lb(l,u,g){if(u=tb(l,u,sb)[0],l=s0(wc)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var b=Kp(u)}catch(X){throw X===Cf?Pn:X}else b=u;u=hi();var I=u.queue,D=I.dispatch;return g!==u.memoizedState&&(An.flags|=2048,bu(9,{destroy:void 0},K1.bind(null,I,g),null)),[b,D,l]}function K1(l,u){l.action=u}function cb(l){var u=hi(),g=_r;if(g!==null)return lb(u,g,l);hi(),u=u.memoizedState,g=hi();var b=g.queue.dispatch;return g.memoizedState=l,[u,b,!1]}function bu(l,u,g,b){return l={tag:l,create:g,deps:b,inst:u,next:null},u=An.updateQueue,u===null&&(u=a0(),An.updateQueue=u),g=u.lastEffect,g===null?u.lastEffect=l.next=l:(b=g.next,g.next=l,l.next=b,u.lastEffect=l),l}function o0(){return hi().memoizedState}function l0(l,u,g,b){var I=Oi();An.flags|=l,I.memoizedState=bu(1|u,{destroy:void 0},g,b===void 0?null:b)}function c0(l,u,g,b){var I=hi();b=b===void 0?null:b;var D=I.memoizedState.inst;_r!==null&&b!==null&&Ky(b,_r.memoizedState.deps)?I.memoizedState=bu(u,D,g,b):(An.flags|=l,I.memoizedState=bu(1|u,D,g,b))}function Z1(l,u){l0(8390656,8,l,u)}function ub(l,u){c0(2048,8,l,u)}function Q1(l){An.flags|=4;var u=An.updateQueue;if(u===null)u=a0(),An.updateQueue=u,u.events=[l];else{var g=u.events;g===null?u.events=[l]:g.push(l)}}function J1(l){var u=hi().memoizedState;return Q1({ref:u,nextImpl:l}),function(){if((Jt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}function eS(l,u){return c0(4,2,l,u)}function tS(l,u){return c0(4,4,l,u)}function nS(l,u){if(typeof u=="function"){l=l();var g=u(l);return function(){typeof g=="function"?g():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function rS(l,u,g){g=g!=null?g.concat([l]):null,c0(4,4,nS.bind(null,u,l),g)}function fb(){}function iS(l,u){var g=hi();u=u===void 0?null:u;var b=g.memoizedState;return u!==null&&Ky(u,b[1])?b[0]:(g.memoizedState=[l,u],l)}function aS(l,u){var g=hi();u=u===void 0?null:u;var b=g.memoizedState;if(u!==null&&Ky(u,b[1]))return b[0];if(b=l(),Df){Mt(!0);try{l()}finally{Mt(!1)}}return g.memoizedState=[b,u],b}function db(l,u,g){return g===void 0||(Vr&1073741824)!==0&&(In&261930)===0?l.memoizedState=u:(l.memoizedState=g,l=Un(),An.lanes|=l,Vl|=l,g)}function sS(l,u,g,b){return Ha(g,u)?g:sh.current!==null?(l=db(l,g,b),Ha(l,u)||(Si=!0),l):(Vr&42)===0||(Vr&1073741824)!==0&&(In&261930)===0?(Si=!0,l.memoizedState=g):(l=Un(),An.lanes|=l,Vl|=l,u)}function oS(l,u,g,b,I){var D=$.p;$.p=D!==0&&8>D?D:8;var X=W.T,ie={};W.T=ie,mb(l,!1,u,g);try{var be=I(),Be=W.S;if(Be!==null&&Be(ie,be),be!==null&&typeof be=="object"&&typeof be.then=="function"){var nt=Hy(be,b);Zp(l,u,nt,Zs(l))}else Zp(l,u,b,Zs(l))}catch(ut){Zp(l,u,{then:function(){},status:"rejected",reason:ut},Zs())}finally{$.p=D,X!==null&&ie.types!==null&&(X.types=ie.types),W.T=X}}function GC(){}function hb(l,u,g,b){if(l.tag!==5)throw Error(r(476));var I=lS(l).queue;oS(l,I,u,se,g===null?GC:function(){return cS(l),g(b)})}function lS(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wc,lastRenderedState:se},next:null};var g={};return u.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wc,lastRenderedState:g},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function cS(l){var u=lS(l);u.next===null&&(u=l.alternate.memoizedState),Zp(l,u.next.queue,{},Zs())}function pb(){return pn(kb)}function uS(){return hi().memoizedState}function fS(){return hi().memoizedState}function qC(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var g=Zs();l=_c(g);var b=gu(u,l,g);b!==null&&(On(b,u,g),vu(b,u,g)),u={cache:jy()},l.payload=u;return}u=u.return}}function WC(l,u,g){var b=Zs();g={lane:b,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},u0(l)?hS(u,g):(g=Bg(l,u,g,b),g!==null&&(On(g,l,b),pS(g,u,b)))}function dS(l,u,g){var b=Zs();Zp(l,u,g,b)}function Zp(l,u,g,b){var I={lane:b,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null};if(u0(l))hS(u,I);else{var D=l.alternate;if(l.lanes===0&&(D===null||D.lanes===0)&&(D=u.lastRenderedReducer,D!==null))try{var X=u.lastRenderedState,ie=D(X,g);if(I.hasEagerState=!0,I.eagerState=ie,Ha(ie,X))return Yi(l,u,I,0),vn===null&&jp(),!1}catch{}finally{}if(g=Bg(l,u,I,b),g!==null)return On(g,l,b),pS(g,u,b),!0}return!1}function mb(l,u,g,b){if(b={lane:2,revertLane:$e(),gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},u0(l)){if(u)throw Error(r(479))}else u=Bg(l,g,b,2),u!==null&&On(u,l,2)}function u0(l){var u=l.alternate;return l===An||u!==null&&u===An}function hS(l,u){oh=Eo=!0;var g=l.pending;g===null?u.next=u:(u.next=g.next,g.next=u),l.pending=u}function pS(l,u,g){if((g&4194048)!==0){var b=u.lanes;b&=l.pendingLanes,g|=b,u.lanes=g,fs(l,g)}}var ch={readContext:pn,use:yu,useCallback:Xr,useContext:Xr,useEffect:Xr,useImperativeHandle:Xr,useLayoutEffect:Xr,useInsertionEffect:Xr,useMemo:Xr,useReducer:Xr,useRef:Xr,useState:Xr,useDebugValue:Xr,useDeferredValue:Xr,useTransition:Xr,useSyncExternalStore:Xr,useId:Xr,useHostTransitionStatus:Xr,useFormState:Xr,useActionState:Xr,useOptimistic:Xr,useMemoCache:Xr,useCacheRefresh:Xr};ch.useEffectEvent=Xr;var mS={readContext:pn,use:yu,useCallback:function(l,u){return Oi().memoizedState=[l,u===void 0?null:u],l},useContext:pn,useEffect:Z1,useImperativeHandle:function(l,u,g){g=g!=null?g.concat([l]):null,l0(4194308,4,nS.bind(null,u,l),g)},useLayoutEffect:function(l,u){return l0(4194308,4,l,u)},useInsertionEffect:function(l,u){l0(4,2,l,u)},useMemo:function(l,u){var g=Oi();u=u===void 0?null:u;var b=l();if(Df){Mt(!0);try{l()}finally{Mt(!1)}}return g.memoizedState=[b,u],b},useReducer:function(l,u,g){var b=Oi();if(g!==void 0){var I=g(u);if(Df){Mt(!0);try{g(u)}finally{Mt(!1)}}}else I=u;return b.memoizedState=b.baseState=I,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:I},b.queue=l,l=l.dispatch=WC.bind(null,An,l),[b.memoizedState,l]},useRef:function(l){var u=Oi();return l={current:l},u.memoizedState=l},useState:function(l){l=rb(l);var u=l.queue,g=dS.bind(null,An,u);return u.dispatch=g,[l.memoizedState,g]},useDebugValue:fb,useDeferredValue:function(l,u){var g=Oi();return db(g,l,u)},useTransition:function(){var l=rb(!1);return l=oS.bind(null,An,l.queue,!0,!1),Oi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,g){var b=An,I=Oi();if(Vn){if(g===void 0)throw Error(r(407));g=g()}else{if(g=u(),vn===null)throw Error(r(349));(In&127)!==0||j1(b,u,g)}I.memoizedState=g;var D={value:g,getSnapshot:u};return I.queue=D,Z1(V1.bind(null,b,D,l),[l]),b.flags|=2048,bu(9,{destroy:void 0},B1.bind(null,b,D,g,u),null),g},useId:function(){var l=Oi(),u=vn.identifierPrefix;if(Vn){var g=el,b=$r;g=(b&~(1<<32-he(b)-1)).toString(32)+g,u="_"+u+"R_"+g,g=r0++,0<g&&(u+="H"+g.toString(32)),u+="_"}else g=Yy++,u="_"+u+"r_"+g.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:pb,useFormState:ob,useActionState:ob,useOptimistic:function(l){var u=Oi();u.memoizedState=u.baseState=l;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=g,u=mb.bind(null,An,!0,g),g.dispatch=u,[l,u]},useMemoCache:eb,useCacheRefresh:function(){return Oi().memoizedState=qC.bind(null,An)},useEffectEvent:function(l){var u=Oi(),g={impl:l};return u.memoizedState=g,function(){if((Jt&2)!==0)throw Error(r(440));return g.impl.apply(void 0,arguments)}}},gb={readContext:pn,use:yu,useCallback:iS,useContext:pn,useEffect:ub,useImperativeHandle:rS,useInsertionEffect:eS,useLayoutEffect:tS,useMemo:aS,useReducer:s0,useRef:o0,useState:function(){return s0(wc)},useDebugValue:fb,useDeferredValue:function(l,u){var g=hi();return sS(g,_r.memoizedState,l,u)},useTransition:function(){var l=s0(wc)[0],u=hi().memoizedState;return[typeof l=="boolean"?l:Kp(l),u]},useSyncExternalStore:z1,useId:uS,useHostTransitionStatus:pb,useFormState:Y1,useActionState:Y1,useOptimistic:function(l,u){var g=hi();return ib(g,_r,l,u)},useMemoCache:eb,useCacheRefresh:fS};gb.useEffectEvent=J1;var Ao={readContext:pn,use:yu,useCallback:iS,useContext:pn,useEffect:ub,useImperativeHandle:rS,useInsertionEffect:eS,useLayoutEffect:tS,useMemo:aS,useReducer:nb,useRef:o0,useState:function(){return nb(wc)},useDebugValue:fb,useDeferredValue:function(l,u){var g=hi();return _r===null?db(g,l,u):sS(g,_r.memoizedState,l,u)},useTransition:function(){var l=nb(wc)[0],u=hi().memoizedState;return[typeof l=="boolean"?l:Kp(l),u]},useSyncExternalStore:z1,useId:uS,useHostTransitionStatus:pb,useFormState:cb,useActionState:cb,useOptimistic:function(l,u){var g=hi();return _r!==null?ib(g,_r,l,u):(g.baseState=l,[l,g.queue.dispatch])},useMemoCache:eb,useCacheRefresh:fS};Ao.useEffectEvent=J1;function f0(l,u,g,b){u=l.memoizedState,g=g(b,u),g=g==null?u:p({},u,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var Qp={enqueueSetState:function(l,u,g){l=l._reactInternals;var b=Zs(),I=_c(b);I.payload=u,g!=null&&(I.callback=g),u=gu(l,I,b),u!==null&&(On(u,l,b),vu(u,l,b))},enqueueReplaceState:function(l,u,g){l=l._reactInternals;var b=Zs(),I=_c(b);I.tag=1,I.payload=u,g!=null&&(I.callback=g),u=gu(l,I,b),u!==null&&(On(u,l,b),vu(u,l,b))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var g=Zs(),b=_c(g);b.tag=2,u!=null&&(b.callback=u),u=gu(l,b,g),u!==null&&(On(u,l,g),vu(u,l,g))}};function vb(l,u,g,b,I,D,X){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,D,X):u.prototype&&u.prototype.isPureReactComponent?!qd(g,b)||!qd(I,D):!0}function yb(l,u,g,b){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(g,b),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(g,b),u.state!==l&&Qp.enqueueReplaceState(u,u.state,null)}function xu(l,u){var g=u;if("ref"in u){g={};for(var b in u)b!=="ref"&&(g[b]=u[b])}if(l=l.defaultProps){g===u&&(g=p({},g));for(var I in l)g[I]===void 0&&(g[I]=l[I])}return g}function gS(l){zp(l)}function bb(l){console.error(l)}function xb(l){zp(l)}function d0(l,u){try{var g=l.onUncaughtError;g(u.value,{componentStack:u.stack})}catch(b){setTimeout(function(){throw b})}}function vS(l,u,g){try{var b=l.onCaughtError;b(g.value,{componentStack:g.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(I){setTimeout(function(){throw I})}}function _b(l,u,g){return g=_c(g),g.tag=3,g.payload={element:null},g.callback=function(){d0(l,u)},g}function Sb(l){return l=_c(l),l.tag=3,l}function yS(l,u,g,b){var I=g.type.getDerivedStateFromError;if(typeof I=="function"){var D=b.value;l.payload=function(){return I(D)},l.callback=function(){vS(u,g,b)}}var X=g.stateNode;X!==null&&typeof X.componentDidCatch=="function"&&(l.callback=function(){vS(u,g,b),typeof I!="function"&&(gi===null?gi=new Set([this]):gi.add(this));var ie=b.stack;this.componentDidCatch(b.value,{componentStack:ie!==null?ie:""})})}function Di(l,u,g,b,I){if(g.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(u=g.alternate,u!==null&&Dl(u,g,I,!0),g=ys.current,g!==null){switch(g.tag){case 31:case 13:return Wa===null?gh():g.alternate===null&&Yr===0&&(Yr=3),g.flags&=-257,g.flags|=65536,g.lanes=I,b===Qg?g.flags|=16384:(u=g.updateQueue,u===null?g.updateQueue=new Set([b]):u.add(b),um(l,b,I)),!1;case 22:return g.flags|=65536,b===Qg?g.flags|=16384:(u=g.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([b])},g.updateQueue=u):(g=u.retryQueue,g===null?u.retryQueue=new Set([b]):g.add(b)),um(l,b,I)),!1}throw Error(r(435,g.tag))}return um(l,b,I),gh(),!1}if(Vn)return u=ys.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=I,b!==Jd&&(l=Error(r(422),{cause:b}),Pl(Hs(l,g)))):(b!==Jd&&(u=Error(r(423),{cause:b}),Pl(Hs(u,g))),l=l.current.alternate,l.flags|=65536,I&=-I,l.lanes|=I,b=Hs(b,g),I=_b(l.stateNode,b,I),rn(l,I),Yr!==4&&(Yr=2)),!1;var D=Error(r(520),{cause:b});if(D=Hs(D,g),Gf===null?Gf=[D]:Gf.push(D),Yr!==4&&(Yr=2),u===null)return!0;b=Hs(b,g),g=u;do{switch(g.tag){case 3:return g.flags|=65536,l=I&-I,g.lanes|=l,l=_b(g.stateNode,b,l),rn(g,l),!1;case 1:if(u=g.type,D=g.stateNode,(g.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(gi===null||!gi.has(D))))return g.flags|=65536,I&=-I,g.lanes|=I,I=Sb(I),yS(I,l,g,b),rn(g,I),!1}g=g.return}while(g!==null);return!1}var h0=Error(r(461)),Si=!1;function Ki(l,u,g,b){u.child=l===null?t0(u,null,g,b):xc(u,l.child,g,b)}function wb(l,u,g,b,I){g=g.render;var D=u.ref;if("ref"in b){var X={};for(var ie in b)ie!=="ref"&&(X[ie]=b[ie])}else X=b;return pu(u),b=i0(l,u,g,X,D,I),ie=Zy(),l!==null&&!Si?(Qy(l,u,I),pi(l,u,I)):(Vn&&ie&&Il(u),u.flags|=1,Ki(l,u,b,I),u.child)}function Uf(l,u,g,b,I){if(l===null){var D=g.type;return typeof D=="function"&&!Vg(D)&&D.defaultProps===void 0&&g.compare===null?(u.tag=15,u.type=D,p0(l,u,D,b,I)):(l=Ml(g.type,null,b,u,u.mode,I),l.ref=u.ref,l.return=u,u.child=l)}if(D=l.child,!x0(l,I)){var X=D.memoizedProps;if(g=g.compare,g=g!==null?g:qd,g(X,b)&&l.ref===u.ref)return pi(l,u,I)}return u.flags|=1,l=ms(D,b),l.ref=u.ref,l.return=u,u.child=l}function p0(l,u,g,b,I){if(l!==null){var D=l.memoizedProps;if(qd(D,b)&&l.ref===u.ref)if(Si=!1,u.pendingProps=b=D,x0(l,I))(l.flags&131072)!==0&&(Si=!0);else return u.lanes=l.lanes,pi(l,u,I)}return uh(l,u,g,b,I)}function Ff(l,u,g,b){var I=b.children,D=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),b.mode==="hidden"){if((u.flags&128)!==0){if(D=D!==null?D.baseLanes|g:g,l!==null){for(b=u.child=l.child,I=0;b!==null;)I=I|b.lanes|b.childLanes,b=b.sibling;b=I&~D}else b=0,u.child=null;return xs(l,u,D,g,b)}if((g&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&Hp(u,D!==null?D.cachePool:null),D!==null?k1(u,D):$y(),U1(u);else return b=u.lanes=536870912,xs(l,u,D!==null?D.baseLanes|g:g,g,b)}else D!==null?(Hp(u,D.cachePool),k1(u,D),bs(),u.memoizedState=null):(l!==null&&Hp(u,null),$y(),bs());return Ki(l,u,I,g),u.child}function kl(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function xs(l,u,g,b,I){var D=Zg();return D=D===null?null:{parent:_i._currentValue,pool:D},u.memoizedState={baseLanes:g,cachePool:D},l!==null&&Hp(u,null),$y(),U1(u),l!==null&&Dl(l,u,b,!0),u.childLanes=I,null}function m0(l,u){return u=b0({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function bS(l,u,g){return xc(u,l.child,null,g),l=m0(u,u.pendingProps),l.flags|=2,di(u),u.memoizedState=null,l}function g0(l,u,g){var b=u.pendingProps,I=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(Vn){if(b.mode==="hidden")return l=m0(u,b),u.lanes=536870912,kl(null,l);if(Xy(u),(l=Nr)?(l=l4(l,Gs),l=l!==null&&l.data==="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:gc!==null?{id:$r,overflow:el}:null,retryLane:536870912,hydrationErrors:null},g=Kd(l),g.return=u,u.child=g,ii=u,Nr=null)):l=null,l===null)throw Rl(u);return u.lanes=536870912,null}return m0(u,b)}var D=l.memoizedState;if(D!==null){var X=D.dehydrated;if(Xy(u),I)if(u.flags&256)u.flags&=-257,u=bS(l,u,g);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(r(558));else if(Si||Dl(l,u,g,!1),I=(g&l.childLanes)!==0,Si||I){if(b=vn,b!==null&&(X=ho(b,g),X!==0&&X!==D.retryLane))throw D.retryLane=X,Ga(l,X),On(b,l,X),h0;gh(),u=bS(l,u,g)}else l=D.treeContext,Nr=ql(X.nextSibling),ii=u,Vn=!0,vc=null,Gs=!1,l!==null&&Wg(u,l),u=m0(u,b),u.flags|=4096;return u}return l=ms(l.child,{mode:b.mode,children:b.children}),l.ref=u.ref,u.child=l,l.return=u,l}function zf(l,u){var g=u.ref;if(g===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(r(284));(l===null||l.ref!==g)&&(u.flags|=4194816)}}function uh(l,u,g,b,I){return pu(u),g=i0(l,u,g,b,void 0,I),b=Zy(),l!==null&&!Si?(Qy(l,u,I),pi(l,u,I)):(Vn&&b&&Il(u),u.flags|=1,Ki(l,u,g,I),u.child)}function Jp(l,u,g,b,I,D){return pu(u),u.updateQueue=null,g=Lf(u,b,g,I),F1(l),b=Zy(),l!==null&&!Si?(Qy(l,u,D),pi(l,u,D)):(Vn&&b&&Il(u),u.flags|=1,Ki(l,u,g,D),u.child)}function v0(l,u,g,b,I){if(pu(u),u.stateNode===null){var D=lu,X=g.contextType;typeof X=="object"&&X!==null&&(D=pn(X)),D=new g(b,D),u.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=Qp,u.stateNode=D,D._reactInternals=u,D=u.stateNode,D.props=b,D.state=u.memoizedState,D.refs={},Wp(u),X=g.contextType,D.context=typeof X=="object"&&X!==null?pn(X):lu,D.state=u.memoizedState,X=g.getDerivedStateFromProps,typeof X=="function"&&(f0(u,g,X,b),D.state=u.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(X=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),X!==D.state&&Qp.enqueueReplaceState(D,D.state,null),ih(u,b,D,I),$p(),D.state=u.memoizedState),typeof D.componentDidMount=="function"&&(u.flags|=4194308),b=!0}else if(l===null){D=u.stateNode;var ie=u.memoizedProps,be=xu(g,ie);D.props=be;var Be=D.context,nt=g.contextType;X=lu,typeof nt=="object"&&nt!==null&&(X=pn(nt));var ut=g.getDerivedStateFromProps;nt=typeof ut=="function"||typeof D.getSnapshotBeforeUpdate=="function",ie=u.pendingProps!==ie,nt||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(ie||Be!==X)&&yb(u,D,b,X),qa=!1;var Ge=u.memoizedState;D.state=Ge,ih(u,b,D,I),$p(),Be=u.memoizedState,ie||Ge!==Be||qa?(typeof ut=="function"&&(f0(u,g,ut,b),Be=u.memoizedState),(be=qa||vb(u,g,be,b,Ge,Be,X))?(nt||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(u.flags|=4194308)):(typeof D.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=b,u.memoizedState=Be),D.props=b,D.state=Be,D.context=X,b=be):(typeof D.componentDidMount=="function"&&(u.flags|=4194308),b=!1)}else{D=u.stateNode,qy(l,u),X=u.memoizedProps,nt=xu(g,X),D.props=nt,ut=u.pendingProps,Ge=D.context,Be=g.contextType,be=lu,typeof Be=="object"&&Be!==null&&(be=pn(Be)),ie=g.getDerivedStateFromProps,(Be=typeof ie=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(X!==ut||Ge!==be)&&yb(u,D,b,be),qa=!1,Ge=u.memoizedState,D.state=Ge,ih(u,b,D,I),$p();var Ke=u.memoizedState;X!==ut||Ge!==Ke||qa||l!==null&&l.dependencies!==null&&Vp(l.dependencies)?(typeof ie=="function"&&(f0(u,g,ie,b),Ke=u.memoizedState),(nt=qa||vb(u,g,nt,b,Ge,Ke,be)||l!==null&&l.dependencies!==null&&Vp(l.dependencies))?(Be||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(b,Ke,be),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(b,Ke,be)),typeof D.componentDidUpdate=="function"&&(u.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof D.componentDidUpdate!="function"||X===l.memoizedProps&&Ge===l.memoizedState||(u.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||X===l.memoizedProps&&Ge===l.memoizedState||(u.flags|=1024),u.memoizedProps=b,u.memoizedState=Ke),D.props=b,D.state=Ke,D.context=be,b=nt):(typeof D.componentDidUpdate!="function"||X===l.memoizedProps&&Ge===l.memoizedState||(u.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||X===l.memoizedProps&&Ge===l.memoizedState||(u.flags|=1024),b=!1)}return D=b,zf(l,u),b=(u.flags&128)!==0,D||b?(D=u.stateNode,g=b&&typeof g.getDerivedStateFromError!="function"?null:D.render(),u.flags|=1,l!==null&&b?(u.child=xc(u,l.child,null,I),u.child=xc(u,null,g,I)):Ki(l,u,g,I),u.memoizedState=D.state,l=u.child):l=pi(l,u,I),l}function xS(l,u,g,b){return du(),u.flags|=256,Ki(l,u,g,b),u.child}var Eb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Aa(l){return{baseLanes:l,cachePool:Gy()}}function y0(l,u,g){return l=l!==null?l.childLanes&~g:0,u&&(l|=Ya),l}function _S(l,u,g){var b=u.pendingProps,I=!1,D=(u.flags&128)!==0,X;if((X=D)||(X=l!==null&&l.memoizedState===null?!1:(Hn.current&2)!==0),X&&(I=!0,u.flags&=-129),X=(u.flags&32)!==0,u.flags&=-33,l===null){if(Vn){if(I?Sc(u):bs(),(l=Nr)?(l=l4(l,Gs),l=l!==null&&l.data!=="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:gc!==null?{id:$r,overflow:el}:null,retryLane:536870912,hydrationErrors:null},g=Kd(l),g.return=u,u.child=g,ii=u,Nr=null)):l=null,l===null)throw Rl(u);return sI(l)?u.lanes=32:u.lanes=536870912,null}var ie=b.children;return b=b.fallback,I?(bs(),I=u.mode,ie=b0({mode:"hidden",children:ie},I),b=cu(b,I,g,null),ie.return=u,b.return=u,ie.sibling=b,u.child=ie,b=u.child,b.memoizedState=Aa(g),b.childLanes=y0(l,X,g),u.memoizedState=Eb,kl(null,b)):(Sc(u),em(u,ie))}var be=l.memoizedState;if(be!==null&&(ie=be.dehydrated,ie!==null)){if(D)u.flags&256?(Sc(u),u.flags&=-257,u=Ab(l,u,g)):u.memoizedState!==null?(bs(),u.child=l.child,u.flags|=128,u=null):(bs(),ie=b.fallback,I=u.mode,b=b0({mode:"visible",children:b.children},I),ie=cu(ie,I,g,null),ie.flags|=2,b.return=u,ie.return=u,b.sibling=ie,u.child=b,xc(u,l.child,null,g),b=u.child,b.memoizedState=Aa(g),b.childLanes=y0(l,X,g),u.memoizedState=Eb,u=kl(null,b));else if(Sc(u),sI(ie)){if(X=ie.nextSibling&&ie.nextSibling.dataset,X)var Be=X.dgst;X=Be,b=Error(r(419)),b.stack="",b.digest=X,Pl({value:b,source:null,stack:null}),u=Ab(l,u,g)}else if(Si||Dl(l,u,g,!1),X=(g&l.childLanes)!==0,Si||X){if(X=vn,X!==null&&(b=ho(X,g),b!==0&&b!==be.retryLane))throw be.retryLane=b,Ga(l,b),On(X,l,b),h0;aI(ie)||gh(),u=Ab(l,u,g)}else aI(ie)?(u.flags|=192,u.child=l.child,u=null):(l=be.treeContext,Nr=ql(ie.nextSibling),ii=u,Vn=!0,vc=null,Gs=!1,l!==null&&Wg(u,l),u=em(u,b.children),u.flags|=4096);return u}return I?(bs(),ie=b.fallback,I=u.mode,be=l.child,Be=be.sibling,b=ms(be,{mode:"hidden",children:b.children}),b.subtreeFlags=be.subtreeFlags&65011712,Be!==null?ie=ms(Be,ie):(ie=cu(ie,I,g,null),ie.flags|=2),ie.return=u,b.return=u,b.sibling=ie,u.child=b,kl(null,b),b=u.child,ie=l.child.memoizedState,ie===null?ie=Aa(g):(I=ie.cachePool,I!==null?(be=_i._currentValue,I=I.parent!==be?{parent:be,pool:be}:I):I=Gy(),ie={baseLanes:ie.baseLanes|g,cachePool:I}),b.memoizedState=ie,b.childLanes=y0(l,X,g),u.memoizedState=Eb,kl(l.child,b)):(Sc(u),g=l.child,l=g.sibling,g=ms(g,{mode:"visible",children:b.children}),g.return=u,g.sibling=null,l!==null&&(X=u.deletions,X===null?(u.deletions=[l],u.flags|=16):X.push(l)),u.child=g,u.memoizedState=null,g)}function em(l,u){return u=b0({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function b0(l,u){return l=Wr(22,l,null,u),l.lanes=0,l}function Ab(l,u,g){return xc(u,l.child,null,g),l=em(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function SS(l,u,g){l.lanes|=u;var b=l.alternate;b!==null&&(b.lanes|=u),Xg(l.return,u,g)}function jf(l,u,g,b,I,D){var X=l.memoizedState;X===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:b,tail:g,tailMode:I,treeForkCount:D}:(X.isBackwards=u,X.rendering=null,X.renderingStartTime=0,X.last=b,X.tail=g,X.tailMode=I,X.treeForkCount=D)}function _s(l,u,g){var b=u.pendingProps,I=b.revealOrder,D=b.tail;b=b.children;var X=Hn.current,ie=(X&2)!==0;if(ie?(X=X&1|2,u.flags|=128):X&=1,de(Hn,X),Ki(l,u,b,g),b=Vn?Qd:0,!ie&&l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&SS(l,g,u);else if(l.tag===19)SS(l,g,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(I){case"forwards":for(g=u.child,I=null;g!==null;)l=g.alternate,l!==null&&Ws(l)===null&&(I=g),g=g.sibling;g=I,g===null?(I=u.child,u.child=null):(I=g.sibling,g.sibling=null),jf(u,!1,I,g,D,b);break;case"backwards":case"unstable_legacy-backwards":for(g=null,I=u.child,u.child=null;I!==null;){if(l=I.alternate,l!==null&&Ws(l)===null){u.child=I;break}l=I.sibling,I.sibling=g,g=I,I=l}jf(u,!0,g,null,D,b);break;case"together":jf(u,!1,null,null,void 0,b);break;default:u.memoizedState=null}return u.child}function pi(l,u,g){if(l!==null&&(u.dependencies=l.dependencies),Vl|=u.lanes,(g&u.childLanes)===0)if(l!==null){if(Dl(l,u,g,!1),(g&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(r(153));if(u.child!==null){for(l=u.child,g=ms(l,l.pendingProps),u.child=g,g.return=u;l.sibling!==null;)l=l.sibling,g=g.sibling=ms(l,l.pendingProps),g.return=u;g.sibling=null}return u.child}function x0(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&Vp(l)))}function $C(l,u,g){switch(u.tag){case 3:Xe(u,u.stateNode.containerInfo),yc(u,_i,l.memoizedState.cache),du();break;case 27:case 5:qe(u);break;case 4:Xe(u,u.stateNode.containerInfo);break;case 10:yc(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,Xy(u),null;break;case 13:var b=u.memoizedState;if(b!==null)return b.dehydrated!==null?(Sc(u),u.flags|=128,null):(g&u.child.childLanes)!==0?_S(l,u,g):(Sc(u),l=pi(l,u,g),l!==null?l.sibling:null);Sc(u);break;case 19:var I=(l.flags&128)!==0;if(b=(g&u.childLanes)!==0,b||(Dl(l,u,g,!1),b=(g&u.childLanes)!==0),I){if(b)return _s(l,u,g);u.flags|=128}if(I=u.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),de(Hn,Hn.current),b)break;return null;case 22:return u.lanes=0,Ff(l,u,g,u.pendingProps);case 24:yc(u,_i,l.memoizedState.cache)}return pi(l,u,g)}function _0(l,u,g){if(l!==null)if(l.memoizedProps!==u.pendingProps)Si=!0;else{if(!x0(l,g)&&(u.flags&128)===0)return Si=!1,$C(l,u,g);Si=(l.flags&131072)!==0}else Si=!1,Vn&&(u.flags&1048576)!==0&&I1(u,Qd,u.index);switch(u.lanes=0,u.tag){case 16:e:{var b=u.pendingProps;if(l=If(u.elementType),u.type=l,typeof l=="function")Vg(l)?(b=xu(l,b),u.tag=1,u=v0(null,u,l,b,g)):(u.tag=0,u=uh(null,u,l,b,g));else{if(l!=null){var I=l.$$typeof;if(I===O){u.tag=11,u=wb(null,u,l,b,g);break e}else if(I===U){u.tag=14,u=Uf(null,u,l,b,g);break e}}throw u=Q(l)||l,Error(r(306,u,""))}}return u;case 0:return uh(l,u,u.type,u.pendingProps,g);case 1:return b=u.type,I=xu(b,u.pendingProps),v0(l,u,b,I,g);case 3:e:{if(Xe(u,u.stateNode.containerInfo),l===null)throw Error(r(387));b=u.pendingProps;var D=u.memoizedState;I=D.element,qy(l,u),ih(u,b,null,g);var X=u.memoizedState;if(b=X.cache,yc(u,_i,b),b!==D.cache&&Yg(u,[_i],g,!0),$p(),b=X.element,D.isDehydrated)if(D={element:b,isDehydrated:!1,cache:X.cache},u.updateQueue.baseState=D,u.memoizedState=D,u.flags&256){u=xS(l,u,b,g);break e}else if(b!==I){I=Hs(Error(r(424)),u),Pl(I),u=xS(l,u,b,g);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Nr=ql(l.firstChild),ii=u,Vn=!0,vc=null,Gs=!0,g=t0(u,null,b,g),u.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(du(),b===I){u=pi(l,u,g);break e}Ki(l,u,b,g)}u=u.child}return u;case 26:return zf(l,u),l===null?(g=p4(u.type,null,u.pendingProps,null))?u.memoizedState=g:Vn||(g=u.type,l=u.pendingProps,b=TS(ye.current).createElement(g),b[br]=u,b[kr]=l,Za(b,g,l),te(b),u.stateNode=b):u.memoizedState=p4(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return qe(u),l===null&&Vn&&(b=u.stateNode=f4(u.type,u.pendingProps,ye.current),ii=u,Gs=!0,I=Nr,xh(u.type)?(oI=I,Nr=ql(b.firstChild)):Nr=I),Ki(l,u,u.pendingProps.children,g),zf(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&Vn&&((I=b=Nr)&&(b=WY(b,u.type,u.pendingProps,Gs),b!==null?(u.stateNode=b,ii=u,Nr=ql(b.firstChild),Gs=!1,I=!0):I=!1),I||Rl(u)),qe(u),I=u.type,D=u.pendingProps,X=l!==null?l.memoizedProps:null,b=D.children,nI(I,D)?b=null:X!==null&&nI(I,X)&&(u.flags|=32),u.memoizedState!==null&&(I=i0(l,u,kf,null,null,g),kb._currentValue=I),zf(l,u),Ki(l,u,b,g),u.child;case 6:return l===null&&Vn&&((l=g=Nr)&&(g=$Y(g,u.pendingProps,Gs),g!==null?(u.stateNode=g,ii=u,Nr=null,l=!0):l=!1),l||Rl(u)),null;case 13:return _S(l,u,g);case 4:return Xe(u,u.stateNode.containerInfo),b=u.pendingProps,l===null?u.child=xc(u,null,b,g):Ki(l,u,b,g),u.child;case 11:return wb(l,u,u.type,u.pendingProps,g);case 7:return Ki(l,u,u.pendingProps,g),u.child;case 8:return Ki(l,u,u.pendingProps.children,g),u.child;case 12:return Ki(l,u,u.pendingProps.children,g),u.child;case 10:return b=u.pendingProps,yc(u,u.type,b.value),Ki(l,u,b.children,g),u.child;case 9:return I=u.type._context,b=u.pendingProps.children,pu(u),I=pn(I),b=b(I),u.flags|=1,Ki(l,u,b,g),u.child;case 14:return Uf(l,u,u.type,u.pendingProps,g);case 15:return p0(l,u,u.type,u.pendingProps,g);case 19:return _s(l,u,g);case 31:return g0(l,u,g);case 22:return Ff(l,u,g,u.pendingProps);case 24:return pu(u),b=pn(_i),l===null?(I=Zg(),I===null&&(I=vn,D=jy(),I.pooledCache=D,D.refCount++,D!==null&&(I.pooledCacheLanes|=g),I=D),u.memoizedState={parent:b,cache:I},Wp(u),yc(u,_i,I)):((l.lanes&g)!==0&&(qy(l,u),ih(u,null,null,g),$p()),I=l.memoizedState,D=u.memoizedState,I.parent!==b?(I={parent:b,cache:b},u.memoizedState=I,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=I),yc(u,_i,b)):(b=D.cache,yc(u,_i,b),b!==I.cache&&Yg(u,[_i],g,!0))),Ki(l,u,u.pendingProps.children,g),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Ul(l){l.flags|=4}function tm(l,u,g,b,I){if((u=(l.mode&32)!==0)&&(u=!1),u){if(l.flags|=16777216,(I&335544128)===I)if(l.stateNode.complete)l.flags|=8192;else if(Zr())l.flags|=8192;else throw Ll=Qg,Gp}else l.flags&=-16777217}function Tb(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!b4(u))if(Zr())l.flags|=8192;else throw Ll=Qg,Gp}function Ec(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?nn():536870912,l.lanes|=u,Fr|=u)}function Fl(l,u){if(!Vn)switch(l.tailMode){case"hidden":u=l.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function Sr(l){var u=l.alternate!==null&&l.alternate.child===l.child,g=0,b=0;if(u)for(var I=l.child;I!==null;)g|=I.lanes|I.childLanes,b|=I.subtreeFlags&65011712,b|=I.flags&65011712,I.return=l,I=I.sibling;else for(I=l.child;I!==null;)g|=I.lanes|I.childLanes,b|=I.subtreeFlags,b|=I.flags,I.return=l,I=I.sibling;return l.subtreeFlags|=b,l.childLanes=g,u}function nm(l,u,g){var b=u.pendingProps;switch(qg(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sr(u),null;case 1:return Sr(u),null;case 3:return g=u.stateNode,b=null,l!==null&&(b=l.memoizedState.cache),u.memoizedState.cache!==b&&(u.flags|=2048),Ol(_i),me(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(eh(u)?Ul(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,$g())),Sr(u),null;case 26:var I=u.type,D=u.memoizedState;return l===null?(Ul(u),D!==null?(Sr(u),Tb(u,D)):(Sr(u),tm(u,I,null,b,g))):D?D!==l.memoizedState?(Ul(u),Sr(u),Tb(u,D)):(Sr(u),u.flags&=-16777217):(l=l.memoizedProps,l!==b&&Ul(u),Sr(u),tm(u,I,l,b,g)),null;case 27:if(mt(u),g=ye.current,I=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==b&&Ul(u);else{if(!b){if(u.stateNode===null)throw Error(r(166));return Sr(u),null}l=ve.current,eh(u)?R1(u):(l=f4(I,b,g),u.stateNode=l,Ul(u))}return Sr(u),null;case 5:if(mt(u),I=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==b&&Ul(u);else{if(!b){if(u.stateNode===null)throw Error(r(166));return Sr(u),null}if(D=ve.current,eh(u))R1(u);else{var X=TS(ye.current);switch(D){case 1:D=X.createElementNS("http://www.w3.org/2000/svg",I);break;case 2:D=X.createElementNS("http://www.w3.org/1998/Math/MathML",I);break;default:switch(I){case"svg":D=X.createElementNS("http://www.w3.org/2000/svg",I);break;case"math":D=X.createElementNS("http://www.w3.org/1998/Math/MathML",I);break;case"script":D=X.createElement("div"),D.innerHTML="<script><\/script>",D=D.removeChild(D.firstChild);break;case"select":D=typeof b.is=="string"?X.createElement("select",{is:b.is}):X.createElement("select"),b.multiple?D.multiple=!0:b.size&&(D.size=b.size);break;default:D=typeof b.is=="string"?X.createElement(I,{is:b.is}):X.createElement(I)}}D[br]=u,D[kr]=b;e:for(X=u.child;X!==null;){if(X.tag===5||X.tag===6)D.appendChild(X.stateNode);else if(X.tag!==4&&X.tag!==27&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===u)break e;for(;X.sibling===null;){if(X.return===null||X.return===u)break e;X=X.return}X.sibling.return=X.return,X=X.sibling}u.stateNode=D;e:switch(Za(D,I,b),I){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}b&&Ul(u)}}return Sr(u),tm(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,g),null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==b&&Ul(u);else{if(typeof b!="string"&&u.stateNode===null)throw Error(r(166));if(l=ye.current,eh(u)){if(l=u.stateNode,g=u.memoizedProps,b=null,I=ii,I!==null)switch(I.tag){case 27:case 5:b=I.memoizedProps}l[br]=u,l=!!(l.nodeValue===g||b!==null&&b.suppressHydrationWarning===!0||e4(l.nodeValue,g)),l||Rl(u,!0)}else l=TS(l).createTextNode(b),l[br]=u,u.stateNode=l}return Sr(u),null;case 31:if(g=u.memoizedState,l===null||l.memoizedState!==null){if(b=eh(u),g!==null){if(l===null){if(!b)throw Error(r(318));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(557));l[br]=u}else du(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Sr(u),l=!1}else g=$g(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=g),l=!0;if(!l)return u.flags&256?(di(u),u):(di(u),null);if((u.flags&128)!==0)throw Error(r(558))}return Sr(u),null;case 13:if(b=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(I=eh(u),b!==null&&b.dehydrated!==null){if(l===null){if(!I)throw Error(r(318));if(I=u.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(r(317));I[br]=u}else du(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Sr(u),I=!1}else I=$g(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=I),I=!0;if(!I)return u.flags&256?(di(u),u):(di(u),null)}return di(u),(u.flags&128)!==0?(u.lanes=g,u):(g=b!==null,l=l!==null&&l.memoizedState!==null,g&&(b=u.child,I=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(I=b.alternate.memoizedState.cachePool.pool),D=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(D=b.memoizedState.cachePool.pool),D!==I&&(b.flags|=2048)),g!==l&&g&&(u.child.flags|=8192),Ec(u,u.updateQueue),Sr(u),null);case 4:return me(),l===null&&ZC(u.stateNode.containerInfo),Sr(u),null;case 10:return Ol(u.type),Sr(u),null;case 19:if(re(Hn),b=u.memoizedState,b===null)return Sr(u),null;if(I=(u.flags&128)!==0,D=b.rendering,D===null)if(I)Fl(b,!1);else{if(Yr!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(D=Ws(l),D!==null){for(u.flags|=128,Fl(b,!1),l=D.updateQueue,u.updateQueue=l,Ec(u,l),u.subtreeFlags=0,l=g,g=u.child;g!==null;)Yd(g,l),g=g.sibling;return de(Hn,Hn.current&1|2),Vn&&Cl(u,b.treeForkCount),u.child}l=l.sibling}b.tail!==null&&Y()>mi&&(u.flags|=128,I=!0,Fl(b,!1),u.lanes=4194304)}else{if(!I)if(l=Ws(D),l!==null){if(u.flags|=128,I=!0,l=l.updateQueue,u.updateQueue=l,Ec(u,l),Fl(b,!0),b.tail===null&&b.tailMode==="hidden"&&!D.alternate&&!Vn)return Sr(u),null}else 2*Y()-b.renderingStartTime>mi&&g!==536870912&&(u.flags|=128,I=!0,Fl(b,!1),u.lanes=4194304);b.isBackwards?(D.sibling=u.child,u.child=D):(l=b.last,l!==null?l.sibling=D:u.child=D,b.last=D)}return b.tail!==null?(l=b.tail,b.rendering=l,b.tail=l.sibling,b.renderingStartTime=Y(),l.sibling=null,g=Hn.current,de(Hn,I?g&1|2:g&1),Vn&&Cl(u,b.treeForkCount),l):(Sr(u),null);case 22:case 23:return di(u),Xp(),b=u.memoizedState!==null,l!==null?l.memoizedState!==null!==b&&(u.flags|=8192):b&&(u.flags|=8192),b?(g&536870912)!==0&&(u.flags&128)===0&&(Sr(u),u.subtreeFlags&6&&(u.flags|=8192)):Sr(u),g=u.updateQueue,g!==null&&Ec(u,g.retryQueue),g=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),b=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(b=u.memoizedState.cachePool.pool),b!==g&&(u.flags|=2048),l!==null&&re(mu),null;case 24:return g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),Ol(_i),Sr(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function To(l,u){switch(qg(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Ol(_i),me(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return mt(u),null;case 31:if(u.memoizedState!==null){if(di(u),u.alternate===null)throw Error(r(340));du()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(di(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(r(340));du()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return re(Hn),null;case 4:return me(),null;case 10:return Ol(u.type),null;case 22:case 23:return di(u),Xp(),l!==null&&re(mu),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return Ol(_i),null;case 25:return null;default:return null}}function $s(l,u){switch(qg(u),u.tag){case 3:Ol(_i),me();break;case 26:case 27:case 5:mt(u);break;case 4:me();break;case 31:u.memoizedState!==null&&di(u);break;case 13:di(u);break;case 19:re(Hn);break;case 10:Ol(u.type);break;case 22:case 23:di(u),Xp(),l!==null&&re(mu);break;case 24:Ol(_i)}}function Mo(l,u){try{var g=u.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var I=b.next;g=I;do{if((g.tag&l)===l){b=void 0;var D=g.create,X=g.inst;b=D(),X.destroy=b}g=g.next}while(g!==I)}}catch(ie){ar(u,u.return,ie)}}function da(l,u,g){try{var b=u.updateQueue,I=b!==null?b.lastEffect:null;if(I!==null){var D=I.next;b=D;do{if((b.tag&l)===l){var X=b.inst,ie=X.destroy;if(ie!==void 0){X.destroy=void 0,I=u;var be=g,Be=ie;try{Be()}catch(nt){ar(I,be,nt)}}}b=b.next}while(b!==D)}}catch(nt){ar(u,u.return,nt)}}function tl(l){var u=l.updateQueue;if(u!==null){var g=l.stateNode;try{L1(u,g)}catch(b){ar(l,l.return,b)}}}function Zi(l,u,g){g.props=xu(l.type,l.memoizedProps),g.state=l.memoizedState;try{g.componentWillUnmount()}catch(b){ar(l,u,b)}}function Ac(l,u){try{var g=l.ref;if(g!==null){switch(l.tag){case 26:case 27:case 5:var b=l.stateNode;break;case 30:b=l.stateNode;break;default:b=l.stateNode}typeof g=="function"?l.refCleanup=g(b):g.current=b}}catch(I){ar(l,u,I)}}function ha(l,u){var g=l.ref,b=l.refCleanup;if(g!==null)if(typeof b=="function")try{b()}catch(I){ar(l,u,I)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(I){ar(l,u,I)}else g.current=null}function rm(l){var u=l.type,g=l.memoizedProps,b=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":g.autoFocus&&b.focus();break e;case"img":g.src?b.src=g.src:g.srcSet&&(b.srcset=g.srcSet)}}catch(I){ar(l,l.return,I)}}function Li(l,u,g){try{var b=l.stateNode;jY(b,l.type,g,u),b[kr]=u}catch(I){ar(l,l.return,I)}}function Hr(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&xh(l.type)||l.tag===4}function jn(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Hr(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&xh(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function zl(l,u,g){var b=l.tag;if(b===5||b===6)l=l.stateNode,u?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(l,u):(u=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,u.appendChild(l),g=g._reactRootContainer,g!=null||u.onclick!==null||(u.onclick=ja));else if(b!==4&&(b===27&&xh(l.type)&&(g=l.stateNode,u=null),l=l.child,l!==null))for(zl(l,u,g),l=l.sibling;l!==null;)zl(l,u,g),l=l.sibling}function $a(l,u,g){var b=l.tag;if(b===5||b===6)l=l.stateNode,u?g.insertBefore(l,u):g.appendChild(l);else if(b!==4&&(b===27&&xh(l.type)&&(g=l.stateNode),l=l.child,l!==null))for($a(l,u,g),l=l.sibling;l!==null;)$a(l,u,g),l=l.sibling}function S0(l){var u=l.stateNode,g=l.memoizedProps;try{for(var b=l.type,I=u.attributes;I.length;)u.removeAttributeNode(I[0]);Za(u,b,g),u[br]=l,u[kr]=g}catch(D){ar(l,l.return,D)}}var Co=!1,Or=!1,nl=!1,wS=typeof WeakSet=="function"?WeakSet:Set,Qi=null;function XC(l,u){if(l=l.containerInfo,eI=OS,l=A1(l),Ly(l)){if("selectionStart"in l)var g={start:l.selectionStart,end:l.selectionEnd};else e:{g=(g=l.ownerDocument)&&g.defaultView||window;var b=g.getSelection&&g.getSelection();if(b&&b.rangeCount!==0){g=b.anchorNode;var I=b.anchorOffset,D=b.focusNode;b=b.focusOffset;try{g.nodeType,D.nodeType}catch{g=null;break e}var X=0,ie=-1,be=-1,Be=0,nt=0,ut=l,Ge=null;t:for(;;){for(var Ke;ut!==g||I!==0&&ut.nodeType!==3||(ie=X+I),ut!==D||b!==0&&ut.nodeType!==3||(be=X+b),ut.nodeType===3&&(X+=ut.nodeValue.length),(Ke=ut.firstChild)!==null;)Ge=ut,ut=Ke;for(;;){if(ut===l)break t;if(Ge===g&&++Be===I&&(ie=X),Ge===D&&++nt===b&&(be=X),(Ke=ut.nextSibling)!==null)break;ut=Ge,Ge=ut.parentNode}ut=Ke}g=ie===-1||be===-1?null:{start:ie,end:be}}else g=null}g=g||{start:0,end:0}}else g=null;for(tI={focusedElem:l,selectionRange:g},OS=!1,Qi=u;Qi!==null;)if(u=Qi,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,Qi=l;else for(;Qi!==null;){switch(u=Qi,D=u.alternate,l=u.flags,u.tag){case 0:if((l&4)!==0&&(l=u.updateQueue,l=l!==null?l.events:null,l!==null))for(g=0;g<l.length;g++)I=l[g],I.ref.impl=I.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&D!==null){l=void 0,g=u,I=D.memoizedProps,D=D.memoizedState,b=g.stateNode;try{var Xt=xu(g.type,I);l=b.getSnapshotBeforeUpdate(Xt,D),b.__reactInternalSnapshotBeforeUpdate=l}catch(fn){ar(g,g.return,fn)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,g=l.nodeType,g===9)iI(l);else if(g===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":iI(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=u.sibling,l!==null){l.return=u.return,Qi=l;break}Qi=u.return}}function Gr(l,u,g){var b=g.flags;switch(g.tag){case 0:case 11:case 15:Po(l,g),b&4&&Mo(5,g);break;case 1:if(Po(l,g),b&4)if(l=g.stateNode,u===null)try{l.componentDidMount()}catch(X){ar(g,g.return,X)}else{var I=xu(g.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(I,u,l.__reactInternalSnapshotBeforeUpdate)}catch(X){ar(g,g.return,X)}}b&64&&tl(g),b&512&&Ac(g,g.return);break;case 3:if(Po(l,g),b&64&&(l=g.updateQueue,l!==null)){if(u=null,g.child!==null)switch(g.child.tag){case 27:case 5:u=g.child.stateNode;break;case 1:u=g.child.stateNode}try{L1(l,u)}catch(X){ar(g,g.return,X)}}break;case 27:u===null&&b&4&&S0(g);case 26:case 5:Po(l,g),u===null&&b&4&&rm(g),b&512&&Ac(g,g.return);break;case 12:Po(l,g);break;case 31:Po(l,g),b&4&&_u(l,g);break;case 13:Po(l,g),b&4&&fh(l,g),b&64&&(l=g.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(g=_.bind(null,g),XY(l,g))));break;case 22:if(b=g.memoizedState!==null||Co,!b){u=u!==null&&u.memoizedState!==null||Or,I=Co;var D=Or;Co=b,(Or=u)&&!D?Xa(l,g,(g.subtreeFlags&8772)!==0):Po(l,g),Co=I,Or=D}break;case 30:break;default:Po(l,g)}}function im(l){var u=l.alternate;u!==null&&(l.alternate=null,im(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&hs(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var mr=null,Ta=!1;function Io(l,u,g){for(g=g.child;g!==null;)w0(l,u,g),g=g.sibling}function w0(l,u,g){if(tt&&typeof tt.onCommitFiberUnmount=="function")try{tt.onCommitFiberUnmount(it,g)}catch{}switch(g.tag){case 26:Or||ha(g,u),Io(l,u,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Or||ha(g,u);var b=mr,I=Ta;xh(g.type)&&(mr=g.stateNode,Ta=!1),Io(l,u,g),Ob(g.stateNode),mr=b,Ta=I;break;case 5:Or||ha(g,u);case 6:if(b=mr,I=Ta,mr=null,Io(l,u,g),mr=b,Ta=I,mr!==null)if(Ta)try{(mr.nodeType===9?mr.body:mr.nodeName==="HTML"?mr.ownerDocument.body:mr).removeChild(g.stateNode)}catch(D){ar(g,u,D)}else try{mr.removeChild(g.stateNode)}catch(D){ar(g,u,D)}break;case 18:mr!==null&&(Ta?(l=mr,s4(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,g.stateNode),P0(l)):s4(mr,g.stateNode));break;case 4:b=mr,I=Ta,mr=g.stateNode.containerInfo,Ta=!0,Io(l,u,g),mr=b,Ta=I;break;case 0:case 11:case 14:case 15:da(2,g,u),Or||da(4,g,u),Io(l,u,g);break;case 1:Or||(ha(g,u),b=g.stateNode,typeof b.componentWillUnmount=="function"&&Zi(g,u,b)),Io(l,u,g);break;case 21:Io(l,u,g);break;case 22:Or=(b=Or)||g.memoizedState!==null,Io(l,u,g),Or=b;break;default:Io(l,u,g)}}function _u(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{P0(l)}catch(g){ar(u,u.return,g)}}}function fh(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{P0(l)}catch(g){ar(u,u.return,g)}}function Mb(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new wS),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new wS),u;default:throw Error(r(435,l.tag))}}function Tc(l,u){var g=Mb(l);u.forEach(function(b){if(!g.has(b)){g.add(b);var I=M.bind(null,l,b);b.then(I,I)}})}function ki(l,u){var g=u.deletions;if(g!==null)for(var b=0;b<g.length;b++){var I=g[b],D=l,X=u,ie=X;e:for(;ie!==null;){switch(ie.tag){case 27:if(xh(ie.type)){mr=ie.stateNode,Ta=!1;break e}break;case 5:mr=ie.stateNode,Ta=!1;break e;case 3:case 4:mr=ie.stateNode.containerInfo,Ta=!0;break e}ie=ie.return}if(mr===null)throw Error(r(160));w0(D,X,I),mr=null,Ta=!1,D=I.alternate,D!==null&&(D.return=null),I.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)Su(u,l),u=u.sibling}var Ro=null;function Su(l,u){var g=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:ki(u,l),Ui(l),b&4&&(da(3,l,l.return),Mo(3,l),da(5,l,l.return));break;case 1:ki(u,l),Ui(l),b&512&&(Or||g===null||ha(g,g.return)),b&64&&Co&&(l=l.updateQueue,l!==null&&(b=l.callbacks,b!==null&&(g=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=g===null?b:g.concat(b))));break;case 26:var I=Ro;if(ki(u,l),Ui(l),b&512&&(Or||g===null||ha(g,g.return)),b&4){var D=g!==null?g.memoizedState:null;if(b=l.memoizedState,g===null)if(b===null)if(l.stateNode===null){e:{b=l.type,g=l.memoizedProps,I=I.ownerDocument||I;t:switch(b){case"title":D=I.getElementsByTagName("title")[0],(!D||D[qi]||D[br]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=I.createElement(b),I.head.insertBefore(D,I.querySelector("head > title"))),Za(D,b,g),D[br]=l,te(D),b=D;break e;case"link":var X=v4("link","href",I).get(b+(g.href||""));if(X){for(var ie=0;ie<X.length;ie++)if(D=X[ie],D.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&D.getAttribute("rel")===(g.rel==null?null:g.rel)&&D.getAttribute("title")===(g.title==null?null:g.title)&&D.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){X.splice(ie,1);break t}}D=I.createElement(b),Za(D,b,g),I.head.appendChild(D);break;case"meta":if(X=v4("meta","content",I).get(b+(g.content||""))){for(ie=0;ie<X.length;ie++)if(D=X[ie],D.getAttribute("content")===(g.content==null?null:""+g.content)&&D.getAttribute("name")===(g.name==null?null:g.name)&&D.getAttribute("property")===(g.property==null?null:g.property)&&D.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&D.getAttribute("charset")===(g.charSet==null?null:g.charSet)){X.splice(ie,1);break t}}D=I.createElement(b),Za(D,b,g),I.head.appendChild(D);break;default:throw Error(r(468,b))}D[br]=l,te(D),b=D}l.stateNode=b}else y4(I,l.type,l.stateNode);else l.stateNode=g4(I,b,l.memoizedProps);else D!==b?(D===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):D.count--,b===null?y4(I,l.type,l.stateNode):g4(I,b,l.memoizedProps)):b===null&&l.stateNode!==null&&Li(l,l.memoizedProps,g.memoizedProps)}break;case 27:ki(u,l),Ui(l),b&512&&(Or||g===null||ha(g,g.return)),g!==null&&b&4&&Li(l,l.memoizedProps,g.memoizedProps);break;case 5:if(ki(u,l),Ui(l),b&512&&(Or||g===null||ha(g,g.return)),l.flags&32){I=l.stateNode;try{qn(I,"")}catch(Xt){ar(l,l.return,Xt)}}b&4&&l.stateNode!=null&&(I=l.memoizedProps,Li(l,I,g!==null?g.memoizedProps:I)),b&1024&&(nl=!0);break;case 6:if(ki(u,l),Ui(l),b&4){if(l.stateNode===null)throw Error(r(162));b=l.memoizedProps,g=l.stateNode;try{g.nodeValue=b}catch(Xt){ar(l,l.return,Xt)}}break;case 3:if(IS=null,I=Ro,Ro=MS(u.containerInfo),ki(u,l),Ro=I,Ui(l),b&4&&g!==null&&g.memoizedState.isDehydrated)try{P0(u.containerInfo)}catch(Xt){ar(l,l.return,Xt)}nl&&(nl=!1,E0(l));break;case 4:b=Ro,Ro=MS(l.stateNode.containerInfo),ki(u,l),Ui(l),Ro=b;break;case 12:ki(u,l),Ui(l);break;case 31:ki(u,l),Ui(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,Tc(l,b)));break;case 13:ki(u,l),Ui(l),l.child.flags&8192&&l.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(dh=Y()),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,Tc(l,b)));break;case 22:I=l.memoizedState!==null;var be=g!==null&&g.memoizedState!==null,Be=Co,nt=Or;if(Co=Be||I,Or=nt||be,ki(u,l),Or=nt,Co=Be,Ui(l),b&8192)e:for(u=l.stateNode,u._visibility=I?u._visibility&-2:u._visibility|1,I&&(g===null||be||Co||Or||jl(l)),g=null,u=l;;){if(u.tag===5||u.tag===26){if(g===null){be=g=u;try{if(D=be.stateNode,I)X=D.style,typeof X.setProperty=="function"?X.setProperty("display","none","important"):X.display="none";else{ie=be.stateNode;var ut=be.memoizedProps.style,Ge=ut!=null&&ut.hasOwnProperty("display")?ut.display:null;ie.style.display=Ge==null||typeof Ge=="boolean"?"":(""+Ge).trim()}}catch(Xt){ar(be,be.return,Xt)}}}else if(u.tag===6){if(g===null){be=u;try{be.stateNode.nodeValue=I?"":be.memoizedProps}catch(Xt){ar(be,be.return,Xt)}}}else if(u.tag===18){if(g===null){be=u;try{var Ke=be.stateNode;I?o4(Ke,!0):o4(be.stateNode,!1)}catch(Xt){ar(be,be.return,Xt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;g===u&&(g=null),u=u.return}g===u&&(g=null),u.sibling.return=u.return,u=u.sibling}b&4&&(b=l.updateQueue,b!==null&&(g=b.retryQueue,g!==null&&(b.retryQueue=null,Tc(l,g))));break;case 19:ki(u,l),Ui(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,Tc(l,b)));break;case 30:break;case 21:break;default:ki(u,l),Ui(l)}}function Ui(l){var u=l.flags;if(u&2){try{for(var g,b=l.return;b!==null;){if(Hr(b)){g=b;break}b=b.return}if(g==null)throw Error(r(160));switch(g.tag){case 27:var I=g.stateNode,D=jn(l);$a(l,D,I);break;case 5:var X=g.stateNode;g.flags&32&&(qn(X,""),g.flags&=-33);var ie=jn(l);$a(l,ie,X);break;case 3:case 4:var be=g.stateNode.containerInfo,Be=jn(l);zl(l,Be,be);break;default:throw Error(r(161))}}catch(nt){ar(l,l.return,nt)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function E0(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;E0(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Po(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)Gr(l,u.alternate,u),u=u.sibling}function jl(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:da(4,u,u.return),jl(u);break;case 1:ha(u,u.return);var g=u.stateNode;typeof g.componentWillUnmount=="function"&&Zi(u,u.return,g),jl(u);break;case 27:Ob(u.stateNode);case 26:case 5:ha(u,u.return),jl(u);break;case 22:u.memoizedState===null&&jl(u);break;case 30:jl(u);break;default:jl(u)}l=l.sibling}}function Xa(l,u,g){for(g=g&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var b=u.alternate,I=l,D=u,X=D.flags;switch(D.tag){case 0:case 11:case 15:Xa(I,D,g),Mo(4,D);break;case 1:if(Xa(I,D,g),b=D,I=b.stateNode,typeof I.componentDidMount=="function")try{I.componentDidMount()}catch(Be){ar(b,b.return,Be)}if(b=D,I=b.updateQueue,I!==null){var ie=b.stateNode;try{var be=I.shared.hiddenCallbacks;if(be!==null)for(I.shared.hiddenCallbacks=null,I=0;I<be.length;I++)ah(be[I],ie)}catch(Be){ar(b,b.return,Be)}}g&&X&64&&tl(D),Ac(D,D.return);break;case 27:S0(D);case 26:case 5:Xa(I,D,g),g&&b===null&&X&4&&rm(D),Ac(D,D.return);break;case 12:Xa(I,D,g);break;case 31:Xa(I,D,g),g&&X&4&&_u(I,D);break;case 13:Xa(I,D,g),g&&X&4&&fh(I,D);break;case 22:D.memoizedState===null&&Xa(I,D,g),Ac(D,D.return);break;case 30:break;default:Xa(I,D,g)}u=u.sibling}}function wu(l,u){var g=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==g&&(l!=null&&l.refCount++,g!=null&&Mf(g))}function Bf(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Mf(l))}function pa(l,u,g,b){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Cb(l,u,g,b),u=u.sibling}function Cb(l,u,g,b){var I=u.flags;switch(u.tag){case 0:case 11:case 15:pa(l,u,g,b),I&2048&&Mo(9,u);break;case 1:pa(l,u,g,b);break;case 3:pa(l,u,g,b),I&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Mf(l)));break;case 12:if(I&2048){pa(l,u,g,b),l=u.stateNode;try{var D=u.memoizedProps,X=D.id,ie=D.onPostCommit;typeof ie=="function"&&ie(X,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(be){ar(u,u.return,be)}}else pa(l,u,g,b);break;case 31:pa(l,u,g,b);break;case 13:pa(l,u,g,b);break;case 23:break;case 22:D=u.stateNode,X=u.alternate,u.memoizedState!==null?D._visibility&2?pa(l,u,g,b):Bl(l,u):D._visibility&2?pa(l,u,g,b):(D._visibility|=2,ma(l,u,g,b,(u.subtreeFlags&10256)!==0||!1)),I&2048&&wu(X,u);break;case 24:pa(l,u,g,b),I&2048&&Bf(u.alternate,u);break;default:pa(l,u,g,b)}}function ma(l,u,g,b,I){for(I=I&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var D=l,X=u,ie=g,be=b,Be=X.flags;switch(X.tag){case 0:case 11:case 15:ma(D,X,ie,be,I),Mo(8,X);break;case 23:break;case 22:var nt=X.stateNode;X.memoizedState!==null?nt._visibility&2?ma(D,X,ie,be,I):Bl(D,X):(nt._visibility|=2,ma(D,X,ie,be,I)),I&&Be&2048&&wu(X.alternate,X);break;case 24:ma(D,X,ie,be,I),I&&Be&2048&&Bf(X.alternate,X);break;default:ma(D,X,ie,be,I)}u=u.sibling}}function Bl(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var g=l,b=u,I=b.flags;switch(b.tag){case 22:Bl(g,b),I&2048&&wu(b.alternate,b);break;case 24:Bl(g,b),I&2048&&Bf(b.alternate,b);break;default:Bl(g,b)}u=u.sibling}}var Vf=8192;function Xs(l,u,g){if(l.subtreeFlags&Vf)for(l=l.child;l!==null;)A0(l,u,g),l=l.sibling}function A0(l,u,g){switch(l.tag){case 26:Xs(l,u,g),l.flags&Vf&&l.memoizedState!==null&&sK(g,Ro,l.memoizedState,l.memoizedProps);break;case 5:Xs(l,u,g);break;case 3:case 4:var b=Ro;Ro=MS(l.stateNode.containerInfo),Xs(l,u,g),Ro=b;break;case 22:l.memoizedState===null&&(b=l.alternate,b!==null&&b.memoizedState!==null?(b=Vf,Vf=16777216,Xs(l,u,g),Vf=b):Xs(l,u,g));break;default:Xs(l,u,g)}}function Hf(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function Eu(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var b=u[g];Qi=b,ai(b,l)}Hf(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Ss(l),l=l.sibling}function Ss(l){switch(l.tag){case 0:case 11:case 15:Eu(l),l.flags&2048&&da(9,l,l.return);break;case 3:Eu(l);break;case 12:Eu(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,ws(l)):Eu(l);break;default:Eu(l)}}function ws(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var b=u[g];Qi=b,ai(b,l)}Hf(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:da(8,u,u.return),ws(u);break;case 22:g=u.stateNode,g._visibility&2&&(g._visibility&=-3,ws(u));break;default:ws(u)}l=l.sibling}}function ai(l,u){for(;Qi!==null;){var g=Qi;switch(g.tag){case 0:case 11:case 15:da(8,g,u);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var b=g.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:Mf(g.memoizedState.cache)}if(b=g.child,b!==null)b.return=g,Qi=b;else e:for(g=l;Qi!==null;){b=Qi;var I=b.sibling,D=b.return;if(im(b),b===g){Qi=null;break e}if(I!==null){I.return=D,Qi=I;break e}Qi=D}}}var Mc={getCacheForType:function(l){var u=pn(_i),g=u.data.get(l);return g===void 0&&(g=l(),u.data.set(l,g)),g},cacheSignal:function(){return pn(_i).controller.signal}},Tn=typeof WeakMap=="function"?WeakMap:Map,Jt=0,vn=null,Nn=null,In=0,$n=0,Ma=null,No=!1,rl=!1,Ib=!1,Ys=0,Yr=0,Vl=0,Au=0,am=0,Ya=0,Fr=0,Gf=null,si=null,oi=!1,dh=0,Rb=0,mi=1/0,Kr=null,gi=null,gr=0,Ks=null,hh=null,Oo=0,ph=0,mh=null,sm=null,Tu=0,qf=null;function Zs(){return(Jt&2)!==0&&In!==0?In&-In:W.T!==null?$e():Wo()}function Un(){if(Ya===0)if((In&536870912)===0||Vn){var l=pt;pt<<=1,(pt&3932160)===0&&(pt=262144),Ya=l}else Ya=536870912;return l=ys.current,l!==null&&(l.flags|=32),Ya}function On(l,u,g){(l===vn&&($n===2||$n===9)||l.cancelPendingCommit!==null)&&(Cu(l,0),wi(l,In,Ya,!1)),Ar(l,g),((Jt&2)===0||l!==vn)&&(l===vn&&((Jt&2)===0&&(Au|=g),Yr===4&&wi(l,In,Ya,!1)),Et(l))}function Fn(l,u,g){if((Jt&6)!==0)throw Error(r(327));var b=!g&&(u&127)===0&&(u&l.expiredLanes)===0||gt(l,u),I=b?om(l,u):Ka(l,u,!0),D=b;do{if(I===0){rl&&!b&&wi(l,u,0,!1);break}else{if(g=l.current.alternate,D&&!vr(g)){I=Ka(l,u,!1),D=!1;continue}if(I===2){if(D=u,l.errorRecoveryDisabledLanes&D)var X=0;else X=l.pendingLanes&-536870913,X=X!==0?X:X&536870912?536870912:0;if(X!==0){u=X;e:{var ie=l;I=Gf;var be=ie.current.memoizedState.isDehydrated;if(be&&(Cu(ie,X).flags|=256),X=Ka(ie,X,!1),X!==2){if(Ib&&!be){ie.errorRecoveryDisabledLanes|=D,Au|=D,I=4;break e}D=si,si=I,D!==null&&(si===null?si=D:si.push.apply(si,D))}I=X}if(D=!1,I!==2)continue}}if(I===1){Cu(l,0),wi(l,u,0,!0);break}e:{switch(b=l,D=I,D){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:wi(b,u,Ya,!No);break e;case 2:si=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(I=dh+300-Y(),10<I)){if(wi(b,u,Ya,!No),Qe(b,0,!0)!==0)break e;Oo=u,b.timeoutHandle=i4(Bn.bind(null,b,g,si,Kr,oi,u,Ya,Au,Fr,No,D,"Throttled",-0,0),I);break e}Bn(b,g,si,Kr,oi,u,Ya,Au,Fr,No,D,null,-0,0)}}break}while(!0);Et(l)}function Bn(l,u,g,b,I,D,X,ie,be,Be,nt,ut,Ge,Ke){if(l.timeoutHandle=-1,ut=u.subtreeFlags,ut&8192||(ut&16785408)===16785408){ut={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ja},A0(u,D,ut);var Xt=(D&62914560)===D?dh-Y():(D&4194048)===D?Rb-Y():0;if(Xt=oK(ut,Xt),Xt!==null){Oo=D,l.cancelPendingCommit=Xt(Ic.bind(null,l,u,D,g,b,I,X,ie,be,nt,ut,null,Ge,Ke)),wi(l,D,X,!Be);return}}Ic(l,u,D,g,b,I,X,ie,be)}function vr(l){for(var u=l;;){var g=u.tag;if((g===0||g===11||g===15)&&u.flags&16384&&(g=u.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var b=0;b<g.length;b++){var I=g[b],D=I.getSnapshot;I=I.value;try{if(!Ha(D(),I))return!1}catch{return!1}}if(g=u.child,u.subtreeFlags&16384&&g!==null)g.return=u,u=g;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function wi(l,u,g,b){u&=~am,u&=~Au,l.suspendedLanes|=u,l.pingedLanes&=~u,b&&(l.warmLanes|=u),b=l.expirationTimes;for(var I=u;0<I;){var D=31-he(I),X=1<<D;b[D]=-1,I&=~X}g!==0&&oa(l,g,u)}function il(){return(Jt&6)===0?(zt(0),!1):!0}function Mu(){if(Nn!==null){if($n===0)var l=Nn.return;else l=Nn,Nl=hu=null,Jy(l),Nf=null,Of=0,l=Nn;for(;l!==null;)$s(l.alternate,l),l=l.return;Nn=null}}function Cu(l,u){var g=l.timeoutHandle;g!==-1&&(l.timeoutHandle=-1,HY(g)),g=l.cancelPendingCommit,g!==null&&(l.cancelPendingCommit=null,g()),Oo=0,Mu(),vn=l,Nn=g=ms(l.current,null),In=u,$n=0,Ma=null,No=!1,rl=gt(l,u),Ib=!1,Fr=Ya=am=Au=Vl=Yr=0,si=Gf=null,oi=!1,(u&8)!==0&&(u|=u&32);var b=l.entangledLanes;if(b!==0)for(l=l.entanglements,b&=u;0<b;){var I=31-he(b),D=1<<I;u|=l[I],b&=~D}return Ys=u,jp(),g}function Hl(l,u){An=null,W.H=ch,u===Cf||u===Pn?(u=Rf(),$n=3):u===Gp?(u=Rf(),$n=4):$n=u===h0?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Ma=u,Nn===null&&(Yr=1,d0(l,Hs(u,l.current)))}function Zr(){var l=ys.current;return l===null?!0:(In&4194048)===In?Wa===null:(In&62914560)===In||(In&536870912)!==0?l===Wa:!1}function Cc(){var l=W.H;return W.H=ch,l===null?ch:l}function Iu(){var l=W.A;return W.A=Mc,l}function gh(){Yr=4,No||(In&4194048)!==In&&ys.current!==null||(rl=!0),(Vl&134217727)===0&&(Au&134217727)===0||vn===null||wi(vn,In,Ya,!1)}function Ka(l,u,g){var b=Jt;Jt|=2;var I=Cc(),D=Iu();(vn!==l||In!==u)&&(Kr=null,Cu(l,u)),u=!1;var X=Yr;e:do try{if($n!==0&&Nn!==null){var ie=Nn,be=Ma;switch($n){case 8:Mu(),X=6;break e;case 3:case 2:case 9:case 6:ys.current===null&&(u=!0);var Be=$n;if($n=0,Ma=null,Wf(l,ie,be,Be),g&&rl){X=0;break e}break;default:Be=$n,$n=0,Ma=null,Wf(l,ie,be,Be)}}vh(),X=Yr;break}catch(nt){Hl(l,nt)}while(!0);return u&&l.shellSuspendCounter++,Nl=hu=null,Jt=b,W.H=I,W.A=D,Nn===null&&(vn=null,In=0,jp()),X}function vh(){for(;Nn!==null;)T0(Nn)}function om(l,u){var g=Jt;Jt|=2;var b=Cc(),I=Iu();vn!==l||In!==u?(Kr=null,mi=Y()+500,Cu(l,u)):rl=gt(l,u);e:do try{if($n!==0&&Nn!==null){u=Nn;var D=Ma;t:switch($n){case 1:$n=0,Ma=null,Wf(l,u,D,1);break;case 2:case 9:if(vs(D)){$n=0,Ma=null,lm(u);break}u=function(){$n!==2&&$n!==9||vn!==l||($n=7),Et(l)},D.then(u,u);break e;case 3:$n=7;break e;case 4:$n=5;break e;case 7:vs(D)?($n=0,Ma=null,lm(u)):($n=0,Ma=null,Wf(l,u,D,7));break;case 5:var X=null;switch(Nn.tag){case 26:X=Nn.memoizedState;case 5:case 27:var ie=Nn;if(X?b4(X):ie.stateNode.complete){$n=0,Ma=null;var be=ie.sibling;if(be!==null)Nn=be;else{var Be=ie.return;Be!==null?(Nn=Be,Ru(Be)):Nn=null}break t}}$n=0,Ma=null,Wf(l,u,D,5);break;case 6:$n=0,Ma=null,Wf(l,u,D,6);break;case 8:Mu(),Yr=6;break e;default:throw Error(r(462))}}Es();break}catch(nt){Hl(l,nt)}while(!0);return Nl=hu=null,W.H=b,W.A=I,Jt=g,Nn!==null?0:(vn=null,In=0,jp(),Yr)}function Es(){for(;Nn!==null&&!ct();)T0(Nn)}function T0(l){var u=_0(l.alternate,l,Ys);l.memoizedProps=l.pendingProps,u===null?Ru(l):Nn=u}function lm(l){var u=l,g=u.alternate;switch(u.tag){case 15:case 0:u=Jp(g,u,u.pendingProps,u.type,void 0,In);break;case 11:u=Jp(g,u,u.pendingProps,u.type.render,u.ref,In);break;case 5:Jy(u);default:$s(g,u),u=Nn=Yd(u,Ys),u=_0(g,u,Ys)}l.memoizedProps=l.pendingProps,u===null?Ru(l):Nn=u}function Wf(l,u,g,b){Nl=hu=null,Jy(u),Nf=null,Of=0;var I=u.return;try{if(Di(l,I,u,g,In)){Yr=1,d0(l,Hs(g,l.current)),Nn=null;return}}catch(D){if(I!==null)throw Nn=I,D;Yr=1,d0(l,Hs(g,l.current)),Nn=null;return}u.flags&32768?(Vn||b===1?l=!0:rl||(In&536870912)!==0?l=!1:(No=l=!0,(b===2||b===9||b===3||b===6)&&(b=ys.current,b!==null&&b.tag===13&&(b.flags|=16384))),cm(u,l)):Ru(u)}function Ru(l){var u=l;do{if((u.flags&32768)!==0){cm(u,No);return}l=u.return;var g=nm(u.alternate,u,Ys);if(g!==null){Nn=g;return}if(u=u.sibling,u!==null){Nn=u;return}Nn=u=l}while(u!==null);Yr===0&&(Yr=5)}function cm(l,u){do{var g=To(l.alternate,l);if(g!==null){g.flags&=32767,Nn=g;return}if(g=l.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!u&&(l=l.sibling,l!==null)){Nn=l;return}Nn=l=g}while(l!==null);Yr=6,Nn=null}function Ic(l,u,g,b,I,D,X,ie,be){l.cancelPendingCommit=null;do yh();while(gr!==0);if((Jt&6)!==0)throw Error(r(327));if(u!==null){if(u===l.current)throw Error(r(177));if(D=u.lanes|u.childLanes,D|=Xi,Tr(l,g,D,X,ie,be),l===vn&&(Nn=vn=null,In=0),hh=u,Ks=l,Oo=g,ph=D,mh=I,sm=b,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,F(Ne,function(){return M0(),null})):(l.callbackNode=null,l.callbackPriority=0),b=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||b){b=W.T,W.T=null,I=$.p,$.p=2,X=Jt,Jt|=4;try{XC(l,u,g)}finally{Jt=X,$.p=I,W.T=b}}gr=1,Ei(),Rc(),$f()}}function Ei(){if(gr===1){gr=0;var l=Ks,u=hh,g=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||g){g=W.T,W.T=null;var b=$.p;$.p=2;var I=Jt;Jt|=4;try{Su(u,l);var D=tI,X=A1(l.containerInfo),ie=D.focusedElem,be=D.selectionRange;if(X!==ie&&ie&&ie.ownerDocument&&Pr(ie.ownerDocument.documentElement,ie)){if(be!==null&&Ly(ie)){var Be=be.start,nt=be.end;if(nt===void 0&&(nt=Be),"selectionStart"in ie)ie.selectionStart=Be,ie.selectionEnd=Math.min(nt,ie.value.length);else{var ut=ie.ownerDocument||document,Ge=ut&&ut.defaultView||window;if(Ge.getSelection){var Ke=Ge.getSelection(),Xt=ie.textContent.length,fn=Math.min(be.start,Xt),Lr=be.end===void 0?fn:Math.min(be.end,Xt);!Ke.extend&&fn>Lr&&(X=Lr,Lr=fn,fn=X);var Pe=Wd(ie,fn),we=Wd(ie,Lr);if(Pe&&we&&(Ke.rangeCount!==1||Ke.anchorNode!==Pe.node||Ke.anchorOffset!==Pe.offset||Ke.focusNode!==we.node||Ke.focusOffset!==we.offset)){var je=ut.createRange();je.setStart(Pe.node,Pe.offset),Ke.removeAllRanges(),fn>Lr?(Ke.addRange(je),Ke.extend(we.node,we.offset)):(je.setEnd(we.node,we.offset),Ke.addRange(je))}}}}for(ut=[],Ke=ie;Ke=Ke.parentNode;)Ke.nodeType===1&&ut.push({element:Ke,left:Ke.scrollLeft,top:Ke.scrollTop});for(typeof ie.focus=="function"&&ie.focus(),ie=0;ie<ut.length;ie++){var ot=ut[ie];ot.element.scrollLeft=ot.left,ot.element.scrollTop=ot.top}}OS=!!eI,tI=eI=null}finally{Jt=I,$.p=b,W.T=g}}l.current=u,gr=2}}function Rc(){if(gr===2){gr=0;var l=Ks,u=hh,g=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||g){g=W.T,W.T=null;var b=$.p;$.p=2;var I=Jt;Jt|=4;try{Gr(l,u.alternate,u)}finally{Jt=I,$.p=b,W.T=g}}gr=3}}function $f(){if(gr===4||gr===3){gr=0,ae();var l=Ks,u=hh,g=Oo,b=sm;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?gr=5:(gr=0,hh=Ks=null,Gl(l,l.pendingLanes));var I=l.pendingLanes;if(I===0&&(gi=null),la(g),u=u.stateNode,tt&&typeof tt.onCommitFiberRoot=="function")try{tt.onCommitFiberRoot(it,u,void 0,(u.current.flags&128)===128)}catch{}if(b!==null){u=W.T,I=$.p,$.p=2,W.T=null;try{for(var D=l.onRecoverableError,X=0;X<b.length;X++){var ie=b[X];D(ie.value,{componentStack:ie.stack})}}finally{W.T=u,$.p=I}}(Oo&3)!==0&&yh(),Et(l),I=l.pendingLanes,(g&261930)!==0&&(I&42)!==0?l===qf?Tu++:(Tu=0,qf=l):Tu=0,zt(0)}}function Gl(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,Mf(u)))}function yh(){return Ei(),Rc(),$f(),M0()}function M0(){if(gr!==5)return!1;var l=Ks,u=ph;ph=0;var g=la(Oo),b=W.T,I=$.p;try{$.p=32>g?32:g,W.T=null,g=mh,mh=null;var D=Ks,X=Oo;if(gr=0,hh=Ks=null,Oo=0,(Jt&6)!==0)throw Error(r(331));var ie=Jt;if(Jt|=4,Ss(D.current),Cb(D,D.current,X,g),Jt=ie,zt(0,!1),tt&&typeof tt.onPostCommitFiberRoot=="function")try{tt.onPostCommitFiberRoot(it,D)}catch{}return!0}finally{$.p=I,W.T=b,Gl(l,u)}}function Pb(l,u,g){u=Hs(g,u),u=_b(l.stateNode,u,2),l=gu(l,u,2),l!==null&&(Ar(l,2),Et(l))}function ar(l,u,g){if(l.tag===3)Pb(l,l,g);else for(;u!==null;){if(u.tag===3){Pb(u,l,g);break}else if(u.tag===1){var b=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(gi===null||!gi.has(b))){l=Hs(g,l),g=Sb(2),b=gu(u,g,2),b!==null&&(yS(g,b,u,l),Ar(b,2),Et(b));break}}u=u.return}}function um(l,u,g){var b=l.pingCache;if(b===null){b=l.pingCache=new Tn;var I=new Set;b.set(u,I)}else I=b.get(u),I===void 0&&(I=new Set,b.set(u,I));I.has(g)||(Ib=!0,I.add(g),l=h.bind(null,l,u,g),u.then(l,l))}function h(l,u,g){var b=l.pingCache;b!==null&&b.delete(u),l.pingedLanes|=l.suspendedLanes&g,l.warmLanes&=~g,vn===l&&(In&g)===g&&(Yr===4||Yr===3&&(In&62914560)===In&&300>Y()-dh?(Jt&2)===0&&Cu(l,0):am|=g,Fr===In&&(Fr=0)),Et(l)}function m(l,u){u===0&&(u=nn()),l=Ga(l,u),l!==null&&(Ar(l,u),Et(l))}function _(l){var u=l.memoizedState,g=0;u!==null&&(g=u.retryLane),m(l,g)}function M(l,u){var g=0;switch(l.tag){case 31:case 13:var b=l.stateNode,I=l.memoizedState;I!==null&&(g=I.retryLane);break;case 19:b=l.stateNode;break;case 22:b=l.stateNode._retryCache;break;default:throw Error(r(314))}b!==null&&b.delete(u),m(l,g)}function F(l,u){return at(l,u)}var H=null,ee=null,_e=!1,Ye=!1,xt=!1,Rt=0;function Et(l){l!==ee&&l.next===null&&(ee===null?H=ee=l:ee=ee.next=l),Ye=!0,_e||(_e=!0,Oe())}function zt(l,u){if(!xt&&Ye){xt=!0;do for(var g=!1,b=H;b!==null;){if(l!==0){var I=b.pendingLanes;if(I===0)var D=0;else{var X=b.suspendedLanes,ie=b.pingedLanes;D=(1<<31-he(42|l)+1)-1,D&=I&~(X&~ie),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(g=!0,Ve(b,D))}else D=In,D=Qe(b,b===vn?D:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(D&3)===0||gt(b,D)||(g=!0,Ve(b,D));b=b.next}while(g);xt=!1}}function Sn(){vi()}function vi(){Ye=_e=!1;var l=0;Rt!==0&&VY()&&(l=Rt);for(var u=Y(),g=null,b=H;b!==null;){var I=b.next,D=bh(b,u);D===0?(b.next=null,g===null?H=I:g.next=I,I===null&&(ee=g)):(g=b,(l!==0||(D&3)!==0)&&(Ye=!0)),b=I}gr!==0&&gr!==5||zt(l),Rt!==0&&(Rt=0)}function bh(l,u){for(var g=l.suspendedLanes,b=l.pingedLanes,I=l.expirationTimes,D=l.pendingLanes&-62914561;0<D;){var X=31-he(D),ie=1<<X,be=I[X];be===-1?((ie&g)===0||(ie&b)!==0)&&(I[X]=Wt(ie,u)):be<=u&&(l.expiredLanes|=ie),D&=~ie}if(u=vn,g=In,g=Qe(l,l===u?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b=l.callbackNode,g===0||l===u&&($n===2||$n===9)||l.cancelPendingCommit!==null)return b!==null&&b!==null&&Tt(b),l.callbackNode=null,l.callbackPriority=0;if((g&3)===0||gt(l,g)){if(u=g&-g,u===l.callbackPriority)return u;switch(b!==null&&Tt(b),la(g)){case 2:case 8:g=et;break;case 32:g=Ne;break;case 268435456:g=rt;break;default:g=Ne}return b=Pu.bind(null,l),g=at(g,b),l.callbackPriority=u,l.callbackNode=g,u}return b!==null&&b!==null&&Tt(b),l.callbackPriority=2,l.callbackNode=null,2}function Pu(l,u){if(gr!==0&&gr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var g=l.callbackNode;if(yh()&&l.callbackNode!==g)return null;var b=In;return b=Qe(l,l===vn?b:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b===0?null:(Fn(l,b,u),bh(l,Y()),l.callbackNode!=null&&l.callbackNode===g?Pu.bind(null,l):null)}function Ve(l,u){if(yh())return null;Fn(l,u,!0)}function Oe(){GY(function(){(Jt&6)!==0?at(ke,Sn):vi()})}function $e(){if(Rt===0){var l=bc;l===0&&(l=dt,dt<<=1,(dt&261888)===0&&(dt=256)),Rt=l}return Rt}function Ct(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:js(""+l)}function on(l,u){var g=u.ownerDocument.createElement("input");return g.name=u.name,g.value=u.value,l.id&&g.setAttribute("form",l.id),u.parentNode.insertBefore(g,u),l=new FormData(l),g.parentNode.removeChild(g),l}function Qr(l,u,g,b,I){if(u==="submit"&&g&&g.stateNode===I){var D=Ct((I[kr]||null).action),X=b.submitter;X&&(u=(u=X[kr]||null)?Ct(u.formAction):X.getAttribute("formAction"),u!==null&&(D=u,X=null));var ie=new Ko("action","action",null,b,I);l.push({event:ie,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(Rt!==0){var be=X?on(I,X):new FormData(I);hb(g,{pending:!0,data:be,method:I.method,action:D},null,be)}}else typeof D=="function"&&(ie.preventDefault(),be=X?on(I,X):new FormData(I),hb(g,{pending:!0,data:be,method:I.method,action:D},D,be))},currentTarget:I}]})}}for(var ln=0;ln<Fp.length;ln++){var Kn=Fp[ln],Ji=Kn.toLowerCase(),sr=Kn[0].toUpperCase()+Kn.slice(1);bo(Ji,"on"+sr)}bo(jg,"onAnimationEnd"),bo(Up,"onAnimationIteration"),bo(Uy,"onAnimationStart"),bo("dblclick","onDoubleClick"),bo("focusin","onFocus"),bo("focusout","onBlur"),bo(M1,"onTransitionRun"),bo(jC,"onTransitionStart"),bo(C1,"onTransitionCancel"),bo(Fy,"onTransitionEnd"),Ce("onMouseEnter",["mouseout","mouseover"]),Ce("onMouseLeave",["mouseout","mouseover"]),Ce("onPointerEnter",["pointerout","pointerover"]),Ce("onPointerLeave",["pointerout","pointerover"]),ze("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ze("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ze("onBeforeInput",["compositionend","keypress","textInput","paste"]),ze("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ze("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ze("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Do="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Do));function Kk(l,u){u=(u&4)!==0;for(var g=0;g<l.length;g++){var b=l[g],I=b.event;b=b.listeners;e:{var D=void 0;if(u)for(var X=b.length-1;0<=X;X--){var ie=b[X],be=ie.instance,Be=ie.currentTarget;if(ie=ie.listener,be!==D&&I.isPropagationStopped())break e;D=ie,I.currentTarget=Be;try{D(I)}catch(nt){zp(nt)}I.currentTarget=null,D=be}else for(X=0;X<b.length;X++){if(ie=b[X],be=ie.instance,Be=ie.currentTarget,ie=ie.listener,be!==D&&I.isPropagationStopped())break e;D=ie,I.currentTarget=Be;try{D(I)}catch(nt){zp(nt)}I.currentTarget=null,D=be}}}}function Xn(l,u){var g=u[Gi];g===void 0&&(g=u[Gi]=new Set);var b=l+"__bubble";g.has(b)||(Zk(u,l,2,!1),g.add(b))}function KC(l,u,g){var b=0;u&&(b|=4),Zk(g,l,b,u)}var ES="_reactListening"+Math.random().toString(36).slice(2);function ZC(l){if(!l[ES]){l[ES]=!0,Ae.forEach(function(g){g!=="selectionchange"&&(YC.has(g)||KC(g,!1,l),KC(g,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[ES]||(u[ES]=!0,KC("selectionchange",!1,u))}}function Zk(l,u,g,b){switch(T4(u)){case 2:var I=uK;break;case 8:I=fK;break;default:I=dI}g=I.bind(null,u,g,l),I=void 0,!bf||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(I=!0),b?I!==void 0?l.addEventListener(u,g,{capture:!0,passive:I}):l.addEventListener(u,g,!0):I!==void 0?l.addEventListener(u,g,{passive:I}):l.addEventListener(u,g,!1)}function QC(l,u,g,b,I){var D=b;if((u&1)===0&&(u&2)===0&&b!==null)e:for(;;){if(b===null)return;var X=b.tag;if(X===3||X===4){var ie=b.stateNode.containerInfo;if(ie===I)break;if(X===4)for(X=b.return;X!==null;){var be=X.tag;if((be===3||be===4)&&X.stateNode.containerInfo===I)return;X=X.return}for(;ie!==null;){if(X=Fa(ie),X===null)return;if(be=X.tag,be===5||be===6||be===26||be===27){b=D=X;continue e}ie=ie.parentNode}}b=b.return}uc(function(){var Be=D,nt=Bs(g),ut=[];e:{var Ge=yo.get(l);if(Ge!==void 0){var Ke=Ko,Xt=l;switch(l){case"keypress":if(tu(g)===0)break e;case"keydown":case"keyup":Ke=Sl;break;case"focusin":Xt="focus",Ke=iu;break;case"focusout":Xt="blur",Ke=iu;break;case"beforeblur":case"afterblur":Ke=iu;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ke=zd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ke=Ip;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ke=q;break;case jg:case Up:case Uy:Ke=Ug;break;case Fy:Ke=le;break;case"scroll":case"scrollend":Ke=Fd;break;case"wheel":Ke=We;break;case"copy":case"cut":case"paste":Ke=Rp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ke=wl;break;case"toggle":case"beforetoggle":Ke=_n}var fn=(u&4)!==0,Lr=!fn&&(l==="scroll"||l==="scrollend"),Pe=fn?Ge!==null?Ge+"Capture":null:Ge;fn=[];for(var we=Be,je;we!==null;){var ot=we;if(je=ot.stateNode,ot=ot.tag,ot!==5&&ot!==26&&ot!==27||je===null||Pe===null||(ot=mo(we,Pe),ot!=null&&fn.push(Nb(we,ot,je))),Lr)break;we=we.return}0<fn.length&&(Ge=new Ke(Ge,Xt,null,g,nt),ut.push({event:Ge,listeners:fn}))}}if((u&7)===0){e:{if(Ge=l==="mouseover"||l==="pointerover",Ke=l==="mouseout"||l==="pointerout",Ge&&g!==kd&&(Xt=g.relatedTarget||g.fromElement)&&(Fa(Xt)||Xt[Ni]))break e;if((Ke||Ge)&&(Ge=nt.window===nt?nt:(Ge=nt.ownerDocument)?Ge.defaultView||Ge.parentWindow:window,Ke?(Xt=g.relatedTarget||g.toElement,Ke=Be,Xt=Xt?Fa(Xt):null,Xt!==null&&(Lr=a(Xt),fn=Xt.tag,Xt!==Lr||fn!==5&&fn!==27&&fn!==6)&&(Xt=null)):(Ke=null,Xt=Be),Ke!==Xt)){if(fn=zd,ot="onMouseLeave",Pe="onMouseEnter",we="mouse",(l==="pointerout"||l==="pointerover")&&(fn=wl,ot="onPointerLeave",Pe="onPointerEnter",we="pointer"),Lr=Ke==null?Ge:Wi(Ke),je=Xt==null?Ge:Wi(Xt),Ge=new fn(ot,we+"leave",Ke,g,nt),Ge.target=Lr,Ge.relatedTarget=je,ot=null,Fa(nt)===Be&&(fn=new fn(Pe,we+"enter",Xt,g,nt),fn.target=je,fn.relatedTarget=Lr,ot=fn),Lr=ot,Ke&&Xt)t:{for(fn=UY,Pe=Ke,we=Xt,je=0,ot=Pe;ot;ot=fn(ot))je++;ot=0;for(var an=we;an;an=fn(an))ot++;for(;0<je-ot;)Pe=fn(Pe),je--;for(;0<ot-je;)we=fn(we),ot--;for(;je--;){if(Pe===we||we!==null&&Pe===we.alternate){fn=Pe;break t}Pe=fn(Pe),we=fn(we)}fn=null}else fn=null;Ke!==null&&Qk(ut,Ge,Ke,fn,!1),Xt!==null&&Lr!==null&&Qk(ut,Lr,Xt,fn,!0)}}e:{if(Ge=Be?Wi(Be):window,Ke=Ge.nodeName&&Ge.nodeName.toLowerCase(),Ke==="select"||Ke==="input"&&Ge.type==="file")var fr=Ry;else if(Iy(Ge))if(El)fr=E1;else{fr=Oy;var Qt=S1}else Ke=Ge.nodeName,!Ke||Ke.toLowerCase()!=="input"||Ge.type!=="checkbox"&&Ge.type!=="radio"?Be&&xi(Be.elementType)&&(fr=Ry):fr=w1;if(fr&&(fr=fr(l,Be))){Fg(ut,fr,g,nt);break e}Qt&&Qt(l,Ge,Be),l==="focusout"&&Be&&Ge.type==="number"&&Be.memoizedProps.value!=null&&dn(Ge,"number",Ge.value)}switch(Qt=Be?Wi(Be):window,l){case"focusin":(Iy(Qt)||Qt.contentEditable==="true")&&(Al=Qt,Tl=Be,$d=null);break;case"focusout":$d=Tl=Al=null;break;case"mousedown":zg=!0;break;case"contextmenu":case"mouseup":case"dragend":zg=!1,Xd(ut,g,nt);break;case"selectionchange":if(T1)break;case"keydown":case"keyup":Xd(ut,g,nt)}var Ln;if(Wn)e:{switch(l){case"compositionstart":var Zn="onCompositionStart";break e;case"compositionend":Zn="onCompositionEnd";break e;case"compositionupdate":Zn="onCompositionUpdate";break e}Zn=void 0}else Ef?hc(l,g)&&(Zn="onCompositionEnd"):l==="keydown"&&g.keyCode===229&&(Zn="onCompositionStart");Zn&&(Qo&&g.locale!=="ko"&&(Ef||Zn!=="onCompositionStart"?Zn==="onCompositionEnd"&&Ef&&(Ln=eu()):(Ba=nt,Ud="value"in Ba?Ba.value:Ba.textContent,Ef=!0)),Qt=AS(Be,Zn),0<Qt.length&&(Zn=new go(Zn,l,null,g,nt),ut.push({event:Zn,listeners:Qt}),Ln?Zn.data=Ln:(Ln=wf(g),Ln!==null&&(Zn.data=Ln)))),(Ln=Va?x1(l,g):My(l,g))&&(Zn=AS(Be,"onBeforeInput"),0<Zn.length&&(Qt=new go("onBeforeInput","beforeinput",null,g,nt),ut.push({event:Qt,listeners:Zn}),Qt.data=Ln)),Qr(ut,l,Be,g,nt)}Kk(ut,u)})}function Nb(l,u,g){return{instance:l,listener:u,currentTarget:g}}function AS(l,u){for(var g=u+"Capture",b=[];l!==null;){var I=l,D=I.stateNode;if(I=I.tag,I!==5&&I!==26&&I!==27||D===null||(I=mo(l,g),I!=null&&b.unshift(Nb(l,I,D)),I=mo(l,u),I!=null&&b.push(Nb(l,I,D))),l.tag===3)return b;l=l.return}return[]}function UY(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function Qk(l,u,g,b,I){for(var D=u._reactName,X=[];g!==null&&g!==b;){var ie=g,be=ie.alternate,Be=ie.stateNode;if(ie=ie.tag,be!==null&&be===b)break;ie!==5&&ie!==26&&ie!==27||Be===null||(be=Be,I?(Be=mo(g,D),Be!=null&&X.unshift(Nb(g,Be,be))):I||(Be=mo(g,D),Be!=null&&X.push(Nb(g,Be,be)))),g=g.return}X.length!==0&&l.push({event:u,listeners:X})}var FY=/\r\n?/g,zY=/\u0000|\uFFFD/g;function Jk(l){return(typeof l=="string"?l:""+l).replace(FY,`
`).replace(zY,"")}function e4(l,u){return u=Jk(u),Jk(l)===u}function Dr(l,u,g,b,I,D){switch(g){case"children":typeof b=="string"?u==="body"||u==="textarea"&&b===""||qn(l,b):(typeof b=="number"||typeof b=="bigint")&&u!=="body"&&qn(l,""+b);break;case"className":Ht(l,"class",b);break;case"tabIndex":Ht(l,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":Ht(l,g,b);break;case"style":za(l,b,D);break;case"data":if(u!=="object"){Ht(l,"data",b);break}case"src":case"href":if(b===""&&(u!=="a"||g!=="href")){l.removeAttribute(g);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(g);break}b=js(""+b),l.setAttribute(g,b);break;case"action":case"formAction":if(typeof b=="function"){l.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(g==="formAction"?(u!=="input"&&Dr(l,u,"name",I.name,I,null),Dr(l,u,"formEncType",I.formEncType,I,null),Dr(l,u,"formMethod",I.formMethod,I,null),Dr(l,u,"formTarget",I.formTarget,I,null)):(Dr(l,u,"encType",I.encType,I,null),Dr(l,u,"method",I.method,I,null),Dr(l,u,"target",I.target,I,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(g);break}b=js(""+b),l.setAttribute(g,b);break;case"onClick":b!=null&&(l.onclick=ja);break;case"onScroll":b!=null&&Xn("scroll",l);break;case"onScrollEnd":b!=null&&Xn("scrollend",l);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(g=b.__html,g!=null){if(I.children!=null)throw Error(r(60));l.innerHTML=g}}break;case"multiple":l.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":l.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){l.removeAttribute("xlink:href");break}g=js(""+b),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(g,""+b):l.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(g,""):l.removeAttribute(g);break;case"capture":case"download":b===!0?l.setAttribute(g,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(g,b):l.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?l.setAttribute(g,b):l.removeAttribute(g);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?l.removeAttribute(g):l.setAttribute(g,b);break;case"popover":Xn("beforetoggle",l),Xn("toggle",l),jt(l,"popover",b);break;case"xlinkActuate":Dt(l,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":Dt(l,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":Dt(l,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":Dt(l,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":Dt(l,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":Dt(l,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":Dt(l,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":Dt(l,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":Dt(l,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":jt(l,"is",b);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=lc.get(g)||g,jt(l,g,b))}}function JC(l,u,g,b,I,D){switch(g){case"style":za(l,b,D);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(g=b.__html,g!=null){if(I.children!=null)throw Error(r(60));l.innerHTML=g}}break;case"children":typeof b=="string"?qn(l,b):(typeof b=="number"||typeof b=="bigint")&&qn(l,""+b);break;case"onScroll":b!=null&&Xn("scroll",l);break;case"onScrollEnd":b!=null&&Xn("scrollend",l);break;case"onClick":b!=null&&(l.onclick=ja);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!He.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(I=g.endsWith("Capture"),u=g.slice(2,I?g.length-7:void 0),D=l[kr]||null,D=D!=null?D[g]:null,typeof D=="function"&&l.removeEventListener(u,D,I),typeof b=="function")){typeof D!="function"&&D!==null&&(g in l?l[g]=null:l.hasAttribute(g)&&l.removeAttribute(g)),l.addEventListener(u,b,I);break e}g in l?l[g]=b:b===!0?l.setAttribute(g,""):jt(l,g,b)}}}function Za(l,u,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xn("error",l),Xn("load",l);var b=!1,I=!1,D;for(D in g)if(g.hasOwnProperty(D)){var X=g[D];if(X!=null)switch(D){case"src":b=!0;break;case"srcSet":I=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Dr(l,u,D,X,g,null)}}I&&Dr(l,u,"srcSet",g.srcSet,g,null),b&&Dr(l,u,"src",g.src,g,null);return;case"input":Xn("invalid",l);var ie=D=X=I=null,be=null,Be=null;for(b in g)if(g.hasOwnProperty(b)){var nt=g[b];if(nt!=null)switch(b){case"name":I=nt;break;case"type":X=nt;break;case"checked":be=nt;break;case"defaultChecked":Be=nt;break;case"value":D=nt;break;case"defaultValue":ie=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(r(137,u));break;default:Dr(l,u,b,nt,g,null)}}Yn(l,D,ie,be,Be,X,I,!1);return;case"select":Xn("invalid",l),b=X=D=null;for(I in g)if(g.hasOwnProperty(I)&&(ie=g[I],ie!=null))switch(I){case"value":D=ie;break;case"defaultValue":X=ie;break;case"multiple":b=ie;default:Dr(l,u,I,ie,g,null)}u=D,g=X,l.multiple=!!b,u!=null?Gn(l,!!b,u,!1):g!=null&&Gn(l,!!b,g,!0);return;case"textarea":Xn("invalid",l),D=I=b=null;for(X in g)if(g.hasOwnProperty(X)&&(ie=g[X],ie!=null))switch(X){case"value":b=ie;break;case"defaultValue":I=ie;break;case"children":D=ie;break;case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(91));break;default:Dr(l,u,X,ie,g,null)}ir(l,b,I,D);return;case"option":for(be in g)if(g.hasOwnProperty(be)&&(b=g[be],b!=null))switch(be){case"selected":l.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:Dr(l,u,be,b,g,null)}return;case"dialog":Xn("beforetoggle",l),Xn("toggle",l),Xn("cancel",l),Xn("close",l);break;case"iframe":case"object":Xn("load",l);break;case"video":case"audio":for(b=0;b<Do.length;b++)Xn(Do[b],l);break;case"image":Xn("error",l),Xn("load",l);break;case"details":Xn("toggle",l);break;case"embed":case"source":case"link":Xn("error",l),Xn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Be in g)if(g.hasOwnProperty(Be)&&(b=g[Be],b!=null))switch(Be){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Dr(l,u,Be,b,g,null)}return;default:if(xi(u)){for(nt in g)g.hasOwnProperty(nt)&&(b=g[nt],b!==void 0&&JC(l,u,nt,b,g,void 0));return}}for(ie in g)g.hasOwnProperty(ie)&&(b=g[ie],b!=null&&Dr(l,u,ie,b,g,null))}function jY(l,u,g,b){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var I=null,D=null,X=null,ie=null,be=null,Be=null,nt=null;for(Ke in g){var ut=g[Ke];if(g.hasOwnProperty(Ke)&&ut!=null)switch(Ke){case"checked":break;case"value":break;case"defaultValue":be=ut;default:b.hasOwnProperty(Ke)||Dr(l,u,Ke,null,b,ut)}}for(var Ge in b){var Ke=b[Ge];if(ut=g[Ge],b.hasOwnProperty(Ge)&&(Ke!=null||ut!=null))switch(Ge){case"type":D=Ke;break;case"name":I=Ke;break;case"checked":Be=Ke;break;case"defaultChecked":nt=Ke;break;case"value":X=Ke;break;case"defaultValue":ie=Ke;break;case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(r(137,u));break;default:Ke!==ut&&Dr(l,u,Ge,Ke,b,ut)}}Zt(l,X,ie,be,Be,nt,D,I);return;case"select":Ke=X=ie=Ge=null;for(D in g)if(be=g[D],g.hasOwnProperty(D)&&be!=null)switch(D){case"value":break;case"multiple":Ke=be;default:b.hasOwnProperty(D)||Dr(l,u,D,null,b,be)}for(I in b)if(D=b[I],be=g[I],b.hasOwnProperty(I)&&(D!=null||be!=null))switch(I){case"value":Ge=D;break;case"defaultValue":ie=D;break;case"multiple":X=D;default:D!==be&&Dr(l,u,I,D,b,be)}u=ie,g=X,b=Ke,Ge!=null?Gn(l,!!g,Ge,!1):!!b!=!!g&&(u!=null?Gn(l,!!g,u,!0):Gn(l,!!g,g?[]:"",!1));return;case"textarea":Ke=Ge=null;for(ie in g)if(I=g[ie],g.hasOwnProperty(ie)&&I!=null&&!b.hasOwnProperty(ie))switch(ie){case"value":break;case"children":break;default:Dr(l,u,ie,null,b,I)}for(X in b)if(I=b[X],D=g[X],b.hasOwnProperty(X)&&(I!=null||D!=null))switch(X){case"value":Ge=I;break;case"defaultValue":Ke=I;break;case"children":break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:I!==D&&Dr(l,u,X,I,b,D)}hn(l,Ge,Ke);return;case"option":for(var Xt in g)if(Ge=g[Xt],g.hasOwnProperty(Xt)&&Ge!=null&&!b.hasOwnProperty(Xt))switch(Xt){case"selected":l.selected=!1;break;default:Dr(l,u,Xt,null,b,Ge)}for(be in b)if(Ge=b[be],Ke=g[be],b.hasOwnProperty(be)&&Ge!==Ke&&(Ge!=null||Ke!=null))switch(be){case"selected":l.selected=Ge&&typeof Ge!="function"&&typeof Ge!="symbol";break;default:Dr(l,u,be,Ge,b,Ke)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fn in g)Ge=g[fn],g.hasOwnProperty(fn)&&Ge!=null&&!b.hasOwnProperty(fn)&&Dr(l,u,fn,null,b,Ge);for(Be in b)if(Ge=b[Be],Ke=g[Be],b.hasOwnProperty(Be)&&Ge!==Ke&&(Ge!=null||Ke!=null))switch(Be){case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(r(137,u));break;default:Dr(l,u,Be,Ge,b,Ke)}return;default:if(xi(u)){for(var Lr in g)Ge=g[Lr],g.hasOwnProperty(Lr)&&Ge!==void 0&&!b.hasOwnProperty(Lr)&&JC(l,u,Lr,void 0,b,Ge);for(nt in b)Ge=b[nt],Ke=g[nt],!b.hasOwnProperty(nt)||Ge===Ke||Ge===void 0&&Ke===void 0||JC(l,u,nt,Ge,b,Ke);return}}for(var Pe in g)Ge=g[Pe],g.hasOwnProperty(Pe)&&Ge!=null&&!b.hasOwnProperty(Pe)&&Dr(l,u,Pe,null,b,Ge);for(ut in b)Ge=b[ut],Ke=g[ut],!b.hasOwnProperty(ut)||Ge===Ke||Ge==null&&Ke==null||Dr(l,u,ut,Ge,b,Ke)}function t4(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function BY(){if(typeof performance.getEntriesByType=="function"){for(var l=0,u=0,g=performance.getEntriesByType("resource"),b=0;b<g.length;b++){var I=g[b],D=I.transferSize,X=I.initiatorType,ie=I.duration;if(D&&ie&&t4(X)){for(X=0,ie=I.responseEnd,b+=1;b<g.length;b++){var be=g[b],Be=be.startTime;if(Be>ie)break;var nt=be.transferSize,ut=be.initiatorType;nt&&t4(ut)&&(be=be.responseEnd,X+=nt*(be<ie?1:(ie-Be)/(be-Be)))}if(--b,u+=8*(D+X)/(I.duration/1e3),l++,10<l)break}}if(0<l)return u/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var eI=null,tI=null;function TS(l){return l.nodeType===9?l:l.ownerDocument}function n4(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function r4(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function nI(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var rI=null;function VY(){var l=window.event;return l&&l.type==="popstate"?l===rI?!1:(rI=l,!0):(rI=null,!1)}var i4=typeof setTimeout=="function"?setTimeout:void 0,HY=typeof clearTimeout=="function"?clearTimeout:void 0,a4=typeof Promise=="function"?Promise:void 0,GY=typeof queueMicrotask=="function"?queueMicrotask:typeof a4<"u"?function(l){return a4.resolve(null).then(l).catch(qY)}:i4;function qY(l){setTimeout(function(){throw l})}function xh(l){return l==="head"}function s4(l,u){var g=u,b=0;do{var I=g.nextSibling;if(l.removeChild(g),I&&I.nodeType===8)if(g=I.data,g==="/$"||g==="/&"){if(b===0){l.removeChild(I),P0(u);return}b--}else if(g==="$"||g==="$?"||g==="$~"||g==="$!"||g==="&")b++;else if(g==="html")Ob(l.ownerDocument.documentElement);else if(g==="head"){g=l.ownerDocument.head,Ob(g);for(var D=g.firstChild;D;){var X=D.nextSibling,ie=D.nodeName;D[qi]||ie==="SCRIPT"||ie==="STYLE"||ie==="LINK"&&D.rel.toLowerCase()==="stylesheet"||g.removeChild(D),D=X}}else g==="body"&&Ob(l.ownerDocument.body);g=I}while(g);P0(u)}function o4(l,u){var g=l;l=0;do{var b=g.nextSibling;if(g.nodeType===1?u?(g._stashedDisplay=g.style.display,g.style.display="none"):(g.style.display=g._stashedDisplay||"",g.getAttribute("style")===""&&g.removeAttribute("style")):g.nodeType===3&&(u?(g._stashedText=g.nodeValue,g.nodeValue=""):g.nodeValue=g._stashedText||""),b&&b.nodeType===8)if(g=b.data,g==="/$"){if(l===0)break;l--}else g!=="$"&&g!=="$?"&&g!=="$~"&&g!=="$!"||l++;g=b}while(g)}function iI(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var g=u;switch(u=u.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":iI(g),hs(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}l.removeChild(g)}}function WY(l,u,g,b){for(;l.nodeType===1;){var I=g;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!b&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(b){if(!l[qi])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(D=l.getAttribute("rel"),D==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(D!==I.rel||l.getAttribute("href")!==(I.href==null||I.href===""?null:I.href)||l.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin)||l.getAttribute("title")!==(I.title==null?null:I.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(D=l.getAttribute("src"),(D!==(I.src==null?null:I.src)||l.getAttribute("type")!==(I.type==null?null:I.type)||l.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin))&&D&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var D=I.name==null?null:""+I.name;if(I.type==="hidden"&&l.getAttribute("name")===D)return l}else return l;if(l=ql(l.nextSibling),l===null)break}return null}function $Y(l,u,g){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!g||(l=ql(l.nextSibling),l===null))return null;return l}function l4(l,u){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!u||(l=ql(l.nextSibling),l===null))return null;return l}function aI(l){return l.data==="$?"||l.data==="$~"}function sI(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function XY(l,u){var g=l.ownerDocument;if(l.data==="$~")l._reactRetry=u;else if(l.data!=="$?"||g.readyState!=="loading")u();else{var b=function(){u(),g.removeEventListener("DOMContentLoaded",b)};g.addEventListener("DOMContentLoaded",b),l._reactRetry=b}}function ql(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return l}var oI=null;function c4(l){l=l.nextSibling;for(var u=0;l;){if(l.nodeType===8){var g=l.data;if(g==="/$"||g==="/&"){if(u===0)return ql(l.nextSibling);u--}else g!=="$"&&g!=="$!"&&g!=="$?"&&g!=="$~"&&g!=="&"||u++}l=l.nextSibling}return null}function u4(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var g=l.data;if(g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"){if(u===0)return l;u--}else g!=="/$"&&g!=="/&"||u++}l=l.previousSibling}return null}function f4(l,u,g){switch(u=TS(g),l){case"html":if(l=u.documentElement,!l)throw Error(r(452));return l;case"head":if(l=u.head,!l)throw Error(r(453));return l;case"body":if(l=u.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function Ob(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);hs(l)}var Wl=new Map,d4=new Set;function MS(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Xf=$.d;$.d={f:YY,r:KY,D:ZY,C:QY,L:JY,m:eK,X:nK,S:tK,M:rK};function YY(){var l=Xf.f(),u=il();return l||u}function KY(l){var u=ua(l);u!==null&&u.tag===5&&u.type==="form"?cS(u):Xf.r(l)}var C0=typeof document>"u"?null:document;function h4(l,u,g){var b=C0;if(b&&typeof u=="string"&&u){var I=wt(u);I='link[rel="'+l+'"][href="'+I+'"]',typeof g=="string"&&(I+='[crossorigin="'+g+'"]'),d4.has(I)||(d4.add(I),l={rel:l,crossOrigin:g,href:u},b.querySelector(I)===null&&(u=b.createElement("link"),Za(u,"link",l),te(u),b.head.appendChild(u)))}}function ZY(l){Xf.D(l),h4("dns-prefetch",l,null)}function QY(l,u){Xf.C(l,u),h4("preconnect",l,u)}function JY(l,u,g){Xf.L(l,u,g);var b=C0;if(b&&l&&u){var I='link[rel="preload"][as="'+wt(u)+'"]';u==="image"&&g&&g.imageSrcSet?(I+='[imagesrcset="'+wt(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(I+='[imagesizes="'+wt(g.imageSizes)+'"]')):I+='[href="'+wt(l)+'"]';var D=I;switch(u){case"style":D=I0(l);break;case"script":D=R0(l)}Wl.has(D)||(l=p({rel:"preload",href:u==="image"&&g&&g.imageSrcSet?void 0:l,as:u},g),Wl.set(D,l),b.querySelector(I)!==null||u==="style"&&b.querySelector(Db(D))||u==="script"&&b.querySelector(Lb(D))||(u=b.createElement("link"),Za(u,"link",l),te(u),b.head.appendChild(u)))}}function eK(l,u){Xf.m(l,u);var g=C0;if(g&&l){var b=u&&typeof u.as=="string"?u.as:"script",I='link[rel="modulepreload"][as="'+wt(b)+'"][href="'+wt(l)+'"]',D=I;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=R0(l)}if(!Wl.has(D)&&(l=p({rel:"modulepreload",href:l},u),Wl.set(D,l),g.querySelector(I)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Lb(D)))return}b=g.createElement("link"),Za(b,"link",l),te(b),g.head.appendChild(b)}}}function tK(l,u,g){Xf.S(l,u,g);var b=C0;if(b&&l){var I=fa(b).hoistableStyles,D=I0(l);u=u||"default";var X=I.get(D);if(!X){var ie={loading:0,preload:null};if(X=b.querySelector(Db(D)))ie.loading=5;else{l=p({rel:"stylesheet",href:l,"data-precedence":u},g),(g=Wl.get(D))&&lI(l,g);var be=X=b.createElement("link");te(be),Za(be,"link",l),be._p=new Promise(function(Be,nt){be.onload=Be,be.onerror=nt}),be.addEventListener("load",function(){ie.loading|=1}),be.addEventListener("error",function(){ie.loading|=2}),ie.loading|=4,CS(X,u,b)}X={type:"stylesheet",instance:X,count:1,state:ie},I.set(D,X)}}}function nK(l,u){Xf.X(l,u);var g=C0;if(g&&l){var b=fa(g).hoistableScripts,I=R0(l),D=b.get(I);D||(D=g.querySelector(Lb(I)),D||(l=p({src:l,async:!0},u),(u=Wl.get(I))&&cI(l,u),D=g.createElement("script"),te(D),Za(D,"link",l),g.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},b.set(I,D))}}function rK(l,u){Xf.M(l,u);var g=C0;if(g&&l){var b=fa(g).hoistableScripts,I=R0(l),D=b.get(I);D||(D=g.querySelector(Lb(I)),D||(l=p({src:l,async:!0,type:"module"},u),(u=Wl.get(I))&&cI(l,u),D=g.createElement("script"),te(D),Za(D,"link",l),g.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},b.set(I,D))}}function p4(l,u,g,b){var I=(I=ye.current)?MS(I):null;if(!I)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(u=I0(g.href),g=fa(I).hoistableStyles,b=g.get(u),b||(b={type:"style",instance:null,count:0,state:null},g.set(u,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){l=I0(g.href);var D=fa(I).hoistableStyles,X=D.get(l);if(X||(I=I.ownerDocument||I,X={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(l,X),(D=I.querySelector(Db(l)))&&!D._p&&(X.instance=D,X.state.loading=5),Wl.has(l)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Wl.set(l,g),D||iK(I,l,g,X.state))),u&&b===null)throw Error(r(528,""));return X}if(u&&b!==null)throw Error(r(529,""));return null;case"script":return u=g.async,g=g.src,typeof g=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=R0(g),g=fa(I).hoistableScripts,b=g.get(u),b||(b={type:"script",instance:null,count:0,state:null},g.set(u,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function I0(l){return'href="'+wt(l)+'"'}function Db(l){return'link[rel="stylesheet"]['+l+"]"}function m4(l){return p({},l,{"data-precedence":l.precedence,precedence:null})}function iK(l,u,g,b){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?b.loading=1:(u=l.createElement("link"),b.preload=u,u.addEventListener("load",function(){return b.loading|=1}),u.addEventListener("error",function(){return b.loading|=2}),Za(u,"link",g),te(u),l.head.appendChild(u))}function R0(l){return'[src="'+wt(l)+'"]'}function Lb(l){return"script[async]"+l}function g4(l,u,g){if(u.count++,u.instance===null)switch(u.type){case"style":var b=l.querySelector('style[data-href~="'+wt(g.href)+'"]');if(b)return u.instance=b,te(b),b;var I=p({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return b=(l.ownerDocument||l).createElement("style"),te(b),Za(b,"style",I),CS(b,g.precedence,l),u.instance=b;case"stylesheet":I=I0(g.href);var D=l.querySelector(Db(I));if(D)return u.state.loading|=4,u.instance=D,te(D),D;b=m4(g),(I=Wl.get(I))&&lI(b,I),D=(l.ownerDocument||l).createElement("link"),te(D);var X=D;return X._p=new Promise(function(ie,be){X.onload=ie,X.onerror=be}),Za(D,"link",b),u.state.loading|=4,CS(D,g.precedence,l),u.instance=D;case"script":return D=R0(g.src),(I=l.querySelector(Lb(D)))?(u.instance=I,te(I),I):(b=g,(I=Wl.get(D))&&(b=p({},g),cI(b,I)),l=l.ownerDocument||l,I=l.createElement("script"),te(I),Za(I,"link",b),l.head.appendChild(I),u.instance=I);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(b=u.instance,u.state.loading|=4,CS(b,g.precedence,l));return u.instance}function CS(l,u,g){for(var b=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),I=b.length?b[b.length-1]:null,D=I,X=0;X<b.length;X++){var ie=b[X];if(ie.dataset.precedence===u)D=ie;else if(D!==I)break}D?D.parentNode.insertBefore(l,D.nextSibling):(u=g.nodeType===9?g.head:g,u.insertBefore(l,u.firstChild))}function lI(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function cI(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var IS=null;function v4(l,u,g){if(IS===null){var b=new Map,I=IS=new Map;I.set(g,b)}else I=IS,b=I.get(g),b||(b=new Map,I.set(g,b));if(b.has(l))return b;for(b.set(l,null),g=g.getElementsByTagName(l),I=0;I<g.length;I++){var D=g[I];if(!(D[qi]||D[br]||l==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var X=D.getAttribute(u)||"";X=l+X;var ie=b.get(X);ie?ie.push(D):b.set(X,[D])}}return b}function y4(l,u,g){l=l.ownerDocument||l,l.head.insertBefore(g,u==="title"?l.querySelector("head > title"):null)}function aK(l,u,g){if(g===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function b4(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function sK(l,u,g,b){if(g.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(g.state.loading&4)===0){if(g.instance===null){var I=I0(b.href),D=u.querySelector(Db(I));if(D){u=D._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(l.count++,l=RS.bind(l),u.then(l,l)),g.state.loading|=4,g.instance=D,te(D);return}D=u.ownerDocument||u,b=m4(b),(I=Wl.get(I))&&lI(b,I),D=D.createElement("link"),te(D);var X=D;X._p=new Promise(function(ie,be){X.onload=ie,X.onerror=be}),Za(D,"link",b),g.instance=D}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(g,u),(u=g.state.preload)&&(g.state.loading&3)===0&&(l.count++,g=RS.bind(l),u.addEventListener("load",g),u.addEventListener("error",g))}}var uI=0;function oK(l,u){return l.stylesheets&&l.count===0&&NS(l,l.stylesheets),0<l.count||0<l.imgCount?function(g){var b=setTimeout(function(){if(l.stylesheets&&NS(l,l.stylesheets),l.unsuspend){var D=l.unsuspend;l.unsuspend=null,D()}},6e4+u);0<l.imgBytes&&uI===0&&(uI=62500*BY());var I=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&NS(l,l.stylesheets),l.unsuspend)){var D=l.unsuspend;l.unsuspend=null,D()}},(l.imgBytes>uI?50:800)+u);return l.unsuspend=g,function(){l.unsuspend=null,clearTimeout(b),clearTimeout(I)}}:null}function RS(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)NS(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var PS=null;function NS(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,PS=new Map,u.forEach(lK,l),PS=null,RS.call(l))}function lK(l,u){if(!(u.state.loading&4)){var g=PS.get(l);if(g)var b=g.get(null);else{g=new Map,PS.set(l,g);for(var I=l.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<I.length;D++){var X=I[D];(X.nodeName==="LINK"||X.getAttribute("media")!=="not all")&&(g.set(X.dataset.precedence,X),b=X)}b&&g.set(null,b)}I=u.instance,X=I.getAttribute("data-precedence"),D=g.get(X)||b,D===b&&g.set(null,I),g.set(X,I),this.count++,b=RS.bind(this),I.addEventListener("load",b),I.addEventListener("error",b),D?D.parentNode.insertBefore(I,D.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(I,l.firstChild)),u.state.loading|=4}}var kb={$$typeof:N,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function cK(l,u,g,b,I,D,X,ie,be){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kt(0),this.hiddenUpdates=Kt(null),this.identifierPrefix=b,this.onUncaughtError=I,this.onCaughtError=D,this.onRecoverableError=X,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=be,this.incompleteTransitions=new Map}function x4(l,u,g,b,I,D,X,ie,be,Be,nt,ut){return l=new cK(l,u,g,X,be,Be,nt,ut,ie),u=1,D===!0&&(u|=24),D=Wr(3,null,null,u),l.current=D,D.stateNode=l,u=jy(),u.refCount++,l.pooledCache=u,u.refCount++,D.memoizedState={element:b,isDehydrated:g,cache:u},Wp(D),l}function _4(l){return l?(l=lu,l):lu}function S4(l,u,g,b,I,D){I=_4(I),b.context===null?b.context=I:b.pendingContext=I,b=_c(u),b.payload={element:g},D=D===void 0?null:D,D!==null&&(b.callback=D),g=gu(l,b,u),g!==null&&(On(g,l,u),vu(g,l,u))}function w4(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<u?g:u}}function fI(l,u){w4(l,u),(l=l.alternate)&&w4(l,u)}function E4(l){if(l.tag===13||l.tag===31){var u=Ga(l,67108864);u!==null&&On(u,l,67108864),fI(l,67108864)}}function A4(l){if(l.tag===13||l.tag===31){var u=Zs();u=ds(u);var g=Ga(l,u);g!==null&&On(g,l,u),fI(l,u)}}var OS=!0;function uK(l,u,g,b){var I=W.T;W.T=null;var D=$.p;try{$.p=2,dI(l,u,g,b)}finally{$.p=D,W.T=I}}function fK(l,u,g,b){var I=W.T;W.T=null;var D=$.p;try{$.p=8,dI(l,u,g,b)}finally{$.p=D,W.T=I}}function dI(l,u,g,b){if(OS){var I=hI(b);if(I===null)QC(l,u,b,DS,g),M4(l,b);else if(hK(I,l,u,g,b))b.stopPropagation();else if(M4(l,b),u&4&&-1<dK.indexOf(l)){for(;I!==null;){var D=ua(I);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var X=st(D.pendingLanes);if(X!==0){var ie=D;for(ie.pendingLanes|=2,ie.entangledLanes|=2;X;){var be=1<<31-he(X);ie.entanglements[1]|=be,X&=~be}Et(D),(Jt&6)===0&&(mi=Y()+500,zt(0))}}break;case 31:case 13:ie=Ga(D,2),ie!==null&&On(ie,D,2),il(),fI(D,2)}if(D=hI(b),D===null&&QC(l,u,b,DS,g),D===I)break;I=D}I!==null&&b.stopPropagation()}else QC(l,u,b,null,g)}}function hI(l){return l=Bs(l),pI(l)}var DS=null;function pI(l){if(DS=null,l=Fa(l),l!==null){var u=a(l);if(u===null)l=null;else{var g=u.tag;if(g===13){if(l=s(u),l!==null)return l;l=null}else if(g===31){if(l=o(u),l!==null)return l;l=null}else if(g===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return DS=l,null}function T4(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xe()){case ke:return 2;case et:return 8;case Ne:case It:return 32;case rt:return 268435456;default:return 32}default:return 32}}var mI=!1,_h=null,Sh=null,wh=null,Ub=new Map,Fb=new Map,Eh=[],dK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function M4(l,u){switch(l){case"focusin":case"focusout":_h=null;break;case"dragenter":case"dragleave":Sh=null;break;case"mouseover":case"mouseout":wh=null;break;case"pointerover":case"pointerout":Ub.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fb.delete(u.pointerId)}}function zb(l,u,g,b,I,D){return l===null||l.nativeEvent!==D?(l={blockedOn:u,domEventName:g,eventSystemFlags:b,nativeEvent:D,targetContainers:[I]},u!==null&&(u=ua(u),u!==null&&E4(u)),l):(l.eventSystemFlags|=b,u=l.targetContainers,I!==null&&u.indexOf(I)===-1&&u.push(I),l)}function hK(l,u,g,b,I){switch(u){case"focusin":return _h=zb(_h,l,u,g,b,I),!0;case"dragenter":return Sh=zb(Sh,l,u,g,b,I),!0;case"mouseover":return wh=zb(wh,l,u,g,b,I),!0;case"pointerover":var D=I.pointerId;return Ub.set(D,zb(Ub.get(D)||null,l,u,g,b,I)),!0;case"gotpointercapture":return D=I.pointerId,Fb.set(D,zb(Fb.get(D)||null,l,u,g,b,I)),!0}return!1}function C4(l){var u=Fa(l.target);if(u!==null){var g=a(u);if(g!==null){if(u=g.tag,u===13){if(u=s(g),u!==null){l.blockedOn=u,Mr(l.priority,function(){A4(g)});return}}else if(u===31){if(u=o(g),u!==null){l.blockedOn=u,Mr(l.priority,function(){A4(g)});return}}else if(u===3&&g.stateNode.current.memoizedState.isDehydrated){l.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}l.blockedOn=null}function LS(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var g=hI(l.nativeEvent);if(g===null){g=l.nativeEvent;var b=new g.constructor(g.type,g);kd=b,g.target.dispatchEvent(b),kd=null}else return u=ua(g),u!==null&&E4(u),l.blockedOn=g,!1;u.shift()}return!0}function I4(l,u,g){LS(l)&&g.delete(u)}function pK(){mI=!1,_h!==null&&LS(_h)&&(_h=null),Sh!==null&&LS(Sh)&&(Sh=null),wh!==null&&LS(wh)&&(wh=null),Ub.forEach(I4),Fb.forEach(I4)}function kS(l,u){l.blockedOn===u&&(l.blockedOn=null,mI||(mI=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,pK)))}var US=null;function R4(l){US!==l&&(US=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){US===l&&(US=null);for(var u=0;u<l.length;u+=3){var g=l[u],b=l[u+1],I=l[u+2];if(typeof b!="function"){if(pI(b||g)===null)continue;break}var D=ua(g);D!==null&&(l.splice(u,3),u-=3,hb(D,{pending:!0,data:I,method:g.method,action:b},b,I))}}))}function P0(l){function u(be){return kS(be,l)}_h!==null&&kS(_h,l),Sh!==null&&kS(Sh,l),wh!==null&&kS(wh,l),Ub.forEach(u),Fb.forEach(u);for(var g=0;g<Eh.length;g++){var b=Eh[g];b.blockedOn===l&&(b.blockedOn=null)}for(;0<Eh.length&&(g=Eh[0],g.blockedOn===null);)C4(g),g.blockedOn===null&&Eh.shift();if(g=(l.ownerDocument||l).$$reactFormReplay,g!=null)for(b=0;b<g.length;b+=3){var I=g[b],D=g[b+1],X=I[kr]||null;if(typeof D=="function")X||R4(g);else if(X){var ie=null;if(D&&D.hasAttribute("formAction")){if(I=D,X=D[kr]||null)ie=X.formAction;else if(pI(I)!==null)continue}else ie=X.action;typeof ie=="function"?g[b+1]=ie:(g.splice(b,3),b-=3),R4(g)}}}function P4(){function l(D){D.canIntercept&&D.info==="react-transition"&&D.intercept({handler:function(){return new Promise(function(X){return I=X})},focusReset:"manual",scroll:"manual"})}function u(){I!==null&&(I(),I=null),b||setTimeout(g,20)}function g(){if(!b&&!navigation.transition){var D=navigation.currentEntry;D&&D.url!=null&&navigation.navigate(D.url,{state:D.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var b=!1,I=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(g,100),function(){b=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),I!==null&&(I(),I=null)}}}function gI(l){this._internalRoot=l}FS.prototype.render=gI.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(r(409));var g=u.current,b=Zs();S4(g,b,l,u,null,null)},FS.prototype.unmount=gI.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;S4(l.current,2,null,l,null,null),il(),u[Ni]=null}};function FS(l){this._internalRoot=l}FS.prototype.unstable_scheduleHydration=function(l){if(l){var u=Wo();l={blockedOn:null,target:l,priority:u};for(var g=0;g<Eh.length&&u!==0&&u<Eh[g].priority;g++);Eh.splice(g,0,l),g===0&&C4(l)}};var N4=e.version;if(N4!=="19.2.4")throw Error(r(527,N4,"19.2.4"));$.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=f(u),l=l!==null?d(l):null,l=l===null?null:l.stateNode,l};var mK={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zS.isDisabled&&zS.supportsFiber)try{it=zS.inject(mK),tt=zS}catch{}}return Bb.createRoot=function(l,u){if(!i(l))throw Error(r(299));var g=!1,b="",I=gS,D=bb,X=xb;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onUncaughtError!==void 0&&(I=u.onUncaughtError),u.onCaughtError!==void 0&&(D=u.onCaughtError),u.onRecoverableError!==void 0&&(X=u.onRecoverableError)),u=x4(l,1,!1,null,null,g,b,null,I,D,X,P4),l[Ni]=u.current,ZC(l),new gI(u)},Bb.hydrateRoot=function(l,u,g){if(!i(l))throw Error(r(299));var b=!1,I="",D=gS,X=bb,ie=xb,be=null;return g!=null&&(g.unstable_strictMode===!0&&(b=!0),g.identifierPrefix!==void 0&&(I=g.identifierPrefix),g.onUncaughtError!==void 0&&(D=g.onUncaughtError),g.onCaughtError!==void 0&&(X=g.onCaughtError),g.onRecoverableError!==void 0&&(ie=g.onRecoverableError),g.formState!==void 0&&(be=g.formState)),u=x4(l,1,!0,u,g??null,b,I,be,D,X,ie,P4),u.context=_4(null),g=u.current,b=Zs(),b=ds(b),I=_c(b),I.callback=null,gu(g,I,b),g=b,u.current.lanes=g,Ar(u,g),Et(u),l[Ni]=u.current,ZC(l),new FS(u)},Bb.version="19.2.4",Bb}var V4;function TK(){if(V4)return xI.exports;V4=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),xI.exports=AK(),xI.exports}var MK=TK();const CK=Kc(MK);var gV=mV();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vx(){return Vx=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Vx.apply(this,arguments)}var $h;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})($h||($h={}));const H4="popstate";function IK(n){n===void 0&&(n={});function e(r,i){let{pathname:a,search:s,hash:o}=r.location;return yN("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:IE(i)}return PK(e,t,null,n)}function ia(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function h3(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RK(){return Math.random().toString(36).substr(2,8)}function G4(n,e){return{usr:n.state,key:n.key,idx:e}}function yN(n,e,t,r){return t===void 0&&(t=null),Vx({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?ay(e):e,{state:t,key:e&&e.key||r||RK()})}function IE(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ay(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function PK(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o=$h.Pop,c=null,f=d();f==null&&(f=0,s.replaceState(Vx({},s.state,{idx:f}),""));function d(){return(s.state||{idx:null}).idx}function p(){o=$h.Pop;let S=d(),w=S==null?null:S-f;f=S,c&&c({action:o,location:E.location,delta:w})}function v(S,w){o=$h.Push;let R=yN(E.location,S,w);f=d()+1;let N=G4(R,f),O=E.createHref(R);try{s.pushState(N,"",O)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(O)}a&&c&&c({action:o,location:E.location,delta:1})}function y(S,w){o=$h.Replace;let R=yN(E.location,S,w);f=d();let N=G4(R,f),O=E.createHref(R);s.replaceState(N,"",O),a&&c&&c({action:o,location:E.location,delta:0})}function x(S){let w=i.location.origin!=="null"?i.location.origin:i.location.href,R=typeof S=="string"?S:IE(S);return R=R.replace(/ $/,"%20"),ia(w,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,w)}let E={get action(){return o},get location(){return n(i,s)},listen(S){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(H4,p),c=S,()=>{i.removeEventListener(H4,p),c=null}},createHref(S){return e(i,S)},createURL:x,encodeLocation(S){let w=x(S);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:v,replace:y,go(S){return s.go(S)}};return E}var q4;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(q4||(q4={}));function NK(n,e,t){return t===void 0&&(t="/"),OK(n,e,t)}function OK(n,e,t,r){let i=typeof e=="string"?ay(e):e,a=p3(i.pathname||"/",t);if(a==null)return null;let s=vV(n);DK(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let f=WK(a);o=HK(s[c],f)}return o}function vV(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(a,s,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};c.relativePath.startsWith("/")&&(ia(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let f=Jh([r,c.relativePath]),d=t.concat(c);a.children&&a.children.length>0&&(ia(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),vV(a.children,e,d,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:BK(f,a.index),routesMeta:d})};return n.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let c of yV(a.path))i(a,s,c)}),e}function yV(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=yV(r.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...s),o.map(c=>n.startsWith("/")&&c===""?"/":c)}function DK(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:VK(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const LK=/^:[\w-]+$/,kK=3,UK=2,FK=1,zK=10,jK=-2,W4=n=>n==="*";function BK(n,e){let t=n.split("/"),r=t.length;return t.some(W4)&&(r+=jK),e&&(r+=UK),t.filter(i=>!W4(i)).reduce((i,a)=>i+(LK.test(a)?kK:a===""?FK:zK),r)}function VK(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function HK(n,e,t){let{routesMeta:r}=n,i={},a="/",s=[];for(let o=0;o<r.length;++o){let c=r[o],f=o===r.length-1,d=a==="/"?e:e.slice(a.length)||"/",p=GK({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},d),v=c.route;if(!p)return null;Object.assign(i,p.params),s.push({params:i,pathname:Jh([a,p.pathname]),pathnameBase:ZK(Jh([a,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(a=Jh([a,p.pathnameBase]))}return s}function GK(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=qK(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((f,d,p)=>{let{paramName:v,isOptional:y}=d;if(v==="*"){let E=o[p]||"";s=a.slice(0,a.length-E.length).replace(/(.)\/+$/,"$1")}const x=o[p];return y&&!x?f[v]=void 0:f[v]=(x||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:s,pattern:n}}function qK(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),h3(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function WK(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return h3(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function p3(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const $K=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,XK=n=>$K.test(n);function YK(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?ay(n):n,a;if(t)if(XK(t))a=t;else{if(t.includes("//")){let s=t;t=t.replace(/\/\/+/g,"/"),h3(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+t))}t.startsWith("/")?a=$4(t.substring(1),"/"):a=$4(t,e)}else a=e;return{pathname:a,search:QK(r),hash:JK(i)}}function $4(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function EI(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function KK(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function bV(n,e){let t=KK(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function xV(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=ay(n):(i=Vx({},n),ia(!i.pathname||!i.pathname.includes("?"),EI("?","pathname","search",i)),ia(!i.pathname||!i.pathname.includes("#"),EI("#","pathname","hash",i)),ia(!i.search||!i.search.includes("#"),EI("#","search","hash",i)));let a=n===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=t;else{let p=e.length-1;if(!r&&s.startsWith("..")){let v=s.split("/");for(;v[0]==="..";)v.shift(),p-=1;i.pathname=v.join("/")}o=p>=0?e[p]:"/"}let c=YK(i,o),f=s&&s!=="/"&&s.endsWith("/"),d=(a||s===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(f||d)&&(c.pathname+="/"),c}const Jh=n=>n.join("/").replace(/\/\/+/g,"/"),ZK=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),QK=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,JK=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function eZ(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const _V=["post","put","patch","delete"];new Set(_V);const tZ=["get",..._V];new Set(tZ);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hx(){return Hx=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Hx.apply(this,arguments)}const m3=G.createContext(null),nZ=G.createContext(null),Ag=G.createContext(null),HT=G.createContext(null),Tg=G.createContext({outlet:null,matches:[],isDataRoute:!1}),SV=G.createContext(null);function rZ(n,e){let{relative:t}=e===void 0?{}:e;L_()||ia(!1);let{basename:r,navigator:i}=G.useContext(Ag),{hash:a,pathname:s,search:o}=AV(n,{relative:t}),c=s;return r!=="/"&&(c=s==="/"?r:Jh([r,s])),i.createHref({pathname:c,search:o,hash:a})}function L_(){return G.useContext(HT)!=null}function GT(){return L_()||ia(!1),G.useContext(HT).location}function wV(n){G.useContext(Ag).static||G.useLayoutEffect(n)}function EV(){let{isDataRoute:n}=G.useContext(Tg);return n?gZ():iZ()}function iZ(){L_()||ia(!1);let n=G.useContext(m3),{basename:e,future:t,navigator:r}=G.useContext(Ag),{matches:i}=G.useContext(Tg),{pathname:a}=GT(),s=JSON.stringify(bV(i,t.v7_relativeSplatPath)),o=G.useRef(!1);return wV(()=>{o.current=!0}),G.useCallback(function(f,d){if(d===void 0&&(d={}),!o.current)return;if(typeof f=="number"){r.go(f);return}let p=xV(f,JSON.parse(s),a,d.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Jh([e,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[e,r,s,a,n])}function AV(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=G.useContext(Ag),{matches:i}=G.useContext(Tg),{pathname:a}=GT(),s=JSON.stringify(bV(i,r.v7_relativeSplatPath));return G.useMemo(()=>xV(n,JSON.parse(s),a,t==="path"),[n,s,a,t])}function aZ(n,e){return sZ(n,e)}function sZ(n,e,t,r){L_()||ia(!1);let{navigator:i}=G.useContext(Ag),{matches:a}=G.useContext(Tg),s=a[a.length-1],o=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let f=GT(),d;if(e){var p;let S=typeof e=="string"?ay(e):e;c==="/"||(p=S.pathname)!=null&&p.startsWith(c)||ia(!1),d=S}else d=f;let v=d.pathname||"/",y=v;if(c!=="/"){let S=c.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(S.length).join("/")}let x=NK(n,{pathname:y}),E=fZ(x&&x.map(S=>Object.assign({},S,{params:Object.assign({},o,S.params),pathname:Jh([c,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Jh([c,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,t,r);return e&&E?G.createElement(HT.Provider,{value:{location:Hx({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:$h.Pop}},E):E}function oZ(){let n=mZ(),e=eZ(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),t?G.createElement("pre",{style:i},t):null,null)}const lZ=G.createElement(oZ,null);class cZ extends G.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?G.createElement(Tg.Provider,{value:this.props.routeContext},G.createElement(SV.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uZ(n){let{routeContext:e,match:t,children:r}=n,i=G.useContext(m3);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),G.createElement(Tg.Provider,{value:e},r)}function fZ(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=(i=t)==null?void 0:i.errors;if(o!=null){let d=s.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);d>=0||ia(!1),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,f=-1;if(t&&r&&r.v7_partialHydration)for(let d=0;d<s.length;d++){let p=s[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=d),p.route.id){let{loaderData:v,errors:y}=t,x=p.route.loader&&v[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||x){c=!0,f>=0?s=s.slice(0,f+1):s=[s[0]];break}}}return s.reduceRight((d,p,v)=>{let y,x=!1,E=null,S=null;t&&(y=o&&p.route.id?o[p.route.id]:void 0,E=p.route.errorElement||lZ,c&&(f<0&&v===0?(vZ("route-fallback"),x=!0,S=null):f===v&&(x=!0,S=p.route.hydrateFallbackElement||null)));let w=e.concat(s.slice(0,v+1)),R=()=>{let N;return y?N=E:x?N=S:p.route.Component?N=G.createElement(p.route.Component,null):p.route.element?N=p.route.element:N=d,G.createElement(uZ,{match:p,routeContext:{outlet:d,matches:w,isDataRoute:t!=null},children:N})};return t&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?G.createElement(cZ,{location:t.location,revalidation:t.revalidation,component:E,error:y,children:R(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):R()},null)}var TV=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(TV||{}),MV=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(MV||{});function dZ(n){let e=G.useContext(m3);return e||ia(!1),e}function hZ(n){let e=G.useContext(nZ);return e||ia(!1),e}function pZ(n){let e=G.useContext(Tg);return e||ia(!1),e}function CV(n){let e=pZ(),t=e.matches[e.matches.length-1];return t.route.id||ia(!1),t.route.id}function mZ(){var n;let e=G.useContext(SV),t=hZ(),r=CV();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function gZ(){let{router:n}=dZ(TV.UseNavigateStable),e=CV(MV.UseNavigateStable),t=G.useRef(!1);return wV(()=>{t.current=!0}),G.useCallback(function(i,a){a===void 0&&(a={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Hx({fromRouteId:e},a)))},[n,e])}const X4={};function vZ(n,e,t){X4[n]||(X4[n]=!0)}function yZ(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Uh(n){ia(!1)}function bZ(n){let{basename:e="/",children:t=null,location:r,navigationType:i=$h.Pop,navigator:a,static:s=!1,future:o}=n;L_()&&ia(!1);let c=e.replace(/^\/*/,"/"),f=G.useMemo(()=>({basename:c,navigator:a,static:s,future:Hx({v7_relativeSplatPath:!1},o)}),[c,o,a,s]);typeof r=="string"&&(r=ay(r));let{pathname:d="/",search:p="",hash:v="",state:y=null,key:x="default"}=r,E=G.useMemo(()=>{let S=p3(d,c);return S==null?null:{location:{pathname:S,search:p,hash:v,state:y,key:x},navigationType:i}},[c,d,p,v,y,x,i]);return E==null?null:G.createElement(Ag.Provider,{value:f},G.createElement(HT.Provider,{children:t,value:E}))}function xZ(n){let{children:e,location:t}=n;return aZ(bN(e),t)}new Promise(()=>{});function bN(n,e){e===void 0&&(e=[]);let t=[];return G.Children.forEach(n,(r,i)=>{if(!G.isValidElement(r))return;let a=[...e,i];if(r.type===G.Fragment){t.push.apply(t,bN(r.props.children,a));return}r.type!==Uh&&ia(!1),!r.props.index||!r.props.children||ia(!1);let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=bN(r.props.children,a)),t.push(s)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xN(){return xN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xN.apply(this,arguments)}function _Z(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function SZ(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function wZ(n,e){return n.button===0&&(!e||e==="_self")&&!SZ(n)}const EZ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],AZ="6";try{window.__reactRouterVersion=AZ}catch{}const TZ="startTransition",Y4=hV[TZ];function MZ(n){let{basename:e,children:t,future:r,window:i}=n,a=G.useRef();a.current==null&&(a.current=IK({window:i,v5Compat:!0}));let s=a.current,[o,c]=G.useState({action:s.action,location:s.location}),{v7_startTransition:f}=r||{},d=G.useCallback(p=>{f&&Y4?Y4(()=>c(p)):c(p)},[c,f]);return G.useLayoutEffect(()=>s.listen(d),[s,d]),G.useEffect(()=>yZ(r),[r]),G.createElement(bZ,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:s,future:r})}const CZ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IZ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ol=G.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:a,replace:s,state:o,target:c,to:f,preventScrollReset:d,viewTransition:p}=e,v=_Z(e,EZ),{basename:y}=G.useContext(Ag),x,E=!1;if(typeof f=="string"&&IZ.test(f)&&(x=f,CZ))try{let N=new URL(window.location.href),O=f.startsWith("//")?new URL(N.protocol+f):new URL(f),z=p3(O.pathname,y);O.origin===N.origin&&z!=null?f=z+O.search+O.hash:E=!0}catch{}let S=rZ(f,{relative:i}),w=RZ(f,{replace:s,state:o,target:c,preventScrollReset:d,relative:i,viewTransition:p});function R(N){r&&r(N),N.defaultPrevented||w(N)}return G.createElement("a",xN({},v,{href:x||S,onClick:E||a?r:R,ref:t,target:c}))});var K4;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(K4||(K4={}));var Z4;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Z4||(Z4={}));function RZ(n,e){let{target:t,replace:r,state:i,preventScrollReset:a,relative:s,viewTransition:o}=e===void 0?{}:e,c=EV(),f=GT(),d=AV(n,{relative:s});return G.useCallback(p=>{if(wZ(p,t)){p.preventDefault();let v=r!==void 0?r:IE(f)===IE(d);c(n,{replace:v,state:i,preventScrollReset:a,relative:s,viewTransition:o})}},[f,c,d,r,i,t,n,a,s,o])}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const qT="182",Mm={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Cm={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},IV=0,_N=1,RV=2,PZ=3,PV=0,wv=1,Ex=2,Um=3,vd=0,oo=1,Bu=2,Yu=0,Ym=1,SN=2,wN=3,EN=4,NV=5,jh=100,OV=101,DV=102,LV=103,kV=104,UV=200,FV=201,zV=202,jV=203,RE=204,PE=205,BV=206,VV=207,HV=208,GV=209,qV=210,WV=211,$V=212,XV=213,YV=214,NE=0,OE=1,DE=2,sg=3,LE=4,kE=5,UE=6,FE=7,k_=0,KV=1,ZV=2,Jl=0,g3=1,v3=2,y3=3,WT=4,b3=5,x3=6,_3=7,AN="attached",QV="detached",$T=300,nf=301,sp=302,Gx=303,qx=304,sy=306,Wx=1e3,Bo=1001,$x=1002,Bi=1003,S3=1004,NZ=1004,gv=1005,OZ=1005,ti=1006,Ax=1007,DZ=1007,Gu=1008,LZ=1008,no=1009,w3=1010,E3=1011,Ov=1012,XT=1013,tc=1014,io=1015,rf=1016,YT=1017,KT=1018,Dv=1020,A3=35902,T3=35899,M3=1021,C3=1022,Ds=1023,af=1026,Xh=1027,ZT=1028,U_=1029,og=1030,QT=1031,kZ=1032,JT=1033,Tx=33776,Mx=33777,Cx=33778,Ix=33779,zE=35840,jE=35841,BE=35842,VE=35843,HE=36196,GE=37492,qE=37496,WE=37488,$E=37489,XE=37490,YE=37491,KE=37808,ZE=37809,QE=37810,JE=37811,eA=37812,tA=37813,nA=37814,rA=37815,iA=37816,aA=37817,sA=37818,oA=37819,lA=37820,cA=37821,uA=36492,fA=36494,dA=36495,hA=36283,pA=36284,mA=36285,gA=36286,JV=2200,e8=2201,t8=2202,Xx=2300,vA=2301,oE=2302,Fm=2400,zm=2401,Yx=2402,eM=2500,I3=2501,UZ=0,FZ=1,zZ=2,n8=3200,jZ=3201,BZ=3202,VZ=3203,xp=0,r8=1,id="",is="srgb",op="srgb-linear",Kx="linear",wr="srgb",HZ="",GZ="rg",qZ="ga",WZ=0,Im=7680,$Z=7681,XZ=7682,YZ=7683,KZ=34055,ZZ=34056,QZ=5386,JZ=512,eQ=513,tQ=514,nQ=515,rQ=516,iQ=517,aQ=518,TN=519,i8=512,a8=513,s8=514,tM=515,o8=516,l8=517,nM=518,c8=519,Zx=35044,sQ=35048,oQ=35040,lQ=35045,cQ=35049,uQ=35041,fQ=35046,dQ=35050,hQ=35042,pQ="100",MN="300 es",cl=2e3,Lv=2001,mQ={COMPUTE:"compute",RENDER:"render"},gQ={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},vQ={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function u8(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const yQ={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function vv(n,e){return new yQ[n](e)}function f8(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Qx(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function d8(){const n=Qx("canvas");return n.style.display="block",n}const Q4={};let lp=null;function bQ(n){lp=n}function xQ(){return lp}function Jx(...n){const e="THREE."+n.shift();lp?lp("log",e,...n):console.log(e,...n)}function kt(...n){const e="THREE."+n.shift();lp?lp("warn",e,...n):console.warn(e,...n)}function tn(...n){const e="THREE."+n.shift();lp?lp("error",e,...n):console.error(e,...n)}function kv(...n){const e=n.join(" ");e in Q4||(Q4[e]=!0,kt(...n))}function _Q(n,e,t){return new Promise(function(r,i){function a(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:r()}}setTimeout(a,t)})}let pf=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const a=i.indexOf(t);a!==-1&&i.splice(a,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const r=t[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let a=0,s=i.length;a<s;a++)i[a].call(this,e);e.target=null}}};const Ts=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let J4=1234567;const Km=Math.PI/180,Uv=180/Math.PI;function hl(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Ts[n&255]+Ts[n>>8&255]+Ts[n>>16&255]+Ts[n>>24&255]+"-"+Ts[e&255]+Ts[e>>8&255]+"-"+Ts[e>>16&15|64]+Ts[e>>24&255]+"-"+Ts[t&63|128]+Ts[t>>8&255]+"-"+Ts[t>>16&255]+Ts[t>>24&255]+Ts[r&255]+Ts[r>>8&255]+Ts[r>>16&255]+Ts[r>>24&255]).toLowerCase()}function mn(n,e,t){return Math.max(e,Math.min(t,n))}function R3(n,e){return(n%e+e)%e}function SQ(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function wQ(n,e,t){return n!==e?(t-n)/(e-n):0}function Rx(n,e,t){return(1-t)*n+t*e}function EQ(n,e,t,r){return Rx(n,e,1-Math.exp(-t*r))}function AQ(n,e=1){return e-Math.abs(R3(n,e*2)-e)}function TQ(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function MQ(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function CQ(n,e){return n+Math.floor(Math.random()*(e-n+1))}function IQ(n,e){return n+Math.random()*(e-n)}function RQ(n){return n*(.5-Math.random())}function PQ(n){n!==void 0&&(J4=n);let e=J4+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function NQ(n){return n*Km}function OQ(n){return n*Uv}function DQ(n){return(n&n-1)===0&&n!==0}function LQ(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function kQ(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function UQ(n,e,t,r,i){const a=Math.cos,s=Math.sin,o=a(t/2),c=s(t/2),f=a((e+r)/2),d=s((e+r)/2),p=a((e-r)/2),v=s((e-r)/2),y=a((r-e)/2),x=s((r-e)/2);switch(i){case"XYX":n.set(o*d,c*p,c*v,o*f);break;case"YZY":n.set(c*v,o*d,c*p,o*f);break;case"ZXZ":n.set(c*p,c*v,o*d,o*f);break;case"XZX":n.set(o*d,c*x,c*y,o*f);break;case"YXY":n.set(c*y,o*d,c*x,o*f);break;case"ZYZ":n.set(c*x,c*y,o*d,o*f);break;default:kt("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ro(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Dn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const h8={DEG2RAD:Km,RAD2DEG:Uv,generateUUID:hl,clamp:mn,euclideanModulo:R3,mapLinear:SQ,inverseLerp:wQ,lerp:Rx,damp:EQ,pingpong:AQ,smoothstep:TQ,smootherstep:MQ,randInt:CQ,randFloat:IQ,randFloatSpread:RQ,seededRandom:PQ,degToRad:NQ,radToDeg:OQ,isPowerOfTwo:DQ,ceilPowerOfTwo:LQ,floorPowerOfTwo:kQ,setQuaternionFromProperEuler:UQ,normalize:Dn,denormalize:ro};class lt{constructor(e=0,t=0){lt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=mn(this.x,e.x,t.x),this.y=mn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=mn(this.x,e,t),this.y=mn(this.y,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(mn(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(mn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),a=this.x-e.x,s=this.y-e.y;return this.x=a*r-s*i+e.x,this.y=a*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ls{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,a,s,o){let c=r[i+0],f=r[i+1],d=r[i+2],p=r[i+3],v=a[s+0],y=a[s+1],x=a[s+2],E=a[s+3];if(o<=0){e[t+0]=c,e[t+1]=f,e[t+2]=d,e[t+3]=p;return}if(o>=1){e[t+0]=v,e[t+1]=y,e[t+2]=x,e[t+3]=E;return}if(p!==E||c!==v||f!==y||d!==x){let S=c*v+f*y+d*x+p*E;S<0&&(v=-v,y=-y,x=-x,E=-E,S=-S);let w=1-o;if(S<.9995){const R=Math.acos(S),N=Math.sin(R);w=Math.sin(w*R)/N,o=Math.sin(o*R)/N,c=c*w+v*o,f=f*w+y*o,d=d*w+x*o,p=p*w+E*o}else{c=c*w+v*o,f=f*w+y*o,d=d*w+x*o,p=p*w+E*o;const R=1/Math.sqrt(c*c+f*f+d*d+p*p);c*=R,f*=R,d*=R,p*=R}}e[t]=c,e[t+1]=f,e[t+2]=d,e[t+3]=p}static multiplyQuaternionsFlat(e,t,r,i,a,s){const o=r[i],c=r[i+1],f=r[i+2],d=r[i+3],p=a[s],v=a[s+1],y=a[s+2],x=a[s+3];return e[t]=o*x+d*p+c*y-f*v,e[t+1]=c*x+d*v+f*p-o*y,e[t+2]=f*x+d*y+o*v-c*p,e[t+3]=d*x-o*p-c*v-f*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,a=e._z,s=e._order,o=Math.cos,c=Math.sin,f=o(r/2),d=o(i/2),p=o(a/2),v=c(r/2),y=c(i/2),x=c(a/2);switch(s){case"XYZ":this._x=v*d*p+f*y*x,this._y=f*y*p-v*d*x,this._z=f*d*x+v*y*p,this._w=f*d*p-v*y*x;break;case"YXZ":this._x=v*d*p+f*y*x,this._y=f*y*p-v*d*x,this._z=f*d*x-v*y*p,this._w=f*d*p+v*y*x;break;case"ZXY":this._x=v*d*p-f*y*x,this._y=f*y*p+v*d*x,this._z=f*d*x+v*y*p,this._w=f*d*p-v*y*x;break;case"ZYX":this._x=v*d*p-f*y*x,this._y=f*y*p+v*d*x,this._z=f*d*x-v*y*p,this._w=f*d*p+v*y*x;break;case"YZX":this._x=v*d*p+f*y*x,this._y=f*y*p+v*d*x,this._z=f*d*x-v*y*p,this._w=f*d*p-v*y*x;break;case"XZY":this._x=v*d*p-f*y*x,this._y=f*y*p-v*d*x,this._z=f*d*x+v*y*p,this._w=f*d*p+v*y*x;break;default:kt("Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],a=t[8],s=t[1],o=t[5],c=t[9],f=t[2],d=t[6],p=t[10],v=r+o+p;if(v>0){const y=.5/Math.sqrt(v+1);this._w=.25/y,this._x=(d-c)*y,this._y=(a-f)*y,this._z=(s-i)*y}else if(r>o&&r>p){const y=2*Math.sqrt(1+r-o-p);this._w=(d-c)/y,this._x=.25*y,this._y=(i+s)/y,this._z=(a+f)/y}else if(o>p){const y=2*Math.sqrt(1+o-r-p);this._w=(a-f)/y,this._x=(i+s)/y,this._y=.25*y,this._z=(c+d)/y}else{const y=2*Math.sqrt(1+p-r-o);this._w=(s-i)/y,this._x=(a+f)/y,this._y=(c+d)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<1e-8?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(mn(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,a=e._z,s=e._w,o=t._x,c=t._y,f=t._z,d=t._w;return this._x=r*d+s*o+i*f-a*c,this._y=i*d+s*c+a*o-r*f,this._z=a*d+s*f+r*c-i*o,this._w=s*d-r*o-i*c-a*f,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let r=e._x,i=e._y,a=e._z,s=e._w,o=this.dot(e);o<0&&(r=-r,i=-i,a=-a,s=-s,o=-o);let c=1-t;if(o<.9995){const f=Math.acos(o),d=Math.sin(f);c=Math.sin(c*f)/d,t=Math.sin(t*f)/d,this._x=this._x*c+r*t,this._y=this._y*c+i*t,this._z=this._z*c+a*t,this._w=this._w*c+s*t,this._onChangeCallback()}else this._x=this._x*c+r*t,this._y=this._y*c+i*t,this._z=this._z*c+a*t,this._w=this._w*c+s*t,this.normalize();return this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),a=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ue{constructor(e=0,t=0,r=0){ue.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(eU.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(eU.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[3]*r+a[6]*i,this.y=a[1]*t+a[4]*r+a[7]*i,this.z=a[2]*t+a[5]*r+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=e.elements,s=1/(a[3]*t+a[7]*r+a[11]*i+a[15]);return this.x=(a[0]*t+a[4]*r+a[8]*i+a[12])*s,this.y=(a[1]*t+a[5]*r+a[9]*i+a[13])*s,this.z=(a[2]*t+a[6]*r+a[10]*i+a[14])*s,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,a=e.x,s=e.y,o=e.z,c=e.w,f=2*(s*i-o*r),d=2*(o*t-a*i),p=2*(a*r-s*t);return this.x=t+c*f+s*p-o*d,this.y=r+c*d+o*f-a*p,this.z=i+c*p+a*d-s*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i,this.y=a[1]*t+a[5]*r+a[9]*i,this.z=a[2]*t+a[6]*r+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=mn(this.x,e.x,t.x),this.y=mn(this.y,e.y,t.y),this.z=mn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=mn(this.x,e,t),this.y=mn(this.y,e,t),this.z=mn(this.z,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(mn(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,a=e.z,s=t.x,o=t.y,c=t.z;return this.x=i*c-a*o,this.y=a*s-r*c,this.z=r*o-i*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return AI.copy(this).projectOnVector(e),this.sub(AI)}reflect(e){return this.sub(AI.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(mn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const AI=new ue,eU=new Ls;class Rn{constructor(e,t,r,i,a,s,o,c,f){Rn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,a,s,o,c,f)}set(e,t,r,i,a,s,o,c,f){const d=this.elements;return d[0]=e,d[1]=i,d[2]=o,d[3]=t,d[4]=a,d[5]=c,d[6]=r,d[7]=s,d[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,s=r[0],o=r[3],c=r[6],f=r[1],d=r[4],p=r[7],v=r[2],y=r[5],x=r[8],E=i[0],S=i[3],w=i[6],R=i[1],N=i[4],O=i[7],z=i[2],k=i[5],U=i[8];return a[0]=s*E+o*R+c*z,a[3]=s*S+o*N+c*k,a[6]=s*w+o*O+c*U,a[1]=f*E+d*R+p*z,a[4]=f*S+d*N+p*k,a[7]=f*w+d*O+p*U,a[2]=v*E+y*R+x*z,a[5]=v*S+y*N+x*k,a[8]=v*w+y*O+x*U,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],c=e[6],f=e[7],d=e[8];return t*s*d-t*o*f-r*a*d+r*o*c+i*a*f-i*s*c}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],c=e[6],f=e[7],d=e[8],p=d*s-o*f,v=o*c-d*a,y=f*a-s*c,x=t*p+r*v+i*y;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const E=1/x;return e[0]=p*E,e[1]=(i*f-d*r)*E,e[2]=(o*r-i*s)*E,e[3]=v*E,e[4]=(d*t-i*c)*E,e[5]=(i*a-o*t)*E,e[6]=y*E,e[7]=(r*c-f*t)*E,e[8]=(s*t-r*a)*E,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,a,s,o){const c=Math.cos(a),f=Math.sin(a);return this.set(r*c,r*f,-r*(c*s+f*o)+s+e,-i*f,i*c,-i*(-f*s+c*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(TI.makeScale(e,t)),this}rotate(e){return this.premultiply(TI.makeRotation(-e)),this}translate(e,t){return this.premultiply(TI.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const TI=new Rn,tU=new Rn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),nU=new Rn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function FQ(){const n={enabled:!0,workingColorSpace:op,spaces:{},convert:function(i,a,s){return this.enabled===!1||a===s||!a||!s||(this.spaces[a].transfer===wr&&(i.r=dd(i.r),i.g=dd(i.g),i.b=dd(i.b)),this.spaces[a].primaries!==this.spaces[s].primaries&&(i.applyMatrix3(this.spaces[a].toXYZ),i.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===wr&&(i.r=Ev(i.r),i.g=Ev(i.g),i.b=Ev(i.b))),i},workingToColorSpace:function(i,a){return this.convert(i,this.workingColorSpace,a)},colorSpaceToWorking:function(i,a){return this.convert(i,a,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===id?Kx:this.spaces[i].transfer},getToneMappingMode:function(i){return this.spaces[i].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(i,a=this.workingColorSpace){return i.fromArray(this.spaces[a].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,a,s){return i.copy(this.spaces[a].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,a){return kv("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(i,a)},toWorkingColorSpace:function(i,a){return kv("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(i,a)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],r=[.3127,.329];return n.define({[op]:{primaries:e,whitePoint:r,transfer:Kx,toXYZ:tU,fromXYZ:nU,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:is},outputColorSpaceConfig:{drawingBufferColorSpace:is}},[is]:{primaries:e,whitePoint:r,transfer:wr,toXYZ:tU,fromXYZ:nU,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:is}}}),n}const Qn=FQ();function dd(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Ev(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let N0;class p8{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{N0===void 0&&(N0=Qx("canvas")),N0.width=e.width,N0.height=e.height;const i=N0.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=N0}return r.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Qx("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),a=i.data;for(let s=0;s<a.length;s++)a[s]=dd(a[s]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(dd(t[r]/255)*255):t[r]=dd(t[r]);return{data:t,width:e.width,height:e.height}}else return kt("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let zQ=0;class Yh{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:zQ++}),this.uuid=hl(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let s=0,o=i.length;s<o;s++)i[s].isDataTexture?a.push(MI(i[s].image)):a.push(MI(i[s]))}else a=MI(i);r.url=a}return t||(e.images[this.uuid]=r),r}}function MI(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?p8.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(kt("Texture: Unable to serialize Texture."),{})}let jQ=0;const CI=new ue;class Ci extends pf{constructor(e=Ci.DEFAULT_IMAGE,t=Ci.DEFAULT_MAPPING,r=Bo,i=Bo,a=ti,s=Gu,o=Ds,c=no,f=Ci.DEFAULT_ANISOTROPY,d=id){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:jQ++}),this.uuid=hl(),this.name="",this.source=new Yh(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=a,this.minFilter=s,this.anisotropy=f,this.format=o,this.internalFormat=null,this.type=c,this.offset=new lt(0,0),this.repeat=new lt(1,1),this.center=new lt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(CI).x}get height(){return this.source.getSize(CI).y}get depth(){return this.source.getSize(CI).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const r=e[t];if(r===void 0){kt(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){kt(`Texture.setValues(): property '${t}' does not exist.`);continue}i&&r&&i.isVector2&&r.isVector2||i&&r&&i.isVector3&&r.isVector3||i&&r&&i.isMatrix3&&r.isMatrix3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==$T)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Wx:e.x=e.x-Math.floor(e.x);break;case Bo:e.x=e.x<0?0:1;break;case $x:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Wx:e.y=e.y-Math.floor(e.y);break;case Bo:e.y=e.y<0?0:1;break;case $x:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ci.DEFAULT_IMAGE=null;Ci.DEFAULT_MAPPING=$T;Ci.DEFAULT_ANISOTROPY=1;class zr{constructor(e=0,t=0,r=0,i=1){zr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=this.w,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i+s[12]*a,this.y=s[1]*t+s[5]*r+s[9]*i+s[13]*a,this.z=s[2]*t+s[6]*r+s[10]*i+s[14]*a,this.w=s[3]*t+s[7]*r+s[11]*i+s[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,a;const c=e.elements,f=c[0],d=c[4],p=c[8],v=c[1],y=c[5],x=c[9],E=c[2],S=c[6],w=c[10];if(Math.abs(d-v)<.01&&Math.abs(p-E)<.01&&Math.abs(x-S)<.01){if(Math.abs(d+v)<.1&&Math.abs(p+E)<.1&&Math.abs(x+S)<.1&&Math.abs(f+y+w-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const N=(f+1)/2,O=(y+1)/2,z=(w+1)/2,k=(d+v)/4,U=(p+E)/4,P=(x+S)/4;return N>O&&N>z?N<.01?(r=0,i=.707106781,a=.707106781):(r=Math.sqrt(N),i=k/r,a=U/r):O>z?O<.01?(r=.707106781,i=0,a=.707106781):(i=Math.sqrt(O),r=k/i,a=P/i):z<.01?(r=.707106781,i=.707106781,a=0):(a=Math.sqrt(z),r=U/a,i=P/a),this.set(r,i,a,t),this}let R=Math.sqrt((S-x)*(S-x)+(p-E)*(p-E)+(v-d)*(v-d));return Math.abs(R)<.001&&(R=1),this.x=(S-x)/R,this.y=(p-E)/R,this.z=(v-d)/R,this.w=Math.acos((f+y+w-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=mn(this.x,e.x,t.x),this.y=mn(this.y,e.y,t.y),this.z=mn(this.z,e.z,t.z),this.w=mn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=mn(this.x,e,t),this.y=mn(this.y,e,t),this.z=mn(this.z,e,t),this.w=mn(this.w,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(mn(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class P3 extends pf{constructor(e=1,t=1,r={}){super(),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ti,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},r),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=r.depth,this.scissor=new zr(0,0,e,t),this.scissorTest=!1,this.viewport=new zr(0,0,e,t);const i={width:e,height:t,depth:r.depth},a=new Ci(i);this.textures=[];const s=r.count;for(let o=0;o<s;o++)this.textures[o]=a.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(r),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples,this.multiview=r.multiview}_setTextureOptions(e={}){const t={minFilter:ti,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let r=0;r<this.textures.length;r++)this.textures[r].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,a=this.textures.length;i<a;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r,this.textures[i].isData3DTexture!==!0&&(this.textures[i].isArrayTexture=this.textures[i].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,r=e.textures.length;t<r;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const i=Object.assign({},e.textures[t].image);this.textures[t].source=new Yh(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class pl extends P3{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class rM extends Ci{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Bi,this.minFilter=Bi,this.wrapR=Bo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class BQ extends pl{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new rM(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class iM extends Ci{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Bi,this.minFilter=Bi,this.wrapR=Bo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class VQ extends pl{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new iM(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class os{constructor(e=new ue(1/0,1/0,1/0),t=new ue(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Pc.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Pc.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Pc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const a=r.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,Pc):Pc.fromBufferAttribute(a,s),Pc.applyMatrix4(e.matrixWorld),this.expandByPoint(Pc);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),jS.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),jS.copy(r.boundingBox)),jS.applyMatrix4(e.matrixWorld),this.union(jS)}const i=e.children;for(let a=0,s=i.length;a<s;a++)this.expandByObject(i[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Pc),Pc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Vb),BS.subVectors(this.max,Vb),O0.subVectors(e.a,Vb),D0.subVectors(e.b,Vb),L0.subVectors(e.c,Vb),Th.subVectors(D0,O0),Mh.subVectors(L0,D0),fm.subVectors(O0,L0);let t=[0,-Th.z,Th.y,0,-Mh.z,Mh.y,0,-fm.z,fm.y,Th.z,0,-Th.x,Mh.z,0,-Mh.x,fm.z,0,-fm.x,-Th.y,Th.x,0,-Mh.y,Mh.x,0,-fm.y,fm.x,0];return!II(t,O0,D0,L0,BS)||(t=[1,0,0,0,1,0,0,0,1],!II(t,O0,D0,L0,BS))?!1:(VS.crossVectors(Th,Mh),t=[VS.x,VS.y,VS.z],II(t,O0,D0,L0,BS))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Pc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Pc).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Yf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Yf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Yf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Yf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Yf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Yf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Yf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Yf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Yf),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Yf=[new ue,new ue,new ue,new ue,new ue,new ue,new ue,new ue],Pc=new ue,jS=new os,O0=new ue,D0=new ue,L0=new ue,Th=new ue,Mh=new ue,fm=new ue,Vb=new ue,BS=new ue,VS=new ue,dm=new ue;function II(n,e,t,r,i){for(let a=0,s=n.length-3;a<=s;a+=3){dm.fromArray(n,a);const o=i.x*Math.abs(dm.x)+i.y*Math.abs(dm.y)+i.z*Math.abs(dm.z),c=e.dot(dm),f=t.dot(dm),d=r.dot(dm);if(Math.max(-Math.max(c,f,d),Math.min(c,f,d))>o)return!1}return!0}const HQ=new os,Hb=new ue,RI=new ue;class Oa{constructor(e=new ue,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):HQ.setFromPoints(e).getCenter(r);let i=0;for(let a=0,s=e.length;a<s;a++)i=Math.max(i,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Hb.subVectors(e,this.center);const t=Hb.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Hb,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(RI.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Hb.copy(e.center).add(RI)),this.expandByPoint(Hb.copy(e.center).sub(RI))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Kf=new ue,PI=new ue,HS=new ue,Ch=new ue,NI=new ue,GS=new ue,OI=new ue;class Mg{constructor(e=new ue,t=new ue(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Kf)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Kf.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Kf.copy(this.origin).addScaledVector(this.direction,t),Kf.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){PI.copy(e).add(t).multiplyScalar(.5),HS.copy(t).sub(e).normalize(),Ch.copy(this.origin).sub(PI);const a=e.distanceTo(t)*.5,s=-this.direction.dot(HS),o=Ch.dot(this.direction),c=-Ch.dot(HS),f=Ch.lengthSq(),d=Math.abs(1-s*s);let p,v,y,x;if(d>0)if(p=s*c-o,v=s*o-c,x=a*d,p>=0)if(v>=-x)if(v<=x){const E=1/d;p*=E,v*=E,y=p*(p+s*v+2*o)+v*(s*p+v+2*c)+f}else v=a,p=Math.max(0,-(s*v+o)),y=-p*p+v*(v+2*c)+f;else v=-a,p=Math.max(0,-(s*v+o)),y=-p*p+v*(v+2*c)+f;else v<=-x?(p=Math.max(0,-(-s*a+o)),v=p>0?-a:Math.min(Math.max(-a,-c),a),y=-p*p+v*(v+2*c)+f):v<=x?(p=0,v=Math.min(Math.max(-a,-c),a),y=v*(v+2*c)+f):(p=Math.max(0,-(s*a+o)),v=p>0?a:Math.min(Math.max(-a,-c),a),y=-p*p+v*(v+2*c)+f);else v=s>0?-a:a,p=Math.max(0,-(s*v+o)),y=-p*p+v*(v+2*c)+f;return r&&r.copy(this.origin).addScaledVector(this.direction,p),i&&i.copy(PI).addScaledVector(HS,v),y}intersectSphere(e,t){Kf.subVectors(e.center,this.origin);const r=Kf.dot(this.direction),i=Kf.dot(Kf)-r*r,a=e.radius*e.radius;if(i>a)return null;const s=Math.sqrt(a-i),o=r-s,c=r+s;return c<0?null:o<0?this.at(c,t):this.at(o,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,a,s,o,c;const f=1/this.direction.x,d=1/this.direction.y,p=1/this.direction.z,v=this.origin;return f>=0?(r=(e.min.x-v.x)*f,i=(e.max.x-v.x)*f):(r=(e.max.x-v.x)*f,i=(e.min.x-v.x)*f),d>=0?(a=(e.min.y-v.y)*d,s=(e.max.y-v.y)*d):(a=(e.max.y-v.y)*d,s=(e.min.y-v.y)*d),r>s||a>i||((a>r||isNaN(r))&&(r=a),(s<i||isNaN(i))&&(i=s),p>=0?(o=(e.min.z-v.z)*p,c=(e.max.z-v.z)*p):(o=(e.max.z-v.z)*p,c=(e.min.z-v.z)*p),r>c||o>i)||((o>r||r!==r)&&(r=o),(c<i||i!==i)&&(i=c),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Kf)!==null}intersectTriangle(e,t,r,i,a){NI.subVectors(t,e),GS.subVectors(r,e),OI.crossVectors(NI,GS);let s=this.direction.dot(OI),o;if(s>0){if(i)return null;o=1}else if(s<0)o=-1,s=-s;else return null;Ch.subVectors(this.origin,e);const c=o*this.direction.dot(GS.crossVectors(Ch,GS));if(c<0)return null;const f=o*this.direction.dot(NI.cross(Ch));if(f<0||c+f>s)return null;const d=-o*Ch.dot(OI);return d<0?null:this.at(d/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class yn{constructor(e,t,r,i,a,s,o,c,f,d,p,v,y,x,E,S){yn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,a,s,o,c,f,d,p,v,y,x,E,S)}set(e,t,r,i,a,s,o,c,f,d,p,v,y,x,E,S){const w=this.elements;return w[0]=e,w[4]=t,w[8]=r,w[12]=i,w[1]=a,w[5]=s,w[9]=o,w[13]=c,w[2]=f,w[6]=d,w[10]=p,w[14]=v,w[3]=y,w[7]=x,w[11]=E,w[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new yn().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),r.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this)}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,r=e.elements,i=1/k0.setFromMatrixColumn(e,0).length(),a=1/k0.setFromMatrixColumn(e,1).length(),s=1/k0.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=0,t[8]=r[8]*s,t[9]=r[9]*s,t[10]=r[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,a=e.z,s=Math.cos(r),o=Math.sin(r),c=Math.cos(i),f=Math.sin(i),d=Math.cos(a),p=Math.sin(a);if(e.order==="XYZ"){const v=s*d,y=s*p,x=o*d,E=o*p;t[0]=c*d,t[4]=-c*p,t[8]=f,t[1]=y+x*f,t[5]=v-E*f,t[9]=-o*c,t[2]=E-v*f,t[6]=x+y*f,t[10]=s*c}else if(e.order==="YXZ"){const v=c*d,y=c*p,x=f*d,E=f*p;t[0]=v+E*o,t[4]=x*o-y,t[8]=s*f,t[1]=s*p,t[5]=s*d,t[9]=-o,t[2]=y*o-x,t[6]=E+v*o,t[10]=s*c}else if(e.order==="ZXY"){const v=c*d,y=c*p,x=f*d,E=f*p;t[0]=v-E*o,t[4]=-s*p,t[8]=x+y*o,t[1]=y+x*o,t[5]=s*d,t[9]=E-v*o,t[2]=-s*f,t[6]=o,t[10]=s*c}else if(e.order==="ZYX"){const v=s*d,y=s*p,x=o*d,E=o*p;t[0]=c*d,t[4]=x*f-y,t[8]=v*f+E,t[1]=c*p,t[5]=E*f+v,t[9]=y*f-x,t[2]=-f,t[6]=o*c,t[10]=s*c}else if(e.order==="YZX"){const v=s*c,y=s*f,x=o*c,E=o*f;t[0]=c*d,t[4]=E-v*p,t[8]=x*p+y,t[1]=p,t[5]=s*d,t[9]=-o*d,t[2]=-f*d,t[6]=y*p+x,t[10]=v-E*p}else if(e.order==="XZY"){const v=s*c,y=s*f,x=o*c,E=o*f;t[0]=c*d,t[4]=-p,t[8]=f*d,t[1]=v*p+E,t[5]=s*d,t[9]=y*p-x,t[2]=x*p-y,t[6]=o*d,t[10]=E*p+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(GQ,e,qQ)}lookAt(e,t,r){const i=this.elements;return al.subVectors(e,t),al.lengthSq()===0&&(al.z=1),al.normalize(),Ih.crossVectors(r,al),Ih.lengthSq()===0&&(Math.abs(r.z)===1?al.x+=1e-4:al.z+=1e-4,al.normalize(),Ih.crossVectors(r,al)),Ih.normalize(),qS.crossVectors(al,Ih),i[0]=Ih.x,i[4]=qS.x,i[8]=al.x,i[1]=Ih.y,i[5]=qS.y,i[9]=al.y,i[2]=Ih.z,i[6]=qS.z,i[10]=al.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,s=r[0],o=r[4],c=r[8],f=r[12],d=r[1],p=r[5],v=r[9],y=r[13],x=r[2],E=r[6],S=r[10],w=r[14],R=r[3],N=r[7],O=r[11],z=r[15],k=i[0],U=i[4],P=i[8],C=i[12],L=i[1],j=i[5],B=i[9],V=i[13],Q=i[2],J=i[6],W=i[10],$=i[14],se=i[3],ce=i[7],fe=i[11],Z=i[15];return a[0]=s*k+o*L+c*Q+f*se,a[4]=s*U+o*j+c*J+f*ce,a[8]=s*P+o*B+c*W+f*fe,a[12]=s*C+o*V+c*$+f*Z,a[1]=d*k+p*L+v*Q+y*se,a[5]=d*U+p*j+v*J+y*ce,a[9]=d*P+p*B+v*W+y*fe,a[13]=d*C+p*V+v*$+y*Z,a[2]=x*k+E*L+S*Q+w*se,a[6]=x*U+E*j+S*J+w*ce,a[10]=x*P+E*B+S*W+w*fe,a[14]=x*C+E*V+S*$+w*Z,a[3]=R*k+N*L+O*Q+z*se,a[7]=R*U+N*j+O*J+z*ce,a[11]=R*P+N*B+O*W+z*fe,a[15]=R*C+N*V+O*$+z*Z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],a=e[12],s=e[1],o=e[5],c=e[9],f=e[13],d=e[2],p=e[6],v=e[10],y=e[14],x=e[3],E=e[7],S=e[11],w=e[15],R=c*y-f*v,N=o*y-f*p,O=o*v-c*p,z=s*y-f*d,k=s*v-c*d,U=s*p-o*d;return t*(E*R-S*N+w*O)-r*(x*R-S*z+w*k)+i*(x*N-E*z+w*U)-a*(x*O-E*k+S*U)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],c=e[6],f=e[7],d=e[8],p=e[9],v=e[10],y=e[11],x=e[12],E=e[13],S=e[14],w=e[15],R=p*S*f-E*v*f+E*c*y-o*S*y-p*c*w+o*v*w,N=x*v*f-d*S*f-x*c*y+s*S*y+d*c*w-s*v*w,O=d*E*f-x*p*f+x*o*y-s*E*y-d*o*w+s*p*w,z=x*p*c-d*E*c-x*o*v+s*E*v+d*o*S-s*p*S,k=t*R+r*N+i*O+a*z;if(k===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const U=1/k;return e[0]=R*U,e[1]=(E*v*a-p*S*a-E*i*y+r*S*y+p*i*w-r*v*w)*U,e[2]=(o*S*a-E*c*a+E*i*f-r*S*f-o*i*w+r*c*w)*U,e[3]=(p*c*a-o*v*a-p*i*f+r*v*f+o*i*y-r*c*y)*U,e[4]=N*U,e[5]=(d*S*a-x*v*a+x*i*y-t*S*y-d*i*w+t*v*w)*U,e[6]=(x*c*a-s*S*a-x*i*f+t*S*f+s*i*w-t*c*w)*U,e[7]=(s*v*a-d*c*a+d*i*f-t*v*f-s*i*y+t*c*y)*U,e[8]=O*U,e[9]=(x*p*a-d*E*a-x*r*y+t*E*y+d*r*w-t*p*w)*U,e[10]=(s*E*a-x*o*a+x*r*f-t*E*f-s*r*w+t*o*w)*U,e[11]=(d*o*a-s*p*a-d*r*f+t*p*f+s*r*y-t*o*y)*U,e[12]=z*U,e[13]=(d*E*i-x*p*i+x*r*v-t*E*v-d*r*S+t*p*S)*U,e[14]=(x*o*i-s*E*i-x*r*c+t*E*c+s*r*S-t*o*S)*U,e[15]=(s*p*i-d*o*i+d*r*c-t*p*c-s*r*v+t*o*v)*U,this}scale(e){const t=this.elements,r=e.x,i=e.y,a=e.z;return t[0]*=r,t[4]*=i,t[8]*=a,t[1]*=r,t[5]*=i,t[9]*=a,t[2]*=r,t[6]*=i,t[10]*=a,t[3]*=r,t[7]*=i,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),a=1-r,s=e.x,o=e.y,c=e.z,f=a*s,d=a*o;return this.set(f*s+r,f*o-i*c,f*c+i*o,0,f*o+i*c,d*o+r,d*c-i*s,0,f*c-i*o,d*c+i*s,a*c*c+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,a,s){return this.set(1,r,a,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,a=t._x,s=t._y,o=t._z,c=t._w,f=a+a,d=s+s,p=o+o,v=a*f,y=a*d,x=a*p,E=s*d,S=s*p,w=o*p,R=c*f,N=c*d,O=c*p,z=r.x,k=r.y,U=r.z;return i[0]=(1-(E+w))*z,i[1]=(y+O)*z,i[2]=(x-N)*z,i[3]=0,i[4]=(y-O)*k,i[5]=(1-(v+w))*k,i[6]=(S+R)*k,i[7]=0,i[8]=(x+N)*U,i[9]=(S-R)*U,i[10]=(1-(v+E))*U,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;if(e.x=i[12],e.y=i[13],e.z=i[14],this.determinant()===0)return r.set(1,1,1),t.identity(),this;let a=k0.set(i[0],i[1],i[2]).length();const s=k0.set(i[4],i[5],i[6]).length(),o=k0.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),Nc.copy(this);const f=1/a,d=1/s,p=1/o;return Nc.elements[0]*=f,Nc.elements[1]*=f,Nc.elements[2]*=f,Nc.elements[4]*=d,Nc.elements[5]*=d,Nc.elements[6]*=d,Nc.elements[8]*=p,Nc.elements[9]*=p,Nc.elements[10]*=p,t.setFromRotationMatrix(Nc),r.x=a,r.y=s,r.z=o,this}makePerspective(e,t,r,i,a,s,o=cl,c=!1){const f=this.elements,d=2*a/(t-e),p=2*a/(r-i),v=(t+e)/(t-e),y=(r+i)/(r-i);let x,E;if(c)x=a/(s-a),E=s*a/(s-a);else if(o===cl)x=-(s+a)/(s-a),E=-2*s*a/(s-a);else if(o===Lv)x=-s/(s-a),E=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return f[0]=d,f[4]=0,f[8]=v,f[12]=0,f[1]=0,f[5]=p,f[9]=y,f[13]=0,f[2]=0,f[6]=0,f[10]=x,f[14]=E,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(e,t,r,i,a,s,o=cl,c=!1){const f=this.elements,d=2/(t-e),p=2/(r-i),v=-(t+e)/(t-e),y=-(r+i)/(r-i);let x,E;if(c)x=1/(s-a),E=s/(s-a);else if(o===cl)x=-2/(s-a),E=-(s+a)/(s-a);else if(o===Lv)x=-1/(s-a),E=-a/(s-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return f[0]=d,f[4]=0,f[8]=0,f[12]=v,f[1]=0,f[5]=p,f[9]=0,f[13]=y,f[2]=0,f[6]=0,f[10]=x,f[14]=E,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const k0=new ue,Nc=new yn,GQ=new ue(0,0,0),qQ=new ue(1,1,1),Ih=new ue,qS=new ue,al=new ue,rU=new yn,iU=new Ls;class gl{constructor(e=0,t=0,r=0,i=gl.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,a=i[0],s=i[4],o=i[8],c=i[1],f=i[5],d=i[9],p=i[2],v=i[6],y=i[10];switch(t){case"XYZ":this._y=Math.asin(mn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-d,y),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(v,f),this._z=0);break;case"YXZ":this._x=Math.asin(-mn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(o,y),this._z=Math.atan2(c,f)):(this._y=Math.atan2(-p,a),this._z=0);break;case"ZXY":this._x=Math.asin(mn(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-p,y),this._z=Math.atan2(-s,f)):(this._y=0,this._z=Math.atan2(c,a));break;case"ZYX":this._y=Math.asin(-mn(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(v,y),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-s,f));break;case"YZX":this._z=Math.asin(mn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,f),this._y=Math.atan2(-p,a)):(this._x=0,this._y=Math.atan2(o,y));break;case"XZY":this._z=Math.asin(-mn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(v,f),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-d,y),this._y=0);break;default:kt("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return rU.makeRotationFromQuaternion(e),this.setFromRotationMatrix(rU,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return iU.setFromEuler(this),this.setFromQuaternion(iU,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}gl.DEFAULT_ORDER="XYZ";class Fv{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let WQ=0;const aU=new ue,U0=new Ls,Zf=new yn,WS=new ue,Gb=new ue,$Q=new ue,XQ=new Ls,sU=new ue(1,0,0),oU=new ue(0,1,0),lU=new ue(0,0,1),cU={type:"added"},YQ={type:"removed"},F0={type:"childadded",child:null},DI={type:"childremoved",child:null};class cr extends pf{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:WQ++}),this.uuid=hl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=cr.DEFAULT_UP.clone();const e=new ue,t=new gl,r=new Ls,i=new ue(1,1,1);function a(){r.setFromEuler(t,!1)}function s(){t.setFromQuaternion(r,void 0,!1)}t._onChange(a),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new yn},normalMatrix:{value:new Rn}}),this.matrix=new yn,this.matrixWorld=new yn,this.matrixAutoUpdate=cr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Fv,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return U0.setFromAxisAngle(e,t),this.quaternion.multiply(U0),this}rotateOnWorldAxis(e,t){return U0.setFromAxisAngle(e,t),this.quaternion.premultiply(U0),this}rotateX(e){return this.rotateOnAxis(sU,e)}rotateY(e){return this.rotateOnAxis(oU,e)}rotateZ(e){return this.rotateOnAxis(lU,e)}translateOnAxis(e,t){return aU.copy(e).applyQuaternion(this.quaternion),this.position.add(aU.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(sU,e)}translateY(e){return this.translateOnAxis(oU,e)}translateZ(e){return this.translateOnAxis(lU,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Zf.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?WS.copy(e):WS.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Gb.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Zf.lookAt(Gb,WS,this.up):Zf.lookAt(WS,Gb,this.up),this.quaternion.setFromRotationMatrix(Zf),i&&(Zf.extractRotation(i.matrixWorld),U0.setFromRotationMatrix(Zf),this.quaternion.premultiply(U0.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(tn("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(cU),F0.child=e,this.dispatchEvent(F0),F0.child=null):tn("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(YQ),DI.child=e,this.dispatchEvent(DI),DI.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Zf.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Zf.multiply(e.parent.matrixWorld)),e.applyMatrix4(Zf),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(cU),F0.child=e,this.dispatchEvent(F0),F0.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gb,e,$Q),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gb,XQ,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(o=>({...o})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function a(o,c){return o[c.uuid]===void 0&&(o[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const c=o.shapes;if(Array.isArray(c))for(let f=0,d=c.length;f<d;f++){const p=c[f];a(e.shapes,p)}else a(e.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let c=0,f=this.material.length;c<f;c++)o.push(a(e.materials,this.material[c]));i.material=o}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const c=this.animations[o];i.animations.push(a(e.animations,c))}}if(t){const o=s(e.geometries),c=s(e.materials),f=s(e.textures),d=s(e.images),p=s(e.shapes),v=s(e.skeletons),y=s(e.animations),x=s(e.nodes);o.length>0&&(r.geometries=o),c.length>0&&(r.materials=c),f.length>0&&(r.textures=f),d.length>0&&(r.images=d),p.length>0&&(r.shapes=p),v.length>0&&(r.skeletons=v),y.length>0&&(r.animations=y),x.length>0&&(r.nodes=x)}return r.object=i,r;function s(o){const c=[];for(const f in o){const d=o[f];delete d.metadata,c.push(d)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}cr.DEFAULT_UP=new ue(0,1,0);cr.DEFAULT_MATRIX_AUTO_UPDATE=!0;cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Oc=new ue,Qf=new ue,LI=new ue,Jf=new ue,z0=new ue,j0=new ue,uU=new ue,kI=new ue,UI=new ue,FI=new ue,zI=new zr,jI=new zr,BI=new zr;class zo{constructor(e=new ue,t=new ue,r=new ue){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Oc.subVectors(e,t),i.cross(Oc);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,t,r,i,a){Oc.subVectors(i,t),Qf.subVectors(r,t),LI.subVectors(e,t);const s=Oc.dot(Oc),o=Oc.dot(Qf),c=Oc.dot(LI),f=Qf.dot(Qf),d=Qf.dot(LI),p=s*f-o*o;if(p===0)return a.set(0,0,0),null;const v=1/p,y=(f*c-o*d)*v,x=(s*d-o*c)*v;return a.set(1-y-x,x,y)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Jf)===null?!1:Jf.x>=0&&Jf.y>=0&&Jf.x+Jf.y<=1}static getInterpolation(e,t,r,i,a,s,o,c){return this.getBarycoord(e,t,r,i,Jf)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(a,Jf.x),c.addScaledVector(s,Jf.y),c.addScaledVector(o,Jf.z),c)}static getInterpolatedAttribute(e,t,r,i,a,s){return zI.setScalar(0),jI.setScalar(0),BI.setScalar(0),zI.fromBufferAttribute(e,t),jI.fromBufferAttribute(e,r),BI.fromBufferAttribute(e,i),s.setScalar(0),s.addScaledVector(zI,a.x),s.addScaledVector(jI,a.y),s.addScaledVector(BI,a.z),s}static isFrontFacing(e,t,r,i){return Oc.subVectors(r,t),Qf.subVectors(e,t),Oc.cross(Qf).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Oc.subVectors(this.c,this.b),Qf.subVectors(this.a,this.b),Oc.cross(Qf).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return zo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return zo.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,a){return zo.getInterpolation(e,this.a,this.b,this.c,t,r,i,a)}containsPoint(e){return zo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return zo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,a=this.c;let s,o;z0.subVectors(i,r),j0.subVectors(a,r),kI.subVectors(e,r);const c=z0.dot(kI),f=j0.dot(kI);if(c<=0&&f<=0)return t.copy(r);UI.subVectors(e,i);const d=z0.dot(UI),p=j0.dot(UI);if(d>=0&&p<=d)return t.copy(i);const v=c*p-d*f;if(v<=0&&c>=0&&d<=0)return s=c/(c-d),t.copy(r).addScaledVector(z0,s);FI.subVectors(e,a);const y=z0.dot(FI),x=j0.dot(FI);if(x>=0&&y<=x)return t.copy(a);const E=y*f-c*x;if(E<=0&&f>=0&&x<=0)return o=f/(f-x),t.copy(r).addScaledVector(j0,o);const S=d*x-y*p;if(S<=0&&p-d>=0&&y-x>=0)return uU.subVectors(a,i),o=(p-d)/(p-d+(y-x)),t.copy(i).addScaledVector(uU,o);const w=1/(S+E+v);return s=E*w,o=v*w,t.copy(r).addScaledVector(z0,s).addScaledVector(j0,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const m8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Rh={h:0,s:0,l:0},$S={h:0,s:0,l:0};function VI(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let Bt=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=is){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Qn.colorSpaceToWorking(this,t),this}setRGB(e,t,r,i=Qn.workingColorSpace){return this.r=e,this.g=t,this.b=r,Qn.colorSpaceToWorking(this,i),this}setHSL(e,t,r,i=Qn.workingColorSpace){if(e=R3(e,1),t=mn(t,0,1),r=mn(r,0,1),t===0)this.r=this.g=this.b=r;else{const a=r<=.5?r*(1+t):r+t-r*t,s=2*r-a;this.r=VI(s,a,e+1/3),this.g=VI(s,a,e),this.b=VI(s,a,e-1/3)}return Qn.colorSpaceToWorking(this,i),this}setStyle(e,t=is){function r(a){a!==void 0&&parseFloat(a)<1&&kt("Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:kt("Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=i[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(a,16),t);kt("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=is){const r=m8[e.toLowerCase()];return r!==void 0?this.setHex(r,t):kt("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=dd(e.r),this.g=dd(e.g),this.b=dd(e.b),this}copyLinearToSRGB(e){return this.r=Ev(e.r),this.g=Ev(e.g),this.b=Ev(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=is){return Qn.workingToColorSpace(Ms.copy(this),e),Math.round(mn(Ms.r*255,0,255))*65536+Math.round(mn(Ms.g*255,0,255))*256+Math.round(mn(Ms.b*255,0,255))}getHexString(e=is){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Qn.workingColorSpace){Qn.workingToColorSpace(Ms.copy(this),t);const r=Ms.r,i=Ms.g,a=Ms.b,s=Math.max(r,i,a),o=Math.min(r,i,a);let c,f;const d=(o+s)/2;if(o===s)c=0,f=0;else{const p=s-o;switch(f=d<=.5?p/(s+o):p/(2-s-o),s){case r:c=(i-a)/p+(i<a?6:0);break;case i:c=(a-r)/p+2;break;case a:c=(r-i)/p+4;break}c/=6}return e.h=c,e.s=f,e.l=d,e}getRGB(e,t=Qn.workingColorSpace){return Qn.workingToColorSpace(Ms.copy(this),t),e.r=Ms.r,e.g=Ms.g,e.b=Ms.b,e}getStyle(e=is){Qn.workingToColorSpace(Ms.copy(this),e);const t=Ms.r,r=Ms.g,i=Ms.b;return e!==is?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Rh),this.setHSL(Rh.h+e,Rh.s+t,Rh.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Rh),e.getHSL($S);const r=Rx(Rh.h,$S.h,t),i=Rx(Rh.s,$S.s,t),a=Rx(Rh.l,$S.l,t);return this.setHSL(r,i,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,a=e.elements;return this.r=a[0]*t+a[3]*r+a[6]*i,this.g=a[1]*t+a[4]*r+a[7]*i,this.b=a[2]*t+a[5]*r+a[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Ms=new Bt;Bt.NAMES=m8;let KQ=0;class Fs extends pf{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:KQ++}),this.uuid=hl(),this.name="",this.type="Material",this.blending=Ym,this.side=vd,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=RE,this.blendDst=PE,this.blendEquation=jh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Bt(0,0,0),this.blendAlpha=0,this.depthFunc=sg,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=TN,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Im,this.stencilZFail=Im,this.stencilZPass=Im,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){kt(`Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){kt(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(r.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(r.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Ym&&(r.blending=this.blending),this.side!==vd&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==RE&&(r.blendSrc=this.blendSrc),this.blendDst!==PE&&(r.blendDst=this.blendDst),this.blendEquation!==jh&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==sg&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==TN&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Im&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Im&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Im&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.allowOverride===!1&&(r.allowOverride=!1),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(a){const s=[];for(const o in a){const c=a[o];delete c.metadata,s.push(c)}return s}if(t){const a=i(e.textures),s=i(e.images);a.length>0&&(r.textures=a),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let a=0;a!==i;++a)r[a]=t[a].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class _p extends Fs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gl,this.combine=k_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ad=ZQ();function ZQ(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let c=0;c<256;++c){const f=c-127;f<-27?(r[c]=0,r[c|256]=32768,i[c]=24,i[c|256]=24):f<-14?(r[c]=1024>>-f-14,r[c|256]=1024>>-f-14|32768,i[c]=-f-1,i[c|256]=-f-1):f<=15?(r[c]=f+15<<10,r[c|256]=f+15<<10|32768,i[c]=13,i[c|256]=13):f<128?(r[c]=31744,r[c|256]=64512,i[c]=24,i[c|256]=24):(r[c]=31744,r[c|256]=64512,i[c]=13,i[c|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let c=1;c<1024;++c){let f=c<<13,d=0;for(;(f&8388608)===0;)f<<=1,d-=8388608;f&=-8388609,d+=947912704,a[c]=f|d}for(let c=1024;c<2048;++c)a[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)s[c]=c<<23;s[31]=1199570944,s[32]=2147483648;for(let c=33;c<63;++c)s[c]=2147483648+(c-32<<23);s[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(o[c]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:s,offsetTable:o}}function ko(n){Math.abs(n)>65504&&kt("DataUtils.toHalfFloat(): Value out of range."),n=mn(n,-65504,65504),ad.floatView[0]=n;const e=ad.uint32View[0],t=e>>23&511;return ad.baseTable[t]+((e&8388607)>>ad.shiftTable[t])}function px(n){const e=n>>10;return ad.uint32View[0]=ad.mantissaTable[ad.offsetTable[e]+(n&1023)]+ad.exponentTable[e],ad.floatView[0]}class QQ{static toHalfFloat(e){return ko(e)}static fromHalfFloat(e){return px(e)}}const ea=new ue,XS=new lt;let JQ=0;class yr{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:JQ++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Zx,this.updateRanges=[],this.gpuType=io,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)XS.fromBufferAttribute(this,t),XS.applyMatrix3(e),this.setXY(t,XS.x,XS.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)ea.fromBufferAttribute(this,t),ea.applyMatrix3(e),this.setXYZ(t,ea.x,ea.y,ea.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)ea.fromBufferAttribute(this,t),ea.applyMatrix4(e),this.setXYZ(t,ea.x,ea.y,ea.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ea.fromBufferAttribute(this,t),ea.applyNormalMatrix(e),this.setXYZ(t,ea.x,ea.y,ea.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ea.fromBufferAttribute(this,t),ea.transformDirection(e),this.setXYZ(t,ea.x,ea.y,ea.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=ro(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Dn(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ro(t,this.array)),t}setX(e,t){return this.normalized&&(t=Dn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ro(t,this.array)),t}setY(e,t){return this.normalized&&(t=Dn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ro(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Dn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ro(t,this.array)),t}setW(e,t){return this.normalized&&(t=Dn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Dn(t,this.array),r=Dn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Dn(t,this.array),r=Dn(r,this.array),i=Dn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,a){return e*=this.itemSize,this.normalized&&(t=Dn(t,this.array),r=Dn(r,this.array),i=Dn(i,this.array),a=Dn(a,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Zx&&(e.usage=this.usage),e}}class eJ extends yr{constructor(e,t,r){super(new Int8Array(e),t,r)}}class tJ extends yr{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class nJ extends yr{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class rJ extends yr{constructor(e,t,r){super(new Int16Array(e),t,r)}}class N3 extends yr{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class iJ extends yr{constructor(e,t,r){super(new Int32Array(e),t,r)}}class O3 extends yr{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class aJ extends yr{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=px(this.array[e*this.itemSize]);return this.normalized&&(t=ro(t,this.array)),t}setX(e,t){return this.normalized&&(t=Dn(t,this.array)),this.array[e*this.itemSize]=ko(t),this}getY(e){let t=px(this.array[e*this.itemSize+1]);return this.normalized&&(t=ro(t,this.array)),t}setY(e,t){return this.normalized&&(t=Dn(t,this.array)),this.array[e*this.itemSize+1]=ko(t),this}getZ(e){let t=px(this.array[e*this.itemSize+2]);return this.normalized&&(t=ro(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Dn(t,this.array)),this.array[e*this.itemSize+2]=ko(t),this}getW(e){let t=px(this.array[e*this.itemSize+3]);return this.normalized&&(t=ro(t,this.array)),t}setW(e,t){return this.normalized&&(t=Dn(t,this.array)),this.array[e*this.itemSize+3]=ko(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Dn(t,this.array),r=Dn(r,this.array)),this.array[e+0]=ko(t),this.array[e+1]=ko(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Dn(t,this.array),r=Dn(r,this.array),i=Dn(i,this.array)),this.array[e+0]=ko(t),this.array[e+1]=ko(r),this.array[e+2]=ko(i),this}setXYZW(e,t,r,i,a){return e*=this.itemSize,this.normalized&&(t=Dn(t,this.array),r=Dn(r,this.array),i=Dn(i,this.array),a=Dn(a,this.array)),this.array[e+0]=ko(t),this.array[e+1]=ko(r),this.array[e+2]=ko(i),this.array[e+3]=ko(a),this}}class qt extends yr{constructor(e,t,r){super(new Float32Array(e),t,r)}}let sJ=0;const $l=new yn,HI=new cr,B0=new ue,sl=new os,qb=new os,Ca=new ue;class xn extends pf{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:sJ++}),this.uuid=hl(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(u8(e)?O3:N3)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const a=new Rn().getNormalMatrix(e);r.applyNormalMatrix(a),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return $l.makeRotationFromQuaternion(e),this.applyMatrix4($l),this}rotateX(e){return $l.makeRotationX(e),this.applyMatrix4($l),this}rotateY(e){return $l.makeRotationY(e),this.applyMatrix4($l),this}rotateZ(e){return $l.makeRotationZ(e),this.applyMatrix4($l),this}translate(e,t,r){return $l.makeTranslation(e,t,r),this.applyMatrix4($l),this}scale(e,t,r){return $l.makeScale(e,t,r),this.applyMatrix4($l),this}lookAt(e){return HI.lookAt(e),HI.updateMatrix(),this.applyMatrix4(HI.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(B0).negate(),this.translate(B0.x,B0.y,B0.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const r=[];for(let i=0,a=e.length;i<a;i++){const s=e[i];r.push(s.x,s.y,s.z||0)}this.setAttribute("position",new qt(r,3))}else{const r=Math.min(e.length,t.count);for(let i=0;i<r;i++){const a=e[i];t.setXYZ(i,a.x,a.y,a.z||0)}e.length>t.count&&kt("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new os);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){tn("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ue(-1/0,-1/0,-1/0),new ue(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const a=t[r];sl.setFromBufferAttribute(a),this.morphTargetsRelative?(Ca.addVectors(this.boundingBox.min,sl.min),this.boundingBox.expandByPoint(Ca),Ca.addVectors(this.boundingBox.max,sl.max),this.boundingBox.expandByPoint(Ca)):(this.boundingBox.expandByPoint(sl.min),this.boundingBox.expandByPoint(sl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&tn('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Oa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){tn("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ue,1/0);return}if(e){const r=this.boundingSphere.center;if(sl.setFromBufferAttribute(e),t)for(let a=0,s=t.length;a<s;a++){const o=t[a];qb.setFromBufferAttribute(o),this.morphTargetsRelative?(Ca.addVectors(sl.min,qb.min),sl.expandByPoint(Ca),Ca.addVectors(sl.max,qb.max),sl.expandByPoint(Ca)):(sl.expandByPoint(qb.min),sl.expandByPoint(qb.max))}sl.getCenter(r);let i=0;for(let a=0,s=e.count;a<s;a++)Ca.fromBufferAttribute(e,a),i=Math.max(i,r.distanceToSquared(Ca));if(t)for(let a=0,s=t.length;a<s;a++){const o=t[a],c=this.morphTargetsRelative;for(let f=0,d=o.count;f<d;f++)Ca.fromBufferAttribute(o,f),c&&(B0.fromBufferAttribute(e,f),Ca.add(B0)),i=Math.max(i,r.distanceToSquared(Ca))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&tn('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){tn("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new yr(new Float32Array(4*r.count),4));const s=this.getAttribute("tangent"),o=[],c=[];for(let P=0;P<r.count;P++)o[P]=new ue,c[P]=new ue;const f=new ue,d=new ue,p=new ue,v=new lt,y=new lt,x=new lt,E=new ue,S=new ue;function w(P,C,L){f.fromBufferAttribute(r,P),d.fromBufferAttribute(r,C),p.fromBufferAttribute(r,L),v.fromBufferAttribute(a,P),y.fromBufferAttribute(a,C),x.fromBufferAttribute(a,L),d.sub(f),p.sub(f),y.sub(v),x.sub(v);const j=1/(y.x*x.y-x.x*y.y);isFinite(j)&&(E.copy(d).multiplyScalar(x.y).addScaledVector(p,-y.y).multiplyScalar(j),S.copy(p).multiplyScalar(y.x).addScaledVector(d,-x.x).multiplyScalar(j),o[P].add(E),o[C].add(E),o[L].add(E),c[P].add(S),c[C].add(S),c[L].add(S))}let R=this.groups;R.length===0&&(R=[{start:0,count:e.count}]);for(let P=0,C=R.length;P<C;++P){const L=R[P],j=L.start,B=L.count;for(let V=j,Q=j+B;V<Q;V+=3)w(e.getX(V+0),e.getX(V+1),e.getX(V+2))}const N=new ue,O=new ue,z=new ue,k=new ue;function U(P){z.fromBufferAttribute(i,P),k.copy(z);const C=o[P];N.copy(C),N.sub(z.multiplyScalar(z.dot(C))).normalize(),O.crossVectors(k,C);const j=O.dot(c[P])<0?-1:1;s.setXYZW(P,N.x,N.y,N.z,j)}for(let P=0,C=R.length;P<C;++P){const L=R[P],j=L.start,B=L.count;for(let V=j,Q=j+B;V<Q;V+=3)U(e.getX(V+0)),U(e.getX(V+1)),U(e.getX(V+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new yr(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let v=0,y=r.count;v<y;v++)r.setXYZ(v,0,0,0);const i=new ue,a=new ue,s=new ue,o=new ue,c=new ue,f=new ue,d=new ue,p=new ue;if(e)for(let v=0,y=e.count;v<y;v+=3){const x=e.getX(v+0),E=e.getX(v+1),S=e.getX(v+2);i.fromBufferAttribute(t,x),a.fromBufferAttribute(t,E),s.fromBufferAttribute(t,S),d.subVectors(s,a),p.subVectors(i,a),d.cross(p),o.fromBufferAttribute(r,x),c.fromBufferAttribute(r,E),f.fromBufferAttribute(r,S),o.add(d),c.add(d),f.add(d),r.setXYZ(x,o.x,o.y,o.z),r.setXYZ(E,c.x,c.y,c.z),r.setXYZ(S,f.x,f.y,f.z)}else for(let v=0,y=t.count;v<y;v+=3)i.fromBufferAttribute(t,v+0),a.fromBufferAttribute(t,v+1),s.fromBufferAttribute(t,v+2),d.subVectors(s,a),p.subVectors(i,a),d.cross(p),r.setXYZ(v+0,d.x,d.y,d.z),r.setXYZ(v+1,d.x,d.y,d.z),r.setXYZ(v+2,d.x,d.y,d.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Ca.fromBufferAttribute(e,t),Ca.normalize(),e.setXYZ(t,Ca.x,Ca.y,Ca.z)}toNonIndexed(){function e(o,c){const f=o.array,d=o.itemSize,p=o.normalized,v=new f.constructor(c.length*d);let y=0,x=0;for(let E=0,S=c.length;E<S;E++){o.isInterleavedBufferAttribute?y=c[E]*o.data.stride+o.offset:y=c[E]*d;for(let w=0;w<d;w++)v[x++]=f[y++]}return new yr(v,d,p)}if(this.index===null)return kt("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new xn,r=this.index.array,i=this.attributes;for(const o in i){const c=i[o],f=e(c,r);t.setAttribute(o,f)}const a=this.morphAttributes;for(const o in a){const c=[],f=a[o];for(let d=0,p=f.length;d<p;d++){const v=f[d],y=e(v,r);c.push(y)}t.morphAttributes[o]=c}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,c=s.length;o<c;o++){const f=s[o];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const f in c)c[f]!==void 0&&(e[f]=c[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const c in r){const f=r[c];e.data.attributes[c]=f.toJSON(e.data)}const i={};let a=!1;for(const c in this.morphAttributes){const f=this.morphAttributes[c],d=[];for(let p=0,v=f.length;p<v;p++){const y=f[p];d.push(y.toJSON(e.data))}d.length>0&&(i[c]=d,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const i=e.attributes;for(const f in i){const d=i[f];this.setAttribute(f,d.clone(t))}const a=e.morphAttributes;for(const f in a){const d=[],p=a[f];for(let v=0,y=p.length;v<y;v++)d.push(p[v].clone(t));this.morphAttributes[f]=d}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let f=0,d=s.length;f<d;f++){const p=s[f];this.addGroup(p.start,p.count,p.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const fU=new yn,hm=new Mg,YS=new Oa,dU=new ue,KS=new ue,ZS=new ue,QS=new ue,GI=new ue,JS=new ue,hU=new ue,ew=new ue;class sa extends cr{constructor(e=new xn,t=new _p){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,a=r.morphAttributes.position,s=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(a&&o){JS.set(0,0,0);for(let c=0,f=a.length;c<f;c++){const d=o[c],p=a[c];d!==0&&(GI.fromBufferAttribute(p,e),s?JS.addScaledVector(GI,d):JS.addScaledVector(GI.sub(t),d))}t.add(JS)}return t}raycast(e,t){const r=this.geometry,i=this.material,a=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),YS.copy(r.boundingSphere),YS.applyMatrix4(a),hm.copy(e.ray).recast(e.near),!(YS.containsPoint(hm.origin)===!1&&(hm.intersectSphere(YS,dU)===null||hm.origin.distanceToSquared(dU)>(e.far-e.near)**2))&&(fU.copy(a).invert(),hm.copy(e.ray).applyMatrix4(fU),!(r.boundingBox!==null&&hm.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,hm)))}_computeIntersections(e,t,r){let i;const a=this.geometry,s=this.material,o=a.index,c=a.attributes.position,f=a.attributes.uv,d=a.attributes.uv1,p=a.attributes.normal,v=a.groups,y=a.drawRange;if(o!==null)if(Array.isArray(s))for(let x=0,E=v.length;x<E;x++){const S=v[x],w=s[S.materialIndex],R=Math.max(S.start,y.start),N=Math.min(o.count,Math.min(S.start+S.count,y.start+y.count));for(let O=R,z=N;O<z;O+=3){const k=o.getX(O),U=o.getX(O+1),P=o.getX(O+2);i=tw(this,w,e,r,f,d,p,k,U,P),i&&(i.faceIndex=Math.floor(O/3),i.face.materialIndex=S.materialIndex,t.push(i))}}else{const x=Math.max(0,y.start),E=Math.min(o.count,y.start+y.count);for(let S=x,w=E;S<w;S+=3){const R=o.getX(S),N=o.getX(S+1),O=o.getX(S+2);i=tw(this,s,e,r,f,d,p,R,N,O),i&&(i.faceIndex=Math.floor(S/3),t.push(i))}}else if(c!==void 0)if(Array.isArray(s))for(let x=0,E=v.length;x<E;x++){const S=v[x],w=s[S.materialIndex],R=Math.max(S.start,y.start),N=Math.min(c.count,Math.min(S.start+S.count,y.start+y.count));for(let O=R,z=N;O<z;O+=3){const k=O,U=O+1,P=O+2;i=tw(this,w,e,r,f,d,p,k,U,P),i&&(i.faceIndex=Math.floor(O/3),i.face.materialIndex=S.materialIndex,t.push(i))}}else{const x=Math.max(0,y.start),E=Math.min(c.count,y.start+y.count);for(let S=x,w=E;S<w;S+=3){const R=S,N=S+1,O=S+2;i=tw(this,s,e,r,f,d,p,R,N,O),i&&(i.faceIndex=Math.floor(S/3),t.push(i))}}}}function oJ(n,e,t,r,i,a,s,o){let c;if(e.side===oo?c=r.intersectTriangle(s,a,i,!0,o):c=r.intersectTriangle(i,a,s,e.side===vd,o),c===null)return null;ew.copy(o),ew.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(ew);return f<t.near||f>t.far?null:{distance:f,point:ew.clone(),object:n}}function tw(n,e,t,r,i,a,s,o,c,f){n.getVertexPosition(o,KS),n.getVertexPosition(c,ZS),n.getVertexPosition(f,QS);const d=oJ(n,e,t,r,KS,ZS,QS,hU);if(d){const p=new ue;zo.getBarycoord(hU,KS,ZS,QS,p),i&&(d.uv=zo.getInterpolatedAttribute(i,o,c,f,p,new lt)),a&&(d.uv1=zo.getInterpolatedAttribute(a,o,c,f,p,new lt)),s&&(d.normal=zo.getInterpolatedAttribute(s,o,c,f,p,new ue),d.normal.dot(r.direction)>0&&d.normal.multiplyScalar(-1));const v={a:o,b:c,c:f,normal:new ue,materialIndex:0};zo.getNormal(KS,ZS,QS,v.normal),d.face=v,d.barycoord=p}return d}class Cg extends xn{constructor(e=1,t=1,r=1,i=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:a,depthSegments:s};const o=this;i=Math.floor(i),a=Math.floor(a),s=Math.floor(s);const c=[],f=[],d=[],p=[];let v=0,y=0;x("z","y","x",-1,-1,r,t,e,s,a,0),x("z","y","x",1,-1,r,t,-e,s,a,1),x("x","z","y",1,1,e,r,t,i,s,2),x("x","z","y",1,-1,e,r,-t,i,s,3),x("x","y","z",1,-1,e,t,r,i,a,4),x("x","y","z",-1,-1,e,t,-r,i,a,5),this.setIndex(c),this.setAttribute("position",new qt(f,3)),this.setAttribute("normal",new qt(d,3)),this.setAttribute("uv",new qt(p,2));function x(E,S,w,R,N,O,z,k,U,P,C){const L=O/U,j=z/P,B=O/2,V=z/2,Q=k/2,J=U+1,W=P+1;let $=0,se=0;const ce=new ue;for(let fe=0;fe<W;fe++){const Z=fe*j-V;for(let re=0;re<J;re++){const de=re*L-B;ce[E]=de*R,ce[S]=Z*N,ce[w]=Q,f.push(ce.x,ce.y,ce.z),ce[E]=0,ce[S]=0,ce[w]=k>0?1:-1,d.push(ce.x,ce.y,ce.z),p.push(re/U),p.push(1-fe/P),$+=1}}for(let fe=0;fe<P;fe++)for(let Z=0;Z<U;Z++){const re=v+Z+J*fe,de=v+Z+J*(fe+1),ve=v+(Z+1)+J*(fe+1),pe=v+(Z+1)+J*fe;c.push(re,de,pe),c.push(de,ve,pe),se+=6}o.addGroup(y,se,C),y+=se,v+=$}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cg(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function zv(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(kt("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function eo(n){const e={};for(let t=0;t<n.length;t++){const r=zv(n[t]);for(const i in r)e[i]=r[i]}return e}function lJ(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function g8(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Qn.workingColorSpace}const v8={clone:zv,merge:eo};var cJ=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,uJ=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class nc extends Fs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=cJ,this.fragmentShader=uJ,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=zv(e.uniforms),this.uniformsGroups=lJ(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?t.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[i]={type:"m4",value:s.toArray()}:t.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class aM extends cr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new yn,this.projectionMatrix=new yn,this.projectionMatrixInverse=new yn,this.coordinateSystem=cl,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ph=new ue,pU=new lt,mU=new lt;class ji extends aM{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Uv*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Km*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Uv*2*Math.atan(Math.tan(Km*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){Ph.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ph.x,Ph.y).multiplyScalar(-e/Ph.z),Ph.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Ph.x,Ph.y).multiplyScalar(-e/Ph.z)}getViewSize(e,t){return this.getViewBounds(e,pU,mU),t.subVectors(mU,pU)}setViewOffset(e,t,r,i,a,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Km*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,a=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const c=s.fullWidth,f=s.fullHeight;a+=s.offsetX*i/c,t-=s.offsetY*r/f,i*=s.width/c,r*=s.height/f}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,t,t-r,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const V0=-90,H0=1;class y8 extends cr{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new ji(V0,H0,e,t);i.layers=this.layers,this.add(i);const a=new ji(V0,H0,e,t);a.layers=this.layers,this.add(a);const s=new ji(V0,H0,e,t);s.layers=this.layers,this.add(s);const o=new ji(V0,H0,e,t);o.layers=this.layers,this.add(o);const c=new ji(V0,H0,e,t);c.layers=this.layers,this.add(c);const f=new ji(V0,H0,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,a,s,o,c]=t;for(const f of t)this.remove(f);if(e===cl)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Lv)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,o,c,f,d]=this.children,p=e.getRenderTarget(),v=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const E=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,a),e.setRenderTarget(r,1,i),e.render(t,s),e.setRenderTarget(r,2,i),e.render(t,o),e.setRenderTarget(r,3,i),e.render(t,c),e.setRenderTarget(r,4,i),e.render(t,f),r.texture.generateMipmaps=E,e.setRenderTarget(r,5,i),e.render(t,d),e.setRenderTarget(p,v,y),e.xr.enabled=x,r.texture.needsPMREMUpdate=!0}}class F_ extends Ci{constructor(e=[],t=nf,r,i,a,s,o,c,f,d){super(e,t,r,i,a,s,o,c,f,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class D3 extends pl{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new F_(i),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Cg(5,5,5),a=new nc({name:"CubemapFromEquirect",uniforms:zv(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:oo,blending:Yu});a.uniforms.tEquirect.value=t;const s=new sa(i,a),o=t.minFilter;return t.minFilter===Gu&&(t.minFilter=ti),new y8(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,r=!0,i=!0){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,r,i);e.setRenderTarget(a)}}class yv extends cr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const fJ={type:"move"};class lE{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new yv,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new yv,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ue,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ue),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new yv,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ue,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ue),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,a=null,s=null;const o=this._targetRay,c=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){s=!0;for(const E of e.hand.values()){const S=t.getJointPose(E,r),w=this._getHandJoint(f,E);S!==null&&(w.matrix.fromArray(S.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=S.radius),w.visible=S!==null}const d=f.joints["index-finger-tip"],p=f.joints["thumb-tip"],v=d.position.distanceTo(p.position),y=.02,x=.005;f.inputState.pinching&&v>y+x?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&v<=y-x&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,r),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1));o!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&a!==null&&(i=a),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(fJ)))}return o!==null&&(o.visible=i!==null),c!==null&&(c.visible=a!==null),f!==null&&(f.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new yv;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class sM{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Bt(e),this.density=t}clone(){return new sM(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class oM{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Bt(e),this.near=t,this.far=r}clone(){return new oM(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class L3 extends cr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new gl,this.environmentIntensity=1,this.environmentRotation=new gl,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class lM{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Zx,this.updateRanges=[],this.version=0,this.uuid=hl()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,a=this.stride;i<a;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=hl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=hl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Qs=new ue;class lg{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Qs.fromBufferAttribute(this,t),Qs.applyMatrix4(e),this.setXYZ(t,Qs.x,Qs.y,Qs.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Qs.fromBufferAttribute(this,t),Qs.applyNormalMatrix(e),this.setXYZ(t,Qs.x,Qs.y,Qs.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Qs.fromBufferAttribute(this,t),Qs.transformDirection(e),this.setXYZ(t,Qs.x,Qs.y,Qs.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=ro(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Dn(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=Dn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Dn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Dn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Dn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ro(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ro(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ro(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ro(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Dn(t,this.array),r=Dn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Dn(t,this.array),r=Dn(r,this.array),i=Dn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=Dn(t,this.array),r=Dn(r,this.array),i=Dn(i,this.array),a=Dn(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=a,this}clone(e){if(e===void 0){Jx("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return new yr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new lg(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){Jx("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class k3 extends Fs{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Bt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let G0;const Wb=new ue,q0=new ue,W0=new ue,$0=new lt,$b=new lt,b8=new yn,nw=new ue,Xb=new ue,rw=new ue,gU=new lt,qI=new lt,vU=new lt;class x8 extends cr{constructor(e=new k3){if(super(),this.isSprite=!0,this.type="Sprite",G0===void 0){G0=new xn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new lM(t,5);G0.setIndex([0,1,2,0,2,3]),G0.setAttribute("position",new lg(r,3,0,!1)),G0.setAttribute("uv",new lg(r,2,3,!1))}this.geometry=G0,this.material=e,this.center=new lt(.5,.5),this.count=1}raycast(e,t){e.camera===null&&tn('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),q0.setFromMatrixScale(this.matrixWorld),b8.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),W0.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&q0.multiplyScalar(-W0.z);const r=this.material.rotation;let i,a;r!==0&&(a=Math.cos(r),i=Math.sin(r));const s=this.center;iw(nw.set(-.5,-.5,0),W0,s,q0,i,a),iw(Xb.set(.5,-.5,0),W0,s,q0,i,a),iw(rw.set(.5,.5,0),W0,s,q0,i,a),gU.set(0,0),qI.set(1,0),vU.set(1,1);let o=e.ray.intersectTriangle(nw,Xb,rw,!1,Wb);if(o===null&&(iw(Xb.set(-.5,.5,0),W0,s,q0,i,a),qI.set(0,1),o=e.ray.intersectTriangle(nw,rw,Xb,!1,Wb),o===null))return;const c=e.ray.origin.distanceTo(Wb);c<e.near||c>e.far||t.push({distance:c,point:Wb.clone(),uv:zo.getInterpolation(Wb,nw,Xb,rw,gU,qI,vU,new lt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function iw(n,e,t,r,i,a){$0.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?($b.x=a*$0.x-i*$0.y,$b.y=i*$0.x+a*$0.y):$b.copy($0),n.copy(e),n.x+=$b.x,n.y+=$b.y,n.applyMatrix4(b8)}const aw=new ue,yU=new ue;class _8 extends cr{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const a=t[r];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let a;for(a=0;a<i.length&&!(t<i[a].distance);a++);return i.splice(a,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let r=0;r<t.length;r++)if(t[r].distance===e){const i=t.splice(r,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),e<a)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){aw.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(aw);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){aw.setFromMatrixPosition(e.matrixWorld),yU.setFromMatrixPosition(this.matrixWorld);const r=aw.distanceTo(yU)/e.zoom;t[0].object.visible=!0;let i,a;for(i=1,a=t.length;i<a;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),r>=s)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<a;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,a=r.length;i<a;i++){const s=r[i];t.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return t}}const bU=new ue,xU=new zr,_U=new zr,dJ=new ue,SU=new yn,sw=new ue,WI=new Oa,wU=new yn,$I=new Mg;class S8 extends sa{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=AN,this.bindMatrix=new yn,this.bindMatrixInverse=new yn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new os),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,sw),this.boundingBox.expandByPoint(sw)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Oa),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,sw),this.boundingSphere.expandByPoint(sw)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),WI.copy(this.boundingSphere),WI.applyMatrix4(i),e.ray.intersectsSphere(WI)!==!1&&(wU.copy(i).invert(),$I.copy(e.ray).applyMatrix4(wU),!(this.boundingBox!==null&&$I.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,$I)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new zr,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===AN?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===QV?this.bindMatrixInverse.copy(this.bindMatrix).invert():kt("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;xU.fromBufferAttribute(i.attributes.skinIndex,e),_U.fromBufferAttribute(i.attributes.skinWeight,e),bU.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const s=_U.getComponent(a);if(s!==0){const o=xU.getComponent(a);SU.multiplyMatrices(r.bones[o].matrixWorld,r.boneInverses[o]),t.addScaledVector(dJ.copy(bU).applyMatrix4(SU),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}class U3 extends cr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Vc extends Ci{constructor(e=null,t=1,r=1,i,a,s,o,c,f=Bi,d=Bi,p,v){super(null,s,o,c,f,d,i,a,p,v),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const EU=new yn,hJ=new yn;class cM{constructor(e=[],t=[]){this.uuid=hl(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){kt("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new yn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new yn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const o=e[a]?e[a].matrixWorld:hJ;EU.multiplyMatrices(o,t[a]),EU.toArray(r,a*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new cM(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Vc(t,e,e,Ds,io);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const a=e.bones[r];let s=t[a];s===void 0&&(kt("Skeleton: No bone found with UUID:",a),s=new U3),this.bones.push(s),this.boneInverses.push(new yn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,a=t.length;i<a;i++){const s=t[i];e.bones.push(s.uuid);const o=r[i];e.boneInverses.push(o.toArray())}return e}}class jv extends yr{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const X0=new yn,AU=new yn,ow=[],TU=new os,pJ=new yn,Yb=new sa,Kb=new Oa;class w8 extends sa{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new jv(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,pJ)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new os),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,X0),TU.copy(e.boundingBox).applyMatrix4(X0),this.boundingBox.union(TU)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Oa),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,X0),Kb.copy(e.boundingSphere).applyMatrix4(X0),this.boundingSphere.union(Kb)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const r=t.morphTargetInfluences,i=this.morphTexture.source.data.data,a=r.length+1,s=e*a+1;for(let o=0;o<r.length;o++)r[o]=i[s+o]}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Yb.geometry=this.geometry,Yb.material=this.material,Yb.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Kb.copy(this.boundingSphere),Kb.applyMatrix4(r),e.ray.intersectsSphere(Kb)!==!1))for(let a=0;a<i;a++){this.getMatrixAt(a,X0),AU.multiplyMatrices(r,X0),Yb.matrixWorld=AU,Yb.raycast(e,ow);for(let s=0,o=ow.length;s<o;s++){const c=ow[s];c.instanceId=a,c.object=this,t.push(c)}ow.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new jv(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const r=t.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new Vc(new Float32Array(i*this.count),i,this.count,ZT,io));const a=this.morphTexture.source.data.data;let s=0;for(let f=0;f<r.length;f++)s+=r[f];const o=this.geometry.morphTargetsRelative?1:1-s,c=i*e;a[c]=o,a.set(r,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const XI=new ue,mJ=new ue,gJ=new Rn;class nd{constructor(e=new ue(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=XI.subVectors(r,t).cross(mJ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(XI),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:t.copy(e.start).addScaledVector(r,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||gJ.getNormalMatrix(e),i=this.coplanarPoint(XI).applyMatrix4(e),a=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const pm=new Oa,vJ=new lt(.5,.5),lw=new ue;class oy{constructor(e=new nd,t=new nd,r=new nd,i=new nd,a=new nd,s=new nd){this.planes=[e,t,r,i,a,s]}set(e,t,r,i,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(i),o[4].copy(a),o[5].copy(s),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=cl,r=!1){const i=this.planes,a=e.elements,s=a[0],o=a[1],c=a[2],f=a[3],d=a[4],p=a[5],v=a[6],y=a[7],x=a[8],E=a[9],S=a[10],w=a[11],R=a[12],N=a[13],O=a[14],z=a[15];if(i[0].setComponents(f-s,y-d,w-x,z-R).normalize(),i[1].setComponents(f+s,y+d,w+x,z+R).normalize(),i[2].setComponents(f+o,y+p,w+E,z+N).normalize(),i[3].setComponents(f-o,y-p,w-E,z-N).normalize(),r)i[4].setComponents(c,v,S,O).normalize(),i[5].setComponents(f-c,y-v,w-S,z-O).normalize();else if(i[4].setComponents(f-c,y-v,w-S,z-O).normalize(),t===cl)i[5].setComponents(f+c,y+v,w+S,z+O).normalize();else if(t===Lv)i[5].setComponents(c,v,S,O).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),pm.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),pm.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(pm)}intersectsSprite(e){pm.center.set(0,0,0);const t=vJ.distanceTo(e.center);return pm.radius=.7071067811865476+t,pm.applyMatrix4(e.matrixWorld),this.intersectsSphere(pm)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(lw.x=i.normal.x>0?e.max.x:e.min.x,lw.y=i.normal.y>0?e.max.y:e.min.y,lw.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(lw)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Nu=new yn,Ou=new oy;class uM{constructor(){this.coordinateSystem=cl}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Nu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Ou.setFromProjectionMatrix(Nu,i.coordinateSystem,i.reversedDepth),Ou.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Nu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Ou.setFromProjectionMatrix(Nu,i.coordinateSystem,i.reversedDepth),Ou.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Nu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Ou.setFromProjectionMatrix(Nu,i.coordinateSystem,i.reversedDepth),Ou.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Nu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Ou.setFromProjectionMatrix(Nu,i.coordinateSystem,i.reversedDepth),Ou.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Nu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Ou.setFromProjectionMatrix(Nu,i.coordinateSystem,i.reversedDepth),Ou.containsPoint(e))return!0}return!1}clone(){return new uM}}function YI(n,e){return n-e}function yJ(n,e){return n.z-e.z}function bJ(n,e){return e.z-n.z}class xJ{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,r,i){const a=this.pool,s=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const o=a[this.index];s.push(o),this.index++,o.start=e,o.count=t,o.z=r,o.index=i}reset(){this.list.length=0,this.index=0}}const Lo=new yn,_J=new Bt(1,1,1),MU=new oy,SJ=new uM,cw=new os,mm=new Oa,Zb=new ue,CU=new ue,wJ=new ue,KI=new xJ,Cs=new sa,uw=[];function EJ(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let a=0;a<i;a++)for(let s=0;s<r;s++)e.setComponent(a+t,s,n.getComponent(a,s))}else e.array.set(n.array,t*r);e.needsUpdate=!0}function gm(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++)e[r]=n[r]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class E8 extends sa{constructor(e,t,r=t*2,i){super(new xn,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new Vc(t,e,e,Ds,io);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),r=new Vc(t,e,e,U_,tc);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),r=new Vc(t,e,e,Ds,io);r.colorSpace=Qn.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const s=e.getAttribute(a),{array:o,itemSize:c,normalized:f}=s,d=new o.constructor(r*c),p=new yr(d,c,f);t.setAttribute(a,p)}if(e.getIndex()!==null){const a=r>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new yr(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(!e.hasAttribute(r))throw new Error(`THREE.BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),a=t.getAttribute(r);if(i.itemSize!==a.itemSize||i.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new os);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const a=t[r].geometryIndex;this.getMatrixAt(r,Lo),this.getBoundingBoxAt(a,cw).applyMatrix4(Lo),e.union(cw)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Oa);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const a=t[r].geometryIndex;this.getMatrixAt(r,Lo),this.getBoundingSphereAt(a,mm).applyMatrix4(Lo),e.union(mm)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(YI),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=r):(i=this._instanceInfo.length,this._instanceInfo.push(r));const a=this._matricesTexture;Lo.identity().toArray(a.image.data,i*16),a.needsUpdate=!0;const s=this._colorsTexture;return s&&(_J.toArray(s.image.data,i*4),s.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const s=e.getIndex();if(s!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=r===-1?s.count:r),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(YI),c=this._availableGeometryIds.shift(),a[c]=i):(c=this._geometryCount,this._geometryCount++,a.push(i)),this.setGeometryAt(c,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,c}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,a=r.getIndex(),s=t.getIndex(),o=this._geometryInfo[e];if(i&&s.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=o.vertexStart,f=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const d in r.attributes){const p=t.getAttribute(d),v=r.getAttribute(d);EJ(p,v,c);const y=p.itemSize;for(let x=p.count,E=f;x<E;x++){const S=c+x;for(let w=0;w<y;w++)v.setComponent(S,w,0)}v.needsUpdate=!0,v.addUpdateRange(c*y,f*y)}if(i){const d=o.indexStart,p=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let v=0;v<s.count;v++)a.setX(d+v,c+s.getX(v));for(let v=s.count,y=p;v<y;v++)a.setX(d+v,c);a.needsUpdate=!0,a.addUpdateRange(d,o.reservedIndexCount)}return o.start=i?o.indexStart:o.vertexStart,o.count=i?o.indexCount:o.vertexCount,o.boundingBox=null,t.boundingBox!==null&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,t.boundingSphere!==null&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const r=this._instanceInfo;for(let i=0,a=r.length;i<a;i++)r[i].active&&r[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const r=this._geometryInfo,i=r.map((s,o)=>o).sort((s,o)=>r[s].vertexStart-r[o].vertexStart),a=this.geometry;for(let s=0,o=r.length;s<o;s++){const c=i[s],f=r[c];if(f.active!==!1){if(a.index!==null){if(f.indexStart!==t){const{indexStart:d,vertexStart:p,reservedIndexCount:v}=f,y=a.index,x=y.array,E=e-p;for(let S=d;S<d+v;S++)x[S]=x[S]+E;y.array.copyWithin(t,d,d+v),y.addUpdateRange(t,v),y.needsUpdate=!0,f.indexStart=t}t+=f.reservedIndexCount}if(f.vertexStart!==e){const{vertexStart:d,reservedVertexCount:p}=f,v=a.attributes;for(const y in v){const x=v[y],{array:E,itemSize:S}=x;E.copyWithin(e*S,d*S,(d+p)*S),x.addUpdateRange(e*S,p*S),x.needsUpdate=!0}f.vertexStart=e}e+=f.reservedVertexCount,f.start=a.index?f.indexStart:f.vertexStart,this._nextIndexStart=a.index?f.indexStart+f.reservedIndexCount:0,this._nextVertexStart=f.vertexStart+f.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const a=new os,s=r.index,o=r.attributes.position;for(let c=i.start,f=i.start+i.count;c<f;c++){let d=c;s&&(d=s.getX(d)),a.expandByPoint(Zb.fromBufferAttribute(o,d))}i.boundingBox=a}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const a=new Oa;this.getBoundingBoxAt(e,cw),cw.getCenter(a.center);const s=r.index,o=r.attributes.position;let c=0;for(let f=i.start,d=i.start+i.count;f<d;f++){let p=f;s&&(p=s.getX(p)),Zb.fromBufferAttribute(o,p),c=Math.max(c,a.center.distanceToSquared(Zb))}a.radius=Math.sqrt(c),i.boundingSphere=a}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const r=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),r.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const r=this._geometryInfo[e];return t.vertexStart=r.vertexStart,t.vertexCount=r.vertexCount,t.reservedVertexCount=r.reservedVertexCount,t.indexStart=r.indexStart,t.indexCount=r.indexCount,t.reservedIndexCount=r.reservedIndexCount,t.start=r.start,t.count=r.count,t}setInstanceCount(e){const t=this._availableInstanceIds,r=this._instanceInfo;for(t.sort(YI);t[t.length-1]===r.length-1;)r.pop(),t.pop();if(e<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),a=new Int32Array(e);gm(this._multiDrawCounts,i),gm(this._multiDrawStarts,a),this._multiDrawCounts=i,this._multiDrawStarts=a,this._maxInstanceCount=e;const s=this._indirectTexture,o=this._matricesTexture,c=this._colorsTexture;s.dispose(),this._initIndirectTexture(),gm(s.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),gm(o.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),gm(c.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const r=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...r.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(c=>c.indexStart+c.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new xn,this._initializeGeometry(a));const s=this.geometry;a.index&&gm(a.index.array,s.index.array);for(const o in a.attributes)gm(a.attributes[o].array,s.attributes[o].array)}raycast(e,t){const r=this._instanceInfo,i=this._geometryInfo,a=this.matrixWorld,s=this.geometry;Cs.material=this.material,Cs.geometry.index=s.index,Cs.geometry.attributes=s.attributes,Cs.geometry.boundingBox===null&&(Cs.geometry.boundingBox=new os),Cs.geometry.boundingSphere===null&&(Cs.geometry.boundingSphere=new Oa);for(let o=0,c=r.length;o<c;o++){if(!r[o].visible||!r[o].active)continue;const f=r[o].geometryIndex,d=i[f];Cs.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(o,Cs.matrixWorld).premultiply(a),this.getBoundingBoxAt(f,Cs.geometry.boundingBox),this.getBoundingSphereAt(f,Cs.geometry.boundingSphere),Cs.raycast(e,uw);for(let p=0,v=uw.length;p<v;p++){const y=uw[p];y.object=this,y.batchId=o,t.push(y)}uw.length=0}Cs.material=null,Cs.geometry.index=null,Cs.geometry.attributes={},Cs.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,r,i,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=i.getIndex(),o=s===null?1:s.array.BYTES_PER_ELEMENT,c=this._instanceInfo,f=this._multiDrawStarts,d=this._multiDrawCounts,p=this._geometryInfo,v=this.perObjectFrustumCulled,y=this._indirectTexture,x=y.image.data,E=r.isArrayCamera?SJ:MU;v&&!r.isArrayCamera&&(Lo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),MU.setFromProjectionMatrix(Lo,r.coordinateSystem,r.reversedDepth));let S=0;if(this.sortObjects){Lo.copy(this.matrixWorld).invert(),Zb.setFromMatrixPosition(r.matrixWorld).applyMatrix4(Lo),CU.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(Lo);for(let N=0,O=c.length;N<O;N++)if(c[N].visible&&c[N].active){const z=c[N].geometryIndex;this.getMatrixAt(N,Lo),this.getBoundingSphereAt(z,mm).applyMatrix4(Lo);let k=!1;if(v&&(k=!E.intersectsSphere(mm,r)),!k){const U=p[z],P=wJ.subVectors(mm.center,Zb).dot(CU);KI.push(U.start,U.count,P,N)}}const w=KI.list,R=this.customSort;R===null?w.sort(a.transparent?bJ:yJ):R.call(this,w,r);for(let N=0,O=w.length;N<O;N++){const z=w[N];f[S]=z.start*o,d[S]=z.count,x[S]=z.index,S++}KI.reset()}else for(let w=0,R=c.length;w<R;w++)if(c[w].visible&&c[w].active){const N=c[w].geometryIndex;let O=!1;if(v&&(this.getMatrixAt(w,Lo),this.getBoundingSphereAt(N,mm).applyMatrix4(Lo),O=!E.intersectsSphere(mm,r)),!O){const z=p[N];f[S]=z.start*o,d[S]=z.count,x[S]=w,S++}}y.needsUpdate=!0,this._multiDrawCount=S,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,a,s){this.onBeforeRender(e,null,i,a,s)}}class co extends Fs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Bt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const yA=new ue,bA=new ue,IU=new yn,Qb=new Mg,fw=new Oa,ZI=new ue,RU=new ue;class cp extends cr{constructor(e=new xn,t=new co){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,a=t.count;i<a;i++)yA.fromBufferAttribute(t,i-1),bA.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=yA.distanceTo(bA);e.setAttribute("lineDistance",new qt(r,1))}else kt("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),fw.copy(r.boundingSphere),fw.applyMatrix4(i),fw.radius+=a,e.ray.intersectsSphere(fw)===!1)return;IU.copy(i).invert(),Qb.copy(e.ray).applyMatrix4(IU);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,f=this.isLineSegments?2:1,d=r.index,v=r.attributes.position;if(d!==null){const y=Math.max(0,s.start),x=Math.min(d.count,s.start+s.count);for(let E=y,S=x-1;E<S;E+=f){const w=d.getX(E),R=d.getX(E+1),N=dw(this,e,Qb,c,w,R,E);N&&t.push(N)}if(this.isLineLoop){const E=d.getX(x-1),S=d.getX(y),w=dw(this,e,Qb,c,E,S,x-1);w&&t.push(w)}}else{const y=Math.max(0,s.start),x=Math.min(v.count,s.start+s.count);for(let E=y,S=x-1;E<S;E+=f){const w=dw(this,e,Qb,c,E,E+1,E);w&&t.push(w)}if(this.isLineLoop){const E=dw(this,e,Qb,c,x-1,y,x-1);E&&t.push(E)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function dw(n,e,t,r,i,a,s){const o=n.geometry.attributes.position;if(yA.fromBufferAttribute(o,i),bA.fromBufferAttribute(o,a),t.distanceSqToSegment(yA,bA,ZI,RU)>r)return;ZI.applyMatrix4(n.matrixWorld);const f=e.ray.origin.distanceTo(ZI);if(!(f<e.near||f>e.far))return{distance:f,point:RU.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}const PU=new ue,NU=new ue;class mf extends cp{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,a=t.count;i<a;i+=2)PU.fromBufferAttribute(t,i),NU.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+PU.distanceTo(NU);e.setAttribute("lineDistance",new qt(r,1))}else kt("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class A8 extends cp{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class F3 extends Fs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Bt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const OU=new yn,CN=new Mg,hw=new Oa,pw=new ue;class T8 extends cr{constructor(e=new xn,t=new F3){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),hw.copy(r.boundingSphere),hw.applyMatrix4(i),hw.radius+=a,e.ray.intersectsSphere(hw)===!1)return;OU.copy(i).invert(),CN.copy(e.ray).applyMatrix4(OU);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,f=r.index,p=r.attributes.position;if(f!==null){const v=Math.max(0,s.start),y=Math.min(f.count,s.start+s.count);for(let x=v,E=y;x<E;x++){const S=f.getX(x);pw.fromBufferAttribute(p,S),DU(pw,S,c,i,e,t,this)}}else{const v=Math.max(0,s.start),y=Math.min(p.count,s.start+s.count);for(let x=v,E=y;x<E;x++)pw.fromBufferAttribute(p,x),DU(pw,x,c,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function DU(n,e,t,r,i,a,s){const o=CN.distanceSqToPoint(n);if(o<t){const c=new ue;CN.closestPointToPoint(n,c),c.applyMatrix4(r);const f=i.ray.origin.distanceTo(c);if(f<i.near||f>i.far)return;a.push({distance:f,distanceToRay:Math.sqrt(o),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}class M8 extends Ci{constructor(e,t,r,i,a=ti,s=ti,o,c,f){super(e,t,r,i,a,s,o,c,f),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const d=this;function p(){d.needsUpdate=!0,d._requestVideoFrameCallbackId=e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(p))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class AJ extends M8{constructor(e,t,r,i,a,s,o,c){super({},e,t,r,i,a,s,o,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class TJ extends Ci{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Bi,this.minFilter=Bi,this.generateMipmaps=!1,this.needsUpdate=!0}}class fM extends Ci{constructor(e,t,r,i,a,s,o,c,f,d,p,v){super(null,s,o,c,f,d,i,a,p,v),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class MJ extends fM{constructor(e,t,r,i,a,s){super(e,t,r,a,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Bo,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class CJ extends fM{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,nf),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class IJ extends Ci{constructor(e,t,r,i,a,s,o,c,f){super(e,t,r,i,a,s,o,c,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Bv extends Ci{constructor(e,t,r=tc,i,a,s,o=Bi,c=Bi,f,d=af,p=1){if(d!==af&&d!==Xh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const v={width:e,height:t,depth:p};super(v,i,a,s,o,c,d,r,f),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Yh(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class C8 extends Bv{constructor(e,t=tc,r=nf,i,a,s=Bi,o=Bi,c,f=af){const d={width:e,height:e,depth:1},p=[d,d,d,d,d,d];super(e,e,t,r,i,a,s,o,c,f),this.image=p,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class z3 extends Ci{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class dM extends xn{constructor(e=1,t=1,r=4,i=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i,heightSegments:a},t=Math.max(0,t),r=Math.max(1,Math.floor(r)),i=Math.max(3,Math.floor(i)),a=Math.max(1,Math.floor(a));const s=[],o=[],c=[],f=[],d=t/2,p=Math.PI/2*e,v=t,y=2*p+v,x=r*2+a,E=i+1,S=new ue,w=new ue;for(let R=0;R<=x;R++){let N=0,O=0,z=0,k=0;if(R<=r){const C=R/r,L=C*Math.PI/2;O=-d-e*Math.cos(L),z=e*Math.sin(L),k=-e*Math.cos(L),N=C*p}else if(R<=r+a){const C=(R-r)/a;O=-d+C*t,z=e,k=0,N=p+C*v}else{const C=(R-r-a)/r,L=C*Math.PI/2;O=d+e*Math.sin(L),z=e*Math.cos(L),k=e*Math.sin(L),N=p+v+C*p}const U=Math.max(0,Math.min(1,N/y));let P=0;R===0?P=.5/i:R===x&&(P=-.5/i);for(let C=0;C<=i;C++){const L=C/i,j=L*Math.PI*2,B=Math.sin(j),V=Math.cos(j);w.x=-z*V,w.y=O,w.z=z*B,o.push(w.x,w.y,w.z),S.set(-z*V,k,z*B),S.normalize(),c.push(S.x,S.y,S.z),f.push(L+P,U)}if(R>0){const C=(R-1)*E;for(let L=0;L<i;L++){const j=C+L,B=C+L+1,V=R*E+L,Q=R*E+L+1;s.push(j,B,V),s.push(B,Q,V)}}}this.setIndex(s),this.setAttribute("position",new qt(o,3)),this.setAttribute("normal",new qt(c,3)),this.setAttribute("uv",new qt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dM(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class hM extends xn{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const a=[],s=[],o=[],c=[],f=new ue,d=new lt;s.push(0,0,0),o.push(0,0,1),c.push(.5,.5);for(let p=0,v=3;p<=t;p++,v+=3){const y=r+p/t*i;f.x=e*Math.cos(y),f.y=e*Math.sin(y),s.push(f.x,f.y,f.z),o.push(0,0,1),d.x=(s[v]/e+1)/2,d.y=(s[v+1]/e+1)/2,c.push(d.x,d.y)}for(let p=1;p<=t;p++)a.push(p,p+1,0);this.setIndex(a),this.setAttribute("position",new qt(s,3)),this.setAttribute("normal",new qt(o,3)),this.setAttribute("uv",new qt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hM(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class z_ extends xn{constructor(e=1,t=1,r=1,i=32,a=1,s=!1,o=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:c};const f=this;i=Math.floor(i),a=Math.floor(a);const d=[],p=[],v=[],y=[];let x=0;const E=[],S=r/2;let w=0;R(),s===!1&&(e>0&&N(!0),t>0&&N(!1)),this.setIndex(d),this.setAttribute("position",new qt(p,3)),this.setAttribute("normal",new qt(v,3)),this.setAttribute("uv",new qt(y,2));function R(){const O=new ue,z=new ue;let k=0;const U=(t-e)/r;for(let P=0;P<=a;P++){const C=[],L=P/a,j=L*(t-e)+e;for(let B=0;B<=i;B++){const V=B/i,Q=V*c+o,J=Math.sin(Q),W=Math.cos(Q);z.x=j*J,z.y=-L*r+S,z.z=j*W,p.push(z.x,z.y,z.z),O.set(J,U,W).normalize(),v.push(O.x,O.y,O.z),y.push(V,1-L),C.push(x++)}E.push(C)}for(let P=0;P<i;P++)for(let C=0;C<a;C++){const L=E[C][P],j=E[C+1][P],B=E[C+1][P+1],V=E[C][P+1];(e>0||C!==0)&&(d.push(L,j,V),k+=3),(t>0||C!==a-1)&&(d.push(j,B,V),k+=3)}f.addGroup(w,k,0),w+=k}function N(O){const z=x,k=new lt,U=new ue;let P=0;const C=O===!0?e:t,L=O===!0?1:-1;for(let B=1;B<=i;B++)p.push(0,S*L,0),v.push(0,L,0),y.push(.5,.5),x++;const j=x;for(let B=0;B<=i;B++){const Q=B/i*c+o,J=Math.cos(Q),W=Math.sin(Q);U.x=C*W,U.y=S*L,U.z=C*J,p.push(U.x,U.y,U.z),v.push(0,L,0),k.x=J*.5+.5,k.y=W*.5*L+.5,y.push(k.x,k.y),x++}for(let B=0;B<i;B++){const V=z+B,Q=j+B;O===!0?d.push(Q,Q+1,V):d.push(Q+1,Q,V),P+=3}f.addGroup(w,P,O===!0?1:2),w+=P}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new z_(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class j_ extends z_{constructor(e=1,t=1,r=32,i=1,a=!1,s=0,o=Math.PI*2){super(0,e,t,r,i,a,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o}}static fromJSON(e){return new j_(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Sp extends xn{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const a=[],s=[];o(i),f(r),d(),this.setAttribute("position",new qt(a,3)),this.setAttribute("normal",new qt(a.slice(),3)),this.setAttribute("uv",new qt(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(R){const N=new ue,O=new ue,z=new ue;for(let k=0;k<t.length;k+=3)y(t[k+0],N),y(t[k+1],O),y(t[k+2],z),c(N,O,z,R)}function c(R,N,O,z){const k=z+1,U=[];for(let P=0;P<=k;P++){U[P]=[];const C=R.clone().lerp(O,P/k),L=N.clone().lerp(O,P/k),j=k-P;for(let B=0;B<=j;B++)B===0&&P===k?U[P][B]=C:U[P][B]=C.clone().lerp(L,B/j)}for(let P=0;P<k;P++)for(let C=0;C<2*(k-P)-1;C++){const L=Math.floor(C/2);C%2===0?(v(U[P][L+1]),v(U[P+1][L]),v(U[P][L])):(v(U[P][L+1]),v(U[P+1][L+1]),v(U[P+1][L]))}}function f(R){const N=new ue;for(let O=0;O<a.length;O+=3)N.x=a[O+0],N.y=a[O+1],N.z=a[O+2],N.normalize().multiplyScalar(R),a[O+0]=N.x,a[O+1]=N.y,a[O+2]=N.z}function d(){const R=new ue;for(let N=0;N<a.length;N+=3){R.x=a[N+0],R.y=a[N+1],R.z=a[N+2];const O=S(R)/2/Math.PI+.5,z=w(R)/Math.PI+.5;s.push(O,1-z)}x(),p()}function p(){for(let R=0;R<s.length;R+=6){const N=s[R+0],O=s[R+2],z=s[R+4],k=Math.max(N,O,z),U=Math.min(N,O,z);k>.9&&U<.1&&(N<.2&&(s[R+0]+=1),O<.2&&(s[R+2]+=1),z<.2&&(s[R+4]+=1))}}function v(R){a.push(R.x,R.y,R.z)}function y(R,N){const O=R*3;N.x=e[O+0],N.y=e[O+1],N.z=e[O+2]}function x(){const R=new ue,N=new ue,O=new ue,z=new ue,k=new lt,U=new lt,P=new lt;for(let C=0,L=0;C<a.length;C+=9,L+=6){R.set(a[C+0],a[C+1],a[C+2]),N.set(a[C+3],a[C+4],a[C+5]),O.set(a[C+6],a[C+7],a[C+8]),k.set(s[L+0],s[L+1]),U.set(s[L+2],s[L+3]),P.set(s[L+4],s[L+5]),z.copy(R).add(N).add(O).divideScalar(3);const j=S(z);E(k,L+0,R,j),E(U,L+2,N,j),E(P,L+4,O,j)}}function E(R,N,O,z){z<0&&R.x===1&&(s[N]=R.x-1),O.x===0&&O.z===0&&(s[N]=z/2/Math.PI+.5)}function S(R){return Math.atan2(R.z,-R.x)}function w(R){return Math.atan2(-R.y,Math.sqrt(R.x*R.x+R.z*R.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sp(e.vertices,e.indices,e.radius,e.detail)}}class pM extends Sp{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new pM(e.radius,e.detail)}}const mw=new ue,gw=new ue,QI=new ue,vw=new zo;class I8 extends xn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),a=Math.cos(Km*t),s=e.getIndex(),o=e.getAttribute("position"),c=s?s.count:o.count,f=[0,0,0],d=["a","b","c"],p=new Array(3),v={},y=[];for(let x=0;x<c;x+=3){s?(f[0]=s.getX(x),f[1]=s.getX(x+1),f[2]=s.getX(x+2)):(f[0]=x,f[1]=x+1,f[2]=x+2);const{a:E,b:S,c:w}=vw;if(E.fromBufferAttribute(o,f[0]),S.fromBufferAttribute(o,f[1]),w.fromBufferAttribute(o,f[2]),vw.getNormal(QI),p[0]=`${Math.round(E.x*i)},${Math.round(E.y*i)},${Math.round(E.z*i)}`,p[1]=`${Math.round(S.x*i)},${Math.round(S.y*i)},${Math.round(S.z*i)}`,p[2]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let R=0;R<3;R++){const N=(R+1)%3,O=p[R],z=p[N],k=vw[d[R]],U=vw[d[N]],P=`${O}_${z}`,C=`${z}_${O}`;C in v&&v[C]?(QI.dot(v[C].normal)<=a&&(y.push(k.x,k.y,k.z),y.push(U.x,U.y,U.z)),v[C]=null):P in v||(v[P]={index0:f[R],index1:f[N],normal:QI.clone()})}}for(const x in v)if(v[x]){const{index0:E,index1:S}=v[x];mw.fromBufferAttribute(o,E),gw.fromBufferAttribute(o,S),y.push(mw.x,mw.y,mw.z),y.push(gw.x,gw.y,gw.z)}this.setAttribute("position",new qt(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let Zc=class{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){kt("Curve: .getPoint() not implemented.")}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),a=0;t.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),a+=r.distanceTo(i),t.push(a),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const r=this.getLengths();let i=0;const a=r.length;let s;t?s=t:s=e*r[a-1];let o=0,c=a-1,f;for(;o<=c;)if(i=Math.floor(o+(c-o)/2),f=r[i]-s,f<0)o=i+1;else if(f>0)c=i-1;else{c=i;break}if(i=c,r[i]===s)return i/(a-1);const d=r[i],v=r[i+1]-d,y=(s-d)/v;return(i+y)/(a-1)}getTangent(e,t){let i=e-1e-4,a=e+1e-4;i<0&&(i=0),a>1&&(a=1);const s=this.getPoint(i),o=this.getPoint(a),c=t||(s.isVector2?new lt:new ue);return c.copy(o).sub(s).normalize(),c}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t=!1){const r=new ue,i=[],a=[],s=[],o=new ue,c=new yn;for(let y=0;y<=e;y++){const x=y/e;i[y]=this.getTangentAt(x,new ue)}a[0]=new ue,s[0]=new ue;let f=Number.MAX_VALUE;const d=Math.abs(i[0].x),p=Math.abs(i[0].y),v=Math.abs(i[0].z);d<=f&&(f=d,r.set(1,0,0)),p<=f&&(f=p,r.set(0,1,0)),v<=f&&r.set(0,0,1),o.crossVectors(i[0],r).normalize(),a[0].crossVectors(i[0],o),s[0].crossVectors(i[0],a[0]);for(let y=1;y<=e;y++){if(a[y]=a[y-1].clone(),s[y]=s[y-1].clone(),o.crossVectors(i[y-1],i[y]),o.length()>Number.EPSILON){o.normalize();const x=Math.acos(mn(i[y-1].dot(i[y]),-1,1));a[y].applyMatrix4(c.makeRotationAxis(o,x))}s[y].crossVectors(i[y],a[y])}if(t===!0){let y=Math.acos(mn(a[0].dot(a[e]),-1,1));y/=e,i[0].dot(o.crossVectors(a[0],a[e]))>0&&(y=-y);for(let x=1;x<=e;x++)a[x].applyMatrix4(c.makeRotationAxis(i[x],y*x)),s[x].crossVectors(i[x],a[x])}return{tangents:i,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}};class mM extends Zc{constructor(e=0,t=0,r=1,i=1,a=0,s=Math.PI*2,o=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=o,this.aRotation=c}getPoint(e,t=new lt){const r=t,i=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(s?a=0:a=i),this.aClockwise===!0&&!s&&(a===i?a=-i:a=a-i);const o=this.aStartAngle+e*a;let c=this.aX+this.xRadius*Math.cos(o),f=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const d=Math.cos(this.aRotation),p=Math.sin(this.aRotation),v=c-this.aX,y=f-this.aY;c=v*d-y*p+this.aX,f=v*p+y*d+this.aY}return r.set(c,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class R8 extends mM{constructor(e,t,r,i,a,s){super(e,t,r,r,i,a,s),this.isArcCurve=!0,this.type="ArcCurve"}}function j3(){let n=0,e=0,t=0,r=0;function i(a,s,o,c){n=a,e=o,t=-3*a+3*s-2*o-c,r=2*a-2*s+o+c}return{initCatmullRom:function(a,s,o,c,f){i(s,o,f*(o-a),f*(c-s))},initNonuniformCatmullRom:function(a,s,o,c,f,d,p){let v=(s-a)/f-(o-a)/(f+d)+(o-s)/d,y=(o-s)/d-(c-s)/(d+p)+(c-o)/p;v*=d,y*=d,i(s,o,v,y)},calc:function(a){const s=a*a,o=s*a;return n+e*a+t*s+r*o}}}const yw=new ue,JI=new j3,eR=new j3,tR=new j3;class P8 extends Zc{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new ue){const r=t,i=this.points,a=i.length,s=(a-(this.closed?0:1))*e;let o=Math.floor(s),c=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:c===0&&o===a-1&&(o=a-2,c=1);let f,d;this.closed||o>0?f=i[(o-1)%a]:(yw.subVectors(i[0],i[1]).add(i[0]),f=yw);const p=i[o%a],v=i[(o+1)%a];if(this.closed||o+2<a?d=i[(o+2)%a]:(yw.subVectors(i[a-1],i[a-2]).add(i[a-1]),d=yw),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let x=Math.pow(f.distanceToSquared(p),y),E=Math.pow(p.distanceToSquared(v),y),S=Math.pow(v.distanceToSquared(d),y);E<1e-4&&(E=1),x<1e-4&&(x=E),S<1e-4&&(S=E),JI.initNonuniformCatmullRom(f.x,p.x,v.x,d.x,x,E,S),eR.initNonuniformCatmullRom(f.y,p.y,v.y,d.y,x,E,S),tR.initNonuniformCatmullRom(f.z,p.z,v.z,d.z,x,E,S)}else this.curveType==="catmullrom"&&(JI.initCatmullRom(f.x,p.x,v.x,d.x,this.tension),eR.initCatmullRom(f.y,p.y,v.y,d.y,this.tension),tR.initCatmullRom(f.z,p.z,v.z,d.z,this.tension));return r.set(JI.calc(c),eR.calc(c),tR.calc(c)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new ue().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function LU(n,e,t,r,i){const a=(r-e)*.5,s=(i-t)*.5,o=n*n,c=n*o;return(2*t-2*r+a+s)*c+(-3*t+3*r-2*a-s)*o+a*n+t}function RJ(n,e){const t=1-n;return t*t*e}function PJ(n,e){return 2*(1-n)*n*e}function NJ(n,e){return n*n*e}function Px(n,e,t,r){return RJ(n,e)+PJ(n,t)+NJ(n,r)}function OJ(n,e){const t=1-n;return t*t*t*e}function DJ(n,e){const t=1-n;return 3*t*t*n*e}function LJ(n,e){return 3*(1-n)*n*n*e}function kJ(n,e){return n*n*n*e}function Nx(n,e,t,r,i){return OJ(n,e)+DJ(n,t)+LJ(n,r)+kJ(n,i)}class B3 extends Zc{constructor(e=new lt,t=new lt,r=new lt,i=new lt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new lt){const r=t,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return r.set(Nx(e,i.x,a.x,s.x,o.x),Nx(e,i.y,a.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class N8 extends Zc{constructor(e=new ue,t=new ue,r=new ue,i=new ue){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new ue){const r=t,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return r.set(Nx(e,i.x,a.x,s.x,o.x),Nx(e,i.y,a.y,s.y,o.y),Nx(e,i.z,a.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class V3 extends Zc{constructor(e=new lt,t=new lt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new lt){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new lt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class O8 extends Zc{constructor(e=new ue,t=new ue){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ue){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ue){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class H3 extends Zc{constructor(e=new lt,t=new lt,r=new lt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new lt){const r=t,i=this.v0,a=this.v1,s=this.v2;return r.set(Px(e,i.x,a.x,s.x),Px(e,i.y,a.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class G3 extends Zc{constructor(e=new ue,t=new ue,r=new ue){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ue){const r=t,i=this.v0,a=this.v1,s=this.v2;return r.set(Px(e,i.x,a.x,s.x),Px(e,i.y,a.y,s.y),Px(e,i.z,a.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class q3 extends Zc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new lt){const r=t,i=this.points,a=(i.length-1)*e,s=Math.floor(a),o=a-s,c=i[s===0?s:s-1],f=i[s],d=i[s>i.length-2?i.length-1:s+1],p=i[s>i.length-3?i.length-1:s+2];return r.set(LU(o,c.x,f.x,d.x,p.x),LU(o,c.y,f.y,d.y,p.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new lt().fromArray(i))}return this}}var xA=Object.freeze({__proto__:null,ArcCurve:R8,CatmullRomCurve3:P8,CubicBezierCurve:B3,CubicBezierCurve3:N8,EllipseCurve:mM,LineCurve:V3,LineCurve3:O8,QuadraticBezierCurve:H3,QuadraticBezierCurve3:G3,SplineCurve:q3});class D8 extends Zc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new xA[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let a=0;for(;a<i.length;){if(i[a]>=r){const s=i[a]-r,o=this.curves[a],c=o.getLength(),f=c===0?0:1-s/c;return o.getPointAt(f,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,a=this.curves;i<a.length;i++){const s=a[i],o=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,c=s.getPoints(o);for(let f=0;f<c.length;f++){const d=c[f];r&&r.equals(d)||(t.push(d),r=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new xA[i.type]().fromJSON(i))}return this}}let _A=class extends D8{constructor(e){super(),this.type="Path",this.currentPoint=new lt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new V3(this.currentPoint.clone(),new lt(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const a=new H3(this.currentPoint.clone(),new lt(e,t),new lt(r,i));return this.curves.push(a),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,a,s){const o=new B3(this.currentPoint.clone(),new lt(e,t),new lt(r,i),new lt(a,s));return this.curves.push(o),this.currentPoint.set(a,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new q3(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,a,s){const o=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+o,t+c,r,i,a,s),this}absarc(e,t,r,i,a,s){return this.absellipse(e,t,r,r,i,a,s),this}ellipse(e,t,r,i,a,s,o,c){const f=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+f,t+d,r,i,a,s,o,c),this}absellipse(e,t,r,i,a,s,o,c){const f=new mM(e,t,r,i,a,s,o,c);if(this.curves.length>0){const p=f.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(f);const d=f.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class Zm extends _A{constructor(e){super(e),this.uuid=hl(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new _A().fromJSON(i))}return this}}function UJ(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let a=L8(n,0,i,t,!0);const s=[];if(!a||a.next===a.prev)return s;let o,c,f;if(r&&(a=VJ(n,e,a,t)),n.length>80*t){o=n[0],c=n[1];let d=o,p=c;for(let v=t;v<i;v+=t){const y=n[v],x=n[v+1];y<o&&(o=y),x<c&&(c=x),y>d&&(d=y),x>p&&(p=x)}f=Math.max(d-o,p-c),f=f!==0?32767/f:0}return e_(a,s,t,o,c,f,0),s}function L8(n,e,t,r,i){let a;if(i===JJ(n,e,t,r)>0)for(let s=e;s<t;s+=r)a=kU(s/r|0,n[s],n[s+1],a);else for(let s=t-r;s>=e;s-=r)a=kU(s/r|0,n[s],n[s+1],a);return a&&Vv(a,a.next)&&(n_(a),a=a.next),a}function cg(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(Vv(t,t.next)||yi(t.prev,t,t.next)===0)){if(n_(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function e_(n,e,t,r,i,a,s){if(!n)return;!s&&a&&$J(n,r,i,a);let o=n;for(;n.prev!==n.next;){const c=n.prev,f=n.next;if(a?zJ(n,r,i,a):FJ(n)){e.push(c.i,n.i,f.i),n_(n),n=f.next,o=f.next;continue}if(n=f,n===o){s?s===1?(n=jJ(cg(n),e),e_(n,e,t,r,i,a,2)):s===2&&BJ(n,e,t,r,i,a):e_(cg(n),e,t,r,i,a,1);break}}}function FJ(n){const e=n.prev,t=n,r=n.next;if(yi(e,t,r)>=0)return!1;const i=e.x,a=t.x,s=r.x,o=e.y,c=t.y,f=r.y,d=Math.min(i,a,s),p=Math.min(o,c,f),v=Math.max(i,a,s),y=Math.max(o,c,f);let x=r.next;for(;x!==e;){if(x.x>=d&&x.x<=v&&x.y>=p&&x.y<=y&&mx(i,o,a,c,s,f,x.x,x.y)&&yi(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function zJ(n,e,t,r){const i=n.prev,a=n,s=n.next;if(yi(i,a,s)>=0)return!1;const o=i.x,c=a.x,f=s.x,d=i.y,p=a.y,v=s.y,y=Math.min(o,c,f),x=Math.min(d,p,v),E=Math.max(o,c,f),S=Math.max(d,p,v),w=IN(y,x,e,t,r),R=IN(E,S,e,t,r);let N=n.prevZ,O=n.nextZ;for(;N&&N.z>=w&&O&&O.z<=R;){if(N.x>=y&&N.x<=E&&N.y>=x&&N.y<=S&&N!==i&&N!==s&&mx(o,d,c,p,f,v,N.x,N.y)&&yi(N.prev,N,N.next)>=0||(N=N.prevZ,O.x>=y&&O.x<=E&&O.y>=x&&O.y<=S&&O!==i&&O!==s&&mx(o,d,c,p,f,v,O.x,O.y)&&yi(O.prev,O,O.next)>=0))return!1;O=O.nextZ}for(;N&&N.z>=w;){if(N.x>=y&&N.x<=E&&N.y>=x&&N.y<=S&&N!==i&&N!==s&&mx(o,d,c,p,f,v,N.x,N.y)&&yi(N.prev,N,N.next)>=0)return!1;N=N.prevZ}for(;O&&O.z<=R;){if(O.x>=y&&O.x<=E&&O.y>=x&&O.y<=S&&O!==i&&O!==s&&mx(o,d,c,p,f,v,O.x,O.y)&&yi(O.prev,O,O.next)>=0)return!1;O=O.nextZ}return!0}function jJ(n,e){let t=n;do{const r=t.prev,i=t.next.next;!Vv(r,i)&&U8(r,t,t.next,i)&&t_(r,i)&&t_(i,r)&&(e.push(r.i,t.i,i.i),n_(t),n_(t.next),t=n=i),t=t.next}while(t!==n);return cg(t)}function BJ(n,e,t,r,i,a){let s=n;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&KJ(s,o)){let c=F8(s,o);s=cg(s,s.next),c=cg(c,c.next),e_(s,e,t,r,i,a,0),e_(c,e,t,r,i,a,0);return}o=o.next}s=s.next}while(s!==n)}function VJ(n,e,t,r){const i=[];for(let a=0,s=e.length;a<s;a++){const o=e[a]*r,c=a<s-1?e[a+1]*r:n.length,f=L8(n,o,c,r,!1);f===f.next&&(f.steiner=!0),i.push(YJ(f))}i.sort(HJ);for(let a=0;a<i.length;a++)t=GJ(i[a],t);return t}function HJ(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const r=(n.next.y-n.y)/(n.next.x-n.x),i=(e.next.y-e.y)/(e.next.x-e.x);t=r-i}return t}function GJ(n,e){const t=qJ(n,e);if(!t)return e;const r=F8(t,n);return cg(r,r.next),cg(t,t.next)}function qJ(n,e){let t=e;const r=n.x,i=n.y;let a=-1/0,s;if(Vv(n,t))return t;do{if(Vv(n,t.next))return t.next;if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const p=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=r&&p>a&&(a=p,s=t.x<t.next.x?t:t.next,p===r))return s}t=t.next}while(t!==e);if(!s)return null;const o=s,c=s.x,f=s.y;let d=1/0;t=s;do{if(r>=t.x&&t.x>=c&&r!==t.x&&k8(i<f?r:a,i,c,f,i<f?a:r,i,t.x,t.y)){const p=Math.abs(i-t.y)/(r-t.x);t_(t,n)&&(p<d||p===d&&(t.x>s.x||t.x===s.x&&WJ(s,t)))&&(s=t,d=p)}t=t.next}while(t!==o);return s}function WJ(n,e){return yi(n.prev,n,e.prev)<0&&yi(e.next,n,n.next)<0}function $J(n,e,t,r){let i=n;do i.z===0&&(i.z=IN(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,XJ(i)}function XJ(n){let e,t=1;do{let r=n,i;n=null;let a=null;for(e=0;r;){e++;let s=r,o=0;for(let f=0;f<t&&(o++,s=s.nextZ,!!s);f++);let c=t;for(;o>0||c>0&&s;)o!==0&&(c===0||!s||r.z<=s.z)?(i=r,r=r.nextZ,o--):(i=s,s=s.nextZ,c--),a?a.nextZ=i:n=i,i.prevZ=a,a=i;r=s}a.nextZ=null,t*=2}while(e>1);return n}function IN(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function YJ(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function k8(n,e,t,r,i,a,s,o){return(i-s)*(e-o)>=(n-s)*(a-o)&&(n-s)*(r-o)>=(t-s)*(e-o)&&(t-s)*(a-o)>=(i-s)*(r-o)}function mx(n,e,t,r,i,a,s,o){return!(n===s&&e===o)&&k8(n,e,t,r,i,a,s,o)}function KJ(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!ZJ(n,e)&&(t_(n,e)&&t_(e,n)&&QJ(n,e)&&(yi(n.prev,n,e.prev)||yi(n,e.prev,e))||Vv(n,e)&&yi(n.prev,n,n.next)>0&&yi(e.prev,e,e.next)>0)}function yi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Vv(n,e){return n.x===e.x&&n.y===e.y}function U8(n,e,t,r){const i=xw(yi(n,e,t)),a=xw(yi(n,e,r)),s=xw(yi(t,r,n)),o=xw(yi(t,r,e));return!!(i!==a&&s!==o||i===0&&bw(n,t,e)||a===0&&bw(n,r,e)||s===0&&bw(t,n,r)||o===0&&bw(t,e,r))}function bw(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function xw(n){return n>0?1:n<0?-1:0}function ZJ(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&U8(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function t_(n,e){return yi(n.prev,n,n.next)<0?yi(n,e,n.next)>=0&&yi(n,n.prev,e)>=0:yi(n,e,n.prev)<0||yi(n,n.next,e)<0}function QJ(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&i<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function F8(n,e){const t=RN(n.i,n.x,n.y),r=RN(e.i,e.x,e.y),i=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,a.next=r,r.prev=a,r}function kU(n,e,t,r){const i=RN(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function n_(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function RN(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function JJ(n,e,t,r){let i=0;for(let a=e,s=t-r;a<t;a+=r)i+=(n[s]-n[a])*(n[a+1]+n[s+1]),s=a;return i}class eee{static triangulate(e,t,r=2){return UJ(e,t,r)}}class jc{static area(e){const t=e.length;let r=0;for(let i=t-1,a=0;a<t;i=a++)r+=e[i].x*e[a].y-e[a].x*e[i].y;return r*.5}static isClockWise(e){return jc.area(e)<0}static triangulateShape(e,t){const r=[],i=[],a=[];UU(e),FU(r,e);let s=e.length;t.forEach(UU);for(let c=0;c<t.length;c++)i.push(s),s+=t[c].length,FU(r,t[c]);const o=eee.triangulate(r,i);for(let c=0;c<o.length;c+=3)a.push(o.slice(c,c+3));return a}}function UU(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function FU(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class gM extends xn{constructor(e=new Zm([new lt(.5,.5),new lt(-.5,.5),new lt(-.5,-.5),new lt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],a=[];for(let o=0,c=e.length;o<c;o++){const f=e[o];s(f)}this.setAttribute("position",new qt(i,3)),this.setAttribute("uv",new qt(a,2)),this.computeVertexNormals();function s(o){const c=[],f=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,p=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,x=t.bevelSize!==void 0?t.bevelSize:y-.1,E=t.bevelOffset!==void 0?t.bevelOffset:0,S=t.bevelSegments!==void 0?t.bevelSegments:3;const w=t.extrudePath,R=t.UVGenerator!==void 0?t.UVGenerator:tee;let N,O=!1,z,k,U,P;if(w){N=w.getSpacedPoints(d),O=!0,v=!1;const Re=w.isCatmullRomCurve3?w.closed:!1;z=w.computeFrenetFrames(d,Re),k=new ue,U=new ue,P=new ue}v||(S=0,y=0,x=0,E=0);const C=o.extractPoints(f);let L=C.shape;const j=C.holes;if(!jc.isClockWise(L)){L=L.reverse();for(let Re=0,Me=j.length;Re<Me;Re++){const Fe=j[Re];jc.isClockWise(Fe)&&(j[Re]=Fe.reverse())}}function V(Re){const Fe=10000000000000001e-36;let Ze=Re[0];for(let oe=1;oe<=Re.length;oe++){const yt=oe%Re.length,at=Re[yt],Tt=at.x-Ze.x,ct=at.y-Ze.y,ae=Tt*Tt+ct*ct,Y=Math.max(Math.abs(at.x),Math.abs(at.y),Math.abs(Ze.x),Math.abs(Ze.y)),xe=Fe*Y*Y;if(ae<=xe){Re.splice(yt,1),oe--;continue}Ze=at}}V(L),j.forEach(V);const Q=j.length,J=L;for(let Re=0;Re<Q;Re++){const Me=j[Re];L=L.concat(Me)}function W(Re,Me,Fe){return Me||tn("ExtrudeGeometry: vec does not exist"),Re.clone().addScaledVector(Me,Fe)}const $=L.length;function se(Re,Me,Fe){let Ze,oe,yt;const at=Re.x-Me.x,Tt=Re.y-Me.y,ct=Fe.x-Re.x,ae=Fe.y-Re.y,Y=at*at+Tt*Tt,xe=at*ae-Tt*ct;if(Math.abs(xe)>Number.EPSILON){const ke=Math.sqrt(Y),et=Math.sqrt(ct*ct+ae*ae),Ne=Me.x-Tt/ke,It=Me.y+at/ke,rt=Fe.x-ae/et,Pt=Fe.y+ct/et,Ot=((rt-Ne)*ae-(Pt-It)*ct)/(at*ae-Tt*ct);Ze=Ne+at*Ot-Re.x,oe=It+Tt*Ot-Re.y;const it=Ze*Ze+oe*oe;if(it<=2)return new lt(Ze,oe);yt=Math.sqrt(it/2)}else{let ke=!1;at>Number.EPSILON?ct>Number.EPSILON&&(ke=!0):at<-Number.EPSILON?ct<-Number.EPSILON&&(ke=!0):Math.sign(Tt)===Math.sign(ae)&&(ke=!0),ke?(Ze=-Tt,oe=at,yt=Math.sqrt(Y)):(Ze=at,oe=Tt,yt=Math.sqrt(Y/2))}return new lt(Ze/yt,oe/yt)}const ce=[];for(let Re=0,Me=J.length,Fe=Me-1,Ze=Re+1;Re<Me;Re++,Fe++,Ze++)Fe===Me&&(Fe=0),Ze===Me&&(Ze=0),ce[Re]=se(J[Re],J[Fe],J[Ze]);const fe=[];let Z,re=ce.concat();for(let Re=0,Me=Q;Re<Me;Re++){const Fe=j[Re];Z=[];for(let Ze=0,oe=Fe.length,yt=oe-1,at=Ze+1;Ze<oe;Ze++,yt++,at++)yt===oe&&(yt=0),at===oe&&(at=0),Z[Ze]=se(Fe[Ze],Fe[yt],Fe[at]);fe.push(Z),re=re.concat(Z)}let de;if(S===0)de=jc.triangulateShape(J,j);else{const Re=[],Me=[];for(let Fe=0;Fe<S;Fe++){const Ze=Fe/S,oe=y*Math.cos(Ze*Math.PI/2),yt=x*Math.sin(Ze*Math.PI/2)+E;for(let at=0,Tt=J.length;at<Tt;at++){const ct=W(J[at],ce[at],yt);me(ct.x,ct.y,-oe),Ze===0&&Re.push(ct)}for(let at=0,Tt=Q;at<Tt;at++){const ct=j[at];Z=fe[at];const ae=[];for(let Y=0,xe=ct.length;Y<xe;Y++){const ke=W(ct[Y],Z[Y],yt);me(ke.x,ke.y,-oe),Ze===0&&ae.push(ke)}Ze===0&&Me.push(ae)}}de=jc.triangulateShape(Re,Me)}const ve=de.length,pe=x+E;for(let Re=0;Re<$;Re++){const Me=v?W(L[Re],re[Re],pe):L[Re];O?(U.copy(z.normals[0]).multiplyScalar(Me.x),k.copy(z.binormals[0]).multiplyScalar(Me.y),P.copy(N[0]).add(U).add(k),me(P.x,P.y,P.z)):me(Me.x,Me.y,0)}for(let Re=1;Re<=d;Re++)for(let Me=0;Me<$;Me++){const Fe=v?W(L[Me],re[Me],pe):L[Me];O?(U.copy(z.normals[Re]).multiplyScalar(Fe.x),k.copy(z.binormals[Re]).multiplyScalar(Fe.y),P.copy(N[Re]).add(U).add(k),me(P.x,P.y,P.z)):me(Fe.x,Fe.y,p/d*Re)}for(let Re=S-1;Re>=0;Re--){const Me=Re/S,Fe=y*Math.cos(Me*Math.PI/2),Ze=x*Math.sin(Me*Math.PI/2)+E;for(let oe=0,yt=J.length;oe<yt;oe++){const at=W(J[oe],ce[oe],Ze);me(at.x,at.y,p+Fe)}for(let oe=0,yt=j.length;oe<yt;oe++){const at=j[oe];Z=fe[oe];for(let Tt=0,ct=at.length;Tt<ct;Tt++){const ae=W(at[Tt],Z[Tt],Ze);O?me(ae.x,ae.y+N[d-1].y,N[d-1].x+Fe):me(ae.x,ae.y,p+Fe)}}}ye(),Ee();function ye(){const Re=i.length/3;if(v){let Me=0,Fe=$*Me;for(let Ze=0;Ze<ve;Ze++){const oe=de[Ze];qe(oe[2]+Fe,oe[1]+Fe,oe[0]+Fe)}Me=d+S*2,Fe=$*Me;for(let Ze=0;Ze<ve;Ze++){const oe=de[Ze];qe(oe[0]+Fe,oe[1]+Fe,oe[2]+Fe)}}else{for(let Me=0;Me<ve;Me++){const Fe=de[Me];qe(Fe[2],Fe[1],Fe[0])}for(let Me=0;Me<ve;Me++){const Fe=de[Me];qe(Fe[0]+$*d,Fe[1]+$*d,Fe[2]+$*d)}}r.addGroup(Re,i.length/3-Re,0)}function Ee(){const Re=i.length/3;let Me=0;Xe(J,Me),Me+=J.length;for(let Fe=0,Ze=j.length;Fe<Ze;Fe++){const oe=j[Fe];Xe(oe,Me),Me+=oe.length}r.addGroup(Re,i.length/3-Re,1)}function Xe(Re,Me){let Fe=Re.length;for(;--Fe>=0;){const Ze=Fe;let oe=Fe-1;oe<0&&(oe=Re.length-1);for(let yt=0,at=d+S*2;yt<at;yt++){const Tt=$*yt,ct=$*(yt+1),ae=Me+Ze+Tt,Y=Me+oe+Tt,xe=Me+oe+ct,ke=Me+Ze+ct;mt(ae,Y,xe,ke)}}}function me(Re,Me,Fe){c.push(Re),c.push(Me),c.push(Fe)}function qe(Re,Me,Fe){Ue(Re),Ue(Me),Ue(Fe);const Ze=i.length/3,oe=R.generateTopUV(r,i,Ze-3,Ze-2,Ze-1);De(oe[0]),De(oe[1]),De(oe[2])}function mt(Re,Me,Fe,Ze){Ue(Re),Ue(Me),Ue(Ze),Ue(Me),Ue(Fe),Ue(Ze);const oe=i.length/3,yt=R.generateSideWallUV(r,i,oe-6,oe-3,oe-2,oe-1);De(yt[0]),De(yt[1]),De(yt[3]),De(yt[1]),De(yt[2]),De(yt[3])}function Ue(Re){i.push(c[Re*3+0]),i.push(c[Re*3+1]),i.push(c[Re*3+2])}function De(Re){a.push(Re.x),a.push(Re.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return nee(t,r,e)}static fromJSON(e,t){const r=[];for(let a=0,s=e.shapes.length;a<s;a++){const o=t[e.shapes[a]];r.push(o)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new xA[i.type]().fromJSON(i)),new gM(r,e.options)}}const tee={generateTopUV:function(n,e,t,r,i){const a=e[t*3],s=e[t*3+1],o=e[r*3],c=e[r*3+1],f=e[i*3],d=e[i*3+1];return[new lt(a,s),new lt(o,c),new lt(f,d)]},generateSideWallUV:function(n,e,t,r,i,a){const s=e[t*3],o=e[t*3+1],c=e[t*3+2],f=e[r*3],d=e[r*3+1],p=e[r*3+2],v=e[i*3],y=e[i*3+1],x=e[i*3+2],E=e[a*3],S=e[a*3+1],w=e[a*3+2];return Math.abs(o-d)<Math.abs(s-f)?[new lt(s,1-c),new lt(f,1-p),new lt(v,1-x),new lt(E,1-w)]:[new lt(o,1-c),new lt(d,1-p),new lt(y,1-x),new lt(S,1-w)]}};function nee(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const a=n[r];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class vM extends Sp{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new vM(e.radius,e.detail)}}class yM extends xn{constructor(e=[new lt(0,-.5),new lt(.5,0),new lt(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=mn(i,0,Math.PI*2);const a=[],s=[],o=[],c=[],f=[],d=1/t,p=new ue,v=new lt,y=new ue,x=new ue,E=new ue;let S=0,w=0;for(let R=0;R<=e.length-1;R++)switch(R){case 0:S=e[R+1].x-e[R].x,w=e[R+1].y-e[R].y,y.x=w*1,y.y=-S,y.z=w*0,E.copy(y),y.normalize(),c.push(y.x,y.y,y.z);break;case e.length-1:c.push(E.x,E.y,E.z);break;default:S=e[R+1].x-e[R].x,w=e[R+1].y-e[R].y,y.x=w*1,y.y=-S,y.z=w*0,x.copy(y),y.x+=E.x,y.y+=E.y,y.z+=E.z,y.normalize(),c.push(y.x,y.y,y.z),E.copy(x)}for(let R=0;R<=t;R++){const N=r+R*d*i,O=Math.sin(N),z=Math.cos(N);for(let k=0;k<=e.length-1;k++){p.x=e[k].x*O,p.y=e[k].y,p.z=e[k].x*z,s.push(p.x,p.y,p.z),v.x=R/t,v.y=k/(e.length-1),o.push(v.x,v.y);const U=c[3*k+0]*O,P=c[3*k+1],C=c[3*k+0]*z;f.push(U,P,C)}}for(let R=0;R<t;R++)for(let N=0;N<e.length-1;N++){const O=N+R*e.length,z=O,k=O+e.length,U=O+e.length+1,P=O+1;a.push(z,k,P),a.push(U,P,k)}this.setIndex(a),this.setAttribute("position",new qt(s,3)),this.setAttribute("uv",new qt(o,2)),this.setAttribute("normal",new qt(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yM(e.points,e.segments,e.phiStart,e.phiLength)}}class B_ extends Sp{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new B_(e.radius,e.detail)}}class ly extends xn{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const a=e/2,s=t/2,o=Math.floor(r),c=Math.floor(i),f=o+1,d=c+1,p=e/o,v=t/c,y=[],x=[],E=[],S=[];for(let w=0;w<d;w++){const R=w*v-s;for(let N=0;N<f;N++){const O=N*p-a;x.push(O,-R,0),E.push(0,0,1),S.push(N/o),S.push(1-w/c)}}for(let w=0;w<c;w++)for(let R=0;R<o;R++){const N=R+f*w,O=R+f*(w+1),z=R+1+f*(w+1),k=R+1+f*w;y.push(N,O,k),y.push(O,z,k)}this.setIndex(y),this.setAttribute("position",new qt(x,3)),this.setAttribute("normal",new qt(E,3)),this.setAttribute("uv",new qt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ly(e.width,e.height,e.widthSegments,e.heightSegments)}}class bM extends xn{constructor(e=.5,t=1,r=32,i=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:a,thetaLength:s},r=Math.max(3,r),i=Math.max(1,i);const o=[],c=[],f=[],d=[];let p=e;const v=(t-e)/i,y=new ue,x=new lt;for(let E=0;E<=i;E++){for(let S=0;S<=r;S++){const w=a+S/r*s;y.x=p*Math.cos(w),y.y=p*Math.sin(w),c.push(y.x,y.y,y.z),f.push(0,0,1),x.x=(y.x/t+1)/2,x.y=(y.y/t+1)/2,d.push(x.x,x.y)}p+=v}for(let E=0;E<i;E++){const S=E*(r+1);for(let w=0;w<r;w++){const R=w+S,N=R,O=R+r+1,z=R+r+2,k=R+1;o.push(N,O,k),o.push(O,z,k)}}this.setIndex(o),this.setAttribute("position",new qt(c,3)),this.setAttribute("normal",new qt(f,3)),this.setAttribute("uv",new qt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bM(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class xM extends xn{constructor(e=new Zm([new lt(0,.5),new lt(-.5,-.5),new lt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],a=[],s=[];let o=0,c=0;if(Array.isArray(e)===!1)f(e);else for(let d=0;d<e.length;d++)f(e[d]),this.addGroup(o,c,d),o+=c,c=0;this.setIndex(r),this.setAttribute("position",new qt(i,3)),this.setAttribute("normal",new qt(a,3)),this.setAttribute("uv",new qt(s,2));function f(d){const p=i.length/3,v=d.extractPoints(t);let y=v.shape;const x=v.holes;jc.isClockWise(y)===!1&&(y=y.reverse());for(let S=0,w=x.length;S<w;S++){const R=x[S];jc.isClockWise(R)===!0&&(x[S]=R.reverse())}const E=jc.triangulateShape(y,x);for(let S=0,w=x.length;S<w;S++){const R=x[S];y=y.concat(R)}for(let S=0,w=y.length;S<w;S++){const R=y[S];i.push(R.x,R.y,0),a.push(0,0,1),s.push(R.x,R.y)}for(let S=0,w=E.length;S<w;S++){const R=E[S],N=R[0]+p,O=R[1]+p,z=R[2]+p;r.push(N,O,z),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return ree(t,e)}static fromJSON(e,t){const r=[];for(let i=0,a=e.shapes.length;i<a;i++){const s=t[e.shapes[i]];r.push(s)}return new xM(r,e.curveSegments)}}function ree(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class V_ extends xn{constructor(e=1,t=32,r=16,i=0,a=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:a,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const c=Math.min(s+o,Math.PI);let f=0;const d=[],p=new ue,v=new ue,y=[],x=[],E=[],S=[];for(let w=0;w<=r;w++){const R=[],N=w/r;let O=0;w===0&&s===0?O=.5/t:w===r&&c===Math.PI&&(O=-.5/t);for(let z=0;z<=t;z++){const k=z/t;p.x=-e*Math.cos(i+k*a)*Math.sin(s+N*o),p.y=e*Math.cos(s+N*o),p.z=e*Math.sin(i+k*a)*Math.sin(s+N*o),x.push(p.x,p.y,p.z),v.copy(p).normalize(),E.push(v.x,v.y,v.z),S.push(k+O,1-N),R.push(f++)}d.push(R)}for(let w=0;w<r;w++)for(let R=0;R<t;R++){const N=d[w][R+1],O=d[w][R],z=d[w+1][R],k=d[w+1][R+1];(w!==0||s>0)&&y.push(N,O,k),(w!==r-1||c<Math.PI)&&y.push(O,z,k)}this.setIndex(y),this.setAttribute("position",new qt(x,3)),this.setAttribute("normal",new qt(E,3)),this.setAttribute("uv",new qt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new V_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class _M extends Sp{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new _M(e.radius,e.detail)}}class SM extends xn{constructor(e=1,t=.4,r=12,i=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:a},r=Math.floor(r),i=Math.floor(i);const s=[],o=[],c=[],f=[],d=new ue,p=new ue,v=new ue;for(let y=0;y<=r;y++)for(let x=0;x<=i;x++){const E=x/i*a,S=y/r*Math.PI*2;p.x=(e+t*Math.cos(S))*Math.cos(E),p.y=(e+t*Math.cos(S))*Math.sin(E),p.z=t*Math.sin(S),o.push(p.x,p.y,p.z),d.x=e*Math.cos(E),d.y=e*Math.sin(E),v.subVectors(p,d).normalize(),c.push(v.x,v.y,v.z),f.push(x/i),f.push(y/r)}for(let y=1;y<=r;y++)for(let x=1;x<=i;x++){const E=(i+1)*y+x-1,S=(i+1)*(y-1)+x-1,w=(i+1)*(y-1)+x,R=(i+1)*y+x;s.push(E,S,R),s.push(S,w,R)}this.setIndex(s),this.setAttribute("position",new qt(o,3)),this.setAttribute("normal",new qt(c,3)),this.setAttribute("uv",new qt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new SM(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class wM extends xn{constructor(e=1,t=.4,r=64,i=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:a,q:s},r=Math.floor(r),i=Math.floor(i);const o=[],c=[],f=[],d=[],p=new ue,v=new ue,y=new ue,x=new ue,E=new ue,S=new ue,w=new ue;for(let N=0;N<=r;++N){const O=N/r*a*Math.PI*2;R(O,a,s,e,y),R(O+.01,a,s,e,x),S.subVectors(x,y),w.addVectors(x,y),E.crossVectors(S,w),w.crossVectors(E,S),E.normalize(),w.normalize();for(let z=0;z<=i;++z){const k=z/i*Math.PI*2,U=-t*Math.cos(k),P=t*Math.sin(k);p.x=y.x+(U*w.x+P*E.x),p.y=y.y+(U*w.y+P*E.y),p.z=y.z+(U*w.z+P*E.z),c.push(p.x,p.y,p.z),v.subVectors(p,y).normalize(),f.push(v.x,v.y,v.z),d.push(N/r),d.push(z/i)}}for(let N=1;N<=r;N++)for(let O=1;O<=i;O++){const z=(i+1)*(N-1)+(O-1),k=(i+1)*N+(O-1),U=(i+1)*N+O,P=(i+1)*(N-1)+O;o.push(z,k,P),o.push(k,U,P)}this.setIndex(o),this.setAttribute("position",new qt(c,3)),this.setAttribute("normal",new qt(f,3)),this.setAttribute("uv",new qt(d,2));function R(N,O,z,k,U){const P=Math.cos(N),C=Math.sin(N),L=z/O*N,j=Math.cos(L);U.x=k*(2+j)*.5*P,U.y=k*(2+j)*C*.5,U.z=k*Math.sin(L)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wM(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class EM extends xn{constructor(e=new G3(new ue(-1,-1,0),new ue(-1,1,0),new ue(1,1,0)),t=64,r=1,i=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:a};const s=e.computeFrenetFrames(t,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new ue,c=new ue,f=new lt;let d=new ue;const p=[],v=[],y=[],x=[];E(),this.setIndex(x),this.setAttribute("position",new qt(p,3)),this.setAttribute("normal",new qt(v,3)),this.setAttribute("uv",new qt(y,2));function E(){for(let N=0;N<t;N++)S(N);S(a===!1?t:0),R(),w()}function S(N){d=e.getPointAt(N/t,d);const O=s.normals[N],z=s.binormals[N];for(let k=0;k<=i;k++){const U=k/i*Math.PI*2,P=Math.sin(U),C=-Math.cos(U);c.x=C*O.x+P*z.x,c.y=C*O.y+P*z.y,c.z=C*O.z+P*z.z,c.normalize(),v.push(c.x,c.y,c.z),o.x=d.x+r*c.x,o.y=d.y+r*c.y,o.z=d.z+r*c.z,p.push(o.x,o.y,o.z)}}function w(){for(let N=1;N<=t;N++)for(let O=1;O<=i;O++){const z=(i+1)*(N-1)+(O-1),k=(i+1)*N+(O-1),U=(i+1)*N+O,P=(i+1)*(N-1)+O;x.push(z,k,P),x.push(k,U,P)}}function R(){for(let N=0;N<=t;N++)for(let O=0;O<=i;O++)f.x=N/t,f.y=O/i,y.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new EM(new xA[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class z8 extends xn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new ue,a=new ue;if(e.index!==null){const s=e.attributes.position,o=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:o.count,materialIndex:0}]);for(let f=0,d=c.length;f<d;++f){const p=c[f],v=p.start,y=p.count;for(let x=v,E=v+y;x<E;x+=3)for(let S=0;S<3;S++){const w=o.getX(x+S),R=o.getX(x+(S+1)%3);i.fromBufferAttribute(s,w),a.fromBufferAttribute(s,R),zU(i,a,r)===!0&&(t.push(i.x,i.y,i.z),t.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let o=0,c=s.count/3;o<c;o++)for(let f=0;f<3;f++){const d=3*o+f,p=3*o+(f+1)%3;i.fromBufferAttribute(s,d),a.fromBufferAttribute(s,p),zU(i,a,r)===!0&&(t.push(i.x,i.y,i.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new qt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function zU(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var jU=Object.freeze({__proto__:null,BoxGeometry:Cg,CapsuleGeometry:dM,CircleGeometry:hM,ConeGeometry:j_,CylinderGeometry:z_,DodecahedronGeometry:pM,EdgesGeometry:I8,ExtrudeGeometry:gM,IcosahedronGeometry:vM,LatheGeometry:yM,OctahedronGeometry:B_,PlaneGeometry:ly,PolyhedronGeometry:Sp,RingGeometry:bM,ShapeGeometry:xM,SphereGeometry:V_,TetrahedronGeometry:_M,TorusGeometry:SM,TorusKnotGeometry:wM,TubeGeometry:EM,WireframeGeometry:z8});class j8 extends Fs{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Bt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class W3 extends nc{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class $3 extends Fs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Bt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xp,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gl,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class B8 extends $3{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new lt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return mn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Bt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Bt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Bt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class V8 extends Fs{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Bt(16777215),this.specular=new Bt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xp,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gl,this.combine=k_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class H8 extends Fs{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Bt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xp,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class G8 extends Fs{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xp,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class q8 extends Fs{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xp,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gl,this.combine=k_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class X3 extends Fs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=n8,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Y3 extends Fs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class W8 extends Fs{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Bt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xp,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $8 extends co{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function jm(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function X8(n){function e(i,a){return n[i]-n[a]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function PN(n,e,t){const r=n.length,i=new n.constructor(r);for(let a=0,s=0;s!==r;++a){const o=t[a]*e;for(let c=0;c!==e;++c)i[s++]=n[o+c]}return i}function K3(n,e,t,r){let i=1,a=n[0];for(;a!==void 0&&a[r]===void 0;)a=n[i++];if(a===void 0)return;let s=a[r];if(s!==void 0)if(Array.isArray(s))do s=a[r],s!==void 0&&(e.push(a.time),t.push(...s)),a=n[i++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[r],s!==void 0&&(e.push(a.time),s.toArray(t,t.length)),a=n[i++];while(a!==void 0);else do s=a[r],s!==void 0&&(e.push(a.time),t.push(s)),a=n[i++];while(a!==void 0)}function iee(n,e,t,r,i=30){const a=n.clone();a.name=e;const s=[];for(let c=0;c<a.tracks.length;++c){const f=a.tracks[c],d=f.getValueSize(),p=[],v=[];for(let y=0;y<f.times.length;++y){const x=f.times[y]*i;if(!(x<t||x>=r)){p.push(f.times[y]);for(let E=0;E<d;++E)v.push(f.values[y*d+E])}}p.length!==0&&(f.times=jm(p,f.times.constructor),f.values=jm(v,f.values.constructor),s.push(f))}a.tracks=s;let o=1/0;for(let c=0;c<a.tracks.length;++c)o>a.tracks[c].times[0]&&(o=a.tracks[c].times[0]);for(let c=0;c<a.tracks.length;++c)a.tracks[c].shift(-1*o);return a.resetDuration(),a}function aee(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,a=e/r;for(let s=0;s<i;++s){const o=t.tracks[s],c=o.ValueTypeName;if(c==="bool"||c==="string")continue;const f=n.tracks.find(function(w){return w.name===o.name&&w.ValueTypeName===c});if(f===void 0)continue;let d=0;const p=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=p/3);let v=0;const y=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=y/3);const x=o.times.length-1;let E;if(a<=o.times[0]){const w=d,R=p-d;E=o.values.slice(w,R)}else if(a>=o.times[x]){const w=x*p+d,R=w+p-d;E=o.values.slice(w,R)}else{const w=o.createInterpolant(),R=d,N=p-d;w.evaluate(a),E=w.resultBuffer.slice(R,N)}c==="quaternion"&&new Ls().fromArray(E).normalize().conjugate().toArray(E);const S=f.times.length;for(let w=0;w<S;++w){const R=w*y+v;if(c==="quaternion")Ls.multiplyQuaternionsFlat(f.values,R,E,0,f.values,R);else{const N=y-v*2;for(let O=0;O<N;++O)f.values[R+O]-=E[O]}}}return n.blendMode=I3,n}class see{static convertArray(e,t){return jm(e,t)}static isTypedArray(e){return f8(e)}static getKeyframeOrder(e){return X8(e)}static sortedArray(e,t,r){return PN(e,t,r)}static flattenJSON(e,t,r,i){K3(e,t,r,i)}static subclip(e,t,r,i,a=30){return iee(e,t,r,i,a)}static makeClipAdditive(e,t=0,r=e,i=30){return aee(e,t,r,i)}}class H_{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],a=t[r-1];e:{t:{let s;n:{r:if(!(e<i)){for(let o=r+2;;){if(i===void 0){if(e<a)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===o)break;if(a=i,i=t[++r],e<i)break t}s=t.length;break n}if(!(e>=a)){const o=t[1];e<o&&(r=2,a=o);for(let c=r-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===c)break;if(i=a,a=t[--r-1],e>=a)break t}s=r,r=0;break n}break e}for(;r<s;){const o=r+s>>>1;e<t[o]?s=o:r=o+1}if(i=t[r],a=t[r-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,a,i)}return this.interpolate_(r,a,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=e*i;for(let s=0;s!==i;++s)t[s]=r[a+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Y8 extends H_{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Fm,endingEnd:Fm}}intervalChanged_(e,t,r){const i=this.parameterPositions;let a=e-2,s=e+1,o=i[a],c=i[s];if(o===void 0)switch(this.getSettings_().endingStart){case zm:a=e,o=2*t-r;break;case Yx:a=i.length-2,o=t+i[a]-i[a+1];break;default:a=e,o=r}if(c===void 0)switch(this.getSettings_().endingEnd){case zm:s=e,c=2*r-t;break;case Yx:s=1,c=r+i[1]-i[0];break;default:s=e-1,c=t}const f=(r-t)*.5,d=this.valueSize;this._weightPrev=f/(t-o),this._weightNext=f/(c-r),this._offsetPrev=a*d,this._offsetNext=s*d}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=e*o,f=c-o,d=this._offsetPrev,p=this._offsetNext,v=this._weightPrev,y=this._weightNext,x=(r-t)/(i-t),E=x*x,S=E*x,w=-v*S+2*v*E-v*x,R=(1+v)*S+(-1.5-2*v)*E+(-.5+v)*x+1,N=(-1-y)*S+(1.5+y)*E+.5*x,O=y*S-y*E;for(let z=0;z!==o;++z)a[z]=w*s[d+z]+R*s[f+z]+N*s[c+z]+O*s[p+z];return a}}class Z3 extends H_{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=e*o,f=c-o,d=(r-t)/(i-t),p=1-d;for(let v=0;v!==o;++v)a[v]=s[f+v]*p+s[c+v]*d;return a}}class K8 extends H_{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class sc{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=jm(t,this.TimeBufferType),this.values=jm(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:jm(e.times,Array),values:jm(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new K8(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Z3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Y8(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Xx:t=this.InterpolantFactoryMethodDiscrete;break;case vA:t=this.InterpolantFactoryMethodLinear;break;case oE:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return kt("KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Xx;case this.InterpolantFactoryMethodLinear:return vA;case this.InterpolantFactoryMethodSmooth:return oE}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let a=0,s=i-1;for(;a!==i&&r[a]<e;)++a;for(;s!==-1&&r[s]>t;)--s;if(++s,a!==0||s!==i){a>=s&&(s=Math.max(s,1),a=s-1);const o=this.getValueSize();this.times=r.slice(a,s),this.values=this.values.slice(a*o,s*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(tn("KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,a=r.length;a===0&&(tn("KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==a;o++){const c=r[o];if(typeof c=="number"&&isNaN(c)){tn("KeyframeTrack: Time is not a valid number.",this,o,c),e=!1;break}if(s!==null&&s>c){tn("KeyframeTrack: Out of order keys.",this,o,c,s),e=!1;break}s=c}if(i!==void 0&&f8(i))for(let o=0,c=i.length;o!==c;++o){const f=i[o];if(isNaN(f)){tn("KeyframeTrack: Value is not a valid number.",this,o,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===oE,a=e.length-1;let s=1;for(let o=1;o<a;++o){let c=!1;const f=e[o],d=e[o+1];if(f!==d&&(o!==1||f!==e[0]))if(i)c=!0;else{const p=o*r,v=p-r,y=p+r;for(let x=0;x!==r;++x){const E=t[p+x];if(E!==t[v+x]||E!==t[y+x]){c=!0;break}}}if(c){if(o!==s){e[s]=e[o];const p=o*r,v=s*r;for(let y=0;y!==r;++y)t[v+y]=t[p+y]}++s}}if(a>0){e[s]=e[a];for(let o=a*r,c=s*r,f=0;f!==r;++f)t[c+f]=t[o+f];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}sc.prototype.ValueTypeName="";sc.prototype.TimeBufferType=Float32Array;sc.prototype.ValueBufferType=Float32Array;sc.prototype.DefaultInterpolation=vA;class Ig extends sc{constructor(e,t,r){super(e,t,r)}}Ig.prototype.ValueTypeName="bool";Ig.prototype.ValueBufferType=Array;Ig.prototype.DefaultInterpolation=Xx;Ig.prototype.InterpolantFactoryMethodLinear=void 0;Ig.prototype.InterpolantFactoryMethodSmooth=void 0;class Q3 extends sc{constructor(e,t,r,i){super(e,t,r,i)}}Q3.prototype.ValueTypeName="color";class r_ extends sc{constructor(e,t,r,i){super(e,t,r,i)}}r_.prototype.ValueTypeName="number";class Z8 extends H_{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=(r-t)/(i-t);let f=e*o;for(let d=f+o;f!==d;f+=4)Ls.slerpFlat(a,0,s,f-o,s,f,c);return a}}class G_ extends sc{constructor(e,t,r,i){super(e,t,r,i)}InterpolantFactoryMethodLinear(e){return new Z8(this.times,this.values,this.getValueSize(),e)}}G_.prototype.ValueTypeName="quaternion";G_.prototype.InterpolantFactoryMethodSmooth=void 0;class Rg extends sc{constructor(e,t,r){super(e,t,r)}}Rg.prototype.ValueTypeName="string";Rg.prototype.ValueBufferType=Array;Rg.prototype.DefaultInterpolation=Xx;Rg.prototype.InterpolantFactoryMethodLinear=void 0;Rg.prototype.InterpolantFactoryMethodSmooth=void 0;class i_ extends sc{constructor(e,t,r,i){super(e,t,r,i)}}i_.prototype.ValueTypeName="vector";class a_{constructor(e="",t=-1,r=[],i=eM){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=hl(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,o=r.length;s!==o;++s)t.push(lee(r[s]).scale(i));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a.userData=JSON.parse(e.userData||"{}"),a}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let a=0,s=r.length;a!==s;++a)t.push(sc.toJSON(r[a]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const a=t.length,s=[];for(let o=0;o<a;o++){let c=[],f=[];c.push((o+a-1)%a,o,(o+1)%a),f.push(0,1,0);const d=X8(c);c=PN(c,1,d),f=PN(f,1,d),!i&&c[0]===0&&(c.push(a),f.push(f[0])),s.push(new r_(".morphTargetInfluences["+t[o].name+"]",c,f).scale(1/r))}return new this(e,-1,s)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},a=/^([\w-]*?)([\d]+)$/;for(let o=0,c=e.length;o<c;o++){const f=e[o],d=f.name.match(a);if(d&&d.length>1){const p=d[1];let v=i[p];v||(i[p]=v=[]),v.push(f)}}const s=[];for(const o in i)s.push(this.CreateFromMorphTargetSequence(o,i[o],t,r));return s}static parseAnimation(e,t){if(kt("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return tn("AnimationClip: No animation in JSONLoader data."),null;const r=function(p,v,y,x,E){if(y.length!==0){const S=[],w=[];K3(y,S,w,x),S.length!==0&&E.push(new p(v,S,w))}},i=[],a=e.name||"default",s=e.fps||30,o=e.blendMode;let c=e.length||-1;const f=e.hierarchy||[];for(let p=0;p<f.length;p++){const v=f[p].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const y={};let x;for(x=0;x<v.length;x++)if(v[x].morphTargets)for(let E=0;E<v[x].morphTargets.length;E++)y[v[x].morphTargets[E]]=-1;for(const E in y){const S=[],w=[];for(let R=0;R!==v[x].morphTargets.length;++R){const N=v[x];S.push(N.time),w.push(N.morphTarget===E?1:0)}i.push(new r_(".morphTargetInfluence["+E+"]",S,w))}c=y.length*s}else{const y=".bones["+t[p].name+"]";r(i_,y+".position",v,"pos",i),r(G_,y+".quaternion",v,"rot",i),r(i_,y+".scale",v,"scl",i)}}return i.length===0?null:new this(a,c,i,o)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const a=this.tracks[r];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let r=0;r<this.tracks.length;r++)e.push(this.tracks[r].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function oee(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return r_;case"vector":case"vector2":case"vector3":case"vector4":return i_;case"color":return Q3;case"quaternion":return G_;case"bool":case"boolean":return Ig;case"string":return Rg}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function lee(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=oee(n.type);if(n.times===void 0){const t=[],r=[];K3(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const qu={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class J3{constructor(e,t,r){const i=this;let a=!1,s=0,o=0,c;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this._abortController=null,this.itemStart=function(d){o++,a===!1&&i.onStart!==void 0&&i.onStart(d,s,o),a=!0},this.itemEnd=function(d){s++,i.onProgress!==void 0&&i.onProgress(d,s,o),s===o&&(a=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(d){i.onError!==void 0&&i.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,p){return f.push(d,p),this},this.removeHandler=function(d){const p=f.indexOf(d);return p!==-1&&f.splice(p,2),this},this.getHandler=function(d){for(let p=0,v=f.length;p<v;p+=2){const y=f[p],x=f[p+1];if(y.global&&(y.lastIndex=0),y.test(d))return x}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const Q8=new J3;class uo{constructor(e){this.manager=e!==void 0?e:Q8,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,a){r.load(e,i,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}uo.DEFAULT_MATERIAL_NAME="__DEFAULT";const ed={};class cee extends Error{constructor(e,t){super(e),this.response=t}}class sf extends uo{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=qu.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(ed[e]!==void 0){ed[e].push({onLoad:t,onProgress:r,onError:i});return}ed[e]=[],ed[e].push({onLoad:t,onProgress:r,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),o=this.mimeType,c=this.responseType;fetch(s).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&kt("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const d=ed[e],p=f.body.getReader(),v=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),y=v?parseInt(v):0,x=y!==0;let E=0;const S=new ReadableStream({start(w){R();function R(){p.read().then(({done:N,value:O})=>{if(N)w.close();else{E+=O.byteLength;const z=new ProgressEvent("progress",{lengthComputable:x,loaded:E,total:y});for(let k=0,U=d.length;k<U;k++){const P=d[k];P.onProgress&&P.onProgress(z)}w.enqueue(O),R()}},N=>{w.error(N)})}}});return new Response(S)}else throw new cee(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(c){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(d=>new DOMParser().parseFromString(d,o));case"json":return f.json();default:if(o==="")return f.text();{const p=/charset="?([^;"\s]*)"?/i.exec(o),v=p&&p[1]?p[1].toLowerCase():void 0,y=new TextDecoder(v);return f.arrayBuffer().then(x=>y.decode(x))}}}).then(f=>{qu.add(`file:${e}`,f);const d=ed[e];delete ed[e];for(let p=0,v=d.length;p<v;p++){const y=d[p];y.onLoad&&y.onLoad(f)}}).catch(f=>{const d=ed[e];if(d===void 0)throw this.manager.itemError(e),f;delete ed[e];for(let p=0,v=d.length;p<v;p++){const y=d[p];y.onError&&y.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class uee extends uo{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new sf(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(c){i?i(c):tn(c),a.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=a_.parse(e[r]);t.push(i)}return t}}class fee extends uo{constructor(e){super(e)}load(e,t,r,i){const a=this,s=[],o=new fM,c=new sf(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(a.withCredentials);let f=0;function d(p){c.load(e[p],function(v){const y=a.parse(v,!0);s[p]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},f+=1,f===6&&(y.mipmapCount===1&&(o.minFilter=ti),o.image=s,o.format=y.format,o.needsUpdate=!0,t&&t(o))},r,i)}if(Array.isArray(e))for(let p=0,v=e.length;p<v;++p)d(p);else c.load(e,function(p){const v=a.parse(p,!0);if(v.isCubemap){const y=v.mipmaps.length/v.mipmapCount;for(let x=0;x<y;x++){s[x]={mipmaps:[]};for(let E=0;E<v.mipmapCount;E++)s[x].mipmaps.push(v.mipmaps[x*v.mipmapCount+E]),s[x].format=v.format,s[x].width=v.width,s[x].height=v.height}o.image=s}else o.image.width=v.width,o.image.height=v.height,o.mipmaps=v.mipmaps;v.mipmapCount===1&&(o.minFilter=ti),o.format=v.format,o.needsUpdate=!0,t&&t(o)},r,i);return o}}const Y0=new WeakMap;class s_ extends uo{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=qu.get(`image:${e}`);if(s!==void 0){if(s.complete===!0)a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0);else{let p=Y0.get(s);p===void 0&&(p=[],Y0.set(s,p)),p.push({onLoad:t,onError:i})}return s}const o=Qx("img");function c(){d(),t&&t(this);const p=Y0.get(this)||[];for(let v=0;v<p.length;v++){const y=p[v];y.onLoad&&y.onLoad(this)}Y0.delete(this),a.manager.itemEnd(e)}function f(p){d(),i&&i(p),qu.remove(`image:${e}`);const v=Y0.get(this)||[];for(let y=0;y<v.length;y++){const x=v[y];x.onError&&x.onError(p)}Y0.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function d(){o.removeEventListener("load",c,!1),o.removeEventListener("error",f,!1)}return o.addEventListener("load",c,!1),o.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),qu.add(`image:${e}`,o),a.manager.itemStart(e),o.src=e,o}}class dee extends uo{constructor(e){super(e)}load(e,t,r,i){const a=new F_;a.colorSpace=is;const s=new s_(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function c(f){s.load(e[f],function(d){a.images[f]=d,o++,o===6&&(a.needsUpdate=!0,t&&t(a))},void 0,i)}for(let f=0;f<e.length;++f)c(f);return a}}class hee extends uo{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new Vc,o=new sf(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,function(c){let f;try{f=a.parse(c)}catch(d){if(i!==void 0)i(d);else{d(d);return}}f.image!==void 0?s.image=f.image:f.data!==void 0&&(s.image.width=f.width,s.image.height=f.height,s.image.data=f.data),s.wrapS=f.wrapS!==void 0?f.wrapS:Bo,s.wrapT=f.wrapT!==void 0?f.wrapT:Bo,s.magFilter=f.magFilter!==void 0?f.magFilter:ti,s.minFilter=f.minFilter!==void 0?f.minFilter:ti,s.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(s.colorSpace=f.colorSpace),f.flipY!==void 0&&(s.flipY=f.flipY),f.format!==void 0&&(s.format=f.format),f.type!==void 0&&(s.type=f.type),f.mipmaps!==void 0&&(s.mipmaps=f.mipmaps,s.minFilter=Gu),f.mipmapCount===1&&(s.minFilter=ti),f.generateMipmaps!==void 0&&(s.generateMipmaps=f.generateMipmaps),s.needsUpdate=!0,t&&t(s,f)},r,i),s}}class pee extends uo{constructor(e){super(e)}load(e,t,r,i){const a=new Ci,s=new s_(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){a.image=o,a.needsUpdate=!0,t!==void 0&&t(a)},r,i),a}}class wp extends cr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Bt(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}}class J8 extends wp{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(cr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Bt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}toJSON(e){const t=super.toJSON(e);return t.object.groundColor=this.groundColor.getHex(),t}}const nR=new yn,BU=new ue,VU=new ue;class eD{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new lt(512,512),this.mapType=no,this.map=null,this.mapPass=null,this.matrix=new yn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new oy,this._frameExtents=new lt(1,1),this._viewportCount=1,this._viewports=[new zr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;BU.setFromMatrixPosition(e.matrixWorld),t.position.copy(BU),VU.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(VU),t.updateMatrixWorld(),nR.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nR,t.coordinateSystem,t.reversedDepth),t.reversedDepth?r.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(nR)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class mee extends eD{constructor(){super(new ji(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,r=Uv*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||t.far;(r!==t.fov||i!==t.aspect||a!==t.far)&&(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class e9 extends wp{constructor(e,t,r=0,i=Math.PI/3,a=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(cr.DEFAULT_UP),this.updateMatrix(),this.target=new cr,this.distance=r,this.angle=i,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new mee}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.angle=this.angle,t.object.decay=this.decay,t.object.penumbra=this.penumbra,t.object.target=this.target.uuid,this.map&&this.map.isTexture&&(t.object.map=this.map.toJSON(e).uuid),t.object.shadow=this.shadow.toJSON(),t}}class gee extends eD{constructor(){super(new ji(90,1,.5,500)),this.isPointLightShadow=!0}}class t9 extends wp{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new gee}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.decay=this.decay,t.object.shadow=this.shadow.toJSON(),t}}class hd extends aM{constructor(e=-1,t=1,r=1,i=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=r-e,s=r+e,o=i+t,c=i-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=f*this.view.offsetX,s=a+f*this.view.width,o-=d*this.view.offsetY,c=o-d*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,c,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class vee extends eD{constructor(){super(new hd(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class n9 extends wp{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(cr.DEFAULT_UP),this.updateMatrix(),this.target=new cr,this.shadow=new vee}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}}class r9 extends wp{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class i9 extends wp{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class tD{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ue)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*i),t.addScaledVector(s[2],.488603*a),t.addScaledVector(s[3],.488603*r),t.addScaledVector(s[4],1.092548*(r*i)),t.addScaledVector(s[5],1.092548*(i*a)),t.addScaledVector(s[6],.315392*(3*a*a-1)),t.addScaledVector(s[7],1.092548*(r*a)),t.addScaledVector(s[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*i),t.addScaledVector(s[2],2*.511664*a),t.addScaledVector(s[3],2*.511664*r),t.addScaledVector(s[4],2*.429043*r*i),t.addScaledVector(s[5],2*.429043*i*a),t.addScaledVector(s[6],.743125*a*a-.247708),t.addScaledVector(s[7],2*.429043*r*a),t.addScaledVector(s[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,a=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*a,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*r*a,t[8]=.546274*(r*r-i*i)}}class a9 extends wp{constructor(e=new tD,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class AM extends uo{constructor(e){super(e),this.textures={}}load(e,t,r,i){const a=this,s=new sf(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(c){i?i(c):tn(c),a.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(a){return t[a]===void 0&&kt("MaterialLoader: Undefined texture",a),t[a]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Bt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(i.allowOverride=e.allowOverride),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(i.uniforms[a]={},s.type){case"t":i.uniforms[a].value=r(s.value);break;case"c":i.uniforms[a].value=new Bt().setHex(s.value);break;case"v2":i.uniforms[a].value=new lt().fromArray(s.value);break;case"v3":i.uniforms[a].value=new ue().fromArray(s.value);break;case"v4":i.uniforms[a].value=new zr().fromArray(s.value);break;case"m3":i.uniforms[a].value=new Rn().fromArray(s.value);break;case"m4":i.uniforms[a].value=new yn().fromArray(s.value);break;default:i.uniforms[a].value=s.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)i.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),i.normalScale=new lt().fromArray(a)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new lt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return AM.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:j8,SpriteMaterial:k3,RawShaderMaterial:W3,ShaderMaterial:nc,PointsMaterial:F3,MeshPhysicalMaterial:B8,MeshStandardMaterial:$3,MeshPhongMaterial:V8,MeshToonMaterial:H8,MeshNormalMaterial:G8,MeshLambertMaterial:q8,MeshDepthMaterial:X3,MeshDistanceMaterial:Y3,MeshBasicMaterial:_p,MeshMatcapMaterial:W8,LineDashedMaterial:$8,LineBasicMaterial:co,Material:Fs};return new t[e]}}class NN{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class s9 extends xn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class o9 extends uo{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new sf(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(c){i?i(c):tn(c),a.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(y,x){if(t[x]!==void 0)return t[x];const S=y.interleavedBuffers[x],w=a(y,S.buffer),R=vv(S.type,w),N=new lM(R,S.stride);return N.uuid=S.uuid,t[x]=N,N}function a(y,x){if(r[x]!==void 0)return r[x];const S=y.arrayBuffers[x],w=new Uint32Array(S).buffer;return r[x]=w,w}const s=e.isInstancedBufferGeometry?new s9:new xn,o=e.data.index;if(o!==void 0){const y=vv(o.type,o.array);s.setIndex(new yr(y,1))}const c=e.data.attributes;for(const y in c){const x=c[y];let E;if(x.isInterleavedBufferAttribute){const S=i(e.data,x.data);E=new lg(S,x.itemSize,x.offset,x.normalized)}else{const S=vv(x.type,x.array),w=x.isInstancedBufferAttribute?jv:yr;E=new w(S,x.itemSize,x.normalized)}x.name!==void 0&&(E.name=x.name),x.usage!==void 0&&E.setUsage(x.usage),s.setAttribute(y,E)}const f=e.data.morphAttributes;if(f)for(const y in f){const x=f[y],E=[];for(let S=0,w=x.length;S<w;S++){const R=x[S];let N;if(R.isInterleavedBufferAttribute){const O=i(e.data,R.data);N=new lg(O,R.itemSize,R.offset,R.normalized)}else{const O=vv(R.type,R.array);N=new yr(O,R.itemSize,R.normalized)}R.name!==void 0&&(N.name=R.name),E.push(N)}s.morphAttributes[y]=E}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let y=0,x=p.length;y!==x;++y){const E=p[y];s.addGroup(E.start,E.count,E.materialIndex)}const v=e.data.boundingSphere;return v!==void 0&&(s.boundingSphere=new Oa().fromJSON(v)),e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class yee extends uo{constructor(e){super(e)}load(e,t,r,i){const a=this,s=this.path===""?NN.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new sf(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){let f=null;try{f=JSON.parse(c)}catch(p){i!==void 0&&i(p),p("ObjectLoader: Can't parse "+e+".",p.message);return}const d=f.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),tn("ObjectLoader: Can't load "+e);return}a.parse(f,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?NN.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const a=new sf(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,t),o=JSON.parse(s),c=o.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(o)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,i),s=this.parseImages(e.images,function(){t!==void 0&&t(f)}),o=this.parseTextures(e.textures,s),c=this.parseMaterials(e.materials,o),f=this.parseObject(e.object,a,c,o,r),d=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,d),this.bindLightTargets(f),t!==void 0){let p=!1;for(const v in s)if(s[v].data instanceof HTMLImageElement){p=!0;break}p===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),c=this.parseObject(e.object,i,o,s,t),f=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,f),this.bindLightTargets(c),c}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const a=new Zm().fromJSON(e[r]);t[a.uuid]=a}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(a){a.isBone&&(i[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=new cM().fromJSON(e[a],i);r[o.uuid]=o}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new o9;for(let a=0,s=e.length;a<s;a++){let o;const c=e[a];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(c);break;default:c.type in jU?o=jU[c.type].fromJSON(c,t):kt(`ObjectLoader: Unsupported geometry type "${c.type}"`)}o.uuid=c.uuid,c.name!==void 0&&(o.name=c.name),c.userData!==void 0&&(o.userData=c.userData),r[c.uuid]=o}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const a=new AM;a.setTextures(t);for(let s=0,o=e.length;s<o;s++){const c=e[s];r[c.uuid]===void 0&&(r[c.uuid]=a.parse(c)),i[c.uuid]=r[c.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],a=a_.parse(i);t[a.uuid]=a}return t}parseImages(e,t){const r=this,i={};let a;function s(c){return r.manager.itemStart(c),a.load(c,function(){r.manager.itemEnd(c)},void 0,function(){r.manager.itemError(c),r.manager.itemEnd(c)})}function o(c){if(typeof c=="string"){const f=c,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:r.resourcePath+f;return s(d)}else return c.data?{data:vv(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new J3(t);a=new s_(c),a.setCrossOrigin(this.crossOrigin);for(let f=0,d=e.length;f<d;f++){const p=e[f],v=p.url;if(Array.isArray(v)){const y=[];for(let x=0,E=v.length;x<E;x++){const S=v[x],w=o(S);w!==null&&(w instanceof HTMLImageElement?y.push(w):y.push(new Vc(w.data,w.width,w.height)))}i[p.uuid]=new Yh(y)}else{const y=o(p.url);i[p.uuid]=new Yh(y)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function a(s){if(typeof s=="string"){const o=s,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await i.loadAsync(c)}else return s.data?{data:vv(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){i=new s_(this.manager),i.setCrossOrigin(this.crossOrigin);for(let s=0,o=e.length;s<o;s++){const c=e[s],f=c.url;if(Array.isArray(f)){const d=[];for(let p=0,v=f.length;p<v;p++){const y=f[p],x=await a(y);x!==null&&(x instanceof HTMLImageElement?d.push(x):d.push(new Vc(x.data,x.width,x.height)))}r[c.uuid]=new Yh(d)}else{const d=await a(c.url);r[c.uuid]=new Yh(d)}}}return r}parseTextures(e,t){function r(a,s){return typeof a=="number"?a:(kt("ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const i={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=e[a];o.image===void 0&&kt('ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&kt("ObjectLoader: Undefined image",o.image);const c=t[o.image],f=c.data;let d;Array.isArray(f)?(d=new F_,f.length===6&&(d.needsUpdate=!0)):(f&&f.data?d=new Vc:d=new Ci,f&&(d.needsUpdate=!0)),d.source=c,d.uuid=o.uuid,o.name!==void 0&&(d.name=o.name),o.mapping!==void 0&&(d.mapping=r(o.mapping,bee)),o.channel!==void 0&&(d.channel=o.channel),o.offset!==void 0&&d.offset.fromArray(o.offset),o.repeat!==void 0&&d.repeat.fromArray(o.repeat),o.center!==void 0&&d.center.fromArray(o.center),o.rotation!==void 0&&(d.rotation=o.rotation),o.wrap!==void 0&&(d.wrapS=r(o.wrap[0],HU),d.wrapT=r(o.wrap[1],HU)),o.format!==void 0&&(d.format=o.format),o.internalFormat!==void 0&&(d.internalFormat=o.internalFormat),o.type!==void 0&&(d.type=o.type),o.colorSpace!==void 0&&(d.colorSpace=o.colorSpace),o.minFilter!==void 0&&(d.minFilter=r(o.minFilter,GU)),o.magFilter!==void 0&&(d.magFilter=r(o.magFilter,GU)),o.anisotropy!==void 0&&(d.anisotropy=o.anisotropy),o.flipY!==void 0&&(d.flipY=o.flipY),o.generateMipmaps!==void 0&&(d.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(d.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(d.compareFunction=o.compareFunction),o.userData!==void 0&&(d.userData=o.userData),i[o.uuid]=d}return i}parseObject(e,t,r,i,a){let s;function o(v){return t[v]===void 0&&kt("ObjectLoader: Undefined geometry",v),t[v]}function c(v){if(v!==void 0){if(Array.isArray(v)){const y=[];for(let x=0,E=v.length;x<E;x++){const S=v[x];r[S]===void 0&&kt("ObjectLoader: Undefined material",S),y.push(r[S])}return y}return r[v]===void 0&&kt("ObjectLoader: Undefined material",v),r[v]}}function f(v){return i[v]===void 0&&kt("ObjectLoader: Undefined texture",v),i[v]}let d,p;switch(e.type){case"Scene":s=new L3,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new Bt(e.background):s.background=f(e.background)),e.environment!==void 0&&(s.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new oM(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new sM(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new ji(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new hd(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new r9(e.color,e.intensity);break;case"DirectionalLight":s=new n9(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new t9(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new i9(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new e9(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new J8(e.color,e.groundColor,e.intensity);break;case"LightProbe":const v=new tD().fromArray(e.sh);s=new a9(v,e.intensity);break;case"SkinnedMesh":d=o(e.geometry),p=c(e.material),s=new S8(d,p),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":d=o(e.geometry),p=c(e.material),s=new sa(d,p);break;case"InstancedMesh":d=o(e.geometry),p=c(e.material);const y=e.count,x=e.instanceMatrix,E=e.instanceColor;s=new w8(d,p,y),s.instanceMatrix=new jv(new Float32Array(x.array),16),E!==void 0&&(s.instanceColor=new jv(new Float32Array(E.array),E.itemSize));break;case"BatchedMesh":d=o(e.geometry),p=c(e.material),s=new E8(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,p),s.geometry=d,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._geometryInfo=e.geometryInfo.map(S=>{let w=null,R=null;return S.boundingBox!==void 0&&(w=new os().fromJSON(S.boundingBox)),S.boundingSphere!==void 0&&(R=new Oa().fromJSON(S.boundingSphere)),{...S,boundingBox:w,boundingSphere:R}}),s._instanceInfo=e.instanceInfo,s._availableInstanceIds=e._availableInstanceIds,s._availableGeometryIds=e._availableGeometryIds,s._nextIndexStart=e.nextIndexStart,s._nextVertexStart=e.nextVertexStart,s._geometryCount=e.geometryCount,s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._matricesTexture=f(e.matricesTexture.uuid),s._indirectTexture=f(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=f(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(s.boundingSphere=new Oa().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(s.boundingBox=new os().fromJSON(e.boundingBox));break;case"LOD":s=new _8;break;case"Line":s=new cp(o(e.geometry),c(e.material));break;case"LineLoop":s=new A8(o(e.geometry),c(e.material));break;case"LineSegments":s=new mf(o(e.geometry),c(e.material));break;case"PointCloud":case"Points":s=new T8(o(e.geometry),c(e.material));break;case"Sprite":s=new x8(c(e.material));break;case"Group":s=new yv;break;case"Bone":s=new U3;break;default:s=new cr}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(s.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let y=0;y<v.length;y++)s.add(this.parseObject(v[y],t,r,i,a))}if(e.animations!==void 0){const v=e.animations;for(let y=0;y<v.length;y++){const x=v[y];s.animations.push(a[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const v=e.levels;for(let y=0;y<v.length;y++){const x=v[y],E=s.getObjectByProperty("uuid",x.object);E!==void 0&&s.addLevel(E,x.distance,x.hysteresis)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?kt("ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const r=t.target,i=e.getObjectByProperty("uuid",r);i!==void 0?t.target=i:t.target=new cr}})}}const bee={UVMapping:$T,CubeReflectionMapping:nf,CubeRefractionMapping:sp,EquirectangularReflectionMapping:Gx,EquirectangularRefractionMapping:qx,CubeUVReflectionMapping:sy},HU={RepeatWrapping:Wx,ClampToEdgeWrapping:Bo,MirroredRepeatWrapping:$x},GU={NearestFilter:Bi,NearestMipmapNearestFilter:S3,NearestMipmapLinearFilter:gv,LinearFilter:ti,LinearMipmapNearestFilter:Ax,LinearMipmapLinearFilter:Gu},rR=new WeakMap;class xee extends uo{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&kt("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&kt("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=qu.get(`image-bitmap:${e}`);if(s!==void 0){if(a.manager.itemStart(e),s.then){s.then(f=>{if(rR.has(s)===!0)i&&i(rR.get(s)),a.manager.itemError(e),a.manager.itemEnd(e);else return t&&t(f),a.manager.itemEnd(e),f});return}return setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,o.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const c=fetch(e,o).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(f){return qu.add(`image-bitmap:${e}`,f),t&&t(f),a.manager.itemEnd(e),f}).catch(function(f){i&&i(f),rR.set(c,f),qu.remove(`image-bitmap:${e}`),a.manager.itemError(e),a.manager.itemEnd(e)});qu.add(`image-bitmap:${e}`,c),a.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let _w;class nD{static getContext(){return _w===void 0&&(_w=new(window.AudioContext||window.webkitAudioContext)),_w}static setContext(e){_w=e}}class _ee extends uo{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new sf(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(c){try{const f=c.slice(0);nD.getContext().decodeAudioData(f,function(p){t(p)}).catch(o)}catch(f){o(f)}},r,i);function o(c){i?i(c):tn(c),a.manager.itemError(e)}}}const qU=new yn,WU=new yn,vm=new yn;class See{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ji,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ji,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,vm.copy(e.projectionMatrix);const i=t.eyeSep/2,a=i*t.near/t.focus,s=t.near*Math.tan(Km*t.fov*.5)/t.zoom;let o,c;WU.elements[12]=-i,qU.elements[12]=i,o=-s*t.aspect+a,c=s*t.aspect+a,vm.elements[0]=2*t.near/(c-o),vm.elements[8]=(c+o)/(c-o),this.cameraL.projectionMatrix.copy(vm),o=-s*t.aspect-a,c=s*t.aspect-a,vm.elements[0]=2*t.near/(c-o),vm.elements[8]=(c+o)/(c-o),this.cameraR.projectionMatrix.copy(vm)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(WU),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(qU)}}class l9 extends ji{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}let rD=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};const ym=new ue,iR=new Ls,wee=new ue,bm=new ue,xm=new ue;class Eee extends cr{constructor(){super(),this.type="AudioListener",this.context=nD.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new rD}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ym,iR,wee),bm.set(0,0,-1).applyQuaternion(iR),xm.set(0,1,0).applyQuaternion(iR),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ym.x,r),t.positionY.linearRampToValueAtTime(ym.y,r),t.positionZ.linearRampToValueAtTime(ym.z,r),t.forwardX.linearRampToValueAtTime(bm.x,r),t.forwardY.linearRampToValueAtTime(bm.y,r),t.forwardZ.linearRampToValueAtTime(bm.z,r),t.upX.linearRampToValueAtTime(xm.x,r),t.upY.linearRampToValueAtTime(xm.y,r),t.upZ.linearRampToValueAtTime(xm.z,r)}else t.setPosition(ym.x,ym.y,ym.z),t.setOrientation(bm.x,bm.y,bm.z,xm.x,xm.y,xm.z)}}class c9 extends cr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){kt("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){kt("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){kt("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){kt("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){kt("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(kt("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){kt("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(kt("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const _m=new ue,$U=new Ls,Aee=new ue,Sm=new ue;class Tee extends c9{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_m,$U,Aee),Sm.set(0,0,1).applyQuaternion($U);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(_m.x,r),t.positionY.linearRampToValueAtTime(_m.y,r),t.positionZ.linearRampToValueAtTime(_m.z,r),t.orientationX.linearRampToValueAtTime(Sm.x,r),t.orientationY.linearRampToValueAtTime(Sm.y,r),t.orientationZ.linearRampToValueAtTime(Sm.z,r)}else t.setPosition(_m.x,_m.y,_m.z),t.setOrientation(Sm.x,Sm.y,Sm.z)}}class Mee{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class u9{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,a,s;switch(t){case"quaternion":i=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,a=e*i+i;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==i;++o)r[a+o]=r[o];s=t}else{s+=t;const o=t/s;this._mixBufferRegion(r,a,0,o,i)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const c=t*this._origIndex;this._mixBufferRegion(r,i,c,1-a,t)}s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let c=t,f=t+t;c!==f;++c)if(r[c]!==r[c+t]){o.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let a=r,s=i;a!==s;++a)t[a]=t[i+a%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,a){if(i>=.5)for(let s=0;s!==a;++s)e[t+s]=e[r+s]}_slerp(e,t,r,i){Ls.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,a){const s=this._workIndex*a;Ls.multiplyQuaternionsFlat(e,s,e,t,e,r),Ls.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,r,i,a){const s=1-i;for(let o=0;o!==a;++o){const c=t+o;e[c]=e[c]*s+e[r+o]*i}}_lerpAdditive(e,t,r,i,a){for(let s=0;s!==a;++s){const o=t+s;e[o]=e[o]+e[r+s]*i}}}const iD="\\[\\]\\.:\\/",Cee=new RegExp("["+iD+"]","g"),aD="[^"+iD+"]",Iee="[^"+iD.replace("\\.","")+"]",Ree=/((?:WC+[\/:])*)/.source.replace("WC",aD),Pee=/(WCOD+)?/.source.replace("WCOD",Iee),Nee=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",aD),Oee=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",aD),Dee=new RegExp("^"+Ree+Pee+Nee+Oee+"$"),Lee=["material","materials","bones","map"];class kee{constructor(e,t,r){const i=r||lr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=r.length;i!==a;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class lr{constructor(e,t,r){this.path=t,this.parsedPath=r||lr.parseTrackName(t),this.node=lr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new lr.Composite(e,t,r):new lr(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Cee,"")}static parseTrackName(e){const t=Dee.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const a=r.nodeName.substring(i+1);Lee.indexOf(a)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=a)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(a){for(let s=0;s<a.length;s++){const o=a[s];if(o.name===t||o.uuid===t)return o;const c=r(o.children);if(c)return c}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let a=t.propertyIndex;if(e||(e=lr.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){kt("PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let f=t.objectIndex;switch(r){case"materials":if(!e.material){tn("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){tn("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){tn("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===f){f=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){tn("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){tn("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){tn("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(f!==void 0){if(e[f]===void 0){tn("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const s=e[i];if(s===void 0){const f=t.nodeName;tn("PropertyBinding: Trying to update property for track: "+f+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(a!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){tn("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){tn("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}lr.Composite=kee;lr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};lr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};lr.prototype.GetterByBindingType=[lr.prototype._getValue_direct,lr.prototype._getValue_array,lr.prototype._getValue_arrayElement,lr.prototype._getValue_toArray];lr.prototype.SetterByBindingTypeAndVersioning=[[lr.prototype._setValue_direct,lr.prototype._setValue_direct_setNeedsUpdate,lr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[lr.prototype._setValue_array,lr.prototype._setValue_array_setNeedsUpdate,lr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[lr.prototype._setValue_arrayElement,lr.prototype._setValue_arrayElement_setNeedsUpdate,lr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[lr.prototype._setValue_fromArray,lr.prototype._setValue_fromArray_setNeedsUpdate,lr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Uee{constructor(){this.isAnimationObjectGroup=!0,this.uuid=hl(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,a=this._bindings,s=a.length;let o,c=e.length,f=this.nCachedObjects_;for(let d=0,p=arguments.length;d!==p;++d){const v=arguments[d],y=v.uuid;let x=t[y];if(x===void 0){x=c++,t[y]=x,e.push(v);for(let E=0,S=s;E!==S;++E)a[E].push(new lr(v,r[E],i[E]))}else if(x<f){o=e[x];const E=--f,S=e[E];t[S.uuid]=x,e[x]=S,t[y]=E,e[E]=v;for(let w=0,R=s;w!==R;++w){const N=a[w],O=N[E];let z=N[x];N[x]=O,z===void 0&&(z=new lr(v,r[w],i[w])),N[E]=z}}else e[x]!==o&&tn("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let a=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const c=arguments[s],f=c.uuid,d=t[f];if(d!==void 0&&d>=a){const p=a++,v=e[p];t[v.uuid]=d,e[d]=v,t[f]=p,e[p]=c;for(let y=0,x=i;y!==x;++y){const E=r[y],S=E[p],w=E[d];E[d]=S,E[p]=w}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let a=this.nCachedObjects_,s=e.length;for(let o=0,c=arguments.length;o!==c;++o){const f=arguments[o],d=f.uuid,p=t[d];if(p!==void 0)if(delete t[d],p<a){const v=--a,y=e[v],x=--s,E=e[x];t[y.uuid]=p,e[p]=y,t[E.uuid]=v,e[v]=E,e.pop();for(let S=0,w=i;S!==w;++S){const R=r[S],N=R[v],O=R[x];R[p]=N,R[v]=O,R.pop()}}else{const v=--s,y=e[v];v>0&&(t[y.uuid]=p),e[p]=y,e.pop();for(let x=0,E=i;x!==E;++x){const S=r[x];S[p]=S[v],S.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const a=this._bindings;if(i!==void 0)return a[i];const s=this._paths,o=this._parsedPaths,c=this._objects,f=c.length,d=this.nCachedObjects_,p=new Array(f);i=a.length,r[e]=i,s.push(e),o.push(t),a.push(p);for(let v=d,y=c.length;v!==y;++v){const x=c[v];p[v]=new lr(x,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length-1,c=s[o],f=e[o];t[f]=r,s[r]=c,s.pop(),a[r]=a[o],a.pop(),i[r]=i[o],i.pop()}}}class f9{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const a=t.tracks,s=a.length,o=new Array(s),c={endingStart:Fm,endingEnd:Fm};for(let f=0;f!==s;++f){const d=a[f].createInterpolant(null);o[f]=d,d.settings=c}this._interpolantSettings=c,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=e8,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r=!1){if(e.fadeOut(t),this.fadeIn(t),r===!0){const i=this._clip.duration,a=e._clip.duration,s=a/i,o=i/a;e.warp(1,s,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,r=!1){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,a=i.time,s=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const c=o.parameterPositions,f=o.sampleValues;return c[0]=a,c[1]=a+r,f[0]=e/s,f[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const c=(e-a)*r;c<0||r===0?t=0:(this._startTime=null,t=r*c)}t*=this._updateTimeScale(e);const s=this._updateTime(t),o=this._updateWeight(e);if(o>0){const c=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case I3:for(let d=0,p=c.length;d!==p;++d)c[d].evaluate(s),f[d].accumulateAdditive(o);break;case eM:default:for(let d=0,p=c.length;d!==p;++d)c[d].evaluate(s),f[d].accumulate(i,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,a=this._loopCount;const s=r===t8;if(e===0)return a===-1?i:s&&(a&1)===1?t-i:i;if(r===JV){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=t||i<0){const o=Math.floor(i/t);i-=t*o,a+=Math.abs(o);const c=this.repetitions-a;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const f=e<0;this._setEndings(f,!f,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(s&&(a&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=zm,i.endingEnd=zm):(e?i.endingStart=this.zeroSlopeAtStart?zm:Fm:i.endingStart=Yx,t?i.endingEnd=this.zeroSlopeAtEnd?zm:Fm:i.endingEnd=Yx)}_scheduleFading(e,t,r){const i=this._mixer,a=i.time;let s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,c=s.sampleValues;return o[0]=a,c[0]=t,o[1]=a+e,c[1]=r,this}}const Fee=new Float32Array(1);class zee extends pf{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,a=i.length,s=e._propertyBindings,o=e._interpolants,c=r.uuid,f=this._bindingsByRootAndName;let d=f[c];d===void 0&&(d={},f[c]=d);for(let p=0;p!==a;++p){const v=i[p],y=v.name;let x=d[y];if(x!==void 0)++x.referenceCount,s[p]=x;else{if(x=s[p],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,c,y));continue}const E=t&&t._propertyBindings[p].binding.parsedPath;x=new u9(lr.create(r,y,E),v.ValueTypeName,v.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,c,y),s[p]=x}o[p].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,a=this._actionsByClip[i];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,a=this._actionsByClip;let s=a[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,o=s[a],c=o.knownActions,f=c[c.length-1],d=e._byClipCacheIndex;f._byClipCacheIndex=d,c[d]=f,c.pop(),e._byClipCacheIndex=null;const p=o.actionByRoot,v=(e._localRoot||this._root).uuid;delete p[v],c.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,a=this._bindings;let s=i[t];s===void 0&&(s={},i[t]=s),s[r]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,a=r.path,s=this._bindingsByRootAndName,o=s[i],c=t[t.length-1],f=e._cacheIndex;c._cacheIndex=f,t[f]=c,t.pop(),delete o[a],Object.keys(o).length===0&&delete s[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new Z3(new Float32Array(2),new Float32Array(2),1,Fee),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,a=t[i];e.__cacheIndex=i,t[i]=e,a.__cacheIndex=r,t[r]=a}clipAction(e,t,r){const i=t||this._root,a=i.uuid;let s=typeof e=="string"?a_.findByName(i,e):e;const o=s!==null?s.uuid:e,c=this._actionsByClip[o];let f=null;if(r===void 0&&(s!==null?r=s.blendMode:r=eM),c!==void 0){const p=c.actionByRoot[a];if(p!==void 0&&p.blendMode===r)return p;f=c.knownActions[0],s===null&&(s=f._clip)}if(s===null)return null;const d=new f9(this,s,t,r);return this._bindAction(d,f),this._addInactiveAction(d,o,a),d}existingAction(e,t){const r=t||this._root,i=r.uuid,a=typeof e=="string"?a_.findByName(r,e):e,s=a?a.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let f=0;f!==r;++f)t[f]._update(i,e,a,s);const o=this._bindings,c=this._nActiveBindings;for(let f=0;f!==c;++f)o[f].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,a=i[r];if(a!==void 0){const s=a.knownActions;for(let o=0,c=s.length;o!==c;++o){const f=s[o];this._deactivateAction(f);const d=f._cacheIndex,p=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,p._cacheIndex=d,t[d]=p,t.pop(),this._removeInactiveBindingsForAction(f)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const s in r){const o=r[s].actionByRoot,c=o[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const i=this._bindingsByRootAndName,a=i[t];if(a!==void 0)for(const s in a){const o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class jee extends P3{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=r,this.texture=new iM(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class sD{constructor(e){this.value=e}clone(){return new sD(this.value.clone===void 0?this.value:this.value.clone())}}let Bee=0;class Vee extends pf{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Bee++}),this.name="",this.usage=Zx,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const a=Array.isArray(t[r])?t[r]:[t[r]];for(let s=0;s<a.length;s++)this.uniforms.push(a[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class Hee extends lM{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Gee{constructor(e,t,r,i,a,s=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=a,this.normalized=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const XU=new yn;class d9{constructor(e,t,r=0,i=1/0){this.ray=new Mg(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Fv,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):tn("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return XU.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(XU),this}intersectObject(e,t=!0,r=[]){return ON(e,this,r,t),r.sort(YU),r}intersectObjects(e,t=!0,r=[]){for(let i=0,a=e.length;i<a;i++)ON(e[i],this,r,t);return r.sort(YU),r}}function YU(n,e){return n.distance-e.distance}function ON(n,e,t,r){let i=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(i=!1),i===!0&&r===!0){const a=n.children;for(let s=0,o=a.length;s<o;s++)ON(a[s],e,t,!0)}}class qee{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=Wee.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function Wee(){this._document.hidden===!1&&this.reset()}class DN{constructor(e=1,t=0,r=0){this.radius=e,this.phi=t,this.theta=r}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=mn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(mn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class $ee{constructor(e=1,t=0,r=0){this.radius=e,this.theta=t,this.y=r}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}class oD{constructor(e,t,r,i){oD.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let r=0;r<4;r++)this.elements[r]=e[r+t];return this}set(e,t,r,i){const a=this.elements;return a[0]=e,a[2]=t,a[1]=r,a[3]=i,this}}const KU=new lt;class Xee{constructor(e=new lt(1/0,1/0),t=new lt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=KU.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,KU).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ZU=new ue,Sw=new ue,K0=new ue,Z0=new ue,aR=new ue,Yee=new ue,Kee=new ue;class Zee{constructor(e=new ue,t=new ue){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){ZU.subVectors(e,this.start),Sw.subVectors(this.end,this.start);const r=Sw.dot(Sw);let a=Sw.dot(ZU)/r;return t&&(a=mn(a,0,1)),a}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}distanceSqToLine3(e,t=Yee,r=Kee){const i=10000000000000001e-32;let a,s;const o=this.start,c=e.start,f=this.end,d=e.end;K0.subVectors(f,o),Z0.subVectors(d,c),aR.subVectors(o,c);const p=K0.dot(K0),v=Z0.dot(Z0),y=Z0.dot(aR);if(p<=i&&v<=i)return t.copy(o),r.copy(c),t.sub(r),t.dot(t);if(p<=i)a=0,s=y/v,s=mn(s,0,1);else{const x=K0.dot(aR);if(v<=i)s=0,a=mn(-x/p,0,1);else{const E=K0.dot(Z0),S=p*v-E*E;S!==0?a=mn((E*y-x*v)/S,0,1):a=0,s=(E*a+y)/v,s<0?(s=0,a=mn(-x/p,0,1)):s>1&&(s=1,a=mn((E-x)/p,0,1))}}return t.copy(o).add(K0.multiplyScalar(a)),r.copy(c).add(Z0.multiplyScalar(s)),t.sub(r),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const QU=new ue;class Qee extends cr{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new xn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,c=32;s<c;s++,o++){const f=s/c*Math.PI*2,d=o/c*Math.PI*2;i.push(Math.cos(f),Math.sin(f),1,Math.cos(d),Math.sin(d),1)}r.setAttribute("position",new qt(i,3));const a=new co({fog:!1,toneMapped:!1});this.cone=new mf(r,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),QU.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(QU),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Nh=new ue,ww=new yn,sR=new yn;class Jee extends mf{constructor(e){const t=h9(e),r=new xn,i=[],a=[];for(let f=0;f<t.length;f++){const d=t[f];d.parent&&d.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),a.push(0,0,0),a.push(0,0,0))}r.setAttribute("position",new qt(i,3)),r.setAttribute("color",new qt(a,3));const s=new co({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,s),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const o=new Bt(255),c=new Bt(65280);this.setColors(o,c)}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");sR.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<t.length;a++){const o=t[a];o.parent&&o.parent.isBone&&(ww.multiplyMatrices(sR,o.matrixWorld),Nh.setFromMatrixPosition(ww),i.setXYZ(s,Nh.x,Nh.y,Nh.z),ww.multiplyMatrices(sR,o.parent.matrixWorld),Nh.setFromMatrixPosition(ww),i.setXYZ(s+1,Nh.x,Nh.y,Nh.z),s+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const i=this.geometry.getAttribute("color");for(let a=0;a<i.count;a+=2)i.setXYZ(a,e.r,e.g,e.b),i.setXYZ(a+1,t.r,t.g,t.b);return i.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function h9(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...h9(n.children[t]));return e}class ete extends sa{constructor(e,t,r){const i=new V_(t,4,2),a=new _p({wireframe:!0,fog:!1,toneMapped:!1});super(i,a),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const tte=new ue,JU=new Bt,e2=new Bt;class nte extends cr{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new B_(t);i.rotateY(Math.PI*.5),this.material=new _p({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=i.getAttribute("position"),s=new Float32Array(a.count*3);i.setAttribute("color",new yr(s,3)),this.add(new sa(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");JU.copy(this.light.color),e2.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const a=r<i/2?JU:e2;t.setXYZ(r,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(tte.setFromMatrixPosition(this.light.matrixWorld).negate())}}class rte extends mf{constructor(e=10,t=10,r=4473924,i=8947848){r=new Bt(r),i=new Bt(i);const a=t/2,s=e/t,o=e/2,c=[],f=[];for(let v=0,y=0,x=-o;v<=t;v++,x+=s){c.push(-o,0,x,o,0,x),c.push(x,0,-o,x,0,o);const E=v===a?r:i;E.toArray(f,y),y+=3,E.toArray(f,y),y+=3,E.toArray(f,y),y+=3,E.toArray(f,y),y+=3}const d=new xn;d.setAttribute("position",new qt(c,3)),d.setAttribute("color",new qt(f,3));const p=new co({vertexColors:!0,toneMapped:!1});super(d,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class ite extends mf{constructor(e=10,t=16,r=8,i=64,a=4473924,s=8947848){a=new Bt(a),s=new Bt(s);const o=[],c=[];if(t>1)for(let p=0;p<t;p++){const v=p/t*(Math.PI*2),y=Math.sin(v)*e,x=Math.cos(v)*e;o.push(0,0,0),o.push(y,0,x);const E=p&1?a:s;c.push(E.r,E.g,E.b),c.push(E.r,E.g,E.b)}for(let p=0;p<r;p++){const v=p&1?a:s,y=e-e/r*p;for(let x=0;x<i;x++){let E=x/i*(Math.PI*2),S=Math.sin(E)*y,w=Math.cos(E)*y;o.push(S,0,w),c.push(v.r,v.g,v.b),E=(x+1)/i*(Math.PI*2),S=Math.sin(E)*y,w=Math.cos(E)*y,o.push(S,0,w),c.push(v.r,v.g,v.b)}}const f=new xn;f.setAttribute("position",new qt(o,3)),f.setAttribute("color",new qt(c,3));const d=new co({vertexColors:!0,toneMapped:!1});super(f,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const t2=new ue,Ew=new ue,n2=new ue;class ate extends cr{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new xn;i.setAttribute("position",new qt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new co({fog:!1,toneMapped:!1});this.lightPlane=new cp(i,a),this.add(this.lightPlane),i=new xn,i.setAttribute("position",new qt([0,0,0,0,0,1],3)),this.targetLine=new cp(i,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),t2.setFromMatrixPosition(this.light.matrixWorld),Ew.setFromMatrixPosition(this.light.target.matrixWorld),n2.subVectors(Ew,t2),this.lightPlane.lookAt(Ew),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ew),this.targetLine.scale.z=n2.length()}}const Aw=new ue,Ai=new aM;class ste extends mf{constructor(e){const t=new xn,r=new co({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],a=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(x,E){c(x),c(E)}function c(x){i.push(0,0,0),a.push(0,0,0),s[x]===void 0&&(s[x]=[]),s[x].push(i.length/3-1)}t.setAttribute("position",new qt(i,3)),t.setAttribute("color",new qt(a,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const f=new Bt(16755200),d=new Bt(16711680),p=new Bt(43775),v=new Bt(16777215),y=new Bt(3355443);this.setColors(f,d,p,v,y)}setColors(e,t,r,i,a){const o=this.geometry.getAttribute("color");return o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,r.r,r.g,r.b),o.setXYZ(33,r.r,r.g,r.b),o.setXYZ(34,r.r,r.g,r.b),o.setXYZ(35,r.r,r.g,r.b),o.setXYZ(36,r.r,r.g,r.b),o.setXYZ(37,r.r,r.g,r.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,a.r,a.g,a.b),o.setXYZ(41,a.r,a.g,a.b),o.setXYZ(42,a.r,a.g,a.b),o.setXYZ(43,a.r,a.g,a.b),o.setXYZ(44,a.r,a.g,a.b),o.setXYZ(45,a.r,a.g,a.b),o.setXYZ(46,a.r,a.g,a.b),o.setXYZ(47,a.r,a.g,a.b),o.setXYZ(48,a.r,a.g,a.b),o.setXYZ(49,a.r,a.g,a.b),o.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;let a,s;if(Ai.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)a=1,s=0;else if(this.camera.coordinateSystem===cl)a=-1,s=1;else if(this.camera.coordinateSystem===Lv)a=0,s=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Fi("c",t,e,Ai,0,0,a),Fi("t",t,e,Ai,0,0,s),Fi("n1",t,e,Ai,-r,-i,a),Fi("n2",t,e,Ai,r,-i,a),Fi("n3",t,e,Ai,-r,i,a),Fi("n4",t,e,Ai,r,i,a),Fi("f1",t,e,Ai,-r,-i,s),Fi("f2",t,e,Ai,r,-i,s),Fi("f3",t,e,Ai,-r,i,s),Fi("f4",t,e,Ai,r,i,s),Fi("u1",t,e,Ai,r*.7,i*1.1,a),Fi("u2",t,e,Ai,-r*.7,i*1.1,a),Fi("u3",t,e,Ai,0,i*2,a),Fi("cf1",t,e,Ai,-r,0,s),Fi("cf2",t,e,Ai,r,0,s),Fi("cf3",t,e,Ai,0,-i,s),Fi("cf4",t,e,Ai,0,i,s),Fi("cn1",t,e,Ai,-r,0,a),Fi("cn2",t,e,Ai,r,0,a),Fi("cn3",t,e,Ai,0,-i,a),Fi("cn4",t,e,Ai,0,i,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Fi(n,e,t,r,i,a,s){Aw.set(i,a,s).unproject(r);const o=e[n];if(o!==void 0){const c=t.getAttribute("position");for(let f=0,d=o.length;f<d;f++)c.setXYZ(o[f],Aw.x,Aw.y,Aw.z)}}const Tw=new os;class ote extends mf{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),a=new xn;a.setIndex(new yr(r,1)),a.setAttribute("position",new yr(i,3)),super(a,new co({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&Tw.setFromObject(this.object),Tw.isEmpty())return;const e=Tw.min,t=Tw.max,r=this.geometry.attributes.position,i=r.array;i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=e.x,i[4]=t.y,i[5]=t.z,i[6]=e.x,i[7]=e.y,i[8]=t.z,i[9]=t.x,i[10]=e.y,i[11]=t.z,i[12]=t.x,i[13]=t.y,i[14]=e.z,i[15]=e.x,i[16]=t.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=t.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class lte extends mf{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new xn;a.setIndex(new yr(r,1)),a.setAttribute("position",new qt(i,3)),super(a,new co({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class cte extends cp{constructor(e,t=1,r=16776960){const i=r,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new xn;s.setAttribute("position",new qt(a,3)),s.computeBoundingSphere(),super(s,new co({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new xn;c.setAttribute("position",new qt(o,3)),c.computeBoundingSphere(),this.add(new sa(c,new _p({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const r2=new ue;let Mw,oR;class ute extends cr{constructor(e=new ue(0,0,1),t=new ue(0,0,0),r=1,i=16776960,a=r*.2,s=a*.2){super(),this.type="ArrowHelper",Mw===void 0&&(Mw=new xn,Mw.setAttribute("position",new qt([0,0,0,0,1,0],3)),oR=new j_(.5,1,5,1),oR.translate(0,-.5,0)),this.position.copy(t),this.line=new cp(Mw,new co({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new sa(oR,new _p({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,a,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{r2.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(r2,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class fte extends mf{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new xn;i.setAttribute("position",new qt(t,3)),i.setAttribute("color",new qt(r,3));const a=new co({vertexColors:!0,toneMapped:!1});super(i,a),this.type="AxesHelper"}setColors(e,t,r){const i=new Bt,a=this.geometry.attributes.color.array;return i.set(e),i.toArray(a,0),i.toArray(a,3),i.set(t),i.toArray(a,6),i.toArray(a,9),i.set(r),i.toArray(a,12),i.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class dte{constructor(){this.type="ShapePath",this.color=new Bt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new _A,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,a,s){return this.currentPath.bezierCurveTo(e,t,r,i,a,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(w){const R=[];for(let N=0,O=w.length;N<O;N++){const z=w[N],k=new Zm;k.curves=z.curves,R.push(k)}return R}function r(w,R){const N=R.length;let O=!1;for(let z=N-1,k=0;k<N;z=k++){let U=R[z],P=R[k],C=P.x-U.x,L=P.y-U.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(U=R[k],C=-C,P=R[z],L=-L),w.y<U.y||w.y>P.y)continue;if(w.y===U.y){if(w.x===U.x)return!0}else{const j=L*(w.x-U.x)-C*(w.y-U.y);if(j===0)return!0;if(j<0)continue;O=!O}}else{if(w.y!==U.y)continue;if(P.x<=w.x&&w.x<=U.x||U.x<=w.x&&w.x<=P.x)return!0}}return O}const i=jc.isClockWise,a=this.subPaths;if(a.length===0)return[];let s,o,c;const f=[];if(a.length===1)return o=a[0],c=new Zm,c.curves=o.curves,f.push(c),f;let d=!i(a[0].getPoints());d=e?!d:d;const p=[],v=[];let y=[],x=0,E;v[x]=void 0,y[x]=[];for(let w=0,R=a.length;w<R;w++)o=a[w],E=o.getPoints(),s=i(E),s=e?!s:s,s?(!d&&v[x]&&x++,v[x]={s:new Zm,p:E},v[x].s.curves=o.curves,d&&x++,y[x]=[]):y[x].push({h:o,p:E[0]});if(!v[0])return t(a);if(v.length>1){let w=!1,R=0;for(let N=0,O=v.length;N<O;N++)p[N]=[];for(let N=0,O=v.length;N<O;N++){const z=y[N];for(let k=0;k<z.length;k++){const U=z[k];let P=!0;for(let C=0;C<v.length;C++)r(U.p,v[C].p)&&(N!==C&&R++,P?(P=!1,p[C].push(U)):w=!0);P&&p[N].push(U)}}R>0&&w===!1&&(y=p)}let S;for(let w=0,R=v.length;w<R;w++){c=v[w].s,f.push(c),S=y[w];for(let N=0,O=S.length;N<O;N++)c.holes.push(S[N].h)}return f}}class hte extends pf{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){kt("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function pte(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function mte(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function gte(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function LN(n,e,t,r){const i=vte(r);switch(t){case M3:return n*e;case ZT:return n*e/i.components*i.byteLength;case U_:return n*e/i.components*i.byteLength;case og:return n*e*2/i.components*i.byteLength;case QT:return n*e*2/i.components*i.byteLength;case C3:return n*e*3/i.components*i.byteLength;case Ds:return n*e*4/i.components*i.byteLength;case JT:return n*e*4/i.components*i.byteLength;case Tx:case Mx:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Cx:case Ix:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case jE:case VE:return Math.max(n,16)*Math.max(e,8)/4;case zE:case BE:return Math.max(n,8)*Math.max(e,8)/2;case HE:case GE:case WE:case $E:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case qE:case XE:case YE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case KE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case ZE:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case QE:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case JE:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case eA:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case tA:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case nA:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case rA:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case iA:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case aA:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case sA:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case oA:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case lA:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case cA:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case uA:case fA:case dA:return Math.ceil(n/4)*Math.ceil(e/4)*16;case hA:case pA:return Math.ceil(n/4)*Math.ceil(e/4)*8;case mA:case gA:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function vte(n){switch(n){case no:case w3:return{byteLength:1,components:1};case Ov:case E3:case rf:return{byteLength:2,components:1};case YT:case KT:return{byteLength:2,components:4};case tc:case XT:case io:return{byteLength:4,components:1};case A3:case T3:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class yte{static contain(e,t){return pte(e,t)}static cover(e,t){return mte(e,t)}static fill(e){return gte(e)}static getByteLength(e,t,r,i){return LN(e,t,r,i)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:qT}}));typeof window<"u"&&(window.__THREE__?kt("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=qT);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function p9(){let n=null,e=!1,t=null,r=null;function i(a,s){t(a,s),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function bte(n){const e=new WeakMap;function t(o,c){const f=o.array,d=o.usage,p=f.byteLength,v=n.createBuffer();n.bindBuffer(c,v),n.bufferData(c,f,d),o.onUploadCallback();let y;if(f instanceof Float32Array)y=n.FLOAT;else if(typeof Float16Array<"u"&&f instanceof Float16Array)y=n.HALF_FLOAT;else if(f instanceof Uint16Array)o.isFloat16BufferAttribute?y=n.HALF_FLOAT:y=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)y=n.SHORT;else if(f instanceof Uint32Array)y=n.UNSIGNED_INT;else if(f instanceof Int32Array)y=n.INT;else if(f instanceof Int8Array)y=n.BYTE;else if(f instanceof Uint8Array)y=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)y=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:v,type:y,bytesPerElement:f.BYTES_PER_ELEMENT,version:o.version,size:p}}function r(o,c,f){const d=c.array,p=c.updateRanges;if(n.bindBuffer(f,o),p.length===0)n.bufferSubData(f,0,d);else{p.sort((y,x)=>y.start-x.start);let v=0;for(let y=1;y<p.length;y++){const x=p[v],E=p[y];E.start<=x.start+x.count+1?x.count=Math.max(x.count,E.start+E.count-x.start):(++v,p[v]=E)}p.length=v+1;for(let y=0,x=p.length;y<x;y++){const E=p[y];n.bufferSubData(f,E.start*d.BYTES_PER_ELEMENT,d,E.start,E.count)}c.clearUpdateRanges()}c.onUploadCallback()}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function a(o){o.isInterleavedBufferAttribute&&(o=o.data);const c=e.get(o);c&&(n.deleteBuffer(c.buffer),e.delete(o))}function s(o,c){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const d=e.get(o);(!d||d.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const f=e.get(o);if(f===void 0)e.set(o,t(o,c));else if(f.version<o.version){if(f.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(f.buffer,o,c),f.version=o.version}}return{get:i,remove:a,update:s}}var xte=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,_te=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Ste=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,wte=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Ete=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Ate=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Tte=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Mte=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Cte=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Ite=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Rte=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Pte=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Nte=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Ote=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Dte=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Lte=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,kte=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Ute=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Fte=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,zte=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,jte=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Bte=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Vte=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Hte=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Gte=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,qte=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Wte=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,$te=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Xte=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Yte=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Kte="gl_FragColor = linearToOutputTexel( gl_FragColor );",Zte=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Qte=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Jte=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,ene=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,tne=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,nne=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,rne=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,ine=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,ane=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,sne=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,one=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lne=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,cne=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,une=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,fne=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,dne=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,hne=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,pne=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,mne=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,gne=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,vne=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,yne=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,bne=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,xne=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,_ne=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Sne=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,wne=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Ene=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Ane=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Tne=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Mne=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Cne=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Ine=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Rne=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Pne=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Nne=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,One=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Dne=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Lne=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,kne=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Une=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Fne=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,zne=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,jne=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Bne=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Vne=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Hne=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Gne=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,qne=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Wne=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,$ne=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Xne=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Yne=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Kne=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Zne=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Qne=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Jne=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,ere=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,tre=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,nre=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,rre=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,ire=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,are=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,sre=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,ore=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,lre=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,cre=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,ure=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,fre=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,dre=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,hre=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,pre=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,mre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,gre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,vre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,yre=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const bre=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,xre=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_re=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Sre=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Ere=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Are=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Tre=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Mre=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Cre=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,Ire=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Rre=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Pre=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Nre=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Ore=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Dre=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Lre=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kre=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ure=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Fre=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zre=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,jre=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Bre=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Vre=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hre=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Gre=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qre=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Wre=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$re=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Xre=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Yre=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Kre=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Zre=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Qre=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,kn={alphahash_fragment:xte,alphahash_pars_fragment:_te,alphamap_fragment:Ste,alphamap_pars_fragment:wte,alphatest_fragment:Ete,alphatest_pars_fragment:Ate,aomap_fragment:Tte,aomap_pars_fragment:Mte,batching_pars_vertex:Cte,batching_vertex:Ite,begin_vertex:Rte,beginnormal_vertex:Pte,bsdfs:Nte,iridescence_fragment:Ote,bumpmap_pars_fragment:Dte,clipping_planes_fragment:Lte,clipping_planes_pars_fragment:kte,clipping_planes_pars_vertex:Ute,clipping_planes_vertex:Fte,color_fragment:zte,color_pars_fragment:jte,color_pars_vertex:Bte,color_vertex:Vte,common:Hte,cube_uv_reflection_fragment:Gte,defaultnormal_vertex:qte,displacementmap_pars_vertex:Wte,displacementmap_vertex:$te,emissivemap_fragment:Xte,emissivemap_pars_fragment:Yte,colorspace_fragment:Kte,colorspace_pars_fragment:Zte,envmap_fragment:Qte,envmap_common_pars_fragment:Jte,envmap_pars_fragment:ene,envmap_pars_vertex:tne,envmap_physical_pars_fragment:dne,envmap_vertex:nne,fog_vertex:rne,fog_pars_vertex:ine,fog_fragment:ane,fog_pars_fragment:sne,gradientmap_pars_fragment:one,lightmap_pars_fragment:lne,lights_lambert_fragment:cne,lights_lambert_pars_fragment:une,lights_pars_begin:fne,lights_toon_fragment:hne,lights_toon_pars_fragment:pne,lights_phong_fragment:mne,lights_phong_pars_fragment:gne,lights_physical_fragment:vne,lights_physical_pars_fragment:yne,lights_fragment_begin:bne,lights_fragment_maps:xne,lights_fragment_end:_ne,logdepthbuf_fragment:Sne,logdepthbuf_pars_fragment:wne,logdepthbuf_pars_vertex:Ene,logdepthbuf_vertex:Ane,map_fragment:Tne,map_pars_fragment:Mne,map_particle_fragment:Cne,map_particle_pars_fragment:Ine,metalnessmap_fragment:Rne,metalnessmap_pars_fragment:Pne,morphinstance_vertex:Nne,morphcolor_vertex:One,morphnormal_vertex:Dne,morphtarget_pars_vertex:Lne,morphtarget_vertex:kne,normal_fragment_begin:Une,normal_fragment_maps:Fne,normal_pars_fragment:zne,normal_pars_vertex:jne,normal_vertex:Bne,normalmap_pars_fragment:Vne,clearcoat_normal_fragment_begin:Hne,clearcoat_normal_fragment_maps:Gne,clearcoat_pars_fragment:qne,iridescence_pars_fragment:Wne,opaque_fragment:$ne,packing:Xne,premultiplied_alpha_fragment:Yne,project_vertex:Kne,dithering_fragment:Zne,dithering_pars_fragment:Qne,roughnessmap_fragment:Jne,roughnessmap_pars_fragment:ere,shadowmap_pars_fragment:tre,shadowmap_pars_vertex:nre,shadowmap_vertex:rre,shadowmask_pars_fragment:ire,skinbase_vertex:are,skinning_pars_vertex:sre,skinning_vertex:ore,skinnormal_vertex:lre,specularmap_fragment:cre,specularmap_pars_fragment:ure,tonemapping_fragment:fre,tonemapping_pars_fragment:dre,transmission_fragment:hre,transmission_pars_fragment:pre,uv_pars_fragment:mre,uv_pars_vertex:gre,uv_vertex:vre,worldpos_vertex:yre,background_vert:bre,background_frag:xre,backgroundCube_vert:_re,backgroundCube_frag:Sre,cube_vert:wre,cube_frag:Ere,depth_vert:Are,depth_frag:Tre,distance_vert:Mre,distance_frag:Cre,equirect_vert:Ire,equirect_frag:Rre,linedashed_vert:Pre,linedashed_frag:Nre,meshbasic_vert:Ore,meshbasic_frag:Dre,meshlambert_vert:Lre,meshlambert_frag:kre,meshmatcap_vert:Ure,meshmatcap_frag:Fre,meshnormal_vert:zre,meshnormal_frag:jre,meshphong_vert:Bre,meshphong_frag:Vre,meshphysical_vert:Hre,meshphysical_frag:Gre,meshtoon_vert:qre,meshtoon_frag:Wre,points_vert:$re,points_frag:Xre,shadow_vert:Yre,shadow_frag:Kre,sprite_vert:Zre,sprite_frag:Qre},Ut={common:{diffuse:{value:new Bt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Rn},alphaMap:{value:null},alphaMapTransform:{value:new Rn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Rn}},envmap:{envMap:{value:null},envMapRotation:{value:new Rn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Rn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Rn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Rn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Rn},normalScale:{value:new lt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Rn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Rn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Rn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Rn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Bt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Bt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Rn},alphaTest:{value:0},uvTransform:{value:new Rn}},sprite:{diffuse:{value:new Bt(16777215)},opacity:{value:1},center:{value:new lt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Rn},alphaMap:{value:null},alphaMapTransform:{value:new Rn},alphaTest:{value:0}}},kc={basic:{uniforms:eo([Ut.common,Ut.specularmap,Ut.envmap,Ut.aomap,Ut.lightmap,Ut.fog]),vertexShader:kn.meshbasic_vert,fragmentShader:kn.meshbasic_frag},lambert:{uniforms:eo([Ut.common,Ut.specularmap,Ut.envmap,Ut.aomap,Ut.lightmap,Ut.emissivemap,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,Ut.fog,Ut.lights,{emissive:{value:new Bt(0)}}]),vertexShader:kn.meshlambert_vert,fragmentShader:kn.meshlambert_frag},phong:{uniforms:eo([Ut.common,Ut.specularmap,Ut.envmap,Ut.aomap,Ut.lightmap,Ut.emissivemap,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,Ut.fog,Ut.lights,{emissive:{value:new Bt(0)},specular:{value:new Bt(1118481)},shininess:{value:30}}]),vertexShader:kn.meshphong_vert,fragmentShader:kn.meshphong_frag},standard:{uniforms:eo([Ut.common,Ut.envmap,Ut.aomap,Ut.lightmap,Ut.emissivemap,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,Ut.roughnessmap,Ut.metalnessmap,Ut.fog,Ut.lights,{emissive:{value:new Bt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:kn.meshphysical_vert,fragmentShader:kn.meshphysical_frag},toon:{uniforms:eo([Ut.common,Ut.aomap,Ut.lightmap,Ut.emissivemap,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,Ut.gradientmap,Ut.fog,Ut.lights,{emissive:{value:new Bt(0)}}]),vertexShader:kn.meshtoon_vert,fragmentShader:kn.meshtoon_frag},matcap:{uniforms:eo([Ut.common,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,Ut.fog,{matcap:{value:null}}]),vertexShader:kn.meshmatcap_vert,fragmentShader:kn.meshmatcap_frag},points:{uniforms:eo([Ut.points,Ut.fog]),vertexShader:kn.points_vert,fragmentShader:kn.points_frag},dashed:{uniforms:eo([Ut.common,Ut.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:kn.linedashed_vert,fragmentShader:kn.linedashed_frag},depth:{uniforms:eo([Ut.common,Ut.displacementmap]),vertexShader:kn.depth_vert,fragmentShader:kn.depth_frag},normal:{uniforms:eo([Ut.common,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,{opacity:{value:1}}]),vertexShader:kn.meshnormal_vert,fragmentShader:kn.meshnormal_frag},sprite:{uniforms:eo([Ut.sprite,Ut.fog]),vertexShader:kn.sprite_vert,fragmentShader:kn.sprite_frag},background:{uniforms:{uvTransform:{value:new Rn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:kn.background_vert,fragmentShader:kn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Rn}},vertexShader:kn.backgroundCube_vert,fragmentShader:kn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:kn.cube_vert,fragmentShader:kn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:kn.equirect_vert,fragmentShader:kn.equirect_frag},distance:{uniforms:eo([Ut.common,Ut.displacementmap,{referencePosition:{value:new ue},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:kn.distance_vert,fragmentShader:kn.distance_frag},shadow:{uniforms:eo([Ut.lights,Ut.fog,{color:{value:new Bt(0)},opacity:{value:1}}]),vertexShader:kn.shadow_vert,fragmentShader:kn.shadow_frag}};kc.physical={uniforms:eo([kc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Rn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Rn},clearcoatNormalScale:{value:new lt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Rn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Rn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Rn},sheen:{value:0},sheenColor:{value:new Bt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Rn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Rn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Rn},transmissionSamplerSize:{value:new lt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Rn},attenuationDistance:{value:0},attenuationColor:{value:new Bt(0)},specularColor:{value:new Bt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Rn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Rn},anisotropyVector:{value:new lt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Rn}}]),vertexShader:kn.meshphysical_vert,fragmentShader:kn.meshphysical_frag};const Cw={r:0,b:0,g:0},wm=new gl,Jre=new yn;function eie(n,e,t,r,i,a,s){const o=new Bt(0);let c=a===!0?0:1,f,d,p=null,v=0,y=null;function x(N){let O=N.isScene===!0?N.background:null;return O&&O.isTexture&&(O=(N.backgroundBlurriness>0?t:e).get(O)),O}function E(N){let O=!1;const z=x(N);z===null?w(o,c):z&&z.isColor&&(w(z,1),O=!0);const k=n.xr.getEnvironmentBlendMode();k==="additive"?r.buffers.color.setClear(0,0,0,1,s):k==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(n.autoClear||O)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function S(N,O){const z=x(O);z&&(z.isCubeTexture||z.mapping===sy)?(d===void 0&&(d=new sa(new Cg(1,1,1),new nc({name:"BackgroundCubeMaterial",uniforms:zv(kc.backgroundCube.uniforms),vertexShader:kc.backgroundCube.vertexShader,fragmentShader:kc.backgroundCube.fragmentShader,side:oo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(k,U,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(d)),wm.copy(O.backgroundRotation),wm.x*=-1,wm.y*=-1,wm.z*=-1,z.isCubeTexture&&z.isRenderTargetTexture===!1&&(wm.y*=-1,wm.z*=-1),d.material.uniforms.envMap.value=z,d.material.uniforms.flipEnvMap.value=z.isCubeTexture&&z.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=O.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(Jre.makeRotationFromEuler(wm)),d.material.toneMapped=Qn.getTransfer(z.colorSpace)!==wr,(p!==z||v!==z.version||y!==n.toneMapping)&&(d.material.needsUpdate=!0,p=z,v=z.version,y=n.toneMapping),d.layers.enableAll(),N.unshift(d,d.geometry,d.material,0,0,null)):z&&z.isTexture&&(f===void 0&&(f=new sa(new ly(2,2),new nc({name:"BackgroundMaterial",uniforms:zv(kc.background.uniforms),vertexShader:kc.background.vertexShader,fragmentShader:kc.background.fragmentShader,side:vd,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(f)),f.material.uniforms.t2D.value=z,f.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,f.material.toneMapped=Qn.getTransfer(z.colorSpace)!==wr,z.matrixAutoUpdate===!0&&z.updateMatrix(),f.material.uniforms.uvTransform.value.copy(z.matrix),(p!==z||v!==z.version||y!==n.toneMapping)&&(f.material.needsUpdate=!0,p=z,v=z.version,y=n.toneMapping),f.layers.enableAll(),N.unshift(f,f.geometry,f.material,0,0,null))}function w(N,O){N.getRGB(Cw,g8(n)),r.buffers.color.setClear(Cw.r,Cw.g,Cw.b,O,s)}function R(){d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return o},setClearColor:function(N,O=1){o.set(N),c=O,w(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(N){c=N,w(o,c)},render:E,addToRenderList:S,dispose:R}}function tie(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=v(null);let a=i,s=!1;function o(L,j,B,V,Q){let J=!1;const W=p(V,B,j);a!==W&&(a=W,f(a.object)),J=y(L,V,B,Q),J&&x(L,V,B,Q),Q!==null&&e.update(Q,n.ELEMENT_ARRAY_BUFFER),(J||s)&&(s=!1,O(L,j,B,V),Q!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(Q).buffer))}function c(){return n.createVertexArray()}function f(L){return n.bindVertexArray(L)}function d(L){return n.deleteVertexArray(L)}function p(L,j,B){const V=B.wireframe===!0;let Q=r[L.id];Q===void 0&&(Q={},r[L.id]=Q);let J=Q[j.id];J===void 0&&(J={},Q[j.id]=J);let W=J[V];return W===void 0&&(W=v(c()),J[V]=W),W}function v(L){const j=[],B=[],V=[];for(let Q=0;Q<t;Q++)j[Q]=0,B[Q]=0,V[Q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:B,attributeDivisors:V,object:L,attributes:{},index:null}}function y(L,j,B,V){const Q=a.attributes,J=j.attributes;let W=0;const $=B.getAttributes();for(const se in $)if($[se].location>=0){const fe=Q[se];let Z=J[se];if(Z===void 0&&(se==="instanceMatrix"&&L.instanceMatrix&&(Z=L.instanceMatrix),se==="instanceColor"&&L.instanceColor&&(Z=L.instanceColor)),fe===void 0||fe.attribute!==Z||Z&&fe.data!==Z.data)return!0;W++}return a.attributesNum!==W||a.index!==V}function x(L,j,B,V){const Q={},J=j.attributes;let W=0;const $=B.getAttributes();for(const se in $)if($[se].location>=0){let fe=J[se];fe===void 0&&(se==="instanceMatrix"&&L.instanceMatrix&&(fe=L.instanceMatrix),se==="instanceColor"&&L.instanceColor&&(fe=L.instanceColor));const Z={};Z.attribute=fe,fe&&fe.data&&(Z.data=fe.data),Q[se]=Z,W++}a.attributes=Q,a.attributesNum=W,a.index=V}function E(){const L=a.newAttributes;for(let j=0,B=L.length;j<B;j++)L[j]=0}function S(L){w(L,0)}function w(L,j){const B=a.newAttributes,V=a.enabledAttributes,Q=a.attributeDivisors;B[L]=1,V[L]===0&&(n.enableVertexAttribArray(L),V[L]=1),Q[L]!==j&&(n.vertexAttribDivisor(L,j),Q[L]=j)}function R(){const L=a.newAttributes,j=a.enabledAttributes;for(let B=0,V=j.length;B<V;B++)j[B]!==L[B]&&(n.disableVertexAttribArray(B),j[B]=0)}function N(L,j,B,V,Q,J,W){W===!0?n.vertexAttribIPointer(L,j,B,Q,J):n.vertexAttribPointer(L,j,B,V,Q,J)}function O(L,j,B,V){E();const Q=V.attributes,J=B.getAttributes(),W=j.defaultAttributeValues;for(const $ in J){const se=J[$];if(se.location>=0){let ce=Q[$];if(ce===void 0&&($==="instanceMatrix"&&L.instanceMatrix&&(ce=L.instanceMatrix),$==="instanceColor"&&L.instanceColor&&(ce=L.instanceColor)),ce!==void 0){const fe=ce.normalized,Z=ce.itemSize,re=e.get(ce);if(re===void 0)continue;const de=re.buffer,ve=re.type,pe=re.bytesPerElement,ye=ve===n.INT||ve===n.UNSIGNED_INT||ce.gpuType===XT;if(ce.isInterleavedBufferAttribute){const Ee=ce.data,Xe=Ee.stride,me=ce.offset;if(Ee.isInstancedInterleavedBuffer){for(let qe=0;qe<se.locationSize;qe++)w(se.location+qe,Ee.meshPerAttribute);L.isInstancedMesh!==!0&&V._maxInstanceCount===void 0&&(V._maxInstanceCount=Ee.meshPerAttribute*Ee.count)}else for(let qe=0;qe<se.locationSize;qe++)S(se.location+qe);n.bindBuffer(n.ARRAY_BUFFER,de);for(let qe=0;qe<se.locationSize;qe++)N(se.location+qe,Z/se.locationSize,ve,fe,Xe*pe,(me+Z/se.locationSize*qe)*pe,ye)}else{if(ce.isInstancedBufferAttribute){for(let Ee=0;Ee<se.locationSize;Ee++)w(se.location+Ee,ce.meshPerAttribute);L.isInstancedMesh!==!0&&V._maxInstanceCount===void 0&&(V._maxInstanceCount=ce.meshPerAttribute*ce.count)}else for(let Ee=0;Ee<se.locationSize;Ee++)S(se.location+Ee);n.bindBuffer(n.ARRAY_BUFFER,de);for(let Ee=0;Ee<se.locationSize;Ee++)N(se.location+Ee,Z/se.locationSize,ve,fe,Z*pe,Z/se.locationSize*Ee*pe,ye)}}else if(W!==void 0){const fe=W[$];if(fe!==void 0)switch(fe.length){case 2:n.vertexAttrib2fv(se.location,fe);break;case 3:n.vertexAttrib3fv(se.location,fe);break;case 4:n.vertexAttrib4fv(se.location,fe);break;default:n.vertexAttrib1fv(se.location,fe)}}}}R()}function z(){P();for(const L in r){const j=r[L];for(const B in j){const V=j[B];for(const Q in V)d(V[Q].object),delete V[Q];delete j[B]}delete r[L]}}function k(L){if(r[L.id]===void 0)return;const j=r[L.id];for(const B in j){const V=j[B];for(const Q in V)d(V[Q].object),delete V[Q];delete j[B]}delete r[L.id]}function U(L){for(const j in r){const B=r[j];if(B[L.id]===void 0)continue;const V=B[L.id];for(const Q in V)d(V[Q].object),delete V[Q];delete B[L.id]}}function P(){C(),s=!0,a!==i&&(a=i,f(a.object))}function C(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:o,reset:P,resetDefaultState:C,dispose:z,releaseStatesOfGeometry:k,releaseStatesOfProgram:U,initAttributes:E,enableAttribute:S,disableUnusedAttributes:R}}function nie(n,e,t){let r;function i(f){r=f}function a(f,d){n.drawArrays(r,f,d),t.update(d,r,1)}function s(f,d,p){p!==0&&(n.drawArraysInstanced(r,f,d,p),t.update(d,r,p))}function o(f,d,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,f,0,d,0,p);let y=0;for(let x=0;x<p;x++)y+=d[x];t.update(y,r,1)}function c(f,d,p,v){if(p===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let x=0;x<f.length;x++)s(f[x],d[x],v[x]);else{y.multiDrawArraysInstancedWEBGL(r,f,0,d,0,v,0,p);let x=0;for(let E=0;E<p;E++)x+=d[E]*v[E];t.update(x,r,1)}}this.setMode=i,this.render=a,this.renderInstances=s,this.renderMultiDraw=o,this.renderMultiDrawInstances=c}function rie(n,e,t,r){let i;function a(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const U=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(U.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(U){return!(U!==Ds&&r.convert(U)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(U){const P=U===rf&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(U!==no&&r.convert(U)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&U!==io&&!P)}function c(U){if(U==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";U="mediump"}return U==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=t.precision!==void 0?t.precision:"highp";const d=c(f);d!==f&&(kt("WebGLRenderer:",f,"not supported, using",d,"instead."),f=d);const p=t.logarithmicDepthBuffer===!0,v=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),y=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),E=n.getParameter(n.MAX_TEXTURE_SIZE),S=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),w=n.getParameter(n.MAX_VERTEX_ATTRIBS),R=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),N=n.getParameter(n.MAX_VARYING_VECTORS),O=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),z=n.getParameter(n.MAX_SAMPLES),k=n.getParameter(n.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:c,textureFormatReadable:s,textureTypeReadable:o,precision:f,logarithmicDepthBuffer:p,reversedDepthBuffer:v,maxTextures:y,maxVertexTextures:x,maxTextureSize:E,maxCubemapSize:S,maxAttributes:w,maxVertexUniforms:R,maxVaryings:N,maxFragmentUniforms:O,maxSamples:z,samples:k}}function iie(n){const e=this;let t=null,r=0,i=!1,a=!1;const s=new nd,o=new Rn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(p,v){const y=p.length!==0||v||r!==0||i;return i=v,r=p.length,y},this.beginShadows=function(){a=!0,d(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(p,v){t=d(p,v,0)},this.setState=function(p,v,y){const x=p.clippingPlanes,E=p.clipIntersection,S=p.clipShadows,w=n.get(p);if(!i||x===null||x.length===0||a&&!S)a?d(null):f();else{const R=a?0:r,N=R*4;let O=w.clippingState||null;c.value=O,O=d(x,v,N,y);for(let z=0;z!==N;++z)O[z]=t[z];w.clippingState=O,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=R}};function f(){c.value!==t&&(c.value=t,c.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function d(p,v,y,x){const E=p!==null?p.length:0;let S=null;if(E!==0){if(S=c.value,x!==!0||S===null){const w=y+E*4,R=v.matrixWorldInverse;o.getNormalMatrix(R),(S===null||S.length<w)&&(S=new Float32Array(w));for(let N=0,O=y;N!==E;++N,O+=4)s.copy(p[N]).applyMatrix4(R,o),s.normal.toArray(S,O),S[O+3]=s.constant}c.value=S,c.needsUpdate=!0}return e.numPlanes=E,e.numIntersection=0,S}}function aie(n){let e=new WeakMap;function t(s,o){return o===Gx?s.mapping=nf:o===qx&&(s.mapping=sp),s}function r(s){if(s&&s.isTexture){const o=s.mapping;if(o===Gx||o===qx)if(e.has(s)){const c=e.get(s).texture;return t(c,s.mapping)}else{const c=s.image;if(c&&c.height>0){const f=new D3(c.height);return f.fromEquirectangularTexture(n,s),e.set(s,f),s.addEventListener("dispose",i),t(f.texture,s.mapping)}else return null}}return s}function i(s){const o=s.target;o.removeEventListener("dispose",i);const c=e.get(o);c!==void 0&&(e.delete(o),c.dispose())}function a(){e=new WeakMap}return{get:r,dispose:a}}const Kh=4,i2=[.125,.215,.35,.446,.526,.582],Lm=20,sie=256,Jb=new hd,a2=new Bt;let lR=null,cR=0,uR=0,fR=!1;const oie=new ue;class kN{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,r=.1,i=100,a={}){const{size:s=256,position:o=oie}=a;lR=this._renderer.getRenderTarget(),cR=this._renderer.getActiveCubeFace(),uR=this._renderer.getActiveMipmapLevel(),fR=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,r,i,c,o),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=l2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=o2(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(lR,cR,uR),this._renderer.xr.enabled=fR,e.scissorTest=!1,Q0(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===nf||e.mapping===sp?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),lR=this._renderer.getRenderTarget(),cR=this._renderer.getActiveCubeFace(),uR=this._renderer.getActiveMipmapLevel(),fR=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:ti,minFilter:ti,generateMipmaps:!1,type:rf,format:Ds,colorSpace:op,depthBuffer:!1},i=s2(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=s2(e,t,r);const{_lodMax:a}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=lie(a)),this._blurMaterial=uie(a,e,t),this._ggxMaterial=cie(a,e,t)}return i}_compileMaterial(e){const t=new sa(new xn,e);this._renderer.compile(t,Jb)}_sceneToCubeUV(e,t,r,i,a){const c=new ji(90,1,t,r),f=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],p=this._renderer,v=p.autoClear,y=p.toneMapping;p.getClearColor(a2),p.toneMapping=Jl,p.autoClear=!1,p.state.buffers.depth.getReversed()&&(p.setRenderTarget(i),p.clearDepth(),p.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new sa(new Cg,new _p({name:"PMREM.Background",side:oo,depthWrite:!1,depthTest:!1})));const E=this._backgroundBox,S=E.material;let w=!1;const R=e.background;R?R.isColor&&(S.color.copy(R),e.background=null,w=!0):(S.color.copy(a2),w=!0);for(let N=0;N<6;N++){const O=N%3;O===0?(c.up.set(0,f[N],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x+d[N],a.y,a.z)):O===1?(c.up.set(0,0,f[N]),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y+d[N],a.z)):(c.up.set(0,f[N],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y,a.z+d[N]));const z=this._cubeSize;Q0(i,O*z,N>2?z:0,z,z),p.setRenderTarget(i),w&&p.render(E,c),p.render(e,c)}p.toneMapping=y,p.autoClear=v,e.background=R}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===nf||e.mapping===sp;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=l2()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=o2());const a=i?this._cubemapMaterial:this._equirectMaterial,s=this._lodMeshes[0];s.material=a;const o=a.uniforms;o.envMap.value=e;const c=this._cubeSize;Q0(t,0,0,3*c,2*c),r.setRenderTarget(t),r.render(s,Jb)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodMeshes.length;for(let a=1;a<i;a++)this._applyGGXFilter(e,a-1,a);t.autoClear=r}_applyGGXFilter(e,t,r){const i=this._renderer,a=this._pingPongRenderTarget,s=this._ggxMaterial,o=this._lodMeshes[r];o.material=s;const c=s.uniforms,f=r/(this._lodMeshes.length-1),d=t/(this._lodMeshes.length-1),p=Math.sqrt(f*f-d*d),v=0+f*1.25,y=p*v,{_lodMax:x}=this,E=this._sizeLods[r],S=3*E*(r>x-Kh?r-x+Kh:0),w=4*(this._cubeSize-E);c.envMap.value=e.texture,c.roughness.value=y,c.mipInt.value=x-t,Q0(a,S,w,3*E,2*E),i.setRenderTarget(a),i.render(o,Jb),c.envMap.value=a.texture,c.roughness.value=0,c.mipInt.value=x-r,Q0(e,S,w,3*E,2*E),i.setRenderTarget(e),i.render(o,Jb)}_blur(e,t,r,i,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,r,i,"latitudinal",a),this._halfBlur(s,e,r,r,i,"longitudinal",a)}_halfBlur(e,t,r,i,a,s,o){const c=this._renderer,f=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&tn("blur direction must be either latitudinal or longitudinal!");const d=3,p=this._lodMeshes[i];p.material=f;const v=f.uniforms,y=this._sizeLods[r]-1,x=isFinite(a)?Math.PI/(2*y):2*Math.PI/(2*Lm-1),E=a/x,S=isFinite(a)?1+Math.floor(d*E):Lm;S>Lm&&kt(`sigmaRadians, ${a}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${Lm}`);const w=[];let R=0;for(let U=0;U<Lm;++U){const P=U/E,C=Math.exp(-P*P/2);w.push(C),U===0?R+=C:U<S&&(R+=2*C)}for(let U=0;U<w.length;U++)w[U]=w[U]/R;v.envMap.value=e.texture,v.samples.value=S,v.weights.value=w,v.latitudinal.value=s==="latitudinal",o&&(v.poleAxis.value=o);const{_lodMax:N}=this;v.dTheta.value=x,v.mipInt.value=N-r;const O=this._sizeLods[i],z=3*O*(i>N-Kh?i-N+Kh:0),k=4*(this._cubeSize-O);Q0(t,z,k,3*O,2*O),c.setRenderTarget(t),c.render(p,Jb)}}function lie(n){const e=[],t=[],r=[];let i=n;const a=n-Kh+1+i2.length;for(let s=0;s<a;s++){const o=Math.pow(2,i);e.push(o);let c=1/o;s>n-Kh?c=i2[s-n+Kh-1]:s===0&&(c=0),t.push(c);const f=1/(o-2),d=-f,p=1+f,v=[d,d,p,d,p,p,d,d,p,p,d,p],y=6,x=6,E=3,S=2,w=1,R=new Float32Array(E*x*y),N=new Float32Array(S*x*y),O=new Float32Array(w*x*y);for(let k=0;k<y;k++){const U=k%3*2/3-1,P=k>2?0:-1,C=[U,P,0,U+2/3,P,0,U+2/3,P+1,0,U,P,0,U+2/3,P+1,0,U,P+1,0];R.set(C,E*x*k),N.set(v,S*x*k);const L=[k,k,k,k,k,k];O.set(L,w*x*k)}const z=new xn;z.setAttribute("position",new yr(R,E)),z.setAttribute("uv",new yr(N,S)),z.setAttribute("faceIndex",new yr(O,w)),r.push(new sa(z,null)),i>Kh&&i--}return{lodMeshes:r,sizeLods:e,sigmas:t}}function s2(n,e,t){const r=new pl(n,e,t);return r.texture.mapping=sy,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Q0(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function cie(n,e,t){return new nc({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:sie,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:TM(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Yu,depthTest:!1,depthWrite:!1})}function uie(n,e,t){const r=new Float32Array(Lm),i=new ue(0,1,0);return new nc({name:"SphericalGaussianBlur",defines:{n:Lm,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:TM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Yu,depthTest:!1,depthWrite:!1})}function o2(){return new nc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:TM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Yu,depthTest:!1,depthWrite:!1})}function l2(){return new nc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:TM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Yu,depthTest:!1,depthWrite:!1})}function TM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function fie(n){let e=new WeakMap,t=null;function r(o){if(o&&o.isTexture){const c=o.mapping,f=c===Gx||c===qx,d=c===nf||c===sp;if(f||d){let p=e.get(o);const v=p!==void 0?p.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==v)return t===null&&(t=new kN(n)),p=f?t.fromEquirectangular(o,p):t.fromCubemap(o,p),p.texture.pmremVersion=o.pmremVersion,e.set(o,p),p.texture;if(p!==void 0)return p.texture;{const y=o.image;return f&&y&&y.height>0||d&&y&&i(y)?(t===null&&(t=new kN(n)),p=f?t.fromEquirectangular(o):t.fromCubemap(o),p.texture.pmremVersion=o.pmremVersion,e.set(o,p),o.addEventListener("dispose",a),p.texture):null}}}return o}function i(o){let c=0;const f=6;for(let d=0;d<f;d++)o[d]!==void 0&&c++;return c===f}function a(o){const c=o.target;c.removeEventListener("dispose",a);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:s}}function die(n){const e={};function t(r){if(e[r]!==void 0)return e[r];const i=n.getExtension(r);return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&kv("WebGLRenderer: "+r+" extension not supported."),i}}}function hie(n,e,t,r){const i={},a=new WeakMap;function s(p){const v=p.target;v.index!==null&&e.remove(v.index);for(const x in v.attributes)e.remove(v.attributes[x]);v.removeEventListener("dispose",s),delete i[v.id];const y=a.get(v);y&&(e.remove(y),a.delete(v)),r.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function o(p,v){return i[v.id]===!0||(v.addEventListener("dispose",s),i[v.id]=!0,t.memory.geometries++),v}function c(p){const v=p.attributes;for(const y in v)e.update(v[y],n.ARRAY_BUFFER)}function f(p){const v=[],y=p.index,x=p.attributes.position;let E=0;if(y!==null){const R=y.array;E=y.version;for(let N=0,O=R.length;N<O;N+=3){const z=R[N+0],k=R[N+1],U=R[N+2];v.push(z,k,k,U,U,z)}}else if(x!==void 0){const R=x.array;E=x.version;for(let N=0,O=R.length/3-1;N<O;N+=3){const z=N+0,k=N+1,U=N+2;v.push(z,k,k,U,U,z)}}else return;const S=new(u8(v)?O3:N3)(v,1);S.version=E;const w=a.get(p);w&&e.remove(w),a.set(p,S)}function d(p){const v=a.get(p);if(v){const y=p.index;y!==null&&v.version<y.version&&f(p)}else f(p);return a.get(p)}return{get:o,update:c,getWireframeAttribute:d}}function pie(n,e,t){let r;function i(v){r=v}let a,s;function o(v){a=v.type,s=v.bytesPerElement}function c(v,y){n.drawElements(r,y,a,v*s),t.update(y,r,1)}function f(v,y,x){x!==0&&(n.drawElementsInstanced(r,y,a,v*s,x),t.update(y,r,x))}function d(v,y,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,y,0,a,v,0,x);let S=0;for(let w=0;w<x;w++)S+=y[w];t.update(S,r,1)}function p(v,y,x,E){if(x===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let w=0;w<v.length;w++)f(v[w]/s,y[w],E[w]);else{S.multiDrawElementsInstancedWEBGL(r,y,0,a,v,0,E,0,x);let w=0;for(let R=0;R<x;R++)w+=y[R]*E[R];t.update(w,r,1)}}this.setMode=i,this.setIndex=o,this.render=c,this.renderInstances=f,this.renderMultiDraw=d,this.renderMultiDrawInstances=p}function mie(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,s,o){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=o*(a/3);break;case n.LINES:t.lines+=o*(a/2);break;case n.LINE_STRIP:t.lines+=o*(a-1);break;case n.LINE_LOOP:t.lines+=o*a;break;case n.POINTS:t.points+=o*a;break;default:tn("WebGLInfo: Unknown draw mode:",s);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function gie(n,e,t){const r=new WeakMap,i=new zr;function a(s,o,c){const f=s.morphTargetInfluences,d=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,p=d!==void 0?d.length:0;let v=r.get(o);if(v===void 0||v.count!==p){let L=function(){P.dispose(),r.delete(o),o.removeEventListener("dispose",L)};var y=L;v!==void 0&&v.texture.dispose();const x=o.morphAttributes.position!==void 0,E=o.morphAttributes.normal!==void 0,S=o.morphAttributes.color!==void 0,w=o.morphAttributes.position||[],R=o.morphAttributes.normal||[],N=o.morphAttributes.color||[];let O=0;x===!0&&(O=1),E===!0&&(O=2),S===!0&&(O=3);let z=o.attributes.position.count*O,k=1;z>e.maxTextureSize&&(k=Math.ceil(z/e.maxTextureSize),z=e.maxTextureSize);const U=new Float32Array(z*k*4*p),P=new rM(U,z,k,p);P.type=io,P.needsUpdate=!0;const C=O*4;for(let j=0;j<p;j++){const B=w[j],V=R[j],Q=N[j],J=z*k*4*j;for(let W=0;W<B.count;W++){const $=W*C;x===!0&&(i.fromBufferAttribute(B,W),U[J+$+0]=i.x,U[J+$+1]=i.y,U[J+$+2]=i.z,U[J+$+3]=0),E===!0&&(i.fromBufferAttribute(V,W),U[J+$+4]=i.x,U[J+$+5]=i.y,U[J+$+6]=i.z,U[J+$+7]=0),S===!0&&(i.fromBufferAttribute(Q,W),U[J+$+8]=i.x,U[J+$+9]=i.y,U[J+$+10]=i.z,U[J+$+11]=Q.itemSize===4?i.w:1)}}v={count:p,texture:P,size:new lt(z,k)},r.set(o,v),o.addEventListener("dispose",L)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let x=0;for(let S=0;S<f.length;S++)x+=f[S];const E=o.morphTargetsRelative?1:1-x;c.getUniforms().setValue(n,"morphTargetBaseInfluence",E),c.getUniforms().setValue(n,"morphTargetInfluences",f)}c.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}return{update:a}}function vie(n,e,t,r){let i=new WeakMap;function a(c){const f=r.render.frame,d=c.geometry,p=e.get(c,d);if(i.get(p)!==f&&(e.update(p),i.set(p,f)),c.isInstancedMesh&&(c.hasEventListener("dispose",o)===!1&&c.addEventListener("dispose",o),i.get(c)!==f&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER),i.set(c,f))),c.isSkinnedMesh){const v=c.skeleton;i.get(v)!==f&&(v.update(),i.set(v,f))}return p}function s(){i=new WeakMap}function o(c){const f=c.target;f.removeEventListener("dispose",o),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:a,dispose:s}}const yie={[g3]:"LINEAR_TONE_MAPPING",[v3]:"REINHARD_TONE_MAPPING",[y3]:"CINEON_TONE_MAPPING",[WT]:"ACES_FILMIC_TONE_MAPPING",[x3]:"AGX_TONE_MAPPING",[_3]:"NEUTRAL_TONE_MAPPING",[b3]:"CUSTOM_TONE_MAPPING"};function bie(n,e,t,r,i){const a=new pl(e,t,{type:n,depthBuffer:r,stencilBuffer:i}),s=new pl(e,t,{type:rf,depthBuffer:!1,stencilBuffer:!1}),o=new xn;o.setAttribute("position",new qt([-1,3,0,-1,-1,0,3,-1,0],3)),o.setAttribute("uv",new qt([0,2,0,0,2,0],2));const c=new W3({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),f=new sa(o,c),d=new hd(-1,1,1,-1,0,1);let p=null,v=null,y=!1,x,E=null,S=[],w=!1;this.setSize=function(R,N){a.setSize(R,N),s.setSize(R,N);for(let O=0;O<S.length;O++){const z=S[O];z.setSize&&z.setSize(R,N)}},this.setEffects=function(R){S=R,w=S.length>0&&S[0].isRenderPass===!0;const N=a.width,O=a.height;for(let z=0;z<S.length;z++){const k=S[z];k.setSize&&k.setSize(N,O)}},this.begin=function(R,N){if(y||R.toneMapping===Jl&&S.length===0)return!1;if(E=N,N!==null){const O=N.width,z=N.height;(a.width!==O||a.height!==z)&&this.setSize(O,z)}return w===!1&&R.setRenderTarget(a),x=R.toneMapping,R.toneMapping=Jl,!0},this.hasRenderPass=function(){return w},this.end=function(R,N){R.toneMapping=x,y=!0;let O=a,z=s;for(let k=0;k<S.length;k++){const U=S[k];if(U.enabled!==!1&&(U.render(R,z,O,N),U.needsSwap!==!1)){const P=O;O=z,z=P}}if(p!==R.outputColorSpace||v!==R.toneMapping){p=R.outputColorSpace,v=R.toneMapping,c.defines={},Qn.getTransfer(p)===wr&&(c.defines.SRGB_TRANSFER="");const k=yie[v];k&&(c.defines[k]=""),c.needsUpdate=!0}c.uniforms.tDiffuse.value=O.texture,R.setRenderTarget(E),R.render(f,d),E=null,y=!1},this.isCompositing=function(){return y},this.dispose=function(){a.dispose(),s.dispose(),o.dispose(),c.dispose()}}const m9=new Ci,UN=new Bv(1,1),g9=new rM,v9=new iM,y9=new F_,c2=[],u2=[],f2=new Float32Array(16),d2=new Float32Array(9),h2=new Float32Array(4);function cy(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let a=c2[i];if(a===void 0&&(a=new Float32Array(i),c2[i]=a),e!==0){r.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=t,n[s].toArray(a,o)}return a}function ya(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function ba(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function MM(n,e){let t=u2[e];t===void 0&&(t=new Int32Array(e),u2[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function xie(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function _ie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ya(t,e))return;n.uniform2fv(this.addr,e),ba(t,e)}}function Sie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ya(t,e))return;n.uniform3fv(this.addr,e),ba(t,e)}}function wie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ya(t,e))return;n.uniform4fv(this.addr,e),ba(t,e)}}function Eie(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ya(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ba(t,e)}else{if(ya(t,r))return;h2.set(r),n.uniformMatrix2fv(this.addr,!1,h2),ba(t,r)}}function Aie(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ya(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ba(t,e)}else{if(ya(t,r))return;d2.set(r),n.uniformMatrix3fv(this.addr,!1,d2),ba(t,r)}}function Tie(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ya(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ba(t,e)}else{if(ya(t,r))return;f2.set(r),n.uniformMatrix4fv(this.addr,!1,f2),ba(t,r)}}function Mie(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Cie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ya(t,e))return;n.uniform2iv(this.addr,e),ba(t,e)}}function Iie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ya(t,e))return;n.uniform3iv(this.addr,e),ba(t,e)}}function Rie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ya(t,e))return;n.uniform4iv(this.addr,e),ba(t,e)}}function Pie(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Nie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ya(t,e))return;n.uniform2uiv(this.addr,e),ba(t,e)}}function Oie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ya(t,e))return;n.uniform3uiv(this.addr,e),ba(t,e)}}function Die(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ya(t,e))return;n.uniform4uiv(this.addr,e),ba(t,e)}}function Lie(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let a;this.type===n.SAMPLER_2D_SHADOW?(UN.compareFunction=t.isReversedDepthBuffer()?nM:tM,a=UN):a=m9,t.setTexture2D(e||a,i)}function kie(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||v9,i)}function Uie(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||y9,i)}function Fie(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||g9,i)}function zie(n){switch(n){case 5126:return xie;case 35664:return _ie;case 35665:return Sie;case 35666:return wie;case 35674:return Eie;case 35675:return Aie;case 35676:return Tie;case 5124:case 35670:return Mie;case 35667:case 35671:return Cie;case 35668:case 35672:return Iie;case 35669:case 35673:return Rie;case 5125:return Pie;case 36294:return Nie;case 36295:return Oie;case 36296:return Die;case 35678:case 36198:case 36298:case 36306:case 35682:return Lie;case 35679:case 36299:case 36307:return kie;case 35680:case 36300:case 36308:case 36293:return Uie;case 36289:case 36303:case 36311:case 36292:return Fie}}function jie(n,e){n.uniform1fv(this.addr,e)}function Bie(n,e){const t=cy(e,this.size,2);n.uniform2fv(this.addr,t)}function Vie(n,e){const t=cy(e,this.size,3);n.uniform3fv(this.addr,t)}function Hie(n,e){const t=cy(e,this.size,4);n.uniform4fv(this.addr,t)}function Gie(n,e){const t=cy(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function qie(n,e){const t=cy(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Wie(n,e){const t=cy(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function $ie(n,e){n.uniform1iv(this.addr,e)}function Xie(n,e){n.uniform2iv(this.addr,e)}function Yie(n,e){n.uniform3iv(this.addr,e)}function Kie(n,e){n.uniform4iv(this.addr,e)}function Zie(n,e){n.uniform1uiv(this.addr,e)}function Qie(n,e){n.uniform2uiv(this.addr,e)}function Jie(n,e){n.uniform3uiv(this.addr,e)}function eae(n,e){n.uniform4uiv(this.addr,e)}function tae(n,e,t){const r=this.cache,i=e.length,a=MM(t,i);ya(r,a)||(n.uniform1iv(this.addr,a),ba(r,a));let s;this.type===n.SAMPLER_2D_SHADOW?s=UN:s=m9;for(let o=0;o!==i;++o)t.setTexture2D(e[o]||s,a[o])}function nae(n,e,t){const r=this.cache,i=e.length,a=MM(t,i);ya(r,a)||(n.uniform1iv(this.addr,a),ba(r,a));for(let s=0;s!==i;++s)t.setTexture3D(e[s]||v9,a[s])}function rae(n,e,t){const r=this.cache,i=e.length,a=MM(t,i);ya(r,a)||(n.uniform1iv(this.addr,a),ba(r,a));for(let s=0;s!==i;++s)t.setTextureCube(e[s]||y9,a[s])}function iae(n,e,t){const r=this.cache,i=e.length,a=MM(t,i);ya(r,a)||(n.uniform1iv(this.addr,a),ba(r,a));for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||g9,a[s])}function aae(n){switch(n){case 5126:return jie;case 35664:return Bie;case 35665:return Vie;case 35666:return Hie;case 35674:return Gie;case 35675:return qie;case 35676:return Wie;case 5124:case 35670:return $ie;case 35667:case 35671:return Xie;case 35668:case 35672:return Yie;case 35669:case 35673:return Kie;case 5125:return Zie;case 36294:return Qie;case 36295:return Jie;case 36296:return eae;case 35678:case 36198:case 36298:case 36306:case 35682:return tae;case 35679:case 36299:case 36307:return nae;case 35680:case 36300:case 36308:case 36293:return rae;case 36289:case 36303:case 36311:case 36292:return iae}}class sae{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=zie(t.type)}}class oae{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=aae(t.type)}}class lae{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let a=0,s=i.length;a!==s;++a){const o=i[a];o.setValue(e,t[o.id],r)}}}const dR=/(\w+)(\])?(\[|\.)?/g;function p2(n,e){n.seq.push(e),n.map[e.id]=e}function cae(n,e,t){const r=n.name,i=r.length;for(dR.lastIndex=0;;){const a=dR.exec(r),s=dR.lastIndex;let o=a[1];const c=a[2]==="]",f=a[3];if(c&&(o=o|0),f===void 0||f==="["&&s+2===i){p2(t,f===void 0?new sae(o,n,e):new oae(o,n,e));break}else{let p=t.map[o];p===void 0&&(p=new lae(o),p2(t,p)),t=p}}}class cE{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<r;++s){const o=e.getActiveUniform(t,s),c=e.getUniformLocation(t,o.name);cae(o,c,this)}const i=[],a=[];for(const s of this.seq)s.type===e.SAMPLER_2D_SHADOW||s.type===e.SAMPLER_CUBE_SHADOW||s.type===e.SAMPLER_2D_ARRAY_SHADOW?i.push(s):a.push(s);i.length>0&&(this.seq=i.concat(a))}setValue(e,t,r,i){const a=this.map[t];a!==void 0&&a.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let a=0,s=t.length;a!==s;++a){const o=t[a],c=r[o.id];c.needsUpdate!==!1&&o.setValue(e,c.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,a=e.length;i!==a;++i){const s=e[i];s.id in t&&r.push(s)}return r}}function m2(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const uae=37297;let fae=0;function dae(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let s=i;s<a;s++){const o=s+1;r.push(`${o===e?">":" "} ${o}: ${t[s]}`)}return r.join(`
`)}const g2=new Rn;function hae(n){Qn._getMatrix(g2,Qn.workingColorSpace,n);const e=`mat3( ${g2.elements.map(t=>t.toFixed(4))} )`;switch(Qn.getTransfer(n)){case Kx:return[e,"LinearTransferOETF"];case wr:return[e,"sRGBTransferOETF"];default:return kt("WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function v2(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),a=(n.getShaderInfoLog(e)||"").trim();if(r&&a==="")return"";const s=/ERROR: 0:(\d+)/.exec(a);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+a+`

`+dae(n.getShaderSource(e),o)}else return a}function pae(n,e){const t=hae(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}const mae={[g3]:"Linear",[v3]:"Reinhard",[y3]:"Cineon",[WT]:"ACESFilmic",[x3]:"AgX",[_3]:"Neutral",[b3]:"Custom"};function gae(n,e){const t=mae[e];return t===void 0?(kt("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+n+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Iw=new ue;function vae(){Qn.getLuminanceCoefficients(Iw);const n=Iw.x.toFixed(4),e=Iw.y.toFixed(4),t=Iw.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function yae(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(gx).join(`
`)}function bae(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function xae(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const a=n.getActiveAttrib(e,i),s=a.name;let o=1;a.type===n.FLOAT_MAT2&&(o=2),a.type===n.FLOAT_MAT3&&(o=3),a.type===n.FLOAT_MAT4&&(o=4),t[s]={type:a.type,location:n.getAttribLocation(e,s),locationSize:o}}return t}function gx(n){return n!==""}function y2(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function b2(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const _ae=/^[ \t]*#include +<([\w\d./]+)>/gm;function FN(n){return n.replace(_ae,wae)}const Sae=new Map;function wae(n,e){let t=kn[e];if(t===void 0){const r=Sae.get(e);if(r!==void 0)t=kn[r],kt('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return FN(t)}const Eae=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function x2(n){return n.replace(Eae,Aae)}function Aae(n,e,t,r){let i="";for(let a=parseInt(e);a<parseInt(t);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function _2(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const Tae={[wv]:"SHADOWMAP_TYPE_PCF",[Um]:"SHADOWMAP_TYPE_VSM"};function Mae(n){return Tae[n.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const Cae={[nf]:"ENVMAP_TYPE_CUBE",[sp]:"ENVMAP_TYPE_CUBE",[sy]:"ENVMAP_TYPE_CUBE_UV"};function Iae(n){return n.envMap===!1?"ENVMAP_TYPE_CUBE":Cae[n.envMapMode]||"ENVMAP_TYPE_CUBE"}const Rae={[sp]:"ENVMAP_MODE_REFRACTION"};function Pae(n){return n.envMap===!1?"ENVMAP_MODE_REFLECTION":Rae[n.envMapMode]||"ENVMAP_MODE_REFLECTION"}const Nae={[k_]:"ENVMAP_BLENDING_MULTIPLY",[KV]:"ENVMAP_BLENDING_MIX",[ZV]:"ENVMAP_BLENDING_ADD"};function Oae(n){return n.envMap===!1?"ENVMAP_BLENDING_NONE":Nae[n.combine]||"ENVMAP_BLENDING_NONE"}function Dae(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:r,maxMip:t}}function Lae(n,e,t,r){const i=n.getContext(),a=t.defines;let s=t.vertexShader,o=t.fragmentShader;const c=Mae(t),f=Iae(t),d=Pae(t),p=Oae(t),v=Dae(t),y=yae(t),x=bae(a),E=i.createProgram();let S,w,R=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(gx).join(`
`),S.length>0&&(S+=`
`),w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(gx).join(`
`),w.length>0&&(w+=`
`)):(S=[_2(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(gx).join(`
`),w=[_2(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+d:"",t.envMap?"#define "+p:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Jl?"#define TONE_MAPPING":"",t.toneMapping!==Jl?kn.tonemapping_pars_fragment:"",t.toneMapping!==Jl?gae("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",kn.colorspace_pars_fragment,pae("linearToOutputTexel",t.outputColorSpace),vae(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(gx).join(`
`)),s=FN(s),s=y2(s,t),s=b2(s,t),o=FN(o),o=y2(o,t),o=b2(o,t),s=x2(s),o=x2(o),t.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,S=[y,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,w=["#define varying in",t.glslVersion===MN?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===MN?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const N=R+S+s,O=R+w+o,z=m2(i,i.VERTEX_SHADER,N),k=m2(i,i.FRAGMENT_SHADER,O);i.attachShader(E,z),i.attachShader(E,k),t.index0AttributeName!==void 0?i.bindAttribLocation(E,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(E,0,"position"),i.linkProgram(E);function U(j){if(n.debug.checkShaderErrors){const B=i.getProgramInfoLog(E)||"",V=i.getShaderInfoLog(z)||"",Q=i.getShaderInfoLog(k)||"",J=B.trim(),W=V.trim(),$=Q.trim();let se=!0,ce=!0;if(i.getProgramParameter(E,i.LINK_STATUS)===!1)if(se=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,E,z,k);else{const fe=v2(i,z,"vertex"),Z=v2(i,k,"fragment");tn("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(E,i.VALIDATE_STATUS)+`

Material Name: `+j.name+`
Material Type: `+j.type+`

Program Info Log: `+J+`
`+fe+`
`+Z)}else J!==""?kt("WebGLProgram: Program Info Log:",J):(W===""||$==="")&&(ce=!1);ce&&(j.diagnostics={runnable:se,programLog:J,vertexShader:{log:W,prefix:S},fragmentShader:{log:$,prefix:w}})}i.deleteShader(z),i.deleteShader(k),P=new cE(i,E),C=xae(i,E)}let P;this.getUniforms=function(){return P===void 0&&U(this),P};let C;this.getAttributes=function(){return C===void 0&&U(this),C};let L=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=i.getProgramParameter(E,uae)),L},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(E),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=fae++,this.cacheKey=e,this.usedTimes=1,this.program=E,this.vertexShader=z,this.fragmentShader=k,this}let kae=0;class Uae{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),a=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new Fae(e),t.set(e,r)),r}}class Fae{constructor(e){this.id=kae++,this.code=e,this.usedTimes=0}}function zae(n,e,t,r,i,a,s){const o=new Fv,c=new Uae,f=new Set,d=[],p=new Map,v=i.logarithmicDepthBuffer;let y=i.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E(C){return f.add(C),C===0?"uv":`uv${C}`}function S(C,L,j,B,V){const Q=B.fog,J=V.geometry,W=C.isMeshStandardMaterial?B.environment:null,$=(C.isMeshStandardMaterial?t:e).get(C.envMap||W),se=$&&$.mapping===sy?$.image.height:null,ce=x[C.type];C.precision!==null&&(y=i.getMaxPrecision(C.precision),y!==C.precision&&kt("WebGLProgram.getParameters:",C.precision,"not supported, using",y,"instead."));const fe=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,Z=fe!==void 0?fe.length:0;let re=0;J.morphAttributes.position!==void 0&&(re=1),J.morphAttributes.normal!==void 0&&(re=2),J.morphAttributes.color!==void 0&&(re=3);let de,ve,pe,ye;if(ce){const Kt=kc[ce];de=Kt.vertexShader,ve=Kt.fragmentShader}else de=C.vertexShader,ve=C.fragmentShader,c.update(C),pe=c.getVertexShaderID(C),ye=c.getFragmentShaderID(C);const Ee=n.getRenderTarget(),Xe=n.state.buffers.depth.getReversed(),me=V.isInstancedMesh===!0,qe=V.isBatchedMesh===!0,mt=!!C.map,Ue=!!C.matcap,De=!!$,Re=!!C.aoMap,Me=!!C.lightMap,Fe=!!C.bumpMap,Ze=!!C.normalMap,oe=!!C.displacementMap,yt=!!C.emissiveMap,at=!!C.metalnessMap,Tt=!!C.roughnessMap,ct=C.anisotropy>0,ae=C.clearcoat>0,Y=C.dispersion>0,xe=C.iridescence>0,ke=C.sheen>0,et=C.transmission>0,Ne=ct&&!!C.anisotropyMap,It=ae&&!!C.clearcoatMap,rt=ae&&!!C.clearcoatNormalMap,Pt=ae&&!!C.clearcoatRoughnessMap,Ot=xe&&!!C.iridescenceMap,it=xe&&!!C.iridescenceThicknessMap,tt=ke&&!!C.sheenColorMap,Mt=ke&&!!C.sheenRoughnessMap,he=!!C.specularMap,Le=!!C.specularColorMap,bt=!!C.specularIntensityMap,ge=et&&!!C.transmissionMap,dt=et&&!!C.thicknessMap,pt=!!C.gradientMap,ht=!!C.alphaMap,st=C.alphaTest>0,Qe=!!C.alphaHash,gt=!!C.extensions;let Wt=Jl;C.toneMapped&&(Ee===null||Ee.isXRRenderTarget===!0)&&(Wt=n.toneMapping);const nn={shaderID:ce,shaderType:C.type,shaderName:C.name,vertexShader:de,fragmentShader:ve,defines:C.defines,customVertexShaderID:pe,customFragmentShaderID:ye,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:y,batching:qe,batchingColor:qe&&V._colorsTexture!==null,instancing:me,instancingColor:me&&V.instanceColor!==null,instancingMorph:me&&V.morphTexture!==null,outputColorSpace:Ee===null?n.outputColorSpace:Ee.isXRRenderTarget===!0?Ee.texture.colorSpace:op,alphaToCoverage:!!C.alphaToCoverage,map:mt,matcap:Ue,envMap:De,envMapMode:De&&$.mapping,envMapCubeUVHeight:se,aoMap:Re,lightMap:Me,bumpMap:Fe,normalMap:Ze,displacementMap:oe,emissiveMap:yt,normalMapObjectSpace:Ze&&C.normalMapType===r8,normalMapTangentSpace:Ze&&C.normalMapType===xp,metalnessMap:at,roughnessMap:Tt,anisotropy:ct,anisotropyMap:Ne,clearcoat:ae,clearcoatMap:It,clearcoatNormalMap:rt,clearcoatRoughnessMap:Pt,dispersion:Y,iridescence:xe,iridescenceMap:Ot,iridescenceThicknessMap:it,sheen:ke,sheenColorMap:tt,sheenRoughnessMap:Mt,specularMap:he,specularColorMap:Le,specularIntensityMap:bt,transmission:et,transmissionMap:ge,thicknessMap:dt,gradientMap:pt,opaque:C.transparent===!1&&C.blending===Ym&&C.alphaToCoverage===!1,alphaMap:ht,alphaTest:st,alphaHash:Qe,combine:C.combine,mapUv:mt&&E(C.map.channel),aoMapUv:Re&&E(C.aoMap.channel),lightMapUv:Me&&E(C.lightMap.channel),bumpMapUv:Fe&&E(C.bumpMap.channel),normalMapUv:Ze&&E(C.normalMap.channel),displacementMapUv:oe&&E(C.displacementMap.channel),emissiveMapUv:yt&&E(C.emissiveMap.channel),metalnessMapUv:at&&E(C.metalnessMap.channel),roughnessMapUv:Tt&&E(C.roughnessMap.channel),anisotropyMapUv:Ne&&E(C.anisotropyMap.channel),clearcoatMapUv:It&&E(C.clearcoatMap.channel),clearcoatNormalMapUv:rt&&E(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Pt&&E(C.clearcoatRoughnessMap.channel),iridescenceMapUv:Ot&&E(C.iridescenceMap.channel),iridescenceThicknessMapUv:it&&E(C.iridescenceThicknessMap.channel),sheenColorMapUv:tt&&E(C.sheenColorMap.channel),sheenRoughnessMapUv:Mt&&E(C.sheenRoughnessMap.channel),specularMapUv:he&&E(C.specularMap.channel),specularColorMapUv:Le&&E(C.specularColorMap.channel),specularIntensityMapUv:bt&&E(C.specularIntensityMap.channel),transmissionMapUv:ge&&E(C.transmissionMap.channel),thicknessMapUv:dt&&E(C.thicknessMap.channel),alphaMapUv:ht&&E(C.alphaMap.channel),vertexTangents:!!J.attributes.tangent&&(Ze||ct),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!J.attributes.color&&J.attributes.color.itemSize===4,pointsUvs:V.isPoints===!0&&!!J.attributes.uv&&(mt||ht),fog:!!Q,useFog:C.fog===!0,fogExp2:!!Q&&Q.isFogExp2,flatShading:C.flatShading===!0&&C.wireframe===!1,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:v,reversedDepthBuffer:Xe,skinning:V.isSkinnedMesh===!0,morphTargets:J.morphAttributes.position!==void 0,morphNormals:J.morphAttributes.normal!==void 0,morphColors:J.morphAttributes.color!==void 0,morphTargetsCount:Z,morphTextureStride:re,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&j.length>0,shadowMapType:n.shadowMap.type,toneMapping:Wt,decodeVideoTexture:mt&&C.map.isVideoTexture===!0&&Qn.getTransfer(C.map.colorSpace)===wr,decodeVideoTextureEmissive:yt&&C.emissiveMap.isVideoTexture===!0&&Qn.getTransfer(C.emissiveMap.colorSpace)===wr,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===Bu,flipSided:C.side===oo,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionClipCullDistance:gt&&C.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(gt&&C.extensions.multiDraw===!0||qe)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return nn.vertexUv1s=f.has(1),nn.vertexUv2s=f.has(2),nn.vertexUv3s=f.has(3),f.clear(),nn}function w(C){const L=[];if(C.shaderID?L.push(C.shaderID):(L.push(C.customVertexShaderID),L.push(C.customFragmentShaderID)),C.defines!==void 0)for(const j in C.defines)L.push(j),L.push(C.defines[j]);return C.isRawShaderMaterial===!1&&(R(L,C),N(L,C),L.push(n.outputColorSpace)),L.push(C.customProgramCacheKey),L.join()}function R(C,L){C.push(L.precision),C.push(L.outputColorSpace),C.push(L.envMapMode),C.push(L.envMapCubeUVHeight),C.push(L.mapUv),C.push(L.alphaMapUv),C.push(L.lightMapUv),C.push(L.aoMapUv),C.push(L.bumpMapUv),C.push(L.normalMapUv),C.push(L.displacementMapUv),C.push(L.emissiveMapUv),C.push(L.metalnessMapUv),C.push(L.roughnessMapUv),C.push(L.anisotropyMapUv),C.push(L.clearcoatMapUv),C.push(L.clearcoatNormalMapUv),C.push(L.clearcoatRoughnessMapUv),C.push(L.iridescenceMapUv),C.push(L.iridescenceThicknessMapUv),C.push(L.sheenColorMapUv),C.push(L.sheenRoughnessMapUv),C.push(L.specularMapUv),C.push(L.specularColorMapUv),C.push(L.specularIntensityMapUv),C.push(L.transmissionMapUv),C.push(L.thicknessMapUv),C.push(L.combine),C.push(L.fogExp2),C.push(L.sizeAttenuation),C.push(L.morphTargetsCount),C.push(L.morphAttributeCount),C.push(L.numDirLights),C.push(L.numPointLights),C.push(L.numSpotLights),C.push(L.numSpotLightMaps),C.push(L.numHemiLights),C.push(L.numRectAreaLights),C.push(L.numDirLightShadows),C.push(L.numPointLightShadows),C.push(L.numSpotLightShadows),C.push(L.numSpotLightShadowsWithMaps),C.push(L.numLightProbes),C.push(L.shadowMapType),C.push(L.toneMapping),C.push(L.numClippingPlanes),C.push(L.numClipIntersection),C.push(L.depthPacking)}function N(C,L){o.disableAll(),L.instancing&&o.enable(0),L.instancingColor&&o.enable(1),L.instancingMorph&&o.enable(2),L.matcap&&o.enable(3),L.envMap&&o.enable(4),L.normalMapObjectSpace&&o.enable(5),L.normalMapTangentSpace&&o.enable(6),L.clearcoat&&o.enable(7),L.iridescence&&o.enable(8),L.alphaTest&&o.enable(9),L.vertexColors&&o.enable(10),L.vertexAlphas&&o.enable(11),L.vertexUv1s&&o.enable(12),L.vertexUv2s&&o.enable(13),L.vertexUv3s&&o.enable(14),L.vertexTangents&&o.enable(15),L.anisotropy&&o.enable(16),L.alphaHash&&o.enable(17),L.batching&&o.enable(18),L.dispersion&&o.enable(19),L.batchingColor&&o.enable(20),L.gradientMap&&o.enable(21),C.push(o.mask),o.disableAll(),L.fog&&o.enable(0),L.useFog&&o.enable(1),L.flatShading&&o.enable(2),L.logarithmicDepthBuffer&&o.enable(3),L.reversedDepthBuffer&&o.enable(4),L.skinning&&o.enable(5),L.morphTargets&&o.enable(6),L.morphNormals&&o.enable(7),L.morphColors&&o.enable(8),L.premultipliedAlpha&&o.enable(9),L.shadowMapEnabled&&o.enable(10),L.doubleSided&&o.enable(11),L.flipSided&&o.enable(12),L.useDepthPacking&&o.enable(13),L.dithering&&o.enable(14),L.transmission&&o.enable(15),L.sheen&&o.enable(16),L.opaque&&o.enable(17),L.pointsUvs&&o.enable(18),L.decodeVideoTexture&&o.enable(19),L.decodeVideoTextureEmissive&&o.enable(20),L.alphaToCoverage&&o.enable(21),C.push(o.mask)}function O(C){const L=x[C.type];let j;if(L){const B=kc[L];j=v8.clone(B.uniforms)}else j=C.uniforms;return j}function z(C,L){let j=p.get(L);return j!==void 0?++j.usedTimes:(j=new Lae(n,L,C,a),d.push(j),p.set(L,j)),j}function k(C){if(--C.usedTimes===0){const L=d.indexOf(C);d[L]=d[d.length-1],d.pop(),p.delete(C.cacheKey),C.destroy()}}function U(C){c.remove(C)}function P(){c.dispose()}return{getParameters:S,getProgramCacheKey:w,getUniforms:O,acquireProgram:z,releaseProgram:k,releaseShaderCache:U,programs:d,dispose:P}}function jae(){let n=new WeakMap;function e(s){return n.has(s)}function t(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function r(s){n.delete(s)}function i(s,o,c){n.get(s)[o]=c}function a(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:a}}function Bae(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function S2(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function w2(){const n=[];let e=0;const t=[],r=[],i=[];function a(){e=0,t.length=0,r.length=0,i.length=0}function s(p,v,y,x,E,S){let w=n[e];return w===void 0?(w={id:p.id,object:p,geometry:v,material:y,groupOrder:x,renderOrder:p.renderOrder,z:E,group:S},n[e]=w):(w.id=p.id,w.object=p,w.geometry=v,w.material=y,w.groupOrder=x,w.renderOrder=p.renderOrder,w.z=E,w.group=S),e++,w}function o(p,v,y,x,E,S){const w=s(p,v,y,x,E,S);y.transmission>0?r.push(w):y.transparent===!0?i.push(w):t.push(w)}function c(p,v,y,x,E,S){const w=s(p,v,y,x,E,S);y.transmission>0?r.unshift(w):y.transparent===!0?i.unshift(w):t.unshift(w)}function f(p,v){t.length>1&&t.sort(p||Bae),r.length>1&&r.sort(v||S2),i.length>1&&i.sort(v||S2)}function d(){for(let p=e,v=n.length;p<v;p++){const y=n[p];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:r,transparent:i,init:a,push:o,unshift:c,finish:d,sort:f}}function Vae(){let n=new WeakMap;function e(r,i){const a=n.get(r);let s;return a===void 0?(s=new w2,n.set(r,[s])):i>=a.length?(s=new w2,a.push(s)):s=a[i],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function Hae(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ue,color:new Bt};break;case"SpotLight":t={position:new ue,direction:new ue,color:new Bt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ue,color:new Bt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ue,skyColor:new Bt,groundColor:new Bt};break;case"RectAreaLight":t={color:new Bt,position:new ue,halfWidth:new ue,halfHeight:new ue};break}return n[e.id]=t,t}}}function Gae(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let qae=0;function Wae(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function $ae(n){const e=new Hae,t=Gae(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)r.probe.push(new ue);const i=new ue,a=new yn,s=new yn;function o(f){let d=0,p=0,v=0;for(let C=0;C<9;C++)r.probe[C].set(0,0,0);let y=0,x=0,E=0,S=0,w=0,R=0,N=0,O=0,z=0,k=0,U=0;f.sort(Wae);for(let C=0,L=f.length;C<L;C++){const j=f[C],B=j.color,V=j.intensity,Q=j.distance;let J=null;if(j.shadow&&j.shadow.map&&(j.shadow.map.texture.format===og?J=j.shadow.map.texture:J=j.shadow.map.depthTexture||j.shadow.map.texture),j.isAmbientLight)d+=B.r*V,p+=B.g*V,v+=B.b*V;else if(j.isLightProbe){for(let W=0;W<9;W++)r.probe[W].addScaledVector(j.sh.coefficients[W],V);U++}else if(j.isDirectionalLight){const W=e.get(j);if(W.color.copy(j.color).multiplyScalar(j.intensity),j.castShadow){const $=j.shadow,se=t.get(j);se.shadowIntensity=$.intensity,se.shadowBias=$.bias,se.shadowNormalBias=$.normalBias,se.shadowRadius=$.radius,se.shadowMapSize=$.mapSize,r.directionalShadow[y]=se,r.directionalShadowMap[y]=J,r.directionalShadowMatrix[y]=j.shadow.matrix,R++}r.directional[y]=W,y++}else if(j.isSpotLight){const W=e.get(j);W.position.setFromMatrixPosition(j.matrixWorld),W.color.copy(B).multiplyScalar(V),W.distance=Q,W.coneCos=Math.cos(j.angle),W.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),W.decay=j.decay,r.spot[E]=W;const $=j.shadow;if(j.map&&(r.spotLightMap[z]=j.map,z++,$.updateMatrices(j),j.castShadow&&k++),r.spotLightMatrix[E]=$.matrix,j.castShadow){const se=t.get(j);se.shadowIntensity=$.intensity,se.shadowBias=$.bias,se.shadowNormalBias=$.normalBias,se.shadowRadius=$.radius,se.shadowMapSize=$.mapSize,r.spotShadow[E]=se,r.spotShadowMap[E]=J,O++}E++}else if(j.isRectAreaLight){const W=e.get(j);W.color.copy(B).multiplyScalar(V),W.halfWidth.set(j.width*.5,0,0),W.halfHeight.set(0,j.height*.5,0),r.rectArea[S]=W,S++}else if(j.isPointLight){const W=e.get(j);if(W.color.copy(j.color).multiplyScalar(j.intensity),W.distance=j.distance,W.decay=j.decay,j.castShadow){const $=j.shadow,se=t.get(j);se.shadowIntensity=$.intensity,se.shadowBias=$.bias,se.shadowNormalBias=$.normalBias,se.shadowRadius=$.radius,se.shadowMapSize=$.mapSize,se.shadowCameraNear=$.camera.near,se.shadowCameraFar=$.camera.far,r.pointShadow[x]=se,r.pointShadowMap[x]=J,r.pointShadowMatrix[x]=j.shadow.matrix,N++}r.point[x]=W,x++}else if(j.isHemisphereLight){const W=e.get(j);W.skyColor.copy(j.color).multiplyScalar(V),W.groundColor.copy(j.groundColor).multiplyScalar(V),r.hemi[w]=W,w++}}S>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ut.LTC_FLOAT_1,r.rectAreaLTC2=Ut.LTC_FLOAT_2):(r.rectAreaLTC1=Ut.LTC_HALF_1,r.rectAreaLTC2=Ut.LTC_HALF_2)),r.ambient[0]=d,r.ambient[1]=p,r.ambient[2]=v;const P=r.hash;(P.directionalLength!==y||P.pointLength!==x||P.spotLength!==E||P.rectAreaLength!==S||P.hemiLength!==w||P.numDirectionalShadows!==R||P.numPointShadows!==N||P.numSpotShadows!==O||P.numSpotMaps!==z||P.numLightProbes!==U)&&(r.directional.length=y,r.spot.length=E,r.rectArea.length=S,r.point.length=x,r.hemi.length=w,r.directionalShadow.length=R,r.directionalShadowMap.length=R,r.pointShadow.length=N,r.pointShadowMap.length=N,r.spotShadow.length=O,r.spotShadowMap.length=O,r.directionalShadowMatrix.length=R,r.pointShadowMatrix.length=N,r.spotLightMatrix.length=O+z-k,r.spotLightMap.length=z,r.numSpotLightShadowsWithMaps=k,r.numLightProbes=U,P.directionalLength=y,P.pointLength=x,P.spotLength=E,P.rectAreaLength=S,P.hemiLength=w,P.numDirectionalShadows=R,P.numPointShadows=N,P.numSpotShadows=O,P.numSpotMaps=z,P.numLightProbes=U,r.version=qae++)}function c(f,d){let p=0,v=0,y=0,x=0,E=0;const S=d.matrixWorldInverse;for(let w=0,R=f.length;w<R;w++){const N=f[w];if(N.isDirectionalLight){const O=r.directional[p];O.direction.setFromMatrixPosition(N.matrixWorld),i.setFromMatrixPosition(N.target.matrixWorld),O.direction.sub(i),O.direction.transformDirection(S),p++}else if(N.isSpotLight){const O=r.spot[y];O.position.setFromMatrixPosition(N.matrixWorld),O.position.applyMatrix4(S),O.direction.setFromMatrixPosition(N.matrixWorld),i.setFromMatrixPosition(N.target.matrixWorld),O.direction.sub(i),O.direction.transformDirection(S),y++}else if(N.isRectAreaLight){const O=r.rectArea[x];O.position.setFromMatrixPosition(N.matrixWorld),O.position.applyMatrix4(S),s.identity(),a.copy(N.matrixWorld),a.premultiply(S),s.extractRotation(a),O.halfWidth.set(N.width*.5,0,0),O.halfHeight.set(0,N.height*.5,0),O.halfWidth.applyMatrix4(s),O.halfHeight.applyMatrix4(s),x++}else if(N.isPointLight){const O=r.point[v];O.position.setFromMatrixPosition(N.matrixWorld),O.position.applyMatrix4(S),v++}else if(N.isHemisphereLight){const O=r.hemi[E];O.direction.setFromMatrixPosition(N.matrixWorld),O.direction.transformDirection(S),E++}}}return{setup:o,setupView:c,state:r}}function E2(n){const e=new $ae(n),t=[],r=[];function i(d){f.camera=d,t.length=0,r.length=0}function a(d){t.push(d)}function s(d){r.push(d)}function o(){e.setup(t)}function c(d){e.setupView(t,d)}const f={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:f,setupLights:o,setupLightsView:c,pushLight:a,pushShadow:s}}function Xae(n){let e=new WeakMap;function t(i,a=0){const s=e.get(i);let o;return s===void 0?(o=new E2(n),e.set(i,[o])):a>=s.length?(o=new E2(n),s.push(o)):o=s[a],o}function r(){e=new WeakMap}return{get:t,dispose:r}}const Yae=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Kae=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,Zae=[new ue(1,0,0),new ue(-1,0,0),new ue(0,1,0),new ue(0,-1,0),new ue(0,0,1),new ue(0,0,-1)],Qae=[new ue(0,-1,0),new ue(0,-1,0),new ue(0,0,1),new ue(0,0,-1),new ue(0,-1,0),new ue(0,-1,0)],A2=new yn,ex=new ue,hR=new ue;function Jae(n,e,t){let r=new oy;const i=new lt,a=new lt,s=new zr,o=new X3,c=new Y3,f={},d=t.maxTextureSize,p={[vd]:oo,[oo]:vd,[Bu]:Bu},v=new nc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new lt},radius:{value:4}},vertexShader:Yae,fragmentShader:Kae}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const x=new xn;x.setAttribute("position",new yr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new sa(x,v),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=wv;let w=this.type;this.render=function(k,U,P){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||k.length===0)return;k.type===Ex&&(kt("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),k.type=wv);const C=n.getRenderTarget(),L=n.getActiveCubeFace(),j=n.getActiveMipmapLevel(),B=n.state;B.setBlending(Yu),B.buffers.depth.getReversed()===!0?B.buffers.color.setClear(0,0,0,0):B.buffers.color.setClear(1,1,1,1),B.buffers.depth.setTest(!0),B.setScissorTest(!1);const V=w!==this.type;V&&U.traverse(function(Q){Q.material&&(Array.isArray(Q.material)?Q.material.forEach(J=>J.needsUpdate=!0):Q.material.needsUpdate=!0)});for(let Q=0,J=k.length;Q<J;Q++){const W=k[Q],$=W.shadow;if($===void 0){kt("WebGLShadowMap:",W,"has no shadow.");continue}if($.autoUpdate===!1&&$.needsUpdate===!1)continue;i.copy($.mapSize);const se=$.getFrameExtents();if(i.multiply(se),a.copy($.mapSize),(i.x>d||i.y>d)&&(i.x>d&&(a.x=Math.floor(d/se.x),i.x=a.x*se.x,$.mapSize.x=a.x),i.y>d&&(a.y=Math.floor(d/se.y),i.y=a.y*se.y,$.mapSize.y=a.y)),$.map===null||V===!0){if($.map!==null&&($.map.depthTexture!==null&&($.map.depthTexture.dispose(),$.map.depthTexture=null),$.map.dispose()),this.type===Um){if(W.isPointLight){kt("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}$.map=new pl(i.x,i.y,{format:og,type:rf,minFilter:ti,magFilter:ti,generateMipmaps:!1}),$.map.texture.name=W.name+".shadowMap",$.map.depthTexture=new Bv(i.x,i.y,io),$.map.depthTexture.name=W.name+".shadowMapDepth",$.map.depthTexture.format=af,$.map.depthTexture.compareFunction=null,$.map.depthTexture.minFilter=Bi,$.map.depthTexture.magFilter=Bi}else{W.isPointLight?($.map=new D3(i.x),$.map.depthTexture=new C8(i.x,tc)):($.map=new pl(i.x,i.y),$.map.depthTexture=new Bv(i.x,i.y,tc)),$.map.depthTexture.name=W.name+".shadowMap",$.map.depthTexture.format=af;const fe=n.state.buffers.depth.getReversed();this.type===wv?($.map.depthTexture.compareFunction=fe?nM:tM,$.map.depthTexture.minFilter=ti,$.map.depthTexture.magFilter=ti):($.map.depthTexture.compareFunction=null,$.map.depthTexture.minFilter=Bi,$.map.depthTexture.magFilter=Bi)}$.camera.updateProjectionMatrix()}const ce=$.map.isWebGLCubeRenderTarget?6:1;for(let fe=0;fe<ce;fe++){if($.map.isWebGLCubeRenderTarget)n.setRenderTarget($.map,fe),n.clear();else{fe===0&&(n.setRenderTarget($.map),n.clear());const Z=$.getViewport(fe);s.set(a.x*Z.x,a.y*Z.y,a.x*Z.z,a.y*Z.w),B.viewport(s)}if(W.isPointLight){const Z=$.camera,re=$.matrix,de=W.distance||Z.far;de!==Z.far&&(Z.far=de,Z.updateProjectionMatrix()),ex.setFromMatrixPosition(W.matrixWorld),Z.position.copy(ex),hR.copy(Z.position),hR.add(Zae[fe]),Z.up.copy(Qae[fe]),Z.lookAt(hR),Z.updateMatrixWorld(),re.makeTranslation(-ex.x,-ex.y,-ex.z),A2.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse),$._frustum.setFromProjectionMatrix(A2,Z.coordinateSystem,Z.reversedDepth)}else $.updateMatrices(W);r=$.getFrustum(),O(U,P,$.camera,W,this.type)}$.isPointLightShadow!==!0&&this.type===Um&&R($,P),$.needsUpdate=!1}w=this.type,S.needsUpdate=!1,n.setRenderTarget(C,L,j)};function R(k,U){const P=e.update(E);v.defines.VSM_SAMPLES!==k.blurSamples&&(v.defines.VSM_SAMPLES=k.blurSamples,y.defines.VSM_SAMPLES=k.blurSamples,v.needsUpdate=!0,y.needsUpdate=!0),k.mapPass===null&&(k.mapPass=new pl(i.x,i.y,{format:og,type:rf})),v.uniforms.shadow_pass.value=k.map.depthTexture,v.uniforms.resolution.value=k.mapSize,v.uniforms.radius.value=k.radius,n.setRenderTarget(k.mapPass),n.clear(),n.renderBufferDirect(U,null,P,v,E,null),y.uniforms.shadow_pass.value=k.mapPass.texture,y.uniforms.resolution.value=k.mapSize,y.uniforms.radius.value=k.radius,n.setRenderTarget(k.map),n.clear(),n.renderBufferDirect(U,null,P,y,E,null)}function N(k,U,P,C){let L=null;const j=P.isPointLight===!0?k.customDistanceMaterial:k.customDepthMaterial;if(j!==void 0)L=j;else if(L=P.isPointLight===!0?c:o,n.localClippingEnabled&&U.clipShadows===!0&&Array.isArray(U.clippingPlanes)&&U.clippingPlanes.length!==0||U.displacementMap&&U.displacementScale!==0||U.alphaMap&&U.alphaTest>0||U.map&&U.alphaTest>0||U.alphaToCoverage===!0){const B=L.uuid,V=U.uuid;let Q=f[B];Q===void 0&&(Q={},f[B]=Q);let J=Q[V];J===void 0&&(J=L.clone(),Q[V]=J,U.addEventListener("dispose",z)),L=J}if(L.visible=U.visible,L.wireframe=U.wireframe,C===Um?L.side=U.shadowSide!==null?U.shadowSide:U.side:L.side=U.shadowSide!==null?U.shadowSide:p[U.side],L.alphaMap=U.alphaMap,L.alphaTest=U.alphaToCoverage===!0?.5:U.alphaTest,L.map=U.map,L.clipShadows=U.clipShadows,L.clippingPlanes=U.clippingPlanes,L.clipIntersection=U.clipIntersection,L.displacementMap=U.displacementMap,L.displacementScale=U.displacementScale,L.displacementBias=U.displacementBias,L.wireframeLinewidth=U.wireframeLinewidth,L.linewidth=U.linewidth,P.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const B=n.properties.get(L);B.light=P}return L}function O(k,U,P,C,L){if(k.visible===!1)return;if(k.layers.test(U.layers)&&(k.isMesh||k.isLine||k.isPoints)&&(k.castShadow||k.receiveShadow&&L===Um)&&(!k.frustumCulled||r.intersectsObject(k))){k.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,k.matrixWorld);const V=e.update(k),Q=k.material;if(Array.isArray(Q)){const J=V.groups;for(let W=0,$=J.length;W<$;W++){const se=J[W],ce=Q[se.materialIndex];if(ce&&ce.visible){const fe=N(k,ce,C,L);k.onBeforeShadow(n,k,U,P,V,fe,se),n.renderBufferDirect(P,null,V,fe,k,se),k.onAfterShadow(n,k,U,P,V,fe,se)}}}else if(Q.visible){const J=N(k,Q,C,L);k.onBeforeShadow(n,k,U,P,V,J,null),n.renderBufferDirect(P,null,V,J,k,null),k.onAfterShadow(n,k,U,P,V,J,null)}}const B=k.children;for(let V=0,Q=B.length;V<Q;V++)O(B[V],U,P,C,L)}function z(k){k.target.removeEventListener("dispose",z);for(const P in f){const C=f[P],L=k.target.uuid;L in C&&(C[L].dispose(),delete C[L])}}}const ese={[NE]:OE,[DE]:UE,[LE]:FE,[sg]:kE,[OE]:NE,[UE]:DE,[FE]:LE,[kE]:sg};function tse(n,e){function t(){let ge=!1;const dt=new zr;let pt=null;const ht=new zr(0,0,0,0);return{setMask:function(st){pt!==st&&!ge&&(n.colorMask(st,st,st,st),pt=st)},setLocked:function(st){ge=st},setClear:function(st,Qe,gt,Wt,nn){nn===!0&&(st*=Wt,Qe*=Wt,gt*=Wt),dt.set(st,Qe,gt,Wt),ht.equals(dt)===!1&&(n.clearColor(st,Qe,gt,Wt),ht.copy(dt))},reset:function(){ge=!1,pt=null,ht.set(-1,0,0,0)}}}function r(){let ge=!1,dt=!1,pt=null,ht=null,st=null;return{setReversed:function(Qe){if(dt!==Qe){const gt=e.get("EXT_clip_control");Qe?gt.clipControlEXT(gt.LOWER_LEFT_EXT,gt.ZERO_TO_ONE_EXT):gt.clipControlEXT(gt.LOWER_LEFT_EXT,gt.NEGATIVE_ONE_TO_ONE_EXT),dt=Qe;const Wt=st;st=null,this.setClear(Wt)}},getReversed:function(){return dt},setTest:function(Qe){Qe?Ee(n.DEPTH_TEST):Xe(n.DEPTH_TEST)},setMask:function(Qe){pt!==Qe&&!ge&&(n.depthMask(Qe),pt=Qe)},setFunc:function(Qe){if(dt&&(Qe=ese[Qe]),ht!==Qe){switch(Qe){case NE:n.depthFunc(n.NEVER);break;case OE:n.depthFunc(n.ALWAYS);break;case DE:n.depthFunc(n.LESS);break;case sg:n.depthFunc(n.LEQUAL);break;case LE:n.depthFunc(n.EQUAL);break;case kE:n.depthFunc(n.GEQUAL);break;case UE:n.depthFunc(n.GREATER);break;case FE:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ht=Qe}},setLocked:function(Qe){ge=Qe},setClear:function(Qe){st!==Qe&&(dt&&(Qe=1-Qe),n.clearDepth(Qe),st=Qe)},reset:function(){ge=!1,pt=null,ht=null,st=null,dt=!1}}}function i(){let ge=!1,dt=null,pt=null,ht=null,st=null,Qe=null,gt=null,Wt=null,nn=null;return{setTest:function(Kt){ge||(Kt?Ee(n.STENCIL_TEST):Xe(n.STENCIL_TEST))},setMask:function(Kt){dt!==Kt&&!ge&&(n.stencilMask(Kt),dt=Kt)},setFunc:function(Kt,Ar,Tr){(pt!==Kt||ht!==Ar||st!==Tr)&&(n.stencilFunc(Kt,Ar,Tr),pt=Kt,ht=Ar,st=Tr)},setOp:function(Kt,Ar,Tr){(Qe!==Kt||gt!==Ar||Wt!==Tr)&&(n.stencilOp(Kt,Ar,Tr),Qe=Kt,gt=Ar,Wt=Tr)},setLocked:function(Kt){ge=Kt},setClear:function(Kt){nn!==Kt&&(n.clearStencil(Kt),nn=Kt)},reset:function(){ge=!1,dt=null,pt=null,ht=null,st=null,Qe=null,gt=null,Wt=null,nn=null}}}const a=new t,s=new r,o=new i,c=new WeakMap,f=new WeakMap;let d={},p={},v=new WeakMap,y=[],x=null,E=!1,S=null,w=null,R=null,N=null,O=null,z=null,k=null,U=new Bt(0,0,0),P=0,C=!1,L=null,j=null,B=null,V=null,Q=null;const J=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let W=!1,$=0;const se=n.getParameter(n.VERSION);se.indexOf("WebGL")!==-1?($=parseFloat(/^WebGL (\d)/.exec(se)[1]),W=$>=1):se.indexOf("OpenGL ES")!==-1&&($=parseFloat(/^OpenGL ES (\d)/.exec(se)[1]),W=$>=2);let ce=null,fe={};const Z=n.getParameter(n.SCISSOR_BOX),re=n.getParameter(n.VIEWPORT),de=new zr().fromArray(Z),ve=new zr().fromArray(re);function pe(ge,dt,pt,ht){const st=new Uint8Array(4),Qe=n.createTexture();n.bindTexture(ge,Qe),n.texParameteri(ge,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ge,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let gt=0;gt<pt;gt++)ge===n.TEXTURE_3D||ge===n.TEXTURE_2D_ARRAY?n.texImage3D(dt,0,n.RGBA,1,1,ht,0,n.RGBA,n.UNSIGNED_BYTE,st):n.texImage2D(dt+gt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,st);return Qe}const ye={};ye[n.TEXTURE_2D]=pe(n.TEXTURE_2D,n.TEXTURE_2D,1),ye[n.TEXTURE_CUBE_MAP]=pe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ye[n.TEXTURE_2D_ARRAY]=pe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ye[n.TEXTURE_3D]=pe(n.TEXTURE_3D,n.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Ee(n.DEPTH_TEST),s.setFunc(sg),Fe(!1),Ze(_N),Ee(n.CULL_FACE),Re(Yu);function Ee(ge){d[ge]!==!0&&(n.enable(ge),d[ge]=!0)}function Xe(ge){d[ge]!==!1&&(n.disable(ge),d[ge]=!1)}function me(ge,dt){return p[ge]!==dt?(n.bindFramebuffer(ge,dt),p[ge]=dt,ge===n.DRAW_FRAMEBUFFER&&(p[n.FRAMEBUFFER]=dt),ge===n.FRAMEBUFFER&&(p[n.DRAW_FRAMEBUFFER]=dt),!0):!1}function qe(ge,dt){let pt=y,ht=!1;if(ge){pt=v.get(dt),pt===void 0&&(pt=[],v.set(dt,pt));const st=ge.textures;if(pt.length!==st.length||pt[0]!==n.COLOR_ATTACHMENT0){for(let Qe=0,gt=st.length;Qe<gt;Qe++)pt[Qe]=n.COLOR_ATTACHMENT0+Qe;pt.length=st.length,ht=!0}}else pt[0]!==n.BACK&&(pt[0]=n.BACK,ht=!0);ht&&n.drawBuffers(pt)}function mt(ge){return x!==ge?(n.useProgram(ge),x=ge,!0):!1}const Ue={[jh]:n.FUNC_ADD,[OV]:n.FUNC_SUBTRACT,[DV]:n.FUNC_REVERSE_SUBTRACT};Ue[LV]=n.MIN,Ue[kV]=n.MAX;const De={[UV]:n.ZERO,[FV]:n.ONE,[zV]:n.SRC_COLOR,[RE]:n.SRC_ALPHA,[qV]:n.SRC_ALPHA_SATURATE,[HV]:n.DST_COLOR,[BV]:n.DST_ALPHA,[jV]:n.ONE_MINUS_SRC_COLOR,[PE]:n.ONE_MINUS_SRC_ALPHA,[GV]:n.ONE_MINUS_DST_COLOR,[VV]:n.ONE_MINUS_DST_ALPHA,[WV]:n.CONSTANT_COLOR,[$V]:n.ONE_MINUS_CONSTANT_COLOR,[XV]:n.CONSTANT_ALPHA,[YV]:n.ONE_MINUS_CONSTANT_ALPHA};function Re(ge,dt,pt,ht,st,Qe,gt,Wt,nn,Kt){if(ge===Yu){E===!0&&(Xe(n.BLEND),E=!1);return}if(E===!1&&(Ee(n.BLEND),E=!0),ge!==NV){if(ge!==S||Kt!==C){if((w!==jh||O!==jh)&&(n.blendEquation(n.FUNC_ADD),w=jh,O=jh),Kt)switch(ge){case Ym:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case SN:n.blendFunc(n.ONE,n.ONE);break;case wN:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case EN:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:tn("WebGLState: Invalid blending: ",ge);break}else switch(ge){case Ym:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case SN:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case wN:tn("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case EN:tn("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:tn("WebGLState: Invalid blending: ",ge);break}R=null,N=null,z=null,k=null,U.set(0,0,0),P=0,S=ge,C=Kt}return}st=st||dt,Qe=Qe||pt,gt=gt||ht,(dt!==w||st!==O)&&(n.blendEquationSeparate(Ue[dt],Ue[st]),w=dt,O=st),(pt!==R||ht!==N||Qe!==z||gt!==k)&&(n.blendFuncSeparate(De[pt],De[ht],De[Qe],De[gt]),R=pt,N=ht,z=Qe,k=gt),(Wt.equals(U)===!1||nn!==P)&&(n.blendColor(Wt.r,Wt.g,Wt.b,nn),U.copy(Wt),P=nn),S=ge,C=!1}function Me(ge,dt){ge.side===Bu?Xe(n.CULL_FACE):Ee(n.CULL_FACE);let pt=ge.side===oo;dt&&(pt=!pt),Fe(pt),ge.blending===Ym&&ge.transparent===!1?Re(Yu):Re(ge.blending,ge.blendEquation,ge.blendSrc,ge.blendDst,ge.blendEquationAlpha,ge.blendSrcAlpha,ge.blendDstAlpha,ge.blendColor,ge.blendAlpha,ge.premultipliedAlpha),s.setFunc(ge.depthFunc),s.setTest(ge.depthTest),s.setMask(ge.depthWrite),a.setMask(ge.colorWrite);const ht=ge.stencilWrite;o.setTest(ht),ht&&(o.setMask(ge.stencilWriteMask),o.setFunc(ge.stencilFunc,ge.stencilRef,ge.stencilFuncMask),o.setOp(ge.stencilFail,ge.stencilZFail,ge.stencilZPass)),yt(ge.polygonOffset,ge.polygonOffsetFactor,ge.polygonOffsetUnits),ge.alphaToCoverage===!0?Ee(n.SAMPLE_ALPHA_TO_COVERAGE):Xe(n.SAMPLE_ALPHA_TO_COVERAGE)}function Fe(ge){L!==ge&&(ge?n.frontFace(n.CW):n.frontFace(n.CCW),L=ge)}function Ze(ge){ge!==IV?(Ee(n.CULL_FACE),ge!==j&&(ge===_N?n.cullFace(n.BACK):ge===RV?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Xe(n.CULL_FACE),j=ge}function oe(ge){ge!==B&&(W&&n.lineWidth(ge),B=ge)}function yt(ge,dt,pt){ge?(Ee(n.POLYGON_OFFSET_FILL),(V!==dt||Q!==pt)&&(n.polygonOffset(dt,pt),V=dt,Q=pt)):Xe(n.POLYGON_OFFSET_FILL)}function at(ge){ge?Ee(n.SCISSOR_TEST):Xe(n.SCISSOR_TEST)}function Tt(ge){ge===void 0&&(ge=n.TEXTURE0+J-1),ce!==ge&&(n.activeTexture(ge),ce=ge)}function ct(ge,dt,pt){pt===void 0&&(ce===null?pt=n.TEXTURE0+J-1:pt=ce);let ht=fe[pt];ht===void 0&&(ht={type:void 0,texture:void 0},fe[pt]=ht),(ht.type!==ge||ht.texture!==dt)&&(ce!==pt&&(n.activeTexture(pt),ce=pt),n.bindTexture(ge,dt||ye[ge]),ht.type=ge,ht.texture=dt)}function ae(){const ge=fe[ce];ge!==void 0&&ge.type!==void 0&&(n.bindTexture(ge.type,null),ge.type=void 0,ge.texture=void 0)}function Y(){try{n.compressedTexImage2D(...arguments)}catch(ge){tn("WebGLState:",ge)}}function xe(){try{n.compressedTexImage3D(...arguments)}catch(ge){tn("WebGLState:",ge)}}function ke(){try{n.texSubImage2D(...arguments)}catch(ge){tn("WebGLState:",ge)}}function et(){try{n.texSubImage3D(...arguments)}catch(ge){tn("WebGLState:",ge)}}function Ne(){try{n.compressedTexSubImage2D(...arguments)}catch(ge){tn("WebGLState:",ge)}}function It(){try{n.compressedTexSubImage3D(...arguments)}catch(ge){tn("WebGLState:",ge)}}function rt(){try{n.texStorage2D(...arguments)}catch(ge){tn("WebGLState:",ge)}}function Pt(){try{n.texStorage3D(...arguments)}catch(ge){tn("WebGLState:",ge)}}function Ot(){try{n.texImage2D(...arguments)}catch(ge){tn("WebGLState:",ge)}}function it(){try{n.texImage3D(...arguments)}catch(ge){tn("WebGLState:",ge)}}function tt(ge){de.equals(ge)===!1&&(n.scissor(ge.x,ge.y,ge.z,ge.w),de.copy(ge))}function Mt(ge){ve.equals(ge)===!1&&(n.viewport(ge.x,ge.y,ge.z,ge.w),ve.copy(ge))}function he(ge,dt){let pt=f.get(dt);pt===void 0&&(pt=new WeakMap,f.set(dt,pt));let ht=pt.get(ge);ht===void 0&&(ht=n.getUniformBlockIndex(dt,ge.name),pt.set(ge,ht))}function Le(ge,dt){const ht=f.get(dt).get(ge);c.get(dt)!==ht&&(n.uniformBlockBinding(dt,ht,ge.__bindingPointIndex),c.set(dt,ht))}function bt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},ce=null,fe={},p={},v=new WeakMap,y=[],x=null,E=!1,S=null,w=null,R=null,N=null,O=null,z=null,k=null,U=new Bt(0,0,0),P=0,C=!1,L=null,j=null,B=null,V=null,Q=null,de.set(0,0,n.canvas.width,n.canvas.height),ve.set(0,0,n.canvas.width,n.canvas.height),a.reset(),s.reset(),o.reset()}return{buffers:{color:a,depth:s,stencil:o},enable:Ee,disable:Xe,bindFramebuffer:me,drawBuffers:qe,useProgram:mt,setBlending:Re,setMaterial:Me,setFlipSided:Fe,setCullFace:Ze,setLineWidth:oe,setPolygonOffset:yt,setScissorTest:at,activeTexture:Tt,bindTexture:ct,unbindTexture:ae,compressedTexImage2D:Y,compressedTexImage3D:xe,texImage2D:Ot,texImage3D:it,updateUBOMapping:he,uniformBlockBinding:Le,texStorage2D:rt,texStorage3D:Pt,texSubImage2D:ke,texSubImage3D:et,compressedTexSubImage2D:Ne,compressedTexSubImage3D:It,scissor:tt,viewport:Mt,reset:bt}}function nse(n,e,t,r,i,a,s){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new lt,d=new WeakMap;let p;const v=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(ae,Y){return y?new OffscreenCanvas(ae,Y):Qx("canvas")}function E(ae,Y,xe){let ke=1;const et=ct(ae);if((et.width>xe||et.height>xe)&&(ke=xe/Math.max(et.width,et.height)),ke<1)if(typeof HTMLImageElement<"u"&&ae instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ae instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ae instanceof ImageBitmap||typeof VideoFrame<"u"&&ae instanceof VideoFrame){const Ne=Math.floor(ke*et.width),It=Math.floor(ke*et.height);p===void 0&&(p=x(Ne,It));const rt=Y?x(Ne,It):p;return rt.width=Ne,rt.height=It,rt.getContext("2d").drawImage(ae,0,0,Ne,It),kt("WebGLRenderer: Texture has been resized from ("+et.width+"x"+et.height+") to ("+Ne+"x"+It+")."),rt}else return"data"in ae&&kt("WebGLRenderer: Image in DataTexture is too big ("+et.width+"x"+et.height+")."),ae;return ae}function S(ae){return ae.generateMipmaps}function w(ae){n.generateMipmap(ae)}function R(ae){return ae.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:ae.isWebGL3DRenderTarget?n.TEXTURE_3D:ae.isWebGLArrayRenderTarget||ae.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function N(ae,Y,xe,ke,et=!1){if(ae!==null){if(n[ae]!==void 0)return n[ae];kt("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ae+"'")}let Ne=Y;if(Y===n.RED&&(xe===n.FLOAT&&(Ne=n.R32F),xe===n.HALF_FLOAT&&(Ne=n.R16F),xe===n.UNSIGNED_BYTE&&(Ne=n.R8)),Y===n.RED_INTEGER&&(xe===n.UNSIGNED_BYTE&&(Ne=n.R8UI),xe===n.UNSIGNED_SHORT&&(Ne=n.R16UI),xe===n.UNSIGNED_INT&&(Ne=n.R32UI),xe===n.BYTE&&(Ne=n.R8I),xe===n.SHORT&&(Ne=n.R16I),xe===n.INT&&(Ne=n.R32I)),Y===n.RG&&(xe===n.FLOAT&&(Ne=n.RG32F),xe===n.HALF_FLOAT&&(Ne=n.RG16F),xe===n.UNSIGNED_BYTE&&(Ne=n.RG8)),Y===n.RG_INTEGER&&(xe===n.UNSIGNED_BYTE&&(Ne=n.RG8UI),xe===n.UNSIGNED_SHORT&&(Ne=n.RG16UI),xe===n.UNSIGNED_INT&&(Ne=n.RG32UI),xe===n.BYTE&&(Ne=n.RG8I),xe===n.SHORT&&(Ne=n.RG16I),xe===n.INT&&(Ne=n.RG32I)),Y===n.RGB_INTEGER&&(xe===n.UNSIGNED_BYTE&&(Ne=n.RGB8UI),xe===n.UNSIGNED_SHORT&&(Ne=n.RGB16UI),xe===n.UNSIGNED_INT&&(Ne=n.RGB32UI),xe===n.BYTE&&(Ne=n.RGB8I),xe===n.SHORT&&(Ne=n.RGB16I),xe===n.INT&&(Ne=n.RGB32I)),Y===n.RGBA_INTEGER&&(xe===n.UNSIGNED_BYTE&&(Ne=n.RGBA8UI),xe===n.UNSIGNED_SHORT&&(Ne=n.RGBA16UI),xe===n.UNSIGNED_INT&&(Ne=n.RGBA32UI),xe===n.BYTE&&(Ne=n.RGBA8I),xe===n.SHORT&&(Ne=n.RGBA16I),xe===n.INT&&(Ne=n.RGBA32I)),Y===n.RGB&&(xe===n.UNSIGNED_INT_5_9_9_9_REV&&(Ne=n.RGB9_E5),xe===n.UNSIGNED_INT_10F_11F_11F_REV&&(Ne=n.R11F_G11F_B10F)),Y===n.RGBA){const It=et?Kx:Qn.getTransfer(ke);xe===n.FLOAT&&(Ne=n.RGBA32F),xe===n.HALF_FLOAT&&(Ne=n.RGBA16F),xe===n.UNSIGNED_BYTE&&(Ne=It===wr?n.SRGB8_ALPHA8:n.RGBA8),xe===n.UNSIGNED_SHORT_4_4_4_4&&(Ne=n.RGBA4),xe===n.UNSIGNED_SHORT_5_5_5_1&&(Ne=n.RGB5_A1)}return(Ne===n.R16F||Ne===n.R32F||Ne===n.RG16F||Ne===n.RG32F||Ne===n.RGBA16F||Ne===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ne}function O(ae,Y){let xe;return ae?Y===null||Y===tc||Y===Dv?xe=n.DEPTH24_STENCIL8:Y===io?xe=n.DEPTH32F_STENCIL8:Y===Ov&&(xe=n.DEPTH24_STENCIL8,kt("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Y===null||Y===tc||Y===Dv?xe=n.DEPTH_COMPONENT24:Y===io?xe=n.DEPTH_COMPONENT32F:Y===Ov&&(xe=n.DEPTH_COMPONENT16),xe}function z(ae,Y){return S(ae)===!0||ae.isFramebufferTexture&&ae.minFilter!==Bi&&ae.minFilter!==ti?Math.log2(Math.max(Y.width,Y.height))+1:ae.mipmaps!==void 0&&ae.mipmaps.length>0?ae.mipmaps.length:ae.isCompressedTexture&&Array.isArray(ae.image)?Y.mipmaps.length:1}function k(ae){const Y=ae.target;Y.removeEventListener("dispose",k),P(Y),Y.isVideoTexture&&d.delete(Y)}function U(ae){const Y=ae.target;Y.removeEventListener("dispose",U),L(Y)}function P(ae){const Y=r.get(ae);if(Y.__webglInit===void 0)return;const xe=ae.source,ke=v.get(xe);if(ke){const et=ke[Y.__cacheKey];et.usedTimes--,et.usedTimes===0&&C(ae),Object.keys(ke).length===0&&v.delete(xe)}r.remove(ae)}function C(ae){const Y=r.get(ae);n.deleteTexture(Y.__webglTexture);const xe=ae.source,ke=v.get(xe);delete ke[Y.__cacheKey],s.memory.textures--}function L(ae){const Y=r.get(ae);if(ae.depthTexture&&(ae.depthTexture.dispose(),r.remove(ae.depthTexture)),ae.isWebGLCubeRenderTarget)for(let ke=0;ke<6;ke++){if(Array.isArray(Y.__webglFramebuffer[ke]))for(let et=0;et<Y.__webglFramebuffer[ke].length;et++)n.deleteFramebuffer(Y.__webglFramebuffer[ke][et]);else n.deleteFramebuffer(Y.__webglFramebuffer[ke]);Y.__webglDepthbuffer&&n.deleteRenderbuffer(Y.__webglDepthbuffer[ke])}else{if(Array.isArray(Y.__webglFramebuffer))for(let ke=0;ke<Y.__webglFramebuffer.length;ke++)n.deleteFramebuffer(Y.__webglFramebuffer[ke]);else n.deleteFramebuffer(Y.__webglFramebuffer);if(Y.__webglDepthbuffer&&n.deleteRenderbuffer(Y.__webglDepthbuffer),Y.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Y.__webglMultisampledFramebuffer),Y.__webglColorRenderbuffer)for(let ke=0;ke<Y.__webglColorRenderbuffer.length;ke++)Y.__webglColorRenderbuffer[ke]&&n.deleteRenderbuffer(Y.__webglColorRenderbuffer[ke]);Y.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Y.__webglDepthRenderbuffer)}const xe=ae.textures;for(let ke=0,et=xe.length;ke<et;ke++){const Ne=r.get(xe[ke]);Ne.__webglTexture&&(n.deleteTexture(Ne.__webglTexture),s.memory.textures--),r.remove(xe[ke])}r.remove(ae)}let j=0;function B(){j=0}function V(){const ae=j;return ae>=i.maxTextures&&kt("WebGLTextures: Trying to use "+ae+" texture units while this GPU supports only "+i.maxTextures),j+=1,ae}function Q(ae){const Y=[];return Y.push(ae.wrapS),Y.push(ae.wrapT),Y.push(ae.wrapR||0),Y.push(ae.magFilter),Y.push(ae.minFilter),Y.push(ae.anisotropy),Y.push(ae.internalFormat),Y.push(ae.format),Y.push(ae.type),Y.push(ae.generateMipmaps),Y.push(ae.premultiplyAlpha),Y.push(ae.flipY),Y.push(ae.unpackAlignment),Y.push(ae.colorSpace),Y.join()}function J(ae,Y){const xe=r.get(ae);if(ae.isVideoTexture&&at(ae),ae.isRenderTargetTexture===!1&&ae.isExternalTexture!==!0&&ae.version>0&&xe.__version!==ae.version){const ke=ae.image;if(ke===null)kt("WebGLRenderer: Texture marked for update but no image data found.");else if(ke.complete===!1)kt("WebGLRenderer: Texture marked for update but image is incomplete");else{ye(xe,ae,Y);return}}else ae.isExternalTexture&&(xe.__webglTexture=ae.sourceTexture?ae.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,xe.__webglTexture,n.TEXTURE0+Y)}function W(ae,Y){const xe=r.get(ae);if(ae.isRenderTargetTexture===!1&&ae.version>0&&xe.__version!==ae.version){ye(xe,ae,Y);return}else ae.isExternalTexture&&(xe.__webglTexture=ae.sourceTexture?ae.sourceTexture:null);t.bindTexture(n.TEXTURE_2D_ARRAY,xe.__webglTexture,n.TEXTURE0+Y)}function $(ae,Y){const xe=r.get(ae);if(ae.isRenderTargetTexture===!1&&ae.version>0&&xe.__version!==ae.version){ye(xe,ae,Y);return}t.bindTexture(n.TEXTURE_3D,xe.__webglTexture,n.TEXTURE0+Y)}function se(ae,Y){const xe=r.get(ae);if(ae.isCubeDepthTexture!==!0&&ae.version>0&&xe.__version!==ae.version){Ee(xe,ae,Y);return}t.bindTexture(n.TEXTURE_CUBE_MAP,xe.__webglTexture,n.TEXTURE0+Y)}const ce={[Wx]:n.REPEAT,[Bo]:n.CLAMP_TO_EDGE,[$x]:n.MIRRORED_REPEAT},fe={[Bi]:n.NEAREST,[S3]:n.NEAREST_MIPMAP_NEAREST,[gv]:n.NEAREST_MIPMAP_LINEAR,[ti]:n.LINEAR,[Ax]:n.LINEAR_MIPMAP_NEAREST,[Gu]:n.LINEAR_MIPMAP_LINEAR},Z={[i8]:n.NEVER,[c8]:n.ALWAYS,[a8]:n.LESS,[tM]:n.LEQUAL,[s8]:n.EQUAL,[nM]:n.GEQUAL,[o8]:n.GREATER,[l8]:n.NOTEQUAL};function re(ae,Y){if(Y.type===io&&e.has("OES_texture_float_linear")===!1&&(Y.magFilter===ti||Y.magFilter===Ax||Y.magFilter===gv||Y.magFilter===Gu||Y.minFilter===ti||Y.minFilter===Ax||Y.minFilter===gv||Y.minFilter===Gu)&&kt("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(ae,n.TEXTURE_WRAP_S,ce[Y.wrapS]),n.texParameteri(ae,n.TEXTURE_WRAP_T,ce[Y.wrapT]),(ae===n.TEXTURE_3D||ae===n.TEXTURE_2D_ARRAY)&&n.texParameteri(ae,n.TEXTURE_WRAP_R,ce[Y.wrapR]),n.texParameteri(ae,n.TEXTURE_MAG_FILTER,fe[Y.magFilter]),n.texParameteri(ae,n.TEXTURE_MIN_FILTER,fe[Y.minFilter]),Y.compareFunction&&(n.texParameteri(ae,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(ae,n.TEXTURE_COMPARE_FUNC,Z[Y.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Y.magFilter===Bi||Y.minFilter!==gv&&Y.minFilter!==Gu||Y.type===io&&e.has("OES_texture_float_linear")===!1)return;if(Y.anisotropy>1||r.get(Y).__currentAnisotropy){const xe=e.get("EXT_texture_filter_anisotropic");n.texParameterf(ae,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Y.anisotropy,i.getMaxAnisotropy())),r.get(Y).__currentAnisotropy=Y.anisotropy}}}function de(ae,Y){let xe=!1;ae.__webglInit===void 0&&(ae.__webglInit=!0,Y.addEventListener("dispose",k));const ke=Y.source;let et=v.get(ke);et===void 0&&(et={},v.set(ke,et));const Ne=Q(Y);if(Ne!==ae.__cacheKey){et[Ne]===void 0&&(et[Ne]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,xe=!0),et[Ne].usedTimes++;const It=et[ae.__cacheKey];It!==void 0&&(et[ae.__cacheKey].usedTimes--,It.usedTimes===0&&C(Y)),ae.__cacheKey=Ne,ae.__webglTexture=et[Ne].texture}return xe}function ve(ae,Y,xe){return Math.floor(Math.floor(ae/xe)/Y)}function pe(ae,Y,xe,ke){const Ne=ae.updateRanges;if(Ne.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,Y.width,Y.height,xe,ke,Y.data);else{Ne.sort((it,tt)=>it.start-tt.start);let It=0;for(let it=1;it<Ne.length;it++){const tt=Ne[It],Mt=Ne[it],he=tt.start+tt.count,Le=ve(Mt.start,Y.width,4),bt=ve(tt.start,Y.width,4);Mt.start<=he+1&&Le===bt&&ve(Mt.start+Mt.count-1,Y.width,4)===Le?tt.count=Math.max(tt.count,Mt.start+Mt.count-tt.start):(++It,Ne[It]=Mt)}Ne.length=It+1;const rt=n.getParameter(n.UNPACK_ROW_LENGTH),Pt=n.getParameter(n.UNPACK_SKIP_PIXELS),Ot=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,Y.width);for(let it=0,tt=Ne.length;it<tt;it++){const Mt=Ne[it],he=Math.floor(Mt.start/4),Le=Math.ceil(Mt.count/4),bt=he%Y.width,ge=Math.floor(he/Y.width),dt=Le,pt=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,bt),n.pixelStorei(n.UNPACK_SKIP_ROWS,ge),t.texSubImage2D(n.TEXTURE_2D,0,bt,ge,dt,pt,xe,ke,Y.data)}ae.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,rt),n.pixelStorei(n.UNPACK_SKIP_PIXELS,Pt),n.pixelStorei(n.UNPACK_SKIP_ROWS,Ot)}}function ye(ae,Y,xe){let ke=n.TEXTURE_2D;(Y.isDataArrayTexture||Y.isCompressedArrayTexture)&&(ke=n.TEXTURE_2D_ARRAY),Y.isData3DTexture&&(ke=n.TEXTURE_3D);const et=de(ae,Y),Ne=Y.source;t.bindTexture(ke,ae.__webglTexture,n.TEXTURE0+xe);const It=r.get(Ne);if(Ne.version!==It.__version||et===!0){t.activeTexture(n.TEXTURE0+xe);const rt=Qn.getPrimaries(Qn.workingColorSpace),Pt=Y.colorSpace===id?null:Qn.getPrimaries(Y.colorSpace),Ot=Y.colorSpace===id||rt===Pt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Y.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Y.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ot);let it=E(Y.image,!1,i.maxTextureSize);it=Tt(Y,it);const tt=a.convert(Y.format,Y.colorSpace),Mt=a.convert(Y.type);let he=N(Y.internalFormat,tt,Mt,Y.colorSpace,Y.isVideoTexture);re(ke,Y);let Le;const bt=Y.mipmaps,ge=Y.isVideoTexture!==!0,dt=It.__version===void 0||et===!0,pt=Ne.dataReady,ht=z(Y,it);if(Y.isDepthTexture)he=O(Y.format===Xh,Y.type),dt&&(ge?t.texStorage2D(n.TEXTURE_2D,1,he,it.width,it.height):t.texImage2D(n.TEXTURE_2D,0,he,it.width,it.height,0,tt,Mt,null));else if(Y.isDataTexture)if(bt.length>0){ge&&dt&&t.texStorage2D(n.TEXTURE_2D,ht,he,bt[0].width,bt[0].height);for(let st=0,Qe=bt.length;st<Qe;st++)Le=bt[st],ge?pt&&t.texSubImage2D(n.TEXTURE_2D,st,0,0,Le.width,Le.height,tt,Mt,Le.data):t.texImage2D(n.TEXTURE_2D,st,he,Le.width,Le.height,0,tt,Mt,Le.data);Y.generateMipmaps=!1}else ge?(dt&&t.texStorage2D(n.TEXTURE_2D,ht,he,it.width,it.height),pt&&pe(Y,it,tt,Mt)):t.texImage2D(n.TEXTURE_2D,0,he,it.width,it.height,0,tt,Mt,it.data);else if(Y.isCompressedTexture)if(Y.isCompressedArrayTexture){ge&&dt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ht,he,bt[0].width,bt[0].height,it.depth);for(let st=0,Qe=bt.length;st<Qe;st++)if(Le=bt[st],Y.format!==Ds)if(tt!==null)if(ge){if(pt)if(Y.layerUpdates.size>0){const gt=LN(Le.width,Le.height,Y.format,Y.type);for(const Wt of Y.layerUpdates){const nn=Le.data.subarray(Wt*gt/Le.data.BYTES_PER_ELEMENT,(Wt+1)*gt/Le.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,st,0,0,Wt,Le.width,Le.height,1,tt,nn)}Y.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,st,0,0,0,Le.width,Le.height,it.depth,tt,Le.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,st,he,Le.width,Le.height,it.depth,0,Le.data,0,0);else kt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ge?pt&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,st,0,0,0,Le.width,Le.height,it.depth,tt,Mt,Le.data):t.texImage3D(n.TEXTURE_2D_ARRAY,st,he,Le.width,Le.height,it.depth,0,tt,Mt,Le.data)}else{ge&&dt&&t.texStorage2D(n.TEXTURE_2D,ht,he,bt[0].width,bt[0].height);for(let st=0,Qe=bt.length;st<Qe;st++)Le=bt[st],Y.format!==Ds?tt!==null?ge?pt&&t.compressedTexSubImage2D(n.TEXTURE_2D,st,0,0,Le.width,Le.height,tt,Le.data):t.compressedTexImage2D(n.TEXTURE_2D,st,he,Le.width,Le.height,0,Le.data):kt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ge?pt&&t.texSubImage2D(n.TEXTURE_2D,st,0,0,Le.width,Le.height,tt,Mt,Le.data):t.texImage2D(n.TEXTURE_2D,st,he,Le.width,Le.height,0,tt,Mt,Le.data)}else if(Y.isDataArrayTexture)if(ge){if(dt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ht,he,it.width,it.height,it.depth),pt)if(Y.layerUpdates.size>0){const st=LN(it.width,it.height,Y.format,Y.type);for(const Qe of Y.layerUpdates){const gt=it.data.subarray(Qe*st/it.data.BYTES_PER_ELEMENT,(Qe+1)*st/it.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Qe,it.width,it.height,1,tt,Mt,gt)}Y.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,it.width,it.height,it.depth,tt,Mt,it.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,he,it.width,it.height,it.depth,0,tt,Mt,it.data);else if(Y.isData3DTexture)ge?(dt&&t.texStorage3D(n.TEXTURE_3D,ht,he,it.width,it.height,it.depth),pt&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,it.width,it.height,it.depth,tt,Mt,it.data)):t.texImage3D(n.TEXTURE_3D,0,he,it.width,it.height,it.depth,0,tt,Mt,it.data);else if(Y.isFramebufferTexture){if(dt)if(ge)t.texStorage2D(n.TEXTURE_2D,ht,he,it.width,it.height);else{let st=it.width,Qe=it.height;for(let gt=0;gt<ht;gt++)t.texImage2D(n.TEXTURE_2D,gt,he,st,Qe,0,tt,Mt,null),st>>=1,Qe>>=1}}else if(bt.length>0){if(ge&&dt){const st=ct(bt[0]);t.texStorage2D(n.TEXTURE_2D,ht,he,st.width,st.height)}for(let st=0,Qe=bt.length;st<Qe;st++)Le=bt[st],ge?pt&&t.texSubImage2D(n.TEXTURE_2D,st,0,0,tt,Mt,Le):t.texImage2D(n.TEXTURE_2D,st,he,tt,Mt,Le);Y.generateMipmaps=!1}else if(ge){if(dt){const st=ct(it);t.texStorage2D(n.TEXTURE_2D,ht,he,st.width,st.height)}pt&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,tt,Mt,it)}else t.texImage2D(n.TEXTURE_2D,0,he,tt,Mt,it);S(Y)&&w(ke),It.__version=Ne.version,Y.onUpdate&&Y.onUpdate(Y)}ae.__version=Y.version}function Ee(ae,Y,xe){if(Y.image.length!==6)return;const ke=de(ae,Y),et=Y.source;t.bindTexture(n.TEXTURE_CUBE_MAP,ae.__webglTexture,n.TEXTURE0+xe);const Ne=r.get(et);if(et.version!==Ne.__version||ke===!0){t.activeTexture(n.TEXTURE0+xe);const It=Qn.getPrimaries(Qn.workingColorSpace),rt=Y.colorSpace===id?null:Qn.getPrimaries(Y.colorSpace),Pt=Y.colorSpace===id||It===rt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Y.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Y.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Pt);const Ot=Y.isCompressedTexture||Y.image[0].isCompressedTexture,it=Y.image[0]&&Y.image[0].isDataTexture,tt=[];for(let Qe=0;Qe<6;Qe++)!Ot&&!it?tt[Qe]=E(Y.image[Qe],!0,i.maxCubemapSize):tt[Qe]=it?Y.image[Qe].image:Y.image[Qe],tt[Qe]=Tt(Y,tt[Qe]);const Mt=tt[0],he=a.convert(Y.format,Y.colorSpace),Le=a.convert(Y.type),bt=N(Y.internalFormat,he,Le,Y.colorSpace),ge=Y.isVideoTexture!==!0,dt=Ne.__version===void 0||ke===!0,pt=et.dataReady;let ht=z(Y,Mt);re(n.TEXTURE_CUBE_MAP,Y);let st;if(Ot){ge&&dt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,ht,bt,Mt.width,Mt.height);for(let Qe=0;Qe<6;Qe++){st=tt[Qe].mipmaps;for(let gt=0;gt<st.length;gt++){const Wt=st[gt];Y.format!==Ds?he!==null?ge?pt&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,gt,0,0,Wt.width,Wt.height,he,Wt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,gt,bt,Wt.width,Wt.height,0,Wt.data):kt("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ge?pt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,gt,0,0,Wt.width,Wt.height,he,Le,Wt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,gt,bt,Wt.width,Wt.height,0,he,Le,Wt.data)}}}else{if(st=Y.mipmaps,ge&&dt){st.length>0&&ht++;const Qe=ct(tt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,ht,bt,Qe.width,Qe.height)}for(let Qe=0;Qe<6;Qe++)if(it){ge?pt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0,0,0,tt[Qe].width,tt[Qe].height,he,Le,tt[Qe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0,bt,tt[Qe].width,tt[Qe].height,0,he,Le,tt[Qe].data);for(let gt=0;gt<st.length;gt++){const nn=st[gt].image[Qe].image;ge?pt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,gt+1,0,0,nn.width,nn.height,he,Le,nn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,gt+1,bt,nn.width,nn.height,0,he,Le,nn.data)}}else{ge?pt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0,0,0,he,Le,tt[Qe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0,bt,he,Le,tt[Qe]);for(let gt=0;gt<st.length;gt++){const Wt=st[gt];ge?pt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,gt+1,0,0,he,Le,Wt.image[Qe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,gt+1,bt,he,Le,Wt.image[Qe])}}}S(Y)&&w(n.TEXTURE_CUBE_MAP),Ne.__version=et.version,Y.onUpdate&&Y.onUpdate(Y)}ae.__version=Y.version}function Xe(ae,Y,xe,ke,et,Ne){const It=a.convert(xe.format,xe.colorSpace),rt=a.convert(xe.type),Pt=N(xe.internalFormat,It,rt,xe.colorSpace),Ot=r.get(Y),it=r.get(xe);if(it.__renderTarget=Y,!Ot.__hasExternalTextures){const tt=Math.max(1,Y.width>>Ne),Mt=Math.max(1,Y.height>>Ne);et===n.TEXTURE_3D||et===n.TEXTURE_2D_ARRAY?t.texImage3D(et,Ne,Pt,tt,Mt,Y.depth,0,It,rt,null):t.texImage2D(et,Ne,Pt,tt,Mt,0,It,rt,null)}t.bindFramebuffer(n.FRAMEBUFFER,ae),yt(Y)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ke,et,it.__webglTexture,0,oe(Y)):(et===n.TEXTURE_2D||et>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&et<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ke,et,it.__webglTexture,Ne),t.bindFramebuffer(n.FRAMEBUFFER,null)}function me(ae,Y,xe){if(n.bindRenderbuffer(n.RENDERBUFFER,ae),Y.depthBuffer){const ke=Y.depthTexture,et=ke&&ke.isDepthTexture?ke.type:null,Ne=O(Y.stencilBuffer,et),It=Y.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;yt(Y)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,oe(Y),Ne,Y.width,Y.height):xe?n.renderbufferStorageMultisample(n.RENDERBUFFER,oe(Y),Ne,Y.width,Y.height):n.renderbufferStorage(n.RENDERBUFFER,Ne,Y.width,Y.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,It,n.RENDERBUFFER,ae)}else{const ke=Y.textures;for(let et=0;et<ke.length;et++){const Ne=ke[et],It=a.convert(Ne.format,Ne.colorSpace),rt=a.convert(Ne.type),Pt=N(Ne.internalFormat,It,rt,Ne.colorSpace);yt(Y)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,oe(Y),Pt,Y.width,Y.height):xe?n.renderbufferStorageMultisample(n.RENDERBUFFER,oe(Y),Pt,Y.width,Y.height):n.renderbufferStorage(n.RENDERBUFFER,Pt,Y.width,Y.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function qe(ae,Y,xe){const ke=Y.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(n.FRAMEBUFFER,ae),!(Y.depthTexture&&Y.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const et=r.get(Y.depthTexture);if(et.__renderTarget=Y,(!et.__webglTexture||Y.depthTexture.image.width!==Y.width||Y.depthTexture.image.height!==Y.height)&&(Y.depthTexture.image.width=Y.width,Y.depthTexture.image.height=Y.height,Y.depthTexture.needsUpdate=!0),ke){if(et.__webglInit===void 0&&(et.__webglInit=!0,Y.depthTexture.addEventListener("dispose",k)),et.__webglTexture===void 0){et.__webglTexture=n.createTexture(),t.bindTexture(n.TEXTURE_CUBE_MAP,et.__webglTexture),re(n.TEXTURE_CUBE_MAP,Y.depthTexture);const Ot=a.convert(Y.depthTexture.format),it=a.convert(Y.depthTexture.type);let tt;Y.depthTexture.format===af?tt=n.DEPTH_COMPONENT24:Y.depthTexture.format===Xh&&(tt=n.DEPTH24_STENCIL8);for(let Mt=0;Mt<6;Mt++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0,tt,Y.width,Y.height,0,Ot,it,null)}}else J(Y.depthTexture,0);const Ne=et.__webglTexture,It=oe(Y),rt=ke?n.TEXTURE_CUBE_MAP_POSITIVE_X+xe:n.TEXTURE_2D,Pt=Y.depthTexture.format===Xh?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;if(Y.depthTexture.format===af)yt(Y)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Pt,rt,Ne,0,It):n.framebufferTexture2D(n.FRAMEBUFFER,Pt,rt,Ne,0);else if(Y.depthTexture.format===Xh)yt(Y)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Pt,rt,Ne,0,It):n.framebufferTexture2D(n.FRAMEBUFFER,Pt,rt,Ne,0);else throw new Error("Unknown depthTexture format")}function mt(ae){const Y=r.get(ae),xe=ae.isWebGLCubeRenderTarget===!0;if(Y.__boundDepthTexture!==ae.depthTexture){const ke=ae.depthTexture;if(Y.__depthDisposeCallback&&Y.__depthDisposeCallback(),ke){const et=()=>{delete Y.__boundDepthTexture,delete Y.__depthDisposeCallback,ke.removeEventListener("dispose",et)};ke.addEventListener("dispose",et),Y.__depthDisposeCallback=et}Y.__boundDepthTexture=ke}if(ae.depthTexture&&!Y.__autoAllocateDepthBuffer)if(xe)for(let ke=0;ke<6;ke++)qe(Y.__webglFramebuffer[ke],ae,ke);else{const ke=ae.texture.mipmaps;ke&&ke.length>0?qe(Y.__webglFramebuffer[0],ae,0):qe(Y.__webglFramebuffer,ae,0)}else if(xe){Y.__webglDepthbuffer=[];for(let ke=0;ke<6;ke++)if(t.bindFramebuffer(n.FRAMEBUFFER,Y.__webglFramebuffer[ke]),Y.__webglDepthbuffer[ke]===void 0)Y.__webglDepthbuffer[ke]=n.createRenderbuffer(),me(Y.__webglDepthbuffer[ke],ae,!1);else{const et=ae.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ne=Y.__webglDepthbuffer[ke];n.bindRenderbuffer(n.RENDERBUFFER,Ne),n.framebufferRenderbuffer(n.FRAMEBUFFER,et,n.RENDERBUFFER,Ne)}}else{const ke=ae.texture.mipmaps;if(ke&&ke.length>0?t.bindFramebuffer(n.FRAMEBUFFER,Y.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,Y.__webglFramebuffer),Y.__webglDepthbuffer===void 0)Y.__webglDepthbuffer=n.createRenderbuffer(),me(Y.__webglDepthbuffer,ae,!1);else{const et=ae.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ne=Y.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Ne),n.framebufferRenderbuffer(n.FRAMEBUFFER,et,n.RENDERBUFFER,Ne)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ue(ae,Y,xe){const ke=r.get(ae);Y!==void 0&&Xe(ke.__webglFramebuffer,ae,ae.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),xe!==void 0&&mt(ae)}function De(ae){const Y=ae.texture,xe=r.get(ae),ke=r.get(Y);ae.addEventListener("dispose",U);const et=ae.textures,Ne=ae.isWebGLCubeRenderTarget===!0,It=et.length>1;if(It||(ke.__webglTexture===void 0&&(ke.__webglTexture=n.createTexture()),ke.__version=Y.version,s.memory.textures++),Ne){xe.__webglFramebuffer=[];for(let rt=0;rt<6;rt++)if(Y.mipmaps&&Y.mipmaps.length>0){xe.__webglFramebuffer[rt]=[];for(let Pt=0;Pt<Y.mipmaps.length;Pt++)xe.__webglFramebuffer[rt][Pt]=n.createFramebuffer()}else xe.__webglFramebuffer[rt]=n.createFramebuffer()}else{if(Y.mipmaps&&Y.mipmaps.length>0){xe.__webglFramebuffer=[];for(let rt=0;rt<Y.mipmaps.length;rt++)xe.__webglFramebuffer[rt]=n.createFramebuffer()}else xe.__webglFramebuffer=n.createFramebuffer();if(It)for(let rt=0,Pt=et.length;rt<Pt;rt++){const Ot=r.get(et[rt]);Ot.__webglTexture===void 0&&(Ot.__webglTexture=n.createTexture(),s.memory.textures++)}if(ae.samples>0&&yt(ae)===!1){xe.__webglMultisampledFramebuffer=n.createFramebuffer(),xe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,xe.__webglMultisampledFramebuffer);for(let rt=0;rt<et.length;rt++){const Pt=et[rt];xe.__webglColorRenderbuffer[rt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,xe.__webglColorRenderbuffer[rt]);const Ot=a.convert(Pt.format,Pt.colorSpace),it=a.convert(Pt.type),tt=N(Pt.internalFormat,Ot,it,Pt.colorSpace,ae.isXRRenderTarget===!0),Mt=oe(ae);n.renderbufferStorageMultisample(n.RENDERBUFFER,Mt,tt,ae.width,ae.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+rt,n.RENDERBUFFER,xe.__webglColorRenderbuffer[rt])}n.bindRenderbuffer(n.RENDERBUFFER,null),ae.depthBuffer&&(xe.__webglDepthRenderbuffer=n.createRenderbuffer(),me(xe.__webglDepthRenderbuffer,ae,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ne){t.bindTexture(n.TEXTURE_CUBE_MAP,ke.__webglTexture),re(n.TEXTURE_CUBE_MAP,Y);for(let rt=0;rt<6;rt++)if(Y.mipmaps&&Y.mipmaps.length>0)for(let Pt=0;Pt<Y.mipmaps.length;Pt++)Xe(xe.__webglFramebuffer[rt][Pt],ae,Y,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+rt,Pt);else Xe(xe.__webglFramebuffer[rt],ae,Y,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+rt,0);S(Y)&&w(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(It){for(let rt=0,Pt=et.length;rt<Pt;rt++){const Ot=et[rt],it=r.get(Ot);let tt=n.TEXTURE_2D;(ae.isWebGL3DRenderTarget||ae.isWebGLArrayRenderTarget)&&(tt=ae.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(tt,it.__webglTexture),re(tt,Ot),Xe(xe.__webglFramebuffer,ae,Ot,n.COLOR_ATTACHMENT0+rt,tt,0),S(Ot)&&w(tt)}t.unbindTexture()}else{let rt=n.TEXTURE_2D;if((ae.isWebGL3DRenderTarget||ae.isWebGLArrayRenderTarget)&&(rt=ae.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(rt,ke.__webglTexture),re(rt,Y),Y.mipmaps&&Y.mipmaps.length>0)for(let Pt=0;Pt<Y.mipmaps.length;Pt++)Xe(xe.__webglFramebuffer[Pt],ae,Y,n.COLOR_ATTACHMENT0,rt,Pt);else Xe(xe.__webglFramebuffer,ae,Y,n.COLOR_ATTACHMENT0,rt,0);S(Y)&&w(rt),t.unbindTexture()}ae.depthBuffer&&mt(ae)}function Re(ae){const Y=ae.textures;for(let xe=0,ke=Y.length;xe<ke;xe++){const et=Y[xe];if(S(et)){const Ne=R(ae),It=r.get(et).__webglTexture;t.bindTexture(Ne,It),w(Ne),t.unbindTexture()}}}const Me=[],Fe=[];function Ze(ae){if(ae.samples>0){if(yt(ae)===!1){const Y=ae.textures,xe=ae.width,ke=ae.height;let et=n.COLOR_BUFFER_BIT;const Ne=ae.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,It=r.get(ae),rt=Y.length>1;if(rt)for(let Ot=0;Ot<Y.length;Ot++)t.bindFramebuffer(n.FRAMEBUFFER,It.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ot,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,It.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ot,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,It.__webglMultisampledFramebuffer);const Pt=ae.texture.mipmaps;Pt&&Pt.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,It.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,It.__webglFramebuffer);for(let Ot=0;Ot<Y.length;Ot++){if(ae.resolveDepthBuffer&&(ae.depthBuffer&&(et|=n.DEPTH_BUFFER_BIT),ae.stencilBuffer&&ae.resolveStencilBuffer&&(et|=n.STENCIL_BUFFER_BIT)),rt){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,It.__webglColorRenderbuffer[Ot]);const it=r.get(Y[Ot]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,it,0)}n.blitFramebuffer(0,0,xe,ke,0,0,xe,ke,et,n.NEAREST),c===!0&&(Me.length=0,Fe.length=0,Me.push(n.COLOR_ATTACHMENT0+Ot),ae.depthBuffer&&ae.resolveDepthBuffer===!1&&(Me.push(Ne),Fe.push(Ne),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Fe)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Me))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),rt)for(let Ot=0;Ot<Y.length;Ot++){t.bindFramebuffer(n.FRAMEBUFFER,It.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ot,n.RENDERBUFFER,It.__webglColorRenderbuffer[Ot]);const it=r.get(Y[Ot]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,It.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ot,n.TEXTURE_2D,it,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,It.__webglMultisampledFramebuffer)}else if(ae.depthBuffer&&ae.resolveDepthBuffer===!1&&c){const Y=ae.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Y])}}}function oe(ae){return Math.min(i.maxSamples,ae.samples)}function yt(ae){const Y=r.get(ae);return ae.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Y.__useRenderToTexture!==!1}function at(ae){const Y=s.render.frame;d.get(ae)!==Y&&(d.set(ae,Y),ae.update())}function Tt(ae,Y){const xe=ae.colorSpace,ke=ae.format,et=ae.type;return ae.isCompressedTexture===!0||ae.isVideoTexture===!0||xe!==op&&xe!==id&&(Qn.getTransfer(xe)===wr?(ke!==Ds||et!==no)&&kt("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):tn("WebGLTextures: Unsupported texture color space:",xe)),Y}function ct(ae){return typeof HTMLImageElement<"u"&&ae instanceof HTMLImageElement?(f.width=ae.naturalWidth||ae.width,f.height=ae.naturalHeight||ae.height):typeof VideoFrame<"u"&&ae instanceof VideoFrame?(f.width=ae.displayWidth,f.height=ae.displayHeight):(f.width=ae.width,f.height=ae.height),f}this.allocateTextureUnit=V,this.resetTextureUnits=B,this.setTexture2D=J,this.setTexture2DArray=W,this.setTexture3D=$,this.setTextureCube=se,this.rebindTextures=Ue,this.setupRenderTarget=De,this.updateRenderTargetMipmap=Re,this.updateMultisampleRenderTarget=Ze,this.setupDepthRenderbuffer=mt,this.setupFrameBufferTexture=Xe,this.useMultisampledRTT=yt,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function b9(n,e){function t(r,i=id){let a;const s=Qn.getTransfer(i);if(r===no)return n.UNSIGNED_BYTE;if(r===YT)return n.UNSIGNED_SHORT_4_4_4_4;if(r===KT)return n.UNSIGNED_SHORT_5_5_5_1;if(r===A3)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===T3)return n.UNSIGNED_INT_10F_11F_11F_REV;if(r===w3)return n.BYTE;if(r===E3)return n.SHORT;if(r===Ov)return n.UNSIGNED_SHORT;if(r===XT)return n.INT;if(r===tc)return n.UNSIGNED_INT;if(r===io)return n.FLOAT;if(r===rf)return n.HALF_FLOAT;if(r===M3)return n.ALPHA;if(r===C3)return n.RGB;if(r===Ds)return n.RGBA;if(r===af)return n.DEPTH_COMPONENT;if(r===Xh)return n.DEPTH_STENCIL;if(r===ZT)return n.RED;if(r===U_)return n.RED_INTEGER;if(r===og)return n.RG;if(r===QT)return n.RG_INTEGER;if(r===JT)return n.RGBA_INTEGER;if(r===Tx||r===Mx||r===Cx||r===Ix)if(s===wr)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(r===Tx)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Mx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Cx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Ix)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(r===Tx)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Mx)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Cx)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Ix)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===zE||r===jE||r===BE||r===VE)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(r===zE)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===jE)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===BE)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===VE)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===HE||r===GE||r===qE||r===WE||r===$E||r===XE||r===YE)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(r===HE||r===GE)return s===wr?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(r===qE)return s===wr?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC;if(r===WE)return a.COMPRESSED_R11_EAC;if(r===$E)return a.COMPRESSED_SIGNED_R11_EAC;if(r===XE)return a.COMPRESSED_RG11_EAC;if(r===YE)return a.COMPRESSED_SIGNED_RG11_EAC}else return null;if(r===KE||r===ZE||r===QE||r===JE||r===eA||r===tA||r===nA||r===rA||r===iA||r===aA||r===sA||r===oA||r===lA||r===cA)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(r===KE)return s===wr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===ZE)return s===wr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===QE)return s===wr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===JE)return s===wr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===eA)return s===wr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===tA)return s===wr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===nA)return s===wr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===rA)return s===wr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===iA)return s===wr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===aA)return s===wr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===sA)return s===wr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===oA)return s===wr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===lA)return s===wr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===cA)return s===wr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===uA||r===fA||r===dA)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(r===uA)return s===wr?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===fA)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===dA)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===hA||r===pA||r===mA||r===gA)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(r===hA)return a.COMPRESSED_RED_RGTC1_EXT;if(r===pA)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===mA)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===gA)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Dv?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}const rse=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,ise=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class ase{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const r=new z3(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new nc({vertexShader:rse,fragmentShader:ise,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new sa(new ly(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class sse extends pf{constructor(e,t){super();const r=this;let i=null,a=1,s=null,o="local-floor",c=1,f=null,d=null,p=null,v=null,y=null,x=null;const E=typeof XRWebGLBinding<"u",S=new ase,w={},R=t.getContextAttributes();let N=null,O=null;const z=[],k=[],U=new lt;let P=null;const C=new ji;C.viewport=new zr;const L=new ji;L.viewport=new zr;const j=[C,L],B=new l9;let V=null,Q=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ye){let Ee=z[ye];return Ee===void 0&&(Ee=new lE,z[ye]=Ee),Ee.getTargetRaySpace()},this.getControllerGrip=function(ye){let Ee=z[ye];return Ee===void 0&&(Ee=new lE,z[ye]=Ee),Ee.getGripSpace()},this.getHand=function(ye){let Ee=z[ye];return Ee===void 0&&(Ee=new lE,z[ye]=Ee),Ee.getHandSpace()};function J(ye){const Ee=k.indexOf(ye.inputSource);if(Ee===-1)return;const Xe=z[Ee];Xe!==void 0&&(Xe.update(ye.inputSource,ye.frame,f||s),Xe.dispatchEvent({type:ye.type,data:ye.inputSource}))}function W(){i.removeEventListener("select",J),i.removeEventListener("selectstart",J),i.removeEventListener("selectend",J),i.removeEventListener("squeeze",J),i.removeEventListener("squeezestart",J),i.removeEventListener("squeezeend",J),i.removeEventListener("end",W),i.removeEventListener("inputsourceschange",$);for(let ye=0;ye<z.length;ye++){const Ee=k[ye];Ee!==null&&(k[ye]=null,z[ye].disconnect(Ee))}V=null,Q=null,S.reset();for(const ye in w)delete w[ye];e.setRenderTarget(N),y=null,v=null,p=null,i=null,O=null,pe.stop(),r.isPresenting=!1,e.setPixelRatio(P),e.setSize(U.width,U.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ye){a=ye,r.isPresenting===!0&&kt("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ye){o=ye,r.isPresenting===!0&&kt("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||s},this.setReferenceSpace=function(ye){f=ye},this.getBaseLayer=function(){return v!==null?v:y},this.getBinding=function(){return p===null&&E&&(p=new XRWebGLBinding(i,t)),p},this.getFrame=function(){return x},this.getSession=function(){return i},this.setSession=async function(ye){if(i=ye,i!==null){if(N=e.getRenderTarget(),i.addEventListener("select",J),i.addEventListener("selectstart",J),i.addEventListener("selectend",J),i.addEventListener("squeeze",J),i.addEventListener("squeezestart",J),i.addEventListener("squeezeend",J),i.addEventListener("end",W),i.addEventListener("inputsourceschange",$),R.xrCompatible!==!0&&await t.makeXRCompatible(),P=e.getPixelRatio(),e.getSize(U),E&&"createProjectionLayer"in XRWebGLBinding.prototype){let Xe=null,me=null,qe=null;R.depth&&(qe=R.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Xe=R.stencil?Xh:af,me=R.stencil?Dv:tc);const mt={colorFormat:t.RGBA8,depthFormat:qe,scaleFactor:a};p=this.getBinding(),v=p.createProjectionLayer(mt),i.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),O=new pl(v.textureWidth,v.textureHeight,{format:Ds,type:no,depthTexture:new Bv(v.textureWidth,v.textureHeight,me,void 0,void 0,void 0,void 0,void 0,void 0,Xe),stencilBuffer:R.stencil,colorSpace:e.outputColorSpace,samples:R.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}else{const Xe={antialias:R.antialias,alpha:!0,depth:R.depth,stencil:R.stencil,framebufferScaleFactor:a};y=new XRWebGLLayer(i,t,Xe),i.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),O=new pl(y.framebufferWidth,y.framebufferHeight,{format:Ds,type:no,colorSpace:e.outputColorSpace,stencilBuffer:R.stencil,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}O.isXRRenderTarget=!0,this.setFoveation(c),f=null,s=await i.requestReferenceSpace(o),pe.setContext(i),pe.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return S.getDepthTexture()};function $(ye){for(let Ee=0;Ee<ye.removed.length;Ee++){const Xe=ye.removed[Ee],me=k.indexOf(Xe);me>=0&&(k[me]=null,z[me].disconnect(Xe))}for(let Ee=0;Ee<ye.added.length;Ee++){const Xe=ye.added[Ee];let me=k.indexOf(Xe);if(me===-1){for(let mt=0;mt<z.length;mt++)if(mt>=k.length){k.push(Xe),me=mt;break}else if(k[mt]===null){k[mt]=Xe,me=mt;break}if(me===-1)break}const qe=z[me];qe&&qe.connect(Xe)}}const se=new ue,ce=new ue;function fe(ye,Ee,Xe){se.setFromMatrixPosition(Ee.matrixWorld),ce.setFromMatrixPosition(Xe.matrixWorld);const me=se.distanceTo(ce),qe=Ee.projectionMatrix.elements,mt=Xe.projectionMatrix.elements,Ue=qe[14]/(qe[10]-1),De=qe[14]/(qe[10]+1),Re=(qe[9]+1)/qe[5],Me=(qe[9]-1)/qe[5],Fe=(qe[8]-1)/qe[0],Ze=(mt[8]+1)/mt[0],oe=Ue*Fe,yt=Ue*Ze,at=me/(-Fe+Ze),Tt=at*-Fe;if(Ee.matrixWorld.decompose(ye.position,ye.quaternion,ye.scale),ye.translateX(Tt),ye.translateZ(at),ye.matrixWorld.compose(ye.position,ye.quaternion,ye.scale),ye.matrixWorldInverse.copy(ye.matrixWorld).invert(),qe[10]===-1)ye.projectionMatrix.copy(Ee.projectionMatrix),ye.projectionMatrixInverse.copy(Ee.projectionMatrixInverse);else{const ct=Ue+at,ae=De+at,Y=oe-Tt,xe=yt+(me-Tt),ke=Re*De/ae*ct,et=Me*De/ae*ct;ye.projectionMatrix.makePerspective(Y,xe,ke,et,ct,ae),ye.projectionMatrixInverse.copy(ye.projectionMatrix).invert()}}function Z(ye,Ee){Ee===null?ye.matrixWorld.copy(ye.matrix):ye.matrixWorld.multiplyMatrices(Ee.matrixWorld,ye.matrix),ye.matrixWorldInverse.copy(ye.matrixWorld).invert()}this.updateCamera=function(ye){if(i===null)return;let Ee=ye.near,Xe=ye.far;S.texture!==null&&(S.depthNear>0&&(Ee=S.depthNear),S.depthFar>0&&(Xe=S.depthFar)),B.near=L.near=C.near=Ee,B.far=L.far=C.far=Xe,(V!==B.near||Q!==B.far)&&(i.updateRenderState({depthNear:B.near,depthFar:B.far}),V=B.near,Q=B.far),B.layers.mask=ye.layers.mask|6,C.layers.mask=B.layers.mask&3,L.layers.mask=B.layers.mask&5;const me=ye.parent,qe=B.cameras;Z(B,me);for(let mt=0;mt<qe.length;mt++)Z(qe[mt],me);qe.length===2?fe(B,C,L):B.projectionMatrix.copy(C.projectionMatrix),re(ye,B,me)};function re(ye,Ee,Xe){Xe===null?ye.matrix.copy(Ee.matrixWorld):(ye.matrix.copy(Xe.matrixWorld),ye.matrix.invert(),ye.matrix.multiply(Ee.matrixWorld)),ye.matrix.decompose(ye.position,ye.quaternion,ye.scale),ye.updateMatrixWorld(!0),ye.projectionMatrix.copy(Ee.projectionMatrix),ye.projectionMatrixInverse.copy(Ee.projectionMatrixInverse),ye.isPerspectiveCamera&&(ye.fov=Uv*2*Math.atan(1/ye.projectionMatrix.elements[5]),ye.zoom=1)}this.getCamera=function(){return B},this.getFoveation=function(){if(!(v===null&&y===null))return c},this.setFoveation=function(ye){c=ye,v!==null&&(v.fixedFoveation=ye),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=ye)},this.hasDepthSensing=function(){return S.texture!==null},this.getDepthSensingMesh=function(){return S.getMesh(B)},this.getCameraTexture=function(ye){return w[ye]};let de=null;function ve(ye,Ee){if(d=Ee.getViewerPose(f||s),x=Ee,d!==null){const Xe=d.views;y!==null&&(e.setRenderTargetFramebuffer(O,y.framebuffer),e.setRenderTarget(O));let me=!1;Xe.length!==B.cameras.length&&(B.cameras.length=0,me=!0);for(let De=0;De<Xe.length;De++){const Re=Xe[De];let Me=null;if(y!==null)Me=y.getViewport(Re);else{const Ze=p.getViewSubImage(v,Re);Me=Ze.viewport,De===0&&(e.setRenderTargetTextures(O,Ze.colorTexture,Ze.depthStencilTexture),e.setRenderTarget(O))}let Fe=j[De];Fe===void 0&&(Fe=new ji,Fe.layers.enable(De),Fe.viewport=new zr,j[De]=Fe),Fe.matrix.fromArray(Re.transform.matrix),Fe.matrix.decompose(Fe.position,Fe.quaternion,Fe.scale),Fe.projectionMatrix.fromArray(Re.projectionMatrix),Fe.projectionMatrixInverse.copy(Fe.projectionMatrix).invert(),Fe.viewport.set(Me.x,Me.y,Me.width,Me.height),De===0&&(B.matrix.copy(Fe.matrix),B.matrix.decompose(B.position,B.quaternion,B.scale)),me===!0&&B.cameras.push(Fe)}const qe=i.enabledFeatures;if(qe&&qe.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&E){p=r.getBinding();const De=p.getDepthInformation(Xe[0]);De&&De.isValid&&De.texture&&S.init(De,i.renderState)}if(qe&&qe.includes("camera-access")&&E){e.state.unbindTexture(),p=r.getBinding();for(let De=0;De<Xe.length;De++){const Re=Xe[De].camera;if(Re){let Me=w[Re];Me||(Me=new z3,w[Re]=Me);const Fe=p.getCameraImage(Re);Me.sourceTexture=Fe}}}}for(let Xe=0;Xe<z.length;Xe++){const me=k[Xe],qe=z[Xe];me!==null&&qe!==void 0&&qe.update(me,Ee,f||s)}de&&de(ye,Ee),Ee.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:Ee}),x=null}const pe=new p9;pe.setAnimationLoop(ve),this.setAnimationLoop=function(ye){de=ye},this.dispose=function(){}}}const Em=new gl,ose=new yn;function lse(n,e){function t(S,w){S.matrixAutoUpdate===!0&&S.updateMatrix(),w.value.copy(S.matrix)}function r(S,w){w.color.getRGB(S.fogColor.value,g8(n)),w.isFog?(S.fogNear.value=w.near,S.fogFar.value=w.far):w.isFogExp2&&(S.fogDensity.value=w.density)}function i(S,w,R,N,O){w.isMeshBasicMaterial||w.isMeshLambertMaterial?a(S,w):w.isMeshToonMaterial?(a(S,w),p(S,w)):w.isMeshPhongMaterial?(a(S,w),d(S,w)):w.isMeshStandardMaterial?(a(S,w),v(S,w),w.isMeshPhysicalMaterial&&y(S,w,O)):w.isMeshMatcapMaterial?(a(S,w),x(S,w)):w.isMeshDepthMaterial?a(S,w):w.isMeshDistanceMaterial?(a(S,w),E(S,w)):w.isMeshNormalMaterial?a(S,w):w.isLineBasicMaterial?(s(S,w),w.isLineDashedMaterial&&o(S,w)):w.isPointsMaterial?c(S,w,R,N):w.isSpriteMaterial?f(S,w):w.isShadowMaterial?(S.color.value.copy(w.color),S.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function a(S,w){S.opacity.value=w.opacity,w.color&&S.diffuse.value.copy(w.color),w.emissive&&S.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(S.map.value=w.map,t(w.map,S.mapTransform)),w.alphaMap&&(S.alphaMap.value=w.alphaMap,t(w.alphaMap,S.alphaMapTransform)),w.bumpMap&&(S.bumpMap.value=w.bumpMap,t(w.bumpMap,S.bumpMapTransform),S.bumpScale.value=w.bumpScale,w.side===oo&&(S.bumpScale.value*=-1)),w.normalMap&&(S.normalMap.value=w.normalMap,t(w.normalMap,S.normalMapTransform),S.normalScale.value.copy(w.normalScale),w.side===oo&&S.normalScale.value.negate()),w.displacementMap&&(S.displacementMap.value=w.displacementMap,t(w.displacementMap,S.displacementMapTransform),S.displacementScale.value=w.displacementScale,S.displacementBias.value=w.displacementBias),w.emissiveMap&&(S.emissiveMap.value=w.emissiveMap,t(w.emissiveMap,S.emissiveMapTransform)),w.specularMap&&(S.specularMap.value=w.specularMap,t(w.specularMap,S.specularMapTransform)),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest);const R=e.get(w),N=R.envMap,O=R.envMapRotation;N&&(S.envMap.value=N,Em.copy(O),Em.x*=-1,Em.y*=-1,Em.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(Em.y*=-1,Em.z*=-1),S.envMapRotation.value.setFromMatrix4(ose.makeRotationFromEuler(Em)),S.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=w.reflectivity,S.ior.value=w.ior,S.refractionRatio.value=w.refractionRatio),w.lightMap&&(S.lightMap.value=w.lightMap,S.lightMapIntensity.value=w.lightMapIntensity,t(w.lightMap,S.lightMapTransform)),w.aoMap&&(S.aoMap.value=w.aoMap,S.aoMapIntensity.value=w.aoMapIntensity,t(w.aoMap,S.aoMapTransform))}function s(S,w){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,w.map&&(S.map.value=w.map,t(w.map,S.mapTransform))}function o(S,w){S.dashSize.value=w.dashSize,S.totalSize.value=w.dashSize+w.gapSize,S.scale.value=w.scale}function c(S,w,R,N){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,S.size.value=w.size*R,S.scale.value=N*.5,w.map&&(S.map.value=w.map,t(w.map,S.uvTransform)),w.alphaMap&&(S.alphaMap.value=w.alphaMap,t(w.alphaMap,S.alphaMapTransform)),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest)}function f(S,w){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,S.rotation.value=w.rotation,w.map&&(S.map.value=w.map,t(w.map,S.mapTransform)),w.alphaMap&&(S.alphaMap.value=w.alphaMap,t(w.alphaMap,S.alphaMapTransform)),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest)}function d(S,w){S.specular.value.copy(w.specular),S.shininess.value=Math.max(w.shininess,1e-4)}function p(S,w){w.gradientMap&&(S.gradientMap.value=w.gradientMap)}function v(S,w){S.metalness.value=w.metalness,w.metalnessMap&&(S.metalnessMap.value=w.metalnessMap,t(w.metalnessMap,S.metalnessMapTransform)),S.roughness.value=w.roughness,w.roughnessMap&&(S.roughnessMap.value=w.roughnessMap,t(w.roughnessMap,S.roughnessMapTransform)),w.envMap&&(S.envMapIntensity.value=w.envMapIntensity)}function y(S,w,R){S.ior.value=w.ior,w.sheen>0&&(S.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),S.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(S.sheenColorMap.value=w.sheenColorMap,t(w.sheenColorMap,S.sheenColorMapTransform)),w.sheenRoughnessMap&&(S.sheenRoughnessMap.value=w.sheenRoughnessMap,t(w.sheenRoughnessMap,S.sheenRoughnessMapTransform))),w.clearcoat>0&&(S.clearcoat.value=w.clearcoat,S.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(S.clearcoatMap.value=w.clearcoatMap,t(w.clearcoatMap,S.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,t(w.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(S.clearcoatNormalMap.value=w.clearcoatNormalMap,t(w.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===oo&&S.clearcoatNormalScale.value.negate())),w.dispersion>0&&(S.dispersion.value=w.dispersion),w.iridescence>0&&(S.iridescence.value=w.iridescence,S.iridescenceIOR.value=w.iridescenceIOR,S.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(S.iridescenceMap.value=w.iridescenceMap,t(w.iridescenceMap,S.iridescenceMapTransform)),w.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=w.iridescenceThicknessMap,t(w.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),w.transmission>0&&(S.transmission.value=w.transmission,S.transmissionSamplerMap.value=R.texture,S.transmissionSamplerSize.value.set(R.width,R.height),w.transmissionMap&&(S.transmissionMap.value=w.transmissionMap,t(w.transmissionMap,S.transmissionMapTransform)),S.thickness.value=w.thickness,w.thicknessMap&&(S.thicknessMap.value=w.thicknessMap,t(w.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=w.attenuationDistance,S.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(S.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(S.anisotropyMap.value=w.anisotropyMap,t(w.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=w.specularIntensity,S.specularColor.value.copy(w.specularColor),w.specularColorMap&&(S.specularColorMap.value=w.specularColorMap,t(w.specularColorMap,S.specularColorMapTransform)),w.specularIntensityMap&&(S.specularIntensityMap.value=w.specularIntensityMap,t(w.specularIntensityMap,S.specularIntensityMapTransform))}function x(S,w){w.matcap&&(S.matcap.value=w.matcap)}function E(S,w){const R=e.get(w).light;S.referencePosition.value.setFromMatrixPosition(R.matrixWorld),S.nearDistance.value=R.shadow.camera.near,S.farDistance.value=R.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function cse(n,e,t,r){let i={},a={},s=[];const o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(R,N){const O=N.program;r.uniformBlockBinding(R,O)}function f(R,N){let O=i[R.id];O===void 0&&(x(R),O=d(R),i[R.id]=O,R.addEventListener("dispose",S));const z=N.program;r.updateUBOMapping(R,z);const k=e.render.frame;a[R.id]!==k&&(v(R),a[R.id]=k)}function d(R){const N=p();R.__bindingPointIndex=N;const O=n.createBuffer(),z=R.__size,k=R.usage;return n.bindBuffer(n.UNIFORM_BUFFER,O),n.bufferData(n.UNIFORM_BUFFER,z,k),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,N,O),O}function p(){for(let R=0;R<o;R++)if(s.indexOf(R)===-1)return s.push(R),R;return tn("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(R){const N=i[R.id],O=R.uniforms,z=R.__cache;n.bindBuffer(n.UNIFORM_BUFFER,N);for(let k=0,U=O.length;k<U;k++){const P=Array.isArray(O[k])?O[k]:[O[k]];for(let C=0,L=P.length;C<L;C++){const j=P[C];if(y(j,k,C,z)===!0){const B=j.__offset,V=Array.isArray(j.value)?j.value:[j.value];let Q=0;for(let J=0;J<V.length;J++){const W=V[J],$=E(W);typeof W=="number"||typeof W=="boolean"?(j.__data[0]=W,n.bufferSubData(n.UNIFORM_BUFFER,B+Q,j.__data)):W.isMatrix3?(j.__data[0]=W.elements[0],j.__data[1]=W.elements[1],j.__data[2]=W.elements[2],j.__data[3]=0,j.__data[4]=W.elements[3],j.__data[5]=W.elements[4],j.__data[6]=W.elements[5],j.__data[7]=0,j.__data[8]=W.elements[6],j.__data[9]=W.elements[7],j.__data[10]=W.elements[8],j.__data[11]=0):(W.toArray(j.__data,Q),Q+=$.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,B,j.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function y(R,N,O,z){const k=R.value,U=N+"_"+O;if(z[U]===void 0)return typeof k=="number"||typeof k=="boolean"?z[U]=k:z[U]=k.clone(),!0;{const P=z[U];if(typeof k=="number"||typeof k=="boolean"){if(P!==k)return z[U]=k,!0}else if(P.equals(k)===!1)return P.copy(k),!0}return!1}function x(R){const N=R.uniforms;let O=0;const z=16;for(let U=0,P=N.length;U<P;U++){const C=Array.isArray(N[U])?N[U]:[N[U]];for(let L=0,j=C.length;L<j;L++){const B=C[L],V=Array.isArray(B.value)?B.value:[B.value];for(let Q=0,J=V.length;Q<J;Q++){const W=V[Q],$=E(W),se=O%z,ce=se%$.boundary,fe=se+ce;O+=ce,fe!==0&&z-fe<$.storage&&(O+=z-fe),B.__data=new Float32Array($.storage/Float32Array.BYTES_PER_ELEMENT),B.__offset=O,O+=$.storage}}}const k=O%z;return k>0&&(O+=z-k),R.__size=O,R.__cache={},this}function E(R){const N={boundary:0,storage:0};return typeof R=="number"||typeof R=="boolean"?(N.boundary=4,N.storage=4):R.isVector2?(N.boundary=8,N.storage=8):R.isVector3||R.isColor?(N.boundary=16,N.storage=12):R.isVector4?(N.boundary=16,N.storage=16):R.isMatrix3?(N.boundary=48,N.storage=48):R.isMatrix4?(N.boundary=64,N.storage=64):R.isTexture?kt("WebGLRenderer: Texture samplers can not be part of an uniforms group."):kt("WebGLRenderer: Unsupported uniform value type.",R),N}function S(R){const N=R.target;N.removeEventListener("dispose",S);const O=s.indexOf(N.__bindingPointIndex);s.splice(O,1),n.deleteBuffer(i[N.id]),delete i[N.id],delete a[N.id]}function w(){for(const R in i)n.deleteBuffer(i[R]);s=[],i={},a={}}return{bind:c,update:f,dispose:w}}const use=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let Du=null;function fse(){return Du===null&&(Du=new Vc(use,16,16,og,rf),Du.name="DFG_LUT",Du.minFilter=ti,Du.magFilter=ti,Du.wrapS=Bo,Du.wrapT=Bo,Du.generateMipmaps=!1,Du.needsUpdate=!0),Du}class x9{constructor(e={}){const{canvas:t=d8(),context:r=null,depth:i=!0,stencil:a=!1,alpha:s=!1,antialias:o=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:f=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:p=!1,reversedDepthBuffer:v=!1,outputBufferType:y=no}=e;this.isWebGLRenderer=!0;let x;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");x=r.getContextAttributes().alpha}else x=s;const E=y,S=new Set([JT,QT,U_]),w=new Set([no,tc,Ov,Dv,YT,KT]),R=new Uint32Array(4),N=new Int32Array(4);let O=null,z=null;const k=[],U=[];let P=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Jl,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const C=this;let L=!1;this._outputColorSpace=is;let j=0,B=0,V=null,Q=-1,J=null;const W=new zr,$=new zr;let se=null;const ce=new Bt(0);let fe=0,Z=t.width,re=t.height,de=1,ve=null,pe=null;const ye=new zr(0,0,Z,re),Ee=new zr(0,0,Z,re);let Xe=!1;const me=new oy;let qe=!1,mt=!1;const Ue=new yn,De=new ue,Re=new zr,Me={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Fe=!1;function Ze(){return V===null?de:1}let oe=r;function yt(te,Ae){return t.getContext(te,Ae)}try{const te={alpha:!0,depth:i,stencil:a,antialias:o,premultipliedAlpha:c,preserveDrawingBuffer:f,powerPreference:d,failIfMajorPerformanceCaveat:p};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${qT}`),t.addEventListener("webglcontextlost",Wt,!1),t.addEventListener("webglcontextrestored",nn,!1),t.addEventListener("webglcontextcreationerror",Kt,!1),oe===null){const Ae="webgl2";if(oe=yt(Ae,te),oe===null)throw yt(Ae)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(te){throw tn("WebGLRenderer: "+te.message),te}let at,Tt,ct,ae,Y,xe,ke,et,Ne,It,rt,Pt,Ot,it,tt,Mt,he,Le,bt,ge,dt,pt,ht,st;function Qe(){at=new die(oe),at.init(),pt=new b9(oe,at),Tt=new rie(oe,at,e,pt),ct=new tse(oe,at),Tt.reversedDepthBuffer&&v&&ct.buffers.depth.setReversed(!0),ae=new mie(oe),Y=new jae,xe=new nse(oe,at,ct,Y,Tt,pt,ae),ke=new aie(C),et=new fie(C),Ne=new bte(oe),ht=new tie(oe,Ne),It=new hie(oe,Ne,ae,ht),rt=new vie(oe,It,Ne,ae),bt=new gie(oe,Tt,xe),Mt=new iie(Y),Pt=new zae(C,ke,et,at,Tt,ht,Mt),Ot=new lse(C,Y),it=new Vae,tt=new Xae(at),Le=new eie(C,ke,et,ct,rt,x,c),he=new Jae(C,rt,Tt),st=new cse(oe,ae,Tt,ct),ge=new nie(oe,at,ae),dt=new pie(oe,at,ae),ae.programs=Pt.programs,C.capabilities=Tt,C.extensions=at,C.properties=Y,C.renderLists=it,C.shadowMap=he,C.state=ct,C.info=ae}Qe(),E!==no&&(P=new bie(E,t.width,t.height,i,a));const gt=new sse(C,oe);this.xr=gt,this.getContext=function(){return oe},this.getContextAttributes=function(){return oe.getContextAttributes()},this.forceContextLoss=function(){const te=at.get("WEBGL_lose_context");te&&te.loseContext()},this.forceContextRestore=function(){const te=at.get("WEBGL_lose_context");te&&te.restoreContext()},this.getPixelRatio=function(){return de},this.setPixelRatio=function(te){te!==void 0&&(de=te,this.setSize(Z,re,!1))},this.getSize=function(te){return te.set(Z,re)},this.setSize=function(te,Ae,He=!0){if(gt.isPresenting){kt("WebGLRenderer: Can't change size while VR device is presenting.");return}Z=te,re=Ae,t.width=Math.floor(te*de),t.height=Math.floor(Ae*de),He===!0&&(t.style.width=te+"px",t.style.height=Ae+"px"),P!==null&&P.setSize(t.width,t.height),this.setViewport(0,0,te,Ae)},this.getDrawingBufferSize=function(te){return te.set(Z*de,re*de).floor()},this.setDrawingBufferSize=function(te,Ae,He){Z=te,re=Ae,de=He,t.width=Math.floor(te*He),t.height=Math.floor(Ae*He),this.setViewport(0,0,te,Ae)},this.setEffects=function(te){if(E===no){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(te){for(let Ae=0;Ae<te.length;Ae++)if(te[Ae].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}P.setEffects(te||[])},this.getCurrentViewport=function(te){return te.copy(W)},this.getViewport=function(te){return te.copy(ye)},this.setViewport=function(te,Ae,He,ze){te.isVector4?ye.set(te.x,te.y,te.z,te.w):ye.set(te,Ae,He,ze),ct.viewport(W.copy(ye).multiplyScalar(de).round())},this.getScissor=function(te){return te.copy(Ee)},this.setScissor=function(te,Ae,He,ze){te.isVector4?Ee.set(te.x,te.y,te.z,te.w):Ee.set(te,Ae,He,ze),ct.scissor($.copy(Ee).multiplyScalar(de).round())},this.getScissorTest=function(){return Xe},this.setScissorTest=function(te){ct.setScissorTest(Xe=te)},this.setOpaqueSort=function(te){ve=te},this.setTransparentSort=function(te){pe=te},this.getClearColor=function(te){return te.copy(Le.getClearColor())},this.setClearColor=function(){Le.setClearColor(...arguments)},this.getClearAlpha=function(){return Le.getClearAlpha()},this.setClearAlpha=function(){Le.setClearAlpha(...arguments)},this.clear=function(te=!0,Ae=!0,He=!0){let ze=0;if(te){let Ce=!1;if(V!==null){const At=V.texture.format;Ce=S.has(At)}if(Ce){const At=V.texture.type,Lt=w.has(At),St=Le.getClearColor(),Ft=Le.getClearAlpha(),jt=St.r,Ht=St.g,Dt=St.b;Lt?(R[0]=jt,R[1]=Ht,R[2]=Dt,R[3]=Ft,oe.clearBufferuiv(oe.COLOR,0,R)):(N[0]=jt,N[1]=Ht,N[2]=Dt,N[3]=Ft,oe.clearBufferiv(oe.COLOR,0,N))}else ze|=oe.COLOR_BUFFER_BIT}Ae&&(ze|=oe.DEPTH_BUFFER_BIT),He&&(ze|=oe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),oe.clear(ze)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Wt,!1),t.removeEventListener("webglcontextrestored",nn,!1),t.removeEventListener("webglcontextcreationerror",Kt,!1),Le.dispose(),it.dispose(),tt.dispose(),Y.dispose(),ke.dispose(),et.dispose(),rt.dispose(),ht.dispose(),st.dispose(),Pt.dispose(),gt.dispose(),gt.removeEventListener("sessionstart",la),gt.removeEventListener("sessionend",Wo),Mr.stop()};function Wt(te){te.preventDefault(),Jx("WebGLRenderer: Context Lost."),L=!0}function nn(){Jx("WebGLRenderer: Context Restored."),L=!1;const te=ae.autoReset,Ae=he.enabled,He=he.autoUpdate,ze=he.needsUpdate,Ce=he.type;Qe(),ae.autoReset=te,he.enabled=Ae,he.autoUpdate=He,he.needsUpdate=ze,he.type=Ce}function Kt(te){tn("WebGLRenderer: A WebGL context could not be created. Reason: ",te.statusMessage)}function Ar(te){const Ae=te.target;Ae.removeEventListener("dispose",Ar),Tr(Ae)}function Tr(te){oa(te),Y.remove(te)}function oa(te){const Ae=Y.get(te).programs;Ae!==void 0&&(Ae.forEach(function(He){Pt.releaseProgram(He)}),te.isShaderMaterial&&Pt.releaseShaderCache(te))}this.renderBufferDirect=function(te,Ae,He,ze,Ce,At){Ae===null&&(Ae=Me);const Lt=Ce.isMesh&&Ce.matrixWorld.determinant()<0,St=qi(te,Ae,He,ze,Ce);ct.setMaterial(ze,Lt);let Ft=He.index,jt=1;if(ze.wireframe===!0){if(Ft=It.getWireframeAttribute(He),Ft===void 0)return;jt=2}const Ht=He.drawRange,Dt=He.attributes.position;let Yt=Ht.start*jt,En=(Ht.start+Ht.count)*jt;At!==null&&(Yt=Math.max(Yt,At.start*jt),En=Math.min(En,(At.start+At.count)*jt)),Ft!==null?(Yt=Math.max(Yt,0),En=Math.min(En,Ft.count)):Dt!=null&&(Yt=Math.max(Yt,0),En=Math.min(En,Dt.count));const rr=En-Yt;if(rr<0||rr===1/0)return;ht.setup(Ce,ze,St,He,Ft);let ne,Se=ge;if(Ft!==null&&(ne=Ne.get(Ft),Se=dt,Se.setIndex(ne)),Ce.isMesh)ze.wireframe===!0?(ct.setLineWidth(ze.wireframeLinewidth*Ze()),Se.setMode(oe.LINES)):Se.setMode(oe.TRIANGLES);else if(Ce.isLine){let Te=ze.linewidth;Te===void 0&&(Te=1),ct.setLineWidth(Te*Ze()),Ce.isLineSegments?Se.setMode(oe.LINES):Ce.isLineLoop?Se.setMode(oe.LINE_LOOP):Se.setMode(oe.LINE_STRIP)}else Ce.isPoints?Se.setMode(oe.POINTS):Ce.isSprite&&Se.setMode(oe.TRIANGLES);if(Ce.isBatchedMesh)if(Ce._multiDrawInstances!==null)kv("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Se.renderMultiDrawInstances(Ce._multiDrawStarts,Ce._multiDrawCounts,Ce._multiDrawCount,Ce._multiDrawInstances);else if(at.get("WEBGL_multi_draw"))Se.renderMultiDraw(Ce._multiDrawStarts,Ce._multiDrawCounts,Ce._multiDrawCount);else{const Te=Ce._multiDrawStarts,_t=Ce._multiDrawCounts,wt=Ce._multiDrawCount,Zt=Ft?Ne.get(Ft).bytesPerElement:1,Yn=Y.get(ze).currentProgram.getUniforms();for(let dn=0;dn<wt;dn++)Yn.setValue(oe,"_gl_DrawID",dn),Se.render(Te[dn]/Zt,_t[dn])}else if(Ce.isInstancedMesh)Se.renderInstances(Yt,rr,Ce.count);else if(He.isInstancedBufferGeometry){const Te=He._maxInstanceCount!==void 0?He._maxInstanceCount:1/0,_t=Math.min(He.instanceCount,Te);Se.renderInstances(Yt,rr,_t)}else Se.render(Yt,rr)};function fs(te,Ae,He){te.transparent===!0&&te.side===Bu&&te.forceSinglePass===!1?(te.side=oo,te.needsUpdate=!0,ca(te,Ae,He),te.side=vd,te.needsUpdate=!0,ca(te,Ae,He),te.side=Bu):ca(te,Ae,He)}this.compile=function(te,Ae,He=null){He===null&&(He=te),z=tt.get(He),z.init(Ae),U.push(z),He.traverseVisible(function(Ce){Ce.isLight&&Ce.layers.test(Ae.layers)&&(z.pushLight(Ce),Ce.castShadow&&z.pushShadow(Ce))}),te!==He&&te.traverseVisible(function(Ce){Ce.isLight&&Ce.layers.test(Ae.layers)&&(z.pushLight(Ce),Ce.castShadow&&z.pushShadow(Ce))}),z.setupLights();const ze=new Set;return te.traverse(function(Ce){if(!(Ce.isMesh||Ce.isPoints||Ce.isLine||Ce.isSprite))return;const At=Ce.material;if(At)if(Array.isArray(At))for(let Lt=0;Lt<At.length;Lt++){const St=At[Lt];fs(St,He,Ce),ze.add(St)}else fs(At,He,Ce),ze.add(At)}),z=U.pop(),ze},this.compileAsync=function(te,Ae,He=null){const ze=this.compile(te,Ae,He);return new Promise(Ce=>{function At(){if(ze.forEach(function(Lt){Y.get(Lt).currentProgram.isReady()&&ze.delete(Lt)}),ze.size===0){Ce(te);return}setTimeout(At,10)}at.get("KHR_parallel_shader_compile")!==null?At():setTimeout(At,10)})};let ho=null;function ds(te){ho&&ho(te)}function la(){Mr.stop()}function Wo(){Mr.start()}const Mr=new p9;Mr.setAnimationLoop(ds),typeof self<"u"&&Mr.setContext(self),this.setAnimationLoop=function(te){ho=te,gt.setAnimationLoop(te),te===null?Mr.stop():Mr.start()},gt.addEventListener("sessionstart",la),gt.addEventListener("sessionend",Wo),this.render=function(te,Ae){if(Ae!==void 0&&Ae.isCamera!==!0){tn("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(L===!0)return;const He=gt.enabled===!0&&gt.isPresenting===!0,ze=P!==null&&(V===null||He)&&P.begin(C,V);if(te.matrixWorldAutoUpdate===!0&&te.updateMatrixWorld(),Ae.parent===null&&Ae.matrixWorldAutoUpdate===!0&&Ae.updateMatrixWorld(),gt.enabled===!0&&gt.isPresenting===!0&&(P===null||P.isCompositing()===!1)&&(gt.cameraAutoUpdate===!0&&gt.updateCamera(Ae),Ae=gt.getCamera()),te.isScene===!0&&te.onBeforeRender(C,te,Ae,V),z=tt.get(te,U.length),z.init(Ae),U.push(z),Ue.multiplyMatrices(Ae.projectionMatrix,Ae.matrixWorldInverse),me.setFromProjectionMatrix(Ue,cl,Ae.reversedDepth),mt=this.localClippingEnabled,qe=Mt.init(this.clippingPlanes,mt),O=it.get(te,k.length),O.init(),k.push(O),gt.enabled===!0&&gt.isPresenting===!0){const Lt=C.xr.getDepthSensingMesh();Lt!==null&&Hi(Lt,Ae,-1/0,C.sortObjects)}Hi(te,Ae,0,C.sortObjects),O.finish(),C.sortObjects===!0&&O.sort(ve,pe),Fe=gt.enabled===!1||gt.isPresenting===!1||gt.hasDepthSensing()===!1,Fe&&Le.addToRenderList(O,te),this.info.render.frame++,qe===!0&&Mt.beginShadows();const Ce=z.state.shadowsArray;if(he.render(Ce,te,Ae),qe===!0&&Mt.endShadows(),this.info.autoReset===!0&&this.info.reset(),(ze&&P.hasRenderPass())===!1){const Lt=O.opaque,St=O.transmissive;if(z.setupLights(),Ae.isArrayCamera){const Ft=Ae.cameras;if(St.length>0)for(let jt=0,Ht=Ft.length;jt<Ht;jt++){const Dt=Ft[jt];kr(Lt,St,te,Dt)}Fe&&Le.render(te);for(let jt=0,Ht=Ft.length;jt<Ht;jt++){const Dt=Ft[jt];br(O,te,Dt,Dt.viewport)}}else St.length>0&&kr(Lt,St,te,Ae),Fe&&Le.render(te),br(O,te,Ae)}V!==null&&B===0&&(xe.updateMultisampleRenderTarget(V),xe.updateRenderTargetMipmap(V)),ze&&P.end(C),te.isScene===!0&&te.onAfterRender(C,te,Ae),ht.resetDefaultState(),Q=-1,J=null,U.pop(),U.length>0?(z=U[U.length-1],qe===!0&&Mt.setGlobalState(C.clippingPlanes,z.state.camera)):z=null,k.pop(),k.length>0?O=k[k.length-1]:O=null};function Hi(te,Ae,He,ze){if(te.visible===!1)return;if(te.layers.test(Ae.layers)){if(te.isGroup)He=te.renderOrder;else if(te.isLOD)te.autoUpdate===!0&&te.update(Ae);else if(te.isLight)z.pushLight(te),te.castShadow&&z.pushShadow(te);else if(te.isSprite){if(!te.frustumCulled||me.intersectsSprite(te)){ze&&Re.setFromMatrixPosition(te.matrixWorld).applyMatrix4(Ue);const Lt=rt.update(te),St=te.material;St.visible&&O.push(te,Lt,St,He,Re.z,null)}}else if((te.isMesh||te.isLine||te.isPoints)&&(!te.frustumCulled||me.intersectsObject(te))){const Lt=rt.update(te),St=te.material;if(ze&&(te.boundingSphere!==void 0?(te.boundingSphere===null&&te.computeBoundingSphere(),Re.copy(te.boundingSphere.center)):(Lt.boundingSphere===null&&Lt.computeBoundingSphere(),Re.copy(Lt.boundingSphere.center)),Re.applyMatrix4(te.matrixWorld).applyMatrix4(Ue)),Array.isArray(St)){const Ft=Lt.groups;for(let jt=0,Ht=Ft.length;jt<Ht;jt++){const Dt=Ft[jt],Yt=St[Dt.materialIndex];Yt&&Yt.visible&&O.push(te,Lt,Yt,He,Re.z,Dt)}}else St.visible&&O.push(te,Lt,St,He,Re.z,null)}}const At=te.children;for(let Lt=0,St=At.length;Lt<St;Lt++)Hi(At[Lt],Ae,He,ze)}function br(te,Ae,He,ze){const{opaque:Ce,transmissive:At,transparent:Lt}=te;z.setupLightsView(He),qe===!0&&Mt.setGlobalState(C.clippingPlanes,He),ze&&ct.viewport(W.copy(ze)),Ce.length>0&&Ni(Ce,Ae,He),At.length>0&&Ni(At,Ae,He),Lt.length>0&&Ni(Lt,Ae,He),ct.buffers.depth.setTest(!0),ct.buffers.depth.setMask(!0),ct.buffers.color.setMask(!0),ct.setPolygonOffset(!1)}function kr(te,Ae,He,ze){if((He.isScene===!0?He.overrideMaterial:null)!==null)return;if(z.state.transmissionRenderTarget[ze.id]===void 0){const Yt=at.has("EXT_color_buffer_half_float")||at.has("EXT_color_buffer_float");z.state.transmissionRenderTarget[ze.id]=new pl(1,1,{generateMipmaps:!0,type:Yt?rf:no,minFilter:Gu,samples:Tt.samples,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Qn.workingColorSpace})}const At=z.state.transmissionRenderTarget[ze.id],Lt=ze.viewport||W;At.setSize(Lt.z*C.transmissionResolutionScale,Lt.w*C.transmissionResolutionScale);const St=C.getRenderTarget(),Ft=C.getActiveCubeFace(),jt=C.getActiveMipmapLevel();C.setRenderTarget(At),C.getClearColor(ce),fe=C.getClearAlpha(),fe<1&&C.setClearColor(16777215,.5),C.clear(),Fe&&Le.render(He);const Ht=C.toneMapping;C.toneMapping=Jl;const Dt=ze.viewport;if(ze.viewport!==void 0&&(ze.viewport=void 0),z.setupLightsView(ze),qe===!0&&Mt.setGlobalState(C.clippingPlanes,ze),Ni(te,He,ze),xe.updateMultisampleRenderTarget(At),xe.updateRenderTargetMipmap(At),at.has("WEBGL_multisampled_render_to_texture")===!1){let Yt=!1;for(let En=0,rr=Ae.length;En<rr;En++){const ne=Ae[En],{object:Se,geometry:Te,material:_t,group:wt}=ne;if(_t.side===Bu&&Se.layers.test(ze.layers)){const Zt=_t.side;_t.side=oo,_t.needsUpdate=!0,Gi(Se,He,ze,Te,_t,wt),_t.side=Zt,_t.needsUpdate=!0,Yt=!0}}Yt===!0&&(xe.updateMultisampleRenderTarget(At),xe.updateRenderTargetMipmap(At))}C.setRenderTarget(St,Ft,jt),C.setClearColor(ce,fe),Dt!==void 0&&(ze.viewport=Dt),C.toneMapping=Ht}function Ni(te,Ae,He){const ze=Ae.isScene===!0?Ae.overrideMaterial:null;for(let Ce=0,At=te.length;Ce<At;Ce++){const Lt=te[Ce],{object:St,geometry:Ft,group:jt}=Lt;let Ht=Lt.material;Ht.allowOverride===!0&&ze!==null&&(Ht=ze),St.layers.test(He.layers)&&Gi(St,Ae,He,Ft,Ht,jt)}}function Gi(te,Ae,He,ze,Ce,At){te.onBeforeRender(C,Ae,He,ze,Ce,At),te.modelViewMatrix.multiplyMatrices(He.matrixWorldInverse,te.matrixWorld),te.normalMatrix.getNormalMatrix(te.modelViewMatrix),Ce.onBeforeRender(C,Ae,He,ze,te,At),Ce.transparent===!0&&Ce.side===Bu&&Ce.forceSinglePass===!1?(Ce.side=oo,Ce.needsUpdate=!0,C.renderBufferDirect(He,Ae,ze,Ce,te,At),Ce.side=vd,Ce.needsUpdate=!0,C.renderBufferDirect(He,Ae,ze,Ce,te,At),Ce.side=Bu):C.renderBufferDirect(He,Ae,ze,Ce,te,At),te.onAfterRender(C,Ae,He,ze,Ce,At)}function ca(te,Ae,He){Ae.isScene!==!0&&(Ae=Me);const ze=Y.get(te),Ce=z.state.lights,At=z.state.shadowsArray,Lt=Ce.state.version,St=Pt.getParameters(te,Ce.state,At,Ae,He),Ft=Pt.getProgramCacheKey(St);let jt=ze.programs;ze.environment=te.isMeshStandardMaterial?Ae.environment:null,ze.fog=Ae.fog,ze.envMap=(te.isMeshStandardMaterial?et:ke).get(te.envMap||ze.environment),ze.envMapRotation=ze.environment!==null&&te.envMap===null?Ae.environmentRotation:te.envMapRotation,jt===void 0&&(te.addEventListener("dispose",Ar),jt=new Map,ze.programs=jt);let Ht=jt.get(Ft);if(Ht!==void 0){if(ze.currentProgram===Ht&&ze.lightsStateVersion===Lt)return $o(te,St),Ht}else St.uniforms=Pt.getUniforms(te),te.onBeforeCompile(St,C),Ht=Pt.acquireProgram(St,Ft),jt.set(Ft,Ht),ze.uniforms=St.uniforms;const Dt=ze.uniforms;return(!te.isShaderMaterial&&!te.isRawShaderMaterial||te.clipping===!0)&&(Dt.clippingPlanes=Mt.uniform),$o(te,St),ze.needsLights=Fa(te),ze.lightsStateVersion=Lt,ze.needsLights&&(Dt.ambientLightColor.value=Ce.state.ambient,Dt.lightProbe.value=Ce.state.probe,Dt.directionalLights.value=Ce.state.directional,Dt.directionalLightShadows.value=Ce.state.directionalShadow,Dt.spotLights.value=Ce.state.spot,Dt.spotLightShadows.value=Ce.state.spotShadow,Dt.rectAreaLights.value=Ce.state.rectArea,Dt.ltc_1.value=Ce.state.rectAreaLTC1,Dt.ltc_2.value=Ce.state.rectAreaLTC2,Dt.pointLights.value=Ce.state.point,Dt.pointLightShadows.value=Ce.state.pointShadow,Dt.hemisphereLights.value=Ce.state.hemi,Dt.directionalShadowMap.value=Ce.state.directionalShadowMap,Dt.directionalShadowMatrix.value=Ce.state.directionalShadowMatrix,Dt.spotShadowMap.value=Ce.state.spotShadowMap,Dt.spotLightMatrix.value=Ce.state.spotLightMatrix,Dt.spotLightMap.value=Ce.state.spotLightMap,Dt.pointShadowMap.value=Ce.state.pointShadowMap,Dt.pointShadowMatrix.value=Ce.state.pointShadowMatrix),ze.currentProgram=Ht,ze.uniformsList=null,Ht}function zs(te){if(te.uniformsList===null){const Ae=te.currentProgram.getUniforms();te.uniformsList=cE.seqWithValue(Ae.seq,te.uniforms)}return te.uniformsList}function $o(te,Ae){const He=Y.get(te);He.outputColorSpace=Ae.outputColorSpace,He.batching=Ae.batching,He.batchingColor=Ae.batchingColor,He.instancing=Ae.instancing,He.instancingColor=Ae.instancingColor,He.instancingMorph=Ae.instancingMorph,He.skinning=Ae.skinning,He.morphTargets=Ae.morphTargets,He.morphNormals=Ae.morphNormals,He.morphColors=Ae.morphColors,He.morphTargetsCount=Ae.morphTargetsCount,He.numClippingPlanes=Ae.numClippingPlanes,He.numIntersection=Ae.numClipIntersection,He.vertexAlphas=Ae.vertexAlphas,He.vertexTangents=Ae.vertexTangents,He.toneMapping=Ae.toneMapping}function qi(te,Ae,He,ze,Ce){Ae.isScene!==!0&&(Ae=Me),xe.resetTextureUnits();const At=Ae.fog,Lt=ze.isMeshStandardMaterial?Ae.environment:null,St=V===null?C.outputColorSpace:V.isXRRenderTarget===!0?V.texture.colorSpace:op,Ft=(ze.isMeshStandardMaterial?et:ke).get(ze.envMap||Lt),jt=ze.vertexColors===!0&&!!He.attributes.color&&He.attributes.color.itemSize===4,Ht=!!He.attributes.tangent&&(!!ze.normalMap||ze.anisotropy>0),Dt=!!He.morphAttributes.position,Yt=!!He.morphAttributes.normal,En=!!He.morphAttributes.color;let rr=Jl;ze.toneMapped&&(V===null||V.isXRRenderTarget===!0)&&(rr=C.toneMapping);const ne=He.morphAttributes.position||He.morphAttributes.normal||He.morphAttributes.color,Se=ne!==void 0?ne.length:0,Te=Y.get(ze),_t=z.state.lights;if(qe===!0&&(mt===!0||te!==J)){const xr=te===J&&ze.id===Q;Mt.setState(ze,te,xr)}let wt=!1;ze.version===Te.__version?(Te.needsLights&&Te.lightsStateVersion!==_t.state.version||Te.outputColorSpace!==St||Ce.isBatchedMesh&&Te.batching===!1||!Ce.isBatchedMesh&&Te.batching===!0||Ce.isBatchedMesh&&Te.batchingColor===!0&&Ce.colorTexture===null||Ce.isBatchedMesh&&Te.batchingColor===!1&&Ce.colorTexture!==null||Ce.isInstancedMesh&&Te.instancing===!1||!Ce.isInstancedMesh&&Te.instancing===!0||Ce.isSkinnedMesh&&Te.skinning===!1||!Ce.isSkinnedMesh&&Te.skinning===!0||Ce.isInstancedMesh&&Te.instancingColor===!0&&Ce.instanceColor===null||Ce.isInstancedMesh&&Te.instancingColor===!1&&Ce.instanceColor!==null||Ce.isInstancedMesh&&Te.instancingMorph===!0&&Ce.morphTexture===null||Ce.isInstancedMesh&&Te.instancingMorph===!1&&Ce.morphTexture!==null||Te.envMap!==Ft||ze.fog===!0&&Te.fog!==At||Te.numClippingPlanes!==void 0&&(Te.numClippingPlanes!==Mt.numPlanes||Te.numIntersection!==Mt.numIntersection)||Te.vertexAlphas!==jt||Te.vertexTangents!==Ht||Te.morphTargets!==Dt||Te.morphNormals!==Yt||Te.morphColors!==En||Te.toneMapping!==rr||Te.morphTargetsCount!==Se)&&(wt=!0):(wt=!0,Te.__version=ze.version);let Zt=Te.currentProgram;wt===!0&&(Zt=ca(ze,Ae,Ce));let Yn=!1,dn=!1,Gn=!1;const hn=Zt.getUniforms(),ir=Te.uniforms;if(ct.useProgram(Zt.program)&&(Yn=!0,dn=!0,Gn=!0),ze.id!==Q&&(Q=ze.id,dn=!0),Yn||J!==te){ct.buffers.depth.getReversed()&&te.reversedDepth!==!0&&(te._reversedDepth=!0,te.updateProjectionMatrix()),hn.setValue(oe,"projectionMatrix",te.projectionMatrix),hn.setValue(oe,"viewMatrix",te.matrixWorldInverse);const Rr=hn.map.cameraPosition;Rr!==void 0&&Rr.setValue(oe,De.setFromMatrixPosition(te.matrixWorld)),Tt.logarithmicDepthBuffer&&hn.setValue(oe,"logDepthBufFC",2/(Math.log(te.far+1)/Math.LN2)),(ze.isMeshPhongMaterial||ze.isMeshToonMaterial||ze.isMeshLambertMaterial||ze.isMeshBasicMaterial||ze.isMeshStandardMaterial||ze.isShaderMaterial)&&hn.setValue(oe,"isOrthographic",te.isOrthographicCamera===!0),J!==te&&(J=te,dn=!0,Gn=!0)}if(Te.needsLights&&(_t.state.directionalShadowMap.length>0&&hn.setValue(oe,"directionalShadowMap",_t.state.directionalShadowMap,xe),_t.state.spotShadowMap.length>0&&hn.setValue(oe,"spotShadowMap",_t.state.spotShadowMap,xe),_t.state.pointShadowMap.length>0&&hn.setValue(oe,"pointShadowMap",_t.state.pointShadowMap,xe)),Ce.isSkinnedMesh){hn.setOptional(oe,Ce,"bindMatrix"),hn.setOptional(oe,Ce,"bindMatrixInverse");const xr=Ce.skeleton;xr&&(xr.boneTexture===null&&xr.computeBoneTexture(),hn.setValue(oe,"boneTexture",xr.boneTexture,xe))}Ce.isBatchedMesh&&(hn.setOptional(oe,Ce,"batchingTexture"),hn.setValue(oe,"batchingTexture",Ce._matricesTexture,xe),hn.setOptional(oe,Ce,"batchingIdTexture"),hn.setValue(oe,"batchingIdTexture",Ce._indirectTexture,xe),hn.setOptional(oe,Ce,"batchingColorTexture"),Ce._colorsTexture!==null&&hn.setValue(oe,"batchingColorTexture",Ce._colorsTexture,xe));const qn=He.morphAttributes;if((qn.position!==void 0||qn.normal!==void 0||qn.color!==void 0)&&bt.update(Ce,He,Zt),(dn||Te.receiveShadow!==Ce.receiveShadow)&&(Te.receiveShadow=Ce.receiveShadow,hn.setValue(oe,"receiveShadow",Ce.receiveShadow)),ze.isMeshGouraudMaterial&&ze.envMap!==null&&(ir.envMap.value=Ft,ir.flipEnvMap.value=Ft.isCubeTexture&&Ft.isRenderTargetTexture===!1?-1:1),ze.isMeshStandardMaterial&&ze.envMap===null&&Ae.environment!==null&&(ir.envMapIntensity.value=Ae.environmentIntensity),ir.dfgLUT!==void 0&&(ir.dfgLUT.value=fse()),dn&&(hn.setValue(oe,"toneMappingExposure",C.toneMappingExposure),Te.needsLights&&hs(ir,Gn),At&&ze.fog===!0&&Ot.refreshFogUniforms(ir,At),Ot.refreshMaterialUniforms(ir,ze,de,re,z.state.transmissionRenderTarget[te.id]),cE.upload(oe,zs(Te),ir,xe)),ze.isShaderMaterial&&ze.uniformsNeedUpdate===!0&&(cE.upload(oe,zs(Te),ir,xe),ze.uniformsNeedUpdate=!1),ze.isSpriteMaterial&&hn.setValue(oe,"center",Ce.center),hn.setValue(oe,"modelViewMatrix",Ce.modelViewMatrix),hn.setValue(oe,"normalMatrix",Ce.normalMatrix),hn.setValue(oe,"modelMatrix",Ce.matrixWorld),ze.isShaderMaterial||ze.isRawShaderMaterial){const xr=ze.uniformsGroups;for(let Rr=0,za=xr.length;Rr<za;Rr++){const xi=xr[Rr];st.update(xi,Zt),st.bind(xi,Zt)}}return Zt}function hs(te,Ae){te.ambientLightColor.needsUpdate=Ae,te.lightProbe.needsUpdate=Ae,te.directionalLights.needsUpdate=Ae,te.directionalLightShadows.needsUpdate=Ae,te.pointLights.needsUpdate=Ae,te.pointLightShadows.needsUpdate=Ae,te.spotLights.needsUpdate=Ae,te.spotLightShadows.needsUpdate=Ae,te.rectAreaLights.needsUpdate=Ae,te.hemisphereLights.needsUpdate=Ae}function Fa(te){return te.isMeshLambertMaterial||te.isMeshToonMaterial||te.isMeshPhongMaterial||te.isMeshStandardMaterial||te.isShadowMaterial||te.isShaderMaterial&&te.lights===!0}this.getActiveCubeFace=function(){return j},this.getActiveMipmapLevel=function(){return B},this.getRenderTarget=function(){return V},this.setRenderTargetTextures=function(te,Ae,He){const ze=Y.get(te);ze.__autoAllocateDepthBuffer=te.resolveDepthBuffer===!1,ze.__autoAllocateDepthBuffer===!1&&(ze.__useRenderToTexture=!1),Y.get(te.texture).__webglTexture=Ae,Y.get(te.depthTexture).__webglTexture=ze.__autoAllocateDepthBuffer?void 0:He,ze.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(te,Ae){const He=Y.get(te);He.__webglFramebuffer=Ae,He.__useDefaultFramebuffer=Ae===void 0};const ua=oe.createFramebuffer();this.setRenderTarget=function(te,Ae=0,He=0){V=te,j=Ae,B=He;let ze=null,Ce=!1,At=!1;if(te){const St=Y.get(te);if(St.__useDefaultFramebuffer!==void 0){ct.bindFramebuffer(oe.FRAMEBUFFER,St.__webglFramebuffer),W.copy(te.viewport),$.copy(te.scissor),se=te.scissorTest,ct.viewport(W),ct.scissor($),ct.setScissorTest(se),Q=-1;return}else if(St.__webglFramebuffer===void 0)xe.setupRenderTarget(te);else if(St.__hasExternalTextures)xe.rebindTextures(te,Y.get(te.texture).__webglTexture,Y.get(te.depthTexture).__webglTexture);else if(te.depthBuffer){const Ht=te.depthTexture;if(St.__boundDepthTexture!==Ht){if(Ht!==null&&Y.has(Ht)&&(te.width!==Ht.image.width||te.height!==Ht.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");xe.setupDepthRenderbuffer(te)}}const Ft=te.texture;(Ft.isData3DTexture||Ft.isDataArrayTexture||Ft.isCompressedArrayTexture)&&(At=!0);const jt=Y.get(te).__webglFramebuffer;te.isWebGLCubeRenderTarget?(Array.isArray(jt[Ae])?ze=jt[Ae][He]:ze=jt[Ae],Ce=!0):te.samples>0&&xe.useMultisampledRTT(te)===!1?ze=Y.get(te).__webglMultisampledFramebuffer:Array.isArray(jt)?ze=jt[He]:ze=jt,W.copy(te.viewport),$.copy(te.scissor),se=te.scissorTest}else W.copy(ye).multiplyScalar(de).floor(),$.copy(Ee).multiplyScalar(de).floor(),se=Xe;if(He!==0&&(ze=ua),ct.bindFramebuffer(oe.FRAMEBUFFER,ze)&&ct.drawBuffers(te,ze),ct.viewport(W),ct.scissor($),ct.setScissorTest(se),Ce){const St=Y.get(te.texture);oe.framebufferTexture2D(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,St.__webglTexture,He)}else if(At){const St=Ae;for(let Ft=0;Ft<te.textures.length;Ft++){const jt=Y.get(te.textures[Ft]);oe.framebufferTextureLayer(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0+Ft,jt.__webglTexture,He,St)}}else if(te!==null&&He!==0){const St=Y.get(te.texture);oe.framebufferTexture2D(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_2D,St.__webglTexture,He)}Q=-1},this.readRenderTargetPixels=function(te,Ae,He,ze,Ce,At,Lt,St=0){if(!(te&&te.isWebGLRenderTarget)){tn("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ft=Y.get(te).__webglFramebuffer;if(te.isWebGLCubeRenderTarget&&Lt!==void 0&&(Ft=Ft[Lt]),Ft){ct.bindFramebuffer(oe.FRAMEBUFFER,Ft);try{const jt=te.textures[St],Ht=jt.format,Dt=jt.type;if(!Tt.textureFormatReadable(Ht)){tn("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Tt.textureTypeReadable(Dt)){tn("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ae>=0&&Ae<=te.width-ze&&He>=0&&He<=te.height-Ce&&(te.textures.length>1&&oe.readBuffer(oe.COLOR_ATTACHMENT0+St),oe.readPixels(Ae,He,ze,Ce,pt.convert(Ht),pt.convert(Dt),At))}finally{const jt=V!==null?Y.get(V).__webglFramebuffer:null;ct.bindFramebuffer(oe.FRAMEBUFFER,jt)}}},this.readRenderTargetPixelsAsync=async function(te,Ae,He,ze,Ce,At,Lt,St=0){if(!(te&&te.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ft=Y.get(te).__webglFramebuffer;if(te.isWebGLCubeRenderTarget&&Lt!==void 0&&(Ft=Ft[Lt]),Ft)if(Ae>=0&&Ae<=te.width-ze&&He>=0&&He<=te.height-Ce){ct.bindFramebuffer(oe.FRAMEBUFFER,Ft);const jt=te.textures[St],Ht=jt.format,Dt=jt.type;if(!Tt.textureFormatReadable(Ht))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Tt.textureTypeReadable(Dt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Yt=oe.createBuffer();oe.bindBuffer(oe.PIXEL_PACK_BUFFER,Yt),oe.bufferData(oe.PIXEL_PACK_BUFFER,At.byteLength,oe.STREAM_READ),te.textures.length>1&&oe.readBuffer(oe.COLOR_ATTACHMENT0+St),oe.readPixels(Ae,He,ze,Ce,pt.convert(Ht),pt.convert(Dt),0);const En=V!==null?Y.get(V).__webglFramebuffer:null;ct.bindFramebuffer(oe.FRAMEBUFFER,En);const rr=oe.fenceSync(oe.SYNC_GPU_COMMANDS_COMPLETE,0);return oe.flush(),await _Q(oe,rr,4),oe.bindBuffer(oe.PIXEL_PACK_BUFFER,Yt),oe.getBufferSubData(oe.PIXEL_PACK_BUFFER,0,At),oe.deleteBuffer(Yt),oe.deleteSync(rr),At}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(te,Ae=null,He=0){const ze=Math.pow(2,-He),Ce=Math.floor(te.image.width*ze),At=Math.floor(te.image.height*ze),Lt=Ae!==null?Ae.x:0,St=Ae!==null?Ae.y:0;xe.setTexture2D(te,0),oe.copyTexSubImage2D(oe.TEXTURE_2D,He,0,0,Lt,St,Ce,At),ct.unbindTexture()};const Wi=oe.createFramebuffer(),fa=oe.createFramebuffer();this.copyTextureToTexture=function(te,Ae,He=null,ze=null,Ce=0,At=null){At===null&&(Ce!==0?(kv("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),At=Ce,Ce=0):At=0);let Lt,St,Ft,jt,Ht,Dt,Yt,En,rr;const ne=te.isCompressedTexture?te.mipmaps[At]:te.image;if(He!==null)Lt=He.max.x-He.min.x,St=He.max.y-He.min.y,Ft=He.isBox3?He.max.z-He.min.z:1,jt=He.min.x,Ht=He.min.y,Dt=He.isBox3?He.min.z:0;else{const qn=Math.pow(2,-Ce);Lt=Math.floor(ne.width*qn),St=Math.floor(ne.height*qn),te.isDataArrayTexture?Ft=ne.depth:te.isData3DTexture?Ft=Math.floor(ne.depth*qn):Ft=1,jt=0,Ht=0,Dt=0}ze!==null?(Yt=ze.x,En=ze.y,rr=ze.z):(Yt=0,En=0,rr=0);const Se=pt.convert(Ae.format),Te=pt.convert(Ae.type);let _t;Ae.isData3DTexture?(xe.setTexture3D(Ae,0),_t=oe.TEXTURE_3D):Ae.isDataArrayTexture||Ae.isCompressedArrayTexture?(xe.setTexture2DArray(Ae,0),_t=oe.TEXTURE_2D_ARRAY):(xe.setTexture2D(Ae,0),_t=oe.TEXTURE_2D),oe.pixelStorei(oe.UNPACK_FLIP_Y_WEBGL,Ae.flipY),oe.pixelStorei(oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ae.premultiplyAlpha),oe.pixelStorei(oe.UNPACK_ALIGNMENT,Ae.unpackAlignment);const wt=oe.getParameter(oe.UNPACK_ROW_LENGTH),Zt=oe.getParameter(oe.UNPACK_IMAGE_HEIGHT),Yn=oe.getParameter(oe.UNPACK_SKIP_PIXELS),dn=oe.getParameter(oe.UNPACK_SKIP_ROWS),Gn=oe.getParameter(oe.UNPACK_SKIP_IMAGES);oe.pixelStorei(oe.UNPACK_ROW_LENGTH,ne.width),oe.pixelStorei(oe.UNPACK_IMAGE_HEIGHT,ne.height),oe.pixelStorei(oe.UNPACK_SKIP_PIXELS,jt),oe.pixelStorei(oe.UNPACK_SKIP_ROWS,Ht),oe.pixelStorei(oe.UNPACK_SKIP_IMAGES,Dt);const hn=te.isDataArrayTexture||te.isData3DTexture,ir=Ae.isDataArrayTexture||Ae.isData3DTexture;if(te.isDepthTexture){const qn=Y.get(te),xr=Y.get(Ae),Rr=Y.get(qn.__renderTarget),za=Y.get(xr.__renderTarget);ct.bindFramebuffer(oe.READ_FRAMEBUFFER,Rr.__webglFramebuffer),ct.bindFramebuffer(oe.DRAW_FRAMEBUFFER,za.__webglFramebuffer);for(let xi=0;xi<Ft;xi++)hn&&(oe.framebufferTextureLayer(oe.READ_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,Y.get(te).__webglTexture,Ce,Dt+xi),oe.framebufferTextureLayer(oe.DRAW_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,Y.get(Ae).__webglTexture,At,rr+xi)),oe.blitFramebuffer(jt,Ht,Lt,St,Yt,En,Lt,St,oe.DEPTH_BUFFER_BIT,oe.NEAREST);ct.bindFramebuffer(oe.READ_FRAMEBUFFER,null),ct.bindFramebuffer(oe.DRAW_FRAMEBUFFER,null)}else if(Ce!==0||te.isRenderTargetTexture||Y.has(te)){const qn=Y.get(te),xr=Y.get(Ae);ct.bindFramebuffer(oe.READ_FRAMEBUFFER,Wi),ct.bindFramebuffer(oe.DRAW_FRAMEBUFFER,fa);for(let Rr=0;Rr<Ft;Rr++)hn?oe.framebufferTextureLayer(oe.READ_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,qn.__webglTexture,Ce,Dt+Rr):oe.framebufferTexture2D(oe.READ_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_2D,qn.__webglTexture,Ce),ir?oe.framebufferTextureLayer(oe.DRAW_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,xr.__webglTexture,At,rr+Rr):oe.framebufferTexture2D(oe.DRAW_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_2D,xr.__webglTexture,At),Ce!==0?oe.blitFramebuffer(jt,Ht,Lt,St,Yt,En,Lt,St,oe.COLOR_BUFFER_BIT,oe.NEAREST):ir?oe.copyTexSubImage3D(_t,At,Yt,En,rr+Rr,jt,Ht,Lt,St):oe.copyTexSubImage2D(_t,At,Yt,En,jt,Ht,Lt,St);ct.bindFramebuffer(oe.READ_FRAMEBUFFER,null),ct.bindFramebuffer(oe.DRAW_FRAMEBUFFER,null)}else ir?te.isDataTexture||te.isData3DTexture?oe.texSubImage3D(_t,At,Yt,En,rr,Lt,St,Ft,Se,Te,ne.data):Ae.isCompressedArrayTexture?oe.compressedTexSubImage3D(_t,At,Yt,En,rr,Lt,St,Ft,Se,ne.data):oe.texSubImage3D(_t,At,Yt,En,rr,Lt,St,Ft,Se,Te,ne):te.isDataTexture?oe.texSubImage2D(oe.TEXTURE_2D,At,Yt,En,Lt,St,Se,Te,ne.data):te.isCompressedTexture?oe.compressedTexSubImage2D(oe.TEXTURE_2D,At,Yt,En,ne.width,ne.height,Se,ne.data):oe.texSubImage2D(oe.TEXTURE_2D,At,Yt,En,Lt,St,Se,Te,ne);oe.pixelStorei(oe.UNPACK_ROW_LENGTH,wt),oe.pixelStorei(oe.UNPACK_IMAGE_HEIGHT,Zt),oe.pixelStorei(oe.UNPACK_SKIP_PIXELS,Yn),oe.pixelStorei(oe.UNPACK_SKIP_ROWS,dn),oe.pixelStorei(oe.UNPACK_SKIP_IMAGES,Gn),At===0&&Ae.generateMipmaps&&oe.generateMipmap(_t),ct.unbindTexture()},this.initRenderTarget=function(te){Y.get(te).__webglFramebuffer===void 0&&xe.setupRenderTarget(te)},this.initTexture=function(te){te.isCubeTexture?xe.setTextureCube(te,0):te.isData3DTexture?xe.setTexture3D(te,0):te.isDataArrayTexture||te.isCompressedArrayTexture?xe.setTexture2DArray(te,0):xe.setTexture2D(te,0),ct.unbindTexture()},this.resetState=function(){j=0,B=0,V=null,ct.reset(),ht.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return cl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Qn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Qn._getUnpackColorSpace()}}const dse=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:WT,AddEquation:jh,AddOperation:ZV,AdditiveAnimationBlendMode:I3,AdditiveBlending:SN,AgXToneMapping:x3,AlphaFormat:M3,AlwaysCompare:c8,AlwaysDepth:OE,AlwaysStencilFunc:TN,AmbientLight:r9,AnimationAction:f9,AnimationClip:a_,AnimationLoader:uee,AnimationMixer:zee,AnimationObjectGroup:Uee,AnimationUtils:see,ArcCurve:R8,ArrayCamera:l9,ArrowHelper:ute,AttachedBindMode:AN,Audio:c9,AudioAnalyser:Mee,AudioContext:nD,AudioListener:Eee,AudioLoader:_ee,AxesHelper:fte,BackSide:oo,BasicDepthPacking:n8,BasicShadowMap:PV,BatchedMesh:E8,Bone:U3,BooleanKeyframeTrack:Ig,Box2:Xee,Box3:os,Box3Helper:lte,BoxGeometry:Cg,BoxHelper:ote,BufferAttribute:yr,BufferGeometry:xn,BufferGeometryLoader:o9,ByteType:w3,Cache:qu,Camera:aM,CameraHelper:ste,CanvasTexture:IJ,CapsuleGeometry:dM,CatmullRomCurve3:P8,CineonToneMapping:y3,CircleGeometry:hM,ClampToEdgeWrapping:Bo,Clock:rD,Color:Bt,ColorKeyframeTrack:Q3,ColorManagement:Qn,CompressedArrayTexture:MJ,CompressedCubeTexture:CJ,CompressedTexture:fM,CompressedTextureLoader:fee,ConeGeometry:j_,ConstantAlphaFactor:XV,ConstantColorFactor:WV,Controls:hte,CubeCamera:y8,CubeDepthTexture:C8,CubeReflectionMapping:nf,CubeRefractionMapping:sp,CubeTexture:F_,CubeTextureLoader:dee,CubeUVReflectionMapping:sy,CubicBezierCurve:B3,CubicBezierCurve3:N8,CubicInterpolant:Y8,CullFaceBack:_N,CullFaceFront:RV,CullFaceFrontBack:PZ,CullFaceNone:IV,Curve:Zc,CurvePath:D8,CustomBlending:NV,CustomToneMapping:b3,CylinderGeometry:z_,Cylindrical:$ee,Data3DTexture:iM,DataArrayTexture:rM,DataTexture:Vc,DataTextureLoader:hee,DataUtils:QQ,DecrementStencilOp:YZ,DecrementWrapStencilOp:ZZ,DefaultLoadingManager:Q8,DepthFormat:af,DepthStencilFormat:Xh,DepthTexture:Bv,DetachedBindMode:QV,DirectionalLight:n9,DirectionalLightHelper:ate,DiscreteInterpolant:K8,DodecahedronGeometry:pM,DoubleSide:Bu,DstAlphaFactor:BV,DstColorFactor:HV,DynamicCopyUsage:dQ,DynamicDrawUsage:sQ,DynamicReadUsage:cQ,EdgesGeometry:I8,EllipseCurve:mM,EqualCompare:s8,EqualDepth:LE,EqualStencilFunc:tQ,EquirectangularReflectionMapping:Gx,EquirectangularRefractionMapping:qx,Euler:gl,EventDispatcher:pf,ExternalTexture:z3,ExtrudeGeometry:gM,FileLoader:sf,Float16BufferAttribute:aJ,Float32BufferAttribute:qt,FloatType:io,Fog:oM,FogExp2:sM,FramebufferTexture:TJ,FrontSide:vd,Frustum:oy,FrustumArray:uM,GLBufferAttribute:Gee,GLSL1:pQ,GLSL3:MN,GreaterCompare:o8,GreaterDepth:UE,GreaterEqualCompare:nM,GreaterEqualDepth:kE,GreaterEqualStencilFunc:aQ,GreaterStencilFunc:rQ,GridHelper:rte,Group:yv,HalfFloatType:rf,HemisphereLight:J8,HemisphereLightHelper:nte,IcosahedronGeometry:vM,ImageBitmapLoader:xee,ImageLoader:s_,ImageUtils:p8,IncrementStencilOp:XZ,IncrementWrapStencilOp:KZ,InstancedBufferAttribute:jv,InstancedBufferGeometry:s9,InstancedInterleavedBuffer:Hee,InstancedMesh:w8,Int16BufferAttribute:rJ,Int32BufferAttribute:iJ,Int8BufferAttribute:eJ,IntType:XT,InterleavedBuffer:lM,InterleavedBufferAttribute:lg,Interpolant:H_,InterpolateDiscrete:Xx,InterpolateLinear:vA,InterpolateSmooth:oE,InterpolationSamplingMode:vQ,InterpolationSamplingType:gQ,InvertStencilOp:QZ,KeepStencilOp:Im,KeyframeTrack:sc,LOD:_8,LatheGeometry:yM,Layers:Fv,LessCompare:a8,LessDepth:DE,LessEqualCompare:tM,LessEqualDepth:sg,LessEqualStencilFunc:nQ,LessStencilFunc:eQ,Light:wp,LightProbe:a9,Line:cp,Line3:Zee,LineBasicMaterial:co,LineCurve:V3,LineCurve3:O8,LineDashedMaterial:$8,LineLoop:A8,LineSegments:mf,LinearFilter:ti,LinearInterpolant:Z3,LinearMipMapLinearFilter:LZ,LinearMipMapNearestFilter:DZ,LinearMipmapLinearFilter:Gu,LinearMipmapNearestFilter:Ax,LinearSRGBColorSpace:op,LinearToneMapping:g3,LinearTransfer:Kx,Loader:uo,LoaderUtils:NN,LoadingManager:J3,LoopOnce:JV,LoopPingPong:t8,LoopRepeat:e8,MOUSE:Mm,Material:Fs,MaterialLoader:AM,MathUtils:h8,Matrix2:oD,Matrix3:Rn,Matrix4:yn,MaxEquation:kV,Mesh:sa,MeshBasicMaterial:_p,MeshDepthMaterial:X3,MeshDistanceMaterial:Y3,MeshLambertMaterial:q8,MeshMatcapMaterial:W8,MeshNormalMaterial:G8,MeshPhongMaterial:V8,MeshPhysicalMaterial:B8,MeshStandardMaterial:$3,MeshToonMaterial:H8,MinEquation:LV,MirroredRepeatWrapping:$x,MixOperation:KV,MultiplyBlending:EN,MultiplyOperation:k_,NearestFilter:Bi,NearestMipMapLinearFilter:OZ,NearestMipMapNearestFilter:NZ,NearestMipmapLinearFilter:gv,NearestMipmapNearestFilter:S3,NeutralToneMapping:_3,NeverCompare:i8,NeverDepth:NE,NeverStencilFunc:JZ,NoBlending:Yu,NoColorSpace:id,NoNormalPacking:HZ,NoToneMapping:Jl,NormalAnimationBlendMode:eM,NormalBlending:Ym,NormalGAPacking:qZ,NormalRGPacking:GZ,NotEqualCompare:l8,NotEqualDepth:FE,NotEqualStencilFunc:iQ,NumberKeyframeTrack:r_,Object3D:cr,ObjectLoader:yee,ObjectSpaceNormalMap:r8,OctahedronGeometry:B_,OneFactor:FV,OneMinusConstantAlphaFactor:YV,OneMinusConstantColorFactor:$V,OneMinusDstAlphaFactor:VV,OneMinusDstColorFactor:GV,OneMinusSrcAlphaFactor:PE,OneMinusSrcColorFactor:jV,OrthographicCamera:hd,PCFShadowMap:wv,PCFSoftShadowMap:Ex,PMREMGenerator:kN,Path:_A,PerspectiveCamera:ji,Plane:nd,PlaneGeometry:ly,PlaneHelper:cte,PointLight:t9,PointLightHelper:ete,Points:T8,PointsMaterial:F3,PolarGridHelper:ite,PolyhedronGeometry:Sp,PositionalAudio:Tee,PropertyBinding:lr,PropertyMixer:u9,QuadraticBezierCurve:H3,QuadraticBezierCurve3:G3,Quaternion:Ls,QuaternionKeyframeTrack:G_,QuaternionLinearInterpolant:Z8,R11_EAC_Format:WE,RED_GREEN_RGTC2_Format:mA,RED_RGTC1_Format:hA,REVISION:qT,RG11_EAC_Format:XE,RGBADepthPacking:jZ,RGBAFormat:Ds,RGBAIntegerFormat:JT,RGBA_ASTC_10x10_Format:oA,RGBA_ASTC_10x5_Format:iA,RGBA_ASTC_10x6_Format:aA,RGBA_ASTC_10x8_Format:sA,RGBA_ASTC_12x10_Format:lA,RGBA_ASTC_12x12_Format:cA,RGBA_ASTC_4x4_Format:KE,RGBA_ASTC_5x4_Format:ZE,RGBA_ASTC_5x5_Format:QE,RGBA_ASTC_6x5_Format:JE,RGBA_ASTC_6x6_Format:eA,RGBA_ASTC_8x5_Format:tA,RGBA_ASTC_8x6_Format:nA,RGBA_ASTC_8x8_Format:rA,RGBA_BPTC_Format:uA,RGBA_ETC2_EAC_Format:qE,RGBA_PVRTC_2BPPV1_Format:VE,RGBA_PVRTC_4BPPV1_Format:BE,RGBA_S3TC_DXT1_Format:Mx,RGBA_S3TC_DXT3_Format:Cx,RGBA_S3TC_DXT5_Format:Ix,RGBDepthPacking:BZ,RGBFormat:C3,RGBIntegerFormat:kZ,RGB_BPTC_SIGNED_Format:fA,RGB_BPTC_UNSIGNED_Format:dA,RGB_ETC1_Format:HE,RGB_ETC2_Format:GE,RGB_PVRTC_2BPPV1_Format:jE,RGB_PVRTC_4BPPV1_Format:zE,RGB_S3TC_DXT1_Format:Tx,RGDepthPacking:VZ,RGFormat:og,RGIntegerFormat:QT,RawShaderMaterial:W3,Ray:Mg,Raycaster:d9,RectAreaLight:i9,RedFormat:ZT,RedIntegerFormat:U_,ReinhardToneMapping:v3,RenderTarget:P3,RenderTarget3D:jee,RepeatWrapping:Wx,ReplaceStencilOp:$Z,ReverseSubtractEquation:DV,RingGeometry:bM,SIGNED_R11_EAC_Format:$E,SIGNED_RED_GREEN_RGTC2_Format:gA,SIGNED_RED_RGTC1_Format:pA,SIGNED_RG11_EAC_Format:YE,SRGBColorSpace:is,SRGBTransfer:wr,Scene:L3,ShaderChunk:kn,ShaderLib:kc,ShaderMaterial:nc,ShadowMaterial:j8,Shape:Zm,ShapeGeometry:xM,ShapePath:dte,ShapeUtils:jc,ShortType:E3,Skeleton:cM,SkeletonHelper:Jee,SkinnedMesh:S8,Source:Yh,Sphere:Oa,SphereGeometry:V_,Spherical:DN,SphericalHarmonics3:tD,SplineCurve:q3,SpotLight:e9,SpotLightHelper:Qee,Sprite:x8,SpriteMaterial:k3,SrcAlphaFactor:RE,SrcAlphaSaturateFactor:qV,SrcColorFactor:zV,StaticCopyUsage:fQ,StaticDrawUsage:Zx,StaticReadUsage:lQ,StereoCamera:See,StreamCopyUsage:hQ,StreamDrawUsage:oQ,StreamReadUsage:uQ,StringKeyframeTrack:Rg,SubtractEquation:OV,SubtractiveBlending:wN,TOUCH:Cm,TangentSpaceNormalMap:xp,TetrahedronGeometry:_M,Texture:Ci,TextureLoader:pee,TextureUtils:yte,Timer:qee,TimestampQuery:mQ,TorusGeometry:SM,TorusKnotGeometry:wM,Triangle:zo,TriangleFanDrawMode:zZ,TriangleStripDrawMode:FZ,TrianglesDrawMode:UZ,TubeGeometry:EM,UVMapping:$T,Uint16BufferAttribute:N3,Uint32BufferAttribute:O3,Uint8BufferAttribute:tJ,Uint8ClampedBufferAttribute:nJ,Uniform:sD,UniformsGroup:Vee,UniformsLib:Ut,UniformsUtils:v8,UnsignedByteType:no,UnsignedInt101111Type:T3,UnsignedInt248Type:Dv,UnsignedInt5999Type:A3,UnsignedIntType:tc,UnsignedShort4444Type:YT,UnsignedShort5551Type:KT,UnsignedShortType:Ov,VSMShadowMap:Um,Vector2:lt,Vector3:ue,Vector4:zr,VectorKeyframeTrack:i_,VideoFrameTexture:AJ,VideoTexture:M8,WebGL3DRenderTarget:VQ,WebGLArrayRenderTarget:BQ,WebGLCoordinateSystem:cl,WebGLCubeRenderTarget:D3,WebGLRenderTarget:pl,WebGLRenderer:x9,WebGLUtils:b9,WebGPUCoordinateSystem:Lv,WebXRController:lE,WireframeGeometry:z8,WrapAroundEnding:Yx,ZeroCurvatureEnding:Fm,ZeroFactor:UV,ZeroSlopeEnding:zm,ZeroStencilOp:WZ,createCanvasElement:d8,error:tn,getConsoleFunction:xQ,log:Jx,setConsoleFunction:bQ,warn:kt,warnOnce:kv},Symbol.toStringTag,{value:"Module"}));var pR={exports:{}},mR={},gR={exports:{}},vR={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T2;function hse(){if(T2)return vR;T2=1;var n=iy();function e(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,a=n.useLayoutEffect,s=n.useDebugValue;function o(p,v){var y=v(),x=r({inst:{value:y,getSnapshot:v}}),E=x[0].inst,S=x[1];return a(function(){E.value=y,E.getSnapshot=v,c(E)&&S({inst:E})},[p,y,v]),i(function(){return c(E)&&S({inst:E}),p(function(){c(E)&&S({inst:E})})},[p]),s(y),y}function c(p){var v=p.getSnapshot;p=p.value;try{var y=v();return!t(p,y)}catch{return!0}}function f(p,v){return v()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:o;return vR.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:d,vR}var M2;function pse(){return M2||(M2=1,gR.exports=hse()),gR.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C2;function mse(){if(C2)return mR;C2=1;var n=iy(),e=pse();function t(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,a=n.useRef,s=n.useEffect,o=n.useMemo,c=n.useDebugValue;return mR.useSyncExternalStoreWithSelector=function(f,d,p,v,y){var x=a(null);if(x.current===null){var E={hasValue:!1,value:null};x.current=E}else E=x.current;x=o(function(){function w(k){if(!R){if(R=!0,N=k,k=v(k),y!==void 0&&E.hasValue){var U=E.value;if(y(U,k))return O=U}return O=k}if(U=O,r(N,k))return U;var P=v(k);return y!==void 0&&y(U,P)?(N=k,U):(N=k,O=P)}var R=!1,N,O,z=p===void 0?null:p;return[function(){return w(d())},z===null?void 0:function(){return w(z())}]},[d,p,v,y]);var S=i(f,x[0],x[1]);return s(function(){E.hasValue=!0,E.value=S},[S]),c(S),S},mR}var I2;function gse(){return I2||(I2=1,pR.exports=mse()),pR.exports}var _9=gse();const vse=Kc(_9),R2=n=>{let e;const t=new Set,r=(f,d)=>{const p=typeof f=="function"?f(e):f;if(!Object.is(p,e)){const v=e;e=d??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(y=>y(e,v))}},i=()=>e,o={setState:r,getState:i,getInitialState:()=>c,subscribe:f=>(t.add(f),()=>t.delete(f))},c=e=n(r,i,o);return o},yse=(n=>n?R2(n):R2),{useSyncExternalStoreWithSelector:bse}=vse,xse=n=>n;function _se(n,e=xse,t){const r=bse(n.subscribe,n.getState,n.getInitialState,e,t);return Eg.useDebugValue(r),r}const P2=(n,e)=>{const t=yse(n),r=(i,a=e)=>_se(t,i,a);return Object.assign(r,t),r},Sse=((n,e)=>n?P2(n,e):P2),wse=n=>typeof n=="object"&&typeof n.then=="function",Bm=[];function S9(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function w9(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const a of Bm)if(S9(e,a.keys,a.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return r.lifespan&&r.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,r.lifespan)),a.response;if(!t)throw a.promise}const i={keys:e,equal:r.equal,remove:()=>{const a=Bm.indexOf(i);a!==-1&&Bm.splice(a,1)},promise:(wse(n)?n:n(...e)).then(a=>{i.response=a,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(a=>i.error=a)};if(Bm.push(i),!t)throw i.promise}const Ese=(n,e,t)=>w9(n,e,!1,t),Ase=(n,e,t)=>void w9(n,e,!0,t),Tse=n=>{if(n===void 0||n.length===0)Bm.splice(0,Bm.length);else{const e=Bm.find(t=>S9(n,t.keys,t.equal));e&&e.remove()}};var zN=pV();const Mse=Kc(zN);function lD(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=e?n.return:n.child;for(;r;){const i=lD(r,e,t);if(i)return i;r=e?null:r.sibling}}function E9(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const cD=E9(G.createContext(null));class A9 extends G.Component{render(){return G.createElement(cD.Provider,{value:this._reactInternals},this.props.children)}}function T9(){const n=G.useContext(cD);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=G.useId();return G.useMemo(()=>{for(const t of[n,n==null?void 0:n.alternate]){if(!t)continue;const r=lD(t,!1,i=>{let a=i.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(r)return r}},[n,e])}const Cse=Symbol.for("react.context"),Ise=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===Cse;function Rse(){const n=T9(),[e]=G.useState(()=>new Map);e.clear();let t=n;for(;t;){const r=t.type;Ise(r)&&r!==cD&&!e.has(r)&&e.set(r,G.use(E9(r))),t=t.return}return e}function Pse(){const n=Rse();return G.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>G.createElement(e,null,G.createElement(t.Provider,{...r,value:n.get(t)})),e=>G.createElement(A9,{...e})),[n])}function M9(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const C9=n=>n&&n.isOrthographicCamera,Nse=n=>n&&n.hasOwnProperty("current"),Ose=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),q_=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?G.useLayoutEffect:G.useEffect;function I9(n){const e=G.useRef(n);return q_(()=>void(e.current=n),[n]),e}function Dse(){const n=T9(),e=Pse();return G.useMemo(()=>({children:t})=>{const i=!!lD(n,!0,a=>a.type===G.StrictMode)?G.StrictMode:G.Fragment;return A.jsx(i,{children:A.jsx(e,{children:t})})},[n,e])}function Lse({set:n}){return q_(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const kse=(n=>(n=class extends G.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function R9(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function J0(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const li={obj:n=>n===Object(n)&&!li.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(li.str(n)||li.num(n)||li.boo(n))return n===e;const a=li.obj(n);if(a&&r==="reference")return n===e;const s=li.arr(n);if(s&&t==="reference")return n===e;if((s||a)&&n===e)return!0;let o;for(o in n)if(!(o in e))return!1;if(a&&t==="shallow"&&r==="shallow"){for(o in i?e:n)if(!li.equ(n[o],e[o],{strict:i,objects:"reference"}))return!1}else for(o in i?e:n)if(n[o]!==e[o])return!1;if(li.und(o)){if(s&&n.length===0&&e.length===0||a&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Use(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function Fse(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const P9=["children","key","ref"];function zse(n){const e={};for(const t in n)P9.includes(t)||(e[t]=n[t]);return e}function SA(n,e,t,r){const i=n;let a=i==null?void 0:i.__r3f;return a||(a={root:e,type:t,parent:null,children:[],props:zse(r),object:i,eventCount:0,handlers:{},isHidden:!1},i&&(i.__r3f=a)),a}function o_(n,e){if(!e.includes("-"))return{root:n,key:e,target:n[e]};if(e in n)return{root:n,key:e,target:n[e]};let t=n;const r=e.split("-");for(const i of r){if(typeof t!="object"||t===null){if(t!==void 0){const a=r.slice(r.indexOf(i)).join("-");return{root:t,key:a,target:void 0}}return{root:n,key:e,target:void 0}}e=i,n=t,t=t[e]}return{root:n,key:e,target:t}}const N2=/-\d+$/;function wA(n,e){if(li.str(e.props.attach)){if(N2.test(e.props.attach)){const i=e.props.attach.replace(N2,""),{root:a,key:s}=o_(n.object,i);Array.isArray(a[s])||(a[s]=[])}const{root:t,key:r}=o_(n.object,e.props.attach);e.previousAttach=t[r],t[r]=e.object}else li.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function EA(n,e){if(li.str(e.props.attach)){const{root:t,key:r}=o_(n.object,e.props.attach),i=e.previousAttach;i===void 0?delete t[r]:t[r]=i}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const jN=[...P9,"args","dispose","attach","object","onUpdate","dispose"],O2=new Map;function jse(n){let e=O2.get(n.constructor);try{e||(e=new n.constructor,O2.set(n.constructor,e))}catch{}return e}function Bse(n,e){const t={};for(const r in e)if(!jN.includes(r)&&!li.equ(e[r],n.props[r])){t[r]=e[r];for(const i in e)i.startsWith(`${r}-`)&&(t[i]=e[i])}for(const r in n.props){if(jN.includes(r)||e.hasOwnProperty(r))continue;const{root:i,key:a}=o_(n.object,r);if(i.constructor&&i.constructor.length===0){const s=jse(i);li.und(s)||(t[a]=s[a])}else t[a]=0}return t}const Vse=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Hse=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Bh(n,e){var t;const r=n.__r3f,i=r&&M9(r).getState(),a=r==null?void 0:r.eventCount;for(const o in e){let c=e[o];if(jN.includes(o))continue;if(r&&Hse.test(o)){typeof c=="function"?r.handlers[o]=c:delete r.handlers[o],r.eventCount=Object.keys(r.handlers).length;continue}if(c===void 0)continue;let{root:f,key:d,target:p}=o_(n,o);if(p===void 0&&(typeof f!="object"||f===null))throw Error(`R3F: Cannot set "${o}". Ensure it is an object before setting "${d}".`);if(p instanceof Fv&&c instanceof Fv)p.mask=c.mask;else if(p instanceof Bt&&Ose(c))p.set(c);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&typeof p.copy=="function"&&c!=null&&c.constructor&&p.constructor===c.constructor)p.copy(c);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&Array.isArray(c))typeof p.fromArray=="function"?p.fromArray(c):p.set(...c);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&typeof c=="number")typeof p.setScalar=="function"?p.setScalar(c):p.set(c);else{var s;f[d]=c,i&&!i.linear&&Vse.includes(d)&&(s=f[d])!=null&&s.isTexture&&f[d].format===Ds&&f[d].type===no&&(f[d].colorSpace=is)}}if(r!=null&&r.parent&&i!=null&&i.internal&&(t=r.object)!=null&&t.isObject3D&&a!==r.eventCount){const o=r.object,c=i.internal.interaction.indexOf(o);c>-1&&i.internal.interaction.splice(c,1),r.eventCount&&o.raycast!==null&&i.internal.interaction.push(o)}return r&&r.props.attach===void 0&&(r.object.isBufferGeometry?r.props.attach="geometry":r.object.isMaterial&&(r.props.attach="material")),r&&uy(r),n}function uy(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function Gse(n,e){n.manual||(C9(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const to=n=>n==null?void 0:n.isObject3D;function Rw(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function N9(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function qse(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{N9(t.capturedMap,e,r,i)})}function Wse(n){function e(c){const{internal:f}=n.getState(),d=c.offsetX-f.initialClick[0],p=c.offsetY-f.initialClick[1];return Math.round(Math.sqrt(d*d+p*p))}function t(c){return c.filter(f=>["Move","Over","Enter","Out","Leave"].some(d=>{var p;return(p=f.__r3f)==null?void 0:p.handlers["onPointer"+d]}))}function r(c,f){const d=n.getState(),p=new Set,v=[],y=f?f(d.internal.interaction):d.internal.interaction;for(let w=0;w<y.length;w++){const R=J0(y[w]);R&&(R.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(c,d);function x(w){const R=J0(w);if(!R||!R.events.enabled||R.raycaster.camera===null)return[];if(R.raycaster.camera===void 0){var N;R.events.compute==null||R.events.compute(c,R,(N=R.previousRoot)==null?void 0:N.getState()),R.raycaster.camera===void 0&&(R.raycaster.camera=null)}return R.raycaster.camera?R.raycaster.intersectObject(w,!0):[]}let E=y.flatMap(x).sort((w,R)=>{const N=J0(w.object),O=J0(R.object);return!N||!O?w.distance-R.distance:O.events.priority-N.events.priority||w.distance-R.distance}).filter(w=>{const R=Rw(w);return p.has(R)?!1:(p.add(R),!0)});d.events.filter&&(E=d.events.filter(E,d));for(const w of E){let R=w.object;for(;R;){var S;(S=R.__r3f)!=null&&S.eventCount&&v.push({...w,eventObject:R}),R=R.parent}}if("pointerId"in c&&d.internal.capturedMap.has(c.pointerId))for(let w of d.internal.capturedMap.get(c.pointerId).values())p.has(Rw(w.intersection))||v.push(w.intersection);return v}function i(c,f,d,p){if(c.length){const v={stopped:!1};for(const y of c){let x=J0(y.object);if(x||y.object.traverseAncestors(E=>{const S=J0(E);if(S)return x=S,!1}),x){const{raycaster:E,pointer:S,camera:w,internal:R}=x,N=new ue(S.x,S.y,0).unproject(w),O=C=>{var L,j;return(L=(j=R.capturedMap.get(C))==null?void 0:j.has(y.eventObject))!=null?L:!1},z=C=>{const L={intersection:y,target:f.target};R.capturedMap.has(C)?R.capturedMap.get(C).set(y.eventObject,L):R.capturedMap.set(C,new Map([[y.eventObject,L]])),f.target.setPointerCapture(C)},k=C=>{const L=R.capturedMap.get(C);L&&N9(R.capturedMap,y.eventObject,L,C)};let U={};for(let C in f){let L=f[C];typeof L!="function"&&(U[C]=L)}let P={...y,...U,pointer:S,intersections:c,stopped:v.stopped,delta:d,unprojectedPoint:N,ray:E.ray,camera:w,stopPropagation(){const C="pointerId"in f&&R.capturedMap.get(f.pointerId);if((!C||C.has(y.eventObject))&&(P.stopped=v.stopped=!0,R.hovered.size&&Array.from(R.hovered.values()).find(L=>L.eventObject===y.eventObject))){const L=c.slice(0,c.indexOf(y));a([...L,y])}},target:{hasPointerCapture:O,setPointerCapture:z,releasePointerCapture:k},currentTarget:{hasPointerCapture:O,setPointerCapture:z,releasePointerCapture:k},nativeEvent:f};if(p(P),v.stopped===!0)break}}}return c}function a(c){const{internal:f}=n.getState();for(const d of f.hovered.values())if(!c.length||!c.find(p=>p.object===d.object&&p.index===d.index&&p.instanceId===d.instanceId)){const v=d.eventObject.__r3f;if(f.hovered.delete(Rw(d)),v!=null&&v.eventCount){const y=v.handlers,x={...d,intersections:c};y.onPointerOut==null||y.onPointerOut(x),y.onPointerLeave==null||y.onPointerLeave(x)}}}function s(c,f){for(let d=0;d<f.length;d++){const p=f[d].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(c)}}function o(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return f=>{const{internal:d}=n.getState();"pointerId"in f&&d.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(f.pointerId)&&(d.capturedMap.delete(f.pointerId),a([]))})}}return function(d){const{onPointerMissed:p,internal:v}=n.getState();v.lastEvent.current=d;const y=c==="onPointerMove",x=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",S=r(d,y?t:void 0),w=x?e(d):0;c==="onPointerDown"&&(v.initialClick=[d.offsetX,d.offsetY],v.initialHits=S.map(N=>N.eventObject)),x&&!S.length&&w<=2&&(s(d,v.interaction),p&&p(d)),y&&a(S);function R(N){const O=N.eventObject,z=O.__r3f;if(!(z!=null&&z.eventCount))return;const k=z.handlers;if(y){if(k.onPointerOver||k.onPointerEnter||k.onPointerOut||k.onPointerLeave){const U=Rw(N),P=v.hovered.get(U);P?P.stopped&&N.stopPropagation():(v.hovered.set(U,N),k.onPointerOver==null||k.onPointerOver(N),k.onPointerEnter==null||k.onPointerEnter(N))}k.onPointerMove==null||k.onPointerMove(N)}else{const U=k[c];U?(!x||v.initialHits.includes(O))&&(s(d,v.interaction.filter(P=>!v.initialHits.includes(P))),U(N)):x&&v.initialHits.includes(O)&&s(d,v.interaction.filter(P=>!v.initialHits.includes(P)))}}i(S,d,w,R)}}return{handlePointer:o}}const D2=n=>!!(n!=null&&n.render),O9=G.createContext(null),$se=(n,e)=>{const t=Sse((o,c)=>{const f=new ue,d=new ue,p=new ue;function v(w=c().camera,R=d,N=c().size){const{width:O,height:z,top:k,left:U}=N,P=O/z;R.isVector3?p.copy(R):p.set(...R);const C=w.getWorldPosition(f).distanceTo(p);if(C9(w))return{width:O/w.zoom,height:z/w.zoom,top:k,left:U,factor:1,distance:C,aspect:P};{const L=w.fov*Math.PI/180,j=2*Math.tan(L/2)*C,B=j*(O/z);return{width:B,height:j,top:k,left:U,factor:O/B,distance:C,aspect:P}}}let y;const x=w=>o(R=>({performance:{...R.performance,current:w}})),E=new lt;return{set:o,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(w=1)=>n(c(),w),advance:(w,R)=>e(w,R,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new rD,pointer:E,mouse:E,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const w=c();y&&clearTimeout(y),w.performance.current!==w.performance.min&&x(w.performance.min),y=setTimeout(()=>x(c().performance.max),w.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:w=>o(R=>({...R,events:{...R.events,...w}})),setSize:(w,R,N=0,O=0)=>{const z=c().camera,k={width:w,height:R,top:N,left:O};o(U=>({size:k,viewport:{...U.viewport,...v(z,d,k)}}))},setDpr:w=>o(R=>{const N=R9(w);return{viewport:{...R.viewport,dpr:N,initialDpr:R.viewport.initialDpr||N}}}),setFrameloop:(w="always")=>{const R=c().clock;R.stop(),R.elapsedTime=0,w!=="never"&&(R.start(),R.elapsedTime=0),o(()=>({frameloop:w}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:G.createRef(),active:!1,frames:0,priority:0,subscribe:(w,R,N)=>{const O=c().internal;return O.priority=O.priority+(R>0?1:0),O.subscribers.push({ref:w,priority:R,store:N}),O.subscribers=O.subscribers.sort((z,k)=>z.priority-k.priority),()=>{const z=c().internal;z!=null&&z.subscribers&&(z.priority=z.priority-(R>0?1:0),z.subscribers=z.subscribers.filter(k=>k.ref!==w))}}}}}),r=t.getState();let i=r.size,a=r.viewport.dpr,s=r.camera;return t.subscribe(()=>{const{camera:o,size:c,viewport:f,gl:d,set:p}=t.getState();if(c.width!==i.width||c.height!==i.height||f.dpr!==a){i=c,a=f.dpr,Gse(o,c),f.dpr>0&&d.setPixelRatio(f.dpr);const v=typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(c.width,c.height,v)}o!==s&&(s=o,p(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>n(o)),t};function D9(){const n=G.useContext(O9);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Oh(n=t=>t,e){return D9()(n,e)}function uD(n,e=0){const t=D9(),r=t.getState().internal.subscribe,i=I9(n);return q_(()=>r(i,e,t),[e,r,t]),null}const L2=new WeakMap,Xse=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function L9(n,e){return function(t,...r){let i;return Xse(t)?(i=L2.get(t),i||(i=new t,L2.set(t,i))):i=t,n&&n(i),Promise.all(r.map(a=>new Promise((s,o)=>i.load(a,c=>{to(c==null?void 0:c.scene)&&Object.assign(c,Use(c.scene)),s(c)},e,c=>o(new Error(`Could not load ${a}: ${c==null?void 0:c.message}`))))))}}function fD(n,e,t,r){const i=Array.isArray(e)?e:[e],a=Ese(L9(t,r),[n,...i],{equal:li.equ});return Array.isArray(e)?a:a[0]}fD.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return Ase(L9(t),[n,...r])};fD.clear=function(n,e){const t=Array.isArray(e)?e:[e];return Tse([n,...t])};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */const Yse=1,Kse=8,Zse=32,Qse=2;var Jse={version:"9.5.0"};function eoe(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var k2={exports:{}},U2={exports:{}},F2;function toe(){return F2||(F2=1,(function(n){n.exports=function(e){function t(h,m,_,M){return new jy(h,m,_,M)}function r(){}function i(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(h){var m=h,_=h;if(h.alternate)for(;m.return;)m=m.return;else{h=m;do m=h,(m.flags&4098)!==0&&(_=m.return),h=m.return;while(h)}return m.tag===3?_:null}function s(h){if(a(h)!==h)throw Error(i(188))}function o(h){var m=h.alternate;if(!m){if(m=a(h),m===null)throw Error(i(188));return m!==h?null:h}for(var _=h,M=m;;){var F=_.return;if(F===null)break;var H=F.alternate;if(H===null){if(M=F.return,M!==null){_=M;continue}break}if(F.child===H.child){for(H=F.child;H;){if(H===_)return s(F),h;if(H===M)return s(F),m;H=H.sibling}throw Error(i(188))}if(_.return!==M.return)_=F,M=H;else{for(var ee=!1,_e=F.child;_e;){if(_e===_){ee=!0,_=F,M=H;break}if(_e===M){ee=!0,M=F,_=H;break}_e=_e.sibling}if(!ee){for(_e=H.child;_e;){if(_e===_){ee=!0,_=H,M=F;break}if(_e===M){ee=!0,M=H,_=F;break}_e=_e.sibling}if(!ee)throw Error(i(189))}}if(_.alternate!==M)throw Error(i(190))}if(_.tag!==3)throw Error(i(188));return _.stateNode.current===_?h:m}function c(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h;for(h=h.child;h!==null;){if(m=c(h),m!==null)return m;h=h.sibling}return null}function f(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h;for(h=h.child;h!==null;){if(h.tag!==4&&(m=f(h),m!==null))return m;h=h.sibling}return null}function d(h){return h===null||typeof h!="object"?null:(h=_c&&h[_c]||h["@@iterator"],typeof h=="function"?h:null)}function p(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===gu?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case Pf:return"Fragment";case Of:return"Profiler";case Nf:return"StrictMode";case e0:return"Suspense";case xc:return"SuspenseList";case Wp:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case Rf:return"Portal";case wo:return h.displayName||"Context";case qp:return(h._context.displayName||"Context")+".Consumer";case rh:var m=h.render;return h=h.displayName,h||(h=m.displayName||m.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case t0:return m=h.displayName||null,m!==null?m:p(h.type)||"Memo";case qa:m=h._payload,h=h._init;try{return p(h(m))}catch{}}return null}function v(h){return{current:h}}function y(h){0>Ff||(h.current=p0[Ff],p0[Ff]=null,Ff--)}function x(h,m){Ff++,p0[Ff]=h.current,h.current=m}function E(h){return h>>>=0,h===0?32:31-(m0(h)/bS|0)|0}function S(h){var m=h&42;if(m!==0)return m;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return h&261888;case 262144:case 524288:case 1048576:case 2097152:return h&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function w(h,m,_){var M=h.pendingLanes;if(M===0)return 0;var F=0,H=h.suspendedLanes,ee=h.pingedLanes;h=h.warmLanes;var _e=M&134217727;return _e!==0?(M=_e&~H,M!==0?F=S(M):(ee&=_e,ee!==0?F=S(ee):_||(_=_e&~h,_!==0&&(F=S(_))))):(_e=M&~H,_e!==0?F=S(_e):ee!==0?F=S(ee):_||(_=M&~h,_!==0&&(F=S(_)))),F===0?0:m!==0&&m!==F&&(m&H)===0&&(H=F&-F,_=m&-m,H>=_||H===32&&(_&4194048)!==0)?m:F}function R(h,m){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&m)===0}function N(h,m){switch(h){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function O(){var h=uh;return uh<<=1,(uh&62914560)===0&&(uh=4194304),h}function z(h){for(var m=[],_=0;31>_;_++)m.push(h);return m}function k(h,m){h.pendingLanes|=m,m!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function U(h,m,_,M,F,H){var ee=h.pendingLanes;h.pendingLanes=_,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=_,h.entangledLanes&=_,h.errorRecoveryDisabledLanes&=_,h.shellSuspendCounter=0;var _e=h.entanglements,Ye=h.expirationTimes,xt=h.hiddenUpdates;for(_=ee&~_;0<_;){var Rt=31-xs(_),Et=1<<Rt;_e[Rt]=0,Ye[Rt]=-1;var zt=xt[Rt];if(zt!==null)for(xt[Rt]=null,Rt=0;Rt<zt.length;Rt++){var Sn=zt[Rt];Sn!==null&&(Sn.lane&=-536870913)}_&=~Et}M!==0&&P(h,M,0),H!==0&&F===0&&h.tag!==0&&(h.suspendedLanes|=H&~(ee&~m))}function P(h,m,_){h.pendingLanes|=m,h.suspendedLanes&=~m;var M=31-xs(m);h.entangledLanes|=m,h.entanglements[M]=h.entanglements[M]|1073741824|_&261930}function C(h,m){var _=h.entangledLanes|=m;for(h=h.entanglements;_;){var M=31-xs(_),F=1<<M;F&m|h[M]&m&&(h[M]|=m),_&=~F}}function L(h,m){var _=m&-m;return _=(_&42)!==0?1:j(_),(_&(h.suspendedLanes|m))!==0?0:_}function j(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function B(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function V(h){if(typeof Ab=="function"&&SS(h),_s&&typeof _s.setStrictMode=="function")try{_s.setStrictMode(jf,h)}catch{}}function Q(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}function J(h){if(_0===void 0)try{throw Error()}catch(_){var m=_.stack.trim().match(/\n( *(at )?)/);_0=m&&m[1]||"",Ul=-1<_.stack.indexOf(`
    at`)?" (<anonymous>)":-1<_.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_0+h+Ul}function W(h,m){if(!h||tm)return"";tm=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var M={DetermineComponentFrameRoot:function(){try{if(m){var Et=function(){throw Error()};if(Object.defineProperty(Et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Et,[])}catch(Sn){var zt=Sn}Reflect.construct(h,[],Et)}else{try{Et.call()}catch(Sn){zt=Sn}h.call(Et.prototype)}}else{try{throw Error()}catch(Sn){zt=Sn}(Et=h())&&typeof Et.catch=="function"&&Et.catch(function(){})}}catch(Sn){if(Sn&&zt&&typeof Sn.stack=="string")return[Sn.stack,zt.stack]}return[null,null]}};M.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var F=Object.getOwnPropertyDescriptor(M.DetermineComponentFrameRoot,"name");F&&F.configurable&&Object.defineProperty(M.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var H=M.DetermineComponentFrameRoot(),ee=H[0],_e=H[1];if(ee&&_e){var Ye=ee.split(`
`),xt=_e.split(`
`);for(F=M=0;M<Ye.length&&!Ye[M].includes("DetermineComponentFrameRoot");)M++;for(;F<xt.length&&!xt[F].includes("DetermineComponentFrameRoot");)F++;if(M===Ye.length||F===xt.length)for(M=Ye.length-1,F=xt.length-1;1<=M&&0<=F&&Ye[M]!==xt[F];)F--;for(;1<=M&&0<=F;M--,F--)if(Ye[M]!==xt[F]){if(M!==1||F!==1)do if(M--,F--,0>F||Ye[M]!==xt[F]){var Rt=`
`+Ye[M].replace(" at new "," at ");return h.displayName&&Rt.includes("<anonymous>")&&(Rt=Rt.replace("<anonymous>",h.displayName)),Rt}while(1<=M&&0<=F);break}}}finally{tm=!1,Error.prepareStackTrace=_}return(_=h?h.displayName||h.name:"")?J(_):""}function $(h,m){switch(h.tag){case 26:case 27:case 5:return J(h.type);case 16:return J("Lazy");case 13:return h.child!==m&&m!==null?J("Suspense Fallback"):J("Suspense");case 19:return J("SuspenseList");case 0:case 15:return W(h.type,!1);case 11:return W(h.type.render,!1);case 1:return W(h.type,!0);case 31:return J("Activity");default:return""}}function se(h){try{var m="",_=null;do m+=$(h,_),_=h,h=h.return;while(h);return m}catch(M){return`
Error generating stack: `+M.message+`
`+M.stack}}function ce(h,m){if(typeof h=="object"&&h!==null){var _=Tb.get(h);return _!==void 0?_:(m={value:h,source:m,stack:se(m)},Tb.set(h,m),m)}return{value:h,source:m,stack:se(m)}}function fe(h,m){Ec[Fl++]=nm,Ec[Fl++]=Sr,Sr=h,nm=m}function Z(h,m,_){To[$s++]=da,To[$s++]=tl,To[$s++]=Mo,Mo=h;var M=da;h=tl;var F=32-xs(M)-1;M&=~(1<<F),_+=1;var H=32-xs(m)+F;if(30<H){var ee=F-F%5;H=(M&(1<<ee)-1).toString(32),M>>=ee,F-=ee,da=1<<32-xs(m)+F|_<<F|M,tl=H+h}else da=1<<H|_<<F|M,tl=h}function re(h){h.return!==null&&(fe(h,1),Z(h,1,0))}function de(h){for(;h===Sr;)Sr=Ec[--Fl],Ec[Fl]=null,nm=Ec[--Fl],Ec[Fl]=null;for(;h===Mo;)Mo=To[--$s],To[$s]=null,tl=To[--$s],To[$s]=null,da=To[--$s],To[$s]=null}function ve(h,m){To[$s++]=da,To[$s++]=tl,To[$s++]=Mo,da=m.id,tl=m.overflow,Mo=h}function pe(h,m){x(ha,m),x(Ac,h),x(Zi,null),h=L1(m),y(Zi),x(Zi,h)}function ye(){y(Zi),y(Ac),y(ha)}function Ee(h){h.memoizedState!==null&&x(rm,h);var m=Zi.current,_=sh(m,h.type);m!==_&&(x(Ac,h),x(Zi,_))}function Xe(h){Ac.current===h&&(y(Zi),y(Ac)),rm.current===h&&(y(rm),di?kf._currentValue=Lf:kf._currentValue2=Lf)}function me(h){var m=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Me(ce(m,h)),S0}function qe(h,m){if(!Vr)throw Error(i(175));oS(h.stateNode,h.type,h.memoizedProps,m,h)||me(h,!0)}function mt(h){for(Li=h.return;Li;)switch(Li.tag){case 5:case 31:case 13:$a=!1;return;case 27:case 3:$a=!0;return;default:Li=Li.return}}function Ue(h){if(!Vr||h!==Li)return!1;if(!jn)return mt(h),jn=!0,!1;var m=h.tag;if(Di?m!==3&&m!==27&&(m!==5||ch(h.type)&&!Wa(h.type,h.memoizedProps))&&Hr&&me(h):m!==3&&(m!==5||ch(h.type)&&!Wa(h.type,h.memoizedProps))&&Hr&&me(h),mt(h),m===13){if(!Vr)throw Error(i(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));Hr=pb(h)}else if(m===31){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));Hr=cS(h)}else Hr=Di&&m===27?J1(h.type,Hr):Li?Q1(h.stateNode):null;return!0}function De(){Vr&&(Hr=Li=null,jn=!1)}function Re(){var h=zl;return h!==null&&(Es===null?Es=h:Es.push.apply(Es,h),zl=null),h}function Me(h){zl===null?zl=[h]:zl.push(h)}function Fe(h,m,_){di?(x(Co,m._currentValue),m._currentValue=_):(x(Co,m._currentValue2),m._currentValue2=_)}function Ze(h){var m=Co.current;di?h._currentValue=m:h._currentValue2=m,y(Co)}function oe(h,m,_){for(;h!==null;){var M=h.alternate;if((h.childLanes&m)!==m?(h.childLanes|=m,M!==null&&(M.childLanes|=m)):M!==null&&(M.childLanes&m)!==m&&(M.childLanes|=m),h===_)break;h=h.return}}function yt(h,m,_,M){var F=h.child;for(F!==null&&(F.return=h);F!==null;){var H=F.dependencies;if(H!==null){var ee=F.child;H=H.firstContext;e:for(;H!==null;){var _e=H;H=F;for(var Ye=0;Ye<m.length;Ye++)if(_e.context===m[Ye]){H.lanes|=_,_e=H.alternate,_e!==null&&(_e.lanes|=_),oe(H.return,_,h),M||(ee=null);break e}H=_e.next}}else if(F.tag===18){if(ee=F.return,ee===null)throw Error(i(341));ee.lanes|=_,H=ee.alternate,H!==null&&(H.lanes|=_),oe(ee,_,h),ee=null}else ee=F.child;if(ee!==null)ee.return=F;else for(ee=F;ee!==null;){if(ee===h){ee=null;break}if(F=ee.sibling,F!==null){F.return=ee.return,ee=F;break}ee=ee.return}F=ee}}function at(h,m,_,M){h=null;for(var F=m,H=!1;F!==null;){if(!H){if((F.flags&524288)!==0)H=!0;else if((F.flags&262144)!==0)break}if(F.tag===10){var ee=F.alternate;if(ee===null)throw Error(i(387));if(ee=ee.memoizedProps,ee!==null){var _e=F.type;pi(F.pendingProps.value,ee.value)||(h!==null?h.push(_e):h=[_e])}}else if(F===rm.current){if(ee=F.alternate,ee===null)throw Error(i(387));ee.memoizedState.memoizedState!==F.memoizedState.memoizedState&&(h!==null?h.push(kf):h=[kf])}F=F.return}h!==null&&yt(m,h,_,M),m.flags|=262144}function Tt(h){for(h=h.firstContext;h!==null;){var m=h.context;if(!pi(di?m._currentValue:m._currentValue2,h.memoizedValue))return!0;h=h.next}return!1}function ct(h){Or=h,nl=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function ae(h){return xe(Or,h)}function Y(h,m){return Or===null&&ct(h),xe(h,m)}function xe(h,m){var _=di?m._currentValue:m._currentValue2;if(m={context:m,memoizedValue:_,next:null},nl===null){if(h===null)throw Error(i(308));nl=m,h.dependencies={lanes:0,firstContext:m},h.flags|=524288}else nl=nl.next=m;return _}function ke(){return{controller:new wS,data:new Map,refCount:0}}function et(h){h.refCount--,h.refCount===0&&Qi(XC,function(){h.controller.abort()})}function Ne(){}function It(h){h!==mr&&h.next===null&&(mr===null?im=mr=h:mr=mr.next=h),Io=!0,Ta||(Ta=!0,he())}function rt(h,m){if(!w0&&Io){w0=!0;do for(var _=!1,M=im;M!==null;){if(h!==0){var F=M.pendingLanes;if(F===0)var H=0;else{var ee=M.suspendedLanes,_e=M.pingedLanes;H=(1<<31-xs(42|h)+1)-1,H&=F&~(ee&~_e),H=H&201326741?H&201326741|1:H?H|2:0}H!==0&&(_=!0,Mt(M,H))}else H=Bn,H=w(M,M===On?H:0,M.cancelPendingCommit!==null||M.timeoutHandle!==bs),(H&3)===0||R(M,H)||(_=!0,Mt(M,H));M=M.next}while(_);w0=!1}}function Pt(){Ot()}function Ot(){Io=Ta=!1;var h=0;_u!==0&&Df()&&(h=_u);for(var m=Aa(),_=null,M=im;M!==null;){var F=M.next,H=it(M,m);H===0?(M.next=null,_===null?im=F:_.next=F,F===null&&(mr=_)):(_=M,(h!==0||(H&3)!==0)&&(Io=!0)),M=F}Ei!==0&&Ei!==5||rt(h),_u!==0&&(_u=0)}function it(h,m){for(var _=h.suspendedLanes,M=h.pingedLanes,F=h.expirationTimes,H=h.pendingLanes&-62914561;0<H;){var ee=31-xs(H),_e=1<<ee,Ye=F[ee];Ye===-1?((_e&_)===0||(_e&M)!==0)&&(F[ee]=N(_e,m)):Ye<=m&&(h.expiredLanes|=_e),H&=~_e}if(m=On,_=Bn,_=w(h,h===m?_:0,h.cancelPendingCommit!==null||h.timeoutHandle!==bs),M=h.callbackNode,_===0||h===m&&(vr===2||vr===9)||h.cancelPendingCommit!==null)return M!==null&&M!==null&&v0(M),h.callbackNode=null,h.callbackPriority=0;if((_&3)===0||R(h,_)){if(m=_&-_,m===h.callbackPriority)return m;switch(M!==null&&v0(M),B(_)){case 2:case 8:_=_S;break;case 32:_=em;break;case 268435456:_=b0;break;default:_=em}return M=tt.bind(null,h),_=Jp(_,M),h.callbackPriority=m,h.callbackNode=_,m}return M!==null&&M!==null&&v0(M),h.callbackPriority=2,h.callbackNode=null,2}function tt(h,m){if(Ei!==0&&Ei!==5)return h.callbackNode=null,h.callbackPriority=0,null;var _=h.callbackNode;if(Dl()&&h.callbackNode!==_)return null;var M=Bn;return M=w(h,h===On?M:0,h.cancelPendingCommit!==null||h.timeoutHandle!==bs),M===0?null:(el(h,M,m),it(h,Aa()),h.callbackNode!=null&&h.callbackNode===_?tt.bind(null,h):null)}function Mt(h,m){if(Dl())return null;el(h,m,!0)}function he(){Qy?Jy(function(){(Un&6)!==0?Jp(y0,Pt):Ot()}):Jp(y0,Pt)}function Le(){if(_u===0){var h=Tc;h===0&&(h=g0,g0<<=1,(g0&261888)===0&&(g0=256)),_u=h}return _u}function bt(h,m){if(fh===null){var _=fh=[];Mb=0,Tc=Le(),ki={status:"pending",value:void 0,then:function(M){_.push(M)}}}return Mb++,m.then(ge,ge),m}function ge(){if(--Mb===0&&fh!==null){ki!==null&&(ki.status="fulfilled");var h=fh;fh=null,Tc=0,ki=null;for(var m=0;m<h.length;m++)(0,h[m])()}}function dt(h,m){var _=[],M={status:"pending",value:null,reason:null,then:function(F){_.push(F)}};return h.then(function(){M.status="fulfilled",M.value=m;for(var F=0;F<_.length;F++)(0,_[F])(m)},function(F){for(M.status="rejected",M.reason=F,F=0;F<_.length;F++)(0,_[F])(void 0)}),M}function pt(){var h=Su.current;return h!==null?h:On.pooledCache}function ht(h,m){m===null?x(Su,Su.current):x(Su,m.pool)}function st(){var h=pt();return h===null?null:{parent:di?Gr._currentValue:Gr._currentValue2,pool:h}}function Qe(h,m){if(pi(h,m))return!0;if(typeof h!="object"||h===null||typeof m!="object"||m===null)return!1;var _=Object.keys(h),M=Object.keys(m);if(_.length!==M.length)return!1;for(M=0;M<_.length;M++){var F=_[M];if(!$C.call(m,F)||!pi(h[F],m[F]))return!1}return!0}function gt(h){return h=h.status,h==="fulfilled"||h==="rejected"}function Wt(h,m,_){switch(_=h[_],_===void 0?h.push(m):_!==m&&(m.then(Ne,Ne),m=_),m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,Ar(h),h;default:if(typeof m.status=="string")m.then(Ne,Ne);else{if(h=On,h!==null&&100<h.shellSuspendCounter)throw Error(i(482));h=m,h.status="pending",h.then(function(M){if(m.status==="pending"){var F=m;F.status="fulfilled",F.value=M}},function(M){if(m.status==="pending"){var F=m;F.status="rejected",F.reason=M}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,Ar(h),h}throw Xa=m,Ui}}function nn(h){try{var m=h._init;return m(h._payload)}catch(_){throw _!==null&&typeof _=="object"&&typeof _.then=="function"?(Xa=_,Ui):_}}function Kt(){if(Xa===null)throw Error(i(459));var h=Xa;return Xa=null,h}function Ar(h){if(h===Ui||h===Po)throw Error(i(483))}function Tr(h){var m=Bf;return Bf+=1,wu===null&&(wu=[]),Wt(wu,h,m)}function oa(h,m){m=m.props.ref,h.ref=m!==void 0?m:null}function fs(h,m){throw m.$$typeof===If?Error(i(525)):(h=Object.prototype.toString.call(m),Error(i(31,h==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":h)))}function ho(h){function m(Ve,Oe){if(h){var $e=Ve.deletions;$e===null?(Ve.deletions=[Oe],Ve.flags|=16):$e.push(Oe)}}function _(Ve,Oe){if(!h)return null;for(;Oe!==null;)m(Ve,Oe),Oe=Oe.sibling;return null}function M(Ve){for(var Oe=new Map;Ve!==null;)Ve.key!==null?Oe.set(Ve.key,Ve):Oe.set(Ve.index,Ve),Ve=Ve.sibling;return Oe}function F(Ve,Oe){return Ve=qs(Ve,Oe),Ve.index=0,Ve.sibling=null,Ve}function H(Ve,Oe,$e){return Ve.index=$e,h?($e=Ve.alternate,$e!==null?($e=$e.index,$e<Oe?(Ve.flags|=67108866,Oe):$e):(Ve.flags|=67108866,Oe)):(Ve.flags|=1048576,Oe)}function ee(Ve){return h&&Ve.alternate===null&&(Ve.flags|=67108866),Ve}function _e(Ve,Oe,$e,Ct){return Oe===null||Oe.tag!==6?(Oe=By($e,Ve.mode,Ct),Oe.return=Ve,Oe):(Oe=F(Oe,$e),Oe.return=Ve,Oe)}function Ye(Ve,Oe,$e,Ct){var on=$e.type;return on===Pf?Rt(Ve,Oe,$e.props.children,Ct,$e.key):Oe!==null&&(Oe.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===qa&&nn(on)===Oe.type)?(Oe=F(Oe,$e.props),oa(Oe,$e),Oe.return=Ve,Oe):(Oe=bc($e.type,$e.key,$e.props,null,Ve.mode,Ct),oa(Oe,$e),Oe.return=Ve,Oe)}function xt(Ve,Oe,$e,Ct){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==$e.containerInfo||Oe.stateNode.implementation!==$e.implementation?(Oe=Hy($e,Ve.mode,Ct),Oe.return=Ve,Oe):(Oe=F(Oe,$e.children||[]),Oe.return=Ve,Oe)}function Rt(Ve,Oe,$e,Ct,on){return Oe===null||Oe.tag!==7?(Oe=So($e,Ve.mode,Ct,on),Oe.return=Ve,Oe):(Oe=F(Oe,$e),Oe.return=Ve,Oe)}function Et(Ve,Oe,$e){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Oe=By(""+Oe,Ve.mode,$e),Oe.return=Ve,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case Ll:return $e=bc(Oe.type,Oe.key,Oe.props,null,Ve.mode,$e),oa($e,Oe),$e.return=Ve,$e;case Rf:return Oe=Hy(Oe,Ve.mode,$e),Oe.return=Ve,Oe;case qa:return Oe=nn(Oe),Et(Ve,Oe,$e)}if(vu(Oe)||d(Oe))return Oe=So(Oe,Ve.mode,$e,null),Oe.return=Ve,Oe;if(typeof Oe.then=="function")return Et(Ve,Tr(Oe),$e);if(Oe.$$typeof===wo)return Et(Ve,Y(Ve,Oe),$e);fs(Ve,Oe)}return null}function zt(Ve,Oe,$e,Ct){var on=Oe!==null?Oe.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return on!==null?null:_e(Ve,Oe,""+$e,Ct);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case Ll:return $e.key===on?Ye(Ve,Oe,$e,Ct):null;case Rf:return $e.key===on?xt(Ve,Oe,$e,Ct):null;case qa:return $e=nn($e),zt(Ve,Oe,$e,Ct)}if(vu($e)||d($e))return on!==null?null:Rt(Ve,Oe,$e,Ct,null);if(typeof $e.then=="function")return zt(Ve,Oe,Tr($e),Ct);if($e.$$typeof===wo)return zt(Ve,Oe,Y(Ve,$e),Ct);fs(Ve,$e)}return null}function Sn(Ve,Oe,$e,Ct,on){if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number"||typeof Ct=="bigint")return Ve=Ve.get($e)||null,_e(Oe,Ve,""+Ct,on);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case Ll:return Ve=Ve.get(Ct.key===null?$e:Ct.key)||null,Ye(Oe,Ve,Ct,on);case Rf:return Ve=Ve.get(Ct.key===null?$e:Ct.key)||null,xt(Oe,Ve,Ct,on);case qa:return Ct=nn(Ct),Sn(Ve,Oe,$e,Ct,on)}if(vu(Ct)||d(Ct))return Ve=Ve.get($e)||null,Rt(Oe,Ve,Ct,on,null);if(typeof Ct.then=="function")return Sn(Ve,Oe,$e,Tr(Ct),on);if(Ct.$$typeof===wo)return Sn(Ve,Oe,$e,Y(Oe,Ct),on);fs(Oe,Ct)}return null}function vi(Ve,Oe,$e,Ct){for(var on=null,Qr=null,ln=Oe,Kn=Oe=0,Ji=null;ln!==null&&Kn<$e.length;Kn++){ln.index>Kn?(Ji=ln,ln=null):Ji=ln.sibling;var sr=zt(Ve,ln,$e[Kn],Ct);if(sr===null){ln===null&&(ln=Ji);break}h&&ln&&sr.alternate===null&&m(Ve,ln),Oe=H(sr,Oe,Kn),Qr===null?on=sr:Qr.sibling=sr,Qr=sr,ln=Ji}if(Kn===$e.length)return _(Ve,ln),jn&&fe(Ve,Kn),on;if(ln===null){for(;Kn<$e.length;Kn++)ln=Et(Ve,$e[Kn],Ct),ln!==null&&(Oe=H(ln,Oe,Kn),Qr===null?on=ln:Qr.sibling=ln,Qr=ln);return jn&&fe(Ve,Kn),on}for(ln=M(ln);Kn<$e.length;Kn++)Ji=Sn(ln,Ve,Kn,$e[Kn],Ct),Ji!==null&&(h&&Ji.alternate!==null&&ln.delete(Ji.key===null?Kn:Ji.key),Oe=H(Ji,Oe,Kn),Qr===null?on=Ji:Qr.sibling=Ji,Qr=Ji);return h&&ln.forEach(function(Do){return m(Ve,Do)}),jn&&fe(Ve,Kn),on}function bh(Ve,Oe,$e,Ct){if($e==null)throw Error(i(151));for(var on=null,Qr=null,ln=Oe,Kn=Oe=0,Ji=null,sr=$e.next();ln!==null&&!sr.done;Kn++,sr=$e.next()){ln.index>Kn?(Ji=ln,ln=null):Ji=ln.sibling;var Do=zt(Ve,ln,sr.value,Ct);if(Do===null){ln===null&&(ln=Ji);break}h&&ln&&Do.alternate===null&&m(Ve,ln),Oe=H(Do,Oe,Kn),Qr===null?on=Do:Qr.sibling=Do,Qr=Do,ln=Ji}if(sr.done)return _(Ve,ln),jn&&fe(Ve,Kn),on;if(ln===null){for(;!sr.done;Kn++,sr=$e.next())sr=Et(Ve,sr.value,Ct),sr!==null&&(Oe=H(sr,Oe,Kn),Qr===null?on=sr:Qr.sibling=sr,Qr=sr);return jn&&fe(Ve,Kn),on}for(ln=M(ln);!sr.done;Kn++,sr=$e.next())sr=Sn(ln,Ve,Kn,sr.value,Ct),sr!==null&&(h&&sr.alternate!==null&&ln.delete(sr.key===null?Kn:sr.key),Oe=H(sr,Oe,Kn),Qr===null?on=sr:Qr.sibling=sr,Qr=sr);return h&&ln.forEach(function(YC){return m(Ve,YC)}),jn&&fe(Ve,Kn),on}function Pu(Ve,Oe,$e,Ct){if(typeof $e=="object"&&$e!==null&&$e.type===Pf&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case Ll:e:{for(var on=$e.key;Oe!==null;){if(Oe.key===on){if(on=$e.type,on===Pf){if(Oe.tag===7){_(Ve,Oe.sibling),Ct=F(Oe,$e.props.children),Ct.return=Ve,Ve=Ct;break e}}else if(Oe.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===qa&&nn(on)===Oe.type){_(Ve,Oe.sibling),Ct=F(Oe,$e.props),oa(Ct,$e),Ct.return=Ve,Ve=Ct;break e}_(Ve,Oe);break}else m(Ve,Oe);Oe=Oe.sibling}$e.type===Pf?(Ct=So($e.props.children,Ve.mode,Ct,$e.key),Ct.return=Ve,Ve=Ct):(Ct=bc($e.type,$e.key,$e.props,null,Ve.mode,Ct),oa(Ct,$e),Ct.return=Ve,Ve=Ct)}return ee(Ve);case Rf:e:{for(on=$e.key;Oe!==null;){if(Oe.key===on)if(Oe.tag===4&&Oe.stateNode.containerInfo===$e.containerInfo&&Oe.stateNode.implementation===$e.implementation){_(Ve,Oe.sibling),Ct=F(Oe,$e.children||[]),Ct.return=Ve,Ve=Ct;break e}else{_(Ve,Oe);break}else m(Ve,Oe);Oe=Oe.sibling}Ct=Hy($e,Ve.mode,Ct),Ct.return=Ve,Ve=Ct}return ee(Ve);case qa:return $e=nn($e),Pu(Ve,Oe,$e,Ct)}if(vu($e))return vi(Ve,Oe,$e,Ct);if(d($e)){if(on=d($e),typeof on!="function")throw Error(i(150));return $e=on.call($e),bh(Ve,Oe,$e,Ct)}if(typeof $e.then=="function")return Pu(Ve,Oe,Tr($e),Ct);if($e.$$typeof===wo)return Pu(Ve,Oe,Y(Ve,$e),Ct);fs(Ve,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint"?($e=""+$e,Oe!==null&&Oe.tag===6?(_(Ve,Oe.sibling),Ct=F(Oe,$e),Ct.return=Ve,Ve=Ct):(_(Ve,Oe),Ct=By($e,Ve.mode,Ct),Ct.return=Ve,Ve=Ct),ee(Ve)):_(Ve,Oe)}return function(Ve,Oe,$e,Ct){try{Bf=0;var on=Pu(Ve,Oe,$e,Ct);return wu=null,on}catch(ln){if(ln===Ui||ln===Po)throw ln;var Qr=t(29,ln,null,Ve.mode);return Qr.lanes=Ct,Qr.return=Ve,Qr}finally{}}}function ds(){for(var h=Bl,m=Vf=Bl=0;m<h;){var _=ma[m];ma[m++]=null;var M=ma[m];ma[m++]=null;var F=ma[m];ma[m++]=null;var H=ma[m];if(ma[m++]=null,M!==null&&F!==null){var ee=M.pending;ee===null?F.next=F:(F.next=ee.next,ee.next=F),M.pending=F}H!==0&&Hi(_,F,H)}}function la(h,m,_,M){ma[Bl++]=h,ma[Bl++]=m,ma[Bl++]=_,ma[Bl++]=M,Vf|=M,h.lanes|=M,h=h.alternate,h!==null&&(h.lanes|=M)}function Wo(h,m,_,M){return la(h,m,_,M),br(h)}function Mr(h,m){return la(h,null,null,m),br(h)}function Hi(h,m,_){h.lanes|=_;var M=h.alternate;M!==null&&(M.lanes|=_);for(var F=!1,H=h.return;H!==null;)H.childLanes|=_,M=H.alternate,M!==null&&(M.childLanes|=_),H.tag===22&&(h=H.stateNode,h===null||h._visibility&1||(F=!0)),h=H,H=H.return;return h.tag===3?(H=h.stateNode,F&&m!==null&&(F=31-xs(_),h=H.hiddenUpdates,M=h[F],M===null?h[F]=[m]:M.push(m),m.lane=_|536870912),H):null}function br(h){if(50<ar)throw ar=0,um=null,Error(i(185));for(var m=h.return;m!==null;)h=m,m=h.return;return h.tag===3?h.stateNode:null}function kr(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ni(h,m){h=h.updateQueue,m.updateQueue===h&&(m.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function Gi(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function ca(h,m,_){var M=h.updateQueue;if(M===null)return null;if(M=M.shared,(Un&2)!==0){var F=M.pending;return F===null?m.next=m:(m.next=F.next,F.next=m),M.pending=m,m=br(h),Hi(h,null,_),m}return la(h,M,m,_),br(h)}function zs(h,m,_){if(m=m.updateQueue,m!==null&&(m=m.shared,(_&4194048)!==0)){var M=m.lanes;M&=h.pendingLanes,_|=M,m.lanes=_,C(h,_)}}function $o(h,m){var _=h.updateQueue,M=h.alternate;if(M!==null&&(M=M.updateQueue,_===M)){var F=null,H=null;if(_=_.firstBaseUpdate,_!==null){do{var ee={lane:_.lane,tag:_.tag,payload:_.payload,callback:null,next:null};H===null?F=H=ee:H=H.next=ee,_=_.next}while(_!==null);H===null?F=H=m:H=H.next=m}else F=H=m;_={baseState:M.baseState,firstBaseUpdate:F,lastBaseUpdate:H,shared:M.shared,callbacks:M.callbacks},h.updateQueue=_;return}h=_.lastBaseUpdate,h===null?_.firstBaseUpdate=m:h.next=m,_.lastBaseUpdate=m}function qi(){if(A0){var h=ki;if(h!==null)throw h}}function hs(h,m,_,M){A0=!1;var F=h.updateQueue;Xs=!1;var H=F.firstBaseUpdate,ee=F.lastBaseUpdate,_e=F.shared.pending;if(_e!==null){F.shared.pending=null;var Ye=_e,xt=Ye.next;Ye.next=null,ee===null?H=xt:ee.next=xt,ee=Ye;var Rt=h.alternate;Rt!==null&&(Rt=Rt.updateQueue,_e=Rt.lastBaseUpdate,_e!==ee&&(_e===null?Rt.firstBaseUpdate=xt:_e.next=xt,Rt.lastBaseUpdate=Ye))}if(H!==null){var Et=F.baseState;ee=0,Rt=xt=Ye=null,_e=H;do{var zt=_e.lane&-536870913,Sn=zt!==_e.lane;if(Sn?(Bn&zt)===zt:(M&zt)===zt){zt!==0&&zt===Tc&&(A0=!0),Rt!==null&&(Rt=Rt.next={lane:0,tag:_e.tag,payload:_e.payload,callback:null,next:null});e:{var vi=h,bh=_e;zt=m;var Pu=_;switch(bh.tag){case 1:if(vi=bh.payload,typeof vi=="function"){Et=vi.call(Pu,Et,zt);break e}Et=vi;break e;case 3:vi.flags=vi.flags&-65537|128;case 0:if(vi=bh.payload,zt=typeof vi=="function"?vi.call(Pu,Et,zt):vi,zt==null)break e;Et=Jg({},Et,zt);break e;case 2:Xs=!0}}zt=_e.callback,zt!==null&&(h.flags|=64,Sn&&(h.flags|=8192),Sn=F.callbacks,Sn===null?F.callbacks=[zt]:Sn.push(zt))}else Sn={lane:zt,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},Rt===null?(xt=Rt=Sn,Ye=Et):Rt=Rt.next=Sn,ee|=zt;if(_e=_e.next,_e===null){if(_e=F.shared.pending,_e===null)break;Sn=_e,_e=Sn.next,Sn.next=null,F.lastBaseUpdate=Sn,F.shared.pending=null}}while(!0);Rt===null&&(Ye=Et),F.baseState=Ye,F.firstBaseUpdate=xt,F.lastBaseUpdate=Rt,H===null&&(F.shared.lanes=0),Cc|=ee,h.lanes=ee,h.memoizedState=Et}}function Fa(h,m){if(typeof h!="function")throw Error(i(191,h));h.call(m)}function ua(h,m){var _=h.callbacks;if(_!==null)for(h.callbacks=null,h=0;h<_.length;h++)Fa(_[h],m)}function Wi(h,m){h=Hl,x(Eu,h),x(Hf,m),Hl=h|m.baseLanes}function fa(){x(Eu,Hl),x(Hf,Hf.current)}function te(){Hl=Eu.current,y(Hf),y(Eu)}function Ae(h){var m=h.alternate;x(ai,ai.current&1),x(Ss,h),ws===null&&(m===null||Hf.current!==null||m.memoizedState!==null)&&(ws=h)}function He(h){x(ai,ai.current),x(Ss,h),ws===null&&(ws=h)}function ze(h){h.tag===22?(x(ai,ai.current),x(Ss,h),ws===null&&(ws=h)):Ce()}function Ce(){x(ai,ai.current),x(Ss,Ss.current)}function At(h){y(Ss),ws===h&&(ws=null),y(ai)}function Lt(h){for(var m=h;m!==null;){if(m.tag===13){var _=m.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||bu(_)||o0(_)))return m}else if(m.tag===19&&(m.memoizedProps.revealOrder==="forwards"||m.memoizedProps.revealOrder==="backwards"||m.memoizedProps.revealOrder==="unstable_legacy-backwards"||m.memoizedProps.revealOrder==="together")){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function St(){throw Error(i(321))}function Ft(h,m){if(m===null)return!1;for(var _=0;_<m.length&&_<h.length;_++)if(!pi(h[_],m[_]))return!1;return!0}function jt(h,m,_,M,F,H){return Mc=H,Tn=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,rn.H=h===null||h.memoizedState===null?Yr:Vl,$n=!1,H=_(M,F),$n=!1,In&&(H=Dt(m,_,M,F)),Ht(h),H}function Ht(h){rn.H=Ys;var m=Jt!==null&&Jt.next!==null;if(Mc=0,vn=Jt=Tn=null,Nn=!1,No=0,rl=null,m)throw Error(i(300));h===null||Fr||(h=h.dependencies,h!==null&&Tt(h)&&(Fr=!0))}function Dt(h,m,_,M){Tn=h;var F=0;do{if(In&&(rl=null),No=0,In=!1,25<=F)throw Error(i(301));if(F+=1,vn=Jt=null,h.updateQueue!=null){var H=h.updateQueue;H.lastEffect=null,H.events=null,H.stores=null,H.memoCache!=null&&(H.memoCache.index=0)}rn.H=Au,H=m(_,M)}while(In);return H}function Yt(){var h=rn.H,m=h.useState()[0];return m=typeof m.then=="function"?wt(m):m,h=h.useState()[0],(Jt!==null?Jt.memoizedState:null)!==h&&(Tn.flags|=1024),m}function En(){var h=Ma!==0;return Ma=0,h}function rr(h,m,_){m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~_}function ne(h){if(Nn){for(h=h.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}Nn=!1}Mc=0,vn=Jt=Tn=null,In=!1,No=Ma=0,rl=null}function Se(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?Tn.memoizedState=vn=h:vn=vn.next=h,vn}function Te(){if(Jt===null){var h=Tn.alternate;h=h!==null?h.memoizedState:null}else h=Jt.next;var m=vn===null?Tn.memoizedState:vn.next;if(m!==null)vn=m,Jt=h;else{if(h===null)throw Tn.alternate===null?Error(i(467)):Error(i(310));Jt=h,h={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},vn===null?Tn.memoizedState=vn=h:vn=vn.next=h}return vn}function _t(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wt(h){var m=No;return No+=1,rl===null&&(rl=[]),h=Wt(rl,h,m),m=Tn,(vn===null?m.memoizedState:vn.next)===null&&(m=m.alternate,rn.H=m===null||m.memoizedState===null?Yr:Vl),h}function Zt(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return wt(h);if(h.$$typeof===wo)return ae(h)}throw Error(i(438,String(h)))}function Yn(h){var m=null,_=Tn.updateQueue;if(_!==null&&(m=_.memoCache),m==null){var M=Tn.alternate;M!==null&&(M=M.updateQueue,M!==null&&(M=M.memoCache,M!=null&&(m={data:M.data.map(function(F){return F.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),_===null&&(_=_t(),Tn.updateQueue=_),_.memoCache=m,_=m.data[m.index],_===void 0)for(_=m.data[m.index]=Array(h),M=0;M<h;M++)_[M]=qy;return m.index++,_}function dn(h,m){return typeof m=="function"?m(h):m}function Gn(h){var m=Te();return hn(m,Jt,h)}function hn(h,m,_){var M=h.queue;if(M===null)throw Error(i(311));M.lastRenderedReducer=_;var F=h.baseQueue,H=M.pending;if(H!==null){if(F!==null){var ee=F.next;F.next=H.next,H.next=ee}m.baseQueue=F=H,M.pending=null}if(H=h.baseState,F===null)h.memoizedState=H;else{m=F.next;var _e=ee=null,Ye=null,xt=m,Rt=!1;do{var Et=xt.lane&-536870913;if(Et!==xt.lane?(Bn&Et)===Et:(Mc&Et)===Et){var zt=xt.revertLane;if(zt===0)Ye!==null&&(Ye=Ye.next={lane:0,revertLane:0,gesture:null,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null}),Et===Tc&&(Rt=!0);else if((Mc&zt)===zt){xt=xt.next,zt===Tc&&(Rt=!0);continue}else Et={lane:0,revertLane:xt.revertLane,gesture:null,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null},Ye===null?(_e=Ye=Et,ee=H):Ye=Ye.next=Et,Tn.lanes|=zt,Cc|=zt;Et=xt.action,$n&&_(H,Et),H=xt.hasEagerState?xt.eagerState:_(H,Et)}else zt={lane:Et,revertLane:xt.revertLane,gesture:xt.gesture,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null},Ye===null?(_e=Ye=zt,ee=H):Ye=Ye.next=zt,Tn.lanes|=Et,Cc|=Et;xt=xt.next}while(xt!==null&&xt!==m);if(Ye===null?ee=H:Ye.next=_e,!pi(H,h.memoizedState)&&(Fr=!0,Rt&&(_=ki,_!==null)))throw _;h.memoizedState=H,h.baseState=ee,h.baseQueue=Ye,M.lastRenderedState=H}return F===null&&(M.lanes=0),[h.memoizedState,M.dispatch]}function ir(h){var m=Te(),_=m.queue;if(_===null)throw Error(i(311));_.lastRenderedReducer=h;var M=_.dispatch,F=_.pending,H=m.memoizedState;if(F!==null){_.pending=null;var ee=F=F.next;do H=h(H,ee.action),ee=ee.next;while(ee!==F);pi(H,m.memoizedState)||(Fr=!0),m.memoizedState=H,m.baseQueue===null&&(m.baseState=H),_.lastRenderedState=H}return[H,M]}function qn(h,m,_){var M=Tn,F=Te(),H=jn;if(H){if(_===void 0)throw Error(i(407));_=_()}else _=m();var ee=!pi((Jt||F).memoizedState,_);if(ee&&(F.memoizedState=_,Fr=!0),F=F.queue,Xo(za.bind(null,M,F,h),[h]),F.getSnapshot!==m||ee||vn!==null&&vn.memoizedState.tag&1){if(M.flags|=2048,Ba(9,{destroy:void 0},Rr.bind(null,M,F,_,m),null),On===null)throw Error(i(349));H||(Mc&127)!==0||xr(M,m,_)}return _}function xr(h,m,_){h.flags|=16384,h={getSnapshot:m,value:_},m=Tn.updateQueue,m===null?(m=_t(),Tn.updateQueue=m,m.stores=[h]):(_=m.stores,_===null?m.stores=[h]:_.push(h))}function Rr(h,m,_,M){m.value=_,m.getSnapshot=M,xi(m)&&lc(h)}function za(h,m,_){return _(function(){xi(m)&&lc(h)})}function xi(h){var m=h.getSnapshot;h=h.value;try{var _=m();return!pi(h,_)}catch{return!0}}function lc(h){var m=Mr(h,2);m!==null&&$r(m,h,2)}function Sa(h){var m=Se();if(typeof h=="function"){var _=h;if(h=_(),$n){V(!0);try{_()}finally{V(!1)}}}return m.memoizedState=m.baseState=h,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:h},m}function js(h,m,_,M){return h.baseState=_,hn(h,Jt,typeof M=="function"?M:dn)}function ja(h,m,_,M,F){if(_f(h))throw Error(i(485));if(h=m.action,h!==null){var H={payload:F,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ee){H.listeners.push(ee)}};rn.T!==null?_(!0):H.isTransition=!1,M(H),_=m.pending,_===null?(H.next=m.pending=H,kd(m,H)):(H.next=_.next,m.pending=_.next=H)}}function kd(h,m){var _=m.action,M=m.payload,F=h.state;if(m.isTransition){var H=rn.T,ee={};rn.T=ee;try{var _e=_(F,M),Ye=rn.S;Ye!==null&&Ye(ee,_e),Bs(h,m,_e)}catch(xt){po(h,m,xt)}finally{H!==null&&ee.types!==null&&(H.types=ee.types),rn.T=H}}else try{H=_(F,M),Bs(h,m,H)}catch(xt){po(h,m,xt)}}function Bs(h,m,_){_!==null&&typeof _=="object"&&typeof _.then=="function"?_.then(function(M){cc(h,m,M)},function(M){return po(h,m,M)}):cc(h,m,_)}function cc(h,m,_){m.status="fulfilled",m.value=_,Jc(m),h.state=_,m=h.pending,m!==null&&(_=m.next,_===m?h.pending=null:(_=_.next,m.next=_,kd(h,_)))}function po(h,m,_){var M=h.pending;if(h.pending=null,M!==null){M=M.next;do m.status="rejected",m.reason=_,Jc(m),m=m.next;while(m!==M)}h.action=null}function Jc(h){h=h.listeners;for(var m=0;m<h.length;m++)(0,h[m])()}function yf(h,m){return m}function uc(h,m){if(jn){var _=On.formState;if(_!==null){e:{var M=Tn;if(jn){if(Hr){var F=Z1(Hr,$a);if(F){Hr=Q1(F),M=ub(F);break e}}me(M)}M=!1}M&&(m=_[0])}}_=Se(),_.memoizedState=_.baseState=m,M={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yf,lastRenderedState:m},_.queue=M,_=Rp.bind(null,Tn,M),M.dispatch=_,M=Sa(!1);var H=go.bind(null,Tn,!1,M.queue);return M=Se(),F={state:m,dispatch:null,action:h,pending:null},M.queue=F,_=ja.bind(null,Tn,F,H,_),F.dispatch=_,M.memoizedState=h,[m,_,!1]}function mo(h){var m=Te();return Vs(m,Jt,h)}function Vs(h,m,_){if(m=hn(h,m,yf)[0],h=Gn(dn)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var M=wt(m)}catch(ee){throw ee===Ui?Po:ee}else M=m;m=Te();var F=m.queue,H=F.dispatch;return _!==m.memoizedState&&(Tn.flags|=2048,Ba(9,{destroy:void 0},bf.bind(null,F,_),null)),[M,H,h]}function bf(h,m){h.action=m}function pr(h){var m=Te(),_=Jt;if(_!==null)return Vs(m,_,h);Te(),m=m.memoizedState,_=Te();var M=_.queue.dispatch;return _.memoizedState=h,[m,M,!1]}function Ba(h,m,_,M){return h={tag:h,create:_,deps:M,inst:m,next:null},m=Tn.updateQueue,m===null&&(m=_t(),Tn.updateQueue=m),_=m.lastEffect,_===null?m.lastEffect=h.next=h:(M=_.next,_.next=h,h.next=M,m.lastEffect=h),h}function Ud(){return Te().memoizedState}function bl(h,m,_,M){var F=Se();Tn.flags|=h,F.memoizedState=Ba(1|m,{destroy:void 0},_,M===void 0?null:M)}function eu(h,m,_,M){var F=Te();M=M===void 0?null:M;var H=F.memoizedState.inst;Jt!==null&&M!==null&&Ft(M,Jt.memoizedState.deps)?F.memoizedState=Ba(m,H,_,M):(Tn.flags|=h,F.memoizedState=Ba(1|m,H,_,M))}function tu(h,m){bl(8390656,8,h,m)}function Xo(h,m){eu(2048,8,h,m)}function Yo(h){Tn.flags|=4;var m=Tn.updateQueue;if(m===null)m=_t(),Tn.updateQueue=m,m.events=[h];else{var _=m.events;_===null?m.events=[h]:_.push(h)}}function $i(h){var m=Te().memoizedState;return Yo({ref:m,nextImpl:h}),function(){if((Un&2)!==0)throw Error(i(440));return m.impl.apply(void 0,arguments)}}function xl(h,m){return eu(4,2,h,m)}function Ko(h,m){return eu(4,4,h,m)}function fc(h,m){if(typeof m=="function"){h=h();var _=m(h);return function(){typeof _=="function"?_():m(null)}}if(m!=null)return h=h(),m.current=h,function(){m.current=null}}function Fd(h,m,_){_=_!=null?_.concat([h]):null,eu(4,4,fc.bind(null,m,h),_)}function _l(){}function xf(h,m){var _=Te();m=m===void 0?null:m;var M=_.memoizedState;return m!==null&&Ft(m,M[1])?M[0]:(_.memoizedState=[h,m],h)}function Zo(h,m){var _=Te();m=m===void 0?null:m;var M=_.memoizedState;if(m!==null&&Ft(m,M[1]))return M[0];if(M=h(),$n){V(!0);try{h()}finally{V(!1)}}return _.memoizedState=[M,m],M}function nu(h,m,_){return _===void 0||(Mc&1073741824)!==0&&(Bn&261930)===0?h.memoizedState=m:(h.memoizedState=_,h=gc(),Tn.lanes|=h,Cc|=h,_)}function zd(h,m,_,M){return pi(_,m)?_:Hf.current!==null?(h=nu(h,_,M),pi(h,m)||(Fr=!0),h):(Mc&42)===0||(Mc&1073741824)!==0&&(Bn&261930)===0?(Fr=!0,h.memoizedState=_):(h=gc(),Tn.lanes|=h,Cc|=h,m)}function ru(h,m,_,M,F){var H=Eo();zn(H!==0&&8>H?H:8);var ee=rn.T,_e={};rn.T=_e,go(h,!1,m,_);try{var Ye=F(),xt=rn.S;if(xt!==null&&xt(_e,Ye),Ye!==null&&typeof Ye=="object"&&typeof Ye.then=="function"){var Rt=dt(Ye,M);au(h,m,Rt,Br(h))}else au(h,m,M,Br(h))}catch(Et){au(h,m,{then:function(){},status:"rejected",reason:Et},Br())}finally{zn(H),ee!==null&&_e.types!==null&&(ee.types=_e.types),rn.T=ee}}function Ip(h){var m=h.memoizedState;if(m!==null)return m;m={memoizedState:Lf,baseState:Lf,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:Lf},next:null};var _={};return m.next={memoizedState:_,baseState:_,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:_},next:null},h.memoizedState=m,h=h.alternate,h!==null&&(h.memoizedState=m),m}function jd(){return ae(kf)}function iu(){return Te().memoizedState}function Bd(){return Te().memoizedState}function Ug(h){for(var m=h.return;m!==null;){switch(m.tag){case 24:case 3:var _=Br();h=Gi(_);var M=ca(m,h,_);M!==null&&($r(M,m,_),zs(M,m,_)),m={cache:ke()},h.payload=m;return}m=m.return}}function Vd(h,m,_){var M=Br();_={lane:M,revertLane:0,gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null},_f(h)?Pp(m,_):(_=Wo(h,m,_,M),_!==null&&($r(_,h,M),Np(_,m,M)))}function Rp(h,m,_){var M=Br();au(h,m,_,M)}function au(h,m,_,M){var F={lane:M,revertLane:0,gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null};if(_f(h))Pp(m,F);else{var H=h.alternate;if(h.lanes===0&&(H===null||H.lanes===0)&&(H=m.lastRenderedReducer,H!==null))try{var ee=m.lastRenderedState,_e=H(ee,_);if(F.hasEagerState=!0,F.eagerState=_e,pi(_e,ee))return la(h,m,F,0),On===null&&ds(),!1}catch{}finally{}if(_=Wo(h,m,F,M),_!==null)return $r(_,h,M),Np(_,m,M),!0}return!1}function go(h,m,_,M){if(M={lane:2,revertLane:Le(),gesture:null,action:M,hasEagerState:!1,eagerState:null,next:null},_f(h)){if(m)throw Error(i(479))}else m=Wo(h,_,M,2),m!==null&&$r(m,h,2)}function _f(h){var m=h.alternate;return h===Tn||m!==null&&m===Tn}function Pp(h,m){In=Nn=!0;var _=h.pending;_===null?m.next=m:(m.next=_.next,_.next=m),h.pending=m}function Np(h,m,_){if((_&4194048)!==0){var M=m.lanes;M&=h.pendingLanes,_|=M,m.lanes=_,C(h,_)}}function Hd(h,m,_,M){m=h.memoizedState,_=_(M,m),_=_==null?m:Jg({},m,_),h.memoizedState=_,h.lanes===0&&(h.updateQueue.baseState=_)}function dc(h,m,_,M,F,H,ee){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(M,H,ee):m.prototype&&m.prototype.isPureReactComponent?!Qe(_,M)||!Qe(F,H):!0}function wa(h,m,_,M){h=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(_,M),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(_,M),m.state!==h&&am.enqueueReplaceState(m,m.state,null)}function Sl(h,m){var _=m;if("ref"in m){_={};for(var M in m)M!=="ref"&&(_[M]=m[M])}if(h=h.defaultProps){_===m&&(_=Jg({},_));for(var F in h)_[F]===void 0&&(_[F]=h[F])}return _}function Sf(h,m){try{var _=h.onUncaughtError;_(m.value,{componentStack:m.stack})}catch(M){setTimeout(function(){throw M})}}function wl(h,m,_){try{var M=h.onCaughtError;M(_.value,{componentStack:_.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(F){setTimeout(function(){throw F})}}function T(h,m,_){return _=Gi(_),_.tag=3,_.payload={element:null},_.callback=function(){Sf(h,m)},_}function q(h){return h=Gi(h),h.tag=3,h}function K(h,m,_,M){var F=_.type.getDerivedStateFromError;if(typeof F=="function"){var H=M.value;h.payload=function(){return F(H)},h.callback=function(){wl(m,_,M)}}var ee=_.stateNode;ee!==null&&typeof ee.componentDidCatch=="function"&&(h.callback=function(){wl(m,_,M),typeof F!="function"&&(Ic===null?Ic=new Set([this]):Ic.add(this));var _e=M.stack;this.componentDidCatch(M.value,{componentStack:_e!==null?_e:""})})}function le(h,m,_,M,F){if(_.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){if(m=_.alternate,m!==null&&at(m,_,F,!0),_=Ss.current,_!==null){switch(_.tag){case 31:case 13:return ws===null?Jd():_.alternate===null&&Zr===0&&(Zr=3),_.flags&=-257,_.flags|=65536,_.lanes=F,M===jl?_.flags|=16384:(m=_.updateQueue,m===null?_.updateQueue=new Set([M]):m.add(M),nh(h,M,F)),!1;case 22:return _.flags|=65536,M===jl?_.flags|=16384:(m=_.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([M])},_.updateQueue=m):(_=m.retryQueue,_===null?m.retryQueue=new Set([M]):_.add(M)),nh(h,M,F)),!1}throw Error(i(435,_.tag))}return nh(h,M,F),Jd(),!1}if(jn)return m=Ss.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=F,M!==S0&&(h=Error(i(422),{cause:M}),Me(ce(h,_)))):(M!==S0&&(m=Error(i(423),{cause:M}),Me(ce(m,_))),h=h.current.alternate,h.flags|=65536,F&=-F,h.lanes|=F,M=ce(M,_),F=T(h.stateNode,M,F),$o(h,F),Zr!==4&&(Zr=2)),!1;var H=Error(i(520),{cause:M});if(H=ce(H,_),om===null?om=[H]:om.push(H),Zr!==4&&(Zr=2),m===null)return!0;M=ce(M,_),_=m;do{switch(_.tag){case 3:return _.flags|=65536,h=F&-F,_.lanes|=h,h=T(_.stateNode,M,h),$o(_,h),!1;case 1:if(m=_.type,H=_.stateNode,(_.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Ic===null||!Ic.has(H))))return _.flags|=65536,F&=-F,_.lanes|=F,F=q(F),K(F,h,_,M),$o(_,F),!1}_=_.return}while(_!==null);return!1}function Ie(h,m,_,M){m.child=h===null?Cb(m,null,_,M):pa(m,h.child,_,M)}function We(h,m,_,M,F){_=_.render;var H=m.ref;if("ref"in M){var ee={};for(var _e in M)_e!=="ref"&&(ee[_e]=M[_e])}else ee=M;return ct(m),M=jt(h,m,_,ee,H,F),_e=En(),h!==null&&!Fr?(rr(h,m,F),El(h,m,F)):(jn&&_e&&re(m),m.flags|=1,Ie(h,m,M,F),m.child)}function Nt(h,m,_,M,F){if(h===null){var H=_.type;return typeof H=="function"&&!Mf(H)&&H.defaultProps===void 0&&_.compare===null?(m.tag=15,m.type=H,_n(h,m,H,M,F)):(h=bc(_.type,null,M,m,m.mode,F),h.ref=m.ref,h.return=m,m.child=h)}if(H=h.child,!Op(h,F)){var ee=H.memoizedProps;if(_=_.compare,_=_!==null?_:Qe,_(ee,M)&&h.ref===m.ref)return El(h,m,F)}return m.flags|=1,h=qs(H,M),h.ref=m.ref,h.return=m,m.child=h}function _n(h,m,_,M,F){if(h!==null){var H=h.memoizedProps;if(Qe(H,M)&&h.ref===m.ref)if(Fr=!1,m.pendingProps=M=H,Op(h,F))(h.flags&131072)!==0&&(Fr=!0);else return m.lanes=h.lanes,El(h,m,F)}return hc(h,m,_,M,F)}function ri(h,m,_,M){var F=M.children,H=h!==null?h.memoizedState:null;if(h===null&&m.stateNode===null&&(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),M.mode==="hidden"){if((m.flags&128)!==0){if(H=H!==null?H.baseLanes|_:_,h!==null){for(M=m.child=h.child,F=0;M!==null;)F=F|M.lanes|M.childLanes,M=M.sibling;M=F&~H}else M=0,m.child=null;return Ur(h,m,H,_,M)}if((_&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},h!==null&&ht(m,H!==null?H.cachePool:null),H!==null?Wi(m,H):fa(),ze(m);else return M=m.lanes=536870912,Ur(h,m,H!==null?H.baseLanes|_:_,_,M)}else H!==null?(ht(m,H.cachePool),Wi(m,H),Ce(),m.memoizedState=null):(h!==null&&ht(m,null),fa(),Ce());return Ie(h,m,F,_),m.child}function Wn(h,m){return h!==null&&h.tag===22||m.stateNode!==null||(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.sibling}function Ur(h,m,_,M,F){var H=pt();return H=H===null?null:{parent:di?Gr._currentValue:Gr._currentValue2,pool:H},m.memoizedState={baseLanes:_,cachePool:H},h!==null&&ht(m,null),fa(),ze(m),h!==null&&at(h,m,M,!0),m.childLanes=F,null}function Va(h,m){return m=su({mode:m.mode,children:m.children},h.mode),m.ref=h.ref,h.child=m,m.return=h,m}function Qo(h,m,_){return pa(m,h.child,null,_),h=Va(m,m.pendingProps),h.flags|=2,At(m),m.memoizedState=null,h}function Jo(h,m,_){var M=m.pendingProps,F=(m.flags&128)!==0;if(m.flags&=-129,h===null){if(jn){if(M.mode==="hidden")return h=Va(m,M),m.lanes=536870912,Wn(null,h);if(He(m),(h=Hr)?(h=db(h,$a),h!==null&&(m.memoizedState={dehydrated:h,treeContext:Mo!==null?{id:da,overflow:tl}:null,retryLane:536870912,hydrationErrors:null},_=Vy(h),_.return=m,m.child=_,Li=m,Hr=null)):h=null,h===null)throw me(m);return m.lanes=536870912,null}return Va(m,M)}var H=h.memoizedState;if(H!==null){var ee=H.dehydrated;if(He(m),F)if(m.flags&256)m.flags&=-257,m=Qo(h,m,_);else if(m.memoizedState!==null)m.child=h.child,m.flags|=128,m=null;else throw Error(i(558));else if(Fr||at(h,m,_,!1),F=(_&h.childLanes)!==0,Fr||F){if(M=On,M!==null&&(ee=L(M,_),ee!==0&&ee!==H.retryLane))throw H.retryLane=ee,Mr(h,ee),$r(M,h,ee),Ya;Jd(),m=Qo(h,m,_)}else h=H.treeContext,Vr&&(Hr=nS(ee),Li=m,jn=!0,zl=null,$a=!1,h!==null&&ve(m,h)),m=Va(m,M),m.flags|=4096;return m}return h=qs(h.child,{mode:M.mode,children:M.children}),h.ref=m.ref,m.child=h,h.return=m,h}function ps(h,m){var _=m.ref;if(_===null)h!==null&&h.ref!==null&&(m.flags|=4194816);else{if(typeof _!="function"&&typeof _!="object")throw Error(i(284));(h===null||h.ref!==_)&&(m.flags|=4194816)}}function hc(h,m,_,M,F){return ct(m),_=jt(h,m,_,M,void 0,F),M=En(),h!==null&&!Fr?(rr(h,m,F),El(h,m,F)):(jn&&M&&re(m),m.flags|=1,Ie(h,m,_,F),m.child)}function wf(h,m,_,M,F,H){return ct(m),m.updateQueue=null,_=Dt(m,M,_,F),Ht(h),M=En(),h!==null&&!Fr?(rr(h,m,H),El(h,m,H)):(jn&&M&&re(m),m.flags|=1,Ie(h,m,_,H),m.child)}function Ef(h,m,_,M,F){if(ct(m),m.stateNode===null){var H=kl,ee=_.contextType;typeof ee=="object"&&ee!==null&&(H=ae(ee)),H=new _(M,H),m.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,H.updater=am,m.stateNode=H,H._reactInternals=m,H=m.stateNode,H.props=M,H.state=m.memoizedState,H.refs={},kr(m),ee=_.contextType,H.context=typeof ee=="object"&&ee!==null?ae(ee):kl,H.state=m.memoizedState,ee=_.getDerivedStateFromProps,typeof ee=="function"&&(Hd(m,_,ee,M),H.state=m.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(ee=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),ee!==H.state&&am.enqueueReplaceState(H,H.state,null),hs(m,M,H,F),qi(),H.state=m.memoizedState),typeof H.componentDidMount=="function"&&(m.flags|=4194308),M=!0}else if(h===null){H=m.stateNode;var _e=m.memoizedProps,Ye=Sl(_,_e);H.props=Ye;var xt=H.context,Rt=_.contextType;ee=kl,typeof Rt=="object"&&Rt!==null&&(ee=ae(Rt));var Et=_.getDerivedStateFromProps;Rt=typeof Et=="function"||typeof H.getSnapshotBeforeUpdate=="function",_e=m.pendingProps!==_e,Rt||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(_e||xt!==ee)&&wa(m,H,M,ee),Xs=!1;var zt=m.memoizedState;H.state=zt,hs(m,M,H,F),qi(),xt=m.memoizedState,_e||zt!==xt||Xs?(typeof Et=="function"&&(Hd(m,_,Et,M),xt=m.memoizedState),(Ye=Xs||dc(m,_,Ye,M,zt,xt,ee))?(Rt||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(m.flags|=4194308)):(typeof H.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=M,m.memoizedState=xt),H.props=M,H.state=xt,H.context=ee,M=Ye):(typeof H.componentDidMount=="function"&&(m.flags|=4194308),M=!1)}else{H=m.stateNode,Ni(h,m),ee=m.memoizedProps,Rt=Sl(_,ee),H.props=Rt,Et=m.pendingProps,zt=H.context,xt=_.contextType,Ye=kl,typeof xt=="object"&&xt!==null&&(Ye=ae(xt)),_e=_.getDerivedStateFromProps,(xt=typeof _e=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(ee!==Et||zt!==Ye)&&wa(m,H,M,Ye),Xs=!1,zt=m.memoizedState,H.state=zt,hs(m,M,H,F),qi();var Sn=m.memoizedState;ee!==Et||zt!==Sn||Xs||h!==null&&h.dependencies!==null&&Tt(h.dependencies)?(typeof _e=="function"&&(Hd(m,_,_e,M),Sn=m.memoizedState),(Rt=Xs||dc(m,_,Rt,M,zt,Sn,Ye)||h!==null&&h.dependencies!==null&&Tt(h.dependencies))?(xt||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(M,Sn,Ye),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(M,Sn,Ye)),typeof H.componentDidUpdate=="function"&&(m.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof H.componentDidUpdate!="function"||ee===h.memoizedProps&&zt===h.memoizedState||(m.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||ee===h.memoizedProps&&zt===h.memoizedState||(m.flags|=1024),m.memoizedProps=M,m.memoizedState=Sn),H.props=M,H.state=Sn,H.context=Ye,M=Rt):(typeof H.componentDidUpdate!="function"||ee===h.memoizedProps&&zt===h.memoizedState||(m.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||ee===h.memoizedProps&&zt===h.memoizedState||(m.flags|=1024),M=!1)}return H=M,ps(h,m),M=(m.flags&128)!==0,H||M?(H=m.stateNode,_=M&&typeof _.getDerivedStateFromError!="function"?null:H.render(),m.flags|=1,h!==null&&M?(m.child=pa(m,h.child,null,F),m.child=pa(m,null,_,F)):Ie(h,m,_,F),m.memoizedState=H.state,h=m.child):h=El(h,m,F),h}function x1(h,m,_,M){return De(),m.flags|=256,Ie(h,m,_,M),m.child}function My(h){return{baseLanes:h,cachePool:st()}}function Cy(h,m,_){return h=h!==null?h.childLanes&~_:0,m&&(h|=Ka),h}function Iy(h,m,_){var M=m.pendingProps,F=!1,H=(m.flags&128)!==0,ee;if((ee=H)||(ee=h!==null&&h.memoizedState===null?!1:(ai.current&2)!==0),ee&&(F=!0,m.flags&=-129),ee=(m.flags&32)!==0,m.flags&=-33,h===null){if(jn){if(F?Ae(m):Ce(),(h=Hr)?(h=sS(h,$a),h!==null&&(m.memoizedState={dehydrated:h,treeContext:Mo!==null?{id:da,overflow:tl}:null,retryLane:536870912,hydrationErrors:null},_=Vy(h),_.return=m,m.child=_,Li=m,Hr=null)):h=null,h===null)throw me(m);return o0(h)?m.lanes=32:m.lanes=536870912,null}var _e=M.children;return M=M.fallback,F?(Ce(),F=m.mode,_e=su({mode:"hidden",children:_e},F),M=So(M,F,_,null),_e.return=m,M.return=m,_e.sibling=M,m.child=_e,M=m.child,M.memoizedState=My(_),M.childLanes=Cy(h,ee,_),m.memoizedState=Gf,Wn(null,M)):(Ae(m),Fg(m,_e))}var Ye=h.memoizedState;if(Ye!==null&&(_e=Ye.dehydrated,_e!==null)){if(H)m.flags&256?(Ae(m),m.flags&=-257,m=Af(h,m,_)):m.memoizedState!==null?(Ce(),m.child=h.child,m.flags|=128,m=null):(Ce(),_e=M.fallback,F=m.mode,M=su({mode:"visible",children:M.children},F),_e=So(_e,F,_,null),_e.flags|=2,M.return=m,_e.return=m,M.sibling=_e,m.child=M,pa(m,h.child,null,_),M=m.child,M.memoizedState=My(_),M.childLanes=Cy(h,ee,_),m.memoizedState=Gf,m=Wn(null,M));else if(Ae(m),o0(_e))ee=l0(_e).digest,M=Error(i(419)),M.stack="",M.digest=ee,Me({value:M,source:null,stack:null}),m=Af(h,m,_);else if(Fr||at(h,m,_,!1),ee=(_&h.childLanes)!==0,Fr||ee){if(ee=On,ee!==null&&(M=L(ee,_),M!==0&&M!==Ye.retryLane))throw Ye.retryLane=M,Mr(h,M),$r(ee,h,M),Ya;bu(_e)||Jd(),m=Af(h,m,_)}else bu(_e)?(m.flags|=192,m.child=h.child,m=null):(h=Ye.treeContext,Vr&&(Hr=rS(_e),Li=m,jn=!0,zl=null,$a=!1,h!==null&&ve(m,h)),m=Fg(m,M.children),m.flags|=4096);return m}return F?(Ce(),_e=M.fallback,F=m.mode,Ye=h.child,H=Ye.sibling,M=qs(Ye,{mode:"hidden",children:M.children}),M.subtreeFlags=Ye.subtreeFlags&65011712,H!==null?_e=qs(H,_e):(_e=So(_e,F,_,null),_e.flags|=2),_e.return=m,M.return=m,M.sibling=_e,m.child=M,Wn(null,M),M=m.child,_e=h.child.memoizedState,_e===null?_e=My(_):(F=_e.cachePool,F!==null?(Ye=di?Gr._currentValue:Gr._currentValue2,F=F.parent!==Ye?{parent:Ye,pool:Ye}:F):F=st(),_e={baseLanes:_e.baseLanes|_,cachePool:F}),M.memoizedState=_e,M.childLanes=Cy(h,ee,_),m.memoizedState=Gf,Wn(h.child,M)):(Ae(m),_=h.child,h=_.sibling,_=qs(_,{mode:"visible",children:M.children}),_.return=m,_.sibling=null,h!==null&&(ee=m.deletions,ee===null?(m.deletions=[h],m.flags|=16):ee.push(h)),m.child=_,m.memoizedState=null,_)}function Fg(h,m){return m=su({mode:"visible",children:m},h.mode),m.return=h,h.child=m}function su(h,m){return h=t(22,h,null,m),h.lanes=0,h}function Af(h,m,_){return pa(m,h.child,null,_),h=Fg(m,m.pendingProps.children),h.flags|=2,m.memoizedState=null,h}function _1(h,m,_){h.lanes|=m;var M=h.alternate;M!==null&&(M.lanes|=m),oe(h.return,m,_)}function Gd(h,m,_,M,F,H){var ee=h.memoizedState;ee===null?h.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:M,tail:_,tailMode:F,treeForkCount:H}:(ee.isBackwards=m,ee.rendering=null,ee.renderingStartTime=0,ee.last=M,ee.tail=_,ee.tailMode=F,ee.treeForkCount=H)}function Ry(h,m,_){var M=m.pendingProps,F=M.revealOrder,H=M.tail;M=M.children;var ee=ai.current,_e=(ee&2)!==0;if(_e?(ee=ee&1|2,m.flags|=128):ee&=1,x(ai,ee),Ie(h,m,M,_),M=jn?nm:0,!_e&&h!==null&&(h.flags&128)!==0)e:for(h=m.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&_1(h,_,m);else if(h.tag===19)_1(h,_,m);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===m)break e;for(;h.sibling===null;){if(h.return===null||h.return===m)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}switch(F){case"forwards":for(_=m.child,F=null;_!==null;)h=_.alternate,h!==null&&Lt(h)===null&&(F=_),_=_.sibling;_=F,_===null?(F=m.child,m.child=null):(F=_.sibling,_.sibling=null),Gd(m,!1,F,_,H,M);break;case"backwards":case"unstable_legacy-backwards":for(_=null,F=m.child,m.child=null;F!==null;){if(h=F.alternate,h!==null&&Lt(h)===null){m.child=F;break}h=F.sibling,F.sibling=_,_=F,F=h}Gd(m,!0,_,null,H,M);break;case"together":Gd(m,!1,null,null,void 0,M);break;default:m.memoizedState=null}return m.child}function El(h,m,_){if(h!==null&&(m.dependencies=h.dependencies),Cc|=m.lanes,(_&m.childLanes)===0)if(h!==null){if(at(h,m,_,!1),(_&m.childLanes)===0)return null}else return null;if(h!==null&&m.child!==h.child)throw Error(i(153));if(m.child!==null){for(h=m.child,_=qs(h,h.pendingProps),m.child=_,_.return=m;h.sibling!==null;)h=h.sibling,_=_.sibling=qs(h,h.pendingProps),_.return=m;_.sibling=null}return m.child}function Op(h,m){return(h.lanes&m)!==0?!0:(h=h.dependencies,!!(h!==null&&Tt(h)))}function Py(h,m,_){switch(m.tag){case 3:pe(m,m.stateNode.containerInfo),Fe(m,Gr,h.memoizedState.cache),De();break;case 27:case 5:Ee(m);break;case 4:pe(m,m.stateNode.containerInfo);break;case 10:Fe(m,m.type,m.memoizedProps.value);break;case 31:if(m.memoizedState!==null)return m.flags|=128,He(m),null;break;case 13:var M=m.memoizedState;if(M!==null)return M.dehydrated!==null?(Ae(m),m.flags|=128,null):(_&m.child.childLanes)!==0?Iy(h,m,_):(Ae(m),h=El(h,m,_),h!==null?h.sibling:null);Ae(m);break;case 19:var F=(h.flags&128)!==0;if(M=(_&m.childLanes)!==0,M||(at(h,m,_,!1),M=(_&m.childLanes)!==0),F){if(M)return Ry(h,m,_);m.flags|=128}if(F=m.memoizedState,F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),x(ai,ai.current),M)break;return null;case 22:return m.lanes=0,ri(h,m,_,m.pendingProps);case 24:Fe(m,Gr,h.memoizedState.cache)}return El(h,m,_)}function Ny(h,m,_){if(h!==null)if(h.memoizedProps!==m.pendingProps)Fr=!0;else{if(!Op(h,_)&&(m.flags&128)===0)return Fr=!1,Py(h,m,_);Fr=(h.flags&131072)!==0}else Fr=!1,jn&&(m.flags&1048576)!==0&&Z(m,nm,m.index);switch(m.lanes=0,m.tag){case 16:e:{var M=m.pendingProps;if(h=nn(m.elementType),m.type=h,typeof h=="function")Mf(h)?(M=Sl(h,M),m.tag=1,m=Ef(null,m,h,M,_)):(m.tag=0,m=hc(null,m,h,M,_));else{if(h!=null){var F=h.$$typeof;if(F===rh){m.tag=11,m=We(null,m,h,M,_);break e}else if(F===t0){m.tag=14,m=Nt(null,m,h,M,_);break e}}throw m=p(h)||h,Error(i(306,m,""))}}return m;case 0:return hc(h,m,m.type,m.pendingProps,_);case 1:return M=m.type,F=Sl(M,m.pendingProps),Ef(h,m,M,F,_);case 3:e:{if(pe(m,m.stateNode.containerInfo),h===null)throw Error(i(387));var H=m.pendingProps;F=m.memoizedState,M=F.element,Ni(h,m),hs(m,H,null,_);var ee=m.memoizedState;if(H=ee.cache,Fe(m,Gr,H),H!==F.cache&&yt(m,[Gr],_,!0),qi(),H=ee.element,Vr&&F.isDehydrated)if(F={element:H,isDehydrated:!1,cache:ee.cache},m.updateQueue.baseState=F,m.memoizedState=F,m.flags&256){m=x1(h,m,H,_);break e}else if(H!==M){M=ce(Error(i(424)),m),Me(M),m=x1(h,m,H,_);break e}else for(Vr&&(Hr=tS(m.stateNode.containerInfo),Li=m,jn=!0,zl=null,$a=!0),_=Cb(m,null,H,_),m.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(De(),H===M){m=El(h,m,_);break e}Ie(h,m,H,_)}m=m.child}return m;case 26:if(Ao)return ps(h,m),h===null?(_=vb(m.type,null,m.pendingProps,null))?m.memoizedState=_:jn||(m.stateNode=d0(m.type,m.pendingProps,ha.current,m)):m.memoizedState=vb(m.type,h.memoizedProps,m.pendingProps,h.memoizedState),null;case 27:if(Di)return Ee(m),h===null&&Di&&jn&&(M=m.stateNode=h0(m.type,m.pendingProps,ha.current,Zi.current,!1),Li=m,$a=!0,Hr=fb(m.type,M,Hr)),Ie(h,m,m.pendingProps.children,_),ps(h,m),h===null&&(m.flags|=4194304),m.child;case 5:return h===null&&jn&&(mS(m.type,m.pendingProps,Zi.current),(F=M=Hr)&&(M=iS(M,m.type,m.pendingProps,$a),M!==null?(m.stateNode=M,Li=m,Hr=eS(M),$a=!1,F=!0):F=!1),F||me(m)),Ee(m),F=m.type,H=m.pendingProps,ee=h!==null?h.memoizedProps:null,M=H.children,Wa(F,H)?M=null:ee!==null&&Wa(F,ee)&&(m.flags|=32),m.memoizedState!==null&&(F=jt(h,m,Yt,null,null,_),di?kf._currentValue=F:kf._currentValue2=F),ps(h,m),Ie(h,m,M,_),m.child;case 6:return h===null&&jn&&(gb(m.pendingProps,Zi.current),(h=_=Hr)&&(_=aS(_,m.pendingProps,$a),_!==null?(m.stateNode=_,Li=m,Hr=null,h=!0):h=!1),h||me(m)),null;case 13:return Iy(h,m,_);case 4:return pe(m,m.stateNode.containerInfo),M=m.pendingProps,h===null?m.child=pa(m,null,M,_):Ie(h,m,M,_),m.child;case 11:return We(h,m,m.type,m.pendingProps,_);case 7:return Ie(h,m,m.pendingProps,_),m.child;case 8:return Ie(h,m,m.pendingProps.children,_),m.child;case 12:return Ie(h,m,m.pendingProps.children,_),m.child;case 10:return M=m.pendingProps,Fe(m,m.type,M.value),Ie(h,m,M.children,_),m.child;case 9:return F=m.type._context,M=m.pendingProps.children,ct(m),F=ae(F),M=M(F),m.flags|=1,Ie(h,m,M,_),m.child;case 14:return Nt(h,m,m.type,m.pendingProps,_);case 15:return _n(h,m,m.type,m.pendingProps,_);case 19:return Ry(h,m,_);case 31:return Jo(h,m,_);case 22:return ri(h,m,_,m.pendingProps);case 24:return ct(m),M=ae(Gr),h===null?(F=pt(),F===null&&(F=On,H=ke(),F.pooledCache=H,H.refCount++,H!==null&&(F.pooledCacheLanes|=_),F=H),m.memoizedState={parent:M,cache:F},kr(m),Fe(m,Gr,F)):((h.lanes&_)!==0&&(Ni(h,m),hs(m,null,null,_),qi()),F=h.memoizedState,H=m.memoizedState,F.parent!==M?(F={parent:M,cache:M},m.memoizedState=F,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=F),Fe(m,Gr,M)):(M=H.cache,Fe(m,Gr,M),M!==F.cache&&yt(m,[Gr],_,!0))),Ie(h,m,m.pendingProps.children,_),m.child;case 29:throw m.pendingProps}throw Error(i(156,m.tag))}function vo(h){h.flags|=4}function Dp(h){Ws&&(h.flags|=8)}function S1(h,m){if(h!==null&&h.child===m.child)return!1;if((m.flags&16)!==0)return!0;for(h=m.child;h!==null;){if((h.flags&8218)!==0||(h.subtreeFlags&8218)!==0)return!0;h=h.sibling}return!1}function Oy(h,m,_,M){if(Hn)for(_=m.child;_!==null;){if(_.tag===5||_.tag===6)Xp(h,_.stateNode);else if(!(_.tag===4||Di&&_.tag===27)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===m)break;for(;_.sibling===null;){if(_.return===null||_.return===m)return;_=_.return}_.sibling.return=_.return,_=_.sibling}else if(Ws)for(var F=m.child;F!==null;){if(F.tag===5){var H=F.stateNode;_&&M&&(H=K1(H,F.type,F.memoizedProps)),Xp(h,H)}else if(F.tag===6)H=F.stateNode,_&&M&&(H=cb(H,F.memoizedProps)),Xp(h,H);else if(F.tag!==4){if(F.tag===22&&F.memoizedState!==null)H=F.child,H!==null&&(H.return=F),Oy(h,F,!0,!0);else if(F.child!==null){F.child.return=F,F=F.child;continue}}if(F===m)break;for(;F.sibling===null;){if(F.return===null||F.return===m)return;F=F.return}F.sibling.return=F.return,F=F.sibling}}function w1(h,m,_,M){var F=!1;if(Ws)for(var H=m.child;H!==null;){if(H.tag===5){var ee=H.stateNode;_&&M&&(ee=K1(ee,H.type,H.memoizedProps)),ob(h,ee)}else if(H.tag===6)ee=H.stateNode,_&&M&&(ee=cb(ee,H.memoizedProps)),ob(h,ee);else if(H.tag!==4){if(H.tag===22&&H.memoizedState!==null)F=H.child,F!==null&&(F.return=H),w1(h,H,!0,!0),F=!0;else if(H.child!==null){H.child.return=H,H=H.child;continue}}if(H===m)break;for(;H.sibling===null;){if(H.return===null||H.return===m)return F;H=H.return}H.sibling.return=H.return,H=H.sibling}return F}function E1(h,m){if(Ws&&S1(h,m)){h=m.stateNode;var _=h.containerInfo,M=sb();w1(M,m,!1,!1),h.pendingChildren=M,vo(m),Y1(_,M)}}function Dy(h,m,_,M){if(Hn)h.memoizedProps!==M&&vo(m);else if(Ws){var F=h.stateNode,H=h.memoizedProps;if((h=S1(h,m))||H!==M){var ee=Zi.current;H=X1(F,_,H,M,!h,null),H===F?m.stateNode=F:(Dp(m),ys(H,_,M,ee)&&vo(m),m.stateNode=H,h&&Oy(H,m,!1,!1))}else m.stateNode=F}}function Ha(h,m,_,M,F){if((h.mode&32)!==0&&(_===null?Yp(m,M):lh(m,_,M))){if(h.flags|=16777216,(F&335544128)===F||Yy(m,M))if(Xr(h.stateNode,m,M))h.flags|=8192;else if(Vn())h.flags|=8192;else throw Xa=jl,E0}else h.flags&=-16777217}function qd(h,m){if(_b(m)){if(h.flags|=16777216,!Sb(m))if(Vn())h.flags|=8192;else throw Xa=jl,E0}else h.flags&=-16777217}function Lp(h,m){m!==null&&(h.flags|=4),h.flags&16384&&(m=h.tag!==22?O():536870912,h.lanes|=m,vh|=m)}function Wd(h,m){if(!jn)switch(h.tailMode){case"hidden":m=h.tail;for(var _=null;m!==null;)m.alternate!==null&&(_=m),m=m.sibling;_===null?h.tail=null:_.sibling=null;break;case"collapsed":_=h.tail;for(var M=null;_!==null;)_.alternate!==null&&(M=_),_=_.sibling;M===null?m||h.tail===null?h.tail=null:h.tail.sibling=null:M.sibling=null}}function Pr(h){var m=h.alternate!==null&&h.alternate.child===h.child,_=0,M=0;if(m)for(var F=h.child;F!==null;)_|=F.lanes|F.childLanes,M|=F.subtreeFlags&65011712,M|=F.flags&65011712,F.return=h,F=F.sibling;else for(F=h.child;F!==null;)_|=F.lanes|F.childLanes,M|=F.subtreeFlags,M|=F.flags,F.return=h,F=F.sibling;return h.subtreeFlags|=M,h.childLanes=_,m}function A1(h,m,_){var M=m.pendingProps;switch(de(m),m.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pr(m),null;case 1:return Pr(m),null;case 3:return _=m.stateNode,M=null,h!==null&&(M=h.memoizedState.cache),m.memoizedState.cache!==M&&(m.flags|=2048),Ze(Gr),ye(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(h===null||h.child===null)&&(Ue(m)?vo(m):h===null||h.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Re())),E1(h,m),Pr(m),null;case 26:if(Ao){var F=m.type,H=m.memoizedState;return h===null?(vo(m),H!==null?(Pr(m),qd(m,H)):(Pr(m),Ha(m,F,null,M,_))):H?H!==h.memoizedState?(vo(m),Pr(m),qd(m,H)):(Pr(m),m.flags&=-16777217):(H=h.memoizedProps,Hn?H!==M&&vo(m):Dy(h,m,F,M),Pr(m),Ha(m,F,H,M,_)),null}case 27:if(Di){if(Xe(m),_=ha.current,F=m.type,h!==null&&m.stateNode!=null)Hn?h.memoizedProps!==M&&vo(m):Dy(h,m,F,M);else{if(!M){if(m.stateNode===null)throw Error(i(166));return Pr(m),null}h=Zi.current,Ue(m)?qe(m,h):(h=h0(F,M,_,h,!0),m.stateNode=h,vo(m))}return Pr(m),null}case 5:if(Xe(m),F=m.type,h!==null&&m.stateNode!=null)Dy(h,m,F,M);else{if(!M){if(m.stateNode===null)throw Error(i(166));return Pr(m),null}if(H=Zi.current,Ue(m))qe(m,H),dS(m.stateNode,F,M,H)&&(m.flags|=64);else{var ee=$y(F,M,ha.current,H,m);Dp(m),Oy(ee,m,!1,!1),m.stateNode=ee,ys(ee,F,M,H)&&vo(m)}}return Pr(m),Ha(m,m.type,h===null?null:h.memoizedProps,m.pendingProps,_),null;case 6:if(h&&m.stateNode!=null)_=h.memoizedProps,Hn?_!==M&&vo(m):Ws&&(_!==M?(h=ha.current,_=Zi.current,Dp(m),m.stateNode=Sc(M,h,_,m)):m.stateNode=h.stateNode);else{if(typeof M!="string"&&m.stateNode===null)throw Error(i(166));if(h=ha.current,_=Zi.current,Ue(m)){if(!Vr)throw Error(i(176));if(h=m.stateNode,_=m.memoizedProps,M=null,F=Li,F!==null)switch(F.tag){case 27:case 5:M=F.memoizedProps}GC(h,_,m,M)||me(m,!0)}else Dp(m),m.stateNode=Sc(M,h,_,m)}return Pr(m),null;case 31:if(_=m.memoizedState,h===null||h.memoizedState!==null){if(M=Ue(m),_!==null){if(h===null){if(!M)throw Error(i(318));if(!Vr)throw Error(i(556));if(h=m.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(557));hb(h,m)}else De(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Pr(m),h=!1}else _=Re(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=_),h=!0;if(!h)return m.flags&256?(At(m),m):(At(m),null);if((m.flags&128)!==0)throw Error(i(558))}return Pr(m),null;case 13:if(M=m.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(F=Ue(m),M!==null&&M.dehydrated!==null){if(h===null){if(!F)throw Error(i(318));if(!Vr)throw Error(i(344));if(F=m.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(i(317));lS(F,m)}else De(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Pr(m),F=!1}else F=Re(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=F),F=!0;if(!F)return m.flags&256?(At(m),m):(At(m),null)}return At(m),(m.flags&128)!==0?(m.lanes=_,m):(_=M!==null,h=h!==null&&h.memoizedState!==null,_&&(M=m.child,F=null,M.alternate!==null&&M.alternate.memoizedState!==null&&M.alternate.memoizedState.cachePool!==null&&(F=M.alternate.memoizedState.cachePool.pool),H=null,M.memoizedState!==null&&M.memoizedState.cachePool!==null&&(H=M.memoizedState.cachePool.pool),H!==F&&(M.flags|=2048)),_!==h&&_&&(m.child.flags|=8192),Lp(m,m.updateQueue),Pr(m),null);case 4:return ye(),E1(h,m),h===null&&_r(m.stateNode.containerInfo),Pr(m),null;case 10:return Ze(m.type),Pr(m),null;case 19:if(y(ai),M=m.memoizedState,M===null)return Pr(m),null;if(F=(m.flags&128)!==0,H=M.rendering,H===null)if(F)Wd(M,!1);else{if(Zr!==0||h!==null&&(h.flags&128)!==0)for(h=m.child;h!==null;){if(H=Lt(h),H!==null){for(m.flags|=128,Wd(M,!1),h=H.updateQueue,m.updateQueue=h,Lp(m,h),m.subtreeFlags=0,h=_,_=m.child;_!==null;)Kg(_,h),_=_.sibling;return x(ai,ai.current&1|2),jn&&fe(m,M.treeForkCount),m.child}h=h.sibling}M.tail!==null&&Aa()>Ru&&(m.flags|=128,F=!0,Wd(M,!1),m.lanes=4194304)}else{if(!F)if(h=Lt(H),h!==null){if(m.flags|=128,F=!0,h=h.updateQueue,m.updateQueue=h,Lp(m,h),Wd(M,!0),M.tail===null&&M.tailMode==="hidden"&&!H.alternate&&!jn)return Pr(m),null}else 2*Aa()-M.renderingStartTime>Ru&&_!==536870912&&(m.flags|=128,F=!0,Wd(M,!1),m.lanes=4194304);M.isBackwards?(H.sibling=m.child,m.child=H):(h=M.last,h!==null?h.sibling=H:m.child=H,M.last=H)}return M.tail!==null?(h=M.tail,M.rendering=h,M.tail=h.sibling,M.renderingStartTime=Aa(),h.sibling=null,_=ai.current,x(ai,F?_&1|2:_&1),jn&&fe(m,M.treeForkCount),h):(Pr(m),null);case 22:case 23:return At(m),te(),M=m.memoizedState!==null,h!==null?h.memoizedState!==null!==M&&(m.flags|=8192):M&&(m.flags|=8192),M?(_&536870912)!==0&&(m.flags&128)===0&&(Pr(m),m.subtreeFlags&6&&(m.flags|=8192)):Pr(m),_=m.updateQueue,_!==null&&Lp(m,_.retryQueue),_=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),M=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(M=m.memoizedState.cachePool.pool),M!==_&&(m.flags|=2048),h!==null&&y(Su),null;case 24:return _=null,h!==null&&(_=h.memoizedState.cache),m.memoizedState.cache!==_&&(m.flags|=2048),Ze(Gr),Pr(m),null;case 25:return null;case 30:return null}throw Error(i(156,m.tag))}function Ly(h,m){switch(de(m),m.tag){case 1:return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 3:return Ze(Gr),ye(),h=m.flags,(h&65536)!==0&&(h&128)===0?(m.flags=h&-65537|128,m):null;case 26:case 27:case 5:return Xe(m),null;case 31:if(m.memoizedState!==null){if(At(m),m.alternate===null)throw Error(i(340));De()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 13:if(At(m),h=m.memoizedState,h!==null&&h.dehydrated!==null){if(m.alternate===null)throw Error(i(340));De()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 19:return y(ai),null;case 4:return ye(),null;case 10:return Ze(m.type),null;case 22:case 23:return At(m),te(),h!==null&&y(Su),h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 24:return Ze(Gr),null;case 25:return null;default:return null}}function T1(h,m){switch(de(m),m.tag){case 3:Ze(Gr),ye();break;case 26:case 27:case 5:Xe(m);break;case 4:ye();break;case 31:m.memoizedState!==null&&At(m);break;case 13:At(m);break;case 19:y(ai);break;case 10:Ze(m.type);break;case 22:case 23:At(m),te(),h!==null&&y(Su);break;case 24:Ze(Gr)}}function Al(h,m){try{var _=m.updateQueue,M=_!==null?_.lastEffect:null;if(M!==null){var F=M.next;_=F;do{if((_.tag&h)===h){M=void 0;var H=_.create,ee=_.inst;M=H(),ee.destroy=M}_=_.next}while(_!==F)}}catch(_e){pn(m,m.return,_e)}}function Tl(h,m,_){try{var M=m.updateQueue,F=M!==null?M.lastEffect:null;if(F!==null){var H=F.next;M=H;do{if((M.tag&h)===h){var ee=M.inst,_e=ee.destroy;if(_e!==void 0){ee.destroy=void 0,F=m;var Ye=_,xt=_e;try{xt()}catch(Rt){pn(F,Ye,Rt)}}}M=M.next}while(M!==H)}}catch(Rt){pn(m,m.return,Rt)}}function $d(h){var m=h.updateQueue;if(m!==null){var _=h.stateNode;try{ua(m,_)}catch(M){pn(h,h.return,M)}}}function zg(h,m,_){_.props=Sl(h.type,h.memoizedProps),_.state=h.memoizedState;try{_.componentWillUnmount()}catch(M){pn(h,m,M)}}function Xd(h,m){try{var _=h.ref;if(_!==null){switch(h.tag){case 26:case 27:case 5:var M=ah(h.stateNode);break;case 30:M=h.stateNode;break;default:M=h.stateNode}typeof _=="function"?h.refCleanup=_(M):_.current=M}}catch(F){pn(h,m,F)}}function Ea(h,m){var _=h.ref,M=h.refCleanup;if(_!==null)if(typeof M=="function")try{M()}catch(F){pn(h,m,F)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof _=="function")try{_(null)}catch(F){pn(h,m,F)}else _.current=null}function Tf(h){var m=h.type,_=h.memoizedProps,M=h.stateNode;try{j1(M,m,_,h)}catch(F){pn(h,h.return,F)}}function kp(h,m,_){try{B1(h.stateNode,h.type,_,m,h)}catch(M){pn(h,h.return,M)}}function ky(h){return h.tag===5||h.tag===3||(Ao?h.tag===26:!1)||(Di?h.tag===27&&Uf(h.type):!1)||h.tag===4}function pc(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||ky(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(Di&&h.tag===27&&Uf(h.type)||h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function jg(h,m,_){var M=h.tag;if(M===5||M===6)h=h.stateNode,m?H1(_,h,m):nb(_,h);else if(M!==4&&(Di&&M===27&&Uf(h.type)&&(_=h.stateNode,m=null),h=h.child,h!==null))for(jg(h,m,_),h=h.sibling;h!==null;)jg(h,m,_),h=h.sibling}function Up(h,m,_){var M=h.tag;if(M===5||M===6)h=h.stateNode,m?V1(_,h,m):tb(_,h);else if(M!==4&&(Di&&M===27&&Uf(h.type)&&(_=h.stateNode),h=h.child,h!==null))for(Up(h,m,_),h=h.sibling;h!==null;)Up(h,m,_),h=h.sibling}function Uy(h,m,_){h=h.containerInfo;try{lb(h,_)}catch(M){pn(m,m.return,M)}}function M1(h){var m=h.stateNode,_=h.memoizedProps;try{Si(h.type,_,m,h)}catch(M){pn(h,h.return,M)}}function jC(h,m){for(n0(h.containerInfo),mi=m;mi!==null;)if(h=mi,m=h.child,(h.subtreeFlags&1028)!==0&&m!==null)m.return=h,mi=m;else for(;mi!==null;){h=mi;var _=h.alternate;switch(m=h.flags,h.tag){case 0:if((m&4)!==0&&(m=h.updateQueue,m=m!==null?m.events:null,m!==null))for(var M=0;M<m.length;M++){var F=m[M];F.ref.impl=F.nextImpl}break;case 11:case 15:break;case 1:if((m&1024)!==0&&_!==null){m=void 0,M=h,F=_.memoizedProps,_=_.memoizedState;var H=M.stateNode;try{var ee=Sl(M.type,F);m=H.getSnapshotBeforeUpdate(ee,_),H.__reactInternalSnapshotBeforeUpdate=m}catch(_e){pn(M,M.return,_e)}}break;case 3:(m&1024)!==0&&Hn&&ab(h.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(i(163))}if(m=h.sibling,m!==null){m.return=h.return,mi=m;break}mi=h.return}}function C1(h,m,_){var M=_.flags;switch(_.tag){case 0:case 11:case 15:Ga(h,_),M&4&&Al(5,_);break;case 1:if(Ga(h,_),M&4)if(h=_.stateNode,m===null)try{h.componentDidMount()}catch(ee){pn(_,_.return,ee)}else{var F=Sl(_.type,m.memoizedProps);m=m.memoizedState;try{h.componentDidUpdate(F,m,h.__reactInternalSnapshotBeforeUpdate)}catch(ee){pn(_,_.return,ee)}}M&64&&$d(_),M&512&&Xd(_,_.return);break;case 3:if(Ga(h,_),M&64&&(M=_.updateQueue,M!==null)){if(h=null,_.child!==null)switch(_.child.tag){case 27:case 5:h=ah(_.child.stateNode);break;case 1:h=_.child.stateNode}try{ua(M,h)}catch(ee){pn(_,_.return,ee)}}break;case 27:Di&&m===null&&M&4&&M1(_);case 26:case 5:if(Ga(h,_),m===null){if(M&4)Tf(_);else if(M&64){h=_.type,m=_.memoizedProps,F=_.stateNode;try{uS(F,h,m,_)}catch(ee){pn(_,_.return,ee)}}}M&512&&Xd(_,_.return);break;case 12:Ga(h,_);break;case 31:Ga(h,_),M&4&&bo(h,_);break;case 13:Ga(h,_),M&4&&zp(h,_),M&64&&(M=_.memoizedState,M!==null&&(M=M.dehydrated,M!==null&&(_=BC.bind(null,_),c0(M,_))));break;case 22:if(M=_.memoizedState!==null||si,!M){m=m!==null&&m.memoizedState!==null||oi,F=si;var H=oi;si=M,(oi=m)&&!H?_o(h,_,(_.subtreeFlags&8772)!==0):Ga(h,_),si=F,oi=H}break;case 30:break;default:Ga(h,_)}}function Fy(h){var m=h.alternate;m!==null&&(h.alternate=null,Fy(m)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(m=h.stateNode,m!==null&&r0(m)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function yo(h,m,_){for(_=_.child;_!==null;)Fp(h,m,_),_=_.sibling}function Fp(h,m,_){if(_s&&typeof _s.onCommitFiberUnmount=="function")try{_s.onCommitFiberUnmount(jf,_)}catch{}switch(_.tag){case 26:if(Ao){oi||Ea(_,m),yo(h,m,_),_.memoizedState?xu(_.memoizedState):_.stateNode&&xb(_.stateNode);break}case 27:if(Di){oi||Ea(_,m);var M=Kr,F=gi;Uf(_.type)&&(Kr=_.stateNode,gi=!1),yo(h,m,_),Ki(_.stateNode),Kr=M,gi=F;break}case 5:oi||Ea(_,m);case 6:if(Hn){if(M=Kr,F=gi,Kr=null,yo(h,m,_),Kr=M,gi=F,Kr!==null)if(gi)try{rb(Kr,_.stateNode)}catch(H){pn(_,m,H)}else try{G1(Kr,_.stateNode)}catch(H){pn(_,m,H)}}else yo(h,m,_);break;case 18:Hn&&Kr!==null&&(gi?u0(Kr,_.stateNode):mb(Kr,_.stateNode));break;case 4:Hn?(M=Kr,F=gi,Kr=_.stateNode.containerInfo,gi=!0,yo(h,m,_),Kr=M,gi=F):(Ws&&Uy(_.stateNode,_,sb()),yo(h,m,_));break;case 0:case 11:case 14:case 15:Tl(2,_,m),oi||Tl(4,_,m),yo(h,m,_);break;case 1:oi||(Ea(_,m),M=_.stateNode,typeof M.componentWillUnmount=="function"&&zg(_,m,M)),yo(h,m,_);break;case 21:yo(h,m,_);break;case 22:oi=(M=oi)||_.memoizedState!==null,yo(h,m,_),oi=M;break;default:yo(h,m,_)}}function bo(h,m){if(Vr&&m.memoizedState===null&&(h=m.alternate,h!==null&&(h=h.memoizedState,h!==null))){h=h.dehydrated;try{qC(h)}catch(_){pn(m,m.return,_)}}}function zp(h,m){if(Vr&&m.memoizedState===null&&(h=m.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{WC(h)}catch(_){pn(m,m.return,_)}}function xo(h){switch(h.tag){case 31:case 13:case 19:var m=h.stateNode;return m===null&&(m=h.stateNode=new Rb),m;case 22:return h=h.stateNode,m=h._retryCache,m===null&&(m=h._retryCache=new Rb),m;default:throw Error(i(435,h.tag))}}function mc(h,m){var _=xo(h);m.forEach(function(M){if(!_.has(M)){_.add(M);var F=VC.bind(null,h,M);M.then(F,F)}})}function Xi(h,m){var _=m.deletions;if(_!==null)for(var M=0;M<_.length;M++){var F=_[M],H=h,ee=m;if(Hn){var _e=ee;e:for(;_e!==null;){switch(_e.tag){case 27:if(Di){if(Uf(_e.type)){Kr=_e.stateNode,gi=!1;break e}break}case 5:Kr=_e.stateNode,gi=!1;break e;case 3:case 4:Kr=_e.stateNode.containerInfo,gi=!0;break e}_e=_e.return}if(Kr===null)throw Error(i(160));Fp(H,ee,F),Kr=null,gi=!1}else Fp(H,ee,F);H=F.alternate,H!==null&&(H.return=null),F.return=null}if(m.subtreeFlags&13886)for(m=m.child;m!==null;)jp(m,h),m=m.sibling}function jp(h,m){var _=h.alternate,M=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:Xi(m,h),Yi(h),M&4&&(Tl(3,h,h.return),Al(3,h),Tl(5,h,h.return));break;case 1:Xi(m,h),Yi(h),M&512&&(oi||_===null||Ea(_,_.return)),M&64&&si&&(h=h.updateQueue,h!==null&&(M=h.callbacks,M!==null&&(_=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=_===null?M:_.concat(M))));break;case 26:if(Ao){var F=gr;if(Xi(m,h),Yi(h),M&512&&(oi||_===null||Ea(_,_.return)),M&4){M=_!==null?_.memoizedState:null;var H=h.memoizedState;_===null?H===null?h.stateNode===null?h.stateNode=gS(F,h.type,h.memoizedProps,h):bb(F,h.type,h.stateNode):h.stateNode=yb(F,H,h.memoizedProps):M!==H?(M===null?_.stateNode!==null&&xb(_.stateNode):xu(M),H===null?bb(F,h.type,h.stateNode):yb(F,H,h.memoizedProps)):H===null&&h.stateNode!==null&&kp(h,h.memoizedProps,_.memoizedProps)}break}case 27:if(Di){Xi(m,h),Yi(h),M&512&&(oi||_===null||Ea(_,_.return)),_!==null&&M&4&&kp(h,h.memoizedProps,_.memoizedProps);break}case 5:if(Xi(m,h),Yi(h),M&512&&(oi||_===null||Ea(_,_.return)),Hn){if(h.flags&32){F=h.stateNode;try{ib(F)}catch(Et){pn(h,h.return,Et)}}M&4&&h.stateNode!=null&&(F=h.memoizedProps,kp(h,F,_!==null?_.memoizedProps:F)),M&1024&&(dh=!0)}else Ws&&h.alternate!==null&&(h.alternate.stateNode=h.stateNode);break;case 6:if(Xi(m,h),Yi(h),M&4&&Hn){if(h.stateNode===null)throw Error(i(162));M=h.memoizedProps,_=_!==null?_.memoizedProps:M,F=h.stateNode;try{z1(F,_,M)}catch(Et){pn(h,h.return,Et)}}break;case 3:if(Ao?(vS(),F=gr,gr=Qp(m.containerInfo),Xi(m,h),gr=F):Xi(m,h),Yi(h),M&4){if(Hn&&Vr&&_!==null&&_.memoizedState.isDehydrated)try{fS(m.containerInfo)}catch(Et){pn(h,h.return,Et)}if(Ws){M=m.containerInfo,_=m.pendingChildren;try{lb(M,_)}catch(Et){pn(h,h.return,Et)}}}dh&&(dh=!1,Bg(h));break;case 4:Ao?(_=gr,gr=Qp(h.stateNode.containerInfo),Xi(m,h),Yi(h),gr=_):(Xi(m,h),Yi(h)),M&4&&Ws&&Uy(h.stateNode,h,h.stateNode.pendingChildren);break;case 12:Xi(m,h),Yi(h);break;case 31:Xi(m,h),Yi(h),M&4&&(M=h.updateQueue,M!==null&&(h.updateQueue=null,mc(h,M)));break;case 13:Xi(m,h),Yi(h),h.child.flags&8192&&h.memoizedState!==null!=(_!==null&&_.memoizedState!==null)&&(lm=Aa()),M&4&&(M=h.updateQueue,M!==null&&(h.updateQueue=null,mc(h,M)));break;case 22:F=h.memoizedState!==null;var ee=_!==null&&_.memoizedState!==null,_e=si,Ye=oi;if(si=_e||F,oi=Ye||ee,Xi(m,h),oi=Ye,si=_e,Yi(h),M&8192&&(m=h.stateNode,m._visibility=F?m._visibility&-2:m._visibility|1,F&&(_===null||ee||si||oi||ou(h)),Hn)){e:if(_=null,Hn)for(m=h;;){if(m.tag===5||Ao&&m.tag===26){if(_===null){ee=_=m;try{H=ee.stateNode,F?HC(H):W1(ee.stateNode,ee.memoizedProps)}catch(Et){pn(ee,ee.return,Et)}}}else if(m.tag===6){if(_===null){ee=m;try{var xt=ee.stateNode;F?q1(xt):$1(xt,ee.memoizedProps)}catch(Et){pn(ee,ee.return,Et)}}}else if(m.tag===18){if(_===null){ee=m;try{var Rt=ee.stateNode;F?hS(Rt):pS(ee.stateNode)}catch(Et){pn(ee,ee.return,Et)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===h)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break e;for(;m.sibling===null;){if(m.return===null||m.return===h)break e;_===m&&(_=null),m=m.return}_===m&&(_=null),m.sibling.return=m.return,m=m.sibling}}M&4&&(M=h.updateQueue,M!==null&&(_=M.retryQueue,_!==null&&(M.retryQueue=null,mc(h,_))));break;case 19:Xi(m,h),Yi(h),M&4&&(M=h.updateQueue,M!==null&&(h.updateQueue=null,mc(h,M)));break;case 30:break;case 21:break;default:Xi(m,h),Yi(h)}}function Yi(h){var m=h.flags;if(m&2){try{for(var _,M=h.return;M!==null;){if(ky(M)){_=M;break}M=M.return}if(Hn){if(_==null)throw Error(i(160));switch(_.tag){case 27:if(Di){var F=_.stateNode,H=pc(h);Up(h,H,F);break}case 5:var ee=_.stateNode;_.flags&32&&(ib(ee),_.flags&=-33);var _e=pc(h);Up(h,_e,ee);break;case 3:case 4:var Ye=_.stateNode.containerInfo,xt=pc(h);jg(h,xt,Ye);break;default:throw Error(i(161))}}}catch(Rt){pn(h,h.return,Rt)}h.flags&=-3}m&4096&&(h.flags&=-4097)}function Bg(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var m=h;Bg(m),m.tag===5&&m.flags&1024&&Zy(m.stateNode),h=h.sibling}}function Ga(h,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)C1(h,m.alternate,m),m=m.sibling}function ou(h){for(h=h.child;h!==null;){var m=h;switch(m.tag){case 0:case 11:case 14:case 15:Tl(4,m,m.return),ou(m);break;case 1:Ea(m,m.return);var _=m.stateNode;typeof _.componentWillUnmount=="function"&&zg(m,m.return,_),ou(m);break;case 27:Di&&Ki(m.stateNode);case 26:case 5:Ea(m,m.return),ou(m);break;case 22:m.memoizedState===null&&ou(m);break;case 30:ou(m);break;default:ou(m)}h=h.sibling}}function _o(h,m,_){for(_=_&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var M=m.alternate,F=h,H=m,ee=H.flags;switch(H.tag){case 0:case 11:case 15:_o(F,H,_),Al(4,H);break;case 1:if(_o(F,H,_),M=H,F=M.stateNode,typeof F.componentDidMount=="function")try{F.componentDidMount()}catch(xt){pn(M,M.return,xt)}if(M=H,F=M.updateQueue,F!==null){var _e=M.stateNode;try{var Ye=F.shared.hiddenCallbacks;if(Ye!==null)for(F.shared.hiddenCallbacks=null,F=0;F<Ye.length;F++)Fa(Ye[F],_e)}catch(xt){pn(M,M.return,xt)}}_&&ee&64&&$d(H),Xd(H,H.return);break;case 27:Di&&M1(H);case 26:case 5:_o(F,H,_),_&&M===null&&ee&4&&Tf(H),Xd(H,H.return);break;case 12:_o(F,H,_);break;case 31:_o(F,H,_),_&&ee&4&&bo(F,H);break;case 13:_o(F,H,_),_&&ee&4&&zp(F,H);break;case 22:H.memoizedState===null&&_o(F,H,_),Xd(H,H.return);break;case 30:break;default:_o(F,H,_)}m=m.sibling}}function lu(h,m){var _=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),h=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(h=m.memoizedState.cachePool.pool),h!==_&&(h!=null&&h.refCount++,_!=null&&et(_))}function zy(h,m){h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&et(h))}function Wr(h,m,_,M){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)Vg(h,m,_,M),m=m.sibling}function Vg(h,m,_,M){var F=m.flags;switch(m.tag){case 0:case 11:case 15:Wr(h,m,_,M),F&2048&&Al(9,m);break;case 1:Wr(h,m,_,M);break;case 3:Wr(h,m,_,M),F&2048&&(h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&et(h)));break;case 12:if(F&2048){Wr(h,m,_,M),h=m.stateNode;try{var H=m.memoizedProps,ee=H.id,_e=H.onPostCommit;typeof _e=="function"&&_e(ee,m.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(Ye){pn(m,m.return,Ye)}}else Wr(h,m,_,M);break;case 31:Wr(h,m,_,M);break;case 13:Wr(h,m,_,M);break;case 23:break;case 22:H=m.stateNode,ee=m.alternate,m.memoizedState!==null?H._visibility&2?Wr(h,m,_,M):Yd(h,m):H._visibility&2?Wr(h,m,_,M):(H._visibility|=2,ms(h,m,_,M,(m.subtreeFlags&10256)!==0||!1)),F&2048&&lu(ee,m);break;case 24:Wr(h,m,_,M),F&2048&&zy(m.alternate,m);break;default:Wr(h,m,_,M)}}function ms(h,m,_,M,F){for(F=F&&((m.subtreeFlags&10256)!==0||!1),m=m.child;m!==null;){var H=h,ee=m,_e=_,Ye=M,xt=ee.flags;switch(ee.tag){case 0:case 11:case 15:ms(H,ee,_e,Ye,F),Al(8,ee);break;case 23:break;case 22:var Rt=ee.stateNode;ee.memoizedState!==null?Rt._visibility&2?ms(H,ee,_e,Ye,F):Yd(H,ee):(Rt._visibility|=2,ms(H,ee,_e,Ye,F)),F&&xt&2048&&lu(ee.alternate,ee);break;case 24:ms(H,ee,_e,Ye,F),F&&xt&2048&&zy(ee.alternate,ee);break;default:ms(H,ee,_e,Ye,F)}m=m.sibling}}function Yd(h,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var _=h,M=m,F=M.flags;switch(M.tag){case 22:Yd(_,M),F&2048&&lu(M.alternate,M);break;case 24:Yd(_,M),F&2048&&zy(M.alternate,M);break;default:Yd(_,M)}m=m.sibling}}function Ml(h,m,_){if(h.subtreeFlags&Ks)for(h=h.child;h!==null;)cu(h,m,_),h=h.sibling}function cu(h,m,_){switch(h.tag){case 26:if(Ml(h,m,_),h.flags&Ks)if(h.memoizedState!==null)yS(_,gr,h.memoizedState,h.memoizedProps);else{var M=h.stateNode,F=h.type;h=h.memoizedProps,((m&335544128)===m||Yy(F,h))&&i0(_,M,F,h)}break;case 5:Ml(h,m,_),h.flags&Ks&&(M=h.stateNode,F=h.type,h=h.memoizedProps,((m&335544128)===m||Yy(F,h))&&i0(_,M,F,h));break;case 3:case 4:Ao?(M=gr,gr=Qp(h.stateNode.containerInfo),Ml(h,m,_),gr=M):Ml(h,m,_);break;case 22:h.memoizedState===null&&(M=h.alternate,M!==null&&M.memoizedState!==null?(M=Ks,Ks=16777216,Ml(h,m,_),Ks=M):Ml(h,m,_));break;default:Ml(h,m,_)}}function Hg(h){var m=h.alternate;if(m!==null&&(h=m.child,h!==null)){m.child=null;do m=h.sibling,h.sibling=null,h=m;while(h!==null)}}function Kd(h){var m=h.deletions;if((h.flags&16)!==0){if(m!==null)for(var _=0;_<m.length;_++){var M=m[_];mi=M,Hs(M,h)}Hg(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Gg(h),h=h.sibling}function Gg(h){switch(h.tag){case 0:case 11:case 15:Kd(h),h.flags&2048&&Tl(9,h,h.return);break;case 3:Kd(h);break;case 12:Kd(h);break;case 22:var m=h.stateNode;h.memoizedState!==null&&m._visibility&2&&(h.return===null||h.return.tag!==13)?(m._visibility&=-3,Bp(h)):Kd(h);break;default:Kd(h)}}function Bp(h){var m=h.deletions;if((h.flags&16)!==0){if(m!==null)for(var _=0;_<m.length;_++){var M=m[_];mi=M,Hs(M,h)}Hg(h)}for(h=h.child;h!==null;){switch(m=h,m.tag){case 0:case 11:case 15:Tl(8,m,m.return),Bp(m);break;case 22:_=m.stateNode,_._visibility&2&&(_._visibility&=-3,Bp(m));break;default:Bp(m)}h=h.sibling}}function Hs(h,m){for(;mi!==null;){var _=mi;switch(_.tag){case 0:case 11:case 15:Tl(8,_,m);break;case 23:case 22:if(_.memoizedState!==null&&_.memoizedState.cachePool!==null){var M=_.memoizedState.cachePool.pool;M!=null&&M.refCount++}break;case 24:et(_.memoizedState.cache)}if(M=_.child,M!==null)M.return=_,mi=M;else e:for(_=h;mi!==null;){M=mi;var F=M.sibling,H=M.return;if(Fy(M),M===_){mi=null;break e}if(F!==null){F.return=H,mi=F;break e}mi=H}}}function uu(h){var m=An(h);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(i(364));return m}if(h=hi(h),h===null)throw Error(i(362));return h.stateNode.current}function fu(h,m){var _=h.tag;switch(m.$$typeof){case Oo:if(h.type===m.value)return!0;break;case ph:e:{for(m=m.value,h=[h,0],_=0;_<h.length;){var M=h[_++],F=M.tag,H=h[_++],ee=m[H];if(F!==5&&F!==26&&F!==27||!yu(M)){for(;ee!=null&&fu(M,ee);)H++,ee=m[H];if(H===m.length){m=!0;break e}else for(M=M.child;M!==null;)h.push(M,H),M=M.sibling}}m=!1}return m;case mh:if((_===5||_===26||_===27)&&eb(h.stateNode,m.value))return!0;break;case Tu:if((_===5||_===6||_===26||_===27)&&(h=Kp(h),h!==null&&0<=h.indexOf(m.value)))return!0;break;case sm:if((_===5||_===26||_===27)&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===m.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function Zd(h){switch(h.$$typeof){case Oo:return"<"+(p(h.value)||"Unknown")+">";case ph:return":has("+(Zd(h)||"")+")";case mh:return'[role="'+h.value+'"]';case Tu:return'"'+h.value+'"';case sm:return'[data-testname="'+h.value+'"]';default:throw Error(i(365))}}function Qd(h,m){var _=[];h=[h,0];for(var M=0;M<h.length;){var F=h[M++],H=F.tag,ee=h[M++],_e=m[ee];if(H!==5&&H!==26&&H!==27||!yu(F)){for(;_e!=null&&fu(F,_e);)ee++,_e=m[ee];if(ee===m.length)_.push(F);else for(F=F.child;F!==null;)h.push(F,ee),F=F.sibling}}return _}function gs(h,m){if(!Oi)throw Error(i(363));h=uu(h),h=Qd(h,m),m=[],h=Array.from(h);for(var _=0;_<h.length;){var M=h[_++],F=M.tag;if(F===5||F===26||F===27)yu(M)||m.push(M.stateNode);else for(M=M.child;M!==null;)h.push(M),M=M.sibling}return m}function Br(){return(Un&2)!==0&&Bn!==0?Bn&-Bn:rn.T!==null?Le():oh()}function gc(){if(Ka===0)if((Bn&536870912)===0||jn){var h=zf;zf<<=1,(zf&3932160)===0&&(zf=262144),Ka=h}else Ka=536870912;return h=Ss.current,h!==null&&(h.flags|=32),Ka}function $r(h,m,_){(h===On&&(vr===2||vr===9)||h.cancelPendingCommit!==null)&&(ii(h,0),Il(h,Bn,Ka,!1)),k(h,_),((Un&2)===0||h!==On)&&(h===On&&((Un&2)===0&&(Iu|=_),Zr===4&&Il(h,Bn,Ka,!1)),It(h))}function el(h,m,_){if((Un&6)!==0)throw Error(i(327));var M=!_&&(m&127)===0&&(m&h.expiredLanes)===0||R(h,m),F=M?P1(h,m):Rl(h,m,!0),H=M;do{if(F===0){Mu&&!M&&Il(h,m,0,!1);break}else{if(_=h.current.alternate,H&&!I1(_)){F=Rl(h,m,!1),H=!1;continue}if(F===2){if(H=m,h.errorRecoveryDisabledLanes&H)var ee=0;else ee=h.pendingLanes&-536870913,ee=ee!==0?ee:ee&536870912?536870912:0;if(ee!==0){m=ee;e:{var _e=h;F=om;var Ye=Vr&&_e.current.memoizedState.isDehydrated;if(Ye&&(ii(_e,ee).flags|=256),ee=Rl(_e,ee,!1),ee!==2){if(Cu&&!Ye){_e.errorRecoveryDisabledLanes|=H,Iu|=H,F=4;break e}H=Es,Es=F,H!==null&&(Es===null?Es=H:Es.push.apply(Es,H))}F=ee}if(H=!1,F!==2)continue}}if(F===1){ii(h,0),Il(h,m,0,!0);break}e:{switch(M=h,H=F,H){case 0:case 1:throw Error(i(345));case 4:if((m&4194048)!==m)break;case 6:Il(M,m,Ka,!il);break e;case 2:Es=null;break;case 3:case 5:break;default:throw Error(i(329))}if((m&62914560)===m&&(F=lm+300-Aa(),10<F)){if(Il(M,m,Ka,!il),w(M,0,!0)!==0)break e;Gl=m,M.timeoutHandle=Xy(Cl.bind(null,M,_,Es,cm,T0,m,Ka,Iu,vh,il,H,"Throttled",-0,0),F);break e}Cl(M,_,Es,cm,T0,m,Ka,Iu,vh,il,H,null,-0,0)}}break}while(!0);It(h)}function Cl(h,m,_,M,F,H,ee,_e,Ye,xt,Rt,Et,zt,Sn){if(h.timeoutHandle=bs,Et=m.subtreeFlags,Et&8192||(Et&16785408)===16785408){Et=Ky(),cu(m,H,Et);var vi=(H&62914560)===H?lm-Aa():(H&4194048)===H?Wf-Aa():0;if(vi=F1(Et,vi),vi!==null){Gl=H,h.cancelPendingCommit=vi(Nl.bind(null,h,m,H,_,M,F,ee,_e,Ye,Rt,Et,null,zt,Sn)),Il(h,H,ee,!xt);return}}Nl(h,m,H,_,M,F,ee,_e,Ye)}function I1(h){for(var m=h;;){var _=m.tag;if((_===0||_===11||_===15)&&m.flags&16384&&(_=m.updateQueue,_!==null&&(_=_.stores,_!==null)))for(var M=0;M<_.length;M++){var F=_[M],H=F.getSnapshot;F=F.value;try{if(!pi(H(),F))return!1}catch{return!1}}if(_=m.child,m.subtreeFlags&16384&&_!==null)_.return=m,m=_;else{if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Il(h,m,_,M){m&=~gh,m&=~Iu,h.suspendedLanes|=m,h.pingedLanes&=~m,M&&(h.warmLanes|=m),M=h.expirationTimes;for(var F=m;0<F;){var H=31-xs(F),ee=1<<H;M[H]=-1,F&=~ee}_!==0&&P(h,_,m)}function qg(){return(Un&6)===0?(rt(0),!1):!0}function Wg(){if(Fn!==null){if(vr===0)var h=Fn.return;else h=Fn,nl=Or=null,ne(h),wu=null,Bf=0,h=Fn;for(;h!==null;)T1(h.alternate,h),h=h.return;Fn=null}}function ii(h,m){var _=h.timeoutHandle;_!==bs&&(h.timeoutHandle=bs,U1(_)),_=h.cancelPendingCommit,_!==null&&(h.cancelPendingCommit=null,_()),Gl=0,Wg(),On=h,Fn=_=qs(h.current,null),Bn=m,vr=0,wi=null,il=!1,Mu=R(h,m),Cu=!1,vh=Ka=gh=Iu=Cc=Zr=0,Es=om=null,T0=!1,(m&8)!==0&&(m|=m&32);var M=h.entangledLanes;if(M!==0)for(h=h.entanglements,M&=m;0<M;){var F=31-xs(M),H=1<<F;m|=h[F],M&=~H}return Hl=m,ds(),_}function Nr(h,m){Tn=null,rn.H=Ys,m===Ui||m===Po?(m=Kt(),vr=3):m===E0?(m=Kt(),vr=4):vr=m===Ya?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,wi=m,Fn===null&&(Zr=1,Sf(h,ce(m,h.current)))}function Vn(){var h=Ss.current;return h===null?!0:(Bn&4194048)===Bn?ws===null:(Bn&62914560)===Bn||(Bn&536870912)!==0?h===ws:!1}function vc(){var h=rn.H;return rn.H=Ys,h===null?Ys:h}function Gs(){var h=rn.A;return rn.A=hh,h}function Jd(){Zr=4,il||(Bn&4194048)!==Bn&&Ss.current!==null||(Mu=!0),(Cc&134217727)===0&&(Iu&134217727)===0||On===null||Il(On,Bn,Ka,!1)}function Rl(h,m,_){var M=Un;Un|=2;var F=vc(),H=Gs();(On!==h||Bn!==m)&&(cm=null,ii(h,m)),m=!1;var ee=Zr;e:do try{if(vr!==0&&Fn!==null){var _e=Fn,Ye=wi;switch(vr){case 8:Wg(),ee=6;break e;case 3:case 2:case 9:case 6:Ss.current===null&&(m=!0);var xt=vr;if(vr=0,wi=null,Pl(h,_e,Ye,xt),_&&Mu){ee=0;break e}break;default:xt=vr,vr=0,wi=null,Pl(h,_e,Ye,xt)}}R1(),ee=Zr;break}catch(Rt){Nr(h,Rt)}while(!0);return m&&h.shellSuspendCounter++,nl=Or=null,Un=M,rn.H=F,rn.A=H,Fn===null&&(On=null,Bn=0,ds()),ee}function R1(){for(;Fn!==null;)du(Fn)}function P1(h,m){var _=Un;Un|=2;var M=vc(),F=Gs();On!==h||Bn!==m?(cm=null,Ru=Aa()+500,ii(h,m)):Mu=R(h,m);e:do try{if(vr!==0&&Fn!==null){m=Fn;var H=wi;t:switch(vr){case 1:vr=0,wi=null,Pl(h,m,H,1);break;case 2:case 9:if(gt(H)){vr=0,wi=null,$g(m);break}m=function(){vr!==2&&vr!==9||On!==h||(vr=7),It(h)},H.then(m,m);break e;case 3:vr=7;break e;case 4:vr=5;break e;case 7:gt(H)?(vr=0,wi=null,$g(m)):(vr=0,wi=null,Pl(h,m,H,7));break;case 5:var ee=null;switch(Fn.tag){case 26:ee=Fn.memoizedState;case 5:case 27:var _e=Fn,Ye=_e.type,xt=_e.pendingProps;if(ee?Sb(ee):Xr(_e.stateNode,Ye,xt)){vr=0,wi=null;var Rt=_e.sibling;if(Rt!==null)Fn=Rt;else{var Et=_e.return;Et!==null?(Fn=Et,th(Et)):Fn=null}break t}}vr=0,wi=null,Pl(h,m,H,5);break;case 6:vr=0,wi=null,Pl(h,m,H,6);break;case 8:Wg(),Zr=6;break e;default:throw Error(i(462))}}eh();break}catch(zt){Nr(h,zt)}while(!0);return nl=Or=null,rn.H=M,rn.A=F,Un=_,Fn!==null?0:(On=null,Bn=0,ds(),Zr)}function eh(){for(;Fn!==null&&!xS();)du(Fn)}function du(h){var m=Ny(h.alternate,h,Hl);h.memoizedProps=h.pendingProps,m===null?th(h):Fn=m}function $g(h){var m=h,_=m.alternate;switch(m.tag){case 15:case 0:m=wf(_,m,m.pendingProps,m.type,void 0,Bn);break;case 11:m=wf(_,m,m.pendingProps,m.type.render,m.ref,Bn);break;case 5:ne(m);default:T1(_,m),m=Fn=Kg(m,Hl),m=Ny(_,m,Hl)}h.memoizedProps=h.pendingProps,m===null?th(h):Fn=m}function Pl(h,m,_,M){nl=Or=null,ne(m),wu=null,Bf=0;var F=m.return;try{if(le(h,F,m,_,Bn)){Zr=1,Sf(h,ce(_,h.current)),Fn=null;return}}catch(H){if(F!==null)throw Fn=F,H;Zr=1,Sf(h,ce(_,h.current)),Fn=null;return}m.flags&32768?(jn||M===1?h=!0:Mu||(Bn&536870912)!==0?h=!1:(il=h=!0,(M===2||M===9||M===3||M===6)&&(M=Ss.current,M!==null&&M.tag===13&&(M.flags|=16384))),hu(m,h)):th(m)}function th(h){var m=h;do{if((m.flags&32768)!==0){hu(m,il);return}h=m.return;var _=A1(m.alternate,m,Hl);if(_!==null){Fn=_;return}if(m=m.sibling,m!==null){Fn=m;return}Fn=m=h}while(m!==null);Zr===0&&(Zr=5)}function hu(h,m){do{var _=Ly(h.alternate,h);if(_!==null){_.flags&=32767,Fn=_;return}if(_=h.return,_!==null&&(_.flags|=32768,_.subtreeFlags=0,_.deletions=null),!m&&(h=h.sibling,h!==null)){Fn=h;return}Fn=h=_}while(h!==null);Zr=6,Fn=null}function Nl(h,m,_,M,F,H,ee,_e,Ye){h.cancelPendingCommit=null;do Dl();while(Ei!==0);if((Un&6)!==0)throw Error(i(327));if(m!==null){if(m===h.current)throw Error(i(177));if(H=m.lanes|m.childLanes,H|=Vf,U(h,_,H,ee,_e,Ye),h===On&&(Fn=On=null,Bn=0),$f=m,Rc=h,Gl=_,yh=H,M0=F,Pb=M,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,_i(em,function(){return Vp(),null})):(h.callbackNode=null,h.callbackPriority=0),M=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||M){M=rn.T,rn.T=null,F=Eo(),zn(2),ee=Un,Un|=4;try{jC(h,m,_)}finally{Un=ee,zn(F),rn.T=M}}Ei=1,yc(),Ol(),Xg()}}function yc(){if(Ei===1){Ei=0;var h=Rc,m=$f,_=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||_){_=rn.T,rn.T=null;var M=Eo();zn(2);var F=Un;Un|=4;try{jp(m,h),k1(h.containerInfo)}finally{Un=F,zn(M),rn.T=_}}h.current=m,Ei=2}}function Ol(){if(Ei===2){Ei=0;var h=Rc,m=$f,_=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||_){_=rn.T,rn.T=null;var M=Eo();zn(2);var F=Un;Un|=4;try{C1(h,m.alternate,m)}finally{Un=F,zn(M),rn.T=_}}Ei=3}}function Xg(){if(Ei===4||Ei===3){Ei=0,Eb();var h=Rc,m=$f,_=Gl,M=Pb;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?Ei=5:(Ei=0,$f=Rc=null,Yg(h,h.pendingLanes));var F=h.pendingLanes;if(F===0&&(Ic=null),B(_),m=m.stateNode,_s&&typeof _s.onCommitFiberRoot=="function")try{_s.onCommitFiberRoot(jf,m,void 0,(m.current.flags&128)===128)}catch{}if(M!==null){m=rn.T,F=Eo(),zn(2),rn.T=null;try{for(var H=h.onRecoverableError,ee=0;ee<M.length;ee++){var _e=M[ee];H(_e.value,{componentStack:_e.stack})}}finally{rn.T=m,zn(F)}}(Gl&3)!==0&&Dl(),It(h),F=h.pendingLanes,(_&261930)!==0&&(F&42)!==0?h===um?ar++:(ar=0,um=h):ar=0,Vr&&Zp(),rt(0)}}function Yg(h,m){(h.pooledCacheLanes&=m)===0&&(m=h.pooledCache,m!=null&&(h.pooledCache=null,et(m)))}function Dl(){return yc(),Ol(),Xg(),Vp()}function Vp(){if(Ei!==5)return!1;var h=Rc,m=yh;yh=0;var _=B(Gl),M=32>_?32:_;_=rn.T;var F=Eo();try{zn(M),rn.T=null,M=M0,M0=null;var H=Rc,ee=Gl;if(Ei=0,$f=Rc=null,Gl=0,(Un&6)!==0)throw Error(i(331));var _e=Un;if(Un|=4,Gg(H.current),Vg(H,H.current,ee,M),Un=_e,rt(0,!1),_s&&typeof _s.onPostCommitFiberRoot=="function")try{_s.onPostCommitFiberRoot(jf,H)}catch{}return!0}finally{zn(F),rn.T=_,Yg(h,m)}}function pu(h,m,_){m=ce(_,m),m=T(h.stateNode,m,2),h=ca(h,m,2),h!==null&&(k(h,2),It(h))}function pn(h,m,_){if(h.tag===3)pu(h,h,_);else for(;m!==null;){if(m.tag===3){pu(m,h,_);break}else if(m.tag===1){var M=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(Ic===null||!Ic.has(M))){h=ce(_,h),_=q(2),M=ca(m,_,2),M!==null&&(K(_,M,m,h),k(M,2),It(M));break}}m=m.return}}function nh(h,m,_){var M=h.pingCache;if(M===null){M=h.pingCache=new Zs;var F=new Set;M.set(m,F)}else F=M.get(m),F===void 0&&(F=new Set,M.set(m,F));F.has(_)||(Cu=!0,F.add(_),h=N1.bind(null,h,m,_),m.then(h,h))}function N1(h,m,_){var M=h.pingCache;M!==null&&M.delete(m),h.pingedLanes|=h.suspendedLanes&_,h.warmLanes&=~_,On===h&&(Bn&_)===_&&(Zr===4||Zr===3&&(Bn&62914560)===Bn&&300>Aa()-lm?(Un&2)===0&&ii(h,0):gh|=_,vh===Bn&&(vh=0)),It(h)}function O1(h,m){m===0&&(m=O()),h=Mr(h,m),h!==null&&(k(h,m),It(h))}function BC(h){var m=h.memoizedState,_=0;m!==null&&(_=m.retryLane),O1(h,_)}function VC(h,m){var _=0;switch(h.tag){case 31:case 13:var M=h.stateNode,F=h.memoizedState;F!==null&&(_=F.retryLane);break;case 19:M=h.stateNode;break;case 22:M=h.stateNode._retryCache;break;default:throw Error(i(314))}M!==null&&M.delete(m),O1(h,_)}function _i(h,m){return Jp(h,m)}function jy(h,m,_,M){this.tag=h,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mf(h){return h=h.prototype,!(!h||!h.isReactComponent)}function qs(h,m){var _=h.alternate;return _===null?(_=t(h.tag,m,h.key,h.mode),_.elementType=h.elementType,_.type=h.type,_.stateNode=h.stateNode,_.alternate=h,h.alternate=_):(_.pendingProps=m,_.type=h.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=h.flags&65011712,_.childLanes=h.childLanes,_.lanes=h.lanes,_.child=h.child,_.memoizedProps=h.memoizedProps,_.memoizedState=h.memoizedState,_.updateQueue=h.updateQueue,m=h.dependencies,_.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},_.sibling=h.sibling,_.index=h.index,_.ref=h.ref,_.refCleanup=h.refCleanup,_}function Kg(h,m){h.flags&=65011714;var _=h.alternate;return _===null?(h.childLanes=0,h.lanes=m,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=_.childLanes,h.lanes=_.lanes,h.child=_.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=_.memoizedProps,h.memoizedState=_.memoizedState,h.updateQueue=_.updateQueue,h.type=_.type,m=_.dependencies,h.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),h}function bc(h,m,_,M,F,H){var ee=0;if(M=h,typeof h=="function")Mf(h)&&(ee=1);else if(typeof h=="string")ee=Ao&&Di?f0(h,_,Zi.current)?26:wb(h)?27:5:Ao?f0(h,_,Zi.current)?26:5:Di&&wb(h)?27:5;else e:switch(h){case Wp:return h=t(31,_,m,F),h.elementType=Wp,h.lanes=H,h;case Pf:return So(_.children,F,H,m);case Nf:ee=8,F|=24;break;case Of:return h=t(12,_,m,F|2),h.elementType=Of,h.lanes=H,h;case e0:return h=t(13,_,m,F),h.elementType=e0,h.lanes=H,h;case xc:return h=t(19,_,m,F),h.elementType=xc,h.lanes=H,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case wo:ee=10;break e;case qp:ee=9;break e;case rh:ee=11;break e;case t0:ee=14;break e;case qa:ee=16,M=null;break e}ee=29,_=Error(i(130,h===null?"null":typeof h,"")),M=null}return m=t(ee,_,m,F),m.elementType=h,m.type=M,m.lanes=H,m}function So(h,m,_,M){return h=t(7,h,M,m),h.lanes=_,h}function By(h,m,_){return h=t(6,h,null,m),h.lanes=_,h}function Vy(h){var m=t(18,null,null,0);return m.stateNode=h,m}function Hy(h,m,_){return m=t(4,h.children!==null?h.children:[],h.key,m),m.lanes=_,m.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},m}function D1(h,m,_,M,F,H,ee,_e,Ye){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=bs,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=z(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=z(0),this.hiddenUpdates=z(null),this.identifierPrefix=M,this.onUncaughtError=F,this.onCaughtError=H,this.onRecoverableError=ee,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ye,this.incompleteTransitions=new Map}function mu(h,m,_,M,F,H,ee,_e,Ye,xt,Rt,Et){return h=new D1(h,m,_,ee,Ye,xt,Rt,Et,_e),m=1,H===!0&&(m|=24),H=t(3,null,null,m),h.current=H,H.stateNode=h,m=ke(),m.refCount++,h.pooledCache=m,m.refCount++,H.memoizedState={element:M,isDehydrated:_,cache:m},kr(H),h}function Zg(h){return h?(h=kl,h):kl}function Hp(h){var m=h._reactInternals;if(m===void 0)throw typeof h.render=="function"?Error(i(188)):(h=Object.keys(h).join(","),Error(i(268,h)));return h=o(m),h=h!==null?c(h):null,h===null?null:ah(h.stateNode)}function Gy(h,m,_,M,F,H){F=Zg(F),M.context===null?M.context=F:M.pendingContext=F,M=Gi(m),M.payload={element:_},H=H===void 0?null:H,H!==null&&(M.callback=H),_=ca(h,M,m),_!==null&&($r(_,h,m),zs(_,h,m))}function Cf(h,m){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var _=h.retryLane;h.retryLane=_!==0&&_<m?_:m}}function Gp(h,m){Cf(h,m),(h=h.alternate)&&Cf(h,m)}var Pn={},Qg=Eg,vs=Mse,Jg=Object.assign,If=Symbol.for("react.element"),Ll=Symbol.for("react.transitional.element"),Rf=Symbol.for("react.portal"),Pf=Symbol.for("react.fragment"),Nf=Symbol.for("react.strict_mode"),Of=Symbol.for("react.profiler"),qp=Symbol.for("react.consumer"),wo=Symbol.for("react.context"),rh=Symbol.for("react.forward_ref"),e0=Symbol.for("react.suspense"),xc=Symbol.for("react.suspense_list"),t0=Symbol.for("react.memo"),qa=Symbol.for("react.lazy"),Wp=Symbol.for("react.activity"),qy=Symbol.for("react.memo_cache_sentinel"),_c=Symbol.iterator,gu=Symbol.for("react.client.reference"),vu=Array.isArray,rn=Qg.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Wy=e.rendererVersion,$p=e.rendererPackageName,ih=e.extraDevToolsConfig,ah=e.getPublicInstance,L1=e.getRootHostContext,sh=e.getChildHostContext,n0=e.prepareForCommit,k1=e.resetAfterCommit,$y=e.createInstance;e.cloneMutableInstance;var Xp=e.appendInitialChild,ys=e.finalizeInitialChildren,Wa=e.shouldSetTextContent,Sc=e.createTextInstance;e.cloneMutableTextInstance;var Xy=e.scheduleTimeout,U1=e.cancelTimeout,bs=e.noTimeout,di=e.isPrimaryRenderer;e.warnsIfNotActing;var Hn=e.supportsMutation,Ws=e.supportsPersistence,Vr=e.supportsHydration,An=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var _r=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var zn=e.setCurrentUpdatePriority,Eo=e.getCurrentUpdatePriority,oh=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var Df=e.shouldAttemptEagerTransition,r0=e.detachDeletedInstance;e.requestPostPaintCallback;var Yp=e.maySuspendCommit,lh=e.maySuspendCommitOnUpdate,Yy=e.maySuspendCommitInSyncRender,Xr=e.preloadInstance,Ky=e.startSuspendingCommit,i0=e.suspendInstance;e.suspendOnActiveViewTransition;var F1=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var Lf=e.NotPendingTransition,kf=e.HostTransitionContext,Zy=e.resetFormInstance;e.bindToConsole;var Qy=e.supportsMicrotasks,Jy=e.scheduleMicrotask,Oi=e.supportsTestSelectors,hi=e.findFiberRoot,a0=e.getBoundingRect,Kp=e.getTextContent,yu=e.isHiddenSubtree,eb=e.matchAccessibilityRole,wc=e.setFocusIfFocusable,s0=e.setupIntersectionObserver,tb=e.appendChild,nb=e.appendChildToContainer,z1=e.commitTextUpdate,j1=e.commitMount,B1=e.commitUpdate,V1=e.insertBefore,H1=e.insertInContainerBefore,G1=e.removeChild,rb=e.removeChildFromContainer,ib=e.resetTextContent,HC=e.hideInstance,q1=e.hideTextInstance,W1=e.unhideInstance,$1=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var ab=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var X1=e.cloneInstance,sb=e.createContainerChildSet,ob=e.appendChildToContainerChildSet,Y1=e.finalizeContainerChildren,lb=e.replaceContainerChildren,K1=e.cloneHiddenInstance,cb=e.cloneHiddenTextInstance,bu=e.isSuspenseInstancePending,o0=e.isSuspenseInstanceFallback,l0=e.getSuspenseInstanceFallbackErrorDetails,c0=e.registerSuspenseInstanceRetry,Z1=e.canHydrateFormStateMarker,ub=e.isFormStateMarkerMatching,Q1=e.getNextHydratableSibling,J1=e.getNextHydratableSiblingAfterSingleton,eS=e.getFirstHydratableChild,tS=e.getFirstHydratableChildWithinContainer,nS=e.getFirstHydratableChildWithinActivityInstance,rS=e.getFirstHydratableChildWithinSuspenseInstance,fb=e.getFirstHydratableChildWithinSingleton,iS=e.canHydrateInstance,aS=e.canHydrateTextInstance,db=e.canHydrateActivityInstance,sS=e.canHydrateSuspenseInstance,oS=e.hydrateInstance,GC=e.hydrateTextInstance,hb=e.hydrateActivityInstance,lS=e.hydrateSuspenseInstance,cS=e.getNextHydratableInstanceAfterActivityInstance,pb=e.getNextHydratableInstanceAfterSuspenseInstance,uS=e.commitHydratedInstance,fS=e.commitHydratedContainer,qC=e.commitHydratedActivityInstance,WC=e.commitHydratedSuspenseInstance,dS=e.finalizeHydratedChildren,Zp=e.flushHydrationEvents;e.clearActivityBoundary;var mb=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var u0=e.clearSuspenseBoundaryFromContainer,hS=e.hideDehydratedBoundary,pS=e.unhideDehydratedBoundary,ch=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var mS=e.validateHydratableInstance,gb=e.validateHydratableTextInstance,Ao=e.supportsResources,f0=e.isHostHoistableType,Qp=e.getHoistableRoot,vb=e.getResource,yb=e.acquireResource,xu=e.releaseResource,gS=e.hydrateHoistable,bb=e.mountHoistable,xb=e.unmountHoistable,d0=e.createHoistableInstance,vS=e.prepareToCommitHoistables,_b=e.mayResourceSuspendCommit,Sb=e.preloadResource,yS=e.suspendResource,Di=e.supportsSingletons,h0=e.resolveSingletonInstance,Si=e.acquireSingletonInstance,Ki=e.releaseSingletonInstance,wb=e.isHostSingletonType,Uf=e.isSingletonScope,p0=[],Ff=-1,kl={},xs=Math.clz32?Math.clz32:E,m0=Math.log,bS=Math.LN2,g0=256,zf=262144,uh=4194304,Jp=vs.unstable_scheduleCallback,v0=vs.unstable_cancelCallback,xS=vs.unstable_shouldYield,Eb=vs.unstable_requestPaint,Aa=vs.unstable_now,y0=vs.unstable_ImmediatePriority,_S=vs.unstable_UserBlockingPriority,em=vs.unstable_NormalPriority,b0=vs.unstable_IdlePriority,Ab=vs.log,SS=vs.unstable_setDisableYieldValue,jf=null,_s=null,pi=typeof Object.is=="function"?Object.is:Q,x0=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},$C=Object.prototype.hasOwnProperty,_0,Ul,tm=!1,Tb=new WeakMap,Ec=[],Fl=0,Sr=null,nm=0,To=[],$s=0,Mo=null,da=1,tl="",Zi=v(null),Ac=v(null),ha=v(null),rm=v(null),Li=null,Hr=null,jn=!1,zl=null,$a=!1,S0=Error(i(519)),Co=v(null),Or=null,nl=null,wS=typeof AbortController<"u"?AbortController:function(){var h=[],m=this.signal={aborted:!1,addEventListener:function(_,M){h.push(M)}};this.abort=function(){m.aborted=!0,h.forEach(function(_){return _()})}},Qi=vs.unstable_scheduleCallback,XC=vs.unstable_NormalPriority,Gr={$$typeof:wo,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},im=null,mr=null,Ta=!1,Io=!1,w0=!1,_u=0,fh=null,Mb=0,Tc=0,ki=null,Ro=rn.S;rn.S=function(h,m){Wf=Aa(),typeof m=="object"&&m!==null&&typeof m.then=="function"&&bt(h,m),Ro!==null&&Ro(h,m)};var Su=v(null),Ui=Error(i(460)),E0=Error(i(474)),Po=Error(i(542)),jl={then:function(){}},Xa=null,wu=null,Bf=0,pa=ho(!0),Cb=ho(!1),ma=[],Bl=0,Vf=0,Xs=!1,A0=!1,Hf=v(null),Eu=v(0),Ss=v(null),ws=null,ai=v(0),Mc=0,Tn=null,Jt=null,vn=null,Nn=!1,In=!1,$n=!1,Ma=0,No=0,rl=null,Ib=0,Ys={readContext:ae,use:Zt,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};Ys.useEffectEvent=St;var Yr={readContext:ae,use:Zt,useCallback:function(h,m){return Se().memoizedState=[h,m===void 0?null:m],h},useContext:ae,useEffect:tu,useImperativeHandle:function(h,m,_){_=_!=null?_.concat([h]):null,bl(4194308,4,fc.bind(null,m,h),_)},useLayoutEffect:function(h,m){return bl(4194308,4,h,m)},useInsertionEffect:function(h,m){bl(4,2,h,m)},useMemo:function(h,m){var _=Se();m=m===void 0?null:m;var M=h();if($n){V(!0);try{h()}finally{V(!1)}}return _.memoizedState=[M,m],M},useReducer:function(h,m,_){var M=Se();if(_!==void 0){var F=_(m);if($n){V(!0);try{_(m)}finally{V(!1)}}}else F=m;return M.memoizedState=M.baseState=F,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:F},M.queue=h,h=h.dispatch=Vd.bind(null,Tn,h),[M.memoizedState,h]},useRef:function(h){var m=Se();return h={current:h},m.memoizedState=h},useState:function(h){h=Sa(h);var m=h.queue,_=Rp.bind(null,Tn,m);return m.dispatch=_,[h.memoizedState,_]},useDebugValue:_l,useDeferredValue:function(h,m){var _=Se();return nu(_,h,m)},useTransition:function(){var h=Sa(!1);return h=ru.bind(null,Tn,h.queue,!0,!1),Se().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,m,_){var M=Tn,F=Se();if(jn){if(_===void 0)throw Error(i(407));_=_()}else{if(_=m(),On===null)throw Error(i(349));(Bn&127)!==0||xr(M,m,_)}F.memoizedState=_;var H={value:_,getSnapshot:m};return F.queue=H,tu(za.bind(null,M,H,h),[h]),M.flags|=2048,Ba(9,{destroy:void 0},Rr.bind(null,M,H,_,m),null),_},useId:function(){var h=Se(),m=On.identifierPrefix;if(jn){var _=tl,M=da;_=(M&~(1<<32-xs(M)-1)).toString(32)+_,m="_"+m+"R_"+_,_=Ma++,0<_&&(m+="H"+_.toString(32)),m+="_"}else _=Ib++,m="_"+m+"r_"+_.toString(32)+"_";return h.memoizedState=m},useHostTransitionStatus:jd,useFormState:uc,useActionState:uc,useOptimistic:function(h){var m=Se();m.memoizedState=m.baseState=h;var _={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=_,m=go.bind(null,Tn,!0,_),_.dispatch=m,[h,m]},useMemoCache:Yn,useCacheRefresh:function(){return Se().memoizedState=Ug.bind(null,Tn)},useEffectEvent:function(h){var m=Se(),_={impl:h};return m.memoizedState=_,function(){if((Un&2)!==0)throw Error(i(440));return _.impl.apply(void 0,arguments)}}},Vl={readContext:ae,use:Zt,useCallback:xf,useContext:ae,useEffect:Xo,useImperativeHandle:Fd,useInsertionEffect:xl,useLayoutEffect:Ko,useMemo:Zo,useReducer:Gn,useRef:Ud,useState:function(){return Gn(dn)},useDebugValue:_l,useDeferredValue:function(h,m){var _=Te();return zd(_,Jt.memoizedState,h,m)},useTransition:function(){var h=Gn(dn)[0],m=Te().memoizedState;return[typeof h=="boolean"?h:wt(h),m]},useSyncExternalStore:qn,useId:iu,useHostTransitionStatus:jd,useFormState:mo,useActionState:mo,useOptimistic:function(h,m){var _=Te();return js(_,Jt,h,m)},useMemoCache:Yn,useCacheRefresh:Bd};Vl.useEffectEvent=$i;var Au={readContext:ae,use:Zt,useCallback:xf,useContext:ae,useEffect:Xo,useImperativeHandle:Fd,useInsertionEffect:xl,useLayoutEffect:Ko,useMemo:Zo,useReducer:ir,useRef:Ud,useState:function(){return ir(dn)},useDebugValue:_l,useDeferredValue:function(h,m){var _=Te();return Jt===null?nu(_,h,m):zd(_,Jt.memoizedState,h,m)},useTransition:function(){var h=ir(dn)[0],m=Te().memoizedState;return[typeof h=="boolean"?h:wt(h),m]},useSyncExternalStore:qn,useId:iu,useHostTransitionStatus:jd,useFormState:pr,useActionState:pr,useOptimistic:function(h,m){var _=Te();return Jt!==null?js(_,Jt,h,m):(_.baseState=h,[h,_.queue.dispatch])},useMemoCache:Yn,useCacheRefresh:Bd};Au.useEffectEvent=$i;var am={enqueueSetState:function(h,m,_){h=h._reactInternals;var M=Br(),F=Gi(M);F.payload=m,_!=null&&(F.callback=_),m=ca(h,F,M),m!==null&&($r(m,h,M),zs(m,h,M))},enqueueReplaceState:function(h,m,_){h=h._reactInternals;var M=Br(),F=Gi(M);F.tag=1,F.payload=m,_!=null&&(F.callback=_),m=ca(h,F,M),m!==null&&($r(m,h,M),zs(m,h,M))},enqueueForceUpdate:function(h,m){h=h._reactInternals;var _=Br(),M=Gi(_);M.tag=2,m!=null&&(M.callback=m),m=ca(h,M,_),m!==null&&($r(m,h,_),zs(m,h,_))}},Ya=Error(i(461)),Fr=!1,Gf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},si=!1,oi=!1,dh=!1,Rb=typeof WeakSet=="function"?WeakSet:Set,mi=null,Kr=null,gi=!1,gr=null,Ks=8192,hh={getCacheForType:function(h){var m=ae(Gr),_=m.data.get(h);return _===void 0&&(_=h(),m.data.set(h,_)),_},cacheSignal:function(){return ae(Gr).controller.signal}},Oo=0,ph=1,mh=2,sm=3,Tu=4;if(typeof Symbol=="function"&&Symbol.for){var qf=Symbol.for;Oo=qf("selector.component"),ph=qf("selector.has_pseudo_class"),mh=qf("selector.role"),sm=qf("selector.test_id"),Tu=qf("selector.text")}var Zs=typeof WeakMap=="function"?WeakMap:Map,Un=0,On=null,Fn=null,Bn=0,vr=0,wi=null,il=!1,Mu=!1,Cu=!1,Hl=0,Zr=0,Cc=0,Iu=0,gh=0,Ka=0,vh=0,om=null,Es=null,T0=!1,lm=0,Wf=0,Ru=1/0,cm=null,Ic=null,Ei=0,Rc=null,$f=null,Gl=0,yh=0,M0=null,Pb=null,ar=0,um=null;return Pn.attemptContinuousHydration=function(h){if(h.tag===13||h.tag===31){var m=Mr(h,67108864);m!==null&&$r(m,h,67108864),Gp(h,67108864)}},Pn.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13||h.tag===31){var m=Br();m=j(m);var _=Mr(h,m);_!==null&&$r(_,h,m),Gp(h,m)}},Pn.attemptSynchronousHydration=function(h){switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var m=S(h.pendingLanes);if(m!==0){for(h.pendingLanes|=2,h.entangledLanes|=2;m;){var _=1<<31-xs(m);h.entanglements[1]|=_,m&=~_}It(h),(Un&6)===0&&(Ru=Aa()+500,rt(0))}}break;case 31:case 13:m=Mr(h,2),m!==null&&$r(m,h,2),qg(),Gp(h,2)}},Pn.batchedUpdates=function(h,m){return h(m)},Pn.createComponentSelector=function(h){return{$$typeof:Oo,value:h}},Pn.createContainer=function(h,m,_,M,F,H,ee,_e,Ye,xt){return mu(h,m,!1,null,_,M,H,null,ee,_e,Ye,xt)},Pn.createHasPseudoClassSelector=function(h){return{$$typeof:ph,value:h}},Pn.createHydrationContainer=function(h,m,_,M,F,H,ee,_e,Ye,xt,Rt,Et,zt,Sn){var vi;return h=mu(_,M,!0,h,F,H,_e,Sn,Ye,xt,Rt,Et),h.context=Zg(null),_=h.current,M=Br(),M=j(M),F=Gi(M),F.callback=(vi=m)!=null?vi:null,ca(_,F,M),m=M,h.current.lanes=m,k(h,m),It(h),h},Pn.createPortal=function(h,m,_){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rf,key:M==null?null:""+M,children:h,containerInfo:m,implementation:_}},Pn.createRoleSelector=function(h){return{$$typeof:mh,value:h}},Pn.createTestNameSelector=function(h){return{$$typeof:sm,value:h}},Pn.createTextSelector=function(h){return{$$typeof:Tu,value:h}},Pn.defaultOnCaughtError=function(h){console.error(h)},Pn.defaultOnRecoverableError=function(h){x0(h)},Pn.defaultOnUncaughtError=function(h){x0(h)},Pn.deferredUpdates=function(h){var m=rn.T,_=Eo();try{return zn(32),rn.T=null,h()}finally{zn(_),rn.T=m}},Pn.discreteUpdates=function(h,m,_,M,F){var H=rn.T,ee=Eo();try{return zn(2),rn.T=null,h(m,_,M,F)}finally{zn(ee),rn.T=H,Un===0&&(Ru=Aa()+500)}},Pn.findAllNodes=gs,Pn.findBoundingRects=function(h,m){if(!Oi)throw Error(i(363));m=gs(h,m),h=[];for(var _=0;_<m.length;_++)h.push(a0(m[_]));for(m=h.length-1;0<m;m--){_=h[m];for(var M=_.x,F=M+_.width,H=_.y,ee=H+_.height,_e=m-1;0<=_e;_e--)if(m!==_e){var Ye=h[_e],xt=Ye.x,Rt=xt+Ye.width,Et=Ye.y,zt=Et+Ye.height;if(M>=xt&&H>=Et&&F<=Rt&&ee<=zt){h.splice(m,1);break}else if(M!==xt||_.width!==Ye.width||zt<H||Et>ee){if(!(H!==Et||_.height!==Ye.height||Rt<M||xt>F)){xt>M&&(Ye.width+=xt-M,Ye.x=M),Rt<F&&(Ye.width=F-xt),h.splice(m,1);break}}else{Et>H&&(Ye.height+=Et-H,Ye.y=H),zt<ee&&(Ye.height=ee-Et),h.splice(m,1);break}}}return h},Pn.findHostInstance=Hp,Pn.findHostInstanceWithNoPortals=function(h){return h=o(h),h=h!==null?f(h):null,h===null?null:ah(h.stateNode)},Pn.findHostInstanceWithWarning=function(h){return Hp(h)},Pn.flushPassiveEffects=Dl,Pn.flushSyncFromReconciler=function(h){var m=Un;Un|=1;var _=rn.T,M=Eo();try{if(zn(2),rn.T=null,h)return h()}finally{zn(M),rn.T=_,Un=m,(Un&6)===0&&rt(0)}},Pn.flushSyncWork=qg,Pn.focusWithin=function(h,m){if(!Oi)throw Error(i(363));for(h=uu(h),m=Qd(h,m),m=Array.from(m),h=0;h<m.length;){var _=m[h++],M=_.tag;if(!yu(_)){if((M===5||M===26||M===27)&&wc(_.stateNode))return!0;for(_=_.child;_!==null;)m.push(_),_=_.sibling}}return!1},Pn.getFindAllNodesFailureDescription=function(h,m){if(!Oi)throw Error(i(363));var _=0,M=[];h=[uu(h),0];for(var F=0;F<h.length;){var H=h[F++],ee=H.tag,_e=h[F++],Ye=m[_e];if((ee!==5&&ee!==26&&ee!==27||!yu(H))&&(fu(H,Ye)&&(M.push(Zd(Ye)),_e++,_e>_&&(_=_e)),_e<m.length))for(H=H.child;H!==null;)h.push(H,_e),H=H.sibling}if(_<m.length){for(h=[];_<m.length;_++)h.push(Zd(m[_]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},Pn.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 27:case 5:return ah(h.child.stateNode);default:return h.child.stateNode}},Pn.injectIntoDevTools=function(){var h={bundleType:0,version:Wy,rendererPackageName:$p,currentDispatcherRef:rn,reconcilerVersion:"19.2.0"};if(ih!==null&&(h.rendererConfig=ih),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)h=!0;else{try{jf=m.inject(h),_s=m}catch{}h=!!m.checkDCE}}return h},Pn.isAlreadyRendering=function(){return(Un&6)!==0},Pn.observeVisibleRects=function(h,m,_,M){if(!Oi)throw Error(i(363));h=gs(h,m);var F=s0(h,_,M).disconnect;return{disconnect:function(){F()}}},Pn.shouldError=function(){return null},Pn.shouldSuspend=function(){return!1},Pn.startHostTransition=function(h,m,_,M){if(h.tag!==5)throw Error(i(476));var F=Ip(h).queue;ru(h,F,m,Lf,_===null?r:function(){var H=Ip(h);return H.next===null&&(H=h.alternate.memoizedState),au(h,H.next.queue,{},Br()),_(M)})},Pn.updateContainer=function(h,m,_,M){var F=m.current,H=Br();return Gy(F,H,h,m,_,M),H},Pn.updateContainerSync=function(h,m,_,M){return Gy(m.current,2,h,m,_,M),2},Pn},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(U2)),U2.exports}var z2;function noe(){return z2||(z2=1,k2.exports=toe()),k2.exports}var roe=noe();const ioe=eoe(roe);function aoe(n){const e=ioe(n);return e.injectIntoDevTools(),e}const k9=0,Hv={},soe=/^three(?=[A-Z])/,CM=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let ooe=0;const loe=n=>typeof n=="function";function coe(n){if(loe(n)){const e=`${ooe++}`;return Hv[e]=n,e}else Object.assign(Hv,n)}function U9(n,e){const t=CM(n),r=Hv[t];if(n!=="primitive"&&!r)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function uoe(n,e,t){var r;return n=CM(n)in Hv?n:n.replace(soe,""),U9(n,e),n==="primitive"&&(r=e.object)!=null&&r.__r3f&&delete e.object.__r3f,SA(e.object,t,n,e)}function foe(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?EA(n.parent,n):to(n.object)&&(n.object.visible=!1),n.isHidden=!0,uy(n)}}function F9(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?wA(n.parent,n):to(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,uy(n)}}function dD(n,e,t){const r=e.root.getState();if(!(!n.parent&&n.object!==r.scene)){if(!e.object){var i,a;const s=Hv[CM(e.type)];e.object=(i=e.props.object)!=null?i:new s(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(Bh(e.object,e.props),e.props.attach)wA(n,e);else if(to(e.object)&&to(n.object)){const s=n.object.children.indexOf(t==null?void 0:t.object);if(t&&s!==-1){const o=n.object.children.indexOf(e.object);if(o!==-1){n.object.children.splice(o,1);const c=o<s?s-1:s;n.object.children.splice(c,0,e.object)}else e.object.parent=n.object,n.object.children.splice(s,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const s of e.children)dD(e,s);uy(e)}}function yR(n,e){e&&(e.parent=n,n.children.push(e),dD(n,e))}function j2(n,e,t){if(!e||!t)return;e.parent=n;const r=n.children.indexOf(t);r!==-1?n.children.splice(r,0,e):n.children.push(e),dD(n,e,t)}function z9(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():zN.unstable_scheduleCallback(zN.unstable_IdlePriority,e)}}function BN(n,e,t){if(!e)return;e.parent=null;const r=n.children.indexOf(e);r!==-1&&n.children.splice(r,1),e.props.attach?EA(n,e):to(e.object)&&to(n.object)&&(n.object.remove(e.object),qse(M9(e),e.object));const i=e.props.dispose!==null&&t!==!1;for(let a=e.children.length-1;a>=0;a--){const s=e.children[a];BN(e,s,i)}e.children.length=0,delete e.object.__r3f,i&&e.type!=="primitive"&&e.object.type!=="Scene"&&z9(e.object),t===void 0&&uy(e)}function doe(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const r=t.ref(e);typeof r=="function"&&(t.refCleanup=r)}else t.ref&&(t.ref.current=e)}const uE=[];function hoe(){for(const[t]of uE){const r=t.parent;if(r){t.props.attach?EA(r,t):to(t.object)&&to(r.object)&&r.object.remove(t.object);for(const i of t.children)i.props.attach?EA(t,i):to(i.object)&&to(t.object)&&t.object.remove(i.object)}t.isHidden&&F9(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&z9(t.object)}for(const[t,r,i]of uE){t.props=r;const a=t.parent;if(a){var n,e;const s=Hv[CM(t.type)];t.object=(n=t.props.object)!=null?n:new s(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,doe(i,t.object),Bh(t.object,t.props),t.props.attach?wA(a,t):to(t.object)&&to(a.object)&&a.object.add(t.object);for(const o of t.children)o.props.attach?wA(t,o):to(o.object)&&to(t.object)&&t.object.add(o.object);uy(t)}}uE.length=0}const bR=()=>{},B2={};let Pw=k9;const poe=0,moe=4,VN=aoe({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:uoe,removeChild:BN,appendChild:yR,appendInitialChild:yR,insertBefore:j2,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||yR(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||BN(t,e)},insertInContainerBefore(n,e,t){const r=n.getState().scene.__r3f;!e||!t||!r||j2(r,e,t)},getRootHostContext:()=>B2,getChildHostContext:()=>B2,commitUpdate(n,e,t,r,i){var a,s,o;U9(e,r);let c=!1;if((n.type==="primitive"&&t.object!==r.object||((a=r.args)==null?void 0:a.length)!==((s=t.args)==null?void 0:s.length)||(o=r.args)!=null&&o.some((d,p)=>{var v;return d!==((v=t.args)==null?void 0:v[p])}))&&(c=!0),c)uE.push([n,{...r},i]);else{const d=Bse(n,r);Object.keys(d).length&&(Object.assign(n.props,d),Bh(n.object,d))}(i.sibling===null||(i.flags&moe)===poe)&&hoe()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n==null?void 0:n.object,prepareForCommit:()=>null,preparePortalMount:n=>SA(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:foe,unhideInstance:F9,createTextInstance:bR,hideTextInstance:bR,unhideTextInstance:bR,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:G.createContext(null),setCurrentUpdatePriority(n){Pw=n},getCurrentUpdatePriority(){return Pw},resolveUpdatePriority(){var n;if(Pw!==k9)return Pw;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Qse;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Kse;default:return Zse}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:Jse.version,applyViewTransitionName(n,e,t){},restoreViewTransitionName(n,e){},cancelViewTransitionName(n,e,t){},cancelRootViewTransitionName(n){},restoreRootViewTransitionName(n){},InstanceMeasurement:null,measureInstance:n=>null,wasInstanceInViewport:n=>!0,hasInstanceChanged:(n,e)=>!1,hasInstanceAffectedParent:(n,e)=>!1,suspendOnActiveViewTransition(n,e){},startGestureTransition:()=>null,startViewTransition:()=>null,stopViewTransition(n){},createViewTransitionInstance:n=>null,getCurrentGestureOffset(n){throw new Error("startGestureTransition is not yet supported in react-three-fiber.")},cloneMutableInstance(n,e){return n},cloneMutableTextInstance(n){return n},cloneRootViewTransitionContainer(n){throw new Error("Not implemented.")},removeRootViewTransitionClone(n,e){throw new Error("Not implemented.")},createFragmentInstance:n=>null,updateFragmentInstanceFiber(n,e){},commitNewChildToFragmentInstance(n,e){},deleteChildFromFragmentInstance(n,e){},measureClonedInstance:n=>null,maySuspendCommitOnUpdate:(n,e,t)=>!1,maySuspendCommitInSyncRender:(n,e)=>!1,startSuspendingCommit:()=>null,getSuspendedCommitReason:(n,e)=>null}),ug=new Map,ev={objects:"shallow",strict:!1};function goe(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:r,top:i,left:a}=n.parentElement.getBoundingClientRect();return{width:t,height:r,top:i,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function voe(n){const e=ug.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,a=r||$se(qN,H2),s=t||VN.createContainer(a,Yse,null,!1,null,"",i,i,i,null);e||ug.set(n,{fiber:s,store:a});let o,c,f=!1,d=null;return{async configure(p={}){let v;d=new Promise(Z=>v=Z);let{gl:y,size:x,scene:E,events:S,onCreated:w,shadows:R=!1,linear:N=!1,flat:O=!1,legacy:z=!1,orthographic:k=!1,frameloop:U="always",dpr:P=[1,2],performance:C,raycaster:L,camera:j,onPointerMissed:B}=p,V=a.getState(),Q=V.gl;if(!V.gl){const Z={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},re=typeof y=="function"?await y(Z):y;D2(re)?Q=re:Q=new x9({...Z,...y}),V.set({gl:Q})}let J=V.raycaster;J||V.set({raycaster:J=new d9});const{params:W,...$}=L||{};if(li.equ($,J,ev)||Bh(J,{...$}),li.equ(W,J.params,ev)||Bh(J,{params:{...J.params,...W}}),!V.camera||V.camera===c&&!li.equ(c,j,ev)){c=j;const Z=j==null?void 0:j.isCamera,re=Z?j:k?new hd(0,0,0,0,.1,1e3):new ji(75,0,.1,1e3);Z||(re.position.z=5,j&&(Bh(re,j),re.manual||("aspect"in j||"left"in j||"right"in j||"bottom"in j||"top"in j)&&(re.manual=!0,re.updateProjectionMatrix())),!V.camera&&!(j!=null&&j.rotation)&&re.lookAt(0,0,0)),V.set({camera:re}),J.camera=re}if(!V.scene){let Z;E!=null&&E.isScene?(Z=E,SA(Z,a,"",{})):(Z=new L3,SA(Z,a,"",{}),E&&Bh(Z,E)),V.set({scene:Z})}S&&!V.events.handlers&&V.set({events:S(a)});const se=goe(n,x);if(li.equ(se,V.size,ev)||V.setSize(se.width,se.height,se.top,se.left),P&&V.viewport.dpr!==R9(P)&&V.setDpr(P),V.frameloop!==U&&V.setFrameloop(U),V.onPointerMissed||V.set({onPointerMissed:B}),C&&!li.equ(C,V.performance,ev)&&V.set(Z=>({performance:{...Z.performance,...C}})),!V.xr){var ce;const Z=(ve,pe)=>{const ye=a.getState();ye.frameloop!=="never"&&H2(ve,!0,ye,pe)},re=()=>{const ve=a.getState();ve.gl.xr.enabled=ve.gl.xr.isPresenting,ve.gl.xr.setAnimationLoop(ve.gl.xr.isPresenting?Z:null),ve.gl.xr.isPresenting||qN(ve)},de={connect(){const ve=a.getState().gl;ve.xr.addEventListener("sessionstart",re),ve.xr.addEventListener("sessionend",re)},disconnect(){const ve=a.getState().gl;ve.xr.removeEventListener("sessionstart",re),ve.xr.removeEventListener("sessionend",re)}};typeof((ce=Q.xr)==null?void 0:ce.addEventListener)=="function"&&de.connect(),V.set({xr:de})}if(Q.shadowMap){const Z=Q.shadowMap.enabled,re=Q.shadowMap.type;if(Q.shadowMap.enabled=!!R,li.boo(R))Q.shadowMap.type=Ex;else if(li.str(R)){var fe;const de={basic:PV,percentage:wv,soft:Ex,variance:Um};Q.shadowMap.type=(fe=de[R])!=null?fe:Ex}else li.obj(R)&&Object.assign(Q.shadowMap,R);(Z!==Q.shadowMap.enabled||re!==Q.shadowMap.type)&&(Q.shadowMap.needsUpdate=!0)}return Qn.enabled=!z,f||(Q.outputColorSpace=N?op:is,Q.toneMapping=O?Jl:WT),V.legacy!==z&&V.set(()=>({legacy:z})),V.linear!==N&&V.set(()=>({linear:N})),V.flat!==O&&V.set(()=>({flat:O})),y&&!li.fun(y)&&!D2(y)&&!li.equ(y,Q,ev)&&Bh(Q,y),o=w,f=!0,v(),this},render(p){return!f&&!d&&this.configure(),d.then(()=>{VN.updateContainer(A.jsx(yoe,{store:a,children:p,onCreated:o,rootElement:n}),s,null,()=>{})}),a},unmount(){j9(n)}}}function yoe({store:n,children:e,onCreated:t,rootElement:r}){return q_(()=>{const i=n.getState();i.set(a=>({internal:{...a.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),A.jsx(O9.Provider,{value:n,children:e})}function j9(n,e){const t=ug.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),VN.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var a,s,o,c;i.events.disconnect==null||i.events.disconnect(),(a=i.gl)==null||(s=a.renderLists)==null||s.dispose==null||s.dispose(),(o=i.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(c=i.gl)!=null&&c.xr&&i.xr.disconnect(),Fse(i.scene),ug.delete(n)}catch{}},500)})}}const boe=new Set,xoe=new Set,_oe=new Set;function xR(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Ox(n,e){switch(n){case"before":return xR(boe,e);case"after":return xR(xoe,e);case"tail":return xR(_oe,e)}}let _R,SR;function HN(n,e,t){let r=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),_R=e.internal.subscribers;for(let i=0;i<_R.length;i++)SR=_R[i],SR.ref.current(SR.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let AA=!1,GN=!1,wR,V2,tv;function B9(n){V2=requestAnimationFrame(B9),AA=!0,wR=0,Ox("before",n),GN=!0;for(const t of ug.values()){var e;tv=t.store.getState(),tv.internal.active&&(tv.frameloop==="always"||tv.internal.frames>0)&&!((e=tv.gl.xr)!=null&&e.isPresenting)&&(wR+=HN(n,tv))}if(GN=!1,Ox("after",n),wR===0)return Ox("tail",n),AA=!1,cancelAnimationFrame(V2)}function qN(n,e=1){var t;if(!n)return ug.forEach(r=>qN(r.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):GN?n.internal.frames=2:n.internal.frames=1,AA||(AA=!0,requestAnimationFrame(B9)))}function H2(n,e=!0,t,r){if(e&&Ox("before",n),t)HN(n,t,r);else for(const i of ug.values())HN(n,i.store.getState());e&&Ox("after",n)}const ER={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Soe(n){const{handlePointer:e}=Wse(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(ER).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{const{set:r,events:i}=n.getState();if(i.disconnect==null||i.disconnect(),r(a=>({events:{...a.events,connected:t}})),i.handlers)for(const a in i.handlers){const s=i.handlers[a],[o,c]=ER[a];t.addEventListener(o,s,{passive:c})}},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){if(r.handlers)for(const i in r.handlers){const a=r.handlers[i],[s]=ER[i];r.connected.removeEventListener(s,a)}t(i=>({events:{...i.events,connected:void 0}}))}}}}function G2(n,e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...r),e)}}function woe({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=G.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=G.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),c=n?typeof n=="number"?n:n.scroll:null,f=n?typeof n=="number"?n:n.resize:null,d=G.useRef(!1);G.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[p,v,y]=G.useMemo(()=>{const w=()=>{if(!o.current.element)return;const{left:R,top:N,width:O,height:z,bottom:k,right:U,x:P,y:C}=o.current.element.getBoundingClientRect(),L={left:R,top:N,width:O,height:z,bottom:k,right:U,x:P,y:C};o.current.element instanceof HTMLElement&&r&&(L.height=o.current.element.offsetHeight,L.width=o.current.element.offsetWidth),Object.freeze(L),d.current&&!Moe(o.current.lastBounds,L)&&s(o.current.lastBounds=L)};return[w,f?G2(w,f):w,c?G2(w,c):w]},[s,r,c,f]);function x(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",y,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function E(){o.current.element&&(o.current.resizeObserver=new i(y),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(w=>w.addEventListener("scroll",y,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const S=w=>{!w||w===o.current.element||(x(),o.current.element=w,o.current.scrollContainers=V9(w),E())};return Aoe(y,!!e),Eoe(v),G.useEffect(()=>{x(),E()},[e,y,v]),G.useEffect(()=>x,[]),[S,a,p]}function Eoe(n){G.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Aoe(n,e){G.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function V9(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(a=>a==="auto"||a==="scroll")&&e.push(n),[...e,...V9(n.parentElement)]}const Toe=["x","y","top","bottom","left","right","width","height"],Moe=(n,e)=>Toe.every(t=>n[t]===e[t]);function Coe({ref:n,children:e,fallback:t,resize:r,style:i,gl:a,events:s=Soe,eventSource:o,eventPrefix:c,shadows:f,linear:d,flat:p,legacy:v,orthographic:y,frameloop:x,dpr:E,performance:S,raycaster:w,camera:R,scene:N,onPointerMissed:O,onCreated:z,...k}){G.useMemo(()=>coe(dse),[]);const U=Dse(),[P,C]=woe({scroll:!0,debounce:{scroll:50,resize:0},...r}),L=G.useRef(null),j=G.useRef(null);G.useImperativeHandle(n,()=>L.current);const B=I9(O),[V,Q]=G.useState(!1),[J,W]=G.useState(!1);if(V)throw V;if(J)throw J;const $=G.useRef(null);q_(()=>{const ce=L.current;if(C.width>0&&C.height>0&&ce){$.current||($.current=voe(ce));async function fe(){await $.current.configure({gl:a,scene:N,events:s,shadows:f,linear:d,flat:p,legacy:v,orthographic:y,frameloop:x,dpr:E,performance:S,raycaster:w,camera:R,size:C,onPointerMissed:(...Z)=>B.current==null?void 0:B.current(...Z),onCreated:Z=>{Z.events.connect==null||Z.events.connect(o?Nse(o)?o.current:o:j.current),c&&Z.setEvents({compute:(re,de)=>{const ve=re[c+"X"],pe=re[c+"Y"];de.pointer.set(ve/de.size.width*2-1,-(pe/de.size.height)*2+1),de.raycaster.setFromCamera(de.pointer,de.camera)}}),z==null||z(Z)}}),$.current.render(A.jsx(U,{children:A.jsx(kse,{set:W,children:A.jsx(G.Suspense,{fallback:A.jsx(Lse,{set:Q}),children:e??null})})}))}fe()}}),G.useEffect(()=>{const ce=L.current;if(ce)return()=>j9(ce)},[]);const se=o?"none":"auto";return A.jsx("div",{ref:j,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:se,...i},...k,children:A.jsx("div",{ref:P,style:{width:"100%",height:"100%"},children:A.jsx("canvas",{ref:L,style:{display:"block"},children:t})})})}function Ioe(n){return A.jsx(A9,{children:A.jsx(Coe,{...n})})}class Roe extends uo{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new sf(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{t(a.parse(o))}catch(c){i?i(c):console.error(c),a.manager.itemError(e)}},r,i)}parse(e){function t(f){const d=new DataView(f),p=32/8*3+32/8*3*3+16/8,v=d.getUint32(80,!0);if(80+32/8+v*p===d.byteLength)return!0;const x=[115,111,108,105,100];for(let E=0;E<5;E++)if(r(x,d,E))return!1;return!0}function r(f,d,p){for(let v=0,y=f.length;v<y;v++)if(f[v]!==d.getUint8(p+v))return!1;return!0}function i(f){const d=new DataView(f),p=d.getUint32(80,!0);let v,y,x,E=!1,S,w,R,N,O;for(let j=0;j<70;j++)d.getUint32(j,!1)==1129270351&&d.getUint8(j+4)==82&&d.getUint8(j+5)==61&&(E=!0,S=new Float32Array(p*3*3),w=d.getUint8(j+6)/255,R=d.getUint8(j+7)/255,N=d.getUint8(j+8)/255,O=d.getUint8(j+9)/255);const z=84,k=50,U=new xn,P=new Float32Array(p*3*3),C=new Float32Array(p*3*3),L=new Bt;for(let j=0;j<p;j++){const B=z+j*k,V=d.getFloat32(B,!0),Q=d.getFloat32(B+4,!0),J=d.getFloat32(B+8,!0);if(E){const W=d.getUint16(B+48,!0);(W&32768)===0?(v=(W&31)/31,y=(W>>5&31)/31,x=(W>>10&31)/31):(v=w,y=R,x=N)}for(let W=1;W<=3;W++){const $=B+W*12,se=j*3*3+(W-1)*3;P[se]=d.getFloat32($,!0),P[se+1]=d.getFloat32($+4,!0),P[se+2]=d.getFloat32($+8,!0),C[se]=V,C[se+1]=Q,C[se+2]=J,E&&(L.setRGB(v,y,x,is),S[se]=L.r,S[se+1]=L.g,S[se+2]=L.b)}}return U.setAttribute("position",new yr(P,3)),U.setAttribute("normal",new yr(C,3)),E&&(U.setAttribute("color",new yr(S,3)),U.hasColors=!0,U.alpha=O),U}function a(f){const d=new xn,p=/solid([\s\S]*?)endsolid/g,v=/facet([\s\S]*?)endfacet/g,y=/solid\s(.+)/;let x=0;const E=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,S=new RegExp("vertex"+E+E+E,"g"),w=new RegExp("normal"+E+E+E,"g"),R=[],N=[],O=[],z=new ue;let k,U=0,P=0,C=0;for(;(k=p.exec(f))!==null;){P=C;const L=k[0],j=(k=y.exec(L))!==null?k[1]:"";for(O.push(j);(k=v.exec(L))!==null;){let Q=0,J=0;const W=k[0];for(;(k=w.exec(W))!==null;)z.x=parseFloat(k[1]),z.y=parseFloat(k[2]),z.z=parseFloat(k[3]),J++;for(;(k=S.exec(W))!==null;)R.push(parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3])),N.push(z.x,z.y,z.z),Q++,C++;J!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+x),Q!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+x),x++}const B=P,V=C-P;d.userData.groupNames=O,d.addGroup(B,V,U),U++}return d.setAttribute("position",new qt(R,3)),d.setAttribute("normal",new qt(N,3)),d}function s(f){return typeof f!="string"?new TextDecoder().decode(f):f}function o(f){if(typeof f=="string"){const d=new Uint8Array(f.length);for(let p=0;p<f.length;p++)d[p]=f.charCodeAt(p)&255;return d.buffer||d}else return f}const c=o(e);return t(c)?i(c):a(s(e))}}function TA(){return TA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},TA.apply(null,arguments)}var Poe=Object.defineProperty,Noe=(n,e,t)=>e in n?Poe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ooe=(n,e,t)=>(Noe(n,e+"",t),t);class Doe{constructor(){Ooe(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const a=i.indexOf(t);a!==-1&&i.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let a=0,s=i.length;a<s;a++)i[a].call(this,e);e.target=null}}}var Loe=Object.defineProperty,koe=(n,e,t)=>e in n?Loe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,cn=(n,e,t)=>(koe(n,typeof e!="symbol"?e+"":e,t),t);const Nw=new Mg,q2=new nd,Uoe=Math.cos(70*(Math.PI/180)),W2=(n,e)=>(n%e+e)%e;let Foe=class extends Doe{constructor(e,t){super(),cn(this,"object"),cn(this,"domElement"),cn(this,"enabled",!0),cn(this,"target",new ue),cn(this,"minDistance",0),cn(this,"maxDistance",1/0),cn(this,"minZoom",0),cn(this,"maxZoom",1/0),cn(this,"minPolarAngle",0),cn(this,"maxPolarAngle",Math.PI),cn(this,"minAzimuthAngle",-1/0),cn(this,"maxAzimuthAngle",1/0),cn(this,"enableDamping",!1),cn(this,"dampingFactor",.05),cn(this,"enableZoom",!0),cn(this,"zoomSpeed",1),cn(this,"enableRotate",!0),cn(this,"rotateSpeed",1),cn(this,"enablePan",!0),cn(this,"panSpeed",1),cn(this,"screenSpacePanning",!0),cn(this,"keyPanSpeed",7),cn(this,"zoomToCursor",!1),cn(this,"autoRotate",!1),cn(this,"autoRotateSpeed",2),cn(this,"reverseOrbit",!1),cn(this,"reverseHorizontalOrbit",!1),cn(this,"reverseVerticalOrbit",!1),cn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),cn(this,"mouseButtons",{LEFT:Mm.ROTATE,MIDDLE:Mm.DOLLY,RIGHT:Mm.PAN}),cn(this,"touches",{ONE:Cm.ROTATE,TWO:Cm.DOLLY_PAN}),cn(this,"target0"),cn(this,"position0"),cn(this,"zoom0"),cn(this,"_domElementKeyEvents",null),cn(this,"getPolarAngle"),cn(this,"getAzimuthalAngle"),cn(this,"setPolarAngle"),cn(this,"setAzimuthalAngle"),cn(this,"getDistance"),cn(this,"getZoomScale"),cn(this,"listenToKeyEvents"),cn(this,"stopListenToKeyEvents"),cn(this,"saveState"),cn(this,"reset"),cn(this,"update"),cn(this,"connect"),cn(this,"dispose"),cn(this,"dollyIn"),cn(this,"dollyOut"),cn(this,"getScale"),cn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=he=>{let Le=W2(he,2*Math.PI),bt=d.phi;bt<0&&(bt+=2*Math.PI),Le<0&&(Le+=2*Math.PI);let ge=Math.abs(Le-bt);2*Math.PI-ge<ge&&(Le<bt?Le+=2*Math.PI:bt+=2*Math.PI),p.phi=Le-bt,r.update()},this.setAzimuthalAngle=he=>{let Le=W2(he,2*Math.PI),bt=d.theta;bt<0&&(bt+=2*Math.PI),Le<0&&(Le+=2*Math.PI);let ge=Math.abs(Le-bt);2*Math.PI-ge<ge&&(Le<bt?Le+=2*Math.PI:bt+=2*Math.PI),p.theta=Le-bt,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=he=>{he.addEventListener("keydown",Ne),this._domElementKeyEvents=he},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ne),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),c=o.NONE},this.update=(()=>{const he=new ue,Le=new ue(0,1,0),bt=new Ls().setFromUnitVectors(e.up,Le),ge=bt.clone().invert(),dt=new ue,pt=new Ls,ht=2*Math.PI;return function(){const Qe=r.object.position;bt.setFromUnitVectors(e.up,Le),ge.copy(bt).invert(),he.copy(Qe).sub(r.target),he.applyQuaternion(bt),d.setFromVector3(he),r.autoRotate&&c===o.NONE&&Q(B()),r.enableDamping?(d.theta+=p.theta*r.dampingFactor,d.phi+=p.phi*r.dampingFactor):(d.theta+=p.theta,d.phi+=p.phi);let gt=r.minAzimuthAngle,Wt=r.maxAzimuthAngle;isFinite(gt)&&isFinite(Wt)&&(gt<-Math.PI?gt+=ht:gt>Math.PI&&(gt-=ht),Wt<-Math.PI?Wt+=ht:Wt>Math.PI&&(Wt-=ht),gt<=Wt?d.theta=Math.max(gt,Math.min(Wt,d.theta)):d.theta=d.theta>(gt+Wt)/2?Math.max(gt,d.theta):Math.min(Wt,d.theta)),d.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,d.phi)),d.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(y,r.dampingFactor):r.target.add(y),r.zoomToCursor&&C||r.object.isOrthographicCamera?d.radius=de(d.radius):d.radius=de(d.radius*v),he.setFromSpherical(d),he.applyQuaternion(ge),Qe.copy(r.target).add(he),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(p.theta*=1-r.dampingFactor,p.phi*=1-r.dampingFactor,y.multiplyScalar(1-r.dampingFactor)):(p.set(0,0,0),y.set(0,0,0));let nn=!1;if(r.zoomToCursor&&C){let Kt=null;if(r.object instanceof ji&&r.object.isPerspectiveCamera){const Ar=he.length();Kt=de(Ar*v);const Tr=Ar-Kt;r.object.position.addScaledVector(U,Tr),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Ar=new ue(P.x,P.y,0);Ar.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/v)),r.object.updateProjectionMatrix(),nn=!0;const Tr=new ue(P.x,P.y,0);Tr.unproject(r.object),r.object.position.sub(Tr).add(Ar),r.object.updateMatrixWorld(),Kt=he.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Kt!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Kt).add(r.object.position):(Nw.origin.copy(r.object.position),Nw.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(Nw.direction))<Uoe?e.lookAt(r.target):(q2.setFromNormalAndCoplanarPoint(r.object.up,r.target),Nw.intersectPlane(q2,r.target))))}else r.object instanceof hd&&r.object.isOrthographicCamera&&(nn=v!==1,nn&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/v)),r.object.updateProjectionMatrix()));return v=1,C=!1,nn||dt.distanceToSquared(r.object.position)>f||8*(1-pt.dot(r.object.quaternion))>f?(r.dispatchEvent(i),dt.copy(r.object.position),pt.copy(r.object.quaternion),nn=!1,!0):!1}})(),this.connect=he=>{r.domElement=he,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Pt),r.domElement.addEventListener("pointerdown",ct),r.domElement.addEventListener("pointercancel",Y),r.domElement.addEventListener("wheel",et)},this.dispose=()=>{var he,Le,bt,ge,dt,pt;r.domElement&&(r.domElement.style.touchAction="auto"),(he=r.domElement)==null||he.removeEventListener("contextmenu",Pt),(Le=r.domElement)==null||Le.removeEventListener("pointerdown",ct),(bt=r.domElement)==null||bt.removeEventListener("pointercancel",Y),(ge=r.domElement)==null||ge.removeEventListener("wheel",et),(dt=r.domElement)==null||dt.ownerDocument.removeEventListener("pointermove",ae),(pt=r.domElement)==null||pt.ownerDocument.removeEventListener("pointerup",Y),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Ne)};const r=this,i={type:"change"},a={type:"start"},s={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=o.NONE;const f=1e-6,d=new DN,p=new DN;let v=1;const y=new ue,x=new lt,E=new lt,S=new lt,w=new lt,R=new lt,N=new lt,O=new lt,z=new lt,k=new lt,U=new ue,P=new lt;let C=!1;const L=[],j={};function B(){return 2*Math.PI/60/60*r.autoRotateSpeed}function V(){return Math.pow(.95,r.zoomSpeed)}function Q(he){r.reverseOrbit||r.reverseHorizontalOrbit?p.theta+=he:p.theta-=he}function J(he){r.reverseOrbit||r.reverseVerticalOrbit?p.phi+=he:p.phi-=he}const W=(()=>{const he=new ue;return function(bt,ge){he.setFromMatrixColumn(ge,0),he.multiplyScalar(-bt),y.add(he)}})(),$=(()=>{const he=new ue;return function(bt,ge){r.screenSpacePanning===!0?he.setFromMatrixColumn(ge,1):(he.setFromMatrixColumn(ge,0),he.crossVectors(r.object.up,he)),he.multiplyScalar(bt),y.add(he)}})(),se=(()=>{const he=new ue;return function(bt,ge){const dt=r.domElement;if(dt&&r.object instanceof ji&&r.object.isPerspectiveCamera){const pt=r.object.position;he.copy(pt).sub(r.target);let ht=he.length();ht*=Math.tan(r.object.fov/2*Math.PI/180),W(2*bt*ht/dt.clientHeight,r.object.matrix),$(2*ge*ht/dt.clientHeight,r.object.matrix)}else dt&&r.object instanceof hd&&r.object.isOrthographicCamera?(W(bt*(r.object.right-r.object.left)/r.object.zoom/dt.clientWidth,r.object.matrix),$(ge*(r.object.top-r.object.bottom)/r.object.zoom/dt.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function ce(he){r.object instanceof ji&&r.object.isPerspectiveCamera||r.object instanceof hd&&r.object.isOrthographicCamera?v=he:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function fe(he){ce(v/he)}function Z(he){ce(v*he)}function re(he){if(!r.zoomToCursor||!r.domElement)return;C=!0;const Le=r.domElement.getBoundingClientRect(),bt=he.clientX-Le.left,ge=he.clientY-Le.top,dt=Le.width,pt=Le.height;P.x=bt/dt*2-1,P.y=-(ge/pt)*2+1,U.set(P.x,P.y,1).unproject(r.object).sub(r.object.position).normalize()}function de(he){return Math.max(r.minDistance,Math.min(r.maxDistance,he))}function ve(he){x.set(he.clientX,he.clientY)}function pe(he){re(he),O.set(he.clientX,he.clientY)}function ye(he){w.set(he.clientX,he.clientY)}function Ee(he){E.set(he.clientX,he.clientY),S.subVectors(E,x).multiplyScalar(r.rotateSpeed);const Le=r.domElement;Le&&(Q(2*Math.PI*S.x/Le.clientHeight),J(2*Math.PI*S.y/Le.clientHeight)),x.copy(E),r.update()}function Xe(he){z.set(he.clientX,he.clientY),k.subVectors(z,O),k.y>0?fe(V()):k.y<0&&Z(V()),O.copy(z),r.update()}function me(he){R.set(he.clientX,he.clientY),N.subVectors(R,w).multiplyScalar(r.panSpeed),se(N.x,N.y),w.copy(R),r.update()}function qe(he){re(he),he.deltaY<0?Z(V()):he.deltaY>0&&fe(V()),r.update()}function mt(he){let Le=!1;switch(he.code){case r.keys.UP:se(0,r.keyPanSpeed),Le=!0;break;case r.keys.BOTTOM:se(0,-r.keyPanSpeed),Le=!0;break;case r.keys.LEFT:se(r.keyPanSpeed,0),Le=!0;break;case r.keys.RIGHT:se(-r.keyPanSpeed,0),Le=!0;break}Le&&(he.preventDefault(),r.update())}function Ue(){if(L.length==1)x.set(L[0].pageX,L[0].pageY);else{const he=.5*(L[0].pageX+L[1].pageX),Le=.5*(L[0].pageY+L[1].pageY);x.set(he,Le)}}function De(){if(L.length==1)w.set(L[0].pageX,L[0].pageY);else{const he=.5*(L[0].pageX+L[1].pageX),Le=.5*(L[0].pageY+L[1].pageY);w.set(he,Le)}}function Re(){const he=L[0].pageX-L[1].pageX,Le=L[0].pageY-L[1].pageY,bt=Math.sqrt(he*he+Le*Le);O.set(0,bt)}function Me(){r.enableZoom&&Re(),r.enablePan&&De()}function Fe(){r.enableZoom&&Re(),r.enableRotate&&Ue()}function Ze(he){if(L.length==1)E.set(he.pageX,he.pageY);else{const bt=Mt(he),ge=.5*(he.pageX+bt.x),dt=.5*(he.pageY+bt.y);E.set(ge,dt)}S.subVectors(E,x).multiplyScalar(r.rotateSpeed);const Le=r.domElement;Le&&(Q(2*Math.PI*S.x/Le.clientHeight),J(2*Math.PI*S.y/Le.clientHeight)),x.copy(E)}function oe(he){if(L.length==1)R.set(he.pageX,he.pageY);else{const Le=Mt(he),bt=.5*(he.pageX+Le.x),ge=.5*(he.pageY+Le.y);R.set(bt,ge)}N.subVectors(R,w).multiplyScalar(r.panSpeed),se(N.x,N.y),w.copy(R)}function yt(he){const Le=Mt(he),bt=he.pageX-Le.x,ge=he.pageY-Le.y,dt=Math.sqrt(bt*bt+ge*ge);z.set(0,dt),k.set(0,Math.pow(z.y/O.y,r.zoomSpeed)),fe(k.y),O.copy(z)}function at(he){r.enableZoom&&yt(he),r.enablePan&&oe(he)}function Tt(he){r.enableZoom&&yt(he),r.enableRotate&&Ze(he)}function ct(he){var Le,bt;r.enabled!==!1&&(L.length===0&&((Le=r.domElement)==null||Le.ownerDocument.addEventListener("pointermove",ae),(bt=r.domElement)==null||bt.ownerDocument.addEventListener("pointerup",Y)),Ot(he),he.pointerType==="touch"?It(he):xe(he))}function ae(he){r.enabled!==!1&&(he.pointerType==="touch"?rt(he):ke(he))}function Y(he){var Le,bt,ge;it(he),L.length===0&&((Le=r.domElement)==null||Le.releasePointerCapture(he.pointerId),(bt=r.domElement)==null||bt.ownerDocument.removeEventListener("pointermove",ae),(ge=r.domElement)==null||ge.ownerDocument.removeEventListener("pointerup",Y)),r.dispatchEvent(s),c=o.NONE}function xe(he){let Le;switch(he.button){case 0:Le=r.mouseButtons.LEFT;break;case 1:Le=r.mouseButtons.MIDDLE;break;case 2:Le=r.mouseButtons.RIGHT;break;default:Le=-1}switch(Le){case Mm.DOLLY:if(r.enableZoom===!1)return;pe(he),c=o.DOLLY;break;case Mm.ROTATE:if(he.ctrlKey||he.metaKey||he.shiftKey){if(r.enablePan===!1)return;ye(he),c=o.PAN}else{if(r.enableRotate===!1)return;ve(he),c=o.ROTATE}break;case Mm.PAN:if(he.ctrlKey||he.metaKey||he.shiftKey){if(r.enableRotate===!1)return;ve(he),c=o.ROTATE}else{if(r.enablePan===!1)return;ye(he),c=o.PAN}break;default:c=o.NONE}c!==o.NONE&&r.dispatchEvent(a)}function ke(he){if(r.enabled!==!1)switch(c){case o.ROTATE:if(r.enableRotate===!1)return;Ee(he);break;case o.DOLLY:if(r.enableZoom===!1)return;Xe(he);break;case o.PAN:if(r.enablePan===!1)return;me(he);break}}function et(he){r.enabled===!1||r.enableZoom===!1||c!==o.NONE&&c!==o.ROTATE||(he.preventDefault(),r.dispatchEvent(a),qe(he),r.dispatchEvent(s))}function Ne(he){r.enabled===!1||r.enablePan===!1||mt(he)}function It(he){switch(tt(he),L.length){case 1:switch(r.touches.ONE){case Cm.ROTATE:if(r.enableRotate===!1)return;Ue(),c=o.TOUCH_ROTATE;break;case Cm.PAN:if(r.enablePan===!1)return;De(),c=o.TOUCH_PAN;break;default:c=o.NONE}break;case 2:switch(r.touches.TWO){case Cm.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Me(),c=o.TOUCH_DOLLY_PAN;break;case Cm.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Fe(),c=o.TOUCH_DOLLY_ROTATE;break;default:c=o.NONE}break;default:c=o.NONE}c!==o.NONE&&r.dispatchEvent(a)}function rt(he){switch(tt(he),c){case o.TOUCH_ROTATE:if(r.enableRotate===!1)return;Ze(he),r.update();break;case o.TOUCH_PAN:if(r.enablePan===!1)return;oe(he),r.update();break;case o.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;at(he),r.update();break;case o.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Tt(he),r.update();break;default:c=o.NONE}}function Pt(he){r.enabled!==!1&&he.preventDefault()}function Ot(he){L.push(he)}function it(he){delete j[he.pointerId];for(let Le=0;Le<L.length;Le++)if(L[Le].pointerId==he.pointerId){L.splice(Le,1);return}}function tt(he){let Le=j[he.pointerId];Le===void 0&&(Le=new lt,j[he.pointerId]=Le),Le.set(he.pageX,he.pageY)}function Mt(he){const Le=he.pointerId===L[0].pointerId?L[1]:L[0];return j[Le.pointerId]}this.dollyIn=(he=V())=>{Z(he),r.update()},this.dollyOut=(he=V())=>{fe(he),r.update()},this.getScale=()=>v,this.setScale=he=>{ce(he),r.update()},this.getZoomScale=()=>V(),t!==void 0&&this.connect(t),this.update()}};const zoe=G.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:a=!1,onChange:s,onStart:o,onEnd:c,...f},d)=>{const p=Oh(k=>k.invalidate),v=Oh(k=>k.camera),y=Oh(k=>k.gl),x=Oh(k=>k.events),E=Oh(k=>k.setEvents),S=Oh(k=>k.set),w=Oh(k=>k.get),R=Oh(k=>k.performance),N=e||v,O=r||x.connected||y.domElement,z=G.useMemo(()=>new Foe(N),[N]);return uD(()=>{z.enabled&&z.update()},-1),G.useEffect(()=>(a&&z.connect(a===!0?O:a),z.connect(O),()=>void z.dispose()),[a,O,t,z,p]),G.useEffect(()=>{const k=C=>{p(),t&&R.regress(),s&&s(C)},U=C=>{o&&o(C)},P=C=>{c&&c(C)};return z.addEventListener("change",k),z.addEventListener("start",U),z.addEventListener("end",P),()=>{z.removeEventListener("start",U),z.removeEventListener("end",P),z.removeEventListener("change",k)}},[s,o,c,z,p,E]),G.useEffect(()=>{if(n){const k=w().controls;return S({controls:z}),()=>S({controls:k})}},[n,z]),G.createElement("primitive",TA({ref:d,object:z,enableDamping:i},f))}),joe=G.forwardRef(function({children:e,object:t,disable:r,disableX:i,disableY:a,disableZ:s,left:o,right:c,top:f,bottom:d,front:p,back:v,onCentered:y,precise:x=!0,cacheKey:E=0,...S},w){const R=G.useRef(null),N=G.useRef(null),O=G.useRef(null),[z]=G.useState(()=>new os),[k]=G.useState(()=>new ue),[U]=G.useState(()=>new Oa);return G.useLayoutEffect(()=>{N.current.matrixWorld.identity(),z.setFromObject(t??O.current,x);const P=z.max.x-z.min.x,C=z.max.y-z.min.y,L=z.max.z-z.min.z;z.getCenter(k),z.getBoundingSphere(U);const j=f?C/2:d?-C/2:0,B=o?-P/2:c?P/2:0,V=p?L/2:v?-L/2:0;N.current.position.set(r||i?0:-k.x+B,r||a?0:-k.y+j,r||s?0:-k.z+V),y==null||y({parent:R.current.parent,container:R.current,width:P,height:C,depth:L,boundingBox:z,boundingSphere:U,center:k,verticalAlignment:j,horizontalAlignment:B,depthAlignment:V})},[E,y,f,o,p,r,i,a,s,t,x,c,d,v,z,k,U]),G.useImperativeHandle(w,()=>R.current,[]),G.createElement("group",TA({ref:R},S),G.createElement("group",{ref:N},G.createElement("group",{ref:O},e)))}),Boe=G.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:r=1,floatIntensity:i=1,floatingRange:a=[-.1,.1],autoInvalidate:s=!1,...o},c)=>{const f=G.useRef(null);G.useImperativeHandle(c,()=>f.current,[]);const d=G.useRef(Math.random()*1e4);return uD(p=>{var v,y;if(!e||t===0)return;s&&p.invalidate();const x=d.current+p.clock.elapsedTime;f.current.rotation.x=Math.cos(x/4*t)/8*r,f.current.rotation.y=Math.sin(x/4*t)/8*r,f.current.rotation.z=Math.sin(x/4*t)/20*r;let E=Math.sin(x/4*t)/10;E=h8.mapLinear(E,-.1,.1,(v=a==null?void 0:a[0])!==null&&v!==void 0?v:-.1,(y=a==null?void 0:a[1])!==null&&y!==void 0?y:.1),f.current.position.y=E*i,f.current.updateMatrix()}),G.createElement("group",o,G.createElement("group",{ref:f,matrixAutoUpdate:!1},n))});function Voe({url:n}){const e=fD(Roe,n),t=G.useRef();return uD((r,i)=>{t.current&&(t.current.rotation.z+=i*.5)}),A.jsx("mesh",{ref:t,geometry:e,rotation:[-Math.PI/2,0,0],scale:[40,40,40],children:A.jsx("meshPhongMaterial",{color:16777215,specular:1118481,shininess:200})})}function Hoe(){return A.jsx("div",{className:"w-full h-full",children:A.jsxs(Ioe,{camera:{position:[0,0,100],fov:50},children:[A.jsx("ambientLight",{intensity:.6}),A.jsx("directionalLight",{position:[10,10,10],intensity:1}),A.jsx("pointLight",{position:[-20,0,20],color:"#F59E0B",intensity:2,distance:100}),A.jsx("pointLight",{position:[20,0,20],color:"#2563EB",intensity:2,distance:100}),A.jsx(Boe,{speed:2,rotationIntensity:.5,floatIntensity:.5,children:A.jsx(joe,{children:A.jsx(Eg.Suspense,{fallback:null,children:A.jsx(Voe,{url:"/images/Tuna-s_craft.stl"})})})}),A.jsx(zoe,{enableZoom:!1,autoRotate:!1})]})})}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H9=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Goe=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qoe=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=n=>{const e=qoe(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Woe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $oe=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xoe=G.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},c)=>G.createElement("svg",{ref:c,...Woe,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:H9("lucide",i),...!a&&!$oe(o)&&{"aria-hidden":"true"},...o},[...s.map(([f,d])=>G.createElement(f,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=(n,e)=>{const t=G.forwardRef(({className:r,...i},a)=>G.createElement(Xoe,{ref:a,iconNode:e,className:H9(`lucide-${Goe($2(n))}`,`lucide-${n}`,r),...i}));return t.displayName=$2(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yoe=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Koe=ur("archive",Yoe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zoe=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],nv=ur("arrow-down",Zoe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qoe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],IM=ur("arrow-left",Qoe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Joe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ele=ur("arrow-right",Joe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tle=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],X2=ur("arrow-up-down",tle);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nle=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],rv=ur("arrow-up",nle);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rle=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],G9=ur("calculator",rle);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ile=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ale=ur("circle-alert",ile);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sle=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],l_=ur("circle-check-big",sle);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ole=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],q9=ur("clock",ole);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lle=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],cle=ur("credit-card",lle);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ule=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],fle=ur("dollar-sign",ule);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dle=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],AR=ur("eye",dle);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hle=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],ple=ur("facebook",hle);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mle=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],gle=ur("file-text",mle);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vle=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],Y2=ur("hammer",vle);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yle=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],K2=ur("house",yle);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ble=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],xle=ur("instagram",ble);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _le=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],W9=ur("menu",_le);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sle=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Gv=ur("package",Sle);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wle=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Ele=ur("palette",wle);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ale=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],uv=ur("plus",Ale);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tle=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Mle=ur("printer",Tle);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cle=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Z2=ur("ruler",Cle);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ile=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Q2=ur("save",Ile);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rle=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],WN=ur("search",Rle);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ple=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],$9=ur("shopping-bag",Ple);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nle=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],TR=ur("square-pen",Nle);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ole=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],td=ur("trash-2",Ole);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dle=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],MR=ur("upload",Dle);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lle=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],kle=ur("users",Lle);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ule=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],c_=ur("x",Ule);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fle=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],J2=ur("zap",Fle),zle="https://docs.google.com/spreadsheets/d/e/2PACX-1vSZQKUeUWpxU8XNWtif8j4aEKN0InJpbxQFpK4Q4Ci5zVI1ZIlUlKTU42AomgXFPfa73Rb0w1CT1mU-/pub?output=csv",X9=()=>{const[n,e]=G.useState([]),[t,r]=G.useState(!0),i=s=>{if(!s)return"";const o=/(?:\/d\/|id=)([a-zA-Z0-9_-]+)/,c=s.match(o);return c&&c[1]?`https://drive.google.com/thumbnail?id=${c[1]}&sz=w800`:s},a=s=>{const o=s.split(`
`),c=o[0].split(",").map(d=>d.trim().toLowerCase()),f=[];for(let d=1;d<o.length;d++){const p=o[d].split(",");if(p.length<c.length)continue;const v={};c.forEach((y,x)=>{let E=p[x]?p[x].trim():"";v[y]=E}),v.name&&f.push({name:v.name,price:v.price||"$0",quantity:parseInt(v.quantity||v.availability||0),category:v.category||"Otros",image:i(v.photo||v.image),color:"#2563EB"})}return f};return G.useEffect(()=>{(async()=>{try{const c=await(await fetch(zle)).text(),f=a(c);f.length>0&&e(f)}catch(o){console.error("Error fetching gallery:",o)}finally{r(!1)}})()},[]),{products:n,loading:t}},jle=()=>{const[n,e]=G.useState(!1),[t,r]=G.useState(null),[i,a]=G.useState("all"),{products:s}=X9(),o=["Todos",...new Set(s.map(y=>y.category).filter(Boolean))],f=(i==="Todos"||i==="all"?s:s.filter(y=>y.category===i)).slice(0,12),[d,p]=G.useState(!1);G.useEffect(()=>{const y=()=>p(window.scrollY>20);return window.addEventListener("scroll",y),()=>window.removeEventListener("scroll",y)},[]);const v=()=>e(!n);return A.jsxs("div",{className:"bg-brand-dark min-h-screen text-slate-100 font-sans",children:[A.jsxs("nav",{className:`fixed w-full z-50 transition-all duration-300 ${d?"bg-brand-dark/90 backdrop-blur-md border-b border-white/10":"bg-transparent"}`,children:[A.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:A.jsxs("div",{className:"flex justify-between items-center h-20",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("img",{className:"h-12 w-auto",src:"/logo.png",alt:"Tuna's Craft"}),A.jsx("span",{className:"font-display font-bold text-2xl tracking-tight text-white",children:"Tuna's Craft"})]}),A.jsxs("div",{className:"hidden md:flex space-x-8 items-center",children:[A.jsx("a",{href:"#gallery",className:"text-slate-300 hover:text-white transition-colors",children:"Galera"}),A.jsx("a",{href:"#services",className:"text-slate-300 hover:text-white transition-colors",children:"Servicios"}),A.jsx("a",{href:"#delivery",className:"text-slate-300 hover:text-white transition-colors",children:"Entregas"}),A.jsx(ol,{to:"/status",className:"text-slate-300 hover:text-white transition-colors",children:"Status del Pedido"}),A.jsx(ol,{to:"/quote",className:"bg-brand-orange hover:bg-orange-600 text-white px-6 py-2 rounded-full font-bold transition-all transform hover:scale-105 shadow-lg hover:shadow-orange-500/25",children:"Cotizar Ahora"})]}),A.jsx("div",{className:"md:hidden",children:A.jsx("button",{onClick:v,className:"text-gray-300 hover:text-white p-2",children:n?A.jsx(c_,{size:24}):A.jsx(W9,{size:24})})})]})}),n&&A.jsx("div",{className:"md:hidden bg-brand-dark border-t border-white/10 p-4",children:A.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[A.jsx("a",{href:"#gallery",onClick:v,className:"text-slate-300 hover:text-white text-lg",children:"Galera"}),A.jsx("a",{href:"#services",onClick:v,className:"text-slate-300 hover:text-white text-lg",children:"Servicios"}),A.jsx("a",{href:"#delivery",onClick:v,className:"text-slate-300 hover:text-white text-lg",children:"Entregas"}),A.jsx(ol,{to:"/status",onClick:v,className:"text-slate-300 hover:text-white text-lg",children:"Status del Pedido"}),A.jsx(ol,{to:"/quote",onClick:v,className:"bg-brand-orange text-white px-8 py-3 rounded-full font-bold text-lg mt-4",children:"Cotizar Ahora"})]})})]}),A.jsxs("section",{className:"relative min-h-screen flex items-center justify-center pt-20 overflow-hidden",children:[A.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden -z-10",children:[A.jsx("div",{className:"absolute top-1/4 -left-20 w-96 h-96 bg-brand-blue/20 rounded-full blur-3xl animate-pulse"}),A.jsx("div",{className:"absolute bottom-1/4 -right-20 w-96 h-96 bg-brand-orange/10 rounded-full blur-3xl animate-pulse delay-1000"})]}),A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center gap-12 w-full",children:[A.jsxs("div",{className:"flex-1 text-center md:text-left z-10",children:[A.jsxs("h1",{className:"font-display text-5xl md:text-7xl font-extrabold leading-tight mb-6",children:["Tus ideas, impresas en ",A.jsx("br",{}),A.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-brand-blue to-brand-orange",children:"3D Realidad"})]}),A.jsx("p",{className:"text-xl text-gray-400 mb-8 max-w-2xl mx-auto md:mx-0",children:"Creamos figuras, adornos y piezas personalizadas con la mejor calidad. Si lo imaginas, lo podemos imprimir!"}),A.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center md:justify-start",children:A.jsx(ol,{to:"/quote",className:"bg-brand-blue hover:bg-blue-600 text-white text-lg px-8 py-4 rounded-xl font-bold shadow-xl shadow-blue-500/20 transition-all hover:-translate-y-1",children:"Hacer un Pedido"})})]}),A.jsx("div",{className:"flex-1 w-full h-[400px] md:h-[600px] relative z-10",children:A.jsx(Hoe,{})})]})]}),A.jsx("section",{id:"services",className:"py-24 bg-brand-dark/50",children:A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[A.jsxs("div",{className:"text-center mb-16",children:[A.jsxs("h2",{className:"font-display text-4xl font-bold mb-4",children:["Nuestros ",A.jsx("span",{className:"text-brand-blue",children:"Servicios"})]}),A.jsx("p",{className:"text-gray-400",children:"Calidad premium en cada capa."})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[A.jsx(CR,{icon:A.jsx(Z2,{size:40,className:"text-brand-blue"}),title:"Impresin a Medida",desc:"Prototipos, refacciones y piezas tcnicas diseadas especficamente para tus necesidades."}),A.jsx(CR,{icon:A.jsx(Ele,{size:40,className:"text-brand-orange"}),title:"Figuras y Arte",desc:"Coleccionables de anime, videojuegos y miniaturas de alta resolucin para pintar."}),A.jsx(CR,{icon:A.jsx(K2,{size:40,className:"text-purple-500"}),title:"Decoracin",desc:"Macetas, lmparas, litofanas y regalos nicos para darle vida a tus espacios."})]})]})}),A.jsx("section",{id:"delivery",className:"py-24 relative",children:A.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:A.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-[2rem] p-8 md:p-12 shadow-2xl flex flex-col md:flex-row gap-12",children:[A.jsxs("div",{className:"flex-1 space-y-8",children:[A.jsxs("h2",{className:"text-3xl font-display font-bold text-white",children:["Informacin de ",A.jsx("span",{className:"text-brand-orange",children:"Entregas"})]}),A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex gap-4",children:[A.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white shadow-lg shadow-blue-500/30",children:A.jsx(K2,{size:24})}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-bold text-white text-lg",children:"Punto de Entrega Principal"}),A.jsx("p",{className:"text-gray-400",children:"Metro Chabacano, CDMX"}),A.jsx("a",{href:"https://maps.google.com/?q=Metro+Chabacano",target:"_blank",rel:"noreferrer",className:"inline-block mt-3 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold px-4 py-2 rounded-lg transition-colors",children:"Ver Ubicacin en Mapa"}),A.jsx("p",{className:"text-blue-400 text-xs font-bold mt-2",children:"Sbados: 11:00 am - 3:00 pm"})]})]}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-slate-700 rounded-full flex items-center justify-center text-slate-300",children:A.jsx(Z2,{size:24})}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-bold text-white",children:"Entregas Urgentes / Entre Semana"}),A.jsx("p",{className:"text-sm text-gray-500",children:"Punto a convenir (Con costo extra)"})]})]}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-brand-orange rounded-full flex items-center justify-center text-black font-bold shadow-lg shadow-orange-500/20",children:A.jsx(Gv,{size:24})}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-bold text-white",children:"Envos a todo Mxico"}),A.jsx("p",{className:"text-sm text-gray-500",children:"Paquetera segura (Con costo adicional)"})]})]})]})]}),A.jsxs("div",{className:"flex-1 bg-black/20 rounded-2xl p-8 border border-white/5",children:[A.jsx("h3",{className:"text-xl font-bold text-center mb-8 text-white",children:"Mtodos de Pago"}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsx("div",{className:"bg-slate-800/50 border border-slate-700 p-4 rounded-xl flex items-center justify-center text-sm font-medium text-gray-300 hover:bg-slate-700/50 transition-colors cursor-default",children:" Tarjeta / MSI"}),A.jsx("div",{className:"bg-slate-800/50 border border-slate-700 p-4 rounded-xl flex items-center justify-center text-sm font-medium text-gray-300 hover:bg-slate-700/50 transition-colors cursor-default",children:" Transferencia"}),A.jsx("div",{className:"bg-slate-800/50 border border-slate-700 p-4 rounded-xl flex items-center justify-center text-sm font-medium text-gray-300 hover:bg-slate-700/50 transition-colors cursor-default",children:" Efectivo"}),A.jsx("div",{className:"bg-white p-4 rounded-xl flex items-center justify-center shadow-lg hover:scale-105 transition-transform cursor-pointer",children:A.jsx("span",{className:"text-blue-500 font-bold italic",children:"mercadopago"})})]}),A.jsx("div",{className:"mt-8 text-center",children:A.jsx(ol,{to:"/status",className:"inline-flex items-center gap-2 text-brand-blue font-bold hover:text-white transition-colors",children:"Revisa estatus de tu pedido "})})]})]})})}),A.jsxs("section",{id:"gallery",className:"py-24 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[A.jsxs("h2",{className:"font-display text-4xl font-bold mb-6 text-center text-white",children:["Galera de ",A.jsx("span",{className:"text-brand-orange",children:"Trabajos"})]}),A.jsx("div",{className:"flex flex-wrap justify-center gap-3 mb-10",children:o.map(y=>A.jsx("button",{onClick:()=>a(y),className:`px-6 py-2 rounded-full font-bold text-sm transition-all border-2 
                        ${i===y||y==="Todos"&&i==="all"?"bg-brand-orange text-white border-brand-orange shadow-lg shadow-orange-500/30":"bg-transparent text-gray-300 border-gray-600 hover:border-gray-400 hover:text-white"}`,children:y},y))}),A.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:f.map((y,x)=>A.jsxs("div",{onClick:()=>r(y.image),className:"group relative overflow-hidden rounded-2xl shadow-lg aspect-square bg-gray-900 cursor-pointer hover:shadow-2xl transition-all hover:scale-[1.02]",children:[A.jsx("div",{className:"w-full h-full bg-cover bg-center group-hover:scale-110 transition-transform duration-500",style:{backgroundImage:`url('${y.image}')`}}),A.jsx("div",{className:"absolute top-4 right-4 flex flex-col items-end gap-2 z-10",children:A.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider shadow-sm ${y.quantity>0?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:y.quantity>0?"Disponible":"Agotado"})}),A.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-4 bg-gradient-to-t from-black/90 via-black/50 to-transparent",children:[A.jsx("h3",{className:"text-white font-bold text-lg drop-shadow-md leading-tight",children:y.name}),A.jsx("p",{className:"text-brand-orange font-bold text-xl mt-1",children:y.price})]})]},x))})]}),t&&A.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 flex items-center justify-center p-4",onClick:()=>r(null),children:[A.jsx("button",{className:"absolute top-4 right-4 text-white hover:text-brand-orange p-2",children:A.jsx(c_,{size:32})}),A.jsx("img",{src:t,alt:"Full view",className:"max-h-[90vh] max-w-[90vw] rounded-lg shadow-2xl",onClick:y=>y.stopPropagation()})]}),A.jsxs("footer",{className:"bg-black py-16 border-t border-white/10 text-center relative overflow-hidden",children:[A.jsxs("div",{className:"flex justify-center gap-10 mb-10",children:[A.jsx(eF,{href:"https://facebook.com/tunascraft3d",icon:A.jsx(ple,{}),label:"Facebook"}),A.jsx(eF,{href:"https://instagram.com/tunas_craft",icon:A.jsx(xle,{}),label:"Instagram"})]}),A.jsx("p",{className:"text-gray-500 font-medium text-sm",children:" 2024 Tuna's Craft. Hecho con  y ."}),A.jsx("div",{className:"mt-4",children:A.jsx(ol,{to:"/admin",className:"text-xs text-gray-700 hover:text-brand-blue",children:"Admin Access"})})]})]})},CR=({icon:n,title:e,desc:t})=>A.jsxs("div",{className:"glass p-8 rounded-2xl hover:bg-white/5 transition-all cursor-default group",children:[A.jsx("div",{className:"w-14 h-14 bg-white/5 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform",children:n}),A.jsx("h3",{className:"font-display text-2xl font-bold mb-3",children:e}),A.jsx("p",{className:"text-gray-400 leading-relaxed",children:t})]}),eF=({href:n,icon:e,label:t})=>A.jsxs("a",{href:n,target:"_blank",rel:"noreferrer",className:"group flex flex-col items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[A.jsx("div",{className:"p-4 bg-white/5 rounded-2xl group-hover:bg-brand-blue/10 group-hover:scale-110 transition-all border border-white/5 shadow-lg",children:Eg.cloneElement(e,{size:24})}),A.jsx("span",{className:"text-xs font-medium",children:t})]}),Ble=()=>{};var tF={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Vle=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],s=n[t++],o=n[t++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},K9={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],s=i+1<n.length,o=s?n[i+1]:0,c=i+2<n.length,f=c?n[i+2]:0,d=a>>2,p=(a&3)<<4|o>>4;let v=(o&15)<<2|f>>6,y=f&63;c||(y=64,s||(v=64)),r.push(t[d],t[p],t[v],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Y9(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Vle(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],o=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||o==null||f==null||p==null)throw new Hle;const v=a<<2|o>>4;if(r.push(v),f!==64){const y=o<<4&240|f>>2;if(r.push(y),p!==64){const x=f<<6&192|p;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Hle extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Gle=function(n){const e=Y9(n);return K9.encodeByteArray(e,!0)},MA=function(n){return Gle(n).replace(/\./g,"")},Z9=function(n){try{return K9.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qle(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wle=()=>qle().__FIREBASE_DEFAULTS__,$le=()=>{if(typeof process>"u"||typeof tF>"u")return;const n=tF.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Xle=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Z9(n[1]);return e&&JSON.parse(e)},RM=()=>{try{return Ble()||Wle()||$le()||Xle()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Q9=n=>{var e,t;return(t=(e=RM())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},J9=n=>{const e=Q9(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},eH=()=>{var n;return(n=RM())==null?void 0:n.config},tH=n=>{var e;return(e=RM())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yle{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hD(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nH(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[MA(JSON.stringify(t)),MA(JSON.stringify(s)),""].join(".")}const Dx={};function Kle(){const n={prod:[],emulator:[]};for(const e of Object.keys(Dx))Dx[e]?n.emulator.push(e):n.prod.push(e);return n}function Zle(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let nF=!1;function pD(n,e){if(typeof window>"u"||typeof document>"u"||!Ep(window.location.host)||Dx[n]===e||Dx[n]||nF)return;Dx[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",a=Kle().prod.length>0;function s(){const v=document.getElementById(r);v&&v.remove()}function o(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,y){v.setAttribute("width","24"),v.setAttribute("id",y),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{nF=!0,s()},v}function d(v,y){v.setAttribute("id",y),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function p(){const v=Zle(r),y=t("text"),x=document.getElementById(y)||document.createElement("span"),E=t("learnmore"),S=document.getElementById(E)||document.createElement("a"),w=t("preprendIcon"),R=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const N=v.element;o(N),d(S,E);const O=f();c(R,w),N.append(R,x,S,O),document.body.appendChild(N)}a?(x.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qle(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ks())}function Jle(){var e;const n=(e=RM())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ece(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tce(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function nce(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rce(){const n=ks();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ice(){return!Jle()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ace(){try{return typeof indexedDB=="object"}catch{return!1}}function sce(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oce="FirebaseError";class gf extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=oce,Object.setPrototypeOf(this,gf.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,W_.prototype.create)}}class W_{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?lce(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new gf(i,o,r)}}function lce(n,e){return n.replace(cce,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const cce=/\{\$([^}]+)}/g;function uce(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function fg(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],s=e[i];if(rF(a)&&rF(s)){if(!fg(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function rF(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fce(n,e){const t=new dce(n,e);return t.subscribe.bind(t)}class dce{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");hce(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=IR),i.error===void 0&&(i.error=IR),i.complete===void 0&&(i.complete=IR);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hce(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function IR(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(n){return n&&n._delegate?n._delegate:n}class up{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pce=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Yle;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gce(e))try{this.getOrInitializeService({instanceIdentifier:Rm})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Rm){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Rm){return this.instances.has(e)}getOptions(e=Rm){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mce(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Rm){return this.component?this.component.multipleInstances?e:Rm:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function mce(n){return n===Rm?void 0:n}function gce(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vce{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new pce(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Jn||(Jn={}));const yce={debug:Jn.DEBUG,verbose:Jn.VERBOSE,info:Jn.INFO,warn:Jn.WARN,error:Jn.ERROR,silent:Jn.SILENT},bce=Jn.INFO,xce={[Jn.DEBUG]:"log",[Jn.VERBOSE]:"log",[Jn.INFO]:"info",[Jn.WARN]:"warn",[Jn.ERROR]:"error"},_ce=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=xce[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mD{constructor(e){this.name=e,this._logLevel=bce,this._logHandler=_ce,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Jn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yce[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Jn.DEBUG,...e),this._logHandler(this,Jn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Jn.VERBOSE,...e),this._logHandler(this,Jn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Jn.INFO,...e),this._logHandler(this,Jn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Jn.WARN,...e),this._logHandler(this,Jn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Jn.ERROR,...e),this._logHandler(this,Jn.ERROR,...e)}}const Sce=(n,e)=>e.some(t=>n instanceof t);let iF,aF;function wce(){return iF||(iF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ece(){return aF||(aF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rH=new WeakMap,$N=new WeakMap,iH=new WeakMap,RR=new WeakMap,gD=new WeakMap;function Ace(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",s)},a=()=>{t(ep(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&rH.set(t,n)}).catch(()=>{}),gD.set(e,n),e}function Tce(n){if($N.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",s),n.removeEventListener("abort",s)},a=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",s),n.addEventListener("abort",s)});$N.set(n,e)}let XN={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return $N.get(n);if(e==="objectStoreNames")return n.objectStoreNames||iH.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ep(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Mce(n){XN=n(XN)}function Cce(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(PR(this),e,...t);return iH.set(r,e.sort?e.sort():[e]),ep(r)}:Ece().includes(n)?function(...e){return n.apply(PR(this),e),ep(rH.get(this))}:function(...e){return ep(n.apply(PR(this),e))}}function Ice(n){return typeof n=="function"?Cce(n):(n instanceof IDBTransaction&&Tce(n),Sce(n,wce())?new Proxy(n,XN):n)}function ep(n){if(n instanceof IDBRequest)return Ace(n);if(RR.has(n))return RR.get(n);const e=Ice(n);return e!==n&&(RR.set(n,e),gD.set(e,n)),e}const PR=n=>gD.get(n);function Rce(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(n,e),o=ep(s);return r&&s.addEventListener("upgradeneeded",c=>{r(ep(s.result),c.oldVersion,c.newVersion,ep(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),o}const Pce=["get","getKey","getAll","getAllKeys","count"],Nce=["put","add","delete","clear"],NR=new Map;function sF(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(NR.get(e))return NR.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Nce.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Pce.includes(t)))return;const a=async function(s,...o){const c=this.transaction(s,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(o.shift())),(await Promise.all([f[t](...o),i&&c.done]))[0]};return NR.set(e,a),a}Mce(n=>({...n,get:(e,t,r)=>sF(e,t)||n.get(e,t,r),has:(e,t)=>!!sF(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oce{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Dce(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Dce(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const YN="@firebase/app",oF="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new mD("@firebase/app"),Lce="@firebase/app-compat",kce="@firebase/analytics-compat",Uce="@firebase/analytics",Fce="@firebase/app-check-compat",zce="@firebase/app-check",jce="@firebase/auth",Bce="@firebase/auth-compat",Vce="@firebase/database",Hce="@firebase/data-connect",Gce="@firebase/database-compat",qce="@firebase/functions",Wce="@firebase/functions-compat",$ce="@firebase/installations",Xce="@firebase/installations-compat",Yce="@firebase/messaging",Kce="@firebase/messaging-compat",Zce="@firebase/performance",Qce="@firebase/performance-compat",Jce="@firebase/remote-config",eue="@firebase/remote-config-compat",tue="@firebase/storage",nue="@firebase/storage-compat",rue="@firebase/firestore",iue="@firebase/ai",aue="@firebase/firestore-compat",sue="firebase",oue="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="[DEFAULT]",lue={[YN]:"fire-core",[Lce]:"fire-core-compat",[Uce]:"fire-analytics",[kce]:"fire-analytics-compat",[zce]:"fire-app-check",[Fce]:"fire-app-check-compat",[jce]:"fire-auth",[Bce]:"fire-auth-compat",[Vce]:"fire-rtdb",[Hce]:"fire-data-connect",[Gce]:"fire-rtdb-compat",[qce]:"fire-fn",[Wce]:"fire-fn-compat",[$ce]:"fire-iid",[Xce]:"fire-iid-compat",[Yce]:"fire-fcm",[Kce]:"fire-fcm-compat",[Zce]:"fire-perf",[Qce]:"fire-perf-compat",[Jce]:"fire-rc",[eue]:"fire-rc-compat",[tue]:"fire-gcs",[nue]:"fire-gcs-compat",[rue]:"fire-fst",[aue]:"fire-fst-compat",[iue]:"fire-vertex","fire-js":"fire-js",[sue]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=new Map,cue=new Map,ZN=new Map;function lF(n,e){try{n.container.addComponent(e)}catch(t){yd.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function dg(n){const e=n.name;if(ZN.has(e))return yd.debug(`There were multiple attempts to register component ${e}.`),!1;ZN.set(e,n);for(const t of CA.values())lF(t,n);for(const t of cue.values())lF(t,n);return!0}function PM(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Yl(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uue={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tp=new W_("app","Firebase",uue);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fue{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new up("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tp.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg=oue;function aH(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:KN,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw tp.create("bad-app-name",{appName:String(i)});if(t||(t=eH()),!t)throw tp.create("no-options");const a=CA.get(i);if(a){if(fg(t,a.options)&&fg(r,a.config))return a;throw tp.create("duplicate-app",{appName:i})}const s=new vce(i);for(const c of ZN.values())s.addComponent(c);const o=new fue(t,r,s);return CA.set(i,o),o}function vD(n=KN){const e=CA.get(n);if(!e&&n===KN&&eH())return aH();if(!e)throw tp.create("no-app",{appName:n});return e}function Ku(n,e,t){let r=lue[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yd.warn(s.join(" "));return}dg(new up(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const due="firebase-heartbeat-database",hue=1,u_="firebase-heartbeat-store";let OR=null;function sH(){return OR||(OR=Rce(due,hue,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(u_)}catch(t){console.warn(t)}}}}).catch(n=>{throw tp.create("idb-open",{originalErrorMessage:n.message})})),OR}async function pue(n){try{const t=(await sH()).transaction(u_),r=await t.objectStore(u_).get(oH(n));return await t.done,r}catch(e){if(e instanceof gf)yd.warn(e.message);else{const t=tp.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yd.warn(t.message)}}}async function cF(n,e){try{const r=(await sH()).transaction(u_,"readwrite");await r.objectStore(u_).put(e,oH(n)),await r.done}catch(t){if(t instanceof gf)yd.warn(t.message);else{const r=tp.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});yd.warn(r.message)}}}function oH(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mue=1024,gue=30;class vue{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new bue(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=uF();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>gue){const s=xue(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){yd.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=uF(),{heartbeatsToSend:r,unsentEntries:i}=yue(this._heartbeatsCache.heartbeats),a=MA(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return yd.warn(t),""}}}function uF(){return new Date().toISOString().substring(0,10)}function yue(n,e=mue){const t=[];let r=n.slice();for(const i of n){const a=t.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),fF(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),fF(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class bue{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ace()?sce().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await pue(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return cF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return cF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function fF(n){return MA(JSON.stringify({version:2,heartbeats:n})).length}function xue(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ue(n){dg(new up("platform-logger",e=>new Oce(e),"PRIVATE")),dg(new up("heartbeat",e=>new vue(e),"PRIVATE")),Ku(YN,oF,n),Ku(YN,oF,"esm2020"),Ku("fire-js","")}_ue("");var Sue="firebase",wue="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ku(Sue,wue,"app");var dF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var np,lH;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(U,P){function C(){}C.prototype=P.prototype,U.F=P.prototype,U.prototype=new C,U.prototype.constructor=U,U.D=function(L,j,B){for(var V=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)V[Q-2]=arguments[Q];return P.prototype[j].apply(L,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(U,P,C){C||(C=0);const L=Array(16);if(typeof P=="string")for(var j=0;j<16;++j)L[j]=P.charCodeAt(C++)|P.charCodeAt(C++)<<8|P.charCodeAt(C++)<<16|P.charCodeAt(C++)<<24;else for(j=0;j<16;++j)L[j]=P[C++]|P[C++]<<8|P[C++]<<16|P[C++]<<24;P=U.g[0],C=U.g[1],j=U.g[2];let B=U.g[3],V;V=P+(B^C&(j^B))+L[0]+3614090360&4294967295,P=C+(V<<7&4294967295|V>>>25),V=B+(j^P&(C^j))+L[1]+3905402710&4294967295,B=P+(V<<12&4294967295|V>>>20),V=j+(C^B&(P^C))+L[2]+606105819&4294967295,j=B+(V<<17&4294967295|V>>>15),V=C+(P^j&(B^P))+L[3]+3250441966&4294967295,C=j+(V<<22&4294967295|V>>>10),V=P+(B^C&(j^B))+L[4]+4118548399&4294967295,P=C+(V<<7&4294967295|V>>>25),V=B+(j^P&(C^j))+L[5]+1200080426&4294967295,B=P+(V<<12&4294967295|V>>>20),V=j+(C^B&(P^C))+L[6]+2821735955&4294967295,j=B+(V<<17&4294967295|V>>>15),V=C+(P^j&(B^P))+L[7]+4249261313&4294967295,C=j+(V<<22&4294967295|V>>>10),V=P+(B^C&(j^B))+L[8]+1770035416&4294967295,P=C+(V<<7&4294967295|V>>>25),V=B+(j^P&(C^j))+L[9]+2336552879&4294967295,B=P+(V<<12&4294967295|V>>>20),V=j+(C^B&(P^C))+L[10]+4294925233&4294967295,j=B+(V<<17&4294967295|V>>>15),V=C+(P^j&(B^P))+L[11]+2304563134&4294967295,C=j+(V<<22&4294967295|V>>>10),V=P+(B^C&(j^B))+L[12]+1804603682&4294967295,P=C+(V<<7&4294967295|V>>>25),V=B+(j^P&(C^j))+L[13]+4254626195&4294967295,B=P+(V<<12&4294967295|V>>>20),V=j+(C^B&(P^C))+L[14]+2792965006&4294967295,j=B+(V<<17&4294967295|V>>>15),V=C+(P^j&(B^P))+L[15]+1236535329&4294967295,C=j+(V<<22&4294967295|V>>>10),V=P+(j^B&(C^j))+L[1]+4129170786&4294967295,P=C+(V<<5&4294967295|V>>>27),V=B+(C^j&(P^C))+L[6]+3225465664&4294967295,B=P+(V<<9&4294967295|V>>>23),V=j+(P^C&(B^P))+L[11]+643717713&4294967295,j=B+(V<<14&4294967295|V>>>18),V=C+(B^P&(j^B))+L[0]+3921069994&4294967295,C=j+(V<<20&4294967295|V>>>12),V=P+(j^B&(C^j))+L[5]+3593408605&4294967295,P=C+(V<<5&4294967295|V>>>27),V=B+(C^j&(P^C))+L[10]+38016083&4294967295,B=P+(V<<9&4294967295|V>>>23),V=j+(P^C&(B^P))+L[15]+3634488961&4294967295,j=B+(V<<14&4294967295|V>>>18),V=C+(B^P&(j^B))+L[4]+3889429448&4294967295,C=j+(V<<20&4294967295|V>>>12),V=P+(j^B&(C^j))+L[9]+568446438&4294967295,P=C+(V<<5&4294967295|V>>>27),V=B+(C^j&(P^C))+L[14]+3275163606&4294967295,B=P+(V<<9&4294967295|V>>>23),V=j+(P^C&(B^P))+L[3]+4107603335&4294967295,j=B+(V<<14&4294967295|V>>>18),V=C+(B^P&(j^B))+L[8]+1163531501&4294967295,C=j+(V<<20&4294967295|V>>>12),V=P+(j^B&(C^j))+L[13]+2850285829&4294967295,P=C+(V<<5&4294967295|V>>>27),V=B+(C^j&(P^C))+L[2]+4243563512&4294967295,B=P+(V<<9&4294967295|V>>>23),V=j+(P^C&(B^P))+L[7]+1735328473&4294967295,j=B+(V<<14&4294967295|V>>>18),V=C+(B^P&(j^B))+L[12]+2368359562&4294967295,C=j+(V<<20&4294967295|V>>>12),V=P+(C^j^B)+L[5]+4294588738&4294967295,P=C+(V<<4&4294967295|V>>>28),V=B+(P^C^j)+L[8]+2272392833&4294967295,B=P+(V<<11&4294967295|V>>>21),V=j+(B^P^C)+L[11]+1839030562&4294967295,j=B+(V<<16&4294967295|V>>>16),V=C+(j^B^P)+L[14]+4259657740&4294967295,C=j+(V<<23&4294967295|V>>>9),V=P+(C^j^B)+L[1]+2763975236&4294967295,P=C+(V<<4&4294967295|V>>>28),V=B+(P^C^j)+L[4]+1272893353&4294967295,B=P+(V<<11&4294967295|V>>>21),V=j+(B^P^C)+L[7]+4139469664&4294967295,j=B+(V<<16&4294967295|V>>>16),V=C+(j^B^P)+L[10]+3200236656&4294967295,C=j+(V<<23&4294967295|V>>>9),V=P+(C^j^B)+L[13]+681279174&4294967295,P=C+(V<<4&4294967295|V>>>28),V=B+(P^C^j)+L[0]+3936430074&4294967295,B=P+(V<<11&4294967295|V>>>21),V=j+(B^P^C)+L[3]+3572445317&4294967295,j=B+(V<<16&4294967295|V>>>16),V=C+(j^B^P)+L[6]+76029189&4294967295,C=j+(V<<23&4294967295|V>>>9),V=P+(C^j^B)+L[9]+3654602809&4294967295,P=C+(V<<4&4294967295|V>>>28),V=B+(P^C^j)+L[12]+3873151461&4294967295,B=P+(V<<11&4294967295|V>>>21),V=j+(B^P^C)+L[15]+530742520&4294967295,j=B+(V<<16&4294967295|V>>>16),V=C+(j^B^P)+L[2]+3299628645&4294967295,C=j+(V<<23&4294967295|V>>>9),V=P+(j^(C|~B))+L[0]+4096336452&4294967295,P=C+(V<<6&4294967295|V>>>26),V=B+(C^(P|~j))+L[7]+1126891415&4294967295,B=P+(V<<10&4294967295|V>>>22),V=j+(P^(B|~C))+L[14]+2878612391&4294967295,j=B+(V<<15&4294967295|V>>>17),V=C+(B^(j|~P))+L[5]+4237533241&4294967295,C=j+(V<<21&4294967295|V>>>11),V=P+(j^(C|~B))+L[12]+1700485571&4294967295,P=C+(V<<6&4294967295|V>>>26),V=B+(C^(P|~j))+L[3]+2399980690&4294967295,B=P+(V<<10&4294967295|V>>>22),V=j+(P^(B|~C))+L[10]+4293915773&4294967295,j=B+(V<<15&4294967295|V>>>17),V=C+(B^(j|~P))+L[1]+2240044497&4294967295,C=j+(V<<21&4294967295|V>>>11),V=P+(j^(C|~B))+L[8]+1873313359&4294967295,P=C+(V<<6&4294967295|V>>>26),V=B+(C^(P|~j))+L[15]+4264355552&4294967295,B=P+(V<<10&4294967295|V>>>22),V=j+(P^(B|~C))+L[6]+2734768916&4294967295,j=B+(V<<15&4294967295|V>>>17),V=C+(B^(j|~P))+L[13]+1309151649&4294967295,C=j+(V<<21&4294967295|V>>>11),V=P+(j^(C|~B))+L[4]+4149444226&4294967295,P=C+(V<<6&4294967295|V>>>26),V=B+(C^(P|~j))+L[11]+3174756917&4294967295,B=P+(V<<10&4294967295|V>>>22),V=j+(P^(B|~C))+L[2]+718787259&4294967295,j=B+(V<<15&4294967295|V>>>17),V=C+(B^(j|~P))+L[9]+3951481745&4294967295,U.g[0]=U.g[0]+P&4294967295,U.g[1]=U.g[1]+(j+(V<<21&4294967295|V>>>11))&4294967295,U.g[2]=U.g[2]+j&4294967295,U.g[3]=U.g[3]+B&4294967295}r.prototype.v=function(U,P){P===void 0&&(P=U.length);const C=P-this.blockSize,L=this.C;let j=this.h,B=0;for(;B<P;){if(j==0)for(;B<=C;)i(this,U,B),B+=this.blockSize;if(typeof U=="string"){for(;B<P;)if(L[j++]=U.charCodeAt(B++),j==this.blockSize){i(this,L),j=0;break}}else for(;B<P;)if(L[j++]=U[B++],j==this.blockSize){i(this,L),j=0;break}}this.h=j,this.o+=P},r.prototype.A=function(){var U=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);U[0]=128;for(var P=1;P<U.length-8;++P)U[P]=0;P=this.o*8;for(var C=U.length-8;C<U.length;++C)U[C]=P&255,P/=256;for(this.v(U),U=Array(16),P=0,C=0;C<4;++C)for(let L=0;L<32;L+=8)U[P++]=this.g[C]>>>L&255;return U};function a(U,P){var C=o;return Object.prototype.hasOwnProperty.call(C,U)?C[U]:C[U]=P(U)}function s(U,P){this.h=P;const C=[];let L=!0;for(let j=U.length-1;j>=0;j--){const B=U[j]|0;L&&B==P||(C[j]=B,L=!1)}this.g=C}var o={};function c(U){return-128<=U&&U<128?a(U,function(P){return new s([P|0],P<0?-1:0)}):new s([U|0],U<0?-1:0)}function f(U){if(isNaN(U)||!isFinite(U))return p;if(U<0)return S(f(-U));const P=[];let C=1;for(let L=0;U>=C;L++)P[L]=U/C|0,C*=4294967296;return new s(P,0)}function d(U,P){if(U.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(U.charAt(0)=="-")return S(d(U.substring(1),P));if(U.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=f(Math.pow(P,8));let L=p;for(let B=0;B<U.length;B+=8){var j=Math.min(8,U.length-B);const V=parseInt(U.substring(B,B+j),P);j<8?(j=f(Math.pow(P,j)),L=L.j(j).add(f(V))):(L=L.j(C),L=L.add(f(V)))}return L}var p=c(0),v=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(E(this))return-S(this).m();let U=0,P=1;for(let C=0;C<this.g.length;C++){const L=this.i(C);U+=(L>=0?L:4294967296+L)*P,P*=4294967296}return U},n.toString=function(U){if(U=U||10,U<2||36<U)throw Error("radix out of range: "+U);if(x(this))return"0";if(E(this))return"-"+S(this).toString(U);const P=f(Math.pow(U,6));var C=this;let L="";for(;;){const j=O(C,P).g;C=w(C,j.j(P));let B=((C.g.length>0?C.g[0]:C.h)>>>0).toString(U);if(C=j,x(C))return B+L;for(;B.length<6;)B="0"+B;L=B+L}},n.i=function(U){return U<0?0:U<this.g.length?this.g[U]:this.h};function x(U){if(U.h!=0)return!1;for(let P=0;P<U.g.length;P++)if(U.g[P]!=0)return!1;return!0}function E(U){return U.h==-1}n.l=function(U){return U=w(this,U),E(U)?-1:x(U)?0:1};function S(U){const P=U.g.length,C=[];for(let L=0;L<P;L++)C[L]=~U.g[L];return new s(C,~U.h).add(v)}n.abs=function(){return E(this)?S(this):this},n.add=function(U){const P=Math.max(this.g.length,U.g.length),C=[];let L=0;for(let j=0;j<=P;j++){let B=L+(this.i(j)&65535)+(U.i(j)&65535),V=(B>>>16)+(this.i(j)>>>16)+(U.i(j)>>>16);L=V>>>16,B&=65535,V&=65535,C[j]=V<<16|B}return new s(C,C[C.length-1]&-2147483648?-1:0)};function w(U,P){return U.add(S(P))}n.j=function(U){if(x(this)||x(U))return p;if(E(this))return E(U)?S(this).j(S(U)):S(S(this).j(U));if(E(U))return S(this.j(S(U)));if(this.l(y)<0&&U.l(y)<0)return f(this.m()*U.m());const P=this.g.length+U.g.length,C=[];for(var L=0;L<2*P;L++)C[L]=0;for(L=0;L<this.g.length;L++)for(let j=0;j<U.g.length;j++){const B=this.i(L)>>>16,V=this.i(L)&65535,Q=U.i(j)>>>16,J=U.i(j)&65535;C[2*L+2*j]+=V*J,R(C,2*L+2*j),C[2*L+2*j+1]+=B*J,R(C,2*L+2*j+1),C[2*L+2*j+1]+=V*Q,R(C,2*L+2*j+1),C[2*L+2*j+2]+=B*Q,R(C,2*L+2*j+2)}for(U=0;U<P;U++)C[U]=C[2*U+1]<<16|C[2*U];for(U=P;U<2*P;U++)C[U]=0;return new s(C,0)};function R(U,P){for(;(U[P]&65535)!=U[P];)U[P+1]+=U[P]>>>16,U[P]&=65535,P++}function N(U,P){this.g=U,this.h=P}function O(U,P){if(x(P))throw Error("division by zero");if(x(U))return new N(p,p);if(E(U))return P=O(S(U),P),new N(S(P.g),S(P.h));if(E(P))return P=O(U,S(P)),new N(S(P.g),P.h);if(U.g.length>30){if(E(U)||E(P))throw Error("slowDivide_ only works with positive integers.");for(var C=v,L=P;L.l(U)<=0;)C=z(C),L=z(L);var j=k(C,1),B=k(L,1);for(L=k(L,2),C=k(C,2);!x(L);){var V=B.add(L);V.l(U)<=0&&(j=j.add(C),B=V),L=k(L,1),C=k(C,1)}return P=w(U,j.j(P)),new N(j,P)}for(j=p;U.l(P)>=0;){for(C=Math.max(1,Math.floor(U.m()/P.m())),L=Math.ceil(Math.log(C)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),B=f(C),V=B.j(P);E(V)||V.l(U)>0;)C-=L,B=f(C),V=B.j(P);x(B)&&(B=v),j=j.add(B),U=w(U,V)}return new N(j,U)}n.B=function(U){return O(this,U).h},n.and=function(U){const P=Math.max(this.g.length,U.g.length),C=[];for(let L=0;L<P;L++)C[L]=this.i(L)&U.i(L);return new s(C,this.h&U.h)},n.or=function(U){const P=Math.max(this.g.length,U.g.length),C=[];for(let L=0;L<P;L++)C[L]=this.i(L)|U.i(L);return new s(C,this.h|U.h)},n.xor=function(U){const P=Math.max(this.g.length,U.g.length),C=[];for(let L=0;L<P;L++)C[L]=this.i(L)^U.i(L);return new s(C,this.h^U.h)};function z(U){const P=U.g.length+1,C=[];for(let L=0;L<P;L++)C[L]=U.i(L)<<1|U.i(L-1)>>>31;return new s(C,U.h)}function k(U,P){const C=P>>5;P%=32;const L=U.g.length-C,j=[];for(let B=0;B<L;B++)j[B]=P>0?U.i(B+C)>>>P|U.i(B+C+1)<<32-P:U.i(B+C);return new s(j,U.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,lH=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=d,np=s}).apply(typeof dF<"u"?dF:typeof self<"u"?self:typeof window<"u"?window:{});var Ow=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cH,vx,uH,fE,QN,fH,dH,hH;(function(){var n,e=Object.defineProperty;function t(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ow=="object"&&Ow];for(var q=0;q<T.length;++q){var K=T[q];if(K&&K.Math==Math)return K}throw Error("Cannot find global object")}var r=t(this);function i(T,q){if(q)e:{var K=r;T=T.split(".");for(var le=0;le<T.length-1;le++){var Ie=T[le];if(!(Ie in K))break e;K=K[Ie]}T=T[T.length-1],le=K[T],q=q(le),q!=le&&q!=null&&e(K,T,{configurable:!0,writable:!0,value:q})}}i("Symbol.dispose",function(T){return T||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(T){return T||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(T){return T||function(q){var K=[],le;for(le in q)Object.prototype.hasOwnProperty.call(q,le)&&K.push([le,q[le]]);return K}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},s=this||self;function o(T){var q=typeof T;return q=="object"&&T!=null||q=="function"}function c(T,q,K){return T.call.apply(T.bind,arguments)}function f(T,q,K){return f=c,f.apply(null,arguments)}function d(T,q){var K=Array.prototype.slice.call(arguments,1);return function(){var le=K.slice();return le.push.apply(le,arguments),T.apply(this,le)}}function p(T,q){function K(){}K.prototype=q.prototype,T.Z=q.prototype,T.prototype=new K,T.prototype.constructor=T,T.Ob=function(le,Ie,We){for(var Nt=Array(arguments.length-2),_n=2;_n<arguments.length;_n++)Nt[_n-2]=arguments[_n];return q.prototype[Ie].apply(le,Nt)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?T=>T&&AsyncContext.Snapshot.wrap(T):T=>T;function y(T){const q=T.length;if(q>0){const K=Array(q);for(let le=0;le<q;le++)K[le]=T[le];return K}return[]}function x(T,q){for(let le=1;le<arguments.length;le++){const Ie=arguments[le];var K=typeof Ie;if(K=K!="object"?K:Ie?Array.isArray(Ie)?"array":K:"null",K=="array"||K=="object"&&typeof Ie.length=="number"){K=T.length||0;const We=Ie.length||0;T.length=K+We;for(let Nt=0;Nt<We;Nt++)T[K+Nt]=Ie[Nt]}else T.push(Ie)}}class E{constructor(q,K){this.i=q,this.j=K,this.h=0,this.g=null}get(){let q;return this.h>0?(this.h--,q=this.g,this.g=q.next,q.next=null):q=this.i(),q}}function S(T){s.setTimeout(()=>{throw T},0)}function w(){var T=U;let q=null;return T.g&&(q=T.g,T.g=T.g.next,T.g||(T.h=null),q.next=null),q}class R{constructor(){this.h=this.g=null}add(q,K){const le=N.get();le.set(q,K),this.h?this.h.next=le:this.g=le,this.h=le}}var N=new E(()=>new O,T=>T.reset());class O{constructor(){this.next=this.g=this.h=null}set(q,K){this.h=q,this.g=K,this.next=null}reset(){this.next=this.g=this.h=null}}let z,k=!1,U=new R,P=()=>{const T=Promise.resolve(void 0);z=()=>{T.then(C)}};function C(){for(var T;T=w();){try{T.h.call(T.g)}catch(K){S(K)}var q=N;q.j(T),q.h<100&&(q.h++,T.next=q.g,q.g=T)}k=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(T,q){this.type=T,this.g=this.target=q,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var T=!1,q=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const K=()=>{};s.addEventListener("test",K,q),s.removeEventListener("test",K,q)}catch{}return T})();function V(T){return/^[\s\xa0]*$/.test(T)}function Q(T,q){j.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T&&this.init(T,q)}p(Q,j),Q.prototype.init=function(T,q){const K=this.type=T.type,le=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;this.target=T.target||T.srcElement,this.g=q,q=T.relatedTarget,q||(K=="mouseover"?q=T.fromElement:K=="mouseout"&&(q=T.toElement)),this.relatedTarget=q,le?(this.clientX=le.clientX!==void 0?le.clientX:le.pageX,this.clientY=le.clientY!==void 0?le.clientY:le.pageY,this.screenX=le.screenX||0,this.screenY=le.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=T.pointerType,this.state=T.state,this.i=T,T.defaultPrevented&&Q.Z.h.call(this)},Q.prototype.h=function(){Q.Z.h.call(this);const T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var J="closure_listenable_"+(Math.random()*1e6|0),W=0;function $(T,q,K,le,Ie){this.listener=T,this.proxy=null,this.src=q,this.type=K,this.capture=!!le,this.ha=Ie,this.key=++W,this.da=this.fa=!1}function se(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function ce(T,q,K){for(const le in T)q.call(K,T[le],le,T)}function fe(T,q){for(const K in T)q.call(void 0,T[K],K,T)}function Z(T){const q={};for(const K in T)q[K]=T[K];return q}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(T,q){let K,le;for(let Ie=1;Ie<arguments.length;Ie++){le=arguments[Ie];for(K in le)T[K]=le[K];for(let We=0;We<re.length;We++)K=re[We],Object.prototype.hasOwnProperty.call(le,K)&&(T[K]=le[K])}}function ve(T){this.src=T,this.g={},this.h=0}ve.prototype.add=function(T,q,K,le,Ie){const We=T.toString();T=this.g[We],T||(T=this.g[We]=[],this.h++);const Nt=ye(T,q,le,Ie);return Nt>-1?(q=T[Nt],K||(q.fa=!1)):(q=new $(q,this.src,We,!!le,Ie),q.fa=K,T.push(q)),q};function pe(T,q){const K=q.type;if(K in T.g){var le=T.g[K],Ie=Array.prototype.indexOf.call(le,q,void 0),We;(We=Ie>=0)&&Array.prototype.splice.call(le,Ie,1),We&&(se(q),T.g[K].length==0&&(delete T.g[K],T.h--))}}function ye(T,q,K,le){for(let Ie=0;Ie<T.length;++Ie){const We=T[Ie];if(!We.da&&We.listener==q&&We.capture==!!K&&We.ha==le)return Ie}return-1}var Ee="closure_lm_"+(Math.random()*1e6|0),Xe={};function me(T,q,K,le,Ie){if(Array.isArray(q)){for(let We=0;We<q.length;We++)me(T,q[We],K,le,Ie);return null}return K=oe(K),T&&T[J]?T.J(q,K,o(le)?!!le.capture:!1,Ie):qe(T,q,K,!1,le,Ie)}function qe(T,q,K,le,Ie,We){if(!q)throw Error("Invalid event type");const Nt=o(Ie)?!!Ie.capture:!!Ie;let _n=Fe(T);if(_n||(T[Ee]=_n=new ve(T)),K=_n.add(q,K,le,Nt,We),K.proxy)return K;if(le=mt(),K.proxy=le,le.src=T,le.listener=K,T.addEventListener)B||(Ie=Nt),Ie===void 0&&(Ie=!1),T.addEventListener(q.toString(),le,Ie);else if(T.attachEvent)T.attachEvent(Re(q.toString()),le);else if(T.addListener&&T.removeListener)T.addListener(le);else throw Error("addEventListener and attachEvent are unavailable.");return K}function mt(){function T(K){return q.call(T.src,T.listener,K)}const q=Me;return T}function Ue(T,q,K,le,Ie){if(Array.isArray(q))for(var We=0;We<q.length;We++)Ue(T,q[We],K,le,Ie);else le=o(le)?!!le.capture:!!le,K=oe(K),T&&T[J]?(T=T.i,We=String(q).toString(),We in T.g&&(q=T.g[We],K=ye(q,K,le,Ie),K>-1&&(se(q[K]),Array.prototype.splice.call(q,K,1),q.length==0&&(delete T.g[We],T.h--)))):T&&(T=Fe(T))&&(q=T.g[q.toString()],T=-1,q&&(T=ye(q,K,le,Ie)),(K=T>-1?q[T]:null)&&De(K))}function De(T){if(typeof T!="number"&&T&&!T.da){var q=T.src;if(q&&q[J])pe(q.i,T);else{var K=T.type,le=T.proxy;q.removeEventListener?q.removeEventListener(K,le,T.capture):q.detachEvent?q.detachEvent(Re(K),le):q.addListener&&q.removeListener&&q.removeListener(le),(K=Fe(q))?(pe(K,T),K.h==0&&(K.src=null,q[Ee]=null)):se(T)}}}function Re(T){return T in Xe?Xe[T]:Xe[T]="on"+T}function Me(T,q){if(T.da)T=!0;else{q=new Q(q,this);const K=T.listener,le=T.ha||T.src;T.fa&&De(T),T=K.call(le,q)}return T}function Fe(T){return T=T[Ee],T instanceof ve?T:null}var Ze="__closure_events_fn_"+(Math.random()*1e9>>>0);function oe(T){return typeof T=="function"?T:(T[Ze]||(T[Ze]=function(q){return T.handleEvent(q)}),T[Ze])}function yt(){L.call(this),this.i=new ve(this),this.M=this,this.G=null}p(yt,L),yt.prototype[J]=!0,yt.prototype.removeEventListener=function(T,q,K,le){Ue(this,T,q,K,le)};function at(T,q){var K,le=T.G;if(le)for(K=[];le;le=le.G)K.push(le);if(T=T.M,le=q.type||q,typeof q=="string")q=new j(q,T);else if(q instanceof j)q.target=q.target||T;else{var Ie=q;q=new j(le,T),de(q,Ie)}Ie=!0;let We,Nt;if(K)for(Nt=K.length-1;Nt>=0;Nt--)We=q.g=K[Nt],Ie=Tt(We,le,!0,q)&&Ie;if(We=q.g=T,Ie=Tt(We,le,!0,q)&&Ie,Ie=Tt(We,le,!1,q)&&Ie,K)for(Nt=0;Nt<K.length;Nt++)We=q.g=K[Nt],Ie=Tt(We,le,!1,q)&&Ie}yt.prototype.N=function(){if(yt.Z.N.call(this),this.i){var T=this.i;for(const q in T.g){const K=T.g[q];for(let le=0;le<K.length;le++)se(K[le]);delete T.g[q],T.h--}}this.G=null},yt.prototype.J=function(T,q,K,le){return this.i.add(String(T),q,!1,K,le)},yt.prototype.K=function(T,q,K,le){return this.i.add(String(T),q,!0,K,le)};function Tt(T,q,K,le){if(q=T.i.g[String(q)],!q)return!0;q=q.concat();let Ie=!0;for(let We=0;We<q.length;++We){const Nt=q[We];if(Nt&&!Nt.da&&Nt.capture==K){const _n=Nt.listener,ri=Nt.ha||Nt.src;Nt.fa&&pe(T.i,Nt),Ie=_n.call(ri,le)!==!1&&Ie}}return Ie&&!le.defaultPrevented}function ct(T,q){if(typeof T!="function")if(T&&typeof T.handleEvent=="function")T=f(T.handleEvent,T);else throw Error("Invalid listener argument");return Number(q)>2147483647?-1:s.setTimeout(T,q||0)}function ae(T){T.g=ct(()=>{T.g=null,T.i&&(T.i=!1,ae(T))},T.l);const q=T.h;T.h=null,T.m.apply(null,q)}class Y extends L{constructor(q,K){super(),this.m=q,this.l=K,this.h=null,this.i=!1,this.g=null}j(q){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xe(T){L.call(this),this.h=T,this.g={}}p(xe,L);var ke=[];function et(T){ce(T.g,function(q,K){this.g.hasOwnProperty(K)&&De(q)},T),T.g={}}xe.prototype.N=function(){xe.Z.N.call(this),et(this)},xe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ne=s.JSON.stringify,It=s.JSON.parse,rt=class{stringify(T){return s.JSON.stringify(T,void 0)}parse(T){return s.JSON.parse(T,void 0)}};function Pt(){}function Ot(){}var it={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function tt(){j.call(this,"d")}p(tt,j);function Mt(){j.call(this,"c")}p(Mt,j);var he={},Le=null;function bt(){return Le=Le||new yt}he.Ia="serverreachability";function ge(T){j.call(this,he.Ia,T)}p(ge,j);function dt(T){const q=bt();at(q,new ge(q))}he.STAT_EVENT="statevent";function pt(T,q){j.call(this,he.STAT_EVENT,T),this.stat=q}p(pt,j);function ht(T){const q=bt();at(q,new pt(q,T))}he.Ja="timingevent";function st(T,q){j.call(this,he.Ja,T),this.size=q}p(st,j);function Qe(T,q){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){T()},q)}function gt(){this.g=!0}gt.prototype.ua=function(){this.g=!1};function Wt(T,q,K,le,Ie,We){T.info(function(){if(T.g)if(We){var Nt="",_n=We.split("&");for(let Wn=0;Wn<_n.length;Wn++){var ri=_n[Wn].split("=");if(ri.length>1){const Ur=ri[0];ri=ri[1];const Va=Ur.split("_");Nt=Va.length>=2&&Va[1]=="type"?Nt+(Ur+"="+ri+"&"):Nt+(Ur+"=redacted&")}}}else Nt=null;else Nt=We;return"XMLHTTP REQ ("+le+") [attempt "+Ie+"]: "+q+`
`+K+`
`+Nt})}function nn(T,q,K,le,Ie,We,Nt){T.info(function(){return"XMLHTTP RESP ("+le+") [ attempt "+Ie+"]: "+q+`
`+K+`
`+We+" "+Nt})}function Kt(T,q,K,le){T.info(function(){return"XMLHTTP TEXT ("+q+"): "+Tr(T,K)+(le?" "+le:"")})}function Ar(T,q){T.info(function(){return"TIMEOUT: "+q})}gt.prototype.info=function(){};function Tr(T,q){if(!T.g)return q;if(!q)return null;try{const We=JSON.parse(q);if(We){for(T=0;T<We.length;T++)if(Array.isArray(We[T])){var K=We[T];if(!(K.length<2)){var le=K[1];if(Array.isArray(le)&&!(le.length<1)){var Ie=le[0];if(Ie!="noop"&&Ie!="stop"&&Ie!="close")for(let Nt=1;Nt<le.length;Nt++)le[Nt]=""}}}}return Ne(We)}catch{return q}}var oa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},fs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ho;function ds(){}p(ds,Pt),ds.prototype.g=function(){return new XMLHttpRequest},ho=new ds;function la(T){return encodeURIComponent(String(T))}function Wo(T){var q=1;T=T.split(":");const K=[];for(;q>0&&T.length;)K.push(T.shift()),q--;return T.length&&K.push(T.join(":")),K}function Mr(T,q,K,le){this.j=T,this.i=q,this.l=K,this.S=le||1,this.V=new xe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Hi}function Hi(){this.i=null,this.g="",this.h=!1}var br={},kr={};function Ni(T,q,K){T.M=1,T.A=Se(Dt(q)),T.u=K,T.R=!0,Gi(T,null)}function Gi(T,q){T.F=Date.now(),qi(T),T.B=Dt(T.A);var K=T.B,le=T.S;Array.isArray(le)||(le=[String(le)]),xi(K.i,"t",le),T.C=0,K=T.j.L,T.h=new Hi,T.g=Np(T.j,K?q:null,!T.u),T.P>0&&(T.O=new Y(f(T.Y,T,T.g),T.P)),q=T.V,K=T.g,le=T.ba;var Ie="readystatechange";Array.isArray(Ie)||(Ie&&(ke[0]=Ie.toString()),Ie=ke);for(let We=0;We<Ie.length;We++){const Nt=me(K,Ie[We],le||q.handleEvent,!1,q.h||q);if(!Nt)break;q.g[Nt.key]=Nt}q=T.J?Z(T.J):{},T.u?(T.v||(T.v="POST"),q["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.B,T.v,T.u,q)):(T.v="GET",T.g.ea(T.B,T.v,null,q)),dt(),Wt(T.i,T.v,T.B,T.l,T.S,T.u)}Mr.prototype.ba=function(T){T=T.target;const q=this.O;q&&Yo(T)==3?q.j():this.Y(T)},Mr.prototype.Y=function(T){try{if(T==this.g)e:{const _n=Yo(this.g),ri=this.g.ya(),Wn=this.g.ca();if(!(_n<3)&&(_n!=3||this.g&&(this.h.h||this.g.la()||$i(this.g)))){this.K||_n!=4||ri==7||(ri==8||Wn<=0?dt(3):dt(2)),Fa(this);var q=this.g.ca();this.X=q;var K=ca(this);if(this.o=q==200,nn(this.i,this.v,this.B,this.l,this.S,_n,q),this.o){if(this.U&&!this.L){t:{if(this.g){var le,Ie=this.g;if((le=Ie.g?Ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(le)){var We=le;break t}}We=null}if(T=We)Kt(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,fa(this,T);else{this.o=!1,this.m=3,ht(12),Wi(this),ua(this);break e}}if(this.R){T=!0;let Ur;for(;!this.K&&this.C<K.length;)if(Ur=$o(this,K),Ur==kr){_n==4&&(this.m=4,ht(14),T=!1),Kt(this.i,this.l,null,"[Incomplete Response]");break}else if(Ur==br){this.m=4,ht(15),Kt(this.i,this.l,K,"[Invalid Chunk]"),T=!1;break}else Kt(this.i,this.l,Ur,null),fa(this,Ur);if(zs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_n!=4||K.length!=0||this.h.h||(this.m=1,ht(16),T=!1),this.o=this.o&&T,!T)Kt(this.i,this.l,K,"[Invalid Chunked Response]"),Wi(this),ua(this);else if(K.length>0&&!this.W){this.W=!0;var Nt=this.j;Nt.g==this&&Nt.aa&&!Nt.P&&(Nt.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),Bd(Nt),Nt.P=!0,ht(11))}}else Kt(this.i,this.l,K,null),fa(this,K);_n==4&&Wi(this),this.o&&!this.K&&(_n==4?Rp(this.j,this):(this.o=!1,qi(this)))}else xl(this.g),q==400&&K.indexOf("Unknown SID")>0?(this.m=3,ht(12)):(this.m=0,ht(13)),Wi(this),ua(this)}}}catch{}finally{}};function ca(T){if(!zs(T))return T.g.la();const q=$i(T.g);if(q==="")return"";let K="";const le=q.length,Ie=Yo(T.g)==4;if(!T.h.i){if(typeof TextDecoder>"u")return Wi(T),ua(T),"";T.h.i=new s.TextDecoder}for(let We=0;We<le;We++)T.h.h=!0,K+=T.h.i.decode(q[We],{stream:!(Ie&&We==le-1)});return q.length=0,T.h.g+=K,T.C=0,T.h.g}function zs(T){return T.g?T.v=="GET"&&T.M!=2&&T.j.Aa:!1}function $o(T,q){var K=T.C,le=q.indexOf(`
`,K);return le==-1?kr:(K=Number(q.substring(K,le)),isNaN(K)?br:(le+=1,le+K>q.length?kr:(q=q.slice(le,le+K),T.C=le+K,q)))}Mr.prototype.cancel=function(){this.K=!0,Wi(this)};function qi(T){T.T=Date.now()+T.H,hs(T,T.H)}function hs(T,q){if(T.D!=null)throw Error("WatchDog timer not null");T.D=Qe(f(T.aa,T),q)}function Fa(T){T.D&&(s.clearTimeout(T.D),T.D=null)}Mr.prototype.aa=function(){this.D=null;const T=Date.now();T-this.T>=0?(Ar(this.i,this.B),this.M!=2&&(dt(),ht(17)),Wi(this),this.m=2,ua(this)):hs(this,this.T-T)};function ua(T){T.j.I==0||T.K||Rp(T.j,T)}function Wi(T){Fa(T);var q=T.O;q&&typeof q.dispose=="function"&&q.dispose(),T.O=null,et(T.V),T.g&&(q=T.g,T.g=null,q.abort(),q.dispose())}function fa(T,q){try{var K=T.j;if(K.I!=0&&(K.g==T||Ce(K.h,T))){if(!T.L&&Ce(K.h,T)&&K.I==3){try{var le=K.Ba.g.parse(q)}catch{le=null}if(Array.isArray(le)&&le.length==3){var Ie=le;if(Ie[0]==0){e:if(!K.v){if(K.g)if(K.g.F+3e3<T.F)Vd(K),_l(K);else break e;iu(K),ht(18)}}else K.xa=Ie[1],0<K.xa-K.K&&Ie[2]<37500&&K.F&&K.A==0&&!K.C&&(K.C=Qe(f(K.Va,K),6e3));ze(K.h)<=1&&K.ta&&(K.ta=void 0)}else go(K,11)}else if((T.L||K.g==T)&&Vd(K),!V(q))for(Ie=K.Ba.g.parse(q),q=0;q<Ie.length;q++){let Wn=Ie[q];const Ur=Wn[0];if(!(Ur<=K.K))if(K.K=Ur,Wn=Wn[1],K.I==2)if(Wn[0]=="c"){K.M=Wn[1],K.ba=Wn[2];const Va=Wn[3];Va!=null&&(K.ka=Va,K.j.info("VER="+K.ka));const Qo=Wn[4];Qo!=null&&(K.za=Qo,K.j.info("SVER="+K.za));const Jo=Wn[5];Jo!=null&&typeof Jo=="number"&&Jo>0&&(le=1.5*Jo,K.O=le,K.j.info("backChannelRequestTimeoutMs_="+le)),le=K;const ps=T.g;if(ps){const hc=ps.g?ps.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hc){var We=le.h;We.g||hc.indexOf("spdy")==-1&&hc.indexOf("quic")==-1&&hc.indexOf("h2")==-1||(We.j=We.l,We.g=new Set,We.h&&(At(We,We.h),We.h=null))}if(le.G){const wf=ps.g?ps.g.getResponseHeader("X-HTTP-Session-Id"):null;wf&&(le.wa=wf,ne(le.J,le.G,wf))}}K.I=3,K.l&&K.l.ra(),K.aa&&(K.T=Date.now()-T.F,K.j.info("Handshake RTT: "+K.T+"ms")),le=K;var Nt=T;if(le.na=Pp(le,le.L?le.ba:null,le.W),Nt.L){Lt(le.h,Nt);var _n=Nt,ri=le.O;ri&&(_n.H=ri),_n.D&&(Fa(_n),qi(_n)),le.g=Nt}else jd(le);K.i.length>0&&Zo(K)}else Wn[0]!="stop"&&Wn[0]!="close"||go(K,7);else K.I==3&&(Wn[0]=="stop"||Wn[0]=="close"?Wn[0]=="stop"?go(K,7):Fd(K):Wn[0]!="noop"&&K.l&&K.l.qa(Wn),K.A=0)}}dt(4)}catch{}}var te=class{constructor(T,q){this.g=T,this.map=q}};function Ae(T){this.l=T||10,s.PerformanceNavigationTiming?(T=s.performance.getEntriesByType("navigation"),T=T.length>0&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function He(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function ze(T){return T.h?1:T.g?T.g.size:0}function Ce(T,q){return T.h?T.h==q:T.g?T.g.has(q):!1}function At(T,q){T.g?T.g.add(q):T.h=q}function Lt(T,q){T.h&&T.h==q?T.h=null:T.g&&T.g.has(q)&&T.g.delete(q)}Ae.prototype.cancel=function(){if(this.i=St(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function St(T){if(T.h!=null)return T.i.concat(T.h.G);if(T.g!=null&&T.g.size!==0){let q=T.i;for(const K of T.g.values())q=q.concat(K.G);return q}return y(T.i)}var Ft=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jt(T,q){if(T){T=T.split("&");for(let K=0;K<T.length;K++){const le=T[K].indexOf("=");let Ie,We=null;le>=0?(Ie=T[K].substring(0,le),We=T[K].substring(le+1)):Ie=T[K],q(Ie,We?decodeURIComponent(We.replace(/\+/g," ")):"")}}}function Ht(T){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let q;T instanceof Ht?(this.l=T.l,Yt(this,T.j),this.o=T.o,this.g=T.g,En(this,T.u),this.h=T.h,rr(this,lc(T.i)),this.m=T.m):T&&(q=String(T).match(Ft))?(this.l=!1,Yt(this,q[1]||"",!0),this.o=Te(q[2]||""),this.g=Te(q[3]||"",!0),En(this,q[4]),this.h=Te(q[5]||"",!0),rr(this,q[6]||"",!0),this.m=Te(q[7]||"")):(this.l=!1,this.i=new ir(null,this.l))}Ht.prototype.toString=function(){const T=[];var q=this.j;q&&T.push(_t(q,Zt,!0),":");var K=this.g;return(K||q=="file")&&(T.push("//"),(q=this.o)&&T.push(_t(q,Zt,!0),"@"),T.push(la(K).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),K=this.u,K!=null&&T.push(":",String(K))),(K=this.h)&&(this.g&&K.charAt(0)!="/"&&T.push("/"),T.push(_t(K,K.charAt(0)=="/"?dn:Yn,!0))),(K=this.i.toString())&&T.push("?",K),(K=this.m)&&T.push("#",_t(K,hn)),T.join("")},Ht.prototype.resolve=function(T){const q=Dt(this);let K=!!T.j;K?Yt(q,T.j):K=!!T.o,K?q.o=T.o:K=!!T.g,K?q.g=T.g:K=T.u!=null;var le=T.h;if(K)En(q,T.u);else if(K=!!T.h){if(le.charAt(0)!="/")if(this.g&&!this.h)le="/"+le;else{var Ie=q.h.lastIndexOf("/");Ie!=-1&&(le=q.h.slice(0,Ie+1)+le)}if(Ie=le,Ie==".."||Ie==".")le="";else if(Ie.indexOf("./")!=-1||Ie.indexOf("/.")!=-1){le=Ie.lastIndexOf("/",0)==0,Ie=Ie.split("/");const We=[];for(let Nt=0;Nt<Ie.length;){const _n=Ie[Nt++];_n=="."?le&&Nt==Ie.length&&We.push(""):_n==".."?((We.length>1||We.length==1&&We[0]!="")&&We.pop(),le&&Nt==Ie.length&&We.push("")):(We.push(_n),le=!0)}le=We.join("/")}else le=Ie}return K?q.h=le:K=T.i.toString()!=="",K?rr(q,lc(T.i)):K=!!T.m,K&&(q.m=T.m),q};function Dt(T){return new Ht(T)}function Yt(T,q,K){T.j=K?Te(q,!0):q,T.j&&(T.j=T.j.replace(/:$/,""))}function En(T,q){if(q){if(q=Number(q),isNaN(q)||q<0)throw Error("Bad port number "+q);T.u=q}else T.u=null}function rr(T,q,K){q instanceof ir?(T.i=q,js(T.i,T.l)):(K||(q=_t(q,Gn)),T.i=new ir(q,T.l))}function ne(T,q,K){T.i.set(q,K)}function Se(T){return ne(T,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),T}function Te(T,q){return T?q?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function _t(T,q,K){return typeof T=="string"?(T=encodeURI(T).replace(q,wt),K&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function wt(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var Zt=/[#\/\?@]/g,Yn=/[#\?:]/g,dn=/[#\?]/g,Gn=/[#\?@]/g,hn=/#/g;function ir(T,q){this.h=this.g=null,this.i=T||null,this.j=!!q}function qn(T){T.g||(T.g=new Map,T.h=0,T.i&&jt(T.i,function(q,K){T.add(decodeURIComponent(q.replace(/\+/g," ")),K)}))}n=ir.prototype,n.add=function(T,q){qn(this),this.i=null,T=Sa(this,T);let K=this.g.get(T);return K||this.g.set(T,K=[]),K.push(q),this.h+=1,this};function xr(T,q){qn(T),q=Sa(T,q),T.g.has(q)&&(T.i=null,T.h-=T.g.get(q).length,T.g.delete(q))}function Rr(T,q){return qn(T),q=Sa(T,q),T.g.has(q)}n.forEach=function(T,q){qn(this),this.g.forEach(function(K,le){K.forEach(function(Ie){T.call(q,Ie,le,this)},this)},this)};function za(T,q){qn(T);let K=[];if(typeof q=="string")Rr(T,q)&&(K=K.concat(T.g.get(Sa(T,q))));else for(T=Array.from(T.g.values()),q=0;q<T.length;q++)K=K.concat(T[q]);return K}n.set=function(T,q){return qn(this),this.i=null,T=Sa(this,T),Rr(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[q]),this.h+=1,this},n.get=function(T,q){return T?(T=za(this,T),T.length>0?String(T[0]):q):q};function xi(T,q,K){xr(T,q),K.length>0&&(T.i=null,T.g.set(Sa(T,q),y(K)),T.h+=K.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],q=Array.from(this.g.keys());for(let le=0;le<q.length;le++){var K=q[le];const Ie=la(K);K=za(this,K);for(let We=0;We<K.length;We++){let Nt=Ie;K[We]!==""&&(Nt+="="+la(K[We])),T.push(Nt)}}return this.i=T.join("&")};function lc(T){const q=new ir;return q.i=T.i,T.g&&(q.g=new Map(T.g),q.h=T.h),q}function Sa(T,q){return q=String(q),T.j&&(q=q.toLowerCase()),q}function js(T,q){q&&!T.j&&(qn(T),T.i=null,T.g.forEach(function(K,le){const Ie=le.toLowerCase();le!=Ie&&(xr(this,le),xi(this,Ie,K))},T)),T.j=q}function ja(T,q){const K=new gt;if(s.Image){const le=new Image;le.onload=d(Bs,K,"TestLoadImage: loaded",!0,q,le),le.onerror=d(Bs,K,"TestLoadImage: error",!1,q,le),le.onabort=d(Bs,K,"TestLoadImage: abort",!1,q,le),le.ontimeout=d(Bs,K,"TestLoadImage: timeout",!1,q,le),s.setTimeout(function(){le.ontimeout&&le.ontimeout()},1e4),le.src=T}else q(!1)}function kd(T,q){const K=new gt,le=new AbortController,Ie=setTimeout(()=>{le.abort(),Bs(K,"TestPingServer: timeout",!1,q)},1e4);fetch(T,{signal:le.signal}).then(We=>{clearTimeout(Ie),We.ok?Bs(K,"TestPingServer: ok",!0,q):Bs(K,"TestPingServer: server error",!1,q)}).catch(()=>{clearTimeout(Ie),Bs(K,"TestPingServer: error",!1,q)})}function Bs(T,q,K,le,Ie){try{Ie&&(Ie.onload=null,Ie.onerror=null,Ie.onabort=null,Ie.ontimeout=null),le(K)}catch{}}function cc(){this.g=new rt}function po(T){this.i=T.Sb||null,this.h=T.ab||!1}p(po,Pt),po.prototype.g=function(){return new Jc(this.i,this.h)};function Jc(T,q){yt.call(this),this.H=T,this.o=q,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Jc,yt),n=Jc.prototype,n.open=function(T,q){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=T,this.D=q,this.readyState=1,mo(this)},n.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const q={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};T&&(q.body=T),(this.H||s).fetch(new Request(this.D,q)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,uc(this)),this.readyState=0},n.Pa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,mo(this)),this.g&&(this.readyState=3,mo(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;yf(this)}else T.text().then(this.Oa.bind(this),this.ga.bind(this))};function yf(T){T.j.read().then(T.Ma.bind(T)).catch(T.ga.bind(T))}n.Ma=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var q=T.value?T.value:new Uint8Array(0);(q=this.B.decode(q,{stream:!T.done}))&&(this.response=this.responseText+=q)}T.done?uc(this):mo(this),this.readyState==3&&yf(this)}},n.Oa=function(T){this.g&&(this.response=this.responseText=T,uc(this))},n.Na=function(T){this.g&&(this.response=T,uc(this))},n.ga=function(){this.g&&uc(this)};function uc(T){T.readyState=4,T.l=null,T.j=null,T.B=null,mo(T)}n.setRequestHeader=function(T,q){this.A.append(T,q)},n.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],q=this.h.entries();for(var K=q.next();!K.done;)K=K.value,T.push(K[0]+": "+K[1]),K=q.next();return T.join(`\r
`)};function mo(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(Jc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function Vs(T){let q="";return ce(T,function(K,le){q+=le,q+=":",q+=K,q+=`\r
`}),q}function bf(T,q,K){e:{for(le in K){var le=!1;break e}le=!0}le||(K=Vs(K),typeof T=="string"?K!=null&&la(K):ne(T,q,K))}function pr(T){yt.call(this),this.headers=new Map,this.L=T||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(pr,yt);var Ba=/^https?$/i,Ud=["POST","PUT"];n=pr.prototype,n.Fa=function(T){this.H=T},n.ea=function(T,q,K,le){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);q=q?q.toUpperCase():"GET",this.D=T,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ho.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(q,String(T),!0),this.B=!1}catch(We){bl(this,We);return}if(T=K||"",K=new Map(this.headers),le)if(Object.getPrototypeOf(le)===Object.prototype)for(var Ie in le)K.set(Ie,le[Ie]);else if(typeof le.keys=="function"&&typeof le.get=="function")for(const We of le.keys())K.set(We,le.get(We));else throw Error("Unknown input type for opt_headers: "+String(le));le=Array.from(K.keys()).find(We=>We.toLowerCase()=="content-type"),Ie=s.FormData&&T instanceof s.FormData,!(Array.prototype.indexOf.call(Ud,q,void 0)>=0)||le||Ie||K.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[We,Nt]of K)this.g.setRequestHeader(We,Nt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(T),this.v=!1}catch(We){bl(this,We)}};function bl(T,q){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=q,T.o=5,eu(T),Xo(T)}function eu(T){T.A||(T.A=!0,at(T,"complete"),at(T,"error"))}n.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=T||7,at(this,"complete"),at(this,"abort"),Xo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xo(this,!0)),pr.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?tu(this):this.Xa())},n.Xa=function(){tu(this)};function tu(T){if(T.h&&typeof a<"u"){if(T.v&&Yo(T)==4)setTimeout(T.Ca.bind(T),0);else if(at(T,"readystatechange"),Yo(T)==4){T.h=!1;try{const We=T.ca();e:switch(We){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var q=!0;break e;default:q=!1}var K;if(!(K=q)){var le;if(le=We===0){let Nt=String(T.D).match(Ft)[1]||null;!Nt&&s.self&&s.self.location&&(Nt=s.self.location.protocol.slice(0,-1)),le=!Ba.test(Nt?Nt.toLowerCase():"")}K=le}if(K)at(T,"complete"),at(T,"success");else{T.o=6;try{var Ie=Yo(T)>2?T.g.statusText:""}catch{Ie=""}T.l=Ie+" ["+T.ca()+"]",eu(T)}}finally{Xo(T)}}}}function Xo(T,q){if(T.g){T.m&&(clearTimeout(T.m),T.m=null);const K=T.g;T.g=null,q||at(T,"ready");try{K.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Yo(T){return T.g?T.g.readyState:0}n.ca=function(){try{return Yo(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(T){if(this.g){var q=this.g.responseText;return T&&q.indexOf(T)==0&&(q=q.substring(T.length)),It(q)}};function $i(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.F){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function xl(T){const q={};T=(T.g&&Yo(T)>=2&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let le=0;le<T.length;le++){if(V(T[le]))continue;var K=Wo(T[le]);const Ie=K[0];if(K=K[1],typeof K!="string")continue;K=K.trim();const We=q[Ie]||[];q[Ie]=We,We.push(K)}fe(q,function(le){return le.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ko(T,q,K){return K&&K.internalChannelParams&&K.internalChannelParams[T]||q}function fc(T){this.za=0,this.i=[],this.j=new gt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ko("failFast",!1,T),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ko("baseRetryDelayMs",5e3,T),this.Za=Ko("retryDelaySeedMs",1e4,T),this.Ta=Ko("forwardChannelMaxRetries",2,T),this.va=Ko("forwardChannelRequestTimeoutMs",2e4,T),this.ma=T&&T.xmlHttpFactory||void 0,this.Ua=T&&T.Rb||void 0,this.Aa=T&&T.useFetchStreams||!1,this.O=void 0,this.L=T&&T.supportsCrossDomainXhr||!1,this.M="",this.h=new Ae(T&&T.concurrentRequestLimit),this.Ba=new cc,this.S=T&&T.fastHandshake||!1,this.R=T&&T.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=T&&T.Pb||!1,T&&T.ua&&this.j.ua(),T&&T.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&T&&T.detectBufferingProxy||!1,this.ia=void 0,T&&T.longPollingTimeout&&T.longPollingTimeout>0&&(this.ia=T.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=fc.prototype,n.ka=8,n.I=1,n.connect=function(T,q,K,le){ht(0),this.W=T,this.H=q||{},K&&le!==void 0&&(this.H.OSID=K,this.H.OAID=le),this.F=this.X,this.J=Pp(this,null,this.W),Zo(this)};function Fd(T){if(xf(T),T.I==3){var q=T.V++,K=Dt(T.J);if(ne(K,"SID",T.M),ne(K,"RID",q),ne(K,"TYPE","terminate"),ru(T,K),q=new Mr(T,T.j,q),q.M=2,q.A=Se(Dt(K)),K=!1,s.navigator&&s.navigator.sendBeacon)try{K=s.navigator.sendBeacon(q.A.toString(),"")}catch{}!K&&s.Image&&(new Image().src=q.A,K=!0),K||(q.g=Np(q.j,null),q.g.ea(q.A)),q.F=Date.now(),qi(q)}_f(T)}function _l(T){T.g&&(Bd(T),T.g.cancel(),T.g=null)}function xf(T){_l(T),T.v&&(s.clearTimeout(T.v),T.v=null),Vd(T),T.h.cancel(),T.m&&(typeof T.m=="number"&&s.clearTimeout(T.m),T.m=null)}function Zo(T){if(!He(T.h)&&!T.m){T.m=!0;var q=T.Ea;z||P(),k||(z(),k=!0),U.add(q,T),T.D=0}}function nu(T,q){return ze(T.h)>=T.h.j-(T.m?1:0)?!1:T.m?(T.i=q.G.concat(T.i),!0):T.I==1||T.I==2||T.D>=(T.Sa?0:T.Ta)?!1:(T.m=Qe(f(T.Ea,T,q),au(T,T.D)),T.D++,!0)}n.Ea=function(T){if(this.m)if(this.m=null,this.I==1){if(!T){this.V=Math.floor(Math.random()*1e5),T=this.V++;const Ie=new Mr(this,this.j,T);let We=this.o;if(this.U&&(We?(We=Z(We),de(We,this.U)):We=this.U),this.u!==null||this.R||(Ie.J=We,We=null),this.S)e:{for(var q=0,K=0;K<this.i.length;K++){t:{var le=this.i[K];if("__data__"in le.map&&(le=le.map.__data__,typeof le=="string")){le=le.length;break t}le=void 0}if(le===void 0)break;if(q+=le,q>4096){q=K;break e}if(q===4096||K===this.i.length-1){q=K+1;break e}}q=1e3}else q=1e3;q=Ip(this,Ie,q),K=Dt(this.J),ne(K,"RID",T),ne(K,"CVER",22),this.G&&ne(K,"X-HTTP-Session-Id",this.G),ru(this,K),We&&(this.R?q="headers="+la(Vs(We))+"&"+q:this.u&&bf(K,this.u,We)),At(this.h,Ie),this.Ra&&ne(K,"TYPE","init"),this.S?(ne(K,"$req",q),ne(K,"SID","null"),Ie.U=!0,Ni(Ie,K,null)):Ni(Ie,K,q),this.I=2}}else this.I==3&&(T?zd(this,T):this.i.length==0||He(this.h)||zd(this))};function zd(T,q){var K;q?K=q.l:K=T.V++;const le=Dt(T.J);ne(le,"SID",T.M),ne(le,"RID",K),ne(le,"AID",T.K),ru(T,le),T.u&&T.o&&bf(le,T.u,T.o),K=new Mr(T,T.j,K,T.D+1),T.u===null&&(K.J=T.o),q&&(T.i=q.G.concat(T.i)),q=Ip(T,K,1e3),K.H=Math.round(T.va*.5)+Math.round(T.va*.5*Math.random()),At(T.h,K),Ni(K,le,q)}function ru(T,q){T.H&&ce(T.H,function(K,le){ne(q,le,K)}),T.l&&ce({},function(K,le){ne(q,le,K)})}function Ip(T,q,K){K=Math.min(T.i.length,K);const le=T.l?f(T.l.Ka,T.l,T):null;e:{var Ie=T.i;let _n=-1;for(;;){const ri=["count="+K];_n==-1?K>0?(_n=Ie[0].g,ri.push("ofs="+_n)):_n=0:ri.push("ofs="+_n);let Wn=!0;for(let Ur=0;Ur<K;Ur++){var We=Ie[Ur].g;const Va=Ie[Ur].map;if(We-=_n,We<0)_n=Math.max(0,Ie[Ur].g-100),Wn=!1;else try{We="req"+We+"_"||"";try{var Nt=Va instanceof Map?Va:Object.entries(Va);for(const[Qo,Jo]of Nt){let ps=Jo;o(Jo)&&(ps=Ne(Jo)),ri.push(We+Qo+"="+encodeURIComponent(ps))}}catch(Qo){throw ri.push(We+"type="+encodeURIComponent("_badmap")),Qo}}catch{le&&le(Va)}}if(Wn){Nt=ri.join("&");break e}}Nt=void 0}return T=T.i.splice(0,K),q.G=T,Nt}function jd(T){if(!T.g&&!T.v){T.Y=1;var q=T.Da;z||P(),k||(z(),k=!0),U.add(q,T),T.A=0}}function iu(T){return T.g||T.v||T.A>=3?!1:(T.Y++,T.v=Qe(f(T.Da,T),au(T,T.A)),T.A++,!0)}n.Da=function(){if(this.v=null,Ug(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var T=4*this.T;this.j.info("BP detection timer enabled: "+T),this.B=Qe(f(this.Wa,this),T)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ht(10),_l(this),Ug(this))};function Bd(T){T.B!=null&&(s.clearTimeout(T.B),T.B=null)}function Ug(T){T.g=new Mr(T,T.j,"rpc",T.Y),T.u===null&&(T.g.J=T.o),T.g.P=0;var q=Dt(T.na);ne(q,"RID","rpc"),ne(q,"SID",T.M),ne(q,"AID",T.K),ne(q,"CI",T.F?"0":"1"),!T.F&&T.ia&&ne(q,"TO",T.ia),ne(q,"TYPE","xmlhttp"),ru(T,q),T.u&&T.o&&bf(q,T.u,T.o),T.O&&(T.g.H=T.O);var K=T.g;T=T.ba,K.M=1,K.A=Se(Dt(q)),K.u=null,K.R=!0,Gi(K,T)}n.Va=function(){this.C!=null&&(this.C=null,_l(this),iu(this),ht(19))};function Vd(T){T.C!=null&&(s.clearTimeout(T.C),T.C=null)}function Rp(T,q){var K=null;if(T.g==q){Vd(T),Bd(T),T.g=null;var le=2}else if(Ce(T.h,q))K=q.G,Lt(T.h,q),le=1;else return;if(T.I!=0){if(q.o)if(le==1){K=q.u?q.u.length:0,q=Date.now()-q.F;var Ie=T.D;le=bt(),at(le,new st(le,K)),Zo(T)}else jd(T);else if(Ie=q.m,Ie==3||Ie==0&&q.X>0||!(le==1&&nu(T,q)||le==2&&iu(T)))switch(K&&K.length>0&&(q=T.h,q.i=q.i.concat(K)),Ie){case 1:go(T,5);break;case 4:go(T,10);break;case 3:go(T,6);break;default:go(T,2)}}}function au(T,q){let K=T.Qa+Math.floor(Math.random()*T.Za);return T.isActive()||(K*=2),K*q}function go(T,q){if(T.j.info("Error code "+q),q==2){var K=f(T.bb,T),le=T.Ua;const Ie=!le;le=new Ht(le||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Yt(le,"https"),Se(le),Ie?ja(le.toString(),K):kd(le.toString(),K)}else ht(2);T.I=0,T.l&&T.l.pa(q),_f(T),xf(T)}n.bb=function(T){T?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function _f(T){if(T.I=0,T.ja=[],T.l){const q=St(T.h);(q.length!=0||T.i.length!=0)&&(x(T.ja,q),x(T.ja,T.i),T.h.i.length=0,y(T.i),T.i.length=0),T.l.oa()}}function Pp(T,q,K){var le=K instanceof Ht?Dt(K):new Ht(K);if(le.g!="")q&&(le.g=q+"."+le.g),En(le,le.u);else{var Ie=s.location;le=Ie.protocol,q=q?q+"."+Ie.hostname:Ie.hostname,Ie=+Ie.port;const We=new Ht(null);le&&Yt(We,le),q&&(We.g=q),Ie&&En(We,Ie),K&&(We.h=K),le=We}return K=T.G,q=T.wa,K&&q&&ne(le,K,q),ne(le,"VER",T.ka),ru(T,le),le}function Np(T,q,K){if(q&&!T.L)throw Error("Can't create secondary domain capable XhrIo object.");return q=T.Aa&&!T.ma?new pr(new po({ab:K})):new pr(T.ma),q.Fa(T.L),q}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hd(){}n=Hd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function dc(){}dc.prototype.g=function(T,q){return new wa(T,q)};function wa(T,q){yt.call(this),this.g=new fc(q),this.l=T,this.h=q&&q.messageUrlParams||null,T=q&&q.messageHeaders||null,q&&q.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=q&&q.initMessageHeaders||null,q&&q.messageContentType&&(T?T["X-WebChannel-Content-Type"]=q.messageContentType:T={"X-WebChannel-Content-Type":q.messageContentType}),q&&q.sa&&(T?T["X-WebChannel-Client-Profile"]=q.sa:T={"X-WebChannel-Client-Profile":q.sa}),this.g.U=T,(T=q&&q.Qb)&&!V(T)&&(this.g.u=T),this.A=q&&q.supportsCrossDomainXhr||!1,this.v=q&&q.sendRawJson||!1,(q=q&&q.httpSessionIdParam)&&!V(q)&&(this.g.G=q,T=this.h,T!==null&&q in T&&(T=this.h,q in T&&delete T[q])),this.j=new wl(this)}p(wa,yt),wa.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wa.prototype.close=function(){Fd(this.g)},wa.prototype.o=function(T){var q=this.g;if(typeof T=="string"){var K={};K.__data__=T,T=K}else this.v&&(K={},K.__data__=Ne(T),T=K);q.i.push(new te(q.Ya++,T)),q.I==3&&Zo(q)},wa.prototype.N=function(){this.g.l=null,delete this.j,Fd(this.g),delete this.g,wa.Z.N.call(this)};function Sl(T){tt.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var q=T.__sm__;if(q){e:{for(const K in q){T=K;break e}T=void 0}(this.i=T)&&(T=this.i,q=q!==null&&T in q?q[T]:void 0),this.data=q}else this.data=T}p(Sl,tt);function Sf(){Mt.call(this),this.status=1}p(Sf,Mt);function wl(T){this.g=T}p(wl,Hd),wl.prototype.ra=function(){at(this.g,"a")},wl.prototype.qa=function(T){at(this.g,new Sl(T))},wl.prototype.pa=function(T){at(this.g,new Sf)},wl.prototype.oa=function(){at(this.g,"b")},dc.prototype.createWebChannel=dc.prototype.g,wa.prototype.send=wa.prototype.o,wa.prototype.open=wa.prototype.m,wa.prototype.close=wa.prototype.close,hH=function(){return new dc},dH=function(){return bt()},fH=he,QN={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},oa.NO_ERROR=0,oa.TIMEOUT=8,oa.HTTP_ERROR=6,fE=oa,fs.COMPLETE="complete",uH=fs,Ot.EventType=it,it.OPEN="a",it.CLOSE="b",it.ERROR="c",it.MESSAGE="d",yt.prototype.listen=yt.prototype.J,vx=Ot,pr.prototype.listenOnce=pr.prototype.K,pr.prototype.getLastError=pr.prototype.Ha,pr.prototype.getLastErrorCode=pr.prototype.ya,pr.prototype.getStatus=pr.prototype.ca,pr.prototype.getResponseJson=pr.prototype.La,pr.prototype.getResponseText=pr.prototype.la,pr.prototype.send=pr.prototype.ea,pr.prototype.setWithCredentials=pr.prototype.Fa,cH=pr}).apply(typeof Ow<"u"?Ow:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ps.UNAUTHENTICATED=new Ps(null),Ps.GOOGLE_CREDENTIALS=new Ps("google-credentials-uid"),Ps.FIRST_PARTY=new Ps("first-party-uid"),Ps.MOCK_USER=new Ps("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fy="12.8.0";function Eue(n){fy=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg=new mD("@firebase/firestore");function fv(){return hg.logLevel}function Gt(n,...e){if(hg.logLevel<=Jn.DEBUG){const t=e.map(yD);hg.debug(`Firestore (${fy}): ${n}`,...t)}}function bd(n,...e){if(hg.logLevel<=Jn.ERROR){const t=e.map(yD);hg.error(`Firestore (${fy}): ${n}`,...t)}}function qv(n,...e){if(hg.logLevel<=Jn.WARN){const t=e.map(yD);hg.warn(`Firestore (${fy}): ${n}`,...t)}}function yD(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,pH(n,r,t)}function pH(n,e,t){let r=`FIRESTORE (${fy}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw bd(r),new Error(r)}function Er(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||pH(e,i,r)}function Cn(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Vt extends gf{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Aue{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ps.UNAUTHENTICATED)))}shutdown(){}}class Tue{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Mue{constructor(e){this.t=e,this.currentUser=Ps.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Er(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let a=new pd;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new pd,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=a;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},o=c=>{Gt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>o(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(Gt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new pd)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Gt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Er(typeof r.accessToken=="string",31837,{l:r}),new mH(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Er(e===null||typeof e=="string",2055,{h:e}),new Ps(e)}}class Cue{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ps.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Iue{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Cue(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ps.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class hF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Rue{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yl(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Er(this.o===void 0,3512);const r=a=>{a.error!=null&&Gt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,Gt("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Gt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Gt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new hF(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Er(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new hF(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pue(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Pue(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function er(n,e){return n<e?-1:n>e?1:0}function JN(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return DR(i)===DR(a)?er(i,a):DR(i)?1:-1}return er(n.length,e.length)}const Nue=55296,Oue=57343;function DR(n){const e=n.charCodeAt(0);return e>=Nue&&e<=Oue}function Wv(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF="__name__";class Fu{constructor(e,t,r){t===void 0?t=0:t>e.length&&gn(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&gn(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Fu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fu?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=Fu.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return er(e.length,t.length)}static compareSegments(e,t){const r=Fu.isNumericId(e),i=Fu.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Fu.extractNumericId(e).compare(Fu.extractNumericId(t)):JN(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return np.fromString(e.substring(4,e.length-2))}}class qr extends Fu{construct(e,t,r){return new qr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Vt(ft.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new qr(t)}static emptyPath(){return new qr([])}}const Due=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class as extends Fu{construct(e,t,r){return new as(e,t,r)}static isValidIdentifier(e){return Due.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),as.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===pF}static keyField(){return new as([pF])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Vt(ft.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Vt(ft.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Vt(ft.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new Vt(ft.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new as(t)}static emptyPath(){return new as([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.path=e}static fromPath(e){return new sn(qr.fromString(e))}static fromName(e){return new sn(qr.fromString(e).popFirst(5))}static empty(){return new sn(qr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return qr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new sn(new qr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gH(n,e,t){if(!t)throw new Vt(ft.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Lue(n,e,t,r){if(e===!0&&r===!0)throw new Vt(ft.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mF(n){if(!sn.isDocumentKey(n))throw new Vt(ft.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gF(n){if(sn.isDocumentKey(n))throw new Vt(ft.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vH(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function NM(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":gn(12329,{type:typeof n})}function ec(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Vt(ft.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=NM(n);throw new Vt(ft.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(n,e){const t={typeString:n};return e&&(t.value=e),t}function X_(n,e){if(!vH(n))throw new Vt(ft.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new Vt(ft.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=-62135596800,yF=1e6;class ei{static now(){return ei.fromMillis(Date.now())}static fromDate(e){return ei.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*yF);return new ei(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Vt(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Vt(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<vF)throw new Vt(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Vt(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/yF}_compareTo(e){return this.seconds===e.seconds?er(this.nanoseconds,e.nanoseconds):er(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ei._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(X_(e,ei._jsonSchema))return new ei(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-vF;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ei._jsonSchemaVersion="firestore/timestamp/1.0",ei._jsonSchema={type:ra("string",ei._jsonSchemaVersion),seconds:ra("number"),nanoseconds:ra("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{static fromTimestamp(e){return new wn(e)}static min(){return new wn(new ei(0,0))}static max(){return new wn(new ei(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_=-1;function kue(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=wn.fromTimestamp(r===1e9?new ei(t+1,0):new ei(t,r));return new fp(i,sn.empty(),e)}function Uue(n){return new fp(n.readTime,n.key,f_)}class fp{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new fp(wn.min(),sn.empty(),f_)}static max(){return new fp(wn.max(),sn.empty(),f_)}}function Fue(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=sn.comparator(n.documentKey,e.documentKey),t!==0?t:er(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zue="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jue{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dy(n){if(n.code!==ft.FAILED_PRECONDITION||n.message!==zue)throw n;Gt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new vt(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof vt?t:vt.resolve(t)}catch(t){return vt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):vt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):vt.reject(t)}static resolve(e){return new vt(((t,r)=>{t(e)}))}static reject(e){return new vt(((t,r)=>{r(e)}))}static waitFor(e){return new vt(((t,r)=>{let i=0,a=0,s=!1;e.forEach((o=>{++i,o.next((()=>{++a,s&&a===i&&t()}),(c=>r(c)))})),s=!0,a===i&&t()}))}static or(e){let t=vt.resolve(!1);for(const r of e)t=t.next((i=>i?vt.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new vt(((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let c=0;c<a;c++){const f=c;t(e[f]).next((d=>{s[f]=d,++o,o===a&&r(s)}),(d=>i(d)))}}))}static doWhile(e,t){return new vt(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}function Bue(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function hy(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}OM.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=-1;function DM(n){return n==null}function IA(n){return n===0&&1/n==-1/0}function Vue(n){return typeof n=="number"&&Number.isInteger(n)&&!IA(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yH="";function Hue(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=bF(e)),e=Gue(n.get(t),e);return bF(e)}function Gue(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case yH:t+="";break;default:t+=a}}return t}function bF(n){return n+yH+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xF(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ap(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function bH(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,t){this.comparator=e,this.root=t||rs.EMPTY}insert(e,t){return new bi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rs.BLACK,null,null))}remove(e){return new bi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dw(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dw(this.root,e,this.comparator,!0)}}class Dw{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rs{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??rs.RED,this.left=i??rs.EMPTY,this.right=a??rs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new rs(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return rs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return rs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw gn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw gn(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw gn(27949);return e+(this.isRed()?0:1)}}rs.EMPTY=null,rs.RED=!0,rs.BLACK=!1;rs.EMPTY=new class{constructor(){this.size=0}get key(){throw gn(57766)}get value(){throw gn(16141)}get color(){throw gn(16727)}get left(){throw gn(29726)}get right(){throw gn(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new rs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.comparator=e,this.data=new bi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _F(this.data.getIterator())}getIteratorFrom(e){return new _F(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof va)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new va(this.comparator);return t.data=e,t}}class _F{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this.fields=e,e.sort(as.comparator)}static empty(){return new ul([])}unionWith(e){let t=new va(as.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ul(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wv(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xH extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new xH("Invalid base64 string: "+a):a}})(e);return new cs(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a})(e);return new cs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return er(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cs.EMPTY_BYTE_STRING=new cs("");const que=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dp(n){if(Er(!!n,39018),typeof n=="string"){let e=0;const t=que.exec(n);if(Er(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zi(n.seconds),nanos:zi(n.nanos)}}function zi(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function hp(n){return typeof n=="string"?cs.fromBase64String(n):cs.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _H="server_timestamp",SH="__type__",wH="__previous_value__",EH="__local_write_time__";function _D(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[SH])==null?void 0:r.stringValue)===_H}function LM(n){const e=n.mapValue.fields[wH];return _D(e)?LM(e):e}function d_(n){const e=dp(n.mapValue.fields[EH].timestampValue);return new ei(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wue{constructor(e,t,r,i,a,s,o,c,f,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=d,this.apiKey=p}}const RA="(default)";class h_{constructor(e,t){this.projectId=e,this.database=t||RA}static empty(){return new h_("","")}get isDefaultDatabase(){return this.database===RA}isEqual(e){return e instanceof h_&&e.projectId===this.projectId&&e.database===this.database}}function $ue(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Vt(ft.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new h_(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AH="__type__",Xue="__max__",Lw={mapValue:{}},TH="__vector__",PA="value";function pp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_D(n)?4:Kue(n)?9007199254740991:Yue(n)?10:11:gn(28295,{value:n})}function of(n,e){if(n===e)return!0;const t=pp(n);if(t!==pp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return d_(n).isEqual(d_(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=dp(i.timestampValue),o=dp(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return hp(i.bytesValue).isEqual(hp(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return zi(i.geoPointValue.latitude)===zi(a.geoPointValue.latitude)&&zi(i.geoPointValue.longitude)===zi(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return zi(i.integerValue)===zi(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=zi(i.doubleValue),o=zi(a.doubleValue);return s===o?IA(s)===IA(o):isNaN(s)&&isNaN(o)}return!1})(n,e);case 9:return Wv(n.arrayValue.values||[],e.arrayValue.values||[],of);case 10:case 11:return(function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(xF(s)!==xF(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(o[c]===void 0||!of(s[c],o[c])))return!1;return!0})(n,e);default:return gn(52216,{left:n})}}function p_(n,e){return(n.values||[]).find((t=>of(t,e)))!==void 0}function $v(n,e){if(n===e)return 0;const t=pp(n),r=pp(e);if(t!==r)return er(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return er(n.booleanValue,e.booleanValue);case 2:return(function(a,s){const o=zi(a.integerValue||a.doubleValue),c=zi(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1})(n,e);case 3:return SF(n.timestampValue,e.timestampValue);case 4:return SF(d_(n),d_(e));case 5:return JN(n.stringValue,e.stringValue);case 6:return(function(a,s){const o=hp(a),c=hp(s);return o.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(a,s){const o=a.split("/"),c=s.split("/");for(let f=0;f<o.length&&f<c.length;f++){const d=er(o[f],c[f]);if(d!==0)return d}return er(o.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,s){const o=er(zi(a.latitude),zi(s.latitude));return o!==0?o:er(zi(a.longitude),zi(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return wF(n.arrayValue,e.arrayValue);case 10:return(function(a,s){var v,y,x,E;const o=a.fields||{},c=s.fields||{},f=(v=o[PA])==null?void 0:v.arrayValue,d=(y=c[PA])==null?void 0:y.arrayValue,p=er(((x=f==null?void 0:f.values)==null?void 0:x.length)||0,((E=d==null?void 0:d.values)==null?void 0:E.length)||0);return p!==0?p:wF(f,d)})(n.mapValue,e.mapValue);case 11:return(function(a,s){if(a===Lw.mapValue&&s===Lw.mapValue)return 0;if(a===Lw.mapValue)return 1;if(s===Lw.mapValue)return-1;const o=a.fields||{},c=Object.keys(o),f=s.fields||{},d=Object.keys(f);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const v=JN(c[p],d[p]);if(v!==0)return v;const y=$v(o[c[p]],f[d[p]]);if(y!==0)return y}return er(c.length,d.length)})(n.mapValue,e.mapValue);default:throw gn(23264,{he:t})}}function SF(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return er(n,e);const t=dp(n),r=dp(e),i=er(t.seconds,r.seconds);return i!==0?i:er(t.nanos,r.nanos)}function wF(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=$v(t[i],r[i]);if(a)return a}return er(t.length,r.length)}function Xv(n){return eO(n)}function eO(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=dp(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return hp(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return sn.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=eO(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${eO(t.fields[s])}`;return i+"}"})(n.mapValue):gn(61005,{value:n})}function dE(n){switch(pp(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=LM(n);return e?16+dE(e):16;case 5:return 2*n.stringValue.length;case 6:return hp(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+dE(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Ap(r.fields,((a,s)=>{i+=a.length+dE(s)})),i})(n.mapValue);default:throw gn(13486,{value:n})}}function EF(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function tO(n){return!!n&&"integerValue"in n}function SD(n){return!!n&&"arrayValue"in n}function AF(n){return!!n&&"nullValue"in n}function TF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hE(n){return!!n&&"mapValue"in n}function Yue(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[AH])==null?void 0:r.stringValue)===TH}function Lx(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ap(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Lx(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Lx(n.arrayValue.values[t]);return e}return{...n}}function Kue(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Xue}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.value=e}static empty(){return new jo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!hE(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lx(t)}setAll(e){let t=as.emptyPath(),r={},i=[];e.forEach(((s,o)=>{if(!t.isImmediateParentOf(o)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=o.popLast()}s?r[o.lastSegment()]=Lx(s):i.push(o.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());hE(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return of(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];hE(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ap(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new jo(Lx(this.value))}}function MH(n){const e=[];return Ap(n.fields,((t,r)=>{const i=new as([t]);if(hE(r)){const a=MH(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)})),new ul(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,t,r,i,a,s,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Ns(e,0,wn.min(),wn.min(),wn.min(),jo.empty(),0)}static newFoundDocument(e,t,r,i){return new Ns(e,1,t,wn.min(),r,i,0)}static newNoDocument(e,t){return new Ns(e,2,t,wn.min(),wn.min(),jo.empty(),0)}static newUnknownDocument(e,t){return new Ns(e,3,t,wn.min(),wn.min(),jo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(wn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ns&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ns(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,t){this.position=e,this.inclusive=t}}function MF(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],s=n.position[i];if(a.field.isKeyField()?r=sn.comparator(sn.fromName(s.referenceValue),t.key):r=$v(s,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function CF(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!of(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,t="asc"){this.field=e,this.dir=t}}function Zue(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CH{}class na extends CH{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Jue(e,t,r):t==="array-contains"?new nfe(e,r):t==="in"?new rfe(e,r):t==="not-in"?new ife(e,r):t==="array-contains-any"?new afe(e,r):new na(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new efe(e,r):new tfe(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison($v(t,this.value)):t!==null&&pp(this.value)===pp(t)&&this.matchesComparison($v(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return gn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $c extends CH{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new $c(e,t)}matches(e){return IH(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function IH(n){return n.op==="and"}function RH(n){return Que(n)&&IH(n)}function Que(n){for(const e of n.filters)if(e instanceof $c)return!1;return!0}function nO(n){if(n instanceof na)return n.field.canonicalString()+n.op.toString()+Xv(n.value);if(RH(n))return n.filters.map((e=>nO(e))).join(",");{const e=n.filters.map((t=>nO(t))).join(",");return`${n.op}(${e})`}}function PH(n,e){return n instanceof na?(function(r,i){return i instanceof na&&r.op===i.op&&r.field.isEqual(i.field)&&of(r.value,i.value)})(n,e):n instanceof $c?(function(r,i){return i instanceof $c&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,s,o)=>a&&PH(s,i.filters[o])),!0):!1})(n,e):void gn(19439)}function NH(n){return n instanceof na?(function(t){return`${t.field.canonicalString()} ${t.op} ${Xv(t.value)}`})(n):n instanceof $c?(function(t){return t.op.toString()+" {"+t.getFilters().map(NH).join(" ,")+"}"})(n):"Filter"}class Jue extends na{constructor(e,t,r){super(e,t,r),this.key=sn.fromName(r.referenceValue)}matches(e){const t=sn.comparator(e.key,this.key);return this.matchesComparison(t)}}class efe extends na{constructor(e,t){super(e,"in",t),this.keys=OH("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class tfe extends na{constructor(e,t){super(e,"not-in",t),this.keys=OH("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function OH(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>sn.fromName(r.referenceValue)))}class nfe extends na{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return SD(t)&&p_(t.arrayValue,this.value)}}class rfe extends na{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&p_(this.value.arrayValue,t)}}class ife extends na{constructor(e,t){super(e,"not-in",t)}matches(e){if(p_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!p_(this.value.arrayValue,t)}}class afe extends na{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!SD(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>p_(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sfe{constructor(e,t=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Te=null}}function IF(n,e=null,t=[],r=[],i=null,a=null,s=null){return new sfe(n,e,t,r,i,a,s)}function wD(n){const e=Cn(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>nO(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),DM(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Xv(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Xv(r))).join(",")),e.Te=t}return e.Te}function ED(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Zue(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!PH(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!CF(n.startAt,e.startAt)&&CF(n.endAt,e.endAt)}function rO(n){return sn.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,t=null,r=[],i=[],a=null,s="F",o=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function ofe(n,e,t,r,i,a,s,o){return new Y_(n,e,t,r,i,a,s,o)}function kM(n){return new Y_(n)}function RF(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function lfe(n){return sn.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function DH(n){return n.collectionGroup!==null}function kx(n){const e=Cn(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new va(as.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((f=>{f.isInequality()&&(o=o.add(f.field))}))})),o})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new OA(a,r))})),t.has(as.keyField().canonicalString())||e.Ie.push(new OA(as.keyField(),r))}return e.Ie}function Zu(n){const e=Cn(n);return e.Ee||(e.Ee=cfe(e,kx(n))),e.Ee}function cfe(n,e){if(n.limitType==="F")return IF(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new OA(i.field,a)}));const t=n.endAt?new NA(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new NA(n.startAt.position,n.startAt.inclusive):null;return IF(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function iO(n,e){const t=n.filters.concat([e]);return new Y_(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function aO(n,e,t){return new Y_(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function UM(n,e){return ED(Zu(n),Zu(e))&&n.limitType===e.limitType}function LH(n){return`${wD(Zu(n))}|lt:${n.limitType}`}function dv(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>NH(i))).join(", ")}]`),DM(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Xv(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Xv(i))).join(",")),`Target(${r})`})(Zu(n))}; limitType=${n.limitType})`}function FM(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):sn.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of kx(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,o,c){const f=MF(s,o,c);return s.inclusive?f<=0:f<0})(r.startAt,kx(r),i)||r.endAt&&!(function(s,o,c){const f=MF(s,o,c);return s.inclusive?f>=0:f>0})(r.endAt,kx(r),i))})(n,e)}function ufe(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kH(n){return(e,t)=>{let r=!1;for(const i of kx(n)){const a=ffe(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function ffe(n,e,t){const r=n.field.isKeyField()?sn.comparator(e.key,t.key):(function(a,s,o){const c=s.data.field(a),f=o.data.field(a);return c!==null&&f!==null?$v(c,f):gn(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return gn(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ap(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return bH(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dfe=new bi(sn.comparator);function xd(){return dfe}const UH=new bi(sn.comparator);function yx(...n){let e=UH;for(const t of n)e=e.insert(t.key,t);return e}function FH(n){let e=UH;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Vm(){return Ux()}function zH(){return Ux()}function Ux(){return new Ng((n=>n.toString()),((n,e)=>n.isEqual(e)))}const hfe=new bi(sn.comparator),pfe=new va(sn.comparator);function tr(...n){let e=pfe;for(const t of n)e=e.add(t);return e}const mfe=new va(er);function gfe(){return mfe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:IA(e)?"-0":e}}function jH(n){return{integerValue:""+n}}function vfe(n,e){return Vue(e)?jH(e):AD(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(){this._=void 0}}function yfe(n,e,t){return n instanceof DA?(function(i,a){const s={fields:{[SH]:{stringValue:_H},[EH]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&_D(a)&&(a=LM(a)),a&&(s.fields[wH]=a),{mapValue:s}})(t,e):n instanceof m_?VH(n,e):n instanceof g_?HH(n,e):(function(i,a){const s=BH(i,a),o=PF(s)+PF(i.Ae);return tO(s)&&tO(i.Ae)?jH(o):AD(i.serializer,o)})(n,e)}function bfe(n,e,t){return n instanceof m_?VH(n,e):n instanceof g_?HH(n,e):t}function BH(n,e){return n instanceof LA?(function(r){return tO(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class DA extends zM{}class m_ extends zM{constructor(e){super(),this.elements=e}}function VH(n,e){const t=GH(e);for(const r of n.elements)t.some((i=>of(i,r)))||t.push(r);return{arrayValue:{values:t}}}class g_ extends zM{constructor(e){super(),this.elements=e}}function HH(n,e){let t=GH(e);for(const r of n.elements)t=t.filter((i=>!of(i,r)));return{arrayValue:{values:t}}}class LA extends zM{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function PF(n){return zi(n.integerValue||n.doubleValue)}function GH(n){return SD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function xfe(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof m_&&i instanceof m_||r instanceof g_&&i instanceof g_?Wv(r.elements,i.elements,of):r instanceof LA&&i instanceof LA?of(r.Ae,i.Ae):r instanceof DA&&i instanceof DA})(n.transform,e.transform)}class _fe{constructor(e,t){this.version=e,this.transformResults=t}}class Hc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Hc}static exists(e){return new Hc(void 0,e)}static updateTime(e){return new Hc(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pE(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class jM{}function qH(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new TD(n.key,Hc.none()):new K_(n.key,n.data,Hc.none());{const t=n.data,r=jo.empty();let i=new va(as.comparator);for(let a of e.fields)if(!i.has(a)){let s=t.field(a);s===null&&a.length>1&&(a=a.popLast(),s=t.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new Tp(n.key,r,new ul(i.toArray()),Hc.none())}}function Sfe(n,e,t){n instanceof K_?(function(i,a,s){const o=i.value.clone(),c=OF(i.fieldTransforms,a,s.transformResults);o.setAll(c),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()})(n,e,t):n instanceof Tp?(function(i,a,s){if(!pE(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=OF(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(WH(i)),c.setAll(o),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Fx(n,e,t,r){return n instanceof K_?(function(a,s,o,c){if(!pE(a.precondition,s))return o;const f=a.value.clone(),d=DF(a.fieldTransforms,c,s);return f.setAll(d),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof Tp?(function(a,s,o,c){if(!pE(a.precondition,s))return o;const f=DF(a.fieldTransforms,c,s),d=s.data;return d.setAll(WH(a)),d.setAll(f),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((p=>p.field)))})(n,e,t,r):(function(a,s,o){return pE(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o})(n,e,t)}function wfe(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=BH(r.transform,i||null);a!=null&&(t===null&&(t=jo.empty()),t.set(r.field,a))}return t||null}function NF(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wv(r,i,((a,s)=>xfe(a,s)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class K_ extends jM{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Tp extends jM{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function WH(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function OF(n,e,t){const r=new Map;Er(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let i=0;i<t.length;i++){const a=n[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,bfe(s,o,t[i]))}return r}function DF(n,e,t){const r=new Map;for(const i of n){const a=i.transform,s=t.data.field(i.field);r.set(i.field,yfe(a,s,e))}return r}class TD extends jM{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Efe extends jM{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Afe{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Sfe(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fx(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Fx(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=zH();return this.mutations.forEach((i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=t.has(i.key)?null:o;const c=qH(s,o);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(wn.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),tr())}isEqual(e){return this.batchId===e.batchId&&Wv(this.mutations,e.mutations,((t,r)=>NF(t,r)))&&Wv(this.baseMutations,e.baseMutations,((t,r)=>NF(t,r)))}}class MD{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Er(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return hfe})();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new MD(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tfe{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mfe{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ta,or;function Cfe(n){switch(n){case ft.OK:return gn(64938);case ft.CANCELLED:case ft.UNKNOWN:case ft.DEADLINE_EXCEEDED:case ft.RESOURCE_EXHAUSTED:case ft.INTERNAL:case ft.UNAVAILABLE:case ft.UNAUTHENTICATED:return!1;case ft.INVALID_ARGUMENT:case ft.NOT_FOUND:case ft.ALREADY_EXISTS:case ft.PERMISSION_DENIED:case ft.FAILED_PRECONDITION:case ft.ABORTED:case ft.OUT_OF_RANGE:case ft.UNIMPLEMENTED:case ft.DATA_LOSS:return!0;default:return gn(15467,{code:n})}}function $H(n){if(n===void 0)return bd("GRPC error has no .code"),ft.UNKNOWN;switch(n){case ta.OK:return ft.OK;case ta.CANCELLED:return ft.CANCELLED;case ta.UNKNOWN:return ft.UNKNOWN;case ta.DEADLINE_EXCEEDED:return ft.DEADLINE_EXCEEDED;case ta.RESOURCE_EXHAUSTED:return ft.RESOURCE_EXHAUSTED;case ta.INTERNAL:return ft.INTERNAL;case ta.UNAVAILABLE:return ft.UNAVAILABLE;case ta.UNAUTHENTICATED:return ft.UNAUTHENTICATED;case ta.INVALID_ARGUMENT:return ft.INVALID_ARGUMENT;case ta.NOT_FOUND:return ft.NOT_FOUND;case ta.ALREADY_EXISTS:return ft.ALREADY_EXISTS;case ta.PERMISSION_DENIED:return ft.PERMISSION_DENIED;case ta.FAILED_PRECONDITION:return ft.FAILED_PRECONDITION;case ta.ABORTED:return ft.ABORTED;case ta.OUT_OF_RANGE:return ft.OUT_OF_RANGE;case ta.UNIMPLEMENTED:return ft.UNIMPLEMENTED;case ta.DATA_LOSS:return ft.DATA_LOSS;default:return gn(39323,{code:n})}}(or=ta||(ta={}))[or.OK=0]="OK",or[or.CANCELLED=1]="CANCELLED",or[or.UNKNOWN=2]="UNKNOWN",or[or.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",or[or.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",or[or.NOT_FOUND=5]="NOT_FOUND",or[or.ALREADY_EXISTS=6]="ALREADY_EXISTS",or[or.PERMISSION_DENIED=7]="PERMISSION_DENIED",or[or.UNAUTHENTICATED=16]="UNAUTHENTICATED",or[or.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",or[or.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",or[or.ABORTED=10]="ABORTED",or[or.OUT_OF_RANGE=11]="OUT_OF_RANGE",or[or.UNIMPLEMENTED=12]="UNIMPLEMENTED",or[or.INTERNAL=13]="INTERNAL",or[or.UNAVAILABLE=14]="UNAVAILABLE",or[or.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ife(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rfe=new np([4294967295,4294967295],0);function LF(n){const e=Ife().encode(n),t=new lH;return t.update(e),new Uint8Array(t.digest())}function kF(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new np([t,r],0),new np([i,a],0)]}class CD{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new bx(`Invalid padding: ${t}`);if(r<0)throw new bx(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bx(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new bx(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=np.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(np.fromNumber(r)));return i.compare(Rfe)===1&&(i=new np([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=LF(e),[r,i]=kF(t);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);if(!this.we(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new CD(a,i,t);return r.forEach((o=>s.insert(o))),s}insert(e){if(this.ge===0)return;const t=LF(e),[r,i]=kF(t);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);this.be(s)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class bx extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Z_.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new BM(wn.min(),i,new bi(er),xd(),tr())}}class Z_{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Z_(r,t,tr(),tr(),tr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=i}}class XH{constructor(e,t){this.targetId=e,this.Ce=t}}class YH{constructor(e,t,r=cs.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class UF{constructor(){this.ve=0,this.Fe=FF(),this.Me=cs.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=tr(),t=tr(),r=tr();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:gn(38017,{changeType:a})}})),new Z_(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=FF()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Er(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Pfe{constructor(e){this.Ge=e,this.ze=new Map,this.je=xd(),this.He=kw(),this.Je=kw(),this.Ze=new bi(er)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:gn(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(rO(a))if(r===0){const s=new sn(a.path);this.et(t,s,Ns.newNoDocument(s,wn.min()))}else Er(r===1,20013,{expectedCount:r});else{const s=this._t(t);if(s!==r){const o=this.ut(e),c=o?this.ct(o,e,s):1;if(c!==0){this.it(t);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let s,o;try{s=hp(r).toUint8Array()}catch(c){if(c instanceof xH)return qv("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new CD(s,i,a)}catch(c){return qv(c instanceof bx?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const s=this.Ge.ht(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,s)=>{const o=this.ot(s);if(o){if(a.current&&rO(o.target)){const c=new sn(o.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,Ns.newNoDocument(c,e))}a.Be&&(t.set(s,a.ke()),a.Ke())}}));let r=tr();this.Je.forEach(((a,s)=>{let o=!0;s.forEachWhile((c=>{const f=this.ot(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(r=r.add(a))})),this.je.forEach(((a,s)=>s.setReadTime(e)));const i=new BM(e,t,this.Ze,this.je,r);return this.je=xd(),this.He=kw(),this.Je=kw(),this.Ze=new bi(er),i}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new UF,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new va(er),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new va(er),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Gt("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new UF),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function kw(){return new bi(sn.comparator)}function FF(){return new bi(sn.comparator)}const Nfe={asc:"ASCENDING",desc:"DESCENDING"},Ofe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Dfe={and:"AND",or:"OR"};class Lfe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sO(n,e){return n.useProto3Json||DM(e)?e:{value:e}}function kA(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KH(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function kfe(n,e){return kA(n,e.toTimestamp())}function Qu(n){return Er(!!n,49232),wn.fromTimestamp((function(t){const r=dp(t);return new ei(r.seconds,r.nanos)})(n))}function ID(n,e){return oO(n,e).canonicalString()}function oO(n,e){const t=(function(i){return new qr(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function ZH(n){const e=qr.fromString(n);return Er(n7(e),10190,{key:e.toString()}),e}function lO(n,e){return ID(n.databaseId,e.path)}function LR(n,e){const t=ZH(e);if(t.get(1)!==n.databaseId.projectId)throw new Vt(ft.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Vt(ft.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new sn(JH(t))}function QH(n,e){return ID(n.databaseId,e)}function Ufe(n){const e=ZH(n);return e.length===4?qr.emptyPath():JH(e)}function cO(n){return new qr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function JH(n){return Er(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function zF(n,e,t){return{name:lO(n,e),fields:t.value.mapValue.fields}}function Ffe(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:gn(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(f,d){return f.useProto3Json?(Er(d===void 0||typeof d=="string",58123),cs.fromBase64String(d||"")):(Er(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),cs.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&(function(f){const d=f.code===void 0?ft.UNKNOWN:$H(f.code);return new Vt(d,f.message||"")})(s);t=new YH(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=LR(n,r.document.name),a=Qu(r.document.updateTime),s=r.document.createTime?Qu(r.document.createTime):wn.min(),o=new jo({mapValue:{fields:r.document.fields}}),c=Ns.newFoundDocument(i,a,s,o),f=r.targetIds||[],d=r.removedTargetIds||[];t=new mE(f,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=LR(n,r.document),a=r.readTime?Qu(r.readTime):wn.min(),s=Ns.newNoDocument(i,a),o=r.removedTargetIds||[];t=new mE([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=LR(n,r.document),a=r.removedTargetIds||[];t=new mE([],a,i,null)}else{if(!("filter"in e))return gn(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new Mfe(i,a),o=r.targetId;t=new XH(o,s)}}return t}function zfe(n,e){let t;if(e instanceof K_)t={update:zF(n,e.key,e.value)};else if(e instanceof TD)t={delete:lO(n,e.key)};else if(e instanceof Tp)t={update:zF(n,e.key,e.data),updateMask:Xfe(e.fieldMask)};else{if(!(e instanceof Efe))return gn(16599,{dt:e.type});t={verify:lO(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,s){const o=s.transform;if(o instanceof DA)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof m_)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof g_)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof LA)return{fieldPath:s.field.canonicalString(),increment:o.Ae};throw gn(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:kfe(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:gn(27497)})(n,e.precondition)),t}function jfe(n,e){return n&&n.length>0?(Er(e!==void 0,14353),n.map((t=>(function(i,a){let s=i.updateTime?Qu(i.updateTime):Qu(a);return s.isEqual(wn.min())&&(s=Qu(a)),new _fe(s,i.transformResults||[])})(t,e)))):[]}function Bfe(n,e){return{documents:[QH(n,e.path)]}}function Vfe(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=QH(n,i);const a=(function(f){if(f.length!==0)return t7($c.create(f,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const s=(function(f){if(f.length!==0)return f.map((d=>(function(v){return{field:hv(v.field),direction:qfe(v.dir)}})(d)))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=sO(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:i}}function Hfe(n){let e=Ufe(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Er(r===1,65062);const d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let a=[];t.where&&(a=(function(p){const v=e7(p);return v instanceof $c&&RH(v)?v.getFilters():[v]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map((v=>(function(x){return new OA(pv(x.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(v)))})(t.orderBy));let o=null;t.limit&&(o=(function(p){let v;return v=typeof p=="object"?p.value:p,DM(v)?null:v})(t.limit));let c=null;t.startAt&&(c=(function(p){const v=!!p.before,y=p.values||[];return new NA(y,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(p){const v=!p.before,y=p.values||[];return new NA(y,v)})(t.endAt)),ofe(e,i,s,a,o,"F",c,f)}function Gfe(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gn(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function e7(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=pv(t.unaryFilter.field);return na.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=pv(t.unaryFilter.field);return na.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=pv(t.unaryFilter.field);return na.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=pv(t.unaryFilter.field);return na.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return gn(61313);default:return gn(60726)}})(n):n.fieldFilter!==void 0?(function(t){return na.create(pv(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return gn(58110);default:return gn(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return $c.create(t.compositeFilter.filters.map((r=>e7(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return gn(1026)}})(t.compositeFilter.op))})(n):gn(30097,{filter:n})}function qfe(n){return Nfe[n]}function Wfe(n){return Ofe[n]}function $fe(n){return Dfe[n]}function hv(n){return{fieldPath:n.canonicalString()}}function pv(n){return as.fromServerFormat(n.fieldPath)}function t7(n){return n instanceof na?(function(t){if(t.op==="=="){if(TF(t.value))return{unaryFilter:{field:hv(t.field),op:"IS_NAN"}};if(AF(t.value))return{unaryFilter:{field:hv(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(TF(t.value))return{unaryFilter:{field:hv(t.field),op:"IS_NOT_NAN"}};if(AF(t.value))return{unaryFilter:{field:hv(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hv(t.field),op:Wfe(t.op),value:t.value}}})(n):n instanceof $c?(function(t){const r=t.getFilters().map((i=>t7(i)));return r.length===1?r[0]:{compositeFilter:{op:$fe(t.op),filters:r}}})(n):gn(54877,{filter:n})}function Xfe(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function n7(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function r7(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t,r,i,a=wn.min(),s=wn.min(),o=cs.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new Zh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Zh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yfe{constructor(e){this.yt=e}}function Kfe(n){const e=Hfe({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?aO(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zfe{constructor(){this.Sn=new Qfe}addToCollectionParentIndex(e,t){return this.Sn.add(t),vt.resolve()}getCollectionParents(e,t){return vt.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return vt.resolve()}deleteFieldIndex(e,t){return vt.resolve()}deleteAllFieldIndexes(e){return vt.resolve()}createTargetIndexes(e,t){return vt.resolve()}getDocumentsMatchingTarget(e,t){return vt.resolve(null)}getIndexType(e,t){return vt.resolve(0)}getFieldIndexes(e,t){return vt.resolve([])}getNextCollectionGroupToUpdate(e){return vt.resolve(null)}getMinOffset(e,t){return vt.resolve(fp.min())}getMinOffsetFromCollectionGroup(e,t){return vt.resolve(fp.min())}updateCollectionGroup(e,t,r){return vt.resolve()}updateIndexEntries(e,t){return vt.resolve()}}class Qfe{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new va(qr.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new va(qr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},i7=41943040;class Uo{static withCacheSize(e){return new Uo(e,Uo.DEFAULT_COLLECTION_PERCENTILE,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Uo.DEFAULT_COLLECTION_PERCENTILE=10,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Uo.DEFAULT=new Uo(i7,Uo.DEFAULT_COLLECTION_PERCENTILE,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Uo.DISABLED=new Uo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Yv(0)}static ar(){return new Yv(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF="LruGarbageCollector",Jfe=1048576;function VF([n,e],[t,r]){const i=er(n,t);return i===0?er(e,r):i}class ede{constructor(e){this.Pr=e,this.buffer=new va(VF),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();VF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class tde{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Gt(BF,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){hy(t)?Gt(BF,"Ignoring IndexedDB error during garbage collection: ",t):await dy(t)}await this.Ar(3e5)}))}}class nde{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return vt.resolve(OM.ce);const r=new ede(t);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Gt("LruGarbageCollector","Garbage collection skipped; disabled"),vt.resolve(jF)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Gt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jF):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,i,a,s,o,c,f;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Gt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(r=p,o=Date.now(),this.removeTargets(e,r,t)))).next((p=>(a=p,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(f=Date.now(),fv()<=Jn.DEBUG&&Gt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(c-o)+`ms
	Removed ${p} documents in `+(f-c)+`ms
Total Duration: ${f-d}ms`),vt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p}))))}}function rde(n,e){return new nde(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ide{constructor(){this.changes=new Ng((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ns.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?vt.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ade{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sde{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Fx(r.mutation,i,ul.empty(),ei.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,tr()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=tr()){const i=Vm();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let s=yx();return a.forEach(((o,c)=>{s=s.insert(o,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,t){const r=Vm();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,tr())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((s,o)=>{t.set(s,o)}))}))}computeViews(e,t,r,i){let a=xd();const s=Ux(),o=(function(){return Ux()})();return t.forEach(((c,f)=>{const d=r.get(f.key);i.has(f.key)&&(d===void 0||d.mutation instanceof Tp)?a=a.insert(f.key,f):d!==void 0?(s.set(f.key,d.mutation.getFieldMask()),Fx(d.mutation,f,d.mutation.getFieldMask(),ei.now())):s.set(f.key,ul.empty())})),this.recalculateAndSaveOverlays(e,a).next((c=>(c.forEach(((f,d)=>s.set(f,d))),t.forEach(((f,d)=>o.set(f,new ade(d,s.get(f)??null)))),o)))}recalculateAndSaveOverlays(e,t){const r=Ux();let i=new bi(((s,o)=>s-o)),a=tr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((s=>{for(const o of s)o.keys().forEach((c=>{const f=t.get(c);if(f===null)return;let d=r.get(c)||ul.empty();d=o.applyToLocalView(f,d),r.set(c,d);const p=(i.get(o.batchId)||tr()).add(c);i=i.insert(o.batchId,p)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),f=c.key,d=c.value,p=zH();d.forEach((v=>{if(!a.has(v)){const y=qH(t.get(v),r.get(v));y!==null&&p.set(v,y),a=a.add(v)}})),s.push(this.documentOverlayCache.saveOverlays(e,f,p))}return vt.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return lfe(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):DH(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):vt.resolve(Vm());let o=f_,c=a;return s.next((f=>vt.forEach(f,((d,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),a.get(d)?vt.resolve():this.remoteDocumentCache.getEntry(e,d).next((v=>{c=c.insert(d,v)}))))).next((()=>this.populateOverlays(e,f,a))).next((()=>this.computeViews(e,c,f,tr()))).next((d=>({batchId:o,changes:FH(d)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new sn(t)).next((r=>{let i=yx();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let s=yx();return this.indexManager.getCollectionParents(e,a).next((o=>vt.forEach(o,(c=>{const f=(function(p,v){return new Y_(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((d=>{d.forEach(((p,v)=>{s=s.insert(p,v)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((s=>{a.forEach(((c,f)=>{const d=f.getKey();s.get(d)===null&&(s=s.insert(d,Ns.newInvalidDocument(d)))}));let o=yx();return s.forEach(((c,f)=>{const d=a.get(c);d!==void 0&&Fx(d.mutation,f,ul.empty(),ei.now()),FM(t,f)&&(o=o.insert(c,f))})),o}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ode{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return vt.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Qu(i.createTime)}})(t)),vt.resolve()}getNamedQuery(e,t){return vt.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(i){return{name:i.name,query:Kfe(i.bundledQuery),readTime:Qu(i.readTime)}})(t)),vt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lde{constructor(){this.overlays=new bi(sn.comparator),this.Lr=new Map}getOverlay(e,t){return vt.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Vm();return vt.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.bt(e,t,a)})),vt.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(r)),vt.resolve()}getOverlaysForCollection(e,t,r){const i=Vm(),a=t.length+1,s=new sn(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const c=o.getNext().value,f=c.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return vt.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new bi(((f,d)=>f-d));const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let d=a.get(f.largestBatchId);d===null&&(d=Vm(),a=a.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const o=Vm(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((f,d)=>o.set(f,d))),!(o.size()>=i)););return vt.resolve(o)}bt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Tfe(t,r));let a=this.Lr.get(t);a===void 0&&(a=tr(),this.Lr.set(t,a)),this.Lr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cde{constructor(){this.sessionToken=cs.EMPTY_BYTE_STRING}getSessionToken(e){return vt.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,vt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(){this.kr=new va(Pa.Kr),this.qr=new va(Pa.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Pa(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Pa(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new sn(new qr([])),r=new Pa(t,e),i=new Pa(t,e+1),a=[];return this.qr.forEachInRange([r,i],(s=>{this.Wr(s),a.push(s.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new sn(new qr([])),r=new Pa(t,e),i=new Pa(t,e+1);let a=tr();return this.qr.forEachInRange([r,i],(s=>{a=a.add(s.key)})),a}containsKey(e){const t=new Pa(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Pa{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return sn.comparator(e.key,t.key)||er(e.Hr,t.Hr)}static Ur(e,t){return er(e.Hr,t.Hr)||sn.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ude{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new va(Pa.Kr)}checkEmpty(e){return vt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Afe(a,t,r,i);this.mutationQueue.push(s);for(const o of i)this.Jr=this.Jr.add(new Pa(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return vt.resolve(s)}lookupMutationBatch(e,t){return vt.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Xr(r),a=i<0?0:i;return vt.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return vt.resolve(this.mutationQueue.length===0?xD:this.Yn-1)}getAllMutationBatches(e){return vt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Pa(t,0),i=new Pa(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,i],(s=>{const o=this.Zr(s.Hr);a.push(o)})),vt.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new va(er);return t.forEach((i=>{const a=new Pa(i,0),s=new Pa(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,s],(o=>{r=r.add(o.Hr)}))})),vt.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;sn.isDocumentKey(a)||(a=a.child(""));const s=new Pa(new sn(a),0);let o=new va(er);return this.Jr.forEachWhile((c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(o=o.add(c.Hr)),!0)}),s),vt.resolve(this.Yr(o))}Yr(e){const t=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Er(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return vt.forEach(t.mutations,(i=>{const a=new Pa(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new Pa(t,0),i=this.Jr.firstAfterOrEqual(r);return vt.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,vt.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fde{constructor(e){this.ti=e,this.docs=(function(){return new bi(sn.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,s=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return vt.resolve(r?r.document.mutableCopy():Ns.newInvalidDocument(t))}getEntries(e,t){let r=xd();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Ns.newInvalidDocument(i))})),vt.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=xd();const s=t.path,o=new sn(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:f,value:{document:d}}=c.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||Fue(Uue(d),r)<=0||(i.has(d.key)||FM(t,d))&&(a=a.insert(d.key,d.mutableCopy()))}return vt.resolve(a)}getAllFromCollectionGroup(e,t,r,i){gn(9500)}ni(e,t){return vt.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new dde(this)}getSize(e){return vt.resolve(this.size)}}class dde extends ide{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),vt.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hde{constructor(e){this.persistence=e,this.ri=new Ng((t=>wD(t)),ED),this.lastRemoteSnapshotVersion=wn.min(),this.highestTargetId=0,this.ii=0,this.si=new RD,this.targetCount=0,this.oi=Yv._r()}forEachTarget(e,t){return this.ri.forEach(((r,i)=>t(i))),vt.resolve()}getLastRemoteSnapshotVersion(e){return vt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return vt.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),vt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),vt.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Yv(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,vt.resolve()}updateTargetData(e,t){return this.lr(t),vt.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,vt.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.ri.forEach(((s,o)=>{o.sequenceNumber<=t&&r.get(o.targetId)===null&&(this.ri.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),vt.waitFor(a).next((()=>i))}getTargetCount(e){return vt.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return vt.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),vt.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((s=>{a.push(i.markPotentiallyOrphaned(e,s))})),vt.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),vt.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return vt.resolve(r)}containsKey(e,t){return vt.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a7{constructor(e,t){this._i={},this.overlays={},this.ai=new OM(0),this.ui=!1,this.ui=!0,this.ci=new cde,this.referenceDelegate=e(this),this.li=new hde(this),this.indexManager=new Zfe,this.remoteDocumentCache=(function(i){return new fde(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new Yfe(t),this.Pi=new ode(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lde,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new ude(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){Gt("MemoryPersistence","Starting transaction:",e);const i=new pde(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((a=>this.referenceDelegate.Ii(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ei(e,t){return vt.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class pde extends jue{constructor(e){super(),this.currentSequenceNumber=e}}class PD{constructor(e){this.persistence=e,this.Ri=new RD,this.Ai=null}static Vi(e){return new PD(e)}get di(){if(this.Ai)return this.Ai;throw gn(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),vt.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),vt.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),vt.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.di.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return vt.forEach(this.di,(r=>{const i=sn.fromPath(r);return this.mi(e,i).next((a=>{a||t.removeEntry(i,wn.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return vt.or([()=>vt.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class UA{constructor(e,t){this.persistence=e,this.fi=new Ng((r=>Hue(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=rde(this,t)}static Vi(e,t){return new UA(e,t)}Ti(){}Ii(e){return vt.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return vt.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((a=>a?vt.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ni(e,(s=>this.wr(e,s,t).next((o=>{o||(r++,a.removeEntry(s,wn.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),vt.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),vt.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),vt.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),vt.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=dE(e.data.value)),t}wr(e,t,r){return vt.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.fi.get(t);return vt.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=i}static Es(e,t){let r=tr(),i=tr();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new ND(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mde{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gde{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return ice()?8:Bue(ks())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.gs(e,t).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.ps(e,t,i,r).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new mde;return this.ys(e,t,s).next((o=>{if(a.result=o,this.As)return this.ws(e,t,s,o.size)}))})).next((()=>a.result))}ws(e,t,r,i){return r.documentReadCount<this.Vs?(fv()<=Jn.DEBUG&&Gt("QueryEngine","SDK will not create cache indexes for query:",dv(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),vt.resolve()):(fv()<=Jn.DEBUG&&Gt("QueryEngine","Query:",dv(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(fv()<=Jn.DEBUG&&Gt("QueryEngine","The SDK decides to create cache indexes for query:",dv(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zu(t))):vt.resolve())}gs(e,t){if(RF(t))return vt.resolve(null);let r=Zu(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=aO(t,null,"F"),r=Zu(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const s=tr(...a);return this.fs.getDocuments(e,s).next((o=>this.indexManager.getMinOffset(e,r).next((c=>{const f=this.bs(t,o);return this.Ss(t,f,s,c.readTime)?this.gs(e,aO(t,null,"F")):this.Ds(e,f,t,c)}))))})))))}ps(e,t,r,i){return RF(t)||i.isEqual(wn.min())?vt.resolve(null):this.fs.getDocuments(e,r).next((a=>{const s=this.bs(t,a);return this.Ss(t,s,r,i)?vt.resolve(null):(fv()<=Jn.DEBUG&&Gt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),dv(t)),this.Ds(e,s,t,kue(i,f_)).next((o=>o)))}))}bs(e,t){let r=new va(kH(e));return t.forEach(((i,a)=>{FM(e,a)&&(r=r.add(a))})),r}Ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ys(e,t,r){return fv()<=Jn.DEBUG&&Gt("QueryEngine","Using full collection scan to execute query:",dv(t)),this.fs.getDocumentsMatchingQuery(e,t,fp.min(),r)}Ds(e,t,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((s=>{a=a.insert(s.key,s)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD="LocalStore",vde=3e8;class yde{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new bi(er),this.Fs=new Ng((a=>wD(a)),ED),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sde(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function bde(n,e,t,r){return new yde(n,e,t,r)}async function s7(n,e){const t=Cn(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const s=[],o=[];let c=tr();for(const f of i){s.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}for(const f of a){o.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next((f=>({Ns:f,removedBatchIds:s,addedBatchIds:o})))}))}))}function xde(n,e){const t=Cn(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(o,c,f,d){const p=f.batch,v=p.keys();let y=vt.resolve();return v.forEach((x=>{y=y.next((()=>d.getEntry(c,x))).next((E=>{const S=f.docVersions.get(x);Er(S!==null,48541),E.version.compareTo(S)<0&&(p.applyToRemoteDocument(E,f),E.isValidDocument()&&(E.setReadTime(f.commitVersion),d.addEntry(E)))}))})),y.next((()=>o.mutationQueue.removeMutationBatch(c,p)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(o){let c=tr();for(let f=0;f<o.mutationResults.length;++f)o.mutationResults[f].transformResults.length>0&&(c=c.add(o.batch.mutations[f].key));return c})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function o7(n){const e=Cn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function _de(n,e){const t=Cn(n),r=e.snapshotVersion;let i=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=t.xs.newChangeBuffer({trackRemovals:!0});i=t.vs;const o=[];e.targetChanges.forEach(((d,p)=>{const v=i.get(p);if(!v)return;o.push(t.li.removeMatchingKeys(a,d.removedDocuments,p).next((()=>t.li.addMatchingKeys(a,d.addedDocuments,p))));let y=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(cs.EMPTY_BYTE_STRING,wn.min()).withLastLimboFreeSnapshotVersion(wn.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(p,y),(function(E,S,w){return E.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=vde?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0})(v,y,d)&&o.push(t.li.updateTargetData(a,y))}));let c=xd(),f=tr();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(a,d))})),o.push(Sde(a,s,e.documentUpdates).next((d=>{c=d.Bs,f=d.Ls}))),!r.isEqual(wn.min())){const d=t.li.getLastRemoteSnapshotVersion(a).next((p=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,r)));o.push(d)}return vt.waitFor(o).next((()=>s.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,c,f))).next((()=>c))})).then((a=>(t.vs=i,a)))}function Sde(n,e,t){let r=tr(),i=tr();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let s=xd();return t.forEach(((o,c)=>{const f=a.get(o);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(wn.min())?(e.removeEntry(o,c.readTime),s=s.insert(o,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),s=s.insert(o,c)):Gt(OD,"Ignoring outdated watch update for ",o,". Current version:",f.version," Watch version:",c.version)})),{Bs:s,Ls:i}}))}function wde(n,e){const t=Cn(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=xD),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Ede(n,e){const t=Cn(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.li.getTargetData(r,e).next((a=>a?(i=a,vt.resolve(i)):t.li.allocateTargetId(r).next((s=>(i=new Zh(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function uO(n,e,t){const r=Cn(n),i=r.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!hy(s))throw s;Gt(OD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function HF(n,e,t){const r=Cn(n);let i=wn.min(),a=tr();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,f,d){const p=Cn(c),v=p.Fs.get(d);return v!==void 0?vt.resolve(p.vs.get(v)):p.li.getTargetData(f,d)})(r,s,Zu(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(s,o.targetId).next((c=>{a=c}))})).next((()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:wn.min(),t?a:tr()))).next((o=>(Ade(r,ufe(e),o),{documents:o,ks:a})))))}function Ade(n,e,t){let r=n.Ms.get(e)||wn.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Ms.set(e,r)}class GF{constructor(){this.activeTargetIds=gfe()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tde{constructor(){this.vo=new GF,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new GF,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mde{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF="ConnectivityMonitor";class WF{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Gt(qF,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Gt(qF,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uw=null;function fO(){return Uw===null?Uw=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uw++,"0x"+Uw.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR="RestConnection",Cde={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Ide{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===RA?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,a){const s=fO(),o=this.Qo(e,t.toUriEncodedString());Gt(kR,`Sending RPC '${e}' ${s}:`,o,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,i,a);const{host:f}=new URL(o),d=Ep(f);return this.zo(e,o,c,r,d).then((p=>(Gt(kR,`Received RPC '${e}' ${s}: `,p),p)),(p=>{throw qv(kR,`RPC '${e}' ${s} failed with error: `,p,"url: ",o,"request:",r),p}))}jo(e,t,r,i,a,s){return this.Wo(e,t,r,i,a)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+fy})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}Qo(e,t){const r=Cde[e];let i=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rde{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="WebChannelConnection",tx=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class Av extends Ide{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Av.c_){const e=dH();tx(e,fH.STAT_EVENT,(t=>{t.stat===QN.PROXY?Gt(Is,"STAT_EVENT: detected buffering proxy"):t.stat===QN.NOPROXY&&Gt(Is,"STAT_EVENT: detected no buffering proxy")})),Av.c_=!0}}zo(e,t,r,i,a){const s=fO();return new Promise(((o,c)=>{const f=new cH;f.setWithCredentials(!0),f.listenOnce(uH.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case fE.NO_ERROR:const p=f.getResponseJson();Gt(Is,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case fE.TIMEOUT:Gt(Is,`RPC '${e}' ${s} timed out`),c(new Vt(ft.DEADLINE_EXCEEDED,"Request time out"));break;case fE.HTTP_ERROR:const v=f.getStatus();if(Gt(Is,`RPC '${e}' ${s} failed with status:`,v,"response text:",f.getResponseText()),v>0){let y=f.getResponseJson();Array.isArray(y)&&(y=y[0]);const x=y==null?void 0:y.error;if(x&&x.status&&x.message){const E=(function(w){const R=w.toLowerCase().replace(/_/g,"-");return Object.values(ft).indexOf(R)>=0?R:ft.UNKNOWN})(x.status);c(new Vt(E,x.message))}else c(new Vt(ft.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Vt(ft.UNAVAILABLE,"Connection failed."));break;default:gn(9055,{l_:e,streamId:s,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Gt(Is,`RPC '${e}' ${s} completed.`)}}));const d=JSON.stringify(i);Gt(Is,`RPC '${e}' ${s} sending request:`,i),f.send(t,"POST",d,r,15)}))}T_(e,t,r){const i=fO(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(o.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Go(o.initMessageHeaders,t,r),o.encodeInitMessageHeaders=!0;const f=a.join("");Gt(Is,`Creating RPC '${e}' stream ${i}: ${f}`,o);const d=s.createWebChannel(f,o);this.I_(d);let p=!1,v=!1;const y=new Rde({Ho:x=>{v?Gt(Is,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(p||(Gt(Is,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),Gt(Is,`RPC '${e}' stream ${i} sending:`,x),d.send(x))},Jo:()=>d.close()});return tx(d,vx.EventType.OPEN,(()=>{v||(Gt(Is,`RPC '${e}' stream ${i} transport opened.`),y.i_())})),tx(d,vx.EventType.CLOSE,(()=>{v||(v=!0,Gt(Is,`RPC '${e}' stream ${i} transport closed`),y.o_(),this.E_(d))})),tx(d,vx.EventType.ERROR,(x=>{v||(v=!0,qv(Is,`RPC '${e}' stream ${i} transport errored. Name:`,x.name,"Message:",x.message),y.o_(new Vt(ft.UNAVAILABLE,"The operation could not be completed")))})),tx(d,vx.EventType.MESSAGE,(x=>{var E;if(!v){const S=x.data[0];Er(!!S,16349);const w=S,R=(w==null?void 0:w.error)||((E=w[0])==null?void 0:E.error);if(R){Gt(Is,`RPC '${e}' stream ${i} received error:`,R);const N=R.status;let O=(function(U){const P=ta[U];if(P!==void 0)return $H(P)})(N),z=R.message;O===void 0&&(O=ft.INTERNAL,z="Unknown error status: "+N+" with message "+R.message),v=!0,y.o_(new Vt(O,z)),d.close()}else Gt(Is,`RPC '${e}' stream ${i} received:`,S),y.__(S)}})),Av.u_(),setTimeout((()=>{y.s_()}),0),y}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return hH()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pde(n){return new Av(n)}function UR(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(n){return new Lfe(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Av.c_=!1;class l7{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=i,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Gt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F="PersistentStream";class c7{constructor(e,t,r,i,a,s,o,c){this.Ci=e,this.b_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new l7(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ft.RESOURCE_EXHAUSTED?(bd(t.toString()),bd("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ft.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new Vt(ft.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Gt($F,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Gt($F,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Nde extends c7{constructor(e,t,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Ffe(this.serializer,e),r=(function(a){if(!("targetChange"in a))return wn.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?wn.min():s.readTime?Qu(s.readTime):wn.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=cO(this.serializer),t.addTarget=(function(a,s){let o;const c=s.target;if(o=rO(c)?{documents:Bfe(a,c)}:{query:Vfe(a,c).ft},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=KH(a,s.resumeToken);const f=sO(a,s.expectedCount);f!==null&&(o.expectedCount=f)}else if(s.snapshotVersion.compareTo(wn.min())>0){o.readTime=kA(a,s.snapshotVersion.toTimestamp());const f=sO(a,s.expectedCount);f!==null&&(o.expectedCount=f)}return o})(this.serializer,e);const r=Gfe(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=cO(this.serializer),t.removeTarget=e,this.K_(t)}}class Ode extends c7{constructor(e,t,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Er(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Er(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Er(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=jfe(e.writeResults,e.commitTime),r=Qu(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=cO(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>zfe(this.serializer,r)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dde{}class Lde extends Dde{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Vt(ft.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Wo(e,oO(t,r),i,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Vt(ft.UNKNOWN,a.toString())}))}jo(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.jo(e,oO(t,r),i,s,o,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Vt(ft.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function kde(n,e,t,r){return new Lde(n,e,t,r)}class Ude{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bd(t),this.aa=!1):Gt("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="RemoteStore";class Fde{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((s=>{r.enqueueAndForget((async()=>{Og(this)&&(Gt(pg,"Restarting streams for network reachability change."),await(async function(c){const f=Cn(c);f.Ea.add(4),await Q_(f),f.Va.set("Unknown"),f.Ea.delete(4),await HM(f)})(this))}))})),this.Va=new Ude(r,i)}}async function HM(n){if(Og(n))for(const e of n.Ra)await e(!0)}async function Q_(n){for(const e of n.Ra)await e(!1)}function u7(n,e){const t=Cn(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),UD(t)?kD(t):py(t).O_()&&LD(t,e))}function DD(n,e){const t=Cn(n),r=py(t);t.Ia.delete(e),r.O_()&&f7(t,e),t.Ia.size===0&&(r.O_()?r.L_():Og(t)&&t.Va.set("Unknown"))}function LD(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(wn.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}py(n).Z_(e)}function f7(n,e){n.da.$e(e),py(n).X_(e)}function kD(n){n.da=new Pfe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),py(n).start(),n.Va.ua()}function UD(n){return Og(n)&&!py(n).x_()&&n.Ia.size>0}function Og(n){return Cn(n).Ea.size===0}function d7(n){n.da=void 0}async function zde(n){n.Va.set("Online")}async function jde(n){n.Ia.forEach(((e,t)=>{LD(n,e)}))}async function Bde(n,e){d7(n),UD(n)?(n.Va.ha(e),kD(n)):n.Va.set("Unknown")}async function Vde(n,e,t){if(n.Va.set("Online"),e instanceof YH&&e.state===2&&e.cause)try{await(async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ia.delete(o),i.da.removeTarget(o))})(n,e)}catch(r){Gt(pg,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await FA(n,r)}else if(e instanceof mE?n.da.Xe(e):e instanceof XH?n.da.st(e):n.da.tt(e),!t.isEqual(wn.min()))try{const r=await o7(n.localStore);t.compareTo(r)>=0&&await(function(a,s){const o=a.da.Tt(s);return o.targetChanges.forEach(((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.Ia.get(f);d&&a.Ia.set(f,d.withResumeToken(c.resumeToken,s))}})),o.targetMismatches.forEach(((c,f)=>{const d=a.Ia.get(c);if(!d)return;a.Ia.set(c,d.withResumeToken(cs.EMPTY_BYTE_STRING,d.snapshotVersion)),f7(a,c);const p=new Zh(d.target,c,f,d.sequenceNumber);LD(a,p)})),a.remoteSyncer.applyRemoteEvent(o)})(n,t)}catch(r){Gt(pg,"Failed to raise snapshot:",r),await FA(n,r)}}async function FA(n,e,t){if(!hy(e))throw e;n.Ea.add(1),await Q_(n),n.Va.set("Offline"),t||(t=()=>o7(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Gt(pg,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await HM(n)}))}function h7(n,e){return e().catch((t=>FA(n,t,e)))}async function GM(n){const e=Cn(n),t=mp(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xD;for(;Hde(e);)try{const i=await wde(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,Gde(e,i)}catch(i){await FA(e,i)}p7(e)&&m7(e)}function Hde(n){return Og(n)&&n.Ta.length<10}function Gde(n,e){n.Ta.push(e);const t=mp(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function p7(n){return Og(n)&&!mp(n).x_()&&n.Ta.length>0}function m7(n){mp(n).start()}async function qde(n){mp(n).ra()}async function Wde(n){const e=mp(n);for(const t of n.Ta)e.ea(t.mutations)}async function $de(n,e,t){const r=n.Ta.shift(),i=MD.from(r,e,t);await h7(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await GM(n)}async function Xde(n,e){e&&mp(n).Y_&&await(async function(r,i){if((function(s){return Cfe(s)&&s!==ft.ABORTED})(i.code)){const a=r.Ta.shift();mp(r).B_(),await h7(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await GM(r)}})(n,e),p7(n)&&m7(n)}async function XF(n,e){const t=Cn(n);t.asyncQueue.verifyOperationInProgress(),Gt(pg,"RemoteStore received new credentials");const r=Og(t);t.Ea.add(3),await Q_(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await HM(t)}async function Yde(n,e){const t=Cn(n);e?(t.Ea.delete(2),await HM(t)):e||(t.Ea.add(2),await Q_(t),t.Va.set("Unknown"))}function py(n){return n.ma||(n.ma=(function(t,r,i){const a=Cn(t);return a.sa(),new Nde(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Zo:zde.bind(null,n),Yo:jde.bind(null,n),t_:Bde.bind(null,n),J_:Vde.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),UD(n)?kD(n):n.Va.set("Unknown")):(await n.ma.stop(),d7(n))}))),n.ma}function mp(n){return n.fa||(n.fa=(function(t,r,i){const a=Cn(t);return a.sa(),new Ode(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:qde.bind(null,n),t_:Xde.bind(null,n),ta:Wde.bind(null,n),na:$de.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await GM(n)):(await n.fa.stop(),n.Ta.length>0&&(Gt(pg,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new pd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const s=Date.now()+r,o=new FD(e,t,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Vt(ft.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zD(n,e){if(bd("AsyncQueue",`${e}: ${n}`),hy(n))return new Vt(ft.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{static emptySet(e){return new Tv(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||sn.comparator(t.key,r.key):(t,r)=>sn.comparator(t.key,r.key),this.keyedMap=yx(),this.sortedSet=new bi(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Tv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Tv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(){this.ga=new bi(sn.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):gn(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Kv{constructor(e,t,r,i,a,s,o,c,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,a){const s=[];return t.forEach((o=>{s.push({type:0,doc:o})})),new Kv(e,t,Tv.emptySet(t),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&UM(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kde{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class Zde{constructor(){this.queries=KF(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Cn(t),a=i.queries;i.queries=KF(),a.forEach(((s,o)=>{for(const c of o.ba)c.onError(r)}))})(this,new Vt(ft.ABORTED,"Firestore shutting down"))}}function KF(){return new Ng((n=>LH(n)),UM)}async function jD(n,e){const t=Cn(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.Sa()&&e.Da()&&(r=2):(a=new Kde,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){const o=zD(s,`Initialization of query '${dv(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&VD(t)}async function BD(n,e){const t=Cn(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const s=a.ba.indexOf(e);s>=0&&(a.ba.splice(s,1),a.ba.length===0?i=e.Da()?0:1:!a.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Qde(n,e){const t=Cn(n);let r=!1;for(const i of e){const a=i.query,s=t.queries.get(a);if(s){for(const o of s.ba)o.Fa(i)&&(r=!0);s.wa=i}}r&&VD(t)}function Jde(n,e,t){const r=Cn(n),i=r.queries.get(e);if(i)for(const a of i.ba)a.onError(t);r.queries.delete(e)}function VD(n){n.Ca.forEach((e=>{e.next()}))}var dO,ZF;(ZF=dO||(dO={})).Ma="default",ZF.Cache="cache";class HD{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Kv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Kv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==dO.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(e){this.key=e}}class v7{constructor(e){this.key=e}}class ehe{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=tr(),this.mutatedKeys=tr(),this.eu=kH(e),this.tu=new Tv(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new YF,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,s=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((d,p)=>{const v=i.get(d),y=FM(this.query,p)?p:null,x=!!v&&this.mutatedKeys.has(v.key),E=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let S=!1;v&&y?v.data.isEqual(y.data)?x!==E&&(r.track({type:3,doc:y}),S=!0):this.su(v,y)||(r.track({type:2,doc:y}),S=!0,(c&&this.eu(y,c)>0||f&&this.eu(y,f)<0)&&(o=!0)):!v&&y?(r.track({type:0,doc:y}),S=!0):v&&!y&&(r.track({type:1,doc:v}),S=!0,(c||f)&&(o=!0)),S&&(y?(s=s.add(y),a=E?a.add(d):a.delete(d)):(s=s.delete(d),a=a.delete(d)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),a=a.delete(d.key),r.track({type:1,doc:d})}return{tu:s,iu:r,Ss:o,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((d,p)=>(function(y,x){const E=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gn(20277,{Vt:S})}};return E(y)-E(x)})(d.type,p.type)||this.eu(d.doc,p.doc))),this.ou(r),i=i??!1;const o=t&&!i?this._u():[],c=this.Ya.size===0&&this.current&&!i?1:0,f=c!==this.Xa;return this.Xa=c,s.length!==0||f?{snapshot:new Kv(this.query,e.tu,a,s,e.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new YF,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=tr(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new v7(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new g7(r))})),t}cu(e){this.Za=e.ks,this.Ya=tr();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Kv.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const GD="SyncEngine";class the{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class nhe{constructor(e){this.key=e,this.hu=!1}}class rhe{constructor(e,t,r,i,a,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Ng((o=>LH(o)),UM),this.Iu=new Map,this.Eu=new Set,this.Ru=new bi(sn.comparator),this.Au=new Map,this.Vu=new RD,this.du={},this.mu=new Map,this.fu=Yv.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ihe(n,e,t=!0){const r=w7(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await y7(r,e,t,!0),i}async function ahe(n,e){const t=w7(n);await y7(t,e,!0,!1)}async function y7(n,e,t,r){const i=await Ede(n.localStore,Zu(e)),a=i.targetId,s=n.sharedClientState.addLocalQueryTarget(a,t);let o;return r&&(o=await she(n,e,a,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&u7(n.remoteStore,i),o}async function she(n,e,t,r,i){n.pu=(p,v,y)=>(async function(E,S,w,R){let N=S.view.ru(w);N.Ss&&(N=await HF(E.localStore,S.query,!1).then((({documents:U})=>S.view.ru(U,N))));const O=R&&R.targetChanges.get(S.targetId),z=R&&R.targetMismatches.get(S.targetId)!=null,k=S.view.applyChanges(N,E.isPrimaryClient,O,z);return JF(E,S.targetId,k.au),k.snapshot})(n,p,v,y);const a=await HF(n.localStore,e,!0),s=new ehe(e,a.ks),o=s.ru(a.documents),c=Z_.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=s.applyChanges(o,n.isPrimaryClient,c);JF(n,t,f.au);const d=new the(e,t,s);return n.Tu.set(e,d),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function ohe(n,e,t){const r=Cn(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((s=>!UM(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await uO(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&DD(r.remoteStore,i.targetId),hO(r,i.targetId)})).catch(dy)):(hO(r,i.targetId),await uO(r.localStore,i.targetId,!0))}async function lhe(n,e){const t=Cn(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),DD(t.remoteStore,r.targetId))}async function che(n,e,t){const r=ghe(n);try{const i=await(function(s,o){const c=Cn(s),f=ei.now(),d=o.reduce(((y,x)=>y.add(x.key)),tr());let p,v;return c.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let x=xd(),E=tr();return c.xs.getEntries(y,d).next((S=>{x=S,x.forEach(((w,R)=>{R.isValidDocument()||(E=E.add(w))}))})).next((()=>c.localDocuments.getOverlayedDocuments(y,x))).next((S=>{p=S;const w=[];for(const R of o){const N=wfe(R,p.get(R.key).overlayedDocument);N!=null&&w.push(new Tp(R.key,N,MH(N.value.mapValue),Hc.exists(!0)))}return c.mutationQueue.addMutationBatch(y,f,w,o)})).next((S=>{v=S;const w=S.applyToLocalDocumentSet(p,E);return c.documentOverlayCache.saveOverlays(y,S.batchId,w)}))})).then((()=>({batchId:v.batchId,changes:FH(p)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,o,c){let f=s.du[s.currentUser.toKey()];f||(f=new bi(er)),f=f.insert(o,c),s.du[s.currentUser.toKey()]=f})(r,i.batchId,t),await J_(r,i.changes),await GM(r.remoteStore)}catch(i){const a=zD(i,"Failed to persist write");t.reject(a)}}async function b7(n,e){const t=Cn(n);try{const r=await _de(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const s=t.Au.get(a);s&&(Er(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Er(s.hu,14607):i.removedDocuments.size>0&&(Er(s.hu,42227),s.hu=!1))})),await J_(t,r,e)}catch(r){await dy(r)}}function QF(n,e,t){const r=Cn(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)})),(function(s,o){const c=Cn(s);c.onlineState=o;let f=!1;c.queries.forEach(((d,p)=>{for(const v of p.ba)v.va(o)&&(f=!0)})),f&&VD(c)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function uhe(n,e,t){const r=Cn(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let s=new bi(sn.comparator);s=s.insert(a,Ns.newNoDocument(a,wn.min()));const o=tr().add(a),c=new BM(wn.min(),new Map,new bi(er),s,o);await b7(r,c),r.Ru=r.Ru.remove(a),r.Au.delete(e),qD(r)}else await uO(r.localStore,e,!1).then((()=>hO(r,e,t))).catch(dy)}async function fhe(n,e){const t=Cn(n),r=e.batch.batchId;try{const i=await xde(t.localStore,e);_7(t,r,null),x7(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await J_(t,i)}catch(i){await dy(i)}}async function dhe(n,e,t){const r=Cn(n);try{const i=await(function(s,o){const c=Cn(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let d;return c.mutationQueue.lookupMutationBatch(f,o).next((p=>(Er(p!==null,37113),d=p.keys(),c.mutationQueue.removeMutationBatch(f,p)))).next((()=>c.mutationQueue.performConsistencyCheck(f))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(f,d,o))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d))).next((()=>c.localDocuments.getDocuments(f,d)))}))})(r.localStore,e);_7(r,e,t),x7(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await J_(r,i)}catch(i){await dy(i)}}function x7(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function _7(n,e,t){const r=Cn(n);let i=r.du[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function hO(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||S7(n,r)}))}function S7(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(DD(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),qD(n))}function JF(n,e,t){for(const r of t)r instanceof g7?(n.Vu.addReference(r.key,e),hhe(n,r)):r instanceof v7?(Gt(GD,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||S7(n,r.key)):gn(19791,{wu:r})}function hhe(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(Gt(GD,"New document in limbo: "+t),n.Eu.add(r),qD(n))}function qD(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new sn(qr.fromString(e)),r=n.fu.next();n.Au.set(r,new nhe(t)),n.Ru=n.Ru.insert(t,r),u7(n.remoteStore,new Zh(Zu(kM(t.path)),r,"TargetPurposeLimboResolution",OM.ce))}}async function J_(n,e,t){const r=Cn(n),i=[],a=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((o,c)=>{s.push(r.pu(c,e,t).then((f=>{var d;if((f||t)&&r.isPrimaryClient){const p=f?!f.fromCache:(d=t==null?void 0:t.targetChanges.get(c.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(f){i.push(f);const p=ND.Es(c.targetId,f);a.push(p)}})))})),await Promise.all(s),r.Pu.J_(i),await(async function(c,f){const d=Cn(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>vt.forEach(f,(v=>vt.forEach(v.Ts,(y=>d.persistence.referenceDelegate.addReference(p,v.targetId,y))).next((()=>vt.forEach(v.Is,(y=>d.persistence.referenceDelegate.removeReference(p,v.targetId,y)))))))))}catch(p){if(!hy(p))throw p;Gt(OD,"Failed to update sequence numbers: "+p)}for(const p of f){const v=p.targetId;if(!p.fromCache){const y=d.vs.get(v),x=y.snapshotVersion,E=y.withLastLimboFreeSnapshotVersion(x);d.vs=d.vs.insert(v,E)}}})(r.localStore,a))}async function phe(n,e){const t=Cn(n);if(!t.currentUser.isEqual(e)){Gt(GD,"User change. New user:",e.toKey());const r=await s7(t.localStore,e);t.currentUser=e,(function(a,s){a.mu.forEach((o=>{o.forEach((c=>{c.reject(new Vt(ft.CANCELLED,s))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await J_(t,r.Ns)}}function mhe(n,e){const t=Cn(n),r=t.Au.get(e);if(r&&r.hu)return tr().add(r.key);{let i=tr();const a=t.Iu.get(e);if(!a)return i;for(const s of a){const o=t.Tu.get(s);i=i.unionWith(o.view.nu)}return i}}function w7(n){const e=Cn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=b7.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mhe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uhe.bind(null,e),e.Pu.J_=Qde.bind(null,e.eventManager),e.Pu.yu=Jde.bind(null,e.eventManager),e}function ghe(n){const e=Cn(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fhe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dhe.bind(null,e),e}class zA{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=VM(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return bde(this.persistence,new gde,e.initialUser,this.serializer)}Cu(e){return new a7(PD.Vi,this.serializer)}Du(e){return new Tde}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zA.provider={build:()=>new zA};class vhe extends zA{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Er(this.persistence.referenceDelegate instanceof UA,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new tde(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Uo.withCacheSize(this.cacheSizeBytes):Uo.DEFAULT;return new a7((r=>UA.Vi(r,t)),this.serializer)}}class pO{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>QF(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=phe.bind(null,this.syncEngine),await Yde(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Zde})()}createDatastore(e){const t=VM(e.databaseInfo.databaseId),r=Pde(e.databaseInfo);return kde(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,s,o){return new Fde(r,i,a,s,o)})(this.localStore,this.datastore,e.asyncQueue,(t=>QF(this.syncEngine,t,0)),(function(){return WF.v()?new WF:new Mde})())}createSyncEngine(e,t){return(function(i,a,s,o,c,f,d){const p=new rhe(i,a,s,o,c,f);return d&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const a=Cn(i);Gt(pg,"RemoteStore shutting down."),a.Ea.add(5),await Q_(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}pO.provider={build:()=>new pO};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):bd("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="FirestoreClient";class yhe{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=i,this.user=Ps.UNAUTHENTICATED,this.clientId=bD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async s=>{Gt(gp,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(Gt(gp,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=zD(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function FR(n,e){n.asyncQueue.verifyOperationInProgress(),Gt(gp,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await s7(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function ez(n,e){n.asyncQueue.verifyOperationInProgress();const t=await bhe(n);Gt(gp,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>XF(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>XF(e.remoteStore,i))),n._onlineComponents=e}async function bhe(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Gt(gp,"Using user provided OfflineComponentProvider");try{await FR(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ft.FAILED_PRECONDITION||i.code===ft.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;qv("Error using user provided cache. Falling back to memory cache: "+t),await FR(n,new zA)}}else Gt(gp,"Using default OfflineComponentProvider"),await FR(n,new vhe(void 0));return n._offlineComponents}async function E7(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Gt(gp,"Using user provided OnlineComponentProvider"),await ez(n,n._uninitializedComponentsProvider._online)):(Gt(gp,"Using default OnlineComponentProvider"),await ez(n,new pO))),n._onlineComponents}function xhe(n){return E7(n).then((e=>e.syncEngine))}async function jA(n){const e=await E7(n),t=e.eventManager;return t.onListen=ihe.bind(null,e.syncEngine),t.onUnlisten=ohe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ahe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lhe.bind(null,e.syncEngine),t}function _he(n,e,t,r){const i=new WD(r),a=new HD(e,i,t);return n.asyncQueue.enqueueAndForget((async()=>jD(await jA(n),a))),()=>{i.Nu(),n.asyncQueue.enqueueAndForget((async()=>BD(await jA(n),a)))}}function She(n,e,t={}){const r=new pd;return n.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,f){const d=new WD({next:v=>{d.Nu(),s.enqueueAndForget((()=>BD(a,p)));const y=v.docs.has(o);!y&&v.fromCache?f.reject(new Vt(ft.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&v.fromCache&&c&&c.source==="server"?f.reject(new Vt(ft.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),p=new HD(kM(o.path),d,{includeMetadataChanges:!0,Ka:!0});return jD(a,p)})(await jA(n),n.asyncQueue,e,t,r))),r.promise}function whe(n,e,t={}){const r=new pd;return n.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,f){const d=new WD({next:v=>{d.Nu(),s.enqueueAndForget((()=>BD(a,p))),v.fromCache&&c.source==="server"?f.reject(new Vt(ft.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),p=new HD(o,d,{includeMetadataChanges:!0,Ka:!0});return jD(a,p)})(await jA(n),n.asyncQueue,e,t,r))),r.promise}function Ehe(n,e){const t=new pd;return n.asyncQueue.enqueueAndForget((async()=>che(await xhe(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A7(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ahe="ComponentProvider",tz=new Map;function The(n,e,t,r,i){return new Wue(n,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,A7(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7="firestore.googleapis.com",nz=!0;class rz{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Vt(ft.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=T7,this.ssl=nz}else this.host=e.host,this.ssl=e.ssl??nz;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=i7;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Jfe)throw new Vt(ft.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Lue("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=A7(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Vt(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Vt(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Vt(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qM{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rz({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Vt(ft.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Vt(ft.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rz(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Aue;switch(r.type){case"firstParty":return new Iue(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Vt(ft.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=tz.get(t);r&&(Gt(Ahe,"Removing Datastore"),tz.delete(t),r.terminate())})(this),Promise.resolve()}}function Mhe(n,e,t,r={}){var f;n=ec(n,qM);const i=Ep(e),a=n._getSettings(),s={...a,emulatorOptions:n._getEmulatorOptions()},o=`${e}:${t}`;i&&(hD(`https://${o}`),pD("Firestore",!0)),a.host!==T7&&a.host!==o&&qv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:o,ssl:i,emulatorOptions:r};if(!fg(c,s)&&(n._setSettings(c),r.mockUserToken)){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=Ps.MOCK_USER;else{d=nH(r.mockUserToken,(f=n._app)==null?void 0:f.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Vt(ft.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ps(v)}n._authCredentials=new Tue(new mH(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Dg(this.firestore,e,this._query)}}class Vi{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vi(this.firestore,e,this._key)}toJSON(){return{type:Vi._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(X_(t,Vi._jsonSchema))return new Vi(e,r||null,new sn(qr.fromString(t.referencePath)))}}Vi._jsonSchemaVersion="firestore/documentReference/1.0",Vi._jsonSchema={type:ra("string",Vi._jsonSchemaVersion),referencePath:ra("string")};class rp extends Dg{constructor(e,t,r){super(e,t,kM(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vi(this.firestore,null,new sn(e))}withConverter(e){return new rp(this.firestore,e,this._path)}}function km(n,e,...t){if(n=Ii(n),gH("collection","path",e),n instanceof qM){const r=qr.fromString(e,...t);return gF(r),new rp(n,null,r)}{if(!(n instanceof Vi||n instanceof rp))throw new Vt(ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qr.fromString(e,...t));return gF(r),new rp(n.firestore,null,r)}}function Lc(n,e,...t){if(n=Ii(n),arguments.length===1&&(e=bD.newId()),gH("doc","path",e),n instanceof qM){const r=qr.fromString(e,...t);return mF(r),new Vi(n,null,new sn(r))}{if(!(n instanceof Vi||n instanceof rp))throw new Vt(ft.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qr.fromString(e,...t));return mF(r),new Vi(n.firestore,n instanceof rp?n.converter:null,new sn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz="AsyncQueue";class az{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new l7(this,"async_queue_retry"),this._c=()=>{const r=UR();r&&Gt(iz,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=UR();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=UR();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new pd;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!hy(e))throw e;Gt(iz,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,bd("INTERNAL UNHANDLED ERROR: ",sz(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=FD.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&gn(47125,{Pc:sz(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function sz(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class vp extends qM{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new az,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new az(e),this._firestoreClient=void 0,await e}}}function Che(n,e){const t=typeof n=="object"?n:vD(),r=typeof n=="string"?n:RA,i=PM(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=J9("firestore");a&&Mhe(i,...a)}return i}function WM(n){if(n._terminated)throw new Vt(ft.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Ihe(n),n._firestoreClient}function Ihe(n){var r,i,a,s;const e=n._freezeSettings(),t=The(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,(i=n._app)==null?void 0:i.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new yhe(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(c){const f=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kl(cs.fromBase64String(e))}catch(t){throw new Vt(ft.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Kl(cs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(X_(e,Kl._jsonSchema))return Kl.fromBase64String(e.bytes)}}Kl._jsonSchemaVersion="firestore/bytes/1.0",Kl._jsonSchema={type:ra("string",Kl._jsonSchemaVersion),bytes:ra("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Vt(ft.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new as(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Vt(ft.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Vt(ft.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return er(this._lat,e._lat)||er(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ju._jsonSchemaVersion}}static fromJSON(e){if(X_(e,Ju._jsonSchema))return new Ju(e.latitude,e.longitude)}}Ju._jsonSchemaVersion="firestore/geoPoint/1.0",Ju._jsonSchema={type:ra("string",Ju._jsonSchemaVersion),latitude:ra("number"),longitude:ra("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Gc._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(X_(e,Gc._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Gc(e.vectorValues);throw new Vt(ft.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gc._jsonSchemaVersion="firestore/vectorValue/1.0",Gc._jsonSchema={type:ra("string",Gc._jsonSchemaVersion),vectorValues:ra("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rhe=/^__.*__$/;class Phe{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Tp(e,this.data,this.fieldMask,t,this.fieldTransforms):new K_(e,this.data,t,this.fieldTransforms)}}class M7{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Tp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function C7(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gn(40011,{dataSource:n})}}class YD{constructor(e,t,r,i,a,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new YD({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return BA(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(C7(this.dataSource)&&Rhe.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Nhe{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||VM(e)}createContext(e,t,r,i=!1){return new YD({dataSource:e,methodName:t,targetDoc:r,path:as.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function KD(n){const e=n._freezeSettings(),t=VM(n._databaseId);return new Nhe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ohe(n,e,t,r,i,a={}){const s=n.createContext(a.merge||a.mergeFields?2:0,e,t,i);ZD("Data must be an object, but it was:",s,r);const o=I7(r,s);let c,f;if(a.merge)c=new ul(s.fieldMask),f=s.fieldTransforms;else if(a.mergeFields){const d=[];for(const p of a.mergeFields){const v=Zv(e,p,t);if(!s.contains(v))throw new Vt(ft.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);N7(d,v)||d.push(v)}c=new ul(d),f=s.fieldTransforms.filter((p=>c.covers(p.field)))}else c=null,f=s.fieldTransforms;return new Phe(new jo(o),c,f)}class $M extends XD{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $M}}function Dhe(n,e,t,r){const i=n.createContext(1,e,t);ZD("Data must be an object, but it was:",i,r);const a=[],s=jo.empty();Ap(r,((c,f)=>{const d=P7(e,c,t);f=Ii(f);const p=i.childContextForFieldPath(d);if(f instanceof $M)a.push(d);else{const v=e1(f,p);v!=null&&(a.push(d),s.set(d,v))}}));const o=new ul(a);return new M7(s,o,i.fieldTransforms)}function Lhe(n,e,t,r,i,a){const s=n.createContext(1,e,t),o=[Zv(e,r,t)],c=[i];if(a.length%2!=0)throw new Vt(ft.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)o.push(Zv(e,a[v])),c.push(a[v+1]);const f=[],d=jo.empty();for(let v=o.length-1;v>=0;--v)if(!N7(f,o[v])){const y=o[v];let x=c[v];x=Ii(x);const E=s.childContextForFieldPath(y);if(x instanceof $M)f.push(y);else{const S=e1(x,E);S!=null&&(f.push(y),d.set(y,S))}}const p=new ul(f);return new M7(d,p,s.fieldTransforms)}function khe(n,e,t,r=!1){return e1(t,n.createContext(r?4:3,e))}function e1(n,e){if(R7(n=Ii(n)))return ZD("Unsupported field value:",e,n),I7(n,e);if(n instanceof XD)return(function(r,i){if(!C7(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const a=[];let s=0;for(const o of r){let c=e1(o,i.childContextForArray(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=Ii(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return vfe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=ei.fromDate(r);return{timestampValue:kA(i.serializer,a)}}if(r instanceof ei){const a=new ei(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:kA(i.serializer,a)}}if(r instanceof Ju)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kl)return{bytesValue:KH(i.serializer,r._byteString)};if(r instanceof Vi){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ID(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Gc)return(function(s,o){const c=s instanceof Gc?s.toArray():s;return{mapValue:{fields:{[AH]:{stringValue:TH},[PA]:{arrayValue:{values:c.map((d=>{if(typeof d!="number")throw o.createError("VectorValues must only contain numeric values.");return AD(o.serializer,d)}))}}}}}})(r,i);if(r7(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${NM(r)}`)})(n,e)}function I7(n,e){const t={};return bH(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ap(n,((r,i)=>{const a=e1(i,e.childContextForField(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function R7(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ei||n instanceof Ju||n instanceof Kl||n instanceof Vi||n instanceof XD||n instanceof Gc||r7(n))}function ZD(n,e,t){if(!R7(t)||!vH(t)){const r=NM(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function Zv(n,e,t){if((e=Ii(e))instanceof $D)return e._internalPath;if(typeof e=="string")return P7(n,e);throw BA("Field path arguments must be of type string or ",n,!1,void 0,t)}const Uhe=new RegExp("[~\\*/\\[\\]]");function P7(n,e,t){if(e.search(Uhe)>=0)throw BA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $D(...e.split("."))._internalPath}catch{throw BA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function BA(n,e,t,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Vt(ft.INVALID_ARGUMENT,o+n+c)}function N7(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fhe{convertValue(e,t="none"){switch(pp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw gn(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ap(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){var r,i,a;const t=(a=(i=(r=e.fields)==null?void 0:r[PA].arrayValue)==null?void 0:i.values)==null?void 0:a.map((s=>zi(s.doubleValue)));return new Gc(t)}convertGeoPoint(e){return new Ju(zi(e.latitude),zi(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=LM(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(d_(e));default:return null}}convertTimestamp(e){const t=dp(e);return new ei(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=qr.fromString(e);Er(n7(r),9688,{name:e});const i=new h_(r.get(1),r.get(3)),a=new sn(r.popFirst(5));return i.isEqual(t)||bd(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD extends Fhe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vi(this.firestore,null,t)}}const oz="@firebase/firestore",lz="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cz(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Vi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zhe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Zv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class zhe extends O7{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D7(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Vt(ft.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class JD{}class jhe extends JD{}function Fw(n,e,...t){let r=[];e instanceof JD&&r.push(e),r=r.concat(t),(function(a){const s=a.filter((c=>c instanceof eL)).length,o=a.filter((c=>c instanceof XM)).length;if(s>1||s>0&&o>0)throw new Vt(ft.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class XM extends jhe{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new XM(e,t,r)}_apply(e){const t=this._parse(e);return L7(e._query,t),new Dg(e.firestore,e.converter,iO(e._query,t))}_parse(e){const t=KD(e.firestore);return(function(a,s,o,c,f,d,p){let v;if(f.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Vt(ft.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){fz(p,d);const x=[];for(const E of p)x.push(uz(c,a,E));v={arrayValue:{values:x}}}else v=uz(c,a,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||fz(p,d),v=khe(o,s,p,d==="in"||d==="not-in");return na.create(f,d,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function zw(n,e,t){const r=e,i=Zv("where",n);return XM._create(i,r,t)}class eL extends JD{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new eL(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:$c.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let s=i;const o=a.getFlattenedFilters();for(const c of o)L7(s,c),s=iO(s,c)})(e._query,t),new Dg(e.firestore,e.converter,iO(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function uz(n,e,t){if(typeof(t=Ii(t))=="string"){if(t==="")throw new Vt(ft.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DH(e)&&t.indexOf("/")!==-1)throw new Vt(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(qr.fromString(t));if(!sn.isDocumentKey(r))throw new Vt(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return EF(n,new sn(r))}if(t instanceof Vi)return EF(n,t._key);throw new Vt(ft.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${NM(t)}.`)}function fz(n,e){if(!Array.isArray(n)||n.length===0)throw new Vt(ft.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function L7(n,e){const t=(function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Vt(ft.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Vt(ft.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Bhe(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class xx{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qm extends O7{constructor(e,t,r,i,a,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new gE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Zv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Vt(ft.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Qm._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Qm._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qm._jsonSchema={type:ra("string",Qm._jsonSchemaVersion),bundleSource:ra("string","DocumentSnapshot"),bundleName:ra("string"),bundle:ra("string")};class gE extends Qm{data(e={}){return super.data(e)}}class Jm{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new xx(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new gE(this._firestore,this._userDataWriter,r.key,r,new xx(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Vt(ft.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((o=>{const c=new gE(i._firestore,i._userDataWriter,o.doc.key,o.doc,new xx(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>a||o.type!==3)).map((o=>{const c=new gE(i._firestore,i._userDataWriter,o.doc.key,o.doc,new xx(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,d=-1;return o.type!==0&&(f=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),d=s.indexOf(o.doc.key)),{type:Vhe(o.type),doc:c,oldIndex:f,newIndex:d}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Vt(ft.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Jm._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bD.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Vhe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gn(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jm._jsonSchemaVersion="firestore/querySnapshot/1.0",Jm._jsonSchema={type:ra("string",Jm._jsonSchemaVersion),bundleSource:ra("string","QuerySnapshot"),bundleName:ra("string"),bundle:ra("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hhe(n){n=ec(n,Vi);const e=ec(n.firestore,vp),t=WM(e);return She(t,n._key).then((r=>k7(e,n,r)))}function jw(n){n=ec(n,Dg);const e=ec(n.firestore,vp),t=WM(e),r=new QD(e);return D7(n._query),whe(t,n._query).then((i=>new Jm(e,r,n,i)))}function iv(n,e,t,...r){n=ec(n,Vi);const i=ec(n.firestore,vp),a=KD(i);let s;return s=typeof(e=Ii(e))=="string"||e instanceof $D?Lhe(a,"updateDoc",n._key,e,t,r):Dhe(a,"updateDoc",n._key,e),tL(i,[s.toMutation(n._key,Hc.exists(!0))])}function Bw(n){return tL(ec(n.firestore,vp),[new TD(n._key,Hc.none())])}function nx(n,e){const t=ec(n.firestore,vp),r=Lc(n),i=Bhe(n.converter,e),a=KD(n.firestore);return tL(t,[Ohe(a,"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Hc.exists(!1))]).then((()=>r))}function rx(n,...e){var f,d,p;n=Ii(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||cz(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(cz(e[r])){const v=e[r];e[r]=(f=v.next)==null?void 0:f.bind(v),e[r+1]=(d=v.error)==null?void 0:d.bind(v),e[r+2]=(p=v.complete)==null?void 0:p.bind(v)}let a,s,o;if(n instanceof Vi)s=ec(n.firestore,vp),o=kM(n._key.path),a={next:v=>{e[r]&&e[r](k7(s,n,v))},error:e[r+1],complete:e[r+2]};else{const v=ec(n,Dg);s=ec(v.firestore,vp),o=v._query;const y=new QD(s);a={next:x=>{e[r]&&e[r](new Jm(s,y,v,x))},error:e[r+1],complete:e[r+2]},D7(n._query)}const c=WM(s);return _he(c,o,i,a)}function tL(n,e){const t=WM(n);return Ehe(t,e)}function k7(n,e,t){const r=t.docs.get(e._key),i=new QD(n);return new Qm(n,i,e._key,r,new xx(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){Eue(Pg),dg(new up("firestore",((r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new vp(new Mue(r.getProvider("auth-internal")),new Rue(s,r.getProvider("app-check-internal")),$ue(s,i),s);return a={useFetchStreams:t,...a},o._setSettings(a),o}),"PUBLIC").setMultipleInstances(!0)),Ku(oz,lz,e),Ku(oz,lz,"esm2020")})();function U7(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ghe=U7,F7=new W_("auth","Firebase",U7());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=new mD("@firebase/auth");function qhe(n,...e){VA.logLevel<=Jn.WARN&&VA.warn(`Auth (${Pg}): ${n}`,...e)}function vE(n,...e){VA.logLevel<=Jn.ERROR&&VA.error(`Auth (${Pg}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(n,...e){throw rL(n,...e)}function qc(n,...e){return rL(n,...e)}function nL(n,e,t){const r={...Ghe(),[e]:t};return new W_("auth","Firebase",r).create(e,{appName:n.name})}function eg(n){return nL(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Whe(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&lf(n,"argument-error"),nL(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rL(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return F7.create(n,...e)}function bn(n,e,...t){if(!n)throw rL(e,...t)}function ld(n){const e="INTERNAL ASSERTION FAILED: "+n;throw vE(e),new Error(e)}function _d(n,e){n||ld(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function $he(){return dz()==="http:"||dz()==="https:"}function dz(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xhe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($he()||tce()||"connection"in navigator)?navigator.onLine:!0}function Yhe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,t){this.shortDelay=e,this.longDelay=t,_d(t>e,"Short delay should be less than long delay!"),this.isMobile=Qle()||nce()}get(){return Xhe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(n,e){_d(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ld("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ld("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ld("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Khe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zhe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Qhe=new t1(3e4,6e4);function aL(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function my(n,e,t,r,i={}){return j7(n,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=$_({key:n.config.apiKey,...s}).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:c,...a};return ece()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Ep(n.emulatorConfig.host)&&(f.credentials="include"),z7.fetch()(await B7(n,n.config.apiHost,t,o),f)})}async function j7(n,e,t){n._canInitEmulator=!1;const r={...Khe,...e};try{const i=new epe(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Vw(n,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[c,f]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vw(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Vw(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw Vw(n,"user-disabled",s);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw nL(n,d,f);lf(n,d)}}catch(i){if(i instanceof gf)throw i;lf(n,"network-request-failed",{message:String(i)})}}async function Jhe(n,e,t,r,i={}){const a=await my(n,e,t,r,i);return"mfaPendingCredential"in a&&lf(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function B7(n,e,t,r){const i=`${e}${t}?${r}`,a=n,s=a.config.emulator?iL(n.config,i):`${n.config.apiScheme}://${i}`;return Zhe.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}class epe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(qc(this.auth,"network-request-failed")),Qhe.get())})}}function Vw(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=qc(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tpe(n,e){return my(n,"POST","/v1/accounts:delete",e)}async function HA(n,e){return my(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function npe(n,e=!1){const t=Ii(n),r=await t.getIdToken(e),i=sL(r);bn(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:zx(zR(i.auth_time)),issuedAtTime:zx(zR(i.iat)),expirationTime:zx(zR(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function zR(n){return Number(n)*1e3}function sL(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return vE("JWT malformed, contained fewer than 3 sections"),null;try{const i=Z9(t);return i?JSON.parse(i):(vE("Failed to decode base64 JWT payload"),null)}catch(i){return vE("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function hz(n){const e=sL(n);return bn(e,"internal-error"),bn(typeof e.exp<"u","internal-error"),bn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v_(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof gf&&rpe(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function rpe({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ipe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=zx(this.lastLoginAt),this.creationTime=zx(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GA(n){var p;const e=n.auth,t=await n.getIdToken(),r=await v_(n,HA(e,{idToken:t}));bn(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=(p=i.providerUserInfo)!=null&&p.length?V7(i.providerUserInfo):[],s=spe(n.providerData,a),o=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!(s!=null&&s.length),f=o?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new gO(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(n,d)}async function ape(n){const e=Ii(n);await GA(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function spe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function V7(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ope(n,e){const t=await j7(n,{},async()=>{const r=$_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,s=await B7(n,i,"/v1/token",`key=${a}`),o=await n._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return n.emulatorConfig&&Ep(n.emulatorConfig.host)&&(c.credentials="include"),z7.fetch()(s,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function lpe(n,e){return my(n,"POST","/v2/accounts:revokeToken",aL(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){bn(e.idToken,"internal-error"),bn(typeof e.idToken<"u","internal-error"),bn(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hz(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){bn(e.length!==0,"internal-error");const t=hz(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(bn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await ope(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,s=new Mv;return r&&(bn(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(bn(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(bn(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mv,this.toJSON())}_performRefresh(){return ld("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(n,e){bn(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Bc{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new ipe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new gO(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await v_(this,this.stsTokenManager.getToken(this.auth,e));return bn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return npe(this,e)}reload(){return ape(this)}_assign(e){this!==e&&(bn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Bc({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){bn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await GA(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yl(this.auth.app))return Promise.reject(eg(this.auth));const e=await this.getIdToken();return await v_(this,tpe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,s=t.photoURL??void 0,o=t.tenantId??void 0,c=t._redirectEventId??void 0,f=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:p,emailVerified:v,isAnonymous:y,providerData:x,stsTokenManager:E}=t;bn(p&&E,e,"internal-error");const S=Mv.fromJSON(this.name,E);bn(typeof p=="string",e,"internal-error"),Dh(r,e.name),Dh(i,e.name),bn(typeof v=="boolean",e,"internal-error"),bn(typeof y=="boolean",e,"internal-error"),Dh(a,e.name),Dh(s,e.name),Dh(o,e.name),Dh(c,e.name),Dh(f,e.name),Dh(d,e.name);const w=new Bc({uid:p,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:a,tenantId:o,stsTokenManager:S,createdAt:f,lastLoginAt:d});return x&&Array.isArray(x)&&(w.providerData=x.map(R=>({...R}))),c&&(w._redirectEventId=c),w}static async _fromIdTokenResponse(e,t,r=!1){const i=new Mv;i.updateFromServerResponse(t);const a=new Bc({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await GA(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];bn(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?V7(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),o=new Mv;o.updateFromIdToken(r);const c=new Bc({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new gO(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pz=new Map;function cd(n){_d(n instanceof Function,"Expected a class definition");let e=pz.get(n);return e?(_d(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,pz.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}H7.type="NONE";const mz=H7;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(n,e,t){return`firebase:${n}:${e}:${t}`}class Cv{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=yE(this.userKey,i.apiKey,a),this.fullPersistenceKey=yE("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await HA(this.auth,{idToken:e}).catch(()=>{});return t?Bc._fromGetAccountInfoResponse(this.auth,t,e):null}return Bc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Cv(cd(mz),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=i[0]||cd(mz);const s=yE(r,e.config.apiKey,e.name);let o=null;for(const f of t)try{const d=await f._get(s);if(d){let p;if(typeof d=="string"){const v=await HA(e,{idToken:d}).catch(()=>{});if(!v)break;p=await Bc._fromGetAccountInfoResponse(e,v,d)}else p=Bc._fromJSON(e,d);f!==a&&(o=p),a=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Cv(a,e,r):(a=c[0],o&&await a._set(s,o.toJSON()),await Promise.all(t.map(async f=>{if(f!==a)try{await f._remove(s)}catch{}})),new Cv(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gz(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($7(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(G7(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Y7(e))return"Blackberry";if(K7(e))return"Webos";if(q7(e))return"Safari";if((e.includes("chrome/")||W7(e))&&!e.includes("edge/"))return"Chrome";if(X7(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function G7(n=ks()){return/firefox\//i.test(n)}function q7(n=ks()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function W7(n=ks()){return/crios\//i.test(n)}function $7(n=ks()){return/iemobile/i.test(n)}function X7(n=ks()){return/android/i.test(n)}function Y7(n=ks()){return/blackberry/i.test(n)}function K7(n=ks()){return/webos/i.test(n)}function oL(n=ks()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function cpe(n=ks()){var e;return oL(n)&&!!((e=window.navigator)!=null&&e.standalone)}function upe(){return rce()&&document.documentMode===10}function Z7(n=ks()){return oL(n)||X7(n)||K7(n)||Y7(n)||/windows phone/i.test(n)||$7(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q7(n,e=[]){let t;switch(n){case"Browser":t=gz(ks());break;case"Worker":t=`${gz(ks())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Pg}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fpe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((s,o)=>{try{const c=e(a);s(c)}catch(c){o(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dpe(n,e={}){return my(n,"GET","/v2/passwordPolicy",aL(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hpe=6;class ppe{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??hpe,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mpe{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vz(this),this.idTokenSubscription=new vz(this),this.beforeStateQueue=new fpe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=F7,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=cd(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Cv.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await HA(this,{idToken:e}),r=await Bc._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Yl(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(a=this.redirectUser)==null?void 0:a._redirectEventId,o=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===o)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return bn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await GA(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Yhe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yl(this.app))return Promise.reject(eg(this));const t=e?Ii(e):null;return t&&bn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&bn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yl(this.app)?Promise.reject(eg(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yl(this.app)?Promise.reject(eg(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cd(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dpe(this),t=new ppe(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new W_("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await lpe(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&cd(e)||this._popupRedirectResolver;bn(t,this,"argument-error"),this.redirectPersistenceManager=await Cv.create(this,[cd(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(bn(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(t);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return bn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Q7(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Yl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&qhe(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function YM(n){return Ii(n)}class vz{constructor(e){this.auth=e,this.observer=null,this.addObserver=fce(t=>this.observer=t)}get next(){return bn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lL={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gpe(n){lL=n}function vpe(n){return lL.loadJS(n)}function ype(){return lL.gapiScript}function bpe(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xpe(n,e){const t=PM(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(fg(a,e??{}))return i;lf(i,"already-initialized")}return t.initialize({options:e})}function _pe(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(cd);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Spe(n,e,t){const r=YM(n);bn(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=J7(e),{host:s,port:o}=wpe(e),c=o===null?"":`:${o}`,f={url:`${a}//${s}${c}/`},d=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){bn(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),bn(fg(f,r.config.emulator)&&fg(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Ep(s)?(hD(`${a}//${s}${c}`),pD("Auth",!0)):Epe()}function J7(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function wpe(n){const e=J7(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:yz(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:yz(s)}}}function yz(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Epe(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eG{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ld("not implemented")}_getIdTokenResponse(e){return ld("not implemented")}_linkToIdToken(e,t){return ld("not implemented")}_getReauthenticationResolver(e){return ld("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iv(n,e){return Jhe(n,"POST","/v1/accounts:signInWithIdp",aL(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ape="http://localhost";class mg extends eG{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new mg(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):lf("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const s=new mg(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return Iv(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Iv(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Iv(e,t)}buildRequest(){const e={requestUri:Ape,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$_(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1 extends cL{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh extends n1{constructor(){super("facebook.com")}static credential(e){return mg._fromParams({providerId:Vh.PROVIDER_ID,signInMethod:Vh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vh.credentialFromTaggedObject(e)}static credentialFromError(e){return Vh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vh.credential(e.oauthAccessToken)}catch{return null}}}Vh.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vh.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd extends n1{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return mg._fromParams({providerId:sd.PROVIDER_ID,signInMethod:sd.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return sd.credentialFromTaggedObject(e)}static credentialFromError(e){return sd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return sd.credential(t,r)}catch{return null}}}sd.GOOGLE_SIGN_IN_METHOD="google.com";sd.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh extends n1{constructor(){super("github.com")}static credential(e){return mg._fromParams({providerId:Hh.PROVIDER_ID,signInMethod:Hh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hh.credentialFromTaggedObject(e)}static credentialFromError(e){return Hh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hh.credential(e.oauthAccessToken)}catch{return null}}}Hh.GITHUB_SIGN_IN_METHOD="github.com";Hh.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh extends n1{constructor(){super("twitter.com")}static credential(e,t){return mg._fromParams({providerId:Gh.PROVIDER_ID,signInMethod:Gh.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Gh.credentialFromTaggedObject(e)}static credentialFromError(e){return Gh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Gh.credential(t,r)}catch{return null}}}Gh.TWITTER_SIGN_IN_METHOD="twitter.com";Gh.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Bc._fromIdTokenResponse(e,r,i),s=bz(r);return new Qv({user:a,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=bz(r);return new Qv({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function bz(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA extends gf{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,qA.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new qA(e,t,r,i)}}function tG(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?qA._fromErrorAndOperation(n,a,e,r):a})}async function Tpe(n,e,t=!1){const r=await v_(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Qv._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mpe(n,e,t=!1){const{auth:r}=n;if(Yl(r.app))return Promise.reject(eg(r));const i="reauthenticate";try{const a=await v_(n,tG(r,i,e,n),t);bn(a.idToken,r,"internal-error");const s=sL(a.idToken);bn(s,r,"internal-error");const{sub:o}=s;return bn(n.uid===o,r,"user-mismatch"),Qv._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&lf(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cpe(n,e,t=!1){if(Yl(n.app))return Promise.reject(eg(n));const r="signIn",i=await tG(n,r,e),a=await Qv._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}function Ipe(n,e,t,r){return Ii(n).onIdTokenChanged(e,t,r)}function Rpe(n,e,t){return Ii(n).beforeAuthStateChanged(e,t)}function Ppe(n,e,t,r){return Ii(n).onAuthStateChanged(e,t,r)}function Npe(n){return Ii(n).signOut()}const WA="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nG{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(WA,"1"),this.storage.removeItem(WA),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ope=1e3,Dpe=10;class rG extends nG{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Z7(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,o,c)=>{this.notifyListeners(s,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!t&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);upe()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Dpe):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Ope)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rG.type="LOCAL";const Lpe=rG;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG extends nG{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}iG.type="SESSION";const aG=iG;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kpe(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new KM(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async f=>f(t.origin,a)),c=await kpe(o);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}KM.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Upe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,c)=>{const f=uL("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){const v=p;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(v.data.response);break;default:clearTimeout(d),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(){return window}function Fpe(n){ef().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sG(){return typeof ef().WorkerGlobalScope<"u"&&typeof ef().importScripts=="function"}async function zpe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jpe(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Bpe(){return sG()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oG="firebaseLocalStorageDb",Vpe=1,$A="firebaseLocalStorage",lG="fbase_key";class r1{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ZM(n,e){return n.transaction([$A],e?"readwrite":"readonly").objectStore($A)}function Hpe(){const n=indexedDB.deleteDatabase(oG);return new r1(n).toPromise()}function vO(){const n=indexedDB.open(oG,Vpe);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore($A,{keyPath:lG})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains($A)?e(r):(r.close(),await Hpe(),e(await vO()))})})}async function xz(n,e,t){const r=ZM(n,!0).put({[lG]:e,value:t});return new r1(r).toPromise()}async function Gpe(n,e){const t=ZM(n,!1).get(e),r=await new r1(t).toPromise();return r===void 0?null:r.value}function _z(n,e){const t=ZM(n,!0).delete(e);return new r1(t).toPromise()}const qpe=800,Wpe=3;class cG{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vO(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Wpe)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sG()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=KM._getInstance(Bpe()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await zpe(),!this.activeServiceWorker)return;this.sender=new Upe(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jpe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vO();return await xz(e,WA,"1"),await _z(e,WA),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>xz(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Gpe(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_z(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=ZM(i,!1).getAll();return new r1(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qpe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cG.type="LOCAL";const $pe=cG;new t1(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uG(n,e){return e?cd(e):(bn(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL extends eG{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Iv(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Iv(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Iv(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Xpe(n){return Cpe(n.auth,new fL(n),n.bypassAuthState)}function Ype(n){const{auth:e,user:t}=n;return bn(t,e,"internal-error"),Mpe(t,new fL(n),n.bypassAuthState)}async function Kpe(n){const{auth:e,user:t}=n;return bn(t,e,"internal-error"),Tpe(t,new fL(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fG{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Xpe;case"linkViaPopup":case"linkViaRedirect":return Kpe;case"reauthViaPopup":case"reauthViaRedirect":return Ype;default:lf(this.auth,"internal-error")}}resolve(e){_d(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_d(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zpe=new t1(2e3,1e4);async function Qpe(n,e,t){if(Yl(n.app))return Promise.reject(qc(n,"operation-not-supported-in-this-environment"));const r=YM(n);Whe(n,e,cL);const i=uG(r,t);return new Hm(r,"signInViaPopup",e,i).executeNotNull()}class Hm extends fG{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Hm.currentPopupAction&&Hm.currentPopupAction.cancel(),Hm.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return bn(e,this.auth,"internal-error"),e}async onExecution(){_d(this.filter.length===1,"Popup operations only handle one event");const e=uL();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(qc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(qc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hm.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Zpe.get())};e()}}Hm.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jpe="pendingRedirect",bE=new Map;class eme extends fG{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=bE.get(this.auth._key());if(!e){try{const r=await tme(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}bE.set(this.auth._key(),e)}return this.bypassAuthState||bE.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tme(n,e){const t=ime(e),r=rme(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function nme(n,e){bE.set(n._key(),e)}function rme(n){return cd(n._redirectPersistence)}function ime(n){return yE(Jpe,n.config.apiKey,n.name)}async function ame(n,e,t=!1){if(Yl(n.app))return Promise.reject(eg(n));const r=YM(n),i=uG(r,e),s=await new eme(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sme=600*1e3;class ome{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lme(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!dG(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(qc(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sme&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sz(e))}saveEventToCache(e){this.cachedEventUids.add(Sz(e)),this.lastProcessedEventTime=Date.now()}}function Sz(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function dG({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function lme(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dG(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cme(n,e={}){return my(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ume=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fme=/^https?/;async function dme(n){if(n.config.emulator)return;const{authorizedDomains:e}=await cme(n);for(const t of e)try{if(hme(t))return}catch{}lf(n,"unauthorized-domain")}function hme(n){const e=mO(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!fme.test(t))return!1;if(ume.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pme=new t1(3e4,6e4);function wz(){const n=ef().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function mme(n){return new Promise((e,t)=>{var i,a,s;function r(){wz(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wz(),t(qc(n,"network-request-failed"))},timeout:pme.get()})}if((a=(i=ef().gapi)==null?void 0:i.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((s=ef().gapi)!=null&&s.load)r();else{const o=bpe("iframefcb");return ef()[o]=()=>{gapi.load?r():t(qc(n,"network-request-failed"))},vpe(`${ype()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw xE=null,e})}let xE=null;function gme(n){return xE=xE||mme(n),xE}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vme=new t1(5e3,15e3),yme="__/auth/iframe",bme="emulator/auth/iframe",xme={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_me=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sme(n){const e=n.config;bn(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?iL(e,bme):`https://${n.config.authDomain}/${yme}`,r={apiKey:e.apiKey,appName:n.name,v:Pg},i=_me.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${$_(r).slice(1)}`}async function wme(n){const e=await gme(n),t=ef().gapi;return bn(t,n,"internal-error"),e.open({where:document.body,url:Sme(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xme,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=qc(n,"network-request-failed"),o=ef().setTimeout(()=>{a(s)},vme.get());function c(){ef().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eme={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ame=500,Tme=600,Mme="_blank",Cme="http://localhost";class Ez{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ime(n,e,t,r=Ame,i=Tme){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c={...Eme,width:r.toString(),height:i.toString(),top:a,left:s},f=ks().toLowerCase();t&&(o=W7(f)?Mme:t),G7(f)&&(e=e||Cme,c.scrollbars="yes");const d=Object.entries(c).reduce((v,[y,x])=>`${v}${y}=${x},`,"");if(cpe(f)&&o!=="_self")return Rme(e||"",o),new Ez(null);const p=window.open(e||"",o,d);bn(p,n,"popup-blocked");try{p.focus()}catch{}return new Ez(p)}function Rme(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pme="__/auth/handler",Nme="emulator/auth/handler",Ome=encodeURIComponent("fac");async function Az(n,e,t,r,i,a){bn(n.config.authDomain,n,"auth-domain-config-required"),bn(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Pg,eventId:i};if(e instanceof cL){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",uce(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))s[d]=p}if(e instanceof n1){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);const o=s;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const c=await n._getAppCheckToken(),f=c?`#${Ome}=${encodeURIComponent(c)}`:"";return`${Dme(n)}?${$_(o).slice(1)}${f}`}function Dme({config:n}){return n.emulator?iL(n,Nme):`https://${n.authDomain}/${Pme}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR="webStorageSupport";class Lme{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aG,this._completeRedirectFn=ame,this._overrideRedirectResult=nme}async _openPopup(e,t,r,i){var s;_d((s=this.eventManagers[e._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await Az(e,t,r,mO(),i);return Ime(e,a,uL())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await Az(e,t,r,mO(),i);return Fpe(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(_d(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await wme(e),r=new ome(e);return t.register("authEvent",i=>(bn(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jR,{type:jR},i=>{var s;const a=(s=i==null?void 0:i[0])==null?void 0:s[jR];a!==void 0&&t(!!a),lf(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dme(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Z7()||q7()||oL()}}const kme=Lme;var Tz="@firebase/auth",Mz="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ume{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){bn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fme(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zme(n){dg(new up("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;bn(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Q7(n)},f=new mpe(r,i,a,c);return _pe(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),dg(new up("auth-internal",e=>{const t=YM(e.getProvider("auth").getImmediate());return(r=>new Ume(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ku(Tz,Mz,Fme(n)),Ku(Tz,Mz,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jme=300,Bme=tH("authIdTokenMaxAge")||jme;let Cz=null;const Vme=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Bme)return;const i=t==null?void 0:t.token;Cz!==i&&(Cz=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Hme(n=vD()){const e=PM(n,"auth");if(e.isInitialized())return e.getImmediate();const t=xpe(n,{popupRedirectResolver:kme,persistence:[$pe,Lpe,aG]}),r=tH("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=Vme(a.toString());Rpe(t,s,()=>s(t.currentUser)),Ipe(t,o=>s(o))}}const i=Q9("auth");return i&&Spe(t,`http://${i}`),t}function Gme(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}gpe({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=qc("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",Gme().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zme("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hG="firebasestorage.googleapis.com",pG="storageBucket",qme=120*1e3,Wme=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends gf{constructor(e,t,r=0){super(BR(e),`Firebase Storage: ${t} (${BR(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return BR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ri;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ri||(Ri={}));function BR(n){return"storage/"+n}function dL(){const n="An unknown error occurred, please check the error payload for server response.";return new Pi(Ri.UNKNOWN,n)}function $me(n){return new Pi(Ri.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function Xme(n){return new Pi(Ri.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Yme(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Pi(Ri.UNAUTHENTICATED,n)}function Kme(){return new Pi(Ri.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Zme(n){return new Pi(Ri.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function Qme(){return new Pi(Ri.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Jme(){return new Pi(Ri.CANCELED,"User canceled the upload/download.")}function ege(n){return new Pi(Ri.INVALID_URL,"Invalid URL '"+n+"'.")}function tge(n){return new Pi(Ri.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function nge(){return new Pi(Ri.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+pG+"' property when initializing the app?")}function rge(){return new Pi(Ri.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ige(){return new Pi(Ri.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function age(n){return new Pi(Ri.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function yO(n){return new Pi(Ri.INVALID_ARGUMENT,n)}function mG(){return new Pi(Ri.APP_DELETED,"The Firebase app was deleted.")}function sge(n){return new Pi(Ri.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jx(n,e){return new Pi(Ri.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function ix(n){throw new Pi(Ri.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=fl.makeFromUrl(e,t)}catch{return new fl(e,"")}if(r.path==="")return r;throw tge(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const s="(/(.*))?$",o=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function f(O){O.path_=decodeURIComponent(O.path)}const d="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${d}/b/${i}/o${v}`,"i"),x={bucket:1,path:3},E=t===hG?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",w=new RegExp(`^https?://${E}/${i}/${S}`,"i"),N=[{regex:o,indices:c,postModify:a},{regex:y,indices:x,postModify:f},{regex:w,indices:{bucket:1,path:2},postModify:f}];for(let O=0;O<N.length;O++){const z=N[O],k=z.regex.exec(e);if(k){const U=k[z.indices.bucket];let P=k[z.indices.path];P||(P=""),r=new fl(U,P),z.postModify(r);break}}if(r==null)throw ege(e);return r}}class oge{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lge(n,e,t){let r=1,i=null,a=null,s=!1,o=0;function c(){return o===2}let f=!1;function d(...S){f||(f=!0,e.apply(null,S))}function p(S){i=setTimeout(()=>{i=null,n(y,c())},S)}function v(){a&&clearTimeout(a)}function y(S,...w){if(f){v();return}if(S){v(),d.call(null,S,...w);return}if(c()||s){v(),d.call(null,S,...w);return}r<64&&(r*=2);let N;o===1?(o=2,N=0):N=(r+Math.random())*1e3,p(N)}let x=!1;function E(S){x||(x=!0,v(),!f&&(i!==null?(S||(o=2),clearTimeout(i),p(0)):S||(o=1)))}return p(0),a=setTimeout(()=>{s=!0,E(!0)},t),E}function cge(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uge(n){return n!==void 0}function fge(n){return typeof n=="object"&&!Array.isArray(n)}function hL(n){return typeof n=="string"||n instanceof String}function Iz(n){return pL()&&n instanceof Blob}function pL(){return typeof Blob<"u"}function Rz(n,e,t,r){if(r<e)throw yO(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw yO(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function gG(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var tg;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(tg||(tg={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dge(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hge{constructor(e,t,r,i,a,s,o,c,f,d,p,v=!0,y=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=d,this.connectionFactory_=p,this.retry=v,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,E)=>{this.resolve_=x,this.reject_=E,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Hw(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const s=o=>{const c=o.loaded,f=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&a.addUploadProgressListener(s),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(s),this.pendingConnection_=null;const o=a.getErrorCode()===tg.NO_ERROR,c=a.getStatus();if(!o||dge(c,this.additionalRetryCodes_)&&this.retry){const d=a.getErrorCode()===tg.ABORT;r(!1,new Hw(!1,null,d));return}const f=this.successCodes_.indexOf(c)!==-1;r(!0,new Hw(f,a))})},t=(r,i)=>{const a=this.resolve_,s=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(o,o.getResponse());uge(c)?a(c):a()}catch(c){s(c)}else if(o!==null){const c=dL();c.serverResponse=o.getErrorText(),this.errorCallback_?s(this.errorCallback_(o,c)):s(c)}else if(i.canceled){const c=this.appDelete_?mG():Jme();s(c)}else{const c=Qme();s(c)}};this.canceled_?t(!1,new Hw(!1,null,!0)):this.backoffId_=lge(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&cge(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Hw{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function pge(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function mge(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function gge(n,e){e&&(n["X-Firebase-GMPID"]=e)}function vge(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function yge(n,e,t,r,i,a,s=!0,o=!1){const c=gG(n.urlParams),f=n.url+c,d=Object.assign({},n.headers);return gge(d,e),pge(d,t),mge(d,a),vge(d,r),new hge(f,n.method,d,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bge(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function xge(...n){const e=bge();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(pL())return new Blob(n);throw new Pi(Ri.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function _ge(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sge(n){if(typeof atob>"u")throw age("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class VR{constructor(e,t){this.data=e,this.contentType=t||null}}function wge(n,e){switch(n){case Wu.RAW:return new VR(vG(e));case Wu.BASE64:case Wu.BASE64URL:return new VR(yG(n,e));case Wu.DATA_URL:return new VR(Age(e),Tge(e))}throw dL()}function vG(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=r,s=n.charCodeAt(++t);r=65536|(a&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Ege(n){let e;try{e=decodeURIComponent(n)}catch{throw jx(Wu.DATA_URL,"Malformed data URL.")}return vG(e)}function yG(n,e){switch(n){case Wu.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw jx(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Wu.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw jx(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Sge(e)}catch(i){throw i.message.includes("polyfill")?i:jx(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class bG{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw jx(Wu.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=Mge(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Age(n){const e=new bG(n);return e.base64?yG(Wu.BASE64,e.rest):Ege(e.rest)}function Tge(n){return new bG(n).contentType}function Mge(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,t){let r=0,i="";Iz(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Iz(this.data_)){const r=this.data_,i=_ge(r,e,t);return i===null?null:new qh(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new qh(r,!0)}}static getBlob(...e){if(pL()){const t=e.map(r=>r instanceof qh?r.data_:r);return new qh(xge.apply(null,t))}else{const t=e.map(s=>hL(s)?wge(Wu.RAW,s).data:s.data_);let r=0;t.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(s=>{for(let o=0;o<s.length;o++)i[a++]=s[o]}),new qh(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xG(n){let e;try{e=JSON.parse(n)}catch{return null}return fge(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cge(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Ige(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function _G(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rge(n,e){return e}class Js{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Rge}}let Gw=null;function Pge(n){return!hL(n)||n.length<2?n:_G(n)}function SG(){if(Gw)return Gw;const n=[];n.push(new Js("bucket")),n.push(new Js("generation")),n.push(new Js("metageneration")),n.push(new Js("name","fullPath",!0));function e(a,s){return Pge(s)}const t=new Js("name");t.xform=e,n.push(t);function r(a,s){return s!==void 0?Number(s):s}const i=new Js("size");return i.xform=r,n.push(i),n.push(new Js("timeCreated")),n.push(new Js("updated")),n.push(new Js("md5Hash",null,!0)),n.push(new Js("cacheControl",null,!0)),n.push(new Js("contentDisposition",null,!0)),n.push(new Js("contentEncoding",null,!0)),n.push(new Js("contentLanguage",null,!0)),n.push(new Js("contentType",null,!0)),n.push(new Js("metadata","customMetadata",!0)),Gw=n,Gw}function Nge(n,e){function t(){const r=n.bucket,i=n.fullPath,a=new fl(r,i);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function Oge(n,e,t){const r={};r.type="file";const i=t.length;for(let a=0;a<i;a++){const s=t[a];r[s.local]=s.xform(r,e[s.server])}return Nge(r,n),r}function wG(n,e,t){const r=xG(e);return r===null?null:Oge(n,r,t)}function Dge(n,e,t,r){const i=xG(e);if(i===null||!hL(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const s=encodeURIComponent;return a.split(",").map(f=>{const d=n.bucket,p=n.fullPath,v="/b/"+s(d)+"/o/"+s(p),y=mL(v,t,r),x=gG({alt:"media",token:f});return y+x})[0]}function Lge(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class EG{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AG(n){if(!n)throw dL()}function kge(n,e){function t(r,i){const a=wG(n,i,e);return AG(a!==null),a}return t}function Uge(n,e){function t(r,i){const a=wG(n,i,e);return AG(a!==null),Dge(a,i,n.host,n._protocol)}return t}function TG(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=Kme():i=Yme():t.getStatus()===402?i=Xme(n.bucket):t.getStatus()===403?i=Zme(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Fge(n){const e=TG(n);function t(r,i){let a=e(r,i);return r.getStatus()===404&&(a=$me(n.path)),a.serverResponse=i.serverResponse,a}return t}function zge(n,e,t){const r=e.fullServerUrl(),i=mL(r,n.host,n._protocol),a="GET",s=n.maxOperationRetryTime,o=new EG(i,a,Uge(n,t),s);return o.errorHandler=Fge(e),o}function jge(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function Bge(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=jge(null,e)),r}function Vge(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function o(){let N="";for(let O=0;O<2;O++)N=N+Math.random().toString().slice(2);return N}const c=o();s["Content-Type"]="multipart/related; boundary="+c;const f=Bge(e,r,i),d=Lge(f,t),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+f.contentType+`\r
\r
`,v=`\r
--`+c+"--",y=qh.getBlob(p,r,v);if(y===null)throw rge();const x={name:f.fullPath},E=mL(a,n.host,n._protocol),S="POST",w=n.maxUploadRetryTime,R=new EG(E,S,kge(n,t),w);return R.urlParams=x,R.headers=s,R.body=y.uploadData(),R.errorHandler=TG(e),R}class Hge{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=tg.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=tg.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=tg.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,a){if(this.sent_)throw ix("cannot .send() more than once");if(Ep(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const s in a)a.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,a[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ix("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ix("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ix("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ix("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Gge extends Hge{initXhr(){this.xhr_.responseType="text"}}function MG(){return new Gge}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,t){this._service=e,t instanceof fl?this._location=t:this._location=fl.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new gg(e,t)}get root(){const e=new fl(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _G(this._location.path)}get storage(){return this._service}get parent(){const e=Cge(this._location.path);if(e===null)return null;const t=new fl(this._location.bucket,e);return new gg(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw sge(e)}}function qge(n,e,t){n._throwIfRoot("uploadBytes");const r=Vge(n.storage,n._location,SG(),new qh(e,!0),t);return n.storage.makeRequestWithTokens(r,MG).then(i=>({metadata:i,ref:n}))}function Wge(n){n._throwIfRoot("getDownloadURL");const e=zge(n.storage,n._location,SG());return n.storage.makeRequestWithTokens(e,MG).then(t=>{if(t===null)throw ige();return t})}function $ge(n,e){const t=Ige(n._location.path,e),r=new fl(n._location.bucket,t);return new gg(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xge(n){return/^[A-Za-z]+:\/\//.test(n)}function Yge(n,e){return new gg(n,e)}function CG(n,e){if(n instanceof gL){const t=n;if(t._bucket==null)throw nge();const r=new gg(t,t._bucket);return e!=null?CG(r,e):r}else return e!==void 0?$ge(n,e):n}function Kge(n,e){if(e&&Xge(e)){if(n instanceof gL)return Yge(n,e);throw yO("To use ref(service, url), the first argument must be a Storage instance.")}else return CG(n,e)}function Pz(n,e){const t=e==null?void 0:e[pG];return t==null?null:fl.makeFromBucketSpec(t,n)}function Zge(n,e,t,r={}){n.host=`${e}:${t}`;const i=Ep(e);i&&(hD(`https://${n.host}/b`),pD("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:nH(a,n.app.options.projectId))}class gL{constructor(e,t,r,i,a,s=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=s,this._bucket=null,this._host=hG,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=qme,this._maxUploadRetryTime=Wme,this._requests=new Set,i!=null?this._bucket=fl.makeFromBucketSpec(i,this._host):this._bucket=Pz(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=fl.makeFromBucketSpec(this._url,e):this._bucket=Pz(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Rz("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Rz("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Yl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new gg(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new oge(mG());{const s=yge(e,this._appId,r,i,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const Nz="@firebase/storage",Oz="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IG="storage";function Dz(n,e,t){return n=Ii(n),qge(n,e,t)}function Lz(n){return n=Ii(n),Wge(n)}function kz(n,e){return n=Ii(n),Kge(n,e)}function Qge(n=vD(),e){n=Ii(n);const r=PM(n,IG).getImmediate({identifier:e}),i=J9("storage");return i&&Jge(r,...i),r}function Jge(n,e,t,r={}){Zge(n,e,t,r)}function e0e(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new gL(t,r,i,e,Pg)}function t0e(){dg(new up(IG,e0e,"PUBLIC").setMultipleInstances(!0)),Ku(Nz,Oz,""),Ku(Nz,Oz,"esm2020")}t0e();const n0e={apiKey:"AIzaSyCI9AH2vtxc9IhHdQBzA_5QPJDF5p-OTUE",authDomain:"tunas-craft.firebaseapp.com",projectId:"tunas-craft",storageBucket:"tunas-craft.appspot.com",messagingSenderId:"805844799800",appId:"1:805844799800:web:8c3332ee01c3c4f9c1f1cd",measurementId:"G-BMF86Q9D45"},vL=aH(n0e),Ja=Che(vL),HR=Hme(vL),Uz=Qge(vL),RG=G.createContext(),QM=()=>G.useContext(RG),r0e=({children:n})=>{const[e,t]=G.useState([]),[r,i]=G.useState([]),[a,s]=G.useState([]),[o,c]=G.useState([]),[f,d]=G.useState([]),[p,v]=G.useState(null),[y,x]=G.useState(!0),E=km(Ja,"clients"),S=km(Ja,"orders"),w=km(Ja,"leads"),R=km(Ja,"expenses"),N=km(Ja,"saved_quotes");G.useEffect(()=>{const Z=Ppe(HR,re=>{if(v(re),x(!1),re){const de=rx(E,Xe=>{t(Xe.docs.map(me=>({...me.data(),id:me.id})))}),ve=rx(S,Xe=>{i(Xe.docs.map(me=>({...me.data(),id:me.id})))}),pe=rx(w,Xe=>{s(Xe.docs.map(me=>({...me.data(),id:me.id})))}),ye=rx(R,Xe=>{c(Xe.docs.map(me=>({...me.data(),id:me.id})))}),Ee=rx(N,Xe=>{d(Xe.docs.map(me=>({...me.data(),id:me.id})))});return()=>{de(),ve(),pe(),ye(),Ee()}}else t([]),i([]),s([]),c([]),d([])});return()=>Z()},[]);const O=async()=>{const Z=new sd;try{await Qpe(HR,Z)}catch(re){console.error("Login failed",re),re.code==="auth/unauthorized-domain"?alert("Error: El dominio no est autorizado. Ve a Firebase Console -> Authentication -> Settings -> Authorized Domains y agrega 'tunascraft.com'."):alert("Error al iniciar sesin: "+re.message)}},z=async()=>{try{await Npe(HR)}catch(Z){console.error("Logout failed",Z)}},k=async Z=>{try{const re={...Z,joinedAt:new Date().toISOString()},de=await nx(E,re);return{...re,id:de.id}}catch(re){throw console.error("Error adding client:",re),alert(`Error guardando cliente: ${re.code} - ${re.message}`),re}},U=async(Z,re)=>{const de=Lc(Ja,"clients",Z);await iv(de,re)},P=async Z=>{try{const re=Lc(Ja,"clients",Z);await Bw(re)}catch(re){console.error("Error deleting client:",re),alert(`Error al eliminar cliente: ${re.code} - ${re.message}`)}},C=async Z=>{let re=parseFloat(Z.total);const de=e.find(Ee=>Ee.id===Z.clientId);de&&(de.type==="mayorista"&&(re*=.9),de.type==="distribuidor"&&(re*=.75));const ve={...Z,total:re.toFixed(2),remaining:(re-(Z.advance||0)).toFixed(2),date:new Date().toLocaleDateString("es-MX"),status:Z.status||"pedido"},pe=await nx(S,ve),ye=pe.id.slice(-4);return await iv(pe,{shortId:ye}),{...ve,id:pe.id,shortId:ye}},L=async(Z,re)=>{const de=Lc(Ja,"orders",Z);await iv(de,{status:re})},j=async(Z,re)=>{const de=Lc(Ja,"orders",Z);await iv(de,re)};G.useEffect(()=>{window.updateOrderContext=j},[r]);const B=async Z=>{try{const re=Lc(Ja,"orders",Z);await Bw(re)}catch(re){console.error("Error deleting order:",re),alert(`Error al eliminar pedido: ${re.code} - ${re.message}`)}},V=async Z=>{const re={...Z,date:new Date().toLocaleDateString("es-MX"),status:"Nuevo"},de=await nx(w,re);return{...re,id:de.id}},Q=async(Z,re)=>{const de=Lc(Ja,"leads",Z);await iv(de,{status:re})},J=async Z=>{const re={...Z,amount:parseFloat(Z.amount),date:Z.date||new Date().toISOString()},de=await nx(R,re);return{...re,id:de.id}},W=async Z=>{try{const re=Lc(Ja,"expenses",Z);await Bw(re)}catch(re){console.error("Error deleting expense:",re),alert(`Error al eliminar gasto: ${re.code} - ${re.message}`)}},$=async Z=>{const re={...Z,date:new Date().toISOString()},de=await nx(N,re);return{...re,id:de.id}},se=async Z=>{try{const re=Lc(Ja,"saved_quotes",Z);await Bw(re)}catch(re){console.error("Error deleting quote:",re),alert(`Error al eliminar cotizacin: ${re.code} - ${re.message}`)}},ce=async(Z,re)=>{try{const de=Lc(Ja,"saved_quotes",Z);await iv(de,re)}catch(de){throw console.error("Error updating quote:",de),alert(`Error al actualizar cotizacin: ${de.code} - ${de.message}`),de}},fe=async Z=>{console.warn("Import not fully supported in Firebase version yet.")};return A.jsx(RG.Provider,{value:{clients:e,orders:r,leads:a,user:p,loadingAuth:y,login:O,logout:z,addClient:k,updateClient:U,deleteClient:P,addOrder:C,updateOrderStatus:L,updateOrder:j,deleteOrder:B,addLead:V,updateLeadStatus:Q,expenses:o,addExpense:J,deleteExpense:W,quotes:f,addQuote:$,deleteQuote:se,updateQuote:ce,importDatabase:fe},children:n})};function PG(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=PG(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function ni(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=PG(n))&&(r&&(r+=" "),r+=e);return r}var i0e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function yL(n){if(typeof n!="string")return!1;var e=i0e;return e.includes(n)}var a0e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],s0e=new Set(a0e);function NG(n){return typeof n!="string"?!1:s0e.has(n)}function OG(n){return typeof n=="string"&&n.startsWith("data-")}function Xc(n){if(typeof n!="object"||n===null)return{};var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(NG(t)||OG(t))&&(e[t]=n[t]);return e}function JM(n){if(n==null)return null;if(G.isValidElement(n)&&typeof n.props=="object"&&n.props!==null){var e=n.props;return Xc(e)}return typeof n=="object"&&!Array.isArray(n)?Xc(n):null}function rc(n){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(NG(t)||OG(t)||yL(t))&&(e[t]=n[t]);return e}function o0e(n){return n==null?null:G.isValidElement(n)?rc(n.props):typeof n=="object"&&!Array.isArray(n)?rc(n):null}var l0e=["children","width","height","viewBox","className","style","title","desc"];function bO(){return bO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},bO.apply(null,arguments)}function c0e(n,e){if(n==null)return{};var t,r,i=u0e(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function u0e(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var DG=G.forwardRef((n,e)=>{var{children:t,width:r,height:i,viewBox:a,className:s,style:o,title:c,desc:f}=n,d=c0e(n,l0e),p=a||{width:r,height:i,x:0,y:0},v=ni("recharts-surface",s);return G.createElement("svg",bO({},rc(d),{className:v,width:r,height:i,style:o,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:e}),G.createElement("title",null,c),G.createElement("desc",null,f),t)}),f0e=["children","className"];function xO(){return xO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xO.apply(null,arguments)}function d0e(n,e){if(n==null)return{};var t,r,i=h0e(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function h0e(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var cf=G.forwardRef((n,e)=>{var{children:t,className:r}=n,i=d0e(n,f0e),a=ni("recharts-layer",r);return G.createElement("g",xO({className:a},rc(i),{ref:e}),t)}),p0e=G.createContext(null);function Ti(n){return function(){return n}}const _O=Math.PI,SO=2*_O,Pm=1e-6,m0e=SO-Pm;function LG(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function g0e(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return LG;const t=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*t)/t+r[i]}}class v0e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?LG:g0e(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,i){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,t,r,i,a,s){this._append`C${+e},${+t},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,t,r,i,a){if(e=+e,t=+t,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,f=i-t,d=s-e,p=o-t,v=d*d+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(v>Pm)if(!(Math.abs(p*c-f*d)>Pm)||!a)this._append`L${this._x1=e},${this._y1=t}`;else{let y=r-s,x=i-o,E=c*c+f*f,S=y*y+x*x,w=Math.sqrt(E),R=Math.sqrt(v),N=a*Math.tan((_O-Math.acos((E+v-S)/(2*w*R)))/2),O=N/R,z=N/w;Math.abs(O-1)>Pm&&this._append`L${e+O*d},${t+O*p}`,this._append`A${a},${a},0,0,${+(p*y>d*x)},${this._x1=e+z*c},${this._y1=t+z*f}`}}arc(e,t,r,i,a,s){if(e=+e,t=+t,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),f=e+o,d=t+c,p=1^s,v=s?i-a:a-i;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>Pm||Math.abs(this._y1-d)>Pm)&&this._append`L${f},${d}`,r&&(v<0&&(v=v%SO+SO),v>m0e?this._append`A${r},${r},0,1,${p},${e-o},${t-c}A${r},${r},0,1,${p},${this._x1=f},${this._y1=d}`:v>Pm&&this._append`A${r},${r},0,${+(v>=_O)},${p},${this._x1=e+r*Math.cos(a)},${this._y1=t+r*Math.sin(a)}`)}rect(e,t,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function kG(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);e=r}return n},()=>new v0e(e)}function bL(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function UG(n){this._context=n}UG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:this._context.lineTo(n,e);break}}};function eC(n){return new UG(n)}function FG(n){return n[0]}function zG(n){return n[1]}function jG(n,e){var t=Ti(!0),r=null,i=eC,a=null,s=kG(o);n=typeof n=="function"?n:n===void 0?FG:Ti(n),e=typeof e=="function"?e:e===void 0?zG:Ti(e);function o(c){var f,d=(c=bL(c)).length,p,v=!1,y;for(r==null&&(a=i(y=s())),f=0;f<=d;++f)!(f<d&&t(p=c[f],f,c))===v&&((v=!v)?a.lineStart():a.lineEnd()),v&&a.point(+n(p,f,c),+e(p,f,c));if(y)return a=null,y+""||null}return o.x=function(c){return arguments.length?(n=typeof c=="function"?c:Ti(+c),o):n},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:Ti(+c),o):e},o.defined=function(c){return arguments.length?(t=typeof c=="function"?c:Ti(!!c),o):t},o.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),o):r},o}function qw(n,e,t){var r=null,i=Ti(!0),a=null,s=eC,o=null,c=kG(f);n=typeof n=="function"?n:n===void 0?FG:Ti(+n),e=typeof e=="function"?e:Ti(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?zG:Ti(+t);function f(p){var v,y,x,E=(p=bL(p)).length,S,w=!1,R,N=new Array(E),O=new Array(E);for(a==null&&(o=s(R=c())),v=0;v<=E;++v){if(!(v<E&&i(S=p[v],v,p))===w)if(w=!w)y=v,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),x=v-1;x>=y;--x)o.point(N[x],O[x]);o.lineEnd(),o.areaEnd()}w&&(N[v]=+n(S,v,p),O[v]=+e(S,v,p),o.point(r?+r(S,v,p):N[v],t?+t(S,v,p):O[v]))}if(R)return o=null,R+""||null}function d(){return jG().defined(i).curve(s).context(a)}return f.x=function(p){return arguments.length?(n=typeof p=="function"?p:Ti(+p),r=null,f):n},f.x0=function(p){return arguments.length?(n=typeof p=="function"?p:Ti(+p),f):n},f.x1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Ti(+p),f):r},f.y=function(p){return arguments.length?(e=typeof p=="function"?p:Ti(+p),t=null,f):e},f.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Ti(+p),f):e},f.y1=function(p){return arguments.length?(t=p==null?null:typeof p=="function"?p:Ti(+p),f):t},f.lineX0=f.lineY0=function(){return d().x(n).y(e)},f.lineY1=function(){return d().x(n).y(t)},f.lineX1=function(){return d().x(r).y(e)},f.defined=function(p){return arguments.length?(i=typeof p=="function"?p:Ti(!!p),f):i},f.curve=function(p){return arguments.length?(s=p,a!=null&&(o=s(a)),f):s},f.context=function(p){return arguments.length?(p==null?a=o=null:o=s(a=p),f):a},f}class BG{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function y0e(n){return new BG(n,!0)}function b0e(n){return new BG(n,!1)}function XA(){}function YA(n,e,t){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+e)/6,(n._y0+4*n._y1+t)/6)}function VG(n){this._context=n}VG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:YA(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:YA(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function x0e(n){return new VG(n)}function HG(n){this._context=n}HG.prototype={areaStart:XA,areaEnd:XA,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x2=n,this._y2=e;break;case 1:this._point=2,this._x3=n,this._y3=e;break;case 2:this._point=3,this._x4=n,this._y4=e,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+e)/6);break;default:YA(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function _0e(n){return new HG(n)}function GG(n){this._context=n}GG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+n)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 3:this._point=4;default:YA(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function S0e(n){return new GG(n)}function qG(n){this._context=n}qG.prototype={areaStart:XA,areaEnd:XA,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,e){n=+n,e=+e,this._point?this._context.lineTo(n,e):(this._point=1,this._context.moveTo(n,e))}};function w0e(n){return new qG(n)}function Fz(n){return n<0?-1:1}function zz(n,e,t){var r=n._x1-n._x0,i=e-n._x1,a=(n._y1-n._y0)/(r||i<0&&-0),s=(t-n._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(Fz(a)+Fz(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function jz(n,e){var t=n._x1-n._x0;return t?(3*(n._y1-n._y0)/t-e)/2:e}function GR(n,e,t){var r=n._x0,i=n._y0,a=n._x1,s=n._y1,o=(a-r)/3;n._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*t,a,s)}function KA(n){this._context=n}KA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:GR(this,this._t0,jz(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){var t=NaN;if(n=+n,e=+e,!(n===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,GR(this,jz(this,t=zz(this,n,e)),t);break;default:GR(this,this._t0,t=zz(this,n,e));break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e,this._t0=t}}};function WG(n){this._context=new $G(n)}(WG.prototype=Object.create(KA.prototype)).point=function(n,e){KA.prototype.point.call(this,e,n)};function $G(n){this._context=n}$G.prototype={moveTo:function(n,e){this._context.moveTo(e,n)},closePath:function(){this._context.closePath()},lineTo:function(n,e){this._context.lineTo(e,n)},bezierCurveTo:function(n,e,t,r,i,a){this._context.bezierCurveTo(e,n,r,t,a,i)}};function E0e(n){return new KA(n)}function A0e(n){return new WG(n)}function XG(n){this._context=n}XG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,e=this._y,t=n.length;if(t)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),t===2)this._context.lineTo(n[1],e[1]);else for(var r=Bz(n),i=Bz(e),a=0,s=1;s<t;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],n[s],e[s]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,e){this._x.push(+n),this._y.push(+e)}};function Bz(n){var e,t=n.length-1,r,i=new Array(t),a=new Array(t),s=new Array(t);for(i[0]=0,a[0]=2,s[0]=n[0]+2*n[1],e=1;e<t-1;++e)i[e]=1,a[e]=4,s[e]=4*n[e]+2*n[e+1];for(i[t-1]=2,a[t-1]=7,s[t-1]=8*n[t-1]+n[t],e=1;e<t;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[t-1]=s[t-1]/a[t-1],e=t-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[t-1]=(n[t]+i[t-1])/2,e=0;e<t-1;++e)a[e]=2*n[e+1]-i[e+1];return[i,a]}function T0e(n){return new XG(n)}function tC(n,e){this._context=n,this._t=e}tC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(n,e);else{var t=this._x*(1-this._t)+n*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=n,this._y=e}};function M0e(n){return new tC(n,.5)}function C0e(n){return new tC(n,0)}function I0e(n){return new tC(n,1)}function vg(n,e){if((s=n.length)>1)for(var t=1,r,i,a=n[e[0]],s,o=a.length;t<s;++t)for(i=a,a=n[e[t]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function wO(n){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=e;return t}function R0e(n,e){return n[e]}function P0e(n){const e=[];return e.key=n,e}function N0e(){var n=Ti([]),e=wO,t=vg,r=R0e;function i(a){var s=Array.from(n.apply(this,arguments),P0e),o,c=s.length,f=-1,d;for(const p of a)for(o=0,++f;o<c;++o)(s[o][f]=[0,+r(p,s[o].key,f,a)]).data=p;for(o=0,d=bL(e(s));o<c;++o)s[d[o]].index=o;return t(s,d),s}return i.keys=function(a){return arguments.length?(n=typeof a=="function"?a:Ti(Array.from(a)),i):n},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Ti(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?wO:typeof a=="function"?a:Ti(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(t=a??vg,i):t},i}function O0e(n,e){if((r=n.length)>0){for(var t,r,i=0,a=n[0].length,s;i<a;++i){for(s=t=0;t<r;++t)s+=n[t][i][1]||0;if(s)for(t=0;t<r;++t)n[t][i][1]/=s}vg(n,e)}}function D0e(n,e){if((i=n.length)>0){for(var t=0,r=n[e[0]],i,a=r.length;t<a;++t){for(var s=0,o=0;s<i;++s)o+=n[s][t][1]||0;r[t][1]+=r[t][0]=-o/2}vg(n,e)}}function L0e(n,e){if(!(!((s=n.length)>0)||!((a=(i=n[e[0]]).length)>0))){for(var t=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,f=0;o<s;++o){for(var d=n[e[o]],p=d[r][1]||0,v=d[r-1][1]||0,y=(p-v)/2,x=0;x<o;++x){var E=n[e[x]],S=E[r][1]||0,w=E[r-1][1]||0;y+=S-w}c+=p,f+=y*p}i[r-1][1]+=i[r-1][0]=t,c&&(t-=f/c)}i[r-1][1]+=i[r-1][0]=t,vg(n,e)}}var qR={},WR={},Vz;function k0e(){return Vz||(Vz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==="__proto__"}n.isUnsafeProperty=e})(WR)),WR}var $R={},Hz;function YG(){return Hz||(Hz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){switch(typeof t){case"number":case"symbol":return!1;case"string":return t.includes(".")||t.includes("[")||t.includes("]")}}n.isDeepKey=e})($R)),$R}var XR={},Gz;function xL(){return Gz||(Gz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){var r;return typeof t=="string"||typeof t=="symbol"?t:Object.is((r=t==null?void 0:t.valueOf)==null?void 0:r.call(t),-0)?"-0":String(t)}n.toKey=e})(XR)),XR}var YR={},KR={},qz;function U0e(){return qz||(qz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){if(t==null)return"";if(typeof t=="string")return t;if(Array.isArray(t))return t.map(e).join(",");const r=String(t);return r==="0"&&Object.is(Number(t),-0)?"-0":r}n.toString=e})(KR)),KR}var Wz;function _L(){return Wz||(Wz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=U0e(),t=xL();function r(i){if(Array.isArray(i))return i.map(t.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,c="",f="",d=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const p=i[o];f?p==="\\"&&o+1<s?(o++,c+=i[o]):p===f?f="":c+=p:d?p==='"'||p==="'"?f=p:p==="]"?(d=!1,a.push(c),c=""):c+=p:p==="["?(d=!0,c&&(a.push(c),c="")):p==="."?c&&(a.push(c),c=""):c+=p,o++}return c&&a.push(c),a}n.toPath=r})(YR)),YR}var $z;function SL(){return $z||($z=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=k0e(),t=YG(),r=xL(),i=_L();function a(o,c,f){if(o==null)return f;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return f;const d=o[c];return d===void 0?t.isDeepKey(c)?a(o,i.toPath(c),f):f:d}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const d=o[c];return d===void 0?f:d}default:{if(Array.isArray(c))return s(o,c,f);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return f;const d=o[c];return d===void 0?f:d}}}function s(o,c,f){if(c.length===0)return f;let d=o;for(let p=0;p<c.length;p++){if(d==null||e.isUnsafeProperty(c[p]))return f;d=d[c[p]]}return d===void 0?f:d}n.get=a})(qR)),qR}var ZR,Xz;function F0e(){return Xz||(Xz=1,ZR=SL().get),ZR}var z0e=F0e();const nC=Kc(z0e);var j0e=4;function Qh(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:j0e,t=10**e,r=Math.round(n*t)/t;return Object.is(r,-0)?0:r}function ts(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.reduce((i,a,s)=>{var o=t[s-1];return typeof o=="string"?i+o+a:o!==void 0?i+Qh(o)+a:i+a},"")}var Zl=n=>n===0?0:n>0?1:-1,uf=n=>typeof n=="number"&&n!=+n,yg=n=>typeof n=="string"&&n.indexOf("%")===n.length-1,en=n=>(typeof n=="number"||n instanceof Number)&&!uf(n),ff=n=>en(n)||typeof n=="string",B0e=0,y_=n=>{var e=++B0e;return"".concat(n||"").concat(e)},yp=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!en(e)&&typeof e!="string")return r;var a;if(yg(e)){if(t==null)return r;var s=e.indexOf("%");a=t*parseFloat(e.slice(0,s))/100}else a=+e;return uf(a)&&(a=r),i&&t!=null&&a>t&&(a=t),a},KG=n=>{if(!Array.isArray(n))return!1;for(var e=n.length,t={},r=0;r<e;r++)if(!t[String(n[r])])t[String(n[r])]=!0;else return!0;return!1};function zu(n,e,t){return en(n)&&en(e)?Qh(n+t*(e-n)):e}function ZG(n,e,t){if(!(!n||!n.length))return n.find(r=>r&&(typeof e=="function"?e(r):nC(r,e))===t)}var Us=n=>n===null||typeof n>"u",wL=n=>Us(n)?n:"".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));function Vo(n){return n!=null}function gy(){}var QG=n=>"radius"in n&&"startAngle"in n&&"endAngle"in n,EL=(n,e)=>{if(!n||typeof n=="function"||typeof n=="boolean")return null;var t=n;if(G.isValidElement(n)&&(t=n.props),typeof t!="object"&&typeof t!="function")return null;var r={};return Object.keys(t).forEach(i=>{yL(i)&&(r[i]=(a=>t[i](t,a)))}),r},V0e=(n,e,t)=>r=>(n(e,t,r),null),H0e=(n,e,t)=>{if(n===null||typeof n!="object"&&typeof n!="function")return null;var r=null;return Object.keys(n).forEach(i=>{var a=n[i];yL(i)&&typeof a=="function"&&(r||(r={}),r[i]=V0e(a,e,t))}),r};function Yz(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function G0e(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Yz(Object(t),!0).forEach(function(r){q0e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Yz(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function q0e(n,e,t){return(e=W0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function W0e(n){var e=$0e(n,"string");return typeof e=="symbol"?e:e+""}function $0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function yl(n,e){var t=G0e({},n),r=e,i=Object.keys(e),a=i.reduce((s,o)=>(s[o]===void 0&&r[o]!==void 0&&(s[o]=r[o]),s),t);return a}var QR={},JR={},Kz;function X0e(){return Kz||(Kz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,r){const i=new Map;for(let a=0;a<t.length;a++){const s=t[a],o=r(s,a,t);i.has(o)||i.set(o,s)}return Array.from(i.values())}n.uniqBy=e})(JR)),JR}var eP={},Zz;function Y0e(){return Zz||(Zz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,r){return function(...i){return t.apply(this,i.slice(0,r))}}n.ary=e})(eP)),eP}var tP={},Qz;function JG(){return Qz||(Qz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t}n.identity=e})(tP)),tP}var nP={},rP={},iP={},Jz;function K0e(){return Jz||(Jz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Number.isSafeInteger(t)&&t>=0}n.isLength=e})(iP)),iP}var e5;function AL(){return e5||(e5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=K0e();function t(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}n.isArrayLike=t})(rP)),rP}var aP={},t5;function Z0e(){return t5||(t5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="object"&&t!==null}n.isObjectLike=e})(aP)),aP}var n5;function Q0e(){return n5||(n5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=AL(),t=Z0e();function r(i){return t.isObjectLike(i)&&e.isArrayLike(i)}n.isArrayLikeObject=r})(nP)),nP}var sP={},oP={},r5;function J0e(){return r5||(r5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=SL();function t(r){return function(i){return e.get(i,r)}}n.property=t})(oP)),oP}var lP={},cP={},uP={},fP={},i5;function eq(){return i5||(i5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t!==null&&(typeof t=="object"||typeof t=="function")}n.isObject=e})(fP)),fP}var dP={},a5;function tq(){return a5||(a5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==null||typeof t!="object"&&typeof t!="function"}n.isPrimitive=e})(dP)),dP}var hP={},s5;function nq(){return s5||(s5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,r){return t===r||Number.isNaN(t)&&Number.isNaN(r)}n.isEqualsSameValueZero=e})(hP)),hP}var o5;function eve(){return o5||(o5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=eq(),t=tq(),r=nq();function i(d,p,v){return typeof v!="function"?i(d,p,()=>{}):a(d,p,function y(x,E,S,w,R,N){const O=v(x,E,S,w,R,N);return O!==void 0?!!O:a(x,E,y,N)},new Map)}function a(d,p,v,y){if(p===d)return!0;switch(typeof p){case"object":return s(d,p,v,y);case"function":return Object.keys(p).length>0?a(d,{...p},v,y):r.isEqualsSameValueZero(d,p);default:return e.isObject(d)?typeof p=="string"?p==="":!0:r.isEqualsSameValueZero(d,p)}}function s(d,p,v,y){if(p==null)return!0;if(Array.isArray(p))return c(d,p,v,y);if(p instanceof Map)return o(d,p,v,y);if(p instanceof Set)return f(d,p,v,y);const x=Object.keys(p);if(d==null||t.isPrimitive(d))return x.length===0;if(x.length===0)return!0;if(y!=null&&y.has(p))return y.get(p)===d;y==null||y.set(p,d);try{for(let E=0;E<x.length;E++){const S=x[E];if(!t.isPrimitive(d)&&!(S in d)||p[S]===void 0&&d[S]!==void 0||p[S]===null&&d[S]!==null||!v(d[S],p[S],S,d,p,y))return!1}return!0}finally{y==null||y.delete(p)}}function o(d,p,v,y){if(p.size===0)return!0;if(!(d instanceof Map))return!1;for(const[x,E]of p.entries()){const S=d.get(x);if(v(S,E,x,d,p,y)===!1)return!1}return!0}function c(d,p,v,y){if(p.length===0)return!0;if(!Array.isArray(d))return!1;const x=new Set;for(let E=0;E<p.length;E++){const S=p[E];let w=!1;for(let R=0;R<d.length;R++){if(x.has(R))continue;const N=d[R];let O=!1;if(v(N,S,E,d,p,y)&&(O=!0),O){x.add(R),w=!0;break}}if(!w)return!1}return!0}function f(d,p,v,y){return p.size===0?!0:d instanceof Set?c([...d],[...p],v,y):!1}n.isMatchWith=i,n.isSetMatch=f})(uP)),uP}var l5;function rq(){return l5||(l5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=eve();function t(r,i){return e.isMatchWith(r,i,()=>{})}n.isMatch=t})(cP)),cP}var pP={},mP={},gP={},c5;function tve(){return c5||(c5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Object.getOwnPropertySymbols(t).filter(r=>Object.prototype.propertyIsEnumerable.call(t,r))}n.getSymbols=e})(gP)),gP}var vP={},u5;function TL(){return u5||(u5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}n.getTag=e})(vP)),vP}var yP={},f5;function iq(){return f5||(f5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",t="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",c="[object Map]",f="[object Set]",d="[object Array]",p="[object Function]",v="[object ArrayBuffer]",y="[object Object]",x="[object Error]",E="[object DataView]",S="[object Uint8Array]",w="[object Uint8ClampedArray]",R="[object Uint16Array]",N="[object Uint32Array]",O="[object BigUint64Array]",z="[object Int8Array]",k="[object Int16Array]",U="[object Int32Array]",P="[object BigInt64Array]",C="[object Float32Array]",L="[object Float64Array]";n.argumentsTag=a,n.arrayBufferTag=v,n.arrayTag=d,n.bigInt64ArrayTag=P,n.bigUint64ArrayTag=O,n.booleanTag=i,n.dataViewTag=E,n.dateTag=o,n.errorTag=x,n.float32ArrayTag=C,n.float64ArrayTag=L,n.functionTag=p,n.int16ArrayTag=k,n.int32ArrayTag=U,n.int8ArrayTag=z,n.mapTag=c,n.numberTag=r,n.objectTag=y,n.regexpTag=e,n.setTag=f,n.stringTag=t,n.symbolTag=s,n.uint16ArrayTag=R,n.uint32ArrayTag=N,n.uint8ArrayTag=S,n.uint8ClampedArrayTag=w})(yP)),yP}var bP={},d5;function nve(){return d5||(d5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}n.isTypedArray=e})(bP)),bP}var h5;function aq(){return h5||(h5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=tve(),t=TL(),r=iq(),i=tq(),a=nve();function s(d,p){return o(d,void 0,d,new Map,p)}function o(d,p,v,y=new Map,x=void 0){const E=x==null?void 0:x(d,p,v,y);if(E!==void 0)return E;if(i.isPrimitive(d))return d;if(y.has(d))return y.get(d);if(Array.isArray(d)){const S=new Array(d.length);y.set(d,S);for(let w=0;w<d.length;w++)S[w]=o(d[w],w,v,y,x);return Object.hasOwn(d,"index")&&(S.index=d.index),Object.hasOwn(d,"input")&&(S.input=d.input),S}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const S=new RegExp(d.source,d.flags);return S.lastIndex=d.lastIndex,S}if(d instanceof Map){const S=new Map;y.set(d,S);for(const[w,R]of d)S.set(w,o(R,w,v,y,x));return S}if(d instanceof Set){const S=new Set;y.set(d,S);for(const w of d)S.add(o(w,void 0,v,y,x));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const S=new(Object.getPrototypeOf(d)).constructor(d.length);y.set(d,S);for(let w=0;w<d.length;w++)S[w]=o(d[w],w,v,y,x);return S}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const S=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return y.set(d,S),c(S,d,v,y,x),S}if(typeof File<"u"&&d instanceof File){const S=new File([d],d.name,{type:d.type});return y.set(d,S),c(S,d,v,y,x),S}if(typeof Blob<"u"&&d instanceof Blob){const S=new Blob([d],{type:d.type});return y.set(d,S),c(S,d,v,y,x),S}if(d instanceof Error){const S=new d.constructor;return y.set(d,S),S.message=d.message,S.name=d.name,S.stack=d.stack,S.cause=d.cause,c(S,d,v,y,x),S}if(d instanceof Boolean){const S=new Boolean(d.valueOf());return y.set(d,S),c(S,d,v,y,x),S}if(d instanceof Number){const S=new Number(d.valueOf());return y.set(d,S),c(S,d,v,y,x),S}if(d instanceof String){const S=new String(d.valueOf());return y.set(d,S),c(S,d,v,y,x),S}if(typeof d=="object"&&f(d)){const S=Object.create(Object.getPrototypeOf(d));return y.set(d,S),c(S,d,v,y,x),S}return d}function c(d,p,v=d,y,x){const E=[...Object.keys(p),...e.getSymbols(p)];for(let S=0;S<E.length;S++){const w=E[S],R=Object.getOwnPropertyDescriptor(d,w);(R==null||R.writable)&&(d[w]=o(p[w],w,v,y,x))}}function f(d){switch(t.getTag(d)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}n.cloneDeepWith=s,n.cloneDeepWithImpl=o,n.copyProperties=c})(mP)),mP}var p5;function rve(){return p5||(p5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=aq();function t(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}n.cloneDeep=t})(pP)),pP}var m5;function ive(){return m5||(m5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=rq(),t=rve();function r(i){return i=t.cloneDeep(i),a=>e.isMatch(a,i)}n.matches=r})(lP)),lP}var xP={},_P={},SP={},g5;function ave(){return g5||(g5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=aq(),t=TL(),r=iq();function i(a,s){return e.cloneDeepWith(a,(o,c,f,d)=>{const p=s==null?void 0:s(o,c,f,d);if(p!==void 0)return p;if(typeof a=="object"){if(t.getTag(a)===r.objectTag&&typeof a.constructor!="function"){const v={};return d.set(a,v),e.copyProperties(v,a,f,d),v}switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const v=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(v,a),v}case r.argumentsTag:{const v={};return e.copyProperties(v,a),v.length=a.length,v[Symbol.iterator]=a[Symbol.iterator],v}default:return}}})}n.cloneDeepWith=i})(SP)),SP}var v5;function sve(){return v5||(v5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=ave();function t(r){return e.cloneDeepWith(r)}n.cloneDeep=t})(_P)),_P}var wP={},EP={},y5;function sq(){return y5||(y5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function t(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}n.isIndex=t})(EP)),EP}var AP={},b5;function ove(){return b5||(b5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=TL();function t(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}n.isArguments=t})(AP)),AP}var x5;function lve(){return x5||(x5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=YG(),t=sq(),r=ove(),i=_L();function a(s,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&e.isDeepKey(o)&&(s==null?void 0:s[o])==null?c=i.toPath(o):c=[o],c.length===0)return!1;let f=s;for(let d=0;d<c.length;d++){const p=c[d];if((f==null||!Object.hasOwn(f,p))&&!((Array.isArray(f)||r.isArguments(f))&&t.isIndex(p)&&p<f.length))return!1;f=f[p]}return!0}n.has=a})(wP)),wP}var _5;function cve(){return _5||(_5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=rq(),t=xL(),r=sve(),i=SL(),a=lve();function s(o,c){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=t.toKey(o);break}}return c=r.cloneDeep(c),function(f){const d=i.get(f,o);return d===void 0?a.has(f,o):c===void 0?d===void 0:e.isMatch(d,c)}}n.matchesProperty=s})(xP)),xP}var S5;function uve(){return S5||(S5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=JG(),t=J0e(),r=ive(),i=cve();function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return t.property(s)}}n.iteratee=a})(sP)),sP}var w5;function fve(){return w5||(w5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=X0e(),t=Y0e(),r=JG(),i=Q0e(),a=uve();function s(o,c=r.identity){return i.isArrayLikeObject(o)?e.uniqBy(Array.from(o),t.ary(a.iteratee(c),1)):[]}n.uniqBy=s})(QR)),QR}var TP,E5;function dve(){return E5||(E5=1,TP=fve().uniqBy),TP}var hve=dve();const A5=Kc(hve);function pve(n,e,t){return e===!0?A5(n,t):typeof e=="function"?A5(n,e):n}var ML=G.createContext(null),mve=n=>n,Da=()=>{var n=G.useContext(ML);return n?n.store.dispatch:mve},_E=()=>{},gve=()=>_E,vve=(n,e)=>n===e;function un(n){var e=G.useContext(ML),t=G.useMemo(()=>e?r=>{if(r!=null)return n(r)}:_E,[e,n]);return _9.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:gve,e?e.store.getState:_E,e?e.store.getState:_E,t,vve)}function yve(n,e=`expected a function, instead received ${typeof n}`){if(typeof n!="function")throw new TypeError(e)}function bve(n,e=`expected an object, instead received ${typeof n}`){if(typeof n!="object")throw new TypeError(e)}function xve(n,e="expected all items to be functions, instead received the following types: "){if(!n.every(t=>typeof t=="function")){const t=n.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${t}]`)}}var T5=n=>Array.isArray(n)?n:[n];function _ve(n){const e=Array.isArray(n[0])?n[0]:n;return xve(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function Sve(n,e){const t=[],{length:r}=n;for(let i=0;i<r;i++)t.push(n[i].apply(null,e));return t}var wve=class{constructor(n){this.value=n}deref(){return this.value}},Eve=typeof WeakRef<"u"?WeakRef:wve,Ave=0,M5=1;function Ww(){return{s:Ave,v:void 0,o:null,p:null}}function oq(n,e={}){let t=Ww();const{resultEqualityCheck:r}=e;let i,a=0;function s(){var p;let o=t;const{length:c}=arguments;for(let v=0,y=c;v<y;v++){const x=arguments[v];if(typeof x=="function"||typeof x=="object"&&x!==null){let E=o.o;E===null&&(o.o=E=new WeakMap);const S=E.get(x);S===void 0?(o=Ww(),E.set(x,o)):o=S}else{let E=o.p;E===null&&(o.p=E=new Map);const S=E.get(x);S===void 0?(o=Ww(),E.set(x,o)):o=S}}const f=o;let d;if(o.s===M5)d=o.v;else if(d=n.apply(null,arguments),a++,r){const v=((p=i==null?void 0:i.deref)==null?void 0:p.call(i))??i;v!=null&&r(v,d)&&(d=v,a!==0&&a--),i=typeof d=="object"&&d!==null||typeof d=="function"?new Eve(d):d}return f.s=M5,f.v=d,d}return s.clearCache=()=>{t=Ww(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function Tve(n,...e){const t=typeof n=="function"?{memoize:n,memoizeOptions:e}:n,r=(...i)=>{let a=0,s=0,o,c={},f=i.pop();typeof f=="object"&&(c=f,f=i.pop()),yve(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const d={...t,...c},{memoize:p,memoizeOptions:v=[],argsMemoize:y=oq,argsMemoizeOptions:x=[]}=d,E=T5(v),S=T5(x),w=_ve(i),R=p(function(){return a++,f.apply(null,arguments)},...E),N=y(function(){s++;const z=Sve(w,arguments);return o=R.apply(null,z),o},...S);return Object.assign(N,{resultFunc:f,memoizedResultFunc:R,dependencies:w,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:y})};return Object.assign(r,{withTypes:()=>r}),r}var Je=Tve(oq),Mve=Object.assign((n,e=Je)=>{bve(n,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof n}`);const t=Object.keys(n),r=t.map(a=>n[a]);return e(r,(...a)=>a.reduce((s,o,c)=>(s[t[c]]=o,s),{}))},{withTypes:()=>Mve}),MP={},CP={},IP={},C5;function Cve(){return C5||(C5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const t=(r,i,a)=>{if(r!==i){const s=e(r),o=e(i);if(s===o&&s===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};n.compareValues=t})(IP)),IP}var RP={},PP={},I5;function lq(){return I5||(I5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="symbol"||t instanceof Symbol}n.isSymbol=e})(PP)),PP}var R5;function Ive(){return R5||(R5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=lq(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!t.test(a))||s!=null&&Object.hasOwn(s,a)}n.isKey=i})(RP)),RP}var P5;function Rve(){return P5||(P5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Cve(),t=Ive(),r=_L();function i(a,s,o,c){if(a==null)return[];o=c?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(y=>String(y));const f=(y,x)=>{let E=y;for(let S=0;S<x.length&&E!=null;++S)E=E[x[S]];return E},d=(y,x)=>x==null||y==null?x:typeof y=="object"&&"key"in y?Object.hasOwn(x,y.key)?x[y.key]:f(x,y.path):typeof y=="function"?y(x):Array.isArray(y)?f(x,y):typeof x=="object"?x[y]:x,p=s.map(y=>(Array.isArray(y)&&y.length===1&&(y=y[0]),y==null||typeof y=="function"||Array.isArray(y)||t.isKey(y)?y:{key:y,path:r.toPath(y)}));return a.map(y=>({original:y,criteria:p.map(x=>d(x,y))})).slice().sort((y,x)=>{for(let E=0;E<p.length;E++){const S=e.compareValues(y.criteria[E],x.criteria[E],o[E]);if(S!==0)return S}return 0}).map(y=>y.original)}n.orderBy=i})(CP)),CP}var NP={},N5;function Pve(){return N5||(N5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,r=1){const i=[],a=Math.floor(r),s=(o,c)=>{for(let f=0;f<o.length;f++){const d=o[f];Array.isArray(d)&&c<a?s(d,c+1):i.push(d)}};return s(t,0),i}n.flatten=e})(NP)),NP}var OP={},O5;function cq(){return O5||(O5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=sq(),t=AL(),r=eq(),i=nq();function a(s,o,c){return r.isObject(c)&&(typeof o=="number"&&t.isArrayLike(c)&&e.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?i.isEqualsSameValueZero(c[o],s):!1}n.isIterateeCall=a})(OP)),OP}var D5;function Nve(){return D5||(D5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Rve(),t=Pve(),r=cq();function i(a,...s){const o=s.length;return o>1&&r.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,t.flatten(s),["asc"])}n.sortBy=i})(MP)),MP}var DP,L5;function Ove(){return L5||(L5=1,DP=Nve().sortBy),DP}var Dve=Ove();const rC=Kc(Dve);var uq=n=>n.legend.settings,Lve=n=>n.legend.size,kve=n=>n.legend.payload;Je([kve,uq],(n,e)=>{var{itemSorter:t}=e,r=n.flat(1);return t?rC(r,t):r});var $w=1;function Uve(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,t]=G.useState({height:0,left:0,top:0,width:0}),r=G.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>$w||Math.abs(s.left-e.left)>$w||Math.abs(s.top-e.top)>$w||Math.abs(s.width-e.width)>$w)&&t({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...n]);return[e,r]}function es(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var Fve=typeof Symbol=="function"&&Symbol.observable||"@@observable",k5=Fve,LP=()=>Math.random().toString(36).substring(7).split("").join("."),zve={INIT:`@@redux/INIT${LP()}`,REPLACE:`@@redux/REPLACE${LP()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${LP()}`},ZA=zve;function CL(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function fq(n,e,t){if(typeof n!="function")throw new Error(es(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(es(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(es(1));return t(fq)(n,e)}let r=n,i=e,a=new Map,s=a,o=0,c=!1;function f(){s===a&&(s=new Map,a.forEach((S,w)=>{s.set(w,S)}))}function d(){if(c)throw new Error(es(3));return i}function p(S){if(typeof S!="function")throw new Error(es(4));if(c)throw new Error(es(5));let w=!0;f();const R=o++;return s.set(R,S),function(){if(w){if(c)throw new Error(es(6));w=!1,f(),s.delete(R),a=null}}}function v(S){if(!CL(S))throw new Error(es(7));if(typeof S.type>"u")throw new Error(es(8));if(typeof S.type!="string")throw new Error(es(17));if(c)throw new Error(es(9));try{c=!0,i=r(i,S)}finally{c=!1}return(a=s).forEach(R=>{R()}),S}function y(S){if(typeof S!="function")throw new Error(es(10));r=S,v({type:ZA.REPLACE})}function x(){const S=p;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(es(11));function R(){const O=w;O.next&&O.next(d())}return R(),{unsubscribe:S(R)}},[k5](){return this}}}return v({type:ZA.INIT}),{dispatch:v,subscribe:p,getState:d,replaceReducer:y,[k5]:x}}function jve(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:ZA.INIT})>"u")throw new Error(es(12));if(typeof t(void 0,{type:ZA.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(es(13))})}function dq(n){const e=Object.keys(n),t={};for(let a=0;a<e.length;a++){const s=e[a];typeof n[s]=="function"&&(t[s]=n[s])}const r=Object.keys(t);let i;try{jve(t)}catch(a){i=a}return function(s={},o){if(i)throw i;let c=!1;const f={};for(let d=0;d<r.length;d++){const p=r[d],v=t[p],y=s[p],x=v(y,o);if(typeof x>"u")throw o&&o.type,new Error(es(14));f[p]=x,c=c||x!==y}return c=c||r.length!==Object.keys(s).length,c?f:s}}function QA(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...r)=>e(t(...r)))}function Bve(...n){return e=>(t,r)=>{const i=e(t,r);let a=()=>{throw new Error(es(15))};const s={getState:i.getState,dispatch:(c,...f)=>a(c,...f)},o=n.map(c=>c(s));return a=QA(...o)(i.dispatch),{...i,dispatch:a}}}function hq(n){return CL(n)&&"type"in n&&typeof n.type=="string"}var pq=Symbol.for("immer-nothing"),U5=Symbol.for("immer-draftable"),lo=Symbol.for("immer-state");function Uc(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var dl=Object,Jv=dl.getPrototypeOf,JA="constructor",iC="prototype",EO="configurable",eT="enumerable",SE="writable",b_="value",Sd=n=>!!n&&!!n[lo];function Yc(n){var e;return n?mq(n)||sC(n)||!!n[U5]||!!((e=n[JA])!=null&&e[U5])||oC(n)||lC(n):!1}var Vve=dl[iC][JA].toString(),F5=new WeakMap;function mq(n){if(!n||!IL(n))return!1;const e=Jv(n);if(e===null||e===dl[iC])return!0;const t=dl.hasOwnProperty.call(e,JA)&&e[JA];if(t===Object)return!0;if(!mv(t))return!1;let r=F5.get(t);return r===void 0&&(r=Function.toString.call(t),F5.set(t,r)),r===Vve}function aC(n,e,t=!0){i1(n)===0?(t?Reflect.ownKeys(n):dl.keys(n)).forEach(i=>{e(i,n[i],n)}):n.forEach((r,i)=>e(i,r,n))}function i1(n){const e=n[lo];return e?e.type_:sC(n)?1:oC(n)?2:lC(n)?3:0}var z5=(n,e,t=i1(n))=>t===2?n.has(e):dl[iC].hasOwnProperty.call(n,e),AO=(n,e,t=i1(n))=>t===2?n.get(e):n[e],tT=(n,e,t,r=i1(n))=>{r===2?n.set(e,t):r===3?n.add(t):n[e]=t};function Hve(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var sC=Array.isArray,oC=n=>n instanceof Map,lC=n=>n instanceof Set,IL=n=>typeof n=="object",mv=n=>typeof n=="function",kP=n=>typeof n=="boolean";function Gve(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var rd=n=>n.copy_||n.base_,RL=n=>n.modified_?n.copy_:n.base_;function TO(n,e){if(oC(n))return new Map(n);if(lC(n))return new Set(n);if(sC(n))return Array[iC].slice.call(n);const t=mq(n);if(e===!0||e==="class_only"&&!t){const r=dl.getOwnPropertyDescriptors(n);delete r[lo];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o[SE]===!1&&(o[SE]=!0,o[EO]=!0),(o.get||o.set)&&(r[s]={[EO]:!0,[SE]:!0,[eT]:o[eT],[b_]:n[s]})}return dl.create(Jv(n),r)}else{const r=Jv(n);if(r!==null&&t)return{...n};const i=dl.create(r);return dl.assign(i,n)}}function PL(n,e=!1){return cC(n)||Sd(n)||!Yc(n)||(i1(n)>1&&dl.defineProperties(n,{set:Xw,add:Xw,clear:Xw,delete:Xw}),dl.freeze(n),e&&aC(n,(t,r)=>{PL(r,!0)},!1)),n}function qve(){Uc(2)}var Xw={[b_]:qve};function cC(n){return n===null||!IL(n)?!0:dl.isFrozen(n)}var nT="MapSet",MO="Patches",j5="ArrayMethods",gq={};function bg(n){const e=gq[n];return e||Uc(0,n),e}var B5=n=>!!gq[n],x_,vq=()=>x_,Wve=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:B5(nT)?bg(nT):void 0,arrayMethodsPlugin_:B5(j5)?bg(j5):void 0});function V5(n,e){e&&(n.patchPlugin_=bg(MO),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function CO(n){IO(n),n.drafts_.forEach($ve),n.drafts_=null}function IO(n){n===x_&&(x_=n.parent_)}var H5=n=>x_=Wve(x_,n);function $ve(n){const e=n[lo];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function G5(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[lo].modified_&&(CO(e),Uc(4)),Yc(n)&&(n=q5(e,n));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(t[lo].base_,n,e)}else n=q5(e,t);return Xve(e,n,!0),CO(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==pq?n:void 0}function q5(n,e){if(cC(e))return e;const t=e[lo];if(!t)return rT(e,n.handledSet_,n);if(!uC(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:r}=t;if(r)for(;r.length>0;)r.pop()(n);xq(t,n)}return t.copy_}function Xve(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&PL(e,t)}function yq(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var uC=(n,e)=>n.scope_===e,Yve=[];function bq(n,e,t,r){const i=rd(n),a=n.type_;if(r!==void 0&&AO(i,r,a)===e){tT(i,r,t,a);return}if(!n.draftLocations_){const o=n.draftLocations_=new Map;aC(i,(c,f)=>{if(Sd(f)){const d=o.get(f)||[];d.push(c),o.set(f,d)}})}const s=n.draftLocations_.get(e)??Yve;for(const o of s)tT(i,o,t,a)}function Kve(n,e,t){n.callbacks_.push(function(i){var o;const a=e;if(!a||!uC(a,i))return;(o=i.mapSetPlugin_)==null||o.fixSetContents(a);const s=RL(a);bq(n,a.draft_??a,s,t),xq(a,i)})}function xq(n,e){var r;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((r=n.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:i}=e;if(i){const a=i.getPath(n);a&&i.generatePatches_(n,a,e)}yq(n)}}function Zve(n,e,t){const{scope_:r}=n;if(Sd(t)){const i=t[lo];uC(i,r)&&i.callbacks_.push(function(){wE(n);const s=RL(i);bq(n,t,s,e)})}else Yc(t)&&n.callbacks_.push(function(){const a=rd(n);n.type_===3?a.has(t)&&rT(t,r.handledSet_,r):AO(a,e,n.type_)===t&&r.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&rT(AO(n.copy_,e,n.type_),r.handledSet_,r)})}function rT(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||Sd(n)||e.has(n)||!Yc(n)||cC(n)||(e.add(n),aC(n,(r,i)=>{if(Sd(i)){const a=i[lo];if(uC(a,t)){const s=RL(a);tT(n,r,s,n.type_),yq(a)}}else Yc(i)&&rT(i,e,t)})),n}function Qve(n,e){const t=sC(n),r={type_:t?1:0,scope_:e?e.scope_:vq(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=iT;t&&(i=[r],a=__);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,[o,r]}var iT={get(n,e){if(e===lo)return n;let t=n.scope_.arrayMethodsPlugin_;const r=n.type_===1&&typeof e=="string";if(r&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const i=rd(n);if(!z5(i,e,n.type_))return Jve(n,i,e);const a=i[e];if(n.finalized_||!Yc(a)||r&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&Gve(e))return a;if(a===UP(n.base_,e)){wE(n);const s=n.type_===1?+e:e,o=PO(n.scope_,a,n,s);return n.copy_[s]=o}return a},has(n,e){return e in rd(n)},ownKeys(n){return Reflect.ownKeys(rd(n))},set(n,e,t){const r=_q(rd(n),e);if(r!=null&&r.set)return r.set.call(n.draft_,t),!0;if(!n.modified_){const i=UP(rd(n),e),a=i==null?void 0:i[lo];if(a&&a.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(Hve(t,i)&&(t!==void 0||z5(n.base_,e,n.type_)))return!0;wE(n),RO(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),Zve(n,e,t)),!0},deleteProperty(n,e){return wE(n),UP(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),RO(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=rd(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{[SE]:!0,[EO]:n.type_!==1||e!=="length",[eT]:r[eT],[b_]:t[e]}},defineProperty(){Uc(11)},getPrototypeOf(n){return Jv(n.base_)},setPrototypeOf(){Uc(12)}},__={};for(let n in iT){let e=iT[n];__[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}__.deleteProperty=function(n,e){return __.set.call(this,n,e,void 0)};__.set=function(n,e,t){return iT.set.call(this,n[0],e,t,n[0])};function UP(n,e){const t=n[lo];return(t?rd(t):n)[e]}function Jve(n,e,t){var i;const r=_q(e,t);return r?b_ in r?r[b_]:(i=r.get)==null?void 0:i.call(n.draft_):void 0}function _q(n,e){if(!(e in n))return;let t=Jv(n);for(;t;){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=Jv(t)}}function RO(n){n.modified_||(n.modified_=!0,n.parent_&&RO(n.parent_))}function wE(n){n.copy_||(n.assigned_=new Map,n.copy_=TO(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var eye=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,r,i)=>{if(mv(t)&&!mv(r)){const s=r;r=t;const o=this;return function(f=s,...d){return o.produce(f,p=>r.call(this,p,...d))}}mv(r)||Uc(6),i!==void 0&&!mv(i)&&Uc(7);let a;if(Yc(t)){const s=H5(this),o=PO(s,t,void 0);let c=!0;try{a=r(o),c=!1}finally{c?CO(s):IO(s)}return V5(s,i),G5(a,s)}else if(!t||!IL(t)){if(a=r(t),a===void 0&&(a=t),a===pq&&(a=void 0),this.autoFreeze_&&PL(a,!0),i){const s=[],o=[];bg(MO).generateReplacementPatches_(t,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else Uc(1,t)},this.produceWithPatches=(t,r)=>{if(mv(t))return(o,...c)=>this.produceWithPatches(o,f=>t(f,...c));let i,a;return[this.produce(t,r,(o,c)=>{i=o,a=c}),i,a]},kP(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),kP(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),kP(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Yc(e)||Uc(8),Sd(e)&&(e=Wc(e));const t=H5(this),r=PO(t,e,void 0);return r[lo].isManual_=!0,IO(t),r}finishDraft(e,t){const r=e&&e[lo];(!r||!r.isManual_)&&Uc(9);const{scope_:i}=r;return V5(i,t),G5(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const i=bg(MO).applyPatches_;return Sd(e)?i(e,t):this.produce(e,a=>i(a,t))}};function PO(n,e,t,r){const[i,a]=oC(e)?bg(nT).proxyMap_(e,t):lC(e)?bg(nT).proxySet_(e,t):Qve(e,t);return((t==null?void 0:t.scope_)??vq()).drafts_.push(i),a.callbacks_=(t==null?void 0:t.callbacks_)??[],a.key_=r,t&&r!==void 0?Kve(t,a,r):a.callbacks_.push(function(c){var d;(d=c.mapSetPlugin_)==null||d.fixSetContents(a);const{patchPlugin_:f}=c;a.modified_&&f&&f.generatePatches_(a,[],c)}),i}function Wc(n){return Sd(n)||Uc(10,n),Sq(n)}function Sq(n){if(!Yc(n)||cC(n))return n;const e=n[lo];let t,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=TO(n,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else t=TO(n,!0);return aC(t,(i,a)=>{tT(t,i,Sq(a))},r),e&&(e.finalized_=!1),t}var tye=new eye,wq=tye.produce;function Eq(n){return({dispatch:t,getState:r})=>i=>a=>typeof a=="function"?a(t,r,n):i(a)}var nye=Eq(),rye=Eq,iye=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?QA:QA.apply(null,arguments)};function ic(n,e){function t(...r){if(e){let i=e(...r);if(!i)throw new Error(ml(0));return{type:n,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:n,payload:r[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=r=>hq(r)&&r.type===n,t}var Aq=class _x extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,_x.prototype)}static get[Symbol.species](){return _x}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new _x(...e[0].concat(this)):new _x(...e.concat(this))}};function W5(n){return Yc(n)?wq(n,()=>{}):n}function Yw(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function aye(n){return typeof n=="boolean"}var sye=()=>function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new Aq;return t&&(aye(t)?s.push(nye):s.push(rye(t.extraArgument))),s},Tq="RTK_autoBatch",ci=()=>n=>({payload:n,meta:{[Tq]:!0}}),$5=n=>e=>{setTimeout(e,n)},Mq=(n={type:"raf"})=>e=>(...t)=>{const r=e(...t);let i=!0,a=!1,s=!1;const o=new Set,c=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:$5(10):n.type==="callback"?n.queueNotification:$5(n.timeout),f=()=>{s=!1,a&&(a=!1,o.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const p=()=>i&&d(),v=r.subscribe(p);return o.add(d),()=>{v(),o.delete(d)}},dispatch(d){var p;try{return i=!((p=d==null?void 0:d.meta)!=null&&p[Tq]),a=!i,a&&(s||(s=!0,c(f))),r.dispatch(d)}finally{i=!0}}})},oye=n=>function(t){const{autoBatch:r=!0}=t??{};let i=new Aq(n);return r&&i.push(Mq(typeof r=="object"?r:void 0)),i};function lye(n){const e=sye(),{reducer:t=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=n||{};let o;if(typeof t=="function")o=t;else if(CL(t))o=dq(t);else throw new Error(ml(1));let c;typeof r=="function"?c=r(e):c=e();let f=QA;i&&(f=iye({trace:!1,...typeof i=="object"&&i}));const d=Bve(...c),p=oye(d);let v=typeof s=="function"?s(p):p();const y=f(...v);return fq(o,a,y)}function Cq(n){const e={},t=[];let r;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(ml(28));if(o in e)throw new Error(ml(29));return e[o]=s,i},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&t.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return t.push({matcher:a,reducer:s}),i},addDefaultCase(a){return r=a,i}};return n(i),[e,t,r]}function cye(n){return typeof n=="function"}function uye(n,e){let[t,r,i]=Cq(e),a;if(cye(n))a=()=>W5(n());else{const o=W5(n);a=()=>o}function s(o=a(),c){let f=[t[c.type],...r.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return f.filter(d=>!!d).length===0&&(f=[i]),f.reduce((d,p)=>{if(p)if(Sd(d)){const y=p(d,c);return y===void 0?d:y}else{if(Yc(d))return wq(d,v=>p(v,c));{const v=p(d,c);if(v===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return d},o)}return s.getInitialState=a,s}var fye="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",dye=(n=21)=>{let e="",t=n;for(;t--;)e+=fye[Math.random()*64|0];return e},hye=Symbol.for("rtk-slice-createasyncthunk");function pye(n,e){return`${n}/${e}`}function mye({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[hye];return function(i){const{name:a,reducerPath:s=a}=i;if(!a)throw new Error(ml(11));const o=(typeof i.reducers=="function"?i.reducers(vye()):i.reducers)||{},c=Object.keys(o),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(O,z){const k=typeof O=="string"?O:O.type;if(!k)throw new Error(ml(12));if(k in f.sliceCaseReducersByType)throw new Error(ml(13));return f.sliceCaseReducersByType[k]=z,d},addMatcher(O,z){return f.sliceMatchers.push({matcher:O,reducer:z}),d},exposeAction(O,z){return f.actionCreators[O]=z,d},exposeCaseReducer(O,z){return f.sliceCaseReducersByName[O]=z,d}};c.forEach(O=>{const z=o[O],k={reducerName:O,type:pye(a,O),createNotation:typeof i.reducers=="function"};bye(z)?_ye(k,z,d,e):yye(k,z,d)});function p(){const[O={},z=[],k=void 0]=typeof i.extraReducers=="function"?Cq(i.extraReducers):[i.extraReducers],U={...O,...f.sliceCaseReducersByType};return uye(i.initialState,P=>{for(let C in U)P.addCase(C,U[C]);for(let C of f.sliceMatchers)P.addMatcher(C.matcher,C.reducer);for(let C of z)P.addMatcher(C.matcher,C.reducer);k&&P.addDefaultCase(k)})}const v=O=>O,y=new Map,x=new WeakMap;let E;function S(O,z){return E||(E=p()),E(O,z)}function w(){return E||(E=p()),E.getInitialState()}function R(O,z=!1){function k(P){let C=P[O];return typeof C>"u"&&z&&(C=Yw(x,k,w)),C}function U(P=v){const C=Yw(y,z,()=>new WeakMap);return Yw(C,P,()=>{const L={};for(const[j,B]of Object.entries(i.selectors??{}))L[j]=gye(B,P,()=>Yw(x,P,w),z);return L})}return{reducerPath:O,getSelectors:U,get selectors(){return U(k)},selectSlice:k}}const N={name:a,reducer:S,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:w,...R(s),injectInto(O,{reducerPath:z,...k}={}){const U=z??s;return O.inject({reducerPath:U,reducer:S},k),{...N,...R(U,!0)}}};return N}}function gye(n,e,t,r){function i(a,...s){let o=e(a);return typeof o>"u"&&r&&(o=t()),n(o,...s)}return i.unwrapped=n,i}var Go=mye();function vye(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function yye({type:n,reducerName:e,createNotation:t},r,i){let a,s;if("reducer"in r){if(t&&!xye(r))throw new Error(ml(17));a=r.reducer,s=r.prepare}else a=r;i.addCase(n,a).exposeCaseReducer(e,a).exposeAction(e,s?ic(n,s):ic(n))}function bye(n){return n._reducerDefinitionType==="asyncThunk"}function xye(n){return n._reducerDefinitionType==="reducerWithPrepare"}function _ye({type:n,reducerName:e},t,r,i){if(!i)throw new Error(ml(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:c,settled:f,options:d}=t,p=i(n,a,d);r.exposeAction(e,p),s&&r.addCase(p.fulfilled,s),o&&r.addCase(p.pending,o),c&&r.addCase(p.rejected,c),f&&r.addMatcher(p.settled,f),r.exposeCaseReducer(e,{fulfilled:s||Kw,pending:o||Kw,rejected:c||Kw,settled:f||Kw})}function Kw(){}var Sye="task",Iq="listener",Rq="completed",NL="cancelled",wye=`task-${NL}`,Eye=`task-${Rq}`,NO=`${Iq}-${NL}`,Aye=`${Iq}-${Rq}`,fC=class{constructor(n){vI(this,"name","TaskAbortError");vI(this,"message");this.code=n,this.message=`${Sye} ${NL} (reason: ${n})`}},OL=(n,e)=>{if(typeof n!="function")throw new TypeError(ml(32))},aT=()=>{},Pq=(n,e=aT)=>(n.catch(e),n),Nq=(n,e)=>(n.addEventListener("abort",e,{once:!0}),()=>n.removeEventListener("abort",e)),ng=n=>{if(n.aborted)throw new fC(n.reason)};function Oq(n,e){let t=aT;return new Promise((r,i)=>{const a=()=>i(new fC(n.reason));if(n.aborted){a();return}t=Nq(n,a),e.finally(()=>t()).then(r,i)}).finally(()=>{t=aT})}var Tye=async(n,e)=>{try{return await Promise.resolve(),{status:"ok",value:await n()}}catch(t){return{status:t instanceof fC?"cancelled":"rejected",error:t}}finally{e==null||e()}},sT=n=>e=>Pq(Oq(n,e).then(t=>(ng(n),t))),Dq=n=>{const e=sT(n);return t=>e(new Promise(r=>setTimeout(r,t)))},{assign:Rv}=Object,X5={},dC="listenerMiddleware",Mye=(n,e)=>{const t=r=>Nq(n,()=>r.abort(n.reason));return(r,i)=>{OL(r);const a=new AbortController;t(a);const s=Tye(async()=>{ng(n),ng(a.signal);const o=await r({pause:sT(a.signal),delay:Dq(a.signal),signal:a.signal});return ng(a.signal),o},()=>a.abort(Eye));return i!=null&&i.autoJoin&&e.push(s.catch(aT)),{result:sT(n)(s),cancel(){a.abort(wye)}}}},Cye=(n,e)=>{const t=async(r,i)=>{ng(e);let a=()=>{};const o=[new Promise((c,f)=>{let d=n({predicate:r,effect:(p,v)=>{v.unsubscribe(),c([p,v.getState(),v.getOriginalState()])}});a=()=>{d(),f()}})];i!=null&&o.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await Oq(e,Promise.race(o));return ng(e),c}finally{a()}};return(r,i)=>Pq(t(r,i))},Lq=n=>{let{type:e,actionCreator:t,matcher:r,predicate:i,effect:a}=n;if(e)i=ic(e).match;else if(t)e=t.type,i=t.match;else if(r)i=r;else if(!i)throw new Error(ml(21));return OL(a),{predicate:i,type:e,effect:a}},kq=Rv(n=>{const{type:e,predicate:t,effect:r}=Lq(n);return{id:dye(),effect:r,type:e,predicate:t,pending:new Set,unsubscribe:()=>{throw new Error(ml(22))}}},{withTypes:()=>kq}),Y5=(n,e)=>{const{type:t,effect:r,predicate:i}=Lq(e);return Array.from(n.values()).find(a=>(typeof t=="string"?a.type===t:a.predicate===i)&&a.effect===r)},OO=n=>{n.pending.forEach(e=>{e.abort(NO)})},Iye=(n,e)=>()=>{for(const t of e.keys())OO(t);n.clear()},K5=(n,e,t)=>{try{n(e,t)}catch(r){setTimeout(()=>{throw r},0)}},Uq=Rv(ic(`${dC}/add`),{withTypes:()=>Uq}),Rye=ic(`${dC}/removeAll`),Fq=Rv(ic(`${dC}/remove`),{withTypes:()=>Fq}),Pye=(...n)=>{console.error(`${dC}/error`,...n)},a1=(n={})=>{const e=new Map,t=new Map,r=y=>{const x=t.get(y)??0;t.set(y,x+1)},i=y=>{const x=t.get(y)??1;x===1?t.delete(y):t.set(y,x-1)},{extra:a,onError:s=Pye}=n;OL(s);const o=y=>(y.unsubscribe=()=>e.delete(y.id),e.set(y.id,y),x=>{y.unsubscribe(),x!=null&&x.cancelActive&&OO(y)}),c=y=>{const x=Y5(e,y)??kq(y);return o(x)};Rv(c,{withTypes:()=>c});const f=y=>{const x=Y5(e,y);return x&&(x.unsubscribe(),y.cancelActive&&OO(x)),!!x};Rv(f,{withTypes:()=>f});const d=async(y,x,E,S)=>{const w=new AbortController,R=Cye(c,w.signal),N=[];try{y.pending.add(w),r(y),await Promise.resolve(y.effect(x,Rv({},E,{getOriginalState:S,condition:(O,z)=>R(O,z).then(Boolean),take:R,delay:Dq(w.signal),pause:sT(w.signal),extra:a,signal:w.signal,fork:Mye(w.signal,N),unsubscribe:y.unsubscribe,subscribe:()=>{e.set(y.id,y)},cancelActiveListeners:()=>{y.pending.forEach((O,z,k)=>{O!==w&&(O.abort(NO),k.delete(O))})},cancel:()=>{w.abort(NO),y.pending.delete(w)},throwIfCancelled:()=>{ng(w.signal)}})))}catch(O){O instanceof fC||K5(s,O,{raisedBy:"effect"})}finally{await Promise.all(N),w.abort(Aye),i(y),y.pending.delete(w)}},p=Iye(e,t);return{middleware:y=>x=>E=>{if(!hq(E))return x(E);if(Uq.match(E))return c(E.payload);if(Rye.match(E)){p();return}if(Fq.match(E))return f(E.payload);let S=y.getState();const w=()=>{if(S===X5)throw new Error(ml(23));return S};let R;try{if(R=x(E),e.size>0){const N=y.getState(),O=Array.from(e.values());for(const z of O){let k=!1;try{k=z.predicate(E,N,S)}catch(U){k=!1,K5(s,U,{raisedBy:"predicate"})}k&&d(z,E,y,w)}}}finally{S=X5}return R},startListening:c,stopListening:f,clearListeners:p}};function ml(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var Nye={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},zq=Go({name:"chartLayout",initialState:Nye,reducers:{setLayout(n,e){n.layoutType=e.payload},setChartSize(n,e){n.width=e.payload.width,n.height=e.payload.height},setMargin(n,e){var t,r,i,a;n.margin.top=(t=e.payload.top)!==null&&t!==void 0?t:0,n.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,n.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,n.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(n,e){n.scale=e.payload}}}),{setMargin:Oye,setLayout:Dye,setChartSize:Lye,setScale:kye}=zq.actions,Uye=zq.reducer;function jq(n,e,t){return Array.isArray(n)&&n&&e+t!==0?n.slice(e,t+1):n}function nr(n){return Number.isFinite(n)}function df(n){return typeof n=="number"&&n>0&&Number.isFinite(n)}function Z5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function bv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Z5(Object(t),!0).forEach(function(r){Fye(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Z5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Fye(n,e,t){return(e=zye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zye(n){var e=jye(n,"string");return typeof e=="symbol"?e:e+""}function jye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ls(n,e,t){return Us(n)||Us(e)?t:ff(e)?nC(n,e,t):typeof e=="function"?e(n):t}var Bye=(n,e,t)=>{if(e&&t){var{width:r,height:i}=t,{align:a,verticalAlign:s,layout:o}=e;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&en(n[a]))return bv(bv({},n),{},{[a]:n[a]+(r||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&en(n[s]))return bv(bv({},n),{},{[s]:n[s]+(i||0)})}return n},vf=(n,e)=>n==="horizontal"&&e==="xAxis"||n==="vertical"&&e==="yAxis"||n==="centric"&&e==="angleAxis"||n==="radial"&&e==="radiusAxis",Bq=(n,e,t,r)=>{if(r)return n.map(o=>o.coordinate);var i,a,s=n.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===t&&(a=!0),o.coordinate));return i||s.push(e),a||s.push(t),s},Vq=(n,e,t)=>{if(!n)return null;var{duplicateDomain:r,type:i,range:a,scale:s,realScaleType:o,isCategorical:c,categoricalDomain:f,tickCount:d,ticks:p,niceTicks:v,axisType:y}=n;if(!s)return null;var x=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,E=i==="category"&&s.bandwidth?s.bandwidth()/x:0;if(E=y==="angleAxis"&&a&&a.length>=2?Zl(a[0]-a[1])*2*E:E,p||v){var S=(p||v||[]).map((w,R)=>{var N=r?r.indexOf(w):w,O=s.map(N);return nr(O)?{coordinate:O+E,value:w,offset:E,index:R}:null}).filter(Vo);return S}return c&&f?f.map((w,R)=>{var N=s.map(w);return nr(N)?{coordinate:N+E,value:w,index:R,offset:E}:null}).filter(Vo):s.ticks&&d!=null?s.ticks(d).map((w,R)=>{var N=s.map(w);return nr(N)?{coordinate:N+E,value:w,index:R,offset:E}:null}).filter(Vo):s.domain().map((w,R)=>{var N=s.map(w);return nr(N)?{coordinate:N+E,value:r?r[w]:w,index:R,offset:E}:null}).filter(Vo)},Vye=n=>{var e,t=n.length;if(!(t<=0)){var r=(e=n[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0,o=0;o<t;++o){var c=n[o],f=c==null?void 0:c[i];if(f!=null){var d=f[1],p=f[0],v=uf(d)?p:d;v>=0?(f[0]=a,a+=v,f[1]=a):(f[0]=s,s+=v,f[1]=s)}}}},Hye=n=>{var e,t=n.length;if(!(t<=0)){var r=(e=n[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0;s<t;++s){var o=n[s],c=o==null?void 0:o[i];if(c!=null){var f=uf(c[1])?c[0]:c[1];f>=0?(c[0]=a,a+=f,c[1]=a):(c[0]=0,c[1]=0)}}}},Gye={sign:Vye,expand:O0e,none:vg,silhouette:D0e,wiggle:L0e,positive:Hye},qye=(n,e,t)=>{var r,i=(r=Gye[t])!==null&&r!==void 0?r:vg,a=N0e().keys(e).value((o,c)=>Number(ls(o,c,0))).order(wO).offset(i),s=a(n);return s.forEach((o,c)=>{o.forEach((f,d)=>{var p=ls(n[d],e[c],0);Array.isArray(p)&&p.length===2&&en(p[0])&&en(p[1])&&(f[0]=p[0],f[1]=p[1])})}),s};function Wye(n){return n==null?void 0:String(n)}function Q5(n){var{axis:e,ticks:t,bandSize:r,entry:i,index:a,dataKey:s}=n;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Us(i[e.dataKey])){var o=ZG(t,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return t!=null&&t[a]?t[a].coordinate+r/2:null}var c=ls(i,Us(s)?e.dataKey:s),f=e.scale.map(c);return en(f)?f:null}var $ye=n=>{var e=n.flat(2).filter(en);return[Math.min(...e),Math.max(...e)]},Xye=n=>[n[0]===1/0?0:n[0],n[1]===-1/0?0:n[1]],Yye=(n,e,t)=>{if(n!=null)return Xye(Object.keys(n).reduce((r,i)=>{var a=n[i];if(!a)return r;var{stackedData:s}=a,o=s.reduce((c,f)=>{var d=jq(f,e,t),p=$ye(d);return!nr(p[0])||!nr(p[1])?c:[Math.min(c[0],p[0]),Math.max(c[1],p[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},J5=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ej=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,oT=(n,e,t)=>{if(n&&n.scale&&n.scale.bandwidth){var r=n.scale.bandwidth();if(!t||r>0)return r}if(n&&e&&e.length>=2){for(var i=rC(e,d=>d.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var c=i[s],f=i[s-1];a=Math.min(((c==null?void 0:c.coordinate)||0)-((f==null?void 0:f.coordinate)||0),a)}return a===1/0?0:a}return t?void 0:0};function tj(n){var{tooltipEntrySettings:e,dataKey:t,payload:r,value:i,name:a}=n;return bv(bv({},e),{},{dataKey:t,payload:r,value:i,name:a})}function Hq(n,e){if(n)return String(n);if(typeof e=="string")return e}var Kye=(n,e)=>{if(e==="horizontal")return n.chartX;if(e==="vertical")return n.chartY},Zye=(n,e)=>e==="centric"?n.angle:n.radius,Cd=n=>n.layout.width,Id=n=>n.layout.height,Qye=n=>n.layout.scale,Gq=n=>n.layout.margin,hC=Je(n=>n.cartesianAxis.xAxis,n=>Object.values(n)),pC=Je(n=>n.cartesianAxis.yAxis,n=>Object.values(n)),Jye="data-recharts-item-index",ebe="data-recharts-item-id",s1=60;function nj(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Zw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nj(Object(t),!0).forEach(function(r){tbe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):nj(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function tbe(n,e,t){return(e=nbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nbe(n){var e=rbe(n,"string");return typeof e=="symbol"?e:e+""}function rbe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var ibe=n=>n.brush.height;function abe(n){var e=pC(n);return e.reduce((t,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:s1;return t+i}return t},0)}function sbe(n){var e=pC(n);return e.reduce((t,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:s1;return t+i}return t},0)}function obe(n){var e=hC(n);return e.reduce((t,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?t+r.height:t,0)}function lbe(n){var e=hC(n);return e.reduce((t,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?t+r.height:t,0)}var us=Je([Cd,Id,Gq,ibe,abe,sbe,obe,lbe,uq,Lve],(n,e,t,r,i,a,s,o,c,f)=>{var d={left:(t.left||0)+i,right:(t.right||0)+a},p={top:(t.top||0)+s,bottom:(t.bottom||0)+o},v=Zw(Zw({},p),d),y=v.bottom;v.bottom+=r,v=Bye(v,c,f);var x=n-v.left-v.right,E=e-v.top-v.bottom;return Zw(Zw({brushBottom:y},v),{},{width:Math.max(x,0),height:Math.max(E,0)})}),cbe=Je(us,n=>({x:n.left,y:n.top,width:n.width,height:n.height})),qq=Je(Cd,Id,(n,e)=>({x:0,y:0,width:n,height:e})),ube=G.createContext(null),qo=()=>G.useContext(ube)!=null,mC=n=>n.brush,gC=Je([mC,us,Gq],(n,e,t)=>({height:n.height,x:en(n.x)?n.x:e.left,y:en(n.y)?n.y:e.top+e.height+e.brushBottom-((t==null?void 0:t.bottom)||0),width:en(n.width)?n.width:e.width})),FP={},zP={},jP={},rj;function fbe(){return rj||(rj=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,r,{signal:i,edges:a}={}){let s,o=null;const c=a!=null&&a.includes("leading"),f=a==null||a.includes("trailing"),d=()=>{o!==null&&(t.apply(s,o),s=void 0,o=null)},p=()=>{f&&d(),E()};let v=null;const y=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,p()},r)},x=()=>{v!==null&&(clearTimeout(v),v=null)},E=()=>{x(),s=void 0,o=null},S=()=>{d()},w=function(...R){if(i!=null&&i.aborted)return;s=this,o=R;const N=v==null;y(),c&&N&&d()};return w.schedule=y,w.cancel=E,w.flush=S,i==null||i.addEventListener("abort",E,{once:!0}),w}n.debounce=e})(jP)),jP}var ij;function dbe(){return ij||(ij=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=fbe();function t(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:c}=a,f=Array(2);s&&(f[0]="leading"),o&&(f[1]="trailing");let d,p=null;const v=e.debounce(function(...E){d=r.apply(this,E),p=null},i,{edges:f}),y=function(...E){return c!=null&&(p===null&&(p=Date.now()),Date.now()-p>=c)?(d=r.apply(this,E),p=Date.now(),v.cancel(),v.schedule(),d):(v.apply(this,E),d)},x=()=>(v.flush(),d);return y.cancel=v.cancel,y.flush=x,y}n.debounce=t})(zP)),zP}var aj;function hbe(){return aj||(aj=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=dbe();function t(r,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return e.debounce(r,i,{leading:s,maxWait:i,trailing:o})}n.throttle=t})(FP)),FP}var BP,sj;function pbe(){return sj||(sj=1,BP=hbe().throttle),BP}var mbe=pbe();const gbe=Kc(mbe);var lT=function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(t===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(t===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(t.replace(/%s/g,()=>i[s++]))}},$u={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},Wq=(n,e,t)=>{var{width:r=$u.width,height:i=$u.height,aspect:a,maxHeight:s}=t,o=yg(r)?n:Number(r),c=yg(i)?e:Number(i);return a&&a>0&&(o?c=o/a:c&&(o=c*a),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:o,calculatedHeight:c}},vbe={width:0,height:0,overflow:"visible"},ybe={width:0,overflowX:"visible"},bbe={height:0,overflowY:"visible"},xbe={},_be=n=>{var{width:e,height:t}=n,r=yg(e),i=yg(t);return r&&i?vbe:r?ybe:i?bbe:xbe};function Sbe(n){var{width:e,height:t,aspect:r}=n,i=e,a=t;return i===void 0&&a===void 0?(i=$u.width,a=$u.height):i===void 0?i=r&&r>0?void 0:$u.width:a===void 0&&(a=r&&r>0?void 0:$u.height),{width:i,height:a}}function DO(){return DO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},DO.apply(null,arguments)}function oj(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function lj(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oj(Object(t),!0).forEach(function(r){wbe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):oj(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function wbe(n,e,t){return(e=Ebe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ebe(n){var e=Abe(n,"string");return typeof e=="symbol"?e:e+""}function Abe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var $q=G.createContext($u.initialDimension);function Tbe(n){return df(n.width)&&df(n.height)}function Xq(n){var{children:e,width:t,height:r}=n,i=G.useMemo(()=>({width:t,height:r}),[t,r]);return Tbe(i)?G.createElement($q.Provider,{value:i},e):null}var DL=()=>G.useContext($q),Mbe=G.forwardRef((n,e)=>{var{aspect:t,initialDimension:r=$u.initialDimension,width:i,height:a,minWidth:s=$u.minWidth,minHeight:o,maxHeight:c,children:f,debounce:d=$u.debounce,id:p,className:v,onResize:y,style:x={}}=n,E=G.useRef(null),S=G.useRef();S.current=y,G.useImperativeHandle(e,()=>E.current);var[w,R]=G.useState({containerWidth:r.width,containerHeight:r.height}),N=G.useCallback((P,C)=>{R(L=>{var j=Math.round(P),B=Math.round(C);return L.containerWidth===j&&L.containerHeight===B?L:{containerWidth:j,containerHeight:B}})},[]);G.useEffect(()=>{if(E.current==null||typeof ResizeObserver>"u")return gy;var P=B=>{var V,Q=B[0];if(Q!=null){var{width:J,height:W}=Q.contentRect;N(J,W),(V=S.current)===null||V===void 0||V.call(S,J,W)}};d>0&&(P=gbe(P,d,{trailing:!0,leading:!1}));var C=new ResizeObserver(P),{width:L,height:j}=E.current.getBoundingClientRect();return N(L,j),C.observe(E.current),()=>{C.disconnect()}},[N,d]);var{containerWidth:O,containerHeight:z}=w;lT(!t||t>0,"The aspect(%s) must be greater than zero.",t);var{calculatedWidth:k,calculatedHeight:U}=Wq(O,z,{width:i,height:a,aspect:t,maxHeight:c});return lT(k!=null&&k>0||U!=null&&U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,k,U,i,a,s,o,t),G.createElement("div",{id:p?"".concat(p):void 0,className:ni("recharts-responsive-container",v),style:lj(lj({},x),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:c}),ref:E},G.createElement("div",{style:_be({width:i,height:a})},G.createElement(Xq,{width:k,height:U},f)))}),Cbe=G.forwardRef((n,e)=>{var t=DL();if(df(t.width)&&df(t.height))return n.children;var{width:r,height:i}=Sbe({width:n.width,height:n.height,aspect:n.aspect}),{calculatedWidth:a,calculatedHeight:s}=Wq(void 0,void 0,{width:r,height:i,aspect:n.aspect,maxHeight:n.maxHeight});return en(a)&&en(s)?G.createElement(Xq,{width:a,height:s},n.children):G.createElement(Mbe,DO({},n,{width:r,height:i,ref:e}))});function LL(n){if(n)return{x:n.x,y:n.y,upperWidth:"upperWidth"in n?n.upperWidth:n.width,lowerWidth:"lowerWidth"in n?n.lowerWidth:n.width,width:n.width,height:n.height}}var vC=()=>{var n,e=qo(),t=un(cbe),r=un(gC),i=(n=un(mC))===null||n===void 0?void 0:n.padding;return!e||!r||!i?t:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},Ibe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Yq=()=>{var n;return(n=un(us))!==null&&n!==void 0?n:Ibe},Kq=()=>un(Cd),Zq=()=>un(Id),fi=n=>n.layout.layoutType,vy=()=>un(fi),kL=()=>{var n=vy();if(n==="horizontal"||n==="vertical")return n},Qq=n=>{var e=n.layout.layoutType;if(e==="centric"||e==="radial")return e},Rbe=()=>{var n=vy();return n!==void 0},o1=n=>{var e=Da(),t=qo(),{width:r,height:i}=n,a=DL(),s=r,o=i;return a&&(s=a.width>0?a.width:r,o=a.height>0?a.height:i),G.useEffect(()=>{!t&&df(s)&&df(o)&&e(Lye({width:s,height:o}))},[e,t,s,o]),null},Jq=Symbol.for("immer-nothing"),cj=Symbol.for("immer-draftable"),vl=Symbol.for("immer-state");function Fc(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var S_=Object.getPrototypeOf;function ey(n){return!!n&&!!n[vl]}function xg(n){var e;return n?eW(n)||Array.isArray(n)||!!n[cj]||!!((e=n.constructor)!=null&&e[cj])||l1(n)||bC(n):!1}var Pbe=Object.prototype.constructor.toString(),uj=new WeakMap;function eW(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);if(e===null||e===Object.prototype)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(t===Object)return!0;if(typeof t!="function")return!1;let r=uj.get(t);return r===void 0&&(r=Function.toString.call(t),uj.set(t,r)),r===Pbe}function cT(n,e,t=!0){yC(n)===0?(t?Reflect.ownKeys(n):Object.keys(n)).forEach(i=>{e(i,n[i],n)}):n.forEach((r,i)=>e(i,r,n))}function yC(n){const e=n[vl];return e?e.type_:Array.isArray(n)?1:l1(n)?2:bC(n)?3:0}function LO(n,e){return yC(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function tW(n,e,t){const r=yC(n);r===2?n.set(e,t):r===3?n.add(t):n[e]=t}function Nbe(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function l1(n){return n instanceof Map}function bC(n){return n instanceof Set}function Nm(n){return n.copy_||n.base_}function kO(n,e){if(l1(n))return new Map(n);if(bC(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=eW(n);if(e===!0||e==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(n);delete r[vl];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[s]})}return Object.create(S_(n),r)}else{const r=S_(n);if(r!==null&&t)return{...n};const i=Object.create(r);return Object.assign(i,n)}}function UL(n,e=!1){return xC(n)||ey(n)||!xg(n)||(yC(n)>1&&Object.defineProperties(n,{set:Qw,add:Qw,clear:Qw,delete:Qw}),Object.freeze(n),e&&Object.values(n).forEach(t=>UL(t,!0))),n}function Obe(){Fc(2)}var Qw={value:Obe};function xC(n){return n===null||typeof n!="object"?!0:Object.isFrozen(n)}var Dbe={};function _g(n){const e=Dbe[n];return e||Fc(0,n),e}var w_;function nW(){return w_}function Lbe(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function fj(n,e){e&&(_g("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function UO(n){FO(n),n.drafts_.forEach(kbe),n.drafts_=null}function FO(n){n===w_&&(w_=n.parent_)}function dj(n){return w_=Lbe(w_,n)}function kbe(n){const e=n[vl];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function hj(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[vl].modified_&&(UO(e),Fc(4)),xg(n)&&(n=uT(e,n),e.parent_||fT(e,n)),e.patches_&&_g("Patches").generateReplacementPatches_(t[vl].base_,n,e.patches_,e.inversePatches_)):n=uT(e,t,[]),UO(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==Jq?n:void 0}function uT(n,e,t){if(xC(e))return e;const r=n.immer_.shouldUseStrictIteration(),i=e[vl];if(!i)return cT(e,(a,s)=>pj(n,i,e,a,s,t),r),e;if(i.scope_!==n)return e;if(!i.modified_)return fT(n,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),cT(s,(c,f)=>pj(n,i,a,c,f,t,o),r),fT(n,a,!1),t&&n.patches_&&_g("Patches").generatePatches_(i,t,n.patches_,n.inversePatches_)}return i.copy_}function pj(n,e,t,r,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=xC(i);if(!(o&&!s)){if(ey(i)){const c=a&&e&&e.type_!==3&&!LO(e.assigned_,r)?a.concat(r):void 0,f=uT(n,i,c);if(tW(t,r,f),ey(f))n.canAutoFreeze_=!1;else return}else s&&t.add(i);if(xg(i)&&!o){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;uT(n,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(l1(t)?t.has(r):Object.prototype.propertyIsEnumerable.call(t,r))&&fT(n,i)}}}function fT(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&UL(e,t)}function Ube(n,e){const t=Array.isArray(n),r={type_:t?1:0,scope_:e?e.scope_:nW(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=FL;t&&(i=[r],a=E_);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,o}var FL={get(n,e){if(e===vl)return n;const t=Nm(n);if(!LO(t,e))return Fbe(n,t,e);const r=t[e];return n.finalized_||!xg(r)?r:r===VP(n.base_,e)?(HP(n),n.copy_[e]=jO(r,n)):r},has(n,e){return e in Nm(n)},ownKeys(n){return Reflect.ownKeys(Nm(n))},set(n,e,t){const r=rW(Nm(n),e);if(r!=null&&r.set)return r.set.call(n.draft_,t),!0;if(!n.modified_){const i=VP(Nm(n),e),a=i==null?void 0:i[vl];if(a&&a.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(Nbe(t,i)&&(t!==void 0||LO(n.base_,e)))return!0;HP(n),zO(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return VP(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,HP(n),zO(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Nm(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty(){Fc(11)},getPrototypeOf(n){return S_(n.base_)},setPrototypeOf(){Fc(12)}},E_={};cT(FL,(n,e)=>{E_[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});E_.deleteProperty=function(n,e){return E_.set.call(this,n,e,void 0)};E_.set=function(n,e,t){return FL.set.call(this,n[0],e,t,n[0])};function VP(n,e){const t=n[vl];return(t?Nm(t):n)[e]}function Fbe(n,e,t){var i;const r=rW(e,t);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(n.draft_):void 0}function rW(n,e){if(!(e in n))return;let t=S_(n);for(;t;){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=S_(t)}}function zO(n){n.modified_||(n.modified_=!0,n.parent_&&zO(n.parent_))}function HP(n){n.copy_||(n.copy_=kO(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var zbe=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){const a=t;t=e;const s=this;return function(c=a,...f){return s.produce(c,d=>t.call(this,d,...f))}}typeof t!="function"&&Fc(6),r!==void 0&&typeof r!="function"&&Fc(7);let i;if(xg(e)){const a=dj(this),s=jO(e,void 0);let o=!0;try{i=t(s),o=!1}finally{o?UO(a):FO(a)}return fj(a,r),hj(i,a)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===Jq&&(i=void 0),this.autoFreeze_&&UL(i,!0),r){const a=[],s=[];_g("Patches").generateReplacementPatches_(e,i,a,s),r(a,s)}return i}else Fc(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,c=>e(c,...o));let r,i;return[this.produce(e,t,(s,o)=>{r=s,i=o}),r,i]},typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof(n==null?void 0:n.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),typeof(n==null?void 0:n.useStrictIteration)=="boolean"&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){xg(n)||Fc(8),ey(n)&&(n=jbe(n));const e=dj(this),t=jO(n,void 0);return t[vl].isManual_=!0,FO(e),t}finishDraft(n,e){const t=n&&n[vl];(!t||!t.isManual_)&&Fc(9);const{scope_:r}=t;return fj(r,e),hj(void 0,r)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}t>-1&&(e=e.slice(t+1));const r=_g("Patches").applyPatches_;return ey(n)?r(n,e):this.produce(n,i=>r(i,e))}};function jO(n,e){const t=l1(n)?_g("MapSet").proxyMap_(n,e):bC(n)?_g("MapSet").proxySet_(n,e):Ube(n,e);return(e?e.scope_:nW()).drafts_.push(t),t}function jbe(n){return ey(n)||Fc(10,n),iW(n)}function iW(n){if(!xg(n)||xC(n))return n;const e=n[vl];let t,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=kO(n,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else t=kO(n,!0);return cT(t,(i,a)=>{tW(t,i,iW(a))},r),e&&(e.finalized_=!1),t}var Bbe=new zbe;Bbe.produce;var Vbe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},aW=Go({name:"legend",initialState:Vbe,reducers:{setLegendSize(n,e){n.size.width=e.payload.width,n.size.height=e.payload.height},setLegendSettings(n,e){n.settings.align=e.payload.align,n.settings.layout=e.payload.layout,n.settings.verticalAlign=e.payload.verticalAlign,n.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(n,e){n.payload.push(e.payload)},prepare:ci()},replaceLegendPayload:{reducer(n,e){var{prev:t,next:r}=e.payload,i=Wc(n).payload.indexOf(t);i>-1&&(n.payload[i]=r)},prepare:ci()},removeLegendPayload:{reducer(n,e){var t=Wc(n).payload.indexOf(e.payload);t>-1&&n.payload.splice(t,1)},prepare:ci()}}}),{setLegendSize:UOe,setLegendSettings:FOe,addLegendPayload:Hbe,replaceLegendPayload:Gbe,removeLegendPayload:qbe}=aW.actions,Wbe=aW.reducer;function BO(){return BO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},BO.apply(null,arguments)}function mj(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ax(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?mj(Object(t),!0).forEach(function(r){$be(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):mj(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function $be(n,e,t){return(e=Xbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Xbe(n){var e=Ybe(n,"string");return typeof e=="symbol"?e:e+""}function Ybe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Kbe(n){return Array.isArray(n)&&ff(n[0])&&ff(n[1])?n.join(" ~ "):n}var av={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},Zbe=n=>{var{separator:e=av.separator,contentStyle:t,itemStyle:r,labelStyle:i=av.labelStyle,payload:a,formatter:s,itemSorter:o,wrapperClassName:c,labelClassName:f,label:d,labelFormatter:p,accessibilityLayer:v=av.accessibilityLayer}=n,y=()=>{if(a&&a.length){var z={padding:0,margin:0},k=(o?rC(a,o):a).map((U,P)=>{if(U.type==="none")return null;var C=U.formatter||s||Kbe,{value:L,name:j}=U,B=L,V=j;if(C){var Q=C(L,j,U,P,a);if(Array.isArray(Q))[B,V]=Q;else if(Q!=null)B=Q;else return null}var J=ax(ax({},av.itemStyle),{},{color:U.color||av.itemStyle.color},r);return G.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:J},ff(V)?G.createElement("span",{className:"recharts-tooltip-item-name"},V):null,ff(V)?G.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,G.createElement("span",{className:"recharts-tooltip-item-value"},B),G.createElement("span",{className:"recharts-tooltip-item-unit"},U.unit||""))});return G.createElement("ul",{className:"recharts-tooltip-item-list",style:z},k)}return null},x=ax(ax({},av.contentStyle),t),E=ax({margin:0},i),S=!Us(d),w=S?d:"",R=ni("recharts-default-tooltip",c),N=ni("recharts-tooltip-label",f);S&&p&&a!==void 0&&a!==null&&(w=p(d,a));var O=v?{role:"status","aria-live":"assertive"}:{};return G.createElement("div",BO({className:R,style:x},O),G.createElement("p",{className:N,style:E},G.isValidElement(w)?w:"".concat(w)),y())},sx="recharts-tooltip-wrapper",Qbe={visibility:"hidden"};function Jbe(n){var{coordinate:e,translateX:t,translateY:r}=n;return ni(sx,{["".concat(sx,"-right")]:en(t)&&e&&en(e.x)&&t>=e.x,["".concat(sx,"-left")]:en(t)&&e&&en(e.x)&&t<e.x,["".concat(sx,"-bottom")]:en(r)&&e&&en(e.y)&&r>=e.y,["".concat(sx,"-top")]:en(r)&&e&&en(e.y)&&r<e.y})}function gj(n){var{allowEscapeViewBox:e,coordinate:t,key:r,offset:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:c,viewBoxDimension:f}=n;if(a&&en(a[r]))return a[r];var d=t[r]-o-(i>0?i:0),p=t[r]+i;if(e[r])return s[r]?d:p;var v=c[r];if(v==null)return 0;if(s[r]){var y=d,x=v;return y<x?Math.max(p,v):Math.max(d,v)}if(f==null)return 0;var E=p+o,S=v+f;return E>S?Math.max(d,v):Math.max(p,v)}function exe(n){var{translateX:e,translateY:t,useTranslate3d:r}=n;return{transform:r?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function txe(n){var{allowEscapeViewBox:e,coordinate:t,offsetTop:r,offsetLeft:i,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:c,viewBox:f}=n,d,p,v;return o.height>0&&o.width>0&&t?(p=gj({allowEscapeViewBox:e,coordinate:t,key:"x",offset:i,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:f,viewBoxDimension:f.width}),v=gj({allowEscapeViewBox:e,coordinate:t,key:"y",offset:r,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:f,viewBoxDimension:f.height}),d=exe({translateX:p,translateY:v,useTranslate3d:c})):d=Qbe,{cssProperties:d,cssClasses:Jbe({translateX:p,translateY:v,coordinate:t})}}function vj(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Jw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vj(Object(t),!0).forEach(function(r){VO(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vj(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function VO(n,e,t){return(e=nxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nxe(n){var e=rxe(n,"string");return typeof e=="symbol"?e:e+""}function rxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class ixe extends G.PureComponent{constructor(){super(...arguments),VO(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),VO(this,"handleKeyDown",e=>{if(e.key==="Escape"){var t,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(t=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&t!==void 0?t:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((t=this.props.coordinate)===null||t===void 0?void 0:t.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:t,animationDuration:r,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:c,offset:f,position:d,reverseDirection:p,useTranslate3d:v,viewBox:y,wrapperStyle:x,lastBoundingBox:E,innerRef:S,hasPortalFromProps:w}=this.props,R=typeof f=="number"?f:f.x,N=typeof f=="number"?f:f.y,{cssClasses:O,cssProperties:z}=txe({allowEscapeViewBox:t,coordinate:s,offsetLeft:R,offsetTop:N,position:d,reverseDirection:p,tooltipBox:{height:E.height,width:E.width},useTranslate3d:v,viewBox:y}),k=w?{}:Jw(Jw({transition:c&&e?"transform ".concat(r,"ms ").concat(i):void 0},z),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),U=Jw(Jw({},k),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},x);return G.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:O,style:U,ref:S},a)}}var sW=()=>{var n;return(n=un(e=>e.rootProps.accessibilityLayer))!==null&&n!==void 0?n:!0};function HO(){return HO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},HO.apply(null,arguments)}function yj(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function bj(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yj(Object(t),!0).forEach(function(r){axe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yj(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function axe(n,e,t){return(e=sxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sxe(n){var e=oxe(n,"string");return typeof e=="symbol"?e:e+""}function oxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var xj={curveBasisClosed:_0e,curveBasisOpen:S0e,curveBasis:x0e,curveBumpX:y0e,curveBumpY:b0e,curveLinearClosed:w0e,curveLinear:eC,curveMonotoneX:E0e,curveMonotoneY:A0e,curveNatural:T0e,curveStep:M0e,curveStepAfter:I0e,curveStepBefore:C0e},dT=n=>nr(n.x)&&nr(n.y),_j=n=>n.base!=null&&dT(n.base)&&dT(n),ox=n=>n.x,lx=n=>n.y,lxe=(n,e)=>{if(typeof n=="function")return n;var t="curve".concat(wL(n));if((t==="curveMonotone"||t==="curveBump")&&e){var r=xj["".concat(t).concat(e==="vertical"?"Y":"X")];if(r)return r}return xj[t]||eC},Sj={connectNulls:!1,type:"linear"},cxe=n=>{var{type:e=Sj.type,points:t=[],baseLine:r,layout:i,connectNulls:a=Sj.connectNulls}=n,s=lxe(e,i),o=a?t.filter(dT):t;if(Array.isArray(r)){var c,f=t.map((x,E)=>bj(bj({},x),{},{base:r[E]}));i==="vertical"?c=qw().y(lx).x1(ox).x0(x=>x.base.x):c=qw().x(ox).y1(lx).y0(x=>x.base.y);var d=c.defined(_j).curve(s),p=a?f.filter(_j):f;return d(p)}var v;i==="vertical"&&en(r)?v=qw().y(lx).x1(ox).x0(r):en(r)?v=qw().x(ox).y1(lx).y0(r):v=jG().x(ox).y(lx);var y=v.defined(dT).curve(s);return y(o)},EE=n=>{var{className:e,points:t,path:r,pathRef:i}=n,a=vy();if((!t||!t.length)&&!r)return null;var s={type:n.type,points:n.points,baseLine:n.baseLine,layout:n.layout||a,connectNulls:n.connectNulls},o=t&&t.length?cxe(s):r;return G.createElement("path",HO({},Xc(n),EL(n),{className:ni("recharts-curve",e),d:o===null?void 0:o,ref:i}))},uxe=["x","y","top","left","width","height","className"];function GO(){return GO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},GO.apply(null,arguments)}function wj(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function fxe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wj(Object(t),!0).forEach(function(r){dxe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):wj(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function dxe(n,e,t){return(e=hxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function hxe(n){var e=pxe(n,"string");return typeof e=="symbol"?e:e+""}function pxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function mxe(n,e){if(n==null)return{};var t,r,i=gxe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function gxe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var vxe=(n,e,t,r,i,a)=>"M".concat(n,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(t),yxe=n=>{var{x:e=0,y:t=0,top:r=0,left:i=0,width:a=0,height:s=0,className:o}=n,c=mxe(n,uxe),f=fxe({x:e,y:t,top:r,left:i,width:a,height:s},c);return!en(e)||!en(t)||!en(a)||!en(s)||!en(r)||!en(i)?null:G.createElement("path",GO({},rc(f),{className:ni("recharts-cross",o),d:vxe(e,t,a,s,r,i)}))};function bxe(n,e,t,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:n==="horizontal"?e.x-i:t.left+.5,y:n==="horizontal"?t.top+.5:e.y-i,width:n==="horizontal"?r:t.width-1,height:n==="horizontal"?t.height-1:r}}function Ej(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Aj(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ej(Object(t),!0).forEach(function(r){xxe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ej(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function xxe(n,e,t){return(e=_xe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _xe(n){var e=Sxe(n,"string");return typeof e=="symbol"?e:e+""}function Sxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var wxe=n=>n.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Exe=(n,e,t)=>n.map(r=>"".concat(wxe(r)," ").concat(e,"ms ").concat(t)).join(","),Axe=(n,e)=>[Object.keys(n),Object.keys(e)].reduce((t,r)=>t.filter(i=>r.includes(i))),A_=(n,e)=>Object.keys(e).reduce((t,r)=>Aj(Aj({},t),{},{[r]:n(r,e[r])}),{});function Tj(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ga(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Tj(Object(t),!0).forEach(function(r){Txe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Tj(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Txe(n,e,t){return(e=Mxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Mxe(n){var e=Cxe(n,"string");return typeof e=="symbol"?e:e+""}function Cxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var hT=(n,e,t)=>n+(e-n)*t,qO=n=>{var{from:e,to:t}=n;return e!==t},oW=(n,e,t)=>{var r=A_((i,a)=>{if(qO(a)){var[s,o]=n(a.from,a.to,a.velocity);return ga(ga({},a),{},{from:s,velocity:o})}return a},e);return t<1?A_((i,a)=>qO(a)&&r[i]!=null?ga(ga({},a),{},{velocity:hT(a.velocity,r[i].velocity,t),from:hT(a.from,r[i].from,t)}):a,e):oW(n,r,t-1)};function Ixe(n,e,t,r,i,a){var s,o=r.reduce((v,y)=>ga(ga({},v),{},{[y]:{from:n[y],velocity:0,to:e[y]}}),{}),c=()=>A_((v,y)=>y.from,o),f=()=>!Object.values(o).filter(qO).length,d=null,p=v=>{s||(s=v);var y=v-s,x=y/t.dt;o=oW(t,o,x),i(ga(ga(ga({},n),e),c())),s=v,f()||(d=a.setTimeout(p))};return()=>(d=a.setTimeout(p),()=>{var v;(v=d)===null||v===void 0||v()})}function Rxe(n,e,t,r,i,a,s){var o=null,c=i.reduce((p,v)=>{var y=n[v],x=e[v];return y==null||x==null?p:ga(ga({},p),{},{[v]:[y,x]})},{}),f,d=p=>{f||(f=p);var v=(p-f)/r,y=A_((E,S)=>hT(...S,t(v)),c);if(a(ga(ga(ga({},n),e),y)),v<1)o=s.setTimeout(d);else{var x=A_((E,S)=>hT(...S,t(1)),c);a(ga(ga(ga({},n),e),x))}};return()=>(o=s.setTimeout(d),()=>{var p;(p=o)===null||p===void 0||p()})}const Pxe=(n,e,t,r,i,a)=>{var s=Axe(n,e);return t==null?()=>(i(ga(ga({},n),e)),()=>{}):t.isStepper===!0?Ixe(n,e,t,s,i,a):Rxe(n,e,t,r,s,i,a)};var pT=1e-4,lW=(n,e)=>[0,3*n,3*e-6*n,3*n-3*e+1],cW=(n,e)=>n.map((t,r)=>t*e**r).reduce((t,r)=>t+r),Mj=(n,e)=>t=>{var r=lW(n,e);return cW(r,t)},Nxe=(n,e)=>t=>{var r=lW(n,e),i=[...r.map((a,s)=>a*s).slice(1),0];return cW(i,t)},Oxe=n=>{var e,t=n.split("(");if(t.length!==2||t[0]!=="cubic-bezier")return null;var r=(e=t[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},Dxe=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length===1)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=Oxe(t[0]);if(i)return i}}return t.length===4?t:[0,0,1,1]},Lxe=(n,e,t,r)=>{var i=Mj(n,t),a=Mj(e,r),s=Nxe(n,t),o=f=>f>1?1:f<0?0:f,c=f=>{for(var d=f>1?1:f,p=d,v=0;v<8;++v){var y=i(p)-d,x=s(p);if(Math.abs(y-d)<pT||x<pT)return a(p);p=o(p-y/x)}return a(p)};return c.isStepper=!1,c},Cj=function(){return Lxe(...Dxe(...arguments))},kxe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:t=100,damping:r=8,dt:i=17}=e,a=(s,o,c)=>{var f=-(s-o)*t,d=c*r,p=c+(f-d)*i/1e3,v=c*i/1e3+s;return Math.abs(v-o)<pT&&Math.abs(p)<pT?[o,0]:[v,p]};return a.isStepper=!0,a.dt=i,a},Uxe=n=>{if(typeof n=="string")switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Cj(n);case"spring":return kxe();default:if(n.split("(")[0]==="cubic-bezier")return Cj(n)}return typeof n=="function"?n:null};function Fxe(n){var e,t=()=>null,r=!1,i=null,a=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,[c,...f]=o;if(typeof c=="number"){i=n.setTimeout(a.bind(null,f),c);return}a(c),i=n.setTimeout(a.bind(null,f));return}typeof s=="string"&&(e=s,t(e)),typeof s=="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),a(s)},subscribe:s=>(t=s,()=>{t=()=>null}),getTimeoutController:()=>n}}class zxe{setTimeout(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=s=>{s-r>=t?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function jxe(){return Fxe(new zxe)}var Bxe=G.createContext(jxe);function Vxe(n,e){var t=G.useContext(Bxe);return G.useMemo(()=>e??t(n),[n,e,t])}var Hxe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),c1={isSsr:Hxe()},Gxe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Ij={t:0},GP={t:1};function uW(n){var e=yl(n,Gxe),{isActive:t,canBegin:r,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:c,children:f}=e,d=t==="auto"?!c1.isSsr:t,p=Vxe(e.animationId,e.animationManager),[v,y]=G.useState(d?Ij:GP),x=G.useRef(null);return G.useEffect(()=>{d||y(GP)},[d]),G.useEffect(()=>{if(!d||!r)return gy;var E=Pxe(Ij,GP,Uxe(a),i,y,p.getTimeoutController()),S=()=>{x.current=E()};return p.start([c,s,S,i,o]),()=>{p.stop(),x.current&&x.current(),o()}},[d,r,i,a,s,c,o,p]),f(v.t)}function fW(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",t=G.useRef(y_(e)),r=G.useRef(n);return r.current!==n&&(t.current=y_(e),r.current=n),t.current}var qxe=["radius"],Wxe=["radius"],Rj,Pj,Nj,Oj,Dj,Lj,kj,Uj,Fj,zj;function jj(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Bj(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jj(Object(t),!0).forEach(function(r){$xe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):jj(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function $xe(n,e,t){return(e=Xxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Xxe(n){var e=Yxe(n,"string");return typeof e=="symbol"?e:e+""}function Yxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function mT(){return mT=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},mT.apply(null,arguments)}function Vj(n,e){if(n==null)return{};var t,r,i=Kxe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function Kxe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function Lu(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var Hj=(n,e,t,r,i)=>{var a=Qh(t),s=Qh(r),o=Math.min(Math.abs(a)/2,Math.abs(s)/2),c=s>=0?1:-1,f=a>=0?1:-1,d=s>=0&&a>=0||s<0&&a<0?1:0,p;if(o>0&&Array.isArray(i)){for(var v=[0,0,0,0],y=0,x=4;y<x;y++){var E,S=(E=i[y])!==null&&E!==void 0?E:0;v[y]=S>o?o:S}p=ts(Rj||(Rj=Lu(["M",",",""])),n,e+c*v[0]),v[0]>0&&(p+=ts(Pj||(Pj=Lu(["A ",",",",0,0,",",",",",""])),v[0],v[0],d,n+f*v[0],e)),p+=ts(Nj||(Nj=Lu(["L ",",",""])),n+t-f*v[1],e),v[1]>0&&(p+=ts(Oj||(Oj=Lu(["A ",",",",0,0,",`,
        `,",",""])),v[1],v[1],d,n+t,e+c*v[1])),p+=ts(Dj||(Dj=Lu(["L ",",",""])),n+t,e+r-c*v[2]),v[2]>0&&(p+=ts(Lj||(Lj=Lu(["A ",",",",0,0,",`,
        `,",",""])),v[2],v[2],d,n+t-f*v[2],e+r)),p+=ts(kj||(kj=Lu(["L ",",",""])),n+f*v[3],e+r),v[3]>0&&(p+=ts(Uj||(Uj=Lu(["A ",",",",0,0,",`,
        `,",",""])),v[3],v[3],d,n,e+r-c*v[3])),p+="Z"}else if(o>0&&i===+i&&i>0){var w=Math.min(o,i);p=ts(Fj||(Fj=Lu(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),n,e+c*w,w,w,d,n+f*w,e,n+t-f*w,e,w,w,d,n+t,e+c*w,n+t,e+r-c*w,w,w,d,n+t-f*w,e+r,n+f*w,e+r,w,w,d,n,e+r-c*w)}else p=ts(zj||(zj=Lu(["M ",","," h "," v "," h "," Z"])),n,e,t,r,-t);return p},Gj={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Zxe=n=>{var e=yl(n,Gj),t=G.useRef(null),[r,i]=G.useState(-1);G.useEffect(()=>{if(t.current&&t.current.getTotalLength)try{var $=t.current.getTotalLength();$&&i($)}catch{}},[]);var{x:a,y:s,width:o,height:c,radius:f,className:d}=e,{animationEasing:p,animationDuration:v,animationBegin:y,isAnimationActive:x,isUpdateAnimationActive:E}=e,S=G.useRef(o),w=G.useRef(c),R=G.useRef(a),N=G.useRef(s),O=G.useMemo(()=>({x:a,y:s,width:o,height:c,radius:f}),[a,s,o,c,f]),z=fW(O,"rectangle-");if(a!==+a||s!==+s||o!==+o||c!==+c||o===0||c===0)return null;var k=ni("recharts-rectangle",d);if(!E){var U=rc(e),{radius:P}=U,C=Vj(U,qxe);return G.createElement("path",mT({},C,{x:Qh(a),y:Qh(s),width:Qh(o),height:Qh(c),radius:typeof f=="number"?f:void 0,className:k,d:Hj(a,s,o,c,f)}))}var L=S.current,j=w.current,B=R.current,V=N.current,Q="0px ".concat(r===-1?1:r,"px"),J="".concat(r,"px 0px"),W=Exe(["strokeDasharray"],v,typeof p=="string"?p:Gj.animationEasing);return G.createElement(uW,{animationId:z,key:z,canBegin:r>0,duration:v,easing:p,isActive:E,begin:y},$=>{var se=zu(L,o,$),ce=zu(j,c,$),fe=zu(B,a,$),Z=zu(V,s,$);t.current&&(S.current=se,w.current=ce,R.current=fe,N.current=Z);var re;x?$>0?re={transition:W,strokeDasharray:J}:re={strokeDasharray:Q}:re={strokeDasharray:J};var de=rc(e),{radius:ve}=de,pe=Vj(de,Wxe);return G.createElement("path",mT({},pe,{radius:typeof f=="number"?f:void 0,className:k,d:Hj(fe,Z,se,ce,f),ref:t,style:Bj(Bj({},re),e.style)}))})};function qj(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Wj(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qj(Object(t),!0).forEach(function(r){Qxe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):qj(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Qxe(n,e,t){return(e=Jxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Jxe(n){var e=e_e(n,"string");return typeof e=="symbol"?e:e+""}function e_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var gT=Math.PI/180,t_e=n=>n*180/Math.PI,ss=(n,e,t,r)=>({x:n+Math.cos(-gT*r)*t,y:e+Math.sin(-gT*r)*t}),n_e=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},r_e=(n,e)=>{var{x:t,y:r}=n,{x:i,y:a}=e;return Math.sqrt((t-i)**2+(r-a)**2)},i_e=(n,e)=>{var{x:t,y:r}=n,{cx:i,cy:a}=e,s=r_e({x:t,y:r},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(t-i)/s,c=Math.acos(o);return r>a&&(c=2*Math.PI-c),{radius:s,angle:t_e(c),angleInRadian:c}},a_e=n=>{var{startAngle:e,endAngle:t}=n,r=Math.floor(e/360),i=Math.floor(t/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:t-a*360}},s_e=(n,e)=>{var{startAngle:t,endAngle:r}=e,i=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(i,a);return n+s*360},o_e=(n,e)=>{var{chartX:t,chartY:r}=n,{radius:i,angle:a}=i_e({x:t,y:r},e),{innerRadius:s,outerRadius:o}=e;if(i<s||i>o||i===0)return null;var{startAngle:c,endAngle:f}=a_e(e),d=a,p;if(c<=f){for(;d>f;)d-=360;for(;d<c;)d+=360;p=d>=c&&d<=f}else{for(;d>c;)d-=360;for(;d<f;)d+=360;p=d>=f&&d<=c}return p?Wj(Wj({},e),{},{radius:i,angle:s_e(d,e)}):null};function dW(n){var{cx:e,cy:t,radius:r,startAngle:i,endAngle:a}=n,s=ss(e,t,r,i),o=ss(e,t,r,a);return{points:[s,o],cx:e,cy:t,radius:r,startAngle:i,endAngle:a}}var $j,Xj,Yj,Kj,Zj,Qj,Jj;function WO(){return WO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},WO.apply(null,arguments)}function Gm(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var l_e=(n,e)=>{var t=Zl(e-n),r=Math.min(Math.abs(e-n),359.999);return t*r},eE=n=>{var{cx:e,cy:t,radius:r,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:c}=n,f=o*(s?1:-1)+r,d=Math.asin(o/f)/gT,p=c?i:i+a*d,v=ss(e,t,f,p),y=ss(e,t,r,p),x=c?i-a*d:i,E=ss(e,t,f*Math.cos(d*gT),x);return{center:v,circleTangency:y,lineTangency:E,theta:d}},hW=n=>{var{cx:e,cy:t,innerRadius:r,outerRadius:i,startAngle:a,endAngle:s}=n,o=l_e(a,s),c=a+o,f=ss(e,t,i,a),d=ss(e,t,i,c),p=ts($j||($j=Gm(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),f.x,f.y,i,i,+(Math.abs(o)>180),+(a>c),d.x,d.y);if(r>0){var v=ss(e,t,r,a),y=ss(e,t,r,c);p+=ts(Xj||(Xj=Gm(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),y.x,y.y,r,r,+(Math.abs(o)>180),+(a<=c),v.x,v.y)}else p+=ts(Yj||(Yj=Gm(["L ",","," Z"])),e,t);return p},c_e=n=>{var{cx:e,cy:t,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:c,endAngle:f}=n,d=Zl(f-c),{circleTangency:p,lineTangency:v,theta:y}=eE({cx:e,cy:t,radius:i,angle:c,sign:d,cornerRadius:a,cornerIsExternal:o}),{circleTangency:x,lineTangency:E,theta:S}=eE({cx:e,cy:t,radius:i,angle:f,sign:-d,cornerRadius:a,cornerIsExternal:o}),w=o?Math.abs(c-f):Math.abs(c-f)-y-S;if(w<0)return s?ts(Kj||(Kj=Gm(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),v.x,v.y,a,a,a*2,a,a,-a*2):hW({cx:e,cy:t,innerRadius:r,outerRadius:i,startAngle:c,endAngle:f});var R=ts(Zj||(Zj=Gm(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),v.x,v.y,a,a,+(d<0),p.x,p.y,i,i,+(w>180),+(d<0),x.x,x.y,a,a,+(d<0),E.x,E.y);if(r>0){var{circleTangency:N,lineTangency:O,theta:z}=eE({cx:e,cy:t,radius:r,angle:c,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:k,lineTangency:U,theta:P}=eE({cx:e,cy:t,radius:r,angle:f,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),C=o?Math.abs(c-f):Math.abs(c-f)-z-P;if(C<0&&a===0)return"".concat(R,"L").concat(e,",").concat(t,"Z");R+=ts(Qj||(Qj=Gm(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),U.x,U.y,a,a,+(d<0),k.x,k.y,r,r,+(C>180),+(d>0),N.x,N.y,a,a,+(d<0),O.x,O.y)}else R+=ts(Jj||(Jj=Gm(["L",",","Z"])),e,t);return R},u_e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},f_e=n=>{var e=yl(n,u_e),{cx:t,cy:r,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:c,startAngle:f,endAngle:d,className:p}=e;if(a<i||f===d)return null;var v=ni("recharts-sector",p),y=a-i,x=yp(s,y,0,!0),E;return x>0&&Math.abs(f-d)<360?E=c_e({cx:t,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(x,y/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:f,endAngle:d}):E=hW({cx:t,cy:r,innerRadius:i,outerRadius:a,startAngle:f,endAngle:d}),G.createElement("path",WO({},rc(e),{className:v,d:E}))};function d_e(n,e,t){if(n==="horizontal")return[{x:e.x,y:t.top},{x:e.x,y:t.top+t.height}];if(n==="vertical")return[{x:t.left,y:e.y},{x:t.left+t.width,y:e.y}];if(QG(e)){if(n==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:s,angle:o}=e,c=ss(r,i,a,o),f=ss(r,i,s,o);return[{x:c.x,y:c.y},{x:f.x,y:f.y}]}return dW(e)}}var qP={},WP={},$P={},eB;function h_e(){return eB||(eB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=lq();function t(r){return e.isSymbol(r)?NaN:Number(r)}n.toNumber=t})($P)),$P}var tB;function p_e(){return tB||(tB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=h_e();function t(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}n.toFinite=t})(WP)),WP}var nB;function m_e(){return nB||(nB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=cq(),t=p_e();function r(i,a,s){s&&typeof s!="number"&&e.isIterateeCall(i,a,s)&&(a=s=void 0),i=t.toFinite(i),a===void 0?(a=i,i=0):a=t.toFinite(a),s=s===void 0?i<a?1:-1:t.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),c=new Array(o);for(let f=0;f<o;f++)c[f]=i,i+=s;return c}n.range=r})(qP)),qP}var XP,rB;function g_e(){return rB||(rB=1,XP=m_e().range),XP}var v_e=g_e();const pW=Kc(v_e);function ip(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function y_e(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function zL(n){let e,t,r;n.length!==2?(e=ip,t=(o,c)=>ip(n(o),c),r=(o,c)=>n(o)-c):(e=n===ip||n===y_e?n:b_e,t=n,r=n);function i(o,c,f=0,d=o.length){if(f<d){if(e(c,c)!==0)return d;do{const p=f+d>>>1;t(o[p],c)<0?f=p+1:d=p}while(f<d)}return f}function a(o,c,f=0,d=o.length){if(f<d){if(e(c,c)!==0)return d;do{const p=f+d>>>1;t(o[p],c)<=0?f=p+1:d=p}while(f<d)}return f}function s(o,c,f=0,d=o.length){const p=i(o,c,f,d-1);return p>f&&r(o[p-1],c)>-r(o[p],c)?p-1:p}return{left:i,center:s,right:a}}function b_e(){return 0}function mW(n){return n===null?NaN:+n}function*x_e(n,e){for(let t of n)t!=null&&(t=+t)>=t&&(yield t)}const __e=zL(ip),u1=__e.right;zL(mW).center;class iB extends Map{constructor(e,t=E_e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(aB(this,e))}has(e){return super.has(aB(this,e))}set(e,t){return super.set(S_e(this,e),t)}delete(e){return super.delete(w_e(this,e))}}function aB({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function S_e({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function w_e({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function E_e(n){return n!==null&&typeof n=="object"?n.valueOf():n}function A_e(n=ip){if(n===ip)return gW;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const r=n(e,t);return r||r===0?r:(n(t,t)===0)-(n(e,e)===0)}}function gW(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0)}const T_e=Math.sqrt(50),M_e=Math.sqrt(10),C_e=Math.sqrt(2);function vT(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=T_e?10:a>=M_e?5:a>=C_e?2:1;let o,c,f;return i<0?(f=Math.pow(10,-i)/s,o=Math.round(n*f),c=Math.round(e*f),o/f<n&&++o,c/f>e&&--c,f=-f):(f=Math.pow(10,i)*s,o=Math.round(n/f),c=Math.round(e/f),o*f<n&&++o,c*f>e&&--c),c<o&&.5<=t&&t<2?vT(n,e,t*2):[o,c,f]}function $O(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const r=e<n,[i,a,s]=r?vT(e,n,t):vT(n,e,t);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let f=0;f<o;++f)c[f]=(a-f)/-s;else for(let f=0;f<o;++f)c[f]=(a-f)*s;else if(s<0)for(let f=0;f<o;++f)c[f]=(i+f)/-s;else for(let f=0;f<o;++f)c[f]=(i+f)*s;return c}function XO(n,e,t){return e=+e,n=+n,t=+t,vT(n,e,t)[2]}function YO(n,e,t){e=+e,n=+n,t=+t;const r=e<n,i=r?XO(e,n,t):XO(n,e,t);return(r?-1:1)*(i<0?1/-i:i)}function sB(n,e){let t;for(const r of n)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);return t}function oB(n,e){let t;for(const r of n)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);return t}function vW(n,e,t=0,r=1/0,i){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),r=Math.floor(Math.min(n.length-1,r)),!(t<=e&&e<=r))return n;for(i=i===void 0?gW:A_e(i);r>t;){if(r-t>600){const c=r-t+1,f=e-t+1,d=Math.log(c),p=.5*Math.exp(2*d/3),v=.5*Math.sqrt(d*p*(c-p)/c)*(f-c/2<0?-1:1),y=Math.max(t,Math.floor(e-f*p/c+v)),x=Math.min(r,Math.floor(e+(c-f)*p/c+v));vW(n,e,y,x,i)}const a=n[e];let s=t,o=r;for(cx(n,t,e),i(n[r],a)>0&&cx(n,t,r);s<o;){for(cx(n,s,o),++s,--o;i(n[s],a)<0;)++s;for(;i(n[o],a)>0;)--o}i(n[t],a)===0?cx(n,t,o):(++o,cx(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}return n}function cx(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function I_e(n,e,t){if(n=Float64Array.from(x_e(n)),!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return oB(n);if(e>=1)return sB(n);var r,i=(r-1)*e,a=Math.floor(i),s=sB(vW(n,a).subarray(0,a+1)),o=oB(n.subarray(a+1));return s+(o-s)*(i-a)}}function R_e(n,e,t=mW){if(!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return+t(n[0],0,n);if(e>=1)return+t(n[r-1],r-1,n);var r,i=(r-1)*e,a=Math.floor(i),s=+t(n[a],a,n),o=+t(n[a+1],a+1,n);return s+(o-s)*(i-a)}}function P_e(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,a=new Array(i);++r<i;)a[r]=n+r*t;return a}function oc(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function Rd(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const KO=Symbol("implicit");function jL(){var n=new iB,e=[],t=[],r=KO;function i(a){let s=n.get(a);if(s===void 0){if(r!==KO)return r;n.set(a,s=e.push(a)-1)}return t[s%t.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],n=new iB;for(const s of a)n.has(s)||n.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(t=Array.from(a),i):t.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return jL(e,t).unknown(r)},oc.apply(i,arguments),i}function BL(){var n=jL().unknown(void 0),e=n.domain,t=n.range,r=0,i=1,a,s,o=!1,c=0,f=0,d=.5;delete n.unknown;function p(){var v=e().length,y=i<r,x=y?i:r,E=y?r:i;a=(E-x)/Math.max(1,v-c+f*2),o&&(a=Math.floor(a)),x+=(E-x-a*(v-c))*d,s=a*(1-c),o&&(x=Math.round(x),s=Math.round(s));var S=P_e(v).map(function(w){return x+a*w});return t(y?S.reverse():S)}return n.domain=function(v){return arguments.length?(e(v),p()):e()},n.range=function(v){return arguments.length?([r,i]=v,r=+r,i=+i,p()):[r,i]},n.rangeRound=function(v){return[r,i]=v,r=+r,i=+i,o=!0,p()},n.bandwidth=function(){return s},n.step=function(){return a},n.round=function(v){return arguments.length?(o=!!v,p()):o},n.padding=function(v){return arguments.length?(c=Math.min(1,f=+v),p()):c},n.paddingInner=function(v){return arguments.length?(c=Math.min(1,v),p()):c},n.paddingOuter=function(v){return arguments.length?(f=+v,p()):f},n.align=function(v){return arguments.length?(d=Math.max(0,Math.min(1,v)),p()):d},n.copy=function(){return BL(e(),[r,i]).round(o).paddingInner(c).paddingOuter(f).align(d)},oc.apply(p(),arguments)}function yW(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return yW(e())},n}function N_e(){return yW(BL.apply(null,arguments).paddingInner(1))}function VL(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function bW(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function f1(){}var T_=.7,yT=1/T_,Pv="\\s*([+-]?\\d+)\\s*",M_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",O_e=/^#([0-9a-f]{3,8})$/,D_e=new RegExp(`^rgb\\(${Pv},${Pv},${Pv}\\)$`),L_e=new RegExp(`^rgb\\(${tf},${tf},${tf}\\)$`),k_e=new RegExp(`^rgba\\(${Pv},${Pv},${Pv},${M_}\\)$`),U_e=new RegExp(`^rgba\\(${tf},${tf},${tf},${M_}\\)$`),F_e=new RegExp(`^hsl\\(${M_},${tf},${tf}\\)$`),z_e=new RegExp(`^hsla\\(${M_},${tf},${tf},${M_}\\)$`),lB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};VL(f1,C_,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:cB,formatHex:cB,formatHex8:j_e,formatHsl:B_e,formatRgb:uB,toString:uB});function cB(){return this.rgb().formatHex()}function j_e(){return this.rgb().formatHex8()}function B_e(){return xW(this).formatHsl()}function uB(){return this.rgb().formatRgb()}function C_(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=O_e.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?fB(e):t===3?new Ho(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?tE(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?tE(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=D_e.exec(n))?new Ho(e[1],e[2],e[3],1):(e=L_e.exec(n))?new Ho(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=k_e.exec(n))?tE(e[1],e[2],e[3],e[4]):(e=U_e.exec(n))?tE(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=F_e.exec(n))?pB(e[1],e[2]/100,e[3]/100,1):(e=z_e.exec(n))?pB(e[1],e[2]/100,e[3]/100,e[4]):lB.hasOwnProperty(n)?fB(lB[n]):n==="transparent"?new Ho(NaN,NaN,NaN,0):null}function fB(n){return new Ho(n>>16&255,n>>8&255,n&255,1)}function tE(n,e,t,r){return r<=0&&(n=e=t=NaN),new Ho(n,e,t,r)}function V_e(n){return n instanceof f1||(n=C_(n)),n?(n=n.rgb(),new Ho(n.r,n.g,n.b,n.opacity)):new Ho}function ZO(n,e,t,r){return arguments.length===1?V_e(n):new Ho(n,e,t,r??1)}function Ho(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}VL(Ho,ZO,bW(f1,{brighter(n){return n=n==null?yT:Math.pow(yT,n),new Ho(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?T_:Math.pow(T_,n),new Ho(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Ho(rg(this.r),rg(this.g),rg(this.b),bT(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:dB,formatHex:dB,formatHex8:H_e,formatRgb:hB,toString:hB}));function dB(){return`#${qm(this.r)}${qm(this.g)}${qm(this.b)}`}function H_e(){return`#${qm(this.r)}${qm(this.g)}${qm(this.b)}${qm((isNaN(this.opacity)?1:this.opacity)*255)}`}function hB(){const n=bT(this.opacity);return`${n===1?"rgb(":"rgba("}${rg(this.r)}, ${rg(this.g)}, ${rg(this.b)}${n===1?")":`, ${n})`}`}function bT(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function rg(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function qm(n){return n=rg(n),(n<16?"0":"")+n.toString(16)}function pB(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new zc(n,e,t,r)}function xW(n){if(n instanceof zc)return new zc(n.h,n.s,n.l,n.opacity);if(n instanceof f1||(n=C_(n)),!n)return new zc;if(n instanceof zc)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),a=Math.max(e,t,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(t-r)/o+(t<r)*6:t===a?s=(r-e)/o+2:s=(e-t)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new zc(s,o,c,n.opacity)}function G_e(n,e,t,r){return arguments.length===1?xW(n):new zc(n,e,t,r??1)}function zc(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}VL(zc,G_e,bW(f1,{brighter(n){return n=n==null?yT:Math.pow(yT,n),new zc(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?T_:Math.pow(T_,n),new zc(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Ho(YP(n>=240?n-240:n+120,i,r),YP(n,i,r),YP(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new zc(mB(this.h),nE(this.s),nE(this.l),bT(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=bT(this.opacity);return`${n===1?"hsl(":"hsla("}${mB(this.h)}, ${nE(this.s)*100}%, ${nE(this.l)*100}%${n===1?")":`, ${n})`}`}}));function mB(n){return n=(n||0)%360,n<0?n+360:n}function nE(n){return Math.max(0,Math.min(1,n||0))}function YP(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const HL=n=>()=>n;function q_e(n,e){return function(t){return n+t*e}}function W_e(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function $_e(n){return(n=+n)==1?_W:function(e,t){return t-e?W_e(e,t,n):HL(isNaN(e)?t:e)}}function _W(n,e){var t=e-n;return t?q_e(n,t):HL(isNaN(n)?e:n)}const gB=(function n(e){var t=$_e(e);function r(i,a){var s=t((i=ZO(i)).r,(a=ZO(a)).r),o=t(i.g,a.g),c=t(i.b,a.b),f=_W(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=o(d),i.b=c(d),i.opacity=f(d),i+""}}return r.gamma=n,r})(1);function X_e(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(a){for(i=0;i<t;++i)r[i]=n[i]*(1-a)+e[i]*a;return r}}function Y_e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function K_e(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),a=new Array(t),s;for(s=0;s<r;++s)i[s]=yy(n[s],e[s]);for(;s<t;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function Z_e(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function xT(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function Q_e(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=yy(n[i],e[i]):r[i]=e[i];return function(a){for(i in t)r[i]=t[i](a);return r}}var QO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,KP=new RegExp(QO.source,"g");function J_e(n){return function(){return n}}function e1e(n){return function(e){return n(e)+""}}function t1e(n,e){var t=QO.lastIndex=KP.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(n=n+"",e=e+"";(r=QO.exec(n))&&(i=KP.exec(e));)(a=i.index)>t&&(a=e.slice(t,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:xT(r,i)})),t=KP.lastIndex;return t<e.length&&(a=e.slice(t),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?e1e(c[0].x):J_e(e):(e=c.length,function(f){for(var d=0,p;d<e;++d)o[(p=c[d]).i]=p.x(f);return o.join("")})}function yy(n,e){var t=typeof e,r;return e==null||t==="boolean"?HL(e):(t==="number"?xT:t==="string"?(r=C_(e))?(e=r,gB):t1e:e instanceof C_?gB:e instanceof Date?Z_e:Y_e(e)?X_e:Array.isArray(e)?K_e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Q_e:xT)(n,e)}function GL(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function n1e(n,e){e===void 0&&(e=n,n=yy);for(var t=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);t<r;)a[t]=n(i,i=e[++t]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function r1e(n){return function(){return n}}function _T(n){return+n}var vB=[0,1];function ao(n){return n}function JO(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:r1e(isNaN(e)?NaN:.5)}function i1e(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function a1e(n,e,t){var r=n[0],i=n[1],a=e[0],s=e[1];return i<r?(r=JO(i,r),a=t(s,a)):(r=JO(r,i),a=t(a,s)),function(o){return a(r(o))}}function s1e(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=JO(n[s],n[s+1]),a[s]=t(e[s],e[s+1]);return function(o){var c=u1(n,o,1,r)-1;return a[c](i[c](o))}}function d1(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function _C(){var n=vB,e=vB,t=yy,r,i,a,s=ao,o,c,f;function d(){var v=Math.min(n.length,e.length);return s!==ao&&(s=i1e(n[0],n[v-1])),o=v>2?s1e:a1e,c=f=null,p}function p(v){return v==null||isNaN(v=+v)?a:(c||(c=o(n.map(r),e,t)))(r(s(v)))}return p.invert=function(v){return s(i((f||(f=o(e,n.map(r),xT)))(v)))},p.domain=function(v){return arguments.length?(n=Array.from(v,_T),d()):n.slice()},p.range=function(v){return arguments.length?(e=Array.from(v),d()):e.slice()},p.rangeRound=function(v){return e=Array.from(v),t=GL,d()},p.clamp=function(v){return arguments.length?(s=v?!0:ao,d()):s!==ao},p.interpolate=function(v){return arguments.length?(t=v,d()):t},p.unknown=function(v){return arguments.length?(a=v,p):a},function(v,y){return r=v,i=y,d()}}function qL(){return _C()(ao,ao)}function o1e(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function ST(n,e){if(!isFinite(n)||n===0)return null;var t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"),r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function ty(n){return n=ST(Math.abs(n)),n?n[1]:NaN}function l1e(n,e){return function(t,r){for(var i=t.length,a=[],s=0,o=n[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(t.substring(i-=o,i+o)),!((c+=o+1)>r));)o=n[s=(s+1)%n.length];return a.reverse().join(e)}}function c1e(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var u1e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function I_(n){if(!(e=u1e.exec(n)))throw new Error("invalid format: "+n);var e;return new WL({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}I_.prototype=WL.prototype;function WL(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}WL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function f1e(n){e:for(var e=n.length,t=1,r=-1,i;t<e;++t)switch(n[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+n[t])break e;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var wT;function d1e(n,e){var t=ST(n,e);if(!t)return wT=void 0,n.toPrecision(e);var r=t[0],i=t[1],a=i-(wT=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+ST(n,Math.max(0,e+a-1))[0]}function yB(n,e){var t=ST(n,e);if(!t)return n+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const bB={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:o1e,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>yB(n*100,e),r:yB,s:d1e,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function xB(n){return n}var _B=Array.prototype.map,SB=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function h1e(n){var e=n.grouping===void 0||n.thousands===void 0?xB:l1e(_B.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",a=n.numerals===void 0?xB:c1e(_B.call(n.numerals,String)),s=n.percent===void 0?"%":n.percent+"",o=n.minus===void 0?"":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function f(p,v){p=I_(p);var y=p.fill,x=p.align,E=p.sign,S=p.symbol,w=p.zero,R=p.width,N=p.comma,O=p.precision,z=p.trim,k=p.type;k==="n"?(N=!0,k="g"):bB[k]||(O===void 0&&(O=12),z=!0,k="g"),(w||y==="0"&&x==="=")&&(w=!0,y="0",x="=");var U=(v&&v.prefix!==void 0?v.prefix:"")+(S==="$"?t:S==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():""),P=(S==="$"?r:/[%p]/.test(k)?s:"")+(v&&v.suffix!==void 0?v.suffix:""),C=bB[k],L=/[defgprs%]/.test(k);O=O===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function j(B){var V=U,Q=P,J,W,$;if(k==="c")Q=C(B)+Q,B="";else{B=+B;var se=B<0||1/B<0;if(B=isNaN(B)?c:C(Math.abs(B),O),z&&(B=f1e(B)),se&&+B==0&&E!=="+"&&(se=!1),V=(se?E==="("?E:o:E==="-"||E==="("?"":E)+V,Q=(k==="s"&&!isNaN(B)&&wT!==void 0?SB[8+wT/3]:"")+Q+(se&&E==="("?")":""),L){for(J=-1,W=B.length;++J<W;)if($=B.charCodeAt(J),48>$||$>57){Q=($===46?i+B.slice(J+1):B.slice(J))+Q,B=B.slice(0,J);break}}}N&&!w&&(B=e(B,1/0));var ce=V.length+B.length+Q.length,fe=ce<R?new Array(R-ce+1).join(y):"";switch(N&&w&&(B=e(fe+B,fe.length?R-Q.length:1/0),fe=""),x){case"<":B=V+B+Q+fe;break;case"=":B=V+fe+B+Q;break;case"^":B=fe.slice(0,ce=fe.length>>1)+V+B+Q+fe.slice(ce);break;default:B=fe+V+B+Q;break}return a(B)}return j.toString=function(){return p+""},j}function d(p,v){var y=Math.max(-8,Math.min(8,Math.floor(ty(v)/3)))*3,x=Math.pow(10,-y),E=f((p=I_(p),p.type="f",p),{suffix:SB[8+y/3]});return function(S){return E(x*S)}}return{format:f,formatPrefix:d}}var rE,$L,SW;p1e({thousands:",",grouping:[3],currency:["$",""]});function p1e(n){return rE=h1e(n),$L=rE.format,SW=rE.formatPrefix,rE}function m1e(n){return Math.max(0,-ty(Math.abs(n)))}function g1e(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ty(e)/3)))*3-ty(Math.abs(n)))}function v1e(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,ty(e)-ty(n))+1}function wW(n,e,t,r){var i=YO(n,e,t),a;switch(r=I_(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(a=g1e(i,s))&&(r.precision=a),SW(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=v1e(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=m1e(i))&&(r.precision=a-(r.type==="%")*2);break}}return $L(r)}function Mp(n){var e=n.domain;return n.ticks=function(t){var r=e();return $O(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return wW(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,f,d=10;for(o<s&&(f=s,s=o,o=f,f=i,i=a,a=f);d-- >0;){if(f=XO(s,o,t),f===c)return r[i]=s,r[a]=o,e(r);if(f>0)s=Math.floor(s/f)*f,o=Math.ceil(o/f)*f;else if(f<0)s=Math.ceil(s*f)/f,o=Math.floor(o*f)/f;else break;c=f}return n},n}function EW(){var n=qL();return n.copy=function(){return d1(n,EW())},oc.apply(n,arguments),Mp(n)}function AW(n){var e;function t(r){return r==null||isNaN(r=+r)?e:r}return t.invert=t,t.domain=t.range=function(r){return arguments.length?(n=Array.from(r,_T),t):n.slice()},t.unknown=function(r){return arguments.length?(e=r,t):e},t.copy=function(){return AW(n).unknown(e)},n=arguments.length?Array.from(n,_T):[0,1],Mp(t)}function TW(n,e){n=n.slice();var t=0,r=n.length-1,i=n[t],a=n[r],s;return a<i&&(s=t,t=r,r=s,s=i,i=a,a=s),n[t]=e.floor(i),n[r]=e.ceil(a),n}function wB(n){return Math.log(n)}function EB(n){return Math.exp(n)}function y1e(n){return-Math.log(-n)}function b1e(n){return-Math.exp(-n)}function x1e(n){return isFinite(n)?+("1e"+n):n<0?0:n}function _1e(n){return n===10?x1e:n===Math.E?Math.exp:e=>Math.pow(n,e)}function S1e(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function AB(n){return(e,t)=>-n(-e,t)}function XL(n){const e=n(wB,EB),t=e.domain;let r=10,i,a;function s(){return i=S1e(r),a=_1e(r),t()[0]<0?(i=AB(i),a=AB(a),n(y1e,b1e)):n(wB,EB),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(t(o),s()):t()},e.ticks=o=>{const c=t();let f=c[0],d=c[c.length-1];const p=d<f;p&&([f,d]=[d,f]);let v=i(f),y=i(d),x,E;const S=o==null?10:+o;let w=[];if(!(r%1)&&y-v<S){if(v=Math.floor(v),y=Math.ceil(y),f>0){for(;v<=y;++v)for(x=1;x<r;++x)if(E=v<0?x/a(-v):x*a(v),!(E<f)){if(E>d)break;w.push(E)}}else for(;v<=y;++v)for(x=r-1;x>=1;--x)if(E=v>0?x/a(-v):x*a(v),!(E<f)){if(E>d)break;w.push(E)}w.length*2<S&&(w=$O(f,d,S))}else w=$O(v,y,Math.min(y-v,S)).map(a);return p?w.reverse():w},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=I_(c)).precision==null&&(c.trim=!0),c=$L(c)),o===1/0)return c;const f=Math.max(1,r*o/e.ticks().length);return d=>{let p=d/a(Math.round(i(d)));return p*r<r-.5&&(p*=r),p<=f?c(d):""}},e.nice=()=>t(TW(t(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function MW(){const n=XL(_C()).domain([1,10]);return n.copy=()=>d1(n,MW()).base(n.base()),oc.apply(n,arguments),n}function TB(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function MB(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function YL(n){var e=1,t=n(TB(e),MB(e));return t.constant=function(r){return arguments.length?n(TB(e=+r),MB(e)):e},Mp(t)}function CW(){var n=YL(_C());return n.copy=function(){return d1(n,CW()).constant(n.constant())},oc.apply(n,arguments)}function CB(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function w1e(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function E1e(n){return n<0?-n*n:n*n}function KL(n){var e=n(ao,ao),t=1;function r(){return t===1?n(ao,ao):t===.5?n(w1e,E1e):n(CB(t),CB(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,r()):t},Mp(e)}function ZL(){var n=KL(_C());return n.copy=function(){return d1(n,ZL()).exponent(n.exponent())},oc.apply(n,arguments),n}function A1e(){return ZL.apply(null,arguments).exponent(.5)}function IB(n){return Math.sign(n)*n*n}function T1e(n){return Math.sign(n)*Math.sqrt(Math.abs(n))}function IW(){var n=qL(),e=[0,1],t=!1,r;function i(a){var s=T1e(n(a));return isNaN(s)?r:t?Math.round(s):s}return i.invert=function(a){return n.invert(IB(a))},i.domain=function(a){return arguments.length?(n.domain(a),i):n.domain()},i.range=function(a){return arguments.length?(n.range((e=Array.from(a,_T)).map(IB)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(t=!!a,i):t},i.clamp=function(a){return arguments.length?(n.clamp(a),i):n.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return IW(n.domain(),e).round(t).clamp(n.clamp()).unknown(r)},oc.apply(i,arguments),Mp(i)}function RW(){var n=[],e=[],t=[],r;function i(){var s=0,o=Math.max(1,e.length);for(t=new Array(o-1);++s<o;)t[s-1]=R_e(n,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[u1(t,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?t[o-1]:n[0],o<t.length?t[o]:n[n.length-1]]},a.domain=function(s){if(!arguments.length)return n.slice();n=[];for(let o of s)o!=null&&!isNaN(o=+o)&&n.push(o);return n.sort(ip),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return t.slice()},a.copy=function(){return RW().domain(n).range(e).unknown(r)},oc.apply(a,arguments)}function PW(){var n=0,e=1,t=1,r=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[u1(r,c,0,t)]:a}function o(){var c=-1;for(r=new Array(t);++c<t;)r[c]=((c+1)*e-(c-t)*n)/(t+1);return s}return s.domain=function(c){return arguments.length?([n,e]=c,n=+n,e=+e,o()):[n,e]},s.range=function(c){return arguments.length?(t=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var f=i.indexOf(c);return f<0?[NaN,NaN]:f<1?[n,r[0]]:f>=t?[r[t-1],e]:[r[f-1],r[f]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return PW().domain([n,e]).range(i).unknown(a)},oc.apply(Mp(s),arguments)}function NW(){var n=[.5],e=[0,1],t,r=1;function i(a){return a!=null&&a<=a?e[u1(n,a,0,r)]:t}return i.domain=function(a){return arguments.length?(n=Array.from(a),r=Math.min(n.length,e.length-1),i):n.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(n.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[n[s-1],n[s]]},i.unknown=function(a){return arguments.length?(t=a,i):t},i.copy=function(){return NW().domain(n).range(e).unknown(t)},oc.apply(i,arguments)}const ZP=new Date,QP=new Date;function xa(n,e,t,r){function i(a){return n(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(n(a=new Date(+a)),a),i.ceil=a=>(n(a=new Date(a-1)),e(a,1),n(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let f;do c.push(f=new Date(+a)),e(a,o),n(a);while(f<a&&a<s);return c},i.filter=a=>xa(s=>{if(s>=s)for(;n(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),t&&(i.count=(a,s)=>(ZP.setTime(+a),QP.setTime(+s),n(ZP),n(QP),Math.floor(t(ZP,QP))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const ET=xa(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);ET.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?xa(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):ET);ET.range;const ud=1e3,Ql=ud*60,fd=Ql*60,wd=fd*24,QL=wd*7,RB=wd*30,JP=wd*365,Wm=xa(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*ud)},(n,e)=>(e-n)/ud,n=>n.getUTCSeconds());Wm.range;const JL=xa(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*ud)},(n,e)=>{n.setTime(+n+e*Ql)},(n,e)=>(e-n)/Ql,n=>n.getMinutes());JL.range;const ek=xa(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*Ql)},(n,e)=>(e-n)/Ql,n=>n.getUTCMinutes());ek.range;const tk=xa(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*ud-n.getMinutes()*Ql)},(n,e)=>{n.setTime(+n+e*fd)},(n,e)=>(e-n)/fd,n=>n.getHours());tk.range;const nk=xa(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*fd)},(n,e)=>(e-n)/fd,n=>n.getUTCHours());nk.range;const h1=xa(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*Ql)/wd,n=>n.getDate()-1);h1.range;const SC=xa(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/wd,n=>n.getUTCDate()-1);SC.range;const OW=xa(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/wd,n=>Math.floor(n/wd));OW.range;function Lg(n){return xa(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ql)/QL)}const wC=Lg(0),AT=Lg(1),M1e=Lg(2),C1e=Lg(3),ny=Lg(4),I1e=Lg(5),R1e=Lg(6);wC.range;AT.range;M1e.range;C1e.range;ny.range;I1e.range;R1e.range;function kg(n){return xa(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/QL)}const EC=kg(0),TT=kg(1),P1e=kg(2),N1e=kg(3),ry=kg(4),O1e=kg(5),D1e=kg(6);EC.range;TT.range;P1e.range;N1e.range;ry.range;O1e.range;D1e.range;const rk=xa(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());rk.range;const ik=xa(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());ik.range;const Ed=xa(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());Ed.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:xa(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});Ed.range;const Ad=xa(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());Ad.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:xa(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});Ad.range;function DW(n,e,t,r,i,a){const s=[[Wm,1,ud],[Wm,5,5*ud],[Wm,15,15*ud],[Wm,30,30*ud],[a,1,Ql],[a,5,5*Ql],[a,15,15*Ql],[a,30,30*Ql],[i,1,fd],[i,3,3*fd],[i,6,6*fd],[i,12,12*fd],[r,1,wd],[r,2,2*wd],[t,1,QL],[e,1,RB],[e,3,3*RB],[n,1,JP]];function o(f,d,p){const v=d<f;v&&([f,d]=[d,f]);const y=p&&typeof p.range=="function"?p:c(f,d,p),x=y?y.range(f,+d+1):[];return v?x.reverse():x}function c(f,d,p){const v=Math.abs(d-f)/p,y=zL(([,,S])=>S).right(s,v);if(y===s.length)return n.every(YO(f/JP,d/JP,p));if(y===0)return ET.every(Math.max(YO(f,d,p),1));const[x,E]=s[v/s[y-1][2]<s[y][2]/v?y-1:y];return x.every(E)}return[o,c]}const[L1e,k1e]=DW(Ad,ik,EC,OW,nk,ek),[U1e,F1e]=DW(Ed,rk,wC,h1,tk,JL);function eN(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function tN(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function ux(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function z1e(n){var e=n.dateTime,t=n.date,r=n.time,i=n.periods,a=n.days,s=n.shortDays,o=n.months,c=n.shortMonths,f=fx(i),d=dx(i),p=fx(a),v=dx(a),y=fx(s),x=dx(s),E=fx(o),S=dx(o),w=fx(c),R=dx(c),N={a:$,A:se,b:ce,B:fe,c:null,d:kB,e:kB,f:lSe,g:ySe,G:xSe,H:aSe,I:sSe,j:oSe,L:LW,m:cSe,M:uSe,p:Z,q:re,Q:zB,s:jB,S:fSe,u:dSe,U:hSe,V:pSe,w:mSe,W:gSe,x:null,X:null,y:vSe,Y:bSe,Z:_Se,"%":FB},O={a:de,A:ve,b:pe,B:ye,c:null,d:UB,e:UB,f:ASe,g:LSe,G:USe,H:SSe,I:wSe,j:ESe,L:UW,m:TSe,M:MSe,p:Ee,q:Xe,Q:zB,s:jB,S:CSe,u:ISe,U:RSe,V:PSe,w:NSe,W:OSe,x:null,X:null,y:DSe,Y:kSe,Z:FSe,"%":FB},z={a:L,A:j,b:B,B:V,c:Q,d:DB,e:DB,f:tSe,g:OB,G:NB,H:LB,I:LB,j:Z1e,L:eSe,m:K1e,M:Q1e,p:C,q:Y1e,Q:rSe,s:iSe,S:J1e,u:G1e,U:q1e,V:W1e,w:H1e,W:$1e,x:J,X:W,y:OB,Y:NB,Z:X1e,"%":nSe};N.x=k(t,N),N.X=k(r,N),N.c=k(e,N),O.x=k(t,O),O.X=k(r,O),O.c=k(e,O);function k(me,qe){return function(mt){var Ue=[],De=-1,Re=0,Me=me.length,Fe,Ze,oe;for(mt instanceof Date||(mt=new Date(+mt));++De<Me;)me.charCodeAt(De)===37&&(Ue.push(me.slice(Re,De)),(Ze=PB[Fe=me.charAt(++De)])!=null?Fe=me.charAt(++De):Ze=Fe==="e"?" ":"0",(oe=qe[Fe])&&(Fe=oe(mt,Ze)),Ue.push(Fe),Re=De+1);return Ue.push(me.slice(Re,De)),Ue.join("")}}function U(me,qe){return function(mt){var Ue=ux(1900,void 0,1),De=P(Ue,me,mt+="",0),Re,Me;if(De!=mt.length)return null;if("Q"in Ue)return new Date(Ue.Q);if("s"in Ue)return new Date(Ue.s*1e3+("L"in Ue?Ue.L:0));if(qe&&!("Z"in Ue)&&(Ue.Z=0),"p"in Ue&&(Ue.H=Ue.H%12+Ue.p*12),Ue.m===void 0&&(Ue.m="q"in Ue?Ue.q:0),"V"in Ue){if(Ue.V<1||Ue.V>53)return null;"w"in Ue||(Ue.w=1),"Z"in Ue?(Re=tN(ux(Ue.y,0,1)),Me=Re.getUTCDay(),Re=Me>4||Me===0?TT.ceil(Re):TT(Re),Re=SC.offset(Re,(Ue.V-1)*7),Ue.y=Re.getUTCFullYear(),Ue.m=Re.getUTCMonth(),Ue.d=Re.getUTCDate()+(Ue.w+6)%7):(Re=eN(ux(Ue.y,0,1)),Me=Re.getDay(),Re=Me>4||Me===0?AT.ceil(Re):AT(Re),Re=h1.offset(Re,(Ue.V-1)*7),Ue.y=Re.getFullYear(),Ue.m=Re.getMonth(),Ue.d=Re.getDate()+(Ue.w+6)%7)}else("W"in Ue||"U"in Ue)&&("w"in Ue||(Ue.w="u"in Ue?Ue.u%7:"W"in Ue?1:0),Me="Z"in Ue?tN(ux(Ue.y,0,1)).getUTCDay():eN(ux(Ue.y,0,1)).getDay(),Ue.m=0,Ue.d="W"in Ue?(Ue.w+6)%7+Ue.W*7-(Me+5)%7:Ue.w+Ue.U*7-(Me+6)%7);return"Z"in Ue?(Ue.H+=Ue.Z/100|0,Ue.M+=Ue.Z%100,tN(Ue)):eN(Ue)}}function P(me,qe,mt,Ue){for(var De=0,Re=qe.length,Me=mt.length,Fe,Ze;De<Re;){if(Ue>=Me)return-1;if(Fe=qe.charCodeAt(De++),Fe===37){if(Fe=qe.charAt(De++),Ze=z[Fe in PB?qe.charAt(De++):Fe],!Ze||(Ue=Ze(me,mt,Ue))<0)return-1}else if(Fe!=mt.charCodeAt(Ue++))return-1}return Ue}function C(me,qe,mt){var Ue=f.exec(qe.slice(mt));return Ue?(me.p=d.get(Ue[0].toLowerCase()),mt+Ue[0].length):-1}function L(me,qe,mt){var Ue=y.exec(qe.slice(mt));return Ue?(me.w=x.get(Ue[0].toLowerCase()),mt+Ue[0].length):-1}function j(me,qe,mt){var Ue=p.exec(qe.slice(mt));return Ue?(me.w=v.get(Ue[0].toLowerCase()),mt+Ue[0].length):-1}function B(me,qe,mt){var Ue=w.exec(qe.slice(mt));return Ue?(me.m=R.get(Ue[0].toLowerCase()),mt+Ue[0].length):-1}function V(me,qe,mt){var Ue=E.exec(qe.slice(mt));return Ue?(me.m=S.get(Ue[0].toLowerCase()),mt+Ue[0].length):-1}function Q(me,qe,mt){return P(me,e,qe,mt)}function J(me,qe,mt){return P(me,t,qe,mt)}function W(me,qe,mt){return P(me,r,qe,mt)}function $(me){return s[me.getDay()]}function se(me){return a[me.getDay()]}function ce(me){return c[me.getMonth()]}function fe(me){return o[me.getMonth()]}function Z(me){return i[+(me.getHours()>=12)]}function re(me){return 1+~~(me.getMonth()/3)}function de(me){return s[me.getUTCDay()]}function ve(me){return a[me.getUTCDay()]}function pe(me){return c[me.getUTCMonth()]}function ye(me){return o[me.getUTCMonth()]}function Ee(me){return i[+(me.getUTCHours()>=12)]}function Xe(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var qe=k(me+="",N);return qe.toString=function(){return me},qe},parse:function(me){var qe=U(me+="",!1);return qe.toString=function(){return me},qe},utcFormat:function(me){var qe=k(me+="",O);return qe.toString=function(){return me},qe},utcParse:function(me){var qe=U(me+="",!0);return qe.toString=function(){return me},qe}}}var PB={"-":"",_:" ",0:"0"},La=/^\s*\d+/,j1e=/^%/,B1e=/[\\^$*+?|[\]().{}]/g;function hr(n,e,t){var r=n<0?"-":"",i=(r?-n:n)+"",a=i.length;return r+(a<t?new Array(t-a+1).join(e)+i:i)}function V1e(n){return n.replace(B1e,"\\$&")}function fx(n){return new RegExp("^(?:"+n.map(V1e).join("|")+")","i")}function dx(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function H1e(n,e,t){var r=La.exec(e.slice(t,t+1));return r?(n.w=+r[0],t+r[0].length):-1}function G1e(n,e,t){var r=La.exec(e.slice(t,t+1));return r?(n.u=+r[0],t+r[0].length):-1}function q1e(n,e,t){var r=La.exec(e.slice(t,t+2));return r?(n.U=+r[0],t+r[0].length):-1}function W1e(n,e,t){var r=La.exec(e.slice(t,t+2));return r?(n.V=+r[0],t+r[0].length):-1}function $1e(n,e,t){var r=La.exec(e.slice(t,t+2));return r?(n.W=+r[0],t+r[0].length):-1}function NB(n,e,t){var r=La.exec(e.slice(t,t+4));return r?(n.y=+r[0],t+r[0].length):-1}function OB(n,e,t){var r=La.exec(e.slice(t,t+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function X1e(n,e,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function Y1e(n,e,t){var r=La.exec(e.slice(t,t+1));return r?(n.q=r[0]*3-3,t+r[0].length):-1}function K1e(n,e,t){var r=La.exec(e.slice(t,t+2));return r?(n.m=r[0]-1,t+r[0].length):-1}function DB(n,e,t){var r=La.exec(e.slice(t,t+2));return r?(n.d=+r[0],t+r[0].length):-1}function Z1e(n,e,t){var r=La.exec(e.slice(t,t+3));return r?(n.m=0,n.d=+r[0],t+r[0].length):-1}function LB(n,e,t){var r=La.exec(e.slice(t,t+2));return r?(n.H=+r[0],t+r[0].length):-1}function Q1e(n,e,t){var r=La.exec(e.slice(t,t+2));return r?(n.M=+r[0],t+r[0].length):-1}function J1e(n,e,t){var r=La.exec(e.slice(t,t+2));return r?(n.S=+r[0],t+r[0].length):-1}function eSe(n,e,t){var r=La.exec(e.slice(t,t+3));return r?(n.L=+r[0],t+r[0].length):-1}function tSe(n,e,t){var r=La.exec(e.slice(t,t+6));return r?(n.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function nSe(n,e,t){var r=j1e.exec(e.slice(t,t+1));return r?t+r[0].length:-1}function rSe(n,e,t){var r=La.exec(e.slice(t));return r?(n.Q=+r[0],t+r[0].length):-1}function iSe(n,e,t){var r=La.exec(e.slice(t));return r?(n.s=+r[0],t+r[0].length):-1}function kB(n,e){return hr(n.getDate(),e,2)}function aSe(n,e){return hr(n.getHours(),e,2)}function sSe(n,e){return hr(n.getHours()%12||12,e,2)}function oSe(n,e){return hr(1+h1.count(Ed(n),n),e,3)}function LW(n,e){return hr(n.getMilliseconds(),e,3)}function lSe(n,e){return LW(n,e)+"000"}function cSe(n,e){return hr(n.getMonth()+1,e,2)}function uSe(n,e){return hr(n.getMinutes(),e,2)}function fSe(n,e){return hr(n.getSeconds(),e,2)}function dSe(n){var e=n.getDay();return e===0?7:e}function hSe(n,e){return hr(wC.count(Ed(n)-1,n),e,2)}function kW(n){var e=n.getDay();return e>=4||e===0?ny(n):ny.ceil(n)}function pSe(n,e){return n=kW(n),hr(ny.count(Ed(n),n)+(Ed(n).getDay()===4),e,2)}function mSe(n){return n.getDay()}function gSe(n,e){return hr(AT.count(Ed(n)-1,n),e,2)}function vSe(n,e){return hr(n.getFullYear()%100,e,2)}function ySe(n,e){return n=kW(n),hr(n.getFullYear()%100,e,2)}function bSe(n,e){return hr(n.getFullYear()%1e4,e,4)}function xSe(n,e){var t=n.getDay();return n=t>=4||t===0?ny(n):ny.ceil(n),hr(n.getFullYear()%1e4,e,4)}function _Se(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+hr(e/60|0,"0",2)+hr(e%60,"0",2)}function UB(n,e){return hr(n.getUTCDate(),e,2)}function SSe(n,e){return hr(n.getUTCHours(),e,2)}function wSe(n,e){return hr(n.getUTCHours()%12||12,e,2)}function ESe(n,e){return hr(1+SC.count(Ad(n),n),e,3)}function UW(n,e){return hr(n.getUTCMilliseconds(),e,3)}function ASe(n,e){return UW(n,e)+"000"}function TSe(n,e){return hr(n.getUTCMonth()+1,e,2)}function MSe(n,e){return hr(n.getUTCMinutes(),e,2)}function CSe(n,e){return hr(n.getUTCSeconds(),e,2)}function ISe(n){var e=n.getUTCDay();return e===0?7:e}function RSe(n,e){return hr(EC.count(Ad(n)-1,n),e,2)}function FW(n){var e=n.getUTCDay();return e>=4||e===0?ry(n):ry.ceil(n)}function PSe(n,e){return n=FW(n),hr(ry.count(Ad(n),n)+(Ad(n).getUTCDay()===4),e,2)}function NSe(n){return n.getUTCDay()}function OSe(n,e){return hr(TT.count(Ad(n)-1,n),e,2)}function DSe(n,e){return hr(n.getUTCFullYear()%100,e,2)}function LSe(n,e){return n=FW(n),hr(n.getUTCFullYear()%100,e,2)}function kSe(n,e){return hr(n.getUTCFullYear()%1e4,e,4)}function USe(n,e){var t=n.getUTCDay();return n=t>=4||t===0?ry(n):ry.ceil(n),hr(n.getUTCFullYear()%1e4,e,4)}function FSe(){return"+0000"}function FB(){return"%"}function zB(n){return+n}function jB(n){return Math.floor(+n/1e3)}var sv,zW,jW;zSe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zSe(n){return sv=z1e(n),zW=sv.format,sv.parse,jW=sv.utcFormat,sv.utcParse,sv}function jSe(n){return new Date(n)}function BSe(n){return n instanceof Date?+n:+new Date(+n)}function ak(n,e,t,r,i,a,s,o,c,f){var d=qL(),p=d.invert,v=d.domain,y=f(".%L"),x=f(":%S"),E=f("%I:%M"),S=f("%I %p"),w=f("%a %d"),R=f("%b %d"),N=f("%B"),O=f("%Y");function z(k){return(c(k)<k?y:o(k)<k?x:s(k)<k?E:a(k)<k?S:r(k)<k?i(k)<k?w:R:t(k)<k?N:O)(k)}return d.invert=function(k){return new Date(p(k))},d.domain=function(k){return arguments.length?v(Array.from(k,BSe)):v().map(jSe)},d.ticks=function(k){var U=v();return n(U[0],U[U.length-1],k??10)},d.tickFormat=function(k,U){return U==null?z:f(U)},d.nice=function(k){var U=v();return(!k||typeof k.range!="function")&&(k=e(U[0],U[U.length-1],k??10)),k?v(TW(U,k)):d},d.copy=function(){return d1(d,ak(n,e,t,r,i,a,s,o,c,f))},d}function VSe(){return oc.apply(ak(U1e,F1e,Ed,rk,wC,h1,tk,JL,Wm,zW).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function HSe(){return oc.apply(ak(L1e,k1e,Ad,ik,EC,SC,nk,ek,Wm,jW).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function AC(){var n=0,e=1,t,r,i,a,s=ao,o=!1,c;function f(p){return p==null||isNaN(p=+p)?c:s(i===0?.5:(p=(a(p)-t)*i,o?Math.max(0,Math.min(1,p)):p))}f.domain=function(p){return arguments.length?([n,e]=p,t=a(n=+n),r=a(e=+e),i=t===r?0:1/(r-t),f):[n,e]},f.clamp=function(p){return arguments.length?(o=!!p,f):o},f.interpolator=function(p){return arguments.length?(s=p,f):s};function d(p){return function(v){var y,x;return arguments.length?([y,x]=v,s=p(y,x),f):[s(0),s(1)]}}return f.range=d(yy),f.rangeRound=d(GL),f.unknown=function(p){return arguments.length?(c=p,f):c},function(p){return a=p,t=p(n),r=p(e),i=t===r?0:1/(r-t),f}}function Cp(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function BW(){var n=Mp(AC()(ao));return n.copy=function(){return Cp(n,BW())},Rd.apply(n,arguments)}function VW(){var n=XL(AC()).domain([1,10]);return n.copy=function(){return Cp(n,VW()).base(n.base())},Rd.apply(n,arguments)}function HW(){var n=YL(AC());return n.copy=function(){return Cp(n,HW()).constant(n.constant())},Rd.apply(n,arguments)}function sk(){var n=KL(AC());return n.copy=function(){return Cp(n,sk()).exponent(n.exponent())},Rd.apply(n,arguments)}function GSe(){return sk.apply(null,arguments).exponent(.5)}function GW(){var n=[],e=ao;function t(r){if(r!=null&&!isNaN(r=+r))return e((u1(n,r,1)-1)/(n.length-1))}return t.domain=function(r){if(!arguments.length)return n.slice();n=[];for(let i of r)i!=null&&!isNaN(i=+i)&&n.push(i);return n.sort(ip),t},t.interpolator=function(r){return arguments.length?(e=r,t):e},t.range=function(){return n.map((r,i)=>e(i/(n.length-1)))},t.quantiles=function(r){return Array.from({length:r+1},(i,a)=>I_e(n,a/r))},t.copy=function(){return GW(e).domain(n)},Rd.apply(t,arguments)}function TC(){var n=0,e=.5,t=1,r=1,i,a,s,o,c,f=ao,d,p=!1,v;function y(E){return isNaN(E=+E)?v:(E=.5+((E=+d(E))-a)*(r*E<r*a?o:c),f(p?Math.max(0,Math.min(1,E)):E))}y.domain=function(E){return arguments.length?([n,e,t]=E,i=d(n=+n),a=d(e=+e),s=d(t=+t),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,y):[n,e,t]},y.clamp=function(E){return arguments.length?(p=!!E,y):p},y.interpolator=function(E){return arguments.length?(f=E,y):f};function x(E){return function(S){var w,R,N;return arguments.length?([w,R,N]=S,f=n1e(E,[w,R,N]),y):[f(0),f(.5),f(1)]}}return y.range=x(yy),y.rangeRound=x(GL),y.unknown=function(E){return arguments.length?(v=E,y):v},function(E){return d=E,i=E(n),a=E(e),s=E(t),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,y}}function qW(){var n=Mp(TC()(ao));return n.copy=function(){return Cp(n,qW())},Rd.apply(n,arguments)}function WW(){var n=XL(TC()).domain([.1,1,10]);return n.copy=function(){return Cp(n,WW()).base(n.base())},Rd.apply(n,arguments)}function $W(){var n=YL(TC());return n.copy=function(){return Cp(n,$W()).constant(n.constant())},Rd.apply(n,arguments)}function ok(){var n=KL(TC());return n.copy=function(){return Cp(n,ok()).exponent(n.exponent())},Rd.apply(n,arguments)}function qSe(){return ok.apply(null,arguments).exponent(.5)}const Sx=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:BL,scaleDiverging:qW,scaleDivergingLog:WW,scaleDivergingPow:ok,scaleDivergingSqrt:qSe,scaleDivergingSymlog:$W,scaleIdentity:AW,scaleImplicit:KO,scaleLinear:EW,scaleLog:MW,scaleOrdinal:jL,scalePoint:N_e,scalePow:ZL,scaleQuantile:RW,scaleQuantize:PW,scaleRadial:IW,scaleSequential:BW,scaleSequentialLog:VW,scaleSequentialPow:sk,scaleSequentialQuantile:GW,scaleSequentialSqrt:GSe,scaleSequentialSymlog:HW,scaleSqrt:A1e,scaleSymlog:CW,scaleThreshold:NW,scaleTime:VSe,scaleUtc:HSe,tickFormat:wW},Symbol.toStringTag,{value:"Module"}));var Pd=n=>n.chartData,XW=Je([Pd],n=>{var e=n.chartData!=null?n.chartData.length-1:0;return{chartData:n.chartData,computedData:n.computedData,dataEndIndex:e,dataStartIndex:0}}),YW=(n,e,t,r)=>r?XW(n):Pd(n),WSe=(n,e,t)=>t?XW(n):Pd(n);function Td(n){if(Array.isArray(n)&&n.length===2){var[e,t]=n;if(nr(e)&&nr(t))return!0}return!1}function BB(n,e,t){return t?n:[Math.min(n[0],e[0]),Math.max(n[1],e[1])]}function KW(n,e){if(e&&typeof n!="function"&&Array.isArray(n)&&n.length===2){var[t,r]=n,i,a;if(nr(t))i=t;else if(typeof t=="function")return;if(nr(r))a=r;else if(typeof r=="function")return;var s=[i,a];if(Td(s))return s}}function $Se(n,e,t){if(!(!t&&e==null)){if(typeof n=="function"&&e!=null)try{var r=n(e,t);if(Td(r))return BB(r,e,t)}catch{}if(Array.isArray(n)&&n.length===2){var[i,a]=n,s,o;if(i==="auto")e!=null&&(s=Math.min(...e));else if(en(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&J5.test(i)){var c=J5.exec(i);if(c==null||c[1]==null||e==null)s=void 0;else{var f=+c[1];s=e[0]-f}}else s=e==null?void 0:e[0];if(a==="auto")e!=null&&(o=Math.max(...e));else if(en(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e==null?void 0:e[1]))}catch{}else if(typeof a=="string"&&ej.test(a)){var d=ej.exec(a);if(d==null||d[1]==null||e==null)o=void 0;else{var p=+d[1];o=e[1]+p}}else o=e==null?void 0:e[1];var v=[s,o];if(Td(v))return e==null?v:BB(v,e,t)}}}var by=1e9,XSe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},ck,ui=!0,ac="[DecimalError] ",ig=ac+"Invalid argument: ",lk=ac+"Exponent out of range: ",xy=Math.floor,Om=Math.pow,YSe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ll,Na=1e7,Jr=7,ZW=9007199254740991,MT=xy(ZW/Jr),$t={};$t.absoluteValue=$t.abs=function(){var n=new this.constructor(this);return n.s&&(n.s=1),n};$t.comparedTo=$t.cmp=function(n){var e,t,r,i,a=this;if(n=new a.constructor(n),a.s!==n.s)return a.s||-n.s;if(a.e!==n.e)return a.e>n.e^a.s<0?1:-1;for(r=a.d.length,i=n.d.length,e=0,t=r<i?r:i;e<t;++e)if(a.d[e]!==n.d[e])return a.d[e]>n.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};$t.decimalPlaces=$t.dp=function(){var n=this,e=n.d.length-1,t=(e-n.e)*Jr;if(e=n.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};$t.dividedBy=$t.div=function(n){return md(this,new this.constructor(n))};$t.dividedToIntegerBy=$t.idiv=function(n){var e=this,t=e.constructor;return jr(md(e,new t(n),0,1),t.precision)};$t.equals=$t.eq=function(n){return!this.cmp(n)};$t.exponent=function(){return aa(this)};$t.greaterThan=$t.gt=function(n){return this.cmp(n)>0};$t.greaterThanOrEqualTo=$t.gte=function(n){return this.cmp(n)>=0};$t.isInteger=$t.isint=function(){return this.e>this.d.length-2};$t.isNegative=$t.isneg=function(){return this.s<0};$t.isPositive=$t.ispos=function(){return this.s>0};$t.isZero=function(){return this.s===0};$t.lessThan=$t.lt=function(n){return this.cmp(n)<0};$t.lessThanOrEqualTo=$t.lte=function(n){return this.cmp(n)<1};$t.logarithm=$t.log=function(n){var e,t=this,r=t.constructor,i=r.precision,a=i+5;if(n===void 0)n=new r(10);else if(n=new r(n),n.s<1||n.eq(ll))throw Error(ac+"NaN");if(t.s<1)throw Error(ac+(t.s?"NaN":"-Infinity"));return t.eq(ll)?new r(0):(ui=!1,e=md(R_(t,a),R_(n,a),a),ui=!0,jr(e,i))};$t.minus=$t.sub=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?e$(e,n):QW(e,(n.s=-n.s,n))};$t.modulo=$t.mod=function(n){var e,t=this,r=t.constructor,i=r.precision;if(n=new r(n),!n.s)throw Error(ac+"NaN");return t.s?(ui=!1,e=md(t,n,0,1).times(n),ui=!0,t.minus(e)):jr(new r(t),i)};$t.naturalExponential=$t.exp=function(){return JW(this)};$t.naturalLogarithm=$t.ln=function(){return R_(this)};$t.negated=$t.neg=function(){var n=new this.constructor(this);return n.s=-n.s||0,n};$t.plus=$t.add=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?QW(e,n):e$(e,(n.s=-n.s,n))};$t.precision=$t.sd=function(n){var e,t,r,i=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(ig+n);if(e=aa(i)+1,r=i.d.length-1,t=r*Jr+1,r=i.d[r],r){for(;r%10==0;r/=10)t--;for(r=i.d[0];r>=10;r/=10)t++}return n&&e>t?e:t};$t.squareRoot=$t.sqrt=function(){var n,e,t,r,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(ac+"NaN")}for(n=aa(o),ui=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=Xu(o.d),(e.length+n)%2==0&&(e+="0"),i=Math.sqrt(e),n=xy((n+1)/2)-(n<0||n%2),i==1/0?e="5e"+n:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+n),r=new c(e)):r=new c(i.toString()),t=c.precision,i=s=t+3;;)if(a=r,r=a.plus(md(o,a,s+2)).times(.5),Xu(a.d).slice(0,s)===(e=Xu(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(jr(a,t+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return ui=!0,jr(r,t)};$t.times=$t.mul=function(n){var e,t,r,i,a,s,o,c,f,d=this,p=d.constructor,v=d.d,y=(n=new p(n)).d;if(!d.s||!n.s)return new p(0);for(n.s*=d.s,t=d.e+n.e,c=v.length,f=y.length,c<f&&(a=v,v=y,y=a,s=c,c=f,f=s),a=[],s=c+f,r=s;r--;)a.push(0);for(r=f;--r>=0;){for(e=0,i=c+r;i>r;)o=a[i]+y[r]*v[i-r-1]+e,a[i--]=o%Na|0,e=o/Na|0;a[i]=(a[i]+e)%Na|0}for(;!a[--s];)a.pop();return e?++t:a.shift(),n.d=a,n.e=t,ui?jr(n,p.precision):n};$t.toDecimalPlaces=$t.todp=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(hf(n,0,by),e===void 0?e=r.rounding:hf(e,0,8),jr(t,n+aa(t)+1,e))};$t.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=Sg(r,!0):(hf(n,0,by),e===void 0?e=i.rounding:hf(e,0,8),r=jr(new i(r),n+1,e),t=Sg(r,!0,n+1)),t};$t.toFixed=function(n,e){var t,r,i=this,a=i.constructor;return n===void 0?Sg(i):(hf(n,0,by),e===void 0?e=a.rounding:hf(e,0,8),r=jr(new a(i),n+aa(i)+1,e),t=Sg(r.abs(),!1,n+aa(r)+1),i.isneg()&&!i.isZero()?"-"+t:t)};$t.toInteger=$t.toint=function(){var n=this,e=n.constructor;return jr(new e(n),aa(n)+1,e.rounding)};$t.toNumber=function(){return+this};$t.toPower=$t.pow=function(n){var e,t,r,i,a,s,o=this,c=o.constructor,f=12,d=+(n=new c(n));if(!n.s)return new c(ll);if(o=new c(o),!o.s){if(n.s<1)throw Error(ac+"Infinity");return o}if(o.eq(ll))return o;if(r=c.precision,n.eq(ll))return jr(o,r);if(e=n.e,t=n.d.length-1,s=e>=t,a=o.s,s){if((t=d<0?-d:d)<=ZW){for(i=new c(ll),e=Math.ceil(r/Jr+4),ui=!1;t%2&&(i=i.times(o),HB(i.d,e)),t=xy(t/2),t!==0;)o=o.times(o),HB(o.d,e);return ui=!0,n.s<0?new c(ll).div(i):jr(i,r)}}else if(a<0)throw Error(ac+"NaN");return a=a<0&&n.d[Math.max(e,t)]&1?-1:1,o.s=1,ui=!1,i=n.times(R_(o,r+f)),ui=!0,i=JW(i),i.s=a,i};$t.toPrecision=function(n,e){var t,r,i=this,a=i.constructor;return n===void 0?(t=aa(i),r=Sg(i,t<=a.toExpNeg||t>=a.toExpPos)):(hf(n,1,by),e===void 0?e=a.rounding:hf(e,0,8),i=jr(new a(i),n,e),t=aa(i),r=Sg(i,n<=t||t<=a.toExpNeg,n)),r};$t.toSignificantDigits=$t.tosd=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(hf(n,1,by),e===void 0?e=r.rounding:hf(e,0,8)),jr(new r(t),n,e)};$t.toString=$t.valueOf=$t.val=$t.toJSON=$t[Symbol.for("nodejs.util.inspect.custom")]=function(){var n=this,e=aa(n),t=n.constructor;return Sg(n,e<=t.toExpNeg||e>=t.toExpPos)};function QW(n,e){var t,r,i,a,s,o,c,f,d=n.constructor,p=d.precision;if(!n.s||!e.s)return e.s||(e=new d(n)),ui?jr(e,p):e;if(c=n.d,f=e.d,s=n.e,i=e.e,c=c.slice(),a=s-i,a){for(a<0?(r=c,a=-a,o=f.length):(r=f,i=s,o=c.length),s=Math.ceil(p/Jr),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=c.length,a=f.length,o-a<0&&(a=o,r=f,f=c,c=r),t=0;a;)t=(c[--a]=c[a]+f[a]+t)/Na|0,c[a]%=Na;for(t&&(c.unshift(t),++i),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=i,ui?jr(e,p):e}function hf(n,e,t){if(n!==~~n||n<e||n>t)throw Error(ig+n)}function Xu(n){var e,t,r,i=n.length-1,a="",s=n[0];if(i>0){for(a+=s,e=1;e<i;e++)r=n[e]+"",t=Jr-r.length,t&&(a+=Fh(t)),a+=r;s=n[e],r=s+"",t=Jr-r.length,t&&(a+=Fh(t))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var md=(function(){function n(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%Na|0,s=a/Na|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function t(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*Na+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,c,f,d,p,v,y,x,E,S,w,R,N,O,z,k,U,P,C=r.constructor,L=r.s==i.s?1:-1,j=r.d,B=i.d;if(!r.s)return new C(r);if(!i.s)throw Error(ac+"Division by zero");for(c=r.e-i.e,U=B.length,z=j.length,y=new C(L),x=y.d=[],f=0;B[f]==(j[f]||0);)++f;if(B[f]>(j[f]||0)&&--c,a==null?R=a=C.precision:s?R=a+(aa(r)-aa(i))+1:R=a,R<0)return new C(0);if(R=R/Jr+2|0,f=0,U==1)for(d=0,B=B[0],R++;(f<z||d)&&R--;f++)N=d*Na+(j[f]||0),x[f]=N/B|0,d=N%B|0;else{for(d=Na/(B[0]+1)|0,d>1&&(B=n(B,d),j=n(j,d),U=B.length,z=j.length),O=U,E=j.slice(0,U),S=E.length;S<U;)E[S++]=0;P=B.slice(),P.unshift(0),k=B[0],B[1]>=Na/2&&++k;do d=0,o=e(B,E,U,S),o<0?(w=E[0],U!=S&&(w=w*Na+(E[1]||0)),d=w/k|0,d>1?(d>=Na&&(d=Na-1),p=n(B,d),v=p.length,S=E.length,o=e(p,E,v,S),o==1&&(d--,t(p,U<v?P:B,v))):(d==0&&(o=d=1),p=B.slice()),v=p.length,v<S&&p.unshift(0),t(E,p,S),o==-1&&(S=E.length,o=e(B,E,U,S),o<1&&(d++,t(E,U<S?P:B,S))),S=E.length):o===0&&(d++,E=[0]),x[f++]=d,o&&E[0]?E[S++]=j[O]||0:(E=[j[O]],S=1);while((O++<z||E[0]!==void 0)&&R--)}return x[0]||x.shift(),y.e=c,jr(y,s?a+aa(y)+1:a)}})();function JW(n,e){var t,r,i,a,s,o,c=0,f=0,d=n.constructor,p=d.precision;if(aa(n)>16)throw Error(lk+aa(n));if(!n.s)return new d(ll);for(ui=!1,o=p,s=new d(.03125);n.abs().gte(.1);)n=n.times(s),f+=5;for(r=Math.log(Om(2,f))/Math.LN10*2+5|0,o+=r,t=i=a=new d(ll),d.precision=o;;){if(i=jr(i.times(n),o),t=t.times(++c),s=a.plus(md(i,t,o)),Xu(s.d).slice(0,o)===Xu(a.d).slice(0,o)){for(;f--;)a=jr(a.times(a),o);return d.precision=p,e==null?(ui=!0,jr(a,p)):a}a=s}}function aa(n){for(var e=n.e*Jr,t=n.d[0];t>=10;t/=10)e++;return e}function nN(n,e,t){if(e>n.LN10.sd())throw ui=!0,t&&(n.precision=t),Error(ac+"LN10 precision limit exceeded");return jr(new n(n.LN10),e)}function Fh(n){for(var e="";n--;)e+="0";return e}function R_(n,e){var t,r,i,a,s,o,c,f,d,p=1,v=10,y=n,x=y.d,E=y.constructor,S=E.precision;if(y.s<1)throw Error(ac+(y.s?"NaN":"-Infinity"));if(y.eq(ll))return new E(0);if(e==null?(ui=!1,f=S):f=e,y.eq(10))return e==null&&(ui=!0),nN(E,f);if(f+=v,E.precision=f,t=Xu(x),r=t.charAt(0),a=aa(y),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)y=y.times(n),t=Xu(y.d),r=t.charAt(0),p++;a=aa(y),r>1?(y=new E("0."+t),a++):y=new E(r+"."+t.slice(1))}else return c=nN(E,f+2,S).times(a+""),y=R_(new E(r+"."+t.slice(1)),f-v).plus(c),E.precision=S,e==null?(ui=!0,jr(y,S)):y;for(o=s=y=md(y.minus(ll),y.plus(ll),f),d=jr(y.times(y),f),i=3;;){if(s=jr(s.times(d),f),c=o.plus(md(s,new E(i),f)),Xu(c.d).slice(0,f)===Xu(o.d).slice(0,f))return o=o.times(2),a!==0&&(o=o.plus(nN(E,f+2,S).times(a+""))),o=md(o,new E(p),f),E.precision=S,e==null?(ui=!0,jr(o,S)):o;o=c,i+=2}}function VB(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,t=t-r-1,n.e=xy(t/Jr),n.d=[],r=(t+1)%Jr,t<0&&(r+=Jr),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=Jr;r<i;)n.d.push(+e.slice(r,r+=Jr));e=e.slice(r),r=Jr-e.length}else r-=i;for(;r--;)e+="0";if(n.d.push(+e),ui&&(n.e>MT||n.e<-MT))throw Error(lk+t)}else n.s=0,n.e=0,n.d=[0];return n}function jr(n,e,t){var r,i,a,s,o,c,f,d,p=n.d;for(s=1,a=p[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=Jr,i=e,f=p[d=0];else{if(d=Math.ceil((r+1)/Jr),a=p.length,d>=a)return n;for(f=a=p[d],s=1;a>=10;a/=10)s++;r%=Jr,i=r-Jr+s}if(t!==void 0&&(a=Om(10,s-i-1),o=f/a%10|0,c=e<0||p[d+1]!==void 0||f%a,c=t<4?(o||c)&&(t==0||t==(n.s<0?3:2)):o>5||o==5&&(t==4||c||t==6&&(r>0?i>0?f/Om(10,s-i):0:p[d-1])%10&1||t==(n.s<0?8:7))),e<1||!p[0])return c?(a=aa(n),p.length=1,e=e-a-1,p[0]=Om(10,(Jr-e%Jr)%Jr),n.e=xy(-e/Jr)||0):(p.length=1,p[0]=n.e=n.s=0),n;if(r==0?(p.length=d,a=1,d--):(p.length=d+1,a=Om(10,Jr-r),p[d]=i>0?(f/Om(10,s-i)%Om(10,i)|0)*a:0),c)for(;;)if(d==0){(p[0]+=a)==Na&&(p[0]=1,++n.e);break}else{if(p[d]+=a,p[d]!=Na)break;p[d--]=0,a=1}for(r=p.length;p[--r]===0;)p.pop();if(ui&&(n.e>MT||n.e<-MT))throw Error(lk+aa(n));return n}function e$(n,e){var t,r,i,a,s,o,c,f,d,p,v=n.constructor,y=v.precision;if(!n.s||!e.s)return e.s?e.s=-e.s:e=new v(n),ui?jr(e,y):e;if(c=n.d,p=e.d,r=e.e,f=n.e,c=c.slice(),s=f-r,s){for(d=s<0,d?(t=c,s=-s,o=p.length):(t=p,r=f,o=c.length),i=Math.max(Math.ceil(y/Jr),o)+2,s>i&&(s=i,t.length=1),t.reverse(),i=s;i--;)t.push(0);t.reverse()}else{for(i=c.length,o=p.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(c[i]!=p[i]){d=c[i]<p[i];break}s=0}for(d&&(t=c,c=p,p=t,e.s=-e.s),o=c.length,i=p.length-o;i>0;--i)c[o++]=0;for(i=p.length;i>s;){if(c[--i]<p[i]){for(a=i;a&&c[--a]===0;)c[a]=Na-1;--c[a],c[i]+=Na}c[i]-=p[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,ui?jr(e,y):e):new v(0)}function Sg(n,e,t){var r,i=aa(n),a=Xu(n.d),s=a.length;return e?(t&&(r=t-s)>0?a=a.charAt(0)+"."+a.slice(1)+Fh(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Fh(-i-1)+a,t&&(r=t-s)>0&&(a+=Fh(r))):i>=s?(a+=Fh(i+1-s),t&&(r=t-i-1)>0&&(a=a+"."+Fh(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),t&&(r=t-s)>0&&(i+1===s&&(a+="."),a+=Fh(r))),n.s<0?"-"+a:a}function HB(n,e){if(n.length>e)return n.length=e,!0}function t$(n){var e,t,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(ig+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return VB(s,a.toString())}else if(typeof a!="string")throw Error(ig+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,YSe.test(a))VB(s,a);else throw Error(ig+a)}if(i.prototype=$t,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=t$,i.config=i.set=KSe,n===void 0&&(n={}),n)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}function KSe(n){if(!n||typeof n!="object")throw Error(ac+"Object expected");var e,t,r,i=["precision",1,by,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=n[t=i[e]])!==void 0)if(xy(r)===r&&r>=i[e+1]&&r<=i[e+2])this[t]=r;else throw Error(ig+t+": "+r);if((r=n[t="LN10"])!==void 0)if(r==Math.LN10)this[t]=new this(r);else throw Error(ig+t+": "+r);return this}var ck=t$(XSe);ll=new ck(1);const Ir=ck;function n$(n){var e;return n===0?e=1:e=Math.floor(new Ir(n).abs().log(10).toNumber())+1,e}function r$(n,e,t){for(var r=new Ir(n),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(t),i++;return a}var i$=n=>{var[e,t]=n,[r,i]=[e,t];return e>t&&([r,i]=[t,e]),[r,i]},a$=(n,e,t)=>{if(n.lte(0))return new Ir(0);var r=n$(n.toNumber()),i=new Ir(10).pow(r),a=n.div(i),s=r!==1?.05:.1,o=new Ir(Math.ceil(a.div(s).toNumber())).add(t).mul(s),c=o.mul(i);return e?new Ir(c.toNumber()):new Ir(Math.ceil(c.toNumber()))},ZSe=(n,e,t)=>{var r=new Ir(1),i=new Ir(n);if(!i.isint()&&t){var a=Math.abs(n);a<1?(r=new Ir(10).pow(n$(n)-1),i=new Ir(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Ir(Math.floor(n)))}else n===0?i=new Ir(Math.floor((e-1)/2)):t||(i=new Ir(Math.floor(n)));for(var s=Math.floor((e-1)/2),o=[],c=0;c<e;c++)o.push(i.add(new Ir(c-s).mul(r)).toNumber());return o},s$=function(e,t,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Ir(0),tickMin:new Ir(0),tickMax:new Ir(0)};var s=a$(new Ir(t).sub(e).div(r-1),i,a),o;e<=0&&t>=0?o=new Ir(0):(o=new Ir(e).add(t).div(2),o=o.sub(new Ir(o).mod(s)));var c=Math.ceil(o.sub(e).div(s).toNumber()),f=Math.ceil(new Ir(t).sub(o).div(s).toNumber()),d=c+f+1;return d>r?s$(e,t,r,i,a+1):(d<r&&(f=t>0?f+(r-d):f,c=t>0?c:c+(r-d)),{step:s,tickMin:o.sub(new Ir(c).mul(s)),tickMax:o.add(new Ir(f).mul(s))})},QSe=function(e){var[t,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,c]=i$([t,r]);if(o===-1/0||c===1/0){var f=c===1/0?[o,...Array(i-1).fill(1/0)]:[...Array(i-1).fill(-1/0),c];return t>r?f.reverse():f}if(o===c)return ZSe(o,i,a);var{step:d,tickMin:p,tickMax:v}=s$(o,c,s,a,0),y=r$(p,v.add(new Ir(.1).mul(d)),d);return t>r?y.reverse():y},JSe=function(e,t){var[r,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=i$([r,i]);if(s===-1/0||o===1/0)return[r,i];if(s===o)return[s];var c=Math.max(t,2),f=a$(new Ir(o).sub(s).div(c-1),a,0),d=[...r$(new Ir(s),new Ir(o),f),o];return a===!1&&(d=d.map(p=>Math.round(p))),r>i?d.reverse():d},ewe=n=>n.rootProps.barCategoryGap,MC=n=>n.rootProps.stackOffset,o$=n=>n.rootProps.reverseStackOrder,uk=n=>n.options.chartName,fk=n=>n.rootProps.syncId,l$=n=>n.rootProps.syncMethod,dk=n=>n.options.eventEmitter,twe=n=>n.rootProps.baseValue,so={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Am={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},ku={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},CC=(n,e)=>{if(!(!n||!e))return n!=null&&n.reversed?[e[1],e[0]]:e};function IC(n,e,t){if(t!=="auto")return t;if(n!=null)return vf(n,e)?"category":"number"}function GB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function CT(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?GB(Object(t),!0).forEach(function(r){nwe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):GB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function nwe(n,e,t){return(e=rwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rwe(n){var e=iwe(n,"string");return typeof e=="symbol"?e:e+""}function iwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var qB={allowDataOverflow:Am.allowDataOverflow,allowDecimals:Am.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Am.angleAxisId,includeHidden:!1,name:void 0,reversed:Am.reversed,scale:Am.scale,tick:Am.tick,tickCount:void 0,ticks:void 0,type:Am.type,unit:void 0},WB={allowDataOverflow:ku.allowDataOverflow,allowDecimals:ku.allowDecimals,allowDuplicatedCategory:ku.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ku.radiusAxisId,includeHidden:ku.includeHidden,name:void 0,reversed:ku.reversed,scale:ku.scale,tick:ku.tick,tickCount:ku.tickCount,ticks:void 0,type:ku.type,unit:void 0},awe=(n,e)=>{if(e!=null)return n.polarAxis.angleAxis[e]},hk=Je([awe,Qq],(n,e)=>{var t;if(n!=null)return n;var r=(t=IC(e,"angleAxis",qB.type))!==null&&t!==void 0?t:"category";return CT(CT({},qB),{},{type:r})}),swe=(n,e)=>n.polarAxis.radiusAxis[e],pk=Je([swe,Qq],(n,e)=>{var t;if(n!=null)return n;var r=(t=IC(e,"radiusAxis",WB.type))!==null&&t!==void 0?t:"category";return CT(CT({},WB),{},{type:r})}),RC=n=>n.polarOptions,mk=Je([Cd,Id,us],n_e),c$=Je([RC,mk],(n,e)=>{if(n!=null)return yp(n.innerRadius,e,0)}),u$=Je([RC,mk],(n,e)=>{if(n!=null)return yp(n.outerRadius,e,e*.8)}),owe=n=>{if(n==null)return[0,0];var{startAngle:e,endAngle:t}=n;return[e,t]},f$=Je([RC],owe);Je([hk,f$],CC);var d$=Je([mk,c$,u$],(n,e,t)=>{if(!(n==null||e==null||t==null))return[e,t]});Je([pk,d$],CC);var h$=Je([fi,RC,c$,u$,Cd,Id],(n,e,t,r,i,a)=>{if(!(n!=="centric"&&n!=="radial"||e==null||t==null||r==null)){var{cx:s,cy:o,startAngle:c,endAngle:f}=e;return{cx:yp(s,i,i/2),cy:yp(o,a,a/2),innerRadius:t,outerRadius:r,startAngle:c,endAngle:f,clockWise:!1}}}),ka=(n,e)=>e,PC=(n,e,t)=>t;function gk(n){return n==null?void 0:n.id}function p$(n,e,t){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=t,s=new Map;return n.forEach(o=>{var c,f=(c=o.data)!==null&&c!==void 0?c:r;if(!(f==null||f.length===0)){var d=gk(o);f.forEach((p,v)=>{var y=a==null||i?v:String(ls(p,a,null)),x=ls(p,o.dataKey,0),E;s.has(y)?E=s.get(y):E={},Object.assign(E,{[d]:x}),s.set(y,E)})}}),Array.from(s.values())}function vk(n){return"stackId"in n&&n.stackId!=null&&n.dataKey!=null}var NC=(n,e)=>n===e?!0:n==null||e==null?!1:n[0]===e[0]&&n[1]===e[1];function OC(n,e){return Array.isArray(n)&&Array.isArray(e)&&n.length===0&&e.length===0?!0:n===e}function lwe(n,e){if(n.length===e.length){for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return!1}var Ua=n=>{var e=fi(n);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},_y=n=>n.tooltip.settings.axisId;function cwe(n){if(n in Sx)return Sx[n]();var e="scale".concat(wL(n));if(e in Sx)return Sx[e]()}function $B(n){var e=n.ticks,t=n.bandwidth,r=n.range(),i=[Math.min(...r),Math.max(...r)];return{domain:()=>n.domain(),range:(function(a){function s(){return a.apply(this,arguments)}return s.toString=function(){return a.toString()},s})(()=>i),rangeMin:()=>i[0],rangeMax:()=>i[1],isInRange(a){var s=i[0],o=i[1];return s<=o?a>=s&&a<=o:a>=o&&a<=s},bandwidth:t?()=>t.call(n):void 0,ticks:e?a=>e.call(n,a):void 0,map:(a,s)=>{var o=n(a);if(o!=null){if(n.bandwidth&&s!==null&&s!==void 0&&s.position){var c=n.bandwidth();switch(s.position){case"middle":o+=c/2;break;case"end":o+=c;break}}return o}}}}function XB(n,e,t){if(typeof n=="function")return $B(n.copy().domain(e).range(t));if(n!=null){var r=cwe(n);if(r!=null)return r.domain(e).range(t),$B(r)}}var uwe=(n,e)=>{if(e!=null)switch(n){case"linear":{if(!Td(e)){for(var t,r,i=0;i<e.length;i++){var a=e[i];nr(a)&&((t===void 0||a<t)&&(t=a),(r===void 0||a>r)&&(r=a))}return t!==void 0&&r!==void 0?[t,r]:void 0}return e}default:return e}};function YB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function IT(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?YB(Object(t),!0).forEach(function(r){fwe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):YB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function fwe(n,e,t){return(e=dwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dwe(n){var e=hwe(n,"string");return typeof e=="symbol"?e:e+""}function hwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var e3=[0,"auto"],Ia={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},m$=(n,e)=>n.cartesianAxis.xAxis[e],Nd=(n,e)=>{var t=m$(n,e);return t??Ia},Ra={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:e3,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:s1},g$=(n,e)=>n.cartesianAxis.yAxis[e],Od=(n,e)=>{var t=g$(n,e);return t??Ra},pwe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},yk=(n,e)=>{var t=n.cartesianAxis.zAxis[e];return t??pwe},fo=(n,e,t)=>{switch(e){case"xAxis":return Nd(n,t);case"yAxis":return Od(n,t);case"zAxis":return yk(n,t);case"angleAxis":return hk(n,t);case"radiusAxis":return pk(n,t);default:throw new Error("Unexpected axis type: ".concat(e))}},mwe=(n,e,t)=>{switch(e){case"xAxis":return Nd(n,t);case"yAxis":return Od(n,t);default:throw new Error("Unexpected axis type: ".concat(e))}},p1=(n,e,t)=>{switch(e){case"xAxis":return Nd(n,t);case"yAxis":return Od(n,t);case"angleAxis":return hk(n,t);case"radiusAxis":return pk(n,t);default:throw new Error("Unexpected axis type: ".concat(e))}},v$=n=>n.graphicalItems.cartesianItems.some(e=>e.type==="bar")||n.graphicalItems.polarItems.some(e=>e.type==="radialBar");function y$(n,e){return t=>{switch(n){case"xAxis":return"xAxisId"in t&&t.xAxisId===e;case"yAxis":return"yAxisId"in t&&t.yAxisId===e;case"zAxis":return"zAxisId"in t&&t.zAxisId===e;case"angleAxis":return"angleAxisId"in t&&t.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in t&&t.radiusAxisId===e;default:return!1}}}var b$=n=>n.graphicalItems.cartesianItems,gwe=Je([ka,PC],y$),x$=(n,e,t)=>n.filter(t).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),m1=Je([b$,fo,gwe],x$,{memoizeOptions:{resultEqualityCheck:OC}}),_$=Je([m1],n=>n.filter(e=>e.type==="area"||e.type==="bar").filter(vk)),S$=n=>n.filter(e=>!("stackId"in e)||e.stackId===void 0),vwe=Je([m1],S$),w$=n=>n.map(e=>e.data).filter(Boolean).flat(1),ywe=Je([m1],w$,{memoizeOptions:{resultEqualityCheck:OC}}),E$=(n,e)=>{var{chartData:t=[],dataStartIndex:r,dataEndIndex:i}=e;return n.length>0?n:t.slice(r,i+1)},bk=Je([ywe,YW],E$),A$=(n,e,t)=>(e==null?void 0:e.dataKey)!=null?n.map(r=>({value:ls(r,e.dataKey)})):t.length>0?t.map(r=>r.dataKey).flatMap(r=>n.map(i=>({value:ls(i,r)}))):n.map(r=>({value:r})),DC=Je([bk,fo,m1],A$);function T$(n,e){switch(n){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function AE(n){if(ff(n)||n instanceof Date){var e=Number(n);if(nr(e))return e}}function KB(n){if(Array.isArray(n)){var e=[AE(n[0]),AE(n[1])];return Td(e)?e:void 0}var t=AE(n);if(t!=null)return[t,t]}function Md(n){return n.map(AE).filter(Vo)}function bwe(n,e,t){return!t||typeof e!="number"||uf(e)?[]:t.length?Md(t.flatMap(r=>{var i=ls(n,r.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!nr(a)||!nr(s)))return[e-a,e+s]})):[]}var _a=n=>{var e=Ua(n),t=_y(n);return p1(n,e,t)},g1=Je([_a],n=>n==null?void 0:n.dataKey),xwe=Je([_$,YW,_a],p$),M$=(n,e,t,r)=>{var i={},a=e.reduce((s,o)=>{if(o.stackId==null)return s;var c=s[o.stackId];return c==null&&(c=[]),c.push(o),s[o.stackId]=c,s},i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,c]=s,f=r?[...c].reverse():c,d=f.map(gk);return[o,{stackedData:qye(n,d,t),graphicalItems:f}]}))},C$=Je([xwe,_$,MC,o$],M$),I$=(n,e,t,r)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(r==null&&t!=="zAxis"){var s=Yye(n,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},_we=Je([fo],n=>n.allowDataOverflow),xk=n=>{var e;if(n==null||!("domain"in n))return e3;if(n.domain!=null)return n.domain;if("ticks"in n&&n.ticks!=null){if(n.type==="number"){var t=Md(n.ticks);return[Math.min(...t),Math.max(...t)]}if(n.type==="category")return n.ticks.map(String)}return(e=n==null?void 0:n.domain)!==null&&e!==void 0?e:e3},R$=Je([fo],xk),P$=Je([R$,_we],KW),Swe=Je([C$,Pd,ka,P$],I$,{memoizeOptions:{resultEqualityCheck:NC}}),_k=n=>n.errorBars,wwe=(n,e,t)=>n.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>T$(t,r)),RT=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},N$=(n,e,t,r,i)=>{var a,s;if(t.length>0&&n.forEach(o=>{t.forEach(c=>{var f,d,p=(f=r[c.id])===null||f===void 0?void 0:f.filter(w=>T$(i,w)),v=ls(o,(d=e.dataKey)!==null&&d!==void 0?d:c.dataKey),y=bwe(o,v,p);if(y.length>=2){var x=Math.min(...y),E=Math.max(...y);(a==null||x<a)&&(a=x),(s==null||E>s)&&(s=E)}var S=KB(v);S!=null&&(a=a==null?S[0]:Math.min(a,S[0]),s=s==null?S[1]:Math.max(s,S[1]))})}),(e==null?void 0:e.dataKey)!=null&&n.forEach(o=>{var c=KB(ls(o,e.dataKey));c!=null&&(a=a==null?c[0]:Math.min(a,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),nr(a)&&nr(s))return[a,s]},Ewe=Je([bk,fo,vwe,_k,ka],N$,{memoizeOptions:{resultEqualityCheck:NC}});function Awe(n){var{value:e}=n;if(ff(e)||e instanceof Date)return e}var Twe=(n,e,t)=>{var r=n.map(Awe).filter(i=>i!=null);return t&&(e.dataKey==null||e.allowDuplicatedCategory&&KG(r))?pW(0,n.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},O$=n=>n.referenceElements.dots,Sy=(n,e,t)=>n.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===t:r.yAxisId===t),Mwe=Je([O$,ka,PC],Sy),D$=n=>n.referenceElements.areas,Cwe=Je([D$,ka,PC],Sy),L$=n=>n.referenceElements.lines,Iwe=Je([L$,ka,PC],Sy),k$=(n,e)=>{if(n!=null){var t=Md(n.map(r=>e==="xAxis"?r.x:r.y));if(t.length!==0)return[Math.min(...t),Math.max(...t)]}},Rwe=Je(Mwe,ka,k$),U$=(n,e)=>{if(n!=null){var t=Md(n.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(t.length!==0)return[Math.min(...t),Math.max(...t)]}},Pwe=Je([Cwe,ka],U$);function Nwe(n){var e;if(n.x!=null)return Md([n.x]);var t=(e=n.segment)===null||e===void 0?void 0:e.map(r=>r.x);return t==null||t.length===0?[]:Md(t)}function Owe(n){var e;if(n.y!=null)return Md([n.y]);var t=(e=n.segment)===null||e===void 0?void 0:e.map(r=>r.y);return t==null||t.length===0?[]:Md(t)}var F$=(n,e)=>{if(n!=null){var t=n.flatMap(r=>e==="xAxis"?Nwe(r):Owe(r));if(t.length!==0)return[Math.min(...t),Math.max(...t)]}},Dwe=Je([Iwe,ka],F$),Lwe=Je(Rwe,Dwe,Pwe,(n,e,t)=>RT(n,t,e)),z$=(n,e,t,r,i,a,s,o)=>{if(t!=null)return t;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",f=c?RT(r,a,i):RT(a,i);return $Se(e,f,n.allowDataOverflow)},kwe=Je([fo,R$,P$,Swe,Ewe,Lwe,fi,ka],z$,{memoizeOptions:{resultEqualityCheck:NC}}),Uwe=[0,1],j$=(n,e,t,r,i,a,s)=>{if(!((n==null||t==null||t.length===0)&&s===void 0)){var{dataKey:o,type:c}=n,f=vf(e,a);if(f&&o==null){var d;return pW(0,(d=t==null?void 0:t.length)!==null&&d!==void 0?d:0)}return c==="category"?Twe(r,n,f):i==="expand"?Uwe:s}},Sk=Je([fo,fi,bk,DC,MC,ka,kwe],j$);function Fwe(n){return n in Sx}var B$=(n,e,t)=>{if(n!=null){var{scale:r,type:i}=n;if(r==="auto")return i==="category"&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!e)?"point":i==="category"?"band":"linear";if(typeof r=="string"){var a="scale".concat(wL(r));return Fwe(a)?a:"point"}}},wy=Je([fo,v$,uk],B$);function wk(n,e,t,r){if(!(t==null||r==null))return typeof n.scale=="function"?XB(n.scale,t,r):XB(e,t,r)}var V$=(n,e,t)=>{var r=xk(e);if(!(t!=="auto"&&t!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Td(n))return QSe(n,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Td(n))return JSe(n,e.tickCount,e.allowDecimals)}},Ek=Je([Sk,p1,wy],V$),H$=(n,e,t,r)=>{if(r!=="angleAxis"&&(n==null?void 0:n.type)==="number"&&Td(e)&&Array.isArray(t)&&t.length>0){var i,a,s=e[0],o=(i=t[0])!==null&&i!==void 0?i:0,c=e[1],f=(a=t[t.length-1])!==null&&a!==void 0?a:0;return[Math.min(s,o),Math.max(c,f)]}return e},zwe=Je([fo,Sk,Ek,ka],H$),jwe=Je(DC,fo,(n,e)=>{if(!(!e||e.type!=="number")){var t=1/0,r=Array.from(Md(n.map(p=>p.value))).sort((p,v)=>p-v),i=r[0],a=r[r.length-1];if(i==null||a==null)return 1/0;var s=a-i;if(s===0)return 1/0;for(var o=0;o<r.length-1;o++){var c=r[o],f=r[o+1];if(!(c==null||f==null)){var d=f-c;t=Math.min(t,d)}}return t/s}}),G$=Je(jwe,fi,ewe,us,(n,e,t,r,i)=>i,(n,e,t,r,i)=>{if(!nr(n))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return n*a/2;if(i==="no-gap"){var s=yp(t,n*a),o=n*a/2;return o-s-(o-s)/a*s}return 0}),Bwe=(n,e,t)=>{var r=Nd(n,e);return r==null||typeof r.padding!="string"?0:G$(n,"xAxis",e,t,r.padding)},Vwe=(n,e,t)=>{var r=Od(n,e);return r==null||typeof r.padding!="string"?0:G$(n,"yAxis",e,t,r.padding)},Hwe=Je(Nd,Bwe,(n,e)=>{var t,r;if(n==null)return{left:0,right:0};var{padding:i}=n;return typeof i=="string"?{left:e,right:e}:{left:((t=i.left)!==null&&t!==void 0?t:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),Gwe=Je(Od,Vwe,(n,e)=>{var t,r;if(n==null)return{top:0,bottom:0};var{padding:i}=n;return typeof i=="string"?{top:e,bottom:e}:{top:((t=i.top)!==null&&t!==void 0?t:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),qwe=Je([us,Hwe,gC,mC,(n,e,t)=>t],(n,e,t,r,i)=>{var{padding:a}=r;return i?[a.left,t.width-a.right]:[n.left+e.left,n.left+n.width-e.right]}),Wwe=Je([us,fi,Gwe,gC,mC,(n,e,t)=>t],(n,e,t,r,i,a)=>{var{padding:s}=i;return a?[r.height-s.bottom,s.top]:e==="horizontal"?[n.top+n.height-t.bottom,n.top+t.top]:[n.top+t.top,n.top+n.height-t.bottom]}),v1=(n,e,t,r)=>{var i;switch(e){case"xAxis":return qwe(n,t,r);case"yAxis":return Wwe(n,t,r);case"zAxis":return(i=yk(n,t))===null||i===void 0?void 0:i.range;case"angleAxis":return f$(n);case"radiusAxis":return d$(n,t);default:return}},q$=Je([fo,v1],CC),$we=Je([wy,zwe],uwe),LC=Je([fo,wy,$we,q$],wk);Je([m1,_k,ka],wwe);function W$(n,e){return n.id<e.id?-1:n.id>e.id?1:0}var kC=(n,e)=>e,UC=(n,e,t)=>t,Xwe=Je(hC,kC,UC,(n,e,t)=>n.filter(r=>r.orientation===e).filter(r=>r.mirror===t).sort(W$)),Ywe=Je(pC,kC,UC,(n,e,t)=>n.filter(r=>r.orientation===e).filter(r=>r.mirror===t).sort(W$)),$$=(n,e)=>({width:n.width,height:e.height}),Kwe=(n,e)=>{var t=typeof e.width=="number"?e.width:s1;return{width:t,height:n.height}},Zwe=Je(us,Nd,$$),Qwe=(n,e,t)=>{switch(e){case"top":return n.top;case"bottom":return t-n.bottom;default:return 0}},Jwe=(n,e,t)=>{switch(e){case"left":return n.left;case"right":return t-n.right;default:return 0}},eEe=Je(Id,us,Xwe,kC,UC,(n,e,t,r,i)=>{var a={},s;return t.forEach(o=>{var c=$$(e,o);s==null&&(s=Qwe(e,r,n));var f=r==="top"&&!i||r==="bottom"&&i;a[o.id]=s-Number(f)*c.height,s+=(f?-1:1)*c.height}),a}),tEe=Je(Cd,us,Ywe,kC,UC,(n,e,t,r,i)=>{var a={},s;return t.forEach(o=>{var c=Kwe(e,o);s==null&&(s=Jwe(e,r,n));var f=r==="left"&&!i||r==="right"&&i;a[o.id]=s-Number(f)*c.width,s+=(f?-1:1)*c.width}),a}),nEe=(n,e)=>{var t=Nd(n,e);if(t!=null)return eEe(n,t.orientation,t.mirror)},rEe=Je([us,Nd,nEe,(n,e)=>e],(n,e,t,r)=>{if(e!=null){var i=t==null?void 0:t[r];return i==null?{x:n.left,y:0}:{x:n.left,y:i}}}),iEe=(n,e)=>{var t=Od(n,e);if(t!=null)return tEe(n,t.orientation,t.mirror)},aEe=Je([us,Od,iEe,(n,e)=>e],(n,e,t,r)=>{if(e!=null){var i=t==null?void 0:t[r];return i==null?{x:0,y:n.top}:{x:i,y:n.top}}}),sEe=Je(us,Od,(n,e)=>{var t=typeof e.width=="number"?e.width:s1;return{width:t,height:n.height}}),X$=(n,e,t,r)=>{if(t!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=t,o=vf(n,r),c=e.map(f=>f.value);if(s&&o&&a==="category"&&i&&KG(c))return c}},Ak=Je([fi,DC,fo,ka],X$),Y$=(n,e,t,r)=>{if(!(t==null||t.dataKey==null)){var{type:i,scale:a}=t,s=vf(n,r);if(s&&(i==="number"||a!=="auto"))return e.map(o=>o.value)}},Tk=Je([fi,DC,p1,ka],Y$),ZB=Je([fi,mwe,wy,LC,Ak,Tk,v1,Ek,ka],(n,e,t,r,i,a,s,o,c)=>{if(e!=null){var f=vf(n,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:a,duplicateDomain:i,isCategorical:f,niceTicks:o,range:s,realScaleType:t,scale:r}}}),oEe=(n,e,t,r,i,a,s,o,c)=>{if(!(e==null||r==null)){var f=vf(n,c),{type:d,ticks:p,tickCount:v}=e,y=t==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,x=d==="category"&&r.bandwidth?r.bandwidth()/y:0;x=c==="angleAxis"&&a!=null&&a.length>=2?Zl(a[0]-a[1])*2*x:x;var E=p||i;return E?E.map((S,w)=>{var R=s?s.indexOf(S):S,N=r.map(R);return nr(N)?{index:w,coordinate:N+x,value:S,offset:x}:null}).filter(Vo):f&&o?o.map((S,w)=>{var R=r.map(S);return nr(R)?{coordinate:R+x,value:S,index:w,offset:x}:null}).filter(Vo):r.ticks?r.ticks(v).map((S,w)=>{var R=r.map(S);return nr(R)?{coordinate:R+x,value:S,index:w,offset:x}:null}).filter(Vo):r.domain().map((S,w)=>{var R=r.map(S);return nr(R)?{coordinate:R+x,value:s?s[S]:S,index:w,offset:x}:null}).filter(Vo)}},K$=Je([fi,p1,wy,LC,Ek,v1,Ak,Tk,ka],oEe),lEe=(n,e,t,r,i,a,s)=>{if(!(e==null||t==null||r==null||r[0]===r[1])){var o=vf(n,s),{tickCount:c}=e,f=0;return f=s==="angleAxis"&&(r==null?void 0:r.length)>=2?Zl(r[0]-r[1])*2*f:f,o&&a?a.map((d,p)=>{var v=t.map(d);return nr(v)?{coordinate:v+f,value:d,index:p,offset:f}:null}).filter(Vo):t.ticks?t.ticks(c).map((d,p)=>{var v=t.map(d);return nr(v)?{coordinate:v+f,value:d,index:p,offset:f}:null}).filter(Vo):t.domain().map((d,p)=>{var v=t.map(d);return nr(v)?{coordinate:v+f,value:i?i[d]:d,index:p,offset:f}:null}).filter(Vo)}},Z$=Je([fi,p1,LC,v1,Ak,Tk,ka],lEe),Q$=Je(fo,LC,(n,e)=>{if(!(n==null||e==null))return IT(IT({},n),{},{scale:e})}),cEe=Je([fo,wy,Sk,q$],wk);Je((n,e,t)=>yk(n,t),cEe,(n,e)=>{if(!(n==null||e==null))return IT(IT({},n),{},{scale:e})});var uEe=Je([fi,hC,pC],(n,e,t)=>{switch(n){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return t.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),J$=n=>n.options.defaultTooltipEventType,eX=n=>n.options.validateTooltipEventTypes;function tX(n,e,t){if(n==null)return e;var r=n?"axis":"item";return t==null?e:t.includes(r)?r:e}function Mk(n,e){var t=J$(n),r=eX(n);return tX(e,t,r)}function fEe(n){return un(e=>Mk(e,n))}var nX=(n,e)=>{var t,r=Number(e);if(!(uf(r)||e==null))return r>=0?n==null||(t=n[r])===null||t===void 0?void 0:t.value:void 0},dEe=n=>n.tooltip.settings,Wh={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},hEe={itemInteraction:{click:Wh,hover:Wh},axisInteraction:{click:Wh,hover:Wh},keyboardInteraction:Wh,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},rX=Go({name:"tooltip",initialState:hEe,reducers:{addTooltipEntrySettings:{reducer(n,e){n.tooltipItemPayloads.push(e.payload)},prepare:ci()},replaceTooltipEntrySettings:{reducer(n,e){var{prev:t,next:r}=e.payload,i=Wc(n).tooltipItemPayloads.indexOf(t);i>-1&&(n.tooltipItemPayloads[i]=r)},prepare:ci()},removeTooltipEntrySettings:{reducer(n,e){var t=Wc(n).tooltipItemPayloads.indexOf(e.payload);t>-1&&n.tooltipItemPayloads.splice(t,1)},prepare:ci()},setTooltipSettingsState(n,e){n.settings=e.payload},setActiveMouseOverItemIndex(n,e){n.syncInteraction.active=!1,n.keyboardInteraction.active=!1,n.itemInteraction.hover.active=!0,n.itemInteraction.hover.index=e.payload.activeIndex,n.itemInteraction.hover.dataKey=e.payload.activeDataKey,n.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,n.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(n){n.itemInteraction.hover.active=!1,n.axisInteraction.hover.active=!1},mouseLeaveItem(n){n.itemInteraction.hover.active=!1},setActiveClickItemIndex(n,e){n.syncInteraction.active=!1,n.itemInteraction.click.active=!0,n.keyboardInteraction.active=!1,n.itemInteraction.click.index=e.payload.activeIndex,n.itemInteraction.click.dataKey=e.payload.activeDataKey,n.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,n.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(n,e){n.syncInteraction.active=!1,n.axisInteraction.hover.active=!0,n.keyboardInteraction.active=!1,n.axisInteraction.hover.index=e.payload.activeIndex,n.axisInteraction.hover.dataKey=e.payload.activeDataKey,n.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(n,e){n.syncInteraction.active=!1,n.keyboardInteraction.active=!1,n.axisInteraction.click.active=!0,n.axisInteraction.click.index=e.payload.activeIndex,n.axisInteraction.click.dataKey=e.payload.activeDataKey,n.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(n,e){n.syncInteraction=e.payload},setKeyboardInteraction(n,e){n.keyboardInteraction.active=e.payload.active,n.keyboardInteraction.index=e.payload.activeIndex,n.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:pEe,replaceTooltipEntrySettings:mEe,removeTooltipEntrySettings:gEe,setTooltipSettingsState:vEe,setActiveMouseOverItemIndex:yEe,mouseLeaveItem:zOe,mouseLeaveChart:iX,setActiveClickItemIndex:jOe,setMouseOverAxisIndex:aX,setMouseClickAxisIndex:bEe,setSyncInteraction:t3,setKeyboardInteraction:n3}=rX.actions,xEe=rX.reducer;function QB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function iE(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?QB(Object(t),!0).forEach(function(r){_Ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):QB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function _Ee(n,e,t){return(e=SEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function SEe(n){var e=wEe(n,"string");return typeof e=="symbol"?e:e+""}function wEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function EEe(n,e,t){return e==="axis"?t==="click"?n.axisInteraction.click:n.axisInteraction.hover:t==="click"?n.itemInteraction.click:n.itemInteraction.hover}function AEe(n){return n.index!=null}var sX=(n,e,t,r)=>{if(e==null)return Wh;var i=EEe(n,e,t);if(i==null)return Wh;if(i.active)return i;if(n.keyboardInteraction.active)return n.keyboardInteraction;if(n.syncInteraction.active&&n.syncInteraction.index!=null)return n.syncInteraction;var a=n.settings.active===!0;if(AEe(i)){if(a)return iE(iE({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return iE(iE({},Wh),{},{coordinate:i.coordinate})};function TEe(n){if(typeof n=="number")return Number.isFinite(n)?n:void 0;if(n instanceof Date){var e=n.valueOf();return Number.isFinite(e)?e:void 0}var t=Number(n);return Number.isFinite(t)?t:void 0}function MEe(n,e){var t=TEe(n),r=e[0],i=e[1];if(t===void 0)return!1;var a=Math.min(r,i),s=Math.max(r,i);return t>=a&&t<=s}function CEe(n,e,t){if(t==null||e==null)return!0;var r=ls(n,e);return r==null||!Td(t)?!0:MEe(r,t)}var Ck=(n,e,t,r)=>{var i=n==null?void 0:n.index;if(i==null)return null;var a=Number(i);if(!nr(a))return i;var s=0,o=1/0;e.length>0&&(o=e.length-1);var c=Math.max(s,Math.min(a,o)),f=e[c];return f==null||CEe(f,t,r)?String(c):null},oX=(n,e,t,r,i,a,s)=>{if(a!=null){var o=s[0],c=o==null?void 0:o.getPosition(a);if(c!=null)return c;var f=i==null?void 0:i[Number(a)];if(f)switch(t){case"horizontal":return{x:f.coordinate,y:(r.top+e)/2};default:return{x:(r.left+n)/2,y:f.coordinate}}}},lX=(n,e,t,r)=>{if(e==="axis")return n.tooltipItemPayloads;if(n.tooltipItemPayloads.length===0)return[];var i;if(t==="hover"?i=n.itemInteraction.hover.graphicalItemId:i=n.itemInteraction.click.graphicalItemId,i==null&&r!=null){var a=n.tooltipItemPayloads[0];return a!=null?[a]:[]}return n.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.graphicalItemId)===i})},cX=n=>n.options.tooltipPayloadSearcher,Ey=n=>n.tooltip;function JB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function e6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?JB(Object(t),!0).forEach(function(r){IEe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):JB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function IEe(n,e,t){return(e=REe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function REe(n){var e=PEe(n,"string");return typeof e=="symbol"?e:e+""}function PEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function NEe(n,e){return n??e}var uX=(n,e,t,r,i,a,s)=>{if(!(e==null||a==null)){var{chartData:o,computedData:c,dataStartIndex:f,dataEndIndex:d}=t,p=[];return n.reduce((v,y)=>{var x,{dataDefinedOnItem:E,settings:S}=y,w=NEe(E,o),R=Array.isArray(w)?jq(w,f,d):w,N=(x=S==null?void 0:S.dataKey)!==null&&x!==void 0?x:r,O=S==null?void 0:S.nameKey,z;if(r&&Array.isArray(R)&&!Array.isArray(R[0])&&s==="axis"?z=ZG(R,r,i):z=a(R,e,c,O),Array.isArray(z))z.forEach(U=>{var P=e6(e6({},S),{},{name:U.name,unit:U.unit,color:void 0,fill:void 0});v.push(tj({tooltipEntrySettings:P,dataKey:U.dataKey,payload:U.payload,value:ls(U.payload,U.dataKey),name:U.name}))});else{var k;v.push(tj({tooltipEntrySettings:S,dataKey:N,payload:z,value:ls(z,N),name:(k=ls(z,O))!==null&&k!==void 0?k:S==null?void 0:S.name}))}return v},p)}},Ik=Je([_a,v$,uk],B$),OEe=Je([n=>n.graphicalItems.cartesianItems,n=>n.graphicalItems.polarItems],(n,e)=>[...n,...e]),DEe=Je([Ua,_y],y$),Ay=Je([OEe,_a,DEe],x$,{memoizeOptions:{resultEqualityCheck:OC}}),LEe=Je([Ay],n=>n.filter(vk)),kEe=Je([Ay],w$,{memoizeOptions:{resultEqualityCheck:OC}}),Ty=Je([kEe,Pd],E$),UEe=Je([LEe,Pd,_a],p$),Rk=Je([Ty,_a,Ay],A$),fX=Je([_a],xk),FEe=Je([_a],n=>n.allowDataOverflow),dX=Je([fX,FEe],KW),zEe=Je([Ay],n=>n.filter(vk)),jEe=Je([UEe,zEe,MC,o$],M$),BEe=Je([jEe,Pd,Ua,dX],I$),VEe=Je([Ay],S$),HEe=Je([Ty,_a,VEe,_k,Ua],N$,{memoizeOptions:{resultEqualityCheck:NC}}),GEe=Je([O$,Ua,_y],Sy),qEe=Je([GEe,Ua],k$),WEe=Je([D$,Ua,_y],Sy),$Ee=Je([WEe,Ua],U$),XEe=Je([L$,Ua,_y],Sy),YEe=Je([XEe,Ua],F$),KEe=Je([qEe,YEe,$Ee],RT),ZEe=Je([_a,fX,dX,BEe,HEe,KEe,fi,Ua],z$),y1=Je([_a,fi,Ty,Rk,MC,Ua,ZEe],j$),QEe=Je([y1,_a,Ik],V$),JEe=Je([_a,y1,QEe,Ua],H$),hX=n=>{var e=Ua(n),t=_y(n),r=!1;return v1(n,e,t,r)},pX=Je([_a,hX],CC),mX=Je([_a,Ik,JEe,pX],wk),eAe=Je([fi,Rk,_a,Ua],X$),tAe=Je([fi,Rk,_a,Ua],Y$),nAe=(n,e,t,r,i,a,s,o)=>{if(e){var{type:c}=e,f=vf(n,o);if(r){var d=t==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,p=c==="category"&&r.bandwidth?r.bandwidth()/d:0;return p=o==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?Zl(i[0]-i[1])*2*p:p,f&&s?s.map((v,y)=>{var x=r.map(v);return nr(x)?{coordinate:x+p,value:v,index:y,offset:p}:null}).filter(Vo):r.domain().map((v,y)=>{var x=r.map(v);return nr(x)?{coordinate:x+p,value:a?a[v]:v,index:y,offset:p}:null}).filter(Vo)}}},Dd=Je([fi,_a,Ik,mX,hX,eAe,tAe,Ua],nAe),Pk=Je([J$,eX,dEe],(n,e,t)=>tX(t.shared,n,e)),gX=n=>n.tooltip.settings.trigger,Nk=n=>n.tooltip.settings.defaultIndex,b1=Je([Ey,Pk,gX,Nk],sX),P_=Je([b1,Ty,g1,y1],Ck),vX=Je([Dd,P_],nX),rAe=Je([b1],n=>{if(n)return n.dataKey});Je([b1],n=>{if(n)return n.graphicalItemId});var yX=Je([Ey,Pk,gX,Nk],lX),iAe=Je([Cd,Id,fi,us,Dd,Nk,yX],oX),aAe=Je([b1,iAe],(n,e)=>n!=null&&n.coordinate?n.coordinate:e),sAe=Je([b1],n=>{var e;return(e=n==null?void 0:n.active)!==null&&e!==void 0?e:!1}),oAe=Je([yX,P_,Pd,g1,vX,cX,Pk],uX),lAe=Je([oAe],n=>{if(n!=null){var e=n.map(t=>t.payload).filter(t=>t!=null);return Array.from(new Set(e))}});function t6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function n6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?t6(Object(t),!0).forEach(function(r){cAe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):t6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function cAe(n,e,t){return(e=uAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uAe(n){var e=fAe(n,"string");return typeof e=="symbol"?e:e+""}function fAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var dAe=()=>un(_a),hAe=()=>{var n=dAe(),e=un(Dd),t=un(mX);return oT(!n||!t?void 0:n6(n6({},n),{},{scale:t}),e)};function r6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ov(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?r6(Object(t),!0).forEach(function(r){pAe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):r6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function pAe(n,e,t){return(e=mAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mAe(n){var e=gAe(n,"string");return typeof e=="symbol"?e:e+""}function gAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var vAe=(n,e,t,r)=>{var i=e.find(a=>a&&a.index===t);if(i){if(n==="horizontal")return{x:i.coordinate,y:r.chartY};if(n==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},yAe=(n,e,t,r)=>{var i=e.find(f=>f&&f.index===t);if(i){if(n==="centric"){var a=i.coordinate,{radius:s}=r;return ov(ov(ov({},r),ss(r.cx,r.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:c}=r;return ov(ov(ov({},r),ss(r.cx,r.cy,o,c)),{},{angle:c,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function bAe(n,e){var{chartX:t,chartY:r}=n;return t>=e.left&&t<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var bX=(n,e,t,r,i)=>{var a,s=(a=e==null?void 0:e.length)!==null&&a!==void 0?a:0;if(s<=1||n==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var o=0;o<s;o++){var c,f,d,p,v,y=o>0?(c=t[o-1])===null||c===void 0?void 0:c.coordinate:(f=t[s-1])===null||f===void 0?void 0:f.coordinate,x=(d=t[o])===null||d===void 0?void 0:d.coordinate,E=o>=s-1?(p=t[0])===null||p===void 0?void 0:p.coordinate:(v=t[o+1])===null||v===void 0?void 0:v.coordinate,S=void 0;if(!(y==null||x==null||E==null))if(Zl(x-y)!==Zl(E-x)){var w=[];if(Zl(E-x)===Zl(i[1]-i[0])){S=E;var R=x+i[1]-i[0];w[0]=Math.min(R,(R+y)/2),w[1]=Math.max(R,(R+y)/2)}else{S=y;var N=E+i[1]-i[0];w[0]=Math.min(x,(N+x)/2),w[1]=Math.max(x,(N+x)/2)}var O=[Math.min(x,(S+x)/2),Math.max(x,(S+x)/2)];if(n>O[0]&&n<=O[1]||n>=w[0]&&n<=w[1]){var z;return(z=t[o])===null||z===void 0?void 0:z.index}}else{var k=Math.min(y,E),U=Math.max(y,E);if(n>(k+x)/2&&n<=(U+x)/2){var P;return(P=t[o])===null||P===void 0?void 0:P.index}}}else if(e)for(var C=0;C<s;C++){var L=e[C];if(L!=null){var j=e[C+1],B=e[C-1];if(C===0&&j!=null&&n<=(L.coordinate+j.coordinate)/2||C===s-1&&B!=null&&n>(L.coordinate+B.coordinate)/2||C>0&&C<s-1&&B!=null&&j!=null&&n>(L.coordinate+B.coordinate)/2&&n<=(L.coordinate+j.coordinate)/2)return L.index}}return-1},xX=()=>un(uk),Ok=(n,e)=>e,_X=(n,e,t)=>t,Dk=(n,e,t,r)=>r,xAe=Je(Dd,n=>rC(n,e=>e.coordinate)),Lk=Je([Ey,Ok,_X,Dk],sX),kk=Je([Lk,Ty,g1,y1],Ck),_Ae=(n,e,t)=>{if(e!=null){var r=Ey(n);return e==="axis"?t==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:t==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},SX=Je([Ey,Ok,_X,Dk],lX),PT=Je([Cd,Id,fi,us,Dd,Dk,SX],oX),SAe=Je([Lk,PT],(n,e)=>{var t;return(t=n.coordinate)!==null&&t!==void 0?t:e}),wX=Je([Dd,kk],nX),wAe=Je([SX,kk,Pd,g1,wX,cX,Ok],uX),EAe=Je([Lk,kk],(n,e)=>({isActive:n.active&&e!=null,activeIndex:e})),AAe=(n,e,t,r,i,a,s)=>{if(!(!n||!t||!r||!i)&&bAe(n,s)){var o=Kye(n,e),c=bX(o,a,i,t,r),f=vAe(e,i,c,n);return{activeIndex:String(c),activeCoordinate:f}}},TAe=(n,e,t,r,i,a,s)=>{if(!(!n||!r||!i||!a||!t)){var o=o_e(n,t);if(o){var c=Zye(o,e),f=bX(c,s,a,r,i),d=yAe(e,a,f,o);return{activeIndex:String(f),activeCoordinate:d}}}},MAe=(n,e,t,r,i,a,s,o)=>{if(!(!n||!e||!r||!i||!a))return e==="horizontal"||e==="vertical"?AAe(n,e,r,i,a,s,o):TAe(n,e,t,r,i,a,s)},CAe=Je(n=>n.zIndex.zIndexMap,(n,e)=>e,(n,e,t)=>t,(n,e,t)=>{if(e!=null){var r=n[e];if(r!=null)return t?r.panoramaElement:r.element}}),IAe=Je(n=>n.zIndex.zIndexMap,n=>{var e=Object.keys(n).map(r=>parseInt(r,10)).concat(Object.values(so)),t=Array.from(new Set(e));return t.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:lwe}});function i6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function a6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?i6(Object(t),!0).forEach(function(r){RAe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):i6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function RAe(n,e,t){return(e=PAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function PAe(n){var e=NAe(n,"string");return typeof e=="symbol"?e:e+""}function NAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var OAe={},DAe={zIndexMap:Object.values(so).reduce((n,e)=>a6(a6({},n),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),OAe)},LAe=new Set(Object.values(so));function kAe(n){return LAe.has(n)}var EX=Go({name:"zIndex",initialState:DAe,reducers:{registerZIndexPortal:{reducer:(n,e)=>{var{zIndex:t}=e.payload;n.zIndexMap[t]?n.zIndexMap[t].consumers+=1:n.zIndexMap[t]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:ci()},unregisterZIndexPortal:{reducer:(n,e)=>{var{zIndex:t}=e.payload;n.zIndexMap[t]&&(n.zIndexMap[t].consumers-=1,n.zIndexMap[t].consumers<=0&&!kAe(t)&&delete n.zIndexMap[t])},prepare:ci()},registerZIndexPortalElement:{reducer:(n,e)=>{var{zIndex:t,element:r,isPanorama:i}=e.payload;n.zIndexMap[t]?i?n.zIndexMap[t].panoramaElement=r:n.zIndexMap[t].element=r:n.zIndexMap[t]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:ci()},unregisterZIndexPortalElement:{reducer:(n,e)=>{var{zIndex:t}=e.payload;n.zIndexMap[t]&&(e.payload.isPanorama?n.zIndexMap[t].panoramaElement=void 0:n.zIndexMap[t].element=void 0)},prepare:ci()}}}),{registerZIndexPortal:UAe,unregisterZIndexPortal:FAe,registerZIndexPortalElement:zAe,unregisterZIndexPortalElement:jAe}=EX.actions,BAe=EX.reducer;function Ld(n){var{zIndex:e,children:t}=n,r=Rbe(),i=r&&e!==void 0&&e!==0,a=qo(),s=Da();G.useLayoutEffect(()=>i?(s(UAe({zIndex:e})),()=>{s(FAe({zIndex:e}))}):gy,[s,e,i]);var o=un(c=>CAe(c,e,a));return i?o?gV.createPortal(t,o):null:t}function r3(){return r3=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r3.apply(null,arguments)}function s6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function aE(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?s6(Object(t),!0).forEach(function(r){VAe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):s6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function VAe(n,e,t){return(e=HAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function HAe(n){var e=GAe(n,"string");return typeof e=="symbol"?e:e+""}function GAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qAe(n){var{cursor:e,cursorComp:t,cursorProps:r}=n;return G.isValidElement(e)?G.cloneElement(e,r):G.createElement(t,r)}function WAe(n){var e,{coordinate:t,payload:r,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:c,tooltipEventType:f,chartName:d}=n,p=t,v=r,y=i;if(!c||!p||d!=="ScatterChart"&&f!=="axis")return null;var x,E,S;if(d==="ScatterChart")x=p,E=yxe,S=so.cursorLine;else if(d==="BarChart")x=bxe(o,p,a,s),E=Zxe,S=so.cursorRectangle;else if(o==="radial"&&QG(p)){var{cx:w,cy:R,radius:N,startAngle:O,endAngle:z}=dW(p);x={cx:w,cy:R,startAngle:O,endAngle:z,innerRadius:N,outerRadius:N},E=f_e,S=so.cursorLine}else x={points:d_e(o,p,a)},E=EE,S=so.cursorLine;var k=typeof c=="object"&&"className"in c?c.className:void 0,U=aE(aE(aE(aE({stroke:"#ccc",pointerEvents:"none"},a),x),JM(c)),{},{payload:v,payloadIndex:y,className:ni("recharts-tooltip-cursor",k)});return G.createElement(Ld,{zIndex:(e=n.zIndex)!==null&&e!==void 0?e:S},G.createElement(qAe,{cursor:c,cursorComp:E,cursorProps:U}))}function $Ae(n){var e=hAe(),t=Yq(),r=vy(),i=xX();return e==null||t==null||r==null||i==null?null:G.createElement(WAe,r3({},n,{offset:t,layout:r,tooltipAxisBandSize:e,chartName:i}))}var AX=G.createContext(null),XAe=()=>G.useContext(AX),rN={exports:{}},o6;function YAe(){return o6||(o6=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(c,f,d){this.fn=c,this.context=f,this.once=d||!1}function a(c,f,d,p,v){if(typeof d!="function")throw new TypeError("The listener must be a function");var y=new i(d,p||c,v),x=t?t+f:f;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],y]:c._events[x].push(y):(c._events[x]=y,c._eventsCount++),c}function s(c,f){--c._eventsCount===0?c._events=new r:delete c._events[f]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var f=[],d,p;if(this._eventsCount===0)return f;for(p in d=this._events)e.call(d,p)&&f.push(t?p.slice(1):p);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(d)):f},o.prototype.listeners=function(f){var d=t?t+f:f,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var v=0,y=p.length,x=new Array(y);v<y;v++)x[v]=p[v].fn;return x},o.prototype.listenerCount=function(f){var d=t?t+f:f,p=this._events[d];return p?p.fn?1:p.length:0},o.prototype.emit=function(f,d,p,v,y,x){var E=t?t+f:f;if(!this._events[E])return!1;var S=this._events[E],w=arguments.length,R,N;if(S.fn){switch(S.once&&this.removeListener(f,S.fn,void 0,!0),w){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,d),!0;case 3:return S.fn.call(S.context,d,p),!0;case 4:return S.fn.call(S.context,d,p,v),!0;case 5:return S.fn.call(S.context,d,p,v,y),!0;case 6:return S.fn.call(S.context,d,p,v,y,x),!0}for(N=1,R=new Array(w-1);N<w;N++)R[N-1]=arguments[N];S.fn.apply(S.context,R)}else{var O=S.length,z;for(N=0;N<O;N++)switch(S[N].once&&this.removeListener(f,S[N].fn,void 0,!0),w){case 1:S[N].fn.call(S[N].context);break;case 2:S[N].fn.call(S[N].context,d);break;case 3:S[N].fn.call(S[N].context,d,p);break;case 4:S[N].fn.call(S[N].context,d,p,v);break;default:if(!R)for(z=1,R=new Array(w-1);z<w;z++)R[z-1]=arguments[z];S[N].fn.apply(S[N].context,R)}}return!0},o.prototype.on=function(f,d,p){return a(this,f,d,p,!1)},o.prototype.once=function(f,d,p){return a(this,f,d,p,!0)},o.prototype.removeListener=function(f,d,p,v){var y=t?t+f:f;if(!this._events[y])return this;if(!d)return s(this,y),this;var x=this._events[y];if(x.fn)x.fn===d&&(!v||x.once)&&(!p||x.context===p)&&s(this,y);else{for(var E=0,S=[],w=x.length;E<w;E++)(x[E].fn!==d||v&&!x[E].once||p&&x[E].context!==p)&&S.push(x[E]);S.length?this._events[y]=S.length===1?S[0]:S:s(this,y)}return this},o.prototype.removeAllListeners=function(f){var d;return f?(d=t?t+f:f,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,n.exports=o})(rN)),rN.exports}var KAe=YAe();const ZAe=Kc(KAe);var N_=new ZAe,i3="recharts.syncEvent.tooltip",l6="recharts.syncEvent.brush",QAe=(n,e)=>{if(e&&Array.isArray(n)){var t=Number.parseInt(e,10);if(!uf(t))return n[t]}},JAe={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},TX=Go({name:"options",initialState:JAe,reducers:{createEventEmitter:n=>{n.eventEmitter==null&&(n.eventEmitter=Symbol("rechartsEventEmitter"))}}}),eTe=TX.reducer,{createEventEmitter:tTe}=TX.actions;function nTe(n){return n.tooltip.syncInteraction}var rTe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},MX=Go({name:"chartData",initialState:rTe,reducers:{setChartData(n,e){if(n.chartData=e.payload,e.payload==null){n.dataStartIndex=0,n.dataEndIndex=0;return}e.payload.length>0&&n.dataEndIndex!==e.payload.length-1&&(n.dataEndIndex=e.payload.length-1)},setComputedData(n,e){n.computedData=e.payload},setDataStartEndIndexes(n,e){var{startIndex:t,endIndex:r}=e.payload;t!=null&&(n.dataStartIndex=t),r!=null&&(n.dataEndIndex=r)}}}),{setChartData:c6,setDataStartEndIndexes:iTe,setComputedData:BOe}=MX.actions,aTe=MX.reducer,sTe=["x","y"];function u6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function lv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?u6(Object(t),!0).forEach(function(r){oTe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):u6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function oTe(n,e,t){return(e=lTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lTe(n){var e=cTe(n,"string");return typeof e=="symbol"?e:e+""}function cTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function uTe(n,e){if(n==null)return{};var t,r,i=fTe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function fTe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function dTe(){var n=un(fk),e=un(dk),t=Da(),r=un(l$),i=un(Dd),a=vy(),s=vC(),o=un(c=>c.rootProps.className);G.useEffect(()=>{if(n==null)return gy;var c=(f,d,p)=>{if(e!==p&&n===f){if(r==="index"){var v;if(s&&d!==null&&d!==void 0&&(v=d.payload)!==null&&v!==void 0&&v.coordinate&&d.payload.sourceViewBox){var y=d.payload.coordinate,{x,y:E}=y,S=uTe(y,sTe),{x:w,y:R,width:N,height:O}=d.payload.sourceViewBox,z=lv(lv({},S),{},{x:s.x+(N?(x-w)/N:0)*s.width,y:s.y+(O?(E-R)/O:0)*s.height});t(lv(lv({},d),{},{payload:lv(lv({},d.payload),{},{coordinate:z})}))}else t(d);return}if(i!=null){var k;if(typeof r=="function"){var U={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},P=r(i,U);k=i[P]}else r==="value"&&(k=i.find(W=>String(W.value)===d.payload.label));var{coordinate:C}=d.payload;if(k==null||d.payload.active===!1||C==null||s==null){t(t3({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:L,y:j}=C,B=Math.min(L,s.x+s.width),V=Math.min(j,s.y+s.height),Q={x:a==="horizontal"?k.coordinate:B,y:a==="horizontal"?V:k.coordinate},J=t3({active:d.payload.active,coordinate:Q,dataKey:d.payload.dataKey,index:String(k.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});t(J)}}};return N_.on(i3,c),()=>{N_.off(i3,c)}},[o,t,e,n,r,i,a,s])}function hTe(){var n=un(fk),e=un(dk),t=Da();G.useEffect(()=>{if(n==null)return gy;var r=(i,a,s)=>{e!==s&&n===i&&t(iTe(a))};return N_.on(l6,r),()=>{N_.off(l6,r)}},[t,e,n])}function pTe(){var n=Da();G.useEffect(()=>{n(tTe())},[n]),dTe(),hTe()}function mTe(n,e,t,r,i,a){var s=un(y=>_Ae(y,n,e)),o=un(dk),c=un(fk),f=un(l$),d=un(nTe),p=d==null?void 0:d.active,v=vC();G.useEffect(()=>{if(!p&&c!=null&&o!=null){var y=t3({active:a,coordinate:t,dataKey:s,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:v,graphicalItemId:void 0});N_.emit(i3,c,y,o)}},[p,t,s,i,r,o,c,f,a,v])}function f6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function d6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?f6(Object(t),!0).forEach(function(r){gTe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):f6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function gTe(n,e,t){return(e=vTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vTe(n){var e=yTe(n,"string");return typeof e=="symbol"?e:e+""}function yTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function bTe(n){return n.dataKey}function xTe(n,e){return G.isValidElement(n)?G.cloneElement(n,e):typeof n=="function"?G.createElement(n,e):G.createElement(Zbe,e)}var h6=[],_Te={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function STe(n){var e,t,r=yl(n,_Te),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:c,filterNull:f,isAnimationActive:d,offset:p,payloadUniqBy:v,position:y,reverseDirection:x,useTranslate3d:E,wrapperStyle:S,cursor:w,shared:R,trigger:N,defaultIndex:O,portal:z,axisId:k}=r,U=Da(),P=typeof O=="number"?String(O):O;G.useEffect(()=>{U(vEe({shared:R,trigger:N,axisId:k,active:i,defaultIndex:P}))},[U,R,N,k,i,P]);var C=vC(),L=sW(),j=fEe(R),{activeIndex:B,isActive:V}=(e=un(Ee=>EAe(Ee,j,N,P)))!==null&&e!==void 0?e:{},Q=un(Ee=>wAe(Ee,j,N,P)),J=un(Ee=>wX(Ee,j,N,P)),W=un(Ee=>SAe(Ee,j,N,P)),$=Q,se=XAe(),ce=(t=i??V)!==null&&t!==void 0?t:!1,[fe,Z]=Uve([$,ce]),re=j==="axis"?J:void 0;mTe(j,N,W,re,B,ce);var de=z??se;if(de==null||C==null||j==null)return null;var ve=$??h6;ce||(ve=h6),f&&ve.length&&(ve=pve(ve.filter(Ee=>Ee.value!=null&&(Ee.hide!==!0||r.includeHidden)),v,bTe));var pe=ve.length>0,ye=G.createElement(ixe,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:d,active:ce,coordinate:W,hasPayload:pe,offset:p,position:y,reverseDirection:x,useTranslate3d:E,viewBox:C,wrapperStyle:S,lastBoundingBox:fe,innerRef:Z,hasPortalFromProps:!!z},xTe(c,d6(d6({},r),{},{payload:ve,label:re,active:ce,activeIndex:B,coordinate:W,accessibilityLayer:L})));return G.createElement(G.Fragment,null,gV.createPortal(ye,de),ce&&G.createElement($Ae,{cursor:w,tooltipEventType:j,coordinate:W,payload:ve,index:B}))}function wTe(n,e,t){return(e=ETe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ETe(n){var e=ATe(n,"string");return typeof e=="symbol"?e:e+""}function ATe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class TTe{constructor(e){wTe(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return t!==void 0&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}function p6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function MTe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?p6(Object(t),!0).forEach(function(r){CTe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):p6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function CTe(n,e,t){return(e=ITe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ITe(n){var e=RTe(n,"string");return typeof e=="symbol"?e:e+""}function RTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var PTe={cacheSize:2e3,enableCache:!0},CX=MTe({},PTe),m6=new TTe(CX.cacheSize),NTe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},g6="recharts_measurement_span";function OTe(n,e){var t=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",o=e.textTransform||"";return"".concat(n,"|").concat(t,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var v6=(n,e)=>{try{var t=document.getElementById(g6);t||(t=document.createElement("span"),t.setAttribute("id",g6),t.setAttribute("aria-hidden","true"),document.body.appendChild(t)),Object.assign(t.style,NTe,e),t.textContent="".concat(n);var r=t.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Bx=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||c1.isSsr)return{width:0,height:0};if(!CX.enableCache)return v6(e,t);var r=OTe(e,t),i=m6.get(r);if(i)return i;var a=v6(e,t);return m6.set(r,a),a},IX;function DTe(n,e,t){return(e=LTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function LTe(n){var e=kTe(n,"string");return typeof e=="symbol"?e:e+""}function kTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var y6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,b6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,UTe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,FTe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,zTe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},jTe=["cm","mm","pt","pc","in","Q","px"];function BTe(n){return jTe.includes(n)}var xv="NaN";function VTe(n,e){return n*zTe[e]}class ns{static parse(e){var t,[,r,i]=(t=FTe.exec(e))!==null&&t!==void 0?t:[];return r==null?ns.NaN:new ns(parseFloat(r),i??"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,uf(e)&&(this.unit=""),t!==""&&!UTe.test(t)&&(this.num=NaN,this.unit=""),BTe(t)&&(this.num=VTe(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new ns(NaN,""):new ns(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new ns(NaN,""):new ns(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ns(NaN,""):new ns(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ns(NaN,""):new ns(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return uf(this.num)}}IX=ns;DTe(ns,"NaN",new IX(NaN,""));function RX(n){if(n==null||n.includes(xv))return xv;for(var e=n;e.includes("*")||e.includes("/");){var t,[,r,i,a]=(t=y6.exec(e))!==null&&t!==void 0?t:[],s=ns.parse(r??""),o=ns.parse(a??""),c=i==="*"?s.multiply(o):s.divide(o);if(c.isNaN())return xv;e=e.replace(y6,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,[,d,p,v]=(f=b6.exec(e))!==null&&f!==void 0?f:[],y=ns.parse(d??""),x=ns.parse(v??""),E=p==="+"?y.add(x):y.subtract(x);if(E.isNaN())return xv;e=e.replace(b6,E.toString())}return e}var x6=/\(([^()]*)\)/;function HTe(n){for(var e=n,t;(t=x6.exec(e))!=null;){var[,r]=t;e=e.replace(x6,RX(r))}return e}function GTe(n){var e=n.replace(/\s+/g,"");return e=HTe(e),e=RX(e),e}function qTe(n){try{return GTe(n)}catch{return xv}}function iN(n){var e=qTe(n.slice(5,-1));return e===xv?"":e}var WTe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],$Te=["dx","dy","angle","className","breakAll"];function a3(){return a3=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},a3.apply(null,arguments)}function _6(n,e){if(n==null)return{};var t,r,i=XTe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function XTe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var PX=/[ \f\n\r\t\v\u2028\u2029]+/,NX=n=>{var{children:e,breakAll:t,style:r}=n;try{var i=[];Us(e)||(t?i=e.toString().split(""):i=e.toString().split(PX));var a=i.map(o=>({word:o,width:Bx(o,r).width})),s=t?0:Bx("",r).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function YTe(n){return n==="start"||n==="middle"||n==="end"||n==="inherit"}var OX=(n,e,t,r)=>n.reduce((i,a)=>{var{word:s,width:o}=a,c=i[i.length-1];if(c&&o!=null&&(e==null||r||c.width+o+t<Number(e)))c.words.push(s),c.width+=o+t;else{var f={words:[s],width:o};i.push(f)}return i},[]),DX=n=>n.reduce((e,t)=>e.width>t.width?e:t),KTe="",S6=(n,e,t,r,i,a,s,o)=>{var c=n.slice(0,e),f=NX({breakAll:t,style:r,children:c+KTe});if(!f)return[!1,[]];var d=OX(f.wordsWithComputedWidth,a,s,o),p=d.length>i||DX(d).width>Number(a);return[p,d]},ZTe=(n,e,t,r,i)=>{var{maxLines:a,children:s,style:o,breakAll:c}=n,f=en(a),d=String(s),p=OX(e,r,t,i);if(!f||i)return p;var v=p.length>a||DX(p).width>Number(r);if(!v)return p;for(var y=0,x=d.length-1,E=0,S;y<=x&&E<=d.length-1;){var w=Math.floor((y+x)/2),R=w-1,[N,O]=S6(d,R,c,o,a,r,t,i),[z]=S6(d,w,c,o,a,r,t,i);if(!N&&!z&&(y=w+1),N&&z&&(x=w-1),!N&&z){S=O;break}E++}return S||p},w6=n=>{var e=Us(n)?[]:n.toString().split(PX);return[{words:e,width:void 0}]},QTe=n=>{var{width:e,scaleToFit:t,children:r,style:i,breakAll:a,maxLines:s}=n;if((e||t)&&!c1.isSsr){var o,c,f=NX({breakAll:a,children:r,style:i});if(f){var{wordsWithComputedWidth:d,spaceWidth:p}=f;o=d,c=p}else return w6(r);return ZTe({breakAll:a,children:r,maxLines:s,style:i},o,c,e,!!t)}return w6(r)},LX="#808080",JTe={angle:0,breakAll:!1,capHeight:"0.71em",fill:LX,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Uk=G.forwardRef((n,e)=>{var t=yl(n,JTe),{x:r,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:c,textAnchor:f,verticalAnchor:d}=t,p=_6(t,WTe),v=G.useMemo(()=>QTe({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:c,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,c,p.style,p.width]),{dx:y,dy:x,angle:E,className:S,breakAll:w}=p,R=_6(p,$Te);if(!ff(r)||!ff(i)||v.length===0)return null;var N=Number(r)+(en(y)?y:0),O=Number(i)+(en(x)?x:0);if(!nr(N)||!nr(O))return null;var z;switch(d){case"start":z=iN("calc(".concat(s,")"));break;case"middle":z=iN("calc(".concat((v.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:z=iN("calc(".concat(v.length-1," * -").concat(a,")"));break}var k=[],U=v[0];if(c&&U!=null){var P=U.width,{width:C}=p;k.push("scale(".concat(en(C)&&en(P)?C/P:1,")"))}return E&&k.push("rotate(".concat(E,", ").concat(N,", ").concat(O,")")),k.length&&(R.transform=k.join(" ")),G.createElement("text",a3({},rc(R),{ref:e,x:N,y:O,className:ni("recharts-text",S),textAnchor:f,fill:o.includes("url")?LX:o}),v.map((L,j)=>{var B=L.words.join(w?"":" ");return G.createElement("tspan",{x:N,dy:j===0?z:a,key:"".concat(B,"-").concat(j)},B)}))});Uk.displayName="Text";function E6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Uu(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?E6(Object(t),!0).forEach(function(r){eMe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):E6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function eMe(n,e,t){return(e=tMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tMe(n){var e=nMe(n,"string");return typeof e=="symbol"?e:e+""}function nMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var rMe=n=>{var{viewBox:e,position:t,offset:r=0,parentViewBox:i}=n,{x:a,y:s,height:o,upperWidth:c,lowerWidth:f}=LL(e),d=a,p=a+(c-f)/2,v=(d+p)/2,y=(c+f)/2,x=d+c/2,E=o>=0?1:-1,S=E*r,w=E>0?"end":"start",R=E>0?"start":"end",N=c>=0?1:-1,O=N*r,z=N>0?"end":"start",k=N>0?"start":"end",U=i;if(t==="top"){var P={x:d+c/2,y:s-S,horizontalAnchor:"middle",verticalAnchor:w};return U&&(P.height=Math.max(s-U.y,0),P.width=c),P}if(t==="bottom"){var C={x:p+f/2,y:s+o+S,horizontalAnchor:"middle",verticalAnchor:R};return U&&(C.height=Math.max(U.y+U.height-(s+o),0),C.width=f),C}if(t==="left"){var L={x:v-O,y:s+o/2,horizontalAnchor:z,verticalAnchor:"middle"};return U&&(L.width=Math.max(L.x-U.x,0),L.height=o),L}if(t==="right"){var j={x:v+y+O,y:s+o/2,horizontalAnchor:k,verticalAnchor:"middle"};return U&&(j.width=Math.max(U.x+U.width-j.x,0),j.height=o),j}var B=U?{width:y,height:o}:{};return t==="insideLeft"?Uu({x:v+O,y:s+o/2,horizontalAnchor:k,verticalAnchor:"middle"},B):t==="insideRight"?Uu({x:v+y-O,y:s+o/2,horizontalAnchor:z,verticalAnchor:"middle"},B):t==="insideTop"?Uu({x:d+c/2,y:s+S,horizontalAnchor:"middle",verticalAnchor:R},B):t==="insideBottom"?Uu({x:p+f/2,y:s+o-S,horizontalAnchor:"middle",verticalAnchor:w},B):t==="insideTopLeft"?Uu({x:d+O,y:s+S,horizontalAnchor:k,verticalAnchor:R},B):t==="insideTopRight"?Uu({x:d+c-O,y:s+S,horizontalAnchor:z,verticalAnchor:R},B):t==="insideBottomLeft"?Uu({x:p+O,y:s+o-S,horizontalAnchor:k,verticalAnchor:w},B):t==="insideBottomRight"?Uu({x:p+f-O,y:s+o-S,horizontalAnchor:z,verticalAnchor:w},B):t&&typeof t=="object"&&(en(t.x)||yg(t.x))&&(en(t.y)||yg(t.y))?Uu({x:a+yp(t.x,y),y:s+yp(t.y,o),horizontalAnchor:"end",verticalAnchor:"end"},B):Uu({x,y:s+o/2,horizontalAnchor:"middle",verticalAnchor:"middle"},B)},iMe=["labelRef"],aMe=["content"];function A6(n,e){if(n==null)return{};var t,r,i=sMe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function sMe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function T6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function wx(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?T6(Object(t),!0).forEach(function(r){oMe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):T6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function oMe(n,e,t){return(e=lMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lMe(n){var e=cMe(n,"string");return typeof e=="symbol"?e:e+""}function cMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function od(){return od=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},od.apply(null,arguments)}var kX=G.createContext(null),uMe=n=>{var{x:e,y:t,upperWidth:r,lowerWidth:i,width:a,height:s,children:o}=n,c=G.useMemo(()=>({x:e,y:t,upperWidth:r,lowerWidth:i,width:a,height:s}),[e,t,r,i,a,s]);return G.createElement(kX.Provider,{value:c},o)},UX=()=>{var n=G.useContext(kX),e=vC();return n||(e?LL(e):void 0)},fMe=G.createContext(null),dMe=()=>{var n=G.useContext(fMe),e=un(h$);return n||e},hMe=n=>{var{value:e,formatter:t}=n,r=Us(n.children)?e:n.children;return typeof t=="function"?t(r):r},Fk=n=>n!=null&&typeof n=="function",pMe=(n,e)=>{var t=Zl(e-n),r=Math.min(Math.abs(e-n),360);return t*r},mMe=(n,e,t,r,i)=>{var{offset:a,className:s}=n,{cx:o,cy:c,innerRadius:f,outerRadius:d,startAngle:p,endAngle:v,clockWise:y}=i,x=(f+d)/2,E=pMe(p,v),S=E>=0?1:-1,w,R;switch(e){case"insideStart":w=p+S*a,R=y;break;case"insideEnd":w=v-S*a,R=!y;break;case"end":w=v+S*a,R=y;break;default:throw new Error("Unsupported position ".concat(e))}R=E<=0?R:!R;var N=ss(o,c,x,w),O=ss(o,c,x,w+(R?1:-1)*359),z="M".concat(N.x,",").concat(N.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(R?0:1,`,
    `).concat(O.x,",").concat(O.y),k=Us(n.id)?y_("recharts-radial-line-"):n.id;return G.createElement("text",od({},r,{dominantBaseline:"central",className:ni("recharts-radial-bar-label",s)}),G.createElement("defs",null,G.createElement("path",{id:k,d:z})),G.createElement("textPath",{xlinkHref:"#".concat(k)},t))},gMe=(n,e,t)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:c}=n,f=(o+c)/2;if(t==="outside"){var{x:d,y:p}=ss(r,i,s+e,f);return{x:d,y:p,textAnchor:d>=r?"start":"end",verticalAnchor:"middle"}}if(t==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(t==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(t==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var v=(a+s)/2,{x:y,y:x}=ss(r,i,v,f);return{x:y,y:x,textAnchor:"middle",verticalAnchor:"middle"}},TE=n=>n!=null&&"cx"in n&&en(n.cx),vMe={angle:0,offset:5,zIndex:so.label,position:"middle",textBreakAll:!1};function yMe(n){if(!TE(n))return n;var{cx:e,cy:t,outerRadius:r}=n,i=r*2;return{x:e-r,y:t-r,width:i,upperWidth:i,lowerWidth:i,height:i}}function zh(n){var e=yl(n,vMe),{viewBox:t,parentViewBox:r,position:i,value:a,children:s,content:o,className:c="",textBreakAll:f,labelRef:d}=e,p=dMe(),v=UX(),y=i==="center"?v:p??v,x,E,S;t==null?x=y:TE(t)?x=t:x=LL(t);var w=yMe(x);if(!x||Us(a)&&Us(s)&&!G.isValidElement(o)&&typeof o!="function")return null;var R=wx(wx({},e),{},{viewBox:x});if(G.isValidElement(o)){var{labelRef:N}=R,O=A6(R,iMe);return G.cloneElement(o,O)}if(typeof o=="function"){var{content:z}=R,k=A6(R,aMe);if(E=G.createElement(o,k),G.isValidElement(E))return E}else E=hMe(e);var U=rc(e);if(TE(x)){if(i==="insideStart"||i==="insideEnd"||i==="end")return mMe(e,i,E,U,x);S=gMe(x,e.offset,e.position)}else{if(!w)return null;var P=rMe({viewBox:w,position:i,offset:e.offset,parentViewBox:TE(r)?void 0:r});S=wx(wx({x:P.x,y:P.y,textAnchor:P.horizontalAnchor,verticalAnchor:P.verticalAnchor},P.width!==void 0?{width:P.width}:{}),P.height!==void 0?{height:P.height}:{})}return G.createElement(Ld,{zIndex:e.zIndex},G.createElement(Uk,od({ref:d,className:ni("recharts-label",c)},U,S,{textAnchor:YTe(U.textAnchor)?U.textAnchor:S.textAnchor,breakAll:f}),E))}zh.displayName="Label";var bMe=(n,e,t)=>{if(!n)return null;var r={viewBox:e,labelRef:t};return n===!0?G.createElement(zh,od({key:"label-implicit"},r)):ff(n)?G.createElement(zh,od({key:"label-implicit",value:n},r)):G.isValidElement(n)?n.type===zh?G.cloneElement(n,wx({key:"label-implicit"},r)):G.createElement(zh,od({key:"label-implicit",content:n},r)):Fk(n)?G.createElement(zh,od({key:"label-implicit",content:n},r)):n&&typeof n=="object"?G.createElement(zh,od({},n,{key:"label-implicit"},r)):null};function xMe(n){var{label:e,labelRef:t}=n,r=UX();return bMe(e,r,t)||null}var aN={},sN={},M6;function _Me(){return M6||(M6=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t[t.length-1]}n.last=e})(sN)),sN}var oN={},C6;function SMe(){return C6||(C6=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Array.isArray(t)?t:Array.from(t)}n.toArray=e})(oN)),oN}var I6;function wMe(){return I6||(I6=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=_Me(),t=SMe(),r=AL();function i(a){if(r.isArrayLike(a))return e.last(t.toArray(a))}n.last=i})(aN)),aN}var lN,R6;function EMe(){return R6||(R6=1,lN=wMe().last),lN}var AMe=EMe();const TMe=Kc(AMe);var MMe=["valueAccessor"],CMe=["dataKey","clockWise","id","textBreakAll","zIndex"];function NT(){return NT=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},NT.apply(null,arguments)}function P6(n,e){if(n==null)return{};var t,r,i=IMe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function IMe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var RMe=n=>Array.isArray(n.value)?TMe(n.value):n.value,FX=G.createContext(void 0),PMe=FX.Provider,zX=G.createContext(void 0);zX.Provider;function NMe(){return G.useContext(FX)}function OMe(){return G.useContext(zX)}function ME(n){var{valueAccessor:e=RMe}=n,t=P6(n,MMe),{dataKey:r,clockWise:i,id:a,textBreakAll:s,zIndex:o}=t,c=P6(t,CMe),f=NMe(),d=OMe(),p=f||d;return!p||!p.length?null:G.createElement(Ld,{zIndex:o??so.label},G.createElement(cf,{className:"recharts-label-list"},p.map((v,y)=>{var x,E=Us(r)?e(v,y):ls(v.payload,r),S=Us(a)?{}:{id:"".concat(a,"-").concat(y)};return G.createElement(zh,NT({key:"label-".concat(y)},rc(v),c,S,{fill:(x=t.fill)!==null&&x!==void 0?x:v.fill,parentViewBox:v.parentViewBox,value:E,textBreakAll:s,viewBox:v.viewBox,index:y,zIndex:0}))})))}ME.displayName="LabelList";function DMe(n){var{label:e}=n;return e?e===!0?G.createElement(ME,{key:"labelList-implicit"}):G.isValidElement(e)||Fk(e)?G.createElement(ME,{key:"labelList-implicit",content:e}):typeof e=="object"?G.createElement(ME,NT({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function s3(){return s3=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},s3.apply(null,arguments)}var jX=n=>{var{cx:e,cy:t,r,className:i}=n,a=ni("recharts-dot",i);return en(e)&&en(t)&&en(r)?G.createElement("circle",s3({},Xc(n),EL(n),{className:a,cx:e,cy:t,r})):null},LMe={radiusAxis:{},angleAxis:{}},BX=Go({name:"polarAxis",initialState:LMe,reducers:{addRadiusAxis(n,e){n.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(n,e){delete n.radiusAxis[e.payload.id]},addAngleAxis(n,e){n.angleAxis[e.payload.id]=e.payload},removeAngleAxis(n,e){delete n.angleAxis[e.payload.id]}}}),{addRadiusAxis:VOe,removeRadiusAxis:HOe,addAngleAxis:GOe,removeAngleAxis:qOe}=BX.actions,kMe=BX.reducer;function UMe(n){return n&&typeof n=="object"&&"className"in n&&typeof n.className=="string"?n.className:""}var VX=n=>n&&typeof n=="object"&&"clipDot"in n?!!n.clipDot:!0;function FMe(n){var{tooltipEntrySettings:e}=n,t=Da(),r=qo(),i=G.useRef(null);return G.useLayoutEffect(()=>{r||(i.current===null?t(pEe(e)):i.current!==e&&t(mEe({prev:i.current,next:e})),i.current=e)},[e,t,r]),G.useLayoutEffect(()=>()=>{i.current&&(t(gEe(i.current)),i.current=null)},[t]),null}function zMe(n){var{legendPayload:e}=n,t=Da(),r=qo(),i=G.useRef(null);return G.useLayoutEffect(()=>{r||(i.current===null?t(Hbe(e)):i.current!==e&&t(Gbe({prev:i.current,next:e})),i.current=e)},[t,r,e]),G.useLayoutEffect(()=>()=>{i.current&&(t(qbe(i.current)),i.current=null)},[t]),null}var cN,jMe=()=>{var[n]=G.useState(()=>y_("uid-"));return n},BMe=(cN=hV.useId)!==null&&cN!==void 0?cN:jMe;function VMe(n,e){var t=BMe();return e||(n?"".concat(n,"-").concat(t):t)}var HMe=G.createContext(void 0),GMe=n=>{var{id:e,type:t,children:r}=n,i=VMe("recharts-".concat(t),e);return G.createElement(HMe.Provider,{value:i},r(i))},qMe={cartesianItems:[],polarItems:[]},HX=Go({name:"graphicalItems",initialState:qMe,reducers:{addCartesianGraphicalItem:{reducer(n,e){n.cartesianItems.push(e.payload)},prepare:ci()},replaceCartesianGraphicalItem:{reducer(n,e){var{prev:t,next:r}=e.payload,i=Wc(n).cartesianItems.indexOf(t);i>-1&&(n.cartesianItems[i]=r)},prepare:ci()},removeCartesianGraphicalItem:{reducer(n,e){var t=Wc(n).cartesianItems.indexOf(e.payload);t>-1&&n.cartesianItems.splice(t,1)},prepare:ci()},addPolarGraphicalItem:{reducer(n,e){n.polarItems.push(e.payload)},prepare:ci()},removePolarGraphicalItem:{reducer(n,e){var t=Wc(n).polarItems.indexOf(e.payload);t>-1&&n.polarItems.splice(t,1)},prepare:ci()}}}),{addCartesianGraphicalItem:WMe,replaceCartesianGraphicalItem:$Me,removeCartesianGraphicalItem:XMe,addPolarGraphicalItem:WOe,removePolarGraphicalItem:$Oe}=HX.actions,YMe=HX.reducer,KMe=n=>{var e=Da(),t=G.useRef(null);return G.useLayoutEffect(()=>{t.current===null?e(WMe(n)):t.current!==n&&e($Me({prev:t.current,next:n})),t.current=n},[e,n]),G.useLayoutEffect(()=>()=>{t.current&&(e(XMe(t.current)),t.current=null)},[e]),null},ZMe=G.memo(KMe),QMe=["points"];function N6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function uN(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?N6(Object(t),!0).forEach(function(r){JMe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):N6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function JMe(n,e,t){return(e=eCe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function eCe(n){var e=tCe(n,"string");return typeof e=="symbol"?e:e+""}function tCe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function OT(){return OT=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},OT.apply(null,arguments)}function nCe(n,e){if(n==null)return{};var t,r,i=rCe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function rCe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function iCe(n){var{option:e,dotProps:t,className:r}=n;if(G.isValidElement(e))return G.cloneElement(e,t);if(typeof e=="function")return e(t);var i=ni(r,typeof e!="boolean"?e.className:""),a=t??{},{points:s}=a,o=nCe(a,QMe);return G.createElement(jX,OT({},o,{className:i}))}function aCe(n,e){return n==null?!1:e?!0:n.length===1}function sCe(n){var{points:e,dot:t,className:r,dotClassName:i,dataKey:a,baseProps:s,needClip:o,clipPathId:c,zIndex:f=so.scatter}=n;if(!aCe(e,t))return null;var d=VX(t),p=o0e(t),v=e.map((x,E)=>{var S,w,R=uN(uN(uN({r:3},s),p),{},{index:E,cx:(S=x.x)!==null&&S!==void 0?S:void 0,cy:(w=x.y)!==null&&w!==void 0?w:void 0,dataKey:a,value:x.value,payload:x.payload,points:e});return G.createElement(iCe,{key:"dot-".concat(E),option:t,dotProps:R,className:i})}),y={};return o&&c!=null&&(y.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(c,")")),G.createElement(Ld,{zIndex:f},G.createElement(cf,OT({className:r},y),v))}function O6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function D6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?O6(Object(t),!0).forEach(function(r){oCe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):O6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function oCe(n,e,t){return(e=lCe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lCe(n){var e=cCe(n,"string");return typeof e=="symbol"?e:e+""}function cCe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var GX=0,uCe={xAxis:{},yAxis:{},zAxis:{}},qX=Go({name:"cartesianAxis",initialState:uCe,reducers:{addXAxis:{reducer(n,e){n.xAxis[e.payload.id]=e.payload},prepare:ci()},replaceXAxis:{reducer(n,e){var{prev:t,next:r}=e.payload;n.xAxis[t.id]!==void 0&&(t.id!==r.id&&delete n.xAxis[t.id],n.xAxis[r.id]=r)},prepare:ci()},removeXAxis:{reducer(n,e){delete n.xAxis[e.payload.id]},prepare:ci()},addYAxis:{reducer(n,e){n.yAxis[e.payload.id]=e.payload},prepare:ci()},replaceYAxis:{reducer(n,e){var{prev:t,next:r}=e.payload;n.yAxis[t.id]!==void 0&&(t.id!==r.id&&delete n.yAxis[t.id],n.yAxis[r.id]=r)},prepare:ci()},removeYAxis:{reducer(n,e){delete n.yAxis[e.payload.id]},prepare:ci()},addZAxis:{reducer(n,e){n.zAxis[e.payload.id]=e.payload},prepare:ci()},replaceZAxis:{reducer(n,e){var{prev:t,next:r}=e.payload;n.zAxis[t.id]!==void 0&&(t.id!==r.id&&delete n.zAxis[t.id],n.zAxis[r.id]=r)},prepare:ci()},removeZAxis:{reducer(n,e){delete n.zAxis[e.payload.id]},prepare:ci()},updateYAxisWidth(n,e){var{id:t,width:r}=e.payload,i=n.yAxis[t];if(i){var a,s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&r===s[1]&&r!==i.width&&Math.abs(r-((a=s[0])!==null&&a!==void 0?a:0))<=1)return;var o=[...s,r].slice(-3);n.yAxis[t]=D6(D6({},i),{},{width:r,widthHistory:o})}}}}),{addXAxis:fCe,replaceXAxis:dCe,removeXAxis:hCe,addYAxis:pCe,replaceYAxis:mCe,removeYAxis:gCe,addZAxis:XOe,replaceZAxis:YOe,removeZAxis:KOe,updateYAxisWidth:vCe}=qX.actions,yCe=qX.reducer,bCe=Je([us],n=>({top:n.top,bottom:n.bottom,left:n.left,right:n.right})),xCe=Je([bCe,Cd,Id],(n,e,t)=>{if(!(!n||e==null||t==null))return{x:n.left,y:n.top,width:Math.max(0,e-n.left-n.right),height:Math.max(0,t-n.top-n.bottom)}}),zk=()=>un(xCe),_Ce=()=>un(lAe);function L6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function fN(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?L6(Object(t),!0).forEach(function(r){SCe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):L6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function SCe(n,e,t){return(e=wCe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wCe(n){var e=ECe(n,"string");return typeof e=="symbol"?e:e+""}function ECe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var ACe=n=>{var{point:e,childIndex:t,mainColor:r,activeDot:i,dataKey:a,clipPath:s}=n;if(i===!1||e.x==null||e.y==null)return null;var o={index:t,dataKey:a,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},c=fN(fN(fN({},o),JM(i)),EL(i)),f;return G.isValidElement(i)?f=G.cloneElement(i,c):typeof i=="function"?f=i(c):f=G.createElement(jX,c),G.createElement(cf,{className:"recharts-active-dot",clipPath:s},f)};function k6(n){var{points:e,mainColor:t,activeDot:r,itemDataKey:i,clipPath:a,zIndex:s=so.activeDot}=n,o=un(P_),c=_Ce();if(e==null||c==null)return null;var f=e.find(d=>c.includes(d.payload));return Us(f)?null:G.createElement(Ld,{zIndex:s},G.createElement(ACe,{point:f,childIndex:Number(o),mainColor:t,dataKey:i,activeDot:r,clipPath:a}))}var TCe=n=>{var{chartData:e}=n,t=Da(),r=qo();return G.useEffect(()=>r?()=>{}:(t(c6(e)),()=>{t(c6(void 0))}),[e,t,r]),null},U6={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},WX=Go({name:"brush",initialState:U6,reducers:{setBrushSettings(n,e){return e.payload==null?U6:e.payload}}}),{setBrushSettings:ZOe}=WX.actions,MCe=WX.reducer;function CCe(n){return(n%180+180)%180}var ICe=function(e){var{width:t,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=CCe(i),s=a*Math.PI/180,o=Math.atan(r/t),c=s>o&&s<Math.PI-o?r/Math.sin(s):t/Math.cos(s);return Math.abs(c)},RCe={dots:[],areas:[],lines:[]},$X=Go({name:"referenceElements",initialState:RCe,reducers:{addDot:(n,e)=>{n.dots.push(e.payload)},removeDot:(n,e)=>{var t=Wc(n).dots.findIndex(r=>r===e.payload);t!==-1&&n.dots.splice(t,1)},addArea:(n,e)=>{n.areas.push(e.payload)},removeArea:(n,e)=>{var t=Wc(n).areas.findIndex(r=>r===e.payload);t!==-1&&n.areas.splice(t,1)},addLine:(n,e)=>{n.lines.push(e.payload)},removeLine:(n,e)=>{var t=Wc(n).lines.findIndex(r=>r===e.payload);t!==-1&&n.lines.splice(t,1)}}}),{addDot:QOe,removeDot:JOe,addArea:e3e,removeArea:t3e,addLine:n3e,removeLine:r3e}=$X.actions,PCe=$X.reducer,NCe=G.createContext(void 0),OCe=n=>{var{children:e}=n,[t]=G.useState("".concat(y_("recharts"),"-clip")),r=zk();if(r==null)return null;var{x:i,y:a,width:s,height:o}=r;return G.createElement(NCe.Provider,{value:t},G.createElement("defs",null,G.createElement("clipPath",{id:t},G.createElement("rect",{x:i,y:a,height:o,width:s}))),e)};function XX(n,e){if(e<1)return[];if(e===1)return n;for(var t=[],r=0;r<n.length;r+=e){var i=n[r];i!==void 0&&t.push(i)}return t}function DCe(n,e,t){var r={width:n.width+e.width,height:n.height+e.height};return ICe(r,t)}function LCe(n,e,t){var r=t==="width",{x:i,y:a,width:s,height:o}=n;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function O_(n,e,t,r,i){if(n*e<n*r||n*e>n*i)return!1;var a=t();return n*(e-n*a/2-r)>=0&&n*(e+n*a/2-i)<=0}function kCe(n,e){return XX(n,e+1)}function UCe(n,e,t,r,i){for(var a=(r||[]).slice(),{start:s,end:o}=e,c=0,f=1,d=s,p=function(){var x=r==null?void 0:r[c];if(x===void 0)return{v:XX(r,f)};var E=c,S,w=()=>(S===void 0&&(S=t(x,E)),S),R=x.coordinate,N=c===0||O_(n,R,w,d,o);N||(c=0,d=s,f+=1),N&&(d=R+n*(w()/2+i),c+=f)},v;f<=a.length;)if(v=p(),v)return v.v;return[]}function FCe(n,e,t,r,i){var a=(r||[]).slice(),s=a.length;if(s===0)return[];for(var{start:o,end:c}=e,f=1;f<=s;f++){for(var d=(s-1)%f,p=o,v=!0,y=function(){var O=r[E];if(O==null)return 0;var z=E,k,U=()=>(k===void 0&&(k=t(O,z)),k),P=O.coordinate,C=E===d||O_(n,P,U,p,c);if(!C)return v=!1,1;C&&(p=P+n*(U()/2+i))},x,E=d;E<s&&(x=y(),!(x!==0&&x===1));E+=f);if(v){for(var S=[],w=d;w<s;w+=f){var R=r[w];R!=null&&S.push(R)}return S}}return[]}function F6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Rs(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?F6(Object(t),!0).forEach(function(r){zCe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):F6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function zCe(n,e,t){return(e=jCe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jCe(n){var e=BCe(n,"string");return typeof e=="symbol"?e:e+""}function BCe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function VCe(n,e,t,r,i){for(var a=(r||[]).slice(),s=a.length,{start:o}=e,{end:c}=e,f=function(v){var y=a[v];if(y==null)return 1;var x=y,E,S=()=>(E===void 0&&(E=t(y,v)),E);if(v===s-1){var w=n*(x.coordinate+n*S()/2-c);a[v]=x=Rs(Rs({},x),{},{tickCoord:w>0?x.coordinate-w*n:x.coordinate})}else a[v]=x=Rs(Rs({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var R=O_(n,x.tickCoord,S,o,c);R&&(c=x.tickCoord-n*(S()/2+i),a[v]=Rs(Rs({},x),{},{isShow:!0}))}},d=s-1;d>=0;d--)f(d);return a}function HCe(n,e,t,r,i,a){var s=(r||[]).slice(),o=s.length,{start:c,end:f}=e;if(a){var d=r[o-1];if(d!=null){var p=t(d,o-1),v=n*(d.coordinate+n*p/2-f);if(s[o-1]=d=Rs(Rs({},d),{},{tickCoord:v>0?d.coordinate-v*n:d.coordinate}),d.tickCoord!=null){var y=O_(n,d.tickCoord,()=>p,c,f);y&&(f=d.tickCoord-n*(p/2+i),s[o-1]=Rs(Rs({},d),{},{isShow:!0}))}}}for(var x=a?o-1:o,E=function(R){var N=s[R];if(N==null)return 1;var O=N,z,k=()=>(z===void 0&&(z=t(N,R)),z);if(R===0){var U=n*(O.coordinate-n*k()/2-c);s[R]=O=Rs(Rs({},O),{},{tickCoord:U<0?O.coordinate-U*n:O.coordinate})}else s[R]=O=Rs(Rs({},O),{},{tickCoord:O.coordinate});if(O.tickCoord!=null){var P=O_(n,O.tickCoord,k,c,f);P&&(c=O.tickCoord+n*(k()/2+i),s[R]=Rs(Rs({},O),{},{isShow:!0}))}},S=0;S<x;S++)E(S);return s}function jk(n,e,t){var{tick:r,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:c,tickFormatter:f,unit:d,angle:p}=n;if(!i||!i.length||!r)return[];if(en(c)||c1.isSsr){var v;return(v=kCe(i,en(c)?c:0))!==null&&v!==void 0?v:[]}var y=[],x=o==="top"||o==="bottom"?"width":"height",E=d&&x==="width"?Bx(d,{fontSize:e,letterSpacing:t}):{width:0,height:0},S=(z,k)=>{var U=typeof f=="function"?f(z.value,k):z.value;return x==="width"?DCe(Bx(U,{fontSize:e,letterSpacing:t}),E,p):Bx(U,{fontSize:e,letterSpacing:t})[x]},w=i[0],R=i[1],N=i.length>=2&&w!=null&&R!=null?Zl(R.coordinate-w.coordinate):1,O=LCe(a,N,x);return c==="equidistantPreserveStart"?UCe(N,O,S,i,s):c==="equidistantPreserveEnd"?FCe(N,O,S,i,s):(c==="preserveStart"||c==="preserveStartEnd"?y=HCe(N,O,S,i,s,c==="preserveStartEnd"):y=VCe(N,O,S,i,s),y.filter(z=>z.isShow))}var GCe=n=>{var{ticks:e,label:t,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=n,s=0;if(e){Array.from(e).forEach(d=>{if(d){var p=d.getBoundingClientRect();p.width>s&&(s=p.width)}});var o=t?t.getBoundingClientRect().width:0,c=i+a,f=s+c+o+(t?r:0);return Math.round(f)}return 0},qCe=["axisLine","width","height","className","hide","ticks","axisType"];function WCe(n,e){if(n==null)return{};var t,r,i=$Ce(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function $Ce(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function wg(){return wg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},wg.apply(null,arguments)}function z6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Mi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?z6(Object(t),!0).forEach(function(r){XCe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):z6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function XCe(n,e,t){return(e=YCe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function YCe(n){var e=KCe(n,"string");return typeof e=="symbol"?e:e+""}function KCe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var gd={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:so.axis};function ZCe(n){var{x:e,y:t,width:r,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:c}=n;if(!o)return null;var f=Mi(Mi(Mi({},c),Xc(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!s||a==="bottom"&&s);f=Mi(Mi({},f),{},{x1:e,y1:t+d*i,x2:e+r,y2:t+d*i})}else{var p=+(a==="left"&&!s||a==="right"&&s);f=Mi(Mi({},f),{},{x1:e+p*r,y1:t,x2:e+p*r,y2:t+i})}return G.createElement("line",wg({},f,{className:ni("recharts-cartesian-axis-line",nC(o,"className"))}))}function QCe(n,e,t,r,i,a,s,o,c){var f,d,p,v,y,x,E=o?-1:1,S=n.tickSize||s,w=en(n.tickCoord)?n.tickCoord:n.coordinate;switch(a){case"top":f=d=n.coordinate,v=t+ +!o*i,p=v-E*S,x=p-E*c,y=w;break;case"left":p=v=n.coordinate,d=e+ +!o*r,f=d-E*S,y=f-E*c,x=w;break;case"right":p=v=n.coordinate,d=e+ +o*r,f=d+E*S,y=f+E*c,x=w;break;default:f=d=n.coordinate,v=t+ +o*i,p=v+E*S,x=p+E*c,y=w;break}return{line:{x1:f,y1:p,x2:d,y2:v},tick:{x:y,y:x}}}function JCe(n,e){switch(n){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function eIe(n,e){switch(n){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function tIe(n){var{option:e,tickProps:t,value:r}=n,i,a=ni(t.className,"recharts-cartesian-axis-tick-value");if(G.isValidElement(e))i=G.cloneElement(e,Mi(Mi({},t),{},{className:a}));else if(typeof e=="function")i=e(Mi(Mi({},t),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=ni(s,UMe(e))),i=G.createElement(Uk,wg({},t,{className:s}),r)}return i}var nIe=G.forwardRef((n,e)=>{var{ticks:t=[],tick:r,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:c,tickTextProps:f,orientation:d,mirror:p,x:v,y,width:x,height:E,tickSize:S,tickMargin:w,fontSize:R,letterSpacing:N,getTicksConfig:O,events:z,axisType:k}=n,U=jk(Mi(Mi({},O),{},{ticks:t}),R,N),P=JCe(d,p),C=eIe(d,p),L=Xc(O),j=JM(r),B={};typeof i=="object"&&(B=i);var V=Mi(Mi({},L),{},{fill:"none"},B),Q=U.map($=>Mi({entry:$},QCe($,v,y,x,E,d,S,p,w))),J=Q.map($=>{var{entry:se,line:ce}=$;return G.createElement(cf,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(se.value,"-").concat(se.coordinate,"-").concat(se.tickCoord)},i&&G.createElement("line",wg({},V,ce,{className:ni("recharts-cartesian-axis-tick-line",nC(i,"className"))})))}),W=Q.map(($,se)=>{var ce,fe,{entry:Z,tick:re}=$,de=Mi(Mi(Mi(Mi({verticalAnchor:C},L),{},{textAnchor:P,stroke:"none",fill:a},re),{},{index:se,payload:Z,visibleTicksCount:U.length,tickFormatter:s,padding:c},f),{},{angle:(ce=(fe=f==null?void 0:f.angle)!==null&&fe!==void 0?fe:L.angle)!==null&&ce!==void 0?ce:0}),ve=Mi(Mi({},de),j);return G.createElement(cf,wg({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Z.value,"-").concat(Z.coordinate,"-").concat(Z.tickCoord)},H0e(z,Z,se)),r&&G.createElement(tIe,{option:r,tickProps:ve,value:"".concat(typeof s=="function"?s(Z.value,se):Z.value).concat(o||"")}))});return G.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(k,"-ticks")},W.length>0&&G.createElement(Ld,{zIndex:so.label},G.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(k,"-tick-labels"),ref:e},W)),J.length>0&&G.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(k,"-tick-lines")},J))}),rIe=G.forwardRef((n,e)=>{var{axisLine:t,width:r,height:i,className:a,hide:s,ticks:o,axisType:c}=n,f=WCe(n,qCe),[d,p]=G.useState(""),[v,y]=G.useState(""),x=G.useRef(null);G.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var S;return GCe({ticks:x.current,label:(S=n.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:n.tickSize,tickMargin:n.tickMargin})}}));var E=G.useCallback(S=>{if(S){var w=S.getElementsByClassName("recharts-cartesian-axis-tick-value");x.current=w;var R=w[0];if(R){var N=window.getComputedStyle(R),O=N.fontSize,z=N.letterSpacing;(O!==d||z!==v)&&(p(O),y(z))}}},[d,v]);return s||r!=null&&r<=0||i!=null&&i<=0?null:G.createElement(Ld,{zIndex:n.zIndex},G.createElement(cf,{className:ni("recharts-cartesian-axis",a)},G.createElement(ZCe,{x:n.x,y:n.y,width:r,height:i,orientation:n.orientation,mirror:n.mirror,axisLine:t,otherSvgProps:Xc(n)}),G.createElement(nIe,{ref:E,axisType:c,events:f,fontSize:d,getTicksConfig:n,height:n.height,letterSpacing:v,mirror:n.mirror,orientation:n.orientation,padding:n.padding,stroke:n.stroke,tick:n.tick,tickFormatter:n.tickFormatter,tickLine:n.tickLine,tickMargin:n.tickMargin,tickSize:n.tickSize,tickTextProps:n.tickTextProps,ticks:o,unit:n.unit,width:n.width,x:n.x,y:n.y}),G.createElement(uMe,{x:n.x,y:n.y,width:n.width,height:n.height,lowerWidth:n.width,upperWidth:n.width},G.createElement(xMe,{label:n.label,labelRef:n.labelRef}),n.children)))}),Bk=G.forwardRef((n,e)=>{var t=yl(n,gd);return G.createElement(rIe,wg({},t,{ref:e}))});Bk.displayName="CartesianAxis";var iIe=["x1","y1","x2","y2","key"],aIe=["offset"],sIe=["xAxisId","yAxisId"],oIe=["xAxisId","yAxisId"];function j6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Os(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?j6(Object(t),!0).forEach(function(r){lIe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):j6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function lIe(n,e,t){return(e=cIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cIe(n){var e=uIe(n,"string");return typeof e=="symbol"?e:e+""}function uIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function $m(){return $m=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$m.apply(null,arguments)}function DT(n,e){if(n==null)return{};var t,r,i=fIe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function fIe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var dIe=n=>{var{fill:e}=n;if(!e||e==="none")return null;var{fillOpacity:t,x:r,y:i,width:a,height:s,ry:o}=n;return G.createElement("rect",{x:r,y:i,ry:o,width:a,height:s,stroke:"none",fill:e,fillOpacity:t,className:"recharts-cartesian-grid-bg"})};function YX(n){var{option:e,lineItemProps:t}=n,r;if(G.isValidElement(e))r=G.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var i,{x1:a,y1:s,x2:o,y2:c,key:f}=t,d=DT(t,iIe),p=(i=Xc(d))!==null&&i!==void 0?i:{},{offset:v}=p,y=DT(p,aIe);r=G.createElement("line",$m({},y,{x1:a,y1:s,x2:o,y2:c,fill:"none",key:f}))}return r}function hIe(n){var{x:e,width:t,horizontal:r=!0,horizontalPoints:i}=n;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=n,o=DT(n,sIe),c=i.map((f,d)=>{var p=Os(Os({},o),{},{x1:e,y1:f,x2:e+t,y2:f,key:"line-".concat(d),index:d});return G.createElement(YX,{key:"line-".concat(d),option:r,lineItemProps:p})});return G.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function pIe(n){var{y:e,height:t,vertical:r=!0,verticalPoints:i}=n;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=n,o=DT(n,oIe),c=i.map((f,d)=>{var p=Os(Os({},o),{},{x1:f,y1:e,x2:f,y2:e+t,key:"line-".concat(d),index:d});return G.createElement(YX,{option:r,lineItemProps:p,key:"line-".concat(d)})});return G.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function mIe(n){var{horizontalFill:e,fillOpacity:t,x:r,y:i,width:a,height:s,horizontalPoints:o,horizontal:c=!0}=n;if(!c||!e||!e.length||o==null)return null;var f=o.map(p=>Math.round(p+i-i)).sort((p,v)=>p-v);i!==f[0]&&f.unshift(0);var d=f.map((p,v)=>{var y=f[v+1],x=y==null,E=x?i+s-p:y-p;if(E<=0)return null;var S=v%e.length;return G.createElement("rect",{key:"react-".concat(v),y:p,x:r,height:E,width:a,stroke:"none",fill:e[S],fillOpacity:t,className:"recharts-cartesian-grid-bg"})});return G.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function gIe(n){var{vertical:e=!0,verticalFill:t,fillOpacity:r,x:i,y:a,width:s,height:o,verticalPoints:c}=n;if(!e||!t||!t.length)return null;var f=c.map(p=>Math.round(p+i-i)).sort((p,v)=>p-v);i!==f[0]&&f.unshift(0);var d=f.map((p,v)=>{var y=f[v+1],x=y==null,E=x?i+s-p:y-p;if(E<=0)return null;var S=v%t.length;return G.createElement("rect",{key:"react-".concat(v),x:p,y:a,width:E,height:o,stroke:"none",fill:t[S],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return G.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var vIe=(n,e)=>{var{xAxis:t,width:r,height:i,offset:a}=n;return Bq(jk(Os(Os(Os({},gd),t),{},{ticks:Vq(t),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},yIe=(n,e)=>{var{yAxis:t,width:r,height:i,offset:a}=n;return Bq(jk(Os(Os(Os({},gd),t),{},{ticks:Vq(t),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},bIe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:so.grid};function KX(n){var e=Kq(),t=Zq(),r=Yq(),i=Os(Os({},yl(n,bIe)),{},{x:en(n.x)?n.x:r.left,y:en(n.y)?n.y:r.top,width:en(n.width)?n.width:r.width,height:en(n.height)?n.height:r.height}),{xAxisId:a,yAxisId:s,x:o,y:c,width:f,height:d,syncWithTicks:p,horizontalValues:v,verticalValues:y}=i,x=qo(),E=un(C=>ZB(C,"xAxis",a,x)),S=un(C=>ZB(C,"yAxis",s,x));if(!df(f)||!df(d)||!en(o)||!en(c))return null;var w=i.verticalCoordinatesGenerator||vIe,R=i.horizontalCoordinatesGenerator||yIe,{horizontalPoints:N,verticalPoints:O}=i;if((!N||!N.length)&&typeof R=="function"){var z=v&&v.length,k=R({yAxis:S?Os(Os({},S),{},{ticks:z?v:S.ticks}):void 0,width:e??f,height:t??d,offset:r},z?!0:p);lT(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(N=k)}if((!O||!O.length)&&typeof w=="function"){var U=y&&y.length,P=w({xAxis:E?Os(Os({},E),{},{ticks:U?y:E.ticks}):void 0,width:e??f,height:t??d,offset:r},U?!0:p);lT(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(O=P)}return G.createElement(Ld,{zIndex:i.zIndex},G.createElement("g",{className:"recharts-cartesian-grid"},G.createElement(dIe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),G.createElement(mIe,$m({},i,{horizontalPoints:N})),G.createElement(gIe,$m({},i,{verticalPoints:O})),G.createElement(hIe,$m({},i,{offset:r,horizontalPoints:N,xAxis:E,yAxis:S})),G.createElement(pIe,$m({},i,{offset:r,verticalPoints:O,xAxis:E,yAxis:S}))))}KX.displayName="CartesianGrid";var xIe={},ZX=Go({name:"errorBars",initialState:xIe,reducers:{addErrorBar:(n,e)=>{var{itemId:t,errorBar:r}=e.payload;n[t]||(n[t]=[]),n[t].push(r)},replaceErrorBar:(n,e)=>{var{itemId:t,prev:r,next:i}=e.payload;n[t]&&(n[t]=n[t].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(n,e)=>{var{itemId:t,errorBar:r}=e.payload;n[t]&&(n[t]=n[t].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:i3e,replaceErrorBar:a3e,removeErrorBar:s3e}=ZX.actions,_Ie=ZX.reducer;function QX(n,e){var t,r,i=un(f=>Nd(f,n)),a=un(f=>Od(f,e)),s=(t=i==null?void 0:i.allowDataOverflow)!==null&&t!==void 0?t:Ia.allowDataOverflow,o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Ra.allowDataOverflow,c=s||o;return{needClip:c,needClipX:s,needClipY:o}}function SIe(n){var{xAxisId:e,yAxisId:t,clipPathId:r}=n,i=zk(),{needClipX:a,needClipY:s,needClip:o}=QX(e,t);if(!o||!i)return null;var{x:c,y:f,width:d,height:p}=i;return G.createElement("clipPath",{id:"clipPath-".concat(r)},G.createElement("rect",{x:a?c:c-d/2,y:s?f:f-p/2,width:a?d:d*2,height:s?p:p*2}))}function wIe(n){var e=JM(n),t=3,r=2;if(e!=null){var{r:i,strokeWidth:a}=e,s=Number(i),o=Number(a);return(Number.isNaN(s)||s<0)&&(s=t),(Number.isNaN(o)||o<0)&&(o=r),{r:s,strokeWidth:o}}return{r:t,strokeWidth:r}}var dN={exports:{}},hN={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B6;function EIe(){if(B6)return hN;B6=1;var n=iy();function e(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var t=typeof Object.is=="function"?Object.is:e,r=n.useSyncExternalStore,i=n.useRef,a=n.useEffect,s=n.useMemo,o=n.useDebugValue;return hN.useSyncExternalStoreWithSelector=function(c,f,d,p,v){var y=i(null);if(y.current===null){var x={hasValue:!1,value:null};y.current=x}else x=y.current;y=s(function(){function S(z){if(!w){if(w=!0,R=z,z=p(z),v!==void 0&&x.hasValue){var k=x.value;if(v(k,z))return N=k}return N=z}if(k=N,t(R,z))return k;var U=p(z);return v!==void 0&&v(k,U)?(R=z,k):(R=z,N=U)}var w=!1,R,N,O=d===void 0?null:d;return[function(){return S(f())},O===null?void 0:function(){return S(O())}]},[f,d,p,v]);var E=r(c,y[0],y[1]);return a(function(){x.hasValue=!0,x.value=E},[E]),o(E),E},hN}var V6;function AIe(){return V6||(V6=1,dN.exports=EIe()),dN.exports}AIe();function TIe(n){n()}function MIe(){let n=null,e=null;return{clear(){n=null,e=null},notify(){TIe(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let r=n;for(;r;)t.push(r),r=r.next;return t},subscribe(t){let r=!0;const i=e={callback:t,next:null,prev:e};return i.prev?i.prev.next=i:n=i,function(){!r||n===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:n=i.next)}}}}var H6={notify(){},get:()=>[]};function CIe(n,e){let t,r=H6,i=0,a=!1;function s(E){d();const S=r.subscribe(E);let w=!1;return()=>{w||(w=!0,S(),p())}}function o(){r.notify()}function c(){x.onStateChange&&x.onStateChange()}function f(){return a}function d(){i++,t||(t=n.subscribe(c),r=MIe())}function p(){i--,t&&i===0&&(t(),t=void 0,r.clear(),r=H6)}function v(){a||(a=!0,d())}function y(){a&&(a=!1,p())}const x={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:f,trySubscribe:v,tryUnsubscribe:y,getListeners:()=>r};return x}var IIe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",RIe=IIe(),PIe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",NIe=PIe(),OIe=()=>RIe||NIe?G.useLayoutEffect:G.useEffect,DIe=OIe();function G6(n,e){return n===e?n!==0||e!==0||1/n===1/e:n!==n&&e!==e}function LIe(n,e){if(G6(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!G6(n[t[i]],e[t[i]]))return!1;return!0}var pN=Symbol.for("react-redux-context"),mN=typeof globalThis<"u"?globalThis:{};function kIe(){if(!G.createContext)return{};const n=mN[pN]??(mN[pN]=new Map);let e=n.get(G.createContext);return e||(e=G.createContext(null),n.set(G.createContext,e)),e}var UIe=kIe();function FIe(n){const{children:e,context:t,serverState:r,store:i}=n,a=G.useMemo(()=>{const c=CIe(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=G.useMemo(()=>i.getState(),[i]);DIe(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const o=t||UIe;return G.createElement(o.Provider,{value:a},e)}var zIe=FIe,jIe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function BIe(n,e){return n==null&&e==null?!0:typeof n=="number"&&typeof e=="number"?n===e||n!==n&&e!==e:n===e}function Vk(n,e){var t=new Set([...Object.keys(n),...Object.keys(e)]);for(var r of t)if(jIe.has(r)){if(n[r]==null&&e[r]==null)continue;if(!LIe(n[r],e[r]))return!1}else if(!BIe(n[r],e[r]))return!1;return!0}function Hk(n,e){var t,r;return(t=(r=n.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&t!==void 0?t:GX}function Gk(n,e){var t,r;return(t=(r=n.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&t!==void 0?t:GX}var JX=(n,e,t)=>Q$(n,"xAxis",Hk(n,e),t),eY=(n,e,t)=>Z$(n,"xAxis",Hk(n,e),t),tY=(n,e,t)=>Q$(n,"yAxis",Gk(n,e),t),nY=(n,e,t)=>Z$(n,"yAxis",Gk(n,e),t),VIe=Je([fi,JX,tY,eY,nY],(n,e,t,r,i)=>vf(n,"xAxis")?oT(e,r,!1):oT(t,i,!1)),HIe=(n,e)=>e,rY=Je([b$,HIe],(n,e)=>n.filter(t=>t.type==="area").find(t=>t.id===e)),iY=n=>{var e=fi(n),t=vf(e,"xAxis");return t?"yAxis":"xAxis"},GIe=(n,e)=>{var t=iY(n);return t==="yAxis"?Gk(n,e):Hk(n,e)},qIe=(n,e,t)=>C$(n,iY(n),GIe(n,e),t),WIe=Je([rY,qIe],(n,e)=>{var t;if(!(n==null||e==null)){var{stackId:r}=n,i=gk(n);if(!(r==null||i==null)){var a=(t=e[r])===null||t===void 0?void 0:t.stackedData,s=a==null?void 0:a.find(o=>o.key===i);if(s!=null)return s.map(o=>[o[0],o[1]])}}}),$Ie=Je([fi,JX,tY,eY,nY,WIe,WSe,VIe,rY,twe],(n,e,t,r,i,a,s,o,c,f)=>{var{chartData:d,dataStartIndex:p,dataEndIndex:v}=s;if(!(c==null||n!=="horizontal"&&n!=="vertical"||e==null||t==null||r==null||i==null||r.length===0||i.length===0||o==null)){var{data:y}=c,x;if(y&&y.length>0?x=y:x=d==null?void 0:d.slice(p,v+1),x!=null)return dRe({layout:n,xAxis:e,yAxis:t,xAxisTicks:r,yAxisTicks:i,dataStartIndex:p,areaSettings:c,stackedData:a,displayedData:x,chartBaseValue:f,bandSize:o})}}),XIe=["id"],YIe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function ag(){return ag=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ag.apply(null,arguments)}function aY(n,e){if(n==null)return{};var t,r,i=KIe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function KIe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function q6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function _v(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?q6(Object(t),!0).forEach(function(r){ZIe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):q6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function ZIe(n,e,t){return(e=QIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function QIe(n){var e=JIe(n,"string");return typeof e=="symbol"?e:e+""}function JIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function LT(n,e){return n&&n!=="none"?n:e}var eRe=n=>{var{dataKey:e,name:t,stroke:r,fill:i,legendType:a,hide:s}=n;return[{inactive:s,dataKey:e,type:a,color:LT(r,i),value:Hq(t,e),payload:n}]},tRe=G.memo(n=>{var{dataKey:e,data:t,stroke:r,strokeWidth:i,fill:a,name:s,hide:o,unit:c,tooltipType:f,id:d}=n,p={dataDefinedOnItem:t,getPosition:gy,settings:{stroke:r,strokeWidth:i,fill:a,dataKey:e,nameKey:void 0,name:Hq(s,e),hide:o,type:f,color:LT(r,a),unit:c,graphicalItemId:d}};return G.createElement(FMe,{tooltipEntrySettings:p})});function nRe(n){var{clipPathId:e,points:t,props:r}=n,{needClip:i,dot:a,dataKey:s}=r,o=Xc(r);return G.createElement(sCe,{points:t,dot:a,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:s,baseProps:o,needClip:i,clipPathId:e})}function rRe(n){var{showLabels:e,children:t,points:r}=n,i=r.map(a=>{var s,o,c={x:(s=a.x)!==null&&s!==void 0?s:0,y:(o=a.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return _v(_v({},c),{},{value:a.value,payload:a.payload,parentViewBox:void 0,viewBox:c,fill:void 0})});return G.createElement(PMe,{value:e?i:void 0},t)}function W6(n){var{points:e,baseLine:t,needClip:r,clipPathId:i,props:a}=n,{layout:s,type:o,stroke:c,connectNulls:f,isRange:d}=a,{id:p}=a,v=aY(a,XIe),y=Xc(v),x=rc(v);return G.createElement(G.Fragment,null,(e==null?void 0:e.length)>1&&G.createElement(cf,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},G.createElement(EE,ag({},x,{id:p,points:e,connectNulls:f,type:o,baseLine:t,layout:s,stroke:"none",className:"recharts-area-area"})),c!=="none"&&G.createElement(EE,ag({},y,{className:"recharts-area-curve",layout:s,type:o,connectNulls:f,fill:"none",points:e})),c!=="none"&&d&&G.createElement(EE,ag({},y,{className:"recharts-area-curve",layout:s,type:o,connectNulls:f,fill:"none",points:t}))),G.createElement(nRe,{points:e,props:v,clipPathId:i}))}function iRe(n){var e,t,{alpha:r,baseLine:i,points:a,strokeWidth:s}=n,o=(e=a[0])===null||e===void 0?void 0:e.y,c=(t=a[a.length-1])===null||t===void 0?void 0:t.y;if(!nr(o)||!nr(c))return null;var f=r*Math.abs(o-c),d=Math.max(...a.map(p=>p.x||0));return en(i)?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(...i.map(p=>p.x||0),d)),en(d)?G.createElement("rect",{x:0,y:o<c?o:o-f,width:d+(s?parseInt("".concat(s),10):1),height:Math.floor(f)}):null}function aRe(n){var e,t,{alpha:r,baseLine:i,points:a,strokeWidth:s}=n,o=(e=a[0])===null||e===void 0?void 0:e.x,c=(t=a[a.length-1])===null||t===void 0?void 0:t.x;if(!nr(o)||!nr(c))return null;var f=r*Math.abs(o-c),d=Math.max(...a.map(p=>p.y||0));return en(i)?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(...i.map(p=>p.y||0),d)),en(d)?G.createElement("rect",{x:o<c?o:o-f,y:0,width:f,height:Math.floor(d+(s?parseInt("".concat(s),10):1))}):null}function sRe(n){var{alpha:e,layout:t,points:r,baseLine:i,strokeWidth:a}=n;return t==="vertical"?G.createElement(iRe,{alpha:e,points:r,baseLine:i,strokeWidth:a}):G.createElement(aRe,{alpha:e,points:r,baseLine:i,strokeWidth:a})}function oRe(n){var{needClip:e,clipPathId:t,props:r,previousPointsRef:i,previousBaselineRef:a}=n,{points:s,baseLine:o,isAnimationActive:c,animationBegin:f,animationDuration:d,animationEasing:p,onAnimationStart:v,onAnimationEnd:y}=r,x=G.useMemo(()=>({points:s,baseLine:o}),[s,o]),E=fW(x,"recharts-area-"),S=kL(),[w,R]=G.useState(!1),N=!w,O=G.useCallback(()=>{typeof y=="function"&&y(),R(!1)},[y]),z=G.useCallback(()=>{typeof v=="function"&&v(),R(!0)},[v]);if(S==null)return null;var k=i.current,U=a.current;return G.createElement(rRe,{showLabels:N,points:s},r.children,G.createElement(uW,{animationId:E,begin:f,duration:d,isActive:c,easing:p,onAnimationEnd:O,onAnimationStart:z,key:E},P=>{if(k){var C=k.length/s.length,L=P===1?s:s.map((B,V)=>{var Q=Math.floor(V*C);if(k[Q]){var J=k[Q];return _v(_v({},B),{},{x:zu(J.x,B.x,P),y:zu(J.y,B.y,P)})}return B}),j;return en(o)?j=zu(U,o,P):Us(o)||uf(o)?j=zu(U,0,P):j=o.map((B,V)=>{var Q=Math.floor(V*C);if(Array.isArray(U)&&U[Q]){var J=U[Q];return _v(_v({},B),{},{x:zu(J.x,B.x,P),y:zu(J.y,B.y,P)})}return B}),P>0&&(i.current=L,a.current=j),G.createElement(W6,{points:L,baseLine:j,needClip:e,clipPathId:t,props:r})}return P>0&&(i.current=s,a.current=o),G.createElement(cf,null,c&&G.createElement("defs",null,G.createElement("clipPath",{id:"animationClipPath-".concat(t)},G.createElement(sRe,{alpha:P,points:s,baseLine:o,layout:S,strokeWidth:r.strokeWidth}))),G.createElement(cf,{clipPath:"url(#animationClipPath-".concat(t,")")},G.createElement(W6,{points:s,baseLine:o,needClip:e,clipPathId:t,props:r})))}),G.createElement(DMe,{label:r.label}))}function lRe(n){var{needClip:e,clipPathId:t,props:r}=n,i=G.useRef(null),a=G.useRef();return G.createElement(oRe,{needClip:e,clipPathId:t,props:r,previousPointsRef:i,previousBaselineRef:a})}class cRe extends G.PureComponent{render(){var{hide:e,dot:t,points:r,className:i,top:a,left:s,needClip:o,xAxisId:c,yAxisId:f,width:d,height:p,id:v,baseLine:y,zIndex:x}=this.props;if(e)return null;var E=ni("recharts-area",i),S=v,{r:w,strokeWidth:R}=wIe(t),N=VX(t),O=w*2+R,z=o?"url(#clipPath-".concat(N?"":"dots-").concat(S,")"):void 0;return G.createElement(Ld,{zIndex:x},G.createElement(cf,{className:E},o&&G.createElement("defs",null,G.createElement(SIe,{clipPathId:S,xAxisId:c,yAxisId:f}),!N&&G.createElement("clipPath",{id:"clipPath-dots-".concat(S)},G.createElement("rect",{x:s-O/2,y:a-O/2,width:d+O,height:p+O}))),G.createElement(lRe,{needClip:o,clipPathId:S,props:this.props})),G.createElement(k6,{points:r,mainColor:LT(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:z}),this.props.isRange&&Array.isArray(y)&&G.createElement(k6,{points:y,mainColor:LT(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:z}))}}var sY={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:so.area};function uRe(n){var e,t=yl(n,sY),{activeDot:r,animationBegin:i,animationDuration:a,animationEasing:s,connectNulls:o,dot:c,fill:f,fillOpacity:d,hide:p,isAnimationActive:v,legendType:y,stroke:x,xAxisId:E,yAxisId:S}=t,w=aY(t,YIe),R=vy(),N=xX(),{needClip:O}=QX(E,S),z=qo(),{points:k,isRange:U,baseLine:P}=(e=un(Q=>$Ie(Q,n.id,z)))!==null&&e!==void 0?e:{},C=zk();if(R!=="horizontal"&&R!=="vertical"||C==null||N!=="AreaChart"&&N!=="ComposedChart")return null;var{height:L,width:j,x:B,y:V}=C;return!k||!k.length?null:G.createElement(cRe,ag({},w,{activeDot:r,animationBegin:i,animationDuration:a,animationEasing:s,baseLine:P,connectNulls:o,dot:c,fill:f,fillOpacity:d,height:L,hide:p,layout:R,isAnimationActive:v==="auto"?!c1.isSsr:v,isRange:U,legendType:y,needClip:O,points:k,stroke:x,width:j,left:B,top:V,xAxisId:E,yAxisId:S}))}var fRe=(n,e,t,r,i)=>{var a=t??e;if(en(a))return a;var s=n==="horizontal"?i:r,o=s.scale.domain();if(s.type==="number"){var c=Math.max(o[0],o[1]),f=Math.min(o[0],o[1]);return a==="dataMin"?f:a==="dataMax"||c<0?c:Math.max(Math.min(o[0],o[1]),0)}return a==="dataMin"?o[0]:a==="dataMax"?o[1]:o[0]};function dRe(n){var{areaSettings:{connectNulls:e,baseValue:t,dataKey:r},stackedData:i,layout:a,chartBaseValue:s,xAxis:o,yAxis:c,displayedData:f,dataStartIndex:d,xAxisTicks:p,yAxisTicks:v,bandSize:y}=n,x=i&&i.length,E=fRe(a,s,t,o,c),S=a==="horizontal",w=!1,R=f.map((O,z)=>{var k,U,P,C;if(x)C=i[d+z];else{var L=ls(O,r);Array.isArray(L)?(C=L,w=!0):C=[E,L]}var j=(k=(U=C)===null||U===void 0?void 0:U[1])!==null&&k!==void 0?k:null,B=j==null||x&&!e&&ls(O,r)==null;if(S){var V;return{x:Q5({axis:o,ticks:p,bandSize:y,entry:O,index:z}),y:B?null:(V=c.scale.map(j))!==null&&V!==void 0?V:null,value:C,payload:O}}return{x:B?null:(P=o.scale.map(j))!==null&&P!==void 0?P:null,y:Q5({axis:c,ticks:v,bandSize:y,entry:O,index:z}),value:C,payload:O}}),N;return x||w?N=R.map(O=>{var z,k=Array.isArray(O.value)?O.value[0]:null;if(S){var U;return{x:O.x,y:k!=null&&O.y!=null&&(U=c.scale.map(k))!==null&&U!==void 0?U:null,payload:O.payload}}return{x:k!=null&&(z=o.scale.map(k))!==null&&z!==void 0?z:null,y:O.y,payload:O.payload}}):N=S?c.scale.map(E):o.scale.map(E),{points:R,baseLine:N??0,isRange:w}}function hRe(n){var e=yl(n,sY),t=qo();return G.createElement(GMe,{id:e.id,type:"area"},r=>G.createElement(G.Fragment,null,G.createElement(zMe,{legendPayload:eRe(e)}),G.createElement(tRe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),G.createElement(ZMe,{type:"area",id:r,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:Wye(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:t,connectNulls:e.connectNulls}),G.createElement(uRe,ag({},e,{id:r}))))}var oY=G.memo(hRe,Vk);oY.displayName="Area";var pRe=["domain","range"],mRe=["domain","range"];function $6(n,e){if(n==null)return{};var t,r,i=gRe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function gRe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function X6(n,e){return n===e?!0:Array.isArray(n)&&n.length===2&&Array.isArray(e)&&e.length===2?n[0]===e[0]&&n[1]===e[1]:!1}function lY(n,e){if(n===e)return!0;var{domain:t,range:r}=n,i=$6(n,pRe),{domain:a,range:s}=e,o=$6(e,mRe);return!X6(t,a)||!X6(r,s)?!1:Vk(i,o)}var vRe=["type"],yRe=["dangerouslySetInnerHTML","ticks","scale"],bRe=["id","scale"];function o3(){return o3=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},o3.apply(null,arguments)}function Y6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function K6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Y6(Object(t),!0).forEach(function(r){xRe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Y6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function xRe(n,e,t){return(e=_Re(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _Re(n){var e=SRe(n,"string");return typeof e=="symbol"?e:e+""}function SRe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function l3(n,e){if(n==null)return{};var t,r,i=wRe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function wRe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function ERe(n){var e=Da(),t=G.useRef(null),r=kL(),{type:i}=n,a=l3(n,vRe),s=IC(r,"xAxis",i),o=G.useMemo(()=>{if(s!=null)return K6(K6({},a),{},{type:s})},[a,s]);return G.useLayoutEffect(()=>{o!=null&&(t.current===null?e(fCe(o)):t.current!==o&&e(dCe({prev:t.current,next:o})),t.current=o)},[o,e]),G.useLayoutEffect(()=>()=>{t.current&&(e(hCe(t.current)),t.current=null)},[e]),null}var ARe=n=>{var{xAxisId:e,className:t}=n,r=un(qq),i=qo(),a="xAxis",s=un(w=>K$(w,a,e,i)),o=un(w=>Zwe(w,e)),c=un(w=>rEe(w,e)),f=un(w=>m$(w,e));if(o==null||c==null||f==null)return null;var{dangerouslySetInnerHTML:d,ticks:p,scale:v}=n,y=l3(n,yRe),{id:x,scale:E}=f,S=l3(f,bRe);return G.createElement(Bk,o3({},y,S,{x:c.x,y:c.y,width:o.width,height:o.height,className:ni("recharts-".concat(a," ").concat(a),t),viewBox:r,ticks:s,axisType:a}))},TRe={allowDataOverflow:Ia.allowDataOverflow,allowDecimals:Ia.allowDecimals,allowDuplicatedCategory:Ia.allowDuplicatedCategory,angle:Ia.angle,axisLine:gd.axisLine,height:Ia.height,hide:!1,includeHidden:Ia.includeHidden,interval:Ia.interval,label:!1,minTickGap:Ia.minTickGap,mirror:Ia.mirror,orientation:Ia.orientation,padding:Ia.padding,reversed:Ia.reversed,scale:Ia.scale,tick:Ia.tick,tickCount:Ia.tickCount,tickLine:gd.tickLine,tickSize:gd.tickSize,type:Ia.type,xAxisId:0},MRe=n=>{var e=yl(n,TRe);return G.createElement(G.Fragment,null,G.createElement(ERe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),G.createElement(ARe,e))},cY=G.memo(MRe,lY);cY.displayName="XAxis";var CRe=["type"],IRe=["dangerouslySetInnerHTML","ticks","scale"],RRe=["id","scale"];function c3(){return c3=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},c3.apply(null,arguments)}function Z6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Q6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Z6(Object(t),!0).forEach(function(r){PRe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Z6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function PRe(n,e,t){return(e=NRe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NRe(n){var e=ORe(n,"string");return typeof e=="symbol"?e:e+""}function ORe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function u3(n,e){if(n==null)return{};var t,r,i=DRe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function DRe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function LRe(n){var e=Da(),t=G.useRef(null),r=kL(),{type:i}=n,a=u3(n,CRe),s=IC(r,"yAxis",i),o=G.useMemo(()=>{if(s!=null)return Q6(Q6({},a),{},{type:s})},[s,a]);return G.useLayoutEffect(()=>{o!=null&&(t.current===null?e(pCe(o)):t.current!==o&&e(mCe({prev:t.current,next:o})),t.current=o)},[o,e]),G.useLayoutEffect(()=>()=>{t.current&&(e(gCe(t.current)),t.current=null)},[e]),null}function kRe(n){var{yAxisId:e,className:t,width:r,label:i}=n,a=G.useRef(null),s=G.useRef(null),o=un(qq),c=qo(),f=Da(),d="yAxis",p=un(k=>sEe(k,e)),v=un(k=>aEe(k,e)),y=un(k=>K$(k,d,e,c)),x=un(k=>g$(k,e));if(G.useLayoutEffect(()=>{if(!(r!=="auto"||!p||Fk(i)||G.isValidElement(i)||x==null)){var k=a.current;if(k){var U=k.getCalculatedWidth();Math.round(p.width)!==Math.round(U)&&f(vCe({id:e,width:U}))}}},[y,p,f,i,e,r,x]),p==null||v==null||x==null)return null;var{dangerouslySetInnerHTML:E,ticks:S,scale:w}=n,R=u3(n,IRe),{id:N,scale:O}=x,z=u3(x,RRe);return G.createElement(Bk,c3({},R,z,{ref:a,labelRef:s,x:v.x,y:v.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:p.width,height:p.height,className:ni("recharts-".concat(d," ").concat(d),t),viewBox:o,ticks:y,axisType:d}))}var URe={allowDataOverflow:Ra.allowDataOverflow,allowDecimals:Ra.allowDecimals,allowDuplicatedCategory:Ra.allowDuplicatedCategory,angle:Ra.angle,axisLine:gd.axisLine,hide:!1,includeHidden:Ra.includeHidden,interval:Ra.interval,label:!1,minTickGap:Ra.minTickGap,mirror:Ra.mirror,orientation:Ra.orientation,padding:Ra.padding,reversed:Ra.reversed,scale:Ra.scale,tick:Ra.tick,tickCount:Ra.tickCount,tickLine:gd.tickLine,tickSize:gd.tickSize,type:Ra.type,width:Ra.width,yAxisId:0},FRe=n=>{var e=yl(n,URe);return G.createElement(G.Fragment,null,G.createElement(LRe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),G.createElement(kRe,e))},uY=G.memo(FRe,lY);uY.displayName="YAxis";var zRe=(n,e)=>e,qk=Je([zRe,fi,h$,Ua,pX,Dd,xAe,us],MAe),Wk=n=>{var e=n.currentTarget.getBoundingClientRect(),t=e.width/n.currentTarget.offsetWidth,r=e.height/n.currentTarget.offsetHeight;return{chartX:Math.round((n.clientX-e.left)/t),chartY:Math.round((n.clientY-e.top)/r)}},fY=ic("mouseClick"),dY=a1();dY.startListening({actionCreator:fY,effect:(n,e)=>{var t=n.payload,r=qk(e.getState(),Wk(t));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(bEe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var f3=ic("mouseMove"),hY=a1(),sE=null;hY.startListening({actionCreator:f3,effect:(n,e)=>{var t=n.payload;sE!==null&&cancelAnimationFrame(sE);var r=Wk(t);sE=requestAnimationFrame(()=>{var i=e.getState(),a=Mk(i,i.tooltip.settings.shared);if(a==="axis"){var s=qk(i,r);(s==null?void 0:s.activeIndex)!=null?e.dispatch(aX({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(iX())}sE=null})}});function jRe(n,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":n==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var J6={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},pY=Go({name:"rootProps",initialState:J6,reducers:{updateOptions:(n,e)=>{var t;n.accessibilityLayer=e.payload.accessibilityLayer,n.barCategoryGap=e.payload.barCategoryGap,n.barGap=(t=e.payload.barGap)!==null&&t!==void 0?t:J6.barGap,n.barSize=e.payload.barSize,n.maxBarSize=e.payload.maxBarSize,n.stackOffset=e.payload.stackOffset,n.syncId=e.payload.syncId,n.syncMethod=e.payload.syncMethod,n.className=e.payload.className,n.baseValue=e.payload.baseValue,n.reverseStackOrder=e.payload.reverseStackOrder}}}),BRe=pY.reducer,{updateOptions:VRe}=pY.actions,HRe=null,GRe={updatePolarOptions:(n,e)=>e.payload},mY=Go({name:"polarOptions",initialState:HRe,reducers:GRe}),{updatePolarOptions:o3e}=mY.actions,qRe=mY.reducer,gY=ic("keyDown"),vY=ic("focus"),$k=a1();$k.startListening({actionCreator:gY,effect:(n,e)=>{var t=e.getState(),r=t.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=t.tooltip,a=n.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=Ck(i,Ty(t),g1(t),y1(t)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var c=Dd(t);if(a==="Enter"){var f=PT(t,"axis","hover",String(i.index));e.dispatch(n3({active:!i.active,activeIndex:i.index,activeCoordinate:f}));return}var d=uEe(t),p=d==="left-to-right"?1:-1,v=a==="ArrowRight"?1:-1,y=o+v*p;if(!(c==null||y>=c.length||y<0)){var x=PT(t,"axis","hover",String(y));e.dispatch(n3({active:!0,activeIndex:y.toString(),activeCoordinate:x}))}}}}}});$k.startListening({actionCreator:vY,effect:(n,e)=>{var t=e.getState(),r=t.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=t.tooltip;if(!i.active&&i.index==null){var a="0",s=PT(t,"axis","hover",String(a));e.dispatch(n3({active:!0,activeIndex:a,activeCoordinate:s}))}}}});var Xl=ic("externalEvent"),yY=a1(),gN=new Map;yY.startListening({actionCreator:Xl,effect:(n,e)=>{var{handler:t,reactEvent:r}=n.payload;if(t!=null){r.persist();var i=r.type,a=gN.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=e.getState(),c={activeCoordinate:aAe(o),activeDataKey:rAe(o),activeIndex:P_(o),activeLabel:vX(o),activeTooltipIndex:P_(o),isTooltipActive:sAe(o)};t(c,r)}finally{gN.delete(i)}});gN.set(i,s)}}});var WRe=Je([Ey],n=>n.tooltipItemPayloads),$Re=Je([WRe,(n,e)=>e,(n,e,t)=>t],(n,e,t)=>{if(e!=null){var r=n.find(a=>a.settings.graphicalItemId===t);if(r!=null){var{getPosition:i}=r;if(i!=null)return i(e)}}}),bY=ic("touchMove"),xY=a1();xY.startListening({actionCreator:bY,effect:(n,e)=>{var t=n.payload;if(!(t.touches==null||t.touches.length===0)){var r=e.getState(),i=Mk(r,r.tooltip.settings.shared);if(i==="axis"){var a=t.touches[0];if(a==null)return;var s=qk(r,Wk({clientX:a.clientX,clientY:a.clientY,currentTarget:t.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&e.dispatch(aX({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var o,c=t.touches[0];if(document.elementFromPoint==null||c==null)return;var f=document.elementFromPoint(c.clientX,c.clientY);if(!f||!f.getAttribute)return;var d=f.getAttribute(Jye),p=(o=f.getAttribute(ebe))!==null&&o!==void 0?o:void 0,v=Ay(r).find(E=>E.id===p);if(d==null||v==null||p==null)return;var{dataKey:y}=v,x=$Re(r,d,p);e.dispatch(yEe({activeDataKey:y,activeIndex:d,activeCoordinate:x,activeGraphicalItemId:p}))}}}});var XRe=dq({brush:MCe,cartesianAxis:yCe,chartData:aTe,errorBars:_Ie,graphicalItems:YMe,layout:Uye,legend:Wbe,options:eTe,polarAxis:kMe,polarOptions:qRe,referenceElements:PCe,rootProps:BRe,tooltip:xEe,zIndex:BAe}),YRe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return lye({reducer:XRe,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([dY.middleware,hY.middleware,$k.middleware,yY.middleware,xY.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(Mq({type:"raf"}))},devTools:{serialize:{replacer:jRe},name:"recharts-".concat(t)}})};function KRe(n){var{preloadedState:e,children:t,reduxStoreName:r}=n,i=qo(),a=G.useRef(null);if(i)return t;a.current==null&&(a.current=YRe(e,r));var s=ML;return G.createElement(zIe,{context:s,store:a.current},t)}function ZRe(n){var{layout:e,margin:t}=n,r=Da(),i=qo();return G.useEffect(()=>{i||(r(Dye(e)),r(Oye(t)))},[r,i,e,t]),null}var QRe=G.memo(ZRe,Vk);function JRe(n){var e=Da();return G.useEffect(()=>{e(VRe(n))},[e,n]),null}function eV(n){var{zIndex:e,isPanorama:t}=n,r=G.useRef(null),i=Da();return G.useLayoutEffect(()=>(r.current&&i(zAe({zIndex:e,element:r.current,isPanorama:t})),()=>{i(jAe({zIndex:e,isPanorama:t}))}),[i,e,t]),G.createElement("g",{tabIndex:-1,ref:r})}function tV(n){var{children:e,isPanorama:t}=n,r=un(IAe);if(!r||r.length===0)return e;var i=r.filter(s=>s<0),a=r.filter(s=>s>0);return G.createElement(G.Fragment,null,i.map(s=>G.createElement(eV,{key:s,zIndex:s,isPanorama:t})),e,a.map(s=>G.createElement(eV,{key:s,zIndex:s,isPanorama:t})))}var ePe=["children"];function tPe(n,e){if(n==null)return{};var t,r,i=nPe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function nPe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function kT(){return kT=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},kT.apply(null,arguments)}var rPe={width:"100%",height:"100%",display:"block"},iPe=G.forwardRef((n,e)=>{var t=Kq(),r=Zq(),i=sW();if(!df(t)||!df(r))return null;var{children:a,otherAttributes:s,title:o,desc:c}=n,f,d;return s!=null&&(typeof s.tabIndex=="number"?f=s.tabIndex:f=i?0:void 0,typeof s.role=="string"?d=s.role:d=i?"application":void 0),G.createElement(DG,kT({},s,{title:o,desc:c,role:d,tabIndex:f,width:t,height:r,style:rPe,ref:e}),a)}),aPe=n=>{var{children:e}=n,t=un(gC);if(!t)return null;var{width:r,height:i,y:a,x:s}=t;return G.createElement(DG,{width:r,height:i,x:s,y:a},e)},nV=G.forwardRef((n,e)=>{var{children:t}=n,r=tPe(n,ePe),i=qo();return i?G.createElement(aPe,null,G.createElement(tV,{isPanorama:!0},t)):G.createElement(iPe,kT({ref:e},r),G.createElement(tV,{isPanorama:!1},t))});function sPe(){var n=Da(),[e,t]=G.useState(null),r=un(Qye);return G.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;nr(a)&&a!==r&&n(kye(a))}},[e,n,r]),t}function rV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function oPe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rV(Object(t),!0).forEach(function(r){lPe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):rV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function lPe(n,e,t){return(e=cPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cPe(n){var e=uPe(n,"string");return typeof e=="symbol"?e:e+""}function uPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ap(){return ap=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ap.apply(null,arguments)}var fPe=()=>(pTe(),null);function UT(n){if(typeof n=="number")return n;if(typeof n=="string"){var e=parseFloat(n);if(!Number.isNaN(e))return e}return 0}var dPe=G.forwardRef((n,e)=>{var t,r,i=G.useRef(null),[a,s]=G.useState({containerWidth:UT((t=n.style)===null||t===void 0?void 0:t.width),containerHeight:UT((r=n.style)===null||r===void 0?void 0:r.height)}),o=G.useCallback((f,d)=>{s(p=>{var v=Math.round(f),y=Math.round(d);return p.containerWidth===v&&p.containerHeight===y?p:{containerWidth:v,containerHeight:y}})},[]),c=G.useCallback(f=>{if(typeof e=="function"&&e(f),f!=null&&typeof ResizeObserver<"u"){var{width:d,height:p}=f.getBoundingClientRect();o(d,p);var v=x=>{var E=x[0];if(E!=null){var{width:S,height:w}=E.contentRect;o(S,w)}},y=new ResizeObserver(v);y.observe(f),i.current=y}},[e,o]);return G.useEffect(()=>()=>{var f=i.current;f!=null&&f.disconnect()},[o]),G.createElement(G.Fragment,null,G.createElement(o1,{width:a.containerWidth,height:a.containerHeight}),G.createElement("div",ap({ref:c},n)))}),hPe=G.forwardRef((n,e)=>{var{width:t,height:r}=n,[i,a]=G.useState({containerWidth:UT(t),containerHeight:UT(r)}),s=G.useCallback((c,f)=>{a(d=>{var p=Math.round(c),v=Math.round(f);return d.containerWidth===p&&d.containerHeight===v?d:{containerWidth:p,containerHeight:v}})},[]),o=G.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:f,height:d}=c.getBoundingClientRect();s(f,d)}},[e,s]);return G.createElement(G.Fragment,null,G.createElement(o1,{width:i.containerWidth,height:i.containerHeight}),G.createElement("div",ap({ref:o},n)))}),pPe=G.forwardRef((n,e)=>{var{width:t,height:r}=n;return G.createElement(G.Fragment,null,G.createElement(o1,{width:t,height:r}),G.createElement("div",ap({ref:e},n)))}),mPe=G.forwardRef((n,e)=>{var{width:t,height:r}=n;return typeof t=="string"||typeof r=="string"?G.createElement(hPe,ap({},n,{ref:e})):typeof t=="number"&&typeof r=="number"?G.createElement(pPe,ap({},n,{width:t,height:r,ref:e})):G.createElement(G.Fragment,null,G.createElement(o1,{width:t,height:r}),G.createElement("div",ap({ref:e},n)))});function gPe(n){return n?dPe:mPe}var vPe=G.forwardRef((n,e)=>{var{children:t,className:r,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:c,onMouseEnter:f,onMouseLeave:d,onMouseMove:p,onMouseUp:v,onTouchEnd:y,onTouchMove:x,onTouchStart:E,style:S,width:w,responsive:R,dispatchTouchEvents:N=!0}=n,O=G.useRef(null),z=Da(),[k,U]=G.useState(null),[P,C]=G.useState(null),L=sPe(),j=DL(),B=(j==null?void 0:j.width)>0?j.width:w,V=(j==null?void 0:j.height)>0?j.height:i,Q=G.useCallback(me=>{L(me),typeof e=="function"&&e(me),U(me),C(me),me!=null&&(O.current=me)},[L,e,U,C]),J=G.useCallback(me=>{z(fY(me)),z(Xl({handler:a,reactEvent:me}))},[z,a]),W=G.useCallback(me=>{z(f3(me)),z(Xl({handler:f,reactEvent:me}))},[z,f]),$=G.useCallback(me=>{z(iX()),z(Xl({handler:d,reactEvent:me}))},[z,d]),se=G.useCallback(me=>{z(f3(me)),z(Xl({handler:p,reactEvent:me}))},[z,p]),ce=G.useCallback(()=>{z(vY())},[z]),fe=G.useCallback(me=>{z(gY(me.key))},[z]),Z=G.useCallback(me=>{z(Xl({handler:s,reactEvent:me}))},[z,s]),re=G.useCallback(me=>{z(Xl({handler:o,reactEvent:me}))},[z,o]),de=G.useCallback(me=>{z(Xl({handler:c,reactEvent:me}))},[z,c]),ve=G.useCallback(me=>{z(Xl({handler:v,reactEvent:me}))},[z,v]),pe=G.useCallback(me=>{z(Xl({handler:E,reactEvent:me}))},[z,E]),ye=G.useCallback(me=>{N&&z(bY(me)),z(Xl({handler:x,reactEvent:me}))},[z,N,x]),Ee=G.useCallback(me=>{z(Xl({handler:y,reactEvent:me}))},[z,y]),Xe=gPe(R);return G.createElement(AX.Provider,{value:k},G.createElement(p0e.Provider,{value:P},G.createElement(Xe,{width:B??(S==null?void 0:S.width),height:V??(S==null?void 0:S.height),className:ni("recharts-wrapper",r),style:oPe({position:"relative",cursor:"default",width:B,height:V},S),onClick:J,onContextMenu:Z,onDoubleClick:re,onFocus:ce,onKeyDown:fe,onMouseDown:de,onMouseEnter:W,onMouseLeave:$,onMouseMove:se,onMouseUp:ve,onTouchEnd:Ee,onTouchMove:ye,onTouchStart:pe,ref:Q},G.createElement(fPe,null),t)))}),yPe=["width","height","responsive","children","className","style","compact","title","desc"];function bPe(n,e){if(n==null)return{};var t,r,i=xPe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function xPe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var _Pe=G.forwardRef((n,e)=>{var{width:t,height:r,responsive:i,children:a,className:s,style:o,compact:c,title:f,desc:d}=n,p=bPe(n,yPe),v=Xc(p);return c?G.createElement(G.Fragment,null,G.createElement(o1,{width:t,height:r}),G.createElement(nV,{otherAttributes:v,title:f,desc:d},a)):G.createElement(vPe,{className:s,style:o,width:t,height:r,responsive:i??!1,onClick:n.onClick,onMouseLeave:n.onMouseLeave,onMouseEnter:n.onMouseEnter,onMouseMove:n.onMouseMove,onMouseDown:n.onMouseDown,onMouseUp:n.onMouseUp,onContextMenu:n.onContextMenu,onDoubleClick:n.onDoubleClick,onTouchStart:n.onTouchStart,onTouchMove:n.onTouchMove,onTouchEnd:n.onTouchEnd},G.createElement(nV,{otherAttributes:v,title:f,desc:d,ref:e},G.createElement(OCe,null,a)))});function d3(){return d3=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},d3.apply(null,arguments)}var SPe={top:5,right:5,bottom:5,left:5},wPe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:SPe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},EPe=G.forwardRef(function(e,t){var r,i=yl(e.categoricalChartProps,wPe),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:f}=e,d={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return G.createElement(KRe,{preloadedState:{options:d},reduxStoreName:(r=f.id)!==null&&r!==void 0?r:a},G.createElement(TCe,{chartData:f.data}),G.createElement(QRe,{layout:i.layout,margin:i.margin}),G.createElement(JRe,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),G.createElement(_Pe,d3({},i,{ref:t})))}),APe=["axis"],TPe=G.forwardRef((n,e)=>G.createElement(EPe,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:APe,tooltipPayloadSearcher:QAe,categoricalChartProps:n,ref:e}));const _Y=6048e5,MPe=864e5,iV=Symbol.for("constructDateFrom");function bp(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&iV in n?n[iV](e):n instanceof Date?new n.constructor(e):new Date(e)}function Qc(n,e){return bp(e||n,n)}let CPe={};function FC(){return CPe}function D_(n,e){var o,c,f,d;const t=FC(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((d=(f=t.locale)==null?void 0:f.options)==null?void 0:d.weekStartsOn)??0,i=Qc(n,e==null?void 0:e.in),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function FT(n,e){return D_(n,{...e,weekStartsOn:1})}function SY(n,e){const t=Qc(n,e==null?void 0:e.in),r=t.getFullYear(),i=bp(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=FT(i),s=bp(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=FT(s);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function aV(n){const e=Qc(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function IPe(n,...e){const t=bp.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function sV(n,e){const t=Qc(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function RPe(n,e,t){const[r,i]=IPe(t==null?void 0:t.in,n,e),a=sV(r),s=sV(i),o=+a-aV(a),c=+s-aV(s);return Math.round((o-c)/MPe)}function PPe(n,e){const t=SY(n,e),r=bp(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),FT(r)}function NPe(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function OPe(n){return!(!NPe(n)&&typeof n!="number"||isNaN(+Qc(n)))}function DPe(n,e){const t=Qc(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const LPe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},kPe=(n,e,t)=>{let r;const i=LPe[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Nv(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const UPe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},FPe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zPe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jPe={date:Nv({formats:UPe,defaultWidth:"full"}),time:Nv({formats:FPe,defaultWidth:"full"}),dateTime:Nv({formats:zPe,defaultWidth:"full"})},BPe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},VPe=(n,e,t,r)=>BPe[n];function Vu(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const s=n.defaultFormattingWidth||n.defaultWidth,o=t!=null&&t.width?String(t.width):s;i=n.formattingValues[o]||n.formattingValues[s]}else{const s=n.defaultWidth,o=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[o]||n.values[s]}const a=n.argumentCallback?n.argumentCallback(e):e;return i[a]}}const HPe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},GPe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qPe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},WPe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},$Pe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},XPe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},YPe=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},KPe={ordinalNumber:YPe,era:Vu({values:HPe,defaultWidth:"wide"}),quarter:Vu({values:GPe,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Vu({values:qPe,defaultWidth:"wide"}),day:Vu({values:WPe,defaultWidth:"wide"}),dayPeriod:Vu({values:$Pe,defaultWidth:"wide",formattingValues:XPe,defaultFormattingWidth:"wide"})};function Hu(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(o)?QPe(o,p=>p.test(s)):ZPe(o,p=>p.test(s));let f;f=n.valueCallback?n.valueCallback(c):c,f=t.valueCallback?t.valueCallback(f):f;const d=e.slice(s.length);return{value:f,rest:d}}}function ZPe(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function QPe(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function wY(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],a=e.match(n.parsePattern);if(!a)return null;let s=n.valueCallback?n.valueCallback(a[0]):a[0];s=t.valueCallback?t.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const JPe=/^(\d+)(th|st|nd|rd)?/i,eNe=/\d+/i,tNe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},nNe={any:[/^b/i,/^(a|c)/i]},rNe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},iNe={any:[/1/i,/2/i,/3/i,/4/i]},aNe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sNe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},oNe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},lNe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},cNe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},uNe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fNe={ordinalNumber:wY({matchPattern:JPe,parsePattern:eNe,valueCallback:n=>parseInt(n,10)}),era:Hu({matchPatterns:tNe,defaultMatchWidth:"wide",parsePatterns:nNe,defaultParseWidth:"any"}),quarter:Hu({matchPatterns:rNe,defaultMatchWidth:"wide",parsePatterns:iNe,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Hu({matchPatterns:aNe,defaultMatchWidth:"wide",parsePatterns:sNe,defaultParseWidth:"any"}),day:Hu({matchPatterns:oNe,defaultMatchWidth:"wide",parsePatterns:lNe,defaultParseWidth:"any"}),dayPeriod:Hu({matchPatterns:cNe,defaultMatchWidth:"any",parsePatterns:uNe,defaultParseWidth:"any"})},dNe={code:"en-US",formatDistance:kPe,formatLong:jPe,formatRelative:VPe,localize:KPe,match:fNe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function hNe(n,e){const t=Qc(n,e==null?void 0:e.in);return RPe(t,DPe(t))+1}function pNe(n,e){const t=Qc(n,e==null?void 0:e.in),r=+FT(t)-+PPe(t);return Math.round(r/_Y)+1}function EY(n,e){var d,p,v,y;const t=Qc(n,e==null?void 0:e.in),r=t.getFullYear(),i=FC(),a=(e==null?void 0:e.firstWeekContainsDate)??((p=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((y=(v=i.locale)==null?void 0:v.options)==null?void 0:y.firstWeekContainsDate)??1,s=bp((e==null?void 0:e.in)||n,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const o=D_(s,e),c=bp((e==null?void 0:e.in)||n,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const f=D_(c,e);return+t>=+o?r+1:+t>=+f?r:r-1}function mNe(n,e){var o,c,f,d;const t=FC(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((d=(f=t.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??1,i=EY(n,e),a=bp((e==null?void 0:e.in)||n,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),D_(a,e)}function gNe(n,e){const t=Qc(n,e==null?void 0:e.in),r=+D_(t,e)-+mNe(t,e);return Math.round(r/_Y)+1}function Cr(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const Lh={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return Cr(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Cr(t+1,2)},d(n,e){return Cr(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Cr(n.getHours()%12||12,e.length)},H(n,e){return Cr(n.getHours(),e.length)},m(n,e){return Cr(n.getMinutes(),e.length)},s(n,e){return Cr(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return Cr(i,e.length)}},cv={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},oV={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return Lh.y(n,e)},Y:function(n,e,t,r){const i=EY(n,r),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return Cr(s,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):Cr(a,e.length)},R:function(n,e){const t=SY(n);return Cr(t,e.length)},u:function(n,e){const t=n.getFullYear();return Cr(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Cr(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Cr(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return Lh.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Cr(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=gNe(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Cr(i,e.length)},I:function(n,e,t){const r=pNe(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Cr(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Lh.d(n,e)},D:function(n,e,t){const r=hNe(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Cr(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Cr(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Cr(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Cr(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=cv.noon:r===0?i=cv.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=cv.evening:r>=12?i=cv.afternoon:r>=4?i=cv.morning:i=cv.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return Lh.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Lh.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Cr(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Cr(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Lh.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Lh.s(n,e)},S:function(n,e){return Lh.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return cV(r);case"XXXX":case"XX":return Dm(r);case"XXXXX":case"XXX":default:return Dm(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return cV(r);case"xxxx":case"xx":return Dm(r);case"xxxxx":case"xxx":default:return Dm(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+lV(r,":");case"OOOO":default:return"GMT"+Dm(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+lV(r,":");case"zzzz":default:return"GMT"+Dm(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return Cr(r,e.length)},T:function(n,e,t){return Cr(+n,e.length)}};function lV(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),a=r%60;return a===0?t+String(i):t+String(i)+e+Cr(a,2)}function cV(n,e){return n%60===0?(n>0?"-":"+")+Cr(Math.abs(n)/60,2):Dm(n,e)}function Dm(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Cr(Math.trunc(r/60),2),a=Cr(r%60,2);return t+i+e+a}const uV=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},AY=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},vNe=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return uV(n,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",uV(r,e)).replace("{{time}}",AY(i,e))},yNe={p:AY,P:vNe},bNe=/^D+$/,xNe=/^Y+$/,_Ne=["D","DD","YY","YYYY"];function SNe(n){return bNe.test(n)}function wNe(n){return xNe.test(n)}function ENe(n,e,t){const r=ANe(n,e,t);if(console.warn(r),_Ne.includes(n))throw new RangeError(r)}function ANe(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const TNe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,MNe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,CNe=/^'([^]*?)'?$/,INe=/''/g,RNe=/[a-zA-Z]/;function PNe(n,e,t){var d,p,v,y,x,E,S,w;const r=FC(),i=(t==null?void 0:t.locale)??r.locale??dNe,a=(t==null?void 0:t.firstWeekContainsDate)??((p=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((y=(v=r.locale)==null?void 0:v.options)==null?void 0:y.firstWeekContainsDate)??1,s=(t==null?void 0:t.weekStartsOn)??((E=(x=t==null?void 0:t.locale)==null?void 0:x.options)==null?void 0:E.weekStartsOn)??r.weekStartsOn??((w=(S=r.locale)==null?void 0:S.options)==null?void 0:w.weekStartsOn)??0,o=Qc(n,t==null?void 0:t.in);if(!OPe(o))throw new RangeError("Invalid time value");let c=e.match(MNe).map(R=>{const N=R[0];if(N==="p"||N==="P"){const O=yNe[N];return O(R,i.formatLong)}return R}).join("").match(TNe).map(R=>{if(R==="''")return{isToken:!1,value:"'"};const N=R[0];if(N==="'")return{isToken:!1,value:NNe(R)};if(oV[N])return{isToken:!0,value:R};if(N.match(RNe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");return{isToken:!1,value:R}});i.localize.preprocessor&&(c=i.localize.preprocessor(o,c));const f={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return c.map(R=>{if(!R.isToken)return R.value;const N=R.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&wNe(N)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&SNe(N))&&ENe(N,e,String(n));const O=oV[N[0]];return O(o,N,i.localize,f)}).join("")}function NNe(n){const e=n.match(CNe);return e?e[1].replace(INe,"'"):n}const ONe={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},DNe=(n,e,t)=>{let r;const i=ONe[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"en "+r:"hace "+r:r},LNe={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},kNe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},UNe={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},FNe={date:Nv({formats:LNe,defaultWidth:"full"}),time:Nv({formats:kNe,defaultWidth:"full"}),dateTime:Nv({formats:UNe,defaultWidth:"full"})},zNe={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},jNe={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},BNe=(n,e,t,r)=>e.getHours()!==1?jNe[n]:zNe[n],VNe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},HNe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},GNe={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},qNe={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},WNe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},$Ne={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},XNe=(n,e)=>Number(n)+"",YNe={ordinalNumber:XNe,era:Vu({values:VNe,defaultWidth:"wide"}),quarter:Vu({values:HNe,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:Vu({values:GNe,defaultWidth:"wide"}),day:Vu({values:qNe,defaultWidth:"wide"}),dayPeriod:Vu({values:WNe,defaultWidth:"wide",formattingValues:$Ne,defaultFormattingWidth:"wide"})},KNe=/^(\d+)()?/i,ZNe=/\d+/i,QNe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},JNe={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},eOe={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},tOe={any:[/1/i,/2/i,/3/i,/4/i]},nOe={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},rOe={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},iOe={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},aOe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},sOe={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},oOe={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},lOe={ordinalNumber:wY({matchPattern:KNe,parsePattern:ZNe,valueCallback:function(n){return parseInt(n,10)}}),era:Hu({matchPatterns:QNe,defaultMatchWidth:"wide",parsePatterns:JNe,defaultParseWidth:"any"}),quarter:Hu({matchPatterns:eOe,defaultMatchWidth:"wide",parsePatterns:tOe,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Hu({matchPatterns:nOe,defaultMatchWidth:"wide",parsePatterns:rOe,defaultParseWidth:"any"}),day:Hu({matchPatterns:iOe,defaultMatchWidth:"wide",parsePatterns:aOe,defaultParseWidth:"any"}),dayPeriod:Hu({matchPatterns:sOe,defaultMatchWidth:"any",parsePatterns:oOe,defaultParseWidth:"any"})},cOe={code:"es",formatDistance:DNe,formatLong:FNe,formatRelative:BNe,localize:YNe,match:lOe,options:{weekStartsOn:1,firstWeekContainsDate:1}},uOe=({orders:n})=>{const e=n.reduce((r,i)=>{try{const[a,s,o]=i.date.split("/"),c=`${o}-${s}-${a}`;r[c]||(r[c]=0),r[c]+=parseFloat(i.total)}catch{}return r},{}),t=Object.keys(e).sort().map(r=>({date:r,total:e[r],displayDate:PNe(new Date(r),"dd MMM",{locale:cOe})}));return A.jsxs("div",{className:"h-[300px] w-full bg-slate-800 p-4 rounded-xl border border-slate-700",children:[A.jsx("h3",{className:"text-slate-400 text-sm font-bold mb-4 uppercase",children:"Ventas (Histrico)"}),A.jsx(Cbe,{width:"100%",height:"100%",children:A.jsxs(TPe,{data:t,children:[A.jsx("defs",{children:A.jsxs("linearGradient",{id:"colorTotal",x1:"0",y1:"0",x2:"0",y2:"1",children:[A.jsx("stop",{offset:"5%",stopColor:"#F59E0B",stopOpacity:.8}),A.jsx("stop",{offset:"95%",stopColor:"#F59E0B",stopOpacity:0})]})}),A.jsx(KX,{strokeDasharray:"3 3",stroke:"#374151"}),A.jsx(cY,{dataKey:"displayDate",stroke:"#9CA3AF",fontSize:12}),A.jsx(uY,{stroke:"#9CA3AF",fontSize:12,unit:"$"}),A.jsx(STe,{contentStyle:{backgroundColor:"#1F2937",borderColor:"#374151",color:"#F3F4F6"},formatter:r=>[`$${r}`,"Ventas"]}),A.jsx(oY,{type:"monotone",dataKey:"total",stroke:"#F59E0B",fillOpacity:1,fill:"url(#colorTotal)"})]})})]})};function fOe(n,e){return e.forEach((function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach((function(r){if(r!=="default"&&!(r in n)){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}}))})),Object.freeze(n)}function TY(n,e){return new Promise((function(t,r){let i;return dOe(n).then((function(a){try{return i=a,t(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(s){return r(s)}}),r)}))}const dOe=n=>new Promise(((e,t)=>{const r=new FileReader;r.addEventListener("load",(({target:{result:i}})=>{const a=new DataView(i);let s=0;if(a.getUint16(s)!==65496)return t("not a valid JPEG");for(s+=2;;){const o=a.getUint16(s);if(o===65498)break;const c=a.getUint16(s+2);if(o===65505&&a.getUint32(s+4)===1165519206){const f=s+10;let d;switch(a.getUint16(f)){case 18761:d=!0;break;case 19789:d=!1;break;default:return t("TIFF header contains invalid endian")}if(a.getUint16(f+2,d)!==42)return t("TIFF header contains invalid version");const p=a.getUint32(f+4,d),v=f+p+2+12*a.getUint16(f+p,d);for(let y=f+p+2;y<v;y+=12)if(a.getUint16(y,d)==274){if(a.getUint16(y+2,d)!==3)return t("Orientation data type is invalid");if(a.getUint32(y+4,d)!==1)return t("Orientation data count is invalid");a.setUint16(y+8,1,d);break}return e(i.slice(s,s+2+c))}s+=2+c}return e(new Blob)})),r.readAsArrayBuffer(n)}));var zT={},hOe={get exports(){return zT},set exports(n){zT=n}};(function(n){var e,t,r={};hOe.exports=r,r.parse=function(i,a){for(var s=r.bin.readUshort,o=r.bin.readUint,c=0,f={},d=new Uint8Array(i),p=d.length-4;o(d,p)!=101010256;)p--;c=p,c+=4;var v=s(d,c+=4);s(d,c+=2);var y=o(d,c+=2),x=o(d,c+=4);c+=4,c=x;for(var E=0;E<v;E++){o(d,c),c+=4,c+=4,c+=4,o(d,c+=4),y=o(d,c+=4);var S=o(d,c+=4),w=s(d,c+=4),R=s(d,c+2),N=s(d,c+4);c+=6;var O=o(d,c+=8);c+=4,c+=w+R+N,r._readLocal(d,O,f,y,S,a)}return f},r._readLocal=function(i,a,s,o,c,f){var d=r.bin.readUshort,p=r.bin.readUint;p(i,a),d(i,a+=4),d(i,a+=2);var v=d(i,a+=2);p(i,a+=2),p(i,a+=4),a+=4;var y=d(i,a+=8),x=d(i,a+=2);a+=2;var E=r.bin.readUTF8(i,a,y);if(a+=y,a+=x,f)s[E]={size:c,csize:o};else{var S=new Uint8Array(i.buffer,a);if(v==0)s[E]=new Uint8Array(S.buffer.slice(a,a+o));else{if(v!=8)throw"unknown compression method: "+v;var w=new Uint8Array(c);r.inflateRaw(S,w),s[E]=w}}},r.inflateRaw=function(i,a){return r.F.inflate(i,a)},r.inflate=function(i,a){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),a)},r.deflate=function(i,a){a==null&&(a={level:6});var s=0,o=new Uint8Array(50+Math.floor(1.1*i.length));o[s]=120,o[s+1]=156,s+=2,s=r.F.deflateRaw(i,o,s,a.level);var c=r.adler(i,0,i.length);return o[s+0]=c>>>24&255,o[s+1]=c>>>16&255,o[s+2]=c>>>8&255,o[s+3]=c>>>0&255,new Uint8Array(o.buffer,0,s+4)},r.deflateRaw=function(i,a){a==null&&(a={level:6});var s=new Uint8Array(50+Math.floor(1.1*i.length)),o=r.F.deflateRaw(i,s,o,a.level);return new Uint8Array(s.buffer,0,o)},r.encode=function(i,a){a==null&&(a=!1);var s=0,o=r.bin.writeUint,c=r.bin.writeUshort,f={};for(var d in i){var p=!r._noNeed(d)&&!a,v=i[d],y=r.crc.crc(v,0,v.length);f[d]={cpr:p,usize:v.length,crc:y,file:p?r.deflateRaw(v):v}}for(var d in f)s+=f[d].file.length+30+46+2*r.bin.sizeUTF8(d);s+=22;var x=new Uint8Array(s),E=0,S=[];for(var d in f){var w=f[d];S.push(E),E=r._writeHeader(x,E,d,w,0)}var R=0,N=E;for(var d in f)w=f[d],S.push(E),E=r._writeHeader(x,E,d,w,1,S[R++]);var O=E-N;return o(x,E,101010256),E+=4,c(x,E+=4,R),c(x,E+=2,R),o(x,E+=2,O),o(x,E+=4,N),E+=4,E+=2,x.buffer},r._noNeed=function(i){var a=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},r._writeHeader=function(i,a,s,o,c,f){var d=r.bin.writeUint,p=r.bin.writeUshort,v=o.file;return d(i,a,c==0?67324752:33639248),a+=4,c==1&&(a+=2),p(i,a,20),p(i,a+=2,0),p(i,a+=2,o.cpr?8:0),d(i,a+=2,0),d(i,a+=4,o.crc),d(i,a+=4,v.length),d(i,a+=4,o.usize),p(i,a+=4,r.bin.sizeUTF8(s)),p(i,a+=2,0),a+=2,c==1&&(a+=2,a+=2,d(i,a+=6,f),a+=4),a+=r.bin.writeUTF8(i,a,s),c==0&&(i.set(v,a),a+=v.length),a},r.crc={table:(function(){for(var i=new Uint32Array(256),a=0;a<256;a++){for(var s=a,o=0;o<8;o++)1&s?s=3988292384^s>>>1:s>>>=1;i[a]=s}return i})(),update:function(i,a,s,o){for(var c=0;c<o;c++)i=r.crc.table[255&(i^a[s+c])]^i>>>8;return i},crc:function(i,a,s){return 4294967295^r.crc.update(4294967295,i,a,s)}},r.adler=function(i,a,s){for(var o=1,c=0,f=a,d=a+s;f<d;){for(var p=Math.min(f+5552,d);f<p;)c+=o+=i[f++];o%=65521,c%=65521}return c<<16|o},r.bin={readUshort:function(i,a){return i[a]|i[a+1]<<8},writeUshort:function(i,a,s){i[a]=255&s,i[a+1]=s>>8&255},readUint:function(i,a){return 16777216*i[a+3]+(i[a+2]<<16|i[a+1]<<8|i[a])},writeUint:function(i,a,s){i[a]=255&s,i[a+1]=s>>8&255,i[a+2]=s>>16&255,i[a+3]=s>>24&255},readASCII:function(i,a,s){for(var o="",c=0;c<s;c++)o+=String.fromCharCode(i[a+c]);return o},writeASCII:function(i,a,s){for(var o=0;o<s.length;o++)i[a+o]=s.charCodeAt(o)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,a,s){for(var o,c="",f=0;f<s;f++)c+="%"+r.bin.pad(i[a+f].toString(16));try{o=decodeURIComponent(c)}catch{return r.bin.readASCII(i,a,s)}return o},writeUTF8:function(i,a,s){for(var o=s.length,c=0,f=0;f<o;f++){var d=s.charCodeAt(f);if((4294967168&d)==0)i[a+c]=d,c++;else if((4294965248&d)==0)i[a+c]=192|d>>6,i[a+c+1]=128|d>>0&63,c+=2;else if((4294901760&d)==0)i[a+c]=224|d>>12,i[a+c+1]=128|d>>6&63,i[a+c+2]=128|d>>0&63,c+=3;else{if((4292870144&d)!=0)throw"e";i[a+c]=240|d>>18,i[a+c+1]=128|d>>12&63,i[a+c+2]=128|d>>6&63,i[a+c+3]=128|d>>0&63,c+=4}}return c},sizeUTF8:function(i){for(var a=i.length,s=0,o=0;o<a;o++){var c=i.charCodeAt(o);if((4294967168&c)==0)s++;else if((4294965248&c)==0)s+=2;else if((4294901760&c)==0)s+=3;else{if((4292870144&c)!=0)throw"e";s+=4}}return s}},r.F={},r.F.deflateRaw=function(i,a,s,o){var c=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],f=r.F.U,d=r.F._goodIndex;r.F._hash;var p=r.F._putsE,v=0,y=s<<3,x=0,E=i.length;if(o==0){for(;v<E;)p(a,y,v+(j=Math.min(65535,E-v))==E?1:0),y=r.F._copyExact(i,v,j,a,y+8),v+=j;return y>>>3}var S=f.lits,w=f.strt,R=f.prev,N=0,O=0,z=0,k=0,U=0,P=0;for(E>2&&(w[P=r.F._hash(i,0)]=0),v=0;v<E;v++){if(U=P,v+1<E-2){P=r.F._hash(i,v+1);var C=v+1&32767;R[C]=w[P],w[P]=C}if(x<=v){(N>14e3||O>26697)&&E-v>100&&(x<v&&(S[N]=v-x,N+=2,x=v),y=r.F._writeBlock(v==E-1||x==E?1:0,S,N,k,i,z,v-z,a,y),N=O=k=0,z=v);var L=0;v<E-2&&(L=r.F._bestMatch(i,v,R,U,Math.min(c[2],E-v),c[3]));var j=L>>>16,B=65535&L;if(L!=0){B=65535&L;var V=d(j=L>>>16,f.of0);f.lhst[257+V]++;var Q=d(B,f.df0);f.dhst[Q]++,k+=f.exb[V]+f.dxb[Q],S[N]=j<<23|v-x,S[N+1]=B<<16|V<<8|Q,N+=2,x=v+j}else f.lhst[i[v]]++;O++}}for(z==v&&i.length!=0||(x<v&&(S[N]=v-x,N+=2,x=v),y=r.F._writeBlock(1,S,N,k,i,z,v-z,a,y),N=0,O=0,N=O=k=0,z=v);(7&y)!=0;)y++;return y>>>3},r.F._bestMatch=function(i,a,s,o,c,f){var d=32767&a,p=s[d],v=d-p+32768&32767;if(p==d||o!=r.F._hash(i,a-v))return 0;for(var y=0,x=0,E=Math.min(32767,a);v<=E&&--f!=0&&p!=d;){if(y==0||i[a+y]==i[a+y-v]){var S=r.F._howLong(i,a,v);if(S>y){if(x=v,(y=S)>=c)break;v+2<S&&(S=v+2);for(var w=0,R=0;R<S-2;R++){var N=a-v+R+32768&32767,O=N-s[N]+32768&32767;O>w&&(w=O,p=N)}}}v+=(d=p)-(p=s[d])+32768&32767}return y<<16|x},r.F._howLong=function(i,a,s){if(i[a]!=i[a-s]||i[a+1]!=i[a+1-s]||i[a+2]!=i[a+2-s])return 0;var o=a,c=Math.min(i.length,a+258);for(a+=3;a<c&&i[a]==i[a-s];)a++;return a-o},r.F._hash=function(i,a){return(i[a]<<8|i[a+1])+(i[a+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,a,s,o,c,f,d,p,v){var y,x,E,S,w,R,N,O,z,k=r.F.U,U=r.F._putsF,P=r.F._putsE;k.lhst[256]++,x=(y=r.F.getTrees())[0],E=y[1],S=y[2],w=y[3],R=y[4],N=y[5],O=y[6],z=y[7];var C=32+((v+3&7)==0?0:8-(v+3&7))+(d<<3),L=o+r.F.contSize(k.fltree,k.lhst)+r.F.contSize(k.fdtree,k.dhst),j=o+r.F.contSize(k.ltree,k.lhst)+r.F.contSize(k.dtree,k.dhst);j+=14+3*N+r.F.contSize(k.itree,k.ihst)+(2*k.ihst[16]+3*k.ihst[17]+7*k.ihst[18]);for(var B=0;B<286;B++)k.lhst[B]=0;for(B=0;B<30;B++)k.dhst[B]=0;for(B=0;B<19;B++)k.ihst[B]=0;var V=C<L&&C<j?0:L<j?1:2;if(U(p,v,i),U(p,v+1,V),v+=3,V==0){for(;(7&v)!=0;)v++;v=r.F._copyExact(c,f,d,p,v)}else{var Q,J;if(V==1&&(Q=k.fltree,J=k.fdtree),V==2){r.F.makeCodes(k.ltree,x),r.F.revCodes(k.ltree,x),r.F.makeCodes(k.dtree,E),r.F.revCodes(k.dtree,E),r.F.makeCodes(k.itree,S),r.F.revCodes(k.itree,S),Q=k.ltree,J=k.dtree,P(p,v,w-257),P(p,v+=5,R-1),P(p,v+=5,N-4),v+=4;for(var W=0;W<N;W++)P(p,v+3*W,k.itree[1+(k.ordr[W]<<1)]);v+=3*N,v=r.F._codeTiny(O,k.itree,p,v),v=r.F._codeTiny(z,k.itree,p,v)}for(var $=f,se=0;se<s;se+=2){for(var ce=a[se],fe=ce>>>23,Z=$+(8388607&ce);$<Z;)v=r.F._writeLit(c[$++],Q,p,v);if(fe!=0){var re=a[se+1],de=re>>16,ve=re>>8&255,pe=255&re;P(p,v=r.F._writeLit(257+ve,Q,p,v),fe-k.of0[ve]),v+=k.exb[ve],U(p,v=r.F._writeLit(pe,J,p,v),de-k.df0[pe]),v+=k.dxb[pe],$+=fe}}v=r.F._writeLit(256,Q,p,v)}return v},r.F._copyExact=function(i,a,s,o,c){var f=c>>>3;return o[f]=s,o[f+1]=s>>>8,o[f+2]=255-o[f],o[f+3]=255-o[f+1],f+=4,o.set(new Uint8Array(i.buffer,a,s),f),c+(s+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,a=r.F._hufTree(i.lhst,i.ltree,15),s=r.F._hufTree(i.dhst,i.dtree,15),o=[],c=r.F._lenCodes(i.ltree,o),f=[],d=r.F._lenCodes(i.dtree,f),p=0;p<o.length;p+=2)i.ihst[o[p]]++;for(p=0;p<f.length;p+=2)i.ihst[f[p]]++;for(var v=r.F._hufTree(i.ihst,i.itree,7),y=19;y>4&&i.itree[1+(i.ordr[y-1]<<1)]==0;)y--;return[a,s,v,c,d,y,o,f]},r.F.getSecond=function(i){for(var a=[],s=0;s<i.length;s+=2)a.push(i[s+1]);return a},r.F.nonZero=function(i){for(var a="",s=0;s<i.length;s+=2)i[s+1]!=0&&(a+=(s>>1)+",");return a},r.F.contSize=function(i,a){for(var s=0,o=0;o<a.length;o++)s+=a[o]*i[1+(o<<1)];return s},r.F._codeTiny=function(i,a,s,o){for(var c=0;c<i.length;c+=2){var f=i[c],d=i[c+1];o=r.F._writeLit(f,a,s,o);var p=f==16?2:f==17?3:7;f>15&&(r.F._putsE(s,o,d,p),o+=p)}return o},r.F._lenCodes=function(i,a){for(var s=i.length;s!=2&&i[s-1]==0;)s-=2;for(var o=0;o<s;o+=2){var c=i[o+1],f=o+3<s?i[o+3]:-1,d=o+5<s?i[o+5]:-1,p=o==0?-1:i[o-1];if(c==0&&f==c&&d==c){for(var v=o+5;v+2<s&&i[v+2]==c;)v+=2;(y=Math.min(v+1-o>>>1,138))<11?a.push(17,y-3):a.push(18,y-11),o+=2*y-2}else if(c==p&&f==c&&d==c){for(v=o+5;v+2<s&&i[v+2]==c;)v+=2;var y=Math.min(v+1-o>>>1,6);a.push(16,y-3),o+=2*y-2}else a.push(c,0)}return s>>>1},r.F._hufTree=function(i,a,s){var o=[],c=i.length,f=a.length,d=0;for(d=0;d<f;d+=2)a[d]=0,a[d+1]=0;for(d=0;d<c;d++)i[d]!=0&&o.push({lit:d,f:i[d]});var p=o.length,v=o.slice(0);if(p==0)return 0;if(p==1){var y=o[0].lit;return v=y==0?1:0,a[1+(y<<1)]=1,a[1+(v<<1)]=1,1}o.sort((function(O,z){return O.f-z.f}));var x=o[0],E=o[1],S=0,w=1,R=2;for(o[0]={lit:-1,f:x.f+E.f,l:x,r:E,d:0};w!=p-1;)x=S!=w&&(R==p||o[S].f<o[R].f)?o[S++]:o[R++],E=S!=w&&(R==p||o[S].f<o[R].f)?o[S++]:o[R++],o[w++]={lit:-1,f:x.f+E.f,l:x,r:E};var N=r.F.setDepth(o[w-1],0);for(N>s&&(r.F.restrictDepth(v,s,N),N=s),d=0;d<p;d++)a[1+(v[d].lit<<1)]=v[d].d;return N},r.F.setDepth=function(i,a){return i.lit!=-1?(i.d=a,a):Math.max(r.F.setDepth(i.l,a+1),r.F.setDepth(i.r,a+1))},r.F.restrictDepth=function(i,a,s){var o=0,c=1<<s-a,f=0;for(i.sort((function(p,v){return v.d==p.d?p.f-v.f:v.d-p.d})),o=0;o<i.length&&i[o].d>a;o++){var d=i[o].d;i[o].d=a,f+=c-(1<<s-d)}for(f>>>=s-a;f>0;)(d=i[o].d)<a?(i[o].d++,f-=1<<a-d-1):o++;for(;o>=0;o--)i[o].d==a&&f<0&&(i[o].d--,f++);f!=0&&console.log("debt left")},r.F._goodIndex=function(i,a){var s=0;return a[16|s]<=i&&(s|=16),a[8|s]<=i&&(s|=8),a[4|s]<=i&&(s|=4),a[2|s]<=i&&(s|=2),a[1|s]<=i&&(s|=1),s},r.F._writeLit=function(i,a,s,o){return r.F._putsF(s,o,a[i<<1]),o+a[1+(i<<1)]},r.F.inflate=function(i,a){var s=Uint8Array;if(i[0]==3&&i[1]==0)return a||new s(0);var o=r.F,c=o._bitsF,f=o._bitsE,d=o._decodeTiny,p=o.makeCodes,v=o.codes2map,y=o._get17,x=o.U,E=a==null;E&&(a=new s(i.length>>>2<<3));for(var S,w,R=0,N=0,O=0,z=0,k=0,U=0,P=0,C=0,L=0;R==0;)if(R=c(i,L,1),N=c(i,L+1,2),L+=3,N!=0){if(E&&(a=r.F._check(a,C+(1<<17))),N==1&&(S=x.flmap,w=x.fdmap,U=511,P=31),N==2){O=f(i,L,5)+257,z=f(i,L+5,5)+1,k=f(i,L+10,4)+4,L+=14;for(var j=0;j<38;j+=2)x.itree[j]=0,x.itree[j+1]=0;var B=1;for(j=0;j<k;j++){var V=f(i,L+3*j,3);x.itree[1+(x.ordr[j]<<1)]=V,V>B&&(B=V)}L+=3*k,p(x.itree,B),v(x.itree,B,x.imap),S=x.lmap,w=x.dmap,L=d(x.imap,(1<<B)-1,O+z,i,L,x.ttree);var Q=o._copyOut(x.ttree,0,O,x.ltree);U=(1<<Q)-1;var J=o._copyOut(x.ttree,O,z,x.dtree);P=(1<<J)-1,p(x.ltree,Q),v(x.ltree,Q,S),p(x.dtree,J),v(x.dtree,J,w)}for(;;){var W=S[y(i,L)&U];L+=15&W;var $=W>>>4;if(!($>>>8))a[C++]=$;else{if($==256)break;var se=C+$-254;if($>264){var ce=x.ldef[$-257];se=C+(ce>>>3)+f(i,L,7&ce),L+=7&ce}var fe=w[y(i,L)&P];L+=15&fe;var Z=fe>>>4,re=x.ddef[Z],de=(re>>>4)+c(i,L,15&re);for(L+=15&re,E&&(a=r.F._check(a,C+(1<<17)));C<se;)a[C]=a[C++-de],a[C]=a[C++-de],a[C]=a[C++-de],a[C]=a[C++-de];C=se}}}else{(7&L)!=0&&(L+=8-(7&L));var ve=4+(L>>>3),pe=i[ve-4]|i[ve-3]<<8;E&&(a=r.F._check(a,C+pe)),a.set(new s(i.buffer,i.byteOffset+ve,pe),C),L=ve+pe<<3,C+=pe}return a.length==C?a:a.slice(0,C)},r.F._check=function(i,a){var s=i.length;if(a<=s)return i;var o=new Uint8Array(Math.max(s<<1,a));return o.set(i,0),o},r.F._decodeTiny=function(i,a,s,o,c,f){for(var d=r.F._bitsE,p=r.F._get17,v=0;v<s;){var y=i[p(o,c)&a];c+=15&y;var x=y>>>4;if(x<=15)f[v]=x,v++;else{var E=0,S=0;x==16?(S=3+d(o,c,2),c+=2,E=f[v-1]):x==17?(S=3+d(o,c,3),c+=3):x==18&&(S=11+d(o,c,7),c+=7);for(var w=v+S;v<w;)f[v]=E,v++}}return c},r.F._copyOut=function(i,a,s,o){for(var c=0,f=0,d=o.length>>>1;f<s;){var p=i[f+a];o[f<<1]=0,o[1+(f<<1)]=p,p>c&&(c=p),f++}for(;f<d;)o[f<<1]=0,o[1+(f<<1)]=0,f++;return c},r.F.makeCodes=function(i,a){for(var s,o,c,f,d=r.F.U,p=i.length,v=d.bl_count,y=0;y<=a;y++)v[y]=0;for(y=1;y<p;y+=2)v[i[y]]++;var x=d.next_code;for(s=0,v[0]=0,o=1;o<=a;o++)s=s+v[o-1]<<1,x[o]=s;for(c=0;c<p;c+=2)(f=i[c+1])!=0&&(i[c]=x[f],x[f]++)},r.F.codes2map=function(i,a,s){for(var o=i.length,c=r.F.U.rev15,f=0;f<o;f+=2)if(i[f+1]!=0)for(var d=f>>1,p=i[f+1],v=d<<4|p,y=a-p,x=i[f]<<y,E=x+(1<<y);x!=E;)s[c[x]>>>15-a]=v,x++},r.F.revCodes=function(i,a){for(var s=r.F.U.rev15,o=15-a,c=0;c<i.length;c+=2){var f=i[c]<<a-i[c+1];i[c]=s[f]>>>o}},r.F._putsE=function(i,a,s){s<<=7&a;var o=a>>>3;i[o]|=s,i[o+1]|=s>>>8},r.F._putsF=function(i,a,s){s<<=7&a;var o=a>>>3;i[o]|=s,i[o+1]|=s>>>8,i[o+2]|=s>>>16},r.F._bitsE=function(i,a,s){return(i[a>>>3]|i[1+(a>>>3)]<<8)>>>(7&a)&(1<<s)-1},r.F._bitsF=function(i,a,s){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)&(1<<s)-1},r.F._get17=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)},r.F._get25=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16|i[3+(a>>>3)]<<24)>>>(7&a)},r.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var i=r.F.U,a=0;a<32768;a++){var s=a;s=(4278255360&(s=(4042322160&(s=(3435973836&(s=(2863311530&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,i.rev15[a]=(s>>>16|s<<16)>>>17}function o(c,f,d){for(;f--!=0;)c.push(0,d)}for(a=0;a<32;a++)i.ldef[a]=i.of0[a]<<3|i.exb[a],i.ddef[a]=i.df0[a]<<4|i.dxb[a];o(i.fltree,144,8),o(i.fltree,112,9),o(i.fltree,24,7),o(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),o(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),o(i.itree,19,0),o(i.ltree,286,0),o(i.dtree,30,0),o(i.ttree,320,0)})()})();var pOe=fOe({__proto__:null,default:zT},[zT]);const Dc=(function(){var n={nextZero(d,p){for(;d[p]!=0;)p++;return p},readUshort:(d,p)=>d[p]<<8|d[p+1],writeUshort(d,p,v){d[p]=v>>8&255,d[p+1]=255&v},readUint:(d,p)=>16777216*d[p]+(d[p+1]<<16|d[p+2]<<8|d[p+3]),writeUint(d,p,v){d[p]=v>>24&255,d[p+1]=v>>16&255,d[p+2]=v>>8&255,d[p+3]=255&v},readASCII(d,p,v){let y="";for(let x=0;x<v;x++)y+=String.fromCharCode(d[p+x]);return y},writeASCII(d,p,v){for(let y=0;y<v.length;y++)d[p+y]=v.charCodeAt(y)},readBytes(d,p,v){const y=[];for(let x=0;x<v;x++)y.push(d[p+x]);return y},pad:d=>d.length<2?`0${d}`:d,readUTF8(d,p,v){let y,x="";for(let E=0;E<v;E++)x+=`%${n.pad(d[p+E].toString(16))}`;try{y=decodeURIComponent(x)}catch{return n.readASCII(d,p,v)}return y}};function e(d,p,v,y){const x=p*v,E=a(y),S=Math.ceil(p*E/8),w=new Uint8Array(4*x),R=new Uint32Array(w.buffer),{ctype:N}=y,{depth:O}=y,z=n.readUshort;if(N==6){const ce=x<<2;if(O==8)for(var k=0;k<ce;k+=4)w[k]=d[k],w[k+1]=d[k+1],w[k+2]=d[k+2],w[k+3]=d[k+3];if(O==16)for(k=0;k<ce;k++)w[k]=d[k<<1]}else if(N==2){const ce=y.tabs.tRNS;if(ce==null){if(O==8)for(k=0;k<x;k++){var U=3*k;R[k]=255<<24|d[U+2]<<16|d[U+1]<<8|d[U]}if(O==16)for(k=0;k<x;k++)U=6*k,R[k]=255<<24|d[U+4]<<16|d[U+2]<<8|d[U]}else{var P=ce[0];const fe=ce[1],Z=ce[2];if(O==8)for(k=0;k<x;k++){var C=k<<2;U=3*k,R[k]=255<<24|d[U+2]<<16|d[U+1]<<8|d[U],d[U]==P&&d[U+1]==fe&&d[U+2]==Z&&(w[C+3]=0)}if(O==16)for(k=0;k<x;k++)C=k<<2,U=6*k,R[k]=255<<24|d[U+4]<<16|d[U+2]<<8|d[U],z(d,U)==P&&z(d,U+2)==fe&&z(d,U+4)==Z&&(w[C+3]=0)}}else if(N==3){const ce=y.tabs.PLTE,fe=y.tabs.tRNS,Z=fe?fe.length:0;if(O==1)for(var L=0;L<v;L++){var j=L*S,B=L*p;for(k=0;k<p;k++){C=B+k<<2;var V=3*(Q=d[j+(k>>3)]>>7-((7&k)<<0)&1);w[C]=ce[V],w[C+1]=ce[V+1],w[C+2]=ce[V+2],w[C+3]=Q<Z?fe[Q]:255}}if(O==2)for(L=0;L<v;L++)for(j=L*S,B=L*p,k=0;k<p;k++)C=B+k<<2,V=3*(Q=d[j+(k>>2)]>>6-((3&k)<<1)&3),w[C]=ce[V],w[C+1]=ce[V+1],w[C+2]=ce[V+2],w[C+3]=Q<Z?fe[Q]:255;if(O==4)for(L=0;L<v;L++)for(j=L*S,B=L*p,k=0;k<p;k++)C=B+k<<2,V=3*(Q=d[j+(k>>1)]>>4-((1&k)<<2)&15),w[C]=ce[V],w[C+1]=ce[V+1],w[C+2]=ce[V+2],w[C+3]=Q<Z?fe[Q]:255;if(O==8)for(k=0;k<x;k++){var Q;C=k<<2,V=3*(Q=d[k]),w[C]=ce[V],w[C+1]=ce[V+1],w[C+2]=ce[V+2],w[C+3]=Q<Z?fe[Q]:255}}else if(N==4){if(O==8)for(k=0;k<x;k++){C=k<<2;var J=d[W=k<<1];w[C]=J,w[C+1]=J,w[C+2]=J,w[C+3]=d[W+1]}if(O==16)for(k=0;k<x;k++){var W;C=k<<2,J=d[W=k<<2],w[C]=J,w[C+1]=J,w[C+2]=J,w[C+3]=d[W+2]}}else if(N==0)for(P=y.tabs.tRNS?y.tabs.tRNS:-1,L=0;L<v;L++){const ce=L*S,fe=L*p;if(O==1)for(var $=0;$<p;$++){var se=(J=255*(d[ce+($>>>3)]>>>7-(7&$)&1))==255*P?0:255;R[fe+$]=se<<24|J<<16|J<<8|J}else if(O==2)for($=0;$<p;$++)se=(J=85*(d[ce+($>>>2)]>>>6-((3&$)<<1)&3))==85*P?0:255,R[fe+$]=se<<24|J<<16|J<<8|J;else if(O==4)for($=0;$<p;$++)se=(J=17*(d[ce+($>>>1)]>>>4-((1&$)<<2)&15))==17*P?0:255,R[fe+$]=se<<24|J<<16|J<<8|J;else if(O==8)for($=0;$<p;$++)se=(J=d[ce+$])==P?0:255,R[fe+$]=se<<24|J<<16|J<<8|J;else if(O==16)for($=0;$<p;$++)J=d[ce+($<<1)],se=z(d,ce+($<<1))==P?0:255,R[fe+$]=se<<24|J<<16|J<<8|J}return w}function t(d,p,v,y){const x=a(d),E=Math.ceil(v*x/8),S=new Uint8Array((E+1+d.interlace)*y);return p=d.tabs.CgBI?i(p,S):r(p,S),d.interlace==0?p=s(p,d,0,v,y):d.interlace==1&&(p=(function(R,N){const O=N.width,z=N.height,k=a(N),U=k>>3,P=Math.ceil(O*k/8),C=new Uint8Array(z*P);let L=0;const j=[0,0,4,0,2,0,1],B=[0,4,0,2,0,1,0],V=[8,8,8,4,4,2,2],Q=[8,8,4,4,2,2,1];let J=0;for(;J<7;){const $=V[J],se=Q[J];let ce=0,fe=0,Z=j[J];for(;Z<z;)Z+=$,fe++;let re=B[J];for(;re<O;)re+=se,ce++;const de=Math.ceil(ce*k/8);s(R,N,L,ce,fe);let ve=0,pe=j[J];for(;pe<z;){let ye=B[J],Ee=L+ve*de<<3;for(;ye<O;){var W;if(k==1&&(W=(W=R[Ee>>3])>>7-(7&Ee)&1,C[pe*P+(ye>>3)]|=W<<7-((7&ye)<<0)),k==2&&(W=(W=R[Ee>>3])>>6-(7&Ee)&3,C[pe*P+(ye>>2)]|=W<<6-((3&ye)<<1)),k==4&&(W=(W=R[Ee>>3])>>4-(7&Ee)&15,C[pe*P+(ye>>1)]|=W<<4-((1&ye)<<2)),k>=8){const Xe=pe*P+ye*U;for(let me=0;me<U;me++)C[Xe+me]=R[(Ee>>3)+me]}Ee+=k,ye+=se}ve++,pe+=$}ce*fe!=0&&(L+=fe*(1+de)),J+=1}return C})(p,d)),p}function r(d,p){return i(new Uint8Array(d.buffer,2,d.length-6),p)}var i=(function(){const d={H:{}};return d.H.N=function(p,v){const y=Uint8Array;let x,E,S=0,w=0,R=0,N=0,O=0,z=0,k=0,U=0,P=0;if(p[0]==3&&p[1]==0)return v||new y(0);const C=d.H,L=C.b,j=C.e,B=C.R,V=C.n,Q=C.A,J=C.Z,W=C.m,$=v==null;for($&&(v=new y(p.length>>>2<<5));S==0;)if(S=L(p,P,1),w=L(p,P+1,2),P+=3,w!=0){if($&&(v=d.H.W(v,U+(1<<17))),w==1&&(x=W.J,E=W.h,z=511,k=31),w==2){R=j(p,P,5)+257,N=j(p,P+5,5)+1,O=j(p,P+10,4)+4,P+=14;let ce=1;for(var se=0;se<38;se+=2)W.Q[se]=0,W.Q[se+1]=0;for(se=0;se<O;se++){const re=j(p,P+3*se,3);W.Q[1+(W.X[se]<<1)]=re,re>ce&&(ce=re)}P+=3*O,V(W.Q,ce),Q(W.Q,ce,W.u),x=W.w,E=W.d,P=B(W.u,(1<<ce)-1,R+N,p,P,W.v);const fe=C.V(W.v,0,R,W.C);z=(1<<fe)-1;const Z=C.V(W.v,R,N,W.D);k=(1<<Z)-1,V(W.C,fe),Q(W.C,fe,x),V(W.D,Z),Q(W.D,Z,E)}for(;;){const ce=x[J(p,P)&z];P+=15&ce;const fe=ce>>>4;if(!(fe>>>8))v[U++]=fe;else{if(fe==256)break;{let Z=U+fe-254;if(fe>264){const ye=W.q[fe-257];Z=U+(ye>>>3)+j(p,P,7&ye),P+=7&ye}const re=E[J(p,P)&k];P+=15&re;const de=re>>>4,ve=W.c[de],pe=(ve>>>4)+L(p,P,15&ve);for(P+=15&ve;U<Z;)v[U]=v[U++-pe],v[U]=v[U++-pe],v[U]=v[U++-pe],v[U]=v[U++-pe];U=Z}}}}else{(7&P)!=0&&(P+=8-(7&P));const ce=4+(P>>>3),fe=p[ce-4]|p[ce-3]<<8;$&&(v=d.H.W(v,U+fe)),v.set(new y(p.buffer,p.byteOffset+ce,fe),U),P=ce+fe<<3,U+=fe}return v.length==U?v:v.slice(0,U)},d.H.W=function(p,v){const y=p.length;if(v<=y)return p;const x=new Uint8Array(y<<1);return x.set(p,0),x},d.H.R=function(p,v,y,x,E,S){const w=d.H.e,R=d.H.Z;let N=0;for(;N<y;){const O=p[R(x,E)&v];E+=15&O;const z=O>>>4;if(z<=15)S[N]=z,N++;else{let k=0,U=0;z==16?(U=3+w(x,E,2),E+=2,k=S[N-1]):z==17?(U=3+w(x,E,3),E+=3):z==18&&(U=11+w(x,E,7),E+=7);const P=N+U;for(;N<P;)S[N]=k,N++}}return E},d.H.V=function(p,v,y,x){let E=0,S=0;const w=x.length>>>1;for(;S<y;){const R=p[S+v];x[S<<1]=0,x[1+(S<<1)]=R,R>E&&(E=R),S++}for(;S<w;)x[S<<1]=0,x[1+(S<<1)]=0,S++;return E},d.H.n=function(p,v){const y=d.H.m,x=p.length;let E,S,w,R;const N=y.j;for(var O=0;O<=v;O++)N[O]=0;for(O=1;O<x;O+=2)N[p[O]]++;const z=y.K;for(E=0,N[0]=0,S=1;S<=v;S++)E=E+N[S-1]<<1,z[S]=E;for(w=0;w<x;w+=2)R=p[w+1],R!=0&&(p[w]=z[R],z[R]++)},d.H.A=function(p,v,y){const x=p.length,E=d.H.m.r;for(let S=0;S<x;S+=2)if(p[S+1]!=0){const w=S>>1,R=p[S+1],N=w<<4|R,O=v-R;let z=p[S]<<O;const k=z+(1<<O);for(;z!=k;)y[E[z]>>>15-v]=N,z++}},d.H.l=function(p,v){const y=d.H.m.r,x=15-v;for(let E=0;E<p.length;E+=2){const S=p[E]<<v-p[E+1];p[E]=y[S]>>>x}},d.H.M=function(p,v,y){y<<=7&v;const x=v>>>3;p[x]|=y,p[x+1]|=y>>>8},d.H.I=function(p,v,y){y<<=7&v;const x=v>>>3;p[x]|=y,p[x+1]|=y>>>8,p[x+2]|=y>>>16},d.H.e=function(p,v,y){return(p[v>>>3]|p[1+(v>>>3)]<<8)>>>(7&v)&(1<<y)-1},d.H.b=function(p,v,y){return(p[v>>>3]|p[1+(v>>>3)]<<8|p[2+(v>>>3)]<<16)>>>(7&v)&(1<<y)-1},d.H.Z=function(p,v){return(p[v>>>3]|p[1+(v>>>3)]<<8|p[2+(v>>>3)]<<16)>>>(7&v)},d.H.i=function(p,v){return(p[v>>>3]|p[1+(v>>>3)]<<8|p[2+(v>>>3)]<<16|p[3+(v>>>3)]<<24)>>>(7&v)},d.H.m=(function(){const p=Uint16Array,v=Uint32Array;return{K:new p(16),j:new p(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new p(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new v(32),J:new p(512),_:[],h:new p(32),$:[],w:new p(32768),C:[],v:[],d:new p(32768),D:[],u:new p(512),Q:[],r:new p(32768),s:new v(286),Y:new v(30),a:new v(19),t:new v(15e3),k:new p(65536),g:new p(32768)}})(),(function(){const p=d.H.m;for(var v=0;v<32768;v++){let x=v;x=(2863311530&x)>>>1|(1431655765&x)<<1,x=(3435973836&x)>>>2|(858993459&x)<<2,x=(4042322160&x)>>>4|(252645135&x)<<4,x=(4278255360&x)>>>8|(16711935&x)<<8,p.r[v]=(x>>>16|x<<16)>>>17}function y(x,E,S){for(;E--!=0;)x.push(0,S)}for(v=0;v<32;v++)p.q[v]=p.S[v]<<3|p.T[v],p.c[v]=p.p[v]<<4|p.z[v];y(p._,144,8),y(p._,112,9),y(p._,24,7),y(p._,8,8),d.H.n(p._,9),d.H.A(p._,9,p.J),d.H.l(p._,9),y(p.$,32,5),d.H.n(p.$,5),d.H.A(p.$,5,p.h),d.H.l(p.$,5),y(p.Q,19,0),y(p.C,286,0),y(p.D,30,0),y(p.v,320,0)})(),d.H.N})();function a(d){return[1,null,3,1,2,null,4][d.ctype]*d.depth}function s(d,p,v,y,x){let E=a(p);const S=Math.ceil(y*E/8);let w,R;E=Math.ceil(E/8);let N=d[v],O=0;if(N>1&&(d[v]=[0,0,1][N-2]),N==3)for(O=E;O<S;O++)d[O+1]=d[O+1]+(d[O+1-E]>>>1)&255;for(let z=0;z<x;z++)if(w=v+z*S,R=w+z+1,N=d[R-1],O=0,N==0)for(;O<S;O++)d[w+O]=d[R+O];else if(N==1){for(;O<E;O++)d[w+O]=d[R+O];for(;O<S;O++)d[w+O]=d[R+O]+d[w+O-E]}else if(N==2)for(;O<S;O++)d[w+O]=d[R+O]+d[w+O-S];else if(N==3){for(;O<E;O++)d[w+O]=d[R+O]+(d[w+O-S]>>>1);for(;O<S;O++)d[w+O]=d[R+O]+(d[w+O-S]+d[w+O-E]>>>1)}else{for(;O<E;O++)d[w+O]=d[R+O]+o(0,d[w+O-S],0);for(;O<S;O++)d[w+O]=d[R+O]+o(d[w+O-E],d[w+O-S],d[w+O-E-S])}return d}function o(d,p,v){const y=d+p-v,x=y-d,E=y-p,S=y-v;return x*x<=E*E&&x*x<=S*S?d:E*E<=S*S?p:v}function c(d,p,v){v.width=n.readUint(d,p),p+=4,v.height=n.readUint(d,p),p+=4,v.depth=d[p],p++,v.ctype=d[p],p++,v.compress=d[p],p++,v.filter=d[p],p++,v.interlace=d[p],p++}function f(d,p,v,y,x,E,S,w,R){const N=Math.min(p,x),O=Math.min(v,E);let z=0,k=0;for(let J=0;J<O;J++)for(let W=0;W<N;W++)if(S>=0&&w>=0?(z=J*p+W<<2,k=(w+J)*x+S+W<<2):(z=(-w+J)*p-S+W<<2,k=J*x+W<<2),R==0)y[k]=d[z],y[k+1]=d[z+1],y[k+2]=d[z+2],y[k+3]=d[z+3];else if(R==1){var U=d[z+3]*.00392156862745098,P=d[z]*U,C=d[z+1]*U,L=d[z+2]*U,j=y[k+3]*(1/255),B=y[k]*j,V=y[k+1]*j,Q=y[k+2]*j;const $=1-U,se=U+j*$,ce=se==0?0:1/se;y[k+3]=255*se,y[k+0]=(P+B*$)*ce,y[k+1]=(C+V*$)*ce,y[k+2]=(L+Q*$)*ce}else if(R==2)U=d[z+3],P=d[z],C=d[z+1],L=d[z+2],j=y[k+3],B=y[k],V=y[k+1],Q=y[k+2],U==j&&P==B&&C==V&&L==Q?(y[k]=0,y[k+1]=0,y[k+2]=0,y[k+3]=0):(y[k]=P,y[k+1]=C,y[k+2]=L,y[k+3]=U);else if(R==3){if(U=d[z+3],P=d[z],C=d[z+1],L=d[z+2],j=y[k+3],B=y[k],V=y[k+1],Q=y[k+2],U==j&&P==B&&C==V&&L==Q)continue;if(U<220&&j>20)return!1}return!0}return{decode:function(p){const v=new Uint8Array(p);let y=8;const x=n,E=x.readUshort,S=x.readUint,w={tabs:{},frames:[]},R=new Uint8Array(v.length);let N,O=0,z=0;const k=[137,80,78,71,13,10,26,10];for(var U=0;U<8;U++)if(v[U]!=k[U])throw"The input is not a PNG file!";for(;y<v.length;){const J=x.readUint(v,y);y+=4;const W=x.readASCII(v,y,4);if(y+=4,W=="IHDR")c(v,y,w);else if(W=="iCCP"){for(var P=y;v[P]!=0;)P++;x.readASCII(v,y,P-y),v[P+1];const $=v.slice(P+2,y+J);let se=null;try{se=r($)}catch{se=i($)}w.tabs[W]=se}else if(W=="CgBI")w.tabs[W]=v.slice(y,y+4);else if(W=="IDAT"){for(U=0;U<J;U++)R[O+U]=v[y+U];O+=J}else if(W=="acTL")w.tabs[W]={num_frames:S(v,y),num_plays:S(v,y+4)},N=new Uint8Array(v.length);else if(W=="fcTL"){z!=0&&((Q=w.frames[w.frames.length-1]).data=t(w,N.slice(0,z),Q.rect.width,Q.rect.height),z=0);const $={x:S(v,y+12),y:S(v,y+16),width:S(v,y+4),height:S(v,y+8)};let se=E(v,y+22);se=E(v,y+20)/(se==0?100:se);const ce={rect:$,delay:Math.round(1e3*se),dispose:v[y+24],blend:v[y+25]};w.frames.push(ce)}else if(W=="fdAT"){for(U=0;U<J-4;U++)N[z+U]=v[y+U+4];z+=J-4}else if(W=="pHYs")w.tabs[W]=[x.readUint(v,y),x.readUint(v,y+4),v[y+8]];else if(W=="cHRM")for(w.tabs[W]=[],U=0;U<8;U++)w.tabs[W].push(x.readUint(v,y+4*U));else if(W=="tEXt"||W=="zTXt"){w.tabs[W]==null&&(w.tabs[W]={});var C=x.nextZero(v,y),L=x.readASCII(v,y,C-y),j=y+J-C-1;if(W=="tEXt")V=x.readASCII(v,C+1,j);else{var B=r(v.slice(C+2,C+2+j));V=x.readUTF8(B,0,B.length)}w.tabs[W][L]=V}else if(W=="iTXt"){w.tabs[W]==null&&(w.tabs[W]={}),C=0,P=y,C=x.nextZero(v,P),L=x.readASCII(v,P,C-P);const $=v[P=C+1];var V;v[P+1],P+=2,C=x.nextZero(v,P),x.readASCII(v,P,C-P),P=C+1,C=x.nextZero(v,P),x.readUTF8(v,P,C-P),j=J-((P=C+1)-y),$==0?V=x.readUTF8(v,P,j):(B=r(v.slice(P,P+j)),V=x.readUTF8(B,0,B.length)),w.tabs[W][L]=V}else if(W=="PLTE")w.tabs[W]=x.readBytes(v,y,J);else if(W=="hIST"){const $=w.tabs.PLTE.length/3;for(w.tabs[W]=[],U=0;U<$;U++)w.tabs[W].push(E(v,y+2*U))}else if(W=="tRNS")w.ctype==3?w.tabs[W]=x.readBytes(v,y,J):w.ctype==0?w.tabs[W]=E(v,y):w.ctype==2&&(w.tabs[W]=[E(v,y),E(v,y+2),E(v,y+4)]);else if(W=="gAMA")w.tabs[W]=x.readUint(v,y)/1e5;else if(W=="sRGB")w.tabs[W]=v[y];else if(W=="bKGD")w.ctype==0||w.ctype==4?w.tabs[W]=[E(v,y)]:w.ctype==2||w.ctype==6?w.tabs[W]=[E(v,y),E(v,y+2),E(v,y+4)]:w.ctype==3&&(w.tabs[W]=v[y]);else if(W=="IEND")break;y+=J,x.readUint(v,y),y+=4}var Q;return z!=0&&((Q=w.frames[w.frames.length-1]).data=t(w,N.slice(0,z),Q.rect.width,Q.rect.height)),w.data=t(w,R,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(p){const v=p.width,y=p.height;if(p.tabs.acTL==null)return[e(p.data,v,y,p).buffer];const x=[];p.frames[0].data==null&&(p.frames[0].data=p.data);const E=v*y*4,S=new Uint8Array(E),w=new Uint8Array(E),R=new Uint8Array(E);for(let O=0;O<p.frames.length;O++){const z=p.frames[O],k=z.rect.x,U=z.rect.y,P=z.rect.width,C=z.rect.height,L=e(z.data,P,C,p);if(O!=0)for(var N=0;N<E;N++)R[N]=S[N];if(z.blend==0?f(L,P,C,S,v,y,k,U,0):z.blend==1&&f(L,P,C,S,v,y,k,U,1),x.push(S.buffer.slice(0)),z.dispose!=0){if(z.dispose==1)f(w,P,C,S,v,y,k,U,0);else if(z.dispose==2)for(N=0;N<E;N++)S[N]=R[N]}}return x},_paeth:o,_copyTile:f,_bin:n}})();(function(){const{_copyTile:n}=Dc,{_bin:e}=Dc,t=Dc._paeth;var r={table:(function(){const P=new Uint32Array(256);for(let C=0;C<256;C++){let L=C;for(let j=0;j<8;j++)1&L?L=3988292384^L>>>1:L>>>=1;P[C]=L}return P})(),update(P,C,L,j){for(let B=0;B<j;B++)P=r.table[255&(P^C[L+B])]^P>>>8;return P},crc:(P,C,L)=>4294967295^r.update(4294967295,P,C,L)};function i(P,C,L,j){C[L]+=P[0]*j>>4,C[L+1]+=P[1]*j>>4,C[L+2]+=P[2]*j>>4,C[L+3]+=P[3]*j>>4}function a(P){return Math.max(0,Math.min(255,P))}function s(P,C){const L=P[0]-C[0],j=P[1]-C[1],B=P[2]-C[2],V=P[3]-C[3];return L*L+j*j+B*B+V*V}function o(P,C,L,j,B,V,Q){Q==null&&(Q=1);const J=j.length,W=[];for(var $=0;$<J;$++){const pe=j[$];W.push([pe>>>0&255,pe>>>8&255,pe>>>16&255,pe>>>24&255])}for($=0;$<J;$++){let pe=4294967295;for(var se=0,ce=0;ce<J;ce++){var fe=s(W[$],W[ce]);ce!=$&&fe<pe&&(pe=fe,se=ce)}}const Z=new Uint32Array(B.buffer),re=new Int16Array(C*L*4),de=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for($=0;$<de.length;$++)de[$]=255*((de[$]+.5)/16-.5);for(let pe=0;pe<L;pe++)for(let ye=0;ye<C;ye++){var ve;$=4*(pe*C+ye),Q!=2?ve=[a(P[$]+re[$]),a(P[$+1]+re[$+1]),a(P[$+2]+re[$+2]),a(P[$+3]+re[$+3])]:(fe=de[4*(3&pe)+(3&ye)],ve=[a(P[$]+fe),a(P[$+1]+fe),a(P[$+2]+fe),a(P[$+3]+fe)]),se=0;let Ee=16777215;for(ce=0;ce<J;ce++){const qe=s(ve,W[ce]);qe<Ee&&(Ee=qe,se=ce)}const Xe=W[se],me=[ve[0]-Xe[0],ve[1]-Xe[1],ve[2]-Xe[2],ve[3]-Xe[3]];Q==1&&(ye!=C-1&&i(me,re,$+4,7),pe!=L-1&&(ye!=0&&i(me,re,$+4*C-4,3),i(me,re,$+4*C,5),ye!=C-1&&i(me,re,$+4*C+4,1))),V[$>>2]=se,Z[$>>2]=j[se]}}function c(P,C,L,j,B){B==null&&(B={});const{crc:V}=r,Q=e.writeUint,J=e.writeUshort,W=e.writeASCII;let $=8;const se=P.frames.length>1;let ce,fe=!1,Z=33+(se?20:0);if(B.sRGB!=null&&(Z+=13),B.pHYs!=null&&(Z+=21),B.iCCP!=null&&(ce=pako.deflate(B.iCCP),Z+=21+ce.length+4),P.ctype==3){for(var re=P.plte.length,de=0;de<re;de++)P.plte[de]>>>24!=255&&(fe=!0);Z+=8+3*re+4+(fe?8+1*re+4:0)}for(var ve=0;ve<P.frames.length;ve++)se&&(Z+=38),Z+=(Xe=P.frames[ve]).cimg.length+12,ve!=0&&(Z+=4);Z+=12;const pe=new Uint8Array(Z),ye=[137,80,78,71,13,10,26,10];for(de=0;de<8;de++)pe[de]=ye[de];if(Q(pe,$,13),$+=4,W(pe,$,"IHDR"),$+=4,Q(pe,$,C),$+=4,Q(pe,$,L),$+=4,pe[$]=P.depth,$++,pe[$]=P.ctype,$++,pe[$]=0,$++,pe[$]=0,$++,pe[$]=0,$++,Q(pe,$,V(pe,$-17,17)),$+=4,B.sRGB!=null&&(Q(pe,$,1),$+=4,W(pe,$,"sRGB"),$+=4,pe[$]=B.sRGB,$++,Q(pe,$,V(pe,$-5,5)),$+=4),B.iCCP!=null){const me=13+ce.length;Q(pe,$,me),$+=4,W(pe,$,"iCCP"),$+=4,W(pe,$,"ICC profile"),$+=11,$+=2,pe.set(ce,$),$+=ce.length,Q(pe,$,V(pe,$-(me+4),me+4)),$+=4}if(B.pHYs!=null&&(Q(pe,$,9),$+=4,W(pe,$,"pHYs"),$+=4,Q(pe,$,B.pHYs[0]),$+=4,Q(pe,$,B.pHYs[1]),$+=4,pe[$]=B.pHYs[2],$++,Q(pe,$,V(pe,$-13,13)),$+=4),se&&(Q(pe,$,8),$+=4,W(pe,$,"acTL"),$+=4,Q(pe,$,P.frames.length),$+=4,Q(pe,$,B.loop!=null?B.loop:0),$+=4,Q(pe,$,V(pe,$-12,12)),$+=4),P.ctype==3){for(Q(pe,$,3*(re=P.plte.length)),$+=4,W(pe,$,"PLTE"),$+=4,de=0;de<re;de++){const me=3*de,qe=P.plte[de],mt=255&qe,Ue=qe>>>8&255,De=qe>>>16&255;pe[$+me+0]=mt,pe[$+me+1]=Ue,pe[$+me+2]=De}if($+=3*re,Q(pe,$,V(pe,$-3*re-4,3*re+4)),$+=4,fe){for(Q(pe,$,re),$+=4,W(pe,$,"tRNS"),$+=4,de=0;de<re;de++)pe[$+de]=P.plte[de]>>>24&255;$+=re,Q(pe,$,V(pe,$-re-4,re+4)),$+=4}}let Ee=0;for(ve=0;ve<P.frames.length;ve++){var Xe=P.frames[ve];se&&(Q(pe,$,26),$+=4,W(pe,$,"fcTL"),$+=4,Q(pe,$,Ee++),$+=4,Q(pe,$,Xe.rect.width),$+=4,Q(pe,$,Xe.rect.height),$+=4,Q(pe,$,Xe.rect.x),$+=4,Q(pe,$,Xe.rect.y),$+=4,J(pe,$,j[ve]),$+=2,J(pe,$,1e3),$+=2,pe[$]=Xe.dispose,$++,pe[$]=Xe.blend,$++,Q(pe,$,V(pe,$-30,30)),$+=4);const me=Xe.cimg;Q(pe,$,(re=me.length)+(ve==0?0:4)),$+=4;const qe=$;W(pe,$,ve==0?"IDAT":"fdAT"),$+=4,ve!=0&&(Q(pe,$,Ee++),$+=4),pe.set(me,$),$+=re,Q(pe,$,V(pe,qe,$-qe)),$+=4}return Q(pe,$,0),$+=4,W(pe,$,"IEND"),$+=4,Q(pe,$,V(pe,$-4,4)),$+=4,pe.buffer}function f(P,C,L){for(let j=0;j<P.frames.length;j++){const B=P.frames[j];B.rect.width;const V=B.rect.height,Q=new Uint8Array(V*B.bpl+V);B.cimg=y(B.img,V,B.bpp,B.bpl,Q,C,L)}}function d(P,C,L,j,B){const V=B[0],Q=B[1],J=B[2],W=B[3],$=B[4],se=B[5];let ce=6,fe=8,Z=255;for(var re=0;re<P.length;re++){const Fe=new Uint8Array(P[re]);for(var de=Fe.length,ve=0;ve<de;ve+=4)Z&=Fe[ve+3]}const pe=Z!=255,ye=(function(Ze,oe,yt,at,Tt,ct){const ae=[];for(var Y=0;Y<Ze.length;Y++){const rt=new Uint8Array(Ze[Y]),Pt=new Uint32Array(rt.buffer);var xe;let Ot=0,it=0,tt=oe,Mt=yt,he=at?1:0;if(Y!=0){const Le=ct||at||Y==1||ae[Y-2].dispose!=0?1:2;let bt=0,ge=1e9;for(let dt=0;dt<Le;dt++){var ke=new Uint8Array(Ze[Y-1-dt]);const pt=new Uint32Array(Ze[Y-1-dt]);let ht=oe,st=yt,Qe=-1,gt=-1;for(let nn=0;nn<yt;nn++)for(let Kt=0;Kt<oe;Kt++)Pt[Ne=nn*oe+Kt]!=pt[Ne]&&(Kt<ht&&(ht=Kt),Kt>Qe&&(Qe=Kt),nn<st&&(st=nn),nn>gt&&(gt=nn));Qe==-1&&(ht=st=Qe=gt=0),Tt&&((1&ht)==1&&ht--,(1&st)==1&&st--);const Wt=(Qe-ht+1)*(gt-st+1);Wt<ge&&(ge=Wt,bt=dt,Ot=ht,it=st,tt=Qe-ht+1,Mt=gt-st+1)}ke=new Uint8Array(Ze[Y-1-bt]),bt==1&&(ae[Y-1].dispose=2),xe=new Uint8Array(tt*Mt*4),n(ke,oe,yt,xe,tt,Mt,-Ot,-it,0),he=n(rt,oe,yt,xe,tt,Mt,-Ot,-it,3)?1:0,he==1?v(rt,oe,yt,xe,{x:Ot,y:it,width:tt,height:Mt}):n(rt,oe,yt,xe,tt,Mt,-Ot,-it,0)}else xe=rt.slice(0);ae.push({rect:{x:Ot,y:it,width:tt,height:Mt},img:xe,blend:he,dispose:0})}if(at)for(Y=0;Y<ae.length;Y++){if((It=ae[Y]).blend==1)continue;const rt=It.rect,Pt=ae[Y-1].rect,Ot=Math.min(rt.x,Pt.x),it=Math.min(rt.y,Pt.y),tt={x:Ot,y:it,width:Math.max(rt.x+rt.width,Pt.x+Pt.width)-Ot,height:Math.max(rt.y+rt.height,Pt.y+Pt.height)-it};ae[Y-1].dispose=1,Y-1!=0&&p(Ze,oe,yt,ae,Y-1,tt,Tt),p(Ze,oe,yt,ae,Y,tt,Tt)}let et=0;if(Ze.length!=1)for(var Ne=0;Ne<ae.length;Ne++){var It;et+=(It=ae[Ne]).rect.width*It.rect.height}return ae})(P,C,L,V,Q,J),Ee={},Xe=[],me=[];if(j!=0){const Fe=[];for(ve=0;ve<ye.length;ve++)Fe.push(ye[ve].img.buffer);const Ze=(function(Tt){let ct=0;for(var ae=0;ae<Tt.length;ae++)ct+=Tt[ae].byteLength;const Y=new Uint8Array(ct);let xe=0;for(ae=0;ae<Tt.length;ae++){const ke=new Uint8Array(Tt[ae]),et=ke.length;for(let Ne=0;Ne<et;Ne+=4){let It=ke[Ne],rt=ke[Ne+1],Pt=ke[Ne+2];const Ot=ke[Ne+3];Ot==0&&(It=rt=Pt=0),Y[xe+Ne]=It,Y[xe+Ne+1]=rt,Y[xe+Ne+2]=Pt,Y[xe+Ne+3]=Ot}xe+=et}return Y.buffer})(Fe),oe=E(Ze,j);for(ve=0;ve<oe.plte.length;ve++)Xe.push(oe.plte[ve].est.rgba);let yt=0;for(ve=0;ve<ye.length;ve++){const at=(mt=ye[ve]).img.length;var qe=new Uint8Array(oe.inds.buffer,yt>>2,at>>2);me.push(qe);const Tt=new Uint8Array(oe.abuf,yt,at);se&&o(mt.img,mt.rect.width,mt.rect.height,Xe,Tt,qe),mt.img.set(Tt),yt+=at}}else for(re=0;re<ye.length;re++){var mt=ye[re];const Fe=new Uint32Array(mt.img.buffer);var Ue=mt.rect.width;for(de=Fe.length,qe=new Uint8Array(de),me.push(qe),ve=0;ve<de;ve++){const Ze=Fe[ve];if(ve!=0&&Ze==Fe[ve-1])qe[ve]=qe[ve-1];else if(ve>Ue&&Ze==Fe[ve-Ue])qe[ve]=qe[ve-Ue];else{let oe=Ee[Ze];if(oe==null&&(Ee[Ze]=oe=Xe.length,Xe.push(Ze),Xe.length>=300))break;qe[ve]=oe}}}const De=Xe.length;for(De<=256&&$==0&&(fe=De<=2?1:De<=4?2:De<=16?4:8,fe=Math.max(fe,W)),re=0;re<ye.length;re++){(mt=ye[re]).rect.x,mt.rect.y,Ue=mt.rect.width;const Fe=mt.rect.height;let Ze=mt.img;new Uint32Array(Ze.buffer);let oe=4*Ue,yt=4;if(De<=256&&$==0){oe=Math.ceil(fe*Ue/8);var Re=new Uint8Array(oe*Fe);const at=me[re];for(let Tt=0;Tt<Fe;Tt++){ve=Tt*oe;const ct=Tt*Ue;if(fe==8)for(var Me=0;Me<Ue;Me++)Re[ve+Me]=at[ct+Me];else if(fe==4)for(Me=0;Me<Ue;Me++)Re[ve+(Me>>1)]|=at[ct+Me]<<4-4*(1&Me);else if(fe==2)for(Me=0;Me<Ue;Me++)Re[ve+(Me>>2)]|=at[ct+Me]<<6-2*(3&Me);else if(fe==1)for(Me=0;Me<Ue;Me++)Re[ve+(Me>>3)]|=at[ct+Me]<<7-1*(7&Me)}Ze=Re,ce=3,yt=1}else if(pe==0&&ye.length==1){Re=new Uint8Array(Ue*Fe*3);const at=Ue*Fe;for(ve=0;ve<at;ve++){const Tt=3*ve,ct=4*ve;Re[Tt]=Ze[ct],Re[Tt+1]=Ze[ct+1],Re[Tt+2]=Ze[ct+2]}Ze=Re,ce=2,yt=3,oe=3*Ue}mt.img=Ze,mt.bpl=oe,mt.bpp=yt}return{ctype:ce,depth:fe,plte:Xe,frames:ye}}function p(P,C,L,j,B,V,Q){const J=Uint8Array,W=Uint32Array,$=new J(P[B-1]),se=new W(P[B-1]),ce=B+1<P.length?new J(P[B+1]):null,fe=new J(P[B]),Z=new W(fe.buffer);let re=C,de=L,ve=-1,pe=-1;for(let Ee=0;Ee<V.height;Ee++)for(let Xe=0;Xe<V.width;Xe++){const me=V.x+Xe,qe=V.y+Ee,mt=qe*C+me,Ue=Z[mt];Ue==0||j[B-1].dispose==0&&se[mt]==Ue&&(ce==null||ce[4*mt+3]!=0)||(me<re&&(re=me),me>ve&&(ve=me),qe<de&&(de=qe),qe>pe&&(pe=qe))}ve==-1&&(re=de=ve=pe=0),Q&&((1&re)==1&&re--,(1&de)==1&&de--),V={x:re,y:de,width:ve-re+1,height:pe-de+1};const ye=j[B];ye.rect=V,ye.blend=1,ye.img=new Uint8Array(V.width*V.height*4),j[B-1].dispose==0?(n($,C,L,ye.img,V.width,V.height,-V.x,-V.y,0),v(fe,C,L,ye.img,V)):n(fe,C,L,ye.img,V.width,V.height,-V.x,-V.y,0)}function v(P,C,L,j,B){n(P,C,L,j,B.width,B.height,-B.x,-B.y,2)}function y(P,C,L,j,B,V,Q){const J=[];let W,$=[0,1,2,3,4];V!=-1?$=[V]:(C*j>5e5||L==1)&&($=[0]),Q&&(W={level:0});const se=pOe;for(var ce=0;ce<$.length;ce++){for(let re=0;re<C;re++)x(B,P,re,j,L,$[ce]);J.push(se.deflate(B,W))}let fe,Z=1e9;for(ce=0;ce<J.length;ce++)J[ce].length<Z&&(fe=ce,Z=J[ce].length);return J[fe]}function x(P,C,L,j,B,V){const Q=L*j;let J=Q+L;if(P[J]=V,J++,V==0)if(j<500)for(var W=0;W<j;W++)P[J+W]=C[Q+W];else P.set(new Uint8Array(C.buffer,Q,j),J);else if(V==1){for(W=0;W<B;W++)P[J+W]=C[Q+W];for(W=B;W<j;W++)P[J+W]=C[Q+W]-C[Q+W-B]+256&255}else if(L==0){for(W=0;W<B;W++)P[J+W]=C[Q+W];if(V==2)for(W=B;W<j;W++)P[J+W]=C[Q+W];if(V==3)for(W=B;W<j;W++)P[J+W]=C[Q+W]-(C[Q+W-B]>>1)+256&255;if(V==4)for(W=B;W<j;W++)P[J+W]=C[Q+W]-t(C[Q+W-B],0,0)+256&255}else{if(V==2)for(W=0;W<j;W++)P[J+W]=C[Q+W]+256-C[Q+W-j]&255;if(V==3){for(W=0;W<B;W++)P[J+W]=C[Q+W]+256-(C[Q+W-j]>>1)&255;for(W=B;W<j;W++)P[J+W]=C[Q+W]+256-(C[Q+W-j]+C[Q+W-B]>>1)&255}if(V==4){for(W=0;W<B;W++)P[J+W]=C[Q+W]+256-t(0,C[Q+W-j],0)&255;for(W=B;W<j;W++)P[J+W]=C[Q+W]+256-t(C[Q+W-B],C[Q+W-j],C[Q+W-B-j])&255}}}function E(P,C){const L=new Uint8Array(P),j=L.slice(0),B=new Uint32Array(j.buffer),V=S(j,C),Q=V[0],J=V[1],W=L.length,$=new Uint8Array(W>>2);let se;if(L.length<2e7)for(var ce=0;ce<W;ce+=4)se=w(Q,fe=L[ce]*(1/255),Z=L[ce+1]*(1/255),re=L[ce+2]*(1/255),de=L[ce+3]*(1/255)),$[ce>>2]=se.ind,B[ce>>2]=se.est.rgba;else for(ce=0;ce<W;ce+=4){var fe=L[ce]*.00392156862745098,Z=L[ce+1]*(1/255),re=L[ce+2]*(1/255),de=L[ce+3]*(1/255);for(se=Q;se.left;)se=R(se.est,fe,Z,re,de)<=0?se.left:se.right;$[ce>>2]=se.ind,B[ce>>2]=se.est.rgba}return{abuf:j.buffer,inds:$,plte:J}}function S(P,C,L){L==null&&(L=1e-4);const j=new Uint32Array(P.buffer),B={i0:0,i1:P.length,bst:null,est:null,tdst:0,left:null,right:null};B.bst=z(P,B.i0,B.i1),B.est=k(B.bst);const V=[B];for(;V.length<C;){let J=0,W=0;for(var Q=0;Q<V.length;Q++)V[Q].est.L>J&&(J=V[Q].est.L,W=Q);if(J<L)break;const $=V[W],se=N(P,j,$.i0,$.i1,$.est.e,$.est.eMq255);if($.i0>=se||$.i1<=se){$.est.L=0;continue}const ce={i0:$.i0,i1:se,bst:null,est:null,tdst:0,left:null,right:null};ce.bst=z(P,ce.i0,ce.i1),ce.est=k(ce.bst);const fe={i0:se,i1:$.i1,bst:null,est:null,tdst:0,left:null,right:null};for(fe.bst={R:[],m:[],N:$.bst.N-ce.bst.N},Q=0;Q<16;Q++)fe.bst.R[Q]=$.bst.R[Q]-ce.bst.R[Q];for(Q=0;Q<4;Q++)fe.bst.m[Q]=$.bst.m[Q]-ce.bst.m[Q];fe.est=k(fe.bst),$.left=ce,$.right=fe,V[W]=ce,V.push(fe)}for(V.sort(((J,W)=>W.bst.N-J.bst.N)),Q=0;Q<V.length;Q++)V[Q].ind=Q;return[B,V]}function w(P,C,L,j,B){if(P.left==null)return P.tdst=(function(ce,fe,Z,re,de){const ve=fe-ce[0],pe=Z-ce[1],ye=re-ce[2],Ee=de-ce[3];return ve*ve+pe*pe+ye*ye+Ee*Ee})(P.est.q,C,L,j,B),P;const V=R(P.est,C,L,j,B);let Q=P.left,J=P.right;V>0&&(Q=P.right,J=P.left);const W=w(Q,C,L,j,B);if(W.tdst<=V*V)return W;const $=w(J,C,L,j,B);return $.tdst<W.tdst?$:W}function R(P,C,L,j,B){const{e:V}=P;return V[0]*C+V[1]*L+V[2]*j+V[3]*B-P.eMq}function N(P,C,L,j,B,V){for(j-=4;L<j;){for(;O(P,L,B)<=V;)L+=4;for(;O(P,j,B)>V;)j-=4;if(L>=j)break;const Q=C[L>>2];C[L>>2]=C[j>>2],C[j>>2]=Q,L+=4,j-=4}for(;O(P,L,B)>V;)L-=4;return L+4}function O(P,C,L){return P[C]*L[0]+P[C+1]*L[1]+P[C+2]*L[2]+P[C+3]*L[3]}function z(P,C,L){const j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],B=[0,0,0,0],V=L-C>>2;for(let Q=C;Q<L;Q+=4){const J=P[Q]*.00392156862745098,W=P[Q+1]*(1/255),$=P[Q+2]*(1/255),se=P[Q+3]*(1/255);B[0]+=J,B[1]+=W,B[2]+=$,B[3]+=se,j[0]+=J*J,j[1]+=J*W,j[2]+=J*$,j[3]+=J*se,j[5]+=W*W,j[6]+=W*$,j[7]+=W*se,j[10]+=$*$,j[11]+=$*se,j[15]+=se*se}return j[4]=j[1],j[8]=j[2],j[9]=j[6],j[12]=j[3],j[13]=j[7],j[14]=j[11],{R:j,m:B,N:V}}function k(P){const{R:C}=P,{m:L}=P,{N:j}=P,B=L[0],V=L[1],Q=L[2],J=L[3],W=j==0?0:1/j,$=[C[0]-B*B*W,C[1]-B*V*W,C[2]-B*Q*W,C[3]-B*J*W,C[4]-V*B*W,C[5]-V*V*W,C[6]-V*Q*W,C[7]-V*J*W,C[8]-Q*B*W,C[9]-Q*V*W,C[10]-Q*Q*W,C[11]-Q*J*W,C[12]-J*B*W,C[13]-J*V*W,C[14]-J*Q*W,C[15]-J*J*W],se=$,ce=U;let fe=[Math.random(),Math.random(),Math.random(),Math.random()],Z=0,re=0;if(j!=0)for(let ve=0;ve<16&&(fe=ce.multVec(se,fe),re=Math.sqrt(ce.dot(fe,fe)),fe=ce.sml(1/re,fe),!(ve!=0&&Math.abs(re-Z)<1e-9));ve++)Z=re;const de=[B*W,V*W,Q*W,J*W];return{Cov:$,q:de,e:fe,L:Z,eMq255:ce.dot(ce.sml(255,de),fe),eMq:ce.dot(fe,de),rgba:(Math.round(255*de[3])<<24|Math.round(255*de[2])<<16|Math.round(255*de[1])<<8|Math.round(255*de[0])<<0)>>>0}}var U={multVec:(P,C)=>[P[0]*C[0]+P[1]*C[1]+P[2]*C[2]+P[3]*C[3],P[4]*C[0]+P[5]*C[1]+P[6]*C[2]+P[7]*C[3],P[8]*C[0]+P[9]*C[1]+P[10]*C[2]+P[11]*C[3],P[12]*C[0]+P[13]*C[1]+P[14]*C[2]+P[15]*C[3]],dot:(P,C)=>P[0]*C[0]+P[1]*C[1]+P[2]*C[2]+P[3]*C[3],sml:(P,C)=>[P*C[0],P*C[1],P*C[2],P*C[3]]};Dc.encode=function(C,L,j,B,V,Q,J){B==null&&(B=0),J==null&&(J=!1);const W=d(C,L,j,B,[!1,!1,!1,0,J,!1]);return f(W,-1),c(W,L,j,V,Q)},Dc.encodeLL=function(C,L,j,B,V,Q,J,W){const $={ctype:0+(B==1?0:2)+(V==0?0:4),depth:Q,frames:[]},se=(B+V)*Q,ce=se*L;for(let fe=0;fe<C.length;fe++)$.frames.push({rect:{x:0,y:0,width:L,height:j},img:new Uint8Array(C[fe]),blend:0,dispose:1,bpp:Math.ceil(se/8),bpl:Math.ceil(ce/8)});return f($,0,!0),c($,L,j,J,W)},Dc.encode.compress=d,Dc.encode.dither=o,Dc.quantize=E,Dc.quantize.getKDtree=S,Dc.quantize.getNearest=w})();const MY={toArrayBuffer(n,e){const t=n.width,r=n.height,i=t<<2,a=n.getContext("2d").getImageData(0,0,t,r),s=new Uint32Array(a.data.buffer),o=(32*t+31)/32<<2,c=o*r,f=122+c,d=new ArrayBuffer(f),p=new DataView(d),v=1<<20;let y,x,E,S,w=v,R=0,N=0,O=0;function z(P){p.setUint16(N,P,!0),N+=2}function k(P){p.setUint32(N,P,!0),N+=4}function U(P){N+=P}z(19778),k(f),U(4),k(122),k(108),k(t),k(-r>>>0),z(1),z(32),k(3),k(c),k(2835),k(2835),U(8),k(16711680),k(65280),k(255),k(4278190080),k(1466527264),(function P(){for(;R<r&&w>0;){for(S=122+R*o,y=0;y<i;)w--,x=s[O++],E=x>>>24,p.setUint32(S+y,x<<8|E),y+=4;R++}O<s.length?(w=v,setTimeout(P,MY._dly)):e(d)})()},toBlob(n,e){this.toArrayBuffer(n,(t=>{e(new Blob([t],{type:"image/bmp"}))}))},_dly:9};var Fo={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},mOe={[Fo.CHROME]:16384,[Fo.FIREFOX]:11180,[Fo.DESKTOP_SAFARI]:16384,[Fo.IE]:8192,[Fo.IOS]:4096,[Fo.ETC]:8192};const Xk=typeof window<"u",CY=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,jT=Xk&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),gOe=(Xk||CY)&&(jT&&jT.getOriginalSymbol(window,"File")||typeof File<"u"&&File),IY=(Xk||CY)&&(jT&&jT.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Yk(n,e,t=Date.now()){return new Promise((r=>{const i=n.split(","),a=i[0].match(/:(.*?);/)[1],s=globalThis.atob(i[1]);let o=s.length;const c=new Uint8Array(o);for(;o--;)c[o]=s.charCodeAt(o);const f=new Blob([c],{type:a});f.name=e,f.lastModified=t,r(f)}))}function RY(n){return new Promise(((e,t)=>{const r=new IY;r.onload=()=>e(r.result),r.onerror=i=>t(i),r.readAsDataURL(n)}))}function PY(n){return new Promise(((e,t)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>t(i),r.src=n}))}function Xm(){if(Xm.cachedResult!==void 0)return Xm.cachedResult;let n=Fo.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?n=Fo.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?n=Fo.IOS:/Safari/i.test(e)?n=Fo.DESKTOP_SAFARI:/Firefox/i.test(e)?n=Fo.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(n=Fo.IE),Xm.cachedResult=n,Xm.cachedResult}function NY(n,e){const t=Xm(),r=mOe[t];let i=n,a=e,s=i*a;const o=i>a?a/i:i/a;for(;s>r*r;){const c=(r+i)/2,f=(r+a)/2;c<f?(a=f,i=f*o):(a=c*o,i=c),s=i*a}return{width:i,height:a}}function zC(n,e){let t,r;try{if(t=new OffscreenCanvas(n,e),r=t.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),r=t.getContext("2d")}return t.width=n,t.height=e,[t,r]}function OY(n,e){const{width:t,height:r}=NY(n.width,n.height),[i,a]=zC(t,r);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,i.width,i.height)),a.drawImage(n,0,0,i.width,i.height),i}function CE(){return CE.cachedResult!==void 0||(CE.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),CE.cachedResult}function BT(n,e={}){return new Promise((function(t,r){let i,a;var s=function(){try{return a=OY(i,e.fileType||n.type),t([i,a])}catch(c){return r(c)}},o=function(c){try{var f=function(d){try{throw d}catch(p){return r(p)}};try{let d;return RY(n).then((function(p){try{return d=p,PY(d).then((function(v){try{return i=v,(function(){try{return s()}catch(y){return r(y)}})()}catch(y){return f(y)}}),f)}catch(v){return f(v)}}),f)}catch(d){f(d)}}catch(d){return r(d)}};try{if(CE()||[Fo.DESKTOP_SAFARI,Fo.MOBILE_SAFARI].includes(Xm()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(n).then((function(c){try{return i=c,s()}catch{return o()}}),o)}catch{o()}}))}function VT(n,e,t,r,i=1){return new Promise((function(a,s){let o;if(e==="image/png"){let p,v,y;return p=n.getContext("2d"),{data:v}=p.getImageData(0,0,n.width,n.height),y=Dc.encode([v.buffer],n.width,n.height,4096*i),o=new Blob([y],{type:e}),o.name=t,o.lastModified=r,c.call(this)}{let p=function(){return c.call(this)};var f=p;if(e==="image/bmp")return new Promise((v=>MY.toBlob(n,v))).then((function(v){try{return o=v,o.name=t,o.lastModified=r,p.call(this)}catch(y){return s(y)}}).bind(this),s);{let v=function(){return p.call(this)};var d=v;if(typeof OffscreenCanvas=="function"&&n instanceof OffscreenCanvas)return n.convertToBlob({type:e,quality:i}).then((function(y){try{return o=y,o.name=t,o.lastModified=r,v.call(this)}catch(x){return s(x)}}).bind(this),s);{let y;return y=n.toDataURL(e,i),Yk(y,t,r).then((function(x){try{return o=x,v.call(this)}catch(E){return s(E)}}).bind(this),s)}}}function c(){return a(o)}}))}function ju(n){n.width=0,n.height=0}function Sv(){return new Promise((function(n,e){let t,r,i,a;return Sv.cachedResult!==void 0?n(Sv.cachedResult):Yk("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(s){try{return t=s,BT(t).then((function(o){try{return r=o[1],VT(r,t.type,t.name,t.lastModified).then((function(c){try{return i=c,ju(r),BT(i).then((function(f){try{return a=f[0],Sv.cachedResult=a.width===1&&a.height===2,n(Sv.cachedResult)}catch(d){return e(d)}}),e)}catch(f){return e(f)}}),e)}catch(c){return e(c)}}),e)}catch(o){return e(o)}}),e)}))}function DY(n){return new Promise(((e,t)=>{const r=new IY;r.onload=i=>{const a=new DataView(i.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const s=a.byteLength;let o=2;for(;o<s;){if(a.getUint16(o+2,!1)<=8)return e(-1);const c=a.getUint16(o,!1);if(o+=2,c==65505){if(a.getUint32(o+=2,!1)!=1165519206)return e(-1);const f=a.getUint16(o+=6,!1)==18761;o+=a.getUint32(o+4,f);const d=a.getUint16(o,f);o+=2;for(let p=0;p<d;p++)if(a.getUint16(o+12*p,f)==274)return e(a.getUint16(o+12*p+8,f))}else{if((65280&c)!=65280)break;o+=a.getUint16(o,!1)}}return e(-1)},r.onerror=i=>t(i),r.readAsArrayBuffer(n)}))}function LY(n,e){const{width:t}=n,{height:r}=n,{maxWidthOrHeight:i}=e;let a,s=n;return isFinite(i)&&(t>i||r>i)&&([s,a]=zC(t,r),t>r?(s.width=i,s.height=r/t*i):(s.width=t/r*i,s.height=i),a.drawImage(n,0,0,s.width,s.height),ju(n)),s}function kY(n,e){const{width:t}=n,{height:r}=n,[i,a]=zC(t,r);switch(e>4&&e<9?(i.width=r,i.height=t):(i.width=t,i.height=r),e){case 2:a.transform(-1,0,0,1,t,0);break;case 3:a.transform(-1,0,0,-1,t,r);break;case 4:a.transform(1,0,0,-1,0,r);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,r,0);break;case 7:a.transform(0,-1,-1,0,r,t);break;case 8:a.transform(0,-1,1,0,0,t)}return a.drawImage(n,0,0,t,r),ju(n),i}function fV(n,e,t=0){return new Promise((function(r,i){let a,s,o,c,f,d,p,v,y,x,E,S,w,R,N,O,z,k,U,P;function C(j=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=j,e.onProgress(Math.min(a,100))}function L(j){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(j,a),100),e.onProgress(a)}return a=t,s=e.maxIteration||10,o=1024*e.maxSizeMB*1024,C(),BT(n,e).then((function(j){try{return[,c]=j,C(),f=LY(c,e),C(),new Promise((function(B,V){var Q;if(!(Q=e.exifOrientation))return DY(n).then((function(W){try{return Q=W,J.call(this)}catch($){return V($)}}).bind(this),V);function J(){return B(Q)}return J.call(this)})).then((function(B){try{return d=B,C(),Sv().then((function(V){try{return p=V?f:kY(f,d),C(),v=e.initialQuality||1,y=e.fileType||n.type,VT(p,y,n.name,n.lastModified,v).then((function(Q){try{{let se=function(){if(s--&&(N>o||N>w)){let fe,Z;return fe=P?.95*U.width:U.width,Z=P?.95*U.height:U.height,[z,k]=zC(fe,Z),k.drawImage(U,0,0,fe,Z),v*=y==="image/png"?.85:.95,VT(z,y,n.name,n.lastModified,v).then((function(re){try{return O=re,ju(U),U=z,N=O.size,L(Math.min(99,Math.floor((R-N)/(R-o)*100))),se}catch(de){return i(de)}}),i)}return[1]},ce=function(){return ju(U),ju(z),ju(f),ju(p),ju(c),L(100),r(O)};var W=se,$=ce;if(x=Q,C(),E=x.size>o,S=x.size>n.size,!E&&!S)return L(100),r(x);var J;return w=n.size,R=x.size,N=R,U=p,P=!e.alwaysKeepResolution&&E,(J=(function(fe){for(;fe;){if(fe.then)return void fe.then(J,i);try{if(fe.pop){if(fe.length)return fe.pop()?ce.call(this):fe;fe=se}else fe=fe.call(this)}catch(Z){return i(Z)}}}).bind(this))(se)}}catch(se){return i(se)}}).bind(this),i)}catch(Q){return i(Q)}}).bind(this),i)}catch(V){return i(V)}}).bind(this),i)}catch(B){return i(B)}}).bind(this),i)}))}const vOe=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let vN;function yOe(n,e){return new Promise(((t,r)=>{vN||(vN=(function(s){const o=[];return o.push(s),URL.createObjectURL(new Blob(o))})(vOe));const i=new Worker(vN);i.addEventListener("message",(function(s){if(e.signal&&e.signal.aborted)i.terminate();else if(s.data.progress===void 0){if(s.data.error)return r(new Error(s.data.error)),void i.terminate();t(s.data.file),i.terminate()}else e.onProgress(s.data.progress)})),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",(()=>{r(e.signal.reason),i.terminate()})),i.postMessage({file:n,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function Qa(n,e){return new Promise((function(t,r){let i,a,s,o,c,f;if(i={...e},s=0,{onProgress:o}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,c=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=y=>{s=y,typeof o=="function"&&o(s)},!(n instanceof Blob||n instanceof gOe))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(n.type))return r(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!c||typeof Worker!="function"||f)return fV(n,i).then((function(y){try{return a=y,v.call(this)}catch(x){return r(x)}}).bind(this),r);var d=(function(){try{return v.call(this)}catch(y){return r(y)}}).bind(this),p=function(y){try{return fV(n,i).then((function(x){try{return a=x,d()}catch(E){return r(E)}}),r)}catch(x){return r(x)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",yOe(n,i).then((function(y){try{return a=y,d()}catch{return p()}}),p)}catch{p()}function v(){try{a.name=n.name,a.lastModified=n.lastModified}catch{}try{i.preserveExif&&n.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===n.type)&&(a=TY(n,a))}catch{}return t(a)}}))}Qa.getDataUrlFromFile=RY,Qa.getFilefromDataUrl=Yk,Qa.loadImage=PY,Qa.drawImageInCanvas=OY,Qa.drawFileInCanvas=BT,Qa.canvasToFile=VT,Qa.getExifOrientation=DY,Qa.handleMaxWidthOrHeight=LY,Qa.followExifOrientation=kY,Qa.cleanupCanvasMemory=ju,Qa.isAutoOrientationInBrowser=Sv,Qa.approximateBelowMaximumCanvasSizeOfBrowser=NY,Qa.copyExifWithoutOrientation=TY,Qa.getBrowserName=Xm,Qa.version="2.0.2";const bOe=({initialData:n,onCancel:e})=>{const{addQuote:t,quotes:r,deleteQuote:i,updateQuote:a}=QM(),s={PLA:{name:"PLA Genrico",price:400,density:1.24},PETG:{name:"PETG Genrico",price:500,density:1.27},TPU:{name:"TPU Flexible",price:650,density:1.21},ABS:{name:"ABS Genrico",price:450,density:1.04}},[o,c]=G.useState(null),[f,d]=G.useState(""),[p,v]=G.useState(""),[y,x]=G.useState("PLA"),[E,S]=G.useState(400),[w,R]=G.useState(0),[N,O]=G.useState(0),[z,k]=G.useState(0),[U,P]=G.useState(150),[C,L]=G.useState(2.5),[j,B]=G.useState(10),[V,Q]=G.useState(10),[J,W]=G.useState(50),[$,se]=G.useState(5),[ce,fe]=G.useState(200),[Z,re]=G.useState(16),[de,ve]=G.useState(0),[pe,ye]=G.useState({material:0,electricity:0,labor:0,machine:0,failureMockup:0,subtotal:0,total:0,priceNoTax:0,suggested:0}),Ee=De=>{x(De),s[De]&&S(s[De].price)},Xe=De=>Math.ceil(De/5)*5;G.useEffect(()=>{const De=w/1e3*E,Re=parseFloat(N)+parseFloat(z)/60,Me=U*Re/1e3*C,Fe=V/60*J,Ze=Re*$;let oe=De+Me+Fe+Ze;const yt=oe*(j/100);oe+=yt;const at=oe*(ce/100),ct=(oe+at)*(1-de/100),ae=Xe(ct),Y=ae*(Z/100),xe=ae+Y;ye({material:De,electricity:Me,labor:Fe,machine:Ze,failureMockup:yt,subtotal:oe,total:oe,priceNoTax:ae,suggested:xe})},[E,w,N,z,U,C,j,V,J,$,ce,Z,de]),G.useEffect(()=>{n&&(qe(n),c(n.id))},[n]);const me=De=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(De),qe=De=>{d(De.name);const Re=De.category;if(v(Array.isArray(Re)?Re.join(", "):Re||""),De.params){const Me=De.params;x(Me.filamentType||"PLA"),S(Me.filamentPrice||400),R(Me.weight||0),O(Me.timeHours||0),k(Me.timeMinutes||0),se(Me.printerRate||10),B(Me.failureRate||10),P(Me.powerRating||150),L(Me.kwhCost||2.5),Q(Me.laborTime||15),W(Me.laborRate||50),fe(Me.profitMargin||100),re(Me.taxRate||16),ve(Me.discount||0)}},mt=()=>{c(null),d(""),v(""),R(0),O(0),k(0),ve(0),e&&e()},Ue=async()=>{if(!f.trim())return alert("Ingresa un nombre para la pieza");try{const De=p.split(",").map(Me=>Me.trim()).filter(Me=>Me),Re={name:f,category:De.length>0?De:["General"],params:{filamentType:y,filamentPrice:E,weight:w,timeHours:N,timeMinutes:z,printerRate:$,failureRate:j,powerRating:U,kwhCost:C,laborTime:V,laborRate:J,profitMargin:ce,taxRate:Z,discount:de},costs:pe};o?(await a(o,Re),alert("Cotizacin actualizada")):(await t(Re),alert("Cotizacin guardada")),d(""),v(""),c(null),e&&e()}catch(De){console.error(De),alert("Error al guardar")}};return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"bg-slate-800 p-4 md:p-6 rounded-2xl border border-slate-700",children:[A.jsxs("h3",{className:"flex items-center gap-2 text-xl font-bold mb-4 text-brand-blue",children:[A.jsx(Gv,{size:20})," Material"]}),A.jsxs("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-slate-400 text-xs font-bold uppercase mb-1",children:"Nombre de la Pieza"}),A.jsx("input",{type:"text",value:f,onChange:De=>d(De.target.value),placeholder:"Ej. Soporte Monitor VESA",className:"w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2 text-white focus:border-brand-blue outline-none font-bold"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-slate-400 text-xs font-bold uppercase mb-1",children:"Categora(s)"}),A.jsx("input",{type:"text",value:p,onChange:De=>v(De.target.value),placeholder:"Ingeniera, Cosplay, Hogar...",list:"categories-list",className:"w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2 text-white focus:border-brand-blue outline-none font-bold"}),A.jsx("datalist",{id:"categories-list",children:[...new Set(r.flatMap(De=>Array.isArray(De.category)?De.category:[De.category]).filter(De=>De))].map(De=>A.jsx("option",{value:De},De))})]})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-slate-400 text-xs font-bold uppercase mb-1",children:"Preset"}),A.jsx("div",{className:"flex bg-slate-900 rounded-lg p-1 border border-slate-700",children:Object.keys(s).map(De=>A.jsx("button",{onClick:()=>Ee(De),className:`flex-1 py-1 text-xs font-bold rounded ${y===De?"bg-slate-700 text-white shadow":"text-slate-500 hover:text-slate-300"}`,children:De},De))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-slate-400 text-xs font-bold uppercase mb-1",children:"Precio Rollo (1kg)"}),A.jsxs("div",{className:"relative",children:[A.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",children:"$"}),A.jsx("input",{type:"number",value:E,onChange:De=>S(parseFloat(De.target.value)||0),className:"w-full bg-slate-900 border border-slate-600 rounded-lg pl-7 pr-4 py-2 text-sm focus:border-brand-blue outline-none"})]})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-slate-400 text-xs font-bold uppercase mb-1",children:"Peso del Modelo (g)"}),A.jsx("input",{type:"number",value:w,onChange:De=>R(parseFloat(De.target.value)||0),placeholder:"Ej. 120g",className:"w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2 text-sm focus:border-brand-blue outline-none font-bold text-white text-lg"})]})]})]}),A.jsxs("div",{className:"bg-slate-800 p-4 md:p-6 rounded-2xl border border-slate-700",children:[A.jsxs("h3",{className:"flex items-center gap-2 text-xl font-bold mb-4 text-purple-400",children:[A.jsx(q9,{size:20})," Tiempo y Mquina"]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-slate-400 text-xs font-bold uppercase mb-1",children:"Horas"}),A.jsx("input",{type:"number",value:N,onChange:De=>O(parseFloat(De.target.value)||0),className:"w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2 text-sm focus:border-purple-500 outline-none"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-slate-400 text-xs font-bold uppercase mb-1",children:"Minutos"}),A.jsx("input",{type:"number",value:z,onChange:De=>k(parseFloat(De.target.value)||0),className:"w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2 text-sm focus:border-purple-500 outline-none"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-slate-400 text-xs font-bold uppercase mb-1",children:"Mantenimiento $/h"}),A.jsxs("div",{className:"relative",children:[A.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",children:"$"}),A.jsx("input",{type:"number",value:$,onChange:De=>se(parseFloat(De.target.value)||0),className:"w-full bg-slate-900 border border-slate-600 rounded-lg pl-7 pr-4 py-2 text-sm focus:border-purple-500 outline-none"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-slate-400 text-xs font-bold uppercase mb-1",children:"Fallo Esperado %"}),A.jsx("input",{type:"number",value:j,onChange:De=>B(parseFloat(De.target.value)||0),className:"w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2 text-sm focus:border-purple-500 outline-none"})]})]})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"bg-slate-800 p-4 md:p-6 rounded-2xl border border-slate-700",children:[A.jsxs("h3",{className:"flex items-center gap-2 text-lg font-bold mb-4 text-yellow-400",children:[A.jsx(J2,{size:18})," Energa"]}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-slate-400 text-xs font-bold uppercase mb-1",children:"Consumo (Watts)"}),A.jsx("input",{type:"number",value:U,onChange:De=>P(parseFloat(De.target.value)||0),className:"w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2 text-sm focus:border-yellow-500 outline-none"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-slate-400 text-xs font-bold uppercase mb-1",children:"Costo kWh"}),A.jsxs("div",{className:"relative",children:[A.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",children:"$"}),A.jsx("input",{type:"number",value:C,onChange:De=>L(parseFloat(De.target.value)||0),className:"w-full bg-slate-900 border border-slate-600 rounded-lg pl-7 pr-4 py-2 text-sm focus:border-yellow-500 outline-none"})]})]})]})]}),A.jsxs("div",{className:"bg-slate-800 p-4 md:p-6 rounded-2xl border border-slate-700",children:[A.jsxs("h3",{className:"flex items-center gap-2 text-lg font-bold mb-4 text-brand-orange",children:[A.jsx(Y2,{size:18})," Mano de Obra"]}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-slate-400 text-xs font-bold uppercase mb-1",children:"Tiempo Post (min)"}),A.jsx("input",{type:"number",value:V,onChange:De=>Q(parseFloat(De.target.value)||0),className:"w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2 text-sm focus:border-brand-orange outline-none"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-slate-400 text-xs font-bold uppercase mb-1",children:"Tarifa $/hora"}),A.jsxs("div",{className:"relative",children:[A.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",children:"$"}),A.jsx("input",{type:"number",value:J,onChange:De=>W(parseFloat(De.target.value)||0),className:"w-full bg-slate-900 border border-slate-600 rounded-lg pl-7 pr-4 py-2 text-sm focus:border-brand-orange outline-none"})]})]})]})]})]})]}),A.jsx("div",{className:"space-y-6",children:A.jsxs("div",{className:"bg-slate-800 p-4 md:p-8 rounded-2xl border border-slate-700 lg:sticky lg:top-6",children:[A.jsxs("h2",{className:"text-2xl font-display font-bold mb-6 flex items-center gap-3",children:[A.jsx(G9,{size:32,className:"text-brand-orange"})," Resultado"]}),A.jsxs("div",{className:"space-y-2 mb-8",children:[A.jsx(hx,{label:"Costo Material",value:pe.material,icon:A.jsx(Gv,{size:14})}),A.jsx(hx,{label:"Costo Energa",value:pe.electricity,icon:A.jsx(J2,{size:14})}),A.jsx(hx,{label:"Costo Mquina",value:pe.machine,icon:A.jsx(Mle,{size:14})}),A.jsx(hx,{label:"Mano de Obra",value:pe.labor,icon:A.jsx(Y2,{size:14})}),A.jsx(hx,{label:`Margen de Fallo (${j}%)`,value:pe.failureMockup,color:"text-red-400"}),A.jsxs("div",{className:"border-t border-slate-700 my-4 pt-4 flex justify-between items-center bg-slate-700/30 p-3 rounded-lg",children:[A.jsx("span",{className:"text-slate-300 font-bold",children:"Costo Produccin"}),A.jsx("span",{className:"text-xl font-bold text-white",children:me(pe.total)})]})]}),A.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-slate-700 mb-6 space-y-4",children:[A.jsxs("div",{children:[A.jsxs("div",{className:"flex justify-between mb-2",children:[A.jsx("label",{className:"text-slate-400 text-xs font-bold uppercase",children:"Margen Ganancia %"}),A.jsxs("span",{className:"text-green-400 font-bold",children:[ce,"%"]})]}),A.jsx("input",{type:"range",min:"0",max:"300",value:ce,onChange:De=>fe(parseFloat(De.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-green-500"})]}),A.jsxs("div",{children:[A.jsxs("div",{className:"flex justify-between mb-2",children:[A.jsx("label",{className:"text-slate-400 text-xs font-bold uppercase",children:"Impuestos (IVA) %"}),A.jsxs("span",{className:"text-slate-300 font-bold",children:[Z,"%"]})]}),A.jsx("input",{type:"range",min:"0",max:"30",value:Z,onChange:De=>re(parseFloat(De.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-slate-500"})]}),A.jsxs("div",{children:[A.jsxs("div",{className:"flex justify-between mb-2",children:[A.jsx("label",{className:"text-slate-400 text-xs font-bold uppercase",children:"Descuento %"}),A.jsxs("span",{className:"text-slate-300 font-bold",children:[de,"%"]})]}),A.jsx("input",{type:"range",min:"0",max:"100",value:de,onChange:De=>ve(parseFloat(De.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-blue-500"})]})]}),A.jsxs("div",{className:"text-center space-y-4",children:[A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase mb-1",children:"Precio sin IVA"}),A.jsx("div",{className:"text-3xl font-bold text-white tracking-tight",children:me(pe.priceNoTax)})]}),A.jsxs("div",{children:[A.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase mb-1",children:"Precio Final (con IVA)"}),A.jsx("div",{className:"text-5xl font-black text-brand-orange tracking-tight",children:me(pe.suggested)})]}),A.jsxs("p",{className:"text-green-400 text-sm font-bold pt-2 border-t border-slate-700/50",children:["Ganancia Neta: ",me(pe.priceNoTax-pe.total)]})]}),A.jsxs("button",{onClick:Ue,className:`w-full font-bold py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-colors ${o?"bg-brand-orange hover:bg-orange-600":"bg-brand-blue hover:bg-blue-600"} text-white`,children:[A.jsx(Q2,{size:20})," ",o?"Actualizar Cotizacin":"Guardar Cotizacin"]}),o&&A.jsx("button",{onClick:mt,className:"w-full bg-slate-700 hover:bg-slate-600 text-slate-300 font-bold py-2 px-4 rounded-xl transition-colors",children:"Cancelar Edicin"})]})]})})]}),A.jsxs("div",{className:"bg-slate-800 rounded-xl overflow-hidden border border-slate-700",children:[A.jsxs("div",{className:"p-4 md:p-6 border-b border-slate-700 flex items-center gap-3",children:[A.jsx(Q2,{size:24,className:"text-brand-orange"}),A.jsx("h3",{className:"text-xl font-bold",children:"Piezas Cotizadas"})]}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"w-full text-left min-w-[800px]",children:[A.jsx("thead",{className:"bg-slate-700/50 text-slate-300",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-4",children:"Pieza"}),A.jsx("th",{className:"p-4",children:"Fecha"}),A.jsx("th",{className:"p-4",children:"Peso"}),A.jsx("th",{className:"p-4",children:"Tiempo"}),A.jsx("th",{className:"p-4",children:"Costo Prod."}),A.jsx("th",{className:"p-4",children:"Sin IVA"}),A.jsx("th",{className:"p-4",children:"Total (IVA)"}),A.jsx("th",{className:"p-4 text-center",children:"Acciones"})]})}),A.jsxs("tbody",{className:"divide-y divide-slate-700",children:[r.sort((De,Re)=>new Date(Re.date)-new Date(De.date)).map(De=>{var Re,Me,Fe,Ze,oe,yt,at,Tt;return A.jsxs("tr",{className:"hover:bg-slate-700/30",children:[A.jsxs("td",{className:"p-4 font-bold text-white",children:[De.name,A.jsx("div",{className:"text-xs text-slate-500 font-normal",children:De.category||"Sin categora"})]}),A.jsx("td",{className:"p-4 text-sm text-slate-400",children:new Date(De.date).toLocaleDateString()}),A.jsxs("td",{className:"p-4 text-sm text-slate-300",children:[(Re=De.params)==null?void 0:Re.weight,"g"]}),A.jsxs("td",{className:"p-4 text-sm text-slate-300",children:[(Me=De.params)==null?void 0:Me.timeHours,"h ",(Fe=De.params)==null?void 0:Fe.timeMinutes,"m"]}),A.jsx("td",{className:"p-4 font-mono text-slate-400",children:me(((Ze=De.costs)==null?void 0:Ze.total)||0)}),A.jsx("td",{className:"p-4 font-mono text-slate-300",children:me(((oe=De.costs)==null?void 0:oe.priceNoTax)||((yt=De.costs)==null?void 0:yt.suggested)/(1+(((at=De.params)==null?void 0:at.taxRate)||16)/100)||0)}),A.jsx("td",{className:"p-4 font-mono font-bold text-brand-orange",children:me(((Tt=De.costs)==null?void 0:Tt.suggested)||0)}),A.jsx("td",{className:"p-4 text-center",children:A.jsxs("div",{className:"flex justify-center gap-2",children:[A.jsx("button",{onClick:()=>qe(De),className:"p-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-blue-400",title:"Cargar Datos",children:A.jsx(ele,{size:16})}),A.jsx("button",{onClick:()=>{confirm("Borrar cotizacin?")&&i(De.id)},className:"p-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-red-400",title:"Eliminar",children:A.jsx(td,{size:16})})]})})]},De.id)}),r.length===0&&A.jsx("tr",{children:A.jsx("td",{colSpan:"7",className:"p-8 text-center text-slate-500",children:"No hay cotizaciones guardadas."})})]})]})})]})]})},hx=({label:n,value:e,icon:t,color:r="text-slate-400"})=>A.jsxs("div",{className:"flex justify-between items-center text-sm",children:[A.jsxs("span",{className:`flex items-center gap-2 ${r}`,children:[t," ",n]}),A.jsx("span",{className:"font-mono text-slate-200",children:new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(e)})]}),xOe=()=>{var Ft,jt,Ht,Dt,Yt,En,rr;const{clients:n,orders:e,leads:t,user:r,loadingAuth:i,login:a,logout:s,addClient:o,updateClient:c,addOrder:f,updateOrder:d,updateOrderStatus:p,deleteOrder:v,addLead:y,updateLead:x,deleteLead:E,expenses:S,addExpense:w,deleteExpense:R,quotes:N,deleteQuote:O,updateQuote:z}=QM(),k=ne=>{switch(ne){case"pedido":return"bg-brand-orange/20 text-brand-orange border-brand-orange/30";case"proceso":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"terminado":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"entregado":return"bg-green-500/20 text-green-400 border-green-500/30";default:return"bg-slate-900 border-slate-600 text-slate-300"}},[U,P]=G.useState("dashboard"),[C,L]=G.useState(!1),[j,B]=G.useState(!1),[V,Q]=G.useState(null),[J,W]=G.useState(!1),[$,se]=G.useState(!1),[ce,fe]=G.useState(!1),[Z,re]=G.useState(!0),[de,ve]=G.useState(null),[pe,ye]=G.useState(null),[Ee,Xe]=G.useState(null),[me,qe]=G.useState(null),[mt,Ue]=G.useState([{desc:"",qty:1,price:0}]),[De,Re]=G.useState(0),[Me,Fe]=G.useState(null);G.useMemo(()=>{const ne=mt.reduce((Se,Te)=>Se+parseFloat(Te.price||0)*parseFloat(Te.qty||1),0);Re(ne)},[mt]);const[Ze,oe]=G.useState({status:"all",clientId:""}),[yt,at]=G.useState(""),[Tt,ct]=G.useState(0),ae=30,[Y,xe]=G.useState({status:"all",search:""}),[ke,et]=G.useState({key:null,direction:"asc"}),[Ne,It]=G.useState({date:"",method:"all"}),[rt,Pt]=G.useState({key:"name",direction:"asc"}),[Ot,it]=G.useState({category:"all",search:""}),[tt,Mt]=G.useState({key:"date",direction:"desc"}),[he,Le]=G.useState(null),[bt,ge]=G.useState(new Set),[dt,pt]=G.useState(""),ht=()=>Ue([...mt,{desc:"",qty:1,price:0}]),st=ne=>Ue(mt.filter((Se,Te)=>Te!==ne)),Qe=(ne,Se,Te)=>{const _t=[...mt];_t[ne][Se]=Te,Ue(_t)},gt=G.useMemo(()=>{let ne=e.filter(Se=>{const Te=Y.search.toLowerCase(),_t=n.find(Gn=>Gn.id===Se.clientId),wt=_t?_t.name.toLowerCase():(Se.client||"").toLowerCase(),Zt=_t?_t.email.toLowerCase():"",Yn=Te===""||Se.id.toLowerCase().includes(Te)||wt.includes(Te)||Zt.includes(Te),dn=Y.status==="all"||Se.status===Y.status;return Yn&&dn});return ke.key&&ne.sort((Se,Te)=>{let _t=Se[ke.key],wt=Te[ke.key];if(ke.key==="deadline"&&(_t=_t||"",wt=wt||""),ke.key==="status"){const Zt={pedido:0,proceso:1,terminado:2,entregado:3};_t=Zt[_t]??99,wt=Zt[wt]??99}return _t<wt?ke.direction==="asc"?-1:1:_t>wt?ke.direction==="asc"?1:-1:0}),ne},[e,n,Y,ke]),Wt=G.useMemo(()=>S.filter(ne=>{const Se=Ne.date===""||ne.date===Ne.date,Te=Ne.method==="all"||ne.method===Ne.method;return Se&&Te}),[S,Ne]),nn=ne=>{let Se="asc";ke.key===ne&&ke.direction==="asc"&&(Se="desc"),et({key:ne,direction:Se})},Kt=ne=>{let Se="asc";rt.key===ne&&rt.direction==="asc"&&(Se="desc"),Pt({key:ne,direction:Se})},Ar=G.useMemo(()=>{let ne=n.map(Se=>({...Se,orderCount:e.filter(Te=>Te.clientId===Se.id).length}));if(yt){const Se=yt.toLowerCase();ne=ne.filter(Te=>Te.name.toLowerCase().includes(Se)||Te.email&&Te.email.toLowerCase().includes(Se)||Te.phone&&Te.phone.includes(Se))}return rt.key&&ne.sort((Se,Te)=>{let _t=Se[rt.key],wt=Te[rt.key];return typeof _t=="string"&&(_t=_t.toLowerCase()),typeof wt=="string"&&(wt=wt.toLowerCase()),_t<wt?rt.direction==="asc"?-1:1:_t>wt?rt.direction==="asc"?1:-1:0}),ne},[n,e,yt,rt]),Tr=G.useMemo(()=>{let ne=N.filter(Se=>{const Te=Ot.search.toLowerCase(),_t=Array.isArray(Se.category)?Se.category:[Se.category],wt=_t.filter(Boolean).join(" ").toLowerCase(),Zt=Te===""||Se.name.toLowerCase().includes(Te)||wt.includes(Te),Yn=Ot.category==="all"||_t.includes(Ot.category);return Zt&&Yn});return tt.key&&ne.sort((Se,Te)=>{let _t=Se[tt.key]||"",wt=Te[tt.key]||"";return tt.key==="date"&&(_t=new Date(Se.date).getTime(),wt=new Date(Te.date).getTime()),_t<wt?tt.direction==="asc"?-1:1:_t>wt?tt.direction==="asc"?1:-1:0}),ne},[N,Ot,tt]),oa=ne=>{let Se="asc";tt.key===ne&&tt.direction==="asc"&&(Se="desc"),Mt({key:ne,direction:Se})},fs=G.useMemo(()=>{const ne=new Set(N.flatMap(Se=>Array.isArray(Se.category)?Se.category:[Se.category]).filter(Boolean));return["all",...Array.from(ne)]},[N]),ho=ne=>{Le(ne),P("calculator")},ds=ne=>{ne.target.checked?ge(new Set(Tr.map(Se=>Se.id))):ge(new Set)},la=ne=>{const Se=new Set(bt);Se.has(ne)?Se.delete(ne):Se.add(ne),ge(Se)},Wo=async()=>{if(!dt.trim())return alert("Ingresa una categora");if(bt.size!==0&&confirm(`Actualizar categora para ${bt.size} cotizaciones?`))try{const ne=dt.split(",").map(Te=>Te.trim()).filter(Te=>Te),Se=Array.from(bt).map(Te=>z(Te,{category:ne}));await Promise.all(Se),alert("Categoras actualizadas"),ge(new Set),pt("")}catch(ne){console.error(ne),alert("Error al actualizar")}};if(i)return A.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-900 text-white",children:"Cargando..."});if(!r)return A.jsx("div",{className:"flex flex-col items-center justify-center h-screen bg-slate-900 text-white p-4",children:A.jsxs("div",{className:"bg-slate-800 p-8 rounded-2xl border border-slate-700 text-center max-w-md w-full",children:[A.jsxs("h1",{className:"font-display font-bold text-3xl mb-2",children:["Tuna's ",A.jsx("span",{className:"text-brand-orange",children:"Admin"})]}),A.jsx("p",{className:"text-slate-400 mb-8",children:"Inicia sesin para gestionar tu negocio."}),A.jsxs("button",{onClick:a,className:"w-full bg-white text-gray-900 font-bold py-3 px-4 rounded-xl flex items-center justify-center gap-3 hover:bg-gray-100 transition-colors",children:[A.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",className:"w-6 h-6",alt:"Google"}),"Acceder con Google"]})]})});const Mr=ne=>{const Se=ne.target.files[0];if(!Se)return;const Te=new FileReader;Te.onload=_t=>{try{importDatabase(JSON.parse(_t.target.result)),alert("Base de datos importada.")}catch{alert("Error al procesar el archivo JSON")}},Te.readAsText(Se)},Hi=async()=>{if(!confirm("Generar IDs cortos para todos los pedidos? Esto es necesario para la bsqueda pblica."))return;let ne=0;for(const Se of e){const Te=Se.id.slice(-4);try{await d(Se.id,{shortId:Te}),ne++}catch(_t){console.error("Error updating order",Se.id,_t)}}alert(`Se actualizaron ${ne} pedidos con Short ID.`)},br=ne=>{ne.preventDefault();const Se=new FormData(ne.target);w({concept:Se.get("concept"),amount:Se.get("amount"),date:Se.get("date"),method:Se.get("method")}),ne.target.reset(),alert("Gasto registrado exitosamente")},kr=ne=>{ne.preventDefault();const Se=new FormData(ne.target),Te=Se.get("street"),_t=Se.get("colony"),wt=Se.get("zip"),Zt=Se.get("state"),Yn=`${Te}, Col. ${_t}, ${wt}, ${Zt}`;o({name:Se.get("name"),type:Se.get("type"),email:Se.get("email"),phone:Se.get("phone"),facebook:Se.get("facebook"),instagram:Se.get("instagram"),address:Yn,street:Te,colony:_t,zip:wt,state:Zt}),se(!1)},Ni=ne=>{ne.preventDefault();const Se=new FormData(ne.target),Te=Se.get("street"),_t=Se.get("colony"),wt=Se.get("zip"),Zt=Se.get("state"),Yn=`${Te}, Col. ${_t}, ${wt}, ${Zt}`;c(Ee.id,{name:Se.get("name"),email:Se.get("email"),phone:Se.get("phone"),facebook:Se.get("facebook"),instagram:Se.get("instagram"),type:Se.get("type"),address:Yn,street:Te,colony:_t,zip:wt,state:Zt}),Xe(null)},Gi=ne=>{ne.preventDefault();const Se=new FormData(ne.target),Te=Se.get("clientId");let _t=Se.get("manualName"),wt=Se.get("manualEmail"),Zt=Se.get("manualPhone");if(Te&&Te!=="manual"){const dn=n.find(Gn=>Gn.id===Te);dn&&(_t=dn.name,wt=dn.email,Zt=dn.phone)}const Yn={clientId:Te!=="manual"?Te:null,name:_t,email:wt,phone:Zt,details:Se.get("details"),quantity:Se.get("quantity")};try{y(Yn),fe(!1),fe(!1),alert("Cotizacin creada correctamente")}catch(dn){console.error("Error adding lead:",dn),alert("Error al crear la cotizacin")}},ca=ne=>{ne.preventDefault();const Se=new FormData(ne.target),Te=V.leadId,_t=Se.get("name"),wt=Se.get("email"),Zt=Se.get("phone"),Yn=Se.get("street"),dn=Se.get("colony"),Gn=Se.get("zip"),hn=Se.get("state"),ir=`${Yn}, Col. ${dn}, ${Gn}, ${hn}`,qn=Se.get("itemDesc"),xr=parseFloat(Se.get("itemQty")),Rr=parseFloat(Se.get("itemPrice")),za=parseFloat(Se.get("total")),xi=Se.get("deadline"),lc=parseFloat(Se.get("advance")||0);let Sa=null;const js=n.find(ja=>wt&&ja.email===wt||Zt&&ja.phone===Zt);js?(Sa=js.id,c(js.id,{name:_t,email:wt,phone:Zt,type:js.type,address:ir,street:Yn,colony:dn,zip:Gn,state:hn})):Sa=o({name:_t,email:wt,phone:Zt,type:"normal",address:ir,street:Yn,colony:dn,zip:Gn,state:hn}).id,f({clientId:Sa,items:[{desc:qn,qty:xr,price:Rr.toFixed(2)}],total:za.toFixed(2),advance:lc.toFixed(2),deliveryLocation:ir,status:"pedido",date:new Date().toLocaleDateString("es-MX"),deadline:xi}),updateLeadStatus(Te,"Aceptada"),Q(null)},zs=async(ne,Se)=>{const Te=e.find(Zt=>Zt.id===ne);if(!Te||!Te.items)return;const _t=[...Te.items],wt=_t[Se].completed||!1;_t[Se]={..._t[Se],completed:!wt};try{await d(ne,{items:_t})}catch(Zt){console.error("Error toggling item:",Zt),alert("Error al actualizar el artculo.")}},$o=async ne=>{const Se=ne.target.files[0];if(!Se)return;const Te={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,fileType:"image/webp"};try{const _t=await Qa(Se,Te),wt=kz(Uz,`orders/${de.orderId}/${Date.now()}_${Se.name}`);await Dz(wt,_t);const Zt=await Lz(wt);await d(de.orderId,{progressImage:Zt}),ve(null),alert("Imagen subida con xito")}catch(_t){console.error("Error uploading image:",_t),alert("Error al subir la imagen.")}},qi=async ne=>{var Se;ne.preventDefault(),B(!0);try{const Te=new FormData(ne.target),_t=Te.get("clientId");let wt=_t;if(_t==="new"){const hn=Te.get("newClientName"),ir=Te.get("newClientContact"),qn="normal",xr=Te.get("newClientStreet"),Rr=Te.get("newClientColony"),za=Te.get("newClientZip"),xi=Te.get("newClientState"),lc=Te.get("newClientPhone"),Sa=`${xr}, Col. ${Rr}, ${za}, ${xi}`;wt=(await o({name:hn,email:ir,phone:lc,type:qn,address:Sa,street:xr,colony:Rr,zip:za,state:xi})).id}const Zt=parseFloat(Te.get("advance")||0);if(Zt>De){alert("El anticipo no puede ser mayor al total del pedido."),B(!1);return}const Yn={clientId:wt,items:mt.map(hn=>({...hn,price:parseFloat(hn.price).toFixed(2)})),total:De.toFixed(2),advance:Zt.toFixed(2),remaining:(De-Zt).toFixed(2),deliveryLocation:Te.get("delivery"),status:"pedido",date:new Date().toLocaleDateString("es-MX"),deadline:Te.get("deadline"),evidenceLink:Te.get("evidenceLink")};let dn=Me;Me?(await d(Me,{...Yn,status:(Se=e.find(hn=>hn.id===Me))==null?void 0:Se.status}),alert("Pedido actualizado correctamente")):dn=(await f(Yn)).id;const Gn=Te.get("orderImage");if(Gn&&Gn.size>0)try{const ir=await Qa(Gn,{maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,fileType:"image/webp"}),qn=kz(Uz,`orders/${dn}/${Date.now()}_${Gn.name}`);await Dz(qn,ir);const xr=await Lz(qn);await d(dn,{progressImage:xr})}catch(hn){console.error("Error uploading form image:",hn),alert("El pedido se guard pero hubo un error subiendo la imagen.")}W(!1),Fe(null),Ue([{desc:"",qty:1,price:0}])}catch(Te){console.error("Error saving order:",Te),alert("Error al guardar pedido: "+Te.message)}finally{B(!1)}},hs=ne=>{Fe(ne.id),Ue(ne.items||[]),W(!0)},Fa=ne=>{confirm("Ests seguro de eliminar este pedido?")&&v(ne)},ua=ne=>{confirm("Ests seguro de eliminar este cliente?")&&deleteClient(ne)},Wi=ne=>{const Se=n.find(Gn=>Gn.id===ne.clientId),Te=(Se==null?void 0:Se.phone)||ne.phone;if(!Te){alert("Este pedido no tiene un nmero de telfono asociado.");return}const _t=Te.replace(/\D/g,""),wt=`${window.location.origin}/status`,Zt=ne.items.map(Gn=>`- ${Gn.qty}x ${Gn.desc}`).join(`
`),Yn=`Hola ${(Se==null?void 0:Se.name)||"Cliente"}, tu pedido #${ne.id.slice(-4)} tiene un estatus de *${ne.status}*.

Resumen:
${Zt}
        
Puedes revisar el avance y detalles aqu: ${wt}
        
Saludos, Tuna's Craft `,dn=`https://wa.me/${_t}?text=${encodeURIComponent(Yn)}`;window.open(dn,"_blank")},fa=e.reduce((ne,Se)=>ne+parseFloat(Se.total||0),0),te=e.reduce((ne,Se)=>ne+parseFloat(Se.advance||0),0),Ae=e.reduce((ne,Se)=>ne+parseFloat(Se.remaining||Se.total-(Se.advance||0)||0),0),He=S.reduce((ne,Se)=>ne+parseFloat(Se.amount||0),0),ze=fa-He,Ce=t.filter(ne=>ne.status==="Nuevo"||ne.status==="Pendiente").length,At=t.filter(ne=>ne.status==="Rechazada").length,St=t.filter(ne=>!(Ze.status!=="all"&&ne.status!==Ze.status||Ze.clientId&&!ne.id.includes(Ze.clientId))).slice(Tt*ae,(Tt+1)*ae);return A.jsxs("div",{className:"flex flex-col md:flex-row min-h-screen md:h-screen bg-slate-900 text-slate-100 font-sans md:overflow-hidden relative",children:[A.jsx("button",{onClick:()=>L(!C),className:"md:hidden absolute top-6 right-6 z-50 p-2 bg-slate-800 rounded-lg text-white shadow-lg border border-slate-700",children:C?A.jsx(c_,{size:24}):A.jsx(W9,{size:24})}),C&&A.jsx("div",{className:"fixed inset-0 bg-black/80 z-40 md:hidden",onClick:()=>L(!1)}),A.jsxs("aside",{className:`
                fixed md:static top-0 left-0 h-full w-64 bg-slate-800 border-r border-slate-700 
                flex flex-col p-6 z-40 transition-transform duration-300 ease-in-out
                ${C?"translate-x-0":"-translate-x-full md:translate-x-0"}
             `,children:[A.jsxs("h1",{className:"font-display font-bold text-2xl text-white mb-8 ml-8 md:ml-0",children:["Tuna's ",A.jsx("span",{className:"text-brand-orange",children:"Admin"})]}),A.jsxs("nav",{className:"space-y-2 flex-1",children:[A.jsx(Tm,{id:"dashboard",icon:A.jsx(Gv,{}),label:"Dashboard",active:U,set:ne=>{P(ne),L(!1)}}),A.jsx(Tm,{id:"orders",icon:A.jsx(l_,{}),label:"Pedidos",active:U,set:ne=>{P(ne),L(!1)}}),A.jsx(Tm,{id:"leads",icon:A.jsx(gle,{}),label:"Cotizaciones",active:U,set:ne=>{P(ne),L(!1)}}),A.jsx(Tm,{id:"clients",icon:A.jsx(kle,{}),label:"Clientes",active:U,set:ne=>{P(ne),L(!1)}}),A.jsx(Tm,{id:"expenses",icon:A.jsx(cle,{}),label:"Gastos",active:U,set:ne=>{P(ne),L(!1)}}),A.jsx(Tm,{id:"saved_quotes",icon:A.jsx(Koe,{}),label:"Historial 3D",active:U,set:ne=>{P(ne),L(!1)}}),A.jsx(Tm,{id:"calculator",icon:A.jsx(G9,{}),label:"Cotizador 3D",active:U,set:ne=>{P(ne),L(!1)}})]}),A.jsxs("div",{className:"mt-auto pt-6 border-t border-slate-700 space-y-2",children:[A.jsxs(ol,{to:"/",className:"flex items-center gap-2 text-slate-400 hover:text-white px-2",children:[A.jsx(IM,{size:16})," Ir al Sitio"]}),A.jsxs("label",{className:"w-full bg-slate-700 hover:bg-slate-600 p-2 rounded text-center items-center justify-center flex cursor-pointer gap-2 text-sm",children:[A.jsx(MR,{size:14})," Importar DB",A.jsx("input",{type:"file",className:"hidden",accept:".json",onChange:Mr})]}),A.jsxs("button",{onClick:Hi,className:"w-full bg-slate-700 hover:bg-slate-600 p-2 rounded text-center items-center justify-center flex cursor-pointer gap-2 text-sm text-brand-orange",children:[A.jsx(MR,{size:14})," Reparar DB (Short IDs)"]}),A.jsxs("button",{onClick:s,className:"w-full bg-red-900/30 hover:bg-red-900/50 text-red-200 p-2 rounded flex items-center justify-center gap-2 text-sm transition-colors",children:[A.jsx(td,{size:14})," Cerrar Sesin"]})]})]}),A.jsxs("main",{className:"flex-1 md:overflow-y-auto px-6 py-4 md:py-8 md:px-8 relative",children:[U==="dashboard"&&A.jsxs("div",{className:"space-y-6",children:[A.jsx("h2",{className:"text-3xl font-display font-bold",children:"Resumen"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[A.jsx(kh,{title:"Ventas Totales",value:`$${fa.toFixed(2)}`,icon:A.jsx(fle,{className:"text-brand-blue"})}),A.jsx(kh,{title:"Gastos Totales",value:`$${He.toFixed(2)}`,color:"text-red-400"}),A.jsx(kh,{title:"Ganancia Neta",value:`$${ze.toFixed(2)}`,color:ze>=0?"text-green-400":"text-red-500"}),A.jsx(kh,{title:"Cobrado",value:`$${te.toFixed(2)}`,color:"text-green-500"}),A.jsx(kh,{title:"Por Cobrar",value:`$${Ae.toFixed(2)}`,color:"text-brand-orange"}),A.jsx(kh,{title:"Pedidos Activos",value:e.filter(ne=>ne.status!=="entregado").length}),A.jsx(kh,{title:"Cotizaciones Activas",value:Ce,color:"text-blue-400"}),A.jsx(kh,{title:"Cot. Rechazadas",value:At,color:"text-red-400"})]}),A.jsx(uOe,{orders:e})]}),U==="orders"&&A.jsxs("div",{children:[A.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[A.jsx("h2",{className:"text-3xl font-display font-bold",children:"Pedidos"}),A.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto",children:[A.jsxs(ol,{to:"/venta-tienda",className:"bg-brand-orange hover:bg-orange-600 px-4 py-2 rounded-lg font-bold flex items-center justify-center gap-2 transition-colors",children:[A.jsx($9,{size:18})," Venta Mostrador"]}),A.jsxs("div",{className:"relative w-full md:w-auto",children:[A.jsx("input",{placeholder:"Buscar (ID, Cliente, Correo)...",className:"bg-slate-800 border border-slate-600 rounded-lg pl-3 pr-10 py-2 w-full md:w-64 text-sm focus:outline-none focus:border-brand-blue",value:Y.search,onChange:ne=>xe({...Y,search:ne.target.value})}),Y.search&&A.jsx("button",{onClick:()=>xe({...Y,search:""}),className:"absolute right-3 top-2.5 text-slate-400 hover:text-white",children:""})]}),A.jsxs("select",{className:"bg-slate-800 border border-slate-600 rounded-lg p-2 text-sm focus:outline-none focus:border-brand-blue",value:Y.status,onChange:ne=>xe({...Y,status:ne.target.value}),children:[A.jsx("option",{value:"all",children:"Todos los Estatus"}),A.jsx("option",{value:"pedido",children:"Pedido"}),A.jsx("option",{value:"proceso",children:"En Proceso"}),A.jsx("option",{value:"terminado",children:"Terminado"}),A.jsx("option",{value:"entregado",children:"Entregado"})]}),A.jsxs("button",{onClick:()=>W(!0),className:"bg-brand-blue hover:bg-blue-600 px-4 py-2 rounded-lg font-bold flex items-center justify-center gap-2",children:[A.jsx(uv,{size:18})," Nuevo Pedido"]})]})]}),A.jsx("div",{className:"bg-slate-800 rounded-xl overflow-hidden border border-slate-700 overflow-x-auto",children:A.jsxs("table",{className:"w-full text-left min-w-[800px]",children:[A.jsx("thead",{className:"bg-slate-700/50 text-slate-300",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-4",children:"ID"}),A.jsx("th",{className:"p-4",children:"Cliente"}),A.jsx("th",{className:"p-4",children:"Lugar"}),A.jsx("th",{className:"p-4 text-center",children:"Arts."}),A.jsx("th",{className:"p-4 cursor-pointer hover:text-white transition-colors select-none",onClick:()=>nn("deadline"),children:A.jsxs("div",{className:"flex items-center gap-1",children:["Fecha Entrega",ke.key==="deadline"&&A.jsx(X2,{size:14,className:ke.direction==="asc"?"text-brand-blue":"text-brand-orange"})]})}),A.jsx("th",{className:"p-4",children:"Restante"}),A.jsx("th",{className:"p-4 cursor-pointer hover:text-white transition-colors select-none",onClick:()=>nn("status"),children:A.jsxs("div",{className:"flex items-center gap-1",children:["Estatus",ke.key==="status"&&A.jsx(X2,{size:14,className:ke.direction==="asc"?"text-brand-blue":"text-brand-orange"})]})}),A.jsx("th",{className:"p-4",children:"Total"}),A.jsx("th",{className:"p-4 text-center",children:"Acciones"})]})}),A.jsx("tbody",{className:"divide-y divide-slate-700",children:gt.map(ne=>{var Se;return A.jsxs("tr",{className:"hover:bg-slate-700/30",children:[A.jsxs("td",{className:"p-4 text-xs text-slate-500",children:["#",ne.id.slice(-4)]}),A.jsx("td",{className:"p-4 font-medium",children:ne.client||((Se=n.find(Te=>Te.id===ne.clientId))==null?void 0:Se.name)||"Unknown"}),A.jsx("td",{className:"p-4 text-sm text-slate-400",children:ne.deliveryLocation||"Sin ubicacin"}),A.jsxs("td",{className:"p-4 text-center",children:[A.jsx("div",{className:"font-bold text-sm mb-1",children:ne.items?ne.items.length:1}),A.jsx("div",{className:"flex flex-col gap-1 max-w-[200px] mx-auto",children:ne.items&&ne.items.map((Te,_t)=>A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx("input",{type:"checkbox",checked:Te.completed||!1,onChange:()=>zs(ne.id,_t),className:"cursor-pointer rounded border-slate-600 bg-slate-700 text-brand-blue focus:ring-brand-blue",title:"Marcar como listo"}),A.jsxs("span",{className:`text-[10px] leading-tight truncate ${Te.completed?"text-green-400 line-through decoration-green-400/50":"text-slate-400"}`,children:[Te.qty,"x ",Te.desc]})]},_t))})]}),A.jsx("td",{className:"p-4 text-sm text-slate-400",children:ne.deadline||"Pendiente"}),A.jsxs("td",{className:"p-4 text-brand-orange font-bold",children:["$",ne.remaining]}),A.jsx("td",{className:"p-4",children:A.jsx("div",{className:"flex flex-col gap-2",children:A.jsxs("select",{value:ne.status,onChange:Te=>p(ne.id,Te.target.value),className:`border rounded text-xs p-2 w-full font-bold ${k(ne.status)}`,children:[A.jsx("option",{value:"pedido",className:"bg-slate-900 text-slate-300",children:"Pedido"}),A.jsx("option",{value:"proceso",className:"bg-slate-900 text-slate-300",children:"En Proceso"}),A.jsx("option",{value:"terminado",className:"bg-slate-900 text-slate-300",children:"Terminado"}),A.jsx("option",{value:"entregado",className:"bg-slate-900 text-slate-300",children:"Entregado"})]})})}),A.jsxs("td",{className:"p-4 font-bold",children:["$",ne.total]}),A.jsx("td",{className:"p-4",children:A.jsxs("div",{className:"flex justify-center items-center gap-2",children:[A.jsx("button",{onClick:()=>ye({type:"order",data:ne}),className:"p-2 text-brand-orange hover:bg-brand-orange/20 rounded-full transition-colors",title:"Ver Detalles",children:A.jsx(AR,{size:18})}),A.jsx("button",{onClick:()=>hs(ne),className:"p-2 text-blue-400 hover:bg-blue-400/20 rounded-full transition-colors",title:"Editar",children:A.jsx(TR,{size:18})}),A.jsx("button",{onClick:()=>ve({orderId:ne.id}),className:"p-2 text-purple-400 hover:bg-purple-400/20 rounded-full transition-colors",title:"Subir Foto",children:A.jsx(MR,{size:18})}),A.jsx("button",{onClick:()=>Wi(ne),className:"p-2 text-green-400 hover:bg-green-400/20 rounded-full transition-colors",title:"Enviar WhatsApp",children:A.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",className:"w-4 h-4",alt:"WA"})}),A.jsx("button",{onClick:()=>Fa(ne.id),className:"p-2 text-red-400 hover:bg-red-400/20 rounded-full transition-colors",title:"Eliminar",children:A.jsx(td,{size:18})})]})})]},ne.id)})})]})})]}),U==="clients"&&A.jsxs("div",{children:[A.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[A.jsx("h2",{className:"text-3xl font-display font-bold",children:"Clientes"}),A.jsxs("div",{className:"flex w-full md:w-auto gap-2",children:[A.jsxs("div",{className:"relative flex-1 md:w-64",children:[A.jsx(WN,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",size:16}),A.jsx("input",{type:"text",placeholder:"Buscar cliente...",value:yt,onChange:ne=>at(ne.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg pl-10 pr-4 py-2 text-sm focus:outline-none focus:border-brand-blue"})]}),A.jsxs("button",{onClick:()=>se(!0),className:"bg-brand-blue hover:bg-blue-600 px-4 py-2 rounded-lg font-bold flex items-center gap-2 whitespace-nowrap",children:[A.jsx(uv,{size:18})," Nuevo"]})]})]}),A.jsx("div",{className:"bg-slate-800 rounded-xl overflow-hidden border border-slate-700 overflow-x-auto",children:A.jsxs("table",{className:"w-full text-left min-w-[800px]",children:[A.jsx("thead",{className:"bg-slate-700/50 text-slate-300",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-4 cursor-pointer hover:text-white",onClick:()=>Kt("name"),children:A.jsxs("div",{className:"flex items-center gap-1",children:["Nombre",rt.key==="name"&&(rt.direction==="asc"?A.jsx(rv,{size:14}):A.jsx(nv,{size:14}))]})}),A.jsx("th",{className:"p-4 cursor-pointer hover:text-white",onClick:()=>Kt("type"),children:A.jsxs("div",{className:"flex items-center gap-1",children:["Tipo",rt.key==="type"&&(rt.direction==="asc"?A.jsx(rv,{size:14}):A.jsx(nv,{size:14}))]})}),A.jsx("th",{className:"p-4 cursor-pointer hover:text-white",onClick:()=>Kt("orderCount"),children:A.jsxs("div",{className:"flex items-center gap-1",children:["No. Pedidos",rt.key==="orderCount"&&(rt.direction==="asc"?A.jsx(rv,{size:14}):A.jsx(nv,{size:14}))]})}),A.jsx("th",{className:"p-4",children:"Contacto"}),A.jsx("th",{className:"p-4",children:"Direccin"}),A.jsx("th",{className:"p-4 text-center",children:"Acciones"})]})}),A.jsx("tbody",{className:"divide-y divide-slate-700",children:Ar.map(ne=>A.jsxs("tr",{className:"hover:bg-slate-700/30",children:[A.jsxs("td",{className:"p-4 font-bold",children:[ne.name,A.jsxs("div",{className:"text-xs text-slate-500 font-normal",children:["ID: ",ne.id.slice(-6)]})]}),A.jsx("td",{className:"p-4",children:A.jsx("span",{className:`text-xs px-2 py-1 rounded uppercase font-bold 
                                                    ${ne.type==="distribuidor"?"bg-purple-500/20 text-purple-400":ne.type==="mayorista"?"bg-blue-500/20 text-blue-400":"bg-slate-600/20 text-slate-400"}`,children:ne.type})}),A.jsx("td",{className:"p-4 text-center font-bold text-slate-300",children:ne.orderCount}),A.jsxs("td",{className:"p-4 text-sm text-slate-400",children:[A.jsx("div",{children:ne.email}),A.jsx("div",{children:ne.phone}),(ne.facebook||ne.instagram)&&A.jsxs("div",{className:"flex gap-2 text-xs text-slate-500 mt-1",children:[ne.facebook&&A.jsxs("span",{children:["FB: ",ne.facebook]}),ne.instagram&&A.jsxs("span",{children:["IG: ",ne.instagram]})]})]}),A.jsx("td",{className:"p-4 text-sm text-slate-400 max-w-xs truncate",children:ne.address||"Sin direccin"}),A.jsx("td",{className:"p-4 text-center",children:A.jsxs("div",{className:"flex justify-center gap-2",children:[A.jsx("button",{onClick:()=>qe(ne),className:"p-2 bg-blue-900/30 hover:bg-blue-900/50 text-blue-200 rounded transition-colors",title:"Ver Historial",children:A.jsx(AR,{size:16})}),A.jsx("button",{onClick:()=>Xe(ne),className:"p-2 bg-slate-700 hover:bg-slate-600 rounded transition-colors",title:"Editar",children:A.jsx(TR,{size:16})}),A.jsx("button",{onClick:()=>ua(ne.id),className:"p-2 bg-red-900/30 hover:bg-red-900/50 text-red-200 rounded transition-colors",title:"Eliminar",children:A.jsx(td,{size:16})})]})})]},ne.id))})]})})]}),U==="leads"&&A.jsxs("div",{children:[A.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[A.jsx("h2",{className:"text-3xl font-display font-bold",children:"Cotizaciones"}),A.jsxs("div",{className:"flex flex-col md:flex-row gap-2 w-full md:w-auto",children:[A.jsxs("button",{onClick:()=>fe(!0),className:"bg-brand-blue hover:bg-blue-600 px-3 py-2 rounded-lg font-bold flex items-center justify-center gap-2 text-sm",children:[A.jsx(uv,{size:16})," Nueva"]}),A.jsxs("select",{className:"bg-slate-800 border border-slate-600 rounded p-2 text-sm",onChange:ne=>oe({...Ze,status:ne.target.value}),children:[A.jsx("option",{value:"all",children:"Ver Todos"}),A.jsx("option",{value:"Nuevo",children:"Nuevos"}),A.jsx("option",{value:"Aceptada",children:"Aceptadas"})]})]})]}),A.jsx("div",{className:"grid gap-4",children:St.map(ne=>A.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[A.jsxs("div",{className:"w-full md:w-auto",children:[A.jsx("h3",{className:"font-bold",children:ne.name}),A.jsx("p",{className:"text-sm text-slate-400",children:ne.details})]}),A.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto justify-between md:justify-end",children:[A.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${ne.status==="Aceptada"?"bg-green-500/20 text-green-400":"bg-brand-orange/20 text-brand-orange"}`,children:ne.status}),ne.status!=="Aceptada"&&A.jsx("button",{onClick:()=>Q({leadId:ne.id,name:ne.name,email:ne.email,phone:ne.phone,itemDesc:ne.details,itemQty:ne.quantity||1,price:0,deadline:""}),className:"bg-green-600 hover:bg-green-500 text-white text-xs px-3 py-2 rounded",children:"Aprobar"})]})]},ne.id))}),A.jsxs("div",{className:"flex justify-center mt-6 gap-2",children:[A.jsx("button",{disabled:Tt===0,onClick:()=>ct(ne=>ne-1),className:"px-3 py-1 bg-slate-800 rounded disabled:opacity-50",children:"Anterior"}),A.jsxs("span",{className:"px-3 py-1",children:["Pg ",Tt+1]}),A.jsx("button",{disabled:St.length<ae,onClick:()=>ct(ne=>ne+1),className:"px-3 py-1 bg-slate-800 rounded disabled:opacity-50",children:"Siguiente"})]})]}),U==="expenses"&&A.jsxs("div",{className:"space-y-6",children:[A.jsx("h2",{className:"text-3xl font-display font-bold",children:"Gastos"}),A.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700",children:[A.jsx("h3",{className:"font-bold text-lg mb-4",children:"Registrar Nuevo Gasto"}),A.jsxs("form",{onSubmit:br,className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Concepto / Material"}),A.jsx("input",{name:"concept",required:!0,placeholder:"Ej. Madera, Pintura...",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Costo"}),A.jsxs("div",{className:"relative",children:[A.jsx("span",{className:"absolute left-3 top-2 text-slate-500",children:"$"}),A.jsx("input",{name:"amount",type:"number",step:"0.01",required:!0,placeholder:"0.00",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 pl-7"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Fecha de Pago"}),A.jsx("input",{name:"date",type:"date",required:!0,className:"w-full bg-slate-900 border border-slate-600 rounded p-2"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Mtodo de Pago"}),A.jsxs("select",{name:"method",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",children:[A.jsx("option",{value:"Kueski",children:"Kueski"}),A.jsx("option",{value:"Mercadolibre",children:"MercadoLibre"}),A.jsx("option",{value:"Tarjeta",children:"Tarjeta"}),A.jsx("option",{value:"Efectivo",children:"Efectivo"}),A.jsx("option",{value:"Transferencia",children:"Transferencia"})]})]}),A.jsx("div",{className:"md:col-span-5 flex justify-end",children:A.jsxs("button",{type:"submit",className:"bg-brand-blue hover:bg-blue-600 px-6 py-2 rounded-lg font-bold flex items-center gap-2",children:[A.jsx(uv,{size:18})," Registrar Gasto"]})})]})]}),A.jsx("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center mb-4",children:A.jsxs("div",{className:"flex flex-col md:flex-row gap-4 w-full md:w-auto",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Filtrar por Fecha"}),A.jsx("input",{type:"date",value:Ne.date,onChange:ne=>It({...Ne,date:ne.target.value}),className:"bg-slate-800 border border-slate-700 rounded p-2 text-sm w-full md:w-auto"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Filtrar por Mtodo"}),A.jsxs("select",{value:Ne.method,onChange:ne=>It({...Ne,method:ne.target.value}),className:"bg-slate-800 border border-slate-700 rounded p-2 text-sm w-full md:w-auto",children:[A.jsx("option",{value:"all",children:"Ver Todos"}),A.jsx("option",{value:"Kueski",children:"Kueski"}),A.jsx("option",{value:"Mercadolibre",children:"MercadoLibre"}),A.jsx("option",{value:"Tarjeta",children:"Tarjeta"}),A.jsx("option",{value:"Efectivo",children:"Efectivo"}),A.jsx("option",{value:"Transferencia",children:"Transferencia"})]})]}),(Ne.date||Ne.method!=="all")&&A.jsx("div",{className:"flex items-end",children:A.jsx("button",{onClick:()=>It({date:"",method:"all"}),className:"text-brand-orange hover:text-orange-400 text-xs font-bold underline mb-3",children:"Limpiar Filtros"})})]})}),A.jsx("div",{className:"bg-slate-800 rounded-xl overflow-hidden border border-slate-700 overflow-x-auto",children:A.jsxs("table",{className:"w-full text-left min-w-[600px]",children:[A.jsx("thead",{className:"bg-slate-700/50 text-slate-300",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-4",children:"Concepto"}),A.jsx("th",{className:"p-4",children:"Fecha"}),A.jsx("th",{className:"p-4",children:"Mtodo"}),A.jsx("th",{className:"p-4 text-right",children:"Monto"}),A.jsx("th",{className:"p-4 text-center",children:"Acciones"})]})}),A.jsxs("tbody",{className:"divide-y divide-slate-700",children:[Wt.map(ne=>A.jsxs("tr",{className:"hover:bg-slate-700/30",children:[A.jsx("td",{className:"p-4 font-bold",children:ne.concept}),A.jsx("td",{className:"p-4 text-slate-400 text-sm",children:ne.date}),A.jsx("td",{className:"p-4 text-slate-400 text-sm",children:A.jsx("span",{className:"bg-slate-700 px-2 py-1 rounded text-xs",children:ne.method})}),A.jsxs("td",{className:"p-4 text-right font-bold text-red-400",children:["-$",parseFloat(ne.amount).toFixed(2)]}),A.jsx("td",{className:"p-4 text-center",children:A.jsx("button",{onClick:()=>R(ne.id),className:"text-slate-500 hover:text-red-400 transition-colors",children:A.jsx(td,{size:16})})})]},ne.id)),Wt.length===0&&A.jsx("tr",{children:A.jsx("td",{colSpan:"5",className:"p-8 text-center text-slate-500",children:"No hay gastos coinciden con los filtros."})})]})]})})]}),U==="calculator"&&A.jsxs("div",{children:[A.jsx("h2",{className:"text-3xl font-display font-bold mb-6",children:"Cotizador 3D"}),A.jsx(bOe,{initialData:he,onCancel:()=>Le(null)})]}),U==="saved_quotes"&&A.jsxs("div",{children:[A.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[A.jsx("h2",{className:"text-3xl font-display font-bold",children:"Historial de Cotizaciones 3D"}),A.jsxs("div",{className:"flex flex-col md:flex-row gap-2 w-full md:w-auto",children:[A.jsxs("div",{className:"relative w-full md:w-64",children:[A.jsx(WN,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",size:16}),A.jsx("input",{type:"text",placeholder:"Buscar cotizacin...",value:Ot.search,onChange:ne=>it({...Ot,search:ne.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg pl-10 pr-4 py-2 text-sm focus:outline-none focus:border-brand-blue"})]}),A.jsxs("select",{className:"bg-slate-800 border border-slate-700 rounded-lg p-2 text-sm w-full md:w-auto focus:outline-none focus:border-brand-blue",value:Ot.category,onChange:ne=>it({...Ot,category:ne.target.value}),children:[A.jsx("option",{value:"all",children:"Todas las Categoras"}),fs.filter(ne=>ne!=="all").map(ne=>A.jsx("option",{value:ne,children:ne},ne))]})]})]}),bt.size>0&&A.jsxs("div",{className:"bg-brand-blue/20 border border-brand-blue p-4 rounded-xl mb-6 flex flex-col md:flex-row items-center gap-4 animate-in fade-in slide-in-from-top-4",children:[A.jsxs("span",{className:"font-bold text-brand-blue",children:[bt.size," seleccionados"]}),A.jsxs("div",{className:"flex-1 flex gap-2 w-full md:w-auto",children:[A.jsx("input",{type:"text",placeholder:"Nueva Categora para seleccin...",value:dt,list:"batch-categories-list",onChange:ne=>pt(ne.target.value),className:"flex-1 bg-slate-900 border border-brand-blue/50 rounded-lg px-4 py-2 text-sm focus:outline-none focus:border-brand-blue"}),A.jsx("datalist",{id:"batch-categories-list",children:fs.filter(ne=>ne!=="all").map(ne=>A.jsx("option",{value:ne},ne))}),A.jsx("button",{onClick:Wo,className:"bg-brand-blue hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors whitespace-nowrap",children:"Actualizar Categora"})]})]}),A.jsx("div",{className:"bg-slate-800 rounded-xl overflow-hidden border border-slate-700 overflow-x-auto",children:A.jsxs("table",{className:"w-full text-left min-w-[800px]",children:[A.jsx("thead",{className:"bg-slate-700/50 text-slate-300",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-4 w-10",children:A.jsx("input",{type:"checkbox",onChange:ds,checked:bt.size===Tr.length&&Tr.length>0,className:"rounded border-slate-600 bg-slate-800 text-brand-orange focus:ring-brand-orange"})}),A.jsx("th",{className:"p-4 cursor-pointer hover:text-white",onClick:()=>oa("category"),children:A.jsxs("div",{className:"flex items-center gap-1",children:["Categora",tt.key==="category"&&(tt.direction==="asc"?A.jsx(rv,{size:14}):A.jsx(nv,{size:14}))]})}),A.jsx("th",{className:"p-4 cursor-pointer hover:text-white",onClick:()=>oa("name"),children:A.jsxs("div",{className:"flex items-center gap-1",children:["Pieza",tt.key==="name"&&(tt.direction==="asc"?A.jsx(rv,{size:14}):A.jsx(nv,{size:14}))]})}),A.jsx("th",{className:"p-4 cursor-pointer hover:text-white",onClick:()=>oa("date"),children:A.jsxs("div",{className:"flex items-center gap-1",children:["Fecha",tt.key==="date"&&(tt.direction==="asc"?A.jsx(rv,{size:14}):A.jsx(nv,{size:14}))]})}),A.jsx("th",{className:"p-4",children:"Peso"}),A.jsx("th",{className:"p-4",children:"Tiempo"}),A.jsx("th",{className:"p-4",children:"Costo Prod."}),A.jsx("th",{className:"p-4 text-brand-orange font-bold",children:"Precio Final"}),A.jsx("th",{className:"p-4 text-center",children:"Acciones"})]})}),A.jsxs("tbody",{className:"divide-y divide-slate-700",children:[Tr.map(ne=>{var Se,Te,_t,wt,Zt;return A.jsxs("tr",{className:`hover:bg-slate-700/30 ${bt.has(ne.id)?"bg-brand-blue/10":""}`,children:[A.jsx("td",{className:"p-4",children:A.jsx("input",{type:"checkbox",checked:bt.has(ne.id),onChange:()=>la(ne.id),className:"rounded border-slate-600 bg-slate-800 text-brand-orange focus:ring-brand-orange"})}),A.jsx("td",{className:"p-4",children:A.jsxs("div",{className:"flex flex-wrap gap-1",children:[(Array.isArray(ne.category)?ne.category:[ne.category]).filter(Boolean).map((Yn,dn)=>A.jsx("span",{className:"bg-slate-700 px-2 py-1 rounded text-xs font-bold text-slate-300 whitespace-nowrap",children:Yn},dn)),(!ne.category||Array.isArray(ne.category)&&ne.category.length===0)&&A.jsx("span",{className:"text-slate-500 text-xs italic",children:"N/A"})]})}),A.jsx("td",{className:"p-4 font-bold text-white",children:ne.name}),A.jsx("td",{className:"p-4 text-sm text-slate-400",children:new Date(ne.date).toLocaleDateString()}),A.jsxs("td",{className:"p-4 text-sm text-slate-300",children:[(Se=ne.params)==null?void 0:Se.weight,"g"]}),A.jsxs("td",{className:"p-4 text-sm text-slate-300",children:[(Te=ne.params)==null?void 0:Te.timeHours,"h ",(_t=ne.params)==null?void 0:_t.timeMinutes,"m"]}),A.jsx("td",{className:"p-4 font-mono text-slate-400 text-xs",children:new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(((wt=ne.costs)==null?void 0:wt.total)||0)}),A.jsx("td",{className:"p-4 font-mono font-bold text-brand-orange",children:new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(((Zt=ne.costs)==null?void 0:Zt.suggested)||0)}),A.jsx("td",{className:"p-4 text-center",children:A.jsxs("div",{className:"flex justify-center gap-2",children:[A.jsx("button",{onClick:()=>ho(ne),className:"p-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-blue-400",title:"Editar",children:A.jsx(TR,{size:16})}),A.jsx("button",{onClick:()=>ye({type:"quote",data:ne}),className:"p-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-brand-orange",title:"Ver Detalles",children:A.jsx(AR,{size:16})}),A.jsx("button",{onClick:()=>{confirm("Borrar cotizacin?")&&O(ne.id)},className:"p-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-red-400",title:"Eliminar",children:A.jsx(td,{size:16})})]})})]},ne.id)}),Tr.length===0&&A.jsx("tr",{children:A.jsx("td",{colSpan:"9",className:"p-8 text-center text-slate-500",children:"No hay cotizaciones guardadas."})})]})]})})]})]}),J&&A.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:A.jsxs("form",{onSubmit:qi,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-2xl border border-slate-700 max-h-[90vh] overflow-y-auto",children:[A.jsx("h3",{className:"text-xl font-bold mb-4",children:Me?"Editar Pedido":"Nuevo Pedido"}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"bg-black/20 p-4 rounded-xl",children:[A.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Cliente"}),A.jsxs("select",{name:"clientId",defaultValue:Me?(Ft=e.find(ne=>ne.id===Me))==null?void 0:Ft.clientId:"",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 mb-2",onChange:ne=>{if(ne.target.value==="new")document.getElementById("newClientFields").style.display="block";else{document.getElementById("newClientFields").style.display="none";const Se=n.find(Te=>Te.id===ne.target.value);Se&&Se.address&&(document.getElementById("deliveryInput").value=Se.address)}},children:[A.jsx("option",{value:"",children:"-- Seleccionar Cliente --"}),A.jsx("option",{value:"new",children:"+ Crear Nuevo Cliente"}),n.map(ne=>A.jsxs("option",{value:ne.id,children:[ne.name," (",ne.type,")"]},ne.id))]}),A.jsxs("div",{id:"newClientFields",style:{display:"none"},className:"space-y-2 mt-2 border-t border-slate-600 pt-2",children:[A.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[A.jsx("input",{name:"newClientName",placeholder:"Nombre Completo",className:"bg-slate-900 border border-slate-600 rounded p-2"}),A.jsx("input",{name:"newClientContact",placeholder:"Email",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),A.jsx("input",{name:"newClientPhone",placeholder:"Telfono",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),A.jsx("h4",{className:"text-xs text-gray-400 font-bold uppercase mt-1",children:"Direccin"}),A.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[A.jsx("input",{name:"newClientStreet",placeholder:"Calle y Nmero",className:"bg-slate-900 border border-slate-600 rounded p-2"}),A.jsx("input",{name:"newClientColony",placeholder:"Colonia",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[A.jsx("input",{name:"newClientZip",placeholder:"C.P.",className:"bg-slate-900 border border-slate-600 rounded p-2"}),A.jsx("input",{name:"newClientState",placeholder:"Estado",className:"bg-slate-900 border border-slate-600 rounded p-2"})]})]})]}),A.jsxs("div",{className:"bg-black/20 p-4 rounded-xl",children:[A.jsxs("div",{className:"flex justify-between items-center mb-2",children:[A.jsx("label",{className:"block text-xs text-slate-400 font-bold uppercase",children:"Productos"}),A.jsxs("button",{type:"button",onClick:ht,className:"text-xs text-brand-blue hover:underline flex items-center gap-1",children:[A.jsx(uv,{size:12})," Agregar"]})]}),A.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto pr-2",children:mt.map((ne,Se)=>A.jsxs("div",{className:"flex gap-2 items-center",children:[A.jsx("input",{placeholder:"Descripcin",value:ne.desc,onChange:Te=>Qe(Se,"desc",Te.target.value),className:"flex-1 bg-slate-900 border border-slate-600 rounded p-2 text-sm",required:!0}),A.jsx("input",{type:"number",placeholder:"Cant",value:ne.qty,onChange:Te=>Qe(Se,"qty",Te.target.value),className:"w-16 bg-slate-900 border border-slate-600 rounded p-2 text-sm",required:!0,min:"1"}),A.jsx("input",{type:"number",placeholder:"$ Unit",value:ne.price,onChange:Te=>Qe(Se,"price",Te.target.value),className:"w-24 bg-slate-900 border border-slate-600 rounded p-2 text-sm",required:!0}),mt.length>1&&A.jsx("button",{type:"button",onClick:()=>st(Se),className:"text-red-400 hover:text-red-300",children:A.jsx(td,{size:16})})]},Se))})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Totales"}),A.jsxs("div",{className:"bg-slate-900 p-3 rounded-xl border border-slate-600",children:[A.jsxs("div",{className:"flex justify-between mb-1 text-sm",children:[A.jsx("span",{children:"Subtotal:"}),A.jsxs("span",{className:"font-bold",children:["$",De.toFixed(2)]})]}),A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("span",{className:"text-xs text-gray-400",children:"Anticipo:"}),A.jsx("input",{name:"advance",type:"number",defaultValue:Me?(jt=e.find(ne=>ne.id===Me))==null?void 0:jt.advance:"0",className:"w-24 bg-black/50 border border-slate-700 rounded p-1 text-right text-sm"})]}),A.jsxs("div",{className:"flex justify-between items-center mt-2 pt-2 border-t border-slate-700",children:[A.jsx("span",{className:"text-xs text-gray-400",children:"Fecha Entrega:"}),A.jsx("input",{name:"deadline",type:"date",defaultValue:Me?(Ht=e.find(ne=>ne.id===Me))==null?void 0:Ht.deadline:"",className:"w-32 bg-black/50 border border-slate-700 rounded p-1 text-right text-sm"})]}),A.jsxs("div",{className:"flex justify-between items-center mt-2 pt-2 border-t border-slate-700",children:[A.jsx("span",{className:"text-xs text-gray-400",children:"Evidencia:"}),A.jsx("input",{name:"orderImage",type:"file",accept:"image/*",className:"w-32 text-xs text-slate-500 file:py-1 file:px-2 file:rounded-full file:border-0 file:text-xs file:bg-brand-blue file:text-white hover:file:bg-blue-600"})]})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Entrega"}),A.jsx("textarea",{id:"deliveryInput",name:"delivery",defaultValue:Me?(Dt=e.find(ne=>ne.id===Me))==null?void 0:Dt.deliveryLocation:"",placeholder:"Direccin de entrega...",className:"w-full h-20 bg-slate-900 border border-slate-600 rounded p-2 text-sm resize-none mb-4",required:!0}),A.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Link de Evidencia (Drive/Fotos)"}),A.jsx("input",{name:"evidenceLink",type:"url",placeholder:"https://drive.google.com/...",defaultValue:Me?(Yt=e.find(ne=>ne.id===Me))==null?void 0:Yt.evidenceLink:"",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-sm text-blue-400"})]})]})]}),A.jsxs("div",{className:"flex justify-end gap-3 mt-6 border-t border-slate-700 pt-4",children:[A.jsx("button",{type:"button",onClick:()=>W(!1),className:"text-slate-400 hover:text-white",disabled:j,children:"Cancelar"}),A.jsx("button",{type:"submit",className:`px-6 py-2 rounded font-bold text-white transition-all flex items-center gap-2
                                    ${j?"bg-slate-600 cursor-not-allowed":"bg-brand-blue hover:bg-blue-600"}`,disabled:j,children:j?A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardando..."]}):`${Me?"Actualizar Pedido":"Crear Pedido"} ($${De.toFixed(2)})`})]})]})}),$&&A.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:A.jsxs("form",{onSubmit:kr,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-md border border-slate-700",children:[A.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo Cliente"}),A.jsxs("div",{className:"space-y-3",children:[A.jsx("input",{name:"name",placeholder:"Nombre Completo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0}),A.jsx("input",{name:"email",placeholder:"Correo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),A.jsx("input",{name:"phone",placeholder:"Telfono",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),A.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[A.jsx("input",{name:"facebook",placeholder:"Facebook",className:"bg-slate-900 border border-slate-600 rounded p-2"}),A.jsx("input",{name:"instagram",placeholder:"Instagram",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),A.jsx("h4",{className:"text-xs text-gray-400 font-bold uppercase mt-2",children:"Direccin"}),A.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[A.jsx("input",{name:"street",placeholder:"Calle y Nmero",className:"bg-slate-900 border border-slate-600 rounded p-2"}),A.jsx("input",{name:"colony",placeholder:"Colonia",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[A.jsx("input",{name:"zip",placeholder:"C.P.",className:"bg-slate-900 border border-slate-600 rounded p-2"}),A.jsx("input",{name:"state",placeholder:"Estado",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs mb-1 text-slate-400",children:"Tipo de Cliente"}),A.jsxs("select",{name:"type",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",children:[A.jsx("option",{value:"normal",children:"Normal"}),A.jsx("option",{value:"mayorista",children:"Mayorista (10% Desc)"}),A.jsx("option",{value:"distribuidor",children:"Distribuidor (25% Desc)"})]})]})]}),A.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[A.jsx("button",{type:"button",onClick:()=>se(!1),className:"text-slate-400",children:"Cancelar"}),A.jsx("button",{type:"submit",className:"bg-brand-blue px-4 py-2 rounded font-bold",children:"Guardar"})]})]})}),V&&A.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:A.jsxs("form",{onSubmit:ca,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-2xl border border-slate-700 max-h-[90vh] overflow-y-auto",children:[A.jsx("h3",{className:"text-xl font-bold mb-4",children:"Aprobar Cotizacin & Crear Pedido"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"space-y-3",children:[A.jsx("h4",{className:"text-xs text-brand-blue font-bold uppercase border-b border-brand-blue/30 pb-1",children:"Datos del Cliente"}),A.jsx("input",{name:"name",defaultValue:V.name,placeholder:"Nombre Completo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0}),A.jsx("input",{name:"email",defaultValue:V.email,placeholder:"Correo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),A.jsx("input",{name:"phone",defaultValue:V.phone,placeholder:"Telfono",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0}),A.jsxs("div",{className:"bg-black/20 p-2 rounded",children:[A.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Direccin (Opcional)"}),A.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[A.jsx("input",{name:"street",placeholder:"Calle y Nm",className:"bg-slate-900 border border-slate-600 rounded p-2 text-sm"}),A.jsx("input",{name:"colony",placeholder:"Colonia",className:"bg-slate-900 border border-slate-600 rounded p-2 text-sm"})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[A.jsx("input",{name:"zip",placeholder:"C.P.",className:"bg-slate-900 border border-slate-600 rounded p-2 text-sm"}),A.jsx("input",{name:"state",placeholder:"Estado",className:"bg-slate-900 border border-slate-600 rounded p-2 text-sm"})]})]})]}),A.jsxs("div",{className:"space-y-3",children:[A.jsx("h4",{className:"text-xs text-brand-orange font-bold uppercase border-b border-brand-orange/30 pb-1",children:"Datos del Pedido"}),A.jsxs("div",{children:[A.jsx("label",{className:"text-xs text-gray-400",children:"Producto / Descripcin"}),A.jsx("textarea",{name:"itemDesc",defaultValue:V.itemDesc,className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-sm h-20 resize-none",required:!0})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"text-xs text-gray-400",children:"Cantidad"}),A.jsx("input",{name:"itemQty",type:"number",defaultValue:V.itemQty,className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0})]}),A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"text-xs text-gray-400",children:"Precio Unit."}),A.jsx("input",{name:"itemPrice",type:"number",step:"0.01",placeholder:"$0.00",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",onChange:ne=>{const Se=parseFloat(ne.target.value)||0,Te=parseFloat(document.querySelector('input[name="itemQty"]').value)||1;document.getElementById("approvalTotal").value=(Se*Te).toFixed(2)},required:!0})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-xs text-gray-400",children:"Total del Pedido"}),A.jsx("input",{id:"approvalTotal",name:"total",readOnly:!0,className:"w-full bg-black/40 border border-slate-600 rounded p-2 font-bold text-white"})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"text-xs text-gray-400",children:"Anticipo"}),A.jsx("input",{name:"advance",type:"number",defaultValue:"0",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"})]}),A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"text-xs text-gray-400",children:"Fecha Entrega"}),A.jsx("input",{name:"deadline",type:"date",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"})]})]})]})]}),A.jsxs("div",{className:"flex justify-end gap-3 mt-6 border-t border-slate-700 pt-4",children:[A.jsx("button",{type:"button",onClick:()=>Q(null),className:"text-slate-400 hover:text-white",children:"Cancelar"}),A.jsx("button",{type:"submit",className:"bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded font-bold",children:"Generar Pedido"})]})]})}),de&&A.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:A.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl w-full max-w-sm border border-slate-700 text-center",children:[A.jsx("h3",{className:"text-xl font-bold mb-4",children:"Evidencia del Pedido"}),A.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Sube una foto de cmo va el pedido o cmo qued (Max 1MB)."}),A.jsx("input",{type:"file",accept:"image/*",onChange:$o,className:`block w-full text-sm text-slate-500
                            file:mr-4 file:py-2 file:px-4
                            file:rounded-full file:border-0
                            file:text-sm file:font-semibold
                            file:bg-brand-blue file:text-white
                            hover:file:bg-blue-600 mb-6`}),A.jsx("button",{onClick:()=>ve(null),className:"text-slate-400 text-sm",children:"Cancelar"})]})}),pe&&A.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:A.jsxs("div",{className:"bg-slate-800 p-8 rounded-2xl w-full max-w-2xl border border-slate-700 shadow-2xl relative max-h-[90vh] overflow-y-auto",children:[A.jsx("button",{onClick:()=>ye(null),className:"absolute top-4 right-4 text-slate-400 hover:text-white",children:A.jsx(td,{size:20,className:"rotate-45"})}),A.jsxs("h3",{className:"text-2xl font-bold mb-6 text-white flex items-center gap-2",children:[pe.type==="order"?A.jsx(Gv,{className:"text-brand-blue"}):A.jsx(Tag,{className:"text-brand-orange"}),"Detalle de ",pe.type==="order"?"Pedido":"Cotizacin"]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-1",children:"Cliente"}),A.jsx("p",{className:"text-white text-lg font-bold",children:pe.type==="order"?(En=n.find(ne=>ne.id===pe.data.clientId))==null?void 0:En.name:pe.data.name}),A.jsx("p",{className:"text-sm text-gray-400",children:pe.type==="order"?(rr=n.find(ne=>ne.id===pe.data.clientId))==null?void 0:rr.email:pe.data.email})]}),pe.data.items&&pe.data.items.length>0&&A.jsxs("div",{children:[A.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-2",children:"Desglose de Artculos"}),A.jsx("div",{className:"bg-black/30 rounded-lg p-3 space-y-2",children:pe.data.items.map((ne,Se)=>A.jsxs("div",{className:"flex justify-between text-sm",children:[A.jsxs("span",{className:"text-slate-200",children:[ne.qty,"x ",ne.desc]}),ne.price&&A.jsxs("span",{className:"text-slate-500",children:["$",ne.price]})]},Se))})]}),!pe.data.items&&A.jsxs("div",{children:[A.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-1",children:"Descripcin"}),A.jsx("p",{className:"text-slate-300",children:pe.data.desc||pe.data.details}),A.jsxs("p",{className:"text-slate-300 text-sm mt-1",children:["Cantidad: ",pe.data.quantity||1]})]}),pe.type==="order"&&A.jsxs("div",{className:"bg-brand-blue/10 p-4 rounded-xl border border-brand-blue/30",children:[A.jsxs("div",{className:"flex justify-between mb-1",children:[A.jsx("span",{className:"text-gray-400",children:"Total"}),A.jsxs("span",{className:"text-white font-bold",children:["$",pe.data.total]})]}),A.jsxs("div",{className:"flex justify-between mb-1",children:[A.jsx("span",{className:"text-gray-400",children:"Anticipo"}),A.jsxs("span",{className:"text-green-400 font-bold",children:["-$",pe.data.advance]})]}),A.jsxs("div",{className:"border-t border-white/10 pt-2 flex justify-between",children:[A.jsx("span",{className:"text-brand-orange font-bold",children:"Restante"}),A.jsxs("span",{className:"text-brand-orange font-bold text-xl",children:["$",pe.data.remaining]})]})]})]}),A.jsxs("div",{className:"space-y-4",children:[pe.data.progressImage&&A.jsxs("div",{children:[A.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-2",children:"Evidencia / Progreso"}),A.jsx("img",{src:pe.data.progressImage,className:"w-full rounded-xl border border-slate-600"})]}),pe.data.refType==="link"&&pe.data.refLink&&A.jsxs("div",{children:[A.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-2",children:"Referencia"}),A.jsx("a",{href:pe.data.refLink,target:"_blank",className:"text-brand-blue underline break-all text-sm",children:pe.data.refLink})]})]})]}),A.jsx("div",{className:"mt-8 pt-6 border-t border-slate-700 flex justify-end",children:A.jsx("button",{onClick:()=>ye(null),className:"px-6 py-2 rounded bg-slate-700 hover:bg-slate-600 text-white",children:"Cerrar"})})]})}),Ee&&A.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:A.jsxs("form",{onSubmit:Ni,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-md border border-slate-700",children:[A.jsx("h3",{className:"text-xl font-bold mb-4",children:"Editar Cliente"}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{className:"bg-black/20 p-3 rounded border border-slate-700",children:[A.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Nombre"}),A.jsx("input",{name:"name",defaultValue:Ee.name,className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0})]}),A.jsxs("div",{className:"bg-black/20 p-3 rounded border border-slate-700",children:[A.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Contacto"}),A.jsx("input",{name:"email",defaultValue:Ee.email,placeholder:"Correo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 mb-2"}),A.jsx("input",{name:"phone",defaultValue:Ee.phone,placeholder:"Telfono",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),A.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[A.jsx("input",{name:"facebook",defaultValue:Ee.facebook,placeholder:"Facebook",className:"bg-slate-900 border border-slate-600 rounded p-2"}),A.jsx("input",{name:"instagram",defaultValue:Ee.instagram,placeholder:"Instagram",className:"bg-slate-900 border border-slate-600 rounded p-2"})]})]}),A.jsxs("div",{className:"bg-black/20 p-3 rounded border border-slate-700",children:[A.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Direccin"}),A.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[A.jsx("input",{name:"street",defaultValue:Ee.street,placeholder:"Calle y Nmero",className:"bg-slate-900 border border-slate-600 rounded p-2"}),A.jsx("input",{name:"colony",defaultValue:Ee.colony,placeholder:"Colonia",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[A.jsx("input",{name:"zip",defaultValue:Ee.zip,placeholder:"C.P.",className:"bg-slate-900 border border-slate-600 rounded p-2"}),A.jsx("input",{name:"state",defaultValue:Ee.state,placeholder:"Estado",className:"bg-slate-900 border border-slate-600 rounded p-2"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs mb-1 text-slate-400",children:"Tipo de Cliente"}),A.jsxs("select",{name:"type",defaultValue:Ee.type,className:"w-full bg-slate-900 border border-slate-600 rounded p-2",children:[A.jsx("option",{value:"normal",children:"Normal"}),A.jsx("option",{value:"mayorista",children:"Mayorista (10% Desc)"}),A.jsx("option",{value:"distribuidor",children:"Distribuidor (25% Desc)"})]})]})]}),A.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[A.jsx("button",{type:"button",onClick:()=>Xe(null),className:"text-slate-400",children:"Cancelar"}),A.jsx("button",{type:"submit",className:"bg-brand-blue px-4 py-2 rounded font-bold",children:"Guardar Cambios"})]})]})}),ce&&A.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:A.jsxs("form",{onSubmit:Gi,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-lg border border-slate-700",children:[A.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nueva Cotizacin"}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Cliente"}),A.jsxs("select",{name:"clientId",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 mb-2",onChange:ne=>re(ne.target.value==="manual"),children:[A.jsx("option",{value:"manual",children:"-- Cliente Manual / Nuevo --"}),n.map(ne=>A.jsx("option",{value:ne.id,children:ne.name},ne.id))]}),Z&&A.jsxs("div",{className:"space-y-2 border-t border-slate-600 pt-2",children:[A.jsx("input",{name:"manualName",placeholder:"Nombre Cliente",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0}),A.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[A.jsx("input",{name:"manualEmail",placeholder:"Correo",className:"bg-slate-900 border border-slate-600 rounded p-2"}),A.jsx("input",{name:"manualPhone",placeholder:"Telfono",className:"bg-slate-900 border border-slate-600 rounded p-2",required:!0})]})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Detalles"}),A.jsx("textarea",{name:"details",placeholder:"Describe lo que el cliente quiere cotizar...",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 h-24 resize-none",required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Cantidad"}),A.jsx("input",{name:"quantity",type:"number",defaultValue:"1",className:"w-24 bg-slate-900 border border-slate-600 rounded p-2",required:!0})]})]}),A.jsxs("div",{className:"flex justify-end gap-3 mt-6 border-t border-slate-700 pt-4",children:[A.jsx("button",{type:"button",onClick:()=>fe(!1),className:"text-slate-400",children:"Cancelar"}),A.jsx("button",{type:"submit",className:"bg-brand-blue px-6 py-2 rounded font-bold hover:bg-blue-600",children:"Crear Cotizacin"})]})]})}),me&&A.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:A.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl w-full max-w-2xl border border-slate-700 max-h-[85vh] overflow-y-auto",children:[A.jsxs("div",{className:"flex justify-between items-start mb-6",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"text-xl font-bold",children:"Historial de Pedidos"}),A.jsx("p",{className:"text-slate-400",children:me.name})]}),A.jsx("button",{onClick:()=>qe(null),className:"p-1 hover:bg-slate-700 rounded-full",children:A.jsx(c_,{size:20})})]}),A.jsx("div",{className:"bg-slate-900 rounded-xl overflow-hidden border border-slate-700",children:A.jsxs("table",{className:"w-full text-left font-sm",children:[A.jsx("thead",{className:"bg-slate-800 text-slate-300",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-3",children:"ID"}),A.jsx("th",{className:"p-3",children:"Fecha"}),A.jsx("th",{className:"p-3",children:"Artculos"}),A.jsx("th",{className:"p-3",children:"Pagos"}),A.jsx("th",{className:"p-3",children:"Estatus"})]})}),A.jsxs("tbody",{className:"divide-y divide-slate-700",children:[e.filter(ne=>ne.clientId===me.id).map(ne=>A.jsxs("tr",{className:"hover:bg-slate-800",children:[A.jsxs("td",{className:"p-3 text-xs text-slate-500 align-top",children:["#",ne.id.slice(-4)]}),A.jsx("td",{className:"p-3 text-sm align-top whitespace-nowrap",children:ne.date}),A.jsx("td",{className:"p-3 align-top min-w-[200px]",children:ne.items&&ne.items.length>0?A.jsx("div",{className:"space-y-1",children:ne.items.map((Se,Te)=>A.jsxs("div",{className:"text-sm",children:[A.jsxs("span",{className:"text-slate-300 font-bold",children:[Se.qty,"x"]})," ",Se.desc,Se.price&&A.jsxs("span",{className:"text-slate-500 text-xs ml-1",children:["($",Se.price,")"]})]},Te))}):A.jsx("span",{className:"text-slate-500 text-sm",children:ne.desc||ne.details})}),A.jsxs("td",{className:"p-3 align-top min-w-[150px]",children:[A.jsxs("div",{className:"flex justify-between text-sm",children:[A.jsx("span",{className:"text-slate-400",children:"Total:"}),A.jsxs("span",{className:"font-bold",children:["$",ne.total]})]}),A.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[A.jsx("span",{className:"text-slate-500",children:"Anticipo:"}),A.jsxs("span",{className:"text-green-500",children:["-$",ne.advance||0]})]}),A.jsxs("div",{className:"flex justify-between text-xs mt-1 border-t border-slate-700 pt-1",children:[A.jsx("span",{className:"text-slate-400",children:"Resta:"}),A.jsxs("span",{className:`font-bold ${ne.remaining>0||ne.total-(ne.advance||0)>0?"text-brand-orange":"text-slate-500"}`,children:["$",ne.remaining??ne.total-(ne.advance||0)]})]})]}),A.jsx("td",{className:"p-3 align-top",children:A.jsx("span",{className:`text-xs px-2 py-1 rounded uppercase font-bold border ${k(ne.status)}`,children:ne.status})})]},ne.id)),e.filter(ne=>ne.clientId===me.id).length===0&&A.jsx("tr",{children:A.jsx("td",{colSpan:"5",className:"p-6 text-center text-slate-500",children:"Este cliente no tiene pedidos registrados."})})]})]})})]})})]})},Tm=({id:n,icon:e,label:t,active:r,set:i})=>A.jsxs("button",{onClick:()=>i(n),className:`w-full text-left px-4 py-3 rounded-lg flex items-center gap-3 transition-colors ${r===n?"bg-slate-700 text-white":"text-slate-400 hover:bg-slate-800"}`,children:[e," ",A.jsx("span",{children:t})]}),kh=({title:n,value:e,icon:t,color:r="text-white"})=>A.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700 flex flex-col justify-between",children:[A.jsxs("div",{className:"flex justify-between items-start mb-2",children:[A.jsx("h3",{className:"text-slate-400 text-xs font-bold uppercase",children:n}),t]}),A.jsx("p",{className:`text-3xl font-bold ${r}`,children:e})]}),_Oe=()=>{const{addLead:n}=QM(),[e,t]=G.useState({name:"",email:"",phone:"",quantity:1,details:""}),[r,i]=G.useState(!1),[a,s]=G.useState(!1),o=f=>{const{id:d,value:p}=f.target;t(v=>({...v,[d]:p}))},c=async f=>{if(f.preventDefault(),!r){i(!0);try{const d=n({...e,imageUrl:null});let p=` *Nueva Solicitud de Cotizacin*

`;p+=` *Nombre:* ${e.name}
`,p+=` *Correo:* ${e.email}
`,e.phone&&(p+=` *Telfono:* ${e.phone}
`),p+=` *Piezas:* ${e.quantity}
`,e.details&&(p+=` *Detalles:* ${e.details}
`),d&&d.id&&(p+=`
ID: ${d.id}`),window.open(`https://wa.me/525619956812?text=${encodeURIComponent(p)}`,"_blank"),s(!0),t({name:"",email:"",phone:"",quantity:1,details:""})}catch(d){console.error("Error submitting quote:",d);const p=d.code?`${d.code}: ${d.message}`:d.message;alert(`Error al enviar: ${p}`)}finally{i(!1)}}};return A.jsxs("div",{className:"bg-brand-dark min-h-screen text-slate-100 font-sans py-20 px-4 relative overflow-hidden",children:[A.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none",children:[A.jsx("div",{className:"absolute top-1/4 -right-20 w-96 h-96 bg-brand-orange/10 rounded-full blur-3xl animate-pulse"}),A.jsx("div",{className:"absolute bottom-1/4 -left-20 w-96 h-96 bg-brand-blue/10 rounded-full blur-3xl animate-pulse delay-1000"})]}),A.jsxs("div",{className:"max-w-2xl mx-auto",children:[A.jsxs(ol,{to:"/",className:"inline-flex items-center text-gray-400 hover:text-white mb-8 transition-colors",children:[A.jsx(IM,{className:"mr-2",size:20})," Volver al Inicio"]}),A.jsxs("div",{className:"glass p-8 md:p-10 rounded-3xl shadow-2xl",children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsxs("h1",{className:"font-display text-4xl font-bold mb-4",children:["Cotiza tu ",A.jsx("span",{className:"text-brand-blue",children:"Proyecto"})]}),A.jsx("p",{className:"text-gray-400",children:"Cuntanos tu idea para imprimirla en 3D."})]}),a&&A.jsxs("div",{className:"bg-green-500/20 border border-green-500/50 text-green-400 p-4 rounded-xl mb-6 text-center animate-fade-in",children:[A.jsx("p",{className:"font-bold",children:"Cotizacin creada con xito!"}),A.jsx("p",{className:"text-sm",children:"Te hemos redirigido a WhatsApp para continuar."})]}),A.jsxs("form",{onSubmit:c,className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre Completo"}),A.jsx("input",{type:"text",id:"name",required:!0,value:e.name,onChange:o,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Correo Electrnico"}),A.jsx("input",{type:"email",id:"email",required:!0,value:e.email,onChange:o,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Telfono / WhatsApp"}),A.jsx("input",{type:"tel",id:"phone",value:e.phone,onChange:o,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nmero de piezas"}),A.jsx("input",{type:"number",id:"quantity",min:"1",required:!0,value:e.quantity,onChange:o,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Detalles Adicionales"}),A.jsx("textarea",{id:"details",rows:"3",value:e.details,onChange:o,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]}),A.jsx("button",{type:"submit",disabled:r,className:`w-full bg-brand-blue hover:bg-blue-600 text-white font-bold py-4 rounded-xl shadow-lg shadow-blue-500/30 transition-all hover:scale-[1.01] ${r?"opacity-50 cursor-not-allowed":""}`,children:r?"Procesando...":"Continuar en WhatsApp"})]})]})]})]})},dV=()=>{const{addOrder:n,addClient:e,clients:t}=QM(),r=EV(),[i,a]=G.useState(""),[s,o]=G.useState(""),[c,f]=G.useState(""),[d,p]=G.useState([{desc:"",qty:1,price:""}]),v=G.useMemo(()=>d.reduce((w,R)=>w+parseFloat(R.price||0)*parseFloat(R.qty||1),0),[d]),y=()=>{p([...d,{desc:"",qty:1,price:""}])},x=w=>{p(d.filter((R,N)=>N!==w))},E=(w,R,N)=>{const O=[...d];O[w][R]=N,p(O)},S=async w=>{w.preventDefault();let R=null;const N=s.trim().toLowerCase(),O=t.find(z=>z.email&&z.email.toLowerCase()===N||z.phone&&z.phone===N);O?R=O.id:R=(await e({name:i||"Cliente Mostrador",email:s.includes("@")?s:"",phone:s.includes("@")?"":s,type:"normal",address:"En Tienda",street:"En Tienda",colony:"",zip:"",state:""})).id,await n({clientId:R,items:d.map(z=>({...z,price:parseFloat(z.price).toFixed(2)})),total:v.toFixed(2),advance:v.toFixed(2),deliveryLocation:"Entregado en Tienda",status:"entregado",date:new Date().toLocaleDateString("es-MX"),deadline:c||new Date().toISOString().split("T")[0]}),alert("Venta registrada con xito!"),r("/admin")};return A.jsx("div",{className:"min-h-screen bg-slate-900 text-slate-100 font-sans p-6 md:p-12",children:A.jsxs("div",{className:"max-w-3xl mx-auto",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[A.jsx(ol,{to:"/admin",className:"p-2 bg-slate-800 rounded-full hover:bg-slate-700 transition-colors",children:A.jsx(IM,{size:24})}),A.jsxs("h1",{className:"text-3xl font-display font-bold flex items-center gap-3",children:[A.jsx($9,{className:"text-brand-orange"}),"Registro de Venta ",A.jsx("span",{className:"text-slate-500 font-normal text-xl",children:"| Mostrador"})]})]}),A.jsxs("form",{onSubmit:S,className:"bg-slate-800 p-8 rounded-2xl border border-slate-700 shadow-2xl",children:[A.jsxs("div",{className:"mb-8",children:[A.jsx("h2",{className:"text-xs font-bold text-brand-blue uppercase tracking-wider mb-4 border-b border-brand-blue/20 pb-2",children:"Datos del Cliente"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Nombre Cliente"}),A.jsx("input",{type:"text",required:!0,className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 focus:border-brand-blue focus:outline-none transition-colors",placeholder:"Ej. Juan Prez",value:i,onChange:w=>a(w.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Contacto (Email / Tel)"}),A.jsx("input",{type:"text",className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 focus:border-brand-blue focus:outline-none transition-colors",placeholder:"Opcional",value:s,onChange:w=>o(w.target.value)})]})]})]}),A.jsxs("div",{className:"mb-8",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-white/10 pb-2",children:[A.jsx("h2",{className:"text-xs font-bold text-brand-orange uppercase tracking-wider",children:"Productos"}),A.jsxs("button",{type:"button",onClick:y,className:"text-xs bg-slate-700 hover:bg-slate-600 px-3 py-1 rounded-full flex items-center gap-1 transition-colors",children:[A.jsx(uv,{size:14})," Agregar Producto"]})]}),A.jsx("div",{className:"space-y-3",children:d.map((w,R)=>A.jsxs("div",{className:"flex gap-3 items-start animate-fade-in-up",children:[A.jsx("div",{className:"flex-1",children:A.jsx("input",{type:"text",placeholder:"Descripcin del producto...",required:!0,className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 text-sm focus:border-brand-orange focus:outline-none transition-colors",value:w.desc,onChange:N=>E(R,"desc",N.target.value)})}),A.jsx("div",{className:"w-20",children:A.jsx("input",{type:"number",placeholder:"Cant.",required:!0,min:"1",className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 text-sm text-center focus:border-brand-orange focus:outline-none transition-colors",value:w.qty,onChange:N=>E(R,"qty",N.target.value)})}),A.jsxs("div",{className:"w-32 relative",children:[A.jsx("span",{className:"absolute left-3 top-3 text-slate-500",children:"$"}),A.jsx("input",{type:"number",placeholder:"0.00",required:!0,step:"0.50",className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 pl-6 text-sm text-right focus:border-brand-orange focus:outline-none transition-colors",value:w.price,onChange:N=>E(R,"price",N.target.value)})]}),d.length>1&&A.jsx("button",{type:"button",onClick:()=>x(R),className:"p-3 text-red-400 hover:bg-red-400/10 rounded-lg transition-colors",children:A.jsx(td,{size:18})})]},R))})]}),A.jsxs("div",{className:"bg-slate-900 p-6 rounded-xl flex flex-col md:flex-row justify-between items-center gap-6",children:[A.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm",children:[A.jsx(l_,{size:16}),A.jsxs("span",{children:["La venta se registrar como ",A.jsx("strong",{children:"ENTREGADA"})," y pagada al 100%."]})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("label",{className:"text-sm text-slate-400",children:"Entrega:"}),A.jsx("input",{type:"date",className:"bg-slate-800 border border-slate-600 rounded p-2 text-white text-sm focus:border-brand-blue outline-none",value:c,onChange:w=>f(w.target.value)})]}),A.jsxs("div",{className:"flex items-center gap-6",children:[A.jsxs("div",{className:"text-right",children:[A.jsx("span",{className:"block text-xs text-slate-400 uppercase font-bold",children:"Total a Pagar"}),A.jsxs("span",{className:"text-3xl font-display font-bold text-white",children:["$",v.toFixed(2)]})]}),A.jsxs("button",{type:"submit",className:"bg-brand-blue hover:bg-blue-500 text-white px-8 py-4 rounded-xl font-bold text-lg shadow-lg shadow-blue-500/20 hover:scale-[1.02] transition-all flex items-center gap-2",children:[A.jsx(l_,{size:24})," Registrar Venta"]})]})]})]})]})})},SOe=()=>{const[n,e]=G.useState(""),[t,r]=G.useState(null),[i,a]=G.useState(""),[s,o]=G.useState(!1),c=async f=>{f.preventDefault(),a(""),r(null),o(!0);const d=n.trim().replace(/^#/,""),p=d.toLowerCase();if(!d){o(!1);return}try{let v=[];const y=km(Ja,"clients"),x=km(Ja,"orders"),E=Fw(y,zw("email","==",p)),S=Fw(y,zw("phone","==",d)),[w,R]=await Promise.all([jw(E),jw(S)]);let N=new Set;if(w.forEach(O=>N.add(O.id)),R.forEach(O=>N.add(O.id)),N.size>0){const O=Array.from(N),z=Fw(x,zw("clientId","in",O));(await jw(z)).forEach(U=>{v.push({id:U.id,...U.data()})})}if(v.length===0){const O=Lc(Ja,"orders",d),z=await Hhe(O);if(z.exists())v.push({id:z.id,...z.data()});else{const k=Fw(x,zw("shortId","==",d));(await jw(k)).forEach(P=>{v.push({id:P.id,...P.data()})})}}v.length>0?r(v.reverse()):a("No se encontraron pedidos. Verifica ID (completo o ltimos 4), Correo o Telfono. Si tu pedido es antiguo, contacta a soporte.")}catch(v){console.error("Search error:",v),a("Error al buscar. Verifica tu conexin o intenta nuevamente.")}finally{o(!1)}};return A.jsxs("div",{className:"min-h-screen bg-brand-dark text-slate-100 font-sans flex flex-col items-center p-6 md:justify-center",children:[A.jsx("div",{className:"w-full max-w-2xl mb-8 flex justify-start",children:A.jsx(ol,{to:"/",className:"text-gray-400 hover:text-white flex items-center gap-2",children:" Volver"})}),A.jsxs("div",{className:"w-full max-w-2xl",children:[A.jsxs("h1",{className:"text-3xl font-display font-bold text-center mb-2",children:["Revisa estatus de tu ",A.jsx("span",{className:"text-brand-orange",children:"Pedido"})]}),A.jsx("p",{className:"text-center text-gray-400 mb-8",children:"Ingresa tu ID de pedido, correo o telfono."}),A.jsxs("div",{className:"glass p-6 md:p-8 rounded-2xl shadow-xl border border-white/10 mb-8",children:[A.jsxs("form",{onSubmit:c,className:"flex flex-col md:flex-row gap-4",children:[A.jsx("input",{type:"text",required:!0,value:n,onChange:f=>e(f.target.value),className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue",placeholder:"ID, Correo o Telfono..."}),A.jsxs("button",{type:"submit",disabled:s,className:"bg-brand-blue hover:bg-blue-600 text-white font-bold px-6 py-3 rounded-lg transition-all flex items-center justify-center gap-2 w-full md:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:[s?A.jsx("span",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):A.jsx(WN,{size:18}),s?"Buscando...":"Buscar"]})]}),i&&A.jsxs("div",{className:"mt-4 p-3 bg-red-500/10 border border-red-500/20 text-red-400 rounded-lg text-sm text-center flex items-center justify-center gap-2",children:[A.jsx(ale,{size:16})," ",i]})]}),t&&t.length>0&&A.jsx("div",{className:"space-y-6",children:t.map(f=>A.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl p-6 shadow-2xl animate-float",children:[A.jsxs("div",{className:"flex justify-between items-start mb-6",children:[A.jsxs("div",{children:[A.jsxs("h3",{className:"font-bold text-xl text-white",children:["Pedido #",f.id.slice(-4)]}),A.jsx("p",{className:"text-xs text-gray-500",children:f.id}),A.jsxs("p",{className:"text-gray-400 text-sm",children:["Fecha: ",f.date]})]}),A.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase
                                        ${f.status==="entregado"?"bg-green-500/20 text-green-400":f.status==="terminado"?"bg-blue-500/20 text-blue-400":"bg-brand-orange/20 text-brand-orange"}`,children:f.status})]}),A.jsxs("div",{className:"space-y-4 mb-6",children:[A.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-3",children:[A.jsxs("div",{className:"flex justify-between items-center mb-2",children:[A.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase",children:"Productos"}),f.items&&A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"w-24 h-2 bg-slate-700 rounded-full overflow-hidden",children:A.jsx("div",{className:"h-full bg-green-500 transition-all duration-500",style:{width:`${f.items.filter(d=>d.completed).length/f.items.length*100}%`}})}),A.jsxs("span",{className:"text-[10px] text-gray-400",children:[f.items.filter(d=>d.completed).length,"/",f.items.length]})]})]}),f.items&&f.items.map((d,p)=>A.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-200 mb-1 border-b border-slate-700/50 pb-1 last:border-0 last:pb-0",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:`w-4 h-4 rounded-full flex items-center justify-center border ${d.completed?"bg-green-500 border-green-500":"border-slate-600"}`,children:d.completed&&A.jsx(l_,{size:10,className:"text-white"})}),A.jsxs("span",{className:d.completed?"text-gray-500 line-through":"",children:[d.qty,"x ",d.desc]})]}),d.price&&A.jsxs("span",{className:"text-gray-500",children:["$",d.price," c/u"]})]},p))]}),A.jsx("div",{className:"flex items-center gap-3 text-slate-300",children:f.status==="entregado"?A.jsxs(A.Fragment,{children:[A.jsx(l_,{className:"text-green-400"}),A.jsx("span",{className:"text-green-400 font-bold",children:"Entregado!"})]}):A.jsxs("div",{className:"flex flex-col gap-1",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(q9,{className:"text-brand-orange",size:16}),A.jsxs("span",{children:["Entrega estimada: ",f.deadline||"Pendiente"]})]}),f.deliveryLocation&&A.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-400 ml-6",children:A.jsxs("span",{children:[" Zona/Direccin: ",f.deliveryLocation]})})]})}),f.progressImage&&A.jsxs("div",{className:"mt-4",children:[A.jsx("h4",{className:"text-xs font-bold text-gray-400 mb-2 uppercase",children:"Avance del Pedido"}),A.jsx("img",{src:f.progressImage,alt:"Avance",className:"w-full rounded-lg border border-slate-600 shadow-lg"})]}),f.evidenceLink&&A.jsx("div",{className:"mt-4",children:A.jsxs("a",{href:f.evidenceLink,target:"_blank",rel:"noopener noreferrer",className:"w-full block bg-slate-800 hover:bg-slate-700 border border-slate-600 text-center py-3 rounded-xl transition-colors flex items-center justify-center gap-2 text-brand-blue font-bold",children:[A.jsx(Gv,{size:18})," Ver Fotos / Evidencia (Drive)"]})})]}),A.jsxs("div",{className:"bg-slate-900 rounded-xl p-4",children:[A.jsxs("div",{className:"flex justify-between mb-2",children:[A.jsx("span",{className:"text-gray-400",children:"Total"}),A.jsxs("span",{className:"text-white font-bold",children:["$",f.total]})]}),A.jsxs("div",{className:"flex justify-between mb-2",children:[A.jsx("span",{className:"text-gray-400",children:"Pagado (Anticipo)"}),A.jsxs("span",{className:"text-green-400 font-bold",children:["-$",f.advance||0]})]}),A.jsx("div",{className:"border-t border-slate-700 my-2"}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-brand-orange font-bold",children:"Por Pagar"}),A.jsxs("span",{className:"text-brand-orange font-bold text-xl",children:["$",f.remaining||f.total]})]})]})]},f.id))})]})]})},wOe=()=>{const{products:n,loading:e}=X9(),[t,r]=G.useState("all"),[i,a]=G.useState(null),s=["Todos",...new Set(n.map(c=>c.category).filter(Boolean))],o=t==="Todos"||t==="all"?n:n.filter(c=>c.category===t);return A.jsxs("div",{className:"bg-brand-dark min-h-screen text-slate-100 font-sans pb-16",children:[A.jsxs("div",{className:"pt-8 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[A.jsx(ol,{to:"/",className:"p-2 rounded-full bg-slate-800 hover:bg-slate-700 text-white transition-colors",children:A.jsx(IM,{size:24})}),A.jsx("h1",{className:"font-display text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400",children:"Catlogo Completo"})]}),A.jsx("div",{className:"flex flex-wrap gap-3 mb-8 sticky top-4 z-40 py-4 bg-brand-dark/95 backdrop-blur rounded-2xl px-4 border border-white/5",children:s.map(c=>A.jsx("button",{onClick:()=>r(c),className:`px-5 py-2 rounded-full font-bold text-sm transition-all border 
                                ${t===c||c==="Todos"&&t==="all"?"bg-brand-orange text-white border-brand-orange shadow-lg shadow-orange-500/30":"bg-transparent text-gray-400 border-gray-700 hover:border-gray-500 hover:text-white"}`,children:c},c))}),e?A.jsx("div",{className:"flex justify-center items-center h-64 text-slate-500",children:"Cargando productos..."}):A.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:o.map((c,f)=>A.jsxs("div",{onClick:()=>a(c.image),className:"group relative overflow-hidden rounded-2xl shadow-xl aspect-square bg-gray-900 cursor-pointer hover:shadow-2xl hover:shadow-brand-blue/10 transition-all hover:scale-[1.02] border border-white/5",children:[A.jsx("div",{className:"w-full h-full bg-cover bg-center group-hover:scale-110 transition-transform duration-500",style:{backgroundImage:`url('${c.image}')`}}),A.jsx("div",{className:"absolute top-3 right-3 z-10",children:A.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-extrabold uppercase tracking-wider shadow-sm backdrop-blur-md ${c.quantity>0?"bg-green-500/90 text-white":"bg-red-500/90 text-white"}`,children:c.quantity>0?"Disponible":"Agotado"})}),A.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-4 bg-gradient-to-t from-black via-black/80 to-transparent pt-12",children:[A.jsx("h3",{className:"text-white font-bold text-lg leading-tight truncate",children:c.name}),A.jsx("p",{className:"text-brand-orange font-bold text-xl",children:c.price})]})]},f))})]}),i&&A.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/95 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>a(null),children:[A.jsx("button",{className:"absolute top-4 right-4 text-white hover:text-brand-orange p-2 bg-black/50 rounded-full",children:A.jsx(c_,{size:32})}),A.jsx("img",{src:i,alt:"Vista completa",className:"max-h-[85vh] max-w-[95vw] rounded-lg shadow-2xl border border-white/10",onClick:c=>c.stopPropagation()})]})]})};function EOe(){return A.jsx(MZ,{children:A.jsxs(xZ,{children:[A.jsx(Uh,{path:"/",element:A.jsx(jle,{})}),A.jsx(Uh,{path:"/admin",element:A.jsx(xOe,{})}),A.jsx(Uh,{path:"/quote",element:A.jsx(_Oe,{})}),A.jsx(Uh,{path:"/status",element:A.jsx(SOe,{})}),A.jsx(Uh,{path:"/catalogo",element:A.jsx(wOe,{})}),A.jsx(Uh,{path:"/venta-tienda",element:A.jsx(dV,{})}),A.jsx(Uh,{path:"/venta-fisica",element:A.jsx(dV,{})})]})})}class AOe extends Eg.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t),this.setState({errorInfo:t})}render(){return this.state.hasError?A.jsxs("div",{style:{color:"red",padding:"20px",background:"white"},children:[A.jsx("h1",{children:"Something went wrong."}),A.jsx("pre",{children:this.state.error&&this.state.error.toString()}),A.jsx("pre",{children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}):this.props.children}}CK.createRoot(document.getElementById("root")).render(A.jsx(Eg.StrictMode,{children:A.jsx(AOe,{children:A.jsx(r0e,{children:A.jsx(EOe,{})})})}));
