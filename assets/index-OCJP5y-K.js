var $Y=Object.defineProperty;var XY=(n,e,t)=>e in n?$Y(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var aI=(n,e,t)=>XY(n,typeof e!="symbol"?e+"":e,t);function YY(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function Wc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var sI={exports:{}},Nb={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dU;function KY(){if(dU)return Nb;dU=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var s=null;if(a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),"key"in r){a={};for(var o in r)o!=="key"&&(a[o]=r[o])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:s,ref:r!==void 0?r:null,props:a}}return Nb.Fragment=e,Nb.jsx=t,Nb.jsxs=t,Nb}var pU;function ZY(){return pU||(pU=1,sI.exports=KY()),sI.exports}var N=ZY(),oI={exports:{}},In={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mU;function QY(){if(mU)return In;mU=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),v=Symbol.iterator;function y(Q){return Q===null||typeof Q!="object"?null:(Q=v&&Q[v]||Q["@@iterator"],typeof Q=="function"?Q:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,S={};function w(Q,re,ye){this.props=Q,this.context=re,this.refs=S,this.updater=ye||_}w.prototype.isReactComponent={},w.prototype.setState=function(Q,re){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,re,"setState")},w.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function I(){}I.prototype=w.prototype;function P(Q,re,ye){this.props=Q,this.context=re,this.refs=S,this.updater=ye||_}var D=P.prototype=new I;D.constructor=P,E(D,w.prototype),D.isPureReactComponent=!0;var z=Array.isArray;function k(){}var U={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function M(Q,re,ye){var de=ye.ref;return{$$typeof:n,type:Q,key:re,ref:de!==void 0?de:null,props:ye}}function L(Q,re){return M(Q.type,re,Q.props)}function B(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===n}function V(Q){var re={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(ye){return re[ye]})}var j=/\/+/g;function Z(Q,re){return typeof Q=="object"&&Q!==null&&Q.key!=null?V(""+Q.key):re.toString(36)}function J(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(k,k):(Q.status="pending",Q.then(function(re){Q.status==="pending"&&(Q.status="fulfilled",Q.value=re)},function(re){Q.status==="pending"&&(Q.status="rejected",Q.reason=re)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function G(Q,re,ye,de,xe){var ve=typeof Q;(ve==="undefined"||ve==="boolean")&&(Q=null);var Te=!1;if(Q===null)Te=!0;else switch(ve){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(Q.$$typeof){case n:case e:Te=!0;break;case h:return Te=Q._init,G(Te(Q._payload),re,ye,de,xe)}}if(Te)return xe=xe(Q),Te=de===""?"."+Z(Q,0):de,z(xe)?(ye="",Te!=null&&(ye=Te.replace(j,"$&/")+"/"),G(xe,re,ye,"",function(Ve){return Ve})):xe!=null&&(B(xe)&&(xe=L(xe,ye+(xe.key==null||Q&&Q.key===xe.key?"":(""+xe.key).replace(j,"$&/")+"/")+Te)),re.push(xe)),1;Te=0;var Ze=de===""?".":de+":";if(z(Q))for(var be=0;be<Q.length;be++)de=Q[be],ve=Ze+Z(de,be),Te+=G(de,re,ye,ve,xe);else if(be=y(Q),typeof be=="function")for(Q=be.call(Q),be=0;!(de=Q.next()).done;)de=de.value,ve=Ze+Z(de,be++),Te+=G(de,re,ye,ve,xe);else if(ve==="object"){if(typeof Q.then=="function")return G(J(Q),re,ye,de,xe);throw re=String(Q),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Te}function $(Q,re,ye){if(Q==null)return Q;var de=[],xe=0;return G(Q,de,"","",function(ve){return re.call(ye,ve,xe++)}),de}function ae(Q){if(Q._status===-1){var re=Q._result;re=re(),re.then(function(ye){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=ye)},function(ye){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=ye)}),Q._status===-1&&(Q._status=0,Q._result=re)}if(Q._status===1)return Q._result.default;throw Q._result}var le=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)},ue={map:$,forEach:function(Q,re,ye){$(Q,function(){re.apply(this,arguments)},ye)},count:function(Q){var re=0;return $(Q,function(){re++}),re},toArray:function(Q){return $(Q,function(re){return re})||[]},only:function(Q){if(!B(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}};return In.Activity=p,In.Children=ue,In.Component=w,In.Fragment=t,In.Profiler=r,In.PureComponent=P,In.StrictMode=i,In.Suspense=c,In.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,In.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return U.H.useMemoCache(Q)}},In.cache=function(Q){return function(){return Q.apply(null,arguments)}},In.cacheSignal=function(){return null},In.cloneElement=function(Q,re,ye){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var de=E({},Q.props),xe=Q.key;if(re!=null)for(ve in re.key!==void 0&&(xe=""+re.key),re)!R.call(re,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&re.ref===void 0||(de[ve]=re[ve]);var ve=arguments.length-2;if(ve===1)de.children=ye;else if(1<ve){for(var Te=Array(ve),Ze=0;Ze<ve;Ze++)Te[Ze]=arguments[Ze+2];de.children=Te}return M(Q.type,xe,de)},In.createContext=function(Q){return Q={$$typeof:s,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:a,_context:Q},Q},In.createElement=function(Q,re,ye){var de,xe={},ve=null;if(re!=null)for(de in re.key!==void 0&&(ve=""+re.key),re)R.call(re,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(xe[de]=re[de]);var Te=arguments.length-2;if(Te===1)xe.children=ye;else if(1<Te){for(var Ze=Array(Te),be=0;be<Te;be++)Ze[be]=arguments[be+2];xe.children=Ze}if(Q&&Q.defaultProps)for(de in Te=Q.defaultProps,Te)xe[de]===void 0&&(xe[de]=Te[de]);return M(Q,ve,xe)},In.createRef=function(){return{current:null}},In.forwardRef=function(Q){return{$$typeof:o,render:Q}},In.isValidElement=B,In.lazy=function(Q){return{$$typeof:h,_payload:{_status:-1,_result:Q},_init:ae}},In.memo=function(Q,re){return{$$typeof:f,type:Q,compare:re===void 0?null:re}},In.startTransition=function(Q){var re=U.T,ye={};U.T=ye;try{var de=Q(),xe=U.S;xe!==null&&xe(ye,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(k,le)}catch(ve){le(ve)}finally{re!==null&&ye.types!==null&&(re.types=ye.types),U.T=re}},In.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},In.use=function(Q){return U.H.use(Q)},In.useActionState=function(Q,re,ye){return U.H.useActionState(Q,re,ye)},In.useCallback=function(Q,re){return U.H.useCallback(Q,re)},In.useContext=function(Q){return U.H.useContext(Q)},In.useDebugValue=function(){},In.useDeferredValue=function(Q,re){return U.H.useDeferredValue(Q,re)},In.useEffect=function(Q,re){return U.H.useEffect(Q,re)},In.useEffectEvent=function(Q){return U.H.useEffectEvent(Q)},In.useId=function(){return U.H.useId()},In.useImperativeHandle=function(Q,re,ye){return U.H.useImperativeHandle(Q,re,ye)},In.useInsertionEffect=function(Q,re){return U.H.useInsertionEffect(Q,re)},In.useLayoutEffect=function(Q,re){return U.H.useLayoutEffect(Q,re)},In.useMemo=function(Q,re){return U.H.useMemo(Q,re)},In.useOptimistic=function(Q,re){return U.H.useOptimistic(Q,re)},In.useReducer=function(Q,re,ye){return U.H.useReducer(Q,re,ye)},In.useRef=function(Q){return U.H.useRef(Q)},In.useState=function(Q){return U.H.useState(Q)},In.useSyncExternalStore=function(Q,re,ye){return U.H.useSyncExternalStore(Q,re,ye)},In.useTransition=function(){return U.H.useTransition()},In.version="19.2.4",In}var gU;function Kv(){return gU||(gU=1,oI.exports=QY()),oI.exports}var q=Kv();const _g=Wc(q),WV=YY({__proto__:null,default:_g},[q]);var lI={exports:{}},Ob={},cI={exports:{}},uI={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vU;function JY(){return vU||(vU=1,(function(n){function e(G,$){var ae=G.length;G.push($);e:for(;0<ae;){var le=ae-1>>>1,ue=G[le];if(0<r(ue,$))G[le]=$,G[ae]=ue,ae=le;else break e}}function t(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var $=G[0],ae=G.pop();if(ae!==$){G[0]=ae;e:for(var le=0,ue=G.length,Q=ue>>>1;le<Q;){var re=2*(le+1)-1,ye=G[re],de=re+1,xe=G[de];if(0>r(ye,ae))de<ue&&0>r(xe,ye)?(G[le]=xe,G[de]=ae,le=de):(G[le]=ye,G[re]=ae,le=re);else if(de<ue&&0>r(xe,ae))G[le]=xe,G[de]=ae,le=de;else break e}}return $}function r(G,$){var ae=G.sortIndex-$.sortIndex;return ae!==0?ae:G.id-$.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var c=[],f=[],h=1,p=null,v=3,y=!1,_=!1,E=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function D(G){for(var $=t(f);$!==null;){if($.callback===null)i(f);else if($.startTime<=G)i(f),$.sortIndex=$.expirationTime,e(c,$);else break;$=t(f)}}function z(G){if(E=!1,D(G),!_)if(t(c)!==null)_=!0,k||(k=!0,V());else{var $=t(f);$!==null&&J(z,$.startTime-G)}}var k=!1,U=-1,R=5,M=-1;function L(){return S?!0:!(n.unstable_now()-M<R)}function B(){if(S=!1,k){var G=n.unstable_now();M=G;var $=!0;try{e:{_=!1,E&&(E=!1,I(U),U=-1),y=!0;var ae=v;try{t:{for(D(G),p=t(c);p!==null&&!(p.expirationTime>G&&L());){var le=p.callback;if(typeof le=="function"){p.callback=null,v=p.priorityLevel;var ue=le(p.expirationTime<=G);if(G=n.unstable_now(),typeof ue=="function"){p.callback=ue,D(G),$=!0;break t}p===t(c)&&i(c),D(G)}else i(c);p=t(c)}if(p!==null)$=!0;else{var Q=t(f);Q!==null&&J(z,Q.startTime-G),$=!1}}break e}finally{p=null,v=ae,y=!1}$=void 0}}finally{$?V():k=!1}}}var V;if(typeof P=="function")V=function(){P(B)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,Z=j.port2;j.port1.onmessage=B,V=function(){Z.postMessage(null)}}else V=function(){w(B,0)};function J(G,$){U=w(function(){G(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(G){switch(v){case 1:case 2:case 3:var $=3;break;default:$=v}var ae=v;v=$;try{return G()}finally{v=ae}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(G,$){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ae=v;v=G;try{return $()}finally{v=ae}},n.unstable_scheduleCallback=function(G,$,ae){var le=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?le+ae:le):ae=le,G){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=ae+ue,G={id:h++,callback:$,priorityLevel:G,startTime:ae,expirationTime:ue,sortIndex:-1},ae>le?(G.sortIndex=ae,e(f,G),t(c)===null&&G===t(f)&&(E?(I(U),U=-1):E=!0,J(z,ae-le))):(G.sortIndex=ue,e(c,G),_||y||(_=!0,k||(k=!0,V()))),G},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(G){var $=v;return function(){var ae=v;v=$;try{return G.apply(this,arguments)}finally{v=ae}}}})(uI)),uI}var yU;function qV(){return yU||(yU=1,cI.exports=JY()),cI.exports}var fI={exports:{}},_s={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bU;function eK(){if(bU)return _s;bU=1;var n=Kv();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)f+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(c,f,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:c,containerInfo:f,implementation:h}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return _s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,_s.createPortal=function(c,f){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(c,f,null,h)},_s.flushSync=function(c){var f=s.T,h=i.p;try{if(s.T=null,i.p=2,c)return c()}finally{s.T=f,i.p=h,i.d.f()}},_s.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(c,f))},_s.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},_s.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var h=f.as,p=o(h,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;h==="style"?i.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:v,fetchPriority:y}):h==="script"&&i.d.X(c,{crossOrigin:p,integrity:v,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},_s.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var h=o(f.as,f.crossOrigin);i.d.M(c,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(c)},_s.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var h=f.as,p=o(h,f.crossOrigin);i.d.L(c,h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},_s.preloadModule=function(c,f){if(typeof c=="string")if(f){var h=o(f.as,f.crossOrigin);i.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(c)},_s.requestFormReset=function(c){i.d.r(c)},_s.unstable_batchedUpdates=function(c,f){return c(f)},_s.useFormState=function(c,f,h){return s.H.useFormState(c,f,h)},_s.useFormStatus=function(){return s.H.useHostTransitionStatus()},_s.version="19.2.4",_s}var _U;function $V(){if(_U)return fI.exports;_U=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),fI.exports=eK(),fI.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xU;function tK(){if(xU)return Ob;xU=1;var n=qV(),e=Kv(),t=$V();function i(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var u=l,g=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(g=u.return),l=u.return;while(l)}return u.tag===3?g:null}function s(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function o(l){if(l.tag===31){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function c(l){if(a(l)!==l)throw Error(i(188))}function f(l){var u=l.alternate;if(!u){if(u=a(l),u===null)throw Error(i(188));return u!==l?null:l}for(var g=l,b=u;;){var C=g.return;if(C===null)break;var O=C.alternate;if(O===null){if(b=C.return,b!==null){g=b;continue}break}if(C.child===O.child){for(O=C.child;O;){if(O===g)return c(C),l;if(O===b)return c(C),u;O=O.sibling}throw Error(i(188))}if(g.return!==b.return)g=C,b=O;else{for(var X=!1,ie=C.child;ie;){if(ie===g){X=!0,g=C,b=O;break}if(ie===b){X=!0,b=C,g=O;break}ie=ie.sibling}if(!X){for(ie=O.child;ie;){if(ie===g){X=!0,g=O,b=C;break}if(ie===b){X=!0,b=O,g=C;break}ie=ie.sibling}if(!X)throw Error(i(189))}}if(g.alternate!==b)throw Error(i(190))}if(g.tag!==3)throw Error(i(188));return g.stateNode.current===g?l:u}function h(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=h(l),u!==null)return u;l=l.sibling}return null}var p=Object.assign,v=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),P=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function V(l){return l===null||typeof l!="object"?null:(l=B&&l[B]||l["@@iterator"],typeof l=="function"?l:null)}var j=Symbol.for("react.client.reference");function Z(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===j?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case E:return"Fragment";case w:return"Profiler";case S:return"StrictMode";case z:return"Suspense";case k:return"SuspenseList";case M:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case _:return"Portal";case P:return l.displayName||"Context";case I:return(l._context.displayName||"Context")+".Consumer";case D:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case U:return u=l.displayName||null,u!==null?u:Z(l.type)||"Memo";case R:u=l._payload,l=l._init;try{return Z(l(u))}catch{}}return null}var J=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},le=[],ue=-1;function Q(l){return{current:l}}function re(l){0>ue||(l.current=le[ue],le[ue]=null,ue--)}function ye(l,u){ue++,le[ue]=l.current,l.current=u}var de=Q(null),xe=Q(null),ve=Q(null),Te=Q(null);function Ze(l,u){switch(ye(ve,u),ye(xe,l),ye(de,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?kk(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=kk(u),l=Uk(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}re(de),ye(de,l)}function be(){re(de),re(xe),re(ve)}function Ve(l){l.memoizedState!==null&&ye(Te,l);var u=de.current,g=Uk(u,l.type);u!==g&&(ye(xe,l),ye(de,g))}function vt(l){xe.current===l&&(re(de),re(xe)),Te.current===l&&(re(Te),Cb._currentValue=ae)}var Ie,It;function Ne(l){if(Ie===void 0)try{throw Error()}catch(g){var u=g.stack.trim().match(/\n( *(at )?)/);Ie=u&&u[1]||"",It=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ie+l+It}var je=!1;function Le(l,u){if(!l||je)return"";je=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(u){var ot=function(){throw Error()};if(Object.defineProperty(ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ot,[])}catch(Xe){var Be=Xe}Reflect.construct(l,[],ot)}else{try{ot.call()}catch(Xe){Be=Xe}l.call(ot.prototype)}}else{try{throw Error()}catch(Xe){Be=Xe}(ot=l())&&typeof ot.catch=="function"&&ot.catch(function(){})}}catch(Xe){if(Xe&&Be&&typeof Xe.stack=="string")return[Xe.stack,Be.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=b.DetermineComponentFrameRoot(),X=O[0],ie=O[1];if(X&&ie){var ge=X.split(`
`),Fe=ie.split(`
`);for(C=b=0;b<ge.length&&!ge[b].includes("DetermineComponentFrameRoot");)b++;for(;C<Fe.length&&!Fe[C].includes("DetermineComponentFrameRoot");)C++;if(b===ge.length||C===Fe.length)for(b=ge.length-1,C=Fe.length-1;1<=b&&0<=C&&ge[b]!==Fe[C];)C--;for(;1<=b&&0<=C;b--,C--)if(ge[b]!==Fe[C]){if(b!==1||C!==1)do if(b--,C--,0>C||ge[b]!==Fe[C]){var Je=`
`+ge[b].replace(" at new "," at ");return l.displayName&&Je.includes("<anonymous>")&&(Je=Je.replace("<anonymous>",l.displayName)),Je}while(1<=b&&0<=C);break}}}finally{je=!1,Error.prepareStackTrace=g}return(g=l?l.displayName||l.name:"")?Ne(g):""}function Qe(l,u){switch(l.tag){case 26:case 27:case 5:return Ne(l.type);case 16:return Ne("Lazy");case 13:return l.child!==u&&u!==null?Ne("Suspense Fallback"):Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 15:return Le(l.type,!1);case 11:return Le(l.type.render,!1);case 1:return Le(l.type,!0);case 31:return Ne("Activity");default:return""}}function oe(l){try{var u="",g=null;do u+=Qe(l,g),g=l,l=l.return;while(l);return u}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}var _t=Object.prototype.hasOwnProperty,tt=n.unstable_scheduleCallback,wt=n.unstable_cancelCallback,at=n.unstable_shouldYield,ne=n.unstable_requestPaint,Y=n.unstable_now,me=n.unstable_getCurrentPriorityLevel,Ue=n.unstable_ImmediatePriority,qe=n.unstable_UserBlockingPriority,De=n.unstable_NormalPriority,Mt=n.unstable_LowPriority,ct=n.unstable_IdlePriority,At=n.log,Ut=n.unstable_setDisableYieldValue,et=null,st=null;function Et(l){if(typeof At=="function"&&Ut(l),st&&typeof st.setStrictMode=="function")try{st.setStrictMode(et,l)}catch{}}var fe=Math.clz32?Math.clz32:pe,Pe=Math.log,xt=Math.LN2;function pe(l){return l>>>=0,l===0?32:31-(Pe(l)/xt|0)|0}var ut=256,ft=262144,lt=4194304;function nt(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Ke(l,u,g){var b=l.pendingLanes;if(b===0)return 0;var C=0,O=l.suspendedLanes,X=l.pingedLanes;l=l.warmLanes;var ie=b&134217727;return ie!==0?(b=ie&~O,b!==0?C=nt(b):(X&=ie,X!==0?C=nt(X):g||(g=ie&~l,g!==0&&(C=nt(g))))):(ie=b&~O,ie!==0?C=nt(ie):X!==0?C=nt(X):g||(g=b&~l,g!==0&&(C=nt(g)))),C===0?0:u!==0&&u!==C&&(u&O)===0&&(O=C&-C,g=u&-u,O>=g||O===32&&(g&4194048)!==0)?u:C}function ht(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function Wt(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rn(){var l=lt;return lt<<=1,(lt&62914560)===0&&(lt=4194304),l}function Qt(l){for(var u=[],g=0;31>g;g++)u.push(l);return u}function Ei(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Bi(l,u,g,b,C,O){var X=l.pendingLanes;l.pendingLanes=g,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=g,l.entangledLanes&=g,l.errorRecoveryDisabledLanes&=g,l.shellSuspendCounter=0;var ie=l.entanglements,ge=l.expirationTimes,Fe=l.hiddenUpdates;for(g=X&~g;0<g;){var Je=31-fe(g),ot=1<<Je;ie[Je]=0,ge[Je]=-1;var Be=Fe[Je];if(Be!==null)for(Fe[Je]=null,Je=0;Je<Be.length;Je++){var Xe=Be[Je];Xe!==null&&(Xe.lane&=-536870913)}g&=~ot}b!==0&&ka(l,b,0),O!==0&&C===0&&l.tag!==0&&(l.suspendedLanes|=O&~(X&~u))}function ka(l,u,g){l.pendingLanes|=u,l.suspendedLanes&=~u;var b=31-fe(u);l.entangledLanes|=u,l.entanglements[b]=l.entanglements[b]|1073741824|g&261930}function Ds(l,u){var g=l.entangledLanes|=u;for(l=l.entanglements;g;){var b=31-fe(g),C=1<<b;C&u|l[b]&u&&(l[b]|=u),g&=~C}}function Ls(l,u){var g=u&-u;return g=(g&42)!==0?1:Ua(g),(g&(l.suspendedLanes|u))!==0?0:g}function Ua(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function oa(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function jo(){var l=$.p;return l!==0?l:(l=window.event,l===void 0?32:sU(l.type))}function Ci(l,u){var g=$.p;try{return $.p=l,u()}finally{$.p=g}}var Lr=Math.random().toString(36).slice(2),di="__reactFiber$"+Lr,Ii="__reactProps$"+Lr,Er="__reactContainer$"+Lr,kr="__reactEvents$"+Lr,$r="__reactListeners$"+Lr,ls="__reactHandles$"+Lr,lo="__reactResources$"+Lr,he="__reactMarker$"+Lr;function We(l){delete l[di],delete l[Ii],delete l[kr],delete l[$r],delete l[ls]}function gt(l){var u=l[di];if(u)return u;for(var g=l.parentNode;g;){if(u=g[Er]||g[di]){if(g=u.alternate,u.child!==null||g!==null&&g.child!==null)for(l=Gk(l);l!==null;){if(g=l[di])return g;l=Gk(l)}return u}l=g,g=l.parentNode}return null}function Vt(l){if(l=l[di]||l[Er]){var u=l.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return l}return null}function en(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(i(33))}function _n(l){var u=l[lo];return u||(u=l[lo]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function ee(l){l[he]=!0}var Se=new Set,Oe={};function Re(l,u){Ee(l,u),Ee(l+"Capture",u)}function Ee(l,u){for(Oe[l]=u,l=0;l<u.length;l++)Se.add(u[l])}var yt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nt={},pt={};function Lt(l){return _t.call(pt,l)?!0:_t.call(Nt,l)?!1:yt.test(l)?pt[l]=!0:(Nt[l]=!0,!1)}function Ft(l,u,g){if(Lt(u))if(g===null)l.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var b=u.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+g)}}function jt(l,u,g){if(g===null)l.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+g)}}function Ot(l,u,g,b){if(b===null)l.removeAttribute(g);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(g);return}l.setAttributeNS(u,g,""+b)}}function $t(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function wn(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function ci(l,u,g){var b=Object.getOwnPropertyDescriptor(l.constructor.prototype,u);if(!l.hasOwnProperty(u)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var C=b.get,O=b.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return C.call(this)},set:function(X){g=""+X,O.call(this,X)}}),Object.defineProperty(l,u,{enumerable:b.enumerable}),{getValue:function(){return g},setValue:function(X){g=""+X},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function nn(l){if(!l._valueTracker){var u=wn(l)?"checked":"value";l._valueTracker=ci(l,u,""+l[u])}}function dn(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var g=u.getValue(),b="";return l&&(b=wn(l)?l.checked?"true":"false":l.value),l=b,l!==g?(u.setValue(l),!0):!1}function Pt(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var On=/[\n"\\]/g;function ln(l){return l.replace(On,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function qi(l,u,g,b,C,O,X,ie){l.name="",X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?l.type=X:l.removeAttribute("type"),u!=null?X==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+$t(u)):l.value!==""+$t(u)&&(l.value=""+$t(u)):X!=="submit"&&X!=="reset"||l.removeAttribute("value"),u!=null?Ti(l,X,$t(u)):g!=null?Ti(l,X,$t(g)):b!=null&&l.removeAttribute("value"),C==null&&O!=null&&(l.defaultChecked=!!O),C!=null&&(l.checked=C&&typeof C!="function"&&typeof C!="symbol"),ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"?l.name=""+$t(ie):l.removeAttribute("name")}function ks(l,u,g,b,C,O,X,ie){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(l.type=O),u!=null||g!=null){if(!(O!=="submit"&&O!=="reset"||u!=null)){nn(l);return}g=g!=null?""+$t(g):"",u=u!=null?""+$t(u):g,ie||u===l.value||(l.value=u),l.defaultValue=u}b=b??C,b=typeof b!="function"&&typeof b!="symbol"&&!!b,l.checked=ie?l.checked:!!b,l.defaultChecked=!!b,X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"&&(l.name=X),nn(l)}function Ti(l,u,g){u==="number"&&Pt(l.ownerDocument)===l||l.defaultValue===""+g||(l.defaultValue=""+g)}function la(l,u,g,b){if(l=l.options,u){u={};for(var C=0;C<g.length;C++)u["$"+g[C]]=!0;for(g=0;g<l.length;g++)C=u.hasOwnProperty("$"+l[g].value),l[g].selected!==C&&(l[g].selected=C),C&&b&&(l[g].defaultSelected=!0)}else{for(g=""+$t(g),u=null,C=0;C<l.length;C++){if(l[C].value===g){l[C].selected=!0,b&&(l[C].defaultSelected=!0);return}u!==null||l[C].disabled||(u=l[C])}u!==null&&(u.selected=!0)}}function ii(l,u,g){if(u!=null&&(u=""+$t(u),u!==l.value&&(l.value=u),g==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=g!=null?""+$t(g):""}function Li(l,u,g,b){if(u==null){if(b!=null){if(g!=null)throw Error(i(92));if(J(b)){if(1<b.length)throw Error(i(93));b=b[0]}g=b}g==null&&(g=""),u=g}g=$t(u),l.defaultValue=g,b=l.textContent,b===g&&b!==""&&b!==null&&(l.value=b),nn(l)}function bi(l,u){if(u){var g=l.firstChild;if(g&&g===l.lastChild&&g.nodeType===3){g.nodeValue=u;return}}l.textContent=u}var pr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mr(l,u,g){var b=u.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?b?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":b?l.setProperty(u,g):typeof g!="number"||g===0||pr.has(u)?u==="float"?l.cssFloat=g:l[u]=(""+g).trim():l[u]=g+"px"}function ml(l,u,g){if(u!=null&&typeof u!="object")throw Error(i(62));if(l=l.style,g!=null){for(var b in g)!g.hasOwnProperty(b)||u!=null&&u.hasOwnProperty(b)||(b.indexOf("--")===0?l.setProperty(b,""):b==="float"?l.cssFloat="":l[b]="");for(var C in u)b=u[C],u.hasOwnProperty(C)&&g[C]!==b&&mr(l,C,b)}else for(var O in u)u.hasOwnProperty(O)&&mr(l,O,u[O])}function Fa(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pf(l){return gl.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function Ho(){}var Ph=null;function Us(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var ac=null,co=null;function Xc(l){var u=Vt(l);if(u&&(l=u.stateNode)){var g=l[Ii]||null;e:switch(l=u.stateNode,u.type){case"input":if(qi(l,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),u=g.name,g.type==="radio"&&u!=null){for(g=l;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+ln(""+u)+'"][type="radio"]'),u=0;u<g.length;u++){var b=g[u];if(b!==l&&b.form===l.form){var C=b[Ii]||null;if(!C)throw Error(i(90));qi(b,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(u=0;u<g.length;u++)b=g[u],b.form===l.form&&dn(b)}break e;case"textarea":ii(l,g.value,g.defaultValue);break e;case"select":u=g.value,u!=null&&la(l,!!g.multiple,u,!1)}}}var mf=!1;function sc(l,u,g){if(mf)return l(u,g);mf=!0;try{var b=l(u);return b}finally{if(mf=!1,(ac!==null||co!==null)&&(el(),ac&&(u=ac,l=co,co=ac=null,Xc(u),l)))for(u=0;u<l.length;u++)Xc(l[u])}}function uo(l,u){var g=l.stateNode;if(g===null)return null;var b=g[Ii]||null;if(b===null)return null;g=b[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(l=l.type,b=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!b;break e;default:l=!1}if(l)return null;if(g&&typeof g!="function")throw Error(i(231,u,typeof g));return g}var Fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gf=!1;if(Fs)try{var pi={};Object.defineProperty(pi,"passive",{get:function(){gf=!0}}),window.addEventListener("test",pi,pi),window.removeEventListener("test",pi,pi)}catch{gf=!1}var za=null,Nh=null,vl=null;function Yc(){if(vl)return vl;var l,u=Nh,g=u.length,b,C="value"in za?za.value:za.textContent,O=C.length;for(l=0;l<g&&u[l]===C[l];l++);var X=g-l;for(b=1;b<=X&&u[g-b]===C[O-b];b++);return vl=C.slice(l,1<b?1-b:void 0)}function Kc(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Go(){return!0}function Wo(){return!1}function Xr(l){function u(g,b,C,O,X){this._reactName=g,this._targetInst=C,this.type=b,this.nativeEvent=O,this.target=X,this.currentTarget=null;for(var ie in l)l.hasOwnProperty(ie)&&(g=l[ie],this[ie]=g?g(O):O[ie]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?Go:Wo,this.isPropagationStopped=Wo,this}return p(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Go)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Go)},persist:function(){},isPersistent:Go}),u}var yl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qo=Xr(yl),oc=p({},yl,{view:0,detail:0}),Oh=Xr(oc),bl,vf,$o,Zc=p({},oc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lc,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==$o&&($o&&l.type==="mousemove"?(bl=l.screenX-$o.screenX,vf=l.screenY-$o.screenY):vf=bl=0,$o=l),bl)},movementY:function(l){return"movementY"in l?l.movementY:vf}}),Dh=Xr(Zc),Qc=p({},Zc,{dataTransfer:0}),Ap=Xr(Qc),Lh=p({},oc,{relatedTarget:0}),Jc=Xr(Lh),kh=p({},yl,{animationName:0,elapsedTime:0,pseudoElement:0}),Ng=Xr(kh),Uh=p({},yl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Mp=Xr(Uh),eu=p({},yl,{data:0}),fo=Xr(eu),yf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ip={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fh(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=Ip[l])?!!u[l]:!1}function lc(){return Fh}var xa=p({},oc,{key:function(l){if(l.key){var u=yf[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=Kc(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Cp[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lc,charCode:function(l){return l.type==="keypress"?Kc(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Kc(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),_l=Xr(xa),bf=p({},Zc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xl=Xr(bf),T=p({},oc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lc}),W=Xr(T),K=p({},yl,{propertyName:0,elapsedTime:0,pseudoElement:0}),se=Xr(K),Ae=p({},Zc,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),He=Xr(Ae),Rt=p({},yl,{newState:0,oldState:0}),En=Xr(Rt),ar=[9,13,27,32],$n=Fs&&"CompositionEvent"in window,ki=null;Fs&&"documentMode"in document&&(ki=document.documentMode);var Ba=Fs&&"TextEvent"in window&&!ki,Xo=Fs&&(!$n||ki&&8<ki&&11>=ki),Yo=" ",cs=!1;function cc(l,u){switch(l){case"keyup":return ar.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _f(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var xf=!1;function c1(l,u){switch(l){case"compositionend":return _f(u);case"keypress":return u.which!==32?null:(cs=!0,Yo);case"textInput":return l=u.data,l===Yo&&cs?null:l;default:return null}}function by(l,u){if(xf)return l==="compositionend"||!$n&&cc(l,u)?(l=Yc(),vl=Nh=za=null,xf=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Xo&&u.locale!=="ko"?null:u.data;default:return null}}var _y={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xy(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!_y[l.type]:u==="textarea"}function Og(l,u,g,b){ac?co?co.push(b):co=[b]:ac=b,u=pS(u,"onChange"),0<u.length&&(g=new qo("onChange","change",null,g,b),l.push({event:g,listeners:u}))}var tu=null,Sf=null;function u1(l){Rk(l,0)}function zh(l){var u=en(l);if(dn(u))return l}function Sy(l,u){if(l==="change")return u}var Sl=!1;if(Fs){var Rp;if(Fs){var wy="oninput"in document;if(!wy){var Ey=document.createElement("div");Ey.setAttribute("oninput","return;"),wy=typeof Ey.oninput=="function"}Rp=wy}else Rp=!1;Sl=Rp&&(!document.documentMode||9<document.documentMode)}function ho(){tu&&(tu.detachEvent("onpropertychange",Pp),Sf=tu=null)}function Pp(l){if(l.propertyName==="value"&&zh(Sf)){var u=[];Og(u,Sf,l,Us(l)),sc(u1,u)}}function f1(l,u,g){l==="focusin"?(ho(),tu=u,Sf=g,tu.attachEvent("onpropertychange",Pp)):l==="focusout"&&ho()}function Ty(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return zh(Sf)}function h1(l,u){if(l==="click")return zh(u)}function d1(l,u){if(l==="input"||l==="change")return zh(u)}function Ay(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Va=typeof Object.is=="function"?Object.is:Ay;function Bh(l,u){if(Va(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var g=Object.keys(l),b=Object.keys(u);if(g.length!==b.length)return!1;for(b=0;b<g.length;b++){var C=g[b];if(!_t.call(u,C)||!Va(l[C],u[C]))return!1}return!0}function Np(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Vh(l,u){var g=Np(l);l=0;for(var b;g;){if(g.nodeType===3){if(b=l+g.textContent.length,l<=u&&b>=u)return{node:g,offset:u-l};l=b}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Np(g)}}function Ri(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?Ri(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function p1(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=Pt(l.document);u instanceof l.HTMLIFrameElement;){try{var g=typeof u.contentWindow.location.href=="string"}catch{g=!1}if(g)l=u.contentWindow;else break;u=Pt(l.document)}return u}function My(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var m1=Fs&&"documentMode"in document&&11>=document.documentMode,wl=null,El=null,jh=null,Dg=!1;function Hh(l,u,g){var b=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Dg||wl==null||wl!==Pt(b)||(b=wl,"selectionStart"in b&&My(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),jh&&Bh(jh,b)||(jh=b,b=pS(El,"onSelect"),0<b.length&&(u=new qo("onSelect","select",null,u,g),l.push({event:u,listeners:b}),u.target=wl)))}function Sa(l,u){var g={};return g[l.toLowerCase()]=u.toLowerCase(),g["Webkit"+l]="webkit"+u,g["Moz"+l]="moz"+u,g}var wf={animationend:Sa("Animation","AnimationEnd"),animationiteration:Sa("Animation","AnimationIteration"),animationstart:Sa("Animation","AnimationStart"),transitionrun:Sa("Transition","TransitionRun"),transitionstart:Sa("Transition","TransitionStart"),transitioncancel:Sa("Transition","TransitionCancel"),transitionend:Sa("Transition","TransitionEnd")},Op={},Cy={};Fs&&(Cy=document.createElement("div").style,"AnimationEvent"in window||(delete wf.animationend.animation,delete wf.animationiteration.animation,delete wf.animationstart.animation),"TransitionEvent"in window||delete wf.transitionend.transition);function uc(l){if(Op[l])return Op[l];if(!wf[l])return l;var u=wf[l],g;for(g in u)if(u.hasOwnProperty(g)&&g in Cy)return Op[l]=u[g];return l}var Lg=uc("animationend"),Dp=uc("animationiteration"),Iy=uc("animationstart"),g1=uc("transitionrun"),CC=uc("transitionstart"),v1=uc("transitioncancel"),Ry=uc("transitionend"),po=new Map,Lp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lp.push("scrollEnd");function mo(l,u){po.set(l,u),Re(u,[l])}var kp=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},go=[],fc=0,Yr=0;function Up(){for(var l=fc,u=Yr=fc=0;u<l;){var g=go[u];go[u++]=null;var b=go[u];go[u++]=null;var C=go[u];go[u++]=null;var O=go[u];if(go[u++]=null,b!==null&&C!==null){var X=b.pending;X===null?C.next=C:(C.next=X.next,X.next=C),b.pending=C}O!==0&&nu(g,C,O)}}function Kr(l,u,g,b){go[fc++]=l,go[fc++]=u,go[fc++]=g,go[fc++]=b,Yr|=b,l.lanes|=b,l=l.alternate,l!==null&&(l.lanes|=b)}function kg(l,u,g,b){return Kr(l,u,g,b),vo(l)}function ja(l,u){return Kr(l,null,null,u),vo(l)}function nu(l,u,g){l.lanes|=g;var b=l.alternate;b!==null&&(b.lanes|=g);for(var C=!1,O=l.return;O!==null;)O.childLanes|=g,b=O.alternate,b!==null&&(b.childLanes|=g),O.tag===22&&(l=O.stateNode,l===null||l._visibility&1||(C=!0)),l=O,O=O.return;return l.tag===3?(O=l.stateNode,C&&u!==null&&(C=31-fe(g),l=O.hiddenUpdates,b=l[C],b===null?l[C]=[u]:b.push(u),u.lane=g|536870912),O):null}function vo(l){if(50<xu)throw xu=0,jf=null,Error(i(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var iu={};function Py(l,u,g,b){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $i(l,u,g,b){return new Py(l,u,g,b)}function Ug(l){return l=l.prototype,!(!l||!l.isReactComponent)}function us(l,u){var g=l.alternate;return g===null?(g=$i(l.tag,u,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=u,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&65011712,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,u=l.dependencies,g.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g.refCleanup=l.refCleanup,g}function Gh(l,u){l.flags&=65011714;var g=l.alternate;return g===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,u=g.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Tl(l,u,g,b,C,O){var X=0;if(b=l,typeof l=="function")Ug(l)&&(X=1);else if(typeof l=="string")X=LY(l,g,de.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case M:return l=$i(31,g,u,C),l.elementType=M,l.lanes=O,l;case E:return ru(g.children,C,O,u);case S:X=8,C|=24;break;case w:return l=$i(12,g,u,C|2),l.elementType=w,l.lanes=O,l;case z:return l=$i(13,g,u,C),l.elementType=z,l.lanes=O,l;case k:return l=$i(19,g,u,C),l.elementType=k,l.lanes=O,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case P:X=10;break e;case I:X=9;break e;case D:X=11;break e;case U:X=14;break e;case R:X=16,b=null;break e}X=29,g=Error(i(130,l===null?"null":typeof l,"")),b=null}return u=$i(X,g,u,C),u.elementType=l,u.type=b,u.lanes=O,u}function ru(l,u,g,b){return l=$i(7,l,b,u),l.lanes=g,l}function Fg(l,u,g){return l=$i(6,l,null,u),l.lanes=g,l}function Wh(l){var u=$i(18,null,null,0);return u.stateNode=l,u}function zg(l,u,g){return u=$i(4,l.children!==null?l.children:[],l.key,u),u.lanes=g,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var Fp=new WeakMap;function zs(l,u){if(typeof l=="object"&&l!==null){var g=Fp.get(l);return g!==void 0?g:(u={value:l,source:u,stack:oe(u)},Fp.set(l,u),u)}return{value:l,source:u,stack:oe(u)}}var au=[],su=0,qh=null,$h=0,fs=[],Vi=0,hc=null,Xi=1,Ko="";function Al(l,u){au[su++]=$h,au[su++]=qh,qh=l,$h=u}function y1(l,u,g){fs[Vi++]=Xi,fs[Vi++]=Ko,fs[Vi++]=hc,hc=l;var b=Xi;l=Ko;var C=32-fe(b)-1;b&=~(1<<C),g+=1;var O=32-fe(u)+C;if(30<O){var X=C-C%5;O=(b&(1<<X)-1).toString(32),b>>=X,C-=X,Xi=1<<32-fe(u)+C|g<<C|b,Ko=O+l}else Xi=1<<O|g<<C|b,Ko=l}function Ml(l){l.return!==null&&(Al(l,1),y1(l,1,0))}function Bg(l){for(;l===qh;)qh=au[--su],au[su]=null,$h=au[--su],au[su]=null;for(;l===hc;)hc=fs[--Vi],fs[Vi]=null,Ko=fs[--Vi],fs[Vi]=null,Xi=fs[--Vi],fs[Vi]=null}function Vg(l,u){fs[Vi++]=Xi,fs[Vi++]=Ko,fs[Vi++]=hc,Xi=u.id,Ko=u.overflow,hc=l}var sr=null,Pi=null,Wn=!1,dc=null,Bs=!1,Xh=Error(i(519));function Cl(l){var u=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Il(zs(u,l)),Xh}function b1(l){var u=l.stateNode,g=l.type,b=l.memoizedProps;switch(u[di]=l,u[Ii]=b,g){case"dialog":Yn("cancel",u),Yn("close",u);break;case"iframe":case"object":case"embed":Yn("load",u);break;case"video":case"audio":for(g=0;g<Ro.length;g++)Yn(Ro[g],u);break;case"source":Yn("error",u);break;case"img":case"image":case"link":Yn("error",u),Yn("load",u);break;case"details":Yn("toggle",u);break;case"input":Yn("invalid",u),ks(u,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0);break;case"select":Yn("invalid",u);break;case"textarea":Yn("invalid",u),Li(u,b.value,b.defaultValue,b.children)}g=b.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||u.textContent===""+g||b.suppressHydrationWarning===!0||Dk(u.textContent,g)?(b.popover!=null&&(Yn("beforetoggle",u),Yn("toggle",u)),b.onScroll!=null&&Yn("scroll",u),b.onScrollEnd!=null&&Yn("scrollend",u),b.onClick!=null&&(u.onclick=Ho),u=!0):u=!1,u||Cl(l,!0)}function _1(l){for(sr=l.return;sr;)switch(sr.tag){case 5:case 31:case 13:Bs=!1;return;case 27:case 3:Bs=!0;return;default:sr=sr.return}}function Yh(l){if(l!==sr)return!1;if(!Wn)return _1(l),Wn=!0,!1;var u=l.tag,g;if((g=u!==3&&u!==27)&&((g=u===5)&&(g=l.type,g=!(g!=="form"&&g!=="button")||GC(l.type,l.memoizedProps)),g=!g),g&&Pi&&Cl(l),_1(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));Pi=Hk(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));Pi=Hk(l)}else u===27?(u=Pi,md(l.type)?(l=YC,YC=null,Pi=l):Pi=u):Pi=sr?Hl(l.stateNode.nextSibling):null;return!0}function ou(){Pi=sr=null,Wn=!1}function jg(){var l=dc;return l!==null&&(lr===null?lr=l:lr.push.apply(lr,l),dc=null),l}function Il(l){dc===null?dc=[l]:dc.push(l)}var Kh=Q(null),lu=null,Rl=null;function pc(l,u,g){ye(Kh,u._currentValue),u._currentValue=g}function Pl(l){l._currentValue=Kh.current,re(Kh)}function Hg(l,u,g){for(;l!==null;){var b=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,b!==null&&(b.childLanes|=u)):b!==null&&(b.childLanes&u)!==u&&(b.childLanes|=u),l===g)break;l=l.return}}function Gg(l,u,g,b){var C=l.child;for(C!==null&&(C.return=l);C!==null;){var O=C.dependencies;if(O!==null){var X=C.child;O=O.firstContext;e:for(;O!==null;){var ie=O;O=C;for(var ge=0;ge<u.length;ge++)if(ie.context===u[ge]){O.lanes|=g,ie=O.alternate,ie!==null&&(ie.lanes|=g),Hg(O.return,g,l),b||(X=null);break e}O=ie.next}}else if(C.tag===18){if(X=C.return,X===null)throw Error(i(341));X.lanes|=g,O=X.alternate,O!==null&&(O.lanes|=g),Hg(X,g,l),X=null}else X=C.child;if(X!==null)X.return=C;else for(X=C;X!==null;){if(X===l){X=null;break}if(C=X.sibling,C!==null){C.return=X.return,X=C;break}X=X.return}C=X}}function Nl(l,u,g,b){l=null;for(var C=u,O=!1;C!==null;){if(!O){if((C.flags&524288)!==0)O=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var X=C.alternate;if(X===null)throw Error(i(387));if(X=X.memoizedProps,X!==null){var ie=C.type;Va(C.pendingProps.value,X.value)||(l!==null?l.push(ie):l=[ie])}}else if(C===Te.current){if(X=C.alternate,X===null)throw Error(i(387));X.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(l!==null?l.push(Cb):l=[Cb])}C=C.return}l!==null&&Gg(u,l,g,b),u.flags|=262144}function zp(l){for(l=l.firstContext;l!==null;){if(!Va(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function cu(l){lu=l,Rl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function mn(l){return x1(lu,l)}function Zh(l,u){return lu===null&&cu(l),x1(l,u)}function x1(l,u){var g=u._currentValue;if(u={context:u,memoizedValue:g,next:null},Rl===null){if(l===null)throw Error(i(308));Rl=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else Rl=Rl.next=u;return g}var S1=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(g,b){l.push(b)}};this.abort=function(){u.aborted=!0,l.forEach(function(g){return g()})}},IC=n.unstable_scheduleCallback,RC=n.unstable_NormalPriority,Tr={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ny(){return{controller:new S1,data:new Map,refCount:0}}function Ef(l){l.refCount--,l.refCount===0&&IC(RC,function(){l.controller.abort()})}var Vs=null,Wg=0,mc=0,yo=null;function Oy(l,u){if(Vs===null){var g=Vs=[];Wg=0,mc=Ge(),yo={status:"pending",value:void 0,then:function(b){g.push(b)}}}return Wg++,u.then(Dy,Dy),u}function Dy(){if(--Wg===0&&Vs!==null){yo!==null&&(yo.status="fulfilled");var l=Vs;Vs=null,mc=0,yo=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function Ly(l,u){var g=[],b={status:"pending",value:null,reason:null,then:function(C){g.push(C)}};return l.then(function(){b.status="fulfilled",b.value=u;for(var C=0;C<g.length;C++)(0,g[C])(u)},function(C){for(b.status="rejected",b.reason=C,C=0;C<g.length;C++)(0,g[C])(void 0)}),b}var w1=G.S;G.S=function(l,u){Sb=Y(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&Oy(l,u),w1!==null&&w1(l,u)};var uu=Q(null);function qg(){var l=uu.current;return l!==null?l:yn.pooledCache}function Bp(l,u){u===null?ye(uu,uu.current):ye(uu,u.pool)}function ky(){var l=qg();return l===null?null:{parent:Tr._currentValue,pool:l}}var Tf=Error(i(460)),Vp=Error(i(474)),Dn=Error(i(542)),$g={then:function(){}};function hs(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Xg(l,u,g){switch(g=l[g],g===void 0?l.push(u):g!==u&&(u.then(Ho,Ho),u=g),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,Cf(l),l;default:if(typeof u.status=="string")u.then(Ho,Ho);else{if(l=yn,l!==null&&100<l.shellSuspendCounter)throw Error(i(482));l=u,l.status="pending",l.then(function(b){if(u.status==="pending"){var C=u;C.status="fulfilled",C.value=b}},function(b){if(u.status==="pending"){var C=u;C.status="rejected",C.reason=b}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,Cf(l),l}throw Ol=u,Tf}}function Af(l){try{var u=l._init;return u(l._payload)}catch(g){throw g!==null&&typeof g=="object"&&typeof g.then=="function"?(Ol=g,Tf):g}}var Ol=null;function Mf(){if(Ol===null)throw Error(i(459));var l=Ol;return Ol=null,l}function Cf(l){if(l===Tf||l===Dn)throw Error(i(483))}var If=null,Rf=0;function jp(l){var u=Rf;return Rf+=1,If===null&&(If=[]),Xg(If,l,u)}function bo(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function Qh(l,u){throw u.$$typeof===v?Error(i(525)):(l=Object.prototype.toString.call(u),Error(i(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function Yg(l){function u(Me,we){if(l){var ke=Me.deletions;ke===null?(Me.deletions=[we],Me.flags|=16):ke.push(we)}}function g(Me,we){if(!l)return null;for(;we!==null;)u(Me,we),we=we.sibling;return null}function b(Me){for(var we=new Map;Me!==null;)Me.key!==null?we.set(Me.key,Me):we.set(Me.index,Me),Me=Me.sibling;return we}function C(Me,we){return Me=us(Me,we),Me.index=0,Me.sibling=null,Me}function O(Me,we,ke){return Me.index=ke,l?(ke=Me.alternate,ke!==null?(ke=ke.index,ke<we?(Me.flags|=67108866,we):ke):(Me.flags|=67108866,we)):(Me.flags|=1048576,we)}function X(Me){return l&&Me.alternate===null&&(Me.flags|=67108866),Me}function ie(Me,we,ke,it){return we===null||we.tag!==6?(we=Fg(ke,Me.mode,it),we.return=Me,we):(we=C(we,ke),we.return=Me,we)}function ge(Me,we,ke,it){var sn=ke.type;return sn===E?Je(Me,we,ke.props.children,it,ke.key):we!==null&&(we.elementType===sn||typeof sn=="object"&&sn!==null&&sn.$$typeof===R&&Af(sn)===we.type)?(we=C(we,ke.props),bo(we,ke),we.return=Me,we):(we=Tl(ke.type,ke.key,ke.props,null,Me.mode,it),bo(we,ke),we.return=Me,we)}function Fe(Me,we,ke,it){return we===null||we.tag!==4||we.stateNode.containerInfo!==ke.containerInfo||we.stateNode.implementation!==ke.implementation?(we=zg(ke,Me.mode,it),we.return=Me,we):(we=C(we,ke.children||[]),we.return=Me,we)}function Je(Me,we,ke,it,sn){return we===null||we.tag!==7?(we=ru(ke,Me.mode,it,sn),we.return=Me,we):(we=C(we,ke),we.return=Me,we)}function ot(Me,we,ke){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return we=Fg(""+we,Me.mode,ke),we.return=Me,we;if(typeof we=="object"&&we!==null){switch(we.$$typeof){case y:return ke=Tl(we.type,we.key,we.props,null,Me.mode,ke),bo(ke,we),ke.return=Me,ke;case _:return we=zg(we,Me.mode,ke),we.return=Me,we;case R:return we=Af(we),ot(Me,we,ke)}if(J(we)||V(we))return we=ru(we,Me.mode,ke,null),we.return=Me,we;if(typeof we.then=="function")return ot(Me,jp(we),ke);if(we.$$typeof===P)return ot(Me,Zh(Me,we),ke);Qh(Me,we)}return null}function Be(Me,we,ke,it){var sn=we!==null?we.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return sn!==null?null:ie(Me,we,""+ke,it);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case y:return ke.key===sn?ge(Me,we,ke,it):null;case _:return ke.key===sn?Fe(Me,we,ke,it):null;case R:return ke=Af(ke),Be(Me,we,ke,it)}if(J(ke)||V(ke))return sn!==null?null:Je(Me,we,ke,it,null);if(typeof ke.then=="function")return Be(Me,we,jp(ke),it);if(ke.$$typeof===P)return Be(Me,we,Zh(Me,ke),it);Qh(Me,ke)}return null}function Xe(Me,we,ke,it,sn){if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return Me=Me.get(ke)||null,ie(we,Me,""+it,sn);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case y:return Me=Me.get(it.key===null?ke:it.key)||null,ge(we,Me,it,sn);case _:return Me=Me.get(it.key===null?ke:it.key)||null,Fe(we,Me,it,sn);case R:return it=Af(it),Xe(Me,we,ke,it,sn)}if(J(it)||V(it))return Me=Me.get(ke)||null,Je(we,Me,it,sn,null);if(typeof it.then=="function")return Xe(Me,we,ke,jp(it),sn);if(it.$$typeof===P)return Xe(Me,we,ke,Zh(we,it),sn);Qh(we,it)}return null}function Xt(Me,we,ke,it){for(var sn=null,ui=null,Yt=we,Fn=we=0,Zn=null;Yt!==null&&Fn<ke.length;Fn++){Yt.index>Fn?(Zn=Yt,Yt=null):Zn=Yt.sibling;var fi=Be(Me,Yt,ke[Fn],it);if(fi===null){Yt===null&&(Yt=Zn);break}l&&Yt&&fi.alternate===null&&u(Me,Yt),we=O(fi,we,Fn),ui===null?sn=fi:ui.sibling=fi,ui=fi,Yt=Zn}if(Fn===ke.length)return g(Me,Yt),Wn&&Al(Me,Fn),sn;if(Yt===null){for(;Fn<ke.length;Fn++)Yt=ot(Me,ke[Fn],it),Yt!==null&&(we=O(Yt,we,Fn),ui===null?sn=Yt:ui.sibling=Yt,ui=Yt);return Wn&&Al(Me,Fn),sn}for(Yt=b(Yt);Fn<ke.length;Fn++)Zn=Xe(Yt,Me,Fn,ke[Fn],it),Zn!==null&&(l&&Zn.alternate!==null&&Yt.delete(Zn.key===null?Fn:Zn.key),we=O(Zn,we,Fn),ui===null?sn=Zn:ui.sibling=Zn,ui=Zn);return l&&Yt.forEach(function(_d){return u(Me,_d)}),Wn&&Al(Me,Fn),sn}function pn(Me,we,ke,it){if(ke==null)throw Error(i(151));for(var sn=null,ui=null,Yt=we,Fn=we=0,Zn=null,fi=ke.next();Yt!==null&&!fi.done;Fn++,fi=ke.next()){Yt.index>Fn?(Zn=Yt,Yt=null):Zn=Yt.sibling;var _d=Be(Me,Yt,fi.value,it);if(_d===null){Yt===null&&(Yt=Zn);break}l&&Yt&&_d.alternate===null&&u(Me,Yt),we=O(_d,we,Fn),ui===null?sn=_d:ui.sibling=_d,ui=_d,Yt=Zn}if(fi.done)return g(Me,Yt),Wn&&Al(Me,Fn),sn;if(Yt===null){for(;!fi.done;Fn++,fi=ke.next())fi=ot(Me,fi.value,it),fi!==null&&(we=O(fi,we,Fn),ui===null?sn=fi:ui.sibling=fi,ui=fi);return Wn&&Al(Me,Fn),sn}for(Yt=b(Yt);!fi.done;Fn++,fi=ke.next())fi=Xe(Yt,Me,Fn,fi.value,it),fi!==null&&(l&&fi.alternate!==null&&Yt.delete(fi.key===null?Fn:fi.key),we=O(fi,we,Fn),ui===null?sn=fi:ui.sibling=fi,ui=fi);return l&&Yt.forEach(function(qY){return u(Me,qY)}),Wn&&Al(Me,Fn),sn}function Di(Me,we,ke,it){if(typeof ke=="object"&&ke!==null&&ke.type===E&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case y:e:{for(var sn=ke.key;we!==null;){if(we.key===sn){if(sn=ke.type,sn===E){if(we.tag===7){g(Me,we.sibling),it=C(we,ke.props.children),it.return=Me,Me=it;break e}}else if(we.elementType===sn||typeof sn=="object"&&sn!==null&&sn.$$typeof===R&&Af(sn)===we.type){g(Me,we.sibling),it=C(we,ke.props),bo(it,ke),it.return=Me,Me=it;break e}g(Me,we);break}else u(Me,we);we=we.sibling}ke.type===E?(it=ru(ke.props.children,Me.mode,it,ke.key),it.return=Me,Me=it):(it=Tl(ke.type,ke.key,ke.props,null,Me.mode,it),bo(it,ke),it.return=Me,Me=it)}return X(Me);case _:e:{for(sn=ke.key;we!==null;){if(we.key===sn)if(we.tag===4&&we.stateNode.containerInfo===ke.containerInfo&&we.stateNode.implementation===ke.implementation){g(Me,we.sibling),it=C(we,ke.children||[]),it.return=Me,Me=it;break e}else{g(Me,we);break}else u(Me,we);we=we.sibling}it=zg(ke,Me.mode,it),it.return=Me,Me=it}return X(Me);case R:return ke=Af(ke),Di(Me,we,ke,it)}if(J(ke))return Xt(Me,we,ke,it);if(V(ke)){if(sn=V(ke),typeof sn!="function")throw Error(i(150));return ke=sn.call(ke),pn(Me,we,ke,it)}if(typeof ke.then=="function")return Di(Me,we,jp(ke),it);if(ke.$$typeof===P)return Di(Me,we,Zh(Me,ke),it);Qh(Me,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint"?(ke=""+ke,we!==null&&we.tag===6?(g(Me,we.sibling),it=C(we,ke),it.return=Me,Me=it):(g(Me,we),it=Fg(ke,Me.mode,it),it.return=Me,Me=it),X(Me)):g(Me,we)}return function(Me,we,ke,it){try{Rf=0;var sn=Di(Me,we,ke,it);return If=null,sn}catch(Yt){if(Yt===Tf||Yt===Dn)throw Yt;var ui=$i(29,Yt,null,Me.mode);return ui.lanes=it,ui.return=Me,ui}finally{}}}var gc=Yg(!0),Kg=Yg(!1),Ha=!1;function Hp(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uy(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function vc(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function fu(l,u,g){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(Kt&2)!==0){var C=b.pending;return C===null?u.next=u:(u.next=C.next,C.next=u),b.pending=u,u=vo(l),nu(l,null,g),u}return Kr(l,b,u,g),vo(l)}function hu(l,u,g){if(u=u.updateQueue,u!==null&&(u=u.shared,(g&4194048)!==0)){var b=u.lanes;b&=l.pendingLanes,g|=b,u.lanes=g,Ds(l,g)}}function an(l,u){var g=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,g===b)){var C=null,O=null;if(g=g.firstBaseUpdate,g!==null){do{var X={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};O===null?C=O=X:O=O.next=X,g=g.next}while(g!==null);O===null?C=O=u:O=O.next=u}else C=O=u;g={baseState:b.baseState,firstBaseUpdate:C,lastBaseUpdate:O,shared:b.shared,callbacks:b.callbacks},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=u:l.next=u,g.lastBaseUpdate=u}var Fy=!1;function Gp(){if(Fy){var l=yo;if(l!==null)throw l}}function Jh(l,u,g,b){Fy=!1;var C=l.updateQueue;Ha=!1;var O=C.firstBaseUpdate,X=C.lastBaseUpdate,ie=C.shared.pending;if(ie!==null){C.shared.pending=null;var ge=ie,Fe=ge.next;ge.next=null,X===null?O=Fe:X.next=Fe,X=ge;var Je=l.alternate;Je!==null&&(Je=Je.updateQueue,ie=Je.lastBaseUpdate,ie!==X&&(ie===null?Je.firstBaseUpdate=Fe:ie.next=Fe,Je.lastBaseUpdate=ge))}if(O!==null){var ot=C.baseState;X=0,Je=Fe=ge=null,ie=O;do{var Be=ie.lane&-536870913,Xe=Be!==ie.lane;if(Xe?(Pn&Be)===Be:(b&Be)===Be){Be!==0&&Be===mc&&(Fy=!0),Je!==null&&(Je=Je.next={lane:0,tag:ie.tag,payload:ie.payload,callback:null,next:null});e:{var Xt=l,pn=ie;Be=u;var Di=g;switch(pn.tag){case 1:if(Xt=pn.payload,typeof Xt=="function"){ot=Xt.call(Di,ot,Be);break e}ot=Xt;break e;case 3:Xt.flags=Xt.flags&-65537|128;case 0:if(Xt=pn.payload,Be=typeof Xt=="function"?Xt.call(Di,ot,Be):Xt,Be==null)break e;ot=p({},ot,Be);break e;case 2:Ha=!0}}Be=ie.callback,Be!==null&&(l.flags|=64,Xe&&(l.flags|=8192),Xe=C.callbacks,Xe===null?C.callbacks=[Be]:Xe.push(Be))}else Xe={lane:Be,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},Je===null?(Fe=Je=Xe,ge=ot):Je=Je.next=Xe,X|=Be;if(ie=ie.next,ie===null){if(ie=C.shared.pending,ie===null)break;Xe=ie,ie=Xe.next,Xe.next=null,C.lastBaseUpdate=Xe,C.shared.pending=null}}while(!0);Je===null&&(ge=ot),C.baseState=ge,C.firstBaseUpdate=Fe,C.lastBaseUpdate=Je,O===null&&(C.shared.lanes=0),Bl|=X,l.lanes=X,l.memoizedState=ot}}function ed(l,u){if(typeof l!="function")throw Error(i(191,l));l.call(u)}function E1(l,u){var g=l.callbacks;if(g!==null)for(l.callbacks=null,l=0;l<g.length;l++)ed(g[l],u)}var td=Q(null),Zg=Q(0);function T1(l,u){l=Ws,ye(Zg,l),ye(td,u),Ws=l|u.baseLanes}function zy(){ye(Zg,Ws),ye(td,td.current)}function Wp(){Ws=Zg.current,re(td),re(Zg)}var ds=Q(null),Ga=null;function yc(l){var u=l.alternate;ye(qn,qn.current&1),ye(ds,l),Ga===null&&(u===null||td.current!==null||u.memoizedState!==null)&&(Ga=l)}function By(l){ye(qn,qn.current),ye(ds,l),Ga===null&&(Ga=l)}function A1(l){l.tag===22?(ye(qn,qn.current),ye(ds,l),Ga===null&&(Ga=l)):ps()}function ps(){ye(qn,qn.current),ye(ds,ds.current)}function gr(l){re(ds),Ga===l&&(Ga=null),re(qn)}var qn=Q(0);function js(l){for(var u=l;u!==null;){if(u.tag===13){var g=u.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||$C(g)||XC(g)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var ji=0,Mn=null,_i=null,jn=null,_o=!1,nd=!1,Pf=!1,Qg=0,qp=0,id=null,Vy=0;function Yi(){throw Error(i(321))}function jy(l,u){if(u===null)return!1;for(var g=0;g<u.length&&g<l.length;g++)if(!Va(l[g],u[g]))return!1;return!0}function Jg(l,u,g,b,C,O){return ji=O,Mn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,G.H=l===null||l.memoizedState===null?rS:lb,Pf=!1,O=g(b,C),Pf=!1,nd&&(O=Nf(u,g,b,C)),M1(l),O}function M1(l){G.H=rd;var u=_i!==null&&_i.next!==null;if(ji=0,jn=_i=Mn=null,_o=!1,qp=0,id=null,u)throw Error(i(300));l===null||Ar||(l=l.dependencies,l!==null&&zp(l)&&(Ar=!0))}function Nf(l,u,g,b){Mn=l;var C=0;do{if(nd&&(id=null),qp=0,nd=!1,25<=C)throw Error(i(301));if(C+=1,jn=_i=null,l.updateQueue!=null){var O=l.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}G.H=xo,O=u(g,b)}while(nd);return O}function Of(){var l=G.H,u=l.useState()[0];return u=typeof u.then=="function"?$p(u):u,l=l.useState()[0],(_i!==null?_i.memoizedState:null)!==l&&(Mn.flags|=1024),u}function Hy(){var l=Qg!==0;return Qg=0,l}function Gy(l,u,g){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~g}function Wy(l){if(_o){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}_o=!1}ji=0,jn=_i=Mn=null,nd=!1,qp=Qg=0,id=null}function Ur(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jn===null?Mn.memoizedState=jn=l:jn=jn.next=l,jn}function vr(){if(_i===null){var l=Mn.alternate;l=l!==null?l.memoizedState:null}else l=_i.next;var u=jn===null?Mn.memoizedState:jn.next;if(u!==null)jn=u,_i=l;else{if(l===null)throw Mn.alternate===null?Error(i(467)):Error(i(310));_i=l,l={memoizedState:_i.memoizedState,baseState:_i.baseState,baseQueue:_i.baseQueue,queue:_i.queue,next:null},jn===null?Mn.memoizedState=jn=l:jn=jn.next=l}return jn}function e0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $p(l){var u=qp;return qp+=1,id===null&&(id=[]),l=Xg(id,l,u),u=Mn,(jn===null?u.memoizedState:jn.next)===null&&(u=u.alternate,G.H=u===null||u.memoizedState===null?rS:lb),l}function du(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return $p(l);if(l.$$typeof===P)return mn(l)}throw Error(i(438,String(l)))}function qy(l){var u=null,g=Mn.updateQueue;if(g!==null&&(u=g.memoCache),u==null){var b=Mn.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(u={data:b.data.map(function(C){return C.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),g===null&&(g=e0(),Mn.updateQueue=g),g.memoCache=u,g=u.data[u.index],g===void 0)for(g=u.data[u.index]=Array(l),b=0;b<l;b++)g[b]=L;return u.index++,g}function bc(l,u){return typeof u=="function"?u(l):u}function t0(l){var u=vr();return $y(u,_i,l)}function $y(l,u,g){var b=l.queue;if(b===null)throw Error(i(311));b.lastRenderedReducer=g;var C=l.baseQueue,O=b.pending;if(O!==null){if(C!==null){var X=C.next;C.next=O.next,O.next=X}u.baseQueue=C=O,b.pending=null}if(O=l.baseState,C===null)l.memoizedState=O;else{u=C.next;var ie=X=null,ge=null,Fe=u,Je=!1;do{var ot=Fe.lane&-536870913;if(ot!==Fe.lane?(Pn&ot)===ot:(ji&ot)===ot){var Be=Fe.revertLane;if(Be===0)ge!==null&&(ge=ge.next={lane:0,revertLane:0,gesture:null,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null}),ot===mc&&(Je=!0);else if((ji&Be)===Be){Fe=Fe.next,Be===mc&&(Je=!0);continue}else ot={lane:0,revertLane:Fe.revertLane,gesture:null,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null},ge===null?(ie=ge=ot,X=O):ge=ge.next=ot,Mn.lanes|=Be,Bl|=Be;ot=Fe.action,Pf&&g(O,ot),O=Fe.hasEagerState?Fe.eagerState:g(O,ot)}else Be={lane:ot,revertLane:Fe.revertLane,gesture:Fe.gesture,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null},ge===null?(ie=ge=Be,X=O):ge=ge.next=Be,Mn.lanes|=ot,Bl|=ot;Fe=Fe.next}while(Fe!==null&&Fe!==u);if(ge===null?X=O:ge.next=ie,!Va(O,l.memoizedState)&&(Ar=!0,Je&&(g=yo,g!==null)))throw g;l.memoizedState=O,l.baseState=X,l.baseQueue=ge,b.lastRenderedState=O}return C===null&&(b.lanes=0),[l.memoizedState,b.dispatch]}function Xy(l){var u=vr(),g=u.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=l;var b=g.dispatch,C=g.pending,O=u.memoizedState;if(C!==null){g.pending=null;var X=C=C.next;do O=l(O,X.action),X=X.next;while(X!==C);Va(O,u.memoizedState)||(Ar=!0),u.memoizedState=O,u.baseQueue===null&&(u.baseState=O),g.lastRenderedState=O}return[O,b]}function C1(l,u,g){var b=Mn,C=vr(),O=Wn;if(O){if(g===void 0)throw Error(i(407));g=g()}else g=u();var X=!Va((_i||C).memoizedState,g);if(X&&(C.memoizedState=g,Ar=!0),C=C.queue,nb(P1.bind(null,b,C,l),[l]),C.getSnapshot!==u||X||jn!==null&&jn.memoizedState.tag&1){if(b.flags|=2048,pu(9,{destroy:void 0},R1.bind(null,b,C,g,u),null),yn===null)throw Error(i(349));O||(ji&127)!==0||I1(b,u,g)}return g}function I1(l,u,g){l.flags|=16384,l={getSnapshot:u,value:g},u=Mn.updateQueue,u===null?(u=e0(),Mn.updateQueue=u,u.stores=[l]):(g=u.stores,g===null?u.stores=[l]:g.push(l))}function R1(l,u,g,b){u.value=g,u.getSnapshot=b,N1(u)&&O1(l)}function P1(l,u,g){return g(function(){N1(u)&&O1(l)})}function N1(l){var u=l.getSnapshot;l=l.value;try{var g=u();return!Va(l,g)}catch{return!0}}function O1(l){var u=ja(l,2);u!==null&&kn(u,l,2)}function Yy(l){var u=Ur();if(typeof l=="function"){var g=l;if(l=g(),Pf){Et(!0);try{g()}finally{Et(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bc,lastRenderedState:l},u}function Ky(l,u,g,b){return l.baseState=g,$y(l,_i,typeof b=="function"?b:bc)}function PC(l,u,g,b,C){if(a0(l))throw Error(i(485));if(l=u.action,l!==null){var O={payload:C,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(X){O.listeners.push(X)}};G.T!==null?g(!0):O.isTransition=!1,b(O),g=u.pending,g===null?(O.next=u.pending=O,D1(u,O)):(O.next=g.next,u.pending=g.next=O)}}function D1(l,u){var g=u.action,b=u.payload,C=l.state;if(u.isTransition){var O=G.T,X={};G.T=X;try{var ie=g(C,b),ge=G.S;ge!==null&&ge(X,ie),L1(l,u,ie)}catch(Fe){Zy(l,u,Fe)}finally{O!==null&&X.types!==null&&(O.types=X.types),G.T=O}}else try{O=g(C,b),L1(l,u,O)}catch(Fe){Zy(l,u,Fe)}}function L1(l,u,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(b){k1(l,u,b)},function(b){return Zy(l,u,b)}):k1(l,u,g)}function k1(l,u,g){u.status="fulfilled",u.value=g,U1(u),l.state=g,u=l.pending,u!==null&&(g=u.next,g===u?l.pending=null:(g=g.next,u.next=g,D1(l,g)))}function Zy(l,u,g){var b=l.pending;if(l.pending=null,b!==null){b=b.next;do u.status="rejected",u.reason=g,U1(u),u=u.next;while(u!==b)}l.action=null}function U1(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function Qy(l,u){return u}function Jy(l,u){if(Wn){var g=yn.formState;if(g!==null){e:{var b=Mn;if(Wn){if(Pi){t:{for(var C=Pi,O=Bs;C.nodeType!==8;){if(!O){C=null;break t}if(C=Hl(C.nextSibling),C===null){C=null;break t}}O=C.data,C=O==="F!"||O==="F"?C:null}if(C){Pi=Hl(C.nextSibling),b=C.data==="F!";break e}}Cl(b)}b=!1}b&&(u=g[0])}}return g=Ur(),g.memoizedState=g.baseState=u,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qy,lastRenderedState:u},g.queue=b,g=tS.bind(null,Mn,b),b.dispatch=g,b=Yy(!1),O=ob.bind(null,Mn,!1,b.queue),b=Ur(),C={state:u,dispatch:null,action:l,pending:null},b.queue=C,g=PC.bind(null,Mn,C,O,g),C.dispatch=g,b.memoizedState=l,[u,g,!1]}function F1(l){var u=vr();return eb(u,_i,l)}function eb(l,u,g){if(u=$y(l,u,Qy)[0],l=t0(bc)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var b=$p(u)}catch(X){throw X===Tf?Dn:X}else b=u;u=vr();var C=u.queue,O=C.dispatch;return g!==u.memoizedState&&(Mn.flags|=2048,pu(9,{destroy:void 0},z1.bind(null,C,g),null)),[b,O,l]}function z1(l,u){l.action=u}function tb(l){var u=vr(),g=_i;if(g!==null)return eb(u,g,l);vr(),u=u.memoizedState,g=vr();var b=g.queue.dispatch;return g.memoizedState=l,[u,b,!1]}function pu(l,u,g,b){return l={tag:l,create:g,deps:b,inst:u,next:null},u=Mn.updateQueue,u===null&&(u=e0(),Mn.updateQueue=u),g=u.lastEffect,g===null?u.lastEffect=l.next=l:(b=g.next,g.next=l,l.next=b,u.lastEffect=l),l}function n0(){return vr().memoizedState}function i0(l,u,g,b){var C=Ur();Mn.flags|=l,C.memoizedState=pu(1|u,{destroy:void 0},g,b===void 0?null:b)}function r0(l,u,g,b){var C=vr();b=b===void 0?null:b;var O=C.memoizedState.inst;_i!==null&&b!==null&&jy(b,_i.memoizedState.deps)?C.memoizedState=pu(u,O,g,b):(Mn.flags|=l,C.memoizedState=pu(1|u,O,g,b))}function B1(l,u){i0(8390656,8,l,u)}function nb(l,u){r0(2048,8,l,u)}function V1(l){Mn.flags|=4;var u=Mn.updateQueue;if(u===null)u=e0(),Mn.updateQueue=u,u.events=[l];else{var g=u.events;g===null?u.events=[l]:g.push(l)}}function j1(l){var u=vr().memoizedState;return V1({ref:u,nextImpl:l}),function(){if((Kt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}function H1(l,u){return r0(4,2,l,u)}function G1(l,u){return r0(4,4,l,u)}function W1(l,u){if(typeof u=="function"){l=l();var g=u(l);return function(){typeof g=="function"?g():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function q1(l,u,g){g=g!=null?g.concat([l]):null,r0(4,4,W1.bind(null,u,l),g)}function ib(){}function $1(l,u){var g=vr();u=u===void 0?null:u;var b=g.memoizedState;return u!==null&&jy(u,b[1])?b[0]:(g.memoizedState=[l,u],l)}function X1(l,u){var g=vr();u=u===void 0?null:u;var b=g.memoizedState;if(u!==null&&jy(u,b[1]))return b[0];if(b=l(),Pf){Et(!0);try{l()}finally{Et(!1)}}return g.memoizedState=[b,u],b}function rb(l,u,g){return g===void 0||(ji&1073741824)!==0&&(Pn&261930)===0?l.memoizedState=u:(l.memoizedState=g,l=Bn(),Mn.lanes|=l,Bl|=l,g)}function Y1(l,u,g,b){return Va(g,u)?g:td.current!==null?(l=rb(l,g,b),Va(l,u)||(Ar=!0),l):(ji&42)===0||(ji&1073741824)!==0&&(Pn&261930)===0?(Ar=!0,l.memoizedState=g):(l=Bn(),Mn.lanes|=l,Bl|=l,u)}function K1(l,u,g,b,C){var O=$.p;$.p=O!==0&&8>O?O:8;var X=G.T,ie={};G.T=ie,ob(l,!1,u,g);try{var ge=C(),Fe=G.S;if(Fe!==null&&Fe(ie,ge),ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var Je=Ly(ge,b);Xp(l,u,Je,$s(l))}else Xp(l,u,b,$s(l))}catch(ot){Xp(l,u,{then:function(){},status:"rejected",reason:ot},$s())}finally{$.p=O,X!==null&&ie.types!==null&&(X.types=ie.types),G.T=X}}function NC(){}function ab(l,u,g,b){if(l.tag!==5)throw Error(i(476));var C=Z1(l).queue;K1(l,C,u,ae,g===null?NC:function(){return Q1(l),g(b)})}function Z1(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bc,lastRenderedState:ae},next:null};var g={};return u.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bc,lastRenderedState:g},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function Q1(l){var u=Z1(l);u.next===null&&(u=l.alternate.memoizedState),Xp(l,u.next.queue,{},$s())}function sb(){return mn(Cb)}function J1(){return vr().memoizedState}function eS(){return vr().memoizedState}function OC(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var g=$s();l=vc(g);var b=fu(u,l,g);b!==null&&(kn(b,u,g),hu(b,u,g)),u={cache:Ny()},l.payload=u;return}u=u.return}}function DC(l,u,g){var b=$s();g={lane:b,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},a0(l)?nS(u,g):(g=kg(l,u,g,b),g!==null&&(kn(g,l,b),iS(g,u,b)))}function tS(l,u,g){var b=$s();Xp(l,u,g,b)}function Xp(l,u,g,b){var C={lane:b,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null};if(a0(l))nS(u,C);else{var O=l.alternate;if(l.lanes===0&&(O===null||O.lanes===0)&&(O=u.lastRenderedReducer,O!==null))try{var X=u.lastRenderedState,ie=O(X,g);if(C.hasEagerState=!0,C.eagerState=ie,Va(ie,X))return Kr(l,u,C,0),yn===null&&Up(),!1}catch{}finally{}if(g=kg(l,u,C,b),g!==null)return kn(g,l,b),iS(g,u,b),!0}return!1}function ob(l,u,g,b){if(b={lane:2,revertLane:Ge(),gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},a0(l)){if(u)throw Error(i(479))}else u=kg(l,g,b,2),u!==null&&kn(u,l,2)}function a0(l){var u=l.alternate;return l===Mn||u!==null&&u===Mn}function nS(l,u){nd=_o=!0;var g=l.pending;g===null?u.next=u:(u.next=g.next,g.next=u),l.pending=u}function iS(l,u,g){if((g&4194048)!==0){var b=u.lanes;b&=l.pendingLanes,g|=b,u.lanes=g,Ds(l,g)}}var rd={readContext:mn,use:du,useCallback:Yi,useContext:Yi,useEffect:Yi,useImperativeHandle:Yi,useLayoutEffect:Yi,useInsertionEffect:Yi,useMemo:Yi,useReducer:Yi,useRef:Yi,useState:Yi,useDebugValue:Yi,useDeferredValue:Yi,useTransition:Yi,useSyncExternalStore:Yi,useId:Yi,useHostTransitionStatus:Yi,useFormState:Yi,useActionState:Yi,useOptimistic:Yi,useMemoCache:Yi,useCacheRefresh:Yi};rd.useEffectEvent=Yi;var rS={readContext:mn,use:du,useCallback:function(l,u){return Ur().memoizedState=[l,u===void 0?null:u],l},useContext:mn,useEffect:B1,useImperativeHandle:function(l,u,g){g=g!=null?g.concat([l]):null,i0(4194308,4,W1.bind(null,u,l),g)},useLayoutEffect:function(l,u){return i0(4194308,4,l,u)},useInsertionEffect:function(l,u){i0(4,2,l,u)},useMemo:function(l,u){var g=Ur();u=u===void 0?null:u;var b=l();if(Pf){Et(!0);try{l()}finally{Et(!1)}}return g.memoizedState=[b,u],b},useReducer:function(l,u,g){var b=Ur();if(g!==void 0){var C=g(u);if(Pf){Et(!0);try{g(u)}finally{Et(!1)}}}else C=u;return b.memoizedState=b.baseState=C,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:C},b.queue=l,l=l.dispatch=DC.bind(null,Mn,l),[b.memoizedState,l]},useRef:function(l){var u=Ur();return l={current:l},u.memoizedState=l},useState:function(l){l=Yy(l);var u=l.queue,g=tS.bind(null,Mn,u);return u.dispatch=g,[l.memoizedState,g]},useDebugValue:ib,useDeferredValue:function(l,u){var g=Ur();return rb(g,l,u)},useTransition:function(){var l=Yy(!1);return l=K1.bind(null,Mn,l.queue,!0,!1),Ur().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,g){var b=Mn,C=Ur();if(Wn){if(g===void 0)throw Error(i(407));g=g()}else{if(g=u(),yn===null)throw Error(i(349));(Pn&127)!==0||I1(b,u,g)}C.memoizedState=g;var O={value:g,getSnapshot:u};return C.queue=O,B1(P1.bind(null,b,O,l),[l]),b.flags|=2048,pu(9,{destroy:void 0},R1.bind(null,b,O,g,u),null),g},useId:function(){var l=Ur(),u=yn.identifierPrefix;if(Wn){var g=Ko,b=Xi;g=(b&~(1<<32-fe(b)-1)).toString(32)+g,u="_"+u+"R_"+g,g=Qg++,0<g&&(u+="H"+g.toString(32)),u+="_"}else g=Vy++,u="_"+u+"r_"+g.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:sb,useFormState:Jy,useActionState:Jy,useOptimistic:function(l){var u=Ur();u.memoizedState=u.baseState=l;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=g,u=ob.bind(null,Mn,!0,g),g.dispatch=u,[l,u]},useMemoCache:qy,useCacheRefresh:function(){return Ur().memoizedState=OC.bind(null,Mn)},useEffectEvent:function(l){var u=Ur(),g={impl:l};return u.memoizedState=g,function(){if((Kt&2)!==0)throw Error(i(440));return g.impl.apply(void 0,arguments)}}},lb={readContext:mn,use:du,useCallback:$1,useContext:mn,useEffect:nb,useImperativeHandle:q1,useInsertionEffect:H1,useLayoutEffect:G1,useMemo:X1,useReducer:t0,useRef:n0,useState:function(){return t0(bc)},useDebugValue:ib,useDeferredValue:function(l,u){var g=vr();return Y1(g,_i.memoizedState,l,u)},useTransition:function(){var l=t0(bc)[0],u=vr().memoizedState;return[typeof l=="boolean"?l:$p(l),u]},useSyncExternalStore:C1,useId:J1,useHostTransitionStatus:sb,useFormState:F1,useActionState:F1,useOptimistic:function(l,u){var g=vr();return Ky(g,_i,l,u)},useMemoCache:qy,useCacheRefresh:eS};lb.useEffectEvent=j1;var xo={readContext:mn,use:du,useCallback:$1,useContext:mn,useEffect:nb,useImperativeHandle:q1,useInsertionEffect:H1,useLayoutEffect:G1,useMemo:X1,useReducer:Xy,useRef:n0,useState:function(){return Xy(bc)},useDebugValue:ib,useDeferredValue:function(l,u){var g=vr();return _i===null?rb(g,l,u):Y1(g,_i.memoizedState,l,u)},useTransition:function(){var l=Xy(bc)[0],u=vr().memoizedState;return[typeof l=="boolean"?l:$p(l),u]},useSyncExternalStore:C1,useId:J1,useHostTransitionStatus:sb,useFormState:tb,useActionState:tb,useOptimistic:function(l,u){var g=vr();return _i!==null?Ky(g,_i,l,u):(g.baseState=l,[l,g.queue.dispatch])},useMemoCache:qy,useCacheRefresh:eS};xo.useEffectEvent=j1;function s0(l,u,g,b){u=l.memoizedState,g=g(b,u),g=g==null?u:p({},u,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var Yp={enqueueSetState:function(l,u,g){l=l._reactInternals;var b=$s(),C=vc(b);C.payload=u,g!=null&&(C.callback=g),u=fu(l,C,b),u!==null&&(kn(u,l,b),hu(u,l,b))},enqueueReplaceState:function(l,u,g){l=l._reactInternals;var b=$s(),C=vc(b);C.tag=1,C.payload=u,g!=null&&(C.callback=g),u=fu(l,C,b),u!==null&&(kn(u,l,b),hu(u,l,b))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var g=$s(),b=vc(g);b.tag=2,u!=null&&(b.callback=u),u=fu(l,b,g),u!==null&&(kn(u,l,g),hu(u,l,g))}};function cb(l,u,g,b,C,O,X){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,O,X):u.prototype&&u.prototype.isPureReactComponent?!Bh(g,b)||!Bh(C,O):!0}function ub(l,u,g,b){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(g,b),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(g,b),u.state!==l&&Yp.enqueueReplaceState(u,u.state,null)}function mu(l,u){var g=u;if("ref"in u){g={};for(var b in u)b!=="ref"&&(g[b]=u[b])}if(l=l.defaultProps){g===u&&(g=p({},g));for(var C in l)g[C]===void 0&&(g[C]=l[C])}return g}function aS(l){kp(l)}function fb(l){console.error(l)}function hb(l){kp(l)}function o0(l,u){try{var g=l.onUncaughtError;g(u.value,{componentStack:u.stack})}catch(b){setTimeout(function(){throw b})}}function sS(l,u,g){try{var b=l.onCaughtError;b(g.value,{componentStack:g.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function db(l,u,g){return g=vc(g),g.tag=3,g.payload={element:null},g.callback=function(){o0(l,u)},g}function pb(l){return l=vc(l),l.tag=3,l}function oS(l,u,g,b){var C=g.type.getDerivedStateFromError;if(typeof C=="function"){var O=b.value;l.payload=function(){return C(O)},l.callback=function(){sS(u,g,b)}}var X=g.stateNode;X!==null&&typeof X.componentDidCatch=="function"&&(l.callback=function(){sS(u,g,b),typeof C!="function"&&(_r===null?_r=new Set([this]):_r.add(this));var ie=b.stack;this.componentDidCatch(b.value,{componentStack:ie!==null?ie:""})})}function Fr(l,u,g,b,C){if(g.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(u=g.alternate,u!==null&&Nl(u,g,C,!0),g=ds.current,g!==null){switch(g.tag){case 31:case 13:return Ga===null?fd():g.alternate===null&&Ki===0&&(Ki=3),g.flags&=-257,g.flags|=65536,g.lanes=C,b===$g?g.flags|=16384:(u=g.updateQueue,u===null?g.updateQueue=new Set([b]):u.add(b),om(l,b,C)),!1;case 22:return g.flags|=65536,b===$g?g.flags|=16384:(u=g.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([b])},g.updateQueue=u):(g=u.retryQueue,g===null?u.retryQueue=new Set([b]):g.add(b)),om(l,b,C)),!1}throw Error(i(435,g.tag))}return om(l,b,C),fd(),!1}if(Wn)return u=ds.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=C,b!==Xh&&(l=Error(i(422),{cause:b}),Il(zs(l,g)))):(b!==Xh&&(u=Error(i(423),{cause:b}),Il(zs(u,g))),l=l.current.alternate,l.flags|=65536,C&=-C,l.lanes|=C,b=zs(b,g),C=db(l.stateNode,b,C),an(l,C),Ki!==4&&(Ki=2)),!1;var O=Error(i(520),{cause:b});if(O=zs(O,g),Vf===null?Vf=[O]:Vf.push(O),Ki!==4&&(Ki=2),u===null)return!0;b=zs(b,g),g=u;do{switch(g.tag){case 3:return g.flags|=65536,l=C&-C,g.lanes|=l,l=db(g.stateNode,b,l),an(g,l),!1;case 1:if(u=g.type,O=g.stateNode,(g.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(_r===null||!_r.has(O))))return g.flags|=65536,C&=-C,g.lanes|=C,C=pb(C),oS(C,l,g,b),an(g,C),!1}g=g.return}while(g!==null);return!1}var l0=Error(i(461)),Ar=!1;function Zr(l,u,g,b){u.child=l===null?Kg(u,null,g,b):gc(u,l.child,g,b)}function mb(l,u,g,b,C){g=g.render;var O=u.ref;if("ref"in b){var X={};for(var ie in b)ie!=="ref"&&(X[ie]=b[ie])}else X=b;return cu(u),b=Jg(l,u,g,X,O,C),ie=Hy(),l!==null&&!Ar?(Gy(l,u,C),yr(l,u,C)):(Wn&&ie&&Ml(u),u.flags|=1,Zr(l,u,b,C),u.child)}function Df(l,u,g,b,C){if(l===null){var O=g.type;return typeof O=="function"&&!Ug(O)&&O.defaultProps===void 0&&g.compare===null?(u.tag=15,u.type=O,c0(l,u,O,b,C)):(l=Tl(g.type,null,b,u,u.mode,C),l.ref=u.ref,l.return=u,u.child=l)}if(O=l.child,!m0(l,C)){var X=O.memoizedProps;if(g=g.compare,g=g!==null?g:Bh,g(X,b)&&l.ref===u.ref)return yr(l,u,C)}return u.flags|=1,l=us(O,b),l.ref=u.ref,l.return=u,u.child=l}function c0(l,u,g,b,C){if(l!==null){var O=l.memoizedProps;if(Bh(O,b)&&l.ref===u.ref)if(Ar=!1,u.pendingProps=b=O,m0(l,C))(l.flags&131072)!==0&&(Ar=!0);else return u.lanes=l.lanes,yr(l,u,C)}return ad(l,u,g,b,C)}function Lf(l,u,g,b){var C=b.children,O=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),b.mode==="hidden"){if((u.flags&128)!==0){if(O=O!==null?O.baseLanes|g:g,l!==null){for(b=u.child=l.child,C=0;b!==null;)C=C|b.lanes|b.childLanes,b=b.sibling;b=C&~O}else b=0,u.child=null;return ms(l,u,O,g,b)}if((g&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&Bp(u,O!==null?O.cachePool:null),O!==null?T1(u,O):zy(),A1(u);else return b=u.lanes=536870912,ms(l,u,O!==null?O.baseLanes|g:g,g,b)}else O!==null?(Bp(u,O.cachePool),T1(u,O),ps(),u.memoizedState=null):(l!==null&&Bp(u,null),zy(),ps());return Zr(l,u,C,g),u.child}function Dl(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function ms(l,u,g,b,C){var O=qg();return O=O===null?null:{parent:Tr._currentValue,pool:O},u.memoizedState={baseLanes:g,cachePool:O},l!==null&&Bp(u,null),zy(),A1(u),l!==null&&Nl(l,u,b,!0),u.childLanes=C,null}function u0(l,u){return u=p0({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function lS(l,u,g){return gc(u,l.child,null,g),l=u0(u,u.pendingProps),l.flags|=2,gr(u),u.memoizedState=null,l}function f0(l,u,g){var b=u.pendingProps,C=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(Wn){if(b.mode==="hidden")return l=u0(u,b),u.lanes=536870912,Dl(null,l);if(By(u),(l=Pi)?(l=jk(l,Bs),l=l!==null&&l.data==="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:hc!==null?{id:Xi,overflow:Ko}:null,retryLane:536870912,hydrationErrors:null},g=Wh(l),g.return=u,u.child=g,sr=u,Pi=null)):l=null,l===null)throw Cl(u);return u.lanes=536870912,null}return u0(u,b)}var O=l.memoizedState;if(O!==null){var X=O.dehydrated;if(By(u),C)if(u.flags&256)u.flags&=-257,u=lS(l,u,g);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(i(558));else if(Ar||Nl(l,u,g,!1),C=(g&l.childLanes)!==0,Ar||C){if(b=yn,b!==null&&(X=Ls(b,g),X!==0&&X!==O.retryLane))throw O.retryLane=X,ja(l,X),kn(b,l,X),l0;fd(),u=lS(l,u,g)}else l=O.treeContext,Pi=Hl(X.nextSibling),sr=u,Wn=!0,dc=null,Bs=!1,l!==null&&Vg(u,l),u=u0(u,b),u.flags|=4096;return u}return l=us(l.child,{mode:b.mode,children:b.children}),l.ref=u.ref,u.child=l,l.return=u,l}function kf(l,u){var g=u.ref;if(g===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(i(284));(l===null||l.ref!==g)&&(u.flags|=4194816)}}function ad(l,u,g,b,C){return cu(u),g=Jg(l,u,g,b,void 0,C),b=Hy(),l!==null&&!Ar?(Gy(l,u,C),yr(l,u,C)):(Wn&&b&&Ml(u),u.flags|=1,Zr(l,u,g,C),u.child)}function Kp(l,u,g,b,C,O){return cu(u),u.updateQueue=null,g=Nf(u,b,g,C),M1(l),b=Hy(),l!==null&&!Ar?(Gy(l,u,O),yr(l,u,O)):(Wn&&b&&Ml(u),u.flags|=1,Zr(l,u,g,O),u.child)}function h0(l,u,g,b,C){if(cu(u),u.stateNode===null){var O=iu,X=g.contextType;typeof X=="object"&&X!==null&&(O=mn(X)),O=new g(b,O),u.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=Yp,u.stateNode=O,O._reactInternals=u,O=u.stateNode,O.props=b,O.state=u.memoizedState,O.refs={},Hp(u),X=g.contextType,O.context=typeof X=="object"&&X!==null?mn(X):iu,O.state=u.memoizedState,X=g.getDerivedStateFromProps,typeof X=="function"&&(s0(u,g,X,b),O.state=u.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(X=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),X!==O.state&&Yp.enqueueReplaceState(O,O.state,null),Jh(u,b,O,C),Gp(),O.state=u.memoizedState),typeof O.componentDidMount=="function"&&(u.flags|=4194308),b=!0}else if(l===null){O=u.stateNode;var ie=u.memoizedProps,ge=mu(g,ie);O.props=ge;var Fe=O.context,Je=g.contextType;X=iu,typeof Je=="object"&&Je!==null&&(X=mn(Je));var ot=g.getDerivedStateFromProps;Je=typeof ot=="function"||typeof O.getSnapshotBeforeUpdate=="function",ie=u.pendingProps!==ie,Je||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(ie||Fe!==X)&&ub(u,O,b,X),Ha=!1;var Be=u.memoizedState;O.state=Be,Jh(u,b,O,C),Gp(),Fe=u.memoizedState,ie||Be!==Fe||Ha?(typeof ot=="function"&&(s0(u,g,ot,b),Fe=u.memoizedState),(ge=Ha||cb(u,g,ge,b,Be,Fe,X))?(Je||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(u.flags|=4194308)):(typeof O.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=b,u.memoizedState=Fe),O.props=b,O.state=Fe,O.context=X,b=ge):(typeof O.componentDidMount=="function"&&(u.flags|=4194308),b=!1)}else{O=u.stateNode,Uy(l,u),X=u.memoizedProps,Je=mu(g,X),O.props=Je,ot=u.pendingProps,Be=O.context,Fe=g.contextType,ge=iu,typeof Fe=="object"&&Fe!==null&&(ge=mn(Fe)),ie=g.getDerivedStateFromProps,(Fe=typeof ie=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(X!==ot||Be!==ge)&&ub(u,O,b,ge),Ha=!1,Be=u.memoizedState,O.state=Be,Jh(u,b,O,C),Gp();var Xe=u.memoizedState;X!==ot||Be!==Xe||Ha||l!==null&&l.dependencies!==null&&zp(l.dependencies)?(typeof ie=="function"&&(s0(u,g,ie,b),Xe=u.memoizedState),(Je=Ha||cb(u,g,Je,b,Be,Xe,ge)||l!==null&&l.dependencies!==null&&zp(l.dependencies))?(Fe||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(b,Xe,ge),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(b,Xe,ge)),typeof O.componentDidUpdate=="function"&&(u.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof O.componentDidUpdate!="function"||X===l.memoizedProps&&Be===l.memoizedState||(u.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||X===l.memoizedProps&&Be===l.memoizedState||(u.flags|=1024),u.memoizedProps=b,u.memoizedState=Xe),O.props=b,O.state=Xe,O.context=ge,b=Je):(typeof O.componentDidUpdate!="function"||X===l.memoizedProps&&Be===l.memoizedState||(u.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||X===l.memoizedProps&&Be===l.memoizedState||(u.flags|=1024),b=!1)}return O=b,kf(l,u),b=(u.flags&128)!==0,O||b?(O=u.stateNode,g=b&&typeof g.getDerivedStateFromError!="function"?null:O.render(),u.flags|=1,l!==null&&b?(u.child=gc(u,l.child,null,C),u.child=gc(u,null,g,C)):Zr(l,u,g,C),u.memoizedState=O.state,l=u.child):l=yr(l,u,C),l}function cS(l,u,g,b){return ou(),u.flags|=256,Zr(l,u,g,b),u.child}var gb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wa(l){return{baseLanes:l,cachePool:ky()}}function d0(l,u,g){return l=l!==null?l.childLanes&~g:0,u&&(l|=$a),l}function uS(l,u,g){var b=u.pendingProps,C=!1,O=(u.flags&128)!==0,X;if((X=O)||(X=l!==null&&l.memoizedState===null?!1:(qn.current&2)!==0),X&&(C=!0,u.flags&=-129),X=(u.flags&32)!==0,u.flags&=-33,l===null){if(Wn){if(C?yc(u):ps(),(l=Pi)?(l=jk(l,Bs),l=l!==null&&l.data!=="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:hc!==null?{id:Xi,overflow:Ko}:null,retryLane:536870912,hydrationErrors:null},g=Wh(l),g.return=u,u.child=g,sr=u,Pi=null)):l=null,l===null)throw Cl(u);return XC(l)?u.lanes=32:u.lanes=536870912,null}var ie=b.children;return b=b.fallback,C?(ps(),C=u.mode,ie=p0({mode:"hidden",children:ie},C),b=ru(b,C,g,null),ie.return=u,b.return=u,ie.sibling=b,u.child=ie,b=u.child,b.memoizedState=wa(g),b.childLanes=d0(l,X,g),u.memoizedState=gb,Dl(null,b)):(yc(u),Zp(u,ie))}var ge=l.memoizedState;if(ge!==null&&(ie=ge.dehydrated,ie!==null)){if(O)u.flags&256?(yc(u),u.flags&=-257,u=vb(l,u,g)):u.memoizedState!==null?(ps(),u.child=l.child,u.flags|=128,u=null):(ps(),ie=b.fallback,C=u.mode,b=p0({mode:"visible",children:b.children},C),ie=ru(ie,C,g,null),ie.flags|=2,b.return=u,ie.return=u,b.sibling=ie,u.child=b,gc(u,l.child,null,g),b=u.child,b.memoizedState=wa(g),b.childLanes=d0(l,X,g),u.memoizedState=gb,u=Dl(null,b));else if(yc(u),XC(ie)){if(X=ie.nextSibling&&ie.nextSibling.dataset,X)var Fe=X.dgst;X=Fe,b=Error(i(419)),b.stack="",b.digest=X,Il({value:b,source:null,stack:null}),u=vb(l,u,g)}else if(Ar||Nl(l,u,g,!1),X=(g&l.childLanes)!==0,Ar||X){if(X=yn,X!==null&&(b=Ls(X,g),b!==0&&b!==ge.retryLane))throw ge.retryLane=b,ja(l,b),kn(X,l,b),l0;$C(ie)||fd(),u=vb(l,u,g)}else $C(ie)?(u.flags|=192,u.child=l.child,u=null):(l=ge.treeContext,Pi=Hl(ie.nextSibling),sr=u,Wn=!0,dc=null,Bs=!1,l!==null&&Vg(u,l),u=Zp(u,b.children),u.flags|=4096);return u}return C?(ps(),ie=b.fallback,C=u.mode,ge=l.child,Fe=ge.sibling,b=us(ge,{mode:"hidden",children:b.children}),b.subtreeFlags=ge.subtreeFlags&65011712,Fe!==null?ie=us(Fe,ie):(ie=ru(ie,C,g,null),ie.flags|=2),ie.return=u,b.return=u,b.sibling=ie,u.child=b,Dl(null,b),b=u.child,ie=l.child.memoizedState,ie===null?ie=wa(g):(C=ie.cachePool,C!==null?(ge=Tr._currentValue,C=C.parent!==ge?{parent:ge,pool:ge}:C):C=ky(),ie={baseLanes:ie.baseLanes|g,cachePool:C}),b.memoizedState=ie,b.childLanes=d0(l,X,g),u.memoizedState=gb,Dl(l.child,b)):(yc(u),g=l.child,l=g.sibling,g=us(g,{mode:"visible",children:b.children}),g.return=u,g.sibling=null,l!==null&&(X=u.deletions,X===null?(u.deletions=[l],u.flags|=16):X.push(l)),u.child=g,u.memoizedState=null,g)}function Zp(l,u){return u=p0({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function p0(l,u){return l=$i(22,l,null,u),l.lanes=0,l}function vb(l,u,g){return gc(u,l.child,null,g),l=Zp(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function fS(l,u,g){l.lanes|=u;var b=l.alternate;b!==null&&(b.lanes|=u),Hg(l.return,u,g)}function Uf(l,u,g,b,C,O){var X=l.memoizedState;X===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:b,tail:g,tailMode:C,treeForkCount:O}:(X.isBackwards=u,X.rendering=null,X.renderingStartTime=0,X.last=b,X.tail=g,X.tailMode=C,X.treeForkCount=O)}function gs(l,u,g){var b=u.pendingProps,C=b.revealOrder,O=b.tail;b=b.children;var X=qn.current,ie=(X&2)!==0;if(ie?(X=X&1|2,u.flags|=128):X&=1,ye(qn,X),Zr(l,u,b,g),b=Wn?$h:0,!ie&&l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&fS(l,g,u);else if(l.tag===19)fS(l,g,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(C){case"forwards":for(g=u.child,C=null;g!==null;)l=g.alternate,l!==null&&js(l)===null&&(C=g),g=g.sibling;g=C,g===null?(C=u.child,u.child=null):(C=g.sibling,g.sibling=null),Uf(u,!1,C,g,O,b);break;case"backwards":case"unstable_legacy-backwards":for(g=null,C=u.child,u.child=null;C!==null;){if(l=C.alternate,l!==null&&js(l)===null){u.child=C;break}l=C.sibling,C.sibling=g,g=C,C=l}Uf(u,!0,g,null,O,b);break;case"together":Uf(u,!1,null,null,void 0,b);break;default:u.memoizedState=null}return u.child}function yr(l,u,g){if(l!==null&&(u.dependencies=l.dependencies),Bl|=u.lanes,(g&u.childLanes)===0)if(l!==null){if(Nl(l,u,g,!1),(g&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(i(153));if(u.child!==null){for(l=u.child,g=us(l,l.pendingProps),u.child=g,g.return=u;l.sibling!==null;)l=l.sibling,g=g.sibling=us(l,l.pendingProps),g.return=u;g.sibling=null}return u.child}function m0(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&zp(l)))}function LC(l,u,g){switch(u.tag){case 3:Ze(u,u.stateNode.containerInfo),pc(u,Tr,l.memoizedState.cache),ou();break;case 27:case 5:Ve(u);break;case 4:Ze(u,u.stateNode.containerInfo);break;case 10:pc(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,By(u),null;break;case 13:var b=u.memoizedState;if(b!==null)return b.dehydrated!==null?(yc(u),u.flags|=128,null):(g&u.child.childLanes)!==0?uS(l,u,g):(yc(u),l=yr(l,u,g),l!==null?l.sibling:null);yc(u);break;case 19:var C=(l.flags&128)!==0;if(b=(g&u.childLanes)!==0,b||(Nl(l,u,g,!1),b=(g&u.childLanes)!==0),C){if(b)return gs(l,u,g);u.flags|=128}if(C=u.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),ye(qn,qn.current),b)break;return null;case 22:return u.lanes=0,Lf(l,u,g,u.pendingProps);case 24:pc(u,Tr,l.memoizedState.cache)}return yr(l,u,g)}function g0(l,u,g){if(l!==null)if(l.memoizedProps!==u.pendingProps)Ar=!0;else{if(!m0(l,g)&&(u.flags&128)===0)return Ar=!1,LC(l,u,g);Ar=(l.flags&131072)!==0}else Ar=!1,Wn&&(u.flags&1048576)!==0&&y1(u,$h,u.index);switch(u.lanes=0,u.tag){case 16:e:{var b=u.pendingProps;if(l=Af(u.elementType),u.type=l,typeof l=="function")Ug(l)?(b=mu(l,b),u.tag=1,u=h0(null,u,l,b,g)):(u.tag=0,u=ad(null,u,l,b,g));else{if(l!=null){var C=l.$$typeof;if(C===D){u.tag=11,u=mb(null,u,l,b,g);break e}else if(C===U){u.tag=14,u=Df(null,u,l,b,g);break e}}throw u=Z(l)||l,Error(i(306,u,""))}}return u;case 0:return ad(l,u,u.type,u.pendingProps,g);case 1:return b=u.type,C=mu(b,u.pendingProps),h0(l,u,b,C,g);case 3:e:{if(Ze(u,u.stateNode.containerInfo),l===null)throw Error(i(387));b=u.pendingProps;var O=u.memoizedState;C=O.element,Uy(l,u),Jh(u,b,null,g);var X=u.memoizedState;if(b=X.cache,pc(u,Tr,b),b!==O.cache&&Gg(u,[Tr],g,!0),Gp(),b=X.element,O.isDehydrated)if(O={element:b,isDehydrated:!1,cache:X.cache},u.updateQueue.baseState=O,u.memoizedState=O,u.flags&256){u=cS(l,u,b,g);break e}else if(b!==C){C=zs(Error(i(424)),u),Il(C),u=cS(l,u,b,g);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Pi=Hl(l.firstChild),sr=u,Wn=!0,dc=null,Bs=!0,g=Kg(u,null,b,g),u.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(ou(),b===C){u=yr(l,u,g);break e}Zr(l,u,b,g)}u=u.child}return u;case 26:return kf(l,u),l===null?(g=Xk(u.type,null,u.pendingProps,null))?u.memoizedState=g:Wn||(g=u.type,l=u.pendingProps,b=mS(ve.current).createElement(g),b[di]=u,b[Ii]=l,Ya(b,g,l),ee(b),u.stateNode=b):u.memoizedState=Xk(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return Ve(u),l===null&&Wn&&(b=u.stateNode=Wk(u.type,u.pendingProps,ve.current),sr=u,Bs=!0,C=Pi,md(u.type)?(YC=C,Pi=Hl(b.firstChild)):Pi=C),Zr(l,u,u.pendingProps.children,g),kf(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&Wn&&((C=b=Pi)&&(b=SY(b,u.type,u.pendingProps,Bs),b!==null?(u.stateNode=b,sr=u,Pi=Hl(b.firstChild),Bs=!1,C=!0):C=!1),C||Cl(u)),Ve(u),C=u.type,O=u.pendingProps,X=l!==null?l.memoizedProps:null,b=O.children,GC(C,O)?b=null:X!==null&&GC(C,X)&&(u.flags|=32),u.memoizedState!==null&&(C=Jg(l,u,Of,null,null,g),Cb._currentValue=C),kf(l,u),Zr(l,u,b,g),u.child;case 6:return l===null&&Wn&&((l=g=Pi)&&(g=wY(g,u.pendingProps,Bs),g!==null?(u.stateNode=g,sr=u,Pi=null,l=!0):l=!1),l||Cl(u)),null;case 13:return uS(l,u,g);case 4:return Ze(u,u.stateNode.containerInfo),b=u.pendingProps,l===null?u.child=gc(u,null,b,g):Zr(l,u,b,g),u.child;case 11:return mb(l,u,u.type,u.pendingProps,g);case 7:return Zr(l,u,u.pendingProps,g),u.child;case 8:return Zr(l,u,u.pendingProps.children,g),u.child;case 12:return Zr(l,u,u.pendingProps.children,g),u.child;case 10:return b=u.pendingProps,pc(u,u.type,b.value),Zr(l,u,b.children,g),u.child;case 9:return C=u.type._context,b=u.pendingProps.children,cu(u),C=mn(C),b=b(C),u.flags|=1,Zr(l,u,b,g),u.child;case 14:return Df(l,u,u.type,u.pendingProps,g);case 15:return c0(l,u,u.type,u.pendingProps,g);case 19:return gs(l,u,g);case 31:return f0(l,u,g);case 22:return Lf(l,u,g,u.pendingProps);case 24:return cu(u),b=mn(Tr),l===null?(C=qg(),C===null&&(C=yn,O=Ny(),C.pooledCache=O,O.refCount++,O!==null&&(C.pooledCacheLanes|=g),C=O),u.memoizedState={parent:b,cache:C},Hp(u),pc(u,Tr,C)):((l.lanes&g)!==0&&(Uy(l,u),Jh(u,null,null,g),Gp()),C=l.memoizedState,O=u.memoizedState,C.parent!==b?(C={parent:b,cache:b},u.memoizedState=C,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=C),pc(u,Tr,b)):(b=O.cache,pc(u,Tr,b),b!==C.cache&&Gg(u,[Tr],g,!0))),Zr(l,u,u.pendingProps.children,g),u.child;case 29:throw u.pendingProps}throw Error(i(156,u.tag))}function Ll(l){l.flags|=4}function Qp(l,u,g,b,C){if((u=(l.mode&32)!==0)&&(u=!1),u){if(l.flags|=16777216,(C&335544128)===C)if(l.stateNode.complete)l.flags|=8192;else if(Qi())l.flags|=8192;else throw Ol=$g,Vp}else l.flags&=-16777217}function yb(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!Jk(u))if(Qi())l.flags|=8192;else throw Ol=$g,Vp}function _c(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?rn():536870912,l.lanes|=u,Ui|=u)}function kl(l,u){if(!Wn)switch(l.tailMode){case"hidden":u=l.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function xi(l){var u=l.alternate!==null&&l.alternate.child===l.child,g=0,b=0;if(u)for(var C=l.child;C!==null;)g|=C.lanes|C.childLanes,b|=C.subtreeFlags&65011712,b|=C.flags&65011712,C.return=l,C=C.sibling;else for(C=l.child;C!==null;)g|=C.lanes|C.childLanes,b|=C.subtreeFlags,b|=C.flags,C.return=l,C=C.sibling;return l.subtreeFlags|=b,l.childLanes=g,u}function Jp(l,u,g){var b=u.pendingProps;switch(Bg(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xi(u),null;case 1:return xi(u),null;case 3:return g=u.stateNode,b=null,l!==null&&(b=l.memoizedState.cache),u.memoizedState.cache!==b&&(u.flags|=2048),Pl(Tr),be(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(Yh(u)?Ll(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,jg())),xi(u),null;case 26:var C=u.type,O=u.memoizedState;return l===null?(Ll(u),O!==null?(xi(u),yb(u,O)):(xi(u),Qp(u,C,null,b,g))):O?O!==l.memoizedState?(Ll(u),xi(u),yb(u,O)):(xi(u),u.flags&=-16777217):(l=l.memoizedProps,l!==b&&Ll(u),xi(u),Qp(u,C,l,b,g)),null;case 27:if(vt(u),g=ve.current,C=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==b&&Ll(u);else{if(!b){if(u.stateNode===null)throw Error(i(166));return xi(u),null}l=de.current,Yh(u)?b1(u):(l=Wk(C,b,g),u.stateNode=l,Ll(u))}return xi(u),null;case 5:if(vt(u),C=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==b&&Ll(u);else{if(!b){if(u.stateNode===null)throw Error(i(166));return xi(u),null}if(O=de.current,Yh(u))b1(u);else{var X=mS(ve.current);switch(O){case 1:O=X.createElementNS("http://www.w3.org/2000/svg",C);break;case 2:O=X.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;default:switch(C){case"svg":O=X.createElementNS("http://www.w3.org/2000/svg",C);break;case"math":O=X.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;case"script":O=X.createElement("div"),O.innerHTML="<script><\/script>",O=O.removeChild(O.firstChild);break;case"select":O=typeof b.is=="string"?X.createElement("select",{is:b.is}):X.createElement("select"),b.multiple?O.multiple=!0:b.size&&(O.size=b.size);break;default:O=typeof b.is=="string"?X.createElement(C,{is:b.is}):X.createElement(C)}}O[di]=u,O[Ii]=b;e:for(X=u.child;X!==null;){if(X.tag===5||X.tag===6)O.appendChild(X.stateNode);else if(X.tag!==4&&X.tag!==27&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===u)break e;for(;X.sibling===null;){if(X.return===null||X.return===u)break e;X=X.return}X.sibling.return=X.return,X=X.sibling}u.stateNode=O;e:switch(Ya(O,C,b),C){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}b&&Ll(u)}}return xi(u),Qp(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,g),null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==b&&Ll(u);else{if(typeof b!="string"&&u.stateNode===null)throw Error(i(166));if(l=ve.current,Yh(u)){if(l=u.stateNode,g=u.memoizedProps,b=null,C=sr,C!==null)switch(C.tag){case 27:case 5:b=C.memoizedProps}l[di]=u,l=!!(l.nodeValue===g||b!==null&&b.suppressHydrationWarning===!0||Dk(l.nodeValue,g)),l||Cl(u,!0)}else l=mS(l).createTextNode(b),l[di]=u,u.stateNode=l}return xi(u),null;case 31:if(g=u.memoizedState,l===null||l.memoizedState!==null){if(b=Yh(u),g!==null){if(l===null){if(!b)throw Error(i(318));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(557));l[di]=u}else ou(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;xi(u),l=!1}else g=jg(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=g),l=!0;if(!l)return u.flags&256?(gr(u),u):(gr(u),null);if((u.flags&128)!==0)throw Error(i(558))}return xi(u),null;case 13:if(b=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(C=Yh(u),b!==null&&b.dehydrated!==null){if(l===null){if(!C)throw Error(i(318));if(C=u.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(i(317));C[di]=u}else ou(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;xi(u),C=!1}else C=jg(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=C),C=!0;if(!C)return u.flags&256?(gr(u),u):(gr(u),null)}return gr(u),(u.flags&128)!==0?(u.lanes=g,u):(g=b!==null,l=l!==null&&l.memoizedState!==null,g&&(b=u.child,C=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(C=b.alternate.memoizedState.cachePool.pool),O=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(O=b.memoizedState.cachePool.pool),O!==C&&(b.flags|=2048)),g!==l&&g&&(u.child.flags|=8192),_c(u,u.updateQueue),xi(u),null);case 4:return be(),l===null&&zC(u.stateNode.containerInfo),xi(u),null;case 10:return Pl(u.type),xi(u),null;case 19:if(re(qn),b=u.memoizedState,b===null)return xi(u),null;if(C=(u.flags&128)!==0,O=b.rendering,O===null)if(C)kl(b,!1);else{if(Ki!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(O=js(l),O!==null){for(u.flags|=128,kl(b,!1),l=O.updateQueue,u.updateQueue=l,_c(u,l),u.subtreeFlags=0,l=g,g=u.child;g!==null;)Gh(g,l),g=g.sibling;return ye(qn,qn.current&1|2),Wn&&Al(u,b.treeForkCount),u.child}l=l.sibling}b.tail!==null&&Y()>br&&(u.flags|=128,C=!0,kl(b,!1),u.lanes=4194304)}else{if(!C)if(l=js(O),l!==null){if(u.flags|=128,C=!0,l=l.updateQueue,u.updateQueue=l,_c(u,l),kl(b,!0),b.tail===null&&b.tailMode==="hidden"&&!O.alternate&&!Wn)return xi(u),null}else 2*Y()-b.renderingStartTime>br&&g!==536870912&&(u.flags|=128,C=!0,kl(b,!1),u.lanes=4194304);b.isBackwards?(O.sibling=u.child,u.child=O):(l=b.last,l!==null?l.sibling=O:u.child=O,b.last=O)}return b.tail!==null?(l=b.tail,b.rendering=l,b.tail=l.sibling,b.renderingStartTime=Y(),l.sibling=null,g=qn.current,ye(qn,C?g&1|2:g&1),Wn&&Al(u,b.treeForkCount),l):(xi(u),null);case 22:case 23:return gr(u),Wp(),b=u.memoizedState!==null,l!==null?l.memoizedState!==null!==b&&(u.flags|=8192):b&&(u.flags|=8192),b?(g&536870912)!==0&&(u.flags&128)===0&&(xi(u),u.subtreeFlags&6&&(u.flags|=8192)):xi(u),g=u.updateQueue,g!==null&&_c(u,g.retryQueue),g=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),b=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(b=u.memoizedState.cachePool.pool),b!==g&&(u.flags|=2048),l!==null&&re(uu),null;case 24:return g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),Pl(Tr),xi(u),null;case 25:return null;case 30:return null}throw Error(i(156,u.tag))}function So(l,u){switch(Bg(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Pl(Tr),be(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return vt(u),null;case 31:if(u.memoizedState!==null){if(gr(u),u.alternate===null)throw Error(i(340));ou()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(gr(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(i(340));ou()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return re(qn),null;case 4:return be(),null;case 10:return Pl(u.type),null;case 22:case 23:return gr(u),Wp(),l!==null&&re(uu),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return Pl(Tr),null;case 25:return null;default:return null}}function Hs(l,u){switch(Bg(u),u.tag){case 3:Pl(Tr),be();break;case 26:case 27:case 5:vt(u);break;case 4:be();break;case 31:u.memoizedState!==null&&gr(u);break;case 13:gr(u);break;case 19:re(qn);break;case 10:Pl(u.type);break;case 22:case 23:gr(u),Wp(),l!==null&&re(uu);break;case 24:Pl(Tr)}}function wo(l,u){try{var g=u.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var C=b.next;g=C;do{if((g.tag&l)===l){b=void 0;var O=g.create,X=g.inst;b=O(),X.destroy=b}g=g.next}while(g!==C)}}catch(ie){ri(u,u.return,ie)}}function ca(l,u,g){try{var b=u.updateQueue,C=b!==null?b.lastEffect:null;if(C!==null){var O=C.next;b=O;do{if((b.tag&l)===l){var X=b.inst,ie=X.destroy;if(ie!==void 0){X.destroy=void 0,C=u;var ge=g,Fe=ie;try{Fe()}catch(Je){ri(C,ge,Je)}}}b=b.next}while(b!==O)}}catch(Je){ri(u,u.return,Je)}}function Zo(l){var u=l.updateQueue;if(u!==null){var g=l.stateNode;try{E1(u,g)}catch(b){ri(l,l.return,b)}}}function Qr(l,u,g){g.props=mu(l.type,l.memoizedProps),g.state=l.memoizedState;try{g.componentWillUnmount()}catch(b){ri(l,u,b)}}function xc(l,u){try{var g=l.ref;if(g!==null){switch(l.tag){case 26:case 27:case 5:var b=l.stateNode;break;case 30:b=l.stateNode;break;default:b=l.stateNode}typeof g=="function"?l.refCleanup=g(b):g.current=b}}catch(C){ri(l,u,C)}}function ua(l,u){var g=l.ref,b=l.refCleanup;if(g!==null)if(typeof b=="function")try{b()}catch(C){ri(l,u,C)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(C){ri(l,u,C)}else g.current=null}function em(l){var u=l.type,g=l.memoizedProps,b=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":g.autoFocus&&b.focus();break e;case"img":g.src?b.src=g.src:g.srcSet&&(b.srcset=g.srcSet)}}catch(C){ri(l,l.return,C)}}function zr(l,u,g){try{var b=l.stateNode;gY(b,l.type,g,u),b[Ii]=u}catch(C){ri(l,l.return,C)}}function Hi(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&md(l.type)||l.tag===4}function Hn(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Hi(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&md(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Ul(l,u,g){var b=l.tag;if(b===5||b===6)l=l.stateNode,u?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(l,u):(u=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,u.appendChild(l),g=g._reactRootContainer,g!=null||u.onclick!==null||(u.onclick=Ho));else if(b!==4&&(b===27&&md(l.type)&&(g=l.stateNode,u=null),l=l.child,l!==null))for(Ul(l,u,g),l=l.sibling;l!==null;)Ul(l,u,g),l=l.sibling}function Wa(l,u,g){var b=l.tag;if(b===5||b===6)l=l.stateNode,u?g.insertBefore(l,u):g.appendChild(l);else if(b!==4&&(b===27&&md(l.type)&&(g=l.stateNode),l=l.child,l!==null))for(Wa(l,u,g),l=l.sibling;l!==null;)Wa(l,u,g),l=l.sibling}function v0(l){var u=l.stateNode,g=l.memoizedProps;try{for(var b=l.type,C=u.attributes;C.length;)u.removeAttributeNode(C[0]);Ya(u,b,g),u[di]=l,u[Ii]=g}catch(O){ri(l,l.return,O)}}var Eo=!1,Ni=!1,Qo=!1,hS=typeof WeakSet=="function"?WeakSet:Set,Jr=null;function kC(l,u){if(l=l.containerInfo,jC=SS,l=p1(l),My(l)){if("selectionStart"in l)var g={start:l.selectionStart,end:l.selectionEnd};else e:{g=(g=l.ownerDocument)&&g.defaultView||window;var b=g.getSelection&&g.getSelection();if(b&&b.rangeCount!==0){g=b.anchorNode;var C=b.anchorOffset,O=b.focusNode;b=b.focusOffset;try{g.nodeType,O.nodeType}catch{g=null;break e}var X=0,ie=-1,ge=-1,Fe=0,Je=0,ot=l,Be=null;t:for(;;){for(var Xe;ot!==g||C!==0&&ot.nodeType!==3||(ie=X+C),ot!==O||b!==0&&ot.nodeType!==3||(ge=X+b),ot.nodeType===3&&(X+=ot.nodeValue.length),(Xe=ot.firstChild)!==null;)Be=ot,ot=Xe;for(;;){if(ot===l)break t;if(Be===g&&++Fe===C&&(ie=X),Be===O&&++Je===b&&(ge=X),(Xe=ot.nextSibling)!==null)break;ot=Be,Be=ot.parentNode}ot=Xe}g=ie===-1||ge===-1?null:{start:ie,end:ge}}else g=null}g=g||{start:0,end:0}}else g=null;for(HC={focusedElem:l,selectionRange:g},SS=!1,Jr=u;Jr!==null;)if(u=Jr,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,Jr=l;else for(;Jr!==null;){switch(u=Jr,O=u.alternate,l=u.flags,u.tag){case 0:if((l&4)!==0&&(l=u.updateQueue,l=l!==null?l.events:null,l!==null))for(g=0;g<l.length;g++)C=l[g],C.ref.impl=C.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&O!==null){l=void 0,g=u,C=O.memoizedProps,O=O.memoizedState,b=g.stateNode;try{var Xt=mu(g.type,C);l=b.getSnapshotBeforeUpdate(Xt,O),b.__reactInternalSnapshotBeforeUpdate=l}catch(pn){ri(g,g.return,pn)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,g=l.nodeType,g===9)qC(l);else if(g===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":qC(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(i(163))}if(l=u.sibling,l!==null){l.return=u.return,Jr=l;break}Jr=u.return}}function Gi(l,u,g){var b=g.flags;switch(g.tag){case 0:case 11:case 15:Mo(l,g),b&4&&wo(5,g);break;case 1:if(Mo(l,g),b&4)if(l=g.stateNode,u===null)try{l.componentDidMount()}catch(X){ri(g,g.return,X)}else{var C=mu(g.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(C,u,l.__reactInternalSnapshotBeforeUpdate)}catch(X){ri(g,g.return,X)}}b&64&&Zo(g),b&512&&xc(g,g.return);break;case 3:if(Mo(l,g),b&64&&(l=g.updateQueue,l!==null)){if(u=null,g.child!==null)switch(g.child.tag){case 27:case 5:u=g.child.stateNode;break;case 1:u=g.child.stateNode}try{E1(l,u)}catch(X){ri(g,g.return,X)}}break;case 27:u===null&&b&4&&v0(g);case 26:case 5:Mo(l,g),u===null&&b&4&&em(g),b&512&&xc(g,g.return);break;case 12:Mo(l,g);break;case 31:Mo(l,g),b&4&&gu(l,g);break;case 13:Mo(l,g),b&4&&sd(l,g),b&64&&(l=g.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(g=x.bind(null,g),EY(l,g))));break;case 22:if(b=g.memoizedState!==null||Eo,!b){u=u!==null&&u.memoizedState!==null||Ni,C=Eo;var O=Ni;Eo=b,(Ni=u)&&!O?qa(l,g,(g.subtreeFlags&8772)!==0):Mo(l,g),Eo=C,Ni=O}break;case 30:break;default:Mo(l,g)}}function tm(l){var u=l.alternate;u!==null&&(l.alternate=null,tm(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&We(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var mi=null,Ea=!1;function To(l,u,g){for(g=g.child;g!==null;)y0(l,u,g),g=g.sibling}function y0(l,u,g){if(st&&typeof st.onCommitFiberUnmount=="function")try{st.onCommitFiberUnmount(et,g)}catch{}switch(g.tag){case 26:Ni||ua(g,u),To(l,u,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Ni||ua(g,u);var b=mi,C=Ea;md(g.type)&&(mi=g.stateNode,Ea=!1),To(l,u,g),Tb(g.stateNode),mi=b,Ea=C;break;case 5:Ni||ua(g,u);case 6:if(b=mi,C=Ea,mi=null,To(l,u,g),mi=b,Ea=C,mi!==null)if(Ea)try{(mi.nodeType===9?mi.body:mi.nodeName==="HTML"?mi.ownerDocument.body:mi).removeChild(g.stateNode)}catch(O){ri(g,u,O)}else try{mi.removeChild(g.stateNode)}catch(O){ri(g,u,O)}break;case 18:mi!==null&&(Ea?(l=mi,Bk(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,g.stateNode),A0(l)):Bk(mi,g.stateNode));break;case 4:b=mi,C=Ea,mi=g.stateNode.containerInfo,Ea=!0,To(l,u,g),mi=b,Ea=C;break;case 0:case 11:case 14:case 15:ca(2,g,u),Ni||ca(4,g,u),To(l,u,g);break;case 1:Ni||(ua(g,u),b=g.stateNode,typeof b.componentWillUnmount=="function"&&Qr(g,u,b)),To(l,u,g);break;case 21:To(l,u,g);break;case 22:Ni=(b=Ni)||g.memoizedState!==null,To(l,u,g),Ni=b;break;default:To(l,u,g)}}function gu(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{A0(l)}catch(g){ri(u,u.return,g)}}}function sd(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{A0(l)}catch(g){ri(u,u.return,g)}}function bb(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new hS),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new hS),u;default:throw Error(i(435,l.tag))}}function Sc(l,u){var g=bb(l);u.forEach(function(b){if(!g.has(b)){g.add(b);var C=A.bind(null,l,b);b.then(C,C)}})}function Br(l,u){var g=u.deletions;if(g!==null)for(var b=0;b<g.length;b++){var C=g[b],O=l,X=u,ie=X;e:for(;ie!==null;){switch(ie.tag){case 27:if(md(ie.type)){mi=ie.stateNode,Ea=!1;break e}break;case 5:mi=ie.stateNode,Ea=!1;break e;case 3:case 4:mi=ie.stateNode.containerInfo,Ea=!0;break e}ie=ie.return}if(mi===null)throw Error(i(160));y0(O,X,C),mi=null,Ea=!1,O=C.alternate,O!==null&&(O.return=null),C.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)vu(u,l),u=u.sibling}var Ao=null;function vu(l,u){var g=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Br(u,l),Vr(l),b&4&&(ca(3,l,l.return),wo(3,l),ca(5,l,l.return));break;case 1:Br(u,l),Vr(l),b&512&&(Ni||g===null||ua(g,g.return)),b&64&&Eo&&(l=l.updateQueue,l!==null&&(b=l.callbacks,b!==null&&(g=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=g===null?b:g.concat(b))));break;case 26:var C=Ao;if(Br(u,l),Vr(l),b&512&&(Ni||g===null||ua(g,g.return)),b&4){var O=g!==null?g.memoizedState:null;if(b=l.memoizedState,g===null)if(b===null)if(l.stateNode===null){e:{b=l.type,g=l.memoizedProps,C=C.ownerDocument||C;t:switch(b){case"title":O=C.getElementsByTagName("title")[0],(!O||O[he]||O[di]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=C.createElement(b),C.head.insertBefore(O,C.querySelector("head > title"))),Ya(O,b,g),O[di]=l,ee(O),b=O;break e;case"link":var X=Zk("link","href",C).get(b+(g.href||""));if(X){for(var ie=0;ie<X.length;ie++)if(O=X[ie],O.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&O.getAttribute("rel")===(g.rel==null?null:g.rel)&&O.getAttribute("title")===(g.title==null?null:g.title)&&O.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){X.splice(ie,1);break t}}O=C.createElement(b),Ya(O,b,g),C.head.appendChild(O);break;case"meta":if(X=Zk("meta","content",C).get(b+(g.content||""))){for(ie=0;ie<X.length;ie++)if(O=X[ie],O.getAttribute("content")===(g.content==null?null:""+g.content)&&O.getAttribute("name")===(g.name==null?null:g.name)&&O.getAttribute("property")===(g.property==null?null:g.property)&&O.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&O.getAttribute("charset")===(g.charSet==null?null:g.charSet)){X.splice(ie,1);break t}}O=C.createElement(b),Ya(O,b,g),C.head.appendChild(O);break;default:throw Error(i(468,b))}O[di]=l,ee(O),b=O}l.stateNode=b}else Qk(C,l.type,l.stateNode);else l.stateNode=Kk(C,b,l.memoizedProps);else O!==b?(O===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):O.count--,b===null?Qk(C,l.type,l.stateNode):Kk(C,b,l.memoizedProps)):b===null&&l.stateNode!==null&&zr(l,l.memoizedProps,g.memoizedProps)}break;case 27:Br(u,l),Vr(l),b&512&&(Ni||g===null||ua(g,g.return)),g!==null&&b&4&&zr(l,l.memoizedProps,g.memoizedProps);break;case 5:if(Br(u,l),Vr(l),b&512&&(Ni||g===null||ua(g,g.return)),l.flags&32){C=l.stateNode;try{bi(C,"")}catch(Xt){ri(l,l.return,Xt)}}b&4&&l.stateNode!=null&&(C=l.memoizedProps,zr(l,C,g!==null?g.memoizedProps:C)),b&1024&&(Qo=!0);break;case 6:if(Br(u,l),Vr(l),b&4){if(l.stateNode===null)throw Error(i(162));b=l.memoizedProps,g=l.stateNode;try{g.nodeValue=b}catch(Xt){ri(l,l.return,Xt)}}break;case 3:if(yS=null,C=Ao,Ao=gS(u.containerInfo),Br(u,l),Ao=C,Vr(l),b&4&&g!==null&&g.memoizedState.isDehydrated)try{A0(u.containerInfo)}catch(Xt){ri(l,l.return,Xt)}Qo&&(Qo=!1,b0(l));break;case 4:b=Ao,Ao=gS(l.stateNode.containerInfo),Br(u,l),Vr(l),Ao=b;break;case 12:Br(u,l),Vr(l);break;case 31:Br(u,l),Vr(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,Sc(l,b)));break;case 13:Br(u,l),Vr(l),l.child.flags&8192&&l.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(od=Y()),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,Sc(l,b)));break;case 22:C=l.memoizedState!==null;var ge=g!==null&&g.memoizedState!==null,Fe=Eo,Je=Ni;if(Eo=Fe||C,Ni=Je||ge,Br(u,l),Ni=Je,Eo=Fe,Vr(l),b&8192)e:for(u=l.stateNode,u._visibility=C?u._visibility&-2:u._visibility|1,C&&(g===null||ge||Eo||Ni||Fl(l)),g=null,u=l;;){if(u.tag===5||u.tag===26){if(g===null){ge=g=u;try{if(O=ge.stateNode,C)X=O.style,typeof X.setProperty=="function"?X.setProperty("display","none","important"):X.display="none";else{ie=ge.stateNode;var ot=ge.memoizedProps.style,Be=ot!=null&&ot.hasOwnProperty("display")?ot.display:null;ie.style.display=Be==null||typeof Be=="boolean"?"":(""+Be).trim()}}catch(Xt){ri(ge,ge.return,Xt)}}}else if(u.tag===6){if(g===null){ge=u;try{ge.stateNode.nodeValue=C?"":ge.memoizedProps}catch(Xt){ri(ge,ge.return,Xt)}}}else if(u.tag===18){if(g===null){ge=u;try{var Xe=ge.stateNode;C?Vk(Xe,!0):Vk(ge.stateNode,!1)}catch(Xt){ri(ge,ge.return,Xt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;g===u&&(g=null),u=u.return}g===u&&(g=null),u.sibling.return=u.return,u=u.sibling}b&4&&(b=l.updateQueue,b!==null&&(g=b.retryQueue,g!==null&&(b.retryQueue=null,Sc(l,g))));break;case 19:Br(u,l),Vr(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,Sc(l,b)));break;case 30:break;case 21:break;default:Br(u,l),Vr(l)}}function Vr(l){var u=l.flags;if(u&2){try{for(var g,b=l.return;b!==null;){if(Hi(b)){g=b;break}b=b.return}if(g==null)throw Error(i(160));switch(g.tag){case 27:var C=g.stateNode,O=Hn(l);Wa(l,O,C);break;case 5:var X=g.stateNode;g.flags&32&&(bi(X,""),g.flags&=-33);var ie=Hn(l);Wa(l,ie,X);break;case 3:case 4:var ge=g.stateNode.containerInfo,Fe=Hn(l);Ul(l,Fe,ge);break;default:throw Error(i(161))}}catch(Je){ri(l,l.return,Je)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function b0(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;b0(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Mo(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)Gi(l,u.alternate,u),u=u.sibling}function Fl(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:ca(4,u,u.return),Fl(u);break;case 1:ua(u,u.return);var g=u.stateNode;typeof g.componentWillUnmount=="function"&&Qr(u,u.return,g),Fl(u);break;case 27:Tb(u.stateNode);case 26:case 5:ua(u,u.return),Fl(u);break;case 22:u.memoizedState===null&&Fl(u);break;case 30:Fl(u);break;default:Fl(u)}l=l.sibling}}function qa(l,u,g){for(g=g&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var b=u.alternate,C=l,O=u,X=O.flags;switch(O.tag){case 0:case 11:case 15:qa(C,O,g),wo(4,O);break;case 1:if(qa(C,O,g),b=O,C=b.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(Fe){ri(b,b.return,Fe)}if(b=O,C=b.updateQueue,C!==null){var ie=b.stateNode;try{var ge=C.shared.hiddenCallbacks;if(ge!==null)for(C.shared.hiddenCallbacks=null,C=0;C<ge.length;C++)ed(ge[C],ie)}catch(Fe){ri(b,b.return,Fe)}}g&&X&64&&Zo(O),xc(O,O.return);break;case 27:v0(O);case 26:case 5:qa(C,O,g),g&&b===null&&X&4&&em(O),xc(O,O.return);break;case 12:qa(C,O,g);break;case 31:qa(C,O,g),g&&X&4&&gu(C,O);break;case 13:qa(C,O,g),g&&X&4&&sd(C,O);break;case 22:O.memoizedState===null&&qa(C,O,g),xc(O,O.return);break;case 30:break;default:qa(C,O,g)}u=u.sibling}}function yu(l,u){var g=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==g&&(l!=null&&l.refCount++,g!=null&&Ef(g))}function Ff(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Ef(l))}function fa(l,u,g,b){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)_b(l,u,g,b),u=u.sibling}function _b(l,u,g,b){var C=u.flags;switch(u.tag){case 0:case 11:case 15:fa(l,u,g,b),C&2048&&wo(9,u);break;case 1:fa(l,u,g,b);break;case 3:fa(l,u,g,b),C&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Ef(l)));break;case 12:if(C&2048){fa(l,u,g,b),l=u.stateNode;try{var O=u.memoizedProps,X=O.id,ie=O.onPostCommit;typeof ie=="function"&&ie(X,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ge){ri(u,u.return,ge)}}else fa(l,u,g,b);break;case 31:fa(l,u,g,b);break;case 13:fa(l,u,g,b);break;case 23:break;case 22:O=u.stateNode,X=u.alternate,u.memoizedState!==null?O._visibility&2?fa(l,u,g,b):zl(l,u):O._visibility&2?fa(l,u,g,b):(O._visibility|=2,ha(l,u,g,b,(u.subtreeFlags&10256)!==0||!1)),C&2048&&yu(X,u);break;case 24:fa(l,u,g,b),C&2048&&Ff(u.alternate,u);break;default:fa(l,u,g,b)}}function ha(l,u,g,b,C){for(C=C&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var O=l,X=u,ie=g,ge=b,Fe=X.flags;switch(X.tag){case 0:case 11:case 15:ha(O,X,ie,ge,C),wo(8,X);break;case 23:break;case 22:var Je=X.stateNode;X.memoizedState!==null?Je._visibility&2?ha(O,X,ie,ge,C):zl(O,X):(Je._visibility|=2,ha(O,X,ie,ge,C)),C&&Fe&2048&&yu(X.alternate,X);break;case 24:ha(O,X,ie,ge,C),C&&Fe&2048&&Ff(X.alternate,X);break;default:ha(O,X,ie,ge,C)}u=u.sibling}}function zl(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var g=l,b=u,C=b.flags;switch(b.tag){case 22:zl(g,b),C&2048&&yu(b.alternate,b);break;case 24:zl(g,b),C&2048&&Ff(b.alternate,b);break;default:zl(g,b)}u=u.sibling}}var zf=8192;function Gs(l,u,g){if(l.subtreeFlags&zf)for(l=l.child;l!==null;)_0(l,u,g),l=l.sibling}function _0(l,u,g){switch(l.tag){case 26:Gs(l,u,g),l.flags&zf&&l.memoizedState!==null&&kY(g,Ao,l.memoizedState,l.memoizedProps);break;case 5:Gs(l,u,g);break;case 3:case 4:var b=Ao;Ao=gS(l.stateNode.containerInfo),Gs(l,u,g),Ao=b;break;case 22:l.memoizedState===null&&(b=l.alternate,b!==null&&b.memoizedState!==null?(b=zf,zf=16777216,Gs(l,u,g),zf=b):Gs(l,u,g));break;default:Gs(l,u,g)}}function Bf(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function bu(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var b=u[g];Jr=b,or(b,l)}Bf(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)vs(l),l=l.sibling}function vs(l){switch(l.tag){case 0:case 11:case 15:bu(l),l.flags&2048&&ca(9,l,l.return);break;case 3:bu(l);break;case 12:bu(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,ys(l)):bu(l);break;default:bu(l)}}function ys(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var b=u[g];Jr=b,or(b,l)}Bf(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:ca(8,u,u.return),ys(u);break;case 22:g=u.stateNode,g._visibility&2&&(g._visibility&=-3,ys(u));break;default:ys(u)}l=l.sibling}}function or(l,u){for(;Jr!==null;){var g=Jr;switch(g.tag){case 0:case 11:case 15:ca(8,g,u);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var b=g.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:Ef(g.memoizedState.cache)}if(b=g.child,b!==null)b.return=g,Jr=b;else e:for(g=l;Jr!==null;){b=Jr;var C=b.sibling,O=b.return;if(tm(b),b===g){Jr=null;break e}if(C!==null){C.return=O,Jr=C;break e}Jr=O}}}var wc={getCacheForType:function(l){var u=mn(Tr),g=u.data.get(l);return g===void 0&&(g=l(),u.data.set(l,g)),g},cacheSignal:function(){return mn(Tr).controller.signal}},Cn=typeof WeakMap=="function"?WeakMap:Map,Kt=0,yn=null,Ln=null,Pn=0,Xn=0,Ta=null,Co=!1,Jo=!1,xb=!1,Ws=0,Ki=0,Bl=0,_u=0,nm=0,$a=0,Ui=0,Vf=null,lr=null,cr=!1,od=0,Sb=0,br=1/0,Zi=null,_r=null,gi=0,qs=null,ld=null,Io=0,cd=0,ud=null,im=null,xu=0,jf=null;function $s(){return(Kt&2)!==0&&Pn!==0?Pn&-Pn:G.T!==null?Ge():jo()}function Bn(){if($a===0)if((Pn&536870912)===0||Wn){var l=ft;ft<<=1,(ft&3932160)===0&&(ft=262144),$a=l}else $a=536870912;return l=ds.current,l!==null&&(l.flags|=32),$a}function kn(l,u,g){(l===yn&&(Xn===2||Xn===9)||l.cancelPendingCommit!==null)&&(wu(l,0),Mr(l,Pn,$a,!1)),Ei(l,g),((Kt&2)===0||l!==yn)&&(l===yn&&((Kt&2)===0&&(_u|=g),Ki===4&&Mr(l,Pn,$a,!1)),St(l))}function Vn(l,u,g){if((Kt&6)!==0)throw Error(i(327));var b=!g&&(u&127)===0&&(u&l.expiredLanes)===0||ht(l,u),C=b?rm(l,u):Xa(l,u,!0),O=b;do{if(C===0){Jo&&!b&&Mr(l,u,0,!1);break}else{if(g=l.current.alternate,O&&!vi(g)){C=Xa(l,u,!1),O=!1;continue}if(C===2){if(O=u,l.errorRecoveryDisabledLanes&O)var X=0;else X=l.pendingLanes&-536870913,X=X!==0?X:X&536870912?536870912:0;if(X!==0){u=X;e:{var ie=l;C=Vf;var ge=ie.current.memoizedState.isDehydrated;if(ge&&(wu(ie,X).flags|=256),X=Xa(ie,X,!1),X!==2){if(xb&&!ge){ie.errorRecoveryDisabledLanes|=O,_u|=O,C=4;break e}O=lr,lr=C,O!==null&&(lr===null?lr=O:lr.push.apply(lr,O))}C=X}if(O=!1,C!==2)continue}}if(C===1){wu(l,0),Mr(l,u,0,!0);break}e:{switch(b=l,O=C,O){case 0:case 1:throw Error(i(345));case 4:if((u&4194048)!==u)break;case 6:Mr(b,u,$a,!Co);break e;case 2:lr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((u&62914560)===u&&(C=od+300-Y(),10<C)){if(Mr(b,u,$a,!Co),Ke(b,0,!0)!==0)break e;Io=u,b.timeoutHandle=Fk(Gn.bind(null,b,g,lr,Zi,cr,u,$a,_u,Ui,Co,O,"Throttled",-0,0),C);break e}Gn(b,g,lr,Zi,cr,u,$a,_u,Ui,Co,O,null,-0,0)}}break}while(!0);St(l)}function Gn(l,u,g,b,C,O,X,ie,ge,Fe,Je,ot,Be,Xe){if(l.timeoutHandle=-1,ot=u.subtreeFlags,ot&8192||(ot&16785408)===16785408){ot={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ho},_0(u,O,ot);var Xt=(O&62914560)===O?od-Y():(O&4194048)===O?Sb-Y():0;if(Xt=UY(ot,Xt),Xt!==null){Io=O,l.cancelPendingCommit=Xt(Tc.bind(null,l,u,O,g,b,C,X,ie,ge,Je,ot,null,Be,Xe)),Mr(l,O,X,!Fe);return}}Tc(l,u,O,g,b,C,X,ie,ge)}function vi(l){for(var u=l;;){var g=u.tag;if((g===0||g===11||g===15)&&u.flags&16384&&(g=u.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var b=0;b<g.length;b++){var C=g[b],O=C.getSnapshot;C=C.value;try{if(!Va(O(),C))return!1}catch{return!1}}if(g=u.child,u.subtreeFlags&16384&&g!==null)g.return=u,u=g;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Mr(l,u,g,b){u&=~nm,u&=~_u,l.suspendedLanes|=u,l.pingedLanes&=~u,b&&(l.warmLanes|=u),b=l.expirationTimes;for(var C=u;0<C;){var O=31-fe(C),X=1<<O;b[O]=-1,C&=~X}g!==0&&ka(l,g,u)}function el(){return(Kt&6)===0?(zt(0),!1):!0}function Su(){if(Ln!==null){if(Xn===0)var l=Ln.return;else l=Ln,Rl=lu=null,Wy(l),If=null,Rf=0,l=Ln;for(;l!==null;)Hs(l.alternate,l),l=l.return;Ln=null}}function wu(l,u){var g=l.timeoutHandle;g!==-1&&(l.timeoutHandle=-1,bY(g)),g=l.cancelPendingCommit,g!==null&&(l.cancelPendingCommit=null,g()),Io=0,Su(),yn=l,Ln=g=us(l.current,null),Pn=u,Xn=0,Ta=null,Co=!1,Jo=ht(l,u),xb=!1,Ui=$a=nm=_u=Bl=Ki=0,lr=Vf=null,cr=!1,(u&8)!==0&&(u|=u&32);var b=l.entangledLanes;if(b!==0)for(l=l.entanglements,b&=u;0<b;){var C=31-fe(b),O=1<<C;u|=l[C],b&=~O}return Ws=u,Up(),g}function Vl(l,u){Mn=null,G.H=rd,u===Tf||u===Dn?(u=Mf(),Xn=3):u===Vp?(u=Mf(),Xn=4):Xn=u===l0?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Ta=u,Ln===null&&(Ki=1,o0(l,zs(u,l.current)))}function Qi(){var l=ds.current;return l===null?!0:(Pn&4194048)===Pn?Ga===null:(Pn&62914560)===Pn||(Pn&536870912)!==0?l===Ga:!1}function Ec(){var l=G.H;return G.H=rd,l===null?rd:l}function Eu(){var l=G.A;return G.A=wc,l}function fd(){Ki=4,Co||(Pn&4194048)!==Pn&&ds.current!==null||(Jo=!0),(Bl&134217727)===0&&(_u&134217727)===0||yn===null||Mr(yn,Pn,$a,!1)}function Xa(l,u,g){var b=Kt;Kt|=2;var C=Ec(),O=Eu();(yn!==l||Pn!==u)&&(Zi=null,wu(l,u)),u=!1;var X=Ki;e:do try{if(Xn!==0&&Ln!==null){var ie=Ln,ge=Ta;switch(Xn){case 8:Su(),X=6;break e;case 3:case 2:case 9:case 6:ds.current===null&&(u=!0);var Fe=Xn;if(Xn=0,Ta=null,Hf(l,ie,ge,Fe),g&&Jo){X=0;break e}break;default:Fe=Xn,Xn=0,Ta=null,Hf(l,ie,ge,Fe)}}hd(),X=Ki;break}catch(Je){Vl(l,Je)}while(!0);return u&&l.shellSuspendCounter++,Rl=lu=null,Kt=b,G.H=C,G.A=O,Ln===null&&(yn=null,Pn=0,Up()),X}function hd(){for(;Ln!==null;)x0(Ln)}function rm(l,u){var g=Kt;Kt|=2;var b=Ec(),C=Eu();yn!==l||Pn!==u?(Zi=null,br=Y()+500,wu(l,u)):Jo=ht(l,u);e:do try{if(Xn!==0&&Ln!==null){u=Ln;var O=Ta;t:switch(Xn){case 1:Xn=0,Ta=null,Hf(l,u,O,1);break;case 2:case 9:if(hs(O)){Xn=0,Ta=null,am(u);break}u=function(){Xn!==2&&Xn!==9||yn!==l||(Xn=7),St(l)},O.then(u,u);break e;case 3:Xn=7;break e;case 4:Xn=5;break e;case 7:hs(O)?(Xn=0,Ta=null,am(u)):(Xn=0,Ta=null,Hf(l,u,O,7));break;case 5:var X=null;switch(Ln.tag){case 26:X=Ln.memoizedState;case 5:case 27:var ie=Ln;if(X?Jk(X):ie.stateNode.complete){Xn=0,Ta=null;var ge=ie.sibling;if(ge!==null)Ln=ge;else{var Fe=ie.return;Fe!==null?(Ln=Fe,Tu(Fe)):Ln=null}break t}}Xn=0,Ta=null,Hf(l,u,O,5);break;case 6:Xn=0,Ta=null,Hf(l,u,O,6);break;case 8:Su(),Ki=6;break e;default:throw Error(i(462))}}bs();break}catch(Je){Vl(l,Je)}while(!0);return Rl=lu=null,G.H=b,G.A=C,Kt=g,Ln!==null?0:(yn=null,Pn=0,Up(),Ki)}function bs(){for(;Ln!==null&&!at();)x0(Ln)}function x0(l){var u=g0(l.alternate,l,Ws);l.memoizedProps=l.pendingProps,u===null?Tu(l):Ln=u}function am(l){var u=l,g=u.alternate;switch(u.tag){case 15:case 0:u=Kp(g,u,u.pendingProps,u.type,void 0,Pn);break;case 11:u=Kp(g,u,u.pendingProps,u.type.render,u.ref,Pn);break;case 5:Wy(u);default:Hs(g,u),u=Ln=Gh(u,Ws),u=g0(g,u,Ws)}l.memoizedProps=l.pendingProps,u===null?Tu(l):Ln=u}function Hf(l,u,g,b){Rl=lu=null,Wy(u),If=null,Rf=0;var C=u.return;try{if(Fr(l,C,u,g,Pn)){Ki=1,o0(l,zs(g,l.current)),Ln=null;return}}catch(O){if(C!==null)throw Ln=C,O;Ki=1,o0(l,zs(g,l.current)),Ln=null;return}u.flags&32768?(Wn||b===1?l=!0:Jo||(Pn&536870912)!==0?l=!1:(Co=l=!0,(b===2||b===9||b===3||b===6)&&(b=ds.current,b!==null&&b.tag===13&&(b.flags|=16384))),sm(u,l)):Tu(u)}function Tu(l){var u=l;do{if((u.flags&32768)!==0){sm(u,Co);return}l=u.return;var g=Jp(u.alternate,u,Ws);if(g!==null){Ln=g;return}if(u=u.sibling,u!==null){Ln=u;return}Ln=u=l}while(u!==null);Ki===0&&(Ki=5)}function sm(l,u){do{var g=So(l.alternate,l);if(g!==null){g.flags&=32767,Ln=g;return}if(g=l.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!u&&(l=l.sibling,l!==null)){Ln=l;return}Ln=l=g}while(l!==null);Ki=6,Ln=null}function Tc(l,u,g,b,C,O,X,ie,ge){l.cancelPendingCommit=null;do dd();while(gi!==0);if((Kt&6)!==0)throw Error(i(327));if(u!==null){if(u===l.current)throw Error(i(177));if(O=u.lanes|u.childLanes,O|=Yr,Bi(l,g,O,X,ie,ge),l===yn&&(Ln=yn=null,Pn=0),ld=u,qs=l,Io=g,cd=O,ud=C,im=b,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,F(De,function(){return S0(),null})):(l.callbackNode=null,l.callbackPriority=0),b=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||b){b=G.T,G.T=null,C=$.p,$.p=2,X=Kt,Kt|=4;try{kC(l,u,g)}finally{Kt=X,$.p=C,G.T=b}}gi=1,Cr(),Ac(),Gf()}}function Cr(){if(gi===1){gi=0;var l=qs,u=ld,g=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||g){g=G.T,G.T=null;var b=$.p;$.p=2;var C=Kt;Kt|=4;try{vu(u,l);var O=HC,X=p1(l.containerInfo),ie=O.focusedElem,ge=O.selectionRange;if(X!==ie&&ie&&ie.ownerDocument&&Ri(ie.ownerDocument.documentElement,ie)){if(ge!==null&&My(ie)){var Fe=ge.start,Je=ge.end;if(Je===void 0&&(Je=Fe),"selectionStart"in ie)ie.selectionStart=Fe,ie.selectionEnd=Math.min(Je,ie.value.length);else{var ot=ie.ownerDocument||document,Be=ot&&ot.defaultView||window;if(Be.getSelection){var Xe=Be.getSelection(),Xt=ie.textContent.length,pn=Math.min(ge.start,Xt),Di=ge.end===void 0?pn:Math.min(ge.end,Xt);!Xe.extend&&pn>Di&&(X=Di,Di=pn,pn=X);var Me=Vh(ie,pn),we=Vh(ie,Di);if(Me&&we&&(Xe.rangeCount!==1||Xe.anchorNode!==Me.node||Xe.anchorOffset!==Me.offset||Xe.focusNode!==we.node||Xe.focusOffset!==we.offset)){var ke=ot.createRange();ke.setStart(Me.node,Me.offset),Xe.removeAllRanges(),pn>Di?(Xe.addRange(ke),Xe.extend(we.node,we.offset)):(ke.setEnd(we.node,we.offset),Xe.addRange(ke))}}}}for(ot=[],Xe=ie;Xe=Xe.parentNode;)Xe.nodeType===1&&ot.push({element:Xe,left:Xe.scrollLeft,top:Xe.scrollTop});for(typeof ie.focus=="function"&&ie.focus(),ie=0;ie<ot.length;ie++){var it=ot[ie];it.element.scrollLeft=it.left,it.element.scrollTop=it.top}}SS=!!jC,HC=jC=null}finally{Kt=C,$.p=b,G.T=g}}l.current=u,gi=2}}function Ac(){if(gi===2){gi=0;var l=qs,u=ld,g=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||g){g=G.T,G.T=null;var b=$.p;$.p=2;var C=Kt;Kt|=4;try{Gi(l,u.alternate,u)}finally{Kt=C,$.p=b,G.T=g}}gi=3}}function Gf(){if(gi===4||gi===3){gi=0,ne();var l=qs,u=ld,g=Io,b=im;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?gi=5:(gi=0,ld=qs=null,jl(l,l.pendingLanes));var C=l.pendingLanes;if(C===0&&(_r=null),oa(g),u=u.stateNode,st&&typeof st.onCommitFiberRoot=="function")try{st.onCommitFiberRoot(et,u,void 0,(u.current.flags&128)===128)}catch{}if(b!==null){u=G.T,C=$.p,$.p=2,G.T=null;try{for(var O=l.onRecoverableError,X=0;X<b.length;X++){var ie=b[X];O(ie.value,{componentStack:ie.stack})}}finally{G.T=u,$.p=C}}(Io&3)!==0&&dd(),St(l),C=l.pendingLanes,(g&261930)!==0&&(C&42)!==0?l===jf?xu++:(xu=0,jf=l):xu=0,zt(0)}}function jl(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,Ef(u)))}function dd(){return Cr(),Ac(),Gf(),S0()}function S0(){if(gi!==5)return!1;var l=qs,u=cd;cd=0;var g=oa(Io),b=G.T,C=$.p;try{$.p=32>g?32:g,G.T=null,g=ud,ud=null;var O=qs,X=Io;if(gi=0,ld=qs=null,Io=0,(Kt&6)!==0)throw Error(i(331));var ie=Kt;if(Kt|=4,vs(O.current),_b(O,O.current,X,g),Kt=ie,zt(0,!1),st&&typeof st.onPostCommitFiberRoot=="function")try{st.onPostCommitFiberRoot(et,O)}catch{}return!0}finally{$.p=C,G.T=b,jl(l,u)}}function wb(l,u,g){u=zs(g,u),u=db(l.stateNode,u,2),l=fu(l,u,2),l!==null&&(Ei(l,2),St(l))}function ri(l,u,g){if(l.tag===3)wb(l,l,g);else for(;u!==null;){if(u.tag===3){wb(u,l,g);break}else if(u.tag===1){var b=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(_r===null||!_r.has(b))){l=zs(g,l),g=pb(2),b=fu(u,g,2),b!==null&&(oS(g,b,u,l),Ei(b,2),St(b));break}}u=u.return}}function om(l,u,g){var b=l.pingCache;if(b===null){b=l.pingCache=new Cn;var C=new Set;b.set(u,C)}else C=b.get(u),C===void 0&&(C=new Set,b.set(u,C));C.has(g)||(xb=!0,C.add(g),l=d.bind(null,l,u,g),u.then(l,l))}function d(l,u,g){var b=l.pingCache;b!==null&&b.delete(u),l.pingedLanes|=l.suspendedLanes&g,l.warmLanes&=~g,yn===l&&(Pn&g)===g&&(Ki===4||Ki===3&&(Pn&62914560)===Pn&&300>Y()-od?(Kt&2)===0&&wu(l,0):nm|=g,Ui===Pn&&(Ui=0)),St(l)}function m(l,u){u===0&&(u=rn()),l=ja(l,u),l!==null&&(Ei(l,u),St(l))}function x(l){var u=l.memoizedState,g=0;u!==null&&(g=u.retryLane),m(l,g)}function A(l,u){var g=0;switch(l.tag){case 31:case 13:var b=l.stateNode,C=l.memoizedState;C!==null&&(g=C.retryLane);break;case 19:b=l.stateNode;break;case 22:b=l.stateNode._retryCache;break;default:throw Error(i(314))}b!==null&&b.delete(u),m(l,g)}function F(l,u){return tt(l,u)}var H=null,te=null,_e=!1,$e=!1,mt=!1,Ct=0;function St(l){l!==te&&l.next===null&&(te===null?H=te=l:te=te.next=l),$e=!0,_e||(_e=!0,Ce())}function zt(l,u){if(!mt&&$e){mt=!0;do for(var g=!1,b=H;b!==null;){if(l!==0){var C=b.pendingLanes;if(C===0)var O=0;else{var X=b.suspendedLanes,ie=b.pingedLanes;O=(1<<31-fe(42|l)+1)-1,O&=C&~(X&~ie),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(g=!0,ze(b,O))}else O=Pn,O=Ke(b,b===yn?O:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(O&3)===0||ht(b,O)||(g=!0,ze(b,O));b=b.next}while(g);mt=!1}}function Tn(){xr()}function xr(){$e=_e=!1;var l=0;Ct!==0&&yY()&&(l=Ct);for(var u=Y(),g=null,b=H;b!==null;){var C=b.next,O=pd(b,u);O===0?(b.next=null,g===null?H=C:g.next=C,C===null&&(te=g)):(g=b,(l!==0||(O&3)!==0)&&($e=!0)),b=C}gi!==0&&gi!==5||zt(l),Ct!==0&&(Ct=0)}function pd(l,u){for(var g=l.suspendedLanes,b=l.pingedLanes,C=l.expirationTimes,O=l.pendingLanes&-62914561;0<O;){var X=31-fe(O),ie=1<<X,ge=C[X];ge===-1?((ie&g)===0||(ie&b)!==0)&&(C[X]=Wt(ie,u)):ge<=u&&(l.expiredLanes|=ie),O&=~ie}if(u=yn,g=Pn,g=Ke(l,l===u?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b=l.callbackNode,g===0||l===u&&(Xn===2||Xn===9)||l.cancelPendingCommit!==null)return b!==null&&b!==null&&wt(b),l.callbackNode=null,l.callbackPriority=0;if((g&3)===0||ht(l,g)){if(u=g&-g,u===l.callbackPriority)return u;switch(b!==null&&wt(b),oa(g)){case 2:case 8:g=qe;break;case 32:g=De;break;case 268435456:g=ct;break;default:g=De}return b=Au.bind(null,l),g=tt(g,b),l.callbackPriority=u,l.callbackNode=g,u}return b!==null&&b!==null&&wt(b),l.callbackPriority=2,l.callbackNode=null,2}function Au(l,u){if(gi!==0&&gi!==5)return l.callbackNode=null,l.callbackPriority=0,null;var g=l.callbackNode;if(dd()&&l.callbackNode!==g)return null;var b=Pn;return b=Ke(l,l===yn?b:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b===0?null:(Vn(l,b,u),pd(l,Y()),l.callbackNode!=null&&l.callbackNode===g?Au.bind(null,l):null)}function ze(l,u){if(dd())return null;Vn(l,u,!0)}function Ce(){_Y(function(){(Kt&6)!==0?tt(Ue,Tn):xr()})}function Ge(){if(Ct===0){var l=mc;l===0&&(l=ut,ut<<=1,(ut&261888)===0&&(ut=256)),Ct=l}return Ct}function Tt(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:pf(""+l)}function on(l,u){var g=u.ownerDocument.createElement("input");return g.name=u.name,g.value=u.value,l.id&&g.setAttribute("form",l.id),u.parentNode.insertBefore(g,u),l=new FormData(l),g.parentNode.removeChild(g),l}function Ji(l,u,g,b,C){if(u==="submit"&&g&&g.stateNode===C){var O=Tt((C[Ii]||null).action),X=b.submitter;X&&(u=(u=X[Ii]||null)?Tt(u.formAction):X.getAttribute("formAction"),u!==null&&(O=u,X=null));var ie=new qo("action","action",null,b,C);l.push({event:ie,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(Ct!==0){var ge=X?on(C,X):new FormData(C);ab(g,{pending:!0,data:ge,method:C.method,action:O},null,ge)}}else typeof O=="function"&&(ie.preventDefault(),ge=X?on(C,X):new FormData(C),ab(g,{pending:!0,data:ge,method:C.method,action:O},O,ge))},currentTarget:C}]})}}for(var un=0;un<Lp.length;un++){var Kn=Lp[un],ea=Kn.toLowerCase(),ai=Kn[0].toUpperCase()+Kn.slice(1);mo(ea,"on"+ai)}mo(Lg,"onAnimationEnd"),mo(Dp,"onAnimationIteration"),mo(Iy,"onAnimationStart"),mo("dblclick","onDoubleClick"),mo("focusin","onFocus"),mo("focusout","onBlur"),mo(g1,"onTransitionRun"),mo(CC,"onTransitionStart"),mo(v1,"onTransitionCancel"),mo(Ry,"onTransitionEnd"),Ee("onMouseEnter",["mouseout","mouseover"]),Ee("onMouseLeave",["mouseout","mouseover"]),Ee("onPointerEnter",["pointerout","pointerover"]),Ee("onPointerLeave",["pointerout","pointerover"]),Re("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Re("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Re("onBeforeInput",["compositionend","keypress","textInput","paste"]),Re("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Re("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Re("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ro));function Rk(l,u){u=(u&4)!==0;for(var g=0;g<l.length;g++){var b=l[g],C=b.event;b=b.listeners;e:{var O=void 0;if(u)for(var X=b.length-1;0<=X;X--){var ie=b[X],ge=ie.instance,Fe=ie.currentTarget;if(ie=ie.listener,ge!==O&&C.isPropagationStopped())break e;O=ie,C.currentTarget=Fe;try{O(C)}catch(Je){kp(Je)}C.currentTarget=null,O=ge}else for(X=0;X<b.length;X++){if(ie=b[X],ge=ie.instance,Fe=ie.currentTarget,ie=ie.listener,ge!==O&&C.isPropagationStopped())break e;O=ie,C.currentTarget=Fe;try{O(C)}catch(Je){kp(Je)}C.currentTarget=null,O=ge}}}}function Yn(l,u){var g=u[kr];g===void 0&&(g=u[kr]=new Set);var b=l+"__bubble";g.has(b)||(Pk(u,l,2,!1),g.add(b))}function FC(l,u,g){var b=0;u&&(b|=4),Pk(g,l,b,u)}var dS="_reactListening"+Math.random().toString(36).slice(2);function zC(l){if(!l[dS]){l[dS]=!0,Se.forEach(function(g){g!=="selectionchange"&&(UC.has(g)||FC(g,!1,l),FC(g,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[dS]||(u[dS]=!0,FC("selectionchange",!1,u))}}function Pk(l,u,g,b){switch(sU(u)){case 2:var C=BY;break;case 8:C=VY;break;default:C=eI}g=C.bind(null,u,g,l),C=void 0,!gf||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(C=!0),b?C!==void 0?l.addEventListener(u,g,{capture:!0,passive:C}):l.addEventListener(u,g,!0):C!==void 0?l.addEventListener(u,g,{passive:C}):l.addEventListener(u,g,!1)}function BC(l,u,g,b,C){var O=b;if((u&1)===0&&(u&2)===0&&b!==null)e:for(;;){if(b===null)return;var X=b.tag;if(X===3||X===4){var ie=b.stateNode.containerInfo;if(ie===C)break;if(X===4)for(X=b.return;X!==null;){var ge=X.tag;if((ge===3||ge===4)&&X.stateNode.containerInfo===C)return;X=X.return}for(;ie!==null;){if(X=gt(ie),X===null)return;if(ge=X.tag,ge===5||ge===6||ge===26||ge===27){b=O=X;continue e}ie=ie.parentNode}}b=b.return}sc(function(){var Fe=O,Je=Us(g),ot=[];e:{var Be=po.get(l);if(Be!==void 0){var Xe=qo,Xt=l;switch(l){case"keypress":if(Kc(g)===0)break e;case"keydown":case"keyup":Xe=_l;break;case"focusin":Xt="focus",Xe=Jc;break;case"focusout":Xt="blur",Xe=Jc;break;case"beforeblur":case"afterblur":Xe=Jc;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xe=Dh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xe=Ap;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xe=W;break;case Lg:case Dp:case Iy:Xe=Ng;break;case Ry:Xe=se;break;case"scroll":case"scrollend":Xe=Oh;break;case"wheel":Xe=He;break;case"copy":case"cut":case"paste":Xe=Mp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xe=xl;break;case"toggle":case"beforetoggle":Xe=En}var pn=(u&4)!==0,Di=!pn&&(l==="scroll"||l==="scrollend"),Me=pn?Be!==null?Be+"Capture":null:Be;pn=[];for(var we=Fe,ke;we!==null;){var it=we;if(ke=it.stateNode,it=it.tag,it!==5&&it!==26&&it!==27||ke===null||Me===null||(it=uo(we,Me),it!=null&&pn.push(Eb(we,it,ke))),Di)break;we=we.return}0<pn.length&&(Be=new Xe(Be,Xt,null,g,Je),ot.push({event:Be,listeners:pn}))}}if((u&7)===0){e:{if(Be=l==="mouseover"||l==="pointerover",Xe=l==="mouseout"||l==="pointerout",Be&&g!==Ph&&(Xt=g.relatedTarget||g.fromElement)&&(gt(Xt)||Xt[Er]))break e;if((Xe||Be)&&(Be=Je.window===Je?Je:(Be=Je.ownerDocument)?Be.defaultView||Be.parentWindow:window,Xe?(Xt=g.relatedTarget||g.toElement,Xe=Fe,Xt=Xt?gt(Xt):null,Xt!==null&&(Di=a(Xt),pn=Xt.tag,Xt!==Di||pn!==5&&pn!==27&&pn!==6)&&(Xt=null)):(Xe=null,Xt=Fe),Xe!==Xt)){if(pn=Dh,it="onMouseLeave",Me="onMouseEnter",we="mouse",(l==="pointerout"||l==="pointerover")&&(pn=xl,it="onPointerLeave",Me="onPointerEnter",we="pointer"),Di=Xe==null?Be:en(Xe),ke=Xt==null?Be:en(Xt),Be=new pn(it,we+"leave",Xe,g,Je),Be.target=Di,Be.relatedTarget=ke,it=null,gt(Je)===Fe&&(pn=new pn(Me,we+"enter",Xt,g,Je),pn.target=ke,pn.relatedTarget=Di,it=pn),Di=it,Xe&&Xt)t:{for(pn=dY,Me=Xe,we=Xt,ke=0,it=Me;it;it=pn(it))ke++;it=0;for(var sn=we;sn;sn=pn(sn))it++;for(;0<ke-it;)Me=pn(Me),ke--;for(;0<it-ke;)we=pn(we),it--;for(;ke--;){if(Me===we||we!==null&&Me===we.alternate){pn=Me;break t}Me=pn(Me),we=pn(we)}pn=null}else pn=null;Xe!==null&&Nk(ot,Be,Xe,pn,!1),Xt!==null&&Di!==null&&Nk(ot,Di,Xt,pn,!0)}}e:{if(Be=Fe?en(Fe):window,Xe=Be.nodeName&&Be.nodeName.toLowerCase(),Xe==="select"||Xe==="input"&&Be.type==="file")var ui=Sy;else if(xy(Be))if(Sl)ui=d1;else{ui=Ty;var Yt=f1}else Xe=Be.nodeName,!Xe||Xe.toLowerCase()!=="input"||Be.type!=="checkbox"&&Be.type!=="radio"?Fe&&Fa(Fe.elementType)&&(ui=Sy):ui=h1;if(ui&&(ui=ui(l,Fe))){Og(ot,ui,g,Je);break e}Yt&&Yt(l,Be,Fe),l==="focusout"&&Fe&&Be.type==="number"&&Fe.memoizedProps.value!=null&&Ti(Be,"number",Be.value)}switch(Yt=Fe?en(Fe):window,l){case"focusin":(xy(Yt)||Yt.contentEditable==="true")&&(wl=Yt,El=Fe,jh=null);break;case"focusout":jh=El=wl=null;break;case"mousedown":Dg=!0;break;case"contextmenu":case"mouseup":case"dragend":Dg=!1,Hh(ot,g,Je);break;case"selectionchange":if(m1)break;case"keydown":case"keyup":Hh(ot,g,Je)}var Fn;if($n)e:{switch(l){case"compositionstart":var Zn="onCompositionStart";break e;case"compositionend":Zn="onCompositionEnd";break e;case"compositionupdate":Zn="onCompositionUpdate";break e}Zn=void 0}else xf?cc(l,g)&&(Zn="onCompositionEnd"):l==="keydown"&&g.keyCode===229&&(Zn="onCompositionStart");Zn&&(Xo&&g.locale!=="ko"&&(xf||Zn!=="onCompositionStart"?Zn==="onCompositionEnd"&&xf&&(Fn=Yc()):(za=Je,Nh="value"in za?za.value:za.textContent,xf=!0)),Yt=pS(Fe,Zn),0<Yt.length&&(Zn=new fo(Zn,l,null,g,Je),ot.push({event:Zn,listeners:Yt}),Fn?Zn.data=Fn:(Fn=_f(g),Fn!==null&&(Zn.data=Fn)))),(Fn=Ba?c1(l,g):by(l,g))&&(Zn=pS(Fe,"onBeforeInput"),0<Zn.length&&(Yt=new fo("onBeforeInput","beforeinput",null,g,Je),ot.push({event:Yt,listeners:Zn}),Yt.data=Fn)),Ji(ot,l,Fe,g,Je)}Rk(ot,u)})}function Eb(l,u,g){return{instance:l,listener:u,currentTarget:g}}function pS(l,u){for(var g=u+"Capture",b=[];l!==null;){var C=l,O=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||O===null||(C=uo(l,g),C!=null&&b.unshift(Eb(l,C,O)),C=uo(l,u),C!=null&&b.push(Eb(l,C,O))),l.tag===3)return b;l=l.return}return[]}function dY(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function Nk(l,u,g,b,C){for(var O=u._reactName,X=[];g!==null&&g!==b;){var ie=g,ge=ie.alternate,Fe=ie.stateNode;if(ie=ie.tag,ge!==null&&ge===b)break;ie!==5&&ie!==26&&ie!==27||Fe===null||(ge=Fe,C?(Fe=uo(g,O),Fe!=null&&X.unshift(Eb(g,Fe,ge))):C||(Fe=uo(g,O),Fe!=null&&X.push(Eb(g,Fe,ge)))),g=g.return}X.length!==0&&l.push({event:u,listeners:X})}var pY=/\r\n?/g,mY=/\u0000|\uFFFD/g;function Ok(l){return(typeof l=="string"?l:""+l).replace(pY,`
`).replace(mY,"")}function Dk(l,u){return u=Ok(u),Ok(l)===u}function Oi(l,u,g,b,C,O){switch(g){case"children":typeof b=="string"?u==="body"||u==="textarea"&&b===""||bi(l,b):(typeof b=="number"||typeof b=="bigint")&&u!=="body"&&bi(l,""+b);break;case"className":jt(l,"class",b);break;case"tabIndex":jt(l,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":jt(l,g,b);break;case"style":ml(l,b,O);break;case"data":if(u!=="object"){jt(l,"data",b);break}case"src":case"href":if(b===""&&(u!=="a"||g!=="href")){l.removeAttribute(g);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(g);break}b=pf(""+b),l.setAttribute(g,b);break;case"action":case"formAction":if(typeof b=="function"){l.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(g==="formAction"?(u!=="input"&&Oi(l,u,"name",C.name,C,null),Oi(l,u,"formEncType",C.formEncType,C,null),Oi(l,u,"formMethod",C.formMethod,C,null),Oi(l,u,"formTarget",C.formTarget,C,null)):(Oi(l,u,"encType",C.encType,C,null),Oi(l,u,"method",C.method,C,null),Oi(l,u,"target",C.target,C,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(g);break}b=pf(""+b),l.setAttribute(g,b);break;case"onClick":b!=null&&(l.onclick=Ho);break;case"onScroll":b!=null&&Yn("scroll",l);break;case"onScrollEnd":b!=null&&Yn("scrollend",l);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(i(61));if(g=b.__html,g!=null){if(C.children!=null)throw Error(i(60));l.innerHTML=g}}break;case"multiple":l.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":l.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){l.removeAttribute("xlink:href");break}g=pf(""+b),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(g,""+b):l.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(g,""):l.removeAttribute(g);break;case"capture":case"download":b===!0?l.setAttribute(g,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(g,b):l.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?l.setAttribute(g,b):l.removeAttribute(g);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?l.removeAttribute(g):l.setAttribute(g,b);break;case"popover":Yn("beforetoggle",l),Yn("toggle",l),Ft(l,"popover",b);break;case"xlinkActuate":Ot(l,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":Ot(l,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":Ot(l,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":Ot(l,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":Ot(l,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":Ot(l,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":Ot(l,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":Ot(l,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":Ot(l,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":Ft(l,"is",b);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=Tp.get(g)||g,Ft(l,g,b))}}function VC(l,u,g,b,C,O){switch(g){case"style":ml(l,b,O);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(i(61));if(g=b.__html,g!=null){if(C.children!=null)throw Error(i(60));l.innerHTML=g}}break;case"children":typeof b=="string"?bi(l,b):(typeof b=="number"||typeof b=="bigint")&&bi(l,""+b);break;case"onScroll":b!=null&&Yn("scroll",l);break;case"onScrollEnd":b!=null&&Yn("scrollend",l);break;case"onClick":b!=null&&(l.onclick=Ho);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oe.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(C=g.endsWith("Capture"),u=g.slice(2,C?g.length-7:void 0),O=l[Ii]||null,O=O!=null?O[g]:null,typeof O=="function"&&l.removeEventListener(u,O,C),typeof b=="function")){typeof O!="function"&&O!==null&&(g in l?l[g]=null:l.hasAttribute(g)&&l.removeAttribute(g)),l.addEventListener(u,b,C);break e}g in l?l[g]=b:b===!0?l.setAttribute(g,""):Ft(l,g,b)}}}function Ya(l,u,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yn("error",l),Yn("load",l);var b=!1,C=!1,O;for(O in g)if(g.hasOwnProperty(O)){var X=g[O];if(X!=null)switch(O){case"src":b=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:Oi(l,u,O,X,g,null)}}C&&Oi(l,u,"srcSet",g.srcSet,g,null),b&&Oi(l,u,"src",g.src,g,null);return;case"input":Yn("invalid",l);var ie=O=X=C=null,ge=null,Fe=null;for(b in g)if(g.hasOwnProperty(b)){var Je=g[b];if(Je!=null)switch(b){case"name":C=Je;break;case"type":X=Je;break;case"checked":ge=Je;break;case"defaultChecked":Fe=Je;break;case"value":O=Je;break;case"defaultValue":ie=Je;break;case"children":case"dangerouslySetInnerHTML":if(Je!=null)throw Error(i(137,u));break;default:Oi(l,u,b,Je,g,null)}}ks(l,O,ie,ge,Fe,X,C,!1);return;case"select":Yn("invalid",l),b=X=O=null;for(C in g)if(g.hasOwnProperty(C)&&(ie=g[C],ie!=null))switch(C){case"value":O=ie;break;case"defaultValue":X=ie;break;case"multiple":b=ie;default:Oi(l,u,C,ie,g,null)}u=O,g=X,l.multiple=!!b,u!=null?la(l,!!b,u,!1):g!=null&&la(l,!!b,g,!0);return;case"textarea":Yn("invalid",l),O=C=b=null;for(X in g)if(g.hasOwnProperty(X)&&(ie=g[X],ie!=null))switch(X){case"value":b=ie;break;case"defaultValue":C=ie;break;case"children":O=ie;break;case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(91));break;default:Oi(l,u,X,ie,g,null)}Li(l,b,C,O);return;case"option":for(ge in g)if(g.hasOwnProperty(ge)&&(b=g[ge],b!=null))switch(ge){case"selected":l.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:Oi(l,u,ge,b,g,null)}return;case"dialog":Yn("beforetoggle",l),Yn("toggle",l),Yn("cancel",l),Yn("close",l);break;case"iframe":case"object":Yn("load",l);break;case"video":case"audio":for(b=0;b<Ro.length;b++)Yn(Ro[b],l);break;case"image":Yn("error",l),Yn("load",l);break;case"details":Yn("toggle",l);break;case"embed":case"source":case"link":Yn("error",l),Yn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Fe in g)if(g.hasOwnProperty(Fe)&&(b=g[Fe],b!=null))switch(Fe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:Oi(l,u,Fe,b,g,null)}return;default:if(Fa(u)){for(Je in g)g.hasOwnProperty(Je)&&(b=g[Je],b!==void 0&&VC(l,u,Je,b,g,void 0));return}}for(ie in g)g.hasOwnProperty(ie)&&(b=g[ie],b!=null&&Oi(l,u,ie,b,g,null))}function gY(l,u,g,b){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,O=null,X=null,ie=null,ge=null,Fe=null,Je=null;for(Xe in g){var ot=g[Xe];if(g.hasOwnProperty(Xe)&&ot!=null)switch(Xe){case"checked":break;case"value":break;case"defaultValue":ge=ot;default:b.hasOwnProperty(Xe)||Oi(l,u,Xe,null,b,ot)}}for(var Be in b){var Xe=b[Be];if(ot=g[Be],b.hasOwnProperty(Be)&&(Xe!=null||ot!=null))switch(Be){case"type":O=Xe;break;case"name":C=Xe;break;case"checked":Fe=Xe;break;case"defaultChecked":Je=Xe;break;case"value":X=Xe;break;case"defaultValue":ie=Xe;break;case"children":case"dangerouslySetInnerHTML":if(Xe!=null)throw Error(i(137,u));break;default:Xe!==ot&&Oi(l,u,Be,Xe,b,ot)}}qi(l,X,ie,ge,Fe,Je,O,C);return;case"select":Xe=X=ie=Be=null;for(O in g)if(ge=g[O],g.hasOwnProperty(O)&&ge!=null)switch(O){case"value":break;case"multiple":Xe=ge;default:b.hasOwnProperty(O)||Oi(l,u,O,null,b,ge)}for(C in b)if(O=b[C],ge=g[C],b.hasOwnProperty(C)&&(O!=null||ge!=null))switch(C){case"value":Be=O;break;case"defaultValue":ie=O;break;case"multiple":X=O;default:O!==ge&&Oi(l,u,C,O,b,ge)}u=ie,g=X,b=Xe,Be!=null?la(l,!!g,Be,!1):!!b!=!!g&&(u!=null?la(l,!!g,u,!0):la(l,!!g,g?[]:"",!1));return;case"textarea":Xe=Be=null;for(ie in g)if(C=g[ie],g.hasOwnProperty(ie)&&C!=null&&!b.hasOwnProperty(ie))switch(ie){case"value":break;case"children":break;default:Oi(l,u,ie,null,b,C)}for(X in b)if(C=b[X],O=g[X],b.hasOwnProperty(X)&&(C!=null||O!=null))switch(X){case"value":Be=C;break;case"defaultValue":Xe=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:C!==O&&Oi(l,u,X,C,b,O)}ii(l,Be,Xe);return;case"option":for(var Xt in g)if(Be=g[Xt],g.hasOwnProperty(Xt)&&Be!=null&&!b.hasOwnProperty(Xt))switch(Xt){case"selected":l.selected=!1;break;default:Oi(l,u,Xt,null,b,Be)}for(ge in b)if(Be=b[ge],Xe=g[ge],b.hasOwnProperty(ge)&&Be!==Xe&&(Be!=null||Xe!=null))switch(ge){case"selected":l.selected=Be&&typeof Be!="function"&&typeof Be!="symbol";break;default:Oi(l,u,ge,Be,b,Xe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pn in g)Be=g[pn],g.hasOwnProperty(pn)&&Be!=null&&!b.hasOwnProperty(pn)&&Oi(l,u,pn,null,b,Be);for(Fe in b)if(Be=b[Fe],Xe=g[Fe],b.hasOwnProperty(Fe)&&Be!==Xe&&(Be!=null||Xe!=null))switch(Fe){case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(i(137,u));break;default:Oi(l,u,Fe,Be,b,Xe)}return;default:if(Fa(u)){for(var Di in g)Be=g[Di],g.hasOwnProperty(Di)&&Be!==void 0&&!b.hasOwnProperty(Di)&&VC(l,u,Di,void 0,b,Be);for(Je in b)Be=b[Je],Xe=g[Je],!b.hasOwnProperty(Je)||Be===Xe||Be===void 0&&Xe===void 0||VC(l,u,Je,Be,b,Xe);return}}for(var Me in g)Be=g[Me],g.hasOwnProperty(Me)&&Be!=null&&!b.hasOwnProperty(Me)&&Oi(l,u,Me,null,b,Be);for(ot in b)Be=b[ot],Xe=g[ot],!b.hasOwnProperty(ot)||Be===Xe||Be==null&&Xe==null||Oi(l,u,ot,Be,b,Xe)}function Lk(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vY(){if(typeof performance.getEntriesByType=="function"){for(var l=0,u=0,g=performance.getEntriesByType("resource"),b=0;b<g.length;b++){var C=g[b],O=C.transferSize,X=C.initiatorType,ie=C.duration;if(O&&ie&&Lk(X)){for(X=0,ie=C.responseEnd,b+=1;b<g.length;b++){var ge=g[b],Fe=ge.startTime;if(Fe>ie)break;var Je=ge.transferSize,ot=ge.initiatorType;Je&&Lk(ot)&&(ge=ge.responseEnd,X+=Je*(ge<ie?1:(ie-Fe)/(ge-Fe)))}if(--b,u+=8*(O+X)/(C.duration/1e3),l++,10<l)break}}if(0<l)return u/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var jC=null,HC=null;function mS(l){return l.nodeType===9?l:l.ownerDocument}function kk(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Uk(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function GC(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var WC=null;function yY(){var l=window.event;return l&&l.type==="popstate"?l===WC?!1:(WC=l,!0):(WC=null,!1)}var Fk=typeof setTimeout=="function"?setTimeout:void 0,bY=typeof clearTimeout=="function"?clearTimeout:void 0,zk=typeof Promise=="function"?Promise:void 0,_Y=typeof queueMicrotask=="function"?queueMicrotask:typeof zk<"u"?function(l){return zk.resolve(null).then(l).catch(xY)}:Fk;function xY(l){setTimeout(function(){throw l})}function md(l){return l==="head"}function Bk(l,u){var g=u,b=0;do{var C=g.nextSibling;if(l.removeChild(g),C&&C.nodeType===8)if(g=C.data,g==="/$"||g==="/&"){if(b===0){l.removeChild(C),A0(u);return}b--}else if(g==="$"||g==="$?"||g==="$~"||g==="$!"||g==="&")b++;else if(g==="html")Tb(l.ownerDocument.documentElement);else if(g==="head"){g=l.ownerDocument.head,Tb(g);for(var O=g.firstChild;O;){var X=O.nextSibling,ie=O.nodeName;O[he]||ie==="SCRIPT"||ie==="STYLE"||ie==="LINK"&&O.rel.toLowerCase()==="stylesheet"||g.removeChild(O),O=X}}else g==="body"&&Tb(l.ownerDocument.body);g=C}while(g);A0(u)}function Vk(l,u){var g=l;l=0;do{var b=g.nextSibling;if(g.nodeType===1?u?(g._stashedDisplay=g.style.display,g.style.display="none"):(g.style.display=g._stashedDisplay||"",g.getAttribute("style")===""&&g.removeAttribute("style")):g.nodeType===3&&(u?(g._stashedText=g.nodeValue,g.nodeValue=""):g.nodeValue=g._stashedText||""),b&&b.nodeType===8)if(g=b.data,g==="/$"){if(l===0)break;l--}else g!=="$"&&g!=="$?"&&g!=="$~"&&g!=="$!"||l++;g=b}while(g)}function qC(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var g=u;switch(u=u.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":qC(g),We(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}l.removeChild(g)}}function SY(l,u,g,b){for(;l.nodeType===1;){var C=g;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!b&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(b){if(!l[he])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(O=l.getAttribute("rel"),O==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(O!==C.rel||l.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||l.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||l.getAttribute("title")!==(C.title==null?null:C.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(O=l.getAttribute("src"),(O!==(C.src==null?null:C.src)||l.getAttribute("type")!==(C.type==null?null:C.type)||l.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&O&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var O=C.name==null?null:""+C.name;if(C.type==="hidden"&&l.getAttribute("name")===O)return l}else return l;if(l=Hl(l.nextSibling),l===null)break}return null}function wY(l,u,g){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!g||(l=Hl(l.nextSibling),l===null))return null;return l}function jk(l,u){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!u||(l=Hl(l.nextSibling),l===null))return null;return l}function $C(l){return l.data==="$?"||l.data==="$~"}function XC(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function EY(l,u){var g=l.ownerDocument;if(l.data==="$~")l._reactRetry=u;else if(l.data!=="$?"||g.readyState!=="loading")u();else{var b=function(){u(),g.removeEventListener("DOMContentLoaded",b)};g.addEventListener("DOMContentLoaded",b),l._reactRetry=b}}function Hl(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return l}var YC=null;function Hk(l){l=l.nextSibling;for(var u=0;l;){if(l.nodeType===8){var g=l.data;if(g==="/$"||g==="/&"){if(u===0)return Hl(l.nextSibling);u--}else g!=="$"&&g!=="$!"&&g!=="$?"&&g!=="$~"&&g!=="&"||u++}l=l.nextSibling}return null}function Gk(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var g=l.data;if(g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"){if(u===0)return l;u--}else g!=="/$"&&g!=="/&"||u++}l=l.previousSibling}return null}function Wk(l,u,g){switch(u=mS(g),l){case"html":if(l=u.documentElement,!l)throw Error(i(452));return l;case"head":if(l=u.head,!l)throw Error(i(453));return l;case"body":if(l=u.body,!l)throw Error(i(454));return l;default:throw Error(i(451))}}function Tb(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);We(l)}var Gl=new Map,qk=new Set;function gS(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Wf=$.d;$.d={f:TY,r:AY,D:MY,C:CY,L:IY,m:RY,X:NY,S:PY,M:OY};function TY(){var l=Wf.f(),u=el();return l||u}function AY(l){var u=Vt(l);u!==null&&u.tag===5&&u.type==="form"?Q1(u):Wf.r(l)}var w0=typeof document>"u"?null:document;function $k(l,u,g){var b=w0;if(b&&typeof u=="string"&&u){var C=ln(u);C='link[rel="'+l+'"][href="'+C+'"]',typeof g=="string"&&(C+='[crossorigin="'+g+'"]'),qk.has(C)||(qk.add(C),l={rel:l,crossOrigin:g,href:u},b.querySelector(C)===null&&(u=b.createElement("link"),Ya(u,"link",l),ee(u),b.head.appendChild(u)))}}function MY(l){Wf.D(l),$k("dns-prefetch",l,null)}function CY(l,u){Wf.C(l,u),$k("preconnect",l,u)}function IY(l,u,g){Wf.L(l,u,g);var b=w0;if(b&&l&&u){var C='link[rel="preload"][as="'+ln(u)+'"]';u==="image"&&g&&g.imageSrcSet?(C+='[imagesrcset="'+ln(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(C+='[imagesizes="'+ln(g.imageSizes)+'"]')):C+='[href="'+ln(l)+'"]';var O=C;switch(u){case"style":O=E0(l);break;case"script":O=T0(l)}Gl.has(O)||(l=p({rel:"preload",href:u==="image"&&g&&g.imageSrcSet?void 0:l,as:u},g),Gl.set(O,l),b.querySelector(C)!==null||u==="style"&&b.querySelector(Ab(O))||u==="script"&&b.querySelector(Mb(O))||(u=b.createElement("link"),Ya(u,"link",l),ee(u),b.head.appendChild(u)))}}function RY(l,u){Wf.m(l,u);var g=w0;if(g&&l){var b=u&&typeof u.as=="string"?u.as:"script",C='link[rel="modulepreload"][as="'+ln(b)+'"][href="'+ln(l)+'"]',O=C;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=T0(l)}if(!Gl.has(O)&&(l=p({rel:"modulepreload",href:l},u),Gl.set(O,l),g.querySelector(C)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Mb(O)))return}b=g.createElement("link"),Ya(b,"link",l),ee(b),g.head.appendChild(b)}}}function PY(l,u,g){Wf.S(l,u,g);var b=w0;if(b&&l){var C=_n(b).hoistableStyles,O=E0(l);u=u||"default";var X=C.get(O);if(!X){var ie={loading:0,preload:null};if(X=b.querySelector(Ab(O)))ie.loading=5;else{l=p({rel:"stylesheet",href:l,"data-precedence":u},g),(g=Gl.get(O))&&KC(l,g);var ge=X=b.createElement("link");ee(ge),Ya(ge,"link",l),ge._p=new Promise(function(Fe,Je){ge.onload=Fe,ge.onerror=Je}),ge.addEventListener("load",function(){ie.loading|=1}),ge.addEventListener("error",function(){ie.loading|=2}),ie.loading|=4,vS(X,u,b)}X={type:"stylesheet",instance:X,count:1,state:ie},C.set(O,X)}}}function NY(l,u){Wf.X(l,u);var g=w0;if(g&&l){var b=_n(g).hoistableScripts,C=T0(l),O=b.get(C);O||(O=g.querySelector(Mb(C)),O||(l=p({src:l,async:!0},u),(u=Gl.get(C))&&ZC(l,u),O=g.createElement("script"),ee(O),Ya(O,"link",l),g.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},b.set(C,O))}}function OY(l,u){Wf.M(l,u);var g=w0;if(g&&l){var b=_n(g).hoistableScripts,C=T0(l),O=b.get(C);O||(O=g.querySelector(Mb(C)),O||(l=p({src:l,async:!0,type:"module"},u),(u=Gl.get(C))&&ZC(l,u),O=g.createElement("script"),ee(O),Ya(O,"link",l),g.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},b.set(C,O))}}function Xk(l,u,g,b){var C=(C=ve.current)?gS(C):null;if(!C)throw Error(i(446));switch(l){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(u=E0(g.href),g=_n(C).hoistableStyles,b=g.get(u),b||(b={type:"style",instance:null,count:0,state:null},g.set(u,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){l=E0(g.href);var O=_n(C).hoistableStyles,X=O.get(l);if(X||(C=C.ownerDocument||C,X={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(l,X),(O=C.querySelector(Ab(l)))&&!O._p&&(X.instance=O,X.state.loading=5),Gl.has(l)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Gl.set(l,g),O||DY(C,l,g,X.state))),u&&b===null)throw Error(i(528,""));return X}if(u&&b!==null)throw Error(i(529,""));return null;case"script":return u=g.async,g=g.src,typeof g=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=T0(g),g=_n(C).hoistableScripts,b=g.get(u),b||(b={type:"script",instance:null,count:0,state:null},g.set(u,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,l))}}function E0(l){return'href="'+ln(l)+'"'}function Ab(l){return'link[rel="stylesheet"]['+l+"]"}function Yk(l){return p({},l,{"data-precedence":l.precedence,precedence:null})}function DY(l,u,g,b){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?b.loading=1:(u=l.createElement("link"),b.preload=u,u.addEventListener("load",function(){return b.loading|=1}),u.addEventListener("error",function(){return b.loading|=2}),Ya(u,"link",g),ee(u),l.head.appendChild(u))}function T0(l){return'[src="'+ln(l)+'"]'}function Mb(l){return"script[async]"+l}function Kk(l,u,g){if(u.count++,u.instance===null)switch(u.type){case"style":var b=l.querySelector('style[data-href~="'+ln(g.href)+'"]');if(b)return u.instance=b,ee(b),b;var C=p({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return b=(l.ownerDocument||l).createElement("style"),ee(b),Ya(b,"style",C),vS(b,g.precedence,l),u.instance=b;case"stylesheet":C=E0(g.href);var O=l.querySelector(Ab(C));if(O)return u.state.loading|=4,u.instance=O,ee(O),O;b=Yk(g),(C=Gl.get(C))&&KC(b,C),O=(l.ownerDocument||l).createElement("link"),ee(O);var X=O;return X._p=new Promise(function(ie,ge){X.onload=ie,X.onerror=ge}),Ya(O,"link",b),u.state.loading|=4,vS(O,g.precedence,l),u.instance=O;case"script":return O=T0(g.src),(C=l.querySelector(Mb(O)))?(u.instance=C,ee(C),C):(b=g,(C=Gl.get(O))&&(b=p({},g),ZC(b,C)),l=l.ownerDocument||l,C=l.createElement("script"),ee(C),Ya(C,"link",b),l.head.appendChild(C),u.instance=C);case"void":return null;default:throw Error(i(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(b=u.instance,u.state.loading|=4,vS(b,g.precedence,l));return u.instance}function vS(l,u,g){for(var b=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=b.length?b[b.length-1]:null,O=C,X=0;X<b.length;X++){var ie=b[X];if(ie.dataset.precedence===u)O=ie;else if(O!==C)break}O?O.parentNode.insertBefore(l,O.nextSibling):(u=g.nodeType===9?g.head:g,u.insertBefore(l,u.firstChild))}function KC(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function ZC(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var yS=null;function Zk(l,u,g){if(yS===null){var b=new Map,C=yS=new Map;C.set(g,b)}else C=yS,b=C.get(g),b||(b=new Map,C.set(g,b));if(b.has(l))return b;for(b.set(l,null),g=g.getElementsByTagName(l),C=0;C<g.length;C++){var O=g[C];if(!(O[he]||O[di]||l==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var X=O.getAttribute(u)||"";X=l+X;var ie=b.get(X);ie?ie.push(O):b.set(X,[O])}}return b}function Qk(l,u,g){l=l.ownerDocument||l,l.head.insertBefore(g,u==="title"?l.querySelector("head > title"):null)}function LY(l,u,g){if(g===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function Jk(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function kY(l,u,g,b){if(g.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(g.state.loading&4)===0){if(g.instance===null){var C=E0(b.href),O=u.querySelector(Ab(C));if(O){u=O._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(l.count++,l=bS.bind(l),u.then(l,l)),g.state.loading|=4,g.instance=O,ee(O);return}O=u.ownerDocument||u,b=Yk(b),(C=Gl.get(C))&&KC(b,C),O=O.createElement("link"),ee(O);var X=O;X._p=new Promise(function(ie,ge){X.onload=ie,X.onerror=ge}),Ya(O,"link",b),g.instance=O}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(g,u),(u=g.state.preload)&&(g.state.loading&3)===0&&(l.count++,g=bS.bind(l),u.addEventListener("load",g),u.addEventListener("error",g))}}var QC=0;function UY(l,u){return l.stylesheets&&l.count===0&&xS(l,l.stylesheets),0<l.count||0<l.imgCount?function(g){var b=setTimeout(function(){if(l.stylesheets&&xS(l,l.stylesheets),l.unsuspend){var O=l.unsuspend;l.unsuspend=null,O()}},6e4+u);0<l.imgBytes&&QC===0&&(QC=62500*vY());var C=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&xS(l,l.stylesheets),l.unsuspend)){var O=l.unsuspend;l.unsuspend=null,O()}},(l.imgBytes>QC?50:800)+u);return l.unsuspend=g,function(){l.unsuspend=null,clearTimeout(b),clearTimeout(C)}}:null}function bS(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)xS(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var _S=null;function xS(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,_S=new Map,u.forEach(FY,l),_S=null,bS.call(l))}function FY(l,u){if(!(u.state.loading&4)){var g=_S.get(l);if(g)var b=g.get(null);else{g=new Map,_S.set(l,g);for(var C=l.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<C.length;O++){var X=C[O];(X.nodeName==="LINK"||X.getAttribute("media")!=="not all")&&(g.set(X.dataset.precedence,X),b=X)}b&&g.set(null,b)}C=u.instance,X=C.getAttribute("data-precedence"),O=g.get(X)||b,O===b&&g.set(null,C),g.set(X,C),this.count++,b=bS.bind(this),C.addEventListener("load",b),C.addEventListener("error",b),O?O.parentNode.insertBefore(C,O.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(C,l.firstChild)),u.state.loading|=4}}var Cb={$$typeof:P,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function zY(l,u,g,b,C,O,X,ie,ge){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qt(0),this.hiddenUpdates=Qt(null),this.identifierPrefix=b,this.onUncaughtError=C,this.onCaughtError=O,this.onRecoverableError=X,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ge,this.incompleteTransitions=new Map}function eU(l,u,g,b,C,O,X,ie,ge,Fe,Je,ot){return l=new zY(l,u,g,X,ge,Fe,Je,ot,ie),u=1,O===!0&&(u|=24),O=$i(3,null,null,u),l.current=O,O.stateNode=l,u=Ny(),u.refCount++,l.pooledCache=u,u.refCount++,O.memoizedState={element:b,isDehydrated:g,cache:u},Hp(O),l}function tU(l){return l?(l=iu,l):iu}function nU(l,u,g,b,C,O){C=tU(C),b.context===null?b.context=C:b.pendingContext=C,b=vc(u),b.payload={element:g},O=O===void 0?null:O,O!==null&&(b.callback=O),g=fu(l,b,u),g!==null&&(kn(g,l,u),hu(g,l,u))}function iU(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<u?g:u}}function JC(l,u){iU(l,u),(l=l.alternate)&&iU(l,u)}function rU(l){if(l.tag===13||l.tag===31){var u=ja(l,67108864);u!==null&&kn(u,l,67108864),JC(l,67108864)}}function aU(l){if(l.tag===13||l.tag===31){var u=$s();u=Ua(u);var g=ja(l,u);g!==null&&kn(g,l,u),JC(l,u)}}var SS=!0;function BY(l,u,g,b){var C=G.T;G.T=null;var O=$.p;try{$.p=2,eI(l,u,g,b)}finally{$.p=O,G.T=C}}function VY(l,u,g,b){var C=G.T;G.T=null;var O=$.p;try{$.p=8,eI(l,u,g,b)}finally{$.p=O,G.T=C}}function eI(l,u,g,b){if(SS){var C=tI(b);if(C===null)BC(l,u,b,wS,g),oU(l,b);else if(HY(C,l,u,g,b))b.stopPropagation();else if(oU(l,b),u&4&&-1<jY.indexOf(l)){for(;C!==null;){var O=Vt(C);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var X=nt(O.pendingLanes);if(X!==0){var ie=O;for(ie.pendingLanes|=2,ie.entangledLanes|=2;X;){var ge=1<<31-fe(X);ie.entanglements[1]|=ge,X&=~ge}St(O),(Kt&6)===0&&(br=Y()+500,zt(0))}}break;case 31:case 13:ie=ja(O,2),ie!==null&&kn(ie,O,2),el(),JC(O,2)}if(O=tI(b),O===null&&BC(l,u,b,wS,g),O===C)break;C=O}C!==null&&b.stopPropagation()}else BC(l,u,b,null,g)}}function tI(l){return l=Us(l),nI(l)}var wS=null;function nI(l){if(wS=null,l=gt(l),l!==null){var u=a(l);if(u===null)l=null;else{var g=u.tag;if(g===13){if(l=s(u),l!==null)return l;l=null}else if(g===31){if(l=o(u),l!==null)return l;l=null}else if(g===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return wS=l,null}function sU(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(me()){case Ue:return 2;case qe:return 8;case De:case Mt:return 32;case ct:return 268435456;default:return 32}default:return 32}}var iI=!1,gd=null,vd=null,yd=null,Ib=new Map,Rb=new Map,bd=[],jY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function oU(l,u){switch(l){case"focusin":case"focusout":gd=null;break;case"dragenter":case"dragleave":vd=null;break;case"mouseover":case"mouseout":yd=null;break;case"pointerover":case"pointerout":Ib.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rb.delete(u.pointerId)}}function Pb(l,u,g,b,C,O){return l===null||l.nativeEvent!==O?(l={blockedOn:u,domEventName:g,eventSystemFlags:b,nativeEvent:O,targetContainers:[C]},u!==null&&(u=Vt(u),u!==null&&rU(u)),l):(l.eventSystemFlags|=b,u=l.targetContainers,C!==null&&u.indexOf(C)===-1&&u.push(C),l)}function HY(l,u,g,b,C){switch(u){case"focusin":return gd=Pb(gd,l,u,g,b,C),!0;case"dragenter":return vd=Pb(vd,l,u,g,b,C),!0;case"mouseover":return yd=Pb(yd,l,u,g,b,C),!0;case"pointerover":var O=C.pointerId;return Ib.set(O,Pb(Ib.get(O)||null,l,u,g,b,C)),!0;case"gotpointercapture":return O=C.pointerId,Rb.set(O,Pb(Rb.get(O)||null,l,u,g,b,C)),!0}return!1}function lU(l){var u=gt(l.target);if(u!==null){var g=a(u);if(g!==null){if(u=g.tag,u===13){if(u=s(g),u!==null){l.blockedOn=u,Ci(l.priority,function(){aU(g)});return}}else if(u===31){if(u=o(g),u!==null){l.blockedOn=u,Ci(l.priority,function(){aU(g)});return}}else if(u===3&&g.stateNode.current.memoizedState.isDehydrated){l.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}l.blockedOn=null}function ES(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var g=tI(l.nativeEvent);if(g===null){g=l.nativeEvent;var b=new g.constructor(g.type,g);Ph=b,g.target.dispatchEvent(b),Ph=null}else return u=Vt(g),u!==null&&rU(u),l.blockedOn=g,!1;u.shift()}return!0}function cU(l,u,g){ES(l)&&g.delete(u)}function GY(){iI=!1,gd!==null&&ES(gd)&&(gd=null),vd!==null&&ES(vd)&&(vd=null),yd!==null&&ES(yd)&&(yd=null),Ib.forEach(cU),Rb.forEach(cU)}function TS(l,u){l.blockedOn===u&&(l.blockedOn=null,iI||(iI=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,GY)))}var AS=null;function uU(l){AS!==l&&(AS=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){AS===l&&(AS=null);for(var u=0;u<l.length;u+=3){var g=l[u],b=l[u+1],C=l[u+2];if(typeof b!="function"){if(nI(b||g)===null)continue;break}var O=Vt(g);O!==null&&(l.splice(u,3),u-=3,ab(O,{pending:!0,data:C,method:g.method,action:b},b,C))}}))}function A0(l){function u(ge){return TS(ge,l)}gd!==null&&TS(gd,l),vd!==null&&TS(vd,l),yd!==null&&TS(yd,l),Ib.forEach(u),Rb.forEach(u);for(var g=0;g<bd.length;g++){var b=bd[g];b.blockedOn===l&&(b.blockedOn=null)}for(;0<bd.length&&(g=bd[0],g.blockedOn===null);)lU(g),g.blockedOn===null&&bd.shift();if(g=(l.ownerDocument||l).$$reactFormReplay,g!=null)for(b=0;b<g.length;b+=3){var C=g[b],O=g[b+1],X=C[Ii]||null;if(typeof O=="function")X||uU(g);else if(X){var ie=null;if(O&&O.hasAttribute("formAction")){if(C=O,X=O[Ii]||null)ie=X.formAction;else if(nI(C)!==null)continue}else ie=X.action;typeof ie=="function"?g[b+1]=ie:(g.splice(b,3),b-=3),uU(g)}}}function fU(){function l(O){O.canIntercept&&O.info==="react-transition"&&O.intercept({handler:function(){return new Promise(function(X){return C=X})},focusReset:"manual",scroll:"manual"})}function u(){C!==null&&(C(),C=null),b||setTimeout(g,20)}function g(){if(!b&&!navigation.transition){var O=navigation.currentEntry;O&&O.url!=null&&navigation.navigate(O.url,{state:O.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var b=!1,C=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(g,100),function(){b=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),C!==null&&(C(),C=null)}}}function rI(l){this._internalRoot=l}MS.prototype.render=rI.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(i(409));var g=u.current,b=$s();nU(g,b,l,u,null,null)},MS.prototype.unmount=rI.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;nU(l.current,2,null,l,null,null),el(),u[Er]=null}};function MS(l){this._internalRoot=l}MS.prototype.unstable_scheduleHydration=function(l){if(l){var u=jo();l={blockedOn:null,target:l,priority:u};for(var g=0;g<bd.length&&u!==0&&u<bd[g].priority;g++);bd.splice(g,0,l),g===0&&lU(l)}};var hU=e.version;if(hU!=="19.2.4")throw Error(i(527,hU,"19.2.4"));$.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(i(188)):(l=Object.keys(l).join(","),Error(i(268,l)));return l=f(u),l=l!==null?h(l):null,l=l===null?null:l.stateNode,l};var WY={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var CS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!CS.isDisabled&&CS.supportsFiber)try{et=CS.inject(WY),st=CS}catch{}}return Ob.createRoot=function(l,u){if(!r(l))throw Error(i(299));var g=!1,b="",C=aS,O=fb,X=hb;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onUncaughtError!==void 0&&(C=u.onUncaughtError),u.onCaughtError!==void 0&&(O=u.onCaughtError),u.onRecoverableError!==void 0&&(X=u.onRecoverableError)),u=eU(l,1,!1,null,null,g,b,null,C,O,X,fU),l[Er]=u.current,zC(l),new rI(u)},Ob.hydrateRoot=function(l,u,g){if(!r(l))throw Error(i(299));var b=!1,C="",O=aS,X=fb,ie=hb,ge=null;return g!=null&&(g.unstable_strictMode===!0&&(b=!0),g.identifierPrefix!==void 0&&(C=g.identifierPrefix),g.onUncaughtError!==void 0&&(O=g.onUncaughtError),g.onCaughtError!==void 0&&(X=g.onCaughtError),g.onRecoverableError!==void 0&&(ie=g.onRecoverableError),g.formState!==void 0&&(ge=g.formState)),u=eU(l,1,!0,u,g??null,b,C,ge,O,X,ie,fU),u.context=tU(null),g=u.current,b=$s(),b=Ua(b),C=vc(b),C.callback=null,fu(g,C,b),g=b,u.current.lanes=g,Ei(u,g),St(u),l[Er]=u.current,zC(l),new MS(u)},Ob.version="19.2.4",Ob}var SU;function nK(){if(SU)return lI.exports;SU=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),lI.exports=tK(),lI.exports}var iK=nK();const rK=Wc(iK);var XV=$V();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function N_(){return N_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},N_.apply(this,arguments)}var Hd;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Hd||(Hd={}));const wU="popstate";function aK(n){n===void 0&&(n={});function e(i,r){let{pathname:a,search:s,hash:o}=i.location;return sN("",{pathname:a,search:s,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:yE(r)}return oK(e,t,null,n)}function ra(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function JO(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sK(){return Math.random().toString(36).substr(2,8)}function EU(n,e){return{usr:n.state,key:n.key,idx:e}}function sN(n,e,t,i){return t===void 0&&(t=null),N_({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Zv(e):e,{state:t,key:e&&e.key||i||sK()})}function yE(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Zv(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function oK(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:a=!1}=i,s=r.history,o=Hd.Pop,c=null,f=h();f==null&&(f=0,s.replaceState(N_({},s.state,{idx:f}),""));function h(){return(s.state||{idx:null}).idx}function p(){o=Hd.Pop;let S=h(),w=S==null?null:S-f;f=S,c&&c({action:o,location:E.location,delta:w})}function v(S,w){o=Hd.Push;let I=sN(E.location,S,w);f=h()+1;let P=EU(I,f),D=E.createHref(I);try{s.pushState(P,"",D)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;r.location.assign(D)}a&&c&&c({action:o,location:E.location,delta:1})}function y(S,w){o=Hd.Replace;let I=sN(E.location,S,w);f=h();let P=EU(I,f),D=E.createHref(I);s.replaceState(P,"",D),a&&c&&c({action:o,location:E.location,delta:0})}function _(S){let w=r.location.origin!=="null"?r.location.origin:r.location.href,I=typeof S=="string"?S:yE(S);return I=I.replace(/ $/,"%20"),ra(w,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,w)}let E={get action(){return o},get location(){return n(r,s)},listen(S){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(wU,p),c=S,()=>{r.removeEventListener(wU,p),c=null}},createHref(S){return e(r,S)},createURL:_,encodeLocation(S){let w=_(S);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:v,replace:y,go(S){return s.go(S)}};return E}var TU;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(TU||(TU={}));function lK(n,e,t){return t===void 0&&(t="/"),cK(n,e,t)}function cK(n,e,t,i){let r=typeof e=="string"?Zv(e):e,a=e3(r.pathname||"/",t);if(a==null)return null;let s=YV(n);uK(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let f=SK(a);o=bK(s[c],f)}return o}function YV(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(a,s,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};c.relativePath.startsWith("/")&&(ra(c.relativePath.startsWith(i),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(i.length));let f=Yd([i,c.relativePath]),h=t.concat(c);a.children&&a.children.length>0&&(ra(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),YV(a.children,e,h,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:vK(f,a.index),routesMeta:h})};return n.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))r(a,s);else for(let c of KV(a.path))r(a,s,c)}),e}function KV(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let s=KV(i.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),r&&o.push(...s),o.map(c=>n.startsWith("/")&&c===""?"/":c)}function uK(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:yK(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const fK=/^:[\w-]+$/,hK=3,dK=2,pK=1,mK=10,gK=-2,AU=n=>n==="*";function vK(n,e){let t=n.split("/"),i=t.length;return t.some(AU)&&(i+=gK),e&&(i+=dK),t.filter(r=>!AU(r)).reduce((r,a)=>r+(fK.test(a)?hK:a===""?pK:mK),i)}function yK(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function bK(n,e,t){let{routesMeta:i}=n,r={},a="/",s=[];for(let o=0;o<i.length;++o){let c=i[o],f=o===i.length-1,h=a==="/"?e:e.slice(a.length)||"/",p=_K({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},h),v=c.route;if(!p)return null;Object.assign(r,p.params),s.push({params:r,pathname:Yd([a,p.pathname]),pathnameBase:MK(Yd([a,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(a=Yd([a,p.pathnameBase]))}return s}function _K(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=xK(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let a=r[0],s=a.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((f,h,p)=>{let{paramName:v,isOptional:y}=h;if(v==="*"){let E=o[p]||"";s=a.slice(0,a.length-E.length).replace(/(.)\/+$/,"$1")}const _=o[p];return y&&!_?f[v]=void 0:f[v]=(_||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:s,pattern:n}}function xK(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),JO(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(i.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function SK(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return JO(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function e3(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}const wK=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,EK=n=>wK.test(n);function TK(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Zv(n):n,a;if(t)if(EK(t))a=t;else{if(t.includes("//")){let s=t;t=t.replace(/\/\/+/g,"/"),JO(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+t))}t.startsWith("/")?a=MU(t.substring(1),"/"):a=MU(t,e)}else a=e;return{pathname:a,search:CK(i),hash:IK(r)}}function MU(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function hI(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function AK(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ZV(n,e){let t=AK(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function QV(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=Zv(n):(r=N_({},n),ra(!r.pathname||!r.pathname.includes("?"),hI("?","pathname","search",r)),ra(!r.pathname||!r.pathname.includes("#"),hI("#","pathname","hash",r)),ra(!r.search||!r.search.includes("#"),hI("#","search","hash",r)));let a=n===""||r.pathname==="",s=a?"/":r.pathname,o;if(s==null)o=t;else{let p=e.length-1;if(!i&&s.startsWith("..")){let v=s.split("/");for(;v[0]==="..";)v.shift(),p-=1;r.pathname=v.join("/")}o=p>=0?e[p]:"/"}let c=TK(r,o),f=s&&s!=="/"&&s.endsWith("/"),h=(a||s===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}const Yd=n=>n.join("/").replace(/\/\/+/g,"/"),MK=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),CK=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,IK=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function RK(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const JV=["post","put","patch","delete"];new Set(JV);const PK=["get",...JV];new Set(PK);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function O_(){return O_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},O_.apply(this,arguments)}const t3=q.createContext(null),NK=q.createContext(null),xg=q.createContext(null),NA=q.createContext(null),Sg=q.createContext({outlet:null,matches:[],isDataRoute:!1}),ej=q.createContext(null);function OK(n,e){let{relative:t}=e===void 0?{}:e;Ax()||ra(!1);let{basename:i,navigator:r}=q.useContext(xg),{hash:a,pathname:s,search:o}=ij(n,{relative:t}),c=s;return i!=="/"&&(c=s==="/"?i:Yd([i,s])),r.createHref({pathname:c,search:o,hash:a})}function Ax(){return q.useContext(NA)!=null}function OA(){return Ax()||ra(!1),q.useContext(NA).location}function tj(n){q.useContext(xg).static||q.useLayoutEffect(n)}function nj(){let{isDataRoute:n}=q.useContext(Sg);return n?qK():DK()}function DK(){Ax()||ra(!1);let n=q.useContext(t3),{basename:e,future:t,navigator:i}=q.useContext(xg),{matches:r}=q.useContext(Sg),{pathname:a}=OA(),s=JSON.stringify(ZV(r,t.v7_relativeSplatPath)),o=q.useRef(!1);return tj(()=>{o.current=!0}),q.useCallback(function(f,h){if(h===void 0&&(h={}),!o.current)return;if(typeof f=="number"){i.go(f);return}let p=QV(f,JSON.parse(s),a,h.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Yd([e,p.pathname])),(h.replace?i.replace:i.push)(p,h.state,h)},[e,i,s,a,n])}function ij(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=q.useContext(xg),{matches:r}=q.useContext(Sg),{pathname:a}=OA(),s=JSON.stringify(ZV(r,i.v7_relativeSplatPath));return q.useMemo(()=>QV(n,JSON.parse(s),a,t==="path"),[n,s,a,t])}function LK(n,e){return kK(n,e)}function kK(n,e,t,i){Ax()||ra(!1);let{navigator:r}=q.useContext(xg),{matches:a}=q.useContext(Sg),s=a[a.length-1],o=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let f=OA(),h;if(e){var p;let S=typeof e=="string"?Zv(e):e;c==="/"||(p=S.pathname)!=null&&p.startsWith(c)||ra(!1),h=S}else h=f;let v=h.pathname||"/",y=v;if(c!=="/"){let S=c.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(S.length).join("/")}let _=lK(n,{pathname:y}),E=VK(_&&_.map(S=>Object.assign({},S,{params:Object.assign({},o,S.params),pathname:Yd([c,r.encodeLocation?r.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Yd([c,r.encodeLocation?r.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,t,i);return e&&E?q.createElement(NA.Provider,{value:{location:O_({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Hd.Pop}},E):E}function UK(){let n=WK(),e=RK(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:r},t):null,null)}const FK=q.createElement(UK,null);class zK extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?q.createElement(Sg.Provider,{value:this.props.routeContext},q.createElement(ej.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function BK(n){let{routeContext:e,match:t,children:i}=n,r=q.useContext(t3);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),q.createElement(Sg.Provider,{value:e},i)}function VK(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=i)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=(r=t)==null?void 0:r.errors;if(o!=null){let h=s.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);h>=0||ra(!1),s=s.slice(0,Math.min(s.length,h+1))}let c=!1,f=-1;if(t&&i&&i.v7_partialHydration)for(let h=0;h<s.length;h++){let p=s[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:v,errors:y}=t,_=p.route.loader&&v[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||_){c=!0,f>=0?s=s.slice(0,f+1):s=[s[0]];break}}}return s.reduceRight((h,p,v)=>{let y,_=!1,E=null,S=null;t&&(y=o&&p.route.id?o[p.route.id]:void 0,E=p.route.errorElement||FK,c&&(f<0&&v===0?($K("route-fallback"),_=!0,S=null):f===v&&(_=!0,S=p.route.hydrateFallbackElement||null)));let w=e.concat(s.slice(0,v+1)),I=()=>{let P;return y?P=E:_?P=S:p.route.Component?P=q.createElement(p.route.Component,null):p.route.element?P=p.route.element:P=h,q.createElement(BK,{match:p,routeContext:{outlet:h,matches:w,isDataRoute:t!=null},children:P})};return t&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?q.createElement(zK,{location:t.location,revalidation:t.revalidation,component:E,error:y,children:I(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):I()},null)}var rj=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(rj||{}),aj=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(aj||{});function jK(n){let e=q.useContext(t3);return e||ra(!1),e}function HK(n){let e=q.useContext(NK);return e||ra(!1),e}function GK(n){let e=q.useContext(Sg);return e||ra(!1),e}function sj(n){let e=GK(),t=e.matches[e.matches.length-1];return t.route.id||ra(!1),t.route.id}function WK(){var n;let e=q.useContext(ej),t=HK(),i=sj();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function qK(){let{router:n}=jK(rj.UseNavigateStable),e=sj(aj.UseNavigateStable),t=q.useRef(!1);return tj(()=>{t.current=!0}),q.useCallback(function(r,a){a===void 0&&(a={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,O_({fromRouteId:e},a)))},[n,e])}const CU={};function $K(n,e,t){CU[n]||(CU[n]=!0)}function XK(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Nd(n){ra(!1)}function YK(n){let{basename:e="/",children:t=null,location:i,navigationType:r=Hd.Pop,navigator:a,static:s=!1,future:o}=n;Ax()&&ra(!1);let c=e.replace(/^\/*/,"/"),f=q.useMemo(()=>({basename:c,navigator:a,static:s,future:O_({v7_relativeSplatPath:!1},o)}),[c,o,a,s]);typeof i=="string"&&(i=Zv(i));let{pathname:h="/",search:p="",hash:v="",state:y=null,key:_="default"}=i,E=q.useMemo(()=>{let S=e3(h,c);return S==null?null:{location:{pathname:S,search:p,hash:v,state:y,key:_},navigationType:r}},[c,h,p,v,y,_,r]);return E==null?null:q.createElement(xg.Provider,{value:f},q.createElement(NA.Provider,{children:t,value:E}))}function KK(n){let{children:e,location:t}=n;return LK(oN(e),t)}new Promise(()=>{});function oN(n,e){e===void 0&&(e=[]);let t=[];return q.Children.forEach(n,(i,r)=>{if(!q.isValidElement(i))return;let a=[...e,r];if(i.type===q.Fragment){t.push.apply(t,oN(i.props.children,a));return}i.type!==Nd&&ra(!1),!i.props.index||!i.props.children||ra(!1);let s={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(s.children=oN(i.props.children,a)),t.push(s)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lN(){return lN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},lN.apply(this,arguments)}function ZK(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,a;for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function QK(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function JK(n,e){return n.button===0&&(!e||e==="_self")&&!QK(n)}const eZ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],tZ="6";try{window.__reactRouterVersion=tZ}catch{}const nZ="startTransition",IU=WV[nZ];function iZ(n){let{basename:e,children:t,future:i,window:r}=n,a=q.useRef();a.current==null&&(a.current=aK({window:r,v5Compat:!0}));let s=a.current,[o,c]=q.useState({action:s.action,location:s.location}),{v7_startTransition:f}=i||{},h=q.useCallback(p=>{f&&IU?IU(()=>c(p)):c(p)},[c,f]);return q.useLayoutEffect(()=>s.listen(h),[s,h]),q.useEffect(()=>XK(i),[i]),q.createElement(YK,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:s,future:i})}const rZ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",aZ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,il=q.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:a,replace:s,state:o,target:c,to:f,preventScrollReset:h,viewTransition:p}=e,v=ZK(e,eZ),{basename:y}=q.useContext(xg),_,E=!1;if(typeof f=="string"&&aZ.test(f)&&(_=f,rZ))try{let P=new URL(window.location.href),D=f.startsWith("//")?new URL(P.protocol+f):new URL(f),z=e3(D.pathname,y);D.origin===P.origin&&z!=null?f=z+D.search+D.hash:E=!0}catch{}let S=OK(f,{relative:r}),w=sZ(f,{replace:s,state:o,target:c,preventScrollReset:h,relative:r,viewTransition:p});function I(P){i&&i(P),P.defaultPrevented||w(P)}return q.createElement("a",lN({},v,{href:_||S,onClick:E||a?i:I,ref:t,target:c}))});var RU;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(RU||(RU={}));var PU;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(PU||(PU={}));function sZ(n,e){let{target:t,replace:i,state:r,preventScrollReset:a,relative:s,viewTransition:o}=e===void 0?{}:e,c=nj(),f=OA(),h=ij(n,{relative:s});return q.useCallback(p=>{if(JK(p,t)){p.preventDefault();let v=i!==void 0?i:yE(f)===yE(h);c(n,{replace:v,state:r,preventScrollReset:a,relative:s,viewTransition:o})}},[f,c,h,i,r,t,n,a,s,o])}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const DA="182",wm={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Em={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},oj=0,cN=1,lj=2,oZ=3,cj=0,mv=1,p_=2,Om=3,hh=0,io=1,ku=2,Gu=0,Wm=1,uN=2,fN=3,hN=4,uj=5,kd=100,fj=101,hj=102,dj=103,pj=104,mj=200,gj=201,vj=202,yj=203,bE=204,_E=205,bj=206,_j=207,xj=208,Sj=209,wj=210,Ej=211,Tj=212,Aj=213,Mj=214,xE=0,SE=1,wE=2,ng=3,EE=4,TE=5,AE=6,ME=7,Mx=0,Cj=1,Ij=2,Zl=0,n3=1,i3=2,r3=3,LA=4,a3=5,s3=6,o3=7,dN="attached",Rj="detached",kA=300,Zu=301,ip=302,D_=303,L_=304,Qv=306,k_=1e3,Uo=1001,U_=1002,Wr=1003,l3=1004,lZ=1004,lv=1005,cZ=1005,ir=1006,m_=1007,uZ=1007,zu=1008,fZ=1008,Qs=1009,c3=1010,u3=1011,Av=1012,UA=1013,Ql=1014,eo=1015,Qu=1016,FA=1017,zA=1018,Mv=1020,f3=35902,h3=35899,d3=1021,p3=1022,Is=1023,Ju=1026,Gd=1027,BA=1028,Cx=1029,ig=1030,VA=1031,hZ=1032,jA=1033,g_=33776,v_=33777,y_=33778,b_=33779,CE=35840,IE=35841,RE=35842,PE=35843,NE=36196,OE=37492,DE=37496,LE=37488,kE=37489,UE=37490,FE=37491,zE=37808,BE=37809,VE=37810,jE=37811,HE=37812,GE=37813,WE=37814,qE=37815,$E=37816,XE=37817,YE=37818,KE=37819,ZE=37820,QE=37821,JE=36492,eT=36494,tT=36495,nT=36283,iT=36284,rT=36285,aT=36286,Pj=2200,Nj=2201,Oj=2202,F_=2300,sT=2301,Kw=2302,Dm=2400,Lm=2401,z_=2402,HA=2500,m3=2501,dZ=0,pZ=1,mZ=2,Dj=3200,gZ=3201,vZ=3202,yZ=3203,gp=0,Lj=1,eh="",ts="srgb",rp="srgb-linear",B_="linear",Si="srgb",bZ="",_Z="rg",xZ="ga",SZ=0,Tm=7680,wZ=7681,EZ=7682,TZ=7683,AZ=34055,MZ=34056,CZ=5386,IZ=512,RZ=513,PZ=514,NZ=515,OZ=516,DZ=517,LZ=518,pN=519,kj=512,Uj=513,Fj=514,GA=515,zj=516,Bj=517,WA=518,Vj=519,V_=35044,kZ=35048,UZ=35040,FZ=35045,zZ=35049,BZ=35041,VZ=35046,jZ=35050,HZ=35042,GZ="100",mN="300 es",al=2e3,Cv=2001,WZ={COMPUTE:"compute",RENDER:"render"},qZ={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},$Z={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function jj(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const XZ={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function cv(n,e){return new XZ[n](e)}function Hj(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function j_(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Gj(){const n=j_("canvas");return n.style.display="block",n}const NU={};let ap=null;function YZ(n){ap=n}function KZ(){return ap}function H_(...n){const e="THREE."+n.shift();ap?ap("log",e,...n):console.log(e,...n)}function Dt(...n){const e="THREE."+n.shift();ap?ap("warn",e,...n):console.warn(e,...n)}function tn(...n){const e="THREE."+n.shift();ap?ap("error",e,...n):console.error(e,...n)}function Iv(...n){const e=n.join(" ");e in NU||(NU[e]=!0,Dt(...n))}function ZZ(n,e,t){return new Promise(function(i,r){function a(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:i()}}setTimeout(a,t)})}let uf=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e);e.target=null}}};const xs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let OU=1234567;const qm=Math.PI/180,Rv=180/Math.PI;function cl(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(xs[n&255]+xs[n>>8&255]+xs[n>>16&255]+xs[n>>24&255]+"-"+xs[e&255]+xs[e>>8&255]+"-"+xs[e>>16&15|64]+xs[e>>24&255]+"-"+xs[t&63|128]+xs[t>>8&255]+"-"+xs[t>>16&255]+xs[t>>24&255]+xs[i&255]+xs[i>>8&255]+xs[i>>16&255]+xs[i>>24&255]).toLowerCase()}function gn(n,e,t){return Math.max(e,Math.min(t,n))}function g3(n,e){return(n%e+e)%e}function QZ(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function JZ(n,e,t){return n!==e?(t-n)/(e-n):0}function __(n,e,t){return(1-t)*n+t*e}function eQ(n,e,t,i){return __(n,e,1-Math.exp(-t*i))}function tQ(n,e=1){return e-Math.abs(g3(n,e*2)-e)}function nQ(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function iQ(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function rQ(n,e){return n+Math.floor(Math.random()*(e-n+1))}function aQ(n,e){return n+Math.random()*(e-n)}function sQ(n){return n*(.5-Math.random())}function oQ(n){n!==void 0&&(OU=n);let e=OU+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function lQ(n){return n*qm}function cQ(n){return n*Rv}function uQ(n){return(n&n-1)===0&&n!==0}function fQ(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function hQ(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function dQ(n,e,t,i,r){const a=Math.cos,s=Math.sin,o=a(t/2),c=s(t/2),f=a((e+i)/2),h=s((e+i)/2),p=a((e-i)/2),v=s((e-i)/2),y=a((i-e)/2),_=s((i-e)/2);switch(r){case"XYX":n.set(o*h,c*p,c*v,o*f);break;case"YZY":n.set(c*v,o*h,c*p,o*f);break;case"ZXZ":n.set(c*p,c*v,o*h,o*f);break;case"XZX":n.set(o*h,c*_,c*y,o*f);break;case"YXY":n.set(c*y,o*h,c*_,o*f);break;case"ZYZ":n.set(c*_,c*y,o*h,o*f);break;default:Dt("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Js(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Un(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Wj={DEG2RAD:qm,RAD2DEG:Rv,generateUUID:cl,clamp:gn,euclideanModulo:g3,mapLinear:QZ,inverseLerp:JZ,lerp:__,damp:eQ,pingpong:tQ,smoothstep:nQ,smootherstep:iQ,randInt:rQ,randFloat:aQ,randFloatSpread:sQ,seededRandom:oQ,degToRad:lQ,radToDeg:cQ,isPowerOfTwo:uQ,ceilPowerOfTwo:fQ,floorPowerOfTwo:hQ,setQuaternionFromProperEuler:dQ,normalize:Un,denormalize:Js};class rt{constructor(e=0,t=0){rt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=gn(this.x,e.x,t.x),this.y=gn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=gn(this.x,e,t),this.y=gn(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(gn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(gn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),a=this.x-e.x,s=this.y-e.y;return this.x=a*i-s*r+e.x,this.y=a*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Rs{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,a,s,o){let c=i[r+0],f=i[r+1],h=i[r+2],p=i[r+3],v=a[s+0],y=a[s+1],_=a[s+2],E=a[s+3];if(o<=0){e[t+0]=c,e[t+1]=f,e[t+2]=h,e[t+3]=p;return}if(o>=1){e[t+0]=v,e[t+1]=y,e[t+2]=_,e[t+3]=E;return}if(p!==E||c!==v||f!==y||h!==_){let S=c*v+f*y+h*_+p*E;S<0&&(v=-v,y=-y,_=-_,E=-E,S=-S);let w=1-o;if(S<.9995){const I=Math.acos(S),P=Math.sin(I);w=Math.sin(w*I)/P,o=Math.sin(o*I)/P,c=c*w+v*o,f=f*w+y*o,h=h*w+_*o,p=p*w+E*o}else{c=c*w+v*o,f=f*w+y*o,h=h*w+_*o,p=p*w+E*o;const I=1/Math.sqrt(c*c+f*f+h*h+p*p);c*=I,f*=I,h*=I,p*=I}}e[t]=c,e[t+1]=f,e[t+2]=h,e[t+3]=p}static multiplyQuaternionsFlat(e,t,i,r,a,s){const o=i[r],c=i[r+1],f=i[r+2],h=i[r+3],p=a[s],v=a[s+1],y=a[s+2],_=a[s+3];return e[t]=o*_+h*p+c*y-f*v,e[t+1]=c*_+h*v+f*p-o*y,e[t+2]=f*_+h*y+o*v-c*p,e[t+3]=h*_-o*p-c*v-f*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,a=e._z,s=e._order,o=Math.cos,c=Math.sin,f=o(i/2),h=o(r/2),p=o(a/2),v=c(i/2),y=c(r/2),_=c(a/2);switch(s){case"XYZ":this._x=v*h*p+f*y*_,this._y=f*y*p-v*h*_,this._z=f*h*_+v*y*p,this._w=f*h*p-v*y*_;break;case"YXZ":this._x=v*h*p+f*y*_,this._y=f*y*p-v*h*_,this._z=f*h*_-v*y*p,this._w=f*h*p+v*y*_;break;case"ZXY":this._x=v*h*p-f*y*_,this._y=f*y*p+v*h*_,this._z=f*h*_+v*y*p,this._w=f*h*p-v*y*_;break;case"ZYX":this._x=v*h*p-f*y*_,this._y=f*y*p+v*h*_,this._z=f*h*_-v*y*p,this._w=f*h*p+v*y*_;break;case"YZX":this._x=v*h*p+f*y*_,this._y=f*y*p+v*h*_,this._z=f*h*_-v*y*p,this._w=f*h*p-v*y*_;break;case"XZY":this._x=v*h*p-f*y*_,this._y=f*y*p-v*h*_,this._z=f*h*_+v*y*p,this._w=f*h*p+v*y*_;break;default:Dt("Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],a=t[8],s=t[1],o=t[5],c=t[9],f=t[2],h=t[6],p=t[10],v=i+o+p;if(v>0){const y=.5/Math.sqrt(v+1);this._w=.25/y,this._x=(h-c)*y,this._y=(a-f)*y,this._z=(s-r)*y}else if(i>o&&i>p){const y=2*Math.sqrt(1+i-o-p);this._w=(h-c)/y,this._x=.25*y,this._y=(r+s)/y,this._z=(a+f)/y}else if(o>p){const y=2*Math.sqrt(1+o-i-p);this._w=(a-f)/y,this._x=(r+s)/y,this._y=.25*y,this._z=(c+h)/y}else{const y=2*Math.sqrt(1+p-i-o);this._w=(s-r)/y,this._x=(a+f)/y,this._y=(c+h)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(gn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,a=e._z,s=e._w,o=t._x,c=t._y,f=t._z,h=t._w;return this._x=i*h+s*o+r*f-a*c,this._y=r*h+s*c+a*o-i*f,this._z=a*h+s*f+i*c-r*o,this._w=s*h-i*o-r*c-a*f,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let i=e._x,r=e._y,a=e._z,s=e._w,o=this.dot(e);o<0&&(i=-i,r=-r,a=-a,s=-s,o=-o);let c=1-t;if(o<.9995){const f=Math.acos(o),h=Math.sin(f);c=Math.sin(c*f)/h,t=Math.sin(t*f)/h,this._x=this._x*c+i*t,this._y=this._y*c+r*t,this._z=this._z*c+a*t,this._w=this._w*c+s*t,this._onChangeCallback()}else this._x=this._x*c+i*t,this._y=this._y*c+r*t,this._z=this._z*c+a*t,this._w=this._w*c+s*t,this.normalize();return this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ce{constructor(e=0,t=0,i=0){ce.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(DU.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(DU.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6]*r,this.y=a[1]*t+a[4]*i+a[7]*r,this.z=a[2]*t+a[5]*i+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,a=e.elements,s=1/(a[3]*t+a[7]*i+a[11]*r+a[15]);return this.x=(a[0]*t+a[4]*i+a[8]*r+a[12])*s,this.y=(a[1]*t+a[5]*i+a[9]*r+a[13])*s,this.z=(a[2]*t+a[6]*i+a[10]*r+a[14])*s,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,a=e.x,s=e.y,o=e.z,c=e.w,f=2*(s*r-o*i),h=2*(o*t-a*r),p=2*(a*i-s*t);return this.x=t+c*f+s*p-o*h,this.y=i+c*h+o*f-a*p,this.z=r+c*p+a*h-s*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r,this.y=a[1]*t+a[5]*i+a[9]*r,this.z=a[2]*t+a[6]*i+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=gn(this.x,e.x,t.x),this.y=gn(this.y,e.y,t.y),this.z=gn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=gn(this.x,e,t),this.y=gn(this.y,e,t),this.z=gn(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(gn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,a=e.z,s=t.x,o=t.y,c=t.z;return this.x=r*c-a*o,this.y=a*s-i*c,this.z=i*o-r*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return dI.copy(this).projectOnVector(e),this.sub(dI)}reflect(e){return this.sub(dI.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(gn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const dI=new ce,DU=new Rs;class Nn{constructor(e,t,i,r,a,s,o,c,f){Nn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,s,o,c,f)}set(e,t,i,r,a,s,o,c,f){const h=this.elements;return h[0]=e,h[1]=r,h[2]=o,h[3]=t,h[4]=a,h[5]=c,h[6]=i,h[7]=s,h[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,a=this.elements,s=i[0],o=i[3],c=i[6],f=i[1],h=i[4],p=i[7],v=i[2],y=i[5],_=i[8],E=r[0],S=r[3],w=r[6],I=r[1],P=r[4],D=r[7],z=r[2],k=r[5],U=r[8];return a[0]=s*E+o*I+c*z,a[3]=s*S+o*P+c*k,a[6]=s*w+o*D+c*U,a[1]=f*E+h*I+p*z,a[4]=f*S+h*P+p*k,a[7]=f*w+h*D+p*U,a[2]=v*E+y*I+_*z,a[5]=v*S+y*P+_*k,a[8]=v*w+y*D+_*U,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],c=e[6],f=e[7],h=e[8];return t*s*h-t*o*f-i*a*h+i*o*c+r*a*f-r*s*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],c=e[6],f=e[7],h=e[8],p=h*s-o*f,v=o*c-h*a,y=f*a-s*c,_=t*p+i*v+r*y;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const E=1/_;return e[0]=p*E,e[1]=(r*f-h*i)*E,e[2]=(o*i-r*s)*E,e[3]=v*E,e[4]=(h*t-r*c)*E,e[5]=(r*a-o*t)*E,e[6]=y*E,e[7]=(i*c-f*t)*E,e[8]=(s*t-i*a)*E,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,a,s,o){const c=Math.cos(a),f=Math.sin(a);return this.set(i*c,i*f,-i*(c*s+f*o)+s+e,-r*f,r*c,-r*(-f*s+c*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(pI.makeScale(e,t)),this}rotate(e){return this.premultiply(pI.makeRotation(-e)),this}translate(e,t){return this.premultiply(pI.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const pI=new Nn,LU=new Nn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),kU=new Nn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function pQ(){const n={enabled:!0,workingColorSpace:rp,spaces:{},convert:function(r,a,s){return this.enabled===!1||a===s||!a||!s||(this.spaces[a].transfer===Si&&(r.r=lh(r.r),r.g=lh(r.g),r.b=lh(r.b)),this.spaces[a].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[a].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===Si&&(r.r=gv(r.r),r.g=gv(r.g),r.b=gv(r.b))),r},workingToColorSpace:function(r,a){return this.convert(r,this.workingColorSpace,a)},colorSpaceToWorking:function(r,a){return this.convert(r,a,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===eh?B_:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,a=this.workingColorSpace){return r.fromArray(this.spaces[a].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,a,s){return r.copy(this.spaces[a].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,a){return Iv("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,a)},toWorkingColorSpace:function(r,a){return Iv("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,a)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[rp]:{primaries:e,whitePoint:i,transfer:B_,toXYZ:LU,fromXYZ:kU,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:ts},outputColorSpaceConfig:{drawingBufferColorSpace:ts}},[ts]:{primaries:e,whitePoint:i,transfer:Si,toXYZ:LU,fromXYZ:kU,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:ts}}}),n}const Qn=pQ();function lh(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function gv(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let M0;class qj{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{M0===void 0&&(M0=j_("canvas")),M0.width=e.width,M0.height=e.height;const r=M0.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=M0}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=j_("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),a=r.data;for(let s=0;s<a.length;s++)a[s]=lh(a[s]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(lh(t[i]/255)*255):t[i]=lh(t[i]);return{data:t,width:e.width,height:e.height}}else return Dt("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let mQ=0;class Wd{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:mQ++}),this.uuid=cl(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let a;if(Array.isArray(r)){a=[];for(let s=0,o=r.length;s<o;s++)r[s].isDataTexture?a.push(mI(r[s].image)):a.push(mI(r[s]))}else a=mI(r);i.url=a}return t||(e.images[this.uuid]=i),i}}function mI(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?qj.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(Dt("Texture: Unable to serialize Texture."),{})}let gQ=0;const gI=new ce;class Nr extends uf{constructor(e=Nr.DEFAULT_IMAGE,t=Nr.DEFAULT_MAPPING,i=Uo,r=Uo,a=ir,s=zu,o=Is,c=Qs,f=Nr.DEFAULT_ANISOTROPY,h=eh){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:gQ++}),this.uuid=cl(),this.name="",this.source=new Wd(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=a,this.minFilter=s,this.anisotropy=f,this.format=o,this.internalFormat=null,this.type=c,this.offset=new rt(0,0),this.repeat=new rt(1,1),this.center=new rt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Nn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(gI).x}get height(){return this.source.getSize(gI).y}get depth(){return this.source.getSize(gI).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){Dt(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){Dt(`Texture.setValues(): property '${t}' does not exist.`);continue}r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==kA)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case k_:e.x=e.x-Math.floor(e.x);break;case Uo:e.x=e.x<0?0:1;break;case U_:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case k_:e.y=e.y-Math.floor(e.y);break;case Uo:e.y=e.y<0?0:1;break;case U_:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Nr.DEFAULT_IMAGE=null;Nr.DEFAULT_MAPPING=kA;Nr.DEFAULT_ANISOTROPY=1;class Fi{constructor(e=0,t=0,i=0,r=1){Fi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,a=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*a,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*a,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*a,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,a;const c=e.elements,f=c[0],h=c[4],p=c[8],v=c[1],y=c[5],_=c[9],E=c[2],S=c[6],w=c[10];if(Math.abs(h-v)<.01&&Math.abs(p-E)<.01&&Math.abs(_-S)<.01){if(Math.abs(h+v)<.1&&Math.abs(p+E)<.1&&Math.abs(_+S)<.1&&Math.abs(f+y+w-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const P=(f+1)/2,D=(y+1)/2,z=(w+1)/2,k=(h+v)/4,U=(p+E)/4,R=(_+S)/4;return P>D&&P>z?P<.01?(i=0,r=.707106781,a=.707106781):(i=Math.sqrt(P),r=k/i,a=U/i):D>z?D<.01?(i=.707106781,r=0,a=.707106781):(r=Math.sqrt(D),i=k/r,a=R/r):z<.01?(i=.707106781,r=.707106781,a=0):(a=Math.sqrt(z),i=U/a,r=R/a),this.set(i,r,a,t),this}let I=Math.sqrt((S-_)*(S-_)+(p-E)*(p-E)+(v-h)*(v-h));return Math.abs(I)<.001&&(I=1),this.x=(S-_)/I,this.y=(p-E)/I,this.z=(v-h)/I,this.w=Math.acos((f+y+w-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=gn(this.x,e.x,t.x),this.y=gn(this.y,e.y,t.y),this.z=gn(this.z,e.z,t.z),this.w=gn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=gn(this.x,e,t),this.y=gn(this.y,e,t),this.z=gn(this.z,e,t),this.w=gn(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(gn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class v3 extends uf{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ir,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new Fi(0,0,e,t),this.scissorTest=!1,this.viewport=new Fi(0,0,e,t);const r={width:e,height:t,depth:i.depth},a=new Nr(r);this.textures=[];const s=i.count;for(let o=0;o<s;o++)this.textures[o]=a.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:ir,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,a=this.textures.length;r<a;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i,this.textures[r].isData3DTexture!==!0&&(this.textures[r].isArrayTexture=this.textures[r].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new Wd(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ul extends v3{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class qA extends Nr{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Wr,this.minFilter=Wr,this.wrapR=Uo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class vQ extends ul{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new qA(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class $A extends Nr{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Wr,this.minFilter=Wr,this.wrapR=Uo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class yQ extends ul{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new $A(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class rs{constructor(e=new ce(1/0,1/0,1/0),t=new ce(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Mc.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Mc.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Mc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const a=i.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,Mc):Mc.fromBufferAttribute(a,s),Mc.applyMatrix4(e.matrixWorld),this.expandByPoint(Mc);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),IS.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),IS.copy(i.boundingBox)),IS.applyMatrix4(e.matrixWorld),this.union(IS)}const r=e.children;for(let a=0,s=r.length;a<s;a++)this.expandByObject(r[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Mc),Mc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Db),RS.subVectors(this.max,Db),C0.subVectors(e.a,Db),I0.subVectors(e.b,Db),R0.subVectors(e.c,Db),xd.subVectors(I0,C0),Sd.subVectors(R0,I0),lm.subVectors(C0,R0);let t=[0,-xd.z,xd.y,0,-Sd.z,Sd.y,0,-lm.z,lm.y,xd.z,0,-xd.x,Sd.z,0,-Sd.x,lm.z,0,-lm.x,-xd.y,xd.x,0,-Sd.y,Sd.x,0,-lm.y,lm.x,0];return!vI(t,C0,I0,R0,RS)||(t=[1,0,0,0,1,0,0,0,1],!vI(t,C0,I0,R0,RS))?!1:(PS.crossVectors(xd,Sd),t=[PS.x,PS.y,PS.z],vI(t,C0,I0,R0,RS))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Mc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Mc).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(qf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),qf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),qf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),qf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),qf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),qf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),qf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),qf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(qf),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const qf=[new ce,new ce,new ce,new ce,new ce,new ce,new ce,new ce],Mc=new ce,IS=new rs,C0=new ce,I0=new ce,R0=new ce,xd=new ce,Sd=new ce,lm=new ce,Db=new ce,RS=new ce,PS=new ce,cm=new ce;function vI(n,e,t,i,r){for(let a=0,s=n.length-3;a<=s;a+=3){cm.fromArray(n,a);const o=r.x*Math.abs(cm.x)+r.y*Math.abs(cm.y)+r.z*Math.abs(cm.z),c=e.dot(cm),f=t.dot(cm),h=i.dot(cm);if(Math.max(-Math.max(c,f,h),Math.min(c,f,h))>o)return!1}return!0}const bQ=new rs,Lb=new ce,yI=new ce;class Pa{constructor(e=new ce,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):bQ.setFromPoints(e).getCenter(i);let r=0;for(let a=0,s=e.length;a<s;a++)r=Math.max(r,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Lb.subVectors(e,this.center);const t=Lb.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Lb,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(yI.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Lb.copy(e.center).add(yI)),this.expandByPoint(Lb.copy(e.center).sub(yI))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const $f=new ce,bI=new ce,NS=new ce,wd=new ce,_I=new ce,OS=new ce,xI=new ce;class wg{constructor(e=new ce,t=new ce(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,$f)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=$f.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):($f.copy(this.origin).addScaledVector(this.direction,t),$f.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){bI.copy(e).add(t).multiplyScalar(.5),NS.copy(t).sub(e).normalize(),wd.copy(this.origin).sub(bI);const a=e.distanceTo(t)*.5,s=-this.direction.dot(NS),o=wd.dot(this.direction),c=-wd.dot(NS),f=wd.lengthSq(),h=Math.abs(1-s*s);let p,v,y,_;if(h>0)if(p=s*c-o,v=s*o-c,_=a*h,p>=0)if(v>=-_)if(v<=_){const E=1/h;p*=E,v*=E,y=p*(p+s*v+2*o)+v*(s*p+v+2*c)+f}else v=a,p=Math.max(0,-(s*v+o)),y=-p*p+v*(v+2*c)+f;else v=-a,p=Math.max(0,-(s*v+o)),y=-p*p+v*(v+2*c)+f;else v<=-_?(p=Math.max(0,-(-s*a+o)),v=p>0?-a:Math.min(Math.max(-a,-c),a),y=-p*p+v*(v+2*c)+f):v<=_?(p=0,v=Math.min(Math.max(-a,-c),a),y=v*(v+2*c)+f):(p=Math.max(0,-(s*a+o)),v=p>0?a:Math.min(Math.max(-a,-c),a),y=-p*p+v*(v+2*c)+f);else v=s>0?-a:a,p=Math.max(0,-(s*v+o)),y=-p*p+v*(v+2*c)+f;return i&&i.copy(this.origin).addScaledVector(this.direction,p),r&&r.copy(bI).addScaledVector(NS,v),y}intersectSphere(e,t){$f.subVectors(e.center,this.origin);const i=$f.dot(this.direction),r=$f.dot($f)-i*i,a=e.radius*e.radius;if(r>a)return null;const s=Math.sqrt(a-r),o=i-s,c=i+s;return c<0?null:o<0?this.at(c,t):this.at(o,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,a,s,o,c;const f=1/this.direction.x,h=1/this.direction.y,p=1/this.direction.z,v=this.origin;return f>=0?(i=(e.min.x-v.x)*f,r=(e.max.x-v.x)*f):(i=(e.max.x-v.x)*f,r=(e.min.x-v.x)*f),h>=0?(a=(e.min.y-v.y)*h,s=(e.max.y-v.y)*h):(a=(e.max.y-v.y)*h,s=(e.min.y-v.y)*h),i>s||a>r||((a>i||isNaN(i))&&(i=a),(s<r||isNaN(r))&&(r=s),p>=0?(o=(e.min.z-v.z)*p,c=(e.max.z-v.z)*p):(o=(e.max.z-v.z)*p,c=(e.min.z-v.z)*p),i>c||o>r)||((o>i||i!==i)&&(i=o),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,$f)!==null}intersectTriangle(e,t,i,r,a){_I.subVectors(t,e),OS.subVectors(i,e),xI.crossVectors(_I,OS);let s=this.direction.dot(xI),o;if(s>0){if(r)return null;o=1}else if(s<0)o=-1,s=-s;else return null;wd.subVectors(this.origin,e);const c=o*this.direction.dot(OS.crossVectors(wd,OS));if(c<0)return null;const f=o*this.direction.dot(_I.cross(wd));if(f<0||c+f>s)return null;const h=-o*wd.dot(xI);return h<0?null:this.at(h/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class bn{constructor(e,t,i,r,a,s,o,c,f,h,p,v,y,_,E,S){bn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,s,o,c,f,h,p,v,y,_,E,S)}set(e,t,i,r,a,s,o,c,f,h,p,v,y,_,E,S){const w=this.elements;return w[0]=e,w[4]=t,w[8]=i,w[12]=r,w[1]=a,w[5]=s,w[9]=o,w[13]=c,w[2]=f,w[6]=h,w[10]=p,w[14]=v,w[3]=y,w[7]=_,w[11]=E,w[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new bn().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),i.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this)}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,i=e.elements,r=1/P0.setFromMatrixColumn(e,0).length(),a=1/P0.setFromMatrixColumn(e,1).length(),s=1/P0.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*a,t[5]=i[5]*a,t[6]=i[6]*a,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,a=e.z,s=Math.cos(i),o=Math.sin(i),c=Math.cos(r),f=Math.sin(r),h=Math.cos(a),p=Math.sin(a);if(e.order==="XYZ"){const v=s*h,y=s*p,_=o*h,E=o*p;t[0]=c*h,t[4]=-c*p,t[8]=f,t[1]=y+_*f,t[5]=v-E*f,t[9]=-o*c,t[2]=E-v*f,t[6]=_+y*f,t[10]=s*c}else if(e.order==="YXZ"){const v=c*h,y=c*p,_=f*h,E=f*p;t[0]=v+E*o,t[4]=_*o-y,t[8]=s*f,t[1]=s*p,t[5]=s*h,t[9]=-o,t[2]=y*o-_,t[6]=E+v*o,t[10]=s*c}else if(e.order==="ZXY"){const v=c*h,y=c*p,_=f*h,E=f*p;t[0]=v-E*o,t[4]=-s*p,t[8]=_+y*o,t[1]=y+_*o,t[5]=s*h,t[9]=E-v*o,t[2]=-s*f,t[6]=o,t[10]=s*c}else if(e.order==="ZYX"){const v=s*h,y=s*p,_=o*h,E=o*p;t[0]=c*h,t[4]=_*f-y,t[8]=v*f+E,t[1]=c*p,t[5]=E*f+v,t[9]=y*f-_,t[2]=-f,t[6]=o*c,t[10]=s*c}else if(e.order==="YZX"){const v=s*c,y=s*f,_=o*c,E=o*f;t[0]=c*h,t[4]=E-v*p,t[8]=_*p+y,t[1]=p,t[5]=s*h,t[9]=-o*h,t[2]=-f*h,t[6]=y*p+_,t[10]=v-E*p}else if(e.order==="XZY"){const v=s*c,y=s*f,_=o*c,E=o*f;t[0]=c*h,t[4]=-p,t[8]=f*h,t[1]=v*p+E,t[5]=s*h,t[9]=y*p-_,t[2]=_*p-y,t[6]=o*h,t[10]=E*p+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(_Q,e,xQ)}lookAt(e,t,i){const r=this.elements;return tl.subVectors(e,t),tl.lengthSq()===0&&(tl.z=1),tl.normalize(),Ed.crossVectors(i,tl),Ed.lengthSq()===0&&(Math.abs(i.z)===1?tl.x+=1e-4:tl.z+=1e-4,tl.normalize(),Ed.crossVectors(i,tl)),Ed.normalize(),DS.crossVectors(tl,Ed),r[0]=Ed.x,r[4]=DS.x,r[8]=tl.x,r[1]=Ed.y,r[5]=DS.y,r[9]=tl.y,r[2]=Ed.z,r[6]=DS.z,r[10]=tl.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,a=this.elements,s=i[0],o=i[4],c=i[8],f=i[12],h=i[1],p=i[5],v=i[9],y=i[13],_=i[2],E=i[6],S=i[10],w=i[14],I=i[3],P=i[7],D=i[11],z=i[15],k=r[0],U=r[4],R=r[8],M=r[12],L=r[1],B=r[5],V=r[9],j=r[13],Z=r[2],J=r[6],G=r[10],$=r[14],ae=r[3],le=r[7],ue=r[11],Q=r[15];return a[0]=s*k+o*L+c*Z+f*ae,a[4]=s*U+o*B+c*J+f*le,a[8]=s*R+o*V+c*G+f*ue,a[12]=s*M+o*j+c*$+f*Q,a[1]=h*k+p*L+v*Z+y*ae,a[5]=h*U+p*B+v*J+y*le,a[9]=h*R+p*V+v*G+y*ue,a[13]=h*M+p*j+v*$+y*Q,a[2]=_*k+E*L+S*Z+w*ae,a[6]=_*U+E*B+S*J+w*le,a[10]=_*R+E*V+S*G+w*ue,a[14]=_*M+E*j+S*$+w*Q,a[3]=I*k+P*L+D*Z+z*ae,a[7]=I*U+P*B+D*J+z*le,a[11]=I*R+P*V+D*G+z*ue,a[15]=I*M+P*j+D*$+z*Q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],a=e[12],s=e[1],o=e[5],c=e[9],f=e[13],h=e[2],p=e[6],v=e[10],y=e[14],_=e[3],E=e[7],S=e[11],w=e[15],I=c*y-f*v,P=o*y-f*p,D=o*v-c*p,z=s*y-f*h,k=s*v-c*h,U=s*p-o*h;return t*(E*I-S*P+w*D)-i*(_*I-S*z+w*k)+r*(_*P-E*z+w*U)-a*(_*D-E*k+S*U)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],c=e[6],f=e[7],h=e[8],p=e[9],v=e[10],y=e[11],_=e[12],E=e[13],S=e[14],w=e[15],I=p*S*f-E*v*f+E*c*y-o*S*y-p*c*w+o*v*w,P=_*v*f-h*S*f-_*c*y+s*S*y+h*c*w-s*v*w,D=h*E*f-_*p*f+_*o*y-s*E*y-h*o*w+s*p*w,z=_*p*c-h*E*c-_*o*v+s*E*v+h*o*S-s*p*S,k=t*I+i*P+r*D+a*z;if(k===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const U=1/k;return e[0]=I*U,e[1]=(E*v*a-p*S*a-E*r*y+i*S*y+p*r*w-i*v*w)*U,e[2]=(o*S*a-E*c*a+E*r*f-i*S*f-o*r*w+i*c*w)*U,e[3]=(p*c*a-o*v*a-p*r*f+i*v*f+o*r*y-i*c*y)*U,e[4]=P*U,e[5]=(h*S*a-_*v*a+_*r*y-t*S*y-h*r*w+t*v*w)*U,e[6]=(_*c*a-s*S*a-_*r*f+t*S*f+s*r*w-t*c*w)*U,e[7]=(s*v*a-h*c*a+h*r*f-t*v*f-s*r*y+t*c*y)*U,e[8]=D*U,e[9]=(_*p*a-h*E*a-_*i*y+t*E*y+h*i*w-t*p*w)*U,e[10]=(s*E*a-_*o*a+_*i*f-t*E*f-s*i*w+t*o*w)*U,e[11]=(h*o*a-s*p*a-h*i*f+t*p*f+s*i*y-t*o*y)*U,e[12]=z*U,e[13]=(h*E*r-_*p*r+_*i*v-t*E*v-h*i*S+t*p*S)*U,e[14]=(_*o*r-s*E*r-_*i*c+t*E*c+s*i*S-t*o*S)*U,e[15]=(s*p*r-h*o*r+h*i*c-t*p*c-s*i*v+t*o*v)*U,this}scale(e){const t=this.elements,i=e.x,r=e.y,a=e.z;return t[0]*=i,t[4]*=r,t[8]*=a,t[1]*=i,t[5]*=r,t[9]*=a,t[2]*=i,t[6]*=r,t[10]*=a,t[3]*=i,t[7]*=r,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),a=1-i,s=e.x,o=e.y,c=e.z,f=a*s,h=a*o;return this.set(f*s+i,f*o-r*c,f*c+r*o,0,f*o+r*c,h*o+i,h*c-r*s,0,f*c-r*o,h*c+r*s,a*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,a,s){return this.set(1,i,a,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,a=t._x,s=t._y,o=t._z,c=t._w,f=a+a,h=s+s,p=o+o,v=a*f,y=a*h,_=a*p,E=s*h,S=s*p,w=o*p,I=c*f,P=c*h,D=c*p,z=i.x,k=i.y,U=i.z;return r[0]=(1-(E+w))*z,r[1]=(y+D)*z,r[2]=(_-P)*z,r[3]=0,r[4]=(y-D)*k,r[5]=(1-(v+w))*k,r[6]=(S+I)*k,r[7]=0,r[8]=(_+P)*U,r[9]=(S-I)*U,r[10]=(1-(v+E))*U,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;if(e.x=r[12],e.y=r[13],e.z=r[14],this.determinant()===0)return i.set(1,1,1),t.identity(),this;let a=P0.set(r[0],r[1],r[2]).length();const s=P0.set(r[4],r[5],r[6]).length(),o=P0.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),Cc.copy(this);const f=1/a,h=1/s,p=1/o;return Cc.elements[0]*=f,Cc.elements[1]*=f,Cc.elements[2]*=f,Cc.elements[4]*=h,Cc.elements[5]*=h,Cc.elements[6]*=h,Cc.elements[8]*=p,Cc.elements[9]*=p,Cc.elements[10]*=p,t.setFromRotationMatrix(Cc),i.x=a,i.y=s,i.z=o,this}makePerspective(e,t,i,r,a,s,o=al,c=!1){const f=this.elements,h=2*a/(t-e),p=2*a/(i-r),v=(t+e)/(t-e),y=(i+r)/(i-r);let _,E;if(c)_=a/(s-a),E=s*a/(s-a);else if(o===al)_=-(s+a)/(s-a),E=-2*s*a/(s-a);else if(o===Cv)_=-s/(s-a),E=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return f[0]=h,f[4]=0,f[8]=v,f[12]=0,f[1]=0,f[5]=p,f[9]=y,f[13]=0,f[2]=0,f[6]=0,f[10]=_,f[14]=E,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(e,t,i,r,a,s,o=al,c=!1){const f=this.elements,h=2/(t-e),p=2/(i-r),v=-(t+e)/(t-e),y=-(i+r)/(i-r);let _,E;if(c)_=1/(s-a),E=s/(s-a);else if(o===al)_=-2/(s-a),E=-(s+a)/(s-a);else if(o===Cv)_=-1/(s-a),E=-a/(s-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return f[0]=h,f[4]=0,f[8]=0,f[12]=v,f[1]=0,f[5]=p,f[9]=0,f[13]=y,f[2]=0,f[6]=0,f[10]=_,f[14]=E,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const P0=new ce,Cc=new bn,_Q=new ce(0,0,0),xQ=new ce(1,1,1),Ed=new ce,DS=new ce,tl=new ce,UU=new bn,FU=new Rs;class hl{constructor(e=0,t=0,i=0,r=hl.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,a=r[0],s=r[4],o=r[8],c=r[1],f=r[5],h=r[9],p=r[2],v=r[6],y=r[10];switch(t){case"XYZ":this._y=Math.asin(gn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,y),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(v,f),this._z=0);break;case"YXZ":this._x=Math.asin(-gn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,y),this._z=Math.atan2(c,f)):(this._y=Math.atan2(-p,a),this._z=0);break;case"ZXY":this._x=Math.asin(gn(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-p,y),this._z=Math.atan2(-s,f)):(this._y=0,this._z=Math.atan2(c,a));break;case"ZYX":this._y=Math.asin(-gn(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(v,y),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-s,f));break;case"YZX":this._z=Math.asin(gn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,f),this._y=Math.atan2(-p,a)):(this._x=0,this._y=Math.atan2(o,y));break;case"XZY":this._z=Math.asin(-gn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(v,f),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-h,y),this._y=0);break;default:Dt("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return UU.makeRotationFromQuaternion(e),this.setFromRotationMatrix(UU,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return FU.setFromEuler(this),this.setFromQuaternion(FU,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}hl.DEFAULT_ORDER="XYZ";class Pv{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let SQ=0;const zU=new ce,N0=new Rs,Xf=new bn,LS=new ce,kb=new ce,wQ=new ce,EQ=new Rs,BU=new ce(1,0,0),VU=new ce(0,1,0),jU=new ce(0,0,1),HU={type:"added"},TQ={type:"removed"},O0={type:"childadded",child:null},SI={type:"childremoved",child:null};class li extends uf{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:SQ++}),this.uuid=cl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=li.DEFAULT_UP.clone();const e=new ce,t=new hl,i=new Rs,r=new ce(1,1,1);function a(){i.setFromEuler(t,!1)}function s(){t.setFromQuaternion(i,void 0,!1)}t._onChange(a),i._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new bn},normalMatrix:{value:new Nn}}),this.matrix=new bn,this.matrixWorld=new bn,this.matrixAutoUpdate=li.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=li.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Pv,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return N0.setFromAxisAngle(e,t),this.quaternion.multiply(N0),this}rotateOnWorldAxis(e,t){return N0.setFromAxisAngle(e,t),this.quaternion.premultiply(N0),this}rotateX(e){return this.rotateOnAxis(BU,e)}rotateY(e){return this.rotateOnAxis(VU,e)}rotateZ(e){return this.rotateOnAxis(jU,e)}translateOnAxis(e,t){return zU.copy(e).applyQuaternion(this.quaternion),this.position.add(zU.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(BU,e)}translateY(e){return this.translateOnAxis(VU,e)}translateZ(e){return this.translateOnAxis(jU,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Xf.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?LS.copy(e):LS.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),kb.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xf.lookAt(kb,LS,this.up):Xf.lookAt(LS,kb,this.up),this.quaternion.setFromRotationMatrix(Xf),r&&(Xf.extractRotation(r.matrixWorld),N0.setFromRotationMatrix(Xf),this.quaternion.premultiply(N0.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(tn("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(HU),O0.child=e,this.dispatchEvent(O0),O0.child=null):tn("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(TQ),SI.child=e,this.dispatchEvent(SI),SI.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Xf.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Xf.multiply(e.parent.matrixWorld)),e.applyMatrix4(Xf),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(HU),O0.child=e,this.dispatchEvent(O0),O0.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const s=this.children[i].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kb,e,wQ),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kb,EQ,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(o=>({...o})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function a(o,c){return o[c.uuid]===void 0&&(o[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const c=o.shapes;if(Array.isArray(c))for(let f=0,h=c.length;f<h;f++){const p=c[f];a(e.shapes,p)}else a(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let c=0,f=this.material.length;c<f;c++)o.push(a(e.materials,this.material[c]));r.material=o}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const c=this.animations[o];r.animations.push(a(e.animations,c))}}if(t){const o=s(e.geometries),c=s(e.materials),f=s(e.textures),h=s(e.images),p=s(e.shapes),v=s(e.skeletons),y=s(e.animations),_=s(e.nodes);o.length>0&&(i.geometries=o),c.length>0&&(i.materials=c),f.length>0&&(i.textures=f),h.length>0&&(i.images=h),p.length>0&&(i.shapes=p),v.length>0&&(i.skeletons=v),y.length>0&&(i.animations=y),_.length>0&&(i.nodes=_)}return i.object=r,i;function s(o){const c=[];for(const f in o){const h=o[f];delete h.metadata,c.push(h)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}li.DEFAULT_UP=new ce(0,1,0);li.DEFAULT_MATRIX_AUTO_UPDATE=!0;li.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ic=new ce,Yf=new ce,wI=new ce,Kf=new ce,D0=new ce,L0=new ce,GU=new ce,EI=new ce,TI=new ce,AI=new ce,MI=new Fi,CI=new Fi,II=new Fi;class Lo{constructor(e=new ce,t=new ce,i=new ce){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Ic.subVectors(e,t),r.cross(Ic);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,t,i,r,a){Ic.subVectors(r,t),Yf.subVectors(i,t),wI.subVectors(e,t);const s=Ic.dot(Ic),o=Ic.dot(Yf),c=Ic.dot(wI),f=Yf.dot(Yf),h=Yf.dot(wI),p=s*f-o*o;if(p===0)return a.set(0,0,0),null;const v=1/p,y=(f*c-o*h)*v,_=(s*h-o*c)*v;return a.set(1-y-_,_,y)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Kf)===null?!1:Kf.x>=0&&Kf.y>=0&&Kf.x+Kf.y<=1}static getInterpolation(e,t,i,r,a,s,o,c){return this.getBarycoord(e,t,i,r,Kf)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(a,Kf.x),c.addScaledVector(s,Kf.y),c.addScaledVector(o,Kf.z),c)}static getInterpolatedAttribute(e,t,i,r,a,s){return MI.setScalar(0),CI.setScalar(0),II.setScalar(0),MI.fromBufferAttribute(e,t),CI.fromBufferAttribute(e,i),II.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(MI,a.x),s.addScaledVector(CI,a.y),s.addScaledVector(II,a.z),s}static isFrontFacing(e,t,i,r){return Ic.subVectors(i,t),Yf.subVectors(e,t),Ic.cross(Yf).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ic.subVectors(this.c,this.b),Yf.subVectors(this.a,this.b),Ic.cross(Yf).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Lo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Lo.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,a){return Lo.getInterpolation(e,this.a,this.b,this.c,t,i,r,a)}containsPoint(e){return Lo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Lo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,a=this.c;let s,o;D0.subVectors(r,i),L0.subVectors(a,i),EI.subVectors(e,i);const c=D0.dot(EI),f=L0.dot(EI);if(c<=0&&f<=0)return t.copy(i);TI.subVectors(e,r);const h=D0.dot(TI),p=L0.dot(TI);if(h>=0&&p<=h)return t.copy(r);const v=c*p-h*f;if(v<=0&&c>=0&&h<=0)return s=c/(c-h),t.copy(i).addScaledVector(D0,s);AI.subVectors(e,a);const y=D0.dot(AI),_=L0.dot(AI);if(_>=0&&y<=_)return t.copy(a);const E=y*f-c*_;if(E<=0&&f>=0&&_<=0)return o=f/(f-_),t.copy(i).addScaledVector(L0,o);const S=h*_-y*p;if(S<=0&&p-h>=0&&y-_>=0)return GU.subVectors(a,r),o=(p-h)/(p-h+(y-_)),t.copy(r).addScaledVector(GU,o);const w=1/(S+E+v);return s=E*w,o=v*w,t.copy(i).addScaledVector(D0,s).addScaledVector(L0,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const $j={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Td={h:0,s:0,l:0},kS={h:0,s:0,l:0};function RI(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let Bt=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ts){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Qn.colorSpaceToWorking(this,t),this}setRGB(e,t,i,r=Qn.workingColorSpace){return this.r=e,this.g=t,this.b=i,Qn.colorSpaceToWorking(this,r),this}setHSL(e,t,i,r=Qn.workingColorSpace){if(e=g3(e,1),t=gn(t,0,1),i=gn(i,0,1),t===0)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+t):i+t-i*t,s=2*i-a;this.r=RI(s,a,e+1/3),this.g=RI(s,a,e),this.b=RI(s,a,e-1/3)}return Qn.colorSpaceToWorking(this,r),this}setStyle(e,t=ts){function i(a){a!==void 0&&parseFloat(a)<1&&Dt("Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=r[1],o=r[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:Dt("Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=r[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(a,16),t);Dt("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ts){const i=$j[e.toLowerCase()];return i!==void 0?this.setHex(i,t):Dt("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=lh(e.r),this.g=lh(e.g),this.b=lh(e.b),this}copyLinearToSRGB(e){return this.r=gv(e.r),this.g=gv(e.g),this.b=gv(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ts){return Qn.workingToColorSpace(Ss.copy(this),e),Math.round(gn(Ss.r*255,0,255))*65536+Math.round(gn(Ss.g*255,0,255))*256+Math.round(gn(Ss.b*255,0,255))}getHexString(e=ts){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Qn.workingColorSpace){Qn.workingToColorSpace(Ss.copy(this),t);const i=Ss.r,r=Ss.g,a=Ss.b,s=Math.max(i,r,a),o=Math.min(i,r,a);let c,f;const h=(o+s)/2;if(o===s)c=0,f=0;else{const p=s-o;switch(f=h<=.5?p/(s+o):p/(2-s-o),s){case i:c=(r-a)/p+(r<a?6:0);break;case r:c=(a-i)/p+2;break;case a:c=(i-r)/p+4;break}c/=6}return e.h=c,e.s=f,e.l=h,e}getRGB(e,t=Qn.workingColorSpace){return Qn.workingToColorSpace(Ss.copy(this),t),e.r=Ss.r,e.g=Ss.g,e.b=Ss.b,e}getStyle(e=ts){Qn.workingToColorSpace(Ss.copy(this),e);const t=Ss.r,i=Ss.g,r=Ss.b;return e!==ts?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Td),this.setHSL(Td.h+e,Td.s+t,Td.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Td),e.getHSL(kS);const i=__(Td.h,kS.h,t),r=__(Td.s,kS.s,t),a=__(Td.l,kS.l,t);return this.setHSL(i,r,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,a=e.elements;return this.r=a[0]*t+a[3]*i+a[6]*r,this.g=a[1]*t+a[4]*i+a[7]*r,this.b=a[2]*t+a[5]*i+a[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Ss=new Bt;Bt.NAMES=$j;let AQ=0;class Os extends uf{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:AQ++}),this.uuid=cl(),this.name="",this.type="Material",this.blending=Wm,this.side=hh,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=bE,this.blendDst=_E,this.blendEquation=kd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Bt(0,0,0),this.blendAlpha=0,this.depthFunc=ng,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=pN,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Tm,this.stencilZFail=Tm,this.stencilZPass=Tm,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){Dt(`Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){Dt(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Wm&&(i.blending=this.blending),this.side!==hh&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==bE&&(i.blendSrc=this.blendSrc),this.blendDst!==_E&&(i.blendDst=this.blendDst),this.blendEquation!==kd&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==ng&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==pN&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Tm&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Tm&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Tm&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.allowOverride===!1&&(i.allowOverride=!1),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(a){const s=[];for(const o in a){const c=a[o];delete c.metadata,s.push(c)}return s}if(t){const a=r(e.textures),s=r(e.images);a.length>0&&(i.textures=a),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let a=0;a!==r;++a)i[a]=t[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class vp extends Os{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new hl,this.combine=Mx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const th=MQ();function MQ(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const f=c-127;f<-27?(i[c]=0,i[c|256]=32768,r[c]=24,r[c|256]=24):f<-14?(i[c]=1024>>-f-14,i[c|256]=1024>>-f-14|32768,r[c]=-f-1,r[c|256]=-f-1):f<=15?(i[c]=f+15<<10,i[c|256]=f+15<<10|32768,r[c]=13,r[c|256]=13):f<128?(i[c]=31744,i[c|256]=64512,r[c]=24,r[c|256]=24):(i[c]=31744,i[c|256]=64512,r[c]=13,r[c|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let c=1;c<1024;++c){let f=c<<13,h=0;for(;(f&8388608)===0;)f<<=1,h-=8388608;f&=-8388609,h+=947912704,a[c]=f|h}for(let c=1024;c<2048;++c)a[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)s[c]=c<<23;s[31]=1199570944,s[32]=2147483648;for(let c=33;c<63;++c)s[c]=2147483648+(c-32<<23);s[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(o[c]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:a,exponentTable:s,offsetTable:o}}function No(n){Math.abs(n)>65504&&Dt("DataUtils.toHalfFloat(): Value out of range."),n=gn(n,-65504,65504),th.floatView[0]=n;const e=th.uint32View[0],t=e>>23&511;return th.baseTable[t]+((e&8388607)>>th.shiftTable[t])}function r_(n){const e=n>>10;return th.uint32View[0]=th.mantissaTable[th.offsetTable[e]+(n&1023)]+th.exponentTable[e],th.floatView[0]}class CQ{static toHalfFloat(e){return No(e)}static fromHalfFloat(e){return r_(e)}}const ta=new ce,US=new rt;let IQ=0;class yi{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:IQ++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=V_,this.updateRanges=[],this.gpuType=eo,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)US.fromBufferAttribute(this,t),US.applyMatrix3(e),this.setXY(t,US.x,US.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)ta.fromBufferAttribute(this,t),ta.applyMatrix3(e),this.setXYZ(t,ta.x,ta.y,ta.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)ta.fromBufferAttribute(this,t),ta.applyMatrix4(e),this.setXYZ(t,ta.x,ta.y,ta.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ta.fromBufferAttribute(this,t),ta.applyNormalMatrix(e),this.setXYZ(t,ta.x,ta.y,ta.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ta.fromBufferAttribute(this,t),ta.transformDirection(e),this.setXYZ(t,ta.x,ta.y,ta.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Js(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Un(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Js(t,this.array)),t}setX(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Js(t,this.array)),t}setY(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Js(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Js(t,this.array)),t}setW(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array),r=Un(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array),r=Un(r,this.array),a=Un(a,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==V_&&(e.usage=this.usage),e}}class RQ extends yi{constructor(e,t,i){super(new Int8Array(e),t,i)}}class PQ extends yi{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class NQ extends yi{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class OQ extends yi{constructor(e,t,i){super(new Int16Array(e),t,i)}}class y3 extends yi{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class DQ extends yi{constructor(e,t,i){super(new Int32Array(e),t,i)}}class b3 extends yi{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class LQ extends yi{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=r_(this.array[e*this.itemSize]);return this.normalized&&(t=Js(t,this.array)),t}setX(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize]=No(t),this}getY(e){let t=r_(this.array[e*this.itemSize+1]);return this.normalized&&(t=Js(t,this.array)),t}setY(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize+1]=No(t),this}getZ(e){let t=r_(this.array[e*this.itemSize+2]);return this.normalized&&(t=Js(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize+2]=No(t),this}getW(e){let t=r_(this.array[e*this.itemSize+3]);return this.normalized&&(t=Js(t,this.array)),t}setW(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize+3]=No(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array)),this.array[e+0]=No(t),this.array[e+1]=No(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array),r=Un(r,this.array)),this.array[e+0]=No(t),this.array[e+1]=No(i),this.array[e+2]=No(r),this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array),r=Un(r,this.array),a=Un(a,this.array)),this.array[e+0]=No(t),this.array[e+1]=No(i),this.array[e+2]=No(r),this.array[e+3]=No(a),this}}class Gt extends yi{constructor(e,t,i){super(new Float32Array(e),t,i)}}let kQ=0;const Wl=new bn,PI=new li,k0=new ce,nl=new rs,Ub=new rs,Aa=new ce;class Sn extends uf{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:kQ++}),this.uuid=cl(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(jj(e)?b3:y3)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const a=new Nn().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Wl.makeRotationFromQuaternion(e),this.applyMatrix4(Wl),this}rotateX(e){return Wl.makeRotationX(e),this.applyMatrix4(Wl),this}rotateY(e){return Wl.makeRotationY(e),this.applyMatrix4(Wl),this}rotateZ(e){return Wl.makeRotationZ(e),this.applyMatrix4(Wl),this}translate(e,t,i){return Wl.makeTranslation(e,t,i),this.applyMatrix4(Wl),this}scale(e,t,i){return Wl.makeScale(e,t,i),this.applyMatrix4(Wl),this}lookAt(e){return PI.lookAt(e),PI.updateMatrix(),this.applyMatrix4(PI.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(k0).negate(),this.translate(k0.x,k0.y,k0.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,a=e.length;r<a;r++){const s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Gt(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const a=e[r];t.setXYZ(r,a.x,a.y,a.z||0)}e.length>t.count&&Dt("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new rs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){tn("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ce(-1/0,-1/0,-1/0),new ce(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const a=t[i];nl.setFromBufferAttribute(a),this.morphTargetsRelative?(Aa.addVectors(this.boundingBox.min,nl.min),this.boundingBox.expandByPoint(Aa),Aa.addVectors(this.boundingBox.max,nl.max),this.boundingBox.expandByPoint(Aa)):(this.boundingBox.expandByPoint(nl.min),this.boundingBox.expandByPoint(nl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&tn('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Pa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){tn("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ce,1/0);return}if(e){const i=this.boundingSphere.center;if(nl.setFromBufferAttribute(e),t)for(let a=0,s=t.length;a<s;a++){const o=t[a];Ub.setFromBufferAttribute(o),this.morphTargetsRelative?(Aa.addVectors(nl.min,Ub.min),nl.expandByPoint(Aa),Aa.addVectors(nl.max,Ub.max),nl.expandByPoint(Aa)):(nl.expandByPoint(Ub.min),nl.expandByPoint(Ub.max))}nl.getCenter(i);let r=0;for(let a=0,s=e.count;a<s;a++)Aa.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(Aa));if(t)for(let a=0,s=t.length;a<s;a++){const o=t[a],c=this.morphTargetsRelative;for(let f=0,h=o.count;f<h;f++)Aa.fromBufferAttribute(o,f),c&&(k0.fromBufferAttribute(e,f),Aa.add(k0)),r=Math.max(r,i.distanceToSquared(Aa))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&tn('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){tn("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new yi(new Float32Array(4*i.count),4));const s=this.getAttribute("tangent"),o=[],c=[];for(let R=0;R<i.count;R++)o[R]=new ce,c[R]=new ce;const f=new ce,h=new ce,p=new ce,v=new rt,y=new rt,_=new rt,E=new ce,S=new ce;function w(R,M,L){f.fromBufferAttribute(i,R),h.fromBufferAttribute(i,M),p.fromBufferAttribute(i,L),v.fromBufferAttribute(a,R),y.fromBufferAttribute(a,M),_.fromBufferAttribute(a,L),h.sub(f),p.sub(f),y.sub(v),_.sub(v);const B=1/(y.x*_.y-_.x*y.y);isFinite(B)&&(E.copy(h).multiplyScalar(_.y).addScaledVector(p,-y.y).multiplyScalar(B),S.copy(p).multiplyScalar(y.x).addScaledVector(h,-_.x).multiplyScalar(B),o[R].add(E),o[M].add(E),o[L].add(E),c[R].add(S),c[M].add(S),c[L].add(S))}let I=this.groups;I.length===0&&(I=[{start:0,count:e.count}]);for(let R=0,M=I.length;R<M;++R){const L=I[R],B=L.start,V=L.count;for(let j=B,Z=B+V;j<Z;j+=3)w(e.getX(j+0),e.getX(j+1),e.getX(j+2))}const P=new ce,D=new ce,z=new ce,k=new ce;function U(R){z.fromBufferAttribute(r,R),k.copy(z);const M=o[R];P.copy(M),P.sub(z.multiplyScalar(z.dot(M))).normalize(),D.crossVectors(k,M);const B=D.dot(c[R])<0?-1:1;s.setXYZW(R,P.x,P.y,P.z,B)}for(let R=0,M=I.length;R<M;++R){const L=I[R],B=L.start,V=L.count;for(let j=B,Z=B+V;j<Z;j+=3)U(e.getX(j+0)),U(e.getX(j+1)),U(e.getX(j+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new yi(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let v=0,y=i.count;v<y;v++)i.setXYZ(v,0,0,0);const r=new ce,a=new ce,s=new ce,o=new ce,c=new ce,f=new ce,h=new ce,p=new ce;if(e)for(let v=0,y=e.count;v<y;v+=3){const _=e.getX(v+0),E=e.getX(v+1),S=e.getX(v+2);r.fromBufferAttribute(t,_),a.fromBufferAttribute(t,E),s.fromBufferAttribute(t,S),h.subVectors(s,a),p.subVectors(r,a),h.cross(p),o.fromBufferAttribute(i,_),c.fromBufferAttribute(i,E),f.fromBufferAttribute(i,S),o.add(h),c.add(h),f.add(h),i.setXYZ(_,o.x,o.y,o.z),i.setXYZ(E,c.x,c.y,c.z),i.setXYZ(S,f.x,f.y,f.z)}else for(let v=0,y=t.count;v<y;v+=3)r.fromBufferAttribute(t,v+0),a.fromBufferAttribute(t,v+1),s.fromBufferAttribute(t,v+2),h.subVectors(s,a),p.subVectors(r,a),h.cross(p),i.setXYZ(v+0,h.x,h.y,h.z),i.setXYZ(v+1,h.x,h.y,h.z),i.setXYZ(v+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Aa.fromBufferAttribute(e,t),Aa.normalize(),e.setXYZ(t,Aa.x,Aa.y,Aa.z)}toNonIndexed(){function e(o,c){const f=o.array,h=o.itemSize,p=o.normalized,v=new f.constructor(c.length*h);let y=0,_=0;for(let E=0,S=c.length;E<S;E++){o.isInterleavedBufferAttribute?y=c[E]*o.data.stride+o.offset:y=c[E]*h;for(let w=0;w<h;w++)v[_++]=f[y++]}return new yi(v,h,p)}if(this.index===null)return Dt("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Sn,i=this.index.array,r=this.attributes;for(const o in r){const c=r[o],f=e(c,i);t.setAttribute(o,f)}const a=this.morphAttributes;for(const o in a){const c=[],f=a[o];for(let h=0,p=f.length;h<p;h++){const v=f[h],y=e(v,i);c.push(y)}t.morphAttributes[o]=c}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,c=s.length;o<c;o++){const f=s[o];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const f in c)c[f]!==void 0&&(e[f]=c[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i){const f=i[c];e.data.attributes[c]=f.toJSON(e.data)}const r={};let a=!1;for(const c in this.morphAttributes){const f=this.morphAttributes[c],h=[];for(let p=0,v=f.length;p<v;p++){const y=f[p];h.push(y.toJSON(e.data))}h.length>0&&(r[c]=h,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const f in r){const h=r[f];this.setAttribute(f,h.clone(t))}const a=e.morphAttributes;for(const f in a){const h=[],p=a[f];for(let v=0,y=p.length;v<y;v++)h.push(p[v].clone(t));this.morphAttributes[f]=h}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let f=0,h=s.length;f<h;f++){const p=s[f];this.addGroup(p.start,p.count,p.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const WU=new bn,um=new wg,FS=new Pa,qU=new ce,zS=new ce,BS=new ce,VS=new ce,NI=new ce,jS=new ce,$U=new ce,HS=new ce;class sa extends li{constructor(e=new Sn,t=new vp){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,a=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(a&&o){jS.set(0,0,0);for(let c=0,f=a.length;c<f;c++){const h=o[c],p=a[c];h!==0&&(NI.fromBufferAttribute(p,e),s?jS.addScaledVector(NI,h):jS.addScaledVector(NI.sub(t),h))}t.add(jS)}return t}raycast(e,t){const i=this.geometry,r=this.material,a=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),FS.copy(i.boundingSphere),FS.applyMatrix4(a),um.copy(e.ray).recast(e.near),!(FS.containsPoint(um.origin)===!1&&(um.intersectSphere(FS,qU)===null||um.origin.distanceToSquared(qU)>(e.far-e.near)**2))&&(WU.copy(a).invert(),um.copy(e.ray).applyMatrix4(WU),!(i.boundingBox!==null&&um.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,um)))}_computeIntersections(e,t,i){let r;const a=this.geometry,s=this.material,o=a.index,c=a.attributes.position,f=a.attributes.uv,h=a.attributes.uv1,p=a.attributes.normal,v=a.groups,y=a.drawRange;if(o!==null)if(Array.isArray(s))for(let _=0,E=v.length;_<E;_++){const S=v[_],w=s[S.materialIndex],I=Math.max(S.start,y.start),P=Math.min(o.count,Math.min(S.start+S.count,y.start+y.count));for(let D=I,z=P;D<z;D+=3){const k=o.getX(D),U=o.getX(D+1),R=o.getX(D+2);r=GS(this,w,e,i,f,h,p,k,U,R),r&&(r.faceIndex=Math.floor(D/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const _=Math.max(0,y.start),E=Math.min(o.count,y.start+y.count);for(let S=_,w=E;S<w;S+=3){const I=o.getX(S),P=o.getX(S+1),D=o.getX(S+2);r=GS(this,s,e,i,f,h,p,I,P,D),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}else if(c!==void 0)if(Array.isArray(s))for(let _=0,E=v.length;_<E;_++){const S=v[_],w=s[S.materialIndex],I=Math.max(S.start,y.start),P=Math.min(c.count,Math.min(S.start+S.count,y.start+y.count));for(let D=I,z=P;D<z;D+=3){const k=D,U=D+1,R=D+2;r=GS(this,w,e,i,f,h,p,k,U,R),r&&(r.faceIndex=Math.floor(D/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const _=Math.max(0,y.start),E=Math.min(c.count,y.start+y.count);for(let S=_,w=E;S<w;S+=3){const I=S,P=S+1,D=S+2;r=GS(this,s,e,i,f,h,p,I,P,D),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}}}function UQ(n,e,t,i,r,a,s,o){let c;if(e.side===io?c=i.intersectTriangle(s,a,r,!0,o):c=i.intersectTriangle(r,a,s,e.side===hh,o),c===null)return null;HS.copy(o),HS.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(HS);return f<t.near||f>t.far?null:{distance:f,point:HS.clone(),object:n}}function GS(n,e,t,i,r,a,s,o,c,f){n.getVertexPosition(o,zS),n.getVertexPosition(c,BS),n.getVertexPosition(f,VS);const h=UQ(n,e,t,i,zS,BS,VS,$U);if(h){const p=new ce;Lo.getBarycoord($U,zS,BS,VS,p),r&&(h.uv=Lo.getInterpolatedAttribute(r,o,c,f,p,new rt)),a&&(h.uv1=Lo.getInterpolatedAttribute(a,o,c,f,p,new rt)),s&&(h.normal=Lo.getInterpolatedAttribute(s,o,c,f,p,new ce),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const v={a:o,b:c,c:f,normal:new ce,materialIndex:0};Lo.getNormal(zS,BS,VS,v.normal),h.face=v,h.barycoord=p}return h}class Eg extends Sn{constructor(e=1,t=1,i=1,r=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:a,depthSegments:s};const o=this;r=Math.floor(r),a=Math.floor(a),s=Math.floor(s);const c=[],f=[],h=[],p=[];let v=0,y=0;_("z","y","x",-1,-1,i,t,e,s,a,0),_("z","y","x",1,-1,i,t,-e,s,a,1),_("x","z","y",1,1,e,i,t,r,s,2),_("x","z","y",1,-1,e,i,-t,r,s,3),_("x","y","z",1,-1,e,t,i,r,a,4),_("x","y","z",-1,-1,e,t,-i,r,a,5),this.setIndex(c),this.setAttribute("position",new Gt(f,3)),this.setAttribute("normal",new Gt(h,3)),this.setAttribute("uv",new Gt(p,2));function _(E,S,w,I,P,D,z,k,U,R,M){const L=D/U,B=z/R,V=D/2,j=z/2,Z=k/2,J=U+1,G=R+1;let $=0,ae=0;const le=new ce;for(let ue=0;ue<G;ue++){const Q=ue*B-j;for(let re=0;re<J;re++){const ye=re*L-V;le[E]=ye*I,le[S]=Q*P,le[w]=Z,f.push(le.x,le.y,le.z),le[E]=0,le[S]=0,le[w]=k>0?1:-1,h.push(le.x,le.y,le.z),p.push(re/U),p.push(1-ue/R),$+=1}}for(let ue=0;ue<R;ue++)for(let Q=0;Q<U;Q++){const re=v+Q+J*ue,ye=v+Q+J*(ue+1),de=v+(Q+1)+J*(ue+1),xe=v+(Q+1)+J*ue;c.push(re,ye,xe),c.push(ye,de,xe),ae+=6}o.addGroup(y,ae,M),y+=ae,v+=$}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Eg(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Nv(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(Dt("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Ks(n){const e={};for(let t=0;t<n.length;t++){const i=Nv(n[t]);for(const r in i)e[r]=i[r]}return e}function FQ(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function Xj(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Qn.workingColorSpace}const Yj={clone:Nv,merge:Ks};var zQ=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,BQ=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Jl extends Os{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=zQ,this.fragmentShader=BQ,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Nv(e.uniforms),this.uniformsGroups=FQ(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class XA extends li{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new bn,this.projectionMatrix=new bn,this.projectionMatrixInverse=new bn,this.coordinateSystem=al,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ad=new ce,XU=new rt,YU=new rt;class Gr extends XA{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Rv*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(qm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Rv*2*Math.atan(Math.tan(qm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Ad.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ad.x,Ad.y).multiplyScalar(-e/Ad.z),Ad.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Ad.x,Ad.y).multiplyScalar(-e/Ad.z)}getViewSize(e,t){return this.getViewBounds(e,XU,YU),t.subVectors(YU,XU)}setViewOffset(e,t,i,r,a,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(qm*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,a=-.5*r;const s=this.view;if(this.view!==null&&this.view.enabled){const c=s.fullWidth,f=s.fullHeight;a+=s.offsetX*r/c,t-=s.offsetY*i/f,r*=s.width/c,i*=s.height/f}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const U0=-90,F0=1;class Kj extends li{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Gr(U0,F0,e,t);r.layers=this.layers,this.add(r);const a=new Gr(U0,F0,e,t);a.layers=this.layers,this.add(a);const s=new Gr(U0,F0,e,t);s.layers=this.layers,this.add(s);const o=new Gr(U0,F0,e,t);o.layers=this.layers,this.add(o);const c=new Gr(U0,F0,e,t);c.layers=this.layers,this.add(c);const f=new Gr(U0,F0,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,a,s,o,c]=t;for(const f of t)this.remove(f);if(e===al)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Cv)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,o,c,f,h]=this.children,p=e.getRenderTarget(),v=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),_=e.xr.enabled;e.xr.enabled=!1;const E=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,a),e.setRenderTarget(i,1,r),e.render(t,s),e.setRenderTarget(i,2,r),e.render(t,o),e.setRenderTarget(i,3,r),e.render(t,c),e.setRenderTarget(i,4,r),e.render(t,f),i.texture.generateMipmaps=E,e.setRenderTarget(i,5,r),e.render(t,h),e.setRenderTarget(p,v,y),e.xr.enabled=_,i.texture.needsPMREMUpdate=!0}}class Ix extends Nr{constructor(e=[],t=Zu,i,r,a,s,o,c,f,h){super(e,t,i,r,a,s,o,c,f,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class _3 extends ul{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Ix(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Eg(5,5,5),a=new Jl({name:"CubemapFromEquirect",uniforms:Nv(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:io,blending:Gu});a.uniforms.tEquirect.value=t;const s=new sa(r,a),o=t.minFilter;return t.minFilter===zu&&(t.minFilter=ir),new Kj(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(a)}}class uv extends li{constructor(){super(),this.isGroup=!0,this.type="Group"}}const VQ={type:"move"};class Zw{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new uv,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new uv,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ce,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ce),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new uv,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ce,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ce),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,a=null,s=null;const o=this._targetRay,c=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){s=!0;for(const E of e.hand.values()){const S=t.getJointPose(E,i),w=this._getHandJoint(f,E);S!==null&&(w.matrix.fromArray(S.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=S.radius),w.visible=S!==null}const h=f.joints["index-finger-tip"],p=f.joints["thumb-tip"],v=h.position.distanceTo(p.position),y=.02,_=.005;f.inputState.pinching&&v>y+_?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&v<=y-_&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,i),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&a!==null&&(r=a),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(VQ)))}return o!==null&&(o.visible=r!==null),c!==null&&(c.visible=a!==null),f!==null&&(f.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new uv;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class YA{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Bt(e),this.density=t}clone(){return new YA(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class KA{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Bt(e),this.near=t,this.far=i}clone(){return new KA(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class x3 extends li{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new hl,this.environmentIntensity=1,this.environmentRotation=new hl,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class ZA{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=V_,this.updateRanges=[],this.version=0,this.uuid=cl()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,a=this.stride;r<a;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Xs=new ce;class rg{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Xs.fromBufferAttribute(this,t),Xs.applyMatrix4(e),this.setXYZ(t,Xs.x,Xs.y,Xs.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Xs.fromBufferAttribute(this,t),Xs.applyNormalMatrix(e),this.setXYZ(t,Xs.x,Xs.y,Xs.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Xs.fromBufferAttribute(this,t),Xs.transformDirection(e),this.setXYZ(t,Xs.x,Xs.y,Xs.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Js(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Un(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Un(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Un(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Un(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Un(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Js(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Js(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Js(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Js(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array),r=Un(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array),r=Un(r,this.array),a=Un(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=a,this}clone(e){if(e===void 0){H_("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return new yi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new rg(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){H_("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class S3 extends Os{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Bt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let z0;const Fb=new ce,B0=new ce,V0=new ce,j0=new rt,zb=new rt,Zj=new bn,WS=new ce,Bb=new ce,qS=new ce,KU=new rt,OI=new rt,ZU=new rt;class Qj extends li{constructor(e=new S3){if(super(),this.isSprite=!0,this.type="Sprite",z0===void 0){z0=new Sn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new ZA(t,5);z0.setIndex([0,1,2,0,2,3]),z0.setAttribute("position",new rg(i,3,0,!1)),z0.setAttribute("uv",new rg(i,2,3,!1))}this.geometry=z0,this.material=e,this.center=new rt(.5,.5),this.count=1}raycast(e,t){e.camera===null&&tn('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),B0.setFromMatrixScale(this.matrixWorld),Zj.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),V0.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&B0.multiplyScalar(-V0.z);const i=this.material.rotation;let r,a;i!==0&&(a=Math.cos(i),r=Math.sin(i));const s=this.center;$S(WS.set(-.5,-.5,0),V0,s,B0,r,a),$S(Bb.set(.5,-.5,0),V0,s,B0,r,a),$S(qS.set(.5,.5,0),V0,s,B0,r,a),KU.set(0,0),OI.set(1,0),ZU.set(1,1);let o=e.ray.intersectTriangle(WS,Bb,qS,!1,Fb);if(o===null&&($S(Bb.set(-.5,.5,0),V0,s,B0,r,a),OI.set(0,1),o=e.ray.intersectTriangle(WS,qS,Bb,!1,Fb),o===null))return;const c=e.ray.origin.distanceTo(Fb);c<e.near||c>e.far||t.push({distance:c,point:Fb.clone(),uv:Lo.getInterpolation(Fb,WS,Bb,qS,KU,OI,ZU,new rt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function $S(n,e,t,i,r,a){j0.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(zb.x=a*j0.x-r*j0.y,zb.y=r*j0.x+a*j0.y):zb.copy(j0),n.copy(e),n.x+=zb.x,n.y+=zb.y,n.applyMatrix4(Zj)}const XS=new ce,QU=new ce;class Jj extends li{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const a=t[i];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let a;for(a=0;a<r.length&&!(t<r[a].distance);a++);return r.splice(a,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),e<a)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){XS.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(XS);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){XS.setFromMatrixPosition(e.matrixWorld),QU.setFromMatrixPosition(this.matrixWorld);const i=XS.distanceTo(QU)/e.zoom;t[0].object.visible=!0;let r,a;for(r=1,a=t.length;r<a;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),i>=s)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<a;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,a=i.length;r<a;r++){const s=i[r];t.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return t}}const JU=new ce,e4=new Fi,t4=new Fi,jQ=new ce,n4=new bn,YS=new ce,DI=new Pa,i4=new bn,LI=new wg;class e8 extends sa{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=dN,this.bindMatrix=new bn,this.bindMatrixInverse=new bn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new rs),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,YS),this.boundingBox.expandByPoint(YS)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Pa),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,YS),this.boundingSphere.expandByPoint(YS)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),DI.copy(this.boundingSphere),DI.applyMatrix4(r),e.ray.intersectsSphere(DI)!==!1&&(i4.copy(r).invert(),LI.copy(e.ray).applyMatrix4(i4),!(this.boundingBox!==null&&LI.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,LI)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Fi,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===dN?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Rj?this.bindMatrixInverse.copy(this.bindMatrix).invert():Dt("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;e4.fromBufferAttribute(r.attributes.skinIndex,e),t4.fromBufferAttribute(r.attributes.skinWeight,e),JU.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const s=t4.getComponent(a);if(s!==0){const o=e4.getComponent(a);n4.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),t.addScaledVector(jQ.copy(JU).applyMatrix4(n4),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}class w3 extends li{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Fc extends Nr{constructor(e=null,t=1,i=1,r,a,s,o,c,f=Wr,h=Wr,p,v){super(null,s,o,c,f,h,r,a,p,v),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const r4=new bn,HQ=new bn;class QA{constructor(e=[],t=[]){this.uuid=cl(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){Dt("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new bn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new bn;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const o=e[a]?e[a].matrixWorld:HQ;r4.multiplyMatrices(o,t[a]),r4.toArray(i,a*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new QA(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Fc(t,e,e,Is,eo);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const a=e.bones[i];let s=t[a];s===void 0&&(Dt("Skeleton: No bone found with UUID:",a),s=new w3),this.bones.push(s),this.boneInverses.push(new bn().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,a=t.length;r<a;r++){const s=t[r];e.bones.push(s.uuid);const o=i[r];e.boneInverses.push(o.toArray())}return e}}class Ov extends yi{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const H0=new bn,a4=new bn,KS=[],s4=new rs,GQ=new bn,Vb=new sa,jb=new Pa;class t8 extends sa{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Ov(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,GQ)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new rs),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,H0),s4.copy(e.boundingBox).applyMatrix4(H0),this.boundingBox.union(s4)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Pa),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,H0),jb.copy(e.boundingSphere).applyMatrix4(H0),this.boundingSphere.union(jb)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,a=i.length+1,s=e*a+1;for(let o=0;o<i.length;o++)i[o]=r[s+o]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Vb.geometry=this.geometry,Vb.material=this.material,Vb.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),jb.copy(this.boundingSphere),jb.applyMatrix4(i),e.ray.intersectsSphere(jb)!==!1))for(let a=0;a<r;a++){this.getMatrixAt(a,H0),a4.multiplyMatrices(i,H0),Vb.matrixWorld=a4,Vb.raycast(e,KS);for(let s=0,o=KS.length;s<o;s++){const c=KS[s];c.instanceId=a,c.object=this,t.push(c)}KS.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Ov(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Fc(new Float32Array(r*this.count),r,this.count,BA,eo));const a=this.morphTexture.source.data.data;let s=0;for(let f=0;f<i.length;f++)s+=i[f];const o=this.geometry.morphTargetsRelative?1:1-s,c=r*e;a[c]=o,a.set(i,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const kI=new ce,WQ=new ce,qQ=new Nn;class Qf{constructor(e=new ce(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=kI.subVectors(i,t).cross(WQ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(kI),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:t.copy(e.start).addScaledVector(i,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||qQ.getNormalMatrix(e),r=this.coplanarPoint(kI).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const fm=new Pa,$Q=new rt(.5,.5),ZS=new ce;class Jv{constructor(e=new Qf,t=new Qf,i=new Qf,r=new Qf,a=new Qf,s=new Qf){this.planes=[e,t,i,r,a,s]}set(e,t,i,r,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(a),o[5].copy(s),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=al,i=!1){const r=this.planes,a=e.elements,s=a[0],o=a[1],c=a[2],f=a[3],h=a[4],p=a[5],v=a[6],y=a[7],_=a[8],E=a[9],S=a[10],w=a[11],I=a[12],P=a[13],D=a[14],z=a[15];if(r[0].setComponents(f-s,y-h,w-_,z-I).normalize(),r[1].setComponents(f+s,y+h,w+_,z+I).normalize(),r[2].setComponents(f+o,y+p,w+E,z+P).normalize(),r[3].setComponents(f-o,y-p,w-E,z-P).normalize(),i)r[4].setComponents(c,v,S,D).normalize(),r[5].setComponents(f-c,y-v,w-S,z-D).normalize();else if(r[4].setComponents(f-c,y-v,w-S,z-D).normalize(),t===al)r[5].setComponents(f+c,y+v,w+S,z+D).normalize();else if(t===Cv)r[5].setComponents(c,v,S,D).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),fm.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),fm.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(fm)}intersectsSprite(e){fm.center.set(0,0,0);const t=$Q.distanceTo(e.center);return fm.radius=.7071067811865476+t,fm.applyMatrix4(e.matrixWorld),this.intersectsSphere(fm)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(ZS.x=r.normal.x>0?e.max.x:e.min.x,ZS.y=r.normal.y>0?e.max.y:e.min.y,ZS.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(ZS)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Mu=new bn,Cu=new Jv;class JA{constructor(){this.coordinateSystem=al}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Mu.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Cu.setFromProjectionMatrix(Mu,r.coordinateSystem,r.reversedDepth),Cu.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Mu.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Cu.setFromProjectionMatrix(Mu,r.coordinateSystem,r.reversedDepth),Cu.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Mu.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Cu.setFromProjectionMatrix(Mu,r.coordinateSystem,r.reversedDepth),Cu.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Mu.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Cu.setFromProjectionMatrix(Mu,r.coordinateSystem,r.reversedDepth),Cu.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Mu.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Cu.setFromProjectionMatrix(Mu,r.coordinateSystem,r.reversedDepth),Cu.containsPoint(e))return!0}return!1}clone(){return new JA}}function UI(n,e){return n-e}function XQ(n,e){return n.z-e.z}function YQ(n,e){return e.z-n.z}class KQ{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const a=this.pool,s=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const o=a[this.index];s.push(o),this.index++,o.start=e,o.count=t,o.z=i,o.index=r}reset(){this.list.length=0,this.index=0}}const Po=new bn,ZQ=new Bt(1,1,1),o4=new Jv,QQ=new JA,QS=new rs,hm=new Pa,Hb=new ce,l4=new ce,JQ=new ce,FI=new KQ,ws=new sa,JS=[];function eJ(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let a=0;a<r;a++)for(let s=0;s<i;s++)e.setComponent(a+t,s,n.getComponent(a,s))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function dm(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class n8 extends sa{constructor(e,t,i=t*2,r){super(new Sn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Fc(t,e,e,Is,eo);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Fc(t,e,e,Cx,Ql);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Fc(t,e,e,Is,eo);i.colorSpace=Qn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const s=e.getAttribute(a),{array:o,itemSize:c,normalized:f}=s,h=new o.constructor(i*c),p=new yi(h,c,f);t.setAttribute(a,p)}if(e.getIndex()!==null){const a=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new yi(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),a=t.getAttribute(i);if(r.itemSize!==a.itemSize||r.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new rs);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,Po),this.getBoundingBoxAt(a,QS).applyMatrix4(Po),e.union(QS)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Pa);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,Po),this.getBoundingSphereAt(a,hm).applyMatrix4(Po),e.union(hm)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(UI),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const a=this._matricesTexture;Po.identity().toArray(a.image.data,r*16),a.needsUpdate=!0;const s=this._colorsTexture;return s&&(ZQ.toArray(s.image.data,r*4),s.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const s=e.getIndex();if(s!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?s.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(UI),c=this._availableGeometryIds.shift(),a[c]=r):(c=this._geometryCount,this._geometryCount++,a.push(r)),this.setGeometryAt(c,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,c}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,a=i.getIndex(),s=t.getIndex(),o=this._geometryInfo[e];if(r&&s.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=o.vertexStart,f=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const h in i.attributes){const p=t.getAttribute(h),v=i.getAttribute(h);eJ(p,v,c);const y=p.itemSize;for(let _=p.count,E=f;_<E;_++){const S=c+_;for(let w=0;w<y;w++)v.setComponent(S,w,0)}v.needsUpdate=!0,v.addUpdateRange(c*y,f*y)}if(r){const h=o.indexStart,p=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let v=0;v<s.count;v++)a.setX(h+v,c+s.getX(v));for(let v=s.count,y=p;v<y;v++)a.setX(h+v,c);a.needsUpdate=!0,a.addUpdateRange(h,o.reservedIndexCount)}return o.start=r?o.indexStart:o.vertexStart,o.count=r?o.indexCount:o.vertexCount,o.boundingBox=null,t.boundingBox!==null&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,t.boundingSphere!==null&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,a=i.length;r<a;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((s,o)=>o).sort((s,o)=>i[s].vertexStart-i[o].vertexStart),a=this.geometry;for(let s=0,o=i.length;s<o;s++){const c=r[s],f=i[c];if(f.active!==!1){if(a.index!==null){if(f.indexStart!==t){const{indexStart:h,vertexStart:p,reservedIndexCount:v}=f,y=a.index,_=y.array,E=e-p;for(let S=h;S<h+v;S++)_[S]=_[S]+E;y.array.copyWithin(t,h,h+v),y.addUpdateRange(t,v),y.needsUpdate=!0,f.indexStart=t}t+=f.reservedIndexCount}if(f.vertexStart!==e){const{vertexStart:h,reservedVertexCount:p}=f,v=a.attributes;for(const y in v){const _=v[y],{array:E,itemSize:S}=_;E.copyWithin(e*S,h*S,(h+p)*S),_.addUpdateRange(e*S,p*S),_.needsUpdate=!0}f.vertexStart=e}e+=f.reservedVertexCount,f.start=a.index?f.indexStart:f.vertexStart,this._nextIndexStart=a.index?f.indexStart+f.reservedIndexCount:0,this._nextVertexStart=f.vertexStart+f.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const a=new rs,s=i.index,o=i.attributes.position;for(let c=r.start,f=r.start+r.count;c<f;c++){let h=c;s&&(h=s.getX(h)),a.expandByPoint(Hb.fromBufferAttribute(o,h))}r.boundingBox=a}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const a=new Pa;this.getBoundingBoxAt(e,QS),QS.getCenter(a.center);const s=i.index,o=i.attributes.position;let c=0;for(let f=r.start,h=r.start+r.count;f<h;f++){let p=f;s&&(p=s.getX(p)),Hb.fromBufferAttribute(o,p),c=Math.max(c,a.center.distanceToSquared(Hb))}a.radius=Math.sqrt(c),r.boundingSphere=a}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(UI);t[t.length-1]===i.length-1;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),a=new Int32Array(e);dm(this._multiDrawCounts,r),dm(this._multiDrawStarts,a),this._multiDrawCounts=r,this._multiDrawStarts=a,this._maxInstanceCount=e;const s=this._indirectTexture,o=this._matricesTexture,c=this._colorsTexture;s.dispose(),this._initIndirectTexture(),dm(s.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),dm(o.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),dm(c.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...i.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(c=>c.indexStart+c.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Sn,this._initializeGeometry(a));const s=this.geometry;a.index&&dm(a.index.array,s.index.array);for(const o in a.attributes)dm(a.attributes[o].array,s.attributes[o].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,a=this.matrixWorld,s=this.geometry;ws.material=this.material,ws.geometry.index=s.index,ws.geometry.attributes=s.attributes,ws.geometry.boundingBox===null&&(ws.geometry.boundingBox=new rs),ws.geometry.boundingSphere===null&&(ws.geometry.boundingSphere=new Pa);for(let o=0,c=i.length;o<c;o++){if(!i[o].visible||!i[o].active)continue;const f=i[o].geometryIndex,h=r[f];ws.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(o,ws.matrixWorld).premultiply(a),this.getBoundingBoxAt(f,ws.geometry.boundingBox),this.getBoundingSphereAt(f,ws.geometry.boundingSphere),ws.raycast(e,JS);for(let p=0,v=JS.length;p<v;p++){const y=JS[p];y.object=this,y.batchId=o,t.push(y)}JS.length=0}ws.material=null,ws.geometry.index=null,ws.geometry.attributes={},ws.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=r.getIndex(),o=s===null?1:s.array.BYTES_PER_ELEMENT,c=this._instanceInfo,f=this._multiDrawStarts,h=this._multiDrawCounts,p=this._geometryInfo,v=this.perObjectFrustumCulled,y=this._indirectTexture,_=y.image.data,E=i.isArrayCamera?QQ:o4;v&&!i.isArrayCamera&&(Po.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),o4.setFromProjectionMatrix(Po,i.coordinateSystem,i.reversedDepth));let S=0;if(this.sortObjects){Po.copy(this.matrixWorld).invert(),Hb.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Po),l4.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Po);for(let P=0,D=c.length;P<D;P++)if(c[P].visible&&c[P].active){const z=c[P].geometryIndex;this.getMatrixAt(P,Po),this.getBoundingSphereAt(z,hm).applyMatrix4(Po);let k=!1;if(v&&(k=!E.intersectsSphere(hm,i)),!k){const U=p[z],R=JQ.subVectors(hm.center,Hb).dot(l4);FI.push(U.start,U.count,R,P)}}const w=FI.list,I=this.customSort;I===null?w.sort(a.transparent?YQ:XQ):I.call(this,w,i);for(let P=0,D=w.length;P<D;P++){const z=w[P];f[S]=z.start*o,h[S]=z.count,_[S]=z.index,S++}FI.reset()}else for(let w=0,I=c.length;w<I;w++)if(c[w].visible&&c[w].active){const P=c[w].geometryIndex;let D=!1;if(v&&(this.getMatrixAt(w,Po),this.getBoundingSphereAt(P,hm).applyMatrix4(Po),D=!E.intersectsSphere(hm,i)),!D){const z=p[P];f[S]=z.start*o,h[S]=z.count,_[S]=w,S++}}y.needsUpdate=!0,this._multiDrawCount=S,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,a,s){this.onBeforeRender(e,null,r,a,s)}}class ao extends Os{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Bt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const oT=new ce,lT=new ce,c4=new bn,Gb=new wg,ew=new Pa,zI=new ce,u4=new ce;class sp extends li{constructor(e=new Sn,t=new ao){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,a=t.count;r<a;r++)oT.fromBufferAttribute(t,r-1),lT.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=oT.distanceTo(lT);e.setAttribute("lineDistance",new Gt(i,1))}else Dt("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),ew.copy(i.boundingSphere),ew.applyMatrix4(r),ew.radius+=a,e.ray.intersectsSphere(ew)===!1)return;c4.copy(r).invert(),Gb.copy(e.ray).applyMatrix4(c4);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,f=this.isLineSegments?2:1,h=i.index,v=i.attributes.position;if(h!==null){const y=Math.max(0,s.start),_=Math.min(h.count,s.start+s.count);for(let E=y,S=_-1;E<S;E+=f){const w=h.getX(E),I=h.getX(E+1),P=tw(this,e,Gb,c,w,I,E);P&&t.push(P)}if(this.isLineLoop){const E=h.getX(_-1),S=h.getX(y),w=tw(this,e,Gb,c,E,S,_-1);w&&t.push(w)}}else{const y=Math.max(0,s.start),_=Math.min(v.count,s.start+s.count);for(let E=y,S=_-1;E<S;E+=f){const w=tw(this,e,Gb,c,E,E+1,E);w&&t.push(w)}if(this.isLineLoop){const E=tw(this,e,Gb,c,_-1,y,_-1);E&&t.push(E)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function tw(n,e,t,i,r,a,s){const o=n.geometry.attributes.position;if(oT.fromBufferAttribute(o,r),lT.fromBufferAttribute(o,a),t.distanceSqToSegment(oT,lT,zI,u4)>i)return;zI.applyMatrix4(n.matrixWorld);const f=e.ray.origin.distanceTo(zI);if(!(f<e.near||f>e.far))return{distance:f,point:u4.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}const f4=new ce,h4=new ce;class ff extends sp{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,a=t.count;r<a;r+=2)f4.fromBufferAttribute(t,r),h4.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+f4.distanceTo(h4);e.setAttribute("lineDistance",new Gt(i,1))}else Dt("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class i8 extends sp{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class E3 extends Os{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Bt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const d4=new bn,gN=new wg,nw=new Pa,iw=new ce;class r8 extends li{constructor(e=new Sn,t=new E3){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),nw.copy(i.boundingSphere),nw.applyMatrix4(r),nw.radius+=a,e.ray.intersectsSphere(nw)===!1)return;d4.copy(r).invert(),gN.copy(e.ray).applyMatrix4(d4);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,f=i.index,p=i.attributes.position;if(f!==null){const v=Math.max(0,s.start),y=Math.min(f.count,s.start+s.count);for(let _=v,E=y;_<E;_++){const S=f.getX(_);iw.fromBufferAttribute(p,S),p4(iw,S,c,r,e,t,this)}}else{const v=Math.max(0,s.start),y=Math.min(p.count,s.start+s.count);for(let _=v,E=y;_<E;_++)iw.fromBufferAttribute(p,_),p4(iw,_,c,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function p4(n,e,t,i,r,a,s){const o=gN.distanceSqToPoint(n);if(o<t){const c=new ce;gN.closestPointToPoint(n,c),c.applyMatrix4(i);const f=r.ray.origin.distanceTo(c);if(f<r.near||f>r.far)return;a.push({distance:f,distanceToRay:Math.sqrt(o),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}class a8 extends Nr{constructor(e,t,i,r,a=ir,s=ir,o,c,f){super(e,t,i,r,a,s,o,c,f),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const h=this;function p(){h.needsUpdate=!0,h._requestVideoFrameCallbackId=e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(p))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class tJ extends a8{constructor(e,t,i,r,a,s,o,c){super({},e,t,i,r,a,s,o,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class nJ extends Nr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Wr,this.minFilter=Wr,this.generateMipmaps=!1,this.needsUpdate=!0}}class eM extends Nr{constructor(e,t,i,r,a,s,o,c,f,h,p,v){super(null,s,o,c,f,h,r,a,p,v),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class iJ extends eM{constructor(e,t,i,r,a,s){super(e,t,i,a,s),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Uo,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class rJ extends eM{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Zu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class aJ extends Nr{constructor(e,t,i,r,a,s,o,c,f){super(e,t,i,r,a,s,o,c,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Dv extends Nr{constructor(e,t,i=Ql,r,a,s,o=Wr,c=Wr,f,h=Ju,p=1){if(h!==Ju&&h!==Gd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const v={width:e,height:t,depth:p};super(v,r,a,s,o,c,h,i,f),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Wd(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class s8 extends Dv{constructor(e,t=Ql,i=Zu,r,a,s=Wr,o=Wr,c,f=Ju){const h={width:e,height:e,depth:1},p=[h,h,h,h,h,h];super(e,e,t,i,r,a,s,o,c,f),this.image=p,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class T3 extends Nr{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class tM extends Sn{constructor(e=1,t=1,i=4,r=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:a},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),a=Math.max(1,Math.floor(a));const s=[],o=[],c=[],f=[],h=t/2,p=Math.PI/2*e,v=t,y=2*p+v,_=i*2+a,E=r+1,S=new ce,w=new ce;for(let I=0;I<=_;I++){let P=0,D=0,z=0,k=0;if(I<=i){const M=I/i,L=M*Math.PI/2;D=-h-e*Math.cos(L),z=e*Math.sin(L),k=-e*Math.cos(L),P=M*p}else if(I<=i+a){const M=(I-i)/a;D=-h+M*t,z=e,k=0,P=p+M*v}else{const M=(I-i-a)/i,L=M*Math.PI/2;D=h+e*Math.sin(L),z=e*Math.cos(L),k=e*Math.sin(L),P=p+v+M*p}const U=Math.max(0,Math.min(1,P/y));let R=0;I===0?R=.5/r:I===_&&(R=-.5/r);for(let M=0;M<=r;M++){const L=M/r,B=L*Math.PI*2,V=Math.sin(B),j=Math.cos(B);w.x=-z*j,w.y=D,w.z=z*V,o.push(w.x,w.y,w.z),S.set(-z*j,k,z*V),S.normalize(),c.push(S.x,S.y,S.z),f.push(L+R,U)}if(I>0){const M=(I-1)*E;for(let L=0;L<r;L++){const B=M+L,V=M+L+1,j=I*E+L,Z=I*E+L+1;s.push(B,V,j),s.push(V,Z,j)}}}this.setIndex(s),this.setAttribute("position",new Gt(o,3)),this.setAttribute("normal",new Gt(c,3)),this.setAttribute("uv",new Gt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tM(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class nM extends Sn{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const a=[],s=[],o=[],c=[],f=new ce,h=new rt;s.push(0,0,0),o.push(0,0,1),c.push(.5,.5);for(let p=0,v=3;p<=t;p++,v+=3){const y=i+p/t*r;f.x=e*Math.cos(y),f.y=e*Math.sin(y),s.push(f.x,f.y,f.z),o.push(0,0,1),h.x=(s[v]/e+1)/2,h.y=(s[v+1]/e+1)/2,c.push(h.x,h.y)}for(let p=1;p<=t;p++)a.push(p,p+1,0);this.setIndex(a),this.setAttribute("position",new Gt(s,3)),this.setAttribute("normal",new Gt(o,3)),this.setAttribute("uv",new Gt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nM(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Rx extends Sn{constructor(e=1,t=1,i=1,r=32,a=1,s=!1,o=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:c};const f=this;r=Math.floor(r),a=Math.floor(a);const h=[],p=[],v=[],y=[];let _=0;const E=[],S=i/2;let w=0;I(),s===!1&&(e>0&&P(!0),t>0&&P(!1)),this.setIndex(h),this.setAttribute("position",new Gt(p,3)),this.setAttribute("normal",new Gt(v,3)),this.setAttribute("uv",new Gt(y,2));function I(){const D=new ce,z=new ce;let k=0;const U=(t-e)/i;for(let R=0;R<=a;R++){const M=[],L=R/a,B=L*(t-e)+e;for(let V=0;V<=r;V++){const j=V/r,Z=j*c+o,J=Math.sin(Z),G=Math.cos(Z);z.x=B*J,z.y=-L*i+S,z.z=B*G,p.push(z.x,z.y,z.z),D.set(J,U,G).normalize(),v.push(D.x,D.y,D.z),y.push(j,1-L),M.push(_++)}E.push(M)}for(let R=0;R<r;R++)for(let M=0;M<a;M++){const L=E[M][R],B=E[M+1][R],V=E[M+1][R+1],j=E[M][R+1];(e>0||M!==0)&&(h.push(L,B,j),k+=3),(t>0||M!==a-1)&&(h.push(B,V,j),k+=3)}f.addGroup(w,k,0),w+=k}function P(D){const z=_,k=new rt,U=new ce;let R=0;const M=D===!0?e:t,L=D===!0?1:-1;for(let V=1;V<=r;V++)p.push(0,S*L,0),v.push(0,L,0),y.push(.5,.5),_++;const B=_;for(let V=0;V<=r;V++){const Z=V/r*c+o,J=Math.cos(Z),G=Math.sin(Z);U.x=M*G,U.y=S*L,U.z=M*J,p.push(U.x,U.y,U.z),v.push(0,L,0),k.x=J*.5+.5,k.y=G*.5*L+.5,y.push(k.x,k.y),_++}for(let V=0;V<r;V++){const j=z+V,Z=B+V;D===!0?h.push(Z,Z+1,j):h.push(Z+1,Z,j),R+=3}f.addGroup(w,R,D===!0?1:2),w+=R}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rx(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Px extends Rx{constructor(e=1,t=1,i=32,r=1,a=!1,s=0,o=Math.PI*2){super(0,e,t,i,r,a,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o}}static fromJSON(e){return new Px(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class yp extends Sn{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const a=[],s=[];o(r),f(i),h(),this.setAttribute("position",new Gt(a,3)),this.setAttribute("normal",new Gt(a.slice(),3)),this.setAttribute("uv",new Gt(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(I){const P=new ce,D=new ce,z=new ce;for(let k=0;k<t.length;k+=3)y(t[k+0],P),y(t[k+1],D),y(t[k+2],z),c(P,D,z,I)}function c(I,P,D,z){const k=z+1,U=[];for(let R=0;R<=k;R++){U[R]=[];const M=I.clone().lerp(D,R/k),L=P.clone().lerp(D,R/k),B=k-R;for(let V=0;V<=B;V++)V===0&&R===k?U[R][V]=M:U[R][V]=M.clone().lerp(L,V/B)}for(let R=0;R<k;R++)for(let M=0;M<2*(k-R)-1;M++){const L=Math.floor(M/2);M%2===0?(v(U[R][L+1]),v(U[R+1][L]),v(U[R][L])):(v(U[R][L+1]),v(U[R+1][L+1]),v(U[R+1][L]))}}function f(I){const P=new ce;for(let D=0;D<a.length;D+=3)P.x=a[D+0],P.y=a[D+1],P.z=a[D+2],P.normalize().multiplyScalar(I),a[D+0]=P.x,a[D+1]=P.y,a[D+2]=P.z}function h(){const I=new ce;for(let P=0;P<a.length;P+=3){I.x=a[P+0],I.y=a[P+1],I.z=a[P+2];const D=S(I)/2/Math.PI+.5,z=w(I)/Math.PI+.5;s.push(D,1-z)}_(),p()}function p(){for(let I=0;I<s.length;I+=6){const P=s[I+0],D=s[I+2],z=s[I+4],k=Math.max(P,D,z),U=Math.min(P,D,z);k>.9&&U<.1&&(P<.2&&(s[I+0]+=1),D<.2&&(s[I+2]+=1),z<.2&&(s[I+4]+=1))}}function v(I){a.push(I.x,I.y,I.z)}function y(I,P){const D=I*3;P.x=e[D+0],P.y=e[D+1],P.z=e[D+2]}function _(){const I=new ce,P=new ce,D=new ce,z=new ce,k=new rt,U=new rt,R=new rt;for(let M=0,L=0;M<a.length;M+=9,L+=6){I.set(a[M+0],a[M+1],a[M+2]),P.set(a[M+3],a[M+4],a[M+5]),D.set(a[M+6],a[M+7],a[M+8]),k.set(s[L+0],s[L+1]),U.set(s[L+2],s[L+3]),R.set(s[L+4],s[L+5]),z.copy(I).add(P).add(D).divideScalar(3);const B=S(z);E(k,L+0,I,B),E(U,L+2,P,B),E(R,L+4,D,B)}}function E(I,P,D,z){z<0&&I.x===1&&(s[P]=I.x-1),D.x===0&&D.z===0&&(s[P]=z/2/Math.PI+.5)}function S(I){return Math.atan2(I.z,-I.x)}function w(I){return Math.atan2(-I.y,Math.sqrt(I.x*I.x+I.z*I.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yp(e.vertices,e.indices,e.radius,e.detail)}}class iM extends yp{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new iM(e.radius,e.detail)}}const rw=new ce,aw=new ce,BI=new ce,sw=new Lo;class o8 extends Sn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),a=Math.cos(qm*t),s=e.getIndex(),o=e.getAttribute("position"),c=s?s.count:o.count,f=[0,0,0],h=["a","b","c"],p=new Array(3),v={},y=[];for(let _=0;_<c;_+=3){s?(f[0]=s.getX(_),f[1]=s.getX(_+1),f[2]=s.getX(_+2)):(f[0]=_,f[1]=_+1,f[2]=_+2);const{a:E,b:S,c:w}=sw;if(E.fromBufferAttribute(o,f[0]),S.fromBufferAttribute(o,f[1]),w.fromBufferAttribute(o,f[2]),sw.getNormal(BI),p[0]=`${Math.round(E.x*r)},${Math.round(E.y*r)},${Math.round(E.z*r)}`,p[1]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,p[2]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let I=0;I<3;I++){const P=(I+1)%3,D=p[I],z=p[P],k=sw[h[I]],U=sw[h[P]],R=`${D}_${z}`,M=`${z}_${D}`;M in v&&v[M]?(BI.dot(v[M].normal)<=a&&(y.push(k.x,k.y,k.z),y.push(U.x,U.y,U.z)),v[M]=null):R in v||(v[R]={index0:f[I],index1:f[P],normal:BI.clone()})}}for(const _ in v)if(v[_]){const{index0:E,index1:S}=v[_];rw.fromBufferAttribute(o,E),aw.fromBufferAttribute(o,S),y.push(rw.x,rw.y,rw.z),y.push(aw.x,aw.y,aw.z)}this.setAttribute("position",new Gt(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let qc=class{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){Dt("Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),a=0;t.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),a+=i.distanceTo(r),t.push(a),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const a=i.length;let s;t?s=t:s=e*i[a-1];let o=0,c=a-1,f;for(;o<=c;)if(r=Math.floor(o+(c-o)/2),f=i[r]-s,f<0)o=r+1;else if(f>0)c=r-1;else{c=r;break}if(r=c,i[r]===s)return r/(a-1);const h=i[r],v=i[r+1]-h,y=(s-h)/v;return(r+y)/(a-1)}getTangent(e,t){let r=e-1e-4,a=e+1e-4;r<0&&(r=0),a>1&&(a=1);const s=this.getPoint(r),o=this.getPoint(a),c=t||(s.isVector2?new rt:new ce);return c.copy(o).sub(s).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new ce,r=[],a=[],s=[],o=new ce,c=new bn;for(let y=0;y<=e;y++){const _=y/e;r[y]=this.getTangentAt(_,new ce)}a[0]=new ce,s[0]=new ce;let f=Number.MAX_VALUE;const h=Math.abs(r[0].x),p=Math.abs(r[0].y),v=Math.abs(r[0].z);h<=f&&(f=h,i.set(1,0,0)),p<=f&&(f=p,i.set(0,1,0)),v<=f&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),a[0].crossVectors(r[0],o),s[0].crossVectors(r[0],a[0]);for(let y=1;y<=e;y++){if(a[y]=a[y-1].clone(),s[y]=s[y-1].clone(),o.crossVectors(r[y-1],r[y]),o.length()>Number.EPSILON){o.normalize();const _=Math.acos(gn(r[y-1].dot(r[y]),-1,1));a[y].applyMatrix4(c.makeRotationAxis(o,_))}s[y].crossVectors(r[y],a[y])}if(t===!0){let y=Math.acos(gn(a[0].dot(a[e]),-1,1));y/=e,r[0].dot(o.crossVectors(a[0],a[e]))>0&&(y=-y);for(let _=1;_<=e;_++)a[_].applyMatrix4(c.makeRotationAxis(r[_],y*_)),s[_].crossVectors(r[_],a[_])}return{tangents:r,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}};class rM extends qc{constructor(e=0,t=0,i=1,r=1,a=0,s=Math.PI*2,o=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=o,this.aRotation=c}getPoint(e,t=new rt){const i=t,r=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(s?a=0:a=r),this.aClockwise===!0&&!s&&(a===r?a=-r:a=a-r);const o=this.aStartAngle+e*a;let c=this.aX+this.xRadius*Math.cos(o),f=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const h=Math.cos(this.aRotation),p=Math.sin(this.aRotation),v=c-this.aX,y=f-this.aY;c=v*h-y*p+this.aX,f=v*p+y*h+this.aY}return i.set(c,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class l8 extends rM{constructor(e,t,i,r,a,s){super(e,t,i,i,r,a,s),this.isArcCurve=!0,this.type="ArcCurve"}}function A3(){let n=0,e=0,t=0,i=0;function r(a,s,o,c){n=a,e=o,t=-3*a+3*s-2*o-c,i=2*a-2*s+o+c}return{initCatmullRom:function(a,s,o,c,f){r(s,o,f*(o-a),f*(c-s))},initNonuniformCatmullRom:function(a,s,o,c,f,h,p){let v=(s-a)/f-(o-a)/(f+h)+(o-s)/h,y=(o-s)/h-(c-s)/(h+p)+(c-o)/p;v*=h,y*=h,r(s,o,v,y)},calc:function(a){const s=a*a,o=s*a;return n+e*a+t*s+i*o}}}const ow=new ce,VI=new A3,jI=new A3,HI=new A3;class c8 extends qc{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new ce){const i=t,r=this.points,a=r.length,s=(a-(this.closed?0:1))*e;let o=Math.floor(s),c=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:c===0&&o===a-1&&(o=a-2,c=1);let f,h;this.closed||o>0?f=r[(o-1)%a]:(ow.subVectors(r[0],r[1]).add(r[0]),f=ow);const p=r[o%a],v=r[(o+1)%a];if(this.closed||o+2<a?h=r[(o+2)%a]:(ow.subVectors(r[a-1],r[a-2]).add(r[a-1]),h=ow),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let _=Math.pow(f.distanceToSquared(p),y),E=Math.pow(p.distanceToSquared(v),y),S=Math.pow(v.distanceToSquared(h),y);E<1e-4&&(E=1),_<1e-4&&(_=E),S<1e-4&&(S=E),VI.initNonuniformCatmullRom(f.x,p.x,v.x,h.x,_,E,S),jI.initNonuniformCatmullRom(f.y,p.y,v.y,h.y,_,E,S),HI.initNonuniformCatmullRom(f.z,p.z,v.z,h.z,_,E,S)}else this.curveType==="catmullrom"&&(VI.initCatmullRom(f.x,p.x,v.x,h.x,this.tension),jI.initCatmullRom(f.y,p.y,v.y,h.y,this.tension),HI.initCatmullRom(f.z,p.z,v.z,h.z,this.tension));return i.set(VI.calc(c),jI.calc(c),HI.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ce().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function m4(n,e,t,i,r){const a=(i-e)*.5,s=(r-t)*.5,o=n*n,c=n*o;return(2*t-2*i+a+s)*c+(-3*t+3*i-2*a-s)*o+a*n+t}function sJ(n,e){const t=1-n;return t*t*e}function oJ(n,e){return 2*(1-n)*n*e}function lJ(n,e){return n*n*e}function x_(n,e,t,i){return sJ(n,e)+oJ(n,t)+lJ(n,i)}function cJ(n,e){const t=1-n;return t*t*t*e}function uJ(n,e){const t=1-n;return 3*t*t*n*e}function fJ(n,e){return 3*(1-n)*n*n*e}function hJ(n,e){return n*n*n*e}function S_(n,e,t,i,r){return cJ(n,e)+uJ(n,t)+fJ(n,i)+hJ(n,r)}class M3 extends qc{constructor(e=new rt,t=new rt,i=new rt,r=new rt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new rt){const i=t,r=this.v0,a=this.v1,s=this.v2,o=this.v3;return i.set(S_(e,r.x,a.x,s.x,o.x),S_(e,r.y,a.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class u8 extends qc{constructor(e=new ce,t=new ce,i=new ce,r=new ce){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ce){const i=t,r=this.v0,a=this.v1,s=this.v2,o=this.v3;return i.set(S_(e,r.x,a.x,s.x,o.x),S_(e,r.y,a.y,s.y,o.y),S_(e,r.z,a.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class C3 extends qc{constructor(e=new rt,t=new rt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new rt){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new rt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class f8 extends qc{constructor(e=new ce,t=new ce){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ce){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ce){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class I3 extends qc{constructor(e=new rt,t=new rt,i=new rt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new rt){const i=t,r=this.v0,a=this.v1,s=this.v2;return i.set(x_(e,r.x,a.x,s.x),x_(e,r.y,a.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class R3 extends qc{constructor(e=new ce,t=new ce,i=new ce){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ce){const i=t,r=this.v0,a=this.v1,s=this.v2;return i.set(x_(e,r.x,a.x,s.x),x_(e,r.y,a.y,s.y),x_(e,r.z,a.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class P3 extends qc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new rt){const i=t,r=this.points,a=(r.length-1)*e,s=Math.floor(a),o=a-s,c=r[s===0?s:s-1],f=r[s],h=r[s>r.length-2?r.length-1:s+1],p=r[s>r.length-3?r.length-1:s+2];return i.set(m4(o,c.x,f.x,h.x,p.x),m4(o,c.y,f.y,h.y,p.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new rt().fromArray(r))}return this}}var cT=Object.freeze({__proto__:null,ArcCurve:l8,CatmullRomCurve3:c8,CubicBezierCurve:M3,CubicBezierCurve3:u8,EllipseCurve:rM,LineCurve:C3,LineCurve3:f8,QuadraticBezierCurve:I3,QuadraticBezierCurve3:R3,SplineCurve:P3});class h8 extends qc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new cT[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let a=0;for(;a<r.length;){if(r[a]>=i){const s=r[a]-i,o=this.curves[a],c=o.getLength(),f=c===0?0:1-s/c;return o.getPointAt(f,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,a=this.curves;r<a.length;r++){const s=a[r],o=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,c=s.getPoints(o);for(let f=0;f<c.length;f++){const h=c[f];i&&i.equals(h)||(t.push(h),i=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new cT[r.type]().fromJSON(r))}return this}}let uT=class extends h8{constructor(e){super(),this.type="Path",this.currentPoint=new rt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new C3(this.currentPoint.clone(),new rt(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const a=new I3(this.currentPoint.clone(),new rt(e,t),new rt(i,r));return this.curves.push(a),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,a,s){const o=new M3(this.currentPoint.clone(),new rt(e,t),new rt(i,r),new rt(a,s));return this.curves.push(o),this.currentPoint.set(a,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new P3(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,a,s){const o=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+o,t+c,i,r,a,s),this}absarc(e,t,i,r,a,s){return this.absellipse(e,t,i,i,r,a,s),this}ellipse(e,t,i,r,a,s,o,c){const f=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+f,t+h,i,r,a,s,o,c),this}absellipse(e,t,i,r,a,s,o,c){const f=new rM(e,t,i,r,a,s,o,c);if(this.curves.length>0){const p=f.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(f);const h=f.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class $m extends uT{constructor(e){super(e),this.uuid=cl(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new uT().fromJSON(r))}return this}}function dJ(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let a=d8(n,0,r,t,!0);const s=[];if(!a||a.next===a.prev)return s;let o,c,f;if(i&&(a=yJ(n,e,a,t)),n.length>80*t){o=n[0],c=n[1];let h=o,p=c;for(let v=t;v<r;v+=t){const y=n[v],_=n[v+1];y<o&&(o=y),_<c&&(c=_),y>h&&(h=y),_>p&&(p=_)}f=Math.max(h-o,p-c),f=f!==0?32767/f:0}return G_(a,s,t,o,c,f,0),s}function d8(n,e,t,i,r){let a;if(r===IJ(n,e,t,i)>0)for(let s=e;s<t;s+=i)a=g4(s/i|0,n[s],n[s+1],a);else for(let s=t-i;s>=e;s-=i)a=g4(s/i|0,n[s],n[s+1],a);return a&&Lv(a,a.next)&&(q_(a),a=a.next),a}function ag(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Lv(t,t.next)||Sr(t.prev,t,t.next)===0)){if(q_(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function G_(n,e,t,i,r,a,s){if(!n)return;!s&&a&&wJ(n,i,r,a);let o=n;for(;n.prev!==n.next;){const c=n.prev,f=n.next;if(a?mJ(n,i,r,a):pJ(n)){e.push(c.i,n.i,f.i),q_(n),n=f.next,o=f.next;continue}if(n=f,n===o){s?s===1?(n=gJ(ag(n),e),G_(n,e,t,i,r,a,2)):s===2&&vJ(n,e,t,i,r,a):G_(ag(n),e,t,i,r,a,1);break}}}function pJ(n){const e=n.prev,t=n,i=n.next;if(Sr(e,t,i)>=0)return!1;const r=e.x,a=t.x,s=i.x,o=e.y,c=t.y,f=i.y,h=Math.min(r,a,s),p=Math.min(o,c,f),v=Math.max(r,a,s),y=Math.max(o,c,f);let _=i.next;for(;_!==e;){if(_.x>=h&&_.x<=v&&_.y>=p&&_.y<=y&&a_(r,o,a,c,s,f,_.x,_.y)&&Sr(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function mJ(n,e,t,i){const r=n.prev,a=n,s=n.next;if(Sr(r,a,s)>=0)return!1;const o=r.x,c=a.x,f=s.x,h=r.y,p=a.y,v=s.y,y=Math.min(o,c,f),_=Math.min(h,p,v),E=Math.max(o,c,f),S=Math.max(h,p,v),w=vN(y,_,e,t,i),I=vN(E,S,e,t,i);let P=n.prevZ,D=n.nextZ;for(;P&&P.z>=w&&D&&D.z<=I;){if(P.x>=y&&P.x<=E&&P.y>=_&&P.y<=S&&P!==r&&P!==s&&a_(o,h,c,p,f,v,P.x,P.y)&&Sr(P.prev,P,P.next)>=0||(P=P.prevZ,D.x>=y&&D.x<=E&&D.y>=_&&D.y<=S&&D!==r&&D!==s&&a_(o,h,c,p,f,v,D.x,D.y)&&Sr(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;P&&P.z>=w;){if(P.x>=y&&P.x<=E&&P.y>=_&&P.y<=S&&P!==r&&P!==s&&a_(o,h,c,p,f,v,P.x,P.y)&&Sr(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;D&&D.z<=I;){if(D.x>=y&&D.x<=E&&D.y>=_&&D.y<=S&&D!==r&&D!==s&&a_(o,h,c,p,f,v,D.x,D.y)&&Sr(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function gJ(n,e){let t=n;do{const i=t.prev,r=t.next.next;!Lv(i,r)&&m8(i,t,t.next,r)&&W_(i,r)&&W_(r,i)&&(e.push(i.i,t.i,r.i),q_(t),q_(t.next),t=n=r),t=t.next}while(t!==n);return ag(t)}function vJ(n,e,t,i,r,a){let s=n;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&AJ(s,o)){let c=g8(s,o);s=ag(s,s.next),c=ag(c,c.next),G_(s,e,t,i,r,a,0),G_(c,e,t,i,r,a,0);return}o=o.next}s=s.next}while(s!==n)}function yJ(n,e,t,i){const r=[];for(let a=0,s=e.length;a<s;a++){const o=e[a]*i,c=a<s-1?e[a+1]*i:n.length,f=d8(n,o,c,i,!1);f===f.next&&(f.steiner=!0),r.push(TJ(f))}r.sort(bJ);for(let a=0;a<r.length;a++)t=_J(r[a],t);return t}function bJ(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function _J(n,e){const t=xJ(n,e);if(!t)return e;const i=g8(t,n);return ag(i,i.next),ag(t,t.next)}function xJ(n,e){let t=e;const i=n.x,r=n.y;let a=-1/0,s;if(Lv(n,t))return t;do{if(Lv(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const p=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=i&&p>a&&(a=p,s=t.x<t.next.x?t:t.next,p===i))return s}t=t.next}while(t!==e);if(!s)return null;const o=s,c=s.x,f=s.y;let h=1/0;t=s;do{if(i>=t.x&&t.x>=c&&i!==t.x&&p8(r<f?i:a,r,c,f,r<f?a:i,r,t.x,t.y)){const p=Math.abs(r-t.y)/(i-t.x);W_(t,n)&&(p<h||p===h&&(t.x>s.x||t.x===s.x&&SJ(s,t)))&&(s=t,h=p)}t=t.next}while(t!==o);return s}function SJ(n,e){return Sr(n.prev,n,e.prev)<0&&Sr(e.next,n,n.next)<0}function wJ(n,e,t,i){let r=n;do r.z===0&&(r.z=vN(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,EJ(r)}function EJ(n){let e,t=1;do{let i=n,r;n=null;let a=null;for(e=0;i;){e++;let s=i,o=0;for(let f=0;f<t&&(o++,s=s.nextZ,!!s);f++);let c=t;for(;o>0||c>0&&s;)o!==0&&(c===0||!s||i.z<=s.z)?(r=i,i=i.nextZ,o--):(r=s,s=s.nextZ,c--),a?a.nextZ=r:n=r,r.prevZ=a,a=r;i=s}a.nextZ=null,t*=2}while(e>1);return n}function vN(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function TJ(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function p8(n,e,t,i,r,a,s,o){return(r-s)*(e-o)>=(n-s)*(a-o)&&(n-s)*(i-o)>=(t-s)*(e-o)&&(t-s)*(a-o)>=(r-s)*(i-o)}function a_(n,e,t,i,r,a,s,o){return!(n===s&&e===o)&&p8(n,e,t,i,r,a,s,o)}function AJ(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!MJ(n,e)&&(W_(n,e)&&W_(e,n)&&CJ(n,e)&&(Sr(n.prev,n,e.prev)||Sr(n,e.prev,e))||Lv(n,e)&&Sr(n.prev,n,n.next)>0&&Sr(e.prev,e,e.next)>0)}function Sr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Lv(n,e){return n.x===e.x&&n.y===e.y}function m8(n,e,t,i){const r=cw(Sr(n,e,t)),a=cw(Sr(n,e,i)),s=cw(Sr(t,i,n)),o=cw(Sr(t,i,e));return!!(r!==a&&s!==o||r===0&&lw(n,t,e)||a===0&&lw(n,i,e)||s===0&&lw(t,n,i)||o===0&&lw(t,e,i))}function lw(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function cw(n){return n>0?1:n<0?-1:0}function MJ(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&m8(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function W_(n,e){return Sr(n.prev,n,n.next)<0?Sr(n,e,n.next)>=0&&Sr(n,n.prev,e)>=0:Sr(n,e,n.prev)<0||Sr(n,n.next,e)<0}function CJ(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&r<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function g8(n,e){const t=yN(n.i,n.x,n.y),i=yN(e.i,e.x,e.y),r=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,a.next=i,i.prev=a,i}function g4(n,e,t,i){const r=yN(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function q_(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function yN(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function IJ(n,e,t,i){let r=0;for(let a=e,s=t-i;a<t;a+=i)r+=(n[s]-n[a])*(n[a+1]+n[s+1]),s=a;return r}class RJ{static triangulate(e,t,i=2){return dJ(e,t,i)}}class kc{static area(e){const t=e.length;let i=0;for(let r=t-1,a=0;a<t;r=a++)i+=e[r].x*e[a].y-e[a].x*e[r].y;return i*.5}static isClockWise(e){return kc.area(e)<0}static triangulateShape(e,t){const i=[],r=[],a=[];v4(e),y4(i,e);let s=e.length;t.forEach(v4);for(let c=0;c<t.length;c++)r.push(s),s+=t[c].length,y4(i,t[c]);const o=RJ.triangulate(i,r);for(let c=0;c<o.length;c+=3)a.push(o.slice(c,c+3));return a}}function v4(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function y4(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class aM extends Sn{constructor(e=new $m([new rt(.5,.5),new rt(-.5,.5),new rt(-.5,-.5),new rt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],a=[];for(let o=0,c=e.length;o<c;o++){const f=e[o];s(f)}this.setAttribute("position",new Gt(r,3)),this.setAttribute("uv",new Gt(a,2)),this.computeVertexNormals();function s(o){const c=[],f=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,p=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,_=t.bevelSize!==void 0?t.bevelSize:y-.1,E=t.bevelOffset!==void 0?t.bevelOffset:0,S=t.bevelSegments!==void 0?t.bevelSegments:3;const w=t.extrudePath,I=t.UVGenerator!==void 0?t.UVGenerator:PJ;let P,D=!1,z,k,U,R;if(w){P=w.getSpacedPoints(h),D=!0,v=!1;const Ne=w.isCatmullRomCurve3?w.closed:!1;z=w.computeFrenetFrames(h,Ne),k=new ce,U=new ce,R=new ce}v||(S=0,y=0,_=0,E=0);const M=o.extractPoints(f);let L=M.shape;const B=M.holes;if(!kc.isClockWise(L)){L=L.reverse();for(let Ne=0,je=B.length;Ne<je;Ne++){const Le=B[Ne];kc.isClockWise(Le)&&(B[Ne]=Le.reverse())}}function j(Ne){const Le=10000000000000001e-36;let Qe=Ne[0];for(let oe=1;oe<=Ne.length;oe++){const _t=oe%Ne.length,tt=Ne[_t],wt=tt.x-Qe.x,at=tt.y-Qe.y,ne=wt*wt+at*at,Y=Math.max(Math.abs(tt.x),Math.abs(tt.y),Math.abs(Qe.x),Math.abs(Qe.y)),me=Le*Y*Y;if(ne<=me){Ne.splice(_t,1),oe--;continue}Qe=tt}}j(L),B.forEach(j);const Z=B.length,J=L;for(let Ne=0;Ne<Z;Ne++){const je=B[Ne];L=L.concat(je)}function G(Ne,je,Le){return je||tn("ExtrudeGeometry: vec does not exist"),Ne.clone().addScaledVector(je,Le)}const $=L.length;function ae(Ne,je,Le){let Qe,oe,_t;const tt=Ne.x-je.x,wt=Ne.y-je.y,at=Le.x-Ne.x,ne=Le.y-Ne.y,Y=tt*tt+wt*wt,me=tt*ne-wt*at;if(Math.abs(me)>Number.EPSILON){const Ue=Math.sqrt(Y),qe=Math.sqrt(at*at+ne*ne),De=je.x-wt/Ue,Mt=je.y+tt/Ue,ct=Le.x-ne/qe,At=Le.y+at/qe,Ut=((ct-De)*ne-(At-Mt)*at)/(tt*ne-wt*at);Qe=De+tt*Ut-Ne.x,oe=Mt+wt*Ut-Ne.y;const et=Qe*Qe+oe*oe;if(et<=2)return new rt(Qe,oe);_t=Math.sqrt(et/2)}else{let Ue=!1;tt>Number.EPSILON?at>Number.EPSILON&&(Ue=!0):tt<-Number.EPSILON?at<-Number.EPSILON&&(Ue=!0):Math.sign(wt)===Math.sign(ne)&&(Ue=!0),Ue?(Qe=-wt,oe=tt,_t=Math.sqrt(Y)):(Qe=tt,oe=wt,_t=Math.sqrt(Y/2))}return new rt(Qe/_t,oe/_t)}const le=[];for(let Ne=0,je=J.length,Le=je-1,Qe=Ne+1;Ne<je;Ne++,Le++,Qe++)Le===je&&(Le=0),Qe===je&&(Qe=0),le[Ne]=ae(J[Ne],J[Le],J[Qe]);const ue=[];let Q,re=le.concat();for(let Ne=0,je=Z;Ne<je;Ne++){const Le=B[Ne];Q=[];for(let Qe=0,oe=Le.length,_t=oe-1,tt=Qe+1;Qe<oe;Qe++,_t++,tt++)_t===oe&&(_t=0),tt===oe&&(tt=0),Q[Qe]=ae(Le[Qe],Le[_t],Le[tt]);ue.push(Q),re=re.concat(Q)}let ye;if(S===0)ye=kc.triangulateShape(J,B);else{const Ne=[],je=[];for(let Le=0;Le<S;Le++){const Qe=Le/S,oe=y*Math.cos(Qe*Math.PI/2),_t=_*Math.sin(Qe*Math.PI/2)+E;for(let tt=0,wt=J.length;tt<wt;tt++){const at=G(J[tt],le[tt],_t);be(at.x,at.y,-oe),Qe===0&&Ne.push(at)}for(let tt=0,wt=Z;tt<wt;tt++){const at=B[tt];Q=ue[tt];const ne=[];for(let Y=0,me=at.length;Y<me;Y++){const Ue=G(at[Y],Q[Y],_t);be(Ue.x,Ue.y,-oe),Qe===0&&ne.push(Ue)}Qe===0&&je.push(ne)}}ye=kc.triangulateShape(Ne,je)}const de=ye.length,xe=_+E;for(let Ne=0;Ne<$;Ne++){const je=v?G(L[Ne],re[Ne],xe):L[Ne];D?(U.copy(z.normals[0]).multiplyScalar(je.x),k.copy(z.binormals[0]).multiplyScalar(je.y),R.copy(P[0]).add(U).add(k),be(R.x,R.y,R.z)):be(je.x,je.y,0)}for(let Ne=1;Ne<=h;Ne++)for(let je=0;je<$;je++){const Le=v?G(L[je],re[je],xe):L[je];D?(U.copy(z.normals[Ne]).multiplyScalar(Le.x),k.copy(z.binormals[Ne]).multiplyScalar(Le.y),R.copy(P[Ne]).add(U).add(k),be(R.x,R.y,R.z)):be(Le.x,Le.y,p/h*Ne)}for(let Ne=S-1;Ne>=0;Ne--){const je=Ne/S,Le=y*Math.cos(je*Math.PI/2),Qe=_*Math.sin(je*Math.PI/2)+E;for(let oe=0,_t=J.length;oe<_t;oe++){const tt=G(J[oe],le[oe],Qe);be(tt.x,tt.y,p+Le)}for(let oe=0,_t=B.length;oe<_t;oe++){const tt=B[oe];Q=ue[oe];for(let wt=0,at=tt.length;wt<at;wt++){const ne=G(tt[wt],Q[wt],Qe);D?be(ne.x,ne.y+P[h-1].y,P[h-1].x+Le):be(ne.x,ne.y,p+Le)}}}ve(),Te();function ve(){const Ne=r.length/3;if(v){let je=0,Le=$*je;for(let Qe=0;Qe<de;Qe++){const oe=ye[Qe];Ve(oe[2]+Le,oe[1]+Le,oe[0]+Le)}je=h+S*2,Le=$*je;for(let Qe=0;Qe<de;Qe++){const oe=ye[Qe];Ve(oe[0]+Le,oe[1]+Le,oe[2]+Le)}}else{for(let je=0;je<de;je++){const Le=ye[je];Ve(Le[2],Le[1],Le[0])}for(let je=0;je<de;je++){const Le=ye[je];Ve(Le[0]+$*h,Le[1]+$*h,Le[2]+$*h)}}i.addGroup(Ne,r.length/3-Ne,0)}function Te(){const Ne=r.length/3;let je=0;Ze(J,je),je+=J.length;for(let Le=0,Qe=B.length;Le<Qe;Le++){const oe=B[Le];Ze(oe,je),je+=oe.length}i.addGroup(Ne,r.length/3-Ne,1)}function Ze(Ne,je){let Le=Ne.length;for(;--Le>=0;){const Qe=Le;let oe=Le-1;oe<0&&(oe=Ne.length-1);for(let _t=0,tt=h+S*2;_t<tt;_t++){const wt=$*_t,at=$*(_t+1),ne=je+Qe+wt,Y=je+oe+wt,me=je+oe+at,Ue=je+Qe+at;vt(ne,Y,me,Ue)}}}function be(Ne,je,Le){c.push(Ne),c.push(je),c.push(Le)}function Ve(Ne,je,Le){Ie(Ne),Ie(je),Ie(Le);const Qe=r.length/3,oe=I.generateTopUV(i,r,Qe-3,Qe-2,Qe-1);It(oe[0]),It(oe[1]),It(oe[2])}function vt(Ne,je,Le,Qe){Ie(Ne),Ie(je),Ie(Qe),Ie(je),Ie(Le),Ie(Qe);const oe=r.length/3,_t=I.generateSideWallUV(i,r,oe-6,oe-3,oe-2,oe-1);It(_t[0]),It(_t[1]),It(_t[3]),It(_t[1]),It(_t[2]),It(_t[3])}function Ie(Ne){r.push(c[Ne*3+0]),r.push(c[Ne*3+1]),r.push(c[Ne*3+2])}function It(Ne){a.push(Ne.x),a.push(Ne.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return NJ(t,i,e)}static fromJSON(e,t){const i=[];for(let a=0,s=e.shapes.length;a<s;a++){const o=t[e.shapes[a]];i.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new cT[r.type]().fromJSON(r)),new aM(i,e.options)}}const PJ={generateTopUV:function(n,e,t,i,r){const a=e[t*3],s=e[t*3+1],o=e[i*3],c=e[i*3+1],f=e[r*3],h=e[r*3+1];return[new rt(a,s),new rt(o,c),new rt(f,h)]},generateSideWallUV:function(n,e,t,i,r,a){const s=e[t*3],o=e[t*3+1],c=e[t*3+2],f=e[i*3],h=e[i*3+1],p=e[i*3+2],v=e[r*3],y=e[r*3+1],_=e[r*3+2],E=e[a*3],S=e[a*3+1],w=e[a*3+2];return Math.abs(o-h)<Math.abs(s-f)?[new rt(s,1-c),new rt(f,1-p),new rt(v,1-_),new rt(E,1-w)]:[new rt(o,1-c),new rt(h,1-p),new rt(y,1-_),new rt(S,1-w)]}};function NJ(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const a=n[i];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class sM extends yp{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sM(e.radius,e.detail)}}class oM extends Sn{constructor(e=[new rt(0,-.5),new rt(.5,0),new rt(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=gn(r,0,Math.PI*2);const a=[],s=[],o=[],c=[],f=[],h=1/t,p=new ce,v=new rt,y=new ce,_=new ce,E=new ce;let S=0,w=0;for(let I=0;I<=e.length-1;I++)switch(I){case 0:S=e[I+1].x-e[I].x,w=e[I+1].y-e[I].y,y.x=w*1,y.y=-S,y.z=w*0,E.copy(y),y.normalize(),c.push(y.x,y.y,y.z);break;case e.length-1:c.push(E.x,E.y,E.z);break;default:S=e[I+1].x-e[I].x,w=e[I+1].y-e[I].y,y.x=w*1,y.y=-S,y.z=w*0,_.copy(y),y.x+=E.x,y.y+=E.y,y.z+=E.z,y.normalize(),c.push(y.x,y.y,y.z),E.copy(_)}for(let I=0;I<=t;I++){const P=i+I*h*r,D=Math.sin(P),z=Math.cos(P);for(let k=0;k<=e.length-1;k++){p.x=e[k].x*D,p.y=e[k].y,p.z=e[k].x*z,s.push(p.x,p.y,p.z),v.x=I/t,v.y=k/(e.length-1),o.push(v.x,v.y);const U=c[3*k+0]*D,R=c[3*k+1],M=c[3*k+0]*z;f.push(U,R,M)}}for(let I=0;I<t;I++)for(let P=0;P<e.length-1;P++){const D=P+I*e.length,z=D,k=D+e.length,U=D+e.length+1,R=D+1;a.push(z,k,R),a.push(U,R,k)}this.setIndex(a),this.setAttribute("position",new Gt(s,3)),this.setAttribute("uv",new Gt(o,2)),this.setAttribute("normal",new Gt(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new oM(e.points,e.segments,e.phiStart,e.phiLength)}}class Nx extends yp{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Nx(e.radius,e.detail)}}class ey extends Sn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const a=e/2,s=t/2,o=Math.floor(i),c=Math.floor(r),f=o+1,h=c+1,p=e/o,v=t/c,y=[],_=[],E=[],S=[];for(let w=0;w<h;w++){const I=w*v-s;for(let P=0;P<f;P++){const D=P*p-a;_.push(D,-I,0),E.push(0,0,1),S.push(P/o),S.push(1-w/c)}}for(let w=0;w<c;w++)for(let I=0;I<o;I++){const P=I+f*w,D=I+f*(w+1),z=I+1+f*(w+1),k=I+1+f*w;y.push(P,D,k),y.push(D,z,k)}this.setIndex(y),this.setAttribute("position",new Gt(_,3)),this.setAttribute("normal",new Gt(E,3)),this.setAttribute("uv",new Gt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ey(e.width,e.height,e.widthSegments,e.heightSegments)}}class lM extends Sn{constructor(e=.5,t=1,i=32,r=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:s},i=Math.max(3,i),r=Math.max(1,r);const o=[],c=[],f=[],h=[];let p=e;const v=(t-e)/r,y=new ce,_=new rt;for(let E=0;E<=r;E++){for(let S=0;S<=i;S++){const w=a+S/i*s;y.x=p*Math.cos(w),y.y=p*Math.sin(w),c.push(y.x,y.y,y.z),f.push(0,0,1),_.x=(y.x/t+1)/2,_.y=(y.y/t+1)/2,h.push(_.x,_.y)}p+=v}for(let E=0;E<r;E++){const S=E*(i+1);for(let w=0;w<i;w++){const I=w+S,P=I,D=I+i+1,z=I+i+2,k=I+1;o.push(P,D,k),o.push(D,z,k)}}this.setIndex(o),this.setAttribute("position",new Gt(c,3)),this.setAttribute("normal",new Gt(f,3)),this.setAttribute("uv",new Gt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lM(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class cM extends Sn{constructor(e=new $m([new rt(0,.5),new rt(-.5,-.5),new rt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],a=[],s=[];let o=0,c=0;if(Array.isArray(e)===!1)f(e);else for(let h=0;h<e.length;h++)f(e[h]),this.addGroup(o,c,h),o+=c,c=0;this.setIndex(i),this.setAttribute("position",new Gt(r,3)),this.setAttribute("normal",new Gt(a,3)),this.setAttribute("uv",new Gt(s,2));function f(h){const p=r.length/3,v=h.extractPoints(t);let y=v.shape;const _=v.holes;kc.isClockWise(y)===!1&&(y=y.reverse());for(let S=0,w=_.length;S<w;S++){const I=_[S];kc.isClockWise(I)===!0&&(_[S]=I.reverse())}const E=kc.triangulateShape(y,_);for(let S=0,w=_.length;S<w;S++){const I=_[S];y=y.concat(I)}for(let S=0,w=y.length;S<w;S++){const I=y[S];r.push(I.x,I.y,0),a.push(0,0,1),s.push(I.x,I.y)}for(let S=0,w=E.length;S<w;S++){const I=E[S],P=I[0]+p,D=I[1]+p,z=I[2]+p;i.push(P,D,z),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return OJ(t,e)}static fromJSON(e,t){const i=[];for(let r=0,a=e.shapes.length;r<a;r++){const s=t[e.shapes[r]];i.push(s)}return new cM(i,e.curveSegments)}}function OJ(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Ox extends Sn{constructor(e=1,t=32,i=16,r=0,a=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:a,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(s+o,Math.PI);let f=0;const h=[],p=new ce,v=new ce,y=[],_=[],E=[],S=[];for(let w=0;w<=i;w++){const I=[],P=w/i;let D=0;w===0&&s===0?D=.5/t:w===i&&c===Math.PI&&(D=-.5/t);for(let z=0;z<=t;z++){const k=z/t;p.x=-e*Math.cos(r+k*a)*Math.sin(s+P*o),p.y=e*Math.cos(s+P*o),p.z=e*Math.sin(r+k*a)*Math.sin(s+P*o),_.push(p.x,p.y,p.z),v.copy(p).normalize(),E.push(v.x,v.y,v.z),S.push(k+D,1-P),I.push(f++)}h.push(I)}for(let w=0;w<i;w++)for(let I=0;I<t;I++){const P=h[w][I+1],D=h[w][I],z=h[w+1][I],k=h[w+1][I+1];(w!==0||s>0)&&y.push(P,D,k),(w!==i-1||c<Math.PI)&&y.push(D,z,k)}this.setIndex(y),this.setAttribute("position",new Gt(_,3)),this.setAttribute("normal",new Gt(E,3)),this.setAttribute("uv",new Gt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ox(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class uM extends yp{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new uM(e.radius,e.detail)}}class fM extends Sn{constructor(e=1,t=.4,i=12,r=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:a},i=Math.floor(i),r=Math.floor(r);const s=[],o=[],c=[],f=[],h=new ce,p=new ce,v=new ce;for(let y=0;y<=i;y++)for(let _=0;_<=r;_++){const E=_/r*a,S=y/i*Math.PI*2;p.x=(e+t*Math.cos(S))*Math.cos(E),p.y=(e+t*Math.cos(S))*Math.sin(E),p.z=t*Math.sin(S),o.push(p.x,p.y,p.z),h.x=e*Math.cos(E),h.y=e*Math.sin(E),v.subVectors(p,h).normalize(),c.push(v.x,v.y,v.z),f.push(_/r),f.push(y/i)}for(let y=1;y<=i;y++)for(let _=1;_<=r;_++){const E=(r+1)*y+_-1,S=(r+1)*(y-1)+_-1,w=(r+1)*(y-1)+_,I=(r+1)*y+_;s.push(E,S,I),s.push(S,w,I)}this.setIndex(s),this.setAttribute("position",new Gt(o,3)),this.setAttribute("normal",new Gt(c,3)),this.setAttribute("uv",new Gt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fM(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class hM extends Sn{constructor(e=1,t=.4,i=64,r=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:a,q:s},i=Math.floor(i),r=Math.floor(r);const o=[],c=[],f=[],h=[],p=new ce,v=new ce,y=new ce,_=new ce,E=new ce,S=new ce,w=new ce;for(let P=0;P<=i;++P){const D=P/i*a*Math.PI*2;I(D,a,s,e,y),I(D+.01,a,s,e,_),S.subVectors(_,y),w.addVectors(_,y),E.crossVectors(S,w),w.crossVectors(E,S),E.normalize(),w.normalize();for(let z=0;z<=r;++z){const k=z/r*Math.PI*2,U=-t*Math.cos(k),R=t*Math.sin(k);p.x=y.x+(U*w.x+R*E.x),p.y=y.y+(U*w.y+R*E.y),p.z=y.z+(U*w.z+R*E.z),c.push(p.x,p.y,p.z),v.subVectors(p,y).normalize(),f.push(v.x,v.y,v.z),h.push(P/i),h.push(z/r)}}for(let P=1;P<=i;P++)for(let D=1;D<=r;D++){const z=(r+1)*(P-1)+(D-1),k=(r+1)*P+(D-1),U=(r+1)*P+D,R=(r+1)*(P-1)+D;o.push(z,k,R),o.push(k,U,R)}this.setIndex(o),this.setAttribute("position",new Gt(c,3)),this.setAttribute("normal",new Gt(f,3)),this.setAttribute("uv",new Gt(h,2));function I(P,D,z,k,U){const R=Math.cos(P),M=Math.sin(P),L=z/D*P,B=Math.cos(L);U.x=k*(2+B)*.5*R,U.y=k*(2+B)*M*.5,U.z=k*Math.sin(L)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hM(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class dM extends Sn{constructor(e=new R3(new ce(-1,-1,0),new ce(-1,1,0),new ce(1,1,0)),t=64,i=1,r=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:a};const s=e.computeFrenetFrames(t,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new ce,c=new ce,f=new rt;let h=new ce;const p=[],v=[],y=[],_=[];E(),this.setIndex(_),this.setAttribute("position",new Gt(p,3)),this.setAttribute("normal",new Gt(v,3)),this.setAttribute("uv",new Gt(y,2));function E(){for(let P=0;P<t;P++)S(P);S(a===!1?t:0),I(),w()}function S(P){h=e.getPointAt(P/t,h);const D=s.normals[P],z=s.binormals[P];for(let k=0;k<=r;k++){const U=k/r*Math.PI*2,R=Math.sin(U),M=-Math.cos(U);c.x=M*D.x+R*z.x,c.y=M*D.y+R*z.y,c.z=M*D.z+R*z.z,c.normalize(),v.push(c.x,c.y,c.z),o.x=h.x+i*c.x,o.y=h.y+i*c.y,o.z=h.z+i*c.z,p.push(o.x,o.y,o.z)}}function w(){for(let P=1;P<=t;P++)for(let D=1;D<=r;D++){const z=(r+1)*(P-1)+(D-1),k=(r+1)*P+(D-1),U=(r+1)*P+D,R=(r+1)*(P-1)+D;_.push(z,k,R),_.push(k,U,R)}}function I(){for(let P=0;P<=t;P++)for(let D=0;D<=r;D++)f.x=P/t,f.y=D/r,y.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new dM(new cT[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class v8 extends Sn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new ce,a=new ce;if(e.index!==null){const s=e.attributes.position,o=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:o.count,materialIndex:0}]);for(let f=0,h=c.length;f<h;++f){const p=c[f],v=p.start,y=p.count;for(let _=v,E=v+y;_<E;_+=3)for(let S=0;S<3;S++){const w=o.getX(_+S),I=o.getX(_+(S+1)%3);r.fromBufferAttribute(s,w),a.fromBufferAttribute(s,I),b4(r,a,i)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let o=0,c=s.count/3;o<c;o++)for(let f=0;f<3;f++){const h=3*o+f,p=3*o+(f+1)%3;r.fromBufferAttribute(s,h),a.fromBufferAttribute(s,p),b4(r,a,i)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new Gt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function b4(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var _4=Object.freeze({__proto__:null,BoxGeometry:Eg,CapsuleGeometry:tM,CircleGeometry:nM,ConeGeometry:Px,CylinderGeometry:Rx,DodecahedronGeometry:iM,EdgesGeometry:o8,ExtrudeGeometry:aM,IcosahedronGeometry:sM,LatheGeometry:oM,OctahedronGeometry:Nx,PlaneGeometry:ey,PolyhedronGeometry:yp,RingGeometry:lM,ShapeGeometry:cM,SphereGeometry:Ox,TetrahedronGeometry:uM,TorusGeometry:fM,TorusKnotGeometry:hM,TubeGeometry:dM,WireframeGeometry:v8});class y8 extends Os{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Bt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class N3 extends Jl{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class O3 extends Os{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Bt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gp,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new hl,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class b8 extends O3{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new rt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return gn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Bt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Bt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Bt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class _8 extends Os{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Bt(16777215),this.specular=new Bt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gp,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new hl,this.combine=Mx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class x8 extends Os{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Bt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gp,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class S8 extends Os{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gp,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class w8 extends Os{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gp,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new hl,this.combine=Mx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class D3 extends Os{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Dj,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class L3 extends Os{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class E8 extends Os{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Bt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gp,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class T8 extends ao{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function km(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function A8(n){function e(r,a){return n[r]-n[a]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function bN(n,e,t){const i=n.length,r=new n.constructor(i);for(let a=0,s=0;s!==i;++a){const o=t[a]*e;for(let c=0;c!==e;++c)r[s++]=n[o+c]}return r}function k3(n,e,t,i){let r=1,a=n[0];for(;a!==void 0&&a[i]===void 0;)a=n[r++];if(a===void 0)return;let s=a[i];if(s!==void 0)if(Array.isArray(s))do s=a[i],s!==void 0&&(e.push(a.time),t.push(...s)),a=n[r++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[i],s!==void 0&&(e.push(a.time),s.toArray(t,t.length)),a=n[r++];while(a!==void 0);else do s=a[i],s!==void 0&&(e.push(a.time),t.push(s)),a=n[r++];while(a!==void 0)}function DJ(n,e,t,i,r=30){const a=n.clone();a.name=e;const s=[];for(let c=0;c<a.tracks.length;++c){const f=a.tracks[c],h=f.getValueSize(),p=[],v=[];for(let y=0;y<f.times.length;++y){const _=f.times[y]*r;if(!(_<t||_>=i)){p.push(f.times[y]);for(let E=0;E<h;++E)v.push(f.values[y*h+E])}}p.length!==0&&(f.times=km(p,f.times.constructor),f.values=km(v,f.values.constructor),s.push(f))}a.tracks=s;let o=1/0;for(let c=0;c<a.tracks.length;++c)o>a.tracks[c].times[0]&&(o=a.tracks[c].times[0]);for(let c=0;c<a.tracks.length;++c)a.tracks[c].shift(-1*o);return a.resetDuration(),a}function LJ(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,a=e/i;for(let s=0;s<r;++s){const o=t.tracks[s],c=o.ValueTypeName;if(c==="bool"||c==="string")continue;const f=n.tracks.find(function(w){return w.name===o.name&&w.ValueTypeName===c});if(f===void 0)continue;let h=0;const p=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);let v=0;const y=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=y/3);const _=o.times.length-1;let E;if(a<=o.times[0]){const w=h,I=p-h;E=o.values.slice(w,I)}else if(a>=o.times[_]){const w=_*p+h,I=w+p-h;E=o.values.slice(w,I)}else{const w=o.createInterpolant(),I=h,P=p-h;w.evaluate(a),E=w.resultBuffer.slice(I,P)}c==="quaternion"&&new Rs().fromArray(E).normalize().conjugate().toArray(E);const S=f.times.length;for(let w=0;w<S;++w){const I=w*y+v;if(c==="quaternion")Rs.multiplyQuaternionsFlat(f.values,I,E,0,f.values,I);else{const P=y-v*2;for(let D=0;D<P;++D)f.values[I+D]-=E[D]}}}return n.blendMode=m3,n}class kJ{static convertArray(e,t){return km(e,t)}static isTypedArray(e){return Hj(e)}static getKeyframeOrder(e){return A8(e)}static sortedArray(e,t,i){return bN(e,t,i)}static flattenJSON(e,t,i,r){k3(e,t,i,r)}static subclip(e,t,i,r,a=30){return DJ(e,t,i,r,a)}static makeClipAdditive(e,t=0,i=e,r=30){return LJ(e,t,i,r)}}class Dx{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],a=t[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<a)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(a=r,r=t[++i],e<r)break t}s=t.length;break n}if(!(e>=a)){const o=t[1];e<o&&(i=2,a=o);for(let c=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=a,a=t[--i-1],e>=a)break t}s=i,i=0;break n}break e}for(;i<s;){const o=i+s>>>1;e<t[o]?s=o:i=o+1}if(r=t[i],a=t[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,r)}return this.interpolate_(i,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r;for(let s=0;s!==r;++s)t[s]=i[a+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class M8 extends Dx{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Dm,endingEnd:Dm}}intervalChanged_(e,t,i){const r=this.parameterPositions;let a=e-2,s=e+1,o=r[a],c=r[s];if(o===void 0)switch(this.getSettings_().endingStart){case Lm:a=e,o=2*t-i;break;case z_:a=r.length-2,o=t+r[a]-r[a+1];break;default:a=e,o=i}if(c===void 0)switch(this.getSettings_().endingEnd){case Lm:s=e,c=2*i-t;break;case z_:s=1,c=i+r[1]-r[0];break;default:s=e-1,c=t}const f=(i-t)*.5,h=this.valueSize;this._weightPrev=f/(t-o),this._weightNext=f/(c-i),this._offsetPrev=a*h,this._offsetNext=s*h}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=e*o,f=c-o,h=this._offsetPrev,p=this._offsetNext,v=this._weightPrev,y=this._weightNext,_=(i-t)/(r-t),E=_*_,S=E*_,w=-v*S+2*v*E-v*_,I=(1+v)*S+(-1.5-2*v)*E+(-.5+v)*_+1,P=(-1-y)*S+(1.5+y)*E+.5*_,D=y*S-y*E;for(let z=0;z!==o;++z)a[z]=w*s[h+z]+I*s[f+z]+P*s[c+z]+D*s[p+z];return a}}class U3 extends Dx{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=e*o,f=c-o,h=(i-t)/(r-t),p=1-h;for(let v=0;v!==o;++v)a[v]=s[f+v]*p+s[c+v]*h;return a}}class C8 extends Dx{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ic{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=km(t,this.TimeBufferType),this.values=km(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:km(e.times,Array),values:km(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new C8(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new U3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new M8(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case F_:t=this.InterpolantFactoryMethodDiscrete;break;case sT:t=this.InterpolantFactoryMethodLinear;break;case Kw:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return Dt("KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return F_;case this.InterpolantFactoryMethodLinear:return sT;case this.InterpolantFactoryMethodSmooth:return Kw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let a=0,s=r-1;for(;a!==r&&i[a]<e;)++a;for(;s!==-1&&i[s]>t;)--s;if(++s,a!==0||s!==r){a>=s&&(s=Math.max(s,1),a=s-1);const o=this.getValueSize();this.times=i.slice(a,s),this.values=this.values.slice(a*o,s*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(tn("KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,a=i.length;a===0&&(tn("KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==a;o++){const c=i[o];if(typeof c=="number"&&isNaN(c)){tn("KeyframeTrack: Time is not a valid number.",this,o,c),e=!1;break}if(s!==null&&s>c){tn("KeyframeTrack: Out of order keys.",this,o,c,s),e=!1;break}s=c}if(r!==void 0&&Hj(r))for(let o=0,c=r.length;o!==c;++o){const f=r[o];if(isNaN(f)){tn("KeyframeTrack: Value is not a valid number.",this,o,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===Kw,a=e.length-1;let s=1;for(let o=1;o<a;++o){let c=!1;const f=e[o],h=e[o+1];if(f!==h&&(o!==1||f!==e[0]))if(r)c=!0;else{const p=o*i,v=p-i,y=p+i;for(let _=0;_!==i;++_){const E=t[p+_];if(E!==t[v+_]||E!==t[y+_]){c=!0;break}}}if(c){if(o!==s){e[s]=e[o];const p=o*i,v=s*i;for(let y=0;y!==i;++y)t[v+y]=t[p+y]}++s}}if(a>0){e[s]=e[a];for(let o=a*i,c=s*i,f=0;f!==i;++f)t[c+f]=t[o+f];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}ic.prototype.ValueTypeName="";ic.prototype.TimeBufferType=Float32Array;ic.prototype.ValueBufferType=Float32Array;ic.prototype.DefaultInterpolation=sT;class Tg extends ic{constructor(e,t,i){super(e,t,i)}}Tg.prototype.ValueTypeName="bool";Tg.prototype.ValueBufferType=Array;Tg.prototype.DefaultInterpolation=F_;Tg.prototype.InterpolantFactoryMethodLinear=void 0;Tg.prototype.InterpolantFactoryMethodSmooth=void 0;class F3 extends ic{constructor(e,t,i,r){super(e,t,i,r)}}F3.prototype.ValueTypeName="color";class $_ extends ic{constructor(e,t,i,r){super(e,t,i,r)}}$_.prototype.ValueTypeName="number";class I8 extends Dx{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=(i-t)/(r-t);let f=e*o;for(let h=f+o;f!==h;f+=4)Rs.slerpFlat(a,0,s,f-o,s,f,c);return a}}class Lx extends ic{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new I8(this.times,this.values,this.getValueSize(),e)}}Lx.prototype.ValueTypeName="quaternion";Lx.prototype.InterpolantFactoryMethodSmooth=void 0;class Ag extends ic{constructor(e,t,i){super(e,t,i)}}Ag.prototype.ValueTypeName="string";Ag.prototype.ValueBufferType=Array;Ag.prototype.DefaultInterpolation=F_;Ag.prototype.InterpolantFactoryMethodLinear=void 0;Ag.prototype.InterpolantFactoryMethodSmooth=void 0;class X_ extends ic{constructor(e,t,i,r){super(e,t,i,r)}}X_.prototype.ValueTypeName="vector";class Y_{constructor(e="",t=-1,i=[],r=HA){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=cl(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,o=i.length;s!==o;++s)t.push(FJ(i[s]).scale(r));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a.userData=JSON.parse(e.userData||"{}"),a}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let a=0,s=i.length;a!==s;++a)t.push(ic.toJSON(i[a]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const a=t.length,s=[];for(let o=0;o<a;o++){let c=[],f=[];c.push((o+a-1)%a,o,(o+1)%a),f.push(0,1,0);const h=A8(c);c=bN(c,1,h),f=bN(f,1,h),!r&&c[0]===0&&(c.push(a),f.push(f[0])),s.push(new $_(".morphTargetInfluences["+t[o].name+"]",c,f).scale(1/i))}return new this(e,-1,s)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},a=/^([\w-]*?)([\d]+)$/;for(let o=0,c=e.length;o<c;o++){const f=e[o],h=f.name.match(a);if(h&&h.length>1){const p=h[1];let v=r[p];v||(r[p]=v=[]),v.push(f)}}const s=[];for(const o in r)s.push(this.CreateFromMorphTargetSequence(o,r[o],t,i));return s}static parseAnimation(e,t){if(Dt("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return tn("AnimationClip: No animation in JSONLoader data."),null;const i=function(p,v,y,_,E){if(y.length!==0){const S=[],w=[];k3(y,S,w,_),S.length!==0&&E.push(new p(v,S,w))}},r=[],a=e.name||"default",s=e.fps||30,o=e.blendMode;let c=e.length||-1;const f=e.hierarchy||[];for(let p=0;p<f.length;p++){const v=f[p].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const y={};let _;for(_=0;_<v.length;_++)if(v[_].morphTargets)for(let E=0;E<v[_].morphTargets.length;E++)y[v[_].morphTargets[E]]=-1;for(const E in y){const S=[],w=[];for(let I=0;I!==v[_].morphTargets.length;++I){const P=v[_];S.push(P.time),w.push(P.morphTarget===E?1:0)}r.push(new $_(".morphTargetInfluence["+E+"]",S,w))}c=y.length*s}else{const y=".bones["+t[p].name+"]";i(X_,y+".position",v,"pos",r),i(Lx,y+".quaternion",v,"rot",r),i(X_,y+".scale",v,"scl",r)}}return r.length===0?null:new this(a,c,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const a=this.tracks[i];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function UJ(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return $_;case"vector":case"vector2":case"vector3":case"vector4":return X_;case"color":return F3;case"quaternion":return Lx;case"bool":case"boolean":return Tg;case"string":return Ag}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function FJ(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=UJ(n.type);if(n.times===void 0){const t=[],i=[];k3(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Bu={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class z3{constructor(e,t,i){const r=this;let a=!1,s=0,o=0,c;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this._abortController=null,this.itemStart=function(h){o++,a===!1&&r.onStart!==void 0&&r.onStart(h,s,o),a=!0},this.itemEnd=function(h){s++,r.onProgress!==void 0&&r.onProgress(h,s,o),s===o&&(a=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return c?c(h):h},this.setURLModifier=function(h){return c=h,this},this.addHandler=function(h,p){return f.push(h,p),this},this.removeHandler=function(h){const p=f.indexOf(h);return p!==-1&&f.splice(p,2),this},this.getHandler=function(h){for(let p=0,v=f.length;p<v;p+=2){const y=f[p],_=f[p+1];if(y.global&&(y.lastIndex=0),y.test(h))return _}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const R8=new z3;class so{constructor(e){this.manager=e!==void 0?e:R8,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,a){i.load(e,r,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}so.DEFAULT_MATERIAL_NAME="__DEFAULT";const Zf={};class zJ extends Error{constructor(e,t){super(e),this.response=t}}class ef extends so{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=Bu.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(Zf[e]!==void 0){Zf[e].push({onLoad:t,onProgress:i,onError:r});return}Zf[e]=[],Zf[e].push({onLoad:t,onProgress:i,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),o=this.mimeType,c=this.responseType;fetch(s).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&Dt("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const h=Zf[e],p=f.body.getReader(),v=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),y=v?parseInt(v):0,_=y!==0;let E=0;const S=new ReadableStream({start(w){I();function I(){p.read().then(({done:P,value:D})=>{if(P)w.close();else{E+=D.byteLength;const z=new ProgressEvent("progress",{lengthComputable:_,loaded:E,total:y});for(let k=0,U=h.length;k<U;k++){const R=h[k];R.onProgress&&R.onProgress(z)}w.enqueue(D),I()}},P=>{w.error(P)})}}});return new Response(S)}else throw new zJ(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(c){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(h=>new DOMParser().parseFromString(h,o));case"json":return f.json();default:if(o==="")return f.text();{const p=/charset="?([^;"\s]*)"?/i.exec(o),v=p&&p[1]?p[1].toLowerCase():void 0,y=new TextDecoder(v);return f.arrayBuffer().then(_=>y.decode(_))}}}).then(f=>{Bu.add(`file:${e}`,f);const h=Zf[e];delete Zf[e];for(let p=0,v=h.length;p<v;p++){const y=h[p];y.onLoad&&y.onLoad(f)}}).catch(f=>{const h=Zf[e];if(h===void 0)throw this.manager.itemError(e),f;delete Zf[e];for(let p=0,v=h.length;p<v;p++){const y=h[p];y.onError&&y.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class BJ extends so{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new ef(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(c){r?r(c):tn(c),a.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Y_.parse(e[i]);t.push(r)}return t}}class VJ extends so{constructor(e){super(e)}load(e,t,i,r){const a=this,s=[],o=new eM,c=new ef(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(a.withCredentials);let f=0;function h(p){c.load(e[p],function(v){const y=a.parse(v,!0);s[p]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},f+=1,f===6&&(y.mipmapCount===1&&(o.minFilter=ir),o.image=s,o.format=y.format,o.needsUpdate=!0,t&&t(o))},i,r)}if(Array.isArray(e))for(let p=0,v=e.length;p<v;++p)h(p);else c.load(e,function(p){const v=a.parse(p,!0);if(v.isCubemap){const y=v.mipmaps.length/v.mipmapCount;for(let _=0;_<y;_++){s[_]={mipmaps:[]};for(let E=0;E<v.mipmapCount;E++)s[_].mipmaps.push(v.mipmaps[_*v.mipmapCount+E]),s[_].format=v.format,s[_].width=v.width,s[_].height=v.height}o.image=s}else o.image.width=v.width,o.image.height=v.height,o.mipmaps=v.mipmaps;v.mipmapCount===1&&(o.minFilter=ir),o.format=v.format,o.needsUpdate=!0,t&&t(o)},i,r);return o}}const G0=new WeakMap;class K_ extends so{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Bu.get(`image:${e}`);if(s!==void 0){if(s.complete===!0)a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0);else{let p=G0.get(s);p===void 0&&(p=[],G0.set(s,p)),p.push({onLoad:t,onError:r})}return s}const o=j_("img");function c(){h(),t&&t(this);const p=G0.get(this)||[];for(let v=0;v<p.length;v++){const y=p[v];y.onLoad&&y.onLoad(this)}G0.delete(this),a.manager.itemEnd(e)}function f(p){h(),r&&r(p),Bu.remove(`image:${e}`);const v=G0.get(this)||[];for(let y=0;y<v.length;y++){const _=v[y];_.onError&&_.onError(p)}G0.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function h(){o.removeEventListener("load",c,!1),o.removeEventListener("error",f,!1)}return o.addEventListener("load",c,!1),o.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),Bu.add(`image:${e}`,o),a.manager.itemStart(e),o.src=e,o}}class jJ extends so{constructor(e){super(e)}load(e,t,i,r){const a=new Ix;a.colorSpace=ts;const s=new K_(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function c(f){s.load(e[f],function(h){a.images[f]=h,o++,o===6&&(a.needsUpdate=!0,t&&t(a))},void 0,r)}for(let f=0;f<e.length;++f)c(f);return a}}class HJ extends so{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Fc,o=new ef(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,function(c){let f;try{f=a.parse(c)}catch(h){if(r!==void 0)r(h);else{h(h);return}}f.image!==void 0?s.image=f.image:f.data!==void 0&&(s.image.width=f.width,s.image.height=f.height,s.image.data=f.data),s.wrapS=f.wrapS!==void 0?f.wrapS:Uo,s.wrapT=f.wrapT!==void 0?f.wrapT:Uo,s.magFilter=f.magFilter!==void 0?f.magFilter:ir,s.minFilter=f.minFilter!==void 0?f.minFilter:ir,s.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(s.colorSpace=f.colorSpace),f.flipY!==void 0&&(s.flipY=f.flipY),f.format!==void 0&&(s.format=f.format),f.type!==void 0&&(s.type=f.type),f.mipmaps!==void 0&&(s.mipmaps=f.mipmaps,s.minFilter=zu),f.mipmapCount===1&&(s.minFilter=ir),f.generateMipmaps!==void 0&&(s.generateMipmaps=f.generateMipmaps),s.needsUpdate=!0,t&&t(s,f)},i,r),s}}class GJ extends so{constructor(e){super(e)}load(e,t,i,r){const a=new Nr,s=new K_(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){a.image=o,a.needsUpdate=!0,t!==void 0&&t(a)},i,r),a}}class bp extends li{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Bt(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}}class P8 extends bp{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(li.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Bt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}toJSON(e){const t=super.toJSON(e);return t.object.groundColor=this.groundColor.getHex(),t}}const GI=new bn,x4=new ce,S4=new ce;class B3{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new rt(512,512),this.mapType=Qs,this.map=null,this.mapPass=null,this.matrix=new bn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Jv,this._frameExtents=new rt(1,1),this._viewportCount=1,this._viewports=[new Fi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;x4.setFromMatrixPosition(e.matrixWorld),t.position.copy(x4),S4.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(S4),t.updateMatrixWorld(),GI.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(GI,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(GI)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class WJ extends B3{constructor(){super(new Gr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,i=Rv*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||t.far;(i!==t.fov||r!==t.aspect||a!==t.far)&&(t.fov=i,t.aspect=r,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class N8 extends bp{constructor(e,t,i=0,r=Math.PI/3,a=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(li.DEFAULT_UP),this.updateMatrix(),this.target=new li,this.distance=i,this.angle=r,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new WJ}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.angle=this.angle,t.object.decay=this.decay,t.object.penumbra=this.penumbra,t.object.target=this.target.uuid,this.map&&this.map.isTexture&&(t.object.map=this.map.toJSON(e).uuid),t.object.shadow=this.shadow.toJSON(),t}}class qJ extends B3{constructor(){super(new Gr(90,1,.5,500)),this.isPointLightShadow=!0}}class O8 extends bp{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new qJ}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.decay=this.decay,t.object.shadow=this.shadow.toJSON(),t}}class ch extends XA{constructor(e=-1,t=1,i=1,r=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let a=i-e,s=i+e,o=r+t,c=r-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=f*this.view.offsetX,s=a+f*this.view.width,o-=h*this.view.offsetY,c=o-h*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,c,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class $J extends B3{constructor(){super(new ch(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class D8 extends bp{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(li.DEFAULT_UP),this.updateMatrix(),this.target=new li,this.shadow=new $J}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}}class L8 extends bp{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class k8 extends bp{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class V3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ce)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*r),t.addScaledVector(s[2],.488603*a),t.addScaledVector(s[3],.488603*i),t.addScaledVector(s[4],1.092548*(i*r)),t.addScaledVector(s[5],1.092548*(r*a)),t.addScaledVector(s[6],.315392*(3*a*a-1)),t.addScaledVector(s[7],1.092548*(i*a)),t.addScaledVector(s[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*r),t.addScaledVector(s[2],2*.511664*a),t.addScaledVector(s[3],2*.511664*i),t.addScaledVector(s[4],2*.429043*i*r),t.addScaledVector(s[5],2*.429043*r*a),t.addScaledVector(s[6],.743125*a*a-.247708),t.addScaledVector(s[7],2*.429043*i*a),t.addScaledVector(s[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,a=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*a,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*i*a,t[8]=.546274*(i*i-r*r)}}class U8 extends bp{constructor(e=new V3,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class pM extends so{constructor(e){super(e),this.textures={}}load(e,t,i,r){const a=this,s=new ef(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(c){r?r(c):tn(c),a.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(a){return t[a]===void 0&&Dt("MaterialLoader: Undefined texture",a),t[a]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Bt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(r.allowOverride=e.allowOverride),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(r.uniforms[a]={},s.type){case"t":r.uniforms[a].value=i(s.value);break;case"c":r.uniforms[a].value=new Bt().setHex(s.value);break;case"v2":r.uniforms[a].value=new rt().fromArray(s.value);break;case"v3":r.uniforms[a].value=new ce().fromArray(s.value);break;case"v4":r.uniforms[a].value=new Fi().fromArray(s.value);break;case"m3":r.uniforms[a].value=new Nn().fromArray(s.value);break;case"m4":r.uniforms[a].value=new bn().fromArray(s.value);break;default:r.uniforms[a].value=s.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)r.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),r.normalScale=new rt().fromArray(a)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new rt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return pM.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:y8,SpriteMaterial:S3,RawShaderMaterial:N3,ShaderMaterial:Jl,PointsMaterial:E3,MeshPhysicalMaterial:b8,MeshStandardMaterial:O3,MeshPhongMaterial:_8,MeshToonMaterial:x8,MeshNormalMaterial:S8,MeshLambertMaterial:w8,MeshDepthMaterial:D3,MeshDistanceMaterial:L3,MeshBasicMaterial:vp,MeshMatcapMaterial:E8,LineDashedMaterial:T8,LineBasicMaterial:ao,Material:Os};return new t[e]}}class _N{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class F8 extends Sn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class z8 extends so{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new ef(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(c){r?r(c):tn(c),a.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(y,_){if(t[_]!==void 0)return t[_];const S=y.interleavedBuffers[_],w=a(y,S.buffer),I=cv(S.type,w),P=new ZA(I,S.stride);return P.uuid=S.uuid,t[_]=P,P}function a(y,_){if(i[_]!==void 0)return i[_];const S=y.arrayBuffers[_],w=new Uint32Array(S).buffer;return i[_]=w,w}const s=e.isInstancedBufferGeometry?new F8:new Sn,o=e.data.index;if(o!==void 0){const y=cv(o.type,o.array);s.setIndex(new yi(y,1))}const c=e.data.attributes;for(const y in c){const _=c[y];let E;if(_.isInterleavedBufferAttribute){const S=r(e.data,_.data);E=new rg(S,_.itemSize,_.offset,_.normalized)}else{const S=cv(_.type,_.array),w=_.isInstancedBufferAttribute?Ov:yi;E=new w(S,_.itemSize,_.normalized)}_.name!==void 0&&(E.name=_.name),_.usage!==void 0&&E.setUsage(_.usage),s.setAttribute(y,E)}const f=e.data.morphAttributes;if(f)for(const y in f){const _=f[y],E=[];for(let S=0,w=_.length;S<w;S++){const I=_[S];let P;if(I.isInterleavedBufferAttribute){const D=r(e.data,I.data);P=new rg(D,I.itemSize,I.offset,I.normalized)}else{const D=cv(I.type,I.array);P=new yi(D,I.itemSize,I.normalized)}I.name!==void 0&&(P.name=I.name),E.push(P)}s.morphAttributes[y]=E}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let y=0,_=p.length;y!==_;++y){const E=p[y];s.addGroup(E.start,E.count,E.materialIndex)}const v=e.data.boundingSphere;return v!==void 0&&(s.boundingSphere=new Pa().fromJSON(v)),e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class XJ extends so{constructor(e){super(e)}load(e,t,i,r){const a=this,s=this.path===""?_N.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new ef(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){let f=null;try{f=JSON.parse(c)}catch(p){r!==void 0&&r(p),p("ObjectLoader: Can't parse "+e+".",p.message);return}const h=f.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),tn("ObjectLoader: Can't load "+e);return}a.parse(f,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?_N.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const a=new ef(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,t),o=JSON.parse(s),c=o.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(o)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,function(){t!==void 0&&t(f)}),o=this.parseTextures(e.textures,s),c=this.parseMaterials(e.materials,o),f=this.parseObject(e.object,a,c,o,i),h=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,h),this.bindLightTargets(f),t!==void 0){let p=!1;for(const v in s)if(s[v].data instanceof HTMLImageElement){p=!0;break}p===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),c=this.parseObject(e.object,r,o,s,t),f=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,f),this.bindLightTargets(c),c}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const a=new $m().fromJSON(e[i]);t[a.uuid]=a}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(a){a.isBone&&(r[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=new QA().fromJSON(e[a],r);i[o.uuid]=o}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new z8;for(let a=0,s=e.length;a<s;a++){let o;const c=e[a];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(c);break;default:c.type in _4?o=_4[c.type].fromJSON(c,t):Dt(`ObjectLoader: Unsupported geometry type "${c.type}"`)}o.uuid=c.uuid,c.name!==void 0&&(o.name=c.name),c.userData!==void 0&&(o.userData=c.userData),i[c.uuid]=o}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const a=new pM;a.setTextures(t);for(let s=0,o=e.length;s<o;s++){const c=e[s];i[c.uuid]===void 0&&(i[c.uuid]=a.parse(c)),r[c.uuid]=i[c.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],a=Y_.parse(r);t[a.uuid]=a}return t}parseImages(e,t){const i=this,r={};let a;function s(c){return i.manager.itemStart(c),a.load(c,function(){i.manager.itemEnd(c)},void 0,function(){i.manager.itemError(c),i.manager.itemEnd(c)})}function o(c){if(typeof c=="string"){const f=c,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return s(h)}else return c.data?{data:cv(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new z3(t);a=new K_(c),a.setCrossOrigin(this.crossOrigin);for(let f=0,h=e.length;f<h;f++){const p=e[f],v=p.url;if(Array.isArray(v)){const y=[];for(let _=0,E=v.length;_<E;_++){const S=v[_],w=o(S);w!==null&&(w instanceof HTMLImageElement?y.push(w):y.push(new Fc(w.data,w.width,w.height)))}r[p.uuid]=new Wd(y)}else{const y=o(p.url);r[p.uuid]=new Wd(y)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function a(s){if(typeof s=="string"){const o=s,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await r.loadAsync(c)}else return s.data?{data:cv(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){r=new K_(this.manager),r.setCrossOrigin(this.crossOrigin);for(let s=0,o=e.length;s<o;s++){const c=e[s],f=c.url;if(Array.isArray(f)){const h=[];for(let p=0,v=f.length;p<v;p++){const y=f[p],_=await a(y);_!==null&&(_ instanceof HTMLImageElement?h.push(_):h.push(new Fc(_.data,_.width,_.height)))}i[c.uuid]=new Wd(h)}else{const h=await a(c.url);i[c.uuid]=new Wd(h)}}}return i}parseTextures(e,t){function i(a,s){return typeof a=="number"?a:(Dt("ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const r={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=e[a];o.image===void 0&&Dt('ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&Dt("ObjectLoader: Undefined image",o.image);const c=t[o.image],f=c.data;let h;Array.isArray(f)?(h=new Ix,f.length===6&&(h.needsUpdate=!0)):(f&&f.data?h=new Fc:h=new Nr,f&&(h.needsUpdate=!0)),h.source=c,h.uuid=o.uuid,o.name!==void 0&&(h.name=o.name),o.mapping!==void 0&&(h.mapping=i(o.mapping,YJ)),o.channel!==void 0&&(h.channel=o.channel),o.offset!==void 0&&h.offset.fromArray(o.offset),o.repeat!==void 0&&h.repeat.fromArray(o.repeat),o.center!==void 0&&h.center.fromArray(o.center),o.rotation!==void 0&&(h.rotation=o.rotation),o.wrap!==void 0&&(h.wrapS=i(o.wrap[0],w4),h.wrapT=i(o.wrap[1],w4)),o.format!==void 0&&(h.format=o.format),o.internalFormat!==void 0&&(h.internalFormat=o.internalFormat),o.type!==void 0&&(h.type=o.type),o.colorSpace!==void 0&&(h.colorSpace=o.colorSpace),o.minFilter!==void 0&&(h.minFilter=i(o.minFilter,E4)),o.magFilter!==void 0&&(h.magFilter=i(o.magFilter,E4)),o.anisotropy!==void 0&&(h.anisotropy=o.anisotropy),o.flipY!==void 0&&(h.flipY=o.flipY),o.generateMipmaps!==void 0&&(h.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(h.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(h.compareFunction=o.compareFunction),o.userData!==void 0&&(h.userData=o.userData),r[o.uuid]=h}return r}parseObject(e,t,i,r,a){let s;function o(v){return t[v]===void 0&&Dt("ObjectLoader: Undefined geometry",v),t[v]}function c(v){if(v!==void 0){if(Array.isArray(v)){const y=[];for(let _=0,E=v.length;_<E;_++){const S=v[_];i[S]===void 0&&Dt("ObjectLoader: Undefined material",S),y.push(i[S])}return y}return i[v]===void 0&&Dt("ObjectLoader: Undefined material",v),i[v]}}function f(v){return r[v]===void 0&&Dt("ObjectLoader: Undefined texture",v),r[v]}let h,p;switch(e.type){case"Scene":s=new x3,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new Bt(e.background):s.background=f(e.background)),e.environment!==void 0&&(s.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new KA(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new YA(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new Gr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new ch(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new L8(e.color,e.intensity);break;case"DirectionalLight":s=new D8(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new O8(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new k8(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new N8(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new P8(e.color,e.groundColor,e.intensity);break;case"LightProbe":const v=new V3().fromArray(e.sh);s=new U8(v,e.intensity);break;case"SkinnedMesh":h=o(e.geometry),p=c(e.material),s=new e8(h,p),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":h=o(e.geometry),p=c(e.material),s=new sa(h,p);break;case"InstancedMesh":h=o(e.geometry),p=c(e.material);const y=e.count,_=e.instanceMatrix,E=e.instanceColor;s=new t8(h,p,y),s.instanceMatrix=new Ov(new Float32Array(_.array),16),E!==void 0&&(s.instanceColor=new Ov(new Float32Array(E.array),E.itemSize));break;case"BatchedMesh":h=o(e.geometry),p=c(e.material),s=new n8(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,p),s.geometry=h,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._geometryInfo=e.geometryInfo.map(S=>{let w=null,I=null;return S.boundingBox!==void 0&&(w=new rs().fromJSON(S.boundingBox)),S.boundingSphere!==void 0&&(I=new Pa().fromJSON(S.boundingSphere)),{...S,boundingBox:w,boundingSphere:I}}),s._instanceInfo=e.instanceInfo,s._availableInstanceIds=e._availableInstanceIds,s._availableGeometryIds=e._availableGeometryIds,s._nextIndexStart=e.nextIndexStart,s._nextVertexStart=e.nextVertexStart,s._geometryCount=e.geometryCount,s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._matricesTexture=f(e.matricesTexture.uuid),s._indirectTexture=f(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=f(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(s.boundingSphere=new Pa().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(s.boundingBox=new rs().fromJSON(e.boundingBox));break;case"LOD":s=new Jj;break;case"Line":s=new sp(o(e.geometry),c(e.material));break;case"LineLoop":s=new i8(o(e.geometry),c(e.material));break;case"LineSegments":s=new ff(o(e.geometry),c(e.material));break;case"PointCloud":case"Points":s=new r8(o(e.geometry),c(e.material));break;case"Sprite":s=new Qj(c(e.material));break;case"Group":s=new uv;break;case"Bone":s=new w3;break;default:s=new li}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(s.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let y=0;y<v.length;y++)s.add(this.parseObject(v[y],t,i,r,a))}if(e.animations!==void 0){const v=e.animations;for(let y=0;y<v.length;y++){const _=v[y];s.animations.push(a[_])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const v=e.levels;for(let y=0;y<v.length;y++){const _=v[y],E=s.getObjectByProperty("uuid",_.object);E!==void 0&&s.addLevel(E,_.distance,_.hysteresis)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?Dt("ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new li}})}}const YJ={UVMapping:kA,CubeReflectionMapping:Zu,CubeRefractionMapping:ip,EquirectangularReflectionMapping:D_,EquirectangularRefractionMapping:L_,CubeUVReflectionMapping:Qv},w4={RepeatWrapping:k_,ClampToEdgeWrapping:Uo,MirroredRepeatWrapping:U_},E4={NearestFilter:Wr,NearestMipmapNearestFilter:l3,NearestMipmapLinearFilter:lv,LinearFilter:ir,LinearMipmapNearestFilter:m_,LinearMipmapLinearFilter:zu},WI=new WeakMap;class KJ extends so{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&Dt("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&Dt("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Bu.get(`image-bitmap:${e}`);if(s!==void 0){if(a.manager.itemStart(e),s.then){s.then(f=>{if(WI.has(s)===!0)r&&r(WI.get(s)),a.manager.itemError(e),a.manager.itemEnd(e);else return t&&t(f),a.manager.itemEnd(e),f});return}return setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,o.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const c=fetch(e,o).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(f){return Bu.add(`image-bitmap:${e}`,f),t&&t(f),a.manager.itemEnd(e),f}).catch(function(f){r&&r(f),WI.set(c,f),Bu.remove(`image-bitmap:${e}`),a.manager.itemError(e),a.manager.itemEnd(e)});Bu.add(`image-bitmap:${e}`,c),a.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let uw;class j3{static getContext(){return uw===void 0&&(uw=new(window.AudioContext||window.webkitAudioContext)),uw}static setContext(e){uw=e}}class ZJ extends so{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new ef(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(c){try{const f=c.slice(0);j3.getContext().decodeAudioData(f,function(p){t(p)}).catch(o)}catch(f){o(f)}},i,r);function o(c){r?r(c):tn(c),a.manager.itemError(e)}}}const T4=new bn,A4=new bn,pm=new bn;class QJ{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Gr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Gr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,pm.copy(e.projectionMatrix);const r=t.eyeSep/2,a=r*t.near/t.focus,s=t.near*Math.tan(qm*t.fov*.5)/t.zoom;let o,c;A4.elements[12]=-r,T4.elements[12]=r,o=-s*t.aspect+a,c=s*t.aspect+a,pm.elements[0]=2*t.near/(c-o),pm.elements[8]=(c+o)/(c-o),this.cameraL.projectionMatrix.copy(pm),o=-s*t.aspect-a,c=s*t.aspect-a,pm.elements[0]=2*t.near/(c-o),pm.elements[8]=(c+o)/(c-o),this.cameraR.projectionMatrix.copy(pm)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(A4),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(T4)}}class B8 extends Gr{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}let H3=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};const mm=new ce,qI=new Rs,JJ=new ce,gm=new ce,vm=new ce;class eee extends li{constructor(){super(),this.type="AudioListener",this.context=j3.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new H3}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(mm,qI,JJ),gm.set(0,0,-1).applyQuaternion(qI),vm.set(0,1,0).applyQuaternion(qI),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(mm.x,i),t.positionY.linearRampToValueAtTime(mm.y,i),t.positionZ.linearRampToValueAtTime(mm.z,i),t.forwardX.linearRampToValueAtTime(gm.x,i),t.forwardY.linearRampToValueAtTime(gm.y,i),t.forwardZ.linearRampToValueAtTime(gm.z,i),t.upX.linearRampToValueAtTime(vm.x,i),t.upY.linearRampToValueAtTime(vm.y,i),t.upZ.linearRampToValueAtTime(vm.z,i)}else t.setPosition(mm.x,mm.y,mm.z),t.setOrientation(gm.x,gm.y,gm.z,vm.x,vm.y,vm.z)}}class V8 extends li{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){Dt("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){Dt("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){Dt("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){Dt("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){Dt("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(Dt("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){Dt("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(Dt("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const ym=new ce,M4=new Rs,tee=new ce,bm=new ce;class nee extends V8{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ym,M4,tee),bm.set(0,0,1).applyQuaternion(M4);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ym.x,i),t.positionY.linearRampToValueAtTime(ym.y,i),t.positionZ.linearRampToValueAtTime(ym.z,i),t.orientationX.linearRampToValueAtTime(bm.x,i),t.orientationY.linearRampToValueAtTime(bm.y,i),t.orientationZ.linearRampToValueAtTime(bm.z,i)}else t.setPosition(ym.x,ym.y,ym.z),t.setOrientation(bm.x,bm.y,bm.z)}}class iee{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class j8{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,a,s;switch(t){case"quaternion":r=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,a=e*r+r;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==r;++o)i[a+o]=i[o];s=t}else{s+=t;const o=t/s;this._mixBufferRegion(i,a,0,o,r)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const c=t*this._origIndex;this._mixBufferRegion(i,r,c,1-a,t)}s>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let c=t,f=t+t;c!==f;++c)if(i[c]!==i[c+t]){o.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let a=i,s=r;a!==s;++a)t[a]=t[r+a%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,a){if(r>=.5)for(let s=0;s!==a;++s)e[t+s]=e[i+s]}_slerp(e,t,i,r){Rs.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,a){const s=this._workIndex*a;Rs.multiplyQuaternionsFlat(e,s,e,t,e,i),Rs.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,i,r,a){const s=1-r;for(let o=0;o!==a;++o){const c=t+o;e[c]=e[c]*s+e[i+o]*r}}_lerpAdditive(e,t,i,r,a){for(let s=0;s!==a;++s){const o=t+s;e[o]=e[o]+e[i+s]*r}}}const G3="\\[\\]\\.:\\/",ree=new RegExp("["+G3+"]","g"),W3="[^"+G3+"]",aee="[^"+G3.replace("\\.","")+"]",see=/((?:WC+[\/:])*)/.source.replace("WC",W3),oee=/(WCOD+)?/.source.replace("WCOD",aee),lee=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",W3),cee=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",W3),uee=new RegExp("^"+see+oee+lee+cee+"$"),fee=["material","materials","bones","map"];class hee{constructor(e,t,i){const r=i||oi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=i.length;r!==a;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class oi{constructor(e,t,i){this.path=t,this.parsedPath=i||oi.parseTrackName(t),this.node=oi.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new oi.Composite(e,t,i):new oi(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(ree,"")}static parseTrackName(e){const t=uee.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const a=i.nodeName.substring(r+1);fee.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(a){for(let s=0;s<a.length;s++){const o=a[s];if(o.name===t||o.uuid===t)return o;const c=i(o.children);if(c)return c}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let a=t.propertyIndex;if(e||(e=oi.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){Dt("PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let f=t.objectIndex;switch(i){case"materials":if(!e.material){tn("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){tn("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){tn("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===f){f=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){tn("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){tn("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){tn("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(f!==void 0){if(e[f]===void 0){tn("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const s=e[r];if(s===void 0){const f=t.nodeName;tn("PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){tn("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){tn("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}oi.Composite=hee;oi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};oi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};oi.prototype.GetterByBindingType=[oi.prototype._getValue_direct,oi.prototype._getValue_array,oi.prototype._getValue_arrayElement,oi.prototype._getValue_toArray];oi.prototype.SetterByBindingTypeAndVersioning=[[oi.prototype._setValue_direct,oi.prototype._setValue_direct_setNeedsUpdate,oi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[oi.prototype._setValue_array,oi.prototype._setValue_array_setNeedsUpdate,oi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[oi.prototype._setValue_arrayElement,oi.prototype._setValue_arrayElement_setNeedsUpdate,oi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[oi.prototype._setValue_fromArray,oi.prototype._setValue_fromArray_setNeedsUpdate,oi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class dee{constructor(){this.isAnimationObjectGroup=!0,this.uuid=cl(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length;let o,c=e.length,f=this.nCachedObjects_;for(let h=0,p=arguments.length;h!==p;++h){const v=arguments[h],y=v.uuid;let _=t[y];if(_===void 0){_=c++,t[y]=_,e.push(v);for(let E=0,S=s;E!==S;++E)a[E].push(new oi(v,i[E],r[E]))}else if(_<f){o=e[_];const E=--f,S=e[E];t[S.uuid]=_,e[_]=S,t[y]=E,e[E]=v;for(let w=0,I=s;w!==I;++w){const P=a[w],D=P[E];let z=P[_];P[_]=D,z===void 0&&(z=new oi(v,i[w],r[w])),P[E]=z}}else e[_]!==o&&tn("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const c=arguments[s],f=c.uuid,h=t[f];if(h!==void 0&&h>=a){const p=a++,v=e[p];t[v.uuid]=h,e[h]=v,t[f]=p,e[p]=c;for(let y=0,_=r;y!==_;++y){const E=i[y],S=E[p],w=E[h];E[h]=S,E[p]=w}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_,s=e.length;for(let o=0,c=arguments.length;o!==c;++o){const f=arguments[o],h=f.uuid,p=t[h];if(p!==void 0)if(delete t[h],p<a){const v=--a,y=e[v],_=--s,E=e[_];t[y.uuid]=p,e[p]=y,t[E.uuid]=v,e[v]=E,e.pop();for(let S=0,w=r;S!==w;++S){const I=i[S],P=I[v],D=I[_];I[p]=P,I[v]=D,I.pop()}}else{const v=--s,y=e[v];v>0&&(t[y.uuid]=p),e[p]=y,e.pop();for(let _=0,E=r;_!==E;++_){const S=i[_];S[p]=S[v],S.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const a=this._bindings;if(r!==void 0)return a[r];const s=this._paths,o=this._parsedPaths,c=this._objects,f=c.length,h=this.nCachedObjects_,p=new Array(f);r=a.length,i[e]=r,s.push(e),o.push(t),a.push(p);for(let v=h,y=c.length;v!==y;++v){const _=c[v];p[v]=new oi(_,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length-1,c=s[o],f=e[o];t[f]=i,s[i]=c,s.pop(),a[i]=a[o],a.pop(),r[i]=r[o],r.pop()}}}class H8{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const a=t.tracks,s=a.length,o=new Array(s),c={endingStart:Dm,endingEnd:Dm};for(let f=0;f!==s;++f){const h=a[f].createInterpolant(null);o[f]=h,h.settings=c}this._interpolantSettings=c,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Nj,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,a=e._clip.duration,s=a/r,o=r/a;e.warp(1,s,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,a=r.time,s=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const c=o.parameterPositions,f=o.sampleValues;return c[0]=a,c[1]=a+i,f[0]=e/s,f[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const c=(e-a)*i;c<0||i===0?t=0:(this._startTime=null,t=i*c)}t*=this._updateTimeScale(e);const s=this._updateTime(t),o=this._updateWeight(e);if(o>0){const c=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case m3:for(let h=0,p=c.length;h!==p;++h)c[h].evaluate(s),f[h].accumulateAdditive(o);break;case HA:default:for(let h=0,p=c.length;h!==p;++h)c[h].evaluate(s),f[h].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,a=this._loopCount;const s=i===Oj;if(e===0)return a===-1?r:s&&(a&1)===1?t-r:r;if(i===Pj){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,a+=Math.abs(o);const c=this.repetitions-a;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const f=e<0;this._setEndings(f,!f,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(s&&(a&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Lm,r.endingEnd=Lm):(e?r.endingStart=this.zeroSlopeAtStart?Lm:Dm:r.endingStart=z_,t?r.endingEnd=this.zeroSlopeAtEnd?Lm:Dm:r.endingEnd=z_)}_scheduleFading(e,t,i){const r=this._mixer,a=r.time;let s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,c=s.sampleValues;return o[0]=a,c[0]=t,o[1]=a+e,c[1]=i,this}}const pee=new Float32Array(1);class mee extends uf{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,a=r.length,s=e._propertyBindings,o=e._interpolants,c=i.uuid,f=this._bindingsByRootAndName;let h=f[c];h===void 0&&(h={},f[c]=h);for(let p=0;p!==a;++p){const v=r[p],y=v.name;let _=h[y];if(_!==void 0)++_.referenceCount,s[p]=_;else{if(_=s[p],_!==void 0){_._cacheIndex===null&&(++_.referenceCount,this._addInactiveBinding(_,c,y));continue}const E=t&&t._propertyBindings[p].binding.parsedPath;_=new j8(oi.create(i,y,E),v.ValueTypeName,v.getValueSize()),++_.referenceCount,this._addInactiveBinding(_,c,y),s[p]=_}o[p].resultBuffer=_.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,a=this._actionsByClip[r];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,a=this._actionsByClip;let s=a[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,o=s[a],c=o.knownActions,f=c[c.length-1],h=e._byClipCacheIndex;f._byClipCacheIndex=h,c[h]=f,c.pop(),e._byClipCacheIndex=null;const p=o.actionByRoot,v=(e._localRoot||this._root).uuid;delete p[v],c.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,a=this._bindings;let s=r[t];s===void 0&&(s={},r[t]=s),s[i]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,a=i.path,s=this._bindingsByRootAndName,o=s[r],c=t[t.length-1],f=e._cacheIndex;c._cacheIndex=f,t[f]=c,t.pop(),delete o[a],Object.keys(o).length===0&&delete s[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new U3(new Float32Array(2),new Float32Array(2),1,pee),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=t[r];e.__cacheIndex=r,t[r]=e,a.__cacheIndex=i,t[i]=a}clipAction(e,t,i){const r=t||this._root,a=r.uuid;let s=typeof e=="string"?Y_.findByName(r,e):e;const o=s!==null?s.uuid:e,c=this._actionsByClip[o];let f=null;if(i===void 0&&(s!==null?i=s.blendMode:i=HA),c!==void 0){const p=c.actionByRoot[a];if(p!==void 0&&p.blendMode===i)return p;f=c.knownActions[0],s===null&&(s=f._clip)}if(s===null)return null;const h=new H8(this,s,t,i);return this._bindAction(h,f),this._addInactiveAction(h,o,a),h}existingAction(e,t){const i=t||this._root,r=i.uuid,a=typeof e=="string"?Y_.findByName(i,e):e,s=a?a.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let f=0;f!==i;++f)t[f]._update(r,e,a,s);const o=this._bindings,c=this._nActiveBindings;for(let f=0;f!==c;++f)o[f].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,a=r[i];if(a!==void 0){const s=a.knownActions;for(let o=0,c=s.length;o!==c;++o){const f=s[o];this._deactivateAction(f);const h=f._cacheIndex,p=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,p._cacheIndex=h,t[h]=p,t.pop(),this._removeInactiveBindingsForAction(f)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const s in i){const o=i[s].actionByRoot,c=o[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,a=r[t];if(a!==void 0)for(const s in a){const o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class gee extends v3{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new $A(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class q3{constructor(e){this.value=e}clone(){return new q3(this.value.clone===void 0?this.value:this.value.clone())}}let vee=0;class yee extends uf{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:vee++}),this.name="",this.usage=V_,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const a=Array.isArray(t[i])?t[i]:[t[i]];for(let s=0;s<a.length;s++)this.uniforms.push(a[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class bee extends ZA{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class _ee{constructor(e,t,i,r,a,s=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=a,this.normalized=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const C4=new bn;class G8{constructor(e,t,i=0,r=1/0){this.ray=new wg(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Pv,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):tn("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return C4.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(C4),this}intersectObject(e,t=!0,i=[]){return xN(e,this,i,t),i.sort(I4),i}intersectObjects(e,t=!0,i=[]){for(let r=0,a=e.length;r<a;r++)xN(e[r],this,i,t);return i.sort(I4),i}}function I4(n,e){return n.distance-e.distance}function xN(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const a=n.children;for(let s=0,o=a.length;s<o;s++)xN(a[s],e,t,!0)}}class xee{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=See.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function See(){this._document.hidden===!1&&this.reset()}class SN{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=gn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(gn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class wee{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class $3{constructor(e,t,i,r){$3.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const a=this.elements;return a[0]=e,a[2]=t,a[1]=i,a[3]=r,this}}const R4=new rt;class Eee{constructor(e=new rt(1/0,1/0),t=new rt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=R4.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,R4).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const P4=new ce,fw=new ce,W0=new ce,q0=new ce,$I=new ce,Tee=new ce,Aee=new ce;class Mee{constructor(e=new ce,t=new ce){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){P4.subVectors(e,this.start),fw.subVectors(this.end,this.start);const i=fw.dot(fw);let a=fw.dot(P4)/i;return t&&(a=gn(a,0,1)),a}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,t=Tee,i=Aee){const r=10000000000000001e-32;let a,s;const o=this.start,c=e.start,f=this.end,h=e.end;W0.subVectors(f,o),q0.subVectors(h,c),$I.subVectors(o,c);const p=W0.dot(W0),v=q0.dot(q0),y=q0.dot($I);if(p<=r&&v<=r)return t.copy(o),i.copy(c),t.sub(i),t.dot(t);if(p<=r)a=0,s=y/v,s=gn(s,0,1);else{const _=W0.dot($I);if(v<=r)s=0,a=gn(-_/p,0,1);else{const E=W0.dot(q0),S=p*v-E*E;S!==0?a=gn((E*y-_*v)/S,0,1):a=0,s=(E*a+y)/v,s<0?(s=0,a=gn(-_/p,0,1)):s>1&&(s=1,a=gn((E-_)/p,0,1))}}return t.copy(o).add(W0.multiplyScalar(a)),i.copy(c).add(q0.multiplyScalar(s)),t.sub(i),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const N4=new ce;class Cee extends li{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Sn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,c=32;s<c;s++,o++){const f=s/c*Math.PI*2,h=o/c*Math.PI*2;r.push(Math.cos(f),Math.sin(f),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new Gt(r,3));const a=new ao({fog:!1,toneMapped:!1});this.cone=new ff(i,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),N4.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(N4),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Md=new ce,hw=new bn,XI=new bn;class Iee extends ff{constructor(e){const t=W8(e),i=new Sn,r=[],a=[];for(let f=0;f<t.length;f++){const h=t[f];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(0,0,0),a.push(0,0,0))}i.setAttribute("position",new Gt(r,3)),i.setAttribute("color",new Gt(a,3));const s=new ao({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,s),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const o=new Bt(255),c=new Bt(65280);this.setColors(o,c)}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");XI.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<t.length;a++){const o=t[a];o.parent&&o.parent.isBone&&(hw.multiplyMatrices(XI,o.matrixWorld),Md.setFromMatrixPosition(hw),r.setXYZ(s,Md.x,Md.y,Md.z),hw.multiplyMatrices(XI,o.parent.matrixWorld),Md.setFromMatrixPosition(hw),r.setXYZ(s+1,Md.x,Md.y,Md.z),s+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const r=this.geometry.getAttribute("color");for(let a=0;a<r.count;a+=2)r.setXYZ(a,e.r,e.g,e.b),r.setXYZ(a+1,t.r,t.g,t.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function W8(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...W8(n.children[t]));return e}class Ree extends sa{constructor(e,t,i){const r=new Ox(t,4,2),a=new vp({wireframe:!0,fog:!1,toneMapped:!1});super(r,a),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Pee=new ce,O4=new Bt,D4=new Bt;class Nee extends li{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Nx(t);r.rotateY(Math.PI*.5),this.material=new vp({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=r.getAttribute("position"),s=new Float32Array(a.count*3);r.setAttribute("color",new yi(s,3)),this.add(new sa(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");O4.copy(this.light.color),D4.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const a=i<r/2?O4:D4;t.setXYZ(i,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Pee.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Oee extends ff{constructor(e=10,t=10,i=4473924,r=8947848){i=new Bt(i),r=new Bt(r);const a=t/2,s=e/t,o=e/2,c=[],f=[];for(let v=0,y=0,_=-o;v<=t;v++,_+=s){c.push(-o,0,_,o,0,_),c.push(_,0,-o,_,0,o);const E=v===a?i:r;E.toArray(f,y),y+=3,E.toArray(f,y),y+=3,E.toArray(f,y),y+=3,E.toArray(f,y),y+=3}const h=new Sn;h.setAttribute("position",new Gt(c,3)),h.setAttribute("color",new Gt(f,3));const p=new ao({vertexColors:!0,toneMapped:!1});super(h,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Dee extends ff{constructor(e=10,t=16,i=8,r=64,a=4473924,s=8947848){a=new Bt(a),s=new Bt(s);const o=[],c=[];if(t>1)for(let p=0;p<t;p++){const v=p/t*(Math.PI*2),y=Math.sin(v)*e,_=Math.cos(v)*e;o.push(0,0,0),o.push(y,0,_);const E=p&1?a:s;c.push(E.r,E.g,E.b),c.push(E.r,E.g,E.b)}for(let p=0;p<i;p++){const v=p&1?a:s,y=e-e/i*p;for(let _=0;_<r;_++){let E=_/r*(Math.PI*2),S=Math.sin(E)*y,w=Math.cos(E)*y;o.push(S,0,w),c.push(v.r,v.g,v.b),E=(_+1)/r*(Math.PI*2),S=Math.sin(E)*y,w=Math.cos(E)*y,o.push(S,0,w),c.push(v.r,v.g,v.b)}}const f=new Sn;f.setAttribute("position",new Gt(o,3)),f.setAttribute("color",new Gt(c,3));const h=new ao({vertexColors:!0,toneMapped:!1});super(f,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const L4=new ce,dw=new ce,k4=new ce;class Lee extends li{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Sn;r.setAttribute("position",new Gt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new ao({fog:!1,toneMapped:!1});this.lightPlane=new sp(r,a),this.add(this.lightPlane),r=new Sn,r.setAttribute("position",new Gt([0,0,0,0,0,1],3)),this.targetLine=new sp(r,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),L4.setFromMatrixPosition(this.light.matrixWorld),dw.setFromMatrixPosition(this.light.target.matrixWorld),k4.subVectors(dw,L4),this.lightPlane.lookAt(dw),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(dw),this.targetLine.scale.z=k4.length()}}const pw=new ce,Ir=new XA;class kee extends ff{constructor(e){const t=new Sn,i=new ao({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],a=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(_,E){c(_),c(E)}function c(_){r.push(0,0,0),a.push(0,0,0),s[_]===void 0&&(s[_]=[]),s[_].push(r.length/3-1)}t.setAttribute("position",new Gt(r,3)),t.setAttribute("color",new Gt(a,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const f=new Bt(16755200),h=new Bt(16711680),p=new Bt(43775),v=new Bt(16777215),y=new Bt(3355443);this.setColors(f,h,p,v,y)}setColors(e,t,i,r,a){const o=this.geometry.getAttribute("color");return o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,i.r,i.g,i.b),o.setXYZ(33,i.r,i.g,i.b),o.setXYZ(34,i.r,i.g,i.b),o.setXYZ(35,i.r,i.g,i.b),o.setXYZ(36,i.r,i.g,i.b),o.setXYZ(37,i.r,i.g,i.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,a.r,a.g,a.b),o.setXYZ(41,a.r,a.g,a.b),o.setXYZ(42,a.r,a.g,a.b),o.setXYZ(43,a.r,a.g,a.b),o.setXYZ(44,a.r,a.g,a.b),o.setXYZ(45,a.r,a.g,a.b),o.setXYZ(46,a.r,a.g,a.b),o.setXYZ(47,a.r,a.g,a.b),o.setXYZ(48,a.r,a.g,a.b),o.setXYZ(49,a.r,a.g,a.b),o.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;let a,s;if(Ir.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)a=1,s=0;else if(this.camera.coordinateSystem===al)a=-1,s=1;else if(this.camera.coordinateSystem===Cv)a=0,s=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);jr("c",t,e,Ir,0,0,a),jr("t",t,e,Ir,0,0,s),jr("n1",t,e,Ir,-i,-r,a),jr("n2",t,e,Ir,i,-r,a),jr("n3",t,e,Ir,-i,r,a),jr("n4",t,e,Ir,i,r,a),jr("f1",t,e,Ir,-i,-r,s),jr("f2",t,e,Ir,i,-r,s),jr("f3",t,e,Ir,-i,r,s),jr("f4",t,e,Ir,i,r,s),jr("u1",t,e,Ir,i*.7,r*1.1,a),jr("u2",t,e,Ir,-i*.7,r*1.1,a),jr("u3",t,e,Ir,0,r*2,a),jr("cf1",t,e,Ir,-i,0,s),jr("cf2",t,e,Ir,i,0,s),jr("cf3",t,e,Ir,0,-r,s),jr("cf4",t,e,Ir,0,r,s),jr("cn1",t,e,Ir,-i,0,a),jr("cn2",t,e,Ir,i,0,a),jr("cn3",t,e,Ir,0,-r,a),jr("cn4",t,e,Ir,0,r,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function jr(n,e,t,i,r,a,s){pw.set(r,a,s).unproject(i);const o=e[n];if(o!==void 0){const c=t.getAttribute("position");for(let f=0,h=o.length;f<h;f++)c.setXYZ(o[f],pw.x,pw.y,pw.z)}}const mw=new rs;class Uee extends ff{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),a=new Sn;a.setIndex(new yi(i,1)),a.setAttribute("position",new yi(r,3)),super(a,new ao({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&mw.setFromObject(this.object),mw.isEmpty())return;const e=mw.min,t=mw.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Fee extends ff{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new Sn;a.setIndex(new yi(i,1)),a.setAttribute("position",new Gt(r,3)),super(a,new ao({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class zee extends sp{constructor(e,t=1,i=16776960){const r=i,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new Sn;s.setAttribute("position",new Gt(a,3)),s.computeBoundingSphere(),super(s,new ao({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new Sn;c.setAttribute("position",new Gt(o,3)),c.computeBoundingSphere(),this.add(new sa(c,new vp({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const U4=new ce;let gw,YI;class Bee extends li{constructor(e=new ce(0,0,1),t=new ce(0,0,0),i=1,r=16776960,a=i*.2,s=a*.2){super(),this.type="ArrowHelper",gw===void 0&&(gw=new Sn,gw.setAttribute("position",new Gt([0,0,0,0,1,0],3)),YI=new Px(.5,1,5,1),YI.translate(0,-.5,0)),this.position.copy(t),this.line=new sp(gw,new ao({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new sa(YI,new vp({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,a,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{U4.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(U4,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Vee extends ff{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Sn;r.setAttribute("position",new Gt(t,3)),r.setAttribute("color",new Gt(i,3));const a=new ao({vertexColors:!0,toneMapped:!1});super(r,a),this.type="AxesHelper"}setColors(e,t,i){const r=new Bt,a=this.geometry.attributes.color.array;return r.set(e),r.toArray(a,0),r.toArray(a,3),r.set(t),r.toArray(a,6),r.toArray(a,9),r.set(i),r.toArray(a,12),r.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class jee{constructor(){this.type="ShapePath",this.color=new Bt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new uT,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,a,s){return this.currentPath.bezierCurveTo(e,t,i,r,a,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(w){const I=[];for(let P=0,D=w.length;P<D;P++){const z=w[P],k=new $m;k.curves=z.curves,I.push(k)}return I}function i(w,I){const P=I.length;let D=!1;for(let z=P-1,k=0;k<P;z=k++){let U=I[z],R=I[k],M=R.x-U.x,L=R.y-U.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(U=I[k],M=-M,R=I[z],L=-L),w.y<U.y||w.y>R.y)continue;if(w.y===U.y){if(w.x===U.x)return!0}else{const B=L*(w.x-U.x)-M*(w.y-U.y);if(B===0)return!0;if(B<0)continue;D=!D}}else{if(w.y!==U.y)continue;if(R.x<=w.x&&w.x<=U.x||U.x<=w.x&&w.x<=R.x)return!0}}return D}const r=kc.isClockWise,a=this.subPaths;if(a.length===0)return[];let s,o,c;const f=[];if(a.length===1)return o=a[0],c=new $m,c.curves=o.curves,f.push(c),f;let h=!r(a[0].getPoints());h=e?!h:h;const p=[],v=[];let y=[],_=0,E;v[_]=void 0,y[_]=[];for(let w=0,I=a.length;w<I;w++)o=a[w],E=o.getPoints(),s=r(E),s=e?!s:s,s?(!h&&v[_]&&_++,v[_]={s:new $m,p:E},v[_].s.curves=o.curves,h&&_++,y[_]=[]):y[_].push({h:o,p:E[0]});if(!v[0])return t(a);if(v.length>1){let w=!1,I=0;for(let P=0,D=v.length;P<D;P++)p[P]=[];for(let P=0,D=v.length;P<D;P++){const z=y[P];for(let k=0;k<z.length;k++){const U=z[k];let R=!0;for(let M=0;M<v.length;M++)i(U.p,v[M].p)&&(P!==M&&I++,R?(R=!1,p[M].push(U)):w=!0);R&&p[P].push(U)}}I>0&&w===!1&&(y=p)}let S;for(let w=0,I=v.length;w<I;w++){c=v[w].s,f.push(c),S=y[w];for(let P=0,D=S.length;P<D;P++)c.holes.push(S[P].h)}return f}}class Hee extends uf{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){Dt("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function Gee(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function Wee(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function qee(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function wN(n,e,t,i){const r=$ee(i);switch(t){case d3:return n*e;case BA:return n*e/r.components*r.byteLength;case Cx:return n*e/r.components*r.byteLength;case ig:return n*e*2/r.components*r.byteLength;case VA:return n*e*2/r.components*r.byteLength;case p3:return n*e*3/r.components*r.byteLength;case Is:return n*e*4/r.components*r.byteLength;case jA:return n*e*4/r.components*r.byteLength;case g_:case v_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case y_:case b_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case IE:case PE:return Math.max(n,16)*Math.max(e,8)/4;case CE:case RE:return Math.max(n,8)*Math.max(e,8)/2;case NE:case OE:case LE:case kE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case DE:case UE:case FE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case zE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case BE:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case VE:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case jE:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case HE:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case GE:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case WE:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case qE:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case $E:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case XE:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case YE:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case KE:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case ZE:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case QE:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case JE:case eT:case tT:return Math.ceil(n/4)*Math.ceil(e/4)*16;case nT:case iT:return Math.ceil(n/4)*Math.ceil(e/4)*8;case rT:case aT:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function $ee(n){switch(n){case Qs:case c3:return{byteLength:1,components:1};case Av:case u3:case Qu:return{byteLength:2,components:1};case FA:case zA:return{byteLength:2,components:4};case Ql:case UA:case eo:return{byteLength:4,components:1};case f3:case h3:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class Xee{static contain(e,t){return Gee(e,t)}static cover(e,t){return Wee(e,t)}static fill(e){return qee(e)}static getByteLength(e,t,i,r){return wN(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:DA}}));typeof window<"u"&&(window.__THREE__?Dt("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=DA);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function q8(){let n=null,e=!1,t=null,i=null;function r(a,s){t(a,s),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function Yee(n){const e=new WeakMap;function t(o,c){const f=o.array,h=o.usage,p=f.byteLength,v=n.createBuffer();n.bindBuffer(c,v),n.bufferData(c,f,h),o.onUploadCallback();let y;if(f instanceof Float32Array)y=n.FLOAT;else if(typeof Float16Array<"u"&&f instanceof Float16Array)y=n.HALF_FLOAT;else if(f instanceof Uint16Array)o.isFloat16BufferAttribute?y=n.HALF_FLOAT:y=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)y=n.SHORT;else if(f instanceof Uint32Array)y=n.UNSIGNED_INT;else if(f instanceof Int32Array)y=n.INT;else if(f instanceof Int8Array)y=n.BYTE;else if(f instanceof Uint8Array)y=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)y=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:v,type:y,bytesPerElement:f.BYTES_PER_ELEMENT,version:o.version,size:p}}function i(o,c,f){const h=c.array,p=c.updateRanges;if(n.bindBuffer(f,o),p.length===0)n.bufferSubData(f,0,h);else{p.sort((y,_)=>y.start-_.start);let v=0;for(let y=1;y<p.length;y++){const _=p[v],E=p[y];E.start<=_.start+_.count+1?_.count=Math.max(_.count,E.start+E.count-_.start):(++v,p[v]=E)}p.length=v+1;for(let y=0,_=p.length;y<_;y++){const E=p[y];n.bufferSubData(f,E.start*h.BYTES_PER_ELEMENT,h,E.start,E.count)}c.clearUpdateRanges()}c.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function a(o){o.isInterleavedBufferAttribute&&(o=o.data);const c=e.get(o);c&&(n.deleteBuffer(c.buffer),e.delete(o))}function s(o,c){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const h=e.get(o);(!h||h.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const f=e.get(o);if(f===void 0)e.set(o,t(o,c));else if(f.version<o.version){if(f.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(f.buffer,o,c),f.version=o.version}}return{get:r,remove:a,update:s}}var Kee=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Zee=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Qee=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Jee=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ete=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,tte=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,nte=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,ite=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,rte=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,ate=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,ste=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,ote=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,lte=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,cte=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,ute=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,fte=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,hte=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,dte=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,pte=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,mte=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,gte=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,vte=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,yte=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,bte=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,_te=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,xte=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Ste=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,wte=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Ete=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Tte=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Ate="gl_FragColor = linearToOutputTexel( gl_FragColor );",Mte=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Cte=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Ite=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,Rte=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Pte=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Nte=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Ote=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Dte=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Lte=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,kte=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Ute=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Fte=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,zte=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Bte=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Vte=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,jte=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Hte=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Gte=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Wte=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,qte=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,$te=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Xte=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Yte=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Kte=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Zte=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Qte=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Jte=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,ene=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,tne=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,nne=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,ine=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,rne=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,ane=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,sne=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,one=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,lne=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,cne=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,une=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,fne=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,hne=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,dne=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,pne=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,mne=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,gne=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,vne=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,yne=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,bne=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,_ne=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,xne=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Sne=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,wne=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Ene=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Tne=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Ane=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Mne=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Cne=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Ine=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Rne=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Pne=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,Nne=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,One=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Dne=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Lne=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,kne=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Une=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Fne=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,zne=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Bne=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Vne=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,jne=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Hne=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Gne=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Wne=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,qne=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,$ne=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Xne=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Yne=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Kne=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Zne=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Qne=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Jne=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,eie=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,tie=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,nie=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,iie=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,rie=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,aie=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,sie=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,oie=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,lie=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,cie=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,uie=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fie=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hie=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,die=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,pie=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mie=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,gie=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vie=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yie=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bie=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,_ie=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xie=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Sie=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wie=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Eie=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Tie=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Aie=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Mie=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Cie=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,zn={alphahash_fragment:Kee,alphahash_pars_fragment:Zee,alphamap_fragment:Qee,alphamap_pars_fragment:Jee,alphatest_fragment:ete,alphatest_pars_fragment:tte,aomap_fragment:nte,aomap_pars_fragment:ite,batching_pars_vertex:rte,batching_vertex:ate,begin_vertex:ste,beginnormal_vertex:ote,bsdfs:lte,iridescence_fragment:cte,bumpmap_pars_fragment:ute,clipping_planes_fragment:fte,clipping_planes_pars_fragment:hte,clipping_planes_pars_vertex:dte,clipping_planes_vertex:pte,color_fragment:mte,color_pars_fragment:gte,color_pars_vertex:vte,color_vertex:yte,common:bte,cube_uv_reflection_fragment:_te,defaultnormal_vertex:xte,displacementmap_pars_vertex:Ste,displacementmap_vertex:wte,emissivemap_fragment:Ete,emissivemap_pars_fragment:Tte,colorspace_fragment:Ate,colorspace_pars_fragment:Mte,envmap_fragment:Cte,envmap_common_pars_fragment:Ite,envmap_pars_fragment:Rte,envmap_pars_vertex:Pte,envmap_physical_pars_fragment:jte,envmap_vertex:Nte,fog_vertex:Ote,fog_pars_vertex:Dte,fog_fragment:Lte,fog_pars_fragment:kte,gradientmap_pars_fragment:Ute,lightmap_pars_fragment:Fte,lights_lambert_fragment:zte,lights_lambert_pars_fragment:Bte,lights_pars_begin:Vte,lights_toon_fragment:Hte,lights_toon_pars_fragment:Gte,lights_phong_fragment:Wte,lights_phong_pars_fragment:qte,lights_physical_fragment:$te,lights_physical_pars_fragment:Xte,lights_fragment_begin:Yte,lights_fragment_maps:Kte,lights_fragment_end:Zte,logdepthbuf_fragment:Qte,logdepthbuf_pars_fragment:Jte,logdepthbuf_pars_vertex:ene,logdepthbuf_vertex:tne,map_fragment:nne,map_pars_fragment:ine,map_particle_fragment:rne,map_particle_pars_fragment:ane,metalnessmap_fragment:sne,metalnessmap_pars_fragment:one,morphinstance_vertex:lne,morphcolor_vertex:cne,morphnormal_vertex:une,morphtarget_pars_vertex:fne,morphtarget_vertex:hne,normal_fragment_begin:dne,normal_fragment_maps:pne,normal_pars_fragment:mne,normal_pars_vertex:gne,normal_vertex:vne,normalmap_pars_fragment:yne,clearcoat_normal_fragment_begin:bne,clearcoat_normal_fragment_maps:_ne,clearcoat_pars_fragment:xne,iridescence_pars_fragment:Sne,opaque_fragment:wne,packing:Ene,premultiplied_alpha_fragment:Tne,project_vertex:Ane,dithering_fragment:Mne,dithering_pars_fragment:Cne,roughnessmap_fragment:Ine,roughnessmap_pars_fragment:Rne,shadowmap_pars_fragment:Pne,shadowmap_pars_vertex:Nne,shadowmap_vertex:One,shadowmask_pars_fragment:Dne,skinbase_vertex:Lne,skinning_pars_vertex:kne,skinning_vertex:Une,skinnormal_vertex:Fne,specularmap_fragment:zne,specularmap_pars_fragment:Bne,tonemapping_fragment:Vne,tonemapping_pars_fragment:jne,transmission_fragment:Hne,transmission_pars_fragment:Gne,uv_pars_fragment:Wne,uv_pars_vertex:qne,uv_vertex:$ne,worldpos_vertex:Xne,background_vert:Yne,background_frag:Kne,backgroundCube_vert:Zne,backgroundCube_frag:Qne,cube_vert:Jne,cube_frag:eie,depth_vert:tie,depth_frag:nie,distance_vert:iie,distance_frag:rie,equirect_vert:aie,equirect_frag:sie,linedashed_vert:oie,linedashed_frag:lie,meshbasic_vert:cie,meshbasic_frag:uie,meshlambert_vert:fie,meshlambert_frag:hie,meshmatcap_vert:die,meshmatcap_frag:pie,meshnormal_vert:mie,meshnormal_frag:gie,meshphong_vert:vie,meshphong_frag:yie,meshphysical_vert:bie,meshphysical_frag:_ie,meshtoon_vert:xie,meshtoon_frag:Sie,points_vert:wie,points_frag:Eie,shadow_vert:Tie,shadow_frag:Aie,sprite_vert:Mie,sprite_frag:Cie},kt={common:{diffuse:{value:new Bt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Nn},alphaMap:{value:null},alphaMapTransform:{value:new Nn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Nn}},envmap:{envMap:{value:null},envMapRotation:{value:new Nn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Nn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Nn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Nn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Nn},normalScale:{value:new rt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Nn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Nn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Nn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Nn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Bt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Bt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Nn},alphaTest:{value:0},uvTransform:{value:new Nn}},sprite:{diffuse:{value:new Bt(16777215)},opacity:{value:1},center:{value:new rt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Nn},alphaMap:{value:null},alphaMapTransform:{value:new Nn},alphaTest:{value:0}}},Nc={basic:{uniforms:Ks([kt.common,kt.specularmap,kt.envmap,kt.aomap,kt.lightmap,kt.fog]),vertexShader:zn.meshbasic_vert,fragmentShader:zn.meshbasic_frag},lambert:{uniforms:Ks([kt.common,kt.specularmap,kt.envmap,kt.aomap,kt.lightmap,kt.emissivemap,kt.bumpmap,kt.normalmap,kt.displacementmap,kt.fog,kt.lights,{emissive:{value:new Bt(0)}}]),vertexShader:zn.meshlambert_vert,fragmentShader:zn.meshlambert_frag},phong:{uniforms:Ks([kt.common,kt.specularmap,kt.envmap,kt.aomap,kt.lightmap,kt.emissivemap,kt.bumpmap,kt.normalmap,kt.displacementmap,kt.fog,kt.lights,{emissive:{value:new Bt(0)},specular:{value:new Bt(1118481)},shininess:{value:30}}]),vertexShader:zn.meshphong_vert,fragmentShader:zn.meshphong_frag},standard:{uniforms:Ks([kt.common,kt.envmap,kt.aomap,kt.lightmap,kt.emissivemap,kt.bumpmap,kt.normalmap,kt.displacementmap,kt.roughnessmap,kt.metalnessmap,kt.fog,kt.lights,{emissive:{value:new Bt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:zn.meshphysical_vert,fragmentShader:zn.meshphysical_frag},toon:{uniforms:Ks([kt.common,kt.aomap,kt.lightmap,kt.emissivemap,kt.bumpmap,kt.normalmap,kt.displacementmap,kt.gradientmap,kt.fog,kt.lights,{emissive:{value:new Bt(0)}}]),vertexShader:zn.meshtoon_vert,fragmentShader:zn.meshtoon_frag},matcap:{uniforms:Ks([kt.common,kt.bumpmap,kt.normalmap,kt.displacementmap,kt.fog,{matcap:{value:null}}]),vertexShader:zn.meshmatcap_vert,fragmentShader:zn.meshmatcap_frag},points:{uniforms:Ks([kt.points,kt.fog]),vertexShader:zn.points_vert,fragmentShader:zn.points_frag},dashed:{uniforms:Ks([kt.common,kt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:zn.linedashed_vert,fragmentShader:zn.linedashed_frag},depth:{uniforms:Ks([kt.common,kt.displacementmap]),vertexShader:zn.depth_vert,fragmentShader:zn.depth_frag},normal:{uniforms:Ks([kt.common,kt.bumpmap,kt.normalmap,kt.displacementmap,{opacity:{value:1}}]),vertexShader:zn.meshnormal_vert,fragmentShader:zn.meshnormal_frag},sprite:{uniforms:Ks([kt.sprite,kt.fog]),vertexShader:zn.sprite_vert,fragmentShader:zn.sprite_frag},background:{uniforms:{uvTransform:{value:new Nn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:zn.background_vert,fragmentShader:zn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Nn}},vertexShader:zn.backgroundCube_vert,fragmentShader:zn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:zn.cube_vert,fragmentShader:zn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:zn.equirect_vert,fragmentShader:zn.equirect_frag},distance:{uniforms:Ks([kt.common,kt.displacementmap,{referencePosition:{value:new ce},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:zn.distance_vert,fragmentShader:zn.distance_frag},shadow:{uniforms:Ks([kt.lights,kt.fog,{color:{value:new Bt(0)},opacity:{value:1}}]),vertexShader:zn.shadow_vert,fragmentShader:zn.shadow_frag}};Nc.physical={uniforms:Ks([Nc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Nn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Nn},clearcoatNormalScale:{value:new rt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Nn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Nn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Nn},sheen:{value:0},sheenColor:{value:new Bt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Nn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Nn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Nn},transmissionSamplerSize:{value:new rt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Nn},attenuationDistance:{value:0},attenuationColor:{value:new Bt(0)},specularColor:{value:new Bt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Nn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Nn},anisotropyVector:{value:new rt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Nn}}]),vertexShader:zn.meshphysical_vert,fragmentShader:zn.meshphysical_frag};const vw={r:0,b:0,g:0},_m=new hl,Iie=new bn;function Rie(n,e,t,i,r,a,s){const o=new Bt(0);let c=a===!0?0:1,f,h,p=null,v=0,y=null;function _(P){let D=P.isScene===!0?P.background:null;return D&&D.isTexture&&(D=(P.backgroundBlurriness>0?t:e).get(D)),D}function E(P){let D=!1;const z=_(P);z===null?w(o,c):z&&z.isColor&&(w(z,1),D=!0);const k=n.xr.getEnvironmentBlendMode();k==="additive"?i.buffers.color.setClear(0,0,0,1,s):k==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||D)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function S(P,D){const z=_(D);z&&(z.isCubeTexture||z.mapping===Qv)?(h===void 0&&(h=new sa(new Eg(1,1,1),new Jl({name:"BackgroundCubeMaterial",uniforms:Nv(Nc.backgroundCube.uniforms),vertexShader:Nc.backgroundCube.vertexShader,fragmentShader:Nc.backgroundCube.fragmentShader,side:io,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(k,U,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),_m.copy(D.backgroundRotation),_m.x*=-1,_m.y*=-1,_m.z*=-1,z.isCubeTexture&&z.isRenderTargetTexture===!1&&(_m.y*=-1,_m.z*=-1),h.material.uniforms.envMap.value=z,h.material.uniforms.flipEnvMap.value=z.isCubeTexture&&z.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=D.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(Iie.makeRotationFromEuler(_m)),h.material.toneMapped=Qn.getTransfer(z.colorSpace)!==Si,(p!==z||v!==z.version||y!==n.toneMapping)&&(h.material.needsUpdate=!0,p=z,v=z.version,y=n.toneMapping),h.layers.enableAll(),P.unshift(h,h.geometry,h.material,0,0,null)):z&&z.isTexture&&(f===void 0&&(f=new sa(new ey(2,2),new Jl({name:"BackgroundMaterial",uniforms:Nv(Nc.background.uniforms),vertexShader:Nc.background.vertexShader,fragmentShader:Nc.background.fragmentShader,side:hh,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(f)),f.material.uniforms.t2D.value=z,f.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,f.material.toneMapped=Qn.getTransfer(z.colorSpace)!==Si,z.matrixAutoUpdate===!0&&z.updateMatrix(),f.material.uniforms.uvTransform.value.copy(z.matrix),(p!==z||v!==z.version||y!==n.toneMapping)&&(f.material.needsUpdate=!0,p=z,v=z.version,y=n.toneMapping),f.layers.enableAll(),P.unshift(f,f.geometry,f.material,0,0,null))}function w(P,D){P.getRGB(vw,Xj(n)),i.buffers.color.setClear(vw.r,vw.g,vw.b,D,s)}function I(){h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return o},setClearColor:function(P,D=1){o.set(P),c=D,w(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(P){c=P,w(o,c)},render:E,addToRenderList:S,dispose:I}}function Pie(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=v(null);let a=r,s=!1;function o(L,B,V,j,Z){let J=!1;const G=p(j,V,B);a!==G&&(a=G,f(a.object)),J=y(L,j,V,Z),J&&_(L,j,V,Z),Z!==null&&e.update(Z,n.ELEMENT_ARRAY_BUFFER),(J||s)&&(s=!1,D(L,B,V,j),Z!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(Z).buffer))}function c(){return n.createVertexArray()}function f(L){return n.bindVertexArray(L)}function h(L){return n.deleteVertexArray(L)}function p(L,B,V){const j=V.wireframe===!0;let Z=i[L.id];Z===void 0&&(Z={},i[L.id]=Z);let J=Z[B.id];J===void 0&&(J={},Z[B.id]=J);let G=J[j];return G===void 0&&(G=v(c()),J[j]=G),G}function v(L){const B=[],V=[],j=[];for(let Z=0;Z<t;Z++)B[Z]=0,V[Z]=0,j[Z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:B,enabledAttributes:V,attributeDivisors:j,object:L,attributes:{},index:null}}function y(L,B,V,j){const Z=a.attributes,J=B.attributes;let G=0;const $=V.getAttributes();for(const ae in $)if($[ae].location>=0){const ue=Z[ae];let Q=J[ae];if(Q===void 0&&(ae==="instanceMatrix"&&L.instanceMatrix&&(Q=L.instanceMatrix),ae==="instanceColor"&&L.instanceColor&&(Q=L.instanceColor)),ue===void 0||ue.attribute!==Q||Q&&ue.data!==Q.data)return!0;G++}return a.attributesNum!==G||a.index!==j}function _(L,B,V,j){const Z={},J=B.attributes;let G=0;const $=V.getAttributes();for(const ae in $)if($[ae].location>=0){let ue=J[ae];ue===void 0&&(ae==="instanceMatrix"&&L.instanceMatrix&&(ue=L.instanceMatrix),ae==="instanceColor"&&L.instanceColor&&(ue=L.instanceColor));const Q={};Q.attribute=ue,ue&&ue.data&&(Q.data=ue.data),Z[ae]=Q,G++}a.attributes=Z,a.attributesNum=G,a.index=j}function E(){const L=a.newAttributes;for(let B=0,V=L.length;B<V;B++)L[B]=0}function S(L){w(L,0)}function w(L,B){const V=a.newAttributes,j=a.enabledAttributes,Z=a.attributeDivisors;V[L]=1,j[L]===0&&(n.enableVertexAttribArray(L),j[L]=1),Z[L]!==B&&(n.vertexAttribDivisor(L,B),Z[L]=B)}function I(){const L=a.newAttributes,B=a.enabledAttributes;for(let V=0,j=B.length;V<j;V++)B[V]!==L[V]&&(n.disableVertexAttribArray(V),B[V]=0)}function P(L,B,V,j,Z,J,G){G===!0?n.vertexAttribIPointer(L,B,V,Z,J):n.vertexAttribPointer(L,B,V,j,Z,J)}function D(L,B,V,j){E();const Z=j.attributes,J=V.getAttributes(),G=B.defaultAttributeValues;for(const $ in J){const ae=J[$];if(ae.location>=0){let le=Z[$];if(le===void 0&&($==="instanceMatrix"&&L.instanceMatrix&&(le=L.instanceMatrix),$==="instanceColor"&&L.instanceColor&&(le=L.instanceColor)),le!==void 0){const ue=le.normalized,Q=le.itemSize,re=e.get(le);if(re===void 0)continue;const ye=re.buffer,de=re.type,xe=re.bytesPerElement,ve=de===n.INT||de===n.UNSIGNED_INT||le.gpuType===UA;if(le.isInterleavedBufferAttribute){const Te=le.data,Ze=Te.stride,be=le.offset;if(Te.isInstancedInterleavedBuffer){for(let Ve=0;Ve<ae.locationSize;Ve++)w(ae.location+Ve,Te.meshPerAttribute);L.isInstancedMesh!==!0&&j._maxInstanceCount===void 0&&(j._maxInstanceCount=Te.meshPerAttribute*Te.count)}else for(let Ve=0;Ve<ae.locationSize;Ve++)S(ae.location+Ve);n.bindBuffer(n.ARRAY_BUFFER,ye);for(let Ve=0;Ve<ae.locationSize;Ve++)P(ae.location+Ve,Q/ae.locationSize,de,ue,Ze*xe,(be+Q/ae.locationSize*Ve)*xe,ve)}else{if(le.isInstancedBufferAttribute){for(let Te=0;Te<ae.locationSize;Te++)w(ae.location+Te,le.meshPerAttribute);L.isInstancedMesh!==!0&&j._maxInstanceCount===void 0&&(j._maxInstanceCount=le.meshPerAttribute*le.count)}else for(let Te=0;Te<ae.locationSize;Te++)S(ae.location+Te);n.bindBuffer(n.ARRAY_BUFFER,ye);for(let Te=0;Te<ae.locationSize;Te++)P(ae.location+Te,Q/ae.locationSize,de,ue,Q*xe,Q/ae.locationSize*Te*xe,ve)}}else if(G!==void 0){const ue=G[$];if(ue!==void 0)switch(ue.length){case 2:n.vertexAttrib2fv(ae.location,ue);break;case 3:n.vertexAttrib3fv(ae.location,ue);break;case 4:n.vertexAttrib4fv(ae.location,ue);break;default:n.vertexAttrib1fv(ae.location,ue)}}}}I()}function z(){R();for(const L in i){const B=i[L];for(const V in B){const j=B[V];for(const Z in j)h(j[Z].object),delete j[Z];delete B[V]}delete i[L]}}function k(L){if(i[L.id]===void 0)return;const B=i[L.id];for(const V in B){const j=B[V];for(const Z in j)h(j[Z].object),delete j[Z];delete B[V]}delete i[L.id]}function U(L){for(const B in i){const V=i[B];if(V[L.id]===void 0)continue;const j=V[L.id];for(const Z in j)h(j[Z].object),delete j[Z];delete V[L.id]}}function R(){M(),s=!0,a!==r&&(a=r,f(a.object))}function M(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:R,resetDefaultState:M,dispose:z,releaseStatesOfGeometry:k,releaseStatesOfProgram:U,initAttributes:E,enableAttribute:S,disableUnusedAttributes:I}}function Nie(n,e,t){let i;function r(f){i=f}function a(f,h){n.drawArrays(i,f,h),t.update(h,i,1)}function s(f,h,p){p!==0&&(n.drawArraysInstanced(i,f,h,p),t.update(h,i,p))}function o(f,h,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,f,0,h,0,p);let y=0;for(let _=0;_<p;_++)y+=h[_];t.update(y,i,1)}function c(f,h,p,v){if(p===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let _=0;_<f.length;_++)s(f[_],h[_],v[_]);else{y.multiDrawArraysInstancedWEBGL(i,f,0,h,0,v,0,p);let _=0;for(let E=0;E<p;E++)_+=h[E]*v[E];t.update(_,i,1)}}this.setMode=r,this.render=a,this.renderInstances=s,this.renderMultiDraw=o,this.renderMultiDrawInstances=c}function Oie(n,e,t,i){let r;function a(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const U=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(U.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(U){return!(U!==Is&&i.convert(U)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(U){const R=U===Qu&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(U!==Qs&&i.convert(U)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&U!==eo&&!R)}function c(U){if(U==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";U="mediump"}return U==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=t.precision!==void 0?t.precision:"highp";const h=c(f);h!==f&&(Dt("WebGLRenderer:",f,"not supported, using",h,"instead."),f=h);const p=t.logarithmicDepthBuffer===!0,v=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),y=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),_=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),E=n.getParameter(n.MAX_TEXTURE_SIZE),S=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),w=n.getParameter(n.MAX_VERTEX_ATTRIBS),I=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),P=n.getParameter(n.MAX_VARYING_VECTORS),D=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),z=n.getParameter(n.MAX_SAMPLES),k=n.getParameter(n.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:c,textureFormatReadable:s,textureTypeReadable:o,precision:f,logarithmicDepthBuffer:p,reversedDepthBuffer:v,maxTextures:y,maxVertexTextures:_,maxTextureSize:E,maxCubemapSize:S,maxAttributes:w,maxVertexUniforms:I,maxVaryings:P,maxFragmentUniforms:D,maxSamples:z,samples:k}}function Die(n){const e=this;let t=null,i=0,r=!1,a=!1;const s=new Qf,o=new Nn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(p,v){const y=p.length!==0||v||i!==0||r;return r=v,i=p.length,y},this.beginShadows=function(){a=!0,h(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(p,v){t=h(p,v,0)},this.setState=function(p,v,y){const _=p.clippingPlanes,E=p.clipIntersection,S=p.clipShadows,w=n.get(p);if(!r||_===null||_.length===0||a&&!S)a?h(null):f();else{const I=a?0:i,P=I*4;let D=w.clippingState||null;c.value=D,D=h(_,v,P,y);for(let z=0;z!==P;++z)D[z]=t[z];w.clippingState=D,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=I}};function f(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(p,v,y,_){const E=p!==null?p.length:0;let S=null;if(E!==0){if(S=c.value,_!==!0||S===null){const w=y+E*4,I=v.matrixWorldInverse;o.getNormalMatrix(I),(S===null||S.length<w)&&(S=new Float32Array(w));for(let P=0,D=y;P!==E;++P,D+=4)s.copy(p[P]).applyMatrix4(I,o),s.normal.toArray(S,D),S[D+3]=s.constant}c.value=S,c.needsUpdate=!0}return e.numPlanes=E,e.numIntersection=0,S}}function Lie(n){let e=new WeakMap;function t(s,o){return o===D_?s.mapping=Zu:o===L_&&(s.mapping=ip),s}function i(s){if(s&&s.isTexture){const o=s.mapping;if(o===D_||o===L_)if(e.has(s)){const c=e.get(s).texture;return t(c,s.mapping)}else{const c=s.image;if(c&&c.height>0){const f=new _3(c.height);return f.fromEquirectangularTexture(n,s),e.set(s,f),s.addEventListener("dispose",r),t(f.texture,s.mapping)}else return null}}return s}function r(s){const o=s.target;o.removeEventListener("dispose",r);const c=e.get(o);c!==void 0&&(e.delete(o),c.dispose())}function a(){e=new WeakMap}return{get:i,dispose:a}}const qd=4,F4=[.125,.215,.35,.446,.526,.582],Nm=20,kie=256,Wb=new ch,z4=new Bt;let KI=null,ZI=0,QI=0,JI=!1;const Uie=new ce;class EN{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,i=.1,r=100,a={}){const{size:s=256,position:o=Uie}=a;KI=this._renderer.getRenderTarget(),ZI=this._renderer.getActiveCubeFace(),QI=this._renderer.getActiveMipmapLevel(),JI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,i,r,c,o),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=j4(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=V4(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(KI,ZI,QI),this._renderer.xr.enabled=JI,e.scissorTest=!1,$0(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Zu||e.mapping===ip?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),KI=this._renderer.getRenderTarget(),ZI=this._renderer.getActiveCubeFace(),QI=this._renderer.getActiveMipmapLevel(),JI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:ir,minFilter:ir,generateMipmaps:!1,type:Qu,format:Is,colorSpace:rp,depthBuffer:!1},r=B4(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=B4(e,t,i);const{_lodMax:a}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=Fie(a)),this._blurMaterial=Bie(a,e,t),this._ggxMaterial=zie(a,e,t)}return r}_compileMaterial(e){const t=new sa(new Sn,e);this._renderer.compile(t,Wb)}_sceneToCubeUV(e,t,i,r,a){const c=new Gr(90,1,t,i),f=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],p=this._renderer,v=p.autoClear,y=p.toneMapping;p.getClearColor(z4),p.toneMapping=Zl,p.autoClear=!1,p.state.buffers.depth.getReversed()&&(p.setRenderTarget(r),p.clearDepth(),p.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new sa(new Eg,new vp({name:"PMREM.Background",side:io,depthWrite:!1,depthTest:!1})));const E=this._backgroundBox,S=E.material;let w=!1;const I=e.background;I?I.isColor&&(S.color.copy(I),e.background=null,w=!0):(S.color.copy(z4),w=!0);for(let P=0;P<6;P++){const D=P%3;D===0?(c.up.set(0,f[P],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x+h[P],a.y,a.z)):D===1?(c.up.set(0,0,f[P]),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y+h[P],a.z)):(c.up.set(0,f[P],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y,a.z+h[P]));const z=this._cubeSize;$0(r,D*z,P>2?z:0,z,z),p.setRenderTarget(r),w&&p.render(E,c),p.render(e,c)}p.toneMapping=y,p.autoClear=v,e.background=I}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Zu||e.mapping===ip;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=j4()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=V4());const a=r?this._cubemapMaterial:this._equirectMaterial,s=this._lodMeshes[0];s.material=a;const o=a.uniforms;o.envMap.value=e;const c=this._cubeSize;$0(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(s,Wb)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodMeshes.length;for(let a=1;a<r;a++)this._applyGGXFilter(e,a-1,a);t.autoClear=i}_applyGGXFilter(e,t,i){const r=this._renderer,a=this._pingPongRenderTarget,s=this._ggxMaterial,o=this._lodMeshes[i];o.material=s;const c=s.uniforms,f=i/(this._lodMeshes.length-1),h=t/(this._lodMeshes.length-1),p=Math.sqrt(f*f-h*h),v=0+f*1.25,y=p*v,{_lodMax:_}=this,E=this._sizeLods[i],S=3*E*(i>_-qd?i-_+qd:0),w=4*(this._cubeSize-E);c.envMap.value=e.texture,c.roughness.value=y,c.mipInt.value=_-t,$0(a,S,w,3*E,2*E),r.setRenderTarget(a),r.render(o,Wb),c.envMap.value=a.texture,c.roughness.value=0,c.mipInt.value=_-i,$0(e,S,w,3*E,2*E),r.setRenderTarget(e),r.render(o,Wb)}_blur(e,t,i,r,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",a),this._halfBlur(s,e,i,i,r,"longitudinal",a)}_halfBlur(e,t,i,r,a,s,o){const c=this._renderer,f=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&tn("blur direction must be either latitudinal or longitudinal!");const h=3,p=this._lodMeshes[r];p.material=f;const v=f.uniforms,y=this._sizeLods[i]-1,_=isFinite(a)?Math.PI/(2*y):2*Math.PI/(2*Nm-1),E=a/_,S=isFinite(a)?1+Math.floor(h*E):Nm;S>Nm&&Dt(`sigmaRadians, ${a}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${Nm}`);const w=[];let I=0;for(let U=0;U<Nm;++U){const R=U/E,M=Math.exp(-R*R/2);w.push(M),U===0?I+=M:U<S&&(I+=2*M)}for(let U=0;U<w.length;U++)w[U]=w[U]/I;v.envMap.value=e.texture,v.samples.value=S,v.weights.value=w,v.latitudinal.value=s==="latitudinal",o&&(v.poleAxis.value=o);const{_lodMax:P}=this;v.dTheta.value=_,v.mipInt.value=P-i;const D=this._sizeLods[r],z=3*D*(r>P-qd?r-P+qd:0),k=4*(this._cubeSize-D);$0(t,z,k,3*D,2*D),c.setRenderTarget(t),c.render(p,Wb)}}function Fie(n){const e=[],t=[],i=[];let r=n;const a=n-qd+1+F4.length;for(let s=0;s<a;s++){const o=Math.pow(2,r);e.push(o);let c=1/o;s>n-qd?c=F4[s-n+qd-1]:s===0&&(c=0),t.push(c);const f=1/(o-2),h=-f,p=1+f,v=[h,h,p,h,p,p,h,h,p,p,h,p],y=6,_=6,E=3,S=2,w=1,I=new Float32Array(E*_*y),P=new Float32Array(S*_*y),D=new Float32Array(w*_*y);for(let k=0;k<y;k++){const U=k%3*2/3-1,R=k>2?0:-1,M=[U,R,0,U+2/3,R,0,U+2/3,R+1,0,U,R,0,U+2/3,R+1,0,U,R+1,0];I.set(M,E*_*k),P.set(v,S*_*k);const L=[k,k,k,k,k,k];D.set(L,w*_*k)}const z=new Sn;z.setAttribute("position",new yi(I,E)),z.setAttribute("uv",new yi(P,S)),z.setAttribute("faceIndex",new yi(D,w)),i.push(new sa(z,null)),r>qd&&r--}return{lodMeshes:i,sizeLods:e,sigmas:t}}function B4(n,e,t){const i=new ul(n,e,t);return i.texture.mapping=Qv,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function $0(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function zie(n,e,t){return new Jl({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:kie,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:mM(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Gu,depthTest:!1,depthWrite:!1})}function Bie(n,e,t){const i=new Float32Array(Nm),r=new ce(0,1,0);return new Jl({name:"SphericalGaussianBlur",defines:{n:Nm,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:mM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Gu,depthTest:!1,depthWrite:!1})}function V4(){return new Jl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:mM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Gu,depthTest:!1,depthWrite:!1})}function j4(){return new Jl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:mM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Gu,depthTest:!1,depthWrite:!1})}function mM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Vie(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const c=o.mapping,f=c===D_||c===L_,h=c===Zu||c===ip;if(f||h){let p=e.get(o);const v=p!==void 0?p.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==v)return t===null&&(t=new EN(n)),p=f?t.fromEquirectangular(o,p):t.fromCubemap(o,p),p.texture.pmremVersion=o.pmremVersion,e.set(o,p),p.texture;if(p!==void 0)return p.texture;{const y=o.image;return f&&y&&y.height>0||h&&y&&r(y)?(t===null&&(t=new EN(n)),p=f?t.fromEquirectangular(o):t.fromCubemap(o),p.texture.pmremVersion=o.pmremVersion,e.set(o,p),o.addEventListener("dispose",a),p.texture):null}}}return o}function r(o){let c=0;const f=6;for(let h=0;h<f;h++)o[h]!==void 0&&c++;return c===f}function a(o){const c=o.target;c.removeEventListener("dispose",a);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:s}}function jie(n){const e={};function t(i){if(e[i]!==void 0)return e[i];const r=n.getExtension(i);return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&Iv("WebGLRenderer: "+i+" extension not supported."),r}}}function Hie(n,e,t,i){const r={},a=new WeakMap;function s(p){const v=p.target;v.index!==null&&e.remove(v.index);for(const _ in v.attributes)e.remove(v.attributes[_]);v.removeEventListener("dispose",s),delete r[v.id];const y=a.get(v);y&&(e.remove(y),a.delete(v)),i.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function o(p,v){return r[v.id]===!0||(v.addEventListener("dispose",s),r[v.id]=!0,t.memory.geometries++),v}function c(p){const v=p.attributes;for(const y in v)e.update(v[y],n.ARRAY_BUFFER)}function f(p){const v=[],y=p.index,_=p.attributes.position;let E=0;if(y!==null){const I=y.array;E=y.version;for(let P=0,D=I.length;P<D;P+=3){const z=I[P+0],k=I[P+1],U=I[P+2];v.push(z,k,k,U,U,z)}}else if(_!==void 0){const I=_.array;E=_.version;for(let P=0,D=I.length/3-1;P<D;P+=3){const z=P+0,k=P+1,U=P+2;v.push(z,k,k,U,U,z)}}else return;const S=new(jj(v)?b3:y3)(v,1);S.version=E;const w=a.get(p);w&&e.remove(w),a.set(p,S)}function h(p){const v=a.get(p);if(v){const y=p.index;y!==null&&v.version<y.version&&f(p)}else f(p);return a.get(p)}return{get:o,update:c,getWireframeAttribute:h}}function Gie(n,e,t){let i;function r(v){i=v}let a,s;function o(v){a=v.type,s=v.bytesPerElement}function c(v,y){n.drawElements(i,y,a,v*s),t.update(y,i,1)}function f(v,y,_){_!==0&&(n.drawElementsInstanced(i,y,a,v*s,_),t.update(y,i,_))}function h(v,y,_){if(_===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,y,0,a,v,0,_);let S=0;for(let w=0;w<_;w++)S+=y[w];t.update(S,i,1)}function p(v,y,_,E){if(_===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let w=0;w<v.length;w++)f(v[w]/s,y[w],E[w]);else{S.multiDrawElementsInstancedWEBGL(i,y,0,a,v,0,E,0,_);let w=0;for(let I=0;I<_;I++)w+=y[I]*E[I];t.update(w,i,1)}}this.setMode=r,this.setIndex=o,this.render=c,this.renderInstances=f,this.renderMultiDraw=h,this.renderMultiDrawInstances=p}function Wie(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,s,o){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=o*(a/3);break;case n.LINES:t.lines+=o*(a/2);break;case n.LINE_STRIP:t.lines+=o*(a-1);break;case n.LINE_LOOP:t.lines+=o*a;break;case n.POINTS:t.points+=o*a;break;default:tn("WebGLInfo: Unknown draw mode:",s);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function qie(n,e,t){const i=new WeakMap,r=new Fi;function a(s,o,c){const f=s.morphTargetInfluences,h=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,p=h!==void 0?h.length:0;let v=i.get(o);if(v===void 0||v.count!==p){let L=function(){R.dispose(),i.delete(o),o.removeEventListener("dispose",L)};var y=L;v!==void 0&&v.texture.dispose();const _=o.morphAttributes.position!==void 0,E=o.morphAttributes.normal!==void 0,S=o.morphAttributes.color!==void 0,w=o.morphAttributes.position||[],I=o.morphAttributes.normal||[],P=o.morphAttributes.color||[];let D=0;_===!0&&(D=1),E===!0&&(D=2),S===!0&&(D=3);let z=o.attributes.position.count*D,k=1;z>e.maxTextureSize&&(k=Math.ceil(z/e.maxTextureSize),z=e.maxTextureSize);const U=new Float32Array(z*k*4*p),R=new qA(U,z,k,p);R.type=eo,R.needsUpdate=!0;const M=D*4;for(let B=0;B<p;B++){const V=w[B],j=I[B],Z=P[B],J=z*k*4*B;for(let G=0;G<V.count;G++){const $=G*M;_===!0&&(r.fromBufferAttribute(V,G),U[J+$+0]=r.x,U[J+$+1]=r.y,U[J+$+2]=r.z,U[J+$+3]=0),E===!0&&(r.fromBufferAttribute(j,G),U[J+$+4]=r.x,U[J+$+5]=r.y,U[J+$+6]=r.z,U[J+$+7]=0),S===!0&&(r.fromBufferAttribute(Z,G),U[J+$+8]=r.x,U[J+$+9]=r.y,U[J+$+10]=r.z,U[J+$+11]=Z.itemSize===4?r.w:1)}}v={count:p,texture:R,size:new rt(z,k)},i.set(o,v),o.addEventListener("dispose",L)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let _=0;for(let S=0;S<f.length;S++)_+=f[S];const E=o.morphTargetsRelative?1:1-_;c.getUniforms().setValue(n,"morphTargetBaseInfluence",E),c.getUniforms().setValue(n,"morphTargetInfluences",f)}c.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}return{update:a}}function $ie(n,e,t,i){let r=new WeakMap;function a(c){const f=i.render.frame,h=c.geometry,p=e.get(c,h);if(r.get(p)!==f&&(e.update(p),r.set(p,f)),c.isInstancedMesh&&(c.hasEventListener("dispose",o)===!1&&c.addEventListener("dispose",o),r.get(c)!==f&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,f))),c.isSkinnedMesh){const v=c.skeleton;r.get(v)!==f&&(v.update(),r.set(v,f))}return p}function s(){r=new WeakMap}function o(c){const f=c.target;f.removeEventListener("dispose",o),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:a,dispose:s}}const Xie={[n3]:"LINEAR_TONE_MAPPING",[i3]:"REINHARD_TONE_MAPPING",[r3]:"CINEON_TONE_MAPPING",[LA]:"ACES_FILMIC_TONE_MAPPING",[s3]:"AGX_TONE_MAPPING",[o3]:"NEUTRAL_TONE_MAPPING",[a3]:"CUSTOM_TONE_MAPPING"};function Yie(n,e,t,i,r){const a=new ul(e,t,{type:n,depthBuffer:i,stencilBuffer:r}),s=new ul(e,t,{type:Qu,depthBuffer:!1,stencilBuffer:!1}),o=new Sn;o.setAttribute("position",new Gt([-1,3,0,-1,-1,0,3,-1,0],3)),o.setAttribute("uv",new Gt([0,2,0,0,2,0],2));const c=new N3({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),f=new sa(o,c),h=new ch(-1,1,1,-1,0,1);let p=null,v=null,y=!1,_,E=null,S=[],w=!1;this.setSize=function(I,P){a.setSize(I,P),s.setSize(I,P);for(let D=0;D<S.length;D++){const z=S[D];z.setSize&&z.setSize(I,P)}},this.setEffects=function(I){S=I,w=S.length>0&&S[0].isRenderPass===!0;const P=a.width,D=a.height;for(let z=0;z<S.length;z++){const k=S[z];k.setSize&&k.setSize(P,D)}},this.begin=function(I,P){if(y||I.toneMapping===Zl&&S.length===0)return!1;if(E=P,P!==null){const D=P.width,z=P.height;(a.width!==D||a.height!==z)&&this.setSize(D,z)}return w===!1&&I.setRenderTarget(a),_=I.toneMapping,I.toneMapping=Zl,!0},this.hasRenderPass=function(){return w},this.end=function(I,P){I.toneMapping=_,y=!0;let D=a,z=s;for(let k=0;k<S.length;k++){const U=S[k];if(U.enabled!==!1&&(U.render(I,z,D,P),U.needsSwap!==!1)){const R=D;D=z,z=R}}if(p!==I.outputColorSpace||v!==I.toneMapping){p=I.outputColorSpace,v=I.toneMapping,c.defines={},Qn.getTransfer(p)===Si&&(c.defines.SRGB_TRANSFER="");const k=Xie[v];k&&(c.defines[k]=""),c.needsUpdate=!0}c.uniforms.tDiffuse.value=D.texture,I.setRenderTarget(E),I.render(f,h),E=null,y=!1},this.isCompositing=function(){return y},this.dispose=function(){a.dispose(),s.dispose(),o.dispose(),c.dispose()}}const $8=new Nr,TN=new Dv(1,1),X8=new qA,Y8=new $A,K8=new Ix,H4=[],G4=[],W4=new Float32Array(16),q4=new Float32Array(9),$4=new Float32Array(4);function ty(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let a=H4[r];if(a===void 0&&(a=new Float32Array(r),H4[r]=a),e!==0){i.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=t,n[s].toArray(a,o)}return a}function va(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function ya(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function gM(n,e){let t=G4[e];t===void 0&&(t=new Int32Array(e),G4[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Kie(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Zie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(va(t,e))return;n.uniform2fv(this.addr,e),ya(t,e)}}function Qie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(va(t,e))return;n.uniform3fv(this.addr,e),ya(t,e)}}function Jie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(va(t,e))return;n.uniform4fv(this.addr,e),ya(t,e)}}function ere(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(va(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ya(t,e)}else{if(va(t,i))return;$4.set(i),n.uniformMatrix2fv(this.addr,!1,$4),ya(t,i)}}function tre(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(va(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ya(t,e)}else{if(va(t,i))return;q4.set(i),n.uniformMatrix3fv(this.addr,!1,q4),ya(t,i)}}function nre(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(va(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ya(t,e)}else{if(va(t,i))return;W4.set(i),n.uniformMatrix4fv(this.addr,!1,W4),ya(t,i)}}function ire(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function rre(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(va(t,e))return;n.uniform2iv(this.addr,e),ya(t,e)}}function are(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(va(t,e))return;n.uniform3iv(this.addr,e),ya(t,e)}}function sre(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(va(t,e))return;n.uniform4iv(this.addr,e),ya(t,e)}}function ore(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function lre(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(va(t,e))return;n.uniform2uiv(this.addr,e),ya(t,e)}}function cre(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(va(t,e))return;n.uniform3uiv(this.addr,e),ya(t,e)}}function ure(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(va(t,e))return;n.uniform4uiv(this.addr,e),ya(t,e)}}function fre(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let a;this.type===n.SAMPLER_2D_SHADOW?(TN.compareFunction=t.isReversedDepthBuffer()?WA:GA,a=TN):a=$8,t.setTexture2D(e||a,r)}function hre(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||Y8,r)}function dre(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||K8,r)}function pre(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||X8,r)}function mre(n){switch(n){case 5126:return Kie;case 35664:return Zie;case 35665:return Qie;case 35666:return Jie;case 35674:return ere;case 35675:return tre;case 35676:return nre;case 5124:case 35670:return ire;case 35667:case 35671:return rre;case 35668:case 35672:return are;case 35669:case 35673:return sre;case 5125:return ore;case 36294:return lre;case 36295:return cre;case 36296:return ure;case 35678:case 36198:case 36298:case 36306:case 35682:return fre;case 35679:case 36299:case 36307:return hre;case 35680:case 36300:case 36308:case 36293:return dre;case 36289:case 36303:case 36311:case 36292:return pre}}function gre(n,e){n.uniform1fv(this.addr,e)}function vre(n,e){const t=ty(e,this.size,2);n.uniform2fv(this.addr,t)}function yre(n,e){const t=ty(e,this.size,3);n.uniform3fv(this.addr,t)}function bre(n,e){const t=ty(e,this.size,4);n.uniform4fv(this.addr,t)}function _re(n,e){const t=ty(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function xre(n,e){const t=ty(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Sre(n,e){const t=ty(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function wre(n,e){n.uniform1iv(this.addr,e)}function Ere(n,e){n.uniform2iv(this.addr,e)}function Tre(n,e){n.uniform3iv(this.addr,e)}function Are(n,e){n.uniform4iv(this.addr,e)}function Mre(n,e){n.uniform1uiv(this.addr,e)}function Cre(n,e){n.uniform2uiv(this.addr,e)}function Ire(n,e){n.uniform3uiv(this.addr,e)}function Rre(n,e){n.uniform4uiv(this.addr,e)}function Pre(n,e,t){const i=this.cache,r=e.length,a=gM(t,r);va(i,a)||(n.uniform1iv(this.addr,a),ya(i,a));let s;this.type===n.SAMPLER_2D_SHADOW?s=TN:s=$8;for(let o=0;o!==r;++o)t.setTexture2D(e[o]||s,a[o])}function Nre(n,e,t){const i=this.cache,r=e.length,a=gM(t,r);va(i,a)||(n.uniform1iv(this.addr,a),ya(i,a));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||Y8,a[s])}function Ore(n,e,t){const i=this.cache,r=e.length,a=gM(t,r);va(i,a)||(n.uniform1iv(this.addr,a),ya(i,a));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||K8,a[s])}function Dre(n,e,t){const i=this.cache,r=e.length,a=gM(t,r);va(i,a)||(n.uniform1iv(this.addr,a),ya(i,a));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||X8,a[s])}function Lre(n){switch(n){case 5126:return gre;case 35664:return vre;case 35665:return yre;case 35666:return bre;case 35674:return _re;case 35675:return xre;case 35676:return Sre;case 5124:case 35670:return wre;case 35667:case 35671:return Ere;case 35668:case 35672:return Tre;case 35669:case 35673:return Are;case 5125:return Mre;case 36294:return Cre;case 36295:return Ire;case 36296:return Rre;case 35678:case 36198:case 36298:case 36306:case 35682:return Pre;case 35679:case 36299:case 36307:return Nre;case 35680:case 36300:case 36308:case 36293:return Ore;case 36289:case 36303:case 36311:case 36292:return Dre}}class kre{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=mre(t.type)}}class Ure{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Lre(t.type)}}class Fre{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let a=0,s=r.length;a!==s;++a){const o=r[a];o.setValue(e,t[o.id],i)}}}const eR=/(\w+)(\])?(\[|\.)?/g;function X4(n,e){n.seq.push(e),n.map[e.id]=e}function zre(n,e,t){const i=n.name,r=i.length;for(eR.lastIndex=0;;){const a=eR.exec(i),s=eR.lastIndex;let o=a[1];const c=a[2]==="]",f=a[3];if(c&&(o=o|0),f===void 0||f==="["&&s+2===r){X4(t,f===void 0?new kre(o,n,e):new Ure(o,n,e));break}else{let p=t.map[o];p===void 0&&(p=new Fre(o),X4(t,p)),t=p}}}class Qw{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const o=e.getActiveUniform(t,s),c=e.getUniformLocation(t,o.name);zre(o,c,this)}const r=[],a=[];for(const s of this.seq)s.type===e.SAMPLER_2D_SHADOW||s.type===e.SAMPLER_CUBE_SHADOW||s.type===e.SAMPLER_2D_ARRAY_SHADOW?r.push(s):a.push(s);r.length>0&&(this.seq=r.concat(a))}setValue(e,t,i,r){const a=this.map[t];a!==void 0&&a.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let a=0,s=t.length;a!==s;++a){const o=t[a],c=i[o.id];c.needsUpdate!==!1&&o.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,a=e.length;r!==a;++r){const s=e[r];s.id in t&&i.push(s)}return i}}function Y4(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const Bre=37297;let Vre=0;function jre(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let s=r;s<a;s++){const o=s+1;i.push(`${o===e?">":" "} ${o}: ${t[s]}`)}return i.join(`
`)}const K4=new Nn;function Hre(n){Qn._getMatrix(K4,Qn.workingColorSpace,n);const e=`mat3( ${K4.elements.map(t=>t.toFixed(4))} )`;switch(Qn.getTransfer(n)){case B_:return[e,"LinearTransferOETF"];case Si:return[e,"sRGBTransferOETF"];default:return Dt("WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function Z4(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),a=(n.getShaderInfoLog(e)||"").trim();if(i&&a==="")return"";const s=/ERROR: 0:(\d+)/.exec(a);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+a+`

`+jre(n.getShaderSource(e),o)}else return a}function Gre(n,e){const t=Hre(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}const Wre={[n3]:"Linear",[i3]:"Reinhard",[r3]:"Cineon",[LA]:"ACESFilmic",[s3]:"AgX",[o3]:"Neutral",[a3]:"Custom"};function qre(n,e){const t=Wre[e];return t===void 0?(Dt("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+n+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const yw=new ce;function $re(){Qn.getLuminanceCoefficients(yw);const n=yw.x.toFixed(4),e=yw.y.toFixed(4),t=yw.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Xre(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(s_).join(`
`)}function Yre(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Kre(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const a=n.getActiveAttrib(e,r),s=a.name;let o=1;a.type===n.FLOAT_MAT2&&(o=2),a.type===n.FLOAT_MAT3&&(o=3),a.type===n.FLOAT_MAT4&&(o=4),t[s]={type:a.type,location:n.getAttribLocation(e,s),locationSize:o}}return t}function s_(n){return n!==""}function Q4(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function J4(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Zre=/^[ \t]*#include +<([\w\d./]+)>/gm;function AN(n){return n.replace(Zre,Jre)}const Qre=new Map;function Jre(n,e){let t=zn[e];if(t===void 0){const i=Qre.get(e);if(i!==void 0)t=zn[i],Dt('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return AN(t)}const eae=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function e2(n){return n.replace(eae,tae)}function tae(n,e,t,i){let r="";for(let a=parseInt(e);a<parseInt(t);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function t2(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const nae={[mv]:"SHADOWMAP_TYPE_PCF",[Om]:"SHADOWMAP_TYPE_VSM"};function iae(n){return nae[n.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const rae={[Zu]:"ENVMAP_TYPE_CUBE",[ip]:"ENVMAP_TYPE_CUBE",[Qv]:"ENVMAP_TYPE_CUBE_UV"};function aae(n){return n.envMap===!1?"ENVMAP_TYPE_CUBE":rae[n.envMapMode]||"ENVMAP_TYPE_CUBE"}const sae={[ip]:"ENVMAP_MODE_REFRACTION"};function oae(n){return n.envMap===!1?"ENVMAP_MODE_REFLECTION":sae[n.envMapMode]||"ENVMAP_MODE_REFLECTION"}const lae={[Mx]:"ENVMAP_BLENDING_MULTIPLY",[Cj]:"ENVMAP_BLENDING_MIX",[Ij]:"ENVMAP_BLENDING_ADD"};function cae(n){return n.envMap===!1?"ENVMAP_BLENDING_NONE":lae[n.combine]||"ENVMAP_BLENDING_NONE"}function uae(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function fae(n,e,t,i){const r=n.getContext(),a=t.defines;let s=t.vertexShader,o=t.fragmentShader;const c=iae(t),f=aae(t),h=oae(t),p=cae(t),v=uae(t),y=Xre(t),_=Yre(a),E=r.createProgram();let S,w,I=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(s_).join(`
`),S.length>0&&(S+=`
`),w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(s_).join(`
`),w.length>0&&(w+=`
`)):(S=[t2(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(s_).join(`
`),w=[t2(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+h:"",t.envMap?"#define "+p:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Zl?"#define TONE_MAPPING":"",t.toneMapping!==Zl?zn.tonemapping_pars_fragment:"",t.toneMapping!==Zl?qre("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",zn.colorspace_pars_fragment,Gre("linearToOutputTexel",t.outputColorSpace),$re(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(s_).join(`
`)),s=AN(s),s=Q4(s,t),s=J4(s,t),o=AN(o),o=Q4(o,t),o=J4(o,t),s=e2(s),o=e2(o),t.isRawShaderMaterial!==!0&&(I=`#version 300 es
`,S=[y,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,w=["#define varying in",t.glslVersion===mN?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===mN?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const P=I+S+s,D=I+w+o,z=Y4(r,r.VERTEX_SHADER,P),k=Y4(r,r.FRAGMENT_SHADER,D);r.attachShader(E,z),r.attachShader(E,k),t.index0AttributeName!==void 0?r.bindAttribLocation(E,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(E,0,"position"),r.linkProgram(E);function U(B){if(n.debug.checkShaderErrors){const V=r.getProgramInfoLog(E)||"",j=r.getShaderInfoLog(z)||"",Z=r.getShaderInfoLog(k)||"",J=V.trim(),G=j.trim(),$=Z.trim();let ae=!0,le=!0;if(r.getProgramParameter(E,r.LINK_STATUS)===!1)if(ae=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,E,z,k);else{const ue=Z4(r,z,"vertex"),Q=Z4(r,k,"fragment");tn("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(E,r.VALIDATE_STATUS)+`

Material Name: `+B.name+`
Material Type: `+B.type+`

Program Info Log: `+J+`
`+ue+`
`+Q)}else J!==""?Dt("WebGLProgram: Program Info Log:",J):(G===""||$==="")&&(le=!1);le&&(B.diagnostics={runnable:ae,programLog:J,vertexShader:{log:G,prefix:S},fragmentShader:{log:$,prefix:w}})}r.deleteShader(z),r.deleteShader(k),R=new Qw(r,E),M=Kre(r,E)}let R;this.getUniforms=function(){return R===void 0&&U(this),R};let M;this.getAttributes=function(){return M===void 0&&U(this),M};let L=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=r.getProgramParameter(E,Bre)),L},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(E),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Vre++,this.cacheKey=e,this.usedTimes=1,this.program=E,this.vertexShader=z,this.fragmentShader=k,this}let hae=0;class dae{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),a=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new pae(e),t.set(e,i)),i}}class pae{constructor(e){this.id=hae++,this.code=e,this.usedTimes=0}}function mae(n,e,t,i,r,a,s){const o=new Pv,c=new dae,f=new Set,h=[],p=new Map,v=r.logarithmicDepthBuffer;let y=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E(M){return f.add(M),M===0?"uv":`uv${M}`}function S(M,L,B,V,j){const Z=V.fog,J=j.geometry,G=M.isMeshStandardMaterial?V.environment:null,$=(M.isMeshStandardMaterial?t:e).get(M.envMap||G),ae=$&&$.mapping===Qv?$.image.height:null,le=_[M.type];M.precision!==null&&(y=r.getMaxPrecision(M.precision),y!==M.precision&&Dt("WebGLProgram.getParameters:",M.precision,"not supported, using",y,"instead."));const ue=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,Q=ue!==void 0?ue.length:0;let re=0;J.morphAttributes.position!==void 0&&(re=1),J.morphAttributes.normal!==void 0&&(re=2),J.morphAttributes.color!==void 0&&(re=3);let ye,de,xe,ve;if(le){const Qt=Nc[le];ye=Qt.vertexShader,de=Qt.fragmentShader}else ye=M.vertexShader,de=M.fragmentShader,c.update(M),xe=c.getVertexShaderID(M),ve=c.getFragmentShaderID(M);const Te=n.getRenderTarget(),Ze=n.state.buffers.depth.getReversed(),be=j.isInstancedMesh===!0,Ve=j.isBatchedMesh===!0,vt=!!M.map,Ie=!!M.matcap,It=!!$,Ne=!!M.aoMap,je=!!M.lightMap,Le=!!M.bumpMap,Qe=!!M.normalMap,oe=!!M.displacementMap,_t=!!M.emissiveMap,tt=!!M.metalnessMap,wt=!!M.roughnessMap,at=M.anisotropy>0,ne=M.clearcoat>0,Y=M.dispersion>0,me=M.iridescence>0,Ue=M.sheen>0,qe=M.transmission>0,De=at&&!!M.anisotropyMap,Mt=ne&&!!M.clearcoatMap,ct=ne&&!!M.clearcoatNormalMap,At=ne&&!!M.clearcoatRoughnessMap,Ut=me&&!!M.iridescenceMap,et=me&&!!M.iridescenceThicknessMap,st=Ue&&!!M.sheenColorMap,Et=Ue&&!!M.sheenRoughnessMap,fe=!!M.specularMap,Pe=!!M.specularColorMap,xt=!!M.specularIntensityMap,pe=qe&&!!M.transmissionMap,ut=qe&&!!M.thicknessMap,ft=!!M.gradientMap,lt=!!M.alphaMap,nt=M.alphaTest>0,Ke=!!M.alphaHash,ht=!!M.extensions;let Wt=Zl;M.toneMapped&&(Te===null||Te.isXRRenderTarget===!0)&&(Wt=n.toneMapping);const rn={shaderID:le,shaderType:M.type,shaderName:M.name,vertexShader:ye,fragmentShader:de,defines:M.defines,customVertexShaderID:xe,customFragmentShaderID:ve,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:y,batching:Ve,batchingColor:Ve&&j._colorsTexture!==null,instancing:be,instancingColor:be&&j.instanceColor!==null,instancingMorph:be&&j.morphTexture!==null,outputColorSpace:Te===null?n.outputColorSpace:Te.isXRRenderTarget===!0?Te.texture.colorSpace:rp,alphaToCoverage:!!M.alphaToCoverage,map:vt,matcap:Ie,envMap:It,envMapMode:It&&$.mapping,envMapCubeUVHeight:ae,aoMap:Ne,lightMap:je,bumpMap:Le,normalMap:Qe,displacementMap:oe,emissiveMap:_t,normalMapObjectSpace:Qe&&M.normalMapType===Lj,normalMapTangentSpace:Qe&&M.normalMapType===gp,metalnessMap:tt,roughnessMap:wt,anisotropy:at,anisotropyMap:De,clearcoat:ne,clearcoatMap:Mt,clearcoatNormalMap:ct,clearcoatRoughnessMap:At,dispersion:Y,iridescence:me,iridescenceMap:Ut,iridescenceThicknessMap:et,sheen:Ue,sheenColorMap:st,sheenRoughnessMap:Et,specularMap:fe,specularColorMap:Pe,specularIntensityMap:xt,transmission:qe,transmissionMap:pe,thicknessMap:ut,gradientMap:ft,opaque:M.transparent===!1&&M.blending===Wm&&M.alphaToCoverage===!1,alphaMap:lt,alphaTest:nt,alphaHash:Ke,combine:M.combine,mapUv:vt&&E(M.map.channel),aoMapUv:Ne&&E(M.aoMap.channel),lightMapUv:je&&E(M.lightMap.channel),bumpMapUv:Le&&E(M.bumpMap.channel),normalMapUv:Qe&&E(M.normalMap.channel),displacementMapUv:oe&&E(M.displacementMap.channel),emissiveMapUv:_t&&E(M.emissiveMap.channel),metalnessMapUv:tt&&E(M.metalnessMap.channel),roughnessMapUv:wt&&E(M.roughnessMap.channel),anisotropyMapUv:De&&E(M.anisotropyMap.channel),clearcoatMapUv:Mt&&E(M.clearcoatMap.channel),clearcoatNormalMapUv:ct&&E(M.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:At&&E(M.clearcoatRoughnessMap.channel),iridescenceMapUv:Ut&&E(M.iridescenceMap.channel),iridescenceThicknessMapUv:et&&E(M.iridescenceThicknessMap.channel),sheenColorMapUv:st&&E(M.sheenColorMap.channel),sheenRoughnessMapUv:Et&&E(M.sheenRoughnessMap.channel),specularMapUv:fe&&E(M.specularMap.channel),specularColorMapUv:Pe&&E(M.specularColorMap.channel),specularIntensityMapUv:xt&&E(M.specularIntensityMap.channel),transmissionMapUv:pe&&E(M.transmissionMap.channel),thicknessMapUv:ut&&E(M.thicknessMap.channel),alphaMapUv:lt&&E(M.alphaMap.channel),vertexTangents:!!J.attributes.tangent&&(Qe||at),vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!J.attributes.color&&J.attributes.color.itemSize===4,pointsUvs:j.isPoints===!0&&!!J.attributes.uv&&(vt||lt),fog:!!Z,useFog:M.fog===!0,fogExp2:!!Z&&Z.isFogExp2,flatShading:M.flatShading===!0&&M.wireframe===!1,sizeAttenuation:M.sizeAttenuation===!0,logarithmicDepthBuffer:v,reversedDepthBuffer:Ze,skinning:j.isSkinnedMesh===!0,morphTargets:J.morphAttributes.position!==void 0,morphNormals:J.morphAttributes.normal!==void 0,morphColors:J.morphAttributes.color!==void 0,morphTargetsCount:Q,morphTextureStride:re,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:M.dithering,shadowMapEnabled:n.shadowMap.enabled&&B.length>0,shadowMapType:n.shadowMap.type,toneMapping:Wt,decodeVideoTexture:vt&&M.map.isVideoTexture===!0&&Qn.getTransfer(M.map.colorSpace)===Si,decodeVideoTextureEmissive:_t&&M.emissiveMap.isVideoTexture===!0&&Qn.getTransfer(M.emissiveMap.colorSpace)===Si,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===ku,flipSided:M.side===io,useDepthPacking:M.depthPacking>=0,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionClipCullDistance:ht&&M.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ht&&M.extensions.multiDraw===!0||Ve)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:M.customProgramCacheKey()};return rn.vertexUv1s=f.has(1),rn.vertexUv2s=f.has(2),rn.vertexUv3s=f.has(3),f.clear(),rn}function w(M){const L=[];if(M.shaderID?L.push(M.shaderID):(L.push(M.customVertexShaderID),L.push(M.customFragmentShaderID)),M.defines!==void 0)for(const B in M.defines)L.push(B),L.push(M.defines[B]);return M.isRawShaderMaterial===!1&&(I(L,M),P(L,M),L.push(n.outputColorSpace)),L.push(M.customProgramCacheKey),L.join()}function I(M,L){M.push(L.precision),M.push(L.outputColorSpace),M.push(L.envMapMode),M.push(L.envMapCubeUVHeight),M.push(L.mapUv),M.push(L.alphaMapUv),M.push(L.lightMapUv),M.push(L.aoMapUv),M.push(L.bumpMapUv),M.push(L.normalMapUv),M.push(L.displacementMapUv),M.push(L.emissiveMapUv),M.push(L.metalnessMapUv),M.push(L.roughnessMapUv),M.push(L.anisotropyMapUv),M.push(L.clearcoatMapUv),M.push(L.clearcoatNormalMapUv),M.push(L.clearcoatRoughnessMapUv),M.push(L.iridescenceMapUv),M.push(L.iridescenceThicknessMapUv),M.push(L.sheenColorMapUv),M.push(L.sheenRoughnessMapUv),M.push(L.specularMapUv),M.push(L.specularColorMapUv),M.push(L.specularIntensityMapUv),M.push(L.transmissionMapUv),M.push(L.thicknessMapUv),M.push(L.combine),M.push(L.fogExp2),M.push(L.sizeAttenuation),M.push(L.morphTargetsCount),M.push(L.morphAttributeCount),M.push(L.numDirLights),M.push(L.numPointLights),M.push(L.numSpotLights),M.push(L.numSpotLightMaps),M.push(L.numHemiLights),M.push(L.numRectAreaLights),M.push(L.numDirLightShadows),M.push(L.numPointLightShadows),M.push(L.numSpotLightShadows),M.push(L.numSpotLightShadowsWithMaps),M.push(L.numLightProbes),M.push(L.shadowMapType),M.push(L.toneMapping),M.push(L.numClippingPlanes),M.push(L.numClipIntersection),M.push(L.depthPacking)}function P(M,L){o.disableAll(),L.instancing&&o.enable(0),L.instancingColor&&o.enable(1),L.instancingMorph&&o.enable(2),L.matcap&&o.enable(3),L.envMap&&o.enable(4),L.normalMapObjectSpace&&o.enable(5),L.normalMapTangentSpace&&o.enable(6),L.clearcoat&&o.enable(7),L.iridescence&&o.enable(8),L.alphaTest&&o.enable(9),L.vertexColors&&o.enable(10),L.vertexAlphas&&o.enable(11),L.vertexUv1s&&o.enable(12),L.vertexUv2s&&o.enable(13),L.vertexUv3s&&o.enable(14),L.vertexTangents&&o.enable(15),L.anisotropy&&o.enable(16),L.alphaHash&&o.enable(17),L.batching&&o.enable(18),L.dispersion&&o.enable(19),L.batchingColor&&o.enable(20),L.gradientMap&&o.enable(21),M.push(o.mask),o.disableAll(),L.fog&&o.enable(0),L.useFog&&o.enable(1),L.flatShading&&o.enable(2),L.logarithmicDepthBuffer&&o.enable(3),L.reversedDepthBuffer&&o.enable(4),L.skinning&&o.enable(5),L.morphTargets&&o.enable(6),L.morphNormals&&o.enable(7),L.morphColors&&o.enable(8),L.premultipliedAlpha&&o.enable(9),L.shadowMapEnabled&&o.enable(10),L.doubleSided&&o.enable(11),L.flipSided&&o.enable(12),L.useDepthPacking&&o.enable(13),L.dithering&&o.enable(14),L.transmission&&o.enable(15),L.sheen&&o.enable(16),L.opaque&&o.enable(17),L.pointsUvs&&o.enable(18),L.decodeVideoTexture&&o.enable(19),L.decodeVideoTextureEmissive&&o.enable(20),L.alphaToCoverage&&o.enable(21),M.push(o.mask)}function D(M){const L=_[M.type];let B;if(L){const V=Nc[L];B=Yj.clone(V.uniforms)}else B=M.uniforms;return B}function z(M,L){let B=p.get(L);return B!==void 0?++B.usedTimes:(B=new fae(n,L,M,a),h.push(B),p.set(L,B)),B}function k(M){if(--M.usedTimes===0){const L=h.indexOf(M);h[L]=h[h.length-1],h.pop(),p.delete(M.cacheKey),M.destroy()}}function U(M){c.remove(M)}function R(){c.dispose()}return{getParameters:S,getProgramCacheKey:w,getUniforms:D,acquireProgram:z,releaseProgram:k,releaseShaderCache:U,programs:h,dispose:R}}function gae(){let n=new WeakMap;function e(s){return n.has(s)}function t(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function i(s){n.delete(s)}function r(s,o,c){n.get(s)[o]=c}function a(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:a}}function vae(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function n2(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function i2(){const n=[];let e=0;const t=[],i=[],r=[];function a(){e=0,t.length=0,i.length=0,r.length=0}function s(p,v,y,_,E,S){let w=n[e];return w===void 0?(w={id:p.id,object:p,geometry:v,material:y,groupOrder:_,renderOrder:p.renderOrder,z:E,group:S},n[e]=w):(w.id=p.id,w.object=p,w.geometry=v,w.material=y,w.groupOrder=_,w.renderOrder=p.renderOrder,w.z=E,w.group=S),e++,w}function o(p,v,y,_,E,S){const w=s(p,v,y,_,E,S);y.transmission>0?i.push(w):y.transparent===!0?r.push(w):t.push(w)}function c(p,v,y,_,E,S){const w=s(p,v,y,_,E,S);y.transmission>0?i.unshift(w):y.transparent===!0?r.unshift(w):t.unshift(w)}function f(p,v){t.length>1&&t.sort(p||vae),i.length>1&&i.sort(v||n2),r.length>1&&r.sort(v||n2)}function h(){for(let p=e,v=n.length;p<v;p++){const y=n[p];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:i,transparent:r,init:a,push:o,unshift:c,finish:h,sort:f}}function yae(){let n=new WeakMap;function e(i,r){const a=n.get(i);let s;return a===void 0?(s=new i2,n.set(i,[s])):r>=a.length?(s=new i2,a.push(s)):s=a[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function bae(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ce,color:new Bt};break;case"SpotLight":t={position:new ce,direction:new ce,color:new Bt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ce,color:new Bt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ce,skyColor:new Bt,groundColor:new Bt};break;case"RectAreaLight":t={color:new Bt,position:new ce,halfWidth:new ce,halfHeight:new ce};break}return n[e.id]=t,t}}}function _ae(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let xae=0;function Sae(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function wae(n){const e=new bae,t=_ae(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)i.probe.push(new ce);const r=new ce,a=new bn,s=new bn;function o(f){let h=0,p=0,v=0;for(let M=0;M<9;M++)i.probe[M].set(0,0,0);let y=0,_=0,E=0,S=0,w=0,I=0,P=0,D=0,z=0,k=0,U=0;f.sort(Sae);for(let M=0,L=f.length;M<L;M++){const B=f[M],V=B.color,j=B.intensity,Z=B.distance;let J=null;if(B.shadow&&B.shadow.map&&(B.shadow.map.texture.format===ig?J=B.shadow.map.texture:J=B.shadow.map.depthTexture||B.shadow.map.texture),B.isAmbientLight)h+=V.r*j,p+=V.g*j,v+=V.b*j;else if(B.isLightProbe){for(let G=0;G<9;G++)i.probe[G].addScaledVector(B.sh.coefficients[G],j);U++}else if(B.isDirectionalLight){const G=e.get(B);if(G.color.copy(B.color).multiplyScalar(B.intensity),B.castShadow){const $=B.shadow,ae=t.get(B);ae.shadowIntensity=$.intensity,ae.shadowBias=$.bias,ae.shadowNormalBias=$.normalBias,ae.shadowRadius=$.radius,ae.shadowMapSize=$.mapSize,i.directionalShadow[y]=ae,i.directionalShadowMap[y]=J,i.directionalShadowMatrix[y]=B.shadow.matrix,I++}i.directional[y]=G,y++}else if(B.isSpotLight){const G=e.get(B);G.position.setFromMatrixPosition(B.matrixWorld),G.color.copy(V).multiplyScalar(j),G.distance=Z,G.coneCos=Math.cos(B.angle),G.penumbraCos=Math.cos(B.angle*(1-B.penumbra)),G.decay=B.decay,i.spot[E]=G;const $=B.shadow;if(B.map&&(i.spotLightMap[z]=B.map,z++,$.updateMatrices(B),B.castShadow&&k++),i.spotLightMatrix[E]=$.matrix,B.castShadow){const ae=t.get(B);ae.shadowIntensity=$.intensity,ae.shadowBias=$.bias,ae.shadowNormalBias=$.normalBias,ae.shadowRadius=$.radius,ae.shadowMapSize=$.mapSize,i.spotShadow[E]=ae,i.spotShadowMap[E]=J,D++}E++}else if(B.isRectAreaLight){const G=e.get(B);G.color.copy(V).multiplyScalar(j),G.halfWidth.set(B.width*.5,0,0),G.halfHeight.set(0,B.height*.5,0),i.rectArea[S]=G,S++}else if(B.isPointLight){const G=e.get(B);if(G.color.copy(B.color).multiplyScalar(B.intensity),G.distance=B.distance,G.decay=B.decay,B.castShadow){const $=B.shadow,ae=t.get(B);ae.shadowIntensity=$.intensity,ae.shadowBias=$.bias,ae.shadowNormalBias=$.normalBias,ae.shadowRadius=$.radius,ae.shadowMapSize=$.mapSize,ae.shadowCameraNear=$.camera.near,ae.shadowCameraFar=$.camera.far,i.pointShadow[_]=ae,i.pointShadowMap[_]=J,i.pointShadowMatrix[_]=B.shadow.matrix,P++}i.point[_]=G,_++}else if(B.isHemisphereLight){const G=e.get(B);G.skyColor.copy(B.color).multiplyScalar(j),G.groundColor.copy(B.groundColor).multiplyScalar(j),i.hemi[w]=G,w++}}S>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=kt.LTC_FLOAT_1,i.rectAreaLTC2=kt.LTC_FLOAT_2):(i.rectAreaLTC1=kt.LTC_HALF_1,i.rectAreaLTC2=kt.LTC_HALF_2)),i.ambient[0]=h,i.ambient[1]=p,i.ambient[2]=v;const R=i.hash;(R.directionalLength!==y||R.pointLength!==_||R.spotLength!==E||R.rectAreaLength!==S||R.hemiLength!==w||R.numDirectionalShadows!==I||R.numPointShadows!==P||R.numSpotShadows!==D||R.numSpotMaps!==z||R.numLightProbes!==U)&&(i.directional.length=y,i.spot.length=E,i.rectArea.length=S,i.point.length=_,i.hemi.length=w,i.directionalShadow.length=I,i.directionalShadowMap.length=I,i.pointShadow.length=P,i.pointShadowMap.length=P,i.spotShadow.length=D,i.spotShadowMap.length=D,i.directionalShadowMatrix.length=I,i.pointShadowMatrix.length=P,i.spotLightMatrix.length=D+z-k,i.spotLightMap.length=z,i.numSpotLightShadowsWithMaps=k,i.numLightProbes=U,R.directionalLength=y,R.pointLength=_,R.spotLength=E,R.rectAreaLength=S,R.hemiLength=w,R.numDirectionalShadows=I,R.numPointShadows=P,R.numSpotShadows=D,R.numSpotMaps=z,R.numLightProbes=U,i.version=xae++)}function c(f,h){let p=0,v=0,y=0,_=0,E=0;const S=h.matrixWorldInverse;for(let w=0,I=f.length;w<I;w++){const P=f[w];if(P.isDirectionalLight){const D=i.directional[p];D.direction.setFromMatrixPosition(P.matrixWorld),r.setFromMatrixPosition(P.target.matrixWorld),D.direction.sub(r),D.direction.transformDirection(S),p++}else if(P.isSpotLight){const D=i.spot[y];D.position.setFromMatrixPosition(P.matrixWorld),D.position.applyMatrix4(S),D.direction.setFromMatrixPosition(P.matrixWorld),r.setFromMatrixPosition(P.target.matrixWorld),D.direction.sub(r),D.direction.transformDirection(S),y++}else if(P.isRectAreaLight){const D=i.rectArea[_];D.position.setFromMatrixPosition(P.matrixWorld),D.position.applyMatrix4(S),s.identity(),a.copy(P.matrixWorld),a.premultiply(S),s.extractRotation(a),D.halfWidth.set(P.width*.5,0,0),D.halfHeight.set(0,P.height*.5,0),D.halfWidth.applyMatrix4(s),D.halfHeight.applyMatrix4(s),_++}else if(P.isPointLight){const D=i.point[v];D.position.setFromMatrixPosition(P.matrixWorld),D.position.applyMatrix4(S),v++}else if(P.isHemisphereLight){const D=i.hemi[E];D.direction.setFromMatrixPosition(P.matrixWorld),D.direction.transformDirection(S),E++}}}return{setup:o,setupView:c,state:i}}function r2(n){const e=new wae(n),t=[],i=[];function r(h){f.camera=h,t.length=0,i.length=0}function a(h){t.push(h)}function s(h){i.push(h)}function o(){e.setup(t)}function c(h){e.setupView(t,h)}const f={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:f,setupLights:o,setupLightsView:c,pushLight:a,pushShadow:s}}function Eae(n){let e=new WeakMap;function t(r,a=0){const s=e.get(r);let o;return s===void 0?(o=new r2(n),e.set(r,[o])):a>=s.length?(o=new r2(n),s.push(o)):o=s[a],o}function i(){e=new WeakMap}return{get:t,dispose:i}}const Tae=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Aae=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,Mae=[new ce(1,0,0),new ce(-1,0,0),new ce(0,1,0),new ce(0,-1,0),new ce(0,0,1),new ce(0,0,-1)],Cae=[new ce(0,-1,0),new ce(0,-1,0),new ce(0,0,1),new ce(0,0,-1),new ce(0,-1,0),new ce(0,-1,0)],a2=new bn,qb=new ce,tR=new ce;function Iae(n,e,t){let i=new Jv;const r=new rt,a=new rt,s=new Fi,o=new D3,c=new L3,f={},h=t.maxTextureSize,p={[hh]:io,[io]:hh,[ku]:ku},v=new Jl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new rt},radius:{value:4}},vertexShader:Tae,fragmentShader:Aae}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const _=new Sn;_.setAttribute("position",new yi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new sa(_,v),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=mv;let w=this.type;this.render=function(k,U,R){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||k.length===0)return;k.type===p_&&(Dt("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),k.type=mv);const M=n.getRenderTarget(),L=n.getActiveCubeFace(),B=n.getActiveMipmapLevel(),V=n.state;V.setBlending(Gu),V.buffers.depth.getReversed()===!0?V.buffers.color.setClear(0,0,0,0):V.buffers.color.setClear(1,1,1,1),V.buffers.depth.setTest(!0),V.setScissorTest(!1);const j=w!==this.type;j&&U.traverse(function(Z){Z.material&&(Array.isArray(Z.material)?Z.material.forEach(J=>J.needsUpdate=!0):Z.material.needsUpdate=!0)});for(let Z=0,J=k.length;Z<J;Z++){const G=k[Z],$=G.shadow;if($===void 0){Dt("WebGLShadowMap:",G,"has no shadow.");continue}if($.autoUpdate===!1&&$.needsUpdate===!1)continue;r.copy($.mapSize);const ae=$.getFrameExtents();if(r.multiply(ae),a.copy($.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(a.x=Math.floor(h/ae.x),r.x=a.x*ae.x,$.mapSize.x=a.x),r.y>h&&(a.y=Math.floor(h/ae.y),r.y=a.y*ae.y,$.mapSize.y=a.y)),$.map===null||j===!0){if($.map!==null&&($.map.depthTexture!==null&&($.map.depthTexture.dispose(),$.map.depthTexture=null),$.map.dispose()),this.type===Om){if(G.isPointLight){Dt("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}$.map=new ul(r.x,r.y,{format:ig,type:Qu,minFilter:ir,magFilter:ir,generateMipmaps:!1}),$.map.texture.name=G.name+".shadowMap",$.map.depthTexture=new Dv(r.x,r.y,eo),$.map.depthTexture.name=G.name+".shadowMapDepth",$.map.depthTexture.format=Ju,$.map.depthTexture.compareFunction=null,$.map.depthTexture.minFilter=Wr,$.map.depthTexture.magFilter=Wr}else{G.isPointLight?($.map=new _3(r.x),$.map.depthTexture=new s8(r.x,Ql)):($.map=new ul(r.x,r.y),$.map.depthTexture=new Dv(r.x,r.y,Ql)),$.map.depthTexture.name=G.name+".shadowMap",$.map.depthTexture.format=Ju;const ue=n.state.buffers.depth.getReversed();this.type===mv?($.map.depthTexture.compareFunction=ue?WA:GA,$.map.depthTexture.minFilter=ir,$.map.depthTexture.magFilter=ir):($.map.depthTexture.compareFunction=null,$.map.depthTexture.minFilter=Wr,$.map.depthTexture.magFilter=Wr)}$.camera.updateProjectionMatrix()}const le=$.map.isWebGLCubeRenderTarget?6:1;for(let ue=0;ue<le;ue++){if($.map.isWebGLCubeRenderTarget)n.setRenderTarget($.map,ue),n.clear();else{ue===0&&(n.setRenderTarget($.map),n.clear());const Q=$.getViewport(ue);s.set(a.x*Q.x,a.y*Q.y,a.x*Q.z,a.y*Q.w),V.viewport(s)}if(G.isPointLight){const Q=$.camera,re=$.matrix,ye=G.distance||Q.far;ye!==Q.far&&(Q.far=ye,Q.updateProjectionMatrix()),qb.setFromMatrixPosition(G.matrixWorld),Q.position.copy(qb),tR.copy(Q.position),tR.add(Mae[ue]),Q.up.copy(Cae[ue]),Q.lookAt(tR),Q.updateMatrixWorld(),re.makeTranslation(-qb.x,-qb.y,-qb.z),a2.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),$._frustum.setFromProjectionMatrix(a2,Q.coordinateSystem,Q.reversedDepth)}else $.updateMatrices(G);i=$.getFrustum(),D(U,R,$.camera,G,this.type)}$.isPointLightShadow!==!0&&this.type===Om&&I($,R),$.needsUpdate=!1}w=this.type,S.needsUpdate=!1,n.setRenderTarget(M,L,B)};function I(k,U){const R=e.update(E);v.defines.VSM_SAMPLES!==k.blurSamples&&(v.defines.VSM_SAMPLES=k.blurSamples,y.defines.VSM_SAMPLES=k.blurSamples,v.needsUpdate=!0,y.needsUpdate=!0),k.mapPass===null&&(k.mapPass=new ul(r.x,r.y,{format:ig,type:Qu})),v.uniforms.shadow_pass.value=k.map.depthTexture,v.uniforms.resolution.value=k.mapSize,v.uniforms.radius.value=k.radius,n.setRenderTarget(k.mapPass),n.clear(),n.renderBufferDirect(U,null,R,v,E,null),y.uniforms.shadow_pass.value=k.mapPass.texture,y.uniforms.resolution.value=k.mapSize,y.uniforms.radius.value=k.radius,n.setRenderTarget(k.map),n.clear(),n.renderBufferDirect(U,null,R,y,E,null)}function P(k,U,R,M){let L=null;const B=R.isPointLight===!0?k.customDistanceMaterial:k.customDepthMaterial;if(B!==void 0)L=B;else if(L=R.isPointLight===!0?c:o,n.localClippingEnabled&&U.clipShadows===!0&&Array.isArray(U.clippingPlanes)&&U.clippingPlanes.length!==0||U.displacementMap&&U.displacementScale!==0||U.alphaMap&&U.alphaTest>0||U.map&&U.alphaTest>0||U.alphaToCoverage===!0){const V=L.uuid,j=U.uuid;let Z=f[V];Z===void 0&&(Z={},f[V]=Z);let J=Z[j];J===void 0&&(J=L.clone(),Z[j]=J,U.addEventListener("dispose",z)),L=J}if(L.visible=U.visible,L.wireframe=U.wireframe,M===Om?L.side=U.shadowSide!==null?U.shadowSide:U.side:L.side=U.shadowSide!==null?U.shadowSide:p[U.side],L.alphaMap=U.alphaMap,L.alphaTest=U.alphaToCoverage===!0?.5:U.alphaTest,L.map=U.map,L.clipShadows=U.clipShadows,L.clippingPlanes=U.clippingPlanes,L.clipIntersection=U.clipIntersection,L.displacementMap=U.displacementMap,L.displacementScale=U.displacementScale,L.displacementBias=U.displacementBias,L.wireframeLinewidth=U.wireframeLinewidth,L.linewidth=U.linewidth,R.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const V=n.properties.get(L);V.light=R}return L}function D(k,U,R,M,L){if(k.visible===!1)return;if(k.layers.test(U.layers)&&(k.isMesh||k.isLine||k.isPoints)&&(k.castShadow||k.receiveShadow&&L===Om)&&(!k.frustumCulled||i.intersectsObject(k))){k.modelViewMatrix.multiplyMatrices(R.matrixWorldInverse,k.matrixWorld);const j=e.update(k),Z=k.material;if(Array.isArray(Z)){const J=j.groups;for(let G=0,$=J.length;G<$;G++){const ae=J[G],le=Z[ae.materialIndex];if(le&&le.visible){const ue=P(k,le,M,L);k.onBeforeShadow(n,k,U,R,j,ue,ae),n.renderBufferDirect(R,null,j,ue,k,ae),k.onAfterShadow(n,k,U,R,j,ue,ae)}}}else if(Z.visible){const J=P(k,Z,M,L);k.onBeforeShadow(n,k,U,R,j,J,null),n.renderBufferDirect(R,null,j,J,k,null),k.onAfterShadow(n,k,U,R,j,J,null)}}const V=k.children;for(let j=0,Z=V.length;j<Z;j++)D(V[j],U,R,M,L)}function z(k){k.target.removeEventListener("dispose",z);for(const R in f){const M=f[R],L=k.target.uuid;L in M&&(M[L].dispose(),delete M[L])}}}const Rae={[xE]:SE,[wE]:AE,[EE]:ME,[ng]:TE,[SE]:xE,[AE]:wE,[ME]:EE,[TE]:ng};function Pae(n,e){function t(){let pe=!1;const ut=new Fi;let ft=null;const lt=new Fi(0,0,0,0);return{setMask:function(nt){ft!==nt&&!pe&&(n.colorMask(nt,nt,nt,nt),ft=nt)},setLocked:function(nt){pe=nt},setClear:function(nt,Ke,ht,Wt,rn){rn===!0&&(nt*=Wt,Ke*=Wt,ht*=Wt),ut.set(nt,Ke,ht,Wt),lt.equals(ut)===!1&&(n.clearColor(nt,Ke,ht,Wt),lt.copy(ut))},reset:function(){pe=!1,ft=null,lt.set(-1,0,0,0)}}}function i(){let pe=!1,ut=!1,ft=null,lt=null,nt=null;return{setReversed:function(Ke){if(ut!==Ke){const ht=e.get("EXT_clip_control");Ke?ht.clipControlEXT(ht.LOWER_LEFT_EXT,ht.ZERO_TO_ONE_EXT):ht.clipControlEXT(ht.LOWER_LEFT_EXT,ht.NEGATIVE_ONE_TO_ONE_EXT),ut=Ke;const Wt=nt;nt=null,this.setClear(Wt)}},getReversed:function(){return ut},setTest:function(Ke){Ke?Te(n.DEPTH_TEST):Ze(n.DEPTH_TEST)},setMask:function(Ke){ft!==Ke&&!pe&&(n.depthMask(Ke),ft=Ke)},setFunc:function(Ke){if(ut&&(Ke=Rae[Ke]),lt!==Ke){switch(Ke){case xE:n.depthFunc(n.NEVER);break;case SE:n.depthFunc(n.ALWAYS);break;case wE:n.depthFunc(n.LESS);break;case ng:n.depthFunc(n.LEQUAL);break;case EE:n.depthFunc(n.EQUAL);break;case TE:n.depthFunc(n.GEQUAL);break;case AE:n.depthFunc(n.GREATER);break;case ME:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}lt=Ke}},setLocked:function(Ke){pe=Ke},setClear:function(Ke){nt!==Ke&&(ut&&(Ke=1-Ke),n.clearDepth(Ke),nt=Ke)},reset:function(){pe=!1,ft=null,lt=null,nt=null,ut=!1}}}function r(){let pe=!1,ut=null,ft=null,lt=null,nt=null,Ke=null,ht=null,Wt=null,rn=null;return{setTest:function(Qt){pe||(Qt?Te(n.STENCIL_TEST):Ze(n.STENCIL_TEST))},setMask:function(Qt){ut!==Qt&&!pe&&(n.stencilMask(Qt),ut=Qt)},setFunc:function(Qt,Ei,Bi){(ft!==Qt||lt!==Ei||nt!==Bi)&&(n.stencilFunc(Qt,Ei,Bi),ft=Qt,lt=Ei,nt=Bi)},setOp:function(Qt,Ei,Bi){(Ke!==Qt||ht!==Ei||Wt!==Bi)&&(n.stencilOp(Qt,Ei,Bi),Ke=Qt,ht=Ei,Wt=Bi)},setLocked:function(Qt){pe=Qt},setClear:function(Qt){rn!==Qt&&(n.clearStencil(Qt),rn=Qt)},reset:function(){pe=!1,ut=null,ft=null,lt=null,nt=null,Ke=null,ht=null,Wt=null,rn=null}}}const a=new t,s=new i,o=new r,c=new WeakMap,f=new WeakMap;let h={},p={},v=new WeakMap,y=[],_=null,E=!1,S=null,w=null,I=null,P=null,D=null,z=null,k=null,U=new Bt(0,0,0),R=0,M=!1,L=null,B=null,V=null,j=null,Z=null;const J=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let G=!1,$=0;const ae=n.getParameter(n.VERSION);ae.indexOf("WebGL")!==-1?($=parseFloat(/^WebGL (\d)/.exec(ae)[1]),G=$>=1):ae.indexOf("OpenGL ES")!==-1&&($=parseFloat(/^OpenGL ES (\d)/.exec(ae)[1]),G=$>=2);let le=null,ue={};const Q=n.getParameter(n.SCISSOR_BOX),re=n.getParameter(n.VIEWPORT),ye=new Fi().fromArray(Q),de=new Fi().fromArray(re);function xe(pe,ut,ft,lt){const nt=new Uint8Array(4),Ke=n.createTexture();n.bindTexture(pe,Ke),n.texParameteri(pe,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(pe,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let ht=0;ht<ft;ht++)pe===n.TEXTURE_3D||pe===n.TEXTURE_2D_ARRAY?n.texImage3D(ut,0,n.RGBA,1,1,lt,0,n.RGBA,n.UNSIGNED_BYTE,nt):n.texImage2D(ut+ht,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,nt);return Ke}const ve={};ve[n.TEXTURE_2D]=xe(n.TEXTURE_2D,n.TEXTURE_2D,1),ve[n.TEXTURE_CUBE_MAP]=xe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ve[n.TEXTURE_2D_ARRAY]=xe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ve[n.TEXTURE_3D]=xe(n.TEXTURE_3D,n.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Te(n.DEPTH_TEST),s.setFunc(ng),Le(!1),Qe(cN),Te(n.CULL_FACE),Ne(Gu);function Te(pe){h[pe]!==!0&&(n.enable(pe),h[pe]=!0)}function Ze(pe){h[pe]!==!1&&(n.disable(pe),h[pe]=!1)}function be(pe,ut){return p[pe]!==ut?(n.bindFramebuffer(pe,ut),p[pe]=ut,pe===n.DRAW_FRAMEBUFFER&&(p[n.FRAMEBUFFER]=ut),pe===n.FRAMEBUFFER&&(p[n.DRAW_FRAMEBUFFER]=ut),!0):!1}function Ve(pe,ut){let ft=y,lt=!1;if(pe){ft=v.get(ut),ft===void 0&&(ft=[],v.set(ut,ft));const nt=pe.textures;if(ft.length!==nt.length||ft[0]!==n.COLOR_ATTACHMENT0){for(let Ke=0,ht=nt.length;Ke<ht;Ke++)ft[Ke]=n.COLOR_ATTACHMENT0+Ke;ft.length=nt.length,lt=!0}}else ft[0]!==n.BACK&&(ft[0]=n.BACK,lt=!0);lt&&n.drawBuffers(ft)}function vt(pe){return _!==pe?(n.useProgram(pe),_=pe,!0):!1}const Ie={[kd]:n.FUNC_ADD,[fj]:n.FUNC_SUBTRACT,[hj]:n.FUNC_REVERSE_SUBTRACT};Ie[dj]=n.MIN,Ie[pj]=n.MAX;const It={[mj]:n.ZERO,[gj]:n.ONE,[vj]:n.SRC_COLOR,[bE]:n.SRC_ALPHA,[wj]:n.SRC_ALPHA_SATURATE,[xj]:n.DST_COLOR,[bj]:n.DST_ALPHA,[yj]:n.ONE_MINUS_SRC_COLOR,[_E]:n.ONE_MINUS_SRC_ALPHA,[Sj]:n.ONE_MINUS_DST_COLOR,[_j]:n.ONE_MINUS_DST_ALPHA,[Ej]:n.CONSTANT_COLOR,[Tj]:n.ONE_MINUS_CONSTANT_COLOR,[Aj]:n.CONSTANT_ALPHA,[Mj]:n.ONE_MINUS_CONSTANT_ALPHA};function Ne(pe,ut,ft,lt,nt,Ke,ht,Wt,rn,Qt){if(pe===Gu){E===!0&&(Ze(n.BLEND),E=!1);return}if(E===!1&&(Te(n.BLEND),E=!0),pe!==uj){if(pe!==S||Qt!==M){if((w!==kd||D!==kd)&&(n.blendEquation(n.FUNC_ADD),w=kd,D=kd),Qt)switch(pe){case Wm:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case uN:n.blendFunc(n.ONE,n.ONE);break;case fN:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case hN:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:tn("WebGLState: Invalid blending: ",pe);break}else switch(pe){case Wm:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case uN:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case fN:tn("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case hN:tn("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:tn("WebGLState: Invalid blending: ",pe);break}I=null,P=null,z=null,k=null,U.set(0,0,0),R=0,S=pe,M=Qt}return}nt=nt||ut,Ke=Ke||ft,ht=ht||lt,(ut!==w||nt!==D)&&(n.blendEquationSeparate(Ie[ut],Ie[nt]),w=ut,D=nt),(ft!==I||lt!==P||Ke!==z||ht!==k)&&(n.blendFuncSeparate(It[ft],It[lt],It[Ke],It[ht]),I=ft,P=lt,z=Ke,k=ht),(Wt.equals(U)===!1||rn!==R)&&(n.blendColor(Wt.r,Wt.g,Wt.b,rn),U.copy(Wt),R=rn),S=pe,M=!1}function je(pe,ut){pe.side===ku?Ze(n.CULL_FACE):Te(n.CULL_FACE);let ft=pe.side===io;ut&&(ft=!ft),Le(ft),pe.blending===Wm&&pe.transparent===!1?Ne(Gu):Ne(pe.blending,pe.blendEquation,pe.blendSrc,pe.blendDst,pe.blendEquationAlpha,pe.blendSrcAlpha,pe.blendDstAlpha,pe.blendColor,pe.blendAlpha,pe.premultipliedAlpha),s.setFunc(pe.depthFunc),s.setTest(pe.depthTest),s.setMask(pe.depthWrite),a.setMask(pe.colorWrite);const lt=pe.stencilWrite;o.setTest(lt),lt&&(o.setMask(pe.stencilWriteMask),o.setFunc(pe.stencilFunc,pe.stencilRef,pe.stencilFuncMask),o.setOp(pe.stencilFail,pe.stencilZFail,pe.stencilZPass)),_t(pe.polygonOffset,pe.polygonOffsetFactor,pe.polygonOffsetUnits),pe.alphaToCoverage===!0?Te(n.SAMPLE_ALPHA_TO_COVERAGE):Ze(n.SAMPLE_ALPHA_TO_COVERAGE)}function Le(pe){L!==pe&&(pe?n.frontFace(n.CW):n.frontFace(n.CCW),L=pe)}function Qe(pe){pe!==oj?(Te(n.CULL_FACE),pe!==B&&(pe===cN?n.cullFace(n.BACK):pe===lj?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ze(n.CULL_FACE),B=pe}function oe(pe){pe!==V&&(G&&n.lineWidth(pe),V=pe)}function _t(pe,ut,ft){pe?(Te(n.POLYGON_OFFSET_FILL),(j!==ut||Z!==ft)&&(n.polygonOffset(ut,ft),j=ut,Z=ft)):Ze(n.POLYGON_OFFSET_FILL)}function tt(pe){pe?Te(n.SCISSOR_TEST):Ze(n.SCISSOR_TEST)}function wt(pe){pe===void 0&&(pe=n.TEXTURE0+J-1),le!==pe&&(n.activeTexture(pe),le=pe)}function at(pe,ut,ft){ft===void 0&&(le===null?ft=n.TEXTURE0+J-1:ft=le);let lt=ue[ft];lt===void 0&&(lt={type:void 0,texture:void 0},ue[ft]=lt),(lt.type!==pe||lt.texture!==ut)&&(le!==ft&&(n.activeTexture(ft),le=ft),n.bindTexture(pe,ut||ve[pe]),lt.type=pe,lt.texture=ut)}function ne(){const pe=ue[le];pe!==void 0&&pe.type!==void 0&&(n.bindTexture(pe.type,null),pe.type=void 0,pe.texture=void 0)}function Y(){try{n.compressedTexImage2D(...arguments)}catch(pe){tn("WebGLState:",pe)}}function me(){try{n.compressedTexImage3D(...arguments)}catch(pe){tn("WebGLState:",pe)}}function Ue(){try{n.texSubImage2D(...arguments)}catch(pe){tn("WebGLState:",pe)}}function qe(){try{n.texSubImage3D(...arguments)}catch(pe){tn("WebGLState:",pe)}}function De(){try{n.compressedTexSubImage2D(...arguments)}catch(pe){tn("WebGLState:",pe)}}function Mt(){try{n.compressedTexSubImage3D(...arguments)}catch(pe){tn("WebGLState:",pe)}}function ct(){try{n.texStorage2D(...arguments)}catch(pe){tn("WebGLState:",pe)}}function At(){try{n.texStorage3D(...arguments)}catch(pe){tn("WebGLState:",pe)}}function Ut(){try{n.texImage2D(...arguments)}catch(pe){tn("WebGLState:",pe)}}function et(){try{n.texImage3D(...arguments)}catch(pe){tn("WebGLState:",pe)}}function st(pe){ye.equals(pe)===!1&&(n.scissor(pe.x,pe.y,pe.z,pe.w),ye.copy(pe))}function Et(pe){de.equals(pe)===!1&&(n.viewport(pe.x,pe.y,pe.z,pe.w),de.copy(pe))}function fe(pe,ut){let ft=f.get(ut);ft===void 0&&(ft=new WeakMap,f.set(ut,ft));let lt=ft.get(pe);lt===void 0&&(lt=n.getUniformBlockIndex(ut,pe.name),ft.set(pe,lt))}function Pe(pe,ut){const lt=f.get(ut).get(pe);c.get(ut)!==lt&&(n.uniformBlockBinding(ut,lt,pe.__bindingPointIndex),c.set(ut,lt))}function xt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},le=null,ue={},p={},v=new WeakMap,y=[],_=null,E=!1,S=null,w=null,I=null,P=null,D=null,z=null,k=null,U=new Bt(0,0,0),R=0,M=!1,L=null,B=null,V=null,j=null,Z=null,ye.set(0,0,n.canvas.width,n.canvas.height),de.set(0,0,n.canvas.width,n.canvas.height),a.reset(),s.reset(),o.reset()}return{buffers:{color:a,depth:s,stencil:o},enable:Te,disable:Ze,bindFramebuffer:be,drawBuffers:Ve,useProgram:vt,setBlending:Ne,setMaterial:je,setFlipSided:Le,setCullFace:Qe,setLineWidth:oe,setPolygonOffset:_t,setScissorTest:tt,activeTexture:wt,bindTexture:at,unbindTexture:ne,compressedTexImage2D:Y,compressedTexImage3D:me,texImage2D:Ut,texImage3D:et,updateUBOMapping:fe,uniformBlockBinding:Pe,texStorage2D:ct,texStorage3D:At,texSubImage2D:Ue,texSubImage3D:qe,compressedTexSubImage2D:De,compressedTexSubImage3D:Mt,scissor:st,viewport:Et,reset:xt}}function Nae(n,e,t,i,r,a,s){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new rt,h=new WeakMap;let p;const v=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(ne,Y){return y?new OffscreenCanvas(ne,Y):j_("canvas")}function E(ne,Y,me){let Ue=1;const qe=at(ne);if((qe.width>me||qe.height>me)&&(Ue=me/Math.max(qe.width,qe.height)),Ue<1)if(typeof HTMLImageElement<"u"&&ne instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ne instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ne instanceof ImageBitmap||typeof VideoFrame<"u"&&ne instanceof VideoFrame){const De=Math.floor(Ue*qe.width),Mt=Math.floor(Ue*qe.height);p===void 0&&(p=_(De,Mt));const ct=Y?_(De,Mt):p;return ct.width=De,ct.height=Mt,ct.getContext("2d").drawImage(ne,0,0,De,Mt),Dt("WebGLRenderer: Texture has been resized from ("+qe.width+"x"+qe.height+") to ("+De+"x"+Mt+")."),ct}else return"data"in ne&&Dt("WebGLRenderer: Image in DataTexture is too big ("+qe.width+"x"+qe.height+")."),ne;return ne}function S(ne){return ne.generateMipmaps}function w(ne){n.generateMipmap(ne)}function I(ne){return ne.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:ne.isWebGL3DRenderTarget?n.TEXTURE_3D:ne.isWebGLArrayRenderTarget||ne.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function P(ne,Y,me,Ue,qe=!1){if(ne!==null){if(n[ne]!==void 0)return n[ne];Dt("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ne+"'")}let De=Y;if(Y===n.RED&&(me===n.FLOAT&&(De=n.R32F),me===n.HALF_FLOAT&&(De=n.R16F),me===n.UNSIGNED_BYTE&&(De=n.R8)),Y===n.RED_INTEGER&&(me===n.UNSIGNED_BYTE&&(De=n.R8UI),me===n.UNSIGNED_SHORT&&(De=n.R16UI),me===n.UNSIGNED_INT&&(De=n.R32UI),me===n.BYTE&&(De=n.R8I),me===n.SHORT&&(De=n.R16I),me===n.INT&&(De=n.R32I)),Y===n.RG&&(me===n.FLOAT&&(De=n.RG32F),me===n.HALF_FLOAT&&(De=n.RG16F),me===n.UNSIGNED_BYTE&&(De=n.RG8)),Y===n.RG_INTEGER&&(me===n.UNSIGNED_BYTE&&(De=n.RG8UI),me===n.UNSIGNED_SHORT&&(De=n.RG16UI),me===n.UNSIGNED_INT&&(De=n.RG32UI),me===n.BYTE&&(De=n.RG8I),me===n.SHORT&&(De=n.RG16I),me===n.INT&&(De=n.RG32I)),Y===n.RGB_INTEGER&&(me===n.UNSIGNED_BYTE&&(De=n.RGB8UI),me===n.UNSIGNED_SHORT&&(De=n.RGB16UI),me===n.UNSIGNED_INT&&(De=n.RGB32UI),me===n.BYTE&&(De=n.RGB8I),me===n.SHORT&&(De=n.RGB16I),me===n.INT&&(De=n.RGB32I)),Y===n.RGBA_INTEGER&&(me===n.UNSIGNED_BYTE&&(De=n.RGBA8UI),me===n.UNSIGNED_SHORT&&(De=n.RGBA16UI),me===n.UNSIGNED_INT&&(De=n.RGBA32UI),me===n.BYTE&&(De=n.RGBA8I),me===n.SHORT&&(De=n.RGBA16I),me===n.INT&&(De=n.RGBA32I)),Y===n.RGB&&(me===n.UNSIGNED_INT_5_9_9_9_REV&&(De=n.RGB9_E5),me===n.UNSIGNED_INT_10F_11F_11F_REV&&(De=n.R11F_G11F_B10F)),Y===n.RGBA){const Mt=qe?B_:Qn.getTransfer(Ue);me===n.FLOAT&&(De=n.RGBA32F),me===n.HALF_FLOAT&&(De=n.RGBA16F),me===n.UNSIGNED_BYTE&&(De=Mt===Si?n.SRGB8_ALPHA8:n.RGBA8),me===n.UNSIGNED_SHORT_4_4_4_4&&(De=n.RGBA4),me===n.UNSIGNED_SHORT_5_5_5_1&&(De=n.RGB5_A1)}return(De===n.R16F||De===n.R32F||De===n.RG16F||De===n.RG32F||De===n.RGBA16F||De===n.RGBA32F)&&e.get("EXT_color_buffer_float"),De}function D(ne,Y){let me;return ne?Y===null||Y===Ql||Y===Mv?me=n.DEPTH24_STENCIL8:Y===eo?me=n.DEPTH32F_STENCIL8:Y===Av&&(me=n.DEPTH24_STENCIL8,Dt("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Y===null||Y===Ql||Y===Mv?me=n.DEPTH_COMPONENT24:Y===eo?me=n.DEPTH_COMPONENT32F:Y===Av&&(me=n.DEPTH_COMPONENT16),me}function z(ne,Y){return S(ne)===!0||ne.isFramebufferTexture&&ne.minFilter!==Wr&&ne.minFilter!==ir?Math.log2(Math.max(Y.width,Y.height))+1:ne.mipmaps!==void 0&&ne.mipmaps.length>0?ne.mipmaps.length:ne.isCompressedTexture&&Array.isArray(ne.image)?Y.mipmaps.length:1}function k(ne){const Y=ne.target;Y.removeEventListener("dispose",k),R(Y),Y.isVideoTexture&&h.delete(Y)}function U(ne){const Y=ne.target;Y.removeEventListener("dispose",U),L(Y)}function R(ne){const Y=i.get(ne);if(Y.__webglInit===void 0)return;const me=ne.source,Ue=v.get(me);if(Ue){const qe=Ue[Y.__cacheKey];qe.usedTimes--,qe.usedTimes===0&&M(ne),Object.keys(Ue).length===0&&v.delete(me)}i.remove(ne)}function M(ne){const Y=i.get(ne);n.deleteTexture(Y.__webglTexture);const me=ne.source,Ue=v.get(me);delete Ue[Y.__cacheKey],s.memory.textures--}function L(ne){const Y=i.get(ne);if(ne.depthTexture&&(ne.depthTexture.dispose(),i.remove(ne.depthTexture)),ne.isWebGLCubeRenderTarget)for(let Ue=0;Ue<6;Ue++){if(Array.isArray(Y.__webglFramebuffer[Ue]))for(let qe=0;qe<Y.__webglFramebuffer[Ue].length;qe++)n.deleteFramebuffer(Y.__webglFramebuffer[Ue][qe]);else n.deleteFramebuffer(Y.__webglFramebuffer[Ue]);Y.__webglDepthbuffer&&n.deleteRenderbuffer(Y.__webglDepthbuffer[Ue])}else{if(Array.isArray(Y.__webglFramebuffer))for(let Ue=0;Ue<Y.__webglFramebuffer.length;Ue++)n.deleteFramebuffer(Y.__webglFramebuffer[Ue]);else n.deleteFramebuffer(Y.__webglFramebuffer);if(Y.__webglDepthbuffer&&n.deleteRenderbuffer(Y.__webglDepthbuffer),Y.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Y.__webglMultisampledFramebuffer),Y.__webglColorRenderbuffer)for(let Ue=0;Ue<Y.__webglColorRenderbuffer.length;Ue++)Y.__webglColorRenderbuffer[Ue]&&n.deleteRenderbuffer(Y.__webglColorRenderbuffer[Ue]);Y.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Y.__webglDepthRenderbuffer)}const me=ne.textures;for(let Ue=0,qe=me.length;Ue<qe;Ue++){const De=i.get(me[Ue]);De.__webglTexture&&(n.deleteTexture(De.__webglTexture),s.memory.textures--),i.remove(me[Ue])}i.remove(ne)}let B=0;function V(){B=0}function j(){const ne=B;return ne>=r.maxTextures&&Dt("WebGLTextures: Trying to use "+ne+" texture units while this GPU supports only "+r.maxTextures),B+=1,ne}function Z(ne){const Y=[];return Y.push(ne.wrapS),Y.push(ne.wrapT),Y.push(ne.wrapR||0),Y.push(ne.magFilter),Y.push(ne.minFilter),Y.push(ne.anisotropy),Y.push(ne.internalFormat),Y.push(ne.format),Y.push(ne.type),Y.push(ne.generateMipmaps),Y.push(ne.premultiplyAlpha),Y.push(ne.flipY),Y.push(ne.unpackAlignment),Y.push(ne.colorSpace),Y.join()}function J(ne,Y){const me=i.get(ne);if(ne.isVideoTexture&&tt(ne),ne.isRenderTargetTexture===!1&&ne.isExternalTexture!==!0&&ne.version>0&&me.__version!==ne.version){const Ue=ne.image;if(Ue===null)Dt("WebGLRenderer: Texture marked for update but no image data found.");else if(Ue.complete===!1)Dt("WebGLRenderer: Texture marked for update but image is incomplete");else{ve(me,ne,Y);return}}else ne.isExternalTexture&&(me.__webglTexture=ne.sourceTexture?ne.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,me.__webglTexture,n.TEXTURE0+Y)}function G(ne,Y){const me=i.get(ne);if(ne.isRenderTargetTexture===!1&&ne.version>0&&me.__version!==ne.version){ve(me,ne,Y);return}else ne.isExternalTexture&&(me.__webglTexture=ne.sourceTexture?ne.sourceTexture:null);t.bindTexture(n.TEXTURE_2D_ARRAY,me.__webglTexture,n.TEXTURE0+Y)}function $(ne,Y){const me=i.get(ne);if(ne.isRenderTargetTexture===!1&&ne.version>0&&me.__version!==ne.version){ve(me,ne,Y);return}t.bindTexture(n.TEXTURE_3D,me.__webglTexture,n.TEXTURE0+Y)}function ae(ne,Y){const me=i.get(ne);if(ne.isCubeDepthTexture!==!0&&ne.version>0&&me.__version!==ne.version){Te(me,ne,Y);return}t.bindTexture(n.TEXTURE_CUBE_MAP,me.__webglTexture,n.TEXTURE0+Y)}const le={[k_]:n.REPEAT,[Uo]:n.CLAMP_TO_EDGE,[U_]:n.MIRRORED_REPEAT},ue={[Wr]:n.NEAREST,[l3]:n.NEAREST_MIPMAP_NEAREST,[lv]:n.NEAREST_MIPMAP_LINEAR,[ir]:n.LINEAR,[m_]:n.LINEAR_MIPMAP_NEAREST,[zu]:n.LINEAR_MIPMAP_LINEAR},Q={[kj]:n.NEVER,[Vj]:n.ALWAYS,[Uj]:n.LESS,[GA]:n.LEQUAL,[Fj]:n.EQUAL,[WA]:n.GEQUAL,[zj]:n.GREATER,[Bj]:n.NOTEQUAL};function re(ne,Y){if(Y.type===eo&&e.has("OES_texture_float_linear")===!1&&(Y.magFilter===ir||Y.magFilter===m_||Y.magFilter===lv||Y.magFilter===zu||Y.minFilter===ir||Y.minFilter===m_||Y.minFilter===lv||Y.minFilter===zu)&&Dt("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(ne,n.TEXTURE_WRAP_S,le[Y.wrapS]),n.texParameteri(ne,n.TEXTURE_WRAP_T,le[Y.wrapT]),(ne===n.TEXTURE_3D||ne===n.TEXTURE_2D_ARRAY)&&n.texParameteri(ne,n.TEXTURE_WRAP_R,le[Y.wrapR]),n.texParameteri(ne,n.TEXTURE_MAG_FILTER,ue[Y.magFilter]),n.texParameteri(ne,n.TEXTURE_MIN_FILTER,ue[Y.minFilter]),Y.compareFunction&&(n.texParameteri(ne,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(ne,n.TEXTURE_COMPARE_FUNC,Q[Y.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Y.magFilter===Wr||Y.minFilter!==lv&&Y.minFilter!==zu||Y.type===eo&&e.has("OES_texture_float_linear")===!1)return;if(Y.anisotropy>1||i.get(Y).__currentAnisotropy){const me=e.get("EXT_texture_filter_anisotropic");n.texParameterf(ne,me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Y.anisotropy,r.getMaxAnisotropy())),i.get(Y).__currentAnisotropy=Y.anisotropy}}}function ye(ne,Y){let me=!1;ne.__webglInit===void 0&&(ne.__webglInit=!0,Y.addEventListener("dispose",k));const Ue=Y.source;let qe=v.get(Ue);qe===void 0&&(qe={},v.set(Ue,qe));const De=Z(Y);if(De!==ne.__cacheKey){qe[De]===void 0&&(qe[De]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,me=!0),qe[De].usedTimes++;const Mt=qe[ne.__cacheKey];Mt!==void 0&&(qe[ne.__cacheKey].usedTimes--,Mt.usedTimes===0&&M(Y)),ne.__cacheKey=De,ne.__webglTexture=qe[De].texture}return me}function de(ne,Y,me){return Math.floor(Math.floor(ne/me)/Y)}function xe(ne,Y,me,Ue){const De=ne.updateRanges;if(De.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,Y.width,Y.height,me,Ue,Y.data);else{De.sort((et,st)=>et.start-st.start);let Mt=0;for(let et=1;et<De.length;et++){const st=De[Mt],Et=De[et],fe=st.start+st.count,Pe=de(Et.start,Y.width,4),xt=de(st.start,Y.width,4);Et.start<=fe+1&&Pe===xt&&de(Et.start+Et.count-1,Y.width,4)===Pe?st.count=Math.max(st.count,Et.start+Et.count-st.start):(++Mt,De[Mt]=Et)}De.length=Mt+1;const ct=n.getParameter(n.UNPACK_ROW_LENGTH),At=n.getParameter(n.UNPACK_SKIP_PIXELS),Ut=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,Y.width);for(let et=0,st=De.length;et<st;et++){const Et=De[et],fe=Math.floor(Et.start/4),Pe=Math.ceil(Et.count/4),xt=fe%Y.width,pe=Math.floor(fe/Y.width),ut=Pe,ft=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,xt),n.pixelStorei(n.UNPACK_SKIP_ROWS,pe),t.texSubImage2D(n.TEXTURE_2D,0,xt,pe,ut,ft,me,Ue,Y.data)}ne.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,ct),n.pixelStorei(n.UNPACK_SKIP_PIXELS,At),n.pixelStorei(n.UNPACK_SKIP_ROWS,Ut)}}function ve(ne,Y,me){let Ue=n.TEXTURE_2D;(Y.isDataArrayTexture||Y.isCompressedArrayTexture)&&(Ue=n.TEXTURE_2D_ARRAY),Y.isData3DTexture&&(Ue=n.TEXTURE_3D);const qe=ye(ne,Y),De=Y.source;t.bindTexture(Ue,ne.__webglTexture,n.TEXTURE0+me);const Mt=i.get(De);if(De.version!==Mt.__version||qe===!0){t.activeTexture(n.TEXTURE0+me);const ct=Qn.getPrimaries(Qn.workingColorSpace),At=Y.colorSpace===eh?null:Qn.getPrimaries(Y.colorSpace),Ut=Y.colorSpace===eh||ct===At?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Y.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Y.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ut);let et=E(Y.image,!1,r.maxTextureSize);et=wt(Y,et);const st=a.convert(Y.format,Y.colorSpace),Et=a.convert(Y.type);let fe=P(Y.internalFormat,st,Et,Y.colorSpace,Y.isVideoTexture);re(Ue,Y);let Pe;const xt=Y.mipmaps,pe=Y.isVideoTexture!==!0,ut=Mt.__version===void 0||qe===!0,ft=De.dataReady,lt=z(Y,et);if(Y.isDepthTexture)fe=D(Y.format===Gd,Y.type),ut&&(pe?t.texStorage2D(n.TEXTURE_2D,1,fe,et.width,et.height):t.texImage2D(n.TEXTURE_2D,0,fe,et.width,et.height,0,st,Et,null));else if(Y.isDataTexture)if(xt.length>0){pe&&ut&&t.texStorage2D(n.TEXTURE_2D,lt,fe,xt[0].width,xt[0].height);for(let nt=0,Ke=xt.length;nt<Ke;nt++)Pe=xt[nt],pe?ft&&t.texSubImage2D(n.TEXTURE_2D,nt,0,0,Pe.width,Pe.height,st,Et,Pe.data):t.texImage2D(n.TEXTURE_2D,nt,fe,Pe.width,Pe.height,0,st,Et,Pe.data);Y.generateMipmaps=!1}else pe?(ut&&t.texStorage2D(n.TEXTURE_2D,lt,fe,et.width,et.height),ft&&xe(Y,et,st,Et)):t.texImage2D(n.TEXTURE_2D,0,fe,et.width,et.height,0,st,Et,et.data);else if(Y.isCompressedTexture)if(Y.isCompressedArrayTexture){pe&&ut&&t.texStorage3D(n.TEXTURE_2D_ARRAY,lt,fe,xt[0].width,xt[0].height,et.depth);for(let nt=0,Ke=xt.length;nt<Ke;nt++)if(Pe=xt[nt],Y.format!==Is)if(st!==null)if(pe){if(ft)if(Y.layerUpdates.size>0){const ht=wN(Pe.width,Pe.height,Y.format,Y.type);for(const Wt of Y.layerUpdates){const rn=Pe.data.subarray(Wt*ht/Pe.data.BYTES_PER_ELEMENT,(Wt+1)*ht/Pe.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,nt,0,0,Wt,Pe.width,Pe.height,1,st,rn)}Y.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,nt,0,0,0,Pe.width,Pe.height,et.depth,st,Pe.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,nt,fe,Pe.width,Pe.height,et.depth,0,Pe.data,0,0);else Dt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else pe?ft&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,nt,0,0,0,Pe.width,Pe.height,et.depth,st,Et,Pe.data):t.texImage3D(n.TEXTURE_2D_ARRAY,nt,fe,Pe.width,Pe.height,et.depth,0,st,Et,Pe.data)}else{pe&&ut&&t.texStorage2D(n.TEXTURE_2D,lt,fe,xt[0].width,xt[0].height);for(let nt=0,Ke=xt.length;nt<Ke;nt++)Pe=xt[nt],Y.format!==Is?st!==null?pe?ft&&t.compressedTexSubImage2D(n.TEXTURE_2D,nt,0,0,Pe.width,Pe.height,st,Pe.data):t.compressedTexImage2D(n.TEXTURE_2D,nt,fe,Pe.width,Pe.height,0,Pe.data):Dt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pe?ft&&t.texSubImage2D(n.TEXTURE_2D,nt,0,0,Pe.width,Pe.height,st,Et,Pe.data):t.texImage2D(n.TEXTURE_2D,nt,fe,Pe.width,Pe.height,0,st,Et,Pe.data)}else if(Y.isDataArrayTexture)if(pe){if(ut&&t.texStorage3D(n.TEXTURE_2D_ARRAY,lt,fe,et.width,et.height,et.depth),ft)if(Y.layerUpdates.size>0){const nt=wN(et.width,et.height,Y.format,Y.type);for(const Ke of Y.layerUpdates){const ht=et.data.subarray(Ke*nt/et.data.BYTES_PER_ELEMENT,(Ke+1)*nt/et.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Ke,et.width,et.height,1,st,Et,ht)}Y.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,et.width,et.height,et.depth,st,Et,et.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,fe,et.width,et.height,et.depth,0,st,Et,et.data);else if(Y.isData3DTexture)pe?(ut&&t.texStorage3D(n.TEXTURE_3D,lt,fe,et.width,et.height,et.depth),ft&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,et.width,et.height,et.depth,st,Et,et.data)):t.texImage3D(n.TEXTURE_3D,0,fe,et.width,et.height,et.depth,0,st,Et,et.data);else if(Y.isFramebufferTexture){if(ut)if(pe)t.texStorage2D(n.TEXTURE_2D,lt,fe,et.width,et.height);else{let nt=et.width,Ke=et.height;for(let ht=0;ht<lt;ht++)t.texImage2D(n.TEXTURE_2D,ht,fe,nt,Ke,0,st,Et,null),nt>>=1,Ke>>=1}}else if(xt.length>0){if(pe&&ut){const nt=at(xt[0]);t.texStorage2D(n.TEXTURE_2D,lt,fe,nt.width,nt.height)}for(let nt=0,Ke=xt.length;nt<Ke;nt++)Pe=xt[nt],pe?ft&&t.texSubImage2D(n.TEXTURE_2D,nt,0,0,st,Et,Pe):t.texImage2D(n.TEXTURE_2D,nt,fe,st,Et,Pe);Y.generateMipmaps=!1}else if(pe){if(ut){const nt=at(et);t.texStorage2D(n.TEXTURE_2D,lt,fe,nt.width,nt.height)}ft&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,st,Et,et)}else t.texImage2D(n.TEXTURE_2D,0,fe,st,Et,et);S(Y)&&w(Ue),Mt.__version=De.version,Y.onUpdate&&Y.onUpdate(Y)}ne.__version=Y.version}function Te(ne,Y,me){if(Y.image.length!==6)return;const Ue=ye(ne,Y),qe=Y.source;t.bindTexture(n.TEXTURE_CUBE_MAP,ne.__webglTexture,n.TEXTURE0+me);const De=i.get(qe);if(qe.version!==De.__version||Ue===!0){t.activeTexture(n.TEXTURE0+me);const Mt=Qn.getPrimaries(Qn.workingColorSpace),ct=Y.colorSpace===eh?null:Qn.getPrimaries(Y.colorSpace),At=Y.colorSpace===eh||Mt===ct?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Y.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Y.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,At);const Ut=Y.isCompressedTexture||Y.image[0].isCompressedTexture,et=Y.image[0]&&Y.image[0].isDataTexture,st=[];for(let Ke=0;Ke<6;Ke++)!Ut&&!et?st[Ke]=E(Y.image[Ke],!0,r.maxCubemapSize):st[Ke]=et?Y.image[Ke].image:Y.image[Ke],st[Ke]=wt(Y,st[Ke]);const Et=st[0],fe=a.convert(Y.format,Y.colorSpace),Pe=a.convert(Y.type),xt=P(Y.internalFormat,fe,Pe,Y.colorSpace),pe=Y.isVideoTexture!==!0,ut=De.__version===void 0||Ue===!0,ft=qe.dataReady;let lt=z(Y,Et);re(n.TEXTURE_CUBE_MAP,Y);let nt;if(Ut){pe&&ut&&t.texStorage2D(n.TEXTURE_CUBE_MAP,lt,xt,Et.width,Et.height);for(let Ke=0;Ke<6;Ke++){nt=st[Ke].mipmaps;for(let ht=0;ht<nt.length;ht++){const Wt=nt[ht];Y.format!==Is?fe!==null?pe?ft&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,ht,0,0,Wt.width,Wt.height,fe,Wt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,ht,xt,Wt.width,Wt.height,0,Wt.data):Dt("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):pe?ft&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,ht,0,0,Wt.width,Wt.height,fe,Pe,Wt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,ht,xt,Wt.width,Wt.height,0,fe,Pe,Wt.data)}}}else{if(nt=Y.mipmaps,pe&&ut){nt.length>0&&lt++;const Ke=at(st[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,lt,xt,Ke.width,Ke.height)}for(let Ke=0;Ke<6;Ke++)if(et){pe?ft&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0,0,0,st[Ke].width,st[Ke].height,fe,Pe,st[Ke].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0,xt,st[Ke].width,st[Ke].height,0,fe,Pe,st[Ke].data);for(let ht=0;ht<nt.length;ht++){const rn=nt[ht].image[Ke].image;pe?ft&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,ht+1,0,0,rn.width,rn.height,fe,Pe,rn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,ht+1,xt,rn.width,rn.height,0,fe,Pe,rn.data)}}else{pe?ft&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0,0,0,fe,Pe,st[Ke]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0,xt,fe,Pe,st[Ke]);for(let ht=0;ht<nt.length;ht++){const Wt=nt[ht];pe?ft&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,ht+1,0,0,fe,Pe,Wt.image[Ke]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,ht+1,xt,fe,Pe,Wt.image[Ke])}}}S(Y)&&w(n.TEXTURE_CUBE_MAP),De.__version=qe.version,Y.onUpdate&&Y.onUpdate(Y)}ne.__version=Y.version}function Ze(ne,Y,me,Ue,qe,De){const Mt=a.convert(me.format,me.colorSpace),ct=a.convert(me.type),At=P(me.internalFormat,Mt,ct,me.colorSpace),Ut=i.get(Y),et=i.get(me);if(et.__renderTarget=Y,!Ut.__hasExternalTextures){const st=Math.max(1,Y.width>>De),Et=Math.max(1,Y.height>>De);qe===n.TEXTURE_3D||qe===n.TEXTURE_2D_ARRAY?t.texImage3D(qe,De,At,st,Et,Y.depth,0,Mt,ct,null):t.texImage2D(qe,De,At,st,Et,0,Mt,ct,null)}t.bindFramebuffer(n.FRAMEBUFFER,ne),_t(Y)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ue,qe,et.__webglTexture,0,oe(Y)):(qe===n.TEXTURE_2D||qe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&qe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ue,qe,et.__webglTexture,De),t.bindFramebuffer(n.FRAMEBUFFER,null)}function be(ne,Y,me){if(n.bindRenderbuffer(n.RENDERBUFFER,ne),Y.depthBuffer){const Ue=Y.depthTexture,qe=Ue&&Ue.isDepthTexture?Ue.type:null,De=D(Y.stencilBuffer,qe),Mt=Y.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;_t(Y)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,oe(Y),De,Y.width,Y.height):me?n.renderbufferStorageMultisample(n.RENDERBUFFER,oe(Y),De,Y.width,Y.height):n.renderbufferStorage(n.RENDERBUFFER,De,Y.width,Y.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Mt,n.RENDERBUFFER,ne)}else{const Ue=Y.textures;for(let qe=0;qe<Ue.length;qe++){const De=Ue[qe],Mt=a.convert(De.format,De.colorSpace),ct=a.convert(De.type),At=P(De.internalFormat,Mt,ct,De.colorSpace);_t(Y)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,oe(Y),At,Y.width,Y.height):me?n.renderbufferStorageMultisample(n.RENDERBUFFER,oe(Y),At,Y.width,Y.height):n.renderbufferStorage(n.RENDERBUFFER,At,Y.width,Y.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ve(ne,Y,me){const Ue=Y.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(n.FRAMEBUFFER,ne),!(Y.depthTexture&&Y.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const qe=i.get(Y.depthTexture);if(qe.__renderTarget=Y,(!qe.__webglTexture||Y.depthTexture.image.width!==Y.width||Y.depthTexture.image.height!==Y.height)&&(Y.depthTexture.image.width=Y.width,Y.depthTexture.image.height=Y.height,Y.depthTexture.needsUpdate=!0),Ue){if(qe.__webglInit===void 0&&(qe.__webglInit=!0,Y.depthTexture.addEventListener("dispose",k)),qe.__webglTexture===void 0){qe.__webglTexture=n.createTexture(),t.bindTexture(n.TEXTURE_CUBE_MAP,qe.__webglTexture),re(n.TEXTURE_CUBE_MAP,Y.depthTexture);const Ut=a.convert(Y.depthTexture.format),et=a.convert(Y.depthTexture.type);let st;Y.depthTexture.format===Ju?st=n.DEPTH_COMPONENT24:Y.depthTexture.format===Gd&&(st=n.DEPTH24_STENCIL8);for(let Et=0;Et<6;Et++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Et,0,st,Y.width,Y.height,0,Ut,et,null)}}else J(Y.depthTexture,0);const De=qe.__webglTexture,Mt=oe(Y),ct=Ue?n.TEXTURE_CUBE_MAP_POSITIVE_X+me:n.TEXTURE_2D,At=Y.depthTexture.format===Gd?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;if(Y.depthTexture.format===Ju)_t(Y)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,At,ct,De,0,Mt):n.framebufferTexture2D(n.FRAMEBUFFER,At,ct,De,0);else if(Y.depthTexture.format===Gd)_t(Y)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,At,ct,De,0,Mt):n.framebufferTexture2D(n.FRAMEBUFFER,At,ct,De,0);else throw new Error("Unknown depthTexture format")}function vt(ne){const Y=i.get(ne),me=ne.isWebGLCubeRenderTarget===!0;if(Y.__boundDepthTexture!==ne.depthTexture){const Ue=ne.depthTexture;if(Y.__depthDisposeCallback&&Y.__depthDisposeCallback(),Ue){const qe=()=>{delete Y.__boundDepthTexture,delete Y.__depthDisposeCallback,Ue.removeEventListener("dispose",qe)};Ue.addEventListener("dispose",qe),Y.__depthDisposeCallback=qe}Y.__boundDepthTexture=Ue}if(ne.depthTexture&&!Y.__autoAllocateDepthBuffer)if(me)for(let Ue=0;Ue<6;Ue++)Ve(Y.__webglFramebuffer[Ue],ne,Ue);else{const Ue=ne.texture.mipmaps;Ue&&Ue.length>0?Ve(Y.__webglFramebuffer[0],ne,0):Ve(Y.__webglFramebuffer,ne,0)}else if(me){Y.__webglDepthbuffer=[];for(let Ue=0;Ue<6;Ue++)if(t.bindFramebuffer(n.FRAMEBUFFER,Y.__webglFramebuffer[Ue]),Y.__webglDepthbuffer[Ue]===void 0)Y.__webglDepthbuffer[Ue]=n.createRenderbuffer(),be(Y.__webglDepthbuffer[Ue],ne,!1);else{const qe=ne.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,De=Y.__webglDepthbuffer[Ue];n.bindRenderbuffer(n.RENDERBUFFER,De),n.framebufferRenderbuffer(n.FRAMEBUFFER,qe,n.RENDERBUFFER,De)}}else{const Ue=ne.texture.mipmaps;if(Ue&&Ue.length>0?t.bindFramebuffer(n.FRAMEBUFFER,Y.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,Y.__webglFramebuffer),Y.__webglDepthbuffer===void 0)Y.__webglDepthbuffer=n.createRenderbuffer(),be(Y.__webglDepthbuffer,ne,!1);else{const qe=ne.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,De=Y.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,De),n.framebufferRenderbuffer(n.FRAMEBUFFER,qe,n.RENDERBUFFER,De)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ie(ne,Y,me){const Ue=i.get(ne);Y!==void 0&&Ze(Ue.__webglFramebuffer,ne,ne.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),me!==void 0&&vt(ne)}function It(ne){const Y=ne.texture,me=i.get(ne),Ue=i.get(Y);ne.addEventListener("dispose",U);const qe=ne.textures,De=ne.isWebGLCubeRenderTarget===!0,Mt=qe.length>1;if(Mt||(Ue.__webglTexture===void 0&&(Ue.__webglTexture=n.createTexture()),Ue.__version=Y.version,s.memory.textures++),De){me.__webglFramebuffer=[];for(let ct=0;ct<6;ct++)if(Y.mipmaps&&Y.mipmaps.length>0){me.__webglFramebuffer[ct]=[];for(let At=0;At<Y.mipmaps.length;At++)me.__webglFramebuffer[ct][At]=n.createFramebuffer()}else me.__webglFramebuffer[ct]=n.createFramebuffer()}else{if(Y.mipmaps&&Y.mipmaps.length>0){me.__webglFramebuffer=[];for(let ct=0;ct<Y.mipmaps.length;ct++)me.__webglFramebuffer[ct]=n.createFramebuffer()}else me.__webglFramebuffer=n.createFramebuffer();if(Mt)for(let ct=0,At=qe.length;ct<At;ct++){const Ut=i.get(qe[ct]);Ut.__webglTexture===void 0&&(Ut.__webglTexture=n.createTexture(),s.memory.textures++)}if(ne.samples>0&&_t(ne)===!1){me.__webglMultisampledFramebuffer=n.createFramebuffer(),me.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,me.__webglMultisampledFramebuffer);for(let ct=0;ct<qe.length;ct++){const At=qe[ct];me.__webglColorRenderbuffer[ct]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,me.__webglColorRenderbuffer[ct]);const Ut=a.convert(At.format,At.colorSpace),et=a.convert(At.type),st=P(At.internalFormat,Ut,et,At.colorSpace,ne.isXRRenderTarget===!0),Et=oe(ne);n.renderbufferStorageMultisample(n.RENDERBUFFER,Et,st,ne.width,ne.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ct,n.RENDERBUFFER,me.__webglColorRenderbuffer[ct])}n.bindRenderbuffer(n.RENDERBUFFER,null),ne.depthBuffer&&(me.__webglDepthRenderbuffer=n.createRenderbuffer(),be(me.__webglDepthRenderbuffer,ne,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(De){t.bindTexture(n.TEXTURE_CUBE_MAP,Ue.__webglTexture),re(n.TEXTURE_CUBE_MAP,Y);for(let ct=0;ct<6;ct++)if(Y.mipmaps&&Y.mipmaps.length>0)for(let At=0;At<Y.mipmaps.length;At++)Ze(me.__webglFramebuffer[ct][At],ne,Y,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,At);else Ze(me.__webglFramebuffer[ct],ne,Y,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0);S(Y)&&w(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Mt){for(let ct=0,At=qe.length;ct<At;ct++){const Ut=qe[ct],et=i.get(Ut);let st=n.TEXTURE_2D;(ne.isWebGL3DRenderTarget||ne.isWebGLArrayRenderTarget)&&(st=ne.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(st,et.__webglTexture),re(st,Ut),Ze(me.__webglFramebuffer,ne,Ut,n.COLOR_ATTACHMENT0+ct,st,0),S(Ut)&&w(st)}t.unbindTexture()}else{let ct=n.TEXTURE_2D;if((ne.isWebGL3DRenderTarget||ne.isWebGLArrayRenderTarget)&&(ct=ne.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(ct,Ue.__webglTexture),re(ct,Y),Y.mipmaps&&Y.mipmaps.length>0)for(let At=0;At<Y.mipmaps.length;At++)Ze(me.__webglFramebuffer[At],ne,Y,n.COLOR_ATTACHMENT0,ct,At);else Ze(me.__webglFramebuffer,ne,Y,n.COLOR_ATTACHMENT0,ct,0);S(Y)&&w(ct),t.unbindTexture()}ne.depthBuffer&&vt(ne)}function Ne(ne){const Y=ne.textures;for(let me=0,Ue=Y.length;me<Ue;me++){const qe=Y[me];if(S(qe)){const De=I(ne),Mt=i.get(qe).__webglTexture;t.bindTexture(De,Mt),w(De),t.unbindTexture()}}}const je=[],Le=[];function Qe(ne){if(ne.samples>0){if(_t(ne)===!1){const Y=ne.textures,me=ne.width,Ue=ne.height;let qe=n.COLOR_BUFFER_BIT;const De=ne.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Mt=i.get(ne),ct=Y.length>1;if(ct)for(let Ut=0;Ut<Y.length;Ut++)t.bindFramebuffer(n.FRAMEBUFFER,Mt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ut,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Mt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ut,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Mt.__webglMultisampledFramebuffer);const At=ne.texture.mipmaps;At&&At.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Mt.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Mt.__webglFramebuffer);for(let Ut=0;Ut<Y.length;Ut++){if(ne.resolveDepthBuffer&&(ne.depthBuffer&&(qe|=n.DEPTH_BUFFER_BIT),ne.stencilBuffer&&ne.resolveStencilBuffer&&(qe|=n.STENCIL_BUFFER_BIT)),ct){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Mt.__webglColorRenderbuffer[Ut]);const et=i.get(Y[Ut]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,et,0)}n.blitFramebuffer(0,0,me,Ue,0,0,me,Ue,qe,n.NEAREST),c===!0&&(je.length=0,Le.length=0,je.push(n.COLOR_ATTACHMENT0+Ut),ne.depthBuffer&&ne.resolveDepthBuffer===!1&&(je.push(De),Le.push(De),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Le)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,je))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),ct)for(let Ut=0;Ut<Y.length;Ut++){t.bindFramebuffer(n.FRAMEBUFFER,Mt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ut,n.RENDERBUFFER,Mt.__webglColorRenderbuffer[Ut]);const et=i.get(Y[Ut]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Mt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ut,n.TEXTURE_2D,et,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Mt.__webglMultisampledFramebuffer)}else if(ne.depthBuffer&&ne.resolveDepthBuffer===!1&&c){const Y=ne.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Y])}}}function oe(ne){return Math.min(r.maxSamples,ne.samples)}function _t(ne){const Y=i.get(ne);return ne.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Y.__useRenderToTexture!==!1}function tt(ne){const Y=s.render.frame;h.get(ne)!==Y&&(h.set(ne,Y),ne.update())}function wt(ne,Y){const me=ne.colorSpace,Ue=ne.format,qe=ne.type;return ne.isCompressedTexture===!0||ne.isVideoTexture===!0||me!==rp&&me!==eh&&(Qn.getTransfer(me)===Si?(Ue!==Is||qe!==Qs)&&Dt("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):tn("WebGLTextures: Unsupported texture color space:",me)),Y}function at(ne){return typeof HTMLImageElement<"u"&&ne instanceof HTMLImageElement?(f.width=ne.naturalWidth||ne.width,f.height=ne.naturalHeight||ne.height):typeof VideoFrame<"u"&&ne instanceof VideoFrame?(f.width=ne.displayWidth,f.height=ne.displayHeight):(f.width=ne.width,f.height=ne.height),f}this.allocateTextureUnit=j,this.resetTextureUnits=V,this.setTexture2D=J,this.setTexture2DArray=G,this.setTexture3D=$,this.setTextureCube=ae,this.rebindTextures=Ie,this.setupRenderTarget=It,this.updateRenderTargetMipmap=Ne,this.updateMultisampleRenderTarget=Qe,this.setupDepthRenderbuffer=vt,this.setupFrameBufferTexture=Ze,this.useMultisampledRTT=_t,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function Z8(n,e){function t(i,r=eh){let a;const s=Qn.getTransfer(r);if(i===Qs)return n.UNSIGNED_BYTE;if(i===FA)return n.UNSIGNED_SHORT_4_4_4_4;if(i===zA)return n.UNSIGNED_SHORT_5_5_5_1;if(i===f3)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===h3)return n.UNSIGNED_INT_10F_11F_11F_REV;if(i===c3)return n.BYTE;if(i===u3)return n.SHORT;if(i===Av)return n.UNSIGNED_SHORT;if(i===UA)return n.INT;if(i===Ql)return n.UNSIGNED_INT;if(i===eo)return n.FLOAT;if(i===Qu)return n.HALF_FLOAT;if(i===d3)return n.ALPHA;if(i===p3)return n.RGB;if(i===Is)return n.RGBA;if(i===Ju)return n.DEPTH_COMPONENT;if(i===Gd)return n.DEPTH_STENCIL;if(i===BA)return n.RED;if(i===Cx)return n.RED_INTEGER;if(i===ig)return n.RG;if(i===VA)return n.RG_INTEGER;if(i===jA)return n.RGBA_INTEGER;if(i===g_||i===v_||i===y_||i===b_)if(s===Si)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===g_)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===v_)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===y_)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===b_)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===g_)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===v_)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===y_)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===b_)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===CE||i===IE||i===RE||i===PE)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===CE)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===IE)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===RE)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===PE)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===NE||i===OE||i===DE||i===LE||i===kE||i===UE||i===FE)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(i===NE||i===OE)return s===Si?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===DE)return s===Si?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC;if(i===LE)return a.COMPRESSED_R11_EAC;if(i===kE)return a.COMPRESSED_SIGNED_R11_EAC;if(i===UE)return a.COMPRESSED_RG11_EAC;if(i===FE)return a.COMPRESSED_SIGNED_RG11_EAC}else return null;if(i===zE||i===BE||i===VE||i===jE||i===HE||i===GE||i===WE||i===qE||i===$E||i===XE||i===YE||i===KE||i===ZE||i===QE)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(i===zE)return s===Si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===BE)return s===Si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===VE)return s===Si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===jE)return s===Si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===HE)return s===Si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===GE)return s===Si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===WE)return s===Si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===qE)return s===Si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===$E)return s===Si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===XE)return s===Si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===YE)return s===Si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===KE)return s===Si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===ZE)return s===Si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===QE)return s===Si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===JE||i===eT||i===tT)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(i===JE)return s===Si?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===eT)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===tT)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===nT||i===iT||i===rT||i===aT)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(i===nT)return a.COMPRESSED_RED_RGTC1_EXT;if(i===iT)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===rT)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===aT)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Mv?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const Oae=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Dae=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Lae{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const i=new T3(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Jl({vertexShader:Oae,fragmentShader:Dae,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new sa(new ey(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class kae extends uf{constructor(e,t){super();const i=this;let r=null,a=1,s=null,o="local-floor",c=1,f=null,h=null,p=null,v=null,y=null,_=null;const E=typeof XRWebGLBinding<"u",S=new Lae,w={},I=t.getContextAttributes();let P=null,D=null;const z=[],k=[],U=new rt;let R=null;const M=new Gr;M.viewport=new Fi;const L=new Gr;L.viewport=new Fi;const B=[M,L],V=new B8;let j=null,Z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ve){let Te=z[ve];return Te===void 0&&(Te=new Zw,z[ve]=Te),Te.getTargetRaySpace()},this.getControllerGrip=function(ve){let Te=z[ve];return Te===void 0&&(Te=new Zw,z[ve]=Te),Te.getGripSpace()},this.getHand=function(ve){let Te=z[ve];return Te===void 0&&(Te=new Zw,z[ve]=Te),Te.getHandSpace()};function J(ve){const Te=k.indexOf(ve.inputSource);if(Te===-1)return;const Ze=z[Te];Ze!==void 0&&(Ze.update(ve.inputSource,ve.frame,f||s),Ze.dispatchEvent({type:ve.type,data:ve.inputSource}))}function G(){r.removeEventListener("select",J),r.removeEventListener("selectstart",J),r.removeEventListener("selectend",J),r.removeEventListener("squeeze",J),r.removeEventListener("squeezestart",J),r.removeEventListener("squeezeend",J),r.removeEventListener("end",G),r.removeEventListener("inputsourceschange",$);for(let ve=0;ve<z.length;ve++){const Te=k[ve];Te!==null&&(k[ve]=null,z[ve].disconnect(Te))}j=null,Z=null,S.reset();for(const ve in w)delete w[ve];e.setRenderTarget(P),y=null,v=null,p=null,r=null,D=null,xe.stop(),i.isPresenting=!1,e.setPixelRatio(R),e.setSize(U.width,U.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ve){a=ve,i.isPresenting===!0&&Dt("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ve){o=ve,i.isPresenting===!0&&Dt("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||s},this.setReferenceSpace=function(ve){f=ve},this.getBaseLayer=function(){return v!==null?v:y},this.getBinding=function(){return p===null&&E&&(p=new XRWebGLBinding(r,t)),p},this.getFrame=function(){return _},this.getSession=function(){return r},this.setSession=async function(ve){if(r=ve,r!==null){if(P=e.getRenderTarget(),r.addEventListener("select",J),r.addEventListener("selectstart",J),r.addEventListener("selectend",J),r.addEventListener("squeeze",J),r.addEventListener("squeezestart",J),r.addEventListener("squeezeend",J),r.addEventListener("end",G),r.addEventListener("inputsourceschange",$),I.xrCompatible!==!0&&await t.makeXRCompatible(),R=e.getPixelRatio(),e.getSize(U),E&&"createProjectionLayer"in XRWebGLBinding.prototype){let Ze=null,be=null,Ve=null;I.depth&&(Ve=I.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ze=I.stencil?Gd:Ju,be=I.stencil?Mv:Ql);const vt={colorFormat:t.RGBA8,depthFormat:Ve,scaleFactor:a};p=this.getBinding(),v=p.createProjectionLayer(vt),r.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),D=new ul(v.textureWidth,v.textureHeight,{format:Is,type:Qs,depthTexture:new Dv(v.textureWidth,v.textureHeight,be,void 0,void 0,void 0,void 0,void 0,void 0,Ze),stencilBuffer:I.stencil,colorSpace:e.outputColorSpace,samples:I.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}else{const Ze={antialias:I.antialias,alpha:!0,depth:I.depth,stencil:I.stencil,framebufferScaleFactor:a};y=new XRWebGLLayer(r,t,Ze),r.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),D=new ul(y.framebufferWidth,y.framebufferHeight,{format:Is,type:Qs,colorSpace:e.outputColorSpace,stencilBuffer:I.stencil,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}D.isXRRenderTarget=!0,this.setFoveation(c),f=null,s=await r.requestReferenceSpace(o),xe.setContext(r),xe.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return S.getDepthTexture()};function $(ve){for(let Te=0;Te<ve.removed.length;Te++){const Ze=ve.removed[Te],be=k.indexOf(Ze);be>=0&&(k[be]=null,z[be].disconnect(Ze))}for(let Te=0;Te<ve.added.length;Te++){const Ze=ve.added[Te];let be=k.indexOf(Ze);if(be===-1){for(let vt=0;vt<z.length;vt++)if(vt>=k.length){k.push(Ze),be=vt;break}else if(k[vt]===null){k[vt]=Ze,be=vt;break}if(be===-1)break}const Ve=z[be];Ve&&Ve.connect(Ze)}}const ae=new ce,le=new ce;function ue(ve,Te,Ze){ae.setFromMatrixPosition(Te.matrixWorld),le.setFromMatrixPosition(Ze.matrixWorld);const be=ae.distanceTo(le),Ve=Te.projectionMatrix.elements,vt=Ze.projectionMatrix.elements,Ie=Ve[14]/(Ve[10]-1),It=Ve[14]/(Ve[10]+1),Ne=(Ve[9]+1)/Ve[5],je=(Ve[9]-1)/Ve[5],Le=(Ve[8]-1)/Ve[0],Qe=(vt[8]+1)/vt[0],oe=Ie*Le,_t=Ie*Qe,tt=be/(-Le+Qe),wt=tt*-Le;if(Te.matrixWorld.decompose(ve.position,ve.quaternion,ve.scale),ve.translateX(wt),ve.translateZ(tt),ve.matrixWorld.compose(ve.position,ve.quaternion,ve.scale),ve.matrixWorldInverse.copy(ve.matrixWorld).invert(),Ve[10]===-1)ve.projectionMatrix.copy(Te.projectionMatrix),ve.projectionMatrixInverse.copy(Te.projectionMatrixInverse);else{const at=Ie+tt,ne=It+tt,Y=oe-wt,me=_t+(be-wt),Ue=Ne*It/ne*at,qe=je*It/ne*at;ve.projectionMatrix.makePerspective(Y,me,Ue,qe,at,ne),ve.projectionMatrixInverse.copy(ve.projectionMatrix).invert()}}function Q(ve,Te){Te===null?ve.matrixWorld.copy(ve.matrix):ve.matrixWorld.multiplyMatrices(Te.matrixWorld,ve.matrix),ve.matrixWorldInverse.copy(ve.matrixWorld).invert()}this.updateCamera=function(ve){if(r===null)return;let Te=ve.near,Ze=ve.far;S.texture!==null&&(S.depthNear>0&&(Te=S.depthNear),S.depthFar>0&&(Ze=S.depthFar)),V.near=L.near=M.near=Te,V.far=L.far=M.far=Ze,(j!==V.near||Z!==V.far)&&(r.updateRenderState({depthNear:V.near,depthFar:V.far}),j=V.near,Z=V.far),V.layers.mask=ve.layers.mask|6,M.layers.mask=V.layers.mask&3,L.layers.mask=V.layers.mask&5;const be=ve.parent,Ve=V.cameras;Q(V,be);for(let vt=0;vt<Ve.length;vt++)Q(Ve[vt],be);Ve.length===2?ue(V,M,L):V.projectionMatrix.copy(M.projectionMatrix),re(ve,V,be)};function re(ve,Te,Ze){Ze===null?ve.matrix.copy(Te.matrixWorld):(ve.matrix.copy(Ze.matrixWorld),ve.matrix.invert(),ve.matrix.multiply(Te.matrixWorld)),ve.matrix.decompose(ve.position,ve.quaternion,ve.scale),ve.updateMatrixWorld(!0),ve.projectionMatrix.copy(Te.projectionMatrix),ve.projectionMatrixInverse.copy(Te.projectionMatrixInverse),ve.isPerspectiveCamera&&(ve.fov=Rv*2*Math.atan(1/ve.projectionMatrix.elements[5]),ve.zoom=1)}this.getCamera=function(){return V},this.getFoveation=function(){if(!(v===null&&y===null))return c},this.setFoveation=function(ve){c=ve,v!==null&&(v.fixedFoveation=ve),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=ve)},this.hasDepthSensing=function(){return S.texture!==null},this.getDepthSensingMesh=function(){return S.getMesh(V)},this.getCameraTexture=function(ve){return w[ve]};let ye=null;function de(ve,Te){if(h=Te.getViewerPose(f||s),_=Te,h!==null){const Ze=h.views;y!==null&&(e.setRenderTargetFramebuffer(D,y.framebuffer),e.setRenderTarget(D));let be=!1;Ze.length!==V.cameras.length&&(V.cameras.length=0,be=!0);for(let It=0;It<Ze.length;It++){const Ne=Ze[It];let je=null;if(y!==null)je=y.getViewport(Ne);else{const Qe=p.getViewSubImage(v,Ne);je=Qe.viewport,It===0&&(e.setRenderTargetTextures(D,Qe.colorTexture,Qe.depthStencilTexture),e.setRenderTarget(D))}let Le=B[It];Le===void 0&&(Le=new Gr,Le.layers.enable(It),Le.viewport=new Fi,B[It]=Le),Le.matrix.fromArray(Ne.transform.matrix),Le.matrix.decompose(Le.position,Le.quaternion,Le.scale),Le.projectionMatrix.fromArray(Ne.projectionMatrix),Le.projectionMatrixInverse.copy(Le.projectionMatrix).invert(),Le.viewport.set(je.x,je.y,je.width,je.height),It===0&&(V.matrix.copy(Le.matrix),V.matrix.decompose(V.position,V.quaternion,V.scale)),be===!0&&V.cameras.push(Le)}const Ve=r.enabledFeatures;if(Ve&&Ve.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&E){p=i.getBinding();const It=p.getDepthInformation(Ze[0]);It&&It.isValid&&It.texture&&S.init(It,r.renderState)}if(Ve&&Ve.includes("camera-access")&&E){e.state.unbindTexture(),p=i.getBinding();for(let It=0;It<Ze.length;It++){const Ne=Ze[It].camera;if(Ne){let je=w[Ne];je||(je=new T3,w[Ne]=je);const Le=p.getCameraImage(Ne);je.sourceTexture=Le}}}}for(let Ze=0;Ze<z.length;Ze++){const be=k[Ze],Ve=z[Ze];be!==null&&Ve!==void 0&&Ve.update(be,Te,f||s)}ye&&ye(ve,Te),Te.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Te}),_=null}const xe=new q8;xe.setAnimationLoop(de),this.setAnimationLoop=function(ve){ye=ve},this.dispose=function(){}}}const xm=new hl,Uae=new bn;function Fae(n,e){function t(S,w){S.matrixAutoUpdate===!0&&S.updateMatrix(),w.value.copy(S.matrix)}function i(S,w){w.color.getRGB(S.fogColor.value,Xj(n)),w.isFog?(S.fogNear.value=w.near,S.fogFar.value=w.far):w.isFogExp2&&(S.fogDensity.value=w.density)}function r(S,w,I,P,D){w.isMeshBasicMaterial||w.isMeshLambertMaterial?a(S,w):w.isMeshToonMaterial?(a(S,w),p(S,w)):w.isMeshPhongMaterial?(a(S,w),h(S,w)):w.isMeshStandardMaterial?(a(S,w),v(S,w),w.isMeshPhysicalMaterial&&y(S,w,D)):w.isMeshMatcapMaterial?(a(S,w),_(S,w)):w.isMeshDepthMaterial?a(S,w):w.isMeshDistanceMaterial?(a(S,w),E(S,w)):w.isMeshNormalMaterial?a(S,w):w.isLineBasicMaterial?(s(S,w),w.isLineDashedMaterial&&o(S,w)):w.isPointsMaterial?c(S,w,I,P):w.isSpriteMaterial?f(S,w):w.isShadowMaterial?(S.color.value.copy(w.color),S.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function a(S,w){S.opacity.value=w.opacity,w.color&&S.diffuse.value.copy(w.color),w.emissive&&S.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(S.map.value=w.map,t(w.map,S.mapTransform)),w.alphaMap&&(S.alphaMap.value=w.alphaMap,t(w.alphaMap,S.alphaMapTransform)),w.bumpMap&&(S.bumpMap.value=w.bumpMap,t(w.bumpMap,S.bumpMapTransform),S.bumpScale.value=w.bumpScale,w.side===io&&(S.bumpScale.value*=-1)),w.normalMap&&(S.normalMap.value=w.normalMap,t(w.normalMap,S.normalMapTransform),S.normalScale.value.copy(w.normalScale),w.side===io&&S.normalScale.value.negate()),w.displacementMap&&(S.displacementMap.value=w.displacementMap,t(w.displacementMap,S.displacementMapTransform),S.displacementScale.value=w.displacementScale,S.displacementBias.value=w.displacementBias),w.emissiveMap&&(S.emissiveMap.value=w.emissiveMap,t(w.emissiveMap,S.emissiveMapTransform)),w.specularMap&&(S.specularMap.value=w.specularMap,t(w.specularMap,S.specularMapTransform)),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest);const I=e.get(w),P=I.envMap,D=I.envMapRotation;P&&(S.envMap.value=P,xm.copy(D),xm.x*=-1,xm.y*=-1,xm.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(xm.y*=-1,xm.z*=-1),S.envMapRotation.value.setFromMatrix4(Uae.makeRotationFromEuler(xm)),S.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=w.reflectivity,S.ior.value=w.ior,S.refractionRatio.value=w.refractionRatio),w.lightMap&&(S.lightMap.value=w.lightMap,S.lightMapIntensity.value=w.lightMapIntensity,t(w.lightMap,S.lightMapTransform)),w.aoMap&&(S.aoMap.value=w.aoMap,S.aoMapIntensity.value=w.aoMapIntensity,t(w.aoMap,S.aoMapTransform))}function s(S,w){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,w.map&&(S.map.value=w.map,t(w.map,S.mapTransform))}function o(S,w){S.dashSize.value=w.dashSize,S.totalSize.value=w.dashSize+w.gapSize,S.scale.value=w.scale}function c(S,w,I,P){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,S.size.value=w.size*I,S.scale.value=P*.5,w.map&&(S.map.value=w.map,t(w.map,S.uvTransform)),w.alphaMap&&(S.alphaMap.value=w.alphaMap,t(w.alphaMap,S.alphaMapTransform)),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest)}function f(S,w){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,S.rotation.value=w.rotation,w.map&&(S.map.value=w.map,t(w.map,S.mapTransform)),w.alphaMap&&(S.alphaMap.value=w.alphaMap,t(w.alphaMap,S.alphaMapTransform)),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest)}function h(S,w){S.specular.value.copy(w.specular),S.shininess.value=Math.max(w.shininess,1e-4)}function p(S,w){w.gradientMap&&(S.gradientMap.value=w.gradientMap)}function v(S,w){S.metalness.value=w.metalness,w.metalnessMap&&(S.metalnessMap.value=w.metalnessMap,t(w.metalnessMap,S.metalnessMapTransform)),S.roughness.value=w.roughness,w.roughnessMap&&(S.roughnessMap.value=w.roughnessMap,t(w.roughnessMap,S.roughnessMapTransform)),w.envMap&&(S.envMapIntensity.value=w.envMapIntensity)}function y(S,w,I){S.ior.value=w.ior,w.sheen>0&&(S.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),S.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(S.sheenColorMap.value=w.sheenColorMap,t(w.sheenColorMap,S.sheenColorMapTransform)),w.sheenRoughnessMap&&(S.sheenRoughnessMap.value=w.sheenRoughnessMap,t(w.sheenRoughnessMap,S.sheenRoughnessMapTransform))),w.clearcoat>0&&(S.clearcoat.value=w.clearcoat,S.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(S.clearcoatMap.value=w.clearcoatMap,t(w.clearcoatMap,S.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,t(w.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(S.clearcoatNormalMap.value=w.clearcoatNormalMap,t(w.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===io&&S.clearcoatNormalScale.value.negate())),w.dispersion>0&&(S.dispersion.value=w.dispersion),w.iridescence>0&&(S.iridescence.value=w.iridescence,S.iridescenceIOR.value=w.iridescenceIOR,S.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(S.iridescenceMap.value=w.iridescenceMap,t(w.iridescenceMap,S.iridescenceMapTransform)),w.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=w.iridescenceThicknessMap,t(w.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),w.transmission>0&&(S.transmission.value=w.transmission,S.transmissionSamplerMap.value=I.texture,S.transmissionSamplerSize.value.set(I.width,I.height),w.transmissionMap&&(S.transmissionMap.value=w.transmissionMap,t(w.transmissionMap,S.transmissionMapTransform)),S.thickness.value=w.thickness,w.thicknessMap&&(S.thicknessMap.value=w.thicknessMap,t(w.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=w.attenuationDistance,S.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(S.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(S.anisotropyMap.value=w.anisotropyMap,t(w.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=w.specularIntensity,S.specularColor.value.copy(w.specularColor),w.specularColorMap&&(S.specularColorMap.value=w.specularColorMap,t(w.specularColorMap,S.specularColorMapTransform)),w.specularIntensityMap&&(S.specularIntensityMap.value=w.specularIntensityMap,t(w.specularIntensityMap,S.specularIntensityMapTransform))}function _(S,w){w.matcap&&(S.matcap.value=w.matcap)}function E(S,w){const I=e.get(w).light;S.referencePosition.value.setFromMatrixPosition(I.matrixWorld),S.nearDistance.value=I.shadow.camera.near,S.farDistance.value=I.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function zae(n,e,t,i){let r={},a={},s=[];const o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(I,P){const D=P.program;i.uniformBlockBinding(I,D)}function f(I,P){let D=r[I.id];D===void 0&&(_(I),D=h(I),r[I.id]=D,I.addEventListener("dispose",S));const z=P.program;i.updateUBOMapping(I,z);const k=e.render.frame;a[I.id]!==k&&(v(I),a[I.id]=k)}function h(I){const P=p();I.__bindingPointIndex=P;const D=n.createBuffer(),z=I.__size,k=I.usage;return n.bindBuffer(n.UNIFORM_BUFFER,D),n.bufferData(n.UNIFORM_BUFFER,z,k),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,P,D),D}function p(){for(let I=0;I<o;I++)if(s.indexOf(I)===-1)return s.push(I),I;return tn("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(I){const P=r[I.id],D=I.uniforms,z=I.__cache;n.bindBuffer(n.UNIFORM_BUFFER,P);for(let k=0,U=D.length;k<U;k++){const R=Array.isArray(D[k])?D[k]:[D[k]];for(let M=0,L=R.length;M<L;M++){const B=R[M];if(y(B,k,M,z)===!0){const V=B.__offset,j=Array.isArray(B.value)?B.value:[B.value];let Z=0;for(let J=0;J<j.length;J++){const G=j[J],$=E(G);typeof G=="number"||typeof G=="boolean"?(B.__data[0]=G,n.bufferSubData(n.UNIFORM_BUFFER,V+Z,B.__data)):G.isMatrix3?(B.__data[0]=G.elements[0],B.__data[1]=G.elements[1],B.__data[2]=G.elements[2],B.__data[3]=0,B.__data[4]=G.elements[3],B.__data[5]=G.elements[4],B.__data[6]=G.elements[5],B.__data[7]=0,B.__data[8]=G.elements[6],B.__data[9]=G.elements[7],B.__data[10]=G.elements[8],B.__data[11]=0):(G.toArray(B.__data,Z),Z+=$.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,V,B.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function y(I,P,D,z){const k=I.value,U=P+"_"+D;if(z[U]===void 0)return typeof k=="number"||typeof k=="boolean"?z[U]=k:z[U]=k.clone(),!0;{const R=z[U];if(typeof k=="number"||typeof k=="boolean"){if(R!==k)return z[U]=k,!0}else if(R.equals(k)===!1)return R.copy(k),!0}return!1}function _(I){const P=I.uniforms;let D=0;const z=16;for(let U=0,R=P.length;U<R;U++){const M=Array.isArray(P[U])?P[U]:[P[U]];for(let L=0,B=M.length;L<B;L++){const V=M[L],j=Array.isArray(V.value)?V.value:[V.value];for(let Z=0,J=j.length;Z<J;Z++){const G=j[Z],$=E(G),ae=D%z,le=ae%$.boundary,ue=ae+le;D+=le,ue!==0&&z-ue<$.storage&&(D+=z-ue),V.__data=new Float32Array($.storage/Float32Array.BYTES_PER_ELEMENT),V.__offset=D,D+=$.storage}}}const k=D%z;return k>0&&(D+=z-k),I.__size=D,I.__cache={},this}function E(I){const P={boundary:0,storage:0};return typeof I=="number"||typeof I=="boolean"?(P.boundary=4,P.storage=4):I.isVector2?(P.boundary=8,P.storage=8):I.isVector3||I.isColor?(P.boundary=16,P.storage=12):I.isVector4?(P.boundary=16,P.storage=16):I.isMatrix3?(P.boundary=48,P.storage=48):I.isMatrix4?(P.boundary=64,P.storage=64):I.isTexture?Dt("WebGLRenderer: Texture samplers can not be part of an uniforms group."):Dt("WebGLRenderer: Unsupported uniform value type.",I),P}function S(I){const P=I.target;P.removeEventListener("dispose",S);const D=s.indexOf(P.__bindingPointIndex);s.splice(D,1),n.deleteBuffer(r[P.id]),delete r[P.id],delete a[P.id]}function w(){for(const I in r)n.deleteBuffer(r[I]);s=[],r={},a={}}return{bind:c,update:f,dispose:w}}const Bae=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let Iu=null;function Vae(){return Iu===null&&(Iu=new Fc(Bae,16,16,ig,Qu),Iu.name="DFG_LUT",Iu.minFilter=ir,Iu.magFilter=ir,Iu.wrapS=Uo,Iu.wrapT=Uo,Iu.generateMipmaps=!1,Iu.needsUpdate=!0),Iu}class Q8{constructor(e={}){const{canvas:t=Gj(),context:i=null,depth:r=!0,stencil:a=!1,alpha:s=!1,antialias:o=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:f=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:p=!1,reversedDepthBuffer:v=!1,outputBufferType:y=Qs}=e;this.isWebGLRenderer=!0;let _;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=i.getContextAttributes().alpha}else _=s;const E=y,S=new Set([jA,VA,Cx]),w=new Set([Qs,Ql,Av,Mv,FA,zA]),I=new Uint32Array(4),P=new Int32Array(4);let D=null,z=null;const k=[],U=[];let R=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Zl,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const M=this;let L=!1;this._outputColorSpace=ts;let B=0,V=0,j=null,Z=-1,J=null;const G=new Fi,$=new Fi;let ae=null;const le=new Bt(0);let ue=0,Q=t.width,re=t.height,ye=1,de=null,xe=null;const ve=new Fi(0,0,Q,re),Te=new Fi(0,0,Q,re);let Ze=!1;const be=new Jv;let Ve=!1,vt=!1;const Ie=new bn,It=new ce,Ne=new Fi,je={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Le=!1;function Qe(){return j===null?ye:1}let oe=i;function _t(ee,Se){return t.getContext(ee,Se)}try{const ee={alpha:!0,depth:r,stencil:a,antialias:o,premultipliedAlpha:c,preserveDrawingBuffer:f,powerPreference:h,failIfMajorPerformanceCaveat:p};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${DA}`),t.addEventListener("webglcontextlost",Wt,!1),t.addEventListener("webglcontextrestored",rn,!1),t.addEventListener("webglcontextcreationerror",Qt,!1),oe===null){const Se="webgl2";if(oe=_t(Se,ee),oe===null)throw _t(Se)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ee){throw tn("WebGLRenderer: "+ee.message),ee}let tt,wt,at,ne,Y,me,Ue,qe,De,Mt,ct,At,Ut,et,st,Et,fe,Pe,xt,pe,ut,ft,lt,nt;function Ke(){tt=new jie(oe),tt.init(),ft=new Z8(oe,tt),wt=new Oie(oe,tt,e,ft),at=new Pae(oe,tt),wt.reversedDepthBuffer&&v&&at.buffers.depth.setReversed(!0),ne=new Wie(oe),Y=new gae,me=new Nae(oe,tt,at,Y,wt,ft,ne),Ue=new Lie(M),qe=new Vie(M),De=new Yee(oe),lt=new Pie(oe,De),Mt=new Hie(oe,De,ne,lt),ct=new $ie(oe,Mt,De,ne),xt=new qie(oe,wt,me),Et=new Die(Y),At=new mae(M,Ue,qe,tt,wt,lt,Et),Ut=new Fae(M,Y),et=new yae,st=new Eae(tt),Pe=new Rie(M,Ue,qe,at,ct,_,c),fe=new Iae(M,ct,wt),nt=new zae(oe,ne,wt,at),pe=new Nie(oe,tt,ne),ut=new Gie(oe,tt,ne),ne.programs=At.programs,M.capabilities=wt,M.extensions=tt,M.properties=Y,M.renderLists=et,M.shadowMap=fe,M.state=at,M.info=ne}Ke(),E!==Qs&&(R=new Yie(E,t.width,t.height,r,a));const ht=new kae(M,oe);this.xr=ht,this.getContext=function(){return oe},this.getContextAttributes=function(){return oe.getContextAttributes()},this.forceContextLoss=function(){const ee=tt.get("WEBGL_lose_context");ee&&ee.loseContext()},this.forceContextRestore=function(){const ee=tt.get("WEBGL_lose_context");ee&&ee.restoreContext()},this.getPixelRatio=function(){return ye},this.setPixelRatio=function(ee){ee!==void 0&&(ye=ee,this.setSize(Q,re,!1))},this.getSize=function(ee){return ee.set(Q,re)},this.setSize=function(ee,Se,Oe=!0){if(ht.isPresenting){Dt("WebGLRenderer: Can't change size while VR device is presenting.");return}Q=ee,re=Se,t.width=Math.floor(ee*ye),t.height=Math.floor(Se*ye),Oe===!0&&(t.style.width=ee+"px",t.style.height=Se+"px"),R!==null&&R.setSize(t.width,t.height),this.setViewport(0,0,ee,Se)},this.getDrawingBufferSize=function(ee){return ee.set(Q*ye,re*ye).floor()},this.setDrawingBufferSize=function(ee,Se,Oe){Q=ee,re=Se,ye=Oe,t.width=Math.floor(ee*Oe),t.height=Math.floor(Se*Oe),this.setViewport(0,0,ee,Se)},this.setEffects=function(ee){if(E===Qs){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(ee){for(let Se=0;Se<ee.length;Se++)if(ee[Se].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}R.setEffects(ee||[])},this.getCurrentViewport=function(ee){return ee.copy(G)},this.getViewport=function(ee){return ee.copy(ve)},this.setViewport=function(ee,Se,Oe,Re){ee.isVector4?ve.set(ee.x,ee.y,ee.z,ee.w):ve.set(ee,Se,Oe,Re),at.viewport(G.copy(ve).multiplyScalar(ye).round())},this.getScissor=function(ee){return ee.copy(Te)},this.setScissor=function(ee,Se,Oe,Re){ee.isVector4?Te.set(ee.x,ee.y,ee.z,ee.w):Te.set(ee,Se,Oe,Re),at.scissor($.copy(Te).multiplyScalar(ye).round())},this.getScissorTest=function(){return Ze},this.setScissorTest=function(ee){at.setScissorTest(Ze=ee)},this.setOpaqueSort=function(ee){de=ee},this.setTransparentSort=function(ee){xe=ee},this.getClearColor=function(ee){return ee.copy(Pe.getClearColor())},this.setClearColor=function(){Pe.setClearColor(...arguments)},this.getClearAlpha=function(){return Pe.getClearAlpha()},this.setClearAlpha=function(){Pe.setClearAlpha(...arguments)},this.clear=function(ee=!0,Se=!0,Oe=!0){let Re=0;if(ee){let Ee=!1;if(j!==null){const yt=j.texture.format;Ee=S.has(yt)}if(Ee){const yt=j.texture.type,Nt=w.has(yt),pt=Pe.getClearColor(),Lt=Pe.getClearAlpha(),Ft=pt.r,jt=pt.g,Ot=pt.b;Nt?(I[0]=Ft,I[1]=jt,I[2]=Ot,I[3]=Lt,oe.clearBufferuiv(oe.COLOR,0,I)):(P[0]=Ft,P[1]=jt,P[2]=Ot,P[3]=Lt,oe.clearBufferiv(oe.COLOR,0,P))}else Re|=oe.COLOR_BUFFER_BIT}Se&&(Re|=oe.DEPTH_BUFFER_BIT),Oe&&(Re|=oe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),oe.clear(Re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Wt,!1),t.removeEventListener("webglcontextrestored",rn,!1),t.removeEventListener("webglcontextcreationerror",Qt,!1),Pe.dispose(),et.dispose(),st.dispose(),Y.dispose(),Ue.dispose(),qe.dispose(),ct.dispose(),lt.dispose(),nt.dispose(),At.dispose(),ht.dispose(),ht.removeEventListener("sessionstart",oa),ht.removeEventListener("sessionend",jo),Ci.stop()};function Wt(ee){ee.preventDefault(),H_("WebGLRenderer: Context Lost."),L=!0}function rn(){H_("WebGLRenderer: Context Restored."),L=!1;const ee=ne.autoReset,Se=fe.enabled,Oe=fe.autoUpdate,Re=fe.needsUpdate,Ee=fe.type;Ke(),ne.autoReset=ee,fe.enabled=Se,fe.autoUpdate=Oe,fe.needsUpdate=Re,fe.type=Ee}function Qt(ee){tn("WebGLRenderer: A WebGL context could not be created. Reason: ",ee.statusMessage)}function Ei(ee){const Se=ee.target;Se.removeEventListener("dispose",Ei),Bi(Se)}function Bi(ee){ka(ee),Y.remove(ee)}function ka(ee){const Se=Y.get(ee).programs;Se!==void 0&&(Se.forEach(function(Oe){At.releaseProgram(Oe)}),ee.isShaderMaterial&&At.releaseShaderCache(ee))}this.renderBufferDirect=function(ee,Se,Oe,Re,Ee,yt){Se===null&&(Se=je);const Nt=Ee.isMesh&&Ee.matrixWorld.determinant()<0,pt=he(ee,Se,Oe,Re,Ee);at.setMaterial(Re,Nt);let Lt=Oe.index,Ft=1;if(Re.wireframe===!0){if(Lt=Mt.getWireframeAttribute(Oe),Lt===void 0)return;Ft=2}const jt=Oe.drawRange,Ot=Oe.attributes.position;let $t=jt.start*Ft,wn=(jt.start+jt.count)*Ft;yt!==null&&($t=Math.max($t,yt.start*Ft),wn=Math.min(wn,(yt.start+yt.count)*Ft)),Lt!==null?($t=Math.max($t,0),wn=Math.min(wn,Lt.count)):Ot!=null&&($t=Math.max($t,0),wn=Math.min(wn,Ot.count));const ci=wn-$t;if(ci<0||ci===1/0)return;lt.setup(Ee,Re,pt,Oe,Lt);let nn,dn=pe;if(Lt!==null&&(nn=De.get(Lt),dn=ut,dn.setIndex(nn)),Ee.isMesh)Re.wireframe===!0?(at.setLineWidth(Re.wireframeLinewidth*Qe()),dn.setMode(oe.LINES)):dn.setMode(oe.TRIANGLES);else if(Ee.isLine){let Pt=Re.linewidth;Pt===void 0&&(Pt=1),at.setLineWidth(Pt*Qe()),Ee.isLineSegments?dn.setMode(oe.LINES):Ee.isLineLoop?dn.setMode(oe.LINE_LOOP):dn.setMode(oe.LINE_STRIP)}else Ee.isPoints?dn.setMode(oe.POINTS):Ee.isSprite&&dn.setMode(oe.TRIANGLES);if(Ee.isBatchedMesh)if(Ee._multiDrawInstances!==null)Iv("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),dn.renderMultiDrawInstances(Ee._multiDrawStarts,Ee._multiDrawCounts,Ee._multiDrawCount,Ee._multiDrawInstances);else if(tt.get("WEBGL_multi_draw"))dn.renderMultiDraw(Ee._multiDrawStarts,Ee._multiDrawCounts,Ee._multiDrawCount);else{const Pt=Ee._multiDrawStarts,On=Ee._multiDrawCounts,ln=Ee._multiDrawCount,qi=Lt?De.get(Lt).bytesPerElement:1,ks=Y.get(Re).currentProgram.getUniforms();for(let Ti=0;Ti<ln;Ti++)ks.setValue(oe,"_gl_DrawID",Ti),dn.render(Pt[Ti]/qi,On[Ti])}else if(Ee.isInstancedMesh)dn.renderInstances($t,ci,Ee.count);else if(Oe.isInstancedBufferGeometry){const Pt=Oe._maxInstanceCount!==void 0?Oe._maxInstanceCount:1/0,On=Math.min(Oe.instanceCount,Pt);dn.renderInstances($t,ci,On)}else dn.render($t,ci)};function Ds(ee,Se,Oe){ee.transparent===!0&&ee.side===ku&&ee.forceSinglePass===!1?(ee.side=io,ee.needsUpdate=!0,$r(ee,Se,Oe),ee.side=hh,ee.needsUpdate=!0,$r(ee,Se,Oe),ee.side=ku):$r(ee,Se,Oe)}this.compile=function(ee,Se,Oe=null){Oe===null&&(Oe=ee),z=st.get(Oe),z.init(Se),U.push(z),Oe.traverseVisible(function(Ee){Ee.isLight&&Ee.layers.test(Se.layers)&&(z.pushLight(Ee),Ee.castShadow&&z.pushShadow(Ee))}),ee!==Oe&&ee.traverseVisible(function(Ee){Ee.isLight&&Ee.layers.test(Se.layers)&&(z.pushLight(Ee),Ee.castShadow&&z.pushShadow(Ee))}),z.setupLights();const Re=new Set;return ee.traverse(function(Ee){if(!(Ee.isMesh||Ee.isPoints||Ee.isLine||Ee.isSprite))return;const yt=Ee.material;if(yt)if(Array.isArray(yt))for(let Nt=0;Nt<yt.length;Nt++){const pt=yt[Nt];Ds(pt,Oe,Ee),Re.add(pt)}else Ds(yt,Oe,Ee),Re.add(yt)}),z=U.pop(),Re},this.compileAsync=function(ee,Se,Oe=null){const Re=this.compile(ee,Se,Oe);return new Promise(Ee=>{function yt(){if(Re.forEach(function(Nt){Y.get(Nt).currentProgram.isReady()&&Re.delete(Nt)}),Re.size===0){Ee(ee);return}setTimeout(yt,10)}tt.get("KHR_parallel_shader_compile")!==null?yt():setTimeout(yt,10)})};let Ls=null;function Ua(ee){Ls&&Ls(ee)}function oa(){Ci.stop()}function jo(){Ci.start()}const Ci=new q8;Ci.setAnimationLoop(Ua),typeof self<"u"&&Ci.setContext(self),this.setAnimationLoop=function(ee){Ls=ee,ht.setAnimationLoop(ee),ee===null?Ci.stop():Ci.start()},ht.addEventListener("sessionstart",oa),ht.addEventListener("sessionend",jo),this.render=function(ee,Se){if(Se!==void 0&&Se.isCamera!==!0){tn("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(L===!0)return;const Oe=ht.enabled===!0&&ht.isPresenting===!0,Re=R!==null&&(j===null||Oe)&&R.begin(M,j);if(ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),Se.parent===null&&Se.matrixWorldAutoUpdate===!0&&Se.updateMatrixWorld(),ht.enabled===!0&&ht.isPresenting===!0&&(R===null||R.isCompositing()===!1)&&(ht.cameraAutoUpdate===!0&&ht.updateCamera(Se),Se=ht.getCamera()),ee.isScene===!0&&ee.onBeforeRender(M,ee,Se,j),z=st.get(ee,U.length),z.init(Se),U.push(z),Ie.multiplyMatrices(Se.projectionMatrix,Se.matrixWorldInverse),be.setFromProjectionMatrix(Ie,al,Se.reversedDepth),vt=this.localClippingEnabled,Ve=Et.init(this.clippingPlanes,vt),D=et.get(ee,k.length),D.init(),k.push(D),ht.enabled===!0&&ht.isPresenting===!0){const Nt=M.xr.getDepthSensingMesh();Nt!==null&&Lr(Nt,Se,-1/0,M.sortObjects)}Lr(ee,Se,0,M.sortObjects),D.finish(),M.sortObjects===!0&&D.sort(de,xe),Le=ht.enabled===!1||ht.isPresenting===!1||ht.hasDepthSensing()===!1,Le&&Pe.addToRenderList(D,ee),this.info.render.frame++,Ve===!0&&Et.beginShadows();const Ee=z.state.shadowsArray;if(fe.render(Ee,ee,Se),Ve===!0&&Et.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Re&&R.hasRenderPass())===!1){const Nt=D.opaque,pt=D.transmissive;if(z.setupLights(),Se.isArrayCamera){const Lt=Se.cameras;if(pt.length>0)for(let Ft=0,jt=Lt.length;Ft<jt;Ft++){const Ot=Lt[Ft];Ii(Nt,pt,ee,Ot)}Le&&Pe.render(ee);for(let Ft=0,jt=Lt.length;Ft<jt;Ft++){const Ot=Lt[Ft];di(D,ee,Ot,Ot.viewport)}}else pt.length>0&&Ii(Nt,pt,ee,Se),Le&&Pe.render(ee),di(D,ee,Se)}j!==null&&V===0&&(me.updateMultisampleRenderTarget(j),me.updateRenderTargetMipmap(j)),Re&&R.end(M),ee.isScene===!0&&ee.onAfterRender(M,ee,Se),lt.resetDefaultState(),Z=-1,J=null,U.pop(),U.length>0?(z=U[U.length-1],Ve===!0&&Et.setGlobalState(M.clippingPlanes,z.state.camera)):z=null,k.pop(),k.length>0?D=k[k.length-1]:D=null};function Lr(ee,Se,Oe,Re){if(ee.visible===!1)return;if(ee.layers.test(Se.layers)){if(ee.isGroup)Oe=ee.renderOrder;else if(ee.isLOD)ee.autoUpdate===!0&&ee.update(Se);else if(ee.isLight)z.pushLight(ee),ee.castShadow&&z.pushShadow(ee);else if(ee.isSprite){if(!ee.frustumCulled||be.intersectsSprite(ee)){Re&&Ne.setFromMatrixPosition(ee.matrixWorld).applyMatrix4(Ie);const Nt=ct.update(ee),pt=ee.material;pt.visible&&D.push(ee,Nt,pt,Oe,Ne.z,null)}}else if((ee.isMesh||ee.isLine||ee.isPoints)&&(!ee.frustumCulled||be.intersectsObject(ee))){const Nt=ct.update(ee),pt=ee.material;if(Re&&(ee.boundingSphere!==void 0?(ee.boundingSphere===null&&ee.computeBoundingSphere(),Ne.copy(ee.boundingSphere.center)):(Nt.boundingSphere===null&&Nt.computeBoundingSphere(),Ne.copy(Nt.boundingSphere.center)),Ne.applyMatrix4(ee.matrixWorld).applyMatrix4(Ie)),Array.isArray(pt)){const Lt=Nt.groups;for(let Ft=0,jt=Lt.length;Ft<jt;Ft++){const Ot=Lt[Ft],$t=pt[Ot.materialIndex];$t&&$t.visible&&D.push(ee,Nt,$t,Oe,Ne.z,Ot)}}else pt.visible&&D.push(ee,Nt,pt,Oe,Ne.z,null)}}const yt=ee.children;for(let Nt=0,pt=yt.length;Nt<pt;Nt++)Lr(yt[Nt],Se,Oe,Re)}function di(ee,Se,Oe,Re){const{opaque:Ee,transmissive:yt,transparent:Nt}=ee;z.setupLightsView(Oe),Ve===!0&&Et.setGlobalState(M.clippingPlanes,Oe),Re&&at.viewport(G.copy(Re)),Ee.length>0&&Er(Ee,Se,Oe),yt.length>0&&Er(yt,Se,Oe),Nt.length>0&&Er(Nt,Se,Oe),at.buffers.depth.setTest(!0),at.buffers.depth.setMask(!0),at.buffers.color.setMask(!0),at.setPolygonOffset(!1)}function Ii(ee,Se,Oe,Re){if((Oe.isScene===!0?Oe.overrideMaterial:null)!==null)return;if(z.state.transmissionRenderTarget[Re.id]===void 0){const $t=tt.has("EXT_color_buffer_half_float")||tt.has("EXT_color_buffer_float");z.state.transmissionRenderTarget[Re.id]=new ul(1,1,{generateMipmaps:!0,type:$t?Qu:Qs,minFilter:zu,samples:wt.samples,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Qn.workingColorSpace})}const yt=z.state.transmissionRenderTarget[Re.id],Nt=Re.viewport||G;yt.setSize(Nt.z*M.transmissionResolutionScale,Nt.w*M.transmissionResolutionScale);const pt=M.getRenderTarget(),Lt=M.getActiveCubeFace(),Ft=M.getActiveMipmapLevel();M.setRenderTarget(yt),M.getClearColor(le),ue=M.getClearAlpha(),ue<1&&M.setClearColor(16777215,.5),M.clear(),Le&&Pe.render(Oe);const jt=M.toneMapping;M.toneMapping=Zl;const Ot=Re.viewport;if(Re.viewport!==void 0&&(Re.viewport=void 0),z.setupLightsView(Re),Ve===!0&&Et.setGlobalState(M.clippingPlanes,Re),Er(ee,Oe,Re),me.updateMultisampleRenderTarget(yt),me.updateRenderTargetMipmap(yt),tt.has("WEBGL_multisampled_render_to_texture")===!1){let $t=!1;for(let wn=0,ci=Se.length;wn<ci;wn++){const nn=Se[wn],{object:dn,geometry:Pt,material:On,group:ln}=nn;if(On.side===ku&&dn.layers.test(Re.layers)){const qi=On.side;On.side=io,On.needsUpdate=!0,kr(dn,Oe,Re,Pt,On,ln),On.side=qi,On.needsUpdate=!0,$t=!0}}$t===!0&&(me.updateMultisampleRenderTarget(yt),me.updateRenderTargetMipmap(yt))}M.setRenderTarget(pt,Lt,Ft),M.setClearColor(le,ue),Ot!==void 0&&(Re.viewport=Ot),M.toneMapping=jt}function Er(ee,Se,Oe){const Re=Se.isScene===!0?Se.overrideMaterial:null;for(let Ee=0,yt=ee.length;Ee<yt;Ee++){const Nt=ee[Ee],{object:pt,geometry:Lt,group:Ft}=Nt;let jt=Nt.material;jt.allowOverride===!0&&Re!==null&&(jt=Re),pt.layers.test(Oe.layers)&&kr(pt,Se,Oe,Lt,jt,Ft)}}function kr(ee,Se,Oe,Re,Ee,yt){ee.onBeforeRender(M,Se,Oe,Re,Ee,yt),ee.modelViewMatrix.multiplyMatrices(Oe.matrixWorldInverse,ee.matrixWorld),ee.normalMatrix.getNormalMatrix(ee.modelViewMatrix),Ee.onBeforeRender(M,Se,Oe,Re,ee,yt),Ee.transparent===!0&&Ee.side===ku&&Ee.forceSinglePass===!1?(Ee.side=io,Ee.needsUpdate=!0,M.renderBufferDirect(Oe,Se,Re,Ee,ee,yt),Ee.side=hh,Ee.needsUpdate=!0,M.renderBufferDirect(Oe,Se,Re,Ee,ee,yt),Ee.side=ku):M.renderBufferDirect(Oe,Se,Re,Ee,ee,yt),ee.onAfterRender(M,Se,Oe,Re,Ee,yt)}function $r(ee,Se,Oe){Se.isScene!==!0&&(Se=je);const Re=Y.get(ee),Ee=z.state.lights,yt=z.state.shadowsArray,Nt=Ee.state.version,pt=At.getParameters(ee,Ee.state,yt,Se,Oe),Lt=At.getProgramCacheKey(pt);let Ft=Re.programs;Re.environment=ee.isMeshStandardMaterial?Se.environment:null,Re.fog=Se.fog,Re.envMap=(ee.isMeshStandardMaterial?qe:Ue).get(ee.envMap||Re.environment),Re.envMapRotation=Re.environment!==null&&ee.envMap===null?Se.environmentRotation:ee.envMapRotation,Ft===void 0&&(ee.addEventListener("dispose",Ei),Ft=new Map,Re.programs=Ft);let jt=Ft.get(Lt);if(jt!==void 0){if(Re.currentProgram===jt&&Re.lightsStateVersion===Nt)return lo(ee,pt),jt}else pt.uniforms=At.getUniforms(ee),ee.onBeforeCompile(pt,M),jt=At.acquireProgram(pt,Lt),Ft.set(Lt,jt),Re.uniforms=pt.uniforms;const Ot=Re.uniforms;return(!ee.isShaderMaterial&&!ee.isRawShaderMaterial||ee.clipping===!0)&&(Ot.clippingPlanes=Et.uniform),lo(ee,pt),Re.needsLights=gt(ee),Re.lightsStateVersion=Nt,Re.needsLights&&(Ot.ambientLightColor.value=Ee.state.ambient,Ot.lightProbe.value=Ee.state.probe,Ot.directionalLights.value=Ee.state.directional,Ot.directionalLightShadows.value=Ee.state.directionalShadow,Ot.spotLights.value=Ee.state.spot,Ot.spotLightShadows.value=Ee.state.spotShadow,Ot.rectAreaLights.value=Ee.state.rectArea,Ot.ltc_1.value=Ee.state.rectAreaLTC1,Ot.ltc_2.value=Ee.state.rectAreaLTC2,Ot.pointLights.value=Ee.state.point,Ot.pointLightShadows.value=Ee.state.pointShadow,Ot.hemisphereLights.value=Ee.state.hemi,Ot.directionalShadowMap.value=Ee.state.directionalShadowMap,Ot.directionalShadowMatrix.value=Ee.state.directionalShadowMatrix,Ot.spotShadowMap.value=Ee.state.spotShadowMap,Ot.spotLightMatrix.value=Ee.state.spotLightMatrix,Ot.spotLightMap.value=Ee.state.spotLightMap,Ot.pointShadowMap.value=Ee.state.pointShadowMap,Ot.pointShadowMatrix.value=Ee.state.pointShadowMatrix),Re.currentProgram=jt,Re.uniformsList=null,jt}function ls(ee){if(ee.uniformsList===null){const Se=ee.currentProgram.getUniforms();ee.uniformsList=Qw.seqWithValue(Se.seq,ee.uniforms)}return ee.uniformsList}function lo(ee,Se){const Oe=Y.get(ee);Oe.outputColorSpace=Se.outputColorSpace,Oe.batching=Se.batching,Oe.batchingColor=Se.batchingColor,Oe.instancing=Se.instancing,Oe.instancingColor=Se.instancingColor,Oe.instancingMorph=Se.instancingMorph,Oe.skinning=Se.skinning,Oe.morphTargets=Se.morphTargets,Oe.morphNormals=Se.morphNormals,Oe.morphColors=Se.morphColors,Oe.morphTargetsCount=Se.morphTargetsCount,Oe.numClippingPlanes=Se.numClippingPlanes,Oe.numIntersection=Se.numClipIntersection,Oe.vertexAlphas=Se.vertexAlphas,Oe.vertexTangents=Se.vertexTangents,Oe.toneMapping=Se.toneMapping}function he(ee,Se,Oe,Re,Ee){Se.isScene!==!0&&(Se=je),me.resetTextureUnits();const yt=Se.fog,Nt=Re.isMeshStandardMaterial?Se.environment:null,pt=j===null?M.outputColorSpace:j.isXRRenderTarget===!0?j.texture.colorSpace:rp,Lt=(Re.isMeshStandardMaterial?qe:Ue).get(Re.envMap||Nt),Ft=Re.vertexColors===!0&&!!Oe.attributes.color&&Oe.attributes.color.itemSize===4,jt=!!Oe.attributes.tangent&&(!!Re.normalMap||Re.anisotropy>0),Ot=!!Oe.morphAttributes.position,$t=!!Oe.morphAttributes.normal,wn=!!Oe.morphAttributes.color;let ci=Zl;Re.toneMapped&&(j===null||j.isXRRenderTarget===!0)&&(ci=M.toneMapping);const nn=Oe.morphAttributes.position||Oe.morphAttributes.normal||Oe.morphAttributes.color,dn=nn!==void 0?nn.length:0,Pt=Y.get(Re),On=z.state.lights;if(Ve===!0&&(vt===!0||ee!==J)){const pr=ee===J&&Re.id===Z;Et.setState(Re,ee,pr)}let ln=!1;Re.version===Pt.__version?(Pt.needsLights&&Pt.lightsStateVersion!==On.state.version||Pt.outputColorSpace!==pt||Ee.isBatchedMesh&&Pt.batching===!1||!Ee.isBatchedMesh&&Pt.batching===!0||Ee.isBatchedMesh&&Pt.batchingColor===!0&&Ee.colorTexture===null||Ee.isBatchedMesh&&Pt.batchingColor===!1&&Ee.colorTexture!==null||Ee.isInstancedMesh&&Pt.instancing===!1||!Ee.isInstancedMesh&&Pt.instancing===!0||Ee.isSkinnedMesh&&Pt.skinning===!1||!Ee.isSkinnedMesh&&Pt.skinning===!0||Ee.isInstancedMesh&&Pt.instancingColor===!0&&Ee.instanceColor===null||Ee.isInstancedMesh&&Pt.instancingColor===!1&&Ee.instanceColor!==null||Ee.isInstancedMesh&&Pt.instancingMorph===!0&&Ee.morphTexture===null||Ee.isInstancedMesh&&Pt.instancingMorph===!1&&Ee.morphTexture!==null||Pt.envMap!==Lt||Re.fog===!0&&Pt.fog!==yt||Pt.numClippingPlanes!==void 0&&(Pt.numClippingPlanes!==Et.numPlanes||Pt.numIntersection!==Et.numIntersection)||Pt.vertexAlphas!==Ft||Pt.vertexTangents!==jt||Pt.morphTargets!==Ot||Pt.morphNormals!==$t||Pt.morphColors!==wn||Pt.toneMapping!==ci||Pt.morphTargetsCount!==dn)&&(ln=!0):(ln=!0,Pt.__version=Re.version);let qi=Pt.currentProgram;ln===!0&&(qi=$r(Re,Se,Ee));let ks=!1,Ti=!1,la=!1;const ii=qi.getUniforms(),Li=Pt.uniforms;if(at.useProgram(qi.program)&&(ks=!0,Ti=!0,la=!0),Re.id!==Z&&(Z=Re.id,Ti=!0),ks||J!==ee){at.buffers.depth.getReversed()&&ee.reversedDepth!==!0&&(ee._reversedDepth=!0,ee.updateProjectionMatrix()),ii.setValue(oe,"projectionMatrix",ee.projectionMatrix),ii.setValue(oe,"viewMatrix",ee.matrixWorldInverse);const mr=ii.map.cameraPosition;mr!==void 0&&mr.setValue(oe,It.setFromMatrixPosition(ee.matrixWorld)),wt.logarithmicDepthBuffer&&ii.setValue(oe,"logDepthBufFC",2/(Math.log(ee.far+1)/Math.LN2)),(Re.isMeshPhongMaterial||Re.isMeshToonMaterial||Re.isMeshLambertMaterial||Re.isMeshBasicMaterial||Re.isMeshStandardMaterial||Re.isShaderMaterial)&&ii.setValue(oe,"isOrthographic",ee.isOrthographicCamera===!0),J!==ee&&(J=ee,Ti=!0,la=!0)}if(Pt.needsLights&&(On.state.directionalShadowMap.length>0&&ii.setValue(oe,"directionalShadowMap",On.state.directionalShadowMap,me),On.state.spotShadowMap.length>0&&ii.setValue(oe,"spotShadowMap",On.state.spotShadowMap,me),On.state.pointShadowMap.length>0&&ii.setValue(oe,"pointShadowMap",On.state.pointShadowMap,me)),Ee.isSkinnedMesh){ii.setOptional(oe,Ee,"bindMatrix"),ii.setOptional(oe,Ee,"bindMatrixInverse");const pr=Ee.skeleton;pr&&(pr.boneTexture===null&&pr.computeBoneTexture(),ii.setValue(oe,"boneTexture",pr.boneTexture,me))}Ee.isBatchedMesh&&(ii.setOptional(oe,Ee,"batchingTexture"),ii.setValue(oe,"batchingTexture",Ee._matricesTexture,me),ii.setOptional(oe,Ee,"batchingIdTexture"),ii.setValue(oe,"batchingIdTexture",Ee._indirectTexture,me),ii.setOptional(oe,Ee,"batchingColorTexture"),Ee._colorsTexture!==null&&ii.setValue(oe,"batchingColorTexture",Ee._colorsTexture,me));const bi=Oe.morphAttributes;if((bi.position!==void 0||bi.normal!==void 0||bi.color!==void 0)&&xt.update(Ee,Oe,qi),(Ti||Pt.receiveShadow!==Ee.receiveShadow)&&(Pt.receiveShadow=Ee.receiveShadow,ii.setValue(oe,"receiveShadow",Ee.receiveShadow)),Re.isMeshGouraudMaterial&&Re.envMap!==null&&(Li.envMap.value=Lt,Li.flipEnvMap.value=Lt.isCubeTexture&&Lt.isRenderTargetTexture===!1?-1:1),Re.isMeshStandardMaterial&&Re.envMap===null&&Se.environment!==null&&(Li.envMapIntensity.value=Se.environmentIntensity),Li.dfgLUT!==void 0&&(Li.dfgLUT.value=Vae()),Ti&&(ii.setValue(oe,"toneMappingExposure",M.toneMappingExposure),Pt.needsLights&&We(Li,la),yt&&Re.fog===!0&&Ut.refreshFogUniforms(Li,yt),Ut.refreshMaterialUniforms(Li,Re,ye,re,z.state.transmissionRenderTarget[ee.id]),Qw.upload(oe,ls(Pt),Li,me)),Re.isShaderMaterial&&Re.uniformsNeedUpdate===!0&&(Qw.upload(oe,ls(Pt),Li,me),Re.uniformsNeedUpdate=!1),Re.isSpriteMaterial&&ii.setValue(oe,"center",Ee.center),ii.setValue(oe,"modelViewMatrix",Ee.modelViewMatrix),ii.setValue(oe,"normalMatrix",Ee.normalMatrix),ii.setValue(oe,"modelMatrix",Ee.matrixWorld),Re.isShaderMaterial||Re.isRawShaderMaterial){const pr=Re.uniformsGroups;for(let mr=0,ml=pr.length;mr<ml;mr++){const Fa=pr[mr];nt.update(Fa,qi),nt.bind(Fa,qi)}}return qi}function We(ee,Se){ee.ambientLightColor.needsUpdate=Se,ee.lightProbe.needsUpdate=Se,ee.directionalLights.needsUpdate=Se,ee.directionalLightShadows.needsUpdate=Se,ee.pointLights.needsUpdate=Se,ee.pointLightShadows.needsUpdate=Se,ee.spotLights.needsUpdate=Se,ee.spotLightShadows.needsUpdate=Se,ee.rectAreaLights.needsUpdate=Se,ee.hemisphereLights.needsUpdate=Se}function gt(ee){return ee.isMeshLambertMaterial||ee.isMeshToonMaterial||ee.isMeshPhongMaterial||ee.isMeshStandardMaterial||ee.isShadowMaterial||ee.isShaderMaterial&&ee.lights===!0}this.getActiveCubeFace=function(){return B},this.getActiveMipmapLevel=function(){return V},this.getRenderTarget=function(){return j},this.setRenderTargetTextures=function(ee,Se,Oe){const Re=Y.get(ee);Re.__autoAllocateDepthBuffer=ee.resolveDepthBuffer===!1,Re.__autoAllocateDepthBuffer===!1&&(Re.__useRenderToTexture=!1),Y.get(ee.texture).__webglTexture=Se,Y.get(ee.depthTexture).__webglTexture=Re.__autoAllocateDepthBuffer?void 0:Oe,Re.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(ee,Se){const Oe=Y.get(ee);Oe.__webglFramebuffer=Se,Oe.__useDefaultFramebuffer=Se===void 0};const Vt=oe.createFramebuffer();this.setRenderTarget=function(ee,Se=0,Oe=0){j=ee,B=Se,V=Oe;let Re=null,Ee=!1,yt=!1;if(ee){const pt=Y.get(ee);if(pt.__useDefaultFramebuffer!==void 0){at.bindFramebuffer(oe.FRAMEBUFFER,pt.__webglFramebuffer),G.copy(ee.viewport),$.copy(ee.scissor),ae=ee.scissorTest,at.viewport(G),at.scissor($),at.setScissorTest(ae),Z=-1;return}else if(pt.__webglFramebuffer===void 0)me.setupRenderTarget(ee);else if(pt.__hasExternalTextures)me.rebindTextures(ee,Y.get(ee.texture).__webglTexture,Y.get(ee.depthTexture).__webglTexture);else if(ee.depthBuffer){const jt=ee.depthTexture;if(pt.__boundDepthTexture!==jt){if(jt!==null&&Y.has(jt)&&(ee.width!==jt.image.width||ee.height!==jt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");me.setupDepthRenderbuffer(ee)}}const Lt=ee.texture;(Lt.isData3DTexture||Lt.isDataArrayTexture||Lt.isCompressedArrayTexture)&&(yt=!0);const Ft=Y.get(ee).__webglFramebuffer;ee.isWebGLCubeRenderTarget?(Array.isArray(Ft[Se])?Re=Ft[Se][Oe]:Re=Ft[Se],Ee=!0):ee.samples>0&&me.useMultisampledRTT(ee)===!1?Re=Y.get(ee).__webglMultisampledFramebuffer:Array.isArray(Ft)?Re=Ft[Oe]:Re=Ft,G.copy(ee.viewport),$.copy(ee.scissor),ae=ee.scissorTest}else G.copy(ve).multiplyScalar(ye).floor(),$.copy(Te).multiplyScalar(ye).floor(),ae=Ze;if(Oe!==0&&(Re=Vt),at.bindFramebuffer(oe.FRAMEBUFFER,Re)&&at.drawBuffers(ee,Re),at.viewport(G),at.scissor($),at.setScissorTest(ae),Ee){const pt=Y.get(ee.texture);oe.framebufferTexture2D(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_CUBE_MAP_POSITIVE_X+Se,pt.__webglTexture,Oe)}else if(yt){const pt=Se;for(let Lt=0;Lt<ee.textures.length;Lt++){const Ft=Y.get(ee.textures[Lt]);oe.framebufferTextureLayer(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0+Lt,Ft.__webglTexture,Oe,pt)}}else if(ee!==null&&Oe!==0){const pt=Y.get(ee.texture);oe.framebufferTexture2D(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_2D,pt.__webglTexture,Oe)}Z=-1},this.readRenderTargetPixels=function(ee,Se,Oe,Re,Ee,yt,Nt,pt=0){if(!(ee&&ee.isWebGLRenderTarget)){tn("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Lt=Y.get(ee).__webglFramebuffer;if(ee.isWebGLCubeRenderTarget&&Nt!==void 0&&(Lt=Lt[Nt]),Lt){at.bindFramebuffer(oe.FRAMEBUFFER,Lt);try{const Ft=ee.textures[pt],jt=Ft.format,Ot=Ft.type;if(!wt.textureFormatReadable(jt)){tn("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!wt.textureTypeReadable(Ot)){tn("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Se>=0&&Se<=ee.width-Re&&Oe>=0&&Oe<=ee.height-Ee&&(ee.textures.length>1&&oe.readBuffer(oe.COLOR_ATTACHMENT0+pt),oe.readPixels(Se,Oe,Re,Ee,ft.convert(jt),ft.convert(Ot),yt))}finally{const Ft=j!==null?Y.get(j).__webglFramebuffer:null;at.bindFramebuffer(oe.FRAMEBUFFER,Ft)}}},this.readRenderTargetPixelsAsync=async function(ee,Se,Oe,Re,Ee,yt,Nt,pt=0){if(!(ee&&ee.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Lt=Y.get(ee).__webglFramebuffer;if(ee.isWebGLCubeRenderTarget&&Nt!==void 0&&(Lt=Lt[Nt]),Lt)if(Se>=0&&Se<=ee.width-Re&&Oe>=0&&Oe<=ee.height-Ee){at.bindFramebuffer(oe.FRAMEBUFFER,Lt);const Ft=ee.textures[pt],jt=Ft.format,Ot=Ft.type;if(!wt.textureFormatReadable(jt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!wt.textureTypeReadable(Ot))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const $t=oe.createBuffer();oe.bindBuffer(oe.PIXEL_PACK_BUFFER,$t),oe.bufferData(oe.PIXEL_PACK_BUFFER,yt.byteLength,oe.STREAM_READ),ee.textures.length>1&&oe.readBuffer(oe.COLOR_ATTACHMENT0+pt),oe.readPixels(Se,Oe,Re,Ee,ft.convert(jt),ft.convert(Ot),0);const wn=j!==null?Y.get(j).__webglFramebuffer:null;at.bindFramebuffer(oe.FRAMEBUFFER,wn);const ci=oe.fenceSync(oe.SYNC_GPU_COMMANDS_COMPLETE,0);return oe.flush(),await ZZ(oe,ci,4),oe.bindBuffer(oe.PIXEL_PACK_BUFFER,$t),oe.getBufferSubData(oe.PIXEL_PACK_BUFFER,0,yt),oe.deleteBuffer($t),oe.deleteSync(ci),yt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(ee,Se=null,Oe=0){const Re=Math.pow(2,-Oe),Ee=Math.floor(ee.image.width*Re),yt=Math.floor(ee.image.height*Re),Nt=Se!==null?Se.x:0,pt=Se!==null?Se.y:0;me.setTexture2D(ee,0),oe.copyTexSubImage2D(oe.TEXTURE_2D,Oe,0,0,Nt,pt,Ee,yt),at.unbindTexture()};const en=oe.createFramebuffer(),_n=oe.createFramebuffer();this.copyTextureToTexture=function(ee,Se,Oe=null,Re=null,Ee=0,yt=null){yt===null&&(Ee!==0?(Iv("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),yt=Ee,Ee=0):yt=0);let Nt,pt,Lt,Ft,jt,Ot,$t,wn,ci;const nn=ee.isCompressedTexture?ee.mipmaps[yt]:ee.image;if(Oe!==null)Nt=Oe.max.x-Oe.min.x,pt=Oe.max.y-Oe.min.y,Lt=Oe.isBox3?Oe.max.z-Oe.min.z:1,Ft=Oe.min.x,jt=Oe.min.y,Ot=Oe.isBox3?Oe.min.z:0;else{const bi=Math.pow(2,-Ee);Nt=Math.floor(nn.width*bi),pt=Math.floor(nn.height*bi),ee.isDataArrayTexture?Lt=nn.depth:ee.isData3DTexture?Lt=Math.floor(nn.depth*bi):Lt=1,Ft=0,jt=0,Ot=0}Re!==null?($t=Re.x,wn=Re.y,ci=Re.z):($t=0,wn=0,ci=0);const dn=ft.convert(Se.format),Pt=ft.convert(Se.type);let On;Se.isData3DTexture?(me.setTexture3D(Se,0),On=oe.TEXTURE_3D):Se.isDataArrayTexture||Se.isCompressedArrayTexture?(me.setTexture2DArray(Se,0),On=oe.TEXTURE_2D_ARRAY):(me.setTexture2D(Se,0),On=oe.TEXTURE_2D),oe.pixelStorei(oe.UNPACK_FLIP_Y_WEBGL,Se.flipY),oe.pixelStorei(oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Se.premultiplyAlpha),oe.pixelStorei(oe.UNPACK_ALIGNMENT,Se.unpackAlignment);const ln=oe.getParameter(oe.UNPACK_ROW_LENGTH),qi=oe.getParameter(oe.UNPACK_IMAGE_HEIGHT),ks=oe.getParameter(oe.UNPACK_SKIP_PIXELS),Ti=oe.getParameter(oe.UNPACK_SKIP_ROWS),la=oe.getParameter(oe.UNPACK_SKIP_IMAGES);oe.pixelStorei(oe.UNPACK_ROW_LENGTH,nn.width),oe.pixelStorei(oe.UNPACK_IMAGE_HEIGHT,nn.height),oe.pixelStorei(oe.UNPACK_SKIP_PIXELS,Ft),oe.pixelStorei(oe.UNPACK_SKIP_ROWS,jt),oe.pixelStorei(oe.UNPACK_SKIP_IMAGES,Ot);const ii=ee.isDataArrayTexture||ee.isData3DTexture,Li=Se.isDataArrayTexture||Se.isData3DTexture;if(ee.isDepthTexture){const bi=Y.get(ee),pr=Y.get(Se),mr=Y.get(bi.__renderTarget),ml=Y.get(pr.__renderTarget);at.bindFramebuffer(oe.READ_FRAMEBUFFER,mr.__webglFramebuffer),at.bindFramebuffer(oe.DRAW_FRAMEBUFFER,ml.__webglFramebuffer);for(let Fa=0;Fa<Lt;Fa++)ii&&(oe.framebufferTextureLayer(oe.READ_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,Y.get(ee).__webglTexture,Ee,Ot+Fa),oe.framebufferTextureLayer(oe.DRAW_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,Y.get(Se).__webglTexture,yt,ci+Fa)),oe.blitFramebuffer(Ft,jt,Nt,pt,$t,wn,Nt,pt,oe.DEPTH_BUFFER_BIT,oe.NEAREST);at.bindFramebuffer(oe.READ_FRAMEBUFFER,null),at.bindFramebuffer(oe.DRAW_FRAMEBUFFER,null)}else if(Ee!==0||ee.isRenderTargetTexture||Y.has(ee)){const bi=Y.get(ee),pr=Y.get(Se);at.bindFramebuffer(oe.READ_FRAMEBUFFER,en),at.bindFramebuffer(oe.DRAW_FRAMEBUFFER,_n);for(let mr=0;mr<Lt;mr++)ii?oe.framebufferTextureLayer(oe.READ_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,bi.__webglTexture,Ee,Ot+mr):oe.framebufferTexture2D(oe.READ_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_2D,bi.__webglTexture,Ee),Li?oe.framebufferTextureLayer(oe.DRAW_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,pr.__webglTexture,yt,ci+mr):oe.framebufferTexture2D(oe.DRAW_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_2D,pr.__webglTexture,yt),Ee!==0?oe.blitFramebuffer(Ft,jt,Nt,pt,$t,wn,Nt,pt,oe.COLOR_BUFFER_BIT,oe.NEAREST):Li?oe.copyTexSubImage3D(On,yt,$t,wn,ci+mr,Ft,jt,Nt,pt):oe.copyTexSubImage2D(On,yt,$t,wn,Ft,jt,Nt,pt);at.bindFramebuffer(oe.READ_FRAMEBUFFER,null),at.bindFramebuffer(oe.DRAW_FRAMEBUFFER,null)}else Li?ee.isDataTexture||ee.isData3DTexture?oe.texSubImage3D(On,yt,$t,wn,ci,Nt,pt,Lt,dn,Pt,nn.data):Se.isCompressedArrayTexture?oe.compressedTexSubImage3D(On,yt,$t,wn,ci,Nt,pt,Lt,dn,nn.data):oe.texSubImage3D(On,yt,$t,wn,ci,Nt,pt,Lt,dn,Pt,nn):ee.isDataTexture?oe.texSubImage2D(oe.TEXTURE_2D,yt,$t,wn,Nt,pt,dn,Pt,nn.data):ee.isCompressedTexture?oe.compressedTexSubImage2D(oe.TEXTURE_2D,yt,$t,wn,nn.width,nn.height,dn,nn.data):oe.texSubImage2D(oe.TEXTURE_2D,yt,$t,wn,Nt,pt,dn,Pt,nn);oe.pixelStorei(oe.UNPACK_ROW_LENGTH,ln),oe.pixelStorei(oe.UNPACK_IMAGE_HEIGHT,qi),oe.pixelStorei(oe.UNPACK_SKIP_PIXELS,ks),oe.pixelStorei(oe.UNPACK_SKIP_ROWS,Ti),oe.pixelStorei(oe.UNPACK_SKIP_IMAGES,la),yt===0&&Se.generateMipmaps&&oe.generateMipmap(On),at.unbindTexture()},this.initRenderTarget=function(ee){Y.get(ee).__webglFramebuffer===void 0&&me.setupRenderTarget(ee)},this.initTexture=function(ee){ee.isCubeTexture?me.setTextureCube(ee,0):ee.isData3DTexture?me.setTexture3D(ee,0):ee.isDataArrayTexture||ee.isCompressedArrayTexture?me.setTexture2DArray(ee,0):me.setTexture2D(ee,0),at.unbindTexture()},this.resetState=function(){B=0,V=0,j=null,at.reset(),lt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return al}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Qn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Qn._getUnpackColorSpace()}}const jae=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:LA,AddEquation:kd,AddOperation:Ij,AdditiveAnimationBlendMode:m3,AdditiveBlending:uN,AgXToneMapping:s3,AlphaFormat:d3,AlwaysCompare:Vj,AlwaysDepth:SE,AlwaysStencilFunc:pN,AmbientLight:L8,AnimationAction:H8,AnimationClip:Y_,AnimationLoader:BJ,AnimationMixer:mee,AnimationObjectGroup:dee,AnimationUtils:kJ,ArcCurve:l8,ArrayCamera:B8,ArrowHelper:Bee,AttachedBindMode:dN,Audio:V8,AudioAnalyser:iee,AudioContext:j3,AudioListener:eee,AudioLoader:ZJ,AxesHelper:Vee,BackSide:io,BasicDepthPacking:Dj,BasicShadowMap:cj,BatchedMesh:n8,Bone:w3,BooleanKeyframeTrack:Tg,Box2:Eee,Box3:rs,Box3Helper:Fee,BoxGeometry:Eg,BoxHelper:Uee,BufferAttribute:yi,BufferGeometry:Sn,BufferGeometryLoader:z8,ByteType:c3,Cache:Bu,Camera:XA,CameraHelper:kee,CanvasTexture:aJ,CapsuleGeometry:tM,CatmullRomCurve3:c8,CineonToneMapping:r3,CircleGeometry:nM,ClampToEdgeWrapping:Uo,Clock:H3,Color:Bt,ColorKeyframeTrack:F3,ColorManagement:Qn,CompressedArrayTexture:iJ,CompressedCubeTexture:rJ,CompressedTexture:eM,CompressedTextureLoader:VJ,ConeGeometry:Px,ConstantAlphaFactor:Aj,ConstantColorFactor:Ej,Controls:Hee,CubeCamera:Kj,CubeDepthTexture:s8,CubeReflectionMapping:Zu,CubeRefractionMapping:ip,CubeTexture:Ix,CubeTextureLoader:jJ,CubeUVReflectionMapping:Qv,CubicBezierCurve:M3,CubicBezierCurve3:u8,CubicInterpolant:M8,CullFaceBack:cN,CullFaceFront:lj,CullFaceFrontBack:oZ,CullFaceNone:oj,Curve:qc,CurvePath:h8,CustomBlending:uj,CustomToneMapping:a3,CylinderGeometry:Rx,Cylindrical:wee,Data3DTexture:$A,DataArrayTexture:qA,DataTexture:Fc,DataTextureLoader:HJ,DataUtils:CQ,DecrementStencilOp:TZ,DecrementWrapStencilOp:MZ,DefaultLoadingManager:R8,DepthFormat:Ju,DepthStencilFormat:Gd,DepthTexture:Dv,DetachedBindMode:Rj,DirectionalLight:D8,DirectionalLightHelper:Lee,DiscreteInterpolant:C8,DodecahedronGeometry:iM,DoubleSide:ku,DstAlphaFactor:bj,DstColorFactor:xj,DynamicCopyUsage:jZ,DynamicDrawUsage:kZ,DynamicReadUsage:zZ,EdgesGeometry:o8,EllipseCurve:rM,EqualCompare:Fj,EqualDepth:EE,EqualStencilFunc:PZ,EquirectangularReflectionMapping:D_,EquirectangularRefractionMapping:L_,Euler:hl,EventDispatcher:uf,ExternalTexture:T3,ExtrudeGeometry:aM,FileLoader:ef,Float16BufferAttribute:LQ,Float32BufferAttribute:Gt,FloatType:eo,Fog:KA,FogExp2:YA,FramebufferTexture:nJ,FrontSide:hh,Frustum:Jv,FrustumArray:JA,GLBufferAttribute:_ee,GLSL1:GZ,GLSL3:mN,GreaterCompare:zj,GreaterDepth:AE,GreaterEqualCompare:WA,GreaterEqualDepth:TE,GreaterEqualStencilFunc:LZ,GreaterStencilFunc:OZ,GridHelper:Oee,Group:uv,HalfFloatType:Qu,HemisphereLight:P8,HemisphereLightHelper:Nee,IcosahedronGeometry:sM,ImageBitmapLoader:KJ,ImageLoader:K_,ImageUtils:qj,IncrementStencilOp:EZ,IncrementWrapStencilOp:AZ,InstancedBufferAttribute:Ov,InstancedBufferGeometry:F8,InstancedInterleavedBuffer:bee,InstancedMesh:t8,Int16BufferAttribute:OQ,Int32BufferAttribute:DQ,Int8BufferAttribute:RQ,IntType:UA,InterleavedBuffer:ZA,InterleavedBufferAttribute:rg,Interpolant:Dx,InterpolateDiscrete:F_,InterpolateLinear:sT,InterpolateSmooth:Kw,InterpolationSamplingMode:$Z,InterpolationSamplingType:qZ,InvertStencilOp:CZ,KeepStencilOp:Tm,KeyframeTrack:ic,LOD:Jj,LatheGeometry:oM,Layers:Pv,LessCompare:Uj,LessDepth:wE,LessEqualCompare:GA,LessEqualDepth:ng,LessEqualStencilFunc:NZ,LessStencilFunc:RZ,Light:bp,LightProbe:U8,Line:sp,Line3:Mee,LineBasicMaterial:ao,LineCurve:C3,LineCurve3:f8,LineDashedMaterial:T8,LineLoop:i8,LineSegments:ff,LinearFilter:ir,LinearInterpolant:U3,LinearMipMapLinearFilter:fZ,LinearMipMapNearestFilter:uZ,LinearMipmapLinearFilter:zu,LinearMipmapNearestFilter:m_,LinearSRGBColorSpace:rp,LinearToneMapping:n3,LinearTransfer:B_,Loader:so,LoaderUtils:_N,LoadingManager:z3,LoopOnce:Pj,LoopPingPong:Oj,LoopRepeat:Nj,MOUSE:wm,Material:Os,MaterialLoader:pM,MathUtils:Wj,Matrix2:$3,Matrix3:Nn,Matrix4:bn,MaxEquation:pj,Mesh:sa,MeshBasicMaterial:vp,MeshDepthMaterial:D3,MeshDistanceMaterial:L3,MeshLambertMaterial:w8,MeshMatcapMaterial:E8,MeshNormalMaterial:S8,MeshPhongMaterial:_8,MeshPhysicalMaterial:b8,MeshStandardMaterial:O3,MeshToonMaterial:x8,MinEquation:dj,MirroredRepeatWrapping:U_,MixOperation:Cj,MultiplyBlending:hN,MultiplyOperation:Mx,NearestFilter:Wr,NearestMipMapLinearFilter:cZ,NearestMipMapNearestFilter:lZ,NearestMipmapLinearFilter:lv,NearestMipmapNearestFilter:l3,NeutralToneMapping:o3,NeverCompare:kj,NeverDepth:xE,NeverStencilFunc:IZ,NoBlending:Gu,NoColorSpace:eh,NoNormalPacking:bZ,NoToneMapping:Zl,NormalAnimationBlendMode:HA,NormalBlending:Wm,NormalGAPacking:xZ,NormalRGPacking:_Z,NotEqualCompare:Bj,NotEqualDepth:ME,NotEqualStencilFunc:DZ,NumberKeyframeTrack:$_,Object3D:li,ObjectLoader:XJ,ObjectSpaceNormalMap:Lj,OctahedronGeometry:Nx,OneFactor:gj,OneMinusConstantAlphaFactor:Mj,OneMinusConstantColorFactor:Tj,OneMinusDstAlphaFactor:_j,OneMinusDstColorFactor:Sj,OneMinusSrcAlphaFactor:_E,OneMinusSrcColorFactor:yj,OrthographicCamera:ch,PCFShadowMap:mv,PCFSoftShadowMap:p_,PMREMGenerator:EN,Path:uT,PerspectiveCamera:Gr,Plane:Qf,PlaneGeometry:ey,PlaneHelper:zee,PointLight:O8,PointLightHelper:Ree,Points:r8,PointsMaterial:E3,PolarGridHelper:Dee,PolyhedronGeometry:yp,PositionalAudio:nee,PropertyBinding:oi,PropertyMixer:j8,QuadraticBezierCurve:I3,QuadraticBezierCurve3:R3,Quaternion:Rs,QuaternionKeyframeTrack:Lx,QuaternionLinearInterpolant:I8,R11_EAC_Format:LE,RED_GREEN_RGTC2_Format:rT,RED_RGTC1_Format:nT,REVISION:DA,RG11_EAC_Format:UE,RGBADepthPacking:gZ,RGBAFormat:Is,RGBAIntegerFormat:jA,RGBA_ASTC_10x10_Format:KE,RGBA_ASTC_10x5_Format:$E,RGBA_ASTC_10x6_Format:XE,RGBA_ASTC_10x8_Format:YE,RGBA_ASTC_12x10_Format:ZE,RGBA_ASTC_12x12_Format:QE,RGBA_ASTC_4x4_Format:zE,RGBA_ASTC_5x4_Format:BE,RGBA_ASTC_5x5_Format:VE,RGBA_ASTC_6x5_Format:jE,RGBA_ASTC_6x6_Format:HE,RGBA_ASTC_8x5_Format:GE,RGBA_ASTC_8x6_Format:WE,RGBA_ASTC_8x8_Format:qE,RGBA_BPTC_Format:JE,RGBA_ETC2_EAC_Format:DE,RGBA_PVRTC_2BPPV1_Format:PE,RGBA_PVRTC_4BPPV1_Format:RE,RGBA_S3TC_DXT1_Format:v_,RGBA_S3TC_DXT3_Format:y_,RGBA_S3TC_DXT5_Format:b_,RGBDepthPacking:vZ,RGBFormat:p3,RGBIntegerFormat:hZ,RGB_BPTC_SIGNED_Format:eT,RGB_BPTC_UNSIGNED_Format:tT,RGB_ETC1_Format:NE,RGB_ETC2_Format:OE,RGB_PVRTC_2BPPV1_Format:IE,RGB_PVRTC_4BPPV1_Format:CE,RGB_S3TC_DXT1_Format:g_,RGDepthPacking:yZ,RGFormat:ig,RGIntegerFormat:VA,RawShaderMaterial:N3,Ray:wg,Raycaster:G8,RectAreaLight:k8,RedFormat:BA,RedIntegerFormat:Cx,ReinhardToneMapping:i3,RenderTarget:v3,RenderTarget3D:gee,RepeatWrapping:k_,ReplaceStencilOp:wZ,ReverseSubtractEquation:hj,RingGeometry:lM,SIGNED_R11_EAC_Format:kE,SIGNED_RED_GREEN_RGTC2_Format:aT,SIGNED_RED_RGTC1_Format:iT,SIGNED_RG11_EAC_Format:FE,SRGBColorSpace:ts,SRGBTransfer:Si,Scene:x3,ShaderChunk:zn,ShaderLib:Nc,ShaderMaterial:Jl,ShadowMaterial:y8,Shape:$m,ShapeGeometry:cM,ShapePath:jee,ShapeUtils:kc,ShortType:u3,Skeleton:QA,SkeletonHelper:Iee,SkinnedMesh:e8,Source:Wd,Sphere:Pa,SphereGeometry:Ox,Spherical:SN,SphericalHarmonics3:V3,SplineCurve:P3,SpotLight:N8,SpotLightHelper:Cee,Sprite:Qj,SpriteMaterial:S3,SrcAlphaFactor:bE,SrcAlphaSaturateFactor:wj,SrcColorFactor:vj,StaticCopyUsage:VZ,StaticDrawUsage:V_,StaticReadUsage:FZ,StereoCamera:QJ,StreamCopyUsage:HZ,StreamDrawUsage:UZ,StreamReadUsage:BZ,StringKeyframeTrack:Ag,SubtractEquation:fj,SubtractiveBlending:fN,TOUCH:Em,TangentSpaceNormalMap:gp,TetrahedronGeometry:uM,Texture:Nr,TextureLoader:GJ,TextureUtils:Xee,Timer:xee,TimestampQuery:WZ,TorusGeometry:fM,TorusKnotGeometry:hM,Triangle:Lo,TriangleFanDrawMode:mZ,TriangleStripDrawMode:pZ,TrianglesDrawMode:dZ,TubeGeometry:dM,UVMapping:kA,Uint16BufferAttribute:y3,Uint32BufferAttribute:b3,Uint8BufferAttribute:PQ,Uint8ClampedBufferAttribute:NQ,Uniform:q3,UniformsGroup:yee,UniformsLib:kt,UniformsUtils:Yj,UnsignedByteType:Qs,UnsignedInt101111Type:h3,UnsignedInt248Type:Mv,UnsignedInt5999Type:f3,UnsignedIntType:Ql,UnsignedShort4444Type:FA,UnsignedShort5551Type:zA,UnsignedShortType:Av,VSMShadowMap:Om,Vector2:rt,Vector3:ce,Vector4:Fi,VectorKeyframeTrack:X_,VideoFrameTexture:tJ,VideoTexture:a8,WebGL3DRenderTarget:yQ,WebGLArrayRenderTarget:vQ,WebGLCoordinateSystem:al,WebGLCubeRenderTarget:_3,WebGLRenderTarget:ul,WebGLRenderer:Q8,WebGLUtils:Z8,WebGPUCoordinateSystem:Cv,WebXRController:Zw,WireframeGeometry:v8,WrapAroundEnding:z_,ZeroCurvatureEnding:Dm,ZeroFactor:mj,ZeroSlopeEnding:Lm,ZeroStencilOp:SZ,createCanvasElement:Gj,error:tn,getConsoleFunction:KZ,log:H_,setConsoleFunction:YZ,warn:Dt,warnOnce:Iv},Symbol.toStringTag,{value:"Module"}));var nR={exports:{}},iR={},rR={exports:{}},aR={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s2;function Hae(){if(s2)return aR;s2=1;var n=Kv();function e(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,a=n.useLayoutEffect,s=n.useDebugValue;function o(p,v){var y=v(),_=i({inst:{value:y,getSnapshot:v}}),E=_[0].inst,S=_[1];return a(function(){E.value=y,E.getSnapshot=v,c(E)&&S({inst:E})},[p,y,v]),r(function(){return c(E)&&S({inst:E}),p(function(){c(E)&&S({inst:E})})},[p]),s(y),y}function c(p){var v=p.getSnapshot;p=p.value;try{var y=v();return!t(p,y)}catch{return!0}}function f(p,v){return v()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:o;return aR.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:h,aR}var o2;function Gae(){return o2||(o2=1,rR.exports=Hae()),rR.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l2;function Wae(){if(l2)return iR;l2=1;var n=Kv(),e=Gae();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var i=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,a=n.useRef,s=n.useEffect,o=n.useMemo,c=n.useDebugValue;return iR.useSyncExternalStoreWithSelector=function(f,h,p,v,y){var _=a(null);if(_.current===null){var E={hasValue:!1,value:null};_.current=E}else E=_.current;_=o(function(){function w(k){if(!I){if(I=!0,P=k,k=v(k),y!==void 0&&E.hasValue){var U=E.value;if(y(U,k))return D=U}return D=k}if(U=D,i(P,k))return U;var R=v(k);return y!==void 0&&y(U,R)?(P=k,U):(P=k,D=R)}var I=!1,P,D,z=p===void 0?null:p;return[function(){return w(h())},z===null?void 0:function(){return w(z())}]},[h,p,v,y]);var S=r(f,_[0],_[1]);return s(function(){E.hasValue=!0,E.value=S},[S]),c(S),S},iR}var c2;function qae(){return c2||(c2=1,nR.exports=Wae()),nR.exports}var J8=qae();const $ae=Wc(J8),u2=n=>{let e;const t=new Set,i=(f,h)=>{const p=typeof f=="function"?f(e):f;if(!Object.is(p,e)){const v=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(y=>y(e,v))}},r=()=>e,o={setState:i,getState:r,getInitialState:()=>c,subscribe:f=>(t.add(f),()=>t.delete(f))},c=e=n(i,r,o);return o},Xae=(n=>n?u2(n):u2),{useSyncExternalStoreWithSelector:Yae}=$ae,Kae=n=>n;function Zae(n,e=Kae,t){const i=Yae(n.subscribe,n.getState,n.getInitialState,e,t);return _g.useDebugValue(i),i}const f2=(n,e)=>{const t=Xae(n),i=(r,a=e)=>Zae(t,r,a);return Object.assign(i,t),i},Qae=((n,e)=>n?f2(n,e):f2),Jae=n=>typeof n=="object"&&typeof n.then=="function",Um=[];function e9(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function t9(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const a of Um)if(e9(e,a.keys,a.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return i.lifespan&&i.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,i.lifespan)),a.response;if(!t)throw a.promise}const r={keys:e,equal:i.equal,remove:()=>{const a=Um.indexOf(r);a!==-1&&Um.splice(a,1)},promise:(Jae(n)?n:n(...e)).then(a=>{r.response=a,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(a=>r.error=a)};if(Um.push(r),!t)throw r.promise}const ese=(n,e,t)=>t9(n,e,!1,t),tse=(n,e,t)=>void t9(n,e,!0,t),nse=n=>{if(n===void 0||n.length===0)Um.splice(0,Um.length);else{const e=Um.find(t=>e9(n,t.keys,t.equal));e&&e.remove()}};var MN=qV();const ise=Wc(MN);function X3(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=X3(i,e,t);if(r)return r;i=e?null:i.sibling}}function n9(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const Y3=n9(q.createContext(null));class i9 extends q.Component{render(){return q.createElement(Y3.Provider,{value:this._reactInternals},this.props.children)}}function r9(){const n=q.useContext(Y3);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=q.useId();return q.useMemo(()=>{for(const t of[n,n==null?void 0:n.alternate]){if(!t)continue;const i=X3(t,!1,r=>{let a=r.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[n,e])}const rse=Symbol.for("react.context"),ase=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===rse;function sse(){const n=r9(),[e]=q.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;ase(i)&&i!==Y3&&!e.has(i)&&e.set(i,q.use(n9(i))),t=t.return}return e}function ose(){const n=sse();return q.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>q.createElement(e,null,q.createElement(t.Provider,{...i,value:n.get(t)})),e=>q.createElement(i9,{...e})),[n])}function a9(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const s9=n=>n&&n.isOrthographicCamera,lse=n=>n&&n.hasOwnProperty("current"),cse=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),kx=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?q.useLayoutEffect:q.useEffect;function o9(n){const e=q.useRef(n);return kx(()=>void(e.current=n),[n]),e}function use(){const n=r9(),e=ose();return q.useMemo(()=>({children:t})=>{const r=!!X3(n,!0,a=>a.type===q.StrictMode)?q.StrictMode:q.Fragment;return N.jsx(r,{children:N.jsx(e,{children:t})})},[n,e])}function fse({set:n}){return kx(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const hse=(n=>(n=class extends q.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function l9(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function X0(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const ur={obj:n=>n===Object(n)&&!ur.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(ur.str(n)||ur.num(n)||ur.boo(n))return n===e;const a=ur.obj(n);if(a&&i==="reference")return n===e;const s=ur.arr(n);if(s&&t==="reference")return n===e;if((s||a)&&n===e)return!0;let o;for(o in n)if(!(o in e))return!1;if(a&&t==="shallow"&&i==="shallow"){for(o in r?e:n)if(!ur.equ(n[o],e[o],{strict:r,objects:"reference"}))return!1}else for(o in r?e:n)if(n[o]!==e[o])return!1;if(ur.und(o)){if(s&&n.length===0&&e.length===0||a&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function dse(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function pse(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const c9=["children","key","ref"];function mse(n){const e={};for(const t in n)c9.includes(t)||(e[t]=n[t]);return e}function fT(n,e,t,i){const r=n;let a=r==null?void 0:r.__r3f;return a||(a={root:e,type:t,parent:null,children:[],props:mse(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=a)),a}function Z_(n,e){if(!e.includes("-"))return{root:n,key:e,target:n[e]};if(e in n)return{root:n,key:e,target:n[e]};let t=n;const i=e.split("-");for(const r of i){if(typeof t!="object"||t===null){if(t!==void 0){const a=i.slice(i.indexOf(r)).join("-");return{root:t,key:a,target:void 0}}return{root:n,key:e,target:void 0}}e=r,n=t,t=t[e]}return{root:n,key:e,target:t}}const h2=/-\d+$/;function hT(n,e){if(ur.str(e.props.attach)){if(h2.test(e.props.attach)){const r=e.props.attach.replace(h2,""),{root:a,key:s}=Z_(n.object,r);Array.isArray(a[s])||(a[s]=[])}const{root:t,key:i}=Z_(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else ur.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function dT(n,e){if(ur.str(e.props.attach)){const{root:t,key:i}=Z_(n.object,e.props.attach),r=e.previousAttach;r===void 0?delete t[i]:t[i]=r}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const CN=[...c9,"args","dispose","attach","object","onUpdate","dispose"],d2=new Map;function gse(n){let e=d2.get(n.constructor);try{e||(e=new n.constructor,d2.set(n.constructor,e))}catch{}return e}function vse(n,e){const t={};for(const i in e)if(!CN.includes(i)&&!ur.equ(e[i],n.props[i])){t[i]=e[i];for(const r in e)r.startsWith(`${i}-`)&&(t[r]=e[r])}for(const i in n.props){if(CN.includes(i)||e.hasOwnProperty(i))continue;const{root:r,key:a}=Z_(n.object,i);if(r.constructor&&r.constructor.length===0){const s=gse(r);ur.und(s)||(t[a]=s[a])}else t[a]=0}return t}const yse=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],bse=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Ud(n,e){var t;const i=n.__r3f,r=i&&a9(i).getState(),a=i==null?void 0:i.eventCount;for(const o in e){let c=e[o];if(CN.includes(o))continue;if(i&&bse.test(o)){typeof c=="function"?i.handlers[o]=c:delete i.handlers[o],i.eventCount=Object.keys(i.handlers).length;continue}if(c===void 0)continue;let{root:f,key:h,target:p}=Z_(n,o);if(p===void 0&&(typeof f!="object"||f===null))throw Error(`R3F: Cannot set "${o}". Ensure it is an object before setting "${h}".`);if(p instanceof Pv&&c instanceof Pv)p.mask=c.mask;else if(p instanceof Bt&&cse(c))p.set(c);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&typeof p.copy=="function"&&c!=null&&c.constructor&&p.constructor===c.constructor)p.copy(c);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&Array.isArray(c))typeof p.fromArray=="function"?p.fromArray(c):p.set(...c);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&typeof c=="number")typeof p.setScalar=="function"?p.setScalar(c):p.set(c);else{var s;f[h]=c,r&&!r.linear&&yse.includes(h)&&(s=f[h])!=null&&s.isTexture&&f[h].format===Is&&f[h].type===Qs&&(f[h].colorSpace=ts)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(t=i.object)!=null&&t.isObject3D&&a!==i.eventCount){const o=i.object,c=r.internal.interaction.indexOf(o);c>-1&&r.internal.interaction.splice(c,1),i.eventCount&&o.raycast!==null&&r.internal.interaction.push(o)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&ny(i),n}function ny(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function _se(n,e){n.manual||(s9(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const Zs=n=>n==null?void 0:n.isObject3D;function bw(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function u9(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function xse(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{u9(t.capturedMap,e,i,r)})}function Sse(n){function e(c){const{internal:f}=n.getState(),h=c.offsetX-f.initialClick[0],p=c.offsetY-f.initialClick[1];return Math.round(Math.sqrt(h*h+p*p))}function t(c){return c.filter(f=>["Move","Over","Enter","Out","Leave"].some(h=>{var p;return(p=f.__r3f)==null?void 0:p.handlers["onPointer"+h]}))}function i(c,f){const h=n.getState(),p=new Set,v=[],y=f?f(h.internal.interaction):h.internal.interaction;for(let w=0;w<y.length;w++){const I=X0(y[w]);I&&(I.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(c,h);function _(w){const I=X0(w);if(!I||!I.events.enabled||I.raycaster.camera===null)return[];if(I.raycaster.camera===void 0){var P;I.events.compute==null||I.events.compute(c,I,(P=I.previousRoot)==null?void 0:P.getState()),I.raycaster.camera===void 0&&(I.raycaster.camera=null)}return I.raycaster.camera?I.raycaster.intersectObject(w,!0):[]}let E=y.flatMap(_).sort((w,I)=>{const P=X0(w.object),D=X0(I.object);return!P||!D?w.distance-I.distance:D.events.priority-P.events.priority||w.distance-I.distance}).filter(w=>{const I=bw(w);return p.has(I)?!1:(p.add(I),!0)});h.events.filter&&(E=h.events.filter(E,h));for(const w of E){let I=w.object;for(;I;){var S;(S=I.__r3f)!=null&&S.eventCount&&v.push({...w,eventObject:I}),I=I.parent}}if("pointerId"in c&&h.internal.capturedMap.has(c.pointerId))for(let w of h.internal.capturedMap.get(c.pointerId).values())p.has(bw(w.intersection))||v.push(w.intersection);return v}function r(c,f,h,p){if(c.length){const v={stopped:!1};for(const y of c){let _=X0(y.object);if(_||y.object.traverseAncestors(E=>{const S=X0(E);if(S)return _=S,!1}),_){const{raycaster:E,pointer:S,camera:w,internal:I}=_,P=new ce(S.x,S.y,0).unproject(w),D=M=>{var L,B;return(L=(B=I.capturedMap.get(M))==null?void 0:B.has(y.eventObject))!=null?L:!1},z=M=>{const L={intersection:y,target:f.target};I.capturedMap.has(M)?I.capturedMap.get(M).set(y.eventObject,L):I.capturedMap.set(M,new Map([[y.eventObject,L]])),f.target.setPointerCapture(M)},k=M=>{const L=I.capturedMap.get(M);L&&u9(I.capturedMap,y.eventObject,L,M)};let U={};for(let M in f){let L=f[M];typeof L!="function"&&(U[M]=L)}let R={...y,...U,pointer:S,intersections:c,stopped:v.stopped,delta:h,unprojectedPoint:P,ray:E.ray,camera:w,stopPropagation(){const M="pointerId"in f&&I.capturedMap.get(f.pointerId);if((!M||M.has(y.eventObject))&&(R.stopped=v.stopped=!0,I.hovered.size&&Array.from(I.hovered.values()).find(L=>L.eventObject===y.eventObject))){const L=c.slice(0,c.indexOf(y));a([...L,y])}},target:{hasPointerCapture:D,setPointerCapture:z,releasePointerCapture:k},currentTarget:{hasPointerCapture:D,setPointerCapture:z,releasePointerCapture:k},nativeEvent:f};if(p(R),v.stopped===!0)break}}}return c}function a(c){const{internal:f}=n.getState();for(const h of f.hovered.values())if(!c.length||!c.find(p=>p.object===h.object&&p.index===h.index&&p.instanceId===h.instanceId)){const v=h.eventObject.__r3f;if(f.hovered.delete(bw(h)),v!=null&&v.eventCount){const y=v.handlers,_={...h,intersections:c};y.onPointerOut==null||y.onPointerOut(_),y.onPointerLeave==null||y.onPointerLeave(_)}}}function s(c,f){for(let h=0;h<f.length;h++){const p=f[h].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(c)}}function o(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return f=>{const{internal:h}=n.getState();"pointerId"in f&&h.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(f.pointerId)&&(h.capturedMap.delete(f.pointerId),a([]))})}}return function(h){const{onPointerMissed:p,internal:v}=n.getState();v.lastEvent.current=h;const y=c==="onPointerMove",_=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",S=i(h,y?t:void 0),w=_?e(h):0;c==="onPointerDown"&&(v.initialClick=[h.offsetX,h.offsetY],v.initialHits=S.map(P=>P.eventObject)),_&&!S.length&&w<=2&&(s(h,v.interaction),p&&p(h)),y&&a(S);function I(P){const D=P.eventObject,z=D.__r3f;if(!(z!=null&&z.eventCount))return;const k=z.handlers;if(y){if(k.onPointerOver||k.onPointerEnter||k.onPointerOut||k.onPointerLeave){const U=bw(P),R=v.hovered.get(U);R?R.stopped&&P.stopPropagation():(v.hovered.set(U,P),k.onPointerOver==null||k.onPointerOver(P),k.onPointerEnter==null||k.onPointerEnter(P))}k.onPointerMove==null||k.onPointerMove(P)}else{const U=k[c];U?(!_||v.initialHits.includes(D))&&(s(h,v.interaction.filter(R=>!v.initialHits.includes(R))),U(P)):_&&v.initialHits.includes(D)&&s(h,v.interaction.filter(R=>!v.initialHits.includes(R)))}}r(S,h,w,I)}}return{handlePointer:o}}const p2=n=>!!(n!=null&&n.render),f9=q.createContext(null),wse=(n,e)=>{const t=Qae((o,c)=>{const f=new ce,h=new ce,p=new ce;function v(w=c().camera,I=h,P=c().size){const{width:D,height:z,top:k,left:U}=P,R=D/z;I.isVector3?p.copy(I):p.set(...I);const M=w.getWorldPosition(f).distanceTo(p);if(s9(w))return{width:D/w.zoom,height:z/w.zoom,top:k,left:U,factor:1,distance:M,aspect:R};{const L=w.fov*Math.PI/180,B=2*Math.tan(L/2)*M,V=B*(D/z);return{width:V,height:B,top:k,left:U,factor:D/V,distance:M,aspect:R}}}let y;const _=w=>o(I=>({performance:{...I.performance,current:w}})),E=new rt;return{set:o,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(w=1)=>n(c(),w),advance:(w,I)=>e(w,I,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new H3,pointer:E,mouse:E,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const w=c();y&&clearTimeout(y),w.performance.current!==w.performance.min&&_(w.performance.min),y=setTimeout(()=>_(c().performance.max),w.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:w=>o(I=>({...I,events:{...I.events,...w}})),setSize:(w,I,P=0,D=0)=>{const z=c().camera,k={width:w,height:I,top:P,left:D};o(U=>({size:k,viewport:{...U.viewport,...v(z,h,k)}}))},setDpr:w=>o(I=>{const P=l9(w);return{viewport:{...I.viewport,dpr:P,initialDpr:I.viewport.initialDpr||P}}}),setFrameloop:(w="always")=>{const I=c().clock;I.stop(),I.elapsedTime=0,w!=="never"&&(I.start(),I.elapsedTime=0),o(()=>({frameloop:w}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:q.createRef(),active:!1,frames:0,priority:0,subscribe:(w,I,P)=>{const D=c().internal;return D.priority=D.priority+(I>0?1:0),D.subscribers.push({ref:w,priority:I,store:P}),D.subscribers=D.subscribers.sort((z,k)=>z.priority-k.priority),()=>{const z=c().internal;z!=null&&z.subscribers&&(z.priority=z.priority-(I>0?1:0),z.subscribers=z.subscribers.filter(k=>k.ref!==w))}}}}}),i=t.getState();let r=i.size,a=i.viewport.dpr,s=i.camera;return t.subscribe(()=>{const{camera:o,size:c,viewport:f,gl:h,set:p}=t.getState();if(c.width!==r.width||c.height!==r.height||f.dpr!==a){r=c,a=f.dpr,_se(o,c),f.dpr>0&&h.setPixelRatio(f.dpr);const v=typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(c.width,c.height,v)}o!==s&&(s=o,p(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>n(o)),t};function h9(){const n=q.useContext(f9);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Cd(n=t=>t,e){return h9()(n,e)}function K3(n,e=0){const t=h9(),i=t.getState().internal.subscribe,r=o9(n);return kx(()=>i(r,e,t),[e,i,t]),null}const m2=new WeakMap,Ese=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function d9(n,e){return function(t,...i){let r;return Ese(t)?(r=m2.get(t),r||(r=new t,m2.set(t,r))):r=t,n&&n(r),Promise.all(i.map(a=>new Promise((s,o)=>r.load(a,c=>{Zs(c==null?void 0:c.scene)&&Object.assign(c,dse(c.scene)),s(c)},e,c=>o(new Error(`Could not load ${a}: ${c==null?void 0:c.message}`))))))}}function Z3(n,e,t,i){const r=Array.isArray(e)?e:[e],a=ese(d9(t,i),[n,...r],{equal:ur.equ});return Array.isArray(e)?a:a[0]}Z3.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return tse(d9(t),[n,...i])};Z3.clear=function(n,e){const t=Array.isArray(e)?e:[e];return nse([n,...t])};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */const Tse=1,Ase=8,Mse=32,Cse=2;var Ise={version:"9.5.0"};function Rse(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var g2={exports:{}},v2={exports:{}},y2;function Pse(){return y2||(y2=1,(function(n){n.exports=function(e){function t(d,m,x,A){return new Ny(d,m,x,A)}function i(){}function r(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(d){var m=d,x=d;if(d.alternate)for(;m.return;)m=m.return;else{d=m;do m=d,(m.flags&4098)!==0&&(x=m.return),d=m.return;while(d)}return m.tag===3?x:null}function s(d){if(a(d)!==d)throw Error(r(188))}function o(d){var m=d.alternate;if(!m){if(m=a(d),m===null)throw Error(r(188));return m!==d?null:d}for(var x=d,A=m;;){var F=x.return;if(F===null)break;var H=F.alternate;if(H===null){if(A=F.return,A!==null){x=A;continue}break}if(F.child===H.child){for(H=F.child;H;){if(H===x)return s(F),d;if(H===A)return s(F),m;H=H.sibling}throw Error(r(188))}if(x.return!==A.return)x=F,A=H;else{for(var te=!1,_e=F.child;_e;){if(_e===x){te=!0,x=F,A=H;break}if(_e===A){te=!0,A=F,x=H;break}_e=_e.sibling}if(!te){for(_e=H.child;_e;){if(_e===x){te=!0,x=H,A=F;break}if(_e===A){te=!0,A=H,x=F;break}_e=_e.sibling}if(!te)throw Error(r(189))}}if(x.alternate!==A)throw Error(r(190))}if(x.tag!==3)throw Error(r(188));return x.stateNode.current===x?d:m}function c(d){var m=d.tag;if(m===5||m===26||m===27||m===6)return d;for(d=d.child;d!==null;){if(m=c(d),m!==null)return m;d=d.sibling}return null}function f(d){var m=d.tag;if(m===5||m===26||m===27||m===6)return d;for(d=d.child;d!==null;){if(d.tag!==4&&(m=f(d),m!==null))return m;d=d.sibling}return null}function h(d){return d===null||typeof d!="object"?null:(d=vc&&d[vc]||d["@@iterator"],typeof d=="function"?d:null)}function p(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===fu?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case Cf:return"Fragment";case Rf:return"Profiler";case If:return"StrictMode";case Yg:return"Suspense";case gc:return"SuspenseList";case Hp:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case Mf:return"Portal";case bo:return d.displayName||"Context";case jp:return(d._context.displayName||"Context")+".Consumer";case Qh:var m=d.render;return d=d.displayName,d||(d=m.displayName||m.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case Kg:return m=d.displayName||null,m!==null?m:p(d.type)||"Memo";case Ha:m=d._payload,d=d._init;try{return p(d(m))}catch{}}return null}function v(d){return{current:d}}function y(d){0>Lf||(d.current=c0[Lf],c0[Lf]=null,Lf--)}function _(d,m){Lf++,c0[Lf]=d.current,d.current=m}function E(d){return d>>>=0,d===0?32:31-(u0(d)/lS|0)|0}function S(d){var m=d&42;if(m!==0)return m;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return d&261888;case 262144:case 524288:case 1048576:case 2097152:return d&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function w(d,m,x){var A=d.pendingLanes;if(A===0)return 0;var F=0,H=d.suspendedLanes,te=d.pingedLanes;d=d.warmLanes;var _e=A&134217727;return _e!==0?(A=_e&~H,A!==0?F=S(A):(te&=_e,te!==0?F=S(te):x||(x=_e&~d,x!==0&&(F=S(x))))):(_e=A&~H,_e!==0?F=S(_e):te!==0?F=S(te):x||(x=A&~d,x!==0&&(F=S(x)))),F===0?0:m!==0&&m!==F&&(m&H)===0&&(H=F&-F,x=m&-m,H>=x||H===32&&(x&4194048)!==0)?m:F}function I(d,m){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&m)===0}function P(d,m){switch(d){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function D(){var d=ad;return ad<<=1,(ad&62914560)===0&&(ad=4194304),d}function z(d){for(var m=[],x=0;31>x;x++)m.push(d);return m}function k(d,m){d.pendingLanes|=m,m!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function U(d,m,x,A,F,H){var te=d.pendingLanes;d.pendingLanes=x,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=x,d.entangledLanes&=x,d.errorRecoveryDisabledLanes&=x,d.shellSuspendCounter=0;var _e=d.entanglements,$e=d.expirationTimes,mt=d.hiddenUpdates;for(x=te&~x;0<x;){var Ct=31-ms(x),St=1<<Ct;_e[Ct]=0,$e[Ct]=-1;var zt=mt[Ct];if(zt!==null)for(mt[Ct]=null,Ct=0;Ct<zt.length;Ct++){var Tn=zt[Ct];Tn!==null&&(Tn.lane&=-536870913)}x&=~St}A!==0&&R(d,A,0),H!==0&&F===0&&d.tag!==0&&(d.suspendedLanes|=H&~(te&~m))}function R(d,m,x){d.pendingLanes|=m,d.suspendedLanes&=~m;var A=31-ms(m);d.entangledLanes|=m,d.entanglements[A]=d.entanglements[A]|1073741824|x&261930}function M(d,m){var x=d.entangledLanes|=m;for(d=d.entanglements;x;){var A=31-ms(x),F=1<<A;F&m|d[A]&m&&(d[A]|=m),x&=~F}}function L(d,m){var x=m&-m;return x=(x&42)!==0?1:B(x),(x&(d.suspendedLanes|m))!==0?0:x}function B(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function V(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function j(d){if(typeof vb=="function"&&fS(d),gs&&typeof gs.setStrictMode=="function")try{gs.setStrictMode(Uf,d)}catch{}}function Z(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}function J(d){if(g0===void 0)try{throw Error()}catch(x){var m=x.stack.trim().match(/\n( *(at )?)/);g0=m&&m[1]||"",Ll=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+g0+d+Ll}function G(d,m){if(!d||Qp)return"";Qp=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var A={DetermineComponentFrameRoot:function(){try{if(m){var St=function(){throw Error()};if(Object.defineProperty(St.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(St,[])}catch(Tn){var zt=Tn}Reflect.construct(d,[],St)}else{try{St.call()}catch(Tn){zt=Tn}d.call(St.prototype)}}else{try{throw Error()}catch(Tn){zt=Tn}(St=d())&&typeof St.catch=="function"&&St.catch(function(){})}}catch(Tn){if(Tn&&zt&&typeof Tn.stack=="string")return[Tn.stack,zt.stack]}return[null,null]}};A.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var F=Object.getOwnPropertyDescriptor(A.DetermineComponentFrameRoot,"name");F&&F.configurable&&Object.defineProperty(A.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var H=A.DetermineComponentFrameRoot(),te=H[0],_e=H[1];if(te&&_e){var $e=te.split(`
`),mt=_e.split(`
`);for(F=A=0;A<$e.length&&!$e[A].includes("DetermineComponentFrameRoot");)A++;for(;F<mt.length&&!mt[F].includes("DetermineComponentFrameRoot");)F++;if(A===$e.length||F===mt.length)for(A=$e.length-1,F=mt.length-1;1<=A&&0<=F&&$e[A]!==mt[F];)F--;for(;1<=A&&0<=F;A--,F--)if($e[A]!==mt[F]){if(A!==1||F!==1)do if(A--,F--,0>F||$e[A]!==mt[F]){var Ct=`
`+$e[A].replace(" at new "," at ");return d.displayName&&Ct.includes("<anonymous>")&&(Ct=Ct.replace("<anonymous>",d.displayName)),Ct}while(1<=A&&0<=F);break}}}finally{Qp=!1,Error.prepareStackTrace=x}return(x=d?d.displayName||d.name:"")?J(x):""}function $(d,m){switch(d.tag){case 26:case 27:case 5:return J(d.type);case 16:return J("Lazy");case 13:return d.child!==m&&m!==null?J("Suspense Fallback"):J("Suspense");case 19:return J("SuspenseList");case 0:case 15:return G(d.type,!1);case 11:return G(d.type.render,!1);case 1:return G(d.type,!0);case 31:return J("Activity");default:return""}}function ae(d){try{var m="",x=null;do m+=$(d,x),x=d,d=d.return;while(d);return m}catch(A){return`
Error generating stack: `+A.message+`
`+A.stack}}function le(d,m){if(typeof d=="object"&&d!==null){var x=yb.get(d);return x!==void 0?x:(m={value:d,source:m,stack:ae(m)},yb.set(d,m),m)}return{value:d,source:m,stack:ae(m)}}function ue(d,m){_c[kl++]=Jp,_c[kl++]=xi,xi=d,Jp=m}function Q(d,m,x){So[Hs++]=ca,So[Hs++]=Zo,So[Hs++]=wo,wo=d;var A=ca;d=Zo;var F=32-ms(A)-1;A&=~(1<<F),x+=1;var H=32-ms(m)+F;if(30<H){var te=F-F%5;H=(A&(1<<te)-1).toString(32),A>>=te,F-=te,ca=1<<32-ms(m)+F|x<<F|A,Zo=H+d}else ca=1<<H|x<<F|A,Zo=d}function re(d){d.return!==null&&(ue(d,1),Q(d,1,0))}function ye(d){for(;d===xi;)xi=_c[--kl],_c[kl]=null,Jp=_c[--kl],_c[kl]=null;for(;d===wo;)wo=So[--Hs],So[Hs]=null,Zo=So[--Hs],So[Hs]=null,ca=So[--Hs],So[Hs]=null}function de(d,m){So[Hs++]=ca,So[Hs++]=Zo,So[Hs++]=wo,ca=m.id,Zo=m.overflow,wo=d}function xe(d,m){_(ua,m),_(xc,d),_(Qr,null),d=E1(m),y(Qr),_(Qr,d)}function ve(){y(Qr),y(xc),y(ua)}function Te(d){d.memoizedState!==null&&_(em,d);var m=Qr.current,x=td(m,d.type);m!==x&&(_(xc,d),_(Qr,x))}function Ze(d){xc.current===d&&(y(Qr),y(xc)),em.current===d&&(y(em),gr?Of._currentValue=Nf:Of._currentValue2=Nf)}function be(d){var m=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw je(le(m,d)),v0}function Ve(d,m){if(!ji)throw Error(r(175));K1(d.stateNode,d.type,d.memoizedProps,m,d)||be(d,!0)}function vt(d){for(zr=d.return;zr;)switch(zr.tag){case 5:case 31:case 13:Wa=!1;return;case 27:case 3:Wa=!0;return;default:zr=zr.return}}function Ie(d){if(!ji||d!==zr)return!1;if(!Hn)return vt(d),Hn=!0,!1;var m=d.tag;if(Fr?m!==3&&m!==27&&(m!==5||rd(d.type)&&!Ga(d.type,d.memoizedProps))&&Hi&&be(d):m!==3&&(m!==5||rd(d.type)&&!Ga(d.type,d.memoizedProps))&&Hi&&be(d),vt(d),m===13){if(!ji)throw Error(r(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));Hi=sb(d)}else if(m===31){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));Hi=Q1(d)}else Hi=Fr&&m===27?j1(d.type,Hi):zr?V1(d.stateNode):null;return!0}function It(){ji&&(Hi=zr=null,Hn=!1)}function Ne(){var d=Ul;return d!==null&&(bs===null?bs=d:bs.push.apply(bs,d),Ul=null),d}function je(d){Ul===null?Ul=[d]:Ul.push(d)}function Le(d,m,x){gr?(_(Eo,m._currentValue),m._currentValue=x):(_(Eo,m._currentValue2),m._currentValue2=x)}function Qe(d){var m=Eo.current;gr?d._currentValue=m:d._currentValue2=m,y(Eo)}function oe(d,m,x){for(;d!==null;){var A=d.alternate;if((d.childLanes&m)!==m?(d.childLanes|=m,A!==null&&(A.childLanes|=m)):A!==null&&(A.childLanes&m)!==m&&(A.childLanes|=m),d===x)break;d=d.return}}function _t(d,m,x,A){var F=d.child;for(F!==null&&(F.return=d);F!==null;){var H=F.dependencies;if(H!==null){var te=F.child;H=H.firstContext;e:for(;H!==null;){var _e=H;H=F;for(var $e=0;$e<m.length;$e++)if(_e.context===m[$e]){H.lanes|=x,_e=H.alternate,_e!==null&&(_e.lanes|=x),oe(H.return,x,d),A||(te=null);break e}H=_e.next}}else if(F.tag===18){if(te=F.return,te===null)throw Error(r(341));te.lanes|=x,H=te.alternate,H!==null&&(H.lanes|=x),oe(te,x,d),te=null}else te=F.child;if(te!==null)te.return=F;else for(te=F;te!==null;){if(te===d){te=null;break}if(F=te.sibling,F!==null){F.return=te.return,te=F;break}te=te.return}F=te}}function tt(d,m,x,A){d=null;for(var F=m,H=!1;F!==null;){if(!H){if((F.flags&524288)!==0)H=!0;else if((F.flags&262144)!==0)break}if(F.tag===10){var te=F.alternate;if(te===null)throw Error(r(387));if(te=te.memoizedProps,te!==null){var _e=F.type;yr(F.pendingProps.value,te.value)||(d!==null?d.push(_e):d=[_e])}}else if(F===em.current){if(te=F.alternate,te===null)throw Error(r(387));te.memoizedState.memoizedState!==F.memoizedState.memoizedState&&(d!==null?d.push(Of):d=[Of])}F=F.return}d!==null&&_t(m,d,x,A),m.flags|=262144}function wt(d){for(d=d.firstContext;d!==null;){var m=d.context;if(!yr(gr?m._currentValue:m._currentValue2,d.memoizedValue))return!0;d=d.next}return!1}function at(d){Ni=d,Qo=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function ne(d){return me(Ni,d)}function Y(d,m){return Ni===null&&at(d),me(d,m)}function me(d,m){var x=gr?m._currentValue:m._currentValue2;if(m={context:m,memoizedValue:x,next:null},Qo===null){if(d===null)throw Error(r(308));Qo=m,d.dependencies={lanes:0,firstContext:m},d.flags|=524288}else Qo=Qo.next=m;return x}function Ue(){return{controller:new hS,data:new Map,refCount:0}}function qe(d){d.refCount--,d.refCount===0&&Jr(kC,function(){d.controller.abort()})}function De(){}function Mt(d){d!==mi&&d.next===null&&(mi===null?tm=mi=d:mi=mi.next=d),To=!0,Ea||(Ea=!0,fe())}function ct(d,m){if(!y0&&To){y0=!0;do for(var x=!1,A=tm;A!==null;){if(d!==0){var F=A.pendingLanes;if(F===0)var H=0;else{var te=A.suspendedLanes,_e=A.pingedLanes;H=(1<<31-ms(42|d)+1)-1,H&=F&~(te&~_e),H=H&201326741?H&201326741|1:H?H|2:0}H!==0&&(x=!0,Et(A,H))}else H=Gn,H=w(A,A===kn?H:0,A.cancelPendingCommit!==null||A.timeoutHandle!==ps),(H&3)===0||I(A,H)||(x=!0,Et(A,H));A=A.next}while(x);y0=!1}}function At(){Ut()}function Ut(){To=Ea=!1;var d=0;gu!==0&&Pf()&&(d=gu);for(var m=wa(),x=null,A=tm;A!==null;){var F=A.next,H=et(A,m);H===0?(A.next=null,x===null?tm=F:x.next=F,F===null&&(mi=x)):(x=A,(d!==0||(H&3)!==0)&&(To=!0)),A=F}Cr!==0&&Cr!==5||ct(d),gu!==0&&(gu=0)}function et(d,m){for(var x=d.suspendedLanes,A=d.pingedLanes,F=d.expirationTimes,H=d.pendingLanes&-62914561;0<H;){var te=31-ms(H),_e=1<<te,$e=F[te];$e===-1?((_e&x)===0||(_e&A)!==0)&&(F[te]=P(_e,m)):$e<=m&&(d.expiredLanes|=_e),H&=~_e}if(m=kn,x=Gn,x=w(d,d===m?x:0,d.cancelPendingCommit!==null||d.timeoutHandle!==ps),A=d.callbackNode,x===0||d===m&&(vi===2||vi===9)||d.cancelPendingCommit!==null)return A!==null&&A!==null&&h0(A),d.callbackNode=null,d.callbackPriority=0;if((x&3)===0||I(d,x)){if(m=x&-x,m===d.callbackPriority)return m;switch(A!==null&&h0(A),V(x)){case 2:case 8:x=uS;break;case 32:x=Zp;break;case 268435456:x=p0;break;default:x=Zp}return A=st.bind(null,d),x=Kp(x,A),d.callbackPriority=m,d.callbackNode=x,m}return A!==null&&A!==null&&h0(A),d.callbackPriority=2,d.callbackNode=null,2}function st(d,m){if(Cr!==0&&Cr!==5)return d.callbackNode=null,d.callbackPriority=0,null;var x=d.callbackNode;if(Nl()&&d.callbackNode!==x)return null;var A=Gn;return A=w(d,d===kn?A:0,d.cancelPendingCommit!==null||d.timeoutHandle!==ps),A===0?null:(Ko(d,A,m),et(d,wa()),d.callbackNode!=null&&d.callbackNode===x?st.bind(null,d):null)}function Et(d,m){if(Nl())return null;Ko(d,m,!0)}function fe(){Gy?Wy(function(){(Bn&6)!==0?Kp(d0,At):Ut()}):Kp(d0,At)}function Pe(){if(gu===0){var d=Sc;d===0&&(d=f0,f0<<=1,(f0&261888)===0&&(f0=256)),gu=d}return gu}function xt(d,m){if(sd===null){var x=sd=[];bb=0,Sc=Pe(),Br={status:"pending",value:void 0,then:function(A){x.push(A)}}}return bb++,m.then(pe,pe),m}function pe(){if(--bb===0&&sd!==null){Br!==null&&(Br.status="fulfilled");var d=sd;sd=null,Sc=0,Br=null;for(var m=0;m<d.length;m++)(0,d[m])()}}function ut(d,m){var x=[],A={status:"pending",value:null,reason:null,then:function(F){x.push(F)}};return d.then(function(){A.status="fulfilled",A.value=m;for(var F=0;F<x.length;F++)(0,x[F])(m)},function(F){for(A.status="rejected",A.reason=F,F=0;F<x.length;F++)(0,x[F])(void 0)}),A}function ft(){var d=vu.current;return d!==null?d:kn.pooledCache}function lt(d,m){m===null?_(vu,vu.current):_(vu,m.pool)}function nt(){var d=ft();return d===null?null:{parent:gr?Gi._currentValue:Gi._currentValue2,pool:d}}function Ke(d,m){if(yr(d,m))return!0;if(typeof d!="object"||d===null||typeof m!="object"||m===null)return!1;var x=Object.keys(d),A=Object.keys(m);if(x.length!==A.length)return!1;for(A=0;A<x.length;A++){var F=x[A];if(!LC.call(m,F)||!yr(d[F],m[F]))return!1}return!0}function ht(d){return d=d.status,d==="fulfilled"||d==="rejected"}function Wt(d,m,x){switch(x=d[x],x===void 0?d.push(m):x!==m&&(m.then(De,De),m=x),m.status){case"fulfilled":return m.value;case"rejected":throw d=m.reason,Ei(d),d;default:if(typeof m.status=="string")m.then(De,De);else{if(d=kn,d!==null&&100<d.shellSuspendCounter)throw Error(r(482));d=m,d.status="pending",d.then(function(A){if(m.status==="pending"){var F=m;F.status="fulfilled",F.value=A}},function(A){if(m.status==="pending"){var F=m;F.status="rejected",F.reason=A}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw d=m.reason,Ei(d),d}throw qa=m,Vr}}function rn(d){try{var m=d._init;return m(d._payload)}catch(x){throw x!==null&&typeof x=="object"&&typeof x.then=="function"?(qa=x,Vr):x}}function Qt(){if(qa===null)throw Error(r(459));var d=qa;return qa=null,d}function Ei(d){if(d===Vr||d===Mo)throw Error(r(483))}function Bi(d){var m=Ff;return Ff+=1,yu===null&&(yu=[]),Wt(yu,d,m)}function ka(d,m){m=m.props.ref,d.ref=m!==void 0?m:null}function Ds(d,m){throw m.$$typeof===Af?Error(r(525)):(d=Object.prototype.toString.call(m),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":d)))}function Ls(d){function m(ze,Ce){if(d){var Ge=ze.deletions;Ge===null?(ze.deletions=[Ce],ze.flags|=16):Ge.push(Ce)}}function x(ze,Ce){if(!d)return null;for(;Ce!==null;)m(ze,Ce),Ce=Ce.sibling;return null}function A(ze){for(var Ce=new Map;ze!==null;)ze.key!==null?Ce.set(ze.key,ze):Ce.set(ze.index,ze),ze=ze.sibling;return Ce}function F(ze,Ce){return ze=Vs(ze,Ce),ze.index=0,ze.sibling=null,ze}function H(ze,Ce,Ge){return ze.index=Ge,d?(Ge=ze.alternate,Ge!==null?(Ge=Ge.index,Ge<Ce?(ze.flags|=67108866,Ce):Ge):(ze.flags|=67108866,Ce)):(ze.flags|=1048576,Ce)}function te(ze){return d&&ze.alternate===null&&(ze.flags|=67108866),ze}function _e(ze,Ce,Ge,Tt){return Ce===null||Ce.tag!==6?(Ce=Oy(Ge,ze.mode,Tt),Ce.return=ze,Ce):(Ce=F(Ce,Ge),Ce.return=ze,Ce)}function $e(ze,Ce,Ge,Tt){var on=Ge.type;return on===Cf?Ct(ze,Ce,Ge.props.children,Tt,Ge.key):Ce!==null&&(Ce.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===Ha&&rn(on)===Ce.type)?(Ce=F(Ce,Ge.props),ka(Ce,Ge),Ce.return=ze,Ce):(Ce=mc(Ge.type,Ge.key,Ge.props,null,ze.mode,Tt),ka(Ce,Ge),Ce.return=ze,Ce)}function mt(ze,Ce,Ge,Tt){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==Ge.containerInfo||Ce.stateNode.implementation!==Ge.implementation?(Ce=Ly(Ge,ze.mode,Tt),Ce.return=ze,Ce):(Ce=F(Ce,Ge.children||[]),Ce.return=ze,Ce)}function Ct(ze,Ce,Ge,Tt,on){return Ce===null||Ce.tag!==7?(Ce=yo(Ge,ze.mode,Tt,on),Ce.return=ze,Ce):(Ce=F(Ce,Ge),Ce.return=ze,Ce)}function St(ze,Ce,Ge){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return Ce=Oy(""+Ce,ze.mode,Ge),Ce.return=ze,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case Ol:return Ge=mc(Ce.type,Ce.key,Ce.props,null,ze.mode,Ge),ka(Ge,Ce),Ge.return=ze,Ge;case Mf:return Ce=Ly(Ce,ze.mode,Ge),Ce.return=ze,Ce;case Ha:return Ce=rn(Ce),St(ze,Ce,Ge)}if(hu(Ce)||h(Ce))return Ce=yo(Ce,ze.mode,Ge,null),Ce.return=ze,Ce;if(typeof Ce.then=="function")return St(ze,Bi(Ce),Ge);if(Ce.$$typeof===bo)return St(ze,Y(ze,Ce),Ge);Ds(ze,Ce)}return null}function zt(ze,Ce,Ge,Tt){var on=Ce!==null?Ce.key:null;if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return on!==null?null:_e(ze,Ce,""+Ge,Tt);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case Ol:return Ge.key===on?$e(ze,Ce,Ge,Tt):null;case Mf:return Ge.key===on?mt(ze,Ce,Ge,Tt):null;case Ha:return Ge=rn(Ge),zt(ze,Ce,Ge,Tt)}if(hu(Ge)||h(Ge))return on!==null?null:Ct(ze,Ce,Ge,Tt,null);if(typeof Ge.then=="function")return zt(ze,Ce,Bi(Ge),Tt);if(Ge.$$typeof===bo)return zt(ze,Ce,Y(ze,Ge),Tt);Ds(ze,Ge)}return null}function Tn(ze,Ce,Ge,Tt,on){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number"||typeof Tt=="bigint")return ze=ze.get(Ge)||null,_e(Ce,ze,""+Tt,on);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case Ol:return ze=ze.get(Tt.key===null?Ge:Tt.key)||null,$e(Ce,ze,Tt,on);case Mf:return ze=ze.get(Tt.key===null?Ge:Tt.key)||null,mt(Ce,ze,Tt,on);case Ha:return Tt=rn(Tt),Tn(ze,Ce,Ge,Tt,on)}if(hu(Tt)||h(Tt))return ze=ze.get(Ge)||null,Ct(Ce,ze,Tt,on,null);if(typeof Tt.then=="function")return Tn(ze,Ce,Ge,Bi(Tt),on);if(Tt.$$typeof===bo)return Tn(ze,Ce,Ge,Y(Ce,Tt),on);Ds(Ce,Tt)}return null}function xr(ze,Ce,Ge,Tt){for(var on=null,Ji=null,un=Ce,Kn=Ce=0,ea=null;un!==null&&Kn<Ge.length;Kn++){un.index>Kn?(ea=un,un=null):ea=un.sibling;var ai=zt(ze,un,Ge[Kn],Tt);if(ai===null){un===null&&(un=ea);break}d&&un&&ai.alternate===null&&m(ze,un),Ce=H(ai,Ce,Kn),Ji===null?on=ai:Ji.sibling=ai,Ji=ai,un=ea}if(Kn===Ge.length)return x(ze,un),Hn&&ue(ze,Kn),on;if(un===null){for(;Kn<Ge.length;Kn++)un=St(ze,Ge[Kn],Tt),un!==null&&(Ce=H(un,Ce,Kn),Ji===null?on=un:Ji.sibling=un,Ji=un);return Hn&&ue(ze,Kn),on}for(un=A(un);Kn<Ge.length;Kn++)ea=Tn(un,ze,Kn,Ge[Kn],Tt),ea!==null&&(d&&ea.alternate!==null&&un.delete(ea.key===null?Kn:ea.key),Ce=H(ea,Ce,Kn),Ji===null?on=ea:Ji.sibling=ea,Ji=ea);return d&&un.forEach(function(Ro){return m(ze,Ro)}),Hn&&ue(ze,Kn),on}function pd(ze,Ce,Ge,Tt){if(Ge==null)throw Error(r(151));for(var on=null,Ji=null,un=Ce,Kn=Ce=0,ea=null,ai=Ge.next();un!==null&&!ai.done;Kn++,ai=Ge.next()){un.index>Kn?(ea=un,un=null):ea=un.sibling;var Ro=zt(ze,un,ai.value,Tt);if(Ro===null){un===null&&(un=ea);break}d&&un&&Ro.alternate===null&&m(ze,un),Ce=H(Ro,Ce,Kn),Ji===null?on=Ro:Ji.sibling=Ro,Ji=Ro,un=ea}if(ai.done)return x(ze,un),Hn&&ue(ze,Kn),on;if(un===null){for(;!ai.done;Kn++,ai=Ge.next())ai=St(ze,ai.value,Tt),ai!==null&&(Ce=H(ai,Ce,Kn),Ji===null?on=ai:Ji.sibling=ai,Ji=ai);return Hn&&ue(ze,Kn),on}for(un=A(un);!ai.done;Kn++,ai=Ge.next())ai=Tn(un,ze,Kn,ai.value,Tt),ai!==null&&(d&&ai.alternate!==null&&un.delete(ai.key===null?Kn:ai.key),Ce=H(ai,Ce,Kn),Ji===null?on=ai:Ji.sibling=ai,Ji=ai);return d&&un.forEach(function(UC){return m(ze,UC)}),Hn&&ue(ze,Kn),on}function Au(ze,Ce,Ge,Tt){if(typeof Ge=="object"&&Ge!==null&&Ge.type===Cf&&Ge.key===null&&(Ge=Ge.props.children),typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case Ol:e:{for(var on=Ge.key;Ce!==null;){if(Ce.key===on){if(on=Ge.type,on===Cf){if(Ce.tag===7){x(ze,Ce.sibling),Tt=F(Ce,Ge.props.children),Tt.return=ze,ze=Tt;break e}}else if(Ce.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===Ha&&rn(on)===Ce.type){x(ze,Ce.sibling),Tt=F(Ce,Ge.props),ka(Tt,Ge),Tt.return=ze,ze=Tt;break e}x(ze,Ce);break}else m(ze,Ce);Ce=Ce.sibling}Ge.type===Cf?(Tt=yo(Ge.props.children,ze.mode,Tt,Ge.key),Tt.return=ze,ze=Tt):(Tt=mc(Ge.type,Ge.key,Ge.props,null,ze.mode,Tt),ka(Tt,Ge),Tt.return=ze,ze=Tt)}return te(ze);case Mf:e:{for(on=Ge.key;Ce!==null;){if(Ce.key===on)if(Ce.tag===4&&Ce.stateNode.containerInfo===Ge.containerInfo&&Ce.stateNode.implementation===Ge.implementation){x(ze,Ce.sibling),Tt=F(Ce,Ge.children||[]),Tt.return=ze,ze=Tt;break e}else{x(ze,Ce);break}else m(ze,Ce);Ce=Ce.sibling}Tt=Ly(Ge,ze.mode,Tt),Tt.return=ze,ze=Tt}return te(ze);case Ha:return Ge=rn(Ge),Au(ze,Ce,Ge,Tt)}if(hu(Ge))return xr(ze,Ce,Ge,Tt);if(h(Ge)){if(on=h(Ge),typeof on!="function")throw Error(r(150));return Ge=on.call(Ge),pd(ze,Ce,Ge,Tt)}if(typeof Ge.then=="function")return Au(ze,Ce,Bi(Ge),Tt);if(Ge.$$typeof===bo)return Au(ze,Ce,Y(ze,Ge),Tt);Ds(ze,Ge)}return typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint"?(Ge=""+Ge,Ce!==null&&Ce.tag===6?(x(ze,Ce.sibling),Tt=F(Ce,Ge),Tt.return=ze,ze=Tt):(x(ze,Ce),Tt=Oy(Ge,ze.mode,Tt),Tt.return=ze,ze=Tt),te(ze)):x(ze,Ce)}return function(ze,Ce,Ge,Tt){try{Ff=0;var on=Au(ze,Ce,Ge,Tt);return yu=null,on}catch(un){if(un===Vr||un===Mo)throw un;var Ji=t(29,un,null,ze.mode);return Ji.lanes=Tt,Ji.return=ze,Ji}finally{}}}function Ua(){for(var d=zl,m=zf=zl=0;m<d;){var x=ha[m];ha[m++]=null;var A=ha[m];ha[m++]=null;var F=ha[m];ha[m++]=null;var H=ha[m];if(ha[m++]=null,A!==null&&F!==null){var te=A.pending;te===null?F.next=F:(F.next=te.next,te.next=F),A.pending=F}H!==0&&Lr(x,F,H)}}function oa(d,m,x,A){ha[zl++]=d,ha[zl++]=m,ha[zl++]=x,ha[zl++]=A,zf|=A,d.lanes|=A,d=d.alternate,d!==null&&(d.lanes|=A)}function jo(d,m,x,A){return oa(d,m,x,A),di(d)}function Ci(d,m){return oa(d,null,null,m),di(d)}function Lr(d,m,x){d.lanes|=x;var A=d.alternate;A!==null&&(A.lanes|=x);for(var F=!1,H=d.return;H!==null;)H.childLanes|=x,A=H.alternate,A!==null&&(A.childLanes|=x),H.tag===22&&(d=H.stateNode,d===null||d._visibility&1||(F=!0)),d=H,H=H.return;return d.tag===3?(H=d.stateNode,F&&m!==null&&(F=31-ms(x),d=H.hiddenUpdates,A=d[F],A===null?d[F]=[m]:A.push(m),m.lane=x|536870912),H):null}function di(d){if(50<ri)throw ri=0,om=null,Error(r(185));for(var m=d.return;m!==null;)d=m,m=d.return;return d.tag===3?d.stateNode:null}function Ii(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Er(d,m){d=d.updateQueue,m.updateQueue===d&&(m.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function kr(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function $r(d,m,x){var A=d.updateQueue;if(A===null)return null;if(A=A.shared,(Bn&2)!==0){var F=A.pending;return F===null?m.next=m:(m.next=F.next,F.next=m),A.pending=m,m=di(d),Lr(d,null,x),m}return oa(d,A,m,x),di(d)}function ls(d,m,x){if(m=m.updateQueue,m!==null&&(m=m.shared,(x&4194048)!==0)){var A=m.lanes;A&=d.pendingLanes,x|=A,m.lanes=x,M(d,x)}}function lo(d,m){var x=d.updateQueue,A=d.alternate;if(A!==null&&(A=A.updateQueue,x===A)){var F=null,H=null;if(x=x.firstBaseUpdate,x!==null){do{var te={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};H===null?F=H=te:H=H.next=te,x=x.next}while(x!==null);H===null?F=H=m:H=H.next=m}else F=H=m;x={baseState:A.baseState,firstBaseUpdate:F,lastBaseUpdate:H,shared:A.shared,callbacks:A.callbacks},d.updateQueue=x;return}d=x.lastBaseUpdate,d===null?x.firstBaseUpdate=m:d.next=m,x.lastBaseUpdate=m}function he(){if(_0){var d=Br;if(d!==null)throw d}}function We(d,m,x,A){_0=!1;var F=d.updateQueue;Gs=!1;var H=F.firstBaseUpdate,te=F.lastBaseUpdate,_e=F.shared.pending;if(_e!==null){F.shared.pending=null;var $e=_e,mt=$e.next;$e.next=null,te===null?H=mt:te.next=mt,te=$e;var Ct=d.alternate;Ct!==null&&(Ct=Ct.updateQueue,_e=Ct.lastBaseUpdate,_e!==te&&(_e===null?Ct.firstBaseUpdate=mt:_e.next=mt,Ct.lastBaseUpdate=$e))}if(H!==null){var St=F.baseState;te=0,Ct=mt=$e=null,_e=H;do{var zt=_e.lane&-536870913,Tn=zt!==_e.lane;if(Tn?(Gn&zt)===zt:(A&zt)===zt){zt!==0&&zt===Sc&&(_0=!0),Ct!==null&&(Ct=Ct.next={lane:0,tag:_e.tag,payload:_e.payload,callback:null,next:null});e:{var xr=d,pd=_e;zt=m;var Au=x;switch(pd.tag){case 1:if(xr=pd.payload,typeof xr=="function"){St=xr.call(Au,St,zt);break e}St=xr;break e;case 3:xr.flags=xr.flags&-65537|128;case 0:if(xr=pd.payload,zt=typeof xr=="function"?xr.call(Au,St,zt):xr,zt==null)break e;St=Xg({},St,zt);break e;case 2:Gs=!0}}zt=_e.callback,zt!==null&&(d.flags|=64,Tn&&(d.flags|=8192),Tn=F.callbacks,Tn===null?F.callbacks=[zt]:Tn.push(zt))}else Tn={lane:zt,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},Ct===null?(mt=Ct=Tn,$e=St):Ct=Ct.next=Tn,te|=zt;if(_e=_e.next,_e===null){if(_e=F.shared.pending,_e===null)break;Tn=_e,_e=Tn.next,Tn.next=null,F.lastBaseUpdate=Tn,F.shared.pending=null}}while(!0);Ct===null&&($e=St),F.baseState=$e,F.firstBaseUpdate=mt,F.lastBaseUpdate=Ct,H===null&&(F.shared.lanes=0),Ec|=te,d.lanes=te,d.memoizedState=St}}function gt(d,m){if(typeof d!="function")throw Error(r(191,d));d.call(m)}function Vt(d,m){var x=d.callbacks;if(x!==null)for(d.callbacks=null,d=0;d<x.length;d++)gt(x[d],m)}function en(d,m){d=Vl,_(bu,d),_(Bf,m),Vl=d|m.baseLanes}function _n(){_(bu,Vl),_(Bf,Bf.current)}function ee(){Vl=bu.current,y(Bf),y(bu)}function Se(d){var m=d.alternate;_(or,or.current&1),_(vs,d),ys===null&&(m===null||Bf.current!==null||m.memoizedState!==null)&&(ys=d)}function Oe(d){_(or,or.current),_(vs,d),ys===null&&(ys=d)}function Re(d){d.tag===22?(_(or,or.current),_(vs,d),ys===null&&(ys=d)):Ee()}function Ee(){_(or,or.current),_(vs,vs.current)}function yt(d){y(vs),ys===d&&(ys=null),y(or)}function Nt(d){for(var m=d;m!==null;){if(m.tag===13){var x=m.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||pu(x)||n0(x)))return m}else if(m.tag===19&&(m.memoizedProps.revealOrder==="forwards"||m.memoizedProps.revealOrder==="backwards"||m.memoizedProps.revealOrder==="unstable_legacy-backwards"||m.memoizedProps.revealOrder==="together")){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function pt(){throw Error(r(321))}function Lt(d,m){if(m===null)return!1;for(var x=0;x<m.length&&x<d.length;x++)if(!yr(d[x],m[x]))return!1;return!0}function Ft(d,m,x,A,F,H){return wc=H,Cn=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,an.H=d===null||d.memoizedState===null?Ki:Bl,Xn=!1,H=x(A,F),Xn=!1,Pn&&(H=Ot(m,x,A,F)),jt(d),H}function jt(d){an.H=Ws;var m=Kt!==null&&Kt.next!==null;if(wc=0,yn=Kt=Cn=null,Ln=!1,Co=0,Jo=null,m)throw Error(r(300));d===null||Ui||(d=d.dependencies,d!==null&&wt(d)&&(Ui=!0))}function Ot(d,m,x,A){Cn=d;var F=0;do{if(Pn&&(Jo=null),Co=0,Pn=!1,25<=F)throw Error(r(301));if(F+=1,yn=Kt=null,d.updateQueue!=null){var H=d.updateQueue;H.lastEffect=null,H.events=null,H.stores=null,H.memoCache!=null&&(H.memoCache.index=0)}an.H=_u,H=m(x,A)}while(Pn);return H}function $t(){var d=an.H,m=d.useState()[0];return m=typeof m.then=="function"?ln(m):m,d=d.useState()[0],(Kt!==null?Kt.memoizedState:null)!==d&&(Cn.flags|=1024),m}function wn(){var d=Ta!==0;return Ta=0,d}function ci(d,m,x){m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~x}function nn(d){if(Ln){for(d=d.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}Ln=!1}wc=0,yn=Kt=Cn=null,Pn=!1,Co=Ta=0,Jo=null}function dn(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?Cn.memoizedState=yn=d:yn=yn.next=d,yn}function Pt(){if(Kt===null){var d=Cn.alternate;d=d!==null?d.memoizedState:null}else d=Kt.next;var m=yn===null?Cn.memoizedState:yn.next;if(m!==null)yn=m,Kt=d;else{if(d===null)throw Cn.alternate===null?Error(r(467)):Error(r(310));Kt=d,d={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},yn===null?Cn.memoizedState=yn=d:yn=yn.next=d}return yn}function On(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ln(d){var m=Co;return Co+=1,Jo===null&&(Jo=[]),d=Wt(Jo,d,m),m=Cn,(yn===null?m.memoizedState:yn.next)===null&&(m=m.alternate,an.H=m===null||m.memoizedState===null?Ki:Bl),d}function qi(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return ln(d);if(d.$$typeof===bo)return ne(d)}throw Error(r(438,String(d)))}function ks(d){var m=null,x=Cn.updateQueue;if(x!==null&&(m=x.memoCache),m==null){var A=Cn.alternate;A!==null&&(A=A.updateQueue,A!==null&&(A=A.memoCache,A!=null&&(m={data:A.data.map(function(F){return F.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),x===null&&(x=On(),Cn.updateQueue=x),x.memoCache=m,x=m.data[m.index],x===void 0)for(x=m.data[m.index]=Array(d),A=0;A<d;A++)x[A]=Uy;return m.index++,x}function Ti(d,m){return typeof m=="function"?m(d):m}function la(d){var m=Pt();return ii(m,Kt,d)}function ii(d,m,x){var A=d.queue;if(A===null)throw Error(r(311));A.lastRenderedReducer=x;var F=d.baseQueue,H=A.pending;if(H!==null){if(F!==null){var te=F.next;F.next=H.next,H.next=te}m.baseQueue=F=H,A.pending=null}if(H=d.baseState,F===null)d.memoizedState=H;else{m=F.next;var _e=te=null,$e=null,mt=m,Ct=!1;do{var St=mt.lane&-536870913;if(St!==mt.lane?(Gn&St)===St:(wc&St)===St){var zt=mt.revertLane;if(zt===0)$e!==null&&($e=$e.next={lane:0,revertLane:0,gesture:null,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null}),St===Sc&&(Ct=!0);else if((wc&zt)===zt){mt=mt.next,zt===Sc&&(Ct=!0);continue}else St={lane:0,revertLane:mt.revertLane,gesture:null,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null},$e===null?(_e=$e=St,te=H):$e=$e.next=St,Cn.lanes|=zt,Ec|=zt;St=mt.action,Xn&&x(H,St),H=mt.hasEagerState?mt.eagerState:x(H,St)}else zt={lane:St,revertLane:mt.revertLane,gesture:mt.gesture,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null},$e===null?(_e=$e=zt,te=H):$e=$e.next=zt,Cn.lanes|=St,Ec|=St;mt=mt.next}while(mt!==null&&mt!==m);if($e===null?te=H:$e.next=_e,!yr(H,d.memoizedState)&&(Ui=!0,Ct&&(x=Br,x!==null)))throw x;d.memoizedState=H,d.baseState=te,d.baseQueue=$e,A.lastRenderedState=H}return F===null&&(A.lanes=0),[d.memoizedState,A.dispatch]}function Li(d){var m=Pt(),x=m.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=d;var A=x.dispatch,F=x.pending,H=m.memoizedState;if(F!==null){x.pending=null;var te=F=F.next;do H=d(H,te.action),te=te.next;while(te!==F);yr(H,m.memoizedState)||(Ui=!0),m.memoizedState=H,m.baseQueue===null&&(m.baseState=H),x.lastRenderedState=H}return[H,A]}function bi(d,m,x){var A=Cn,F=Pt(),H=Hn;if(H){if(x===void 0)throw Error(r(407));x=x()}else x=m();var te=!yr((Kt||F).memoizedState,x);if(te&&(F.memoizedState=x,Ui=!0),F=F.queue,Go(ml.bind(null,A,F,d),[d]),F.getSnapshot!==m||te||yn!==null&&yn.memoizedState.tag&1){if(A.flags|=2048,za(9,{destroy:void 0},mr.bind(null,A,F,x,m),null),kn===null)throw Error(r(349));H||(wc&127)!==0||pr(A,m,x)}return x}function pr(d,m,x){d.flags|=16384,d={getSnapshot:m,value:x},m=Cn.updateQueue,m===null?(m=On(),Cn.updateQueue=m,m.stores=[d]):(x=m.stores,x===null?m.stores=[d]:x.push(d))}function mr(d,m,x,A){m.value=x,m.getSnapshot=A,Fa(m)&&Tp(d)}function ml(d,m,x){return x(function(){Fa(m)&&Tp(d)})}function Fa(d){var m=d.getSnapshot;d=d.value;try{var x=m();return!yr(d,x)}catch{return!0}}function Tp(d){var m=Ci(d,2);m!==null&&Xi(m,d,2)}function gl(d){var m=dn();if(typeof d=="function"){var x=d;if(d=x(),Xn){j(!0);try{x()}finally{j(!1)}}}return m.memoizedState=m.baseState=d,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:d},m}function pf(d,m,x,A){return d.baseState=x,ii(d,Kt,typeof A=="function"?A:Ti)}function Ho(d,m,x,A,F){if(yf(d))throw Error(r(485));if(d=m.action,d!==null){var H={payload:F,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(te){H.listeners.push(te)}};an.T!==null?x(!0):H.isTransition=!1,A(H),x=m.pending,x===null?(H.next=m.pending=H,Ph(m,H)):(H.next=x.next,m.pending=x.next=H)}}function Ph(d,m){var x=m.action,A=m.payload,F=d.state;if(m.isTransition){var H=an.T,te={};an.T=te;try{var _e=x(F,A),$e=an.S;$e!==null&&$e(te,_e),Us(d,m,_e)}catch(mt){co(d,m,mt)}finally{H!==null&&te.types!==null&&(H.types=te.types),an.T=H}}else try{H=x(F,A),Us(d,m,H)}catch(mt){co(d,m,mt)}}function Us(d,m,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(A){ac(d,m,A)},function(A){return co(d,m,A)}):ac(d,m,x)}function ac(d,m,x){m.status="fulfilled",m.value=x,Xc(m),d.state=x,m=d.pending,m!==null&&(x=m.next,x===m?d.pending=null:(x=x.next,m.next=x,Ph(d,x)))}function co(d,m,x){var A=d.pending;if(d.pending=null,A!==null){A=A.next;do m.status="rejected",m.reason=x,Xc(m),m=m.next;while(m!==A)}d.action=null}function Xc(d){d=d.listeners;for(var m=0;m<d.length;m++)(0,d[m])()}function mf(d,m){return m}function sc(d,m){if(Hn){var x=kn.formState;if(x!==null){e:{var A=Cn;if(Hn){if(Hi){var F=B1(Hi,Wa);if(F){Hi=V1(F),A=nb(F);break e}}be(A)}A=!1}A&&(m=x[0])}}x=dn(),x.memoizedState=x.baseState=m,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mf,lastRenderedState:m},x.queue=A,x=Mp.bind(null,Cn,A),A.dispatch=x,A=gl(!1);var H=fo.bind(null,Cn,!1,A.queue);return A=dn(),F={state:m,dispatch:null,action:d,pending:null},A.queue=F,x=Ho.bind(null,Cn,F,H,x),F.dispatch=x,A.memoizedState=d,[m,x,!1]}function uo(d){var m=Pt();return Fs(m,Kt,d)}function Fs(d,m,x){if(m=ii(d,m,mf)[0],d=la(Ti)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var A=ln(m)}catch(te){throw te===Vr?Mo:te}else A=m;m=Pt();var F=m.queue,H=F.dispatch;return x!==m.memoizedState&&(Cn.flags|=2048,za(9,{destroy:void 0},gf.bind(null,F,x),null)),[A,H,d]}function gf(d,m){d.action=m}function pi(d){var m=Pt(),x=Kt;if(x!==null)return Fs(m,x,d);Pt(),m=m.memoizedState,x=Pt();var A=x.queue.dispatch;return x.memoizedState=d,[m,A,!1]}function za(d,m,x,A){return d={tag:d,create:x,deps:A,inst:m,next:null},m=Cn.updateQueue,m===null&&(m=On(),Cn.updateQueue=m),x=m.lastEffect,x===null?m.lastEffect=d.next=d:(A=x.next,x.next=d,d.next=A,m.lastEffect=d),d}function Nh(){return Pt().memoizedState}function vl(d,m,x,A){var F=dn();Cn.flags|=d,F.memoizedState=za(1|m,{destroy:void 0},x,A===void 0?null:A)}function Yc(d,m,x,A){var F=Pt();A=A===void 0?null:A;var H=F.memoizedState.inst;Kt!==null&&A!==null&&Lt(A,Kt.memoizedState.deps)?F.memoizedState=za(m,H,x,A):(Cn.flags|=d,F.memoizedState=za(1|m,H,x,A))}function Kc(d,m){vl(8390656,8,d,m)}function Go(d,m){Yc(2048,8,d,m)}function Wo(d){Cn.flags|=4;var m=Cn.updateQueue;if(m===null)m=On(),Cn.updateQueue=m,m.events=[d];else{var x=m.events;x===null?m.events=[d]:x.push(d)}}function Xr(d){var m=Pt().memoizedState;return Wo({ref:m,nextImpl:d}),function(){if((Bn&2)!==0)throw Error(r(440));return m.impl.apply(void 0,arguments)}}function yl(d,m){return Yc(4,2,d,m)}function qo(d,m){return Yc(4,4,d,m)}function oc(d,m){if(typeof m=="function"){d=d();var x=m(d);return function(){typeof x=="function"?x():m(null)}}if(m!=null)return d=d(),m.current=d,function(){m.current=null}}function Oh(d,m,x){x=x!=null?x.concat([d]):null,Yc(4,4,oc.bind(null,m,d),x)}function bl(){}function vf(d,m){var x=Pt();m=m===void 0?null:m;var A=x.memoizedState;return m!==null&&Lt(m,A[1])?A[0]:(x.memoizedState=[d,m],d)}function $o(d,m){var x=Pt();m=m===void 0?null:m;var A=x.memoizedState;if(m!==null&&Lt(m,A[1]))return A[0];if(A=d(),Xn){j(!0);try{d()}finally{j(!1)}}return x.memoizedState=[A,m],A}function Zc(d,m,x){return x===void 0||(wc&1073741824)!==0&&(Gn&261930)===0?d.memoizedState=m:(d.memoizedState=x,d=hc(),Cn.lanes|=d,Ec|=d,x)}function Dh(d,m,x,A){return yr(x,m)?x:Bf.current!==null?(d=Zc(d,x,A),yr(d,m)||(Ui=!0),d):(wc&42)===0||(wc&1073741824)!==0&&(Gn&261930)===0?(Ui=!0,d.memoizedState=x):(d=hc(),Cn.lanes|=d,Ec|=d,m)}function Qc(d,m,x,A,F){var H=_o();jn(H!==0&&8>H?H:8);var te=an.T,_e={};an.T=_e,fo(d,!1,m,x);try{var $e=F(),mt=an.S;if(mt!==null&&mt(_e,$e),$e!==null&&typeof $e=="object"&&typeof $e.then=="function"){var Ct=ut($e,A);eu(d,m,Ct,Vi(d))}else eu(d,m,A,Vi(d))}catch(St){eu(d,m,{then:function(){},status:"rejected",reason:St},Vi())}finally{jn(H),te!==null&&_e.types!==null&&(te.types=_e.types),an.T=te}}function Ap(d){var m=d.memoizedState;if(m!==null)return m;m={memoizedState:Nf,baseState:Nf,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:Nf},next:null};var x={};return m.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:x},next:null},d.memoizedState=m,d=d.alternate,d!==null&&(d.memoizedState=m),m}function Lh(){return ne(Of)}function Jc(){return Pt().memoizedState}function kh(){return Pt().memoizedState}function Ng(d){for(var m=d.return;m!==null;){switch(m.tag){case 24:case 3:var x=Vi();d=kr(x);var A=$r(m,d,x);A!==null&&(Xi(A,m,x),ls(A,m,x)),m={cache:Ue()},d.payload=m;return}m=m.return}}function Uh(d,m,x){var A=Vi();x={lane:A,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},yf(d)?Cp(m,x):(x=jo(d,m,x,A),x!==null&&(Xi(x,d,A),Ip(x,m,A)))}function Mp(d,m,x){var A=Vi();eu(d,m,x,A)}function eu(d,m,x,A){var F={lane:A,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null};if(yf(d))Cp(m,F);else{var H=d.alternate;if(d.lanes===0&&(H===null||H.lanes===0)&&(H=m.lastRenderedReducer,H!==null))try{var te=m.lastRenderedState,_e=H(te,x);if(F.hasEagerState=!0,F.eagerState=_e,yr(_e,te))return oa(d,m,F,0),kn===null&&Ua(),!1}catch{}finally{}if(x=jo(d,m,F,A),x!==null)return Xi(x,d,A),Ip(x,m,A),!0}return!1}function fo(d,m,x,A){if(A={lane:2,revertLane:Pe(),gesture:null,action:A,hasEagerState:!1,eagerState:null,next:null},yf(d)){if(m)throw Error(r(479))}else m=jo(d,x,A,2),m!==null&&Xi(m,d,2)}function yf(d){var m=d.alternate;return d===Cn||m!==null&&m===Cn}function Cp(d,m){Pn=Ln=!0;var x=d.pending;x===null?m.next=m:(m.next=x.next,x.next=m),d.pending=m}function Ip(d,m,x){if((x&4194048)!==0){var A=m.lanes;A&=d.pendingLanes,x|=A,m.lanes=x,M(d,x)}}function Fh(d,m,x,A){m=d.memoizedState,x=x(A,m),x=x==null?m:Xg({},m,x),d.memoizedState=x,d.lanes===0&&(d.updateQueue.baseState=x)}function lc(d,m,x,A,F,H,te){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(A,H,te):m.prototype&&m.prototype.isPureReactComponent?!Ke(x,A)||!Ke(F,H):!0}function xa(d,m,x,A){d=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(x,A),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(x,A),m.state!==d&&nm.enqueueReplaceState(m,m.state,null)}function _l(d,m){var x=m;if("ref"in m){x={};for(var A in m)A!=="ref"&&(x[A]=m[A])}if(d=d.defaultProps){x===m&&(x=Xg({},x));for(var F in d)x[F]===void 0&&(x[F]=d[F])}return x}function bf(d,m){try{var x=d.onUncaughtError;x(m.value,{componentStack:m.stack})}catch(A){setTimeout(function(){throw A})}}function xl(d,m,x){try{var A=d.onCaughtError;A(x.value,{componentStack:x.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(F){setTimeout(function(){throw F})}}function T(d,m,x){return x=kr(x),x.tag=3,x.payload={element:null},x.callback=function(){bf(d,m)},x}function W(d){return d=kr(d),d.tag=3,d}function K(d,m,x,A){var F=x.type.getDerivedStateFromError;if(typeof F=="function"){var H=A.value;d.payload=function(){return F(H)},d.callback=function(){xl(m,x,A)}}var te=x.stateNode;te!==null&&typeof te.componentDidCatch=="function"&&(d.callback=function(){xl(m,x,A),typeof F!="function"&&(Tc===null?Tc=new Set([this]):Tc.add(this));var _e=A.stack;this.componentDidCatch(A.value,{componentStack:_e!==null?_e:""})})}function se(d,m,x,A,F){if(x.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){if(m=x.alternate,m!==null&&tt(m,x,F,!0),x=vs.current,x!==null){switch(x.tag){case 31:case 13:return ys===null?Xh():x.alternate===null&&Qi===0&&(Qi=3),x.flags&=-257,x.flags|=65536,x.lanes=F,A===Fl?x.flags|=16384:(m=x.updateQueue,m===null?x.updateQueue=new Set([A]):m.add(A),Zh(d,A,F)),!1;case 22:return x.flags|=65536,A===Fl?x.flags|=16384:(m=x.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([A])},x.updateQueue=m):(x=m.retryQueue,x===null?m.retryQueue=new Set([A]):x.add(A)),Zh(d,A,F)),!1}throw Error(r(435,x.tag))}return Zh(d,A,F),Xh(),!1}if(Hn)return m=vs.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=F,A!==v0&&(d=Error(r(422),{cause:A}),je(le(d,x)))):(A!==v0&&(m=Error(r(423),{cause:A}),je(le(m,x))),d=d.current.alternate,d.flags|=65536,F&=-F,d.lanes|=F,A=le(A,x),F=T(d.stateNode,A,F),lo(d,F),Qi!==4&&(Qi=2)),!1;var H=Error(r(520),{cause:A});if(H=le(H,x),rm===null?rm=[H]:rm.push(H),Qi!==4&&(Qi=2),m===null)return!0;A=le(A,x),x=m;do{switch(x.tag){case 3:return x.flags|=65536,d=F&-F,x.lanes|=d,d=T(x.stateNode,A,d),lo(x,d),!1;case 1:if(m=x.type,H=x.stateNode,(x.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Tc===null||!Tc.has(H))))return x.flags|=65536,F&=-F,x.lanes|=F,F=W(F),K(F,d,x,A),lo(x,F),!1}x=x.return}while(x!==null);return!1}function Ae(d,m,x,A){m.child=d===null?_b(m,null,x,A):fa(m,d.child,x,A)}function He(d,m,x,A,F){x=x.render;var H=m.ref;if("ref"in A){var te={};for(var _e in A)_e!=="ref"&&(te[_e]=A[_e])}else te=A;return at(m),A=Ft(d,m,x,te,H,F),_e=wn(),d!==null&&!Ui?(ci(d,m,F),Sl(d,m,F)):(Hn&&_e&&re(m),m.flags|=1,Ae(d,m,A,F),m.child)}function Rt(d,m,x,A,F){if(d===null){var H=x.type;return typeof H=="function"&&!Ef(H)&&H.defaultProps===void 0&&x.compare===null?(m.tag=15,m.type=H,En(d,m,H,A,F)):(d=mc(x.type,null,A,m,m.mode,F),d.ref=m.ref,d.return=m,m.child=d)}if(H=d.child,!Rp(d,F)){var te=H.memoizedProps;if(x=x.compare,x=x!==null?x:Ke,x(te,A)&&d.ref===m.ref)return Sl(d,m,F)}return m.flags|=1,d=Vs(H,A),d.ref=m.ref,d.return=m,m.child=d}function En(d,m,x,A,F){if(d!==null){var H=d.memoizedProps;if(Ke(H,A)&&d.ref===m.ref)if(Ui=!1,m.pendingProps=A=H,Rp(d,F))(d.flags&131072)!==0&&(Ui=!0);else return m.lanes=d.lanes,Sl(d,m,F)}return cc(d,m,x,A,F)}function ar(d,m,x,A){var F=A.children,H=d!==null?d.memoizedState:null;if(d===null&&m.stateNode===null&&(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),A.mode==="hidden"){if((m.flags&128)!==0){if(H=H!==null?H.baseLanes|x:x,d!==null){for(A=m.child=d.child,F=0;A!==null;)F=F|A.lanes|A.childLanes,A=A.sibling;A=F&~H}else A=0,m.child=null;return ki(d,m,H,x,A)}if((x&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},d!==null&&lt(m,H!==null?H.cachePool:null),H!==null?en(m,H):_n(),Re(m);else return A=m.lanes=536870912,ki(d,m,H!==null?H.baseLanes|x:x,x,A)}else H!==null?(lt(m,H.cachePool),en(m,H),Ee(),m.memoizedState=null):(d!==null&&lt(m,null),_n(),Ee());return Ae(d,m,F,x),m.child}function $n(d,m){return d!==null&&d.tag===22||m.stateNode!==null||(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.sibling}function ki(d,m,x,A,F){var H=ft();return H=H===null?null:{parent:gr?Gi._currentValue:Gi._currentValue2,pool:H},m.memoizedState={baseLanes:x,cachePool:H},d!==null&&lt(m,null),_n(),Re(m),d!==null&&tt(d,m,A,!0),m.childLanes=F,null}function Ba(d,m){return m=tu({mode:m.mode,children:m.children},d.mode),m.ref=d.ref,d.child=m,m.return=d,m}function Xo(d,m,x){return fa(m,d.child,null,x),d=Ba(m,m.pendingProps),d.flags|=2,yt(m),m.memoizedState=null,d}function Yo(d,m,x){var A=m.pendingProps,F=(m.flags&128)!==0;if(m.flags&=-129,d===null){if(Hn){if(A.mode==="hidden")return d=Ba(m,A),m.lanes=536870912,$n(null,d);if(Oe(m),(d=Hi)?(d=rb(d,Wa),d!==null&&(m.memoizedState={dehydrated:d,treeContext:wo!==null?{id:ca,overflow:Zo}:null,retryLane:536870912,hydrationErrors:null},x=Dy(d),x.return=m,m.child=x,zr=m,Hi=null)):d=null,d===null)throw be(m);return m.lanes=536870912,null}return Ba(m,A)}var H=d.memoizedState;if(H!==null){var te=H.dehydrated;if(Oe(m),F)if(m.flags&256)m.flags&=-257,m=Xo(d,m,x);else if(m.memoizedState!==null)m.child=d.child,m.flags|=128,m=null;else throw Error(r(558));else if(Ui||tt(d,m,x,!1),F=(x&d.childLanes)!==0,Ui||F){if(A=kn,A!==null&&(te=L(A,x),te!==0&&te!==H.retryLane))throw H.retryLane=te,Ci(d,te),Xi(A,d,te),$a;Xh(),m=Xo(d,m,x)}else d=H.treeContext,ji&&(Hi=W1(te),zr=m,Hn=!0,Ul=null,Wa=!1,d!==null&&de(m,d)),m=Ba(m,A),m.flags|=4096;return m}return d=Vs(d.child,{mode:A.mode,children:A.children}),d.ref=m.ref,m.child=d,d.return=m,d}function cs(d,m){var x=m.ref;if(x===null)d!==null&&d.ref!==null&&(m.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(r(284));(d===null||d.ref!==x)&&(m.flags|=4194816)}}function cc(d,m,x,A,F){return at(m),x=Ft(d,m,x,A,void 0,F),A=wn(),d!==null&&!Ui?(ci(d,m,F),Sl(d,m,F)):(Hn&&A&&re(m),m.flags|=1,Ae(d,m,x,F),m.child)}function _f(d,m,x,A,F,H){return at(m),m.updateQueue=null,x=Ot(m,A,x,F),jt(d),A=wn(),d!==null&&!Ui?(ci(d,m,H),Sl(d,m,H)):(Hn&&A&&re(m),m.flags|=1,Ae(d,m,x,H),m.child)}function xf(d,m,x,A,F){if(at(m),m.stateNode===null){var H=Dl,te=x.contextType;typeof te=="object"&&te!==null&&(H=ne(te)),H=new x(A,H),m.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,H.updater=nm,m.stateNode=H,H._reactInternals=m,H=m.stateNode,H.props=A,H.state=m.memoizedState,H.refs={},Ii(m),te=x.contextType,H.context=typeof te=="object"&&te!==null?ne(te):Dl,H.state=m.memoizedState,te=x.getDerivedStateFromProps,typeof te=="function"&&(Fh(m,x,te,A),H.state=m.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(te=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),te!==H.state&&nm.enqueueReplaceState(H,H.state,null),We(m,A,H,F),he(),H.state=m.memoizedState),typeof H.componentDidMount=="function"&&(m.flags|=4194308),A=!0}else if(d===null){H=m.stateNode;var _e=m.memoizedProps,$e=_l(x,_e);H.props=$e;var mt=H.context,Ct=x.contextType;te=Dl,typeof Ct=="object"&&Ct!==null&&(te=ne(Ct));var St=x.getDerivedStateFromProps;Ct=typeof St=="function"||typeof H.getSnapshotBeforeUpdate=="function",_e=m.pendingProps!==_e,Ct||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(_e||mt!==te)&&xa(m,H,A,te),Gs=!1;var zt=m.memoizedState;H.state=zt,We(m,A,H,F),he(),mt=m.memoizedState,_e||zt!==mt||Gs?(typeof St=="function"&&(Fh(m,x,St,A),mt=m.memoizedState),($e=Gs||lc(m,x,$e,A,zt,mt,te))?(Ct||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(m.flags|=4194308)):(typeof H.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=A,m.memoizedState=mt),H.props=A,H.state=mt,H.context=te,A=$e):(typeof H.componentDidMount=="function"&&(m.flags|=4194308),A=!1)}else{H=m.stateNode,Er(d,m),te=m.memoizedProps,Ct=_l(x,te),H.props=Ct,St=m.pendingProps,zt=H.context,mt=x.contextType,$e=Dl,typeof mt=="object"&&mt!==null&&($e=ne(mt)),_e=x.getDerivedStateFromProps,(mt=typeof _e=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(te!==St||zt!==$e)&&xa(m,H,A,$e),Gs=!1,zt=m.memoizedState,H.state=zt,We(m,A,H,F),he();var Tn=m.memoizedState;te!==St||zt!==Tn||Gs||d!==null&&d.dependencies!==null&&wt(d.dependencies)?(typeof _e=="function"&&(Fh(m,x,_e,A),Tn=m.memoizedState),(Ct=Gs||lc(m,x,Ct,A,zt,Tn,$e)||d!==null&&d.dependencies!==null&&wt(d.dependencies))?(mt||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(A,Tn,$e),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(A,Tn,$e)),typeof H.componentDidUpdate=="function"&&(m.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof H.componentDidUpdate!="function"||te===d.memoizedProps&&zt===d.memoizedState||(m.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||te===d.memoizedProps&&zt===d.memoizedState||(m.flags|=1024),m.memoizedProps=A,m.memoizedState=Tn),H.props=A,H.state=Tn,H.context=$e,A=Ct):(typeof H.componentDidUpdate!="function"||te===d.memoizedProps&&zt===d.memoizedState||(m.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||te===d.memoizedProps&&zt===d.memoizedState||(m.flags|=1024),A=!1)}return H=A,cs(d,m),A=(m.flags&128)!==0,H||A?(H=m.stateNode,x=A&&typeof x.getDerivedStateFromError!="function"?null:H.render(),m.flags|=1,d!==null&&A?(m.child=fa(m,d.child,null,F),m.child=fa(m,null,x,F)):Ae(d,m,x,F),m.memoizedState=H.state,d=m.child):d=Sl(d,m,F),d}function c1(d,m,x,A){return It(),m.flags|=256,Ae(d,m,x,A),m.child}function by(d){return{baseLanes:d,cachePool:nt()}}function _y(d,m,x){return d=d!==null?d.childLanes&~x:0,m&&(d|=Xa),d}function xy(d,m,x){var A=m.pendingProps,F=!1,H=(m.flags&128)!==0,te;if((te=H)||(te=d!==null&&d.memoizedState===null?!1:(or.current&2)!==0),te&&(F=!0,m.flags&=-129),te=(m.flags&32)!==0,m.flags&=-33,d===null){if(Hn){if(F?Se(m):Ee(),(d=Hi)?(d=Y1(d,Wa),d!==null&&(m.memoizedState={dehydrated:d,treeContext:wo!==null?{id:ca,overflow:Zo}:null,retryLane:536870912,hydrationErrors:null},x=Dy(d),x.return=m,m.child=x,zr=m,Hi=null)):d=null,d===null)throw be(m);return n0(d)?m.lanes=32:m.lanes=536870912,null}var _e=A.children;return A=A.fallback,F?(Ee(),F=m.mode,_e=tu({mode:"hidden",children:_e},F),A=yo(A,F,x,null),_e.return=m,A.return=m,_e.sibling=A,m.child=_e,A=m.child,A.memoizedState=by(x),A.childLanes=_y(d,te,x),m.memoizedState=Vf,$n(null,A)):(Se(m),Og(m,_e))}var $e=d.memoizedState;if($e!==null&&(_e=$e.dehydrated,_e!==null)){if(H)m.flags&256?(Se(m),m.flags&=-257,m=Sf(d,m,x)):m.memoizedState!==null?(Ee(),m.child=d.child,m.flags|=128,m=null):(Ee(),_e=A.fallback,F=m.mode,A=tu({mode:"visible",children:A.children},F),_e=yo(_e,F,x,null),_e.flags|=2,A.return=m,_e.return=m,A.sibling=_e,m.child=A,fa(m,d.child,null,x),A=m.child,A.memoizedState=by(x),A.childLanes=_y(d,te,x),m.memoizedState=Vf,m=$n(null,A));else if(Se(m),n0(_e))te=i0(_e).digest,A=Error(r(419)),A.stack="",A.digest=te,je({value:A,source:null,stack:null}),m=Sf(d,m,x);else if(Ui||tt(d,m,x,!1),te=(x&d.childLanes)!==0,Ui||te){if(te=kn,te!==null&&(A=L(te,x),A!==0&&A!==$e.retryLane))throw $e.retryLane=A,Ci(d,A),Xi(te,d,A),$a;pu(_e)||Xh(),m=Sf(d,m,x)}else pu(_e)?(m.flags|=192,m.child=d.child,m=null):(d=$e.treeContext,ji&&(Hi=q1(_e),zr=m,Hn=!0,Ul=null,Wa=!1,d!==null&&de(m,d)),m=Og(m,A.children),m.flags|=4096);return m}return F?(Ee(),_e=A.fallback,F=m.mode,$e=d.child,H=$e.sibling,A=Vs($e,{mode:"hidden",children:A.children}),A.subtreeFlags=$e.subtreeFlags&65011712,H!==null?_e=Vs(H,_e):(_e=yo(_e,F,x,null),_e.flags|=2),_e.return=m,A.return=m,A.sibling=_e,m.child=A,$n(null,A),A=m.child,_e=d.child.memoizedState,_e===null?_e=by(x):(F=_e.cachePool,F!==null?($e=gr?Gi._currentValue:Gi._currentValue2,F=F.parent!==$e?{parent:$e,pool:$e}:F):F=nt(),_e={baseLanes:_e.baseLanes|x,cachePool:F}),A.memoizedState=_e,A.childLanes=_y(d,te,x),m.memoizedState=Vf,$n(d.child,A)):(Se(m),x=d.child,d=x.sibling,x=Vs(x,{mode:"visible",children:A.children}),x.return=m,x.sibling=null,d!==null&&(te=m.deletions,te===null?(m.deletions=[d],m.flags|=16):te.push(d)),m.child=x,m.memoizedState=null,x)}function Og(d,m){return m=tu({mode:"visible",children:m},d.mode),m.return=d,d.child=m}function tu(d,m){return d=t(22,d,null,m),d.lanes=0,d}function Sf(d,m,x){return fa(m,d.child,null,x),d=Og(m,m.pendingProps.children),d.flags|=2,m.memoizedState=null,d}function u1(d,m,x){d.lanes|=m;var A=d.alternate;A!==null&&(A.lanes|=m),oe(d.return,m,x)}function zh(d,m,x,A,F,H){var te=d.memoizedState;te===null?d.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:A,tail:x,tailMode:F,treeForkCount:H}:(te.isBackwards=m,te.rendering=null,te.renderingStartTime=0,te.last=A,te.tail=x,te.tailMode=F,te.treeForkCount=H)}function Sy(d,m,x){var A=m.pendingProps,F=A.revealOrder,H=A.tail;A=A.children;var te=or.current,_e=(te&2)!==0;if(_e?(te=te&1|2,m.flags|=128):te&=1,_(or,te),Ae(d,m,A,x),A=Hn?Jp:0,!_e&&d!==null&&(d.flags&128)!==0)e:for(d=m.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&u1(d,x,m);else if(d.tag===19)u1(d,x,m);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===m)break e;for(;d.sibling===null;){if(d.return===null||d.return===m)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}switch(F){case"forwards":for(x=m.child,F=null;x!==null;)d=x.alternate,d!==null&&Nt(d)===null&&(F=x),x=x.sibling;x=F,x===null?(F=m.child,m.child=null):(F=x.sibling,x.sibling=null),zh(m,!1,F,x,H,A);break;case"backwards":case"unstable_legacy-backwards":for(x=null,F=m.child,m.child=null;F!==null;){if(d=F.alternate,d!==null&&Nt(d)===null){m.child=F;break}d=F.sibling,F.sibling=x,x=F,F=d}zh(m,!0,x,null,H,A);break;case"together":zh(m,!1,null,null,void 0,A);break;default:m.memoizedState=null}return m.child}function Sl(d,m,x){if(d!==null&&(m.dependencies=d.dependencies),Ec|=m.lanes,(x&m.childLanes)===0)if(d!==null){if(tt(d,m,x,!1),(x&m.childLanes)===0)return null}else return null;if(d!==null&&m.child!==d.child)throw Error(r(153));if(m.child!==null){for(d=m.child,x=Vs(d,d.pendingProps),m.child=x,x.return=m;d.sibling!==null;)d=d.sibling,x=x.sibling=Vs(d,d.pendingProps),x.return=m;x.sibling=null}return m.child}function Rp(d,m){return(d.lanes&m)!==0?!0:(d=d.dependencies,!!(d!==null&&wt(d)))}function wy(d,m,x){switch(m.tag){case 3:xe(m,m.stateNode.containerInfo),Le(m,Gi,d.memoizedState.cache),It();break;case 27:case 5:Te(m);break;case 4:xe(m,m.stateNode.containerInfo);break;case 10:Le(m,m.type,m.memoizedProps.value);break;case 31:if(m.memoizedState!==null)return m.flags|=128,Oe(m),null;break;case 13:var A=m.memoizedState;if(A!==null)return A.dehydrated!==null?(Se(m),m.flags|=128,null):(x&m.child.childLanes)!==0?xy(d,m,x):(Se(m),d=Sl(d,m,x),d!==null?d.sibling:null);Se(m);break;case 19:var F=(d.flags&128)!==0;if(A=(x&m.childLanes)!==0,A||(tt(d,m,x,!1),A=(x&m.childLanes)!==0),F){if(A)return Sy(d,m,x);m.flags|=128}if(F=m.memoizedState,F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),_(or,or.current),A)break;return null;case 22:return m.lanes=0,ar(d,m,x,m.pendingProps);case 24:Le(m,Gi,d.memoizedState.cache)}return Sl(d,m,x)}function Ey(d,m,x){if(d!==null)if(d.memoizedProps!==m.pendingProps)Ui=!0;else{if(!Rp(d,x)&&(m.flags&128)===0)return Ui=!1,wy(d,m,x);Ui=(d.flags&131072)!==0}else Ui=!1,Hn&&(m.flags&1048576)!==0&&Q(m,Jp,m.index);switch(m.lanes=0,m.tag){case 16:e:{var A=m.pendingProps;if(d=rn(m.elementType),m.type=d,typeof d=="function")Ef(d)?(A=_l(d,A),m.tag=1,m=xf(null,m,d,A,x)):(m.tag=0,m=cc(null,m,d,A,x));else{if(d!=null){var F=d.$$typeof;if(F===Qh){m.tag=11,m=He(null,m,d,A,x);break e}else if(F===Kg){m.tag=14,m=Rt(null,m,d,A,x);break e}}throw m=p(d)||d,Error(r(306,m,""))}}return m;case 0:return cc(d,m,m.type,m.pendingProps,x);case 1:return A=m.type,F=_l(A,m.pendingProps),xf(d,m,A,F,x);case 3:e:{if(xe(m,m.stateNode.containerInfo),d===null)throw Error(r(387));var H=m.pendingProps;F=m.memoizedState,A=F.element,Er(d,m),We(m,H,null,x);var te=m.memoizedState;if(H=te.cache,Le(m,Gi,H),H!==F.cache&&_t(m,[Gi],x,!0),he(),H=te.element,ji&&F.isDehydrated)if(F={element:H,isDehydrated:!1,cache:te.cache},m.updateQueue.baseState=F,m.memoizedState=F,m.flags&256){m=c1(d,m,H,x);break e}else if(H!==A){A=le(Error(r(424)),m),je(A),m=c1(d,m,H,x);break e}else for(ji&&(Hi=G1(m.stateNode.containerInfo),zr=m,Hn=!0,Ul=null,Wa=!0),x=_b(m,null,H,x),m.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(It(),H===A){m=Sl(d,m,x);break e}Ae(d,m,H,x)}m=m.child}return m;case 26:if(xo)return cs(d,m),d===null?(x=cb(m.type,null,m.pendingProps,null))?m.memoizedState=x:Hn||(m.stateNode=o0(m.type,m.pendingProps,ua.current,m)):m.memoizedState=cb(m.type,d.memoizedProps,m.pendingProps,d.memoizedState),null;case 27:if(Fr)return Te(m),d===null&&Fr&&Hn&&(A=m.stateNode=l0(m.type,m.pendingProps,ua.current,Qr.current,!1),zr=m,Wa=!0,Hi=ib(m.type,A,Hi)),Ae(d,m,m.pendingProps.children,x),cs(d,m),d===null&&(m.flags|=4194304),m.child;case 5:return d===null&&Hn&&(rS(m.type,m.pendingProps,Qr.current),(F=A=Hi)&&(A=$1(A,m.type,m.pendingProps,Wa),A!==null?(m.stateNode=A,zr=m,Hi=H1(A),Wa=!1,F=!0):F=!1),F||be(m)),Te(m),F=m.type,H=m.pendingProps,te=d!==null?d.memoizedProps:null,A=H.children,Ga(F,H)?A=null:te!==null&&Ga(F,te)&&(m.flags|=32),m.memoizedState!==null&&(F=Ft(d,m,$t,null,null,x),gr?Of._currentValue=F:Of._currentValue2=F),cs(d,m),Ae(d,m,A,x),m.child;case 6:return d===null&&Hn&&(lb(m.pendingProps,Qr.current),(d=x=Hi)&&(x=X1(x,m.pendingProps,Wa),x!==null?(m.stateNode=x,zr=m,Hi=null,d=!0):d=!1),d||be(m)),null;case 13:return xy(d,m,x);case 4:return xe(m,m.stateNode.containerInfo),A=m.pendingProps,d===null?m.child=fa(m,null,A,x):Ae(d,m,A,x),m.child;case 11:return He(d,m,m.type,m.pendingProps,x);case 7:return Ae(d,m,m.pendingProps,x),m.child;case 8:return Ae(d,m,m.pendingProps.children,x),m.child;case 12:return Ae(d,m,m.pendingProps.children,x),m.child;case 10:return A=m.pendingProps,Le(m,m.type,A.value),Ae(d,m,A.children,x),m.child;case 9:return F=m.type._context,A=m.pendingProps.children,at(m),F=ne(F),A=A(F),m.flags|=1,Ae(d,m,A,x),m.child;case 14:return Rt(d,m,m.type,m.pendingProps,x);case 15:return En(d,m,m.type,m.pendingProps,x);case 19:return Sy(d,m,x);case 31:return Yo(d,m,x);case 22:return ar(d,m,x,m.pendingProps);case 24:return at(m),A=ne(Gi),d===null?(F=ft(),F===null&&(F=kn,H=Ue(),F.pooledCache=H,H.refCount++,H!==null&&(F.pooledCacheLanes|=x),F=H),m.memoizedState={parent:A,cache:F},Ii(m),Le(m,Gi,F)):((d.lanes&x)!==0&&(Er(d,m),We(m,null,null,x),he()),F=d.memoizedState,H=m.memoizedState,F.parent!==A?(F={parent:A,cache:A},m.memoizedState=F,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=F),Le(m,Gi,A)):(A=H.cache,Le(m,Gi,A),A!==F.cache&&_t(m,[Gi],x,!0))),Ae(d,m,m.pendingProps.children,x),m.child;case 29:throw m.pendingProps}throw Error(r(156,m.tag))}function ho(d){d.flags|=4}function Pp(d){js&&(d.flags|=8)}function f1(d,m){if(d!==null&&d.child===m.child)return!1;if((m.flags&16)!==0)return!0;for(d=m.child;d!==null;){if((d.flags&8218)!==0||(d.subtreeFlags&8218)!==0)return!0;d=d.sibling}return!1}function Ty(d,m,x,A){if(qn)for(x=m.child;x!==null;){if(x.tag===5||x.tag===6)Wp(d,x.stateNode);else if(!(x.tag===4||Fr&&x.tag===27)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===m)break;for(;x.sibling===null;){if(x.return===null||x.return===m)return;x=x.return}x.sibling.return=x.return,x=x.sibling}else if(js)for(var F=m.child;F!==null;){if(F.tag===5){var H=F.stateNode;x&&A&&(H=z1(H,F.type,F.memoizedProps)),Wp(d,H)}else if(F.tag===6)H=F.stateNode,x&&A&&(H=tb(H,F.memoizedProps)),Wp(d,H);else if(F.tag!==4){if(F.tag===22&&F.memoizedState!==null)H=F.child,H!==null&&(H.return=F),Ty(d,F,!0,!0);else if(F.child!==null){F.child.return=F,F=F.child;continue}}if(F===m)break;for(;F.sibling===null;){if(F.return===null||F.return===m)return;F=F.return}F.sibling.return=F.return,F=F.sibling}}function h1(d,m,x,A){var F=!1;if(js)for(var H=m.child;H!==null;){if(H.tag===5){var te=H.stateNode;x&&A&&(te=z1(te,H.type,H.memoizedProps)),Jy(d,te)}else if(H.tag===6)te=H.stateNode,x&&A&&(te=tb(te,H.memoizedProps)),Jy(d,te);else if(H.tag!==4){if(H.tag===22&&H.memoizedState!==null)F=H.child,F!==null&&(F.return=H),h1(d,H,!0,!0),F=!0;else if(H.child!==null){H.child.return=H,H=H.child;continue}}if(H===m)break;for(;H.sibling===null;){if(H.return===null||H.return===m)return F;H=H.return}H.sibling.return=H.return,H=H.sibling}return F}function d1(d,m){if(js&&f1(d,m)){d=m.stateNode;var x=d.containerInfo,A=Qy();h1(A,m,!1,!1),d.pendingChildren=A,ho(m),F1(x,A)}}function Ay(d,m,x,A){if(qn)d.memoizedProps!==A&&ho(m);else if(js){var F=d.stateNode,H=d.memoizedProps;if((d=f1(d,m))||H!==A){var te=Qr.current;H=U1(F,x,H,A,!d,null),H===F?m.stateNode=F:(Pp(m),ds(H,x,A,te)&&ho(m),m.stateNode=H,d&&Ty(H,m,!1,!1))}else m.stateNode=F}}function Va(d,m,x,A,F){if((d.mode&32)!==0&&(x===null?qp(m,A):id(m,x,A))){if(d.flags|=16777216,(F&335544128)===F||Vy(m,A))if(Yi(d.stateNode,m,A))d.flags|=8192;else if(Wn())d.flags|=8192;else throw qa=Fl,b0}else d.flags&=-16777217}function Bh(d,m){if(db(m)){if(d.flags|=16777216,!pb(m))if(Wn())d.flags|=8192;else throw qa=Fl,b0}else d.flags&=-16777217}function Np(d,m){m!==null&&(d.flags|=4),d.flags&16384&&(m=d.tag!==22?D():536870912,d.lanes|=m,hd|=m)}function Vh(d,m){if(!Hn)switch(d.tailMode){case"hidden":m=d.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?d.tail=null:x.sibling=null;break;case"collapsed":x=d.tail;for(var A=null;x!==null;)x.alternate!==null&&(A=x),x=x.sibling;A===null?m||d.tail===null?d.tail=null:d.tail.sibling=null:A.sibling=null}}function Ri(d){var m=d.alternate!==null&&d.alternate.child===d.child,x=0,A=0;if(m)for(var F=d.child;F!==null;)x|=F.lanes|F.childLanes,A|=F.subtreeFlags&65011712,A|=F.flags&65011712,F.return=d,F=F.sibling;else for(F=d.child;F!==null;)x|=F.lanes|F.childLanes,A|=F.subtreeFlags,A|=F.flags,F.return=d,F=F.sibling;return d.subtreeFlags|=A,d.childLanes=x,m}function p1(d,m,x){var A=m.pendingProps;switch(ye(m),m.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ri(m),null;case 1:return Ri(m),null;case 3:return x=m.stateNode,A=null,d!==null&&(A=d.memoizedState.cache),m.memoizedState.cache!==A&&(m.flags|=2048),Qe(Gi),ve(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(d===null||d.child===null)&&(Ie(m)?ho(m):d===null||d.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Ne())),d1(d,m),Ri(m),null;case 26:if(xo){var F=m.type,H=m.memoizedState;return d===null?(ho(m),H!==null?(Ri(m),Bh(m,H)):(Ri(m),Va(m,F,null,A,x))):H?H!==d.memoizedState?(ho(m),Ri(m),Bh(m,H)):(Ri(m),m.flags&=-16777217):(H=d.memoizedProps,qn?H!==A&&ho(m):Ay(d,m,F,A),Ri(m),Va(m,F,H,A,x)),null}case 27:if(Fr){if(Ze(m),x=ua.current,F=m.type,d!==null&&m.stateNode!=null)qn?d.memoizedProps!==A&&ho(m):Ay(d,m,F,A);else{if(!A){if(m.stateNode===null)throw Error(r(166));return Ri(m),null}d=Qr.current,Ie(m)?Ve(m,d):(d=l0(F,A,x,d,!0),m.stateNode=d,ho(m))}return Ri(m),null}case 5:if(Ze(m),F=m.type,d!==null&&m.stateNode!=null)Ay(d,m,F,A);else{if(!A){if(m.stateNode===null)throw Error(r(166));return Ri(m),null}if(H=Qr.current,Ie(m))Ve(m,H),tS(m.stateNode,F,A,H)&&(m.flags|=64);else{var te=zy(F,A,ua.current,H,m);Pp(m),Ty(te,m,!1,!1),m.stateNode=te,ds(te,F,A,H)&&ho(m)}}return Ri(m),Va(m,m.type,d===null?null:d.memoizedProps,m.pendingProps,x),null;case 6:if(d&&m.stateNode!=null)x=d.memoizedProps,qn?x!==A&&ho(m):js&&(x!==A?(d=ua.current,x=Qr.current,Pp(m),m.stateNode=yc(A,d,x,m)):m.stateNode=d.stateNode);else{if(typeof A!="string"&&m.stateNode===null)throw Error(r(166));if(d=ua.current,x=Qr.current,Ie(m)){if(!ji)throw Error(r(176));if(d=m.stateNode,x=m.memoizedProps,A=null,F=zr,F!==null)switch(F.tag){case 27:case 5:A=F.memoizedProps}NC(d,x,m,A)||be(m,!0)}else Pp(m),m.stateNode=yc(A,d,x,m)}return Ri(m),null;case 31:if(x=m.memoizedState,d===null||d.memoizedState!==null){if(A=Ie(m),x!==null){if(d===null){if(!A)throw Error(r(318));if(!ji)throw Error(r(556));if(d=m.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(557));ab(d,m)}else It(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Ri(m),d=!1}else x=Ne(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=x),d=!0;if(!d)return m.flags&256?(yt(m),m):(yt(m),null);if((m.flags&128)!==0)throw Error(r(558))}return Ri(m),null;case 13:if(A=m.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(F=Ie(m),A!==null&&A.dehydrated!==null){if(d===null){if(!F)throw Error(r(318));if(!ji)throw Error(r(344));if(F=m.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(r(317));Z1(F,m)}else It(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Ri(m),F=!1}else F=Ne(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=F),F=!0;if(!F)return m.flags&256?(yt(m),m):(yt(m),null)}return yt(m),(m.flags&128)!==0?(m.lanes=x,m):(x=A!==null,d=d!==null&&d.memoizedState!==null,x&&(A=m.child,F=null,A.alternate!==null&&A.alternate.memoizedState!==null&&A.alternate.memoizedState.cachePool!==null&&(F=A.alternate.memoizedState.cachePool.pool),H=null,A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(H=A.memoizedState.cachePool.pool),H!==F&&(A.flags|=2048)),x!==d&&x&&(m.child.flags|=8192),Np(m,m.updateQueue),Ri(m),null);case 4:return ve(),d1(d,m),d===null&&_i(m.stateNode.containerInfo),Ri(m),null;case 10:return Qe(m.type),Ri(m),null;case 19:if(y(or),A=m.memoizedState,A===null)return Ri(m),null;if(F=(m.flags&128)!==0,H=A.rendering,H===null)if(F)Vh(A,!1);else{if(Qi!==0||d!==null&&(d.flags&128)!==0)for(d=m.child;d!==null;){if(H=Nt(d),H!==null){for(m.flags|=128,Vh(A,!1),d=H.updateQueue,m.updateQueue=d,Np(m,d),m.subtreeFlags=0,d=x,x=m.child;x!==null;)Wg(x,d),x=x.sibling;return _(or,or.current&1|2),Hn&&ue(m,A.treeForkCount),m.child}d=d.sibling}A.tail!==null&&wa()>Tu&&(m.flags|=128,F=!0,Vh(A,!1),m.lanes=4194304)}else{if(!F)if(d=Nt(H),d!==null){if(m.flags|=128,F=!0,d=d.updateQueue,m.updateQueue=d,Np(m,d),Vh(A,!0),A.tail===null&&A.tailMode==="hidden"&&!H.alternate&&!Hn)return Ri(m),null}else 2*wa()-A.renderingStartTime>Tu&&x!==536870912&&(m.flags|=128,F=!0,Vh(A,!1),m.lanes=4194304);A.isBackwards?(H.sibling=m.child,m.child=H):(d=A.last,d!==null?d.sibling=H:m.child=H,A.last=H)}return A.tail!==null?(d=A.tail,A.rendering=d,A.tail=d.sibling,A.renderingStartTime=wa(),d.sibling=null,x=or.current,_(or,F?x&1|2:x&1),Hn&&ue(m,A.treeForkCount),d):(Ri(m),null);case 22:case 23:return yt(m),ee(),A=m.memoizedState!==null,d!==null?d.memoizedState!==null!==A&&(m.flags|=8192):A&&(m.flags|=8192),A?(x&536870912)!==0&&(m.flags&128)===0&&(Ri(m),m.subtreeFlags&6&&(m.flags|=8192)):Ri(m),x=m.updateQueue,x!==null&&Np(m,x.retryQueue),x=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),A=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==x&&(m.flags|=2048),d!==null&&y(vu),null;case 24:return x=null,d!==null&&(x=d.memoizedState.cache),m.memoizedState.cache!==x&&(m.flags|=2048),Qe(Gi),Ri(m),null;case 25:return null;case 30:return null}throw Error(r(156,m.tag))}function My(d,m){switch(ye(m),m.tag){case 1:return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 3:return Qe(Gi),ve(),d=m.flags,(d&65536)!==0&&(d&128)===0?(m.flags=d&-65537|128,m):null;case 26:case 27:case 5:return Ze(m),null;case 31:if(m.memoizedState!==null){if(yt(m),m.alternate===null)throw Error(r(340));It()}return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 13:if(yt(m),d=m.memoizedState,d!==null&&d.dehydrated!==null){if(m.alternate===null)throw Error(r(340));It()}return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 19:return y(or),null;case 4:return ve(),null;case 10:return Qe(m.type),null;case 22:case 23:return yt(m),ee(),d!==null&&y(vu),d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 24:return Qe(Gi),null;case 25:return null;default:return null}}function m1(d,m){switch(ye(m),m.tag){case 3:Qe(Gi),ve();break;case 26:case 27:case 5:Ze(m);break;case 4:ve();break;case 31:m.memoizedState!==null&&yt(m);break;case 13:yt(m);break;case 19:y(or);break;case 10:Qe(m.type);break;case 22:case 23:yt(m),ee(),d!==null&&y(vu);break;case 24:Qe(Gi)}}function wl(d,m){try{var x=m.updateQueue,A=x!==null?x.lastEffect:null;if(A!==null){var F=A.next;x=F;do{if((x.tag&d)===d){A=void 0;var H=x.create,te=x.inst;A=H(),te.destroy=A}x=x.next}while(x!==F)}}catch(_e){mn(m,m.return,_e)}}function El(d,m,x){try{var A=m.updateQueue,F=A!==null?A.lastEffect:null;if(F!==null){var H=F.next;A=H;do{if((A.tag&d)===d){var te=A.inst,_e=te.destroy;if(_e!==void 0){te.destroy=void 0,F=m;var $e=x,mt=_e;try{mt()}catch(Ct){mn(F,$e,Ct)}}}A=A.next}while(A!==H)}}catch(Ct){mn(m,m.return,Ct)}}function jh(d){var m=d.updateQueue;if(m!==null){var x=d.stateNode;try{Vt(m,x)}catch(A){mn(d,d.return,A)}}}function Dg(d,m,x){x.props=_l(d.type,d.memoizedProps),x.state=d.memoizedState;try{x.componentWillUnmount()}catch(A){mn(d,m,A)}}function Hh(d,m){try{var x=d.ref;if(x!==null){switch(d.tag){case 26:case 27:case 5:var A=ed(d.stateNode);break;case 30:A=d.stateNode;break;default:A=d.stateNode}typeof x=="function"?d.refCleanup=x(A):x.current=A}}catch(F){mn(d,m,F)}}function Sa(d,m){var x=d.ref,A=d.refCleanup;if(x!==null)if(typeof A=="function")try{A()}catch(F){mn(d,m,F)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(F){mn(d,m,F)}else x.current=null}function wf(d){var m=d.type,x=d.memoizedProps,A=d.stateNode;try{I1(A,m,x,d)}catch(F){mn(d,d.return,F)}}function Op(d,m,x){try{R1(d.stateNode,d.type,x,m,d)}catch(A){mn(d,d.return,A)}}function Cy(d){return d.tag===5||d.tag===3||(xo?d.tag===26:!1)||(Fr?d.tag===27&&Df(d.type):!1)||d.tag===4}function uc(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||Cy(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(Fr&&d.tag===27&&Df(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function Lg(d,m,x){var A=d.tag;if(A===5||A===6)d=d.stateNode,m?N1(x,d,m):Xy(x,d);else if(A!==4&&(Fr&&A===27&&Df(d.type)&&(x=d.stateNode,m=null),d=d.child,d!==null))for(Lg(d,m,x),d=d.sibling;d!==null;)Lg(d,m,x),d=d.sibling}function Dp(d,m,x){var A=d.tag;if(A===5||A===6)d=d.stateNode,m?P1(x,d,m):$y(x,d);else if(A!==4&&(Fr&&A===27&&Df(d.type)&&(x=d.stateNode),d=d.child,d!==null))for(Dp(d,m,x),d=d.sibling;d!==null;)Dp(d,m,x),d=d.sibling}function Iy(d,m,x){d=d.containerInfo;try{eb(d,x)}catch(A){mn(m,m.return,A)}}function g1(d){var m=d.stateNode,x=d.memoizedProps;try{Ar(d.type,x,m,d)}catch(A){mn(d,d.return,A)}}function CC(d,m){for(Zg(d.containerInfo),br=m;br!==null;)if(d=br,m=d.child,(d.subtreeFlags&1028)!==0&&m!==null)m.return=d,br=m;else for(;br!==null;){d=br;var x=d.alternate;switch(m=d.flags,d.tag){case 0:if((m&4)!==0&&(m=d.updateQueue,m=m!==null?m.events:null,m!==null))for(var A=0;A<m.length;A++){var F=m[A];F.ref.impl=F.nextImpl}break;case 11:case 15:break;case 1:if((m&1024)!==0&&x!==null){m=void 0,A=d,F=x.memoizedProps,x=x.memoizedState;var H=A.stateNode;try{var te=_l(A.type,F);m=H.getSnapshotBeforeUpdate(te,x),H.__reactInternalSnapshotBeforeUpdate=m}catch(_e){mn(A,A.return,_e)}}break;case 3:(m&1024)!==0&&qn&&Zy(d.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(r(163))}if(m=d.sibling,m!==null){m.return=d.return,br=m;break}br=d.return}}function v1(d,m,x){var A=x.flags;switch(x.tag){case 0:case 11:case 15:ja(d,x),A&4&&wl(5,x);break;case 1:if(ja(d,x),A&4)if(d=x.stateNode,m===null)try{d.componentDidMount()}catch(te){mn(x,x.return,te)}else{var F=_l(x.type,m.memoizedProps);m=m.memoizedState;try{d.componentDidUpdate(F,m,d.__reactInternalSnapshotBeforeUpdate)}catch(te){mn(x,x.return,te)}}A&64&&jh(x),A&512&&Hh(x,x.return);break;case 3:if(ja(d,x),A&64&&(A=x.updateQueue,A!==null)){if(d=null,x.child!==null)switch(x.child.tag){case 27:case 5:d=ed(x.child.stateNode);break;case 1:d=x.child.stateNode}try{Vt(A,d)}catch(te){mn(x,x.return,te)}}break;case 27:Fr&&m===null&&A&4&&g1(x);case 26:case 5:if(ja(d,x),m===null){if(A&4)wf(x);else if(A&64){d=x.type,m=x.memoizedProps,F=x.stateNode;try{J1(F,d,m,x)}catch(te){mn(x,x.return,te)}}}A&512&&Hh(x,x.return);break;case 12:ja(d,x);break;case 31:ja(d,x),A&4&&mo(d,x);break;case 13:ja(d,x),A&4&&kp(d,x),A&64&&(A=x.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(x=IC.bind(null,x),r0(A,x))));break;case 22:if(A=x.memoizedState!==null||lr,!A){m=m!==null&&m.memoizedState!==null||cr,F=lr;var H=cr;lr=A,(cr=m)&&!H?vo(d,x,(x.subtreeFlags&8772)!==0):ja(d,x),lr=F,cr=H}break;case 30:break;default:ja(d,x)}}function Ry(d){var m=d.alternate;m!==null&&(d.alternate=null,Ry(m)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(m=d.stateNode,m!==null&&Qg(m)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function po(d,m,x){for(x=x.child;x!==null;)Lp(d,m,x),x=x.sibling}function Lp(d,m,x){if(gs&&typeof gs.onCommitFiberUnmount=="function")try{gs.onCommitFiberUnmount(Uf,x)}catch{}switch(x.tag){case 26:if(xo){cr||Sa(x,m),po(d,m,x),x.memoizedState?mu(x.memoizedState):x.stateNode&&hb(x.stateNode);break}case 27:if(Fr){cr||Sa(x,m);var A=Zi,F=_r;Df(x.type)&&(Zi=x.stateNode,_r=!1),po(d,m,x),Zr(x.stateNode),Zi=A,_r=F;break}case 5:cr||Sa(x,m);case 6:if(qn){if(A=Zi,F=_r,Zi=null,po(d,m,x),Zi=A,_r=F,Zi!==null)if(_r)try{Yy(Zi,x.stateNode)}catch(H){mn(x,m,H)}else try{O1(Zi,x.stateNode)}catch(H){mn(x,m,H)}}else po(d,m,x);break;case 18:qn&&Zi!==null&&(_r?a0(Zi,x.stateNode):ob(Zi,x.stateNode));break;case 4:qn?(A=Zi,F=_r,Zi=x.stateNode.containerInfo,_r=!0,po(d,m,x),Zi=A,_r=F):(js&&Iy(x.stateNode,x,Qy()),po(d,m,x));break;case 0:case 11:case 14:case 15:El(2,x,m),cr||El(4,x,m),po(d,m,x);break;case 1:cr||(Sa(x,m),A=x.stateNode,typeof A.componentWillUnmount=="function"&&Dg(x,m,A)),po(d,m,x);break;case 21:po(d,m,x);break;case 22:cr=(A=cr)||x.memoizedState!==null,po(d,m,x),cr=A;break;default:po(d,m,x)}}function mo(d,m){if(ji&&m.memoizedState===null&&(d=m.alternate,d!==null&&(d=d.memoizedState,d!==null))){d=d.dehydrated;try{OC(d)}catch(x){mn(m,m.return,x)}}}function kp(d,m){if(ji&&m.memoizedState===null&&(d=m.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{DC(d)}catch(x){mn(m,m.return,x)}}function go(d){switch(d.tag){case 31:case 13:case 19:var m=d.stateNode;return m===null&&(m=d.stateNode=new Sb),m;case 22:return d=d.stateNode,m=d._retryCache,m===null&&(m=d._retryCache=new Sb),m;default:throw Error(r(435,d.tag))}}function fc(d,m){var x=go(d);m.forEach(function(A){if(!x.has(A)){x.add(A);var F=RC.bind(null,d,A);A.then(F,F)}})}function Yr(d,m){var x=m.deletions;if(x!==null)for(var A=0;A<x.length;A++){var F=x[A],H=d,te=m;if(qn){var _e=te;e:for(;_e!==null;){switch(_e.tag){case 27:if(Fr){if(Df(_e.type)){Zi=_e.stateNode,_r=!1;break e}break}case 5:Zi=_e.stateNode,_r=!1;break e;case 3:case 4:Zi=_e.stateNode.containerInfo,_r=!0;break e}_e=_e.return}if(Zi===null)throw Error(r(160));Lp(H,te,F),Zi=null,_r=!1}else Lp(H,te,F);H=F.alternate,H!==null&&(H.return=null),F.return=null}if(m.subtreeFlags&13886)for(m=m.child;m!==null;)Up(m,d),m=m.sibling}function Up(d,m){var x=d.alternate,A=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:Yr(m,d),Kr(d),A&4&&(El(3,d,d.return),wl(3,d),El(5,d,d.return));break;case 1:Yr(m,d),Kr(d),A&512&&(cr||x===null||Sa(x,x.return)),A&64&&lr&&(d=d.updateQueue,d!==null&&(A=d.callbacks,A!==null&&(x=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=x===null?A:x.concat(A))));break;case 26:if(xo){var F=gi;if(Yr(m,d),Kr(d),A&512&&(cr||x===null||Sa(x,x.return)),A&4){A=x!==null?x.memoizedState:null;var H=d.memoizedState;x===null?H===null?d.stateNode===null?d.stateNode=aS(F,d.type,d.memoizedProps,d):fb(F,d.type,d.stateNode):d.stateNode=ub(F,H,d.memoizedProps):A!==H?(A===null?x.stateNode!==null&&hb(x.stateNode):mu(A),H===null?fb(F,d.type,d.stateNode):ub(F,H,d.memoizedProps)):H===null&&d.stateNode!==null&&Op(d,d.memoizedProps,x.memoizedProps)}break}case 27:if(Fr){Yr(m,d),Kr(d),A&512&&(cr||x===null||Sa(x,x.return)),x!==null&&A&4&&Op(d,d.memoizedProps,x.memoizedProps);break}case 5:if(Yr(m,d),Kr(d),A&512&&(cr||x===null||Sa(x,x.return)),qn){if(d.flags&32){F=d.stateNode;try{Ky(F)}catch(St){mn(d,d.return,St)}}A&4&&d.stateNode!=null&&(F=d.memoizedProps,Op(d,F,x!==null?x.memoizedProps:F)),A&1024&&(od=!0)}else js&&d.alternate!==null&&(d.alternate.stateNode=d.stateNode);break;case 6:if(Yr(m,d),Kr(d),A&4&&qn){if(d.stateNode===null)throw Error(r(162));A=d.memoizedProps,x=x!==null?x.memoizedProps:A,F=d.stateNode;try{C1(F,x,A)}catch(St){mn(d,d.return,St)}}break;case 3:if(xo?(sS(),F=gi,gi=Yp(m.containerInfo),Yr(m,d),gi=F):Yr(m,d),Kr(d),A&4){if(qn&&ji&&x!==null&&x.memoizedState.isDehydrated)try{eS(m.containerInfo)}catch(St){mn(d,d.return,St)}if(js){A=m.containerInfo,x=m.pendingChildren;try{eb(A,x)}catch(St){mn(d,d.return,St)}}}od&&(od=!1,kg(d));break;case 4:xo?(x=gi,gi=Yp(d.stateNode.containerInfo),Yr(m,d),Kr(d),gi=x):(Yr(m,d),Kr(d)),A&4&&js&&Iy(d.stateNode,d,d.stateNode.pendingChildren);break;case 12:Yr(m,d),Kr(d);break;case 31:Yr(m,d),Kr(d),A&4&&(A=d.updateQueue,A!==null&&(d.updateQueue=null,fc(d,A)));break;case 13:Yr(m,d),Kr(d),d.child.flags&8192&&d.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(am=wa()),A&4&&(A=d.updateQueue,A!==null&&(d.updateQueue=null,fc(d,A)));break;case 22:F=d.memoizedState!==null;var te=x!==null&&x.memoizedState!==null,_e=lr,$e=cr;if(lr=_e||F,cr=$e||te,Yr(m,d),cr=$e,lr=_e,Kr(d),A&8192&&(m=d.stateNode,m._visibility=F?m._visibility&-2:m._visibility|1,F&&(x===null||te||lr||cr||nu(d)),qn)){e:if(x=null,qn)for(m=d;;){if(m.tag===5||xo&&m.tag===26){if(x===null){te=x=m;try{H=te.stateNode,F?PC(H):L1(te.stateNode,te.memoizedProps)}catch(St){mn(te,te.return,St)}}}else if(m.tag===6){if(x===null){te=m;try{var mt=te.stateNode;F?D1(mt):k1(mt,te.memoizedProps)}catch(St){mn(te,te.return,St)}}}else if(m.tag===18){if(x===null){te=m;try{var Ct=te.stateNode;F?nS(Ct):iS(te.stateNode)}catch(St){mn(te,te.return,St)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===d)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break e;for(;m.sibling===null;){if(m.return===null||m.return===d)break e;x===m&&(x=null),m=m.return}x===m&&(x=null),m.sibling.return=m.return,m=m.sibling}}A&4&&(A=d.updateQueue,A!==null&&(x=A.retryQueue,x!==null&&(A.retryQueue=null,fc(d,x))));break;case 19:Yr(m,d),Kr(d),A&4&&(A=d.updateQueue,A!==null&&(d.updateQueue=null,fc(d,A)));break;case 30:break;case 21:break;default:Yr(m,d),Kr(d)}}function Kr(d){var m=d.flags;if(m&2){try{for(var x,A=d.return;A!==null;){if(Cy(A)){x=A;break}A=A.return}if(qn){if(x==null)throw Error(r(160));switch(x.tag){case 27:if(Fr){var F=x.stateNode,H=uc(d);Dp(d,H,F);break}case 5:var te=x.stateNode;x.flags&32&&(Ky(te),x.flags&=-33);var _e=uc(d);Dp(d,_e,te);break;case 3:case 4:var $e=x.stateNode.containerInfo,mt=uc(d);Lg(d,mt,$e);break;default:throw Error(r(161))}}}catch(Ct){mn(d,d.return,Ct)}d.flags&=-3}m&4096&&(d.flags&=-4097)}function kg(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var m=d;kg(m),m.tag===5&&m.flags&1024&&Hy(m.stateNode),d=d.sibling}}function ja(d,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)v1(d,m.alternate,m),m=m.sibling}function nu(d){for(d=d.child;d!==null;){var m=d;switch(m.tag){case 0:case 11:case 14:case 15:El(4,m,m.return),nu(m);break;case 1:Sa(m,m.return);var x=m.stateNode;typeof x.componentWillUnmount=="function"&&Dg(m,m.return,x),nu(m);break;case 27:Fr&&Zr(m.stateNode);case 26:case 5:Sa(m,m.return),nu(m);break;case 22:m.memoizedState===null&&nu(m);break;case 30:nu(m);break;default:nu(m)}d=d.sibling}}function vo(d,m,x){for(x=x&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var A=m.alternate,F=d,H=m,te=H.flags;switch(H.tag){case 0:case 11:case 15:vo(F,H,x),wl(4,H);break;case 1:if(vo(F,H,x),A=H,F=A.stateNode,typeof F.componentDidMount=="function")try{F.componentDidMount()}catch(mt){mn(A,A.return,mt)}if(A=H,F=A.updateQueue,F!==null){var _e=A.stateNode;try{var $e=F.shared.hiddenCallbacks;if($e!==null)for(F.shared.hiddenCallbacks=null,F=0;F<$e.length;F++)gt($e[F],_e)}catch(mt){mn(A,A.return,mt)}}x&&te&64&&jh(H),Hh(H,H.return);break;case 27:Fr&&g1(H);case 26:case 5:vo(F,H,x),x&&A===null&&te&4&&wf(H),Hh(H,H.return);break;case 12:vo(F,H,x);break;case 31:vo(F,H,x),x&&te&4&&mo(F,H);break;case 13:vo(F,H,x),x&&te&4&&kp(F,H);break;case 22:H.memoizedState===null&&vo(F,H,x),Hh(H,H.return);break;case 30:break;default:vo(F,H,x)}m=m.sibling}}function iu(d,m){var x=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),d=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(d=m.memoizedState.cachePool.pool),d!==x&&(d!=null&&d.refCount++,x!=null&&qe(x))}function Py(d,m){d=null,m.alternate!==null&&(d=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==d&&(m.refCount++,d!=null&&qe(d))}function $i(d,m,x,A){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)Ug(d,m,x,A),m=m.sibling}function Ug(d,m,x,A){var F=m.flags;switch(m.tag){case 0:case 11:case 15:$i(d,m,x,A),F&2048&&wl(9,m);break;case 1:$i(d,m,x,A);break;case 3:$i(d,m,x,A),F&2048&&(d=null,m.alternate!==null&&(d=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==d&&(m.refCount++,d!=null&&qe(d)));break;case 12:if(F&2048){$i(d,m,x,A),d=m.stateNode;try{var H=m.memoizedProps,te=H.id,_e=H.onPostCommit;typeof _e=="function"&&_e(te,m.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch($e){mn(m,m.return,$e)}}else $i(d,m,x,A);break;case 31:$i(d,m,x,A);break;case 13:$i(d,m,x,A);break;case 23:break;case 22:H=m.stateNode,te=m.alternate,m.memoizedState!==null?H._visibility&2?$i(d,m,x,A):Gh(d,m):H._visibility&2?$i(d,m,x,A):(H._visibility|=2,us(d,m,x,A,(m.subtreeFlags&10256)!==0||!1)),F&2048&&iu(te,m);break;case 24:$i(d,m,x,A),F&2048&&Py(m.alternate,m);break;default:$i(d,m,x,A)}}function us(d,m,x,A,F){for(F=F&&((m.subtreeFlags&10256)!==0||!1),m=m.child;m!==null;){var H=d,te=m,_e=x,$e=A,mt=te.flags;switch(te.tag){case 0:case 11:case 15:us(H,te,_e,$e,F),wl(8,te);break;case 23:break;case 22:var Ct=te.stateNode;te.memoizedState!==null?Ct._visibility&2?us(H,te,_e,$e,F):Gh(H,te):(Ct._visibility|=2,us(H,te,_e,$e,F)),F&&mt&2048&&iu(te.alternate,te);break;case 24:us(H,te,_e,$e,F),F&&mt&2048&&Py(te.alternate,te);break;default:us(H,te,_e,$e,F)}m=m.sibling}}function Gh(d,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var x=d,A=m,F=A.flags;switch(A.tag){case 22:Gh(x,A),F&2048&&iu(A.alternate,A);break;case 24:Gh(x,A),F&2048&&Py(A.alternate,A);break;default:Gh(x,A)}m=m.sibling}}function Tl(d,m,x){if(d.subtreeFlags&qs)for(d=d.child;d!==null;)ru(d,m,x),d=d.sibling}function ru(d,m,x){switch(d.tag){case 26:if(Tl(d,m,x),d.flags&qs)if(d.memoizedState!==null)oS(x,gi,d.memoizedState,d.memoizedProps);else{var A=d.stateNode,F=d.type;d=d.memoizedProps,((m&335544128)===m||Vy(F,d))&&Jg(x,A,F,d)}break;case 5:Tl(d,m,x),d.flags&qs&&(A=d.stateNode,F=d.type,d=d.memoizedProps,((m&335544128)===m||Vy(F,d))&&Jg(x,A,F,d));break;case 3:case 4:xo?(A=gi,gi=Yp(d.stateNode.containerInfo),Tl(d,m,x),gi=A):Tl(d,m,x);break;case 22:d.memoizedState===null&&(A=d.alternate,A!==null&&A.memoizedState!==null?(A=qs,qs=16777216,Tl(d,m,x),qs=A):Tl(d,m,x));break;default:Tl(d,m,x)}}function Fg(d){var m=d.alternate;if(m!==null&&(d=m.child,d!==null)){m.child=null;do m=d.sibling,d.sibling=null,d=m;while(d!==null)}}function Wh(d){var m=d.deletions;if((d.flags&16)!==0){if(m!==null)for(var x=0;x<m.length;x++){var A=m[x];br=A,zs(A,d)}Fg(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)zg(d),d=d.sibling}function zg(d){switch(d.tag){case 0:case 11:case 15:Wh(d),d.flags&2048&&El(9,d,d.return);break;case 3:Wh(d);break;case 12:Wh(d);break;case 22:var m=d.stateNode;d.memoizedState!==null&&m._visibility&2&&(d.return===null||d.return.tag!==13)?(m._visibility&=-3,Fp(d)):Wh(d);break;default:Wh(d)}}function Fp(d){var m=d.deletions;if((d.flags&16)!==0){if(m!==null)for(var x=0;x<m.length;x++){var A=m[x];br=A,zs(A,d)}Fg(d)}for(d=d.child;d!==null;){switch(m=d,m.tag){case 0:case 11:case 15:El(8,m,m.return),Fp(m);break;case 22:x=m.stateNode,x._visibility&2&&(x._visibility&=-3,Fp(m));break;default:Fp(m)}d=d.sibling}}function zs(d,m){for(;br!==null;){var x=br;switch(x.tag){case 0:case 11:case 15:El(8,x,m);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var A=x.memoizedState.cachePool.pool;A!=null&&A.refCount++}break;case 24:qe(x.memoizedState.cache)}if(A=x.child,A!==null)A.return=x,br=A;else e:for(x=d;br!==null;){A=br;var F=A.sibling,H=A.return;if(Ry(A),A===x){br=null;break e}if(F!==null){F.return=H,br=F;break e}br=H}}}function au(d){var m=Mn(d);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(r(364));return m}if(d=vr(d),d===null)throw Error(r(362));return d.stateNode.current}function su(d,m){var x=d.tag;switch(m.$$typeof){case Io:if(d.type===m.value)return!0;break;case cd:e:{for(m=m.value,d=[d,0],x=0;x<d.length;){var A=d[x++],F=A.tag,H=d[x++],te=m[H];if(F!==5&&F!==26&&F!==27||!du(A)){for(;te!=null&&su(A,te);)H++,te=m[H];if(H===m.length){m=!0;break e}else for(A=A.child;A!==null;)d.push(A,H),A=A.sibling}}m=!1}return m;case ud:if((x===5||x===26||x===27)&&qy(d.stateNode,m.value))return!0;break;case xu:if((x===5||x===6||x===26||x===27)&&(d=$p(d),d!==null&&0<=d.indexOf(m.value)))return!0;break;case im:if((x===5||x===26||x===27)&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===m.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function qh(d){switch(d.$$typeof){case Io:return"<"+(p(d.value)||"Unknown")+">";case cd:return":has("+(qh(d)||"")+")";case ud:return'[role="'+d.value+'"]';case xu:return'"'+d.value+'"';case im:return'[data-testname="'+d.value+'"]';default:throw Error(r(365))}}function $h(d,m){var x=[];d=[d,0];for(var A=0;A<d.length;){var F=d[A++],H=F.tag,te=d[A++],_e=m[te];if(H!==5&&H!==26&&H!==27||!du(F)){for(;_e!=null&&su(F,_e);)te++,_e=m[te];if(te===m.length)x.push(F);else for(F=F.child;F!==null;)d.push(F,te),F=F.sibling}}return x}function fs(d,m){if(!Ur)throw Error(r(363));d=au(d),d=$h(d,m),m=[],d=Array.from(d);for(var x=0;x<d.length;){var A=d[x++],F=A.tag;if(F===5||F===26||F===27)du(A)||m.push(A.stateNode);else for(A=A.child;A!==null;)d.push(A),A=A.sibling}return m}function Vi(){return(Bn&2)!==0&&Gn!==0?Gn&-Gn:an.T!==null?Pe():nd()}function hc(){if(Xa===0)if((Gn&536870912)===0||Hn){var d=kf;kf<<=1,(kf&3932160)===0&&(kf=262144),Xa=d}else Xa=536870912;return d=vs.current,d!==null&&(d.flags|=32),Xa}function Xi(d,m,x){(d===kn&&(vi===2||vi===9)||d.cancelPendingCommit!==null)&&(sr(d,0),Ml(d,Gn,Xa,!1)),k(d,x),((Bn&2)===0||d!==kn)&&(d===kn&&((Bn&2)===0&&(Eu|=x),Qi===4&&Ml(d,Gn,Xa,!1)),Mt(d))}function Ko(d,m,x){if((Bn&6)!==0)throw Error(r(327));var A=!x&&(m&127)===0&&(m&d.expiredLanes)===0||I(d,m),F=A?_1(d,m):Cl(d,m,!0),H=A;do{if(F===0){Su&&!A&&Ml(d,m,0,!1);break}else{if(x=d.current.alternate,H&&!y1(x)){F=Cl(d,m,!1),H=!1;continue}if(F===2){if(H=m,d.errorRecoveryDisabledLanes&H)var te=0;else te=d.pendingLanes&-536870913,te=te!==0?te:te&536870912?536870912:0;if(te!==0){m=te;e:{var _e=d;F=rm;var $e=ji&&_e.current.memoizedState.isDehydrated;if($e&&(sr(_e,te).flags|=256),te=Cl(_e,te,!1),te!==2){if(wu&&!$e){_e.errorRecoveryDisabledLanes|=H,Eu|=H,F=4;break e}H=bs,bs=F,H!==null&&(bs===null?bs=H:bs.push.apply(bs,H))}F=te}if(H=!1,F!==2)continue}}if(F===1){sr(d,0),Ml(d,m,0,!0);break}e:{switch(A=d,H=F,H){case 0:case 1:throw Error(r(345));case 4:if((m&4194048)!==m)break;case 6:Ml(A,m,Xa,!el);break e;case 2:bs=null;break;case 3:case 5:break;default:throw Error(r(329))}if((m&62914560)===m&&(F=am+300-wa(),10<F)){if(Ml(A,m,Xa,!el),w(A,0,!0)!==0)break e;jl=m,A.timeoutHandle=By(Al.bind(null,A,x,bs,sm,x0,m,Xa,Eu,hd,el,H,"Throttled",-0,0),F);break e}Al(A,x,bs,sm,x0,m,Xa,Eu,hd,el,H,null,-0,0)}}break}while(!0);Mt(d)}function Al(d,m,x,A,F,H,te,_e,$e,mt,Ct,St,zt,Tn){if(d.timeoutHandle=ps,St=m.subtreeFlags,St&8192||(St&16785408)===16785408){St=jy(),ru(m,H,St);var xr=(H&62914560)===H?am-wa():(H&4194048)===H?Hf-wa():0;if(xr=M1(St,xr),xr!==null){jl=H,d.cancelPendingCommit=xr(Rl.bind(null,d,m,H,x,A,F,te,_e,$e,Ct,St,null,zt,Tn)),Ml(d,H,te,!mt);return}}Rl(d,m,H,x,A,F,te,_e,$e)}function y1(d){for(var m=d;;){var x=m.tag;if((x===0||x===11||x===15)&&m.flags&16384&&(x=m.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var A=0;A<x.length;A++){var F=x[A],H=F.getSnapshot;F=F.value;try{if(!yr(H(),F))return!1}catch{return!1}}if(x=m.child,m.subtreeFlags&16384&&x!==null)x.return=m,m=x;else{if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Ml(d,m,x,A){m&=~fd,m&=~Eu,d.suspendedLanes|=m,d.pingedLanes&=~m,A&&(d.warmLanes|=m),A=d.expirationTimes;for(var F=m;0<F;){var H=31-ms(F),te=1<<H;A[H]=-1,F&=~te}x!==0&&R(d,x,m)}function Bg(){return(Bn&6)===0?(ct(0),!1):!0}function Vg(){if(Vn!==null){if(vi===0)var d=Vn.return;else d=Vn,Qo=Ni=null,nn(d),yu=null,Ff=0,d=Vn;for(;d!==null;)m1(d.alternate,d),d=d.return;Vn=null}}function sr(d,m){var x=d.timeoutHandle;x!==ps&&(d.timeoutHandle=ps,A1(x)),x=d.cancelPendingCommit,x!==null&&(d.cancelPendingCommit=null,x()),jl=0,Vg(),kn=d,Vn=x=Vs(d.current,null),Gn=m,vi=0,Mr=null,el=!1,Su=I(d,m),wu=!1,hd=Xa=fd=Eu=Ec=Qi=0,bs=rm=null,x0=!1,(m&8)!==0&&(m|=m&32);var A=d.entangledLanes;if(A!==0)for(d=d.entanglements,A&=m;0<A;){var F=31-ms(A),H=1<<F;m|=d[F],A&=~H}return Vl=m,Ua(),x}function Pi(d,m){Cn=null,an.H=Ws,m===Vr||m===Mo?(m=Qt(),vi=3):m===b0?(m=Qt(),vi=4):vi=m===$a?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,Mr=m,Vn===null&&(Qi=1,bf(d,le(m,d.current)))}function Wn(){var d=vs.current;return d===null?!0:(Gn&4194048)===Gn?ys===null:(Gn&62914560)===Gn||(Gn&536870912)!==0?d===ys:!1}function dc(){var d=an.H;return an.H=Ws,d===null?Ws:d}function Bs(){var d=an.A;return an.A=ld,d}function Xh(){Qi=4,el||(Gn&4194048)!==Gn&&vs.current!==null||(Su=!0),(Ec&134217727)===0&&(Eu&134217727)===0||kn===null||Ml(kn,Gn,Xa,!1)}function Cl(d,m,x){var A=Bn;Bn|=2;var F=dc(),H=Bs();(kn!==d||Gn!==m)&&(sm=null,sr(d,m)),m=!1;var te=Qi;e:do try{if(vi!==0&&Vn!==null){var _e=Vn,$e=Mr;switch(vi){case 8:Vg(),te=6;break e;case 3:case 2:case 9:case 6:vs.current===null&&(m=!0);var mt=vi;if(vi=0,Mr=null,Il(d,_e,$e,mt),x&&Su){te=0;break e}break;default:mt=vi,vi=0,Mr=null,Il(d,_e,$e,mt)}}b1(),te=Qi;break}catch(Ct){Pi(d,Ct)}while(!0);return m&&d.shellSuspendCounter++,Qo=Ni=null,Bn=A,an.H=F,an.A=H,Vn===null&&(kn=null,Gn=0,Ua()),te}function b1(){for(;Vn!==null;)ou(Vn)}function _1(d,m){var x=Bn;Bn|=2;var A=dc(),F=Bs();kn!==d||Gn!==m?(sm=null,Tu=wa()+500,sr(d,m)):Su=I(d,m);e:do try{if(vi!==0&&Vn!==null){m=Vn;var H=Mr;t:switch(vi){case 1:vi=0,Mr=null,Il(d,m,H,1);break;case 2:case 9:if(ht(H)){vi=0,Mr=null,jg(m);break}m=function(){vi!==2&&vi!==9||kn!==d||(vi=7),Mt(d)},H.then(m,m);break e;case 3:vi=7;break e;case 4:vi=5;break e;case 7:ht(H)?(vi=0,Mr=null,jg(m)):(vi=0,Mr=null,Il(d,m,H,7));break;case 5:var te=null;switch(Vn.tag){case 26:te=Vn.memoizedState;case 5:case 27:var _e=Vn,$e=_e.type,mt=_e.pendingProps;if(te?pb(te):Yi(_e.stateNode,$e,mt)){vi=0,Mr=null;var Ct=_e.sibling;if(Ct!==null)Vn=Ct;else{var St=_e.return;St!==null?(Vn=St,Kh(St)):Vn=null}break t}}vi=0,Mr=null,Il(d,m,H,5);break;case 6:vi=0,Mr=null,Il(d,m,H,6);break;case 8:Vg(),Qi=6;break e;default:throw Error(r(462))}}Yh();break}catch(zt){Pi(d,zt)}while(!0);return Qo=Ni=null,an.H=A,an.A=F,Bn=x,Vn!==null?0:(kn=null,Gn=0,Ua(),Qi)}function Yh(){for(;Vn!==null&&!cS();)ou(Vn)}function ou(d){var m=Ey(d.alternate,d,Vl);d.memoizedProps=d.pendingProps,m===null?Kh(d):Vn=m}function jg(d){var m=d,x=m.alternate;switch(m.tag){case 15:case 0:m=_f(x,m,m.pendingProps,m.type,void 0,Gn);break;case 11:m=_f(x,m,m.pendingProps,m.type.render,m.ref,Gn);break;case 5:nn(m);default:m1(x,m),m=Vn=Wg(m,Vl),m=Ey(x,m,Vl)}d.memoizedProps=d.pendingProps,m===null?Kh(d):Vn=m}function Il(d,m,x,A){Qo=Ni=null,nn(m),yu=null,Ff=0;var F=m.return;try{if(se(d,F,m,x,Gn)){Qi=1,bf(d,le(x,d.current)),Vn=null;return}}catch(H){if(F!==null)throw Vn=F,H;Qi=1,bf(d,le(x,d.current)),Vn=null;return}m.flags&32768?(Hn||A===1?d=!0:Su||(Gn&536870912)!==0?d=!1:(el=d=!0,(A===2||A===9||A===3||A===6)&&(A=vs.current,A!==null&&A.tag===13&&(A.flags|=16384))),lu(m,d)):Kh(m)}function Kh(d){var m=d;do{if((m.flags&32768)!==0){lu(m,el);return}d=m.return;var x=p1(m.alternate,m,Vl);if(x!==null){Vn=x;return}if(m=m.sibling,m!==null){Vn=m;return}Vn=m=d}while(m!==null);Qi===0&&(Qi=5)}function lu(d,m){do{var x=My(d.alternate,d);if(x!==null){x.flags&=32767,Vn=x;return}if(x=d.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!m&&(d=d.sibling,d!==null)){Vn=d;return}Vn=d=x}while(d!==null);Qi=6,Vn=null}function Rl(d,m,x,A,F,H,te,_e,$e){d.cancelPendingCommit=null;do Nl();while(Cr!==0);if((Bn&6)!==0)throw Error(r(327));if(m!==null){if(m===d.current)throw Error(r(177));if(H=m.lanes|m.childLanes,H|=zf,U(d,x,H,te,_e,$e),d===kn&&(Vn=kn=null,Gn=0),Gf=m,Ac=d,jl=x,dd=H,S0=F,wb=A,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,Tr(Zp,function(){return zp(),null})):(d.callbackNode=null,d.callbackPriority=0),A=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||A){A=an.T,an.T=null,F=_o(),jn(2),te=Bn,Bn|=4;try{CC(d,m,x)}finally{Bn=te,jn(F),an.T=A}}Cr=1,pc(),Pl(),Hg()}}function pc(){if(Cr===1){Cr=0;var d=Ac,m=Gf,x=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||x){x=an.T,an.T=null;var A=_o();jn(2);var F=Bn;Bn|=4;try{Up(m,d),T1(d.containerInfo)}finally{Bn=F,jn(A),an.T=x}}d.current=m,Cr=2}}function Pl(){if(Cr===2){Cr=0;var d=Ac,m=Gf,x=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||x){x=an.T,an.T=null;var A=_o();jn(2);var F=Bn;Bn|=4;try{v1(d,m.alternate,m)}finally{Bn=F,jn(A),an.T=x}}Cr=3}}function Hg(){if(Cr===4||Cr===3){Cr=0,gb();var d=Ac,m=Gf,x=jl,A=wb;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?Cr=5:(Cr=0,Gf=Ac=null,Gg(d,d.pendingLanes));var F=d.pendingLanes;if(F===0&&(Tc=null),V(x),m=m.stateNode,gs&&typeof gs.onCommitFiberRoot=="function")try{gs.onCommitFiberRoot(Uf,m,void 0,(m.current.flags&128)===128)}catch{}if(A!==null){m=an.T,F=_o(),jn(2),an.T=null;try{for(var H=d.onRecoverableError,te=0;te<A.length;te++){var _e=A[te];H(_e.value,{componentStack:_e.stack})}}finally{an.T=m,jn(F)}}(jl&3)!==0&&Nl(),Mt(d),F=d.pendingLanes,(x&261930)!==0&&(F&42)!==0?d===om?ri++:(ri=0,om=d):ri=0,ji&&Xp(),ct(0)}}function Gg(d,m){(d.pooledCacheLanes&=m)===0&&(m=d.pooledCache,m!=null&&(d.pooledCache=null,qe(m)))}function Nl(){return pc(),Pl(),Hg(),zp()}function zp(){if(Cr!==5)return!1;var d=Ac,m=dd;dd=0;var x=V(jl),A=32>x?32:x;x=an.T;var F=_o();try{jn(A),an.T=null,A=S0,S0=null;var H=Ac,te=jl;if(Cr=0,Gf=Ac=null,jl=0,(Bn&6)!==0)throw Error(r(331));var _e=Bn;if(Bn|=4,zg(H.current),Ug(H,H.current,te,A),Bn=_e,ct(0,!1),gs&&typeof gs.onPostCommitFiberRoot=="function")try{gs.onPostCommitFiberRoot(Uf,H)}catch{}return!0}finally{jn(F),an.T=x,Gg(d,m)}}function cu(d,m,x){m=le(x,m),m=T(d.stateNode,m,2),d=$r(d,m,2),d!==null&&(k(d,2),Mt(d))}function mn(d,m,x){if(d.tag===3)cu(d,d,x);else for(;m!==null;){if(m.tag===3){cu(m,d,x);break}else if(m.tag===1){var A=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(Tc===null||!Tc.has(A))){d=le(x,d),x=W(2),A=$r(m,x,2),A!==null&&(K(x,A,m,d),k(A,2),Mt(A));break}}m=m.return}}function Zh(d,m,x){var A=d.pingCache;if(A===null){A=d.pingCache=new $s;var F=new Set;A.set(m,F)}else F=A.get(m),F===void 0&&(F=new Set,A.set(m,F));F.has(x)||(wu=!0,F.add(x),d=x1.bind(null,d,m,x),m.then(d,d))}function x1(d,m,x){var A=d.pingCache;A!==null&&A.delete(m),d.pingedLanes|=d.suspendedLanes&x,d.warmLanes&=~x,kn===d&&(Gn&x)===x&&(Qi===4||Qi===3&&(Gn&62914560)===Gn&&300>wa()-am?(Bn&2)===0&&sr(d,0):fd|=x,hd===Gn&&(hd=0)),Mt(d)}function S1(d,m){m===0&&(m=D()),d=Ci(d,m),d!==null&&(k(d,m),Mt(d))}function IC(d){var m=d.memoizedState,x=0;m!==null&&(x=m.retryLane),S1(d,x)}function RC(d,m){var x=0;switch(d.tag){case 31:case 13:var A=d.stateNode,F=d.memoizedState;F!==null&&(x=F.retryLane);break;case 19:A=d.stateNode;break;case 22:A=d.stateNode._retryCache;break;default:throw Error(r(314))}A!==null&&A.delete(m),S1(d,x)}function Tr(d,m){return Kp(d,m)}function Ny(d,m,x,A){this.tag=d,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ef(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Vs(d,m){var x=d.alternate;return x===null?(x=t(d.tag,m,d.key,d.mode),x.elementType=d.elementType,x.type=d.type,x.stateNode=d.stateNode,x.alternate=d,d.alternate=x):(x.pendingProps=m,x.type=d.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=d.flags&65011712,x.childLanes=d.childLanes,x.lanes=d.lanes,x.child=d.child,x.memoizedProps=d.memoizedProps,x.memoizedState=d.memoizedState,x.updateQueue=d.updateQueue,m=d.dependencies,x.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},x.sibling=d.sibling,x.index=d.index,x.ref=d.ref,x.refCleanup=d.refCleanup,x}function Wg(d,m){d.flags&=65011714;var x=d.alternate;return x===null?(d.childLanes=0,d.lanes=m,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=x.childLanes,d.lanes=x.lanes,d.child=x.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=x.memoizedProps,d.memoizedState=x.memoizedState,d.updateQueue=x.updateQueue,d.type=x.type,m=x.dependencies,d.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),d}function mc(d,m,x,A,F,H){var te=0;if(A=d,typeof d=="function")Ef(d)&&(te=1);else if(typeof d=="string")te=xo&&Fr?s0(d,x,Qr.current)?26:mb(d)?27:5:xo?s0(d,x,Qr.current)?26:5:Fr&&mb(d)?27:5;else e:switch(d){case Hp:return d=t(31,x,m,F),d.elementType=Hp,d.lanes=H,d;case Cf:return yo(x.children,F,H,m);case If:te=8,F|=24;break;case Rf:return d=t(12,x,m,F|2),d.elementType=Rf,d.lanes=H,d;case Yg:return d=t(13,x,m,F),d.elementType=Yg,d.lanes=H,d;case gc:return d=t(19,x,m,F),d.elementType=gc,d.lanes=H,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case bo:te=10;break e;case jp:te=9;break e;case Qh:te=11;break e;case Kg:te=14;break e;case Ha:te=16,A=null;break e}te=29,x=Error(r(130,d===null?"null":typeof d,"")),A=null}return m=t(te,x,m,F),m.elementType=d,m.type=A,m.lanes=H,m}function yo(d,m,x,A){return d=t(7,d,A,m),d.lanes=x,d}function Oy(d,m,x){return d=t(6,d,null,m),d.lanes=x,d}function Dy(d){var m=t(18,null,null,0);return m.stateNode=d,m}function Ly(d,m,x){return m=t(4,d.children!==null?d.children:[],d.key,m),m.lanes=x,m.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},m}function w1(d,m,x,A,F,H,te,_e,$e){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ps,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=z(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=z(0),this.hiddenUpdates=z(null),this.identifierPrefix=A,this.onUncaughtError=F,this.onCaughtError=H,this.onRecoverableError=te,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$e,this.incompleteTransitions=new Map}function uu(d,m,x,A,F,H,te,_e,$e,mt,Ct,St){return d=new w1(d,m,x,te,$e,mt,Ct,St,_e),m=1,H===!0&&(m|=24),H=t(3,null,null,m),d.current=H,H.stateNode=d,m=Ue(),m.refCount++,d.pooledCache=m,m.refCount++,H.memoizedState={element:A,isDehydrated:x,cache:m},Ii(H),d}function qg(d){return d?(d=Dl,d):Dl}function Bp(d){var m=d._reactInternals;if(m===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=o(m),d=d!==null?c(d):null,d===null?null:ed(d.stateNode)}function ky(d,m,x,A,F,H){F=qg(F),A.context===null?A.context=F:A.pendingContext=F,A=kr(m),A.payload={element:x},H=H===void 0?null:H,H!==null&&(A.callback=H),x=$r(d,A,m),x!==null&&(Xi(x,d,m),ls(x,d,m))}function Tf(d,m){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var x=d.retryLane;d.retryLane=x!==0&&x<m?x:m}}function Vp(d,m){Tf(d,m),(d=d.alternate)&&Tf(d,m)}var Dn={},$g=_g,hs=ise,Xg=Object.assign,Af=Symbol.for("react.element"),Ol=Symbol.for("react.transitional.element"),Mf=Symbol.for("react.portal"),Cf=Symbol.for("react.fragment"),If=Symbol.for("react.strict_mode"),Rf=Symbol.for("react.profiler"),jp=Symbol.for("react.consumer"),bo=Symbol.for("react.context"),Qh=Symbol.for("react.forward_ref"),Yg=Symbol.for("react.suspense"),gc=Symbol.for("react.suspense_list"),Kg=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Hp=Symbol.for("react.activity"),Uy=Symbol.for("react.memo_cache_sentinel"),vc=Symbol.iterator,fu=Symbol.for("react.client.reference"),hu=Array.isArray,an=$g.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Fy=e.rendererVersion,Gp=e.rendererPackageName,Jh=e.extraDevToolsConfig,ed=e.getPublicInstance,E1=e.getRootHostContext,td=e.getChildHostContext,Zg=e.prepareForCommit,T1=e.resetAfterCommit,zy=e.createInstance;e.cloneMutableInstance;var Wp=e.appendInitialChild,ds=e.finalizeInitialChildren,Ga=e.shouldSetTextContent,yc=e.createTextInstance;e.cloneMutableTextInstance;var By=e.scheduleTimeout,A1=e.cancelTimeout,ps=e.noTimeout,gr=e.isPrimaryRenderer;e.warnsIfNotActing;var qn=e.supportsMutation,js=e.supportsPersistence,ji=e.supportsHydration,Mn=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var _i=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var jn=e.setCurrentUpdatePriority,_o=e.getCurrentUpdatePriority,nd=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var Pf=e.shouldAttemptEagerTransition,Qg=e.detachDeletedInstance;e.requestPostPaintCallback;var qp=e.maySuspendCommit,id=e.maySuspendCommitOnUpdate,Vy=e.maySuspendCommitInSyncRender,Yi=e.preloadInstance,jy=e.startSuspendingCommit,Jg=e.suspendInstance;e.suspendOnActiveViewTransition;var M1=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var Nf=e.NotPendingTransition,Of=e.HostTransitionContext,Hy=e.resetFormInstance;e.bindToConsole;var Gy=e.supportsMicrotasks,Wy=e.scheduleMicrotask,Ur=e.supportsTestSelectors,vr=e.findFiberRoot,e0=e.getBoundingRect,$p=e.getTextContent,du=e.isHiddenSubtree,qy=e.matchAccessibilityRole,bc=e.setFocusIfFocusable,t0=e.setupIntersectionObserver,$y=e.appendChild,Xy=e.appendChildToContainer,C1=e.commitTextUpdate,I1=e.commitMount,R1=e.commitUpdate,P1=e.insertBefore,N1=e.insertInContainerBefore,O1=e.removeChild,Yy=e.removeChildFromContainer,Ky=e.resetTextContent,PC=e.hideInstance,D1=e.hideTextInstance,L1=e.unhideInstance,k1=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var Zy=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var U1=e.cloneInstance,Qy=e.createContainerChildSet,Jy=e.appendChildToContainerChildSet,F1=e.finalizeContainerChildren,eb=e.replaceContainerChildren,z1=e.cloneHiddenInstance,tb=e.cloneHiddenTextInstance,pu=e.isSuspenseInstancePending,n0=e.isSuspenseInstanceFallback,i0=e.getSuspenseInstanceFallbackErrorDetails,r0=e.registerSuspenseInstanceRetry,B1=e.canHydrateFormStateMarker,nb=e.isFormStateMarkerMatching,V1=e.getNextHydratableSibling,j1=e.getNextHydratableSiblingAfterSingleton,H1=e.getFirstHydratableChild,G1=e.getFirstHydratableChildWithinContainer,W1=e.getFirstHydratableChildWithinActivityInstance,q1=e.getFirstHydratableChildWithinSuspenseInstance,ib=e.getFirstHydratableChildWithinSingleton,$1=e.canHydrateInstance,X1=e.canHydrateTextInstance,rb=e.canHydrateActivityInstance,Y1=e.canHydrateSuspenseInstance,K1=e.hydrateInstance,NC=e.hydrateTextInstance,ab=e.hydrateActivityInstance,Z1=e.hydrateSuspenseInstance,Q1=e.getNextHydratableInstanceAfterActivityInstance,sb=e.getNextHydratableInstanceAfterSuspenseInstance,J1=e.commitHydratedInstance,eS=e.commitHydratedContainer,OC=e.commitHydratedActivityInstance,DC=e.commitHydratedSuspenseInstance,tS=e.finalizeHydratedChildren,Xp=e.flushHydrationEvents;e.clearActivityBoundary;var ob=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var a0=e.clearSuspenseBoundaryFromContainer,nS=e.hideDehydratedBoundary,iS=e.unhideDehydratedBoundary,rd=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var rS=e.validateHydratableInstance,lb=e.validateHydratableTextInstance,xo=e.supportsResources,s0=e.isHostHoistableType,Yp=e.getHoistableRoot,cb=e.getResource,ub=e.acquireResource,mu=e.releaseResource,aS=e.hydrateHoistable,fb=e.mountHoistable,hb=e.unmountHoistable,o0=e.createHoistableInstance,sS=e.prepareToCommitHoistables,db=e.mayResourceSuspendCommit,pb=e.preloadResource,oS=e.suspendResource,Fr=e.supportsSingletons,l0=e.resolveSingletonInstance,Ar=e.acquireSingletonInstance,Zr=e.releaseSingletonInstance,mb=e.isHostSingletonType,Df=e.isSingletonScope,c0=[],Lf=-1,Dl={},ms=Math.clz32?Math.clz32:E,u0=Math.log,lS=Math.LN2,f0=256,kf=262144,ad=4194304,Kp=hs.unstable_scheduleCallback,h0=hs.unstable_cancelCallback,cS=hs.unstable_shouldYield,gb=hs.unstable_requestPaint,wa=hs.unstable_now,d0=hs.unstable_ImmediatePriority,uS=hs.unstable_UserBlockingPriority,Zp=hs.unstable_NormalPriority,p0=hs.unstable_IdlePriority,vb=hs.log,fS=hs.unstable_setDisableYieldValue,Uf=null,gs=null,yr=typeof Object.is=="function"?Object.is:Z,m0=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)},LC=Object.prototype.hasOwnProperty,g0,Ll,Qp=!1,yb=new WeakMap,_c=[],kl=0,xi=null,Jp=0,So=[],Hs=0,wo=null,ca=1,Zo="",Qr=v(null),xc=v(null),ua=v(null),em=v(null),zr=null,Hi=null,Hn=!1,Ul=null,Wa=!1,v0=Error(r(519)),Eo=v(null),Ni=null,Qo=null,hS=typeof AbortController<"u"?AbortController:function(){var d=[],m=this.signal={aborted:!1,addEventListener:function(x,A){d.push(A)}};this.abort=function(){m.aborted=!0,d.forEach(function(x){return x()})}},Jr=hs.unstable_scheduleCallback,kC=hs.unstable_NormalPriority,Gi={$$typeof:bo,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},tm=null,mi=null,Ea=!1,To=!1,y0=!1,gu=0,sd=null,bb=0,Sc=0,Br=null,Ao=an.S;an.S=function(d,m){Hf=wa(),typeof m=="object"&&m!==null&&typeof m.then=="function"&&xt(d,m),Ao!==null&&Ao(d,m)};var vu=v(null),Vr=Error(r(460)),b0=Error(r(474)),Mo=Error(r(542)),Fl={then:function(){}},qa=null,yu=null,Ff=0,fa=Ls(!0),_b=Ls(!1),ha=[],zl=0,zf=0,Gs=!1,_0=!1,Bf=v(null),bu=v(0),vs=v(null),ys=null,or=v(0),wc=0,Cn=null,Kt=null,yn=null,Ln=!1,Pn=!1,Xn=!1,Ta=0,Co=0,Jo=null,xb=0,Ws={readContext:ne,use:qi,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt};Ws.useEffectEvent=pt;var Ki={readContext:ne,use:qi,useCallback:function(d,m){return dn().memoizedState=[d,m===void 0?null:m],d},useContext:ne,useEffect:Kc,useImperativeHandle:function(d,m,x){x=x!=null?x.concat([d]):null,vl(4194308,4,oc.bind(null,m,d),x)},useLayoutEffect:function(d,m){return vl(4194308,4,d,m)},useInsertionEffect:function(d,m){vl(4,2,d,m)},useMemo:function(d,m){var x=dn();m=m===void 0?null:m;var A=d();if(Xn){j(!0);try{d()}finally{j(!1)}}return x.memoizedState=[A,m],A},useReducer:function(d,m,x){var A=dn();if(x!==void 0){var F=x(m);if(Xn){j(!0);try{x(m)}finally{j(!1)}}}else F=m;return A.memoizedState=A.baseState=F,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:F},A.queue=d,d=d.dispatch=Uh.bind(null,Cn,d),[A.memoizedState,d]},useRef:function(d){var m=dn();return d={current:d},m.memoizedState=d},useState:function(d){d=gl(d);var m=d.queue,x=Mp.bind(null,Cn,m);return m.dispatch=x,[d.memoizedState,x]},useDebugValue:bl,useDeferredValue:function(d,m){var x=dn();return Zc(x,d,m)},useTransition:function(){var d=gl(!1);return d=Qc.bind(null,Cn,d.queue,!0,!1),dn().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,m,x){var A=Cn,F=dn();if(Hn){if(x===void 0)throw Error(r(407));x=x()}else{if(x=m(),kn===null)throw Error(r(349));(Gn&127)!==0||pr(A,m,x)}F.memoizedState=x;var H={value:x,getSnapshot:m};return F.queue=H,Kc(ml.bind(null,A,H,d),[d]),A.flags|=2048,za(9,{destroy:void 0},mr.bind(null,A,H,x,m),null),x},useId:function(){var d=dn(),m=kn.identifierPrefix;if(Hn){var x=Zo,A=ca;x=(A&~(1<<32-ms(A)-1)).toString(32)+x,m="_"+m+"R_"+x,x=Ta++,0<x&&(m+="H"+x.toString(32)),m+="_"}else x=xb++,m="_"+m+"r_"+x.toString(32)+"_";return d.memoizedState=m},useHostTransitionStatus:Lh,useFormState:sc,useActionState:sc,useOptimistic:function(d){var m=dn();m.memoizedState=m.baseState=d;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=x,m=fo.bind(null,Cn,!0,x),x.dispatch=m,[d,m]},useMemoCache:ks,useCacheRefresh:function(){return dn().memoizedState=Ng.bind(null,Cn)},useEffectEvent:function(d){var m=dn(),x={impl:d};return m.memoizedState=x,function(){if((Bn&2)!==0)throw Error(r(440));return x.impl.apply(void 0,arguments)}}},Bl={readContext:ne,use:qi,useCallback:vf,useContext:ne,useEffect:Go,useImperativeHandle:Oh,useInsertionEffect:yl,useLayoutEffect:qo,useMemo:$o,useReducer:la,useRef:Nh,useState:function(){return la(Ti)},useDebugValue:bl,useDeferredValue:function(d,m){var x=Pt();return Dh(x,Kt.memoizedState,d,m)},useTransition:function(){var d=la(Ti)[0],m=Pt().memoizedState;return[typeof d=="boolean"?d:ln(d),m]},useSyncExternalStore:bi,useId:Jc,useHostTransitionStatus:Lh,useFormState:uo,useActionState:uo,useOptimistic:function(d,m){var x=Pt();return pf(x,Kt,d,m)},useMemoCache:ks,useCacheRefresh:kh};Bl.useEffectEvent=Xr;var _u={readContext:ne,use:qi,useCallback:vf,useContext:ne,useEffect:Go,useImperativeHandle:Oh,useInsertionEffect:yl,useLayoutEffect:qo,useMemo:$o,useReducer:Li,useRef:Nh,useState:function(){return Li(Ti)},useDebugValue:bl,useDeferredValue:function(d,m){var x=Pt();return Kt===null?Zc(x,d,m):Dh(x,Kt.memoizedState,d,m)},useTransition:function(){var d=Li(Ti)[0],m=Pt().memoizedState;return[typeof d=="boolean"?d:ln(d),m]},useSyncExternalStore:bi,useId:Jc,useHostTransitionStatus:Lh,useFormState:pi,useActionState:pi,useOptimistic:function(d,m){var x=Pt();return Kt!==null?pf(x,Kt,d,m):(x.baseState=d,[d,x.queue.dispatch])},useMemoCache:ks,useCacheRefresh:kh};_u.useEffectEvent=Xr;var nm={enqueueSetState:function(d,m,x){d=d._reactInternals;var A=Vi(),F=kr(A);F.payload=m,x!=null&&(F.callback=x),m=$r(d,F,A),m!==null&&(Xi(m,d,A),ls(m,d,A))},enqueueReplaceState:function(d,m,x){d=d._reactInternals;var A=Vi(),F=kr(A);F.tag=1,F.payload=m,x!=null&&(F.callback=x),m=$r(d,F,A),m!==null&&(Xi(m,d,A),ls(m,d,A))},enqueueForceUpdate:function(d,m){d=d._reactInternals;var x=Vi(),A=kr(x);A.tag=2,m!=null&&(A.callback=m),m=$r(d,A,x),m!==null&&(Xi(m,d,x),ls(m,d,x))}},$a=Error(r(461)),Ui=!1,Vf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},lr=!1,cr=!1,od=!1,Sb=typeof WeakSet=="function"?WeakSet:Set,br=null,Zi=null,_r=!1,gi=null,qs=8192,ld={getCacheForType:function(d){var m=ne(Gi),x=m.data.get(d);return x===void 0&&(x=d(),m.data.set(d,x)),x},cacheSignal:function(){return ne(Gi).controller.signal}},Io=0,cd=1,ud=2,im=3,xu=4;if(typeof Symbol=="function"&&Symbol.for){var jf=Symbol.for;Io=jf("selector.component"),cd=jf("selector.has_pseudo_class"),ud=jf("selector.role"),im=jf("selector.test_id"),xu=jf("selector.text")}var $s=typeof WeakMap=="function"?WeakMap:Map,Bn=0,kn=null,Vn=null,Gn=0,vi=0,Mr=null,el=!1,Su=!1,wu=!1,Vl=0,Qi=0,Ec=0,Eu=0,fd=0,Xa=0,hd=0,rm=null,bs=null,x0=!1,am=0,Hf=0,Tu=1/0,sm=null,Tc=null,Cr=0,Ac=null,Gf=null,jl=0,dd=0,S0=null,wb=null,ri=0,om=null;return Dn.attemptContinuousHydration=function(d){if(d.tag===13||d.tag===31){var m=Ci(d,67108864);m!==null&&Xi(m,d,67108864),Vp(d,67108864)}},Dn.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13||d.tag===31){var m=Vi();m=B(m);var x=Ci(d,m);x!==null&&Xi(x,d,m),Vp(d,m)}},Dn.attemptSynchronousHydration=function(d){switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var m=S(d.pendingLanes);if(m!==0){for(d.pendingLanes|=2,d.entangledLanes|=2;m;){var x=1<<31-ms(m);d.entanglements[1]|=x,m&=~x}Mt(d),(Bn&6)===0&&(Tu=wa()+500,ct(0))}}break;case 31:case 13:m=Ci(d,2),m!==null&&Xi(m,d,2),Bg(),Vp(d,2)}},Dn.batchedUpdates=function(d,m){return d(m)},Dn.createComponentSelector=function(d){return{$$typeof:Io,value:d}},Dn.createContainer=function(d,m,x,A,F,H,te,_e,$e,mt){return uu(d,m,!1,null,x,A,H,null,te,_e,$e,mt)},Dn.createHasPseudoClassSelector=function(d){return{$$typeof:cd,value:d}},Dn.createHydrationContainer=function(d,m,x,A,F,H,te,_e,$e,mt,Ct,St,zt,Tn){var xr;return d=uu(x,A,!0,d,F,H,_e,Tn,$e,mt,Ct,St),d.context=qg(null),x=d.current,A=Vi(),A=B(A),F=kr(A),F.callback=(xr=m)!=null?xr:null,$r(x,F,A),m=A,d.current.lanes=m,k(d,m),Mt(d),d},Dn.createPortal=function(d,m,x){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mf,key:A==null?null:""+A,children:d,containerInfo:m,implementation:x}},Dn.createRoleSelector=function(d){return{$$typeof:ud,value:d}},Dn.createTestNameSelector=function(d){return{$$typeof:im,value:d}},Dn.createTextSelector=function(d){return{$$typeof:xu,value:d}},Dn.defaultOnCaughtError=function(d){console.error(d)},Dn.defaultOnRecoverableError=function(d){m0(d)},Dn.defaultOnUncaughtError=function(d){m0(d)},Dn.deferredUpdates=function(d){var m=an.T,x=_o();try{return jn(32),an.T=null,d()}finally{jn(x),an.T=m}},Dn.discreteUpdates=function(d,m,x,A,F){var H=an.T,te=_o();try{return jn(2),an.T=null,d(m,x,A,F)}finally{jn(te),an.T=H,Bn===0&&(Tu=wa()+500)}},Dn.findAllNodes=fs,Dn.findBoundingRects=function(d,m){if(!Ur)throw Error(r(363));m=fs(d,m),d=[];for(var x=0;x<m.length;x++)d.push(e0(m[x]));for(m=d.length-1;0<m;m--){x=d[m];for(var A=x.x,F=A+x.width,H=x.y,te=H+x.height,_e=m-1;0<=_e;_e--)if(m!==_e){var $e=d[_e],mt=$e.x,Ct=mt+$e.width,St=$e.y,zt=St+$e.height;if(A>=mt&&H>=St&&F<=Ct&&te<=zt){d.splice(m,1);break}else if(A!==mt||x.width!==$e.width||zt<H||St>te){if(!(H!==St||x.height!==$e.height||Ct<A||mt>F)){mt>A&&($e.width+=mt-A,$e.x=A),Ct<F&&($e.width=F-mt),d.splice(m,1);break}}else{St>H&&($e.height+=St-H,$e.y=H),zt<te&&($e.height=te-St),d.splice(m,1);break}}}return d},Dn.findHostInstance=Bp,Dn.findHostInstanceWithNoPortals=function(d){return d=o(d),d=d!==null?f(d):null,d===null?null:ed(d.stateNode)},Dn.findHostInstanceWithWarning=function(d){return Bp(d)},Dn.flushPassiveEffects=Nl,Dn.flushSyncFromReconciler=function(d){var m=Bn;Bn|=1;var x=an.T,A=_o();try{if(jn(2),an.T=null,d)return d()}finally{jn(A),an.T=x,Bn=m,(Bn&6)===0&&ct(0)}},Dn.flushSyncWork=Bg,Dn.focusWithin=function(d,m){if(!Ur)throw Error(r(363));for(d=au(d),m=$h(d,m),m=Array.from(m),d=0;d<m.length;){var x=m[d++],A=x.tag;if(!du(x)){if((A===5||A===26||A===27)&&bc(x.stateNode))return!0;for(x=x.child;x!==null;)m.push(x),x=x.sibling}}return!1},Dn.getFindAllNodesFailureDescription=function(d,m){if(!Ur)throw Error(r(363));var x=0,A=[];d=[au(d),0];for(var F=0;F<d.length;){var H=d[F++],te=H.tag,_e=d[F++],$e=m[_e];if((te!==5&&te!==26&&te!==27||!du(H))&&(su(H,$e)&&(A.push(qh($e)),_e++,_e>x&&(x=_e)),_e<m.length))for(H=H.child;H!==null;)d.push(H,_e),H=H.sibling}if(x<m.length){for(d=[];x<m.length;x++)d.push(qh(m[x]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},Dn.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 27:case 5:return ed(d.child.stateNode);default:return d.child.stateNode}},Dn.injectIntoDevTools=function(){var d={bundleType:0,version:Fy,rendererPackageName:Gp,currentDispatcherRef:an,reconcilerVersion:"19.2.0"};if(Jh!==null&&(d.rendererConfig=Jh),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)d=!0;else{try{Uf=m.inject(d),gs=m}catch{}d=!!m.checkDCE}}return d},Dn.isAlreadyRendering=function(){return(Bn&6)!==0},Dn.observeVisibleRects=function(d,m,x,A){if(!Ur)throw Error(r(363));d=fs(d,m);var F=t0(d,x,A).disconnect;return{disconnect:function(){F()}}},Dn.shouldError=function(){return null},Dn.shouldSuspend=function(){return!1},Dn.startHostTransition=function(d,m,x,A){if(d.tag!==5)throw Error(r(476));var F=Ap(d).queue;Qc(d,F,m,Nf,x===null?i:function(){var H=Ap(d);return H.next===null&&(H=d.alternate.memoizedState),eu(d,H.next.queue,{},Vi()),x(A)})},Dn.updateContainer=function(d,m,x,A){var F=m.current,H=Vi();return ky(F,H,d,m,x,A),H},Dn.updateContainerSync=function(d,m,x,A){return ky(m.current,2,d,m,x,A),2},Dn},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(v2)),v2.exports}var b2;function Nse(){return b2||(b2=1,g2.exports=Pse()),g2.exports}var Ose=Nse();const Dse=Rse(Ose);function Lse(n){const e=Dse(n);return e.injectIntoDevTools(),e}const p9=0,kv={},kse=/^three(?=[A-Z])/,vM=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let Use=0;const Fse=n=>typeof n=="function";function zse(n){if(Fse(n)){const e=`${Use++}`;return kv[e]=n,e}else Object.assign(kv,n)}function m9(n,e){const t=vM(n),i=kv[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function Bse(n,e,t){var i;return n=vM(n)in kv?n:n.replace(kse,""),m9(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,fT(e.object,t,n,e)}function Vse(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?dT(n.parent,n):Zs(n.object)&&(n.object.visible=!1),n.isHidden=!0,ny(n)}}function g9(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?hT(n.parent,n):Zs(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,ny(n)}}function Q3(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var r,a;const s=kv[vM(e.type)];e.object=(r=e.props.object)!=null?r:new s(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(Ud(e.object,e.props),e.props.attach)hT(n,e);else if(Zs(e.object)&&Zs(n.object)){const s=n.object.children.indexOf(t==null?void 0:t.object);if(t&&s!==-1){const o=n.object.children.indexOf(e.object);if(o!==-1){n.object.children.splice(o,1);const c=o<s?s-1:s;n.object.children.splice(c,0,e.object)}else e.object.parent=n.object,n.object.children.splice(s,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const s of e.children)Q3(e,s);ny(e)}}function sR(n,e){e&&(e.parent=n,n.children.push(e),Q3(n,e))}function _2(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),Q3(n,e,t)}function v9(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():MN.unstable_scheduleCallback(MN.unstable_IdlePriority,e)}}function IN(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?dT(n,e):Zs(e.object)&&Zs(n.object)&&(n.object.remove(e.object),xse(a9(e),e.object));const r=e.props.dispose!==null&&t!==!1;for(let a=e.children.length-1;a>=0;a--){const s=e.children[a];IN(e,s,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&v9(e.object),t===void 0&&ny(e)}function jse(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const Jw=[];function Hse(){for(const[t]of Jw){const i=t.parent;if(i){t.props.attach?dT(i,t):Zs(t.object)&&Zs(i.object)&&i.object.remove(t.object);for(const r of t.children)r.props.attach?dT(t,r):Zs(r.object)&&Zs(t.object)&&t.object.remove(r.object)}t.isHidden&&g9(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&v9(t.object)}for(const[t,i,r]of Jw){t.props=i;const a=t.parent;if(a){var n,e;const s=kv[vM(t.type)];t.object=(n=t.props.object)!=null?n:new s(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,jse(r,t.object),Ud(t.object,t.props),t.props.attach?hT(a,t):Zs(t.object)&&Zs(a.object)&&a.object.add(t.object);for(const o of t.children)o.props.attach?hT(t,o):Zs(o.object)&&Zs(t.object)&&t.object.add(o.object);ny(t)}}Jw.length=0}const oR=()=>{},x2={};let _w=p9;const Gse=0,Wse=4,RN=Lse({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:Bse,removeChild:IN,appendChild:sR,appendInitialChild:sR,insertBefore:_2,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||sR(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||IN(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||_2(i,e,t)},getRootHostContext:()=>x2,getChildHostContext:()=>x2,commitUpdate(n,e,t,i,r){var a,s,o;m9(e,i);let c=!1;if((n.type==="primitive"&&t.object!==i.object||((a=i.args)==null?void 0:a.length)!==((s=t.args)==null?void 0:s.length)||(o=i.args)!=null&&o.some((h,p)=>{var v;return h!==((v=t.args)==null?void 0:v[p])}))&&(c=!0),c)Jw.push([n,{...i},r]);else{const h=vse(n,i);Object.keys(h).length&&(Object.assign(n.props,h),Ud(n.object,h))}(r.sibling===null||(r.flags&Wse)===Gse)&&Hse()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n==null?void 0:n.object,prepareForCommit:()=>null,preparePortalMount:n=>fT(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:Vse,unhideInstance:g9,createTextInstance:oR,hideTextInstance:oR,unhideTextInstance:oR,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:q.createContext(null),setCurrentUpdatePriority(n){_w=n},getCurrentUpdatePriority(){return _w},resolveUpdatePriority(){var n;if(_w!==p9)return _w;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Cse;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ase;default:return Mse}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:Ise.version,applyViewTransitionName(n,e,t){},restoreViewTransitionName(n,e){},cancelViewTransitionName(n,e,t){},cancelRootViewTransitionName(n){},restoreRootViewTransitionName(n){},InstanceMeasurement:null,measureInstance:n=>null,wasInstanceInViewport:n=>!0,hasInstanceChanged:(n,e)=>!1,hasInstanceAffectedParent:(n,e)=>!1,suspendOnActiveViewTransition(n,e){},startGestureTransition:()=>null,startViewTransition:()=>null,stopViewTransition(n){},createViewTransitionInstance:n=>null,getCurrentGestureOffset(n){throw new Error("startGestureTransition is not yet supported in react-three-fiber.")},cloneMutableInstance(n,e){return n},cloneMutableTextInstance(n){return n},cloneRootViewTransitionContainer(n){throw new Error("Not implemented.")},removeRootViewTransitionClone(n,e){throw new Error("Not implemented.")},createFragmentInstance:n=>null,updateFragmentInstanceFiber(n,e){},commitNewChildToFragmentInstance(n,e){},deleteChildFromFragmentInstance(n,e){},measureClonedInstance:n=>null,maySuspendCommitOnUpdate:(n,e,t)=>!1,maySuspendCommitInSyncRender:(n,e)=>!1,startSuspendingCommit:()=>null,getSuspendedCommitReason:(n,e)=>null}),sg=new Map,Y0={objects:"shallow",strict:!1};function qse(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:a}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function $se(n){const e=sg.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,a=i||wse(ON,w2),s=t||RN.createContainer(a,Tse,null,!1,null,"",r,r,r,null);e||sg.set(n,{fiber:s,store:a});let o,c,f=!1,h=null;return{async configure(p={}){let v;h=new Promise(Q=>v=Q);let{gl:y,size:_,scene:E,events:S,onCreated:w,shadows:I=!1,linear:P=!1,flat:D=!1,legacy:z=!1,orthographic:k=!1,frameloop:U="always",dpr:R=[1,2],performance:M,raycaster:L,camera:B,onPointerMissed:V}=p,j=a.getState(),Z=j.gl;if(!j.gl){const Q={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},re=typeof y=="function"?await y(Q):y;p2(re)?Z=re:Z=new Q8({...Q,...y}),j.set({gl:Z})}let J=j.raycaster;J||j.set({raycaster:J=new G8});const{params:G,...$}=L||{};if(ur.equ($,J,Y0)||Ud(J,{...$}),ur.equ(G,J.params,Y0)||Ud(J,{params:{...J.params,...G}}),!j.camera||j.camera===c&&!ur.equ(c,B,Y0)){c=B;const Q=B==null?void 0:B.isCamera,re=Q?B:k?new ch(0,0,0,0,.1,1e3):new Gr(75,0,.1,1e3);Q||(re.position.z=5,B&&(Ud(re,B),re.manual||("aspect"in B||"left"in B||"right"in B||"bottom"in B||"top"in B)&&(re.manual=!0,re.updateProjectionMatrix())),!j.camera&&!(B!=null&&B.rotation)&&re.lookAt(0,0,0)),j.set({camera:re}),J.camera=re}if(!j.scene){let Q;E!=null&&E.isScene?(Q=E,fT(Q,a,"",{})):(Q=new x3,fT(Q,a,"",{}),E&&Ud(Q,E)),j.set({scene:Q})}S&&!j.events.handlers&&j.set({events:S(a)});const ae=qse(n,_);if(ur.equ(ae,j.size,Y0)||j.setSize(ae.width,ae.height,ae.top,ae.left),R&&j.viewport.dpr!==l9(R)&&j.setDpr(R),j.frameloop!==U&&j.setFrameloop(U),j.onPointerMissed||j.set({onPointerMissed:V}),M&&!ur.equ(M,j.performance,Y0)&&j.set(Q=>({performance:{...Q.performance,...M}})),!j.xr){var le;const Q=(de,xe)=>{const ve=a.getState();ve.frameloop!=="never"&&w2(de,!0,ve,xe)},re=()=>{const de=a.getState();de.gl.xr.enabled=de.gl.xr.isPresenting,de.gl.xr.setAnimationLoop(de.gl.xr.isPresenting?Q:null),de.gl.xr.isPresenting||ON(de)},ye={connect(){const de=a.getState().gl;de.xr.addEventListener("sessionstart",re),de.xr.addEventListener("sessionend",re)},disconnect(){const de=a.getState().gl;de.xr.removeEventListener("sessionstart",re),de.xr.removeEventListener("sessionend",re)}};typeof((le=Z.xr)==null?void 0:le.addEventListener)=="function"&&ye.connect(),j.set({xr:ye})}if(Z.shadowMap){const Q=Z.shadowMap.enabled,re=Z.shadowMap.type;if(Z.shadowMap.enabled=!!I,ur.boo(I))Z.shadowMap.type=p_;else if(ur.str(I)){var ue;const ye={basic:cj,percentage:mv,soft:p_,variance:Om};Z.shadowMap.type=(ue=ye[I])!=null?ue:p_}else ur.obj(I)&&Object.assign(Z.shadowMap,I);(Q!==Z.shadowMap.enabled||re!==Z.shadowMap.type)&&(Z.shadowMap.needsUpdate=!0)}return Qn.enabled=!z,f||(Z.outputColorSpace=P?rp:ts,Z.toneMapping=D?Zl:LA),j.legacy!==z&&j.set(()=>({legacy:z})),j.linear!==P&&j.set(()=>({linear:P})),j.flat!==D&&j.set(()=>({flat:D})),y&&!ur.fun(y)&&!p2(y)&&!ur.equ(y,Z,Y0)&&Ud(Z,y),o=w,f=!0,v(),this},render(p){return!f&&!h&&this.configure(),h.then(()=>{RN.updateContainer(N.jsx(Xse,{store:a,children:p,onCreated:o,rootElement:n}),s,null,()=>{})}),a},unmount(){y9(n)}}}function Xse({store:n,children:e,onCreated:t,rootElement:i}){return kx(()=>{const r=n.getState();r.set(a=>({internal:{...a.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),N.jsx(f9.Provider,{value:n,children:e})}function y9(n,e){const t=sg.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),RN.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var a,s,o,c;r.events.disconnect==null||r.events.disconnect(),(a=r.gl)==null||(s=a.renderLists)==null||s.dispose==null||s.dispose(),(o=r.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(c=r.gl)!=null&&c.xr&&r.xr.disconnect(),pse(r.scene),sg.delete(n)}catch{}},500)})}}const Yse=new Set,Kse=new Set,Zse=new Set;function lR(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function w_(n,e){switch(n){case"before":return lR(Yse,e);case"after":return lR(Kse,e);case"tail":return lR(Zse,e)}}let cR,uR;function PN(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),cR=e.internal.subscribers;for(let r=0;r<cR.length;r++)uR=cR[r],uR.ref.current(uR.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let pT=!1,NN=!1,fR,S2,K0;function b9(n){S2=requestAnimationFrame(b9),pT=!0,fR=0,w_("before",n),NN=!0;for(const t of sg.values()){var e;K0=t.store.getState(),K0.internal.active&&(K0.frameloop==="always"||K0.internal.frames>0)&&!((e=K0.gl.xr)!=null&&e.isPresenting)&&(fR+=PN(n,K0))}if(NN=!1,w_("after",n),fR===0)return w_("tail",n),pT=!1,cancelAnimationFrame(S2)}function ON(n,e=1){var t;if(!n)return sg.forEach(i=>ON(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):NN?n.internal.frames=2:n.internal.frames=1,pT||(pT=!0,requestAnimationFrame(b9)))}function w2(n,e=!0,t,i){if(e&&w_("before",n),t)PN(n,t,i);else for(const r of sg.values())PN(n,r.store.getState());e&&w_("after",n)}const hR={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Qse(n){const{handlePointer:e}=Sse(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(hR).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:i,events:r}=n.getState();if(r.disconnect==null||r.disconnect(),i(a=>({events:{...a.events,connected:t}})),r.handlers)for(const a in r.handlers){const s=r.handlers[a],[o,c]=hR[a];t.addEventListener(o,s,{passive:c})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const a=i.handlers[r],[s]=hR[r];i.connected.removeEventListener(s,a)}t(r=>({events:{...r.events,connected:void 0}}))}}}}function E2(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function Jse({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=q.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=q.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),c=n?typeof n=="number"?n:n.scroll:null,f=n?typeof n=="number"?n:n.resize:null,h=q.useRef(!1);q.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[p,v,y]=q.useMemo(()=>{const w=()=>{if(!o.current.element)return;const{left:I,top:P,width:D,height:z,bottom:k,right:U,x:R,y:M}=o.current.element.getBoundingClientRect(),L={left:I,top:P,width:D,height:z,bottom:k,right:U,x:R,y:M};o.current.element instanceof HTMLElement&&i&&(L.height=o.current.element.offsetHeight,L.width=o.current.element.offsetWidth),Object.freeze(L),h.current&&!ioe(o.current.lastBounds,L)&&s(o.current.lastBounds=L)};return[w,f?E2(w,f):w,c?E2(w,c):w]},[s,i,c,f]);function _(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",y,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function E(){o.current.element&&(o.current.resizeObserver=new r(y),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(w=>w.addEventListener("scroll",y,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const S=w=>{!w||w===o.current.element||(_(),o.current.element=w,o.current.scrollContainers=_9(w),E())};return toe(y,!!e),eoe(v),q.useEffect(()=>{_(),E()},[e,y,v]),q.useEffect(()=>_,[]),[S,a,p]}function eoe(n){q.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function toe(n,e){q.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function _9(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(a=>a==="auto"||a==="scroll")&&e.push(n),[...e,..._9(n.parentElement)]}const noe=["x","y","top","bottom","left","right","width","height"],ioe=(n,e)=>noe.every(t=>n[t]===e[t]);function roe({ref:n,children:e,fallback:t,resize:i,style:r,gl:a,events:s=Qse,eventSource:o,eventPrefix:c,shadows:f,linear:h,flat:p,legacy:v,orthographic:y,frameloop:_,dpr:E,performance:S,raycaster:w,camera:I,scene:P,onPointerMissed:D,onCreated:z,...k}){q.useMemo(()=>zse(jae),[]);const U=use(),[R,M]=Jse({scroll:!0,debounce:{scroll:50,resize:0},...i}),L=q.useRef(null),B=q.useRef(null);q.useImperativeHandle(n,()=>L.current);const V=o9(D),[j,Z]=q.useState(!1),[J,G]=q.useState(!1);if(j)throw j;if(J)throw J;const $=q.useRef(null);kx(()=>{const le=L.current;if(M.width>0&&M.height>0&&le){$.current||($.current=$se(le));async function ue(){await $.current.configure({gl:a,scene:P,events:s,shadows:f,linear:h,flat:p,legacy:v,orthographic:y,frameloop:_,dpr:E,performance:S,raycaster:w,camera:I,size:M,onPointerMissed:(...Q)=>V.current==null?void 0:V.current(...Q),onCreated:Q=>{Q.events.connect==null||Q.events.connect(o?lse(o)?o.current:o:B.current),c&&Q.setEvents({compute:(re,ye)=>{const de=re[c+"X"],xe=re[c+"Y"];ye.pointer.set(de/ye.size.width*2-1,-(xe/ye.size.height)*2+1),ye.raycaster.setFromCamera(ye.pointer,ye.camera)}}),z==null||z(Q)}}),$.current.render(N.jsx(U,{children:N.jsx(hse,{set:G,children:N.jsx(q.Suspense,{fallback:N.jsx(fse,{set:Z}),children:e??null})})}))}ue()}}),q.useEffect(()=>{const le=L.current;if(le)return()=>y9(le)},[]);const ae=o?"none":"auto";return N.jsx("div",{ref:B,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ae,...r},...k,children:N.jsx("div",{ref:R,style:{width:"100%",height:"100%"},children:N.jsx("canvas",{ref:L,style:{display:"block"},children:t})})})}function aoe(n){return N.jsx(i9,{children:N.jsx(roe,{...n})})}class soe extends so{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new ef(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{t(a.parse(o))}catch(c){r?r(c):console.error(c),a.manager.itemError(e)}},i,r)}parse(e){function t(f){const h=new DataView(f),p=32/8*3+32/8*3*3+16/8,v=h.getUint32(80,!0);if(80+32/8+v*p===h.byteLength)return!0;const _=[115,111,108,105,100];for(let E=0;E<5;E++)if(i(_,h,E))return!1;return!0}function i(f,h,p){for(let v=0,y=f.length;v<y;v++)if(f[v]!==h.getUint8(p+v))return!1;return!0}function r(f){const h=new DataView(f),p=h.getUint32(80,!0);let v,y,_,E=!1,S,w,I,P,D;for(let B=0;B<70;B++)h.getUint32(B,!1)==1129270351&&h.getUint8(B+4)==82&&h.getUint8(B+5)==61&&(E=!0,S=new Float32Array(p*3*3),w=h.getUint8(B+6)/255,I=h.getUint8(B+7)/255,P=h.getUint8(B+8)/255,D=h.getUint8(B+9)/255);const z=84,k=50,U=new Sn,R=new Float32Array(p*3*3),M=new Float32Array(p*3*3),L=new Bt;for(let B=0;B<p;B++){const V=z+B*k,j=h.getFloat32(V,!0),Z=h.getFloat32(V+4,!0),J=h.getFloat32(V+8,!0);if(E){const G=h.getUint16(V+48,!0);(G&32768)===0?(v=(G&31)/31,y=(G>>5&31)/31,_=(G>>10&31)/31):(v=w,y=I,_=P)}for(let G=1;G<=3;G++){const $=V+G*12,ae=B*3*3+(G-1)*3;R[ae]=h.getFloat32($,!0),R[ae+1]=h.getFloat32($+4,!0),R[ae+2]=h.getFloat32($+8,!0),M[ae]=j,M[ae+1]=Z,M[ae+2]=J,E&&(L.setRGB(v,y,_,ts),S[ae]=L.r,S[ae+1]=L.g,S[ae+2]=L.b)}}return U.setAttribute("position",new yi(R,3)),U.setAttribute("normal",new yi(M,3)),E&&(U.setAttribute("color",new yi(S,3)),U.hasColors=!0,U.alpha=D),U}function a(f){const h=new Sn,p=/solid([\s\S]*?)endsolid/g,v=/facet([\s\S]*?)endfacet/g,y=/solid\s(.+)/;let _=0;const E=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,S=new RegExp("vertex"+E+E+E,"g"),w=new RegExp("normal"+E+E+E,"g"),I=[],P=[],D=[],z=new ce;let k,U=0,R=0,M=0;for(;(k=p.exec(f))!==null;){R=M;const L=k[0],B=(k=y.exec(L))!==null?k[1]:"";for(D.push(B);(k=v.exec(L))!==null;){let Z=0,J=0;const G=k[0];for(;(k=w.exec(G))!==null;)z.x=parseFloat(k[1]),z.y=parseFloat(k[2]),z.z=parseFloat(k[3]),J++;for(;(k=S.exec(G))!==null;)I.push(parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3])),P.push(z.x,z.y,z.z),Z++,M++;J!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+_),Z!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+_),_++}const V=R,j=M-R;h.userData.groupNames=D,h.addGroup(V,j,U),U++}return h.setAttribute("position",new Gt(I,3)),h.setAttribute("normal",new Gt(P,3)),h}function s(f){return typeof f!="string"?new TextDecoder().decode(f):f}function o(f){if(typeof f=="string"){const h=new Uint8Array(f.length);for(let p=0;p<f.length;p++)h[p]=f.charCodeAt(p)&255;return h.buffer||h}else return f}const c=o(e);return t(c)?r(c):a(s(e))}}function mT(){return mT=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},mT.apply(null,arguments)}var ooe=Object.defineProperty,loe=(n,e,t)=>e in n?ooe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,coe=(n,e,t)=>(loe(n,e+"",t),t);class uoe{constructor(){coe(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e);e.target=null}}}var foe=Object.defineProperty,hoe=(n,e,t)=>e in n?foe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,fn=(n,e,t)=>(hoe(n,typeof e!="symbol"?e+"":e,t),t);const xw=new wg,T2=new Qf,doe=Math.cos(70*(Math.PI/180)),A2=(n,e)=>(n%e+e)%e;let poe=class extends uoe{constructor(e,t){super(),fn(this,"object"),fn(this,"domElement"),fn(this,"enabled",!0),fn(this,"target",new ce),fn(this,"minDistance",0),fn(this,"maxDistance",1/0),fn(this,"minZoom",0),fn(this,"maxZoom",1/0),fn(this,"minPolarAngle",0),fn(this,"maxPolarAngle",Math.PI),fn(this,"minAzimuthAngle",-1/0),fn(this,"maxAzimuthAngle",1/0),fn(this,"enableDamping",!1),fn(this,"dampingFactor",.05),fn(this,"enableZoom",!0),fn(this,"zoomSpeed",1),fn(this,"enableRotate",!0),fn(this,"rotateSpeed",1),fn(this,"enablePan",!0),fn(this,"panSpeed",1),fn(this,"screenSpacePanning",!0),fn(this,"keyPanSpeed",7),fn(this,"zoomToCursor",!1),fn(this,"autoRotate",!1),fn(this,"autoRotateSpeed",2),fn(this,"reverseOrbit",!1),fn(this,"reverseHorizontalOrbit",!1),fn(this,"reverseVerticalOrbit",!1),fn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),fn(this,"mouseButtons",{LEFT:wm.ROTATE,MIDDLE:wm.DOLLY,RIGHT:wm.PAN}),fn(this,"touches",{ONE:Em.ROTATE,TWO:Em.DOLLY_PAN}),fn(this,"target0"),fn(this,"position0"),fn(this,"zoom0"),fn(this,"_domElementKeyEvents",null),fn(this,"getPolarAngle"),fn(this,"getAzimuthalAngle"),fn(this,"setPolarAngle"),fn(this,"setAzimuthalAngle"),fn(this,"getDistance"),fn(this,"getZoomScale"),fn(this,"listenToKeyEvents"),fn(this,"stopListenToKeyEvents"),fn(this,"saveState"),fn(this,"reset"),fn(this,"update"),fn(this,"connect"),fn(this,"dispose"),fn(this,"dollyIn"),fn(this,"dollyOut"),fn(this,"getScale"),fn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=fe=>{let Pe=A2(fe,2*Math.PI),xt=h.phi;xt<0&&(xt+=2*Math.PI),Pe<0&&(Pe+=2*Math.PI);let pe=Math.abs(Pe-xt);2*Math.PI-pe<pe&&(Pe<xt?Pe+=2*Math.PI:xt+=2*Math.PI),p.phi=Pe-xt,i.update()},this.setAzimuthalAngle=fe=>{let Pe=A2(fe,2*Math.PI),xt=h.theta;xt<0&&(xt+=2*Math.PI),Pe<0&&(Pe+=2*Math.PI);let pe=Math.abs(Pe-xt);2*Math.PI-pe<pe&&(Pe<xt?Pe+=2*Math.PI:xt+=2*Math.PI),p.theta=Pe-xt,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=fe=>{fe.addEventListener("keydown",De),this._domElementKeyEvents=fe},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",De),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),c=o.NONE},this.update=(()=>{const fe=new ce,Pe=new ce(0,1,0),xt=new Rs().setFromUnitVectors(e.up,Pe),pe=xt.clone().invert(),ut=new ce,ft=new Rs,lt=2*Math.PI;return function(){const Ke=i.object.position;xt.setFromUnitVectors(e.up,Pe),pe.copy(xt).invert(),fe.copy(Ke).sub(i.target),fe.applyQuaternion(xt),h.setFromVector3(fe),i.autoRotate&&c===o.NONE&&Z(V()),i.enableDamping?(h.theta+=p.theta*i.dampingFactor,h.phi+=p.phi*i.dampingFactor):(h.theta+=p.theta,h.phi+=p.phi);let ht=i.minAzimuthAngle,Wt=i.maxAzimuthAngle;isFinite(ht)&&isFinite(Wt)&&(ht<-Math.PI?ht+=lt:ht>Math.PI&&(ht-=lt),Wt<-Math.PI?Wt+=lt:Wt>Math.PI&&(Wt-=lt),ht<=Wt?h.theta=Math.max(ht,Math.min(Wt,h.theta)):h.theta=h.theta>(ht+Wt)/2?Math.max(ht,h.theta):Math.min(Wt,h.theta)),h.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,h.phi)),h.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(y,i.dampingFactor):i.target.add(y),i.zoomToCursor&&M||i.object.isOrthographicCamera?h.radius=ye(h.radius):h.radius=ye(h.radius*v),fe.setFromSpherical(h),fe.applyQuaternion(pe),Ke.copy(i.target).add(fe),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(p.theta*=1-i.dampingFactor,p.phi*=1-i.dampingFactor,y.multiplyScalar(1-i.dampingFactor)):(p.set(0,0,0),y.set(0,0,0));let rn=!1;if(i.zoomToCursor&&M){let Qt=null;if(i.object instanceof Gr&&i.object.isPerspectiveCamera){const Ei=fe.length();Qt=ye(Ei*v);const Bi=Ei-Qt;i.object.position.addScaledVector(U,Bi),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const Ei=new ce(R.x,R.y,0);Ei.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/v)),i.object.updateProjectionMatrix(),rn=!0;const Bi=new ce(R.x,R.y,0);Bi.unproject(i.object),i.object.position.sub(Bi).add(Ei),i.object.updateMatrixWorld(),Qt=fe.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Qt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Qt).add(i.object.position):(xw.origin.copy(i.object.position),xw.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(xw.direction))<doe?e.lookAt(i.target):(T2.setFromNormalAndCoplanarPoint(i.object.up,i.target),xw.intersectPlane(T2,i.target))))}else i.object instanceof ch&&i.object.isOrthographicCamera&&(rn=v!==1,rn&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/v)),i.object.updateProjectionMatrix()));return v=1,M=!1,rn||ut.distanceToSquared(i.object.position)>f||8*(1-ft.dot(i.object.quaternion))>f?(i.dispatchEvent(r),ut.copy(i.object.position),ft.copy(i.object.quaternion),rn=!1,!0):!1}})(),this.connect=fe=>{i.domElement=fe,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",At),i.domElement.addEventListener("pointerdown",at),i.domElement.addEventListener("pointercancel",Y),i.domElement.addEventListener("wheel",qe)},this.dispose=()=>{var fe,Pe,xt,pe,ut,ft;i.domElement&&(i.domElement.style.touchAction="auto"),(fe=i.domElement)==null||fe.removeEventListener("contextmenu",At),(Pe=i.domElement)==null||Pe.removeEventListener("pointerdown",at),(xt=i.domElement)==null||xt.removeEventListener("pointercancel",Y),(pe=i.domElement)==null||pe.removeEventListener("wheel",qe),(ut=i.domElement)==null||ut.ownerDocument.removeEventListener("pointermove",ne),(ft=i.domElement)==null||ft.ownerDocument.removeEventListener("pointerup",Y),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",De)};const i=this,r={type:"change"},a={type:"start"},s={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=o.NONE;const f=1e-6,h=new SN,p=new SN;let v=1;const y=new ce,_=new rt,E=new rt,S=new rt,w=new rt,I=new rt,P=new rt,D=new rt,z=new rt,k=new rt,U=new ce,R=new rt;let M=!1;const L=[],B={};function V(){return 2*Math.PI/60/60*i.autoRotateSpeed}function j(){return Math.pow(.95,i.zoomSpeed)}function Z(fe){i.reverseOrbit||i.reverseHorizontalOrbit?p.theta+=fe:p.theta-=fe}function J(fe){i.reverseOrbit||i.reverseVerticalOrbit?p.phi+=fe:p.phi-=fe}const G=(()=>{const fe=new ce;return function(xt,pe){fe.setFromMatrixColumn(pe,0),fe.multiplyScalar(-xt),y.add(fe)}})(),$=(()=>{const fe=new ce;return function(xt,pe){i.screenSpacePanning===!0?fe.setFromMatrixColumn(pe,1):(fe.setFromMatrixColumn(pe,0),fe.crossVectors(i.object.up,fe)),fe.multiplyScalar(xt),y.add(fe)}})(),ae=(()=>{const fe=new ce;return function(xt,pe){const ut=i.domElement;if(ut&&i.object instanceof Gr&&i.object.isPerspectiveCamera){const ft=i.object.position;fe.copy(ft).sub(i.target);let lt=fe.length();lt*=Math.tan(i.object.fov/2*Math.PI/180),G(2*xt*lt/ut.clientHeight,i.object.matrix),$(2*pe*lt/ut.clientHeight,i.object.matrix)}else ut&&i.object instanceof ch&&i.object.isOrthographicCamera?(G(xt*(i.object.right-i.object.left)/i.object.zoom/ut.clientWidth,i.object.matrix),$(pe*(i.object.top-i.object.bottom)/i.object.zoom/ut.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function le(fe){i.object instanceof Gr&&i.object.isPerspectiveCamera||i.object instanceof ch&&i.object.isOrthographicCamera?v=fe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function ue(fe){le(v/fe)}function Q(fe){le(v*fe)}function re(fe){if(!i.zoomToCursor||!i.domElement)return;M=!0;const Pe=i.domElement.getBoundingClientRect(),xt=fe.clientX-Pe.left,pe=fe.clientY-Pe.top,ut=Pe.width,ft=Pe.height;R.x=xt/ut*2-1,R.y=-(pe/ft)*2+1,U.set(R.x,R.y,1).unproject(i.object).sub(i.object.position).normalize()}function ye(fe){return Math.max(i.minDistance,Math.min(i.maxDistance,fe))}function de(fe){_.set(fe.clientX,fe.clientY)}function xe(fe){re(fe),D.set(fe.clientX,fe.clientY)}function ve(fe){w.set(fe.clientX,fe.clientY)}function Te(fe){E.set(fe.clientX,fe.clientY),S.subVectors(E,_).multiplyScalar(i.rotateSpeed);const Pe=i.domElement;Pe&&(Z(2*Math.PI*S.x/Pe.clientHeight),J(2*Math.PI*S.y/Pe.clientHeight)),_.copy(E),i.update()}function Ze(fe){z.set(fe.clientX,fe.clientY),k.subVectors(z,D),k.y>0?ue(j()):k.y<0&&Q(j()),D.copy(z),i.update()}function be(fe){I.set(fe.clientX,fe.clientY),P.subVectors(I,w).multiplyScalar(i.panSpeed),ae(P.x,P.y),w.copy(I),i.update()}function Ve(fe){re(fe),fe.deltaY<0?Q(j()):fe.deltaY>0&&ue(j()),i.update()}function vt(fe){let Pe=!1;switch(fe.code){case i.keys.UP:ae(0,i.keyPanSpeed),Pe=!0;break;case i.keys.BOTTOM:ae(0,-i.keyPanSpeed),Pe=!0;break;case i.keys.LEFT:ae(i.keyPanSpeed,0),Pe=!0;break;case i.keys.RIGHT:ae(-i.keyPanSpeed,0),Pe=!0;break}Pe&&(fe.preventDefault(),i.update())}function Ie(){if(L.length==1)_.set(L[0].pageX,L[0].pageY);else{const fe=.5*(L[0].pageX+L[1].pageX),Pe=.5*(L[0].pageY+L[1].pageY);_.set(fe,Pe)}}function It(){if(L.length==1)w.set(L[0].pageX,L[0].pageY);else{const fe=.5*(L[0].pageX+L[1].pageX),Pe=.5*(L[0].pageY+L[1].pageY);w.set(fe,Pe)}}function Ne(){const fe=L[0].pageX-L[1].pageX,Pe=L[0].pageY-L[1].pageY,xt=Math.sqrt(fe*fe+Pe*Pe);D.set(0,xt)}function je(){i.enableZoom&&Ne(),i.enablePan&&It()}function Le(){i.enableZoom&&Ne(),i.enableRotate&&Ie()}function Qe(fe){if(L.length==1)E.set(fe.pageX,fe.pageY);else{const xt=Et(fe),pe=.5*(fe.pageX+xt.x),ut=.5*(fe.pageY+xt.y);E.set(pe,ut)}S.subVectors(E,_).multiplyScalar(i.rotateSpeed);const Pe=i.domElement;Pe&&(Z(2*Math.PI*S.x/Pe.clientHeight),J(2*Math.PI*S.y/Pe.clientHeight)),_.copy(E)}function oe(fe){if(L.length==1)I.set(fe.pageX,fe.pageY);else{const Pe=Et(fe),xt=.5*(fe.pageX+Pe.x),pe=.5*(fe.pageY+Pe.y);I.set(xt,pe)}P.subVectors(I,w).multiplyScalar(i.panSpeed),ae(P.x,P.y),w.copy(I)}function _t(fe){const Pe=Et(fe),xt=fe.pageX-Pe.x,pe=fe.pageY-Pe.y,ut=Math.sqrt(xt*xt+pe*pe);z.set(0,ut),k.set(0,Math.pow(z.y/D.y,i.zoomSpeed)),ue(k.y),D.copy(z)}function tt(fe){i.enableZoom&&_t(fe),i.enablePan&&oe(fe)}function wt(fe){i.enableZoom&&_t(fe),i.enableRotate&&Qe(fe)}function at(fe){var Pe,xt;i.enabled!==!1&&(L.length===0&&((Pe=i.domElement)==null||Pe.ownerDocument.addEventListener("pointermove",ne),(xt=i.domElement)==null||xt.ownerDocument.addEventListener("pointerup",Y)),Ut(fe),fe.pointerType==="touch"?Mt(fe):me(fe))}function ne(fe){i.enabled!==!1&&(fe.pointerType==="touch"?ct(fe):Ue(fe))}function Y(fe){var Pe,xt,pe;et(fe),L.length===0&&((Pe=i.domElement)==null||Pe.releasePointerCapture(fe.pointerId),(xt=i.domElement)==null||xt.ownerDocument.removeEventListener("pointermove",ne),(pe=i.domElement)==null||pe.ownerDocument.removeEventListener("pointerup",Y)),i.dispatchEvent(s),c=o.NONE}function me(fe){let Pe;switch(fe.button){case 0:Pe=i.mouseButtons.LEFT;break;case 1:Pe=i.mouseButtons.MIDDLE;break;case 2:Pe=i.mouseButtons.RIGHT;break;default:Pe=-1}switch(Pe){case wm.DOLLY:if(i.enableZoom===!1)return;xe(fe),c=o.DOLLY;break;case wm.ROTATE:if(fe.ctrlKey||fe.metaKey||fe.shiftKey){if(i.enablePan===!1)return;ve(fe),c=o.PAN}else{if(i.enableRotate===!1)return;de(fe),c=o.ROTATE}break;case wm.PAN:if(fe.ctrlKey||fe.metaKey||fe.shiftKey){if(i.enableRotate===!1)return;de(fe),c=o.ROTATE}else{if(i.enablePan===!1)return;ve(fe),c=o.PAN}break;default:c=o.NONE}c!==o.NONE&&i.dispatchEvent(a)}function Ue(fe){if(i.enabled!==!1)switch(c){case o.ROTATE:if(i.enableRotate===!1)return;Te(fe);break;case o.DOLLY:if(i.enableZoom===!1)return;Ze(fe);break;case o.PAN:if(i.enablePan===!1)return;be(fe);break}}function qe(fe){i.enabled===!1||i.enableZoom===!1||c!==o.NONE&&c!==o.ROTATE||(fe.preventDefault(),i.dispatchEvent(a),Ve(fe),i.dispatchEvent(s))}function De(fe){i.enabled===!1||i.enablePan===!1||vt(fe)}function Mt(fe){switch(st(fe),L.length){case 1:switch(i.touches.ONE){case Em.ROTATE:if(i.enableRotate===!1)return;Ie(),c=o.TOUCH_ROTATE;break;case Em.PAN:if(i.enablePan===!1)return;It(),c=o.TOUCH_PAN;break;default:c=o.NONE}break;case 2:switch(i.touches.TWO){case Em.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;je(),c=o.TOUCH_DOLLY_PAN;break;case Em.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Le(),c=o.TOUCH_DOLLY_ROTATE;break;default:c=o.NONE}break;default:c=o.NONE}c!==o.NONE&&i.dispatchEvent(a)}function ct(fe){switch(st(fe),c){case o.TOUCH_ROTATE:if(i.enableRotate===!1)return;Qe(fe),i.update();break;case o.TOUCH_PAN:if(i.enablePan===!1)return;oe(fe),i.update();break;case o.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;tt(fe),i.update();break;case o.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;wt(fe),i.update();break;default:c=o.NONE}}function At(fe){i.enabled!==!1&&fe.preventDefault()}function Ut(fe){L.push(fe)}function et(fe){delete B[fe.pointerId];for(let Pe=0;Pe<L.length;Pe++)if(L[Pe].pointerId==fe.pointerId){L.splice(Pe,1);return}}function st(fe){let Pe=B[fe.pointerId];Pe===void 0&&(Pe=new rt,B[fe.pointerId]=Pe),Pe.set(fe.pageX,fe.pageY)}function Et(fe){const Pe=fe.pointerId===L[0].pointerId?L[1]:L[0];return B[Pe.pointerId]}this.dollyIn=(fe=j())=>{Q(fe),i.update()},this.dollyOut=(fe=j())=>{ue(fe),i.update()},this.getScale=()=>v,this.setScale=fe=>{le(fe),i.update()},this.getZoomScale=()=>j(),t!==void 0&&this.connect(t),this.update()}};const moe=q.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:a=!1,onChange:s,onStart:o,onEnd:c,...f},h)=>{const p=Cd(k=>k.invalidate),v=Cd(k=>k.camera),y=Cd(k=>k.gl),_=Cd(k=>k.events),E=Cd(k=>k.setEvents),S=Cd(k=>k.set),w=Cd(k=>k.get),I=Cd(k=>k.performance),P=e||v,D=i||_.connected||y.domElement,z=q.useMemo(()=>new poe(P),[P]);return K3(()=>{z.enabled&&z.update()},-1),q.useEffect(()=>(a&&z.connect(a===!0?D:a),z.connect(D),()=>void z.dispose()),[a,D,t,z,p]),q.useEffect(()=>{const k=M=>{p(),t&&I.regress(),s&&s(M)},U=M=>{o&&o(M)},R=M=>{c&&c(M)};return z.addEventListener("change",k),z.addEventListener("start",U),z.addEventListener("end",R),()=>{z.removeEventListener("start",U),z.removeEventListener("end",R),z.removeEventListener("change",k)}},[s,o,c,z,p,E]),q.useEffect(()=>{if(n){const k=w().controls;return S({controls:z}),()=>S({controls:k})}},[n,z]),q.createElement("primitive",mT({ref:h,object:z,enableDamping:r},f))}),goe=q.forwardRef(function({children:e,object:t,disable:i,disableX:r,disableY:a,disableZ:s,left:o,right:c,top:f,bottom:h,front:p,back:v,onCentered:y,precise:_=!0,cacheKey:E=0,...S},w){const I=q.useRef(null),P=q.useRef(null),D=q.useRef(null),[z]=q.useState(()=>new rs),[k]=q.useState(()=>new ce),[U]=q.useState(()=>new Pa);return q.useLayoutEffect(()=>{P.current.matrixWorld.identity(),z.setFromObject(t??D.current,_);const R=z.max.x-z.min.x,M=z.max.y-z.min.y,L=z.max.z-z.min.z;z.getCenter(k),z.getBoundingSphere(U);const B=f?M/2:h?-M/2:0,V=o?-R/2:c?R/2:0,j=p?L/2:v?-L/2:0;P.current.position.set(i||r?0:-k.x+V,i||a?0:-k.y+B,i||s?0:-k.z+j),y==null||y({parent:I.current.parent,container:I.current,width:R,height:M,depth:L,boundingBox:z,boundingSphere:U,center:k,verticalAlignment:B,horizontalAlignment:V,depthAlignment:j})},[E,y,f,o,p,i,r,a,s,t,_,c,h,v,z,k,U]),q.useImperativeHandle(w,()=>I.current,[]),q.createElement("group",mT({ref:I},S),q.createElement("group",{ref:P},q.createElement("group",{ref:D},e)))}),voe=q.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:i=1,floatIntensity:r=1,floatingRange:a=[-.1,.1],autoInvalidate:s=!1,...o},c)=>{const f=q.useRef(null);q.useImperativeHandle(c,()=>f.current,[]);const h=q.useRef(Math.random()*1e4);return K3(p=>{var v,y;if(!e||t===0)return;s&&p.invalidate();const _=h.current+p.clock.elapsedTime;f.current.rotation.x=Math.cos(_/4*t)/8*i,f.current.rotation.y=Math.sin(_/4*t)/8*i,f.current.rotation.z=Math.sin(_/4*t)/20*i;let E=Math.sin(_/4*t)/10;E=Wj.mapLinear(E,-.1,.1,(v=a==null?void 0:a[0])!==null&&v!==void 0?v:-.1,(y=a==null?void 0:a[1])!==null&&y!==void 0?y:.1),f.current.position.y=E*r,f.current.updateMatrix()}),q.createElement("group",o,q.createElement("group",{ref:f,matrixAutoUpdate:!1},n))});function yoe({url:n}){const e=Z3(soe,n),t=q.useRef();return K3((i,r)=>{t.current&&(t.current.rotation.z+=r*.5)}),N.jsx("mesh",{ref:t,geometry:e,rotation:[-Math.PI/2,0,0],scale:[40,40,40],children:N.jsx("meshPhongMaterial",{color:16777215,specular:1118481,shininess:200})})}function boe(){return N.jsx("div",{className:"w-full h-full",children:N.jsxs(aoe,{camera:{position:[0,0,100],fov:50},children:[N.jsx("ambientLight",{intensity:.6}),N.jsx("directionalLight",{position:[10,10,10],intensity:1}),N.jsx("pointLight",{position:[-20,0,20],color:"#F59E0B",intensity:2,distance:100}),N.jsx("pointLight",{position:[20,0,20],color:"#2563EB",intensity:2,distance:100}),N.jsx(voe,{speed:2,rotationIntensity:.5,floatIntensity:.5,children:N.jsx(goe,{children:N.jsx(_g.Suspense,{fallback:null,children:N.jsx(yoe,{url:"/images/Tuna-s_craft.stl"})})})}),N.jsx(moe,{enableZoom:!1,autoRotate:!1})]})})}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _oe=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xoe=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=n=>{const e=xoe(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Soe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const woe=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eoe=q.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:s,...o},c)=>q.createElement("svg",{ref:c,...Soe,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:x9("lucide",r),...!a&&!woe(o)&&{"aria-hidden":"true"},...o},[...s.map(([f,h])=>q.createElement(f,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=(n,e)=>{const t=q.forwardRef(({className:i,...r},a)=>q.createElement(Eoe,{ref:a,iconNode:e,className:x9(`lucide-${_oe(M2(n))}`,`lucide-${n}`,i),...r}));return t.displayName=M2(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Toe=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],dR=Wi("arrow-down",Toe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aoe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],yM=Wi("arrow-left",Aoe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Moe=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],C2=Wi("arrow-up-down",Moe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Coe=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],pR=Wi("arrow-up",Coe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ioe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Roe=Wi("circle-alert",Ioe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Poe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Q_=Wi("circle-check-big",Poe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Noe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ooe=Wi("clock",Noe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Doe=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Loe=Wi("credit-card",Doe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const koe=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Uoe=Wi("dollar-sign",koe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Foe=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],I2=Wi("eye",Foe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zoe=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],Boe=Wi("facebook",zoe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Voe=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],joe=Wi("file-text",Voe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hoe=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],R2=Wi("house",Hoe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Goe=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],Woe=Wi("instagram",Goe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qoe=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],S9=Wi("menu",qoe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $oe=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],gT=Wi("package",$oe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xoe=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Yoe=Wi("palette",Xoe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Koe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],nv=Wi("plus",Koe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zoe=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],P2=Wi("ruler",Zoe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qoe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],w9=Wi("search",Qoe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Joe=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],E9=Wi("shopping-bag",Joe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ele=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],N2=Wi("square-pen",ele);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tle=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Am=Wi("trash-2",tle);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nle=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],O2=Wi("upload",nle);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ile=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],rle=Wi("users",ile);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ale=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],J_=Wi("x",ale),sle="https://docs.google.com/spreadsheets/d/e/2PACX-1vSZQKUeUWpxU8XNWtif8j4aEKN0InJpbxQFpK4Q4Ci5zVI1ZIlUlKTU42AomgXFPfa73Rb0w1CT1mU-/pub?output=csv",T9=()=>{const[n,e]=q.useState([]),[t,i]=q.useState(!0),r=s=>{if(!s)return"";const o=/(?:\/d\/|id=)([a-zA-Z0-9_-]+)/,c=s.match(o);return c&&c[1]?`https://drive.google.com/thumbnail?id=${c[1]}&sz=w800`:s},a=s=>{const o=s.split(`
`),c=o[0].split(",").map(h=>h.trim().toLowerCase()),f=[];for(let h=1;h<o.length;h++){const p=o[h].split(",");if(p.length<c.length)continue;const v={};c.forEach((y,_)=>{let E=p[_]?p[_].trim():"";v[y]=E}),v.name&&f.push({name:v.name,price:v.price||"$0",quantity:parseInt(v.quantity||v.availability||0),category:v.category||"Otros",image:r(v.photo||v.image),color:"#2563EB"})}return f};return q.useEffect(()=>{(async()=>{try{const c=await(await fetch(sle)).text(),f=a(c);f.length>0&&e(f)}catch(o){console.error("Error fetching gallery:",o)}finally{i(!1)}})()},[]),{products:n,loading:t}},ole=()=>{const[n,e]=q.useState(!1),[t,i]=q.useState(null),[r,a]=q.useState("all"),{products:s}=T9(),o=["Todos",...new Set(s.map(y=>y.category).filter(Boolean))],f=(r==="Todos"||r==="all"?s:s.filter(y=>y.category===r)).slice(0,12),[h,p]=q.useState(!1);q.useEffect(()=>{const y=()=>p(window.scrollY>20);return window.addEventListener("scroll",y),()=>window.removeEventListener("scroll",y)},[]);const v=()=>e(!n);return N.jsxs("div",{className:"bg-brand-dark min-h-screen text-slate-100 font-sans",children:[N.jsxs("nav",{className:`fixed w-full z-50 transition-all duration-300 ${h?"bg-brand-dark/90 backdrop-blur-md border-b border-white/10":"bg-transparent"}`,children:[N.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:N.jsxs("div",{className:"flex justify-between items-center h-20",children:[N.jsxs("div",{className:"flex items-center gap-3",children:[N.jsx("img",{className:"h-12 w-auto",src:"/logo.png",alt:"Tuna's Craft"}),N.jsx("span",{className:"font-display font-bold text-2xl tracking-tight text-white",children:"Tuna's Craft"})]}),N.jsxs("div",{className:"hidden md:flex space-x-8 items-center",children:[N.jsx("a",{href:"#gallery",className:"text-slate-300 hover:text-white transition-colors",children:"Galera"}),N.jsx("a",{href:"#services",className:"text-slate-300 hover:text-white transition-colors",children:"Servicios"}),N.jsx("a",{href:"#delivery",className:"text-slate-300 hover:text-white transition-colors",children:"Entregas"}),N.jsx(il,{to:"/status",className:"text-slate-300 hover:text-white transition-colors",children:"Status del Pedido"}),N.jsx(il,{to:"/quote",className:"bg-brand-orange hover:bg-orange-600 text-white px-6 py-2 rounded-full font-bold transition-all transform hover:scale-105 shadow-lg hover:shadow-orange-500/25",children:"Cotizar Ahora"})]}),N.jsx("div",{className:"md:hidden",children:N.jsx("button",{onClick:v,className:"text-gray-300 hover:text-white p-2",children:n?N.jsx(J_,{size:24}):N.jsx(S9,{size:24})})})]})}),n&&N.jsx("div",{className:"md:hidden bg-brand-dark border-t border-white/10 p-4",children:N.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[N.jsx("a",{href:"#gallery",onClick:v,className:"text-slate-300 hover:text-white text-lg",children:"Galera"}),N.jsx("a",{href:"#services",onClick:v,className:"text-slate-300 hover:text-white text-lg",children:"Servicios"}),N.jsx("a",{href:"#delivery",onClick:v,className:"text-slate-300 hover:text-white text-lg",children:"Entregas"}),N.jsx(il,{to:"/status",onClick:v,className:"text-slate-300 hover:text-white text-lg",children:"Status del Pedido"}),N.jsx(il,{to:"/quote",onClick:v,className:"bg-brand-orange text-white px-8 py-3 rounded-full font-bold text-lg mt-4",children:"Cotizar Ahora"})]})})]}),N.jsxs("section",{className:"relative min-h-screen flex items-center justify-center pt-20 overflow-hidden",children:[N.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden -z-10",children:[N.jsx("div",{className:"absolute top-1/4 -left-20 w-96 h-96 bg-brand-blue/20 rounded-full blur-3xl animate-pulse"}),N.jsx("div",{className:"absolute bottom-1/4 -right-20 w-96 h-96 bg-brand-orange/10 rounded-full blur-3xl animate-pulse delay-1000"})]}),N.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center gap-12 w-full",children:[N.jsxs("div",{className:"flex-1 text-center md:text-left z-10",children:[N.jsxs("h1",{className:"font-display text-5xl md:text-7xl font-extrabold leading-tight mb-6",children:["Tus ideas, impresas en ",N.jsx("br",{}),N.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-brand-blue to-brand-orange",children:"3D Realidad"})]}),N.jsx("p",{className:"text-xl text-gray-400 mb-8 max-w-2xl mx-auto md:mx-0",children:"Creamos figuras, adornos y piezas personalizadas con la mejor calidad. Si lo imaginas, lo podemos imprimir!"}),N.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center md:justify-start",children:N.jsx(il,{to:"/quote",className:"bg-brand-blue hover:bg-blue-600 text-white text-lg px-8 py-4 rounded-xl font-bold shadow-xl shadow-blue-500/20 transition-all hover:-translate-y-1",children:"Hacer un Pedido"})})]}),N.jsx("div",{className:"flex-1 w-full h-[400px] md:h-[600px] relative z-10",children:N.jsx(boe,{})})]})]}),N.jsx("section",{id:"services",className:"py-24 bg-brand-dark/50",children:N.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[N.jsxs("div",{className:"text-center mb-16",children:[N.jsxs("h2",{className:"font-display text-4xl font-bold mb-4",children:["Nuestros ",N.jsx("span",{className:"text-brand-blue",children:"Servicios"})]}),N.jsx("p",{className:"text-gray-400",children:"Calidad premium en cada capa."})]}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[N.jsx(mR,{icon:N.jsx(P2,{size:40,className:"text-brand-blue"}),title:"Impresin a Medida",desc:"Prototipos, refacciones y piezas tcnicas diseadas especficamente para tus necesidades."}),N.jsx(mR,{icon:N.jsx(Yoe,{size:40,className:"text-brand-orange"}),title:"Figuras y Arte",desc:"Coleccionables de anime, videojuegos y miniaturas de alta resolucin para pintar."}),N.jsx(mR,{icon:N.jsx(R2,{size:40,className:"text-purple-500"}),title:"Decoracin",desc:"Macetas, lmparas, litofanas y regalos nicos para darle vida a tus espacios."})]})]})}),N.jsx("section",{id:"delivery",className:"py-24 relative",children:N.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:N.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-[2rem] p-8 md:p-12 shadow-2xl flex flex-col md:flex-row gap-12",children:[N.jsxs("div",{className:"flex-1 space-y-8",children:[N.jsxs("h2",{className:"text-3xl font-display font-bold text-white",children:["Informacin de ",N.jsx("span",{className:"text-brand-orange",children:"Entregas"})]}),N.jsxs("div",{className:"space-y-6",children:[N.jsxs("div",{className:"flex gap-4",children:[N.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white shadow-lg shadow-blue-500/30",children:N.jsx(R2,{size:24})}),N.jsxs("div",{children:[N.jsx("h4",{className:"font-bold text-white text-lg",children:"Punto de Entrega Principal"}),N.jsx("p",{className:"text-gray-400",children:"Metro Chabacano, CDMX"}),N.jsx("a",{href:"https://maps.google.com/?q=Metro+Chabacano",target:"_blank",rel:"noreferrer",className:"inline-block mt-3 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold px-4 py-2 rounded-lg transition-colors",children:"Ver Ubicacin en Mapa"}),N.jsx("p",{className:"text-blue-400 text-xs font-bold mt-2",children:"Sbados: 11:00 am - 3:00 pm"})]})]}),N.jsxs("div",{className:"flex items-center gap-4",children:[N.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-slate-700 rounded-full flex items-center justify-center text-slate-300",children:N.jsx(P2,{size:24})}),N.jsxs("div",{children:[N.jsx("h4",{className:"font-bold text-white",children:"Entregas Urgentes / Entre Semana"}),N.jsx("p",{className:"text-sm text-gray-500",children:"Punto a convenir (Con costo extra)"})]})]}),N.jsxs("div",{className:"flex items-center gap-4",children:[N.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-brand-orange rounded-full flex items-center justify-center text-black font-bold shadow-lg shadow-orange-500/20",children:N.jsx(gT,{size:24})}),N.jsxs("div",{children:[N.jsx("h4",{className:"font-bold text-white",children:"Envos a todo Mxico"}),N.jsx("p",{className:"text-sm text-gray-500",children:"Paquetera segura (Con costo adicional)"})]})]})]})]}),N.jsxs("div",{className:"flex-1 bg-black/20 rounded-2xl p-8 border border-white/5",children:[N.jsx("h3",{className:"text-xl font-bold text-center mb-8 text-white",children:"Mtodos de Pago"}),N.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[N.jsx("div",{className:"bg-slate-800/50 border border-slate-700 p-4 rounded-xl flex items-center justify-center text-sm font-medium text-gray-300 hover:bg-slate-700/50 transition-colors cursor-default",children:" Tarjeta / MSI"}),N.jsx("div",{className:"bg-slate-800/50 border border-slate-700 p-4 rounded-xl flex items-center justify-center text-sm font-medium text-gray-300 hover:bg-slate-700/50 transition-colors cursor-default",children:" Transferencia"}),N.jsx("div",{className:"bg-slate-800/50 border border-slate-700 p-4 rounded-xl flex items-center justify-center text-sm font-medium text-gray-300 hover:bg-slate-700/50 transition-colors cursor-default",children:" Efectivo"}),N.jsx("div",{className:"bg-white p-4 rounded-xl flex items-center justify-center shadow-lg hover:scale-105 transition-transform cursor-pointer",children:N.jsx("span",{className:"text-blue-500 font-bold italic",children:"mercadopago"})})]}),N.jsx("div",{className:"mt-8 text-center",children:N.jsx(il,{to:"/status",className:"inline-flex items-center gap-2 text-brand-blue font-bold hover:text-white transition-colors",children:"Revisa estatus de tu pedido "})})]})]})})}),N.jsxs("section",{id:"gallery",className:"py-24 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[N.jsxs("h2",{className:"font-display text-4xl font-bold mb-6 text-center text-white",children:["Galera de ",N.jsx("span",{className:"text-brand-orange",children:"Trabajos"})]}),N.jsx("div",{className:"flex flex-wrap justify-center gap-3 mb-10",children:o.map(y=>N.jsx("button",{onClick:()=>a(y),className:`px-6 py-2 rounded-full font-bold text-sm transition-all border-2 
                        ${r===y||y==="Todos"&&r==="all"?"bg-brand-orange text-white border-brand-orange shadow-lg shadow-orange-500/30":"bg-transparent text-gray-300 border-gray-600 hover:border-gray-400 hover:text-white"}`,children:y},y))}),N.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:f.map((y,_)=>N.jsxs("div",{onClick:()=>i(y.image),className:"group relative overflow-hidden rounded-2xl shadow-lg aspect-square bg-gray-900 cursor-pointer hover:shadow-2xl transition-all hover:scale-[1.02]",children:[N.jsx("div",{className:"w-full h-full bg-cover bg-center group-hover:scale-110 transition-transform duration-500",style:{backgroundImage:`url('${y.image}')`}}),N.jsx("div",{className:"absolute top-4 right-4 flex flex-col items-end gap-2 z-10",children:N.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider shadow-sm ${y.quantity>0?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:y.quantity>0?"Disponible":"Agotado"})}),N.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-4 bg-gradient-to-t from-black/90 via-black/50 to-transparent",children:[N.jsx("h3",{className:"text-white font-bold text-lg drop-shadow-md leading-tight",children:y.name}),N.jsx("p",{className:"text-brand-orange font-bold text-xl mt-1",children:y.price})]})]},_))})]}),t&&N.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 flex items-center justify-center p-4",onClick:()=>i(null),children:[N.jsx("button",{className:"absolute top-4 right-4 text-white hover:text-brand-orange p-2",children:N.jsx(J_,{size:32})}),N.jsx("img",{src:t,alt:"Full view",className:"max-h-[90vh] max-w-[90vw] rounded-lg shadow-2xl",onClick:y=>y.stopPropagation()})]}),N.jsxs("footer",{className:"bg-black py-16 border-t border-white/10 text-center relative overflow-hidden",children:[N.jsxs("div",{className:"flex justify-center gap-10 mb-10",children:[N.jsx(D2,{href:"https://facebook.com/tunascraft3d",icon:N.jsx(Boe,{}),label:"Facebook"}),N.jsx(D2,{href:"https://instagram.com/tunas_craft",icon:N.jsx(Woe,{}),label:"Instagram"})]}),N.jsx("p",{className:"text-gray-500 font-medium text-sm",children:" 2024 Tuna's Craft. Hecho con  y ."}),N.jsx("div",{className:"mt-4",children:N.jsx(il,{to:"/admin",className:"text-xs text-gray-700 hover:text-brand-blue",children:"Admin Access"})})]})]})},mR=({icon:n,title:e,desc:t})=>N.jsxs("div",{className:"glass p-8 rounded-2xl hover:bg-white/5 transition-all cursor-default group",children:[N.jsx("div",{className:"w-14 h-14 bg-white/5 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform",children:n}),N.jsx("h3",{className:"font-display text-2xl font-bold mb-3",children:e}),N.jsx("p",{className:"text-gray-400 leading-relaxed",children:t})]}),D2=({href:n,icon:e,label:t})=>N.jsxs("a",{href:n,target:"_blank",rel:"noreferrer",className:"group flex flex-col items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[N.jsx("div",{className:"p-4 bg-white/5 rounded-2xl group-hover:bg-brand-blue/10 group-hover:scale-110 transition-all border border-white/5 shadow-lg",children:_g.cloneElement(e,{size:24})}),N.jsx("span",{className:"text-xs font-medium",children:t})]}),lle=()=>{};var L2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},cle=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=n[t++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=n[t++],s=n[t++],o=n[t++],c=((r&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const a=n[t++],s=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|s&63)}}return e.join("")},M9={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const a=n[r],s=r+1<n.length,o=s?n[r+1]:0,c=r+2<n.length,f=c?n[r+2]:0,h=a>>2,p=(a&3)<<4|o>>4;let v=(o&15)<<2|f>>6,y=f&63;c||(y=64,s||(v=64)),i.push(t[h],t[p],t[v],t[y])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(A9(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):cle(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const a=t[n.charAt(r++)],o=r<n.length?t[n.charAt(r)]:0;++r;const f=r<n.length?t[n.charAt(r)]:64;++r;const p=r<n.length?t[n.charAt(r)]:64;if(++r,a==null||o==null||f==null||p==null)throw new ule;const v=a<<2|o>>4;if(i.push(v),f!==64){const y=o<<4&240|f>>2;if(i.push(y),p!==64){const _=f<<6&192|p;i.push(_)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ule extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fle=function(n){const e=A9(n);return M9.encodeByteArray(e,!0)},vT=function(n){return fle(n).replace(/\./g,"")},C9=function(n){try{return M9.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hle(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dle=()=>hle().__FIREBASE_DEFAULTS__,ple=()=>{if(typeof process>"u"||typeof L2>"u")return;const n=L2.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},mle=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&C9(n[1]);return e&&JSON.parse(e)},bM=()=>{try{return lle()||dle()||ple()||mle()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},I9=n=>{var e,t;return(t=(e=bM())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},R9=n=>{const e=I9(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},P9=()=>{var n;return(n=bM())==null?void 0:n.config},N9=n=>{var e;return(e=bM())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gle{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function J3(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O9(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[vT(JSON.stringify(t)),vT(JSON.stringify(s)),""].join(".")}const E_={};function vle(){const n={prod:[],emulator:[]};for(const e of Object.keys(E_))E_[e]?n.emulator.push(e):n.prod.push(e);return n}function yle(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let k2=!1;function eD(n,e){if(typeof window>"u"||typeof document>"u"||!_p(window.location.host)||E_[n]===e||E_[n]||k2)return;E_[n]=e;function t(v){return`__firebase__banner__${v}`}const i="__firebase__banner",a=vle().prod.length>0;function s(){const v=document.getElementById(i);v&&v.remove()}function o(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,y){v.setAttribute("width","24"),v.setAttribute("id",y),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{k2=!0,s()},v}function h(v,y){v.setAttribute("id",y),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function p(){const v=yle(i),y=t("text"),_=document.getElementById(y)||document.createElement("span"),E=t("learnmore"),S=document.getElementById(E)||document.createElement("a"),w=t("preprendIcon"),I=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const P=v.element;o(P),h(S,E);const D=f();c(I,w),P.append(I,_,S,D),document.body.appendChild(P)}a?(_.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ble(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ps())}function _le(){var e;const n=(e=bM())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xle(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Sle(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function wle(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ele(){const n=Ps();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Tle(){return!_le()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ale(){try{return typeof indexedDB=="object"}catch{return!1}}function Mle(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var a;e(((a=r.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cle="FirebaseError";class hf extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Cle,Object.setPrototypeOf(this,hf.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ux.prototype.create)}}class Ux{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],s=a?Ile(a,i):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new hf(r,o,i)}}function Ile(n,e){return n.replace(Rle,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Rle=/\{\$([^}]+)}/g;function Ple(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function og(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const a=n[r],s=e[r];if(U2(a)&&U2(s)){if(!og(a,s))return!1}else if(a!==s)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function U2(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Nle(n,e){const t=new Ole(n,e);return t.subscribe.bind(t)}class Ole{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Dle(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=gR),r.error===void 0&&(r.error=gR),r.complete===void 0&&(r.complete=gR);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Dle(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function gR(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(n){return n&&n._delegate?n._delegate:n}class op{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lle=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new gle;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ule(e))try{this.getOrInitializeService({instanceIdentifier:Mm})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=Mm){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mm){return this.instances.has(e)}getOptions(e=Mm){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);i===o&&s.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&e(a,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:kle(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Mm){return this.component?this.component.multipleInstances?e:Mm:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function kle(n){return n===Mm?void 0:n}function Ule(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fle{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Lle(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Jn||(Jn={}));const zle={debug:Jn.DEBUG,verbose:Jn.VERBOSE,info:Jn.INFO,warn:Jn.WARN,error:Jn.ERROR,silent:Jn.SILENT},Ble=Jn.INFO,Vle={[Jn.DEBUG]:"log",[Jn.VERBOSE]:"log",[Jn.INFO]:"info",[Jn.WARN]:"warn",[Jn.ERROR]:"error"},jle=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=Vle[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tD{constructor(e){this.name=e,this._logLevel=Ble,this._logHandler=jle,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Jn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zle[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Jn.DEBUG,...e),this._logHandler(this,Jn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Jn.VERBOSE,...e),this._logHandler(this,Jn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Jn.INFO,...e),this._logHandler(this,Jn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Jn.WARN,...e),this._logHandler(this,Jn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Jn.ERROR,...e),this._logHandler(this,Jn.ERROR,...e)}}const Hle=(n,e)=>e.some(t=>n instanceof t);let F2,z2;function Gle(){return F2||(F2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Wle(){return z2||(z2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const D9=new WeakMap,DN=new WeakMap,L9=new WeakMap,vR=new WeakMap,nD=new WeakMap;function qle(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",a),n.removeEventListener("error",s)},a=()=>{t(Kd(n.result)),r()},s=()=>{i(n.error),r()};n.addEventListener("success",a),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&D9.set(t,n)}).catch(()=>{}),nD.set(e,n),e}function $le(n){if(DN.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",s),n.removeEventListener("abort",s)},a=()=>{t(),r()},s=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",a),n.addEventListener("error",s),n.addEventListener("abort",s)});DN.set(n,e)}let LN={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return DN.get(n);if(e==="objectStoreNames")return n.objectStoreNames||L9.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Kd(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Xle(n){LN=n(LN)}function Yle(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(yR(this),e,...t);return L9.set(i,e.sort?e.sort():[e]),Kd(i)}:Wle().includes(n)?function(...e){return n.apply(yR(this),e),Kd(D9.get(this))}:function(...e){return Kd(n.apply(yR(this),e))}}function Kle(n){return typeof n=="function"?Yle(n):(n instanceof IDBTransaction&&$le(n),Hle(n,Gle())?new Proxy(n,LN):n)}function Kd(n){if(n instanceof IDBRequest)return qle(n);if(vR.has(n))return vR.get(n);const e=Kle(n);return e!==n&&(vR.set(n,e),nD.set(e,n)),e}const yR=n=>nD.get(n);function Zle(n,e,{blocked:t,upgrade:i,blocking:r,terminated:a}={}){const s=indexedDB.open(n,e),o=Kd(s);return i&&s.addEventListener("upgradeneeded",c=>{i(Kd(s.result),c.oldVersion,c.newVersion,Kd(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),r&&c.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),o}const Qle=["get","getKey","getAll","getAllKeys","count"],Jle=["put","add","delete","clear"],bR=new Map;function B2(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(bR.get(e))return bR.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=Jle.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Qle.includes(t)))return;const a=async function(s,...o){const c=this.transaction(s,r?"readwrite":"readonly");let f=c.store;return i&&(f=f.index(o.shift())),(await Promise.all([f[t](...o),r&&c.done]))[0]};return bR.set(e,a),a}Xle(n=>({...n,get:(e,t,i)=>B2(e,t)||n.get(e,t,i),has:(e,t)=>!!B2(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ece{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(tce(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function tce(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const kN="@firebase/app",V2="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new tD("@firebase/app"),nce="@firebase/app-compat",ice="@firebase/analytics-compat",rce="@firebase/analytics",ace="@firebase/app-check-compat",sce="@firebase/app-check",oce="@firebase/auth",lce="@firebase/auth-compat",cce="@firebase/database",uce="@firebase/data-connect",fce="@firebase/database-compat",hce="@firebase/functions",dce="@firebase/functions-compat",pce="@firebase/installations",mce="@firebase/installations-compat",gce="@firebase/messaging",vce="@firebase/messaging-compat",yce="@firebase/performance",bce="@firebase/performance-compat",_ce="@firebase/remote-config",xce="@firebase/remote-config-compat",Sce="@firebase/storage",wce="@firebase/storage-compat",Ece="@firebase/firestore",Tce="@firebase/ai",Ace="@firebase/firestore-compat",Mce="firebase",Cce="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN="[DEFAULT]",Ice={[kN]:"fire-core",[nce]:"fire-core-compat",[rce]:"fire-analytics",[ice]:"fire-analytics-compat",[sce]:"fire-app-check",[ace]:"fire-app-check-compat",[oce]:"fire-auth",[lce]:"fire-auth-compat",[cce]:"fire-rtdb",[uce]:"fire-data-connect",[fce]:"fire-rtdb-compat",[hce]:"fire-fn",[dce]:"fire-fn-compat",[pce]:"fire-iid",[mce]:"fire-iid-compat",[gce]:"fire-fcm",[vce]:"fire-fcm-compat",[yce]:"fire-perf",[bce]:"fire-perf-compat",[_ce]:"fire-rc",[xce]:"fire-rc-compat",[Sce]:"fire-gcs",[wce]:"fire-gcs-compat",[Ece]:"fire-fst",[Ace]:"fire-fst-compat",[Tce]:"fire-vertex","fire-js":"fire-js",[Mce]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=new Map,Rce=new Map,FN=new Map;function j2(n,e){try{n.container.addComponent(e)}catch(t){dh.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function lg(n){const e=n.name;if(FN.has(e))return dh.debug(`There were multiple attempts to register component ${e}.`),!1;FN.set(e,n);for(const t of yT.values())j2(t,n);for(const t of Rce.values())j2(t,n);return!0}function _M(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function $l(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pce={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zd=new Ux("app","Firebase",Pce);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nce{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new op("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zd.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg=Cce;function k9(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:UN,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Zd.create("bad-app-name",{appName:String(r)});if(t||(t=P9()),!t)throw Zd.create("no-options");const a=yT.get(r);if(a){if(og(t,a.options)&&og(i,a.config))return a;throw Zd.create("duplicate-app",{appName:r})}const s=new Fle(r);for(const c of FN.values())s.addComponent(c);const o=new Nce(t,i,s);return yT.set(r,o),o}function iD(n=UN){const e=yT.get(n);if(!e&&n===UN&&P9())return k9();if(!e)throw Zd.create("no-app",{appName:n});return e}function Wu(n,e,t){let i=Ice[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const s=[`Unable to register library "${i}" with version "${e}":`];r&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dh.warn(s.join(" "));return}lg(new op(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oce="firebase-heartbeat-database",Dce=1,ex="firebase-heartbeat-store";let _R=null;function U9(){return _R||(_R=Zle(Oce,Dce,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ex)}catch(t){console.warn(t)}}}}).catch(n=>{throw Zd.create("idb-open",{originalErrorMessage:n.message})})),_R}async function Lce(n){try{const t=(await U9()).transaction(ex),i=await t.objectStore(ex).get(F9(n));return await t.done,i}catch(e){if(e instanceof hf)dh.warn(e.message);else{const t=Zd.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});dh.warn(t.message)}}}async function H2(n,e){try{const i=(await U9()).transaction(ex,"readwrite");await i.objectStore(ex).put(e,F9(n)),await i.done}catch(t){if(t instanceof hf)dh.warn(t.message);else{const i=Zd.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});dh.warn(i.message)}}}function F9(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kce=1024,Uce=30;class Fce{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Bce(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=G2();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>Uce){const s=Vce(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){dh.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=G2(),{heartbeatsToSend:i,unsentEntries:r}=zce(this._heartbeatsCache.heartbeats),a=vT(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return dh.warn(t),""}}}function G2(){return new Date().toISOString().substring(0,10)}function zce(n,e=kce){const t=[];let i=n.slice();for(const r of n){const a=t.find(s=>s.agent===r.agent);if(a){if(a.dates.push(r.date),W2(t)>e){a.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),W2(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class Bce{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ale()?Mle().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Lce(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return H2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return H2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function W2(n){return vT(JSON.stringify({version:2,heartbeats:n})).length}function Vce(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jce(n){lg(new op("platform-logger",e=>new ece(e),"PRIVATE")),lg(new op("heartbeat",e=>new Fce(e),"PRIVATE")),Wu(kN,V2,n),Wu(kN,V2,"esm2020"),Wu("fire-js","")}jce("");var Hce="firebase",Gce="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wu(Hce,Gce,"app");var q2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qd,z9;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(U,R){function M(){}M.prototype=R.prototype,U.F=R.prototype,U.prototype=new M,U.prototype.constructor=U,U.D=function(L,B,V){for(var j=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)j[Z-2]=arguments[Z];return R.prototype[B].apply(L,j)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(U,R,M){M||(M=0);const L=Array(16);if(typeof R=="string")for(var B=0;B<16;++B)L[B]=R.charCodeAt(M++)|R.charCodeAt(M++)<<8|R.charCodeAt(M++)<<16|R.charCodeAt(M++)<<24;else for(B=0;B<16;++B)L[B]=R[M++]|R[M++]<<8|R[M++]<<16|R[M++]<<24;R=U.g[0],M=U.g[1],B=U.g[2];let V=U.g[3],j;j=R+(V^M&(B^V))+L[0]+3614090360&4294967295,R=M+(j<<7&4294967295|j>>>25),j=V+(B^R&(M^B))+L[1]+3905402710&4294967295,V=R+(j<<12&4294967295|j>>>20),j=B+(M^V&(R^M))+L[2]+606105819&4294967295,B=V+(j<<17&4294967295|j>>>15),j=M+(R^B&(V^R))+L[3]+3250441966&4294967295,M=B+(j<<22&4294967295|j>>>10),j=R+(V^M&(B^V))+L[4]+4118548399&4294967295,R=M+(j<<7&4294967295|j>>>25),j=V+(B^R&(M^B))+L[5]+1200080426&4294967295,V=R+(j<<12&4294967295|j>>>20),j=B+(M^V&(R^M))+L[6]+2821735955&4294967295,B=V+(j<<17&4294967295|j>>>15),j=M+(R^B&(V^R))+L[7]+4249261313&4294967295,M=B+(j<<22&4294967295|j>>>10),j=R+(V^M&(B^V))+L[8]+1770035416&4294967295,R=M+(j<<7&4294967295|j>>>25),j=V+(B^R&(M^B))+L[9]+2336552879&4294967295,V=R+(j<<12&4294967295|j>>>20),j=B+(M^V&(R^M))+L[10]+4294925233&4294967295,B=V+(j<<17&4294967295|j>>>15),j=M+(R^B&(V^R))+L[11]+2304563134&4294967295,M=B+(j<<22&4294967295|j>>>10),j=R+(V^M&(B^V))+L[12]+1804603682&4294967295,R=M+(j<<7&4294967295|j>>>25),j=V+(B^R&(M^B))+L[13]+4254626195&4294967295,V=R+(j<<12&4294967295|j>>>20),j=B+(M^V&(R^M))+L[14]+2792965006&4294967295,B=V+(j<<17&4294967295|j>>>15),j=M+(R^B&(V^R))+L[15]+1236535329&4294967295,M=B+(j<<22&4294967295|j>>>10),j=R+(B^V&(M^B))+L[1]+4129170786&4294967295,R=M+(j<<5&4294967295|j>>>27),j=V+(M^B&(R^M))+L[6]+3225465664&4294967295,V=R+(j<<9&4294967295|j>>>23),j=B+(R^M&(V^R))+L[11]+643717713&4294967295,B=V+(j<<14&4294967295|j>>>18),j=M+(V^R&(B^V))+L[0]+3921069994&4294967295,M=B+(j<<20&4294967295|j>>>12),j=R+(B^V&(M^B))+L[5]+3593408605&4294967295,R=M+(j<<5&4294967295|j>>>27),j=V+(M^B&(R^M))+L[10]+38016083&4294967295,V=R+(j<<9&4294967295|j>>>23),j=B+(R^M&(V^R))+L[15]+3634488961&4294967295,B=V+(j<<14&4294967295|j>>>18),j=M+(V^R&(B^V))+L[4]+3889429448&4294967295,M=B+(j<<20&4294967295|j>>>12),j=R+(B^V&(M^B))+L[9]+568446438&4294967295,R=M+(j<<5&4294967295|j>>>27),j=V+(M^B&(R^M))+L[14]+3275163606&4294967295,V=R+(j<<9&4294967295|j>>>23),j=B+(R^M&(V^R))+L[3]+4107603335&4294967295,B=V+(j<<14&4294967295|j>>>18),j=M+(V^R&(B^V))+L[8]+1163531501&4294967295,M=B+(j<<20&4294967295|j>>>12),j=R+(B^V&(M^B))+L[13]+2850285829&4294967295,R=M+(j<<5&4294967295|j>>>27),j=V+(M^B&(R^M))+L[2]+4243563512&4294967295,V=R+(j<<9&4294967295|j>>>23),j=B+(R^M&(V^R))+L[7]+1735328473&4294967295,B=V+(j<<14&4294967295|j>>>18),j=M+(V^R&(B^V))+L[12]+2368359562&4294967295,M=B+(j<<20&4294967295|j>>>12),j=R+(M^B^V)+L[5]+4294588738&4294967295,R=M+(j<<4&4294967295|j>>>28),j=V+(R^M^B)+L[8]+2272392833&4294967295,V=R+(j<<11&4294967295|j>>>21),j=B+(V^R^M)+L[11]+1839030562&4294967295,B=V+(j<<16&4294967295|j>>>16),j=M+(B^V^R)+L[14]+4259657740&4294967295,M=B+(j<<23&4294967295|j>>>9),j=R+(M^B^V)+L[1]+2763975236&4294967295,R=M+(j<<4&4294967295|j>>>28),j=V+(R^M^B)+L[4]+1272893353&4294967295,V=R+(j<<11&4294967295|j>>>21),j=B+(V^R^M)+L[7]+4139469664&4294967295,B=V+(j<<16&4294967295|j>>>16),j=M+(B^V^R)+L[10]+3200236656&4294967295,M=B+(j<<23&4294967295|j>>>9),j=R+(M^B^V)+L[13]+681279174&4294967295,R=M+(j<<4&4294967295|j>>>28),j=V+(R^M^B)+L[0]+3936430074&4294967295,V=R+(j<<11&4294967295|j>>>21),j=B+(V^R^M)+L[3]+3572445317&4294967295,B=V+(j<<16&4294967295|j>>>16),j=M+(B^V^R)+L[6]+76029189&4294967295,M=B+(j<<23&4294967295|j>>>9),j=R+(M^B^V)+L[9]+3654602809&4294967295,R=M+(j<<4&4294967295|j>>>28),j=V+(R^M^B)+L[12]+3873151461&4294967295,V=R+(j<<11&4294967295|j>>>21),j=B+(V^R^M)+L[15]+530742520&4294967295,B=V+(j<<16&4294967295|j>>>16),j=M+(B^V^R)+L[2]+3299628645&4294967295,M=B+(j<<23&4294967295|j>>>9),j=R+(B^(M|~V))+L[0]+4096336452&4294967295,R=M+(j<<6&4294967295|j>>>26),j=V+(M^(R|~B))+L[7]+1126891415&4294967295,V=R+(j<<10&4294967295|j>>>22),j=B+(R^(V|~M))+L[14]+2878612391&4294967295,B=V+(j<<15&4294967295|j>>>17),j=M+(V^(B|~R))+L[5]+4237533241&4294967295,M=B+(j<<21&4294967295|j>>>11),j=R+(B^(M|~V))+L[12]+1700485571&4294967295,R=M+(j<<6&4294967295|j>>>26),j=V+(M^(R|~B))+L[3]+2399980690&4294967295,V=R+(j<<10&4294967295|j>>>22),j=B+(R^(V|~M))+L[10]+4293915773&4294967295,B=V+(j<<15&4294967295|j>>>17),j=M+(V^(B|~R))+L[1]+2240044497&4294967295,M=B+(j<<21&4294967295|j>>>11),j=R+(B^(M|~V))+L[8]+1873313359&4294967295,R=M+(j<<6&4294967295|j>>>26),j=V+(M^(R|~B))+L[15]+4264355552&4294967295,V=R+(j<<10&4294967295|j>>>22),j=B+(R^(V|~M))+L[6]+2734768916&4294967295,B=V+(j<<15&4294967295|j>>>17),j=M+(V^(B|~R))+L[13]+1309151649&4294967295,M=B+(j<<21&4294967295|j>>>11),j=R+(B^(M|~V))+L[4]+4149444226&4294967295,R=M+(j<<6&4294967295|j>>>26),j=V+(M^(R|~B))+L[11]+3174756917&4294967295,V=R+(j<<10&4294967295|j>>>22),j=B+(R^(V|~M))+L[2]+718787259&4294967295,B=V+(j<<15&4294967295|j>>>17),j=M+(V^(B|~R))+L[9]+3951481745&4294967295,U.g[0]=U.g[0]+R&4294967295,U.g[1]=U.g[1]+(B+(j<<21&4294967295|j>>>11))&4294967295,U.g[2]=U.g[2]+B&4294967295,U.g[3]=U.g[3]+V&4294967295}i.prototype.v=function(U,R){R===void 0&&(R=U.length);const M=R-this.blockSize,L=this.C;let B=this.h,V=0;for(;V<R;){if(B==0)for(;V<=M;)r(this,U,V),V+=this.blockSize;if(typeof U=="string"){for(;V<R;)if(L[B++]=U.charCodeAt(V++),B==this.blockSize){r(this,L),B=0;break}}else for(;V<R;)if(L[B++]=U[V++],B==this.blockSize){r(this,L),B=0;break}}this.h=B,this.o+=R},i.prototype.A=function(){var U=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);U[0]=128;for(var R=1;R<U.length-8;++R)U[R]=0;R=this.o*8;for(var M=U.length-8;M<U.length;++M)U[M]=R&255,R/=256;for(this.v(U),U=Array(16),R=0,M=0;M<4;++M)for(let L=0;L<32;L+=8)U[R++]=this.g[M]>>>L&255;return U};function a(U,R){var M=o;return Object.prototype.hasOwnProperty.call(M,U)?M[U]:M[U]=R(U)}function s(U,R){this.h=R;const M=[];let L=!0;for(let B=U.length-1;B>=0;B--){const V=U[B]|0;L&&V==R||(M[B]=V,L=!1)}this.g=M}var o={};function c(U){return-128<=U&&U<128?a(U,function(R){return new s([R|0],R<0?-1:0)}):new s([U|0],U<0?-1:0)}function f(U){if(isNaN(U)||!isFinite(U))return p;if(U<0)return S(f(-U));const R=[];let M=1;for(let L=0;U>=M;L++)R[L]=U/M|0,M*=4294967296;return new s(R,0)}function h(U,R){if(U.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(U.charAt(0)=="-")return S(h(U.substring(1),R));if(U.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=f(Math.pow(R,8));let L=p;for(let V=0;V<U.length;V+=8){var B=Math.min(8,U.length-V);const j=parseInt(U.substring(V,V+B),R);B<8?(B=f(Math.pow(R,B)),L=L.j(B).add(f(j))):(L=L.j(M),L=L.add(f(j)))}return L}var p=c(0),v=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(E(this))return-S(this).m();let U=0,R=1;for(let M=0;M<this.g.length;M++){const L=this.i(M);U+=(L>=0?L:4294967296+L)*R,R*=4294967296}return U},n.toString=function(U){if(U=U||10,U<2||36<U)throw Error("radix out of range: "+U);if(_(this))return"0";if(E(this))return"-"+S(this).toString(U);const R=f(Math.pow(U,6));var M=this;let L="";for(;;){const B=D(M,R).g;M=w(M,B.j(R));let V=((M.g.length>0?M.g[0]:M.h)>>>0).toString(U);if(M=B,_(M))return V+L;for(;V.length<6;)V="0"+V;L=V+L}},n.i=function(U){return U<0?0:U<this.g.length?this.g[U]:this.h};function _(U){if(U.h!=0)return!1;for(let R=0;R<U.g.length;R++)if(U.g[R]!=0)return!1;return!0}function E(U){return U.h==-1}n.l=function(U){return U=w(this,U),E(U)?-1:_(U)?0:1};function S(U){const R=U.g.length,M=[];for(let L=0;L<R;L++)M[L]=~U.g[L];return new s(M,~U.h).add(v)}n.abs=function(){return E(this)?S(this):this},n.add=function(U){const R=Math.max(this.g.length,U.g.length),M=[];let L=0;for(let B=0;B<=R;B++){let V=L+(this.i(B)&65535)+(U.i(B)&65535),j=(V>>>16)+(this.i(B)>>>16)+(U.i(B)>>>16);L=j>>>16,V&=65535,j&=65535,M[B]=j<<16|V}return new s(M,M[M.length-1]&-2147483648?-1:0)};function w(U,R){return U.add(S(R))}n.j=function(U){if(_(this)||_(U))return p;if(E(this))return E(U)?S(this).j(S(U)):S(S(this).j(U));if(E(U))return S(this.j(S(U)));if(this.l(y)<0&&U.l(y)<0)return f(this.m()*U.m());const R=this.g.length+U.g.length,M=[];for(var L=0;L<2*R;L++)M[L]=0;for(L=0;L<this.g.length;L++)for(let B=0;B<U.g.length;B++){const V=this.i(L)>>>16,j=this.i(L)&65535,Z=U.i(B)>>>16,J=U.i(B)&65535;M[2*L+2*B]+=j*J,I(M,2*L+2*B),M[2*L+2*B+1]+=V*J,I(M,2*L+2*B+1),M[2*L+2*B+1]+=j*Z,I(M,2*L+2*B+1),M[2*L+2*B+2]+=V*Z,I(M,2*L+2*B+2)}for(U=0;U<R;U++)M[U]=M[2*U+1]<<16|M[2*U];for(U=R;U<2*R;U++)M[U]=0;return new s(M,0)};function I(U,R){for(;(U[R]&65535)!=U[R];)U[R+1]+=U[R]>>>16,U[R]&=65535,R++}function P(U,R){this.g=U,this.h=R}function D(U,R){if(_(R))throw Error("division by zero");if(_(U))return new P(p,p);if(E(U))return R=D(S(U),R),new P(S(R.g),S(R.h));if(E(R))return R=D(U,S(R)),new P(S(R.g),R.h);if(U.g.length>30){if(E(U)||E(R))throw Error("slowDivide_ only works with positive integers.");for(var M=v,L=R;L.l(U)<=0;)M=z(M),L=z(L);var B=k(M,1),V=k(L,1);for(L=k(L,2),M=k(M,2);!_(L);){var j=V.add(L);j.l(U)<=0&&(B=B.add(M),V=j),L=k(L,1),M=k(M,1)}return R=w(U,B.j(R)),new P(B,R)}for(B=p;U.l(R)>=0;){for(M=Math.max(1,Math.floor(U.m()/R.m())),L=Math.ceil(Math.log(M)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),V=f(M),j=V.j(R);E(j)||j.l(U)>0;)M-=L,V=f(M),j=V.j(R);_(V)&&(V=v),B=B.add(V),U=w(U,j)}return new P(B,U)}n.B=function(U){return D(this,U).h},n.and=function(U){const R=Math.max(this.g.length,U.g.length),M=[];for(let L=0;L<R;L++)M[L]=this.i(L)&U.i(L);return new s(M,this.h&U.h)},n.or=function(U){const R=Math.max(this.g.length,U.g.length),M=[];for(let L=0;L<R;L++)M[L]=this.i(L)|U.i(L);return new s(M,this.h|U.h)},n.xor=function(U){const R=Math.max(this.g.length,U.g.length),M=[];for(let L=0;L<R;L++)M[L]=this.i(L)^U.i(L);return new s(M,this.h^U.h)};function z(U){const R=U.g.length+1,M=[];for(let L=0;L<R;L++)M[L]=U.i(L)<<1|U.i(L-1)>>>31;return new s(M,U.h)}function k(U,R){const M=R>>5;R%=32;const L=U.g.length-M,B=[];for(let V=0;V<L;V++)B[V]=R>0?U.i(V+M)>>>R|U.i(V+M+1)<<32-R:U.i(V+M);return new s(B,U.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,z9=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=h,Qd=s}).apply(typeof q2<"u"?q2:typeof self<"u"?self:typeof window<"u"?window:{});var Sw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var B9,o_,V9,eE,zN,j9,H9,G9;(function(){var n,e=Object.defineProperty;function t(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sw=="object"&&Sw];for(var W=0;W<T.length;++W){var K=T[W];if(K&&K.Math==Math)return K}throw Error("Cannot find global object")}var i=t(this);function r(T,W){if(W)e:{var K=i;T=T.split(".");for(var se=0;se<T.length-1;se++){var Ae=T[se];if(!(Ae in K))break e;K=K[Ae]}T=T[T.length-1],se=K[T],W=W(se),W!=se&&W!=null&&e(K,T,{configurable:!0,writable:!0,value:W})}}r("Symbol.dispose",function(T){return T||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(T){return T||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(T){return T||function(W){var K=[],se;for(se in W)Object.prototype.hasOwnProperty.call(W,se)&&K.push([se,W[se]]);return K}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},s=this||self;function o(T){var W=typeof T;return W=="object"&&T!=null||W=="function"}function c(T,W,K){return T.call.apply(T.bind,arguments)}function f(T,W,K){return f=c,f.apply(null,arguments)}function h(T,W){var K=Array.prototype.slice.call(arguments,1);return function(){var se=K.slice();return se.push.apply(se,arguments),T.apply(this,se)}}function p(T,W){function K(){}K.prototype=W.prototype,T.Z=W.prototype,T.prototype=new K,T.prototype.constructor=T,T.Ob=function(se,Ae,He){for(var Rt=Array(arguments.length-2),En=2;En<arguments.length;En++)Rt[En-2]=arguments[En];return W.prototype[Ae].apply(se,Rt)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?T=>T&&AsyncContext.Snapshot.wrap(T):T=>T;function y(T){const W=T.length;if(W>0){const K=Array(W);for(let se=0;se<W;se++)K[se]=T[se];return K}return[]}function _(T,W){for(let se=1;se<arguments.length;se++){const Ae=arguments[se];var K=typeof Ae;if(K=K!="object"?K:Ae?Array.isArray(Ae)?"array":K:"null",K=="array"||K=="object"&&typeof Ae.length=="number"){K=T.length||0;const He=Ae.length||0;T.length=K+He;for(let Rt=0;Rt<He;Rt++)T[K+Rt]=Ae[Rt]}else T.push(Ae)}}class E{constructor(W,K){this.i=W,this.j=K,this.h=0,this.g=null}get(){let W;return this.h>0?(this.h--,W=this.g,this.g=W.next,W.next=null):W=this.i(),W}}function S(T){s.setTimeout(()=>{throw T},0)}function w(){var T=U;let W=null;return T.g&&(W=T.g,T.g=T.g.next,T.g||(T.h=null),W.next=null),W}class I{constructor(){this.h=this.g=null}add(W,K){const se=P.get();se.set(W,K),this.h?this.h.next=se:this.g=se,this.h=se}}var P=new E(()=>new D,T=>T.reset());class D{constructor(){this.next=this.g=this.h=null}set(W,K){this.h=W,this.g=K,this.next=null}reset(){this.next=this.g=this.h=null}}let z,k=!1,U=new I,R=()=>{const T=Promise.resolve(void 0);z=()=>{T.then(M)}};function M(){for(var T;T=w();){try{T.h.call(T.g)}catch(K){S(K)}var W=P;W.j(T),W.h<100&&(W.h++,T.next=W.g,W.g=T)}k=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(T,W){this.type=T,this.g=this.target=W,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var T=!1,W=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const K=()=>{};s.addEventListener("test",K,W),s.removeEventListener("test",K,W)}catch{}return T})();function j(T){return/^[\s\xa0]*$/.test(T)}function Z(T,W){B.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T&&this.init(T,W)}p(Z,B),Z.prototype.init=function(T,W){const K=this.type=T.type,se=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;this.target=T.target||T.srcElement,this.g=W,W=T.relatedTarget,W||(K=="mouseover"?W=T.fromElement:K=="mouseout"&&(W=T.toElement)),this.relatedTarget=W,se?(this.clientX=se.clientX!==void 0?se.clientX:se.pageX,this.clientY=se.clientY!==void 0?se.clientY:se.pageY,this.screenX=se.screenX||0,this.screenY=se.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=T.pointerType,this.state=T.state,this.i=T,T.defaultPrevented&&Z.Z.h.call(this)},Z.prototype.h=function(){Z.Z.h.call(this);const T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var J="closure_listenable_"+(Math.random()*1e6|0),G=0;function $(T,W,K,se,Ae){this.listener=T,this.proxy=null,this.src=W,this.type=K,this.capture=!!se,this.ha=Ae,this.key=++G,this.da=this.fa=!1}function ae(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function le(T,W,K){for(const se in T)W.call(K,T[se],se,T)}function ue(T,W){for(const K in T)W.call(void 0,T[K],K,T)}function Q(T){const W={};for(const K in T)W[K]=T[K];return W}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(T,W){let K,se;for(let Ae=1;Ae<arguments.length;Ae++){se=arguments[Ae];for(K in se)T[K]=se[K];for(let He=0;He<re.length;He++)K=re[He],Object.prototype.hasOwnProperty.call(se,K)&&(T[K]=se[K])}}function de(T){this.src=T,this.g={},this.h=0}de.prototype.add=function(T,W,K,se,Ae){const He=T.toString();T=this.g[He],T||(T=this.g[He]=[],this.h++);const Rt=ve(T,W,se,Ae);return Rt>-1?(W=T[Rt],K||(W.fa=!1)):(W=new $(W,this.src,He,!!se,Ae),W.fa=K,T.push(W)),W};function xe(T,W){const K=W.type;if(K in T.g){var se=T.g[K],Ae=Array.prototype.indexOf.call(se,W,void 0),He;(He=Ae>=0)&&Array.prototype.splice.call(se,Ae,1),He&&(ae(W),T.g[K].length==0&&(delete T.g[K],T.h--))}}function ve(T,W,K,se){for(let Ae=0;Ae<T.length;++Ae){const He=T[Ae];if(!He.da&&He.listener==W&&He.capture==!!K&&He.ha==se)return Ae}return-1}var Te="closure_lm_"+(Math.random()*1e6|0),Ze={};function be(T,W,K,se,Ae){if(Array.isArray(W)){for(let He=0;He<W.length;He++)be(T,W[He],K,se,Ae);return null}return K=oe(K),T&&T[J]?T.J(W,K,o(se)?!!se.capture:!1,Ae):Ve(T,W,K,!1,se,Ae)}function Ve(T,W,K,se,Ae,He){if(!W)throw Error("Invalid event type");const Rt=o(Ae)?!!Ae.capture:!!Ae;let En=Le(T);if(En||(T[Te]=En=new de(T)),K=En.add(W,K,se,Rt,He),K.proxy)return K;if(se=vt(),K.proxy=se,se.src=T,se.listener=K,T.addEventListener)V||(Ae=Rt),Ae===void 0&&(Ae=!1),T.addEventListener(W.toString(),se,Ae);else if(T.attachEvent)T.attachEvent(Ne(W.toString()),se);else if(T.addListener&&T.removeListener)T.addListener(se);else throw Error("addEventListener and attachEvent are unavailable.");return K}function vt(){function T(K){return W.call(T.src,T.listener,K)}const W=je;return T}function Ie(T,W,K,se,Ae){if(Array.isArray(W))for(var He=0;He<W.length;He++)Ie(T,W[He],K,se,Ae);else se=o(se)?!!se.capture:!!se,K=oe(K),T&&T[J]?(T=T.i,He=String(W).toString(),He in T.g&&(W=T.g[He],K=ve(W,K,se,Ae),K>-1&&(ae(W[K]),Array.prototype.splice.call(W,K,1),W.length==0&&(delete T.g[He],T.h--)))):T&&(T=Le(T))&&(W=T.g[W.toString()],T=-1,W&&(T=ve(W,K,se,Ae)),(K=T>-1?W[T]:null)&&It(K))}function It(T){if(typeof T!="number"&&T&&!T.da){var W=T.src;if(W&&W[J])xe(W.i,T);else{var K=T.type,se=T.proxy;W.removeEventListener?W.removeEventListener(K,se,T.capture):W.detachEvent?W.detachEvent(Ne(K),se):W.addListener&&W.removeListener&&W.removeListener(se),(K=Le(W))?(xe(K,T),K.h==0&&(K.src=null,W[Te]=null)):ae(T)}}}function Ne(T){return T in Ze?Ze[T]:Ze[T]="on"+T}function je(T,W){if(T.da)T=!0;else{W=new Z(W,this);const K=T.listener,se=T.ha||T.src;T.fa&&It(T),T=K.call(se,W)}return T}function Le(T){return T=T[Te],T instanceof de?T:null}var Qe="__closure_events_fn_"+(Math.random()*1e9>>>0);function oe(T){return typeof T=="function"?T:(T[Qe]||(T[Qe]=function(W){return T.handleEvent(W)}),T[Qe])}function _t(){L.call(this),this.i=new de(this),this.M=this,this.G=null}p(_t,L),_t.prototype[J]=!0,_t.prototype.removeEventListener=function(T,W,K,se){Ie(this,T,W,K,se)};function tt(T,W){var K,se=T.G;if(se)for(K=[];se;se=se.G)K.push(se);if(T=T.M,se=W.type||W,typeof W=="string")W=new B(W,T);else if(W instanceof B)W.target=W.target||T;else{var Ae=W;W=new B(se,T),ye(W,Ae)}Ae=!0;let He,Rt;if(K)for(Rt=K.length-1;Rt>=0;Rt--)He=W.g=K[Rt],Ae=wt(He,se,!0,W)&&Ae;if(He=W.g=T,Ae=wt(He,se,!0,W)&&Ae,Ae=wt(He,se,!1,W)&&Ae,K)for(Rt=0;Rt<K.length;Rt++)He=W.g=K[Rt],Ae=wt(He,se,!1,W)&&Ae}_t.prototype.N=function(){if(_t.Z.N.call(this),this.i){var T=this.i;for(const W in T.g){const K=T.g[W];for(let se=0;se<K.length;se++)ae(K[se]);delete T.g[W],T.h--}}this.G=null},_t.prototype.J=function(T,W,K,se){return this.i.add(String(T),W,!1,K,se)},_t.prototype.K=function(T,W,K,se){return this.i.add(String(T),W,!0,K,se)};function wt(T,W,K,se){if(W=T.i.g[String(W)],!W)return!0;W=W.concat();let Ae=!0;for(let He=0;He<W.length;++He){const Rt=W[He];if(Rt&&!Rt.da&&Rt.capture==K){const En=Rt.listener,ar=Rt.ha||Rt.src;Rt.fa&&xe(T.i,Rt),Ae=En.call(ar,se)!==!1&&Ae}}return Ae&&!se.defaultPrevented}function at(T,W){if(typeof T!="function")if(T&&typeof T.handleEvent=="function")T=f(T.handleEvent,T);else throw Error("Invalid listener argument");return Number(W)>2147483647?-1:s.setTimeout(T,W||0)}function ne(T){T.g=at(()=>{T.g=null,T.i&&(T.i=!1,ne(T))},T.l);const W=T.h;T.h=null,T.m.apply(null,W)}class Y extends L{constructor(W,K){super(),this.m=W,this.l=K,this.h=null,this.i=!1,this.g=null}j(W){this.h=arguments,this.g?this.i=!0:ne(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function me(T){L.call(this),this.h=T,this.g={}}p(me,L);var Ue=[];function qe(T){le(T.g,function(W,K){this.g.hasOwnProperty(K)&&It(W)},T),T.g={}}me.prototype.N=function(){me.Z.N.call(this),qe(this)},me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var De=s.JSON.stringify,Mt=s.JSON.parse,ct=class{stringify(T){return s.JSON.stringify(T,void 0)}parse(T){return s.JSON.parse(T,void 0)}};function At(){}function Ut(){}var et={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function st(){B.call(this,"d")}p(st,B);function Et(){B.call(this,"c")}p(Et,B);var fe={},Pe=null;function xt(){return Pe=Pe||new _t}fe.Ia="serverreachability";function pe(T){B.call(this,fe.Ia,T)}p(pe,B);function ut(T){const W=xt();tt(W,new pe(W))}fe.STAT_EVENT="statevent";function ft(T,W){B.call(this,fe.STAT_EVENT,T),this.stat=W}p(ft,B);function lt(T){const W=xt();tt(W,new ft(W,T))}fe.Ja="timingevent";function nt(T,W){B.call(this,fe.Ja,T),this.size=W}p(nt,B);function Ke(T,W){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){T()},W)}function ht(){this.g=!0}ht.prototype.ua=function(){this.g=!1};function Wt(T,W,K,se,Ae,He){T.info(function(){if(T.g)if(He){var Rt="",En=He.split("&");for(let $n=0;$n<En.length;$n++){var ar=En[$n].split("=");if(ar.length>1){const ki=ar[0];ar=ar[1];const Ba=ki.split("_");Rt=Ba.length>=2&&Ba[1]=="type"?Rt+(ki+"="+ar+"&"):Rt+(ki+"=redacted&")}}}else Rt=null;else Rt=He;return"XMLHTTP REQ ("+se+") [attempt "+Ae+"]: "+W+`
`+K+`
`+Rt})}function rn(T,W,K,se,Ae,He,Rt){T.info(function(){return"XMLHTTP RESP ("+se+") [ attempt "+Ae+"]: "+W+`
`+K+`
`+He+" "+Rt})}function Qt(T,W,K,se){T.info(function(){return"XMLHTTP TEXT ("+W+"): "+Bi(T,K)+(se?" "+se:"")})}function Ei(T,W){T.info(function(){return"TIMEOUT: "+W})}ht.prototype.info=function(){};function Bi(T,W){if(!T.g)return W;if(!W)return null;try{const He=JSON.parse(W);if(He){for(T=0;T<He.length;T++)if(Array.isArray(He[T])){var K=He[T];if(!(K.length<2)){var se=K[1];if(Array.isArray(se)&&!(se.length<1)){var Ae=se[0];if(Ae!="noop"&&Ae!="stop"&&Ae!="close")for(let Rt=1;Rt<se.length;Rt++)se[Rt]=""}}}}return De(He)}catch{return W}}var ka={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ds={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ls;function Ua(){}p(Ua,At),Ua.prototype.g=function(){return new XMLHttpRequest},Ls=new Ua;function oa(T){return encodeURIComponent(String(T))}function jo(T){var W=1;T=T.split(":");const K=[];for(;W>0&&T.length;)K.push(T.shift()),W--;return T.length&&K.push(T.join(":")),K}function Ci(T,W,K,se){this.j=T,this.i=W,this.l=K,this.S=se||1,this.V=new me(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Lr}function Lr(){this.i=null,this.g="",this.h=!1}var di={},Ii={};function Er(T,W,K){T.M=1,T.A=dn(Ot(W)),T.u=K,T.R=!0,kr(T,null)}function kr(T,W){T.F=Date.now(),he(T),T.B=Ot(T.A);var K=T.B,se=T.S;Array.isArray(se)||(se=[String(se)]),Fa(K.i,"t",se),T.C=0,K=T.j.L,T.h=new Lr,T.g=Ip(T.j,K?W:null,!T.u),T.P>0&&(T.O=new Y(f(T.Y,T,T.g),T.P)),W=T.V,K=T.g,se=T.ba;var Ae="readystatechange";Array.isArray(Ae)||(Ae&&(Ue[0]=Ae.toString()),Ae=Ue);for(let He=0;He<Ae.length;He++){const Rt=be(K,Ae[He],se||W.handleEvent,!1,W.h||W);if(!Rt)break;W.g[Rt.key]=Rt}W=T.J?Q(T.J):{},T.u?(T.v||(T.v="POST"),W["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.B,T.v,T.u,W)):(T.v="GET",T.g.ea(T.B,T.v,null,W)),ut(),Wt(T.i,T.v,T.B,T.l,T.S,T.u)}Ci.prototype.ba=function(T){T=T.target;const W=this.O;W&&Wo(T)==3?W.j():this.Y(T)},Ci.prototype.Y=function(T){try{if(T==this.g)e:{const En=Wo(this.g),ar=this.g.ya(),$n=this.g.ca();if(!(En<3)&&(En!=3||this.g&&(this.h.h||this.g.la()||Xr(this.g)))){this.K||En!=4||ar==7||(ar==8||$n<=0?ut(3):ut(2)),gt(this);var W=this.g.ca();this.X=W;var K=$r(this);if(this.o=W==200,rn(this.i,this.v,this.B,this.l,this.S,En,W),this.o){if(this.U&&!this.L){t:{if(this.g){var se,Ae=this.g;if((se=Ae.g?Ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(se)){var He=se;break t}}He=null}if(T=He)Qt(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_n(this,T);else{this.o=!1,this.m=3,lt(12),en(this),Vt(this);break e}}if(this.R){T=!0;let ki;for(;!this.K&&this.C<K.length;)if(ki=lo(this,K),ki==Ii){En==4&&(this.m=4,lt(14),T=!1),Qt(this.i,this.l,null,"[Incomplete Response]");break}else if(ki==di){this.m=4,lt(15),Qt(this.i,this.l,K,"[Invalid Chunk]"),T=!1;break}else Qt(this.i,this.l,ki,null),_n(this,ki);if(ls(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),En!=4||K.length!=0||this.h.h||(this.m=1,lt(16),T=!1),this.o=this.o&&T,!T)Qt(this.i,this.l,K,"[Invalid Chunked Response]"),en(this),Vt(this);else if(K.length>0&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.aa&&!Rt.P&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),kh(Rt),Rt.P=!0,lt(11))}}else Qt(this.i,this.l,K,null),_n(this,K);En==4&&en(this),this.o&&!this.K&&(En==4?Mp(this.j,this):(this.o=!1,he(this)))}else yl(this.g),W==400&&K.indexOf("Unknown SID")>0?(this.m=3,lt(12)):(this.m=0,lt(13)),en(this),Vt(this)}}}catch{}finally{}};function $r(T){if(!ls(T))return T.g.la();const W=Xr(T.g);if(W==="")return"";let K="";const se=W.length,Ae=Wo(T.g)==4;if(!T.h.i){if(typeof TextDecoder>"u")return en(T),Vt(T),"";T.h.i=new s.TextDecoder}for(let He=0;He<se;He++)T.h.h=!0,K+=T.h.i.decode(W[He],{stream:!(Ae&&He==se-1)});return W.length=0,T.h.g+=K,T.C=0,T.h.g}function ls(T){return T.g?T.v=="GET"&&T.M!=2&&T.j.Aa:!1}function lo(T,W){var K=T.C,se=W.indexOf(`
`,K);return se==-1?Ii:(K=Number(W.substring(K,se)),isNaN(K)?di:(se+=1,se+K>W.length?Ii:(W=W.slice(se,se+K),T.C=se+K,W)))}Ci.prototype.cancel=function(){this.K=!0,en(this)};function he(T){T.T=Date.now()+T.H,We(T,T.H)}function We(T,W){if(T.D!=null)throw Error("WatchDog timer not null");T.D=Ke(f(T.aa,T),W)}function gt(T){T.D&&(s.clearTimeout(T.D),T.D=null)}Ci.prototype.aa=function(){this.D=null;const T=Date.now();T-this.T>=0?(Ei(this.i,this.B),this.M!=2&&(ut(),lt(17)),en(this),this.m=2,Vt(this)):We(this,this.T-T)};function Vt(T){T.j.I==0||T.K||Mp(T.j,T)}function en(T){gt(T);var W=T.O;W&&typeof W.dispose=="function"&&W.dispose(),T.O=null,qe(T.V),T.g&&(W=T.g,T.g=null,W.abort(),W.dispose())}function _n(T,W){try{var K=T.j;if(K.I!=0&&(K.g==T||Ee(K.h,T))){if(!T.L&&Ee(K.h,T)&&K.I==3){try{var se=K.Ba.g.parse(W)}catch{se=null}if(Array.isArray(se)&&se.length==3){var Ae=se;if(Ae[0]==0){e:if(!K.v){if(K.g)if(K.g.F+3e3<T.F)Uh(K),bl(K);else break e;Jc(K),lt(18)}}else K.xa=Ae[1],0<K.xa-K.K&&Ae[2]<37500&&K.F&&K.A==0&&!K.C&&(K.C=Ke(f(K.Va,K),6e3));Re(K.h)<=1&&K.ta&&(K.ta=void 0)}else fo(K,11)}else if((T.L||K.g==T)&&Uh(K),!j(W))for(Ae=K.Ba.g.parse(W),W=0;W<Ae.length;W++){let $n=Ae[W];const ki=$n[0];if(!(ki<=K.K))if(K.K=ki,$n=$n[1],K.I==2)if($n[0]=="c"){K.M=$n[1],K.ba=$n[2];const Ba=$n[3];Ba!=null&&(K.ka=Ba,K.j.info("VER="+K.ka));const Xo=$n[4];Xo!=null&&(K.za=Xo,K.j.info("SVER="+K.za));const Yo=$n[5];Yo!=null&&typeof Yo=="number"&&Yo>0&&(se=1.5*Yo,K.O=se,K.j.info("backChannelRequestTimeoutMs_="+se)),se=K;const cs=T.g;if(cs){const cc=cs.g?cs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cc){var He=se.h;He.g||cc.indexOf("spdy")==-1&&cc.indexOf("quic")==-1&&cc.indexOf("h2")==-1||(He.j=He.l,He.g=new Set,He.h&&(yt(He,He.h),He.h=null))}if(se.G){const _f=cs.g?cs.g.getResponseHeader("X-HTTP-Session-Id"):null;_f&&(se.wa=_f,nn(se.J,se.G,_f))}}K.I=3,K.l&&K.l.ra(),K.aa&&(K.T=Date.now()-T.F,K.j.info("Handshake RTT: "+K.T+"ms")),se=K;var Rt=T;if(se.na=Cp(se,se.L?se.ba:null,se.W),Rt.L){Nt(se.h,Rt);var En=Rt,ar=se.O;ar&&(En.H=ar),En.D&&(gt(En),he(En)),se.g=Rt}else Lh(se);K.i.length>0&&$o(K)}else $n[0]!="stop"&&$n[0]!="close"||fo(K,7);else K.I==3&&($n[0]=="stop"||$n[0]=="close"?$n[0]=="stop"?fo(K,7):Oh(K):$n[0]!="noop"&&K.l&&K.l.qa($n),K.A=0)}}ut(4)}catch{}}var ee=class{constructor(T,W){this.g=T,this.map=W}};function Se(T){this.l=T||10,s.PerformanceNavigationTiming?(T=s.performance.getEntriesByType("navigation"),T=T.length>0&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Oe(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function Re(T){return T.h?1:T.g?T.g.size:0}function Ee(T,W){return T.h?T.h==W:T.g?T.g.has(W):!1}function yt(T,W){T.g?T.g.add(W):T.h=W}function Nt(T,W){T.h&&T.h==W?T.h=null:T.g&&T.g.has(W)&&T.g.delete(W)}Se.prototype.cancel=function(){if(this.i=pt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function pt(T){if(T.h!=null)return T.i.concat(T.h.G);if(T.g!=null&&T.g.size!==0){let W=T.i;for(const K of T.g.values())W=W.concat(K.G);return W}return y(T.i)}var Lt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ft(T,W){if(T){T=T.split("&");for(let K=0;K<T.length;K++){const se=T[K].indexOf("=");let Ae,He=null;se>=0?(Ae=T[K].substring(0,se),He=T[K].substring(se+1)):Ae=T[K],W(Ae,He?decodeURIComponent(He.replace(/\+/g," ")):"")}}}function jt(T){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let W;T instanceof jt?(this.l=T.l,$t(this,T.j),this.o=T.o,this.g=T.g,wn(this,T.u),this.h=T.h,ci(this,Tp(T.i)),this.m=T.m):T&&(W=String(T).match(Lt))?(this.l=!1,$t(this,W[1]||"",!0),this.o=Pt(W[2]||""),this.g=Pt(W[3]||"",!0),wn(this,W[4]),this.h=Pt(W[5]||"",!0),ci(this,W[6]||"",!0),this.m=Pt(W[7]||"")):(this.l=!1,this.i=new Li(null,this.l))}jt.prototype.toString=function(){const T=[];var W=this.j;W&&T.push(On(W,qi,!0),":");var K=this.g;return(K||W=="file")&&(T.push("//"),(W=this.o)&&T.push(On(W,qi,!0),"@"),T.push(oa(K).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),K=this.u,K!=null&&T.push(":",String(K))),(K=this.h)&&(this.g&&K.charAt(0)!="/"&&T.push("/"),T.push(On(K,K.charAt(0)=="/"?Ti:ks,!0))),(K=this.i.toString())&&T.push("?",K),(K=this.m)&&T.push("#",On(K,ii)),T.join("")},jt.prototype.resolve=function(T){const W=Ot(this);let K=!!T.j;K?$t(W,T.j):K=!!T.o,K?W.o=T.o:K=!!T.g,K?W.g=T.g:K=T.u!=null;var se=T.h;if(K)wn(W,T.u);else if(K=!!T.h){if(se.charAt(0)!="/")if(this.g&&!this.h)se="/"+se;else{var Ae=W.h.lastIndexOf("/");Ae!=-1&&(se=W.h.slice(0,Ae+1)+se)}if(Ae=se,Ae==".."||Ae==".")se="";else if(Ae.indexOf("./")!=-1||Ae.indexOf("/.")!=-1){se=Ae.lastIndexOf("/",0)==0,Ae=Ae.split("/");const He=[];for(let Rt=0;Rt<Ae.length;){const En=Ae[Rt++];En=="."?se&&Rt==Ae.length&&He.push(""):En==".."?((He.length>1||He.length==1&&He[0]!="")&&He.pop(),se&&Rt==Ae.length&&He.push("")):(He.push(En),se=!0)}se=He.join("/")}else se=Ae}return K?W.h=se:K=T.i.toString()!=="",K?ci(W,Tp(T.i)):K=!!T.m,K&&(W.m=T.m),W};function Ot(T){return new jt(T)}function $t(T,W,K){T.j=K?Pt(W,!0):W,T.j&&(T.j=T.j.replace(/:$/,""))}function wn(T,W){if(W){if(W=Number(W),isNaN(W)||W<0)throw Error("Bad port number "+W);T.u=W}else T.u=null}function ci(T,W,K){W instanceof Li?(T.i=W,pf(T.i,T.l)):(K||(W=On(W,la)),T.i=new Li(W,T.l))}function nn(T,W,K){T.i.set(W,K)}function dn(T){return nn(T,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),T}function Pt(T,W){return T?W?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function On(T,W,K){return typeof T=="string"?(T=encodeURI(T).replace(W,ln),K&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function ln(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var qi=/[#\/\?@]/g,ks=/[#\?:]/g,Ti=/[#\?]/g,la=/[#\?@]/g,ii=/#/g;function Li(T,W){this.h=this.g=null,this.i=T||null,this.j=!!W}function bi(T){T.g||(T.g=new Map,T.h=0,T.i&&Ft(T.i,function(W,K){T.add(decodeURIComponent(W.replace(/\+/g," ")),K)}))}n=Li.prototype,n.add=function(T,W){bi(this),this.i=null,T=gl(this,T);let K=this.g.get(T);return K||this.g.set(T,K=[]),K.push(W),this.h+=1,this};function pr(T,W){bi(T),W=gl(T,W),T.g.has(W)&&(T.i=null,T.h-=T.g.get(W).length,T.g.delete(W))}function mr(T,W){return bi(T),W=gl(T,W),T.g.has(W)}n.forEach=function(T,W){bi(this),this.g.forEach(function(K,se){K.forEach(function(Ae){T.call(W,Ae,se,this)},this)},this)};function ml(T,W){bi(T);let K=[];if(typeof W=="string")mr(T,W)&&(K=K.concat(T.g.get(gl(T,W))));else for(T=Array.from(T.g.values()),W=0;W<T.length;W++)K=K.concat(T[W]);return K}n.set=function(T,W){return bi(this),this.i=null,T=gl(this,T),mr(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[W]),this.h+=1,this},n.get=function(T,W){return T?(T=ml(this,T),T.length>0?String(T[0]):W):W};function Fa(T,W,K){pr(T,W),K.length>0&&(T.i=null,T.g.set(gl(T,W),y(K)),T.h+=K.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],W=Array.from(this.g.keys());for(let se=0;se<W.length;se++){var K=W[se];const Ae=oa(K);K=ml(this,K);for(let He=0;He<K.length;He++){let Rt=Ae;K[He]!==""&&(Rt+="="+oa(K[He])),T.push(Rt)}}return this.i=T.join("&")};function Tp(T){const W=new Li;return W.i=T.i,T.g&&(W.g=new Map(T.g),W.h=T.h),W}function gl(T,W){return W=String(W),T.j&&(W=W.toLowerCase()),W}function pf(T,W){W&&!T.j&&(bi(T),T.i=null,T.g.forEach(function(K,se){const Ae=se.toLowerCase();se!=Ae&&(pr(this,se),Fa(this,Ae,K))},T)),T.j=W}function Ho(T,W){const K=new ht;if(s.Image){const se=new Image;se.onload=h(Us,K,"TestLoadImage: loaded",!0,W,se),se.onerror=h(Us,K,"TestLoadImage: error",!1,W,se),se.onabort=h(Us,K,"TestLoadImage: abort",!1,W,se),se.ontimeout=h(Us,K,"TestLoadImage: timeout",!1,W,se),s.setTimeout(function(){se.ontimeout&&se.ontimeout()},1e4),se.src=T}else W(!1)}function Ph(T,W){const K=new ht,se=new AbortController,Ae=setTimeout(()=>{se.abort(),Us(K,"TestPingServer: timeout",!1,W)},1e4);fetch(T,{signal:se.signal}).then(He=>{clearTimeout(Ae),He.ok?Us(K,"TestPingServer: ok",!0,W):Us(K,"TestPingServer: server error",!1,W)}).catch(()=>{clearTimeout(Ae),Us(K,"TestPingServer: error",!1,W)})}function Us(T,W,K,se,Ae){try{Ae&&(Ae.onload=null,Ae.onerror=null,Ae.onabort=null,Ae.ontimeout=null),se(K)}catch{}}function ac(){this.g=new ct}function co(T){this.i=T.Sb||null,this.h=T.ab||!1}p(co,At),co.prototype.g=function(){return new Xc(this.i,this.h)};function Xc(T,W){_t.call(this),this.H=T,this.o=W,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Xc,_t),n=Xc.prototype,n.open=function(T,W){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=T,this.D=W,this.readyState=1,uo(this)},n.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const W={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};T&&(W.body=T),(this.H||s).fetch(new Request(this.D,W)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,sc(this)),this.readyState=0},n.Pa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,uo(this)),this.g&&(this.readyState=3,uo(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;mf(this)}else T.text().then(this.Oa.bind(this),this.ga.bind(this))};function mf(T){T.j.read().then(T.Ma.bind(T)).catch(T.ga.bind(T))}n.Ma=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var W=T.value?T.value:new Uint8Array(0);(W=this.B.decode(W,{stream:!T.done}))&&(this.response=this.responseText+=W)}T.done?sc(this):uo(this),this.readyState==3&&mf(this)}},n.Oa=function(T){this.g&&(this.response=this.responseText=T,sc(this))},n.Na=function(T){this.g&&(this.response=T,sc(this))},n.ga=function(){this.g&&sc(this)};function sc(T){T.readyState=4,T.l=null,T.j=null,T.B=null,uo(T)}n.setRequestHeader=function(T,W){this.A.append(T,W)},n.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],W=this.h.entries();for(var K=W.next();!K.done;)K=K.value,T.push(K[0]+": "+K[1]),K=W.next();return T.join(`\r
`)};function uo(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(Xc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function Fs(T){let W="";return le(T,function(K,se){W+=se,W+=":",W+=K,W+=`\r
`}),W}function gf(T,W,K){e:{for(se in K){var se=!1;break e}se=!0}se||(K=Fs(K),typeof T=="string"?K!=null&&oa(K):nn(T,W,K))}function pi(T){_t.call(this),this.headers=new Map,this.L=T||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(pi,_t);var za=/^https?$/i,Nh=["POST","PUT"];n=pi.prototype,n.Fa=function(T){this.H=T},n.ea=function(T,W,K,se){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);W=W?W.toUpperCase():"GET",this.D=T,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ls.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(W,String(T),!0),this.B=!1}catch(He){vl(this,He);return}if(T=K||"",K=new Map(this.headers),se)if(Object.getPrototypeOf(se)===Object.prototype)for(var Ae in se)K.set(Ae,se[Ae]);else if(typeof se.keys=="function"&&typeof se.get=="function")for(const He of se.keys())K.set(He,se.get(He));else throw Error("Unknown input type for opt_headers: "+String(se));se=Array.from(K.keys()).find(He=>He.toLowerCase()=="content-type"),Ae=s.FormData&&T instanceof s.FormData,!(Array.prototype.indexOf.call(Nh,W,void 0)>=0)||se||Ae||K.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[He,Rt]of K)this.g.setRequestHeader(He,Rt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(T),this.v=!1}catch(He){vl(this,He)}};function vl(T,W){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=W,T.o=5,Yc(T),Go(T)}function Yc(T){T.A||(T.A=!0,tt(T,"complete"),tt(T,"error"))}n.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=T||7,tt(this,"complete"),tt(this,"abort"),Go(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Go(this,!0)),pi.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Kc(this):this.Xa())},n.Xa=function(){Kc(this)};function Kc(T){if(T.h&&typeof a<"u"){if(T.v&&Wo(T)==4)setTimeout(T.Ca.bind(T),0);else if(tt(T,"readystatechange"),Wo(T)==4){T.h=!1;try{const He=T.ca();e:switch(He){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var W=!0;break e;default:W=!1}var K;if(!(K=W)){var se;if(se=He===0){let Rt=String(T.D).match(Lt)[1]||null;!Rt&&s.self&&s.self.location&&(Rt=s.self.location.protocol.slice(0,-1)),se=!za.test(Rt?Rt.toLowerCase():"")}K=se}if(K)tt(T,"complete"),tt(T,"success");else{T.o=6;try{var Ae=Wo(T)>2?T.g.statusText:""}catch{Ae=""}T.l=Ae+" ["+T.ca()+"]",Yc(T)}}finally{Go(T)}}}}function Go(T,W){if(T.g){T.m&&(clearTimeout(T.m),T.m=null);const K=T.g;T.g=null,W||tt(T,"ready");try{K.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Wo(T){return T.g?T.g.readyState:0}n.ca=function(){try{return Wo(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(T){if(this.g){var W=this.g.responseText;return T&&W.indexOf(T)==0&&(W=W.substring(T.length)),Mt(W)}};function Xr(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.F){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function yl(T){const W={};T=(T.g&&Wo(T)>=2&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let se=0;se<T.length;se++){if(j(T[se]))continue;var K=jo(T[se]);const Ae=K[0];if(K=K[1],typeof K!="string")continue;K=K.trim();const He=W[Ae]||[];W[Ae]=He,He.push(K)}ue(W,function(se){return se.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function qo(T,W,K){return K&&K.internalChannelParams&&K.internalChannelParams[T]||W}function oc(T){this.za=0,this.i=[],this.j=new ht,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=qo("failFast",!1,T),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=qo("baseRetryDelayMs",5e3,T),this.Za=qo("retryDelaySeedMs",1e4,T),this.Ta=qo("forwardChannelMaxRetries",2,T),this.va=qo("forwardChannelRequestTimeoutMs",2e4,T),this.ma=T&&T.xmlHttpFactory||void 0,this.Ua=T&&T.Rb||void 0,this.Aa=T&&T.useFetchStreams||!1,this.O=void 0,this.L=T&&T.supportsCrossDomainXhr||!1,this.M="",this.h=new Se(T&&T.concurrentRequestLimit),this.Ba=new ac,this.S=T&&T.fastHandshake||!1,this.R=T&&T.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=T&&T.Pb||!1,T&&T.ua&&this.j.ua(),T&&T.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&T&&T.detectBufferingProxy||!1,this.ia=void 0,T&&T.longPollingTimeout&&T.longPollingTimeout>0&&(this.ia=T.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=oc.prototype,n.ka=8,n.I=1,n.connect=function(T,W,K,se){lt(0),this.W=T,this.H=W||{},K&&se!==void 0&&(this.H.OSID=K,this.H.OAID=se),this.F=this.X,this.J=Cp(this,null,this.W),$o(this)};function Oh(T){if(vf(T),T.I==3){var W=T.V++,K=Ot(T.J);if(nn(K,"SID",T.M),nn(K,"RID",W),nn(K,"TYPE","terminate"),Qc(T,K),W=new Ci(T,T.j,W),W.M=2,W.A=dn(Ot(K)),K=!1,s.navigator&&s.navigator.sendBeacon)try{K=s.navigator.sendBeacon(W.A.toString(),"")}catch{}!K&&s.Image&&(new Image().src=W.A,K=!0),K||(W.g=Ip(W.j,null),W.g.ea(W.A)),W.F=Date.now(),he(W)}yf(T)}function bl(T){T.g&&(kh(T),T.g.cancel(),T.g=null)}function vf(T){bl(T),T.v&&(s.clearTimeout(T.v),T.v=null),Uh(T),T.h.cancel(),T.m&&(typeof T.m=="number"&&s.clearTimeout(T.m),T.m=null)}function $o(T){if(!Oe(T.h)&&!T.m){T.m=!0;var W=T.Ea;z||R(),k||(z(),k=!0),U.add(W,T),T.D=0}}function Zc(T,W){return Re(T.h)>=T.h.j-(T.m?1:0)?!1:T.m?(T.i=W.G.concat(T.i),!0):T.I==1||T.I==2||T.D>=(T.Sa?0:T.Ta)?!1:(T.m=Ke(f(T.Ea,T,W),eu(T,T.D)),T.D++,!0)}n.Ea=function(T){if(this.m)if(this.m=null,this.I==1){if(!T){this.V=Math.floor(Math.random()*1e5),T=this.V++;const Ae=new Ci(this,this.j,T);let He=this.o;if(this.U&&(He?(He=Q(He),ye(He,this.U)):He=this.U),this.u!==null||this.R||(Ae.J=He,He=null),this.S)e:{for(var W=0,K=0;K<this.i.length;K++){t:{var se=this.i[K];if("__data__"in se.map&&(se=se.map.__data__,typeof se=="string")){se=se.length;break t}se=void 0}if(se===void 0)break;if(W+=se,W>4096){W=K;break e}if(W===4096||K===this.i.length-1){W=K+1;break e}}W=1e3}else W=1e3;W=Ap(this,Ae,W),K=Ot(this.J),nn(K,"RID",T),nn(K,"CVER",22),this.G&&nn(K,"X-HTTP-Session-Id",this.G),Qc(this,K),He&&(this.R?W="headers="+oa(Fs(He))+"&"+W:this.u&&gf(K,this.u,He)),yt(this.h,Ae),this.Ra&&nn(K,"TYPE","init"),this.S?(nn(K,"$req",W),nn(K,"SID","null"),Ae.U=!0,Er(Ae,K,null)):Er(Ae,K,W),this.I=2}}else this.I==3&&(T?Dh(this,T):this.i.length==0||Oe(this.h)||Dh(this))};function Dh(T,W){var K;W?K=W.l:K=T.V++;const se=Ot(T.J);nn(se,"SID",T.M),nn(se,"RID",K),nn(se,"AID",T.K),Qc(T,se),T.u&&T.o&&gf(se,T.u,T.o),K=new Ci(T,T.j,K,T.D+1),T.u===null&&(K.J=T.o),W&&(T.i=W.G.concat(T.i)),W=Ap(T,K,1e3),K.H=Math.round(T.va*.5)+Math.round(T.va*.5*Math.random()),yt(T.h,K),Er(K,se,W)}function Qc(T,W){T.H&&le(T.H,function(K,se){nn(W,se,K)}),T.l&&le({},function(K,se){nn(W,se,K)})}function Ap(T,W,K){K=Math.min(T.i.length,K);const se=T.l?f(T.l.Ka,T.l,T):null;e:{var Ae=T.i;let En=-1;for(;;){const ar=["count="+K];En==-1?K>0?(En=Ae[0].g,ar.push("ofs="+En)):En=0:ar.push("ofs="+En);let $n=!0;for(let ki=0;ki<K;ki++){var He=Ae[ki].g;const Ba=Ae[ki].map;if(He-=En,He<0)En=Math.max(0,Ae[ki].g-100),$n=!1;else try{He="req"+He+"_"||"";try{var Rt=Ba instanceof Map?Ba:Object.entries(Ba);for(const[Xo,Yo]of Rt){let cs=Yo;o(Yo)&&(cs=De(Yo)),ar.push(He+Xo+"="+encodeURIComponent(cs))}}catch(Xo){throw ar.push(He+"type="+encodeURIComponent("_badmap")),Xo}}catch{se&&se(Ba)}}if($n){Rt=ar.join("&");break e}}Rt=void 0}return T=T.i.splice(0,K),W.G=T,Rt}function Lh(T){if(!T.g&&!T.v){T.Y=1;var W=T.Da;z||R(),k||(z(),k=!0),U.add(W,T),T.A=0}}function Jc(T){return T.g||T.v||T.A>=3?!1:(T.Y++,T.v=Ke(f(T.Da,T),eu(T,T.A)),T.A++,!0)}n.Da=function(){if(this.v=null,Ng(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var T=4*this.T;this.j.info("BP detection timer enabled: "+T),this.B=Ke(f(this.Wa,this),T)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,lt(10),bl(this),Ng(this))};function kh(T){T.B!=null&&(s.clearTimeout(T.B),T.B=null)}function Ng(T){T.g=new Ci(T,T.j,"rpc",T.Y),T.u===null&&(T.g.J=T.o),T.g.P=0;var W=Ot(T.na);nn(W,"RID","rpc"),nn(W,"SID",T.M),nn(W,"AID",T.K),nn(W,"CI",T.F?"0":"1"),!T.F&&T.ia&&nn(W,"TO",T.ia),nn(W,"TYPE","xmlhttp"),Qc(T,W),T.u&&T.o&&gf(W,T.u,T.o),T.O&&(T.g.H=T.O);var K=T.g;T=T.ba,K.M=1,K.A=dn(Ot(W)),K.u=null,K.R=!0,kr(K,T)}n.Va=function(){this.C!=null&&(this.C=null,bl(this),Jc(this),lt(19))};function Uh(T){T.C!=null&&(s.clearTimeout(T.C),T.C=null)}function Mp(T,W){var K=null;if(T.g==W){Uh(T),kh(T),T.g=null;var se=2}else if(Ee(T.h,W))K=W.G,Nt(T.h,W),se=1;else return;if(T.I!=0){if(W.o)if(se==1){K=W.u?W.u.length:0,W=Date.now()-W.F;var Ae=T.D;se=xt(),tt(se,new nt(se,K)),$o(T)}else Lh(T);else if(Ae=W.m,Ae==3||Ae==0&&W.X>0||!(se==1&&Zc(T,W)||se==2&&Jc(T)))switch(K&&K.length>0&&(W=T.h,W.i=W.i.concat(K)),Ae){case 1:fo(T,5);break;case 4:fo(T,10);break;case 3:fo(T,6);break;default:fo(T,2)}}}function eu(T,W){let K=T.Qa+Math.floor(Math.random()*T.Za);return T.isActive()||(K*=2),K*W}function fo(T,W){if(T.j.info("Error code "+W),W==2){var K=f(T.bb,T),se=T.Ua;const Ae=!se;se=new jt(se||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||$t(se,"https"),dn(se),Ae?Ho(se.toString(),K):Ph(se.toString(),K)}else lt(2);T.I=0,T.l&&T.l.pa(W),yf(T),vf(T)}n.bb=function(T){T?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function yf(T){if(T.I=0,T.ja=[],T.l){const W=pt(T.h);(W.length!=0||T.i.length!=0)&&(_(T.ja,W),_(T.ja,T.i),T.h.i.length=0,y(T.i),T.i.length=0),T.l.oa()}}function Cp(T,W,K){var se=K instanceof jt?Ot(K):new jt(K);if(se.g!="")W&&(se.g=W+"."+se.g),wn(se,se.u);else{var Ae=s.location;se=Ae.protocol,W=W?W+"."+Ae.hostname:Ae.hostname,Ae=+Ae.port;const He=new jt(null);se&&$t(He,se),W&&(He.g=W),Ae&&wn(He,Ae),K&&(He.h=K),se=He}return K=T.G,W=T.wa,K&&W&&nn(se,K,W),nn(se,"VER",T.ka),Qc(T,se),se}function Ip(T,W,K){if(W&&!T.L)throw Error("Can't create secondary domain capable XhrIo object.");return W=T.Aa&&!T.ma?new pi(new co({ab:K})):new pi(T.ma),W.Fa(T.L),W}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fh(){}n=Fh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function lc(){}lc.prototype.g=function(T,W){return new xa(T,W)};function xa(T,W){_t.call(this),this.g=new oc(W),this.l=T,this.h=W&&W.messageUrlParams||null,T=W&&W.messageHeaders||null,W&&W.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=W&&W.initMessageHeaders||null,W&&W.messageContentType&&(T?T["X-WebChannel-Content-Type"]=W.messageContentType:T={"X-WebChannel-Content-Type":W.messageContentType}),W&&W.sa&&(T?T["X-WebChannel-Client-Profile"]=W.sa:T={"X-WebChannel-Client-Profile":W.sa}),this.g.U=T,(T=W&&W.Qb)&&!j(T)&&(this.g.u=T),this.A=W&&W.supportsCrossDomainXhr||!1,this.v=W&&W.sendRawJson||!1,(W=W&&W.httpSessionIdParam)&&!j(W)&&(this.g.G=W,T=this.h,T!==null&&W in T&&(T=this.h,W in T&&delete T[W])),this.j=new xl(this)}p(xa,_t),xa.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xa.prototype.close=function(){Oh(this.g)},xa.prototype.o=function(T){var W=this.g;if(typeof T=="string"){var K={};K.__data__=T,T=K}else this.v&&(K={},K.__data__=De(T),T=K);W.i.push(new ee(W.Ya++,T)),W.I==3&&$o(W)},xa.prototype.N=function(){this.g.l=null,delete this.j,Oh(this.g),delete this.g,xa.Z.N.call(this)};function _l(T){st.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var W=T.__sm__;if(W){e:{for(const K in W){T=K;break e}T=void 0}(this.i=T)&&(T=this.i,W=W!==null&&T in W?W[T]:void 0),this.data=W}else this.data=T}p(_l,st);function bf(){Et.call(this),this.status=1}p(bf,Et);function xl(T){this.g=T}p(xl,Fh),xl.prototype.ra=function(){tt(this.g,"a")},xl.prototype.qa=function(T){tt(this.g,new _l(T))},xl.prototype.pa=function(T){tt(this.g,new bf)},xl.prototype.oa=function(){tt(this.g,"b")},lc.prototype.createWebChannel=lc.prototype.g,xa.prototype.send=xa.prototype.o,xa.prototype.open=xa.prototype.m,xa.prototype.close=xa.prototype.close,G9=function(){return new lc},H9=function(){return xt()},j9=fe,zN={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ka.NO_ERROR=0,ka.TIMEOUT=8,ka.HTTP_ERROR=6,eE=ka,Ds.COMPLETE="complete",V9=Ds,Ut.EventType=et,et.OPEN="a",et.CLOSE="b",et.ERROR="c",et.MESSAGE="d",_t.prototype.listen=_t.prototype.J,o_=Ut,pi.prototype.listenOnce=pi.prototype.K,pi.prototype.getLastError=pi.prototype.Ha,pi.prototype.getLastErrorCode=pi.prototype.ya,pi.prototype.getStatus=pi.prototype.ca,pi.prototype.getResponseJson=pi.prototype.La,pi.prototype.getResponseText=pi.prototype.la,pi.prototype.send=pi.prototype.ea,pi.prototype.setWithCredentials=pi.prototype.Fa,B9=pi}).apply(typeof Sw<"u"?Sw:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}As.UNAUTHENTICATED=new As(null),As.GOOGLE_CREDENTIALS=new As("google-credentials-uid"),As.FIRST_PARTY=new As("first-party-uid"),As.MOCK_USER=new As("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iy="12.8.0";function Wce(n){iy=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg=new tD("@firebase/firestore");function iv(){return cg.logLevel}function Ht(n,...e){if(cg.logLevel<=Jn.DEBUG){const t=e.map(rD);cg.debug(`Firestore (${iy}): ${n}`,...t)}}function ph(n,...e){if(cg.logLevel<=Jn.ERROR){const t=e.map(rD);cg.error(`Firestore (${iy}): ${n}`,...t)}}function Uv(n,...e){if(cg.logLevel<=Jn.WARN){const t=e.map(rD);cg.warn(`Firestore (${iy}): ${n}`,...t)}}function rD(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,W9(n,i,t)}function W9(n,e,t){let i=`FIRESTORE (${iy}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ph(i),new Error(i)}function wi(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||W9(e,r,i)}function Rn(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Jt extends hf{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qce{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(As.UNAUTHENTICATED)))}shutdown(){}}class $ce{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Xce{constructor(e){this.t=e,this.currentUser=As.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){wi(this.o===void 0,42304);let i=this.i;const r=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let a=new Xm;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Xm,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const c=a;e.enqueueRetryable((async()=>{await c.promise,await r(this.currentUser)}))},o=c=>{Ht("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>o(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(Ht("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Xm)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Ht("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(wi(typeof i.accessToken=="string",31837,{l:i}),new q9(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wi(e===null||typeof e=="string",2055,{h:e}),new As(e)}}class Yce{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=As.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Kce{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new Yce(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(As.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zce{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$l(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){wi(this.o===void 0,3512);const i=a=>{a.error!=null&&Ht("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,Ht("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const r=a=>{Ht("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):Ht("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new $2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(wi(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $2(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qce(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=Qce(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<t&&(i+=e.charAt(r[a]%62))}return i}}function ei(n,e){return n<e?-1:n>e?1:0}function BN(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),a=e.charAt(i);if(r!==a)return xR(r)===xR(a)?ei(r,a):xR(r)?1:-1}return ei(n.length,e.length)}const Jce=55296,eue=57343;function xR(n){const e=n.charCodeAt(0);return e>=Jce&&e<=eue}function Fv(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2="__name__";class Ou{constructor(e,t,i){t===void 0?t=0:t>e.length&&vn(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&vn(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ou.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ou?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const a=Ou.compareSegments(e.get(r),t.get(r));if(a!==0)return a}return ei(e.length,t.length)}static compareSegments(e,t){const i=Ou.isNumericId(e),r=Ou.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?Ou.extractNumericId(e).compare(Ou.extractNumericId(t)):BN(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qd.fromString(e.substring(4,e.length-2))}}class tr extends Ou{construct(e,t,i){return new tr(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Jt(bt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new tr(t)}static emptyPath(){return new tr([])}}const tue=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ns extends Ou{construct(e,t,i){return new ns(e,t,i)}static isValidIdentifier(e){return tue.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ns.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===X2}static keyField(){return new ns([X2])}static fromServerFormat(e){const t=[];let i="",r=0;const a=()=>{if(i.length===0)throw new Jt(bt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let s=!1;for(;r<e.length;){const o=e[r];if(o==="\\"){if(r+1===e.length)throw new Jt(bt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Jt(bt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else o==="`"?(s=!s,r++):o!=="."||s?(i+=o,r++):(a(),r++)}if(a(),s)throw new Jt(bt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ns(t)}static emptyPath(){return new ns([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.path=e}static fromPath(e){return new cn(tr.fromString(e))}static fromName(e){return new cn(tr.fromString(e).popFirst(5))}static empty(){return new cn(tr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new cn(new tr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $9(n,e,t){if(!t)throw new Jt(bt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function nue(n,e,t,i){if(e===!0&&i===!0)throw new Jt(bt.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Y2(n){if(!cn.isDocumentKey(n))throw new Jt(bt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function K2(n){if(cn.isDocumentKey(n))throw new Jt(bt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function X9(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function sD(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":vn(12329,{type:typeof n})}function Jd(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Jt(bt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sD(n);throw new Jt(bt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(n,e){const t={typeString:n};return e&&(t.value=e),t}function zx(n,e){if(!X9(n))throw new Jt(bt.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const s=n[i];if(r&&typeof s!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&s!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new Jt(bt.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=-62135596800,Q2=1e6;class nr{static now(){return nr.fromMillis(Date.now())}static fromDate(e){return nr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Q2);return new nr(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Jt(bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Jt(bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Z2)throw new Jt(bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Jt(bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Q2}_compareTo(e){return this.seconds===e.seconds?ei(this.nanoseconds,e.nanoseconds):ei(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zx(e,nr._jsonSchema))return new nr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Z2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nr._jsonSchemaVersion="firestore/timestamp/1.0",nr._jsonSchema={type:ia("string",nr._jsonSchemaVersion),seconds:ia("number"),nanoseconds:ia("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{static fromTimestamp(e){return new An(e)}static min(){return new An(new nr(0,0))}static max(){return new An(new nr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=-1;function iue(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=An.fromTimestamp(i===1e9?new nr(t+1,0):new nr(t,i));return new lp(r,cn.empty(),e)}function rue(n){return new lp(n.readTime,n.key,tx)}class lp{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new lp(An.min(),cn.empty(),tx)}static max(){return new lp(An.max(),cn.empty(),tx)}}function aue(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=cn.comparator(n.documentKey,e.documentKey),t!==0?t:ei(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sue="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oue{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ry(n){if(n.code!==bt.FAILED_PRECONDITION||n.message!==sue)throw n;Ht("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&vn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new dt(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof dt?t:dt.resolve(t)}catch(t){return dt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):dt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):dt.reject(t)}static resolve(e){return new dt(((t,i)=>{t(e)}))}static reject(e){return new dt(((t,i)=>{i(e)}))}static waitFor(e){return new dt(((t,i)=>{let r=0,a=0,s=!1;e.forEach((o=>{++r,o.next((()=>{++a,s&&a===r&&t()}),(c=>i(c)))})),s=!0,a===r&&t()}))}static or(e){let t=dt.resolve(!1);for(const i of e)t=t.next((r=>r?dt.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,a)=>{i.push(t.call(this,r,a))})),this.waitFor(i)}static mapArray(e,t){return new dt(((i,r)=>{const a=e.length,s=new Array(a);let o=0;for(let c=0;c<a;c++){const f=c;t(e[f]).next((h=>{s[f]=h,++o,o===a&&i(s)}),(h=>r(h)))}}))}static doWhile(e,t){return new dt(((i,r)=>{const a=()=>{e()===!0?t().next((()=>{a()}),r):i()};a()}))}}function lue(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ay(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xM.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=-1;function SM(n){return n==null}function bT(n){return n===0&&1/n==-1/0}function cue(n){return typeof n=="number"&&Number.isInteger(n)&&!bT(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9="";function uue(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=J2(e)),e=fue(n.get(t),e);return J2(e)}function fue(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const a=n.charAt(r);switch(a){case"\0":t+="";break;case Y9:t+="";break;default:t+=a}}return t}function J2(n){return n+Y9+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function K9(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,t){this.comparator=e,this.root=t||es.EMPTY}insert(e,t){return new wr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,es.BLACK,null,null))}remove(e){return new wr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,es.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ww(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ww(this.root,e,this.comparator,!1)}getReverseIterator(){return new ww(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ww(this.root,e,this.comparator,!0)}}class ww{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class es{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=i??es.RED,this.left=r??es.EMPTY,this.right=a??es.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,a){return new es(e??this.key,t??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,i),null):a===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return es.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return es.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,es.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,es.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw vn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw vn(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw vn(27949);return e+(this.isRed()?0:1)}}es.EMPTY=null,es.RED=!0,es.BLACK=!1;es.EMPTY=new class{constructor(){this.size=0}get key(){throw vn(57766)}get value(){throw vn(16141)}get color(){throw vn(16727)}get left(){throw vn(29726)}get right(){throw vn(36894)}copy(e,t,i,r,a){return this}insert(e,t,i){return new es(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.comparator=e,this.data=new wr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tF(this.data.getIterator())}getIteratorFrom(e){return new tF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof ga)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ga(this.comparator);return t.data=e,t}}class tF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e){this.fields=e,e.sort(ns.comparator)}static empty(){return new sl([])}unionWith(e){let t=new ga(ns.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new sl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fv(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Z9("Invalid base64 string: "+a):a}})(e);return new ss(t)}static fromUint8Array(e){const t=(function(r){let a="";for(let s=0;s<r.length;++s)a+=String.fromCharCode(r[s]);return a})(e);return new ss(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ei(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ss.EMPTY_BYTE_STRING=new ss("");const hue=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cp(n){if(wi(!!n,39018),typeof n=="string"){let e=0;const t=hue.exec(n);if(wi(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Hr(n.seconds),nanos:Hr(n.nanos)}}function Hr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function up(n){return typeof n=="string"?ss.fromBase64String(n):ss.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9="server_timestamp",J9="__type__",eH="__previous_value__",tH="__local_write_time__";function lD(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[J9])==null?void 0:i.stringValue)===Q9}function wM(n){const e=n.mapValue.fields[eH];return lD(e)?wM(e):e}function nx(n){const e=cp(n.mapValue.fields[tH].timestampValue);return new nr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class due{constructor(e,t,i,r,a,s,o,c,f,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=h,this.apiKey=p}}const _T="(default)";class ix{constructor(e,t){this.projectId=e,this.database=t||_T}static empty(){return new ix("","")}get isDefaultDatabase(){return this.database===_T}isEqual(e){return e instanceof ix&&e.projectId===this.projectId&&e.database===this.database}}function pue(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Jt(bt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ix(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nH="__type__",mue="__max__",Ew={mapValue:{}},iH="__vector__",xT="value";function fp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lD(n)?4:vue(n)?9007199254740991:gue(n)?10:11:vn(28295,{value:n})}function tf(n,e){if(n===e)return!0;const t=fp(n);if(t!==fp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return nx(n).isEqual(nx(e));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const s=cp(r.timestampValue),o=cp(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,a){return up(r.bytesValue).isEqual(up(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,a){return Hr(r.geoPointValue.latitude)===Hr(a.geoPointValue.latitude)&&Hr(r.geoPointValue.longitude)===Hr(a.geoPointValue.longitude)})(n,e);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return Hr(r.integerValue)===Hr(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const s=Hr(r.doubleValue),o=Hr(a.doubleValue);return s===o?bT(s)===bT(o):isNaN(s)&&isNaN(o)}return!1})(n,e);case 9:return Fv(n.arrayValue.values||[],e.arrayValue.values||[],tf);case 10:case 11:return(function(r,a){const s=r.mapValue.fields||{},o=a.mapValue.fields||{};if(eF(s)!==eF(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(o[c]===void 0||!tf(s[c],o[c])))return!1;return!0})(n,e);default:return vn(52216,{left:n})}}function rx(n,e){return(n.values||[]).find((t=>tf(t,e)))!==void 0}function zv(n,e){if(n===e)return 0;const t=fp(n),i=fp(e);if(t!==i)return ei(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ei(n.booleanValue,e.booleanValue);case 2:return(function(a,s){const o=Hr(a.integerValue||a.doubleValue),c=Hr(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1})(n,e);case 3:return nF(n.timestampValue,e.timestampValue);case 4:return nF(nx(n),nx(e));case 5:return BN(n.stringValue,e.stringValue);case 6:return(function(a,s){const o=up(a),c=up(s);return o.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(a,s){const o=a.split("/"),c=s.split("/");for(let f=0;f<o.length&&f<c.length;f++){const h=ei(o[f],c[f]);if(h!==0)return h}return ei(o.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,s){const o=ei(Hr(a.latitude),Hr(s.latitude));return o!==0?o:ei(Hr(a.longitude),Hr(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return iF(n.arrayValue,e.arrayValue);case 10:return(function(a,s){var v,y,_,E;const o=a.fields||{},c=s.fields||{},f=(v=o[xT])==null?void 0:v.arrayValue,h=(y=c[xT])==null?void 0:y.arrayValue,p=ei(((_=f==null?void 0:f.values)==null?void 0:_.length)||0,((E=h==null?void 0:h.values)==null?void 0:E.length)||0);return p!==0?p:iF(f,h)})(n.mapValue,e.mapValue);case 11:return(function(a,s){if(a===Ew.mapValue&&s===Ew.mapValue)return 0;if(a===Ew.mapValue)return 1;if(s===Ew.mapValue)return-1;const o=a.fields||{},c=Object.keys(o),f=s.fields||{},h=Object.keys(f);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const v=BN(c[p],h[p]);if(v!==0)return v;const y=zv(o[c[p]],f[h[p]]);if(y!==0)return y}return ei(c.length,h.length)})(n.mapValue,e.mapValue);default:throw vn(23264,{he:t})}}function nF(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ei(n,e);const t=cp(n),i=cp(e),r=ei(t.seconds,i.seconds);return r!==0?r:ei(t.nanos,i.nanos)}function iF(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const a=zv(t[r],i[r]);if(a)return a}return ei(t.length,i.length)}function Bv(n){return VN(n)}function VN(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=cp(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return up(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return cn.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const a of t.values||[])r?r=!1:i+=",",i+=VN(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",a=!0;for(const s of i)a?a=!1:r+=",",r+=`${s}:${VN(t.fields[s])}`;return r+"}"})(n.mapValue):vn(61005,{value:n})}function tE(n){switch(fp(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wM(n);return e?16+tE(e):16;case 5:return 2*n.stringValue.length;case 6:return up(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+tE(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return xp(i.fields,((a,s)=>{r+=a.length+tE(s)})),r})(n.mapValue);default:throw vn(13486,{value:n})}}function jN(n){return!!n&&"integerValue"in n}function cD(n){return!!n&&"arrayValue"in n}function rF(n){return!!n&&"nullValue"in n}function aF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function nE(n){return!!n&&"mapValue"in n}function gue(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[nH])==null?void 0:i.stringValue)===iH}function T_(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return xp(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=T_(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=T_(n.arrayValue.values[t]);return e}return{...n}}function vue(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===mue}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.value=e}static empty(){return new ko({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!nE(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=T_(t)}setAll(e){let t=ns.emptyPath(),i={},r=[];e.forEach(((s,o)=>{if(!t.isImmediateParentOf(o)){const c=this.getFieldsMap(t);this.applyChanges(c,i,r),i={},r=[],t=o.popLast()}s?i[o.lastSegment()]=T_(s):r.push(o.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,r)}delete(e){const t=this.field(e.popLast());nE(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return tf(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];nE(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){xp(t,((r,a)=>e[r]=a));for(const r of i)delete e[r]}clone(){return new ko(T_(this.value))}}function rH(n){const e=[];return xp(n.fields,((t,i)=>{const r=new ns([t]);if(nE(i)){const a=rH(i.mapValue).fields;if(a.length===0)e.push(r);else for(const s of a)e.push(r.child(s))}else e.push(r)})),new sl(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,t,i,r,a,s,o){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Ms(e,0,An.min(),An.min(),An.min(),ko.empty(),0)}static newFoundDocument(e,t,i,r){return new Ms(e,1,t,An.min(),i,r,0)}static newNoDocument(e,t){return new Ms(e,2,t,An.min(),An.min(),ko.empty(),0)}static newUnknownDocument(e,t){return new Ms(e,3,t,An.min(),An.min(),ko.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(An.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ko.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ko.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=An.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ms&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ms(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,t){this.position=e,this.inclusive=t}}function sF(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const a=e[r],s=n.position[r];if(a.field.isKeyField()?i=cn.comparator(cn.fromName(s.referenceValue),t.key):i=zv(s,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function oF(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!tf(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,t="asc"){this.field=e,this.dir=t}}function yue(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{}class pa extends aH{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new _ue(e,t,i):t==="array-contains"?new wue(e,i):t==="in"?new Eue(e,i):t==="not-in"?new Tue(e,i):t==="array-contains-any"?new Aue(e,i):new pa(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new xue(e,i):new Sue(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(zv(t,this.value)):t!==null&&fp(this.value)===fp(t)&&this.matchesComparison(zv(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return vn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nf extends aH{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new nf(e,t)}matches(e){return sH(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sH(n){return n.op==="and"}function oH(n){return bue(n)&&sH(n)}function bue(n){for(const e of n.filters)if(e instanceof nf)return!1;return!0}function HN(n){if(n instanceof pa)return n.field.canonicalString()+n.op.toString()+Bv(n.value);if(oH(n))return n.filters.map((e=>HN(e))).join(",");{const e=n.filters.map((t=>HN(t))).join(",");return`${n.op}(${e})`}}function lH(n,e){return n instanceof pa?(function(i,r){return r instanceof pa&&i.op===r.op&&i.field.isEqual(r.field)&&tf(i.value,r.value)})(n,e):n instanceof nf?(function(i,r){return r instanceof nf&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,s,o)=>a&&lH(s,r.filters[o])),!0):!1})(n,e):void vn(19439)}function cH(n){return n instanceof pa?(function(t){return`${t.field.canonicalString()} ${t.op} ${Bv(t.value)}`})(n):n instanceof nf?(function(t){return t.op.toString()+" {"+t.getFilters().map(cH).join(" ,")+"}"})(n):"Filter"}class _ue extends pa{constructor(e,t,i){super(e,t,i),this.key=cn.fromName(i.referenceValue)}matches(e){const t=cn.comparator(e.key,this.key);return this.matchesComparison(t)}}class xue extends pa{constructor(e,t){super(e,"in",t),this.keys=uH("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Sue extends pa{constructor(e,t){super(e,"not-in",t),this.keys=uH("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function uH(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>cn.fromName(i.referenceValue)))}class wue extends pa{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cD(t)&&rx(t.arrayValue,this.value)}}class Eue extends pa{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&rx(this.value.arrayValue,t)}}class Tue extends pa{constructor(e,t){super(e,"not-in",t)}matches(e){if(rx(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!rx(this.value.arrayValue,t)}}class Aue extends pa{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cD(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>rx(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mue{constructor(e,t=null,i=[],r=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=s,this.endAt=o,this.Te=null}}function lF(n,e=null,t=[],i=[],r=null,a=null,s=null){return new Mue(n,e,t,i,r,a,s)}function uD(n){const e=Rn(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>HN(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),SM(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Bv(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Bv(i))).join(",")),e.Te=t}return e.Te}function fD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!yue(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!lH(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!oF(n.startAt,e.startAt)&&oF(n.endAt,e.endAt)}function GN(n){return cn.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,t=null,i=[],r=[],a=null,s="F",o=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Cue(n,e,t,i,r,a,s,o){return new EM(n,e,t,i,r,a,s,o)}function hD(n){return new EM(n)}function cF(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Iue(n){return cn.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Rue(n){return n.collectionGroup!==null}function A_(n){const e=Rn(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new ga(ns.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((f=>{f.isInequality()&&(o=o.add(f.field))}))})),o})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new wT(a,i))})),t.has(ns.keyField().canonicalString())||e.Ie.push(new wT(ns.keyField(),i))}return e.Ie}function qu(n){const e=Rn(n);return e.Ee||(e.Ee=Pue(e,A_(n))),e.Ee}function Pue(n,e){if(n.limitType==="F")return lF(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new wT(r.field,a)}));const t=n.endAt?new ST(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new ST(n.startAt.position,n.startAt.inclusive):null;return lF(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function WN(n,e,t){return new EM(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function TM(n,e){return fD(qu(n),qu(e))&&n.limitType===e.limitType}function fH(n){return`${uD(qu(n))}|lt:${n.limitType}`}function rv(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>cH(r))).join(", ")}]`),SM(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>Bv(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>Bv(r))).join(",")),`Target(${i})`})(qu(n))}; limitType=${n.limitType})`}function AM(n,e){return e.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):cn.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,r){for(const a of A_(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(s,o,c){const f=sF(s,o,c);return s.inclusive?f<=0:f<0})(i.startAt,A_(i),r)||i.endAt&&!(function(s,o,c){const f=sF(s,o,c);return s.inclusive?f>=0:f>0})(i.endAt,A_(i),r))})(n,e)}function Nue(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function hH(n){return(e,t)=>{let i=!1;for(const r of A_(n)){const a=Oue(r,e,t);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function Oue(n,e,t){const i=n.field.isKeyField()?cn.comparator(e.key,t.key):(function(a,s,o){const c=s.data.field(a),f=o.data.field(a);return c!==null&&f!==null?zv(c,f):vn(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return vn(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){xp(this.inner,((t,i)=>{for(const[r,a]of i)e(r,a)}))}isEmpty(){return K9(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Due=new wr(cn.comparator);function mh(){return Due}const dH=new wr(cn.comparator);function l_(...n){let e=dH;for(const t of n)e=e.insert(t.key,t);return e}function pH(n){let e=dH;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Fm(){return M_()}function mH(){return M_()}function M_(){return new Cg((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Lue=new wr(cn.comparator),kue=new ga(cn.comparator);function ti(...n){let e=kue;for(const t of n)e=e.add(t);return e}const Uue=new ga(ei);function Fue(){return Uue}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bT(e)?"-0":e}}function gH(n){return{integerValue:""+n}}function zue(n,e){return cue(e)?gH(e):dD(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(){this._=void 0}}function Bue(n,e,t){return n instanceof ET?(function(r,a){const s={fields:{[J9]:{stringValue:Q9},[tH]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&lD(a)&&(a=wM(a)),a&&(s.fields[eH]=a),{mapValue:s}})(t,e):n instanceof ax?yH(n,e):n instanceof sx?bH(n,e):(function(r,a){const s=vH(r,a),o=uF(s)+uF(r.Ae);return jN(s)&&jN(r.Ae)?gH(o):dD(r.serializer,o)})(n,e)}function Vue(n,e,t){return n instanceof ax?yH(n,e):n instanceof sx?bH(n,e):t}function vH(n,e){return n instanceof TT?(function(i){return jN(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class ET extends MM{}class ax extends MM{constructor(e){super(),this.elements=e}}function yH(n,e){const t=_H(e);for(const i of n.elements)t.some((r=>tf(r,i)))||t.push(i);return{arrayValue:{values:t}}}class sx extends MM{constructor(e){super(),this.elements=e}}function bH(n,e){let t=_H(e);for(const i of n.elements)t=t.filter((r=>!tf(r,i)));return{arrayValue:{values:t}}}class TT extends MM{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function uF(n){return Hr(n.integerValue||n.doubleValue)}function _H(n){return cD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function jue(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof ax&&r instanceof ax||i instanceof sx&&r instanceof sx?Fv(i.elements,r.elements,tf):i instanceof TT&&r instanceof TT?tf(i.Ae,r.Ae):i instanceof ET&&r instanceof ET})(n.transform,e.transform)}class Hue{constructor(e,t){this.version=e,this.transformResults=t}}class zc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zc}static exists(e){return new zc(void 0,e)}static updateTime(e){return new zc(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function iE(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class CM{}function xH(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new pD(n.key,zc.none()):new Bx(n.key,n.data,zc.none());{const t=n.data,i=ko.empty();let r=new ga(ns.comparator);for(let a of e.fields)if(!r.has(a)){let s=t.field(a);s===null&&a.length>1&&(a=a.popLast(),s=t.field(a)),s===null?i.delete(a):i.set(a,s),r=r.add(a)}return new Sp(n.key,i,new sl(r.toArray()),zc.none())}}function Gue(n,e,t){n instanceof Bx?(function(r,a,s){const o=r.value.clone(),c=hF(r.fieldTransforms,a,s.transformResults);o.setAll(c),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()})(n,e,t):n instanceof Sp?(function(r,a,s){if(!iE(r.precondition,a))return void a.convertToUnknownDocument(s.version);const o=hF(r.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(SH(r)),c.setAll(o),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(r,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function C_(n,e,t,i){return n instanceof Bx?(function(a,s,o,c){if(!iE(a.precondition,s))return o;const f=a.value.clone(),h=dF(a.fieldTransforms,c,s);return f.setAll(h),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof Sp?(function(a,s,o,c){if(!iE(a.precondition,s))return o;const f=dF(a.fieldTransforms,c,s),h=s.data;return h.setAll(SH(a)),h.setAll(f),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((p=>p.field)))})(n,e,t,i):(function(a,s,o){return iE(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o})(n,e,t)}function Wue(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),a=vH(i.transform,r||null);a!=null&&(t===null&&(t=ko.empty()),t.set(i.field,a))}return t||null}function fF(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Fv(i,r,((a,s)=>jue(a,s)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Bx extends CM{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Sp extends CM{constructor(e,t,i,r,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function SH(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function hF(n,e,t){const i=new Map;wi(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let r=0;r<t.length;r++){const a=n[r],s=a.transform,o=e.data.field(a.field);i.set(a.field,Vue(s,o,t[r]))}return i}function dF(n,e,t){const i=new Map;for(const r of n){const a=r.transform,s=t.data.field(r.field);i.set(r.field,Bue(a,s,e))}return i}class pD extends CM{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class que extends CM{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ue{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&Gue(a,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=C_(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=C_(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=mH();return this.mutations.forEach((r=>{const a=e.get(r.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=t.has(r.key)?null:o;const c=xH(s,o);c!==null&&i.set(r.key,c),s.isValidDocument()||s.convertToNoDocument(An.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ti())}isEqual(e){return this.batchId===e.batchId&&Fv(this.mutations,e.mutations,((t,i)=>fF(t,i)))&&Fv(this.baseMutations,e.baseMutations,((t,i)=>fF(t,i)))}}class mD{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){wi(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return Lue})();const a=e.mutations;for(let s=0;s<a.length;s++)r=r.insert(a[s].key,i[s].version);return new mD(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xue{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yue{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var na,si;function Kue(n){switch(n){case bt.OK:return vn(64938);case bt.CANCELLED:case bt.UNKNOWN:case bt.DEADLINE_EXCEEDED:case bt.RESOURCE_EXHAUSTED:case bt.INTERNAL:case bt.UNAVAILABLE:case bt.UNAUTHENTICATED:return!1;case bt.INVALID_ARGUMENT:case bt.NOT_FOUND:case bt.ALREADY_EXISTS:case bt.PERMISSION_DENIED:case bt.FAILED_PRECONDITION:case bt.ABORTED:case bt.OUT_OF_RANGE:case bt.UNIMPLEMENTED:case bt.DATA_LOSS:return!0;default:return vn(15467,{code:n})}}function wH(n){if(n===void 0)return ph("GRPC error has no .code"),bt.UNKNOWN;switch(n){case na.OK:return bt.OK;case na.CANCELLED:return bt.CANCELLED;case na.UNKNOWN:return bt.UNKNOWN;case na.DEADLINE_EXCEEDED:return bt.DEADLINE_EXCEEDED;case na.RESOURCE_EXHAUSTED:return bt.RESOURCE_EXHAUSTED;case na.INTERNAL:return bt.INTERNAL;case na.UNAVAILABLE:return bt.UNAVAILABLE;case na.UNAUTHENTICATED:return bt.UNAUTHENTICATED;case na.INVALID_ARGUMENT:return bt.INVALID_ARGUMENT;case na.NOT_FOUND:return bt.NOT_FOUND;case na.ALREADY_EXISTS:return bt.ALREADY_EXISTS;case na.PERMISSION_DENIED:return bt.PERMISSION_DENIED;case na.FAILED_PRECONDITION:return bt.FAILED_PRECONDITION;case na.ABORTED:return bt.ABORTED;case na.OUT_OF_RANGE:return bt.OUT_OF_RANGE;case na.UNIMPLEMENTED:return bt.UNIMPLEMENTED;case na.DATA_LOSS:return bt.DATA_LOSS;default:return vn(39323,{code:n})}}(si=na||(na={}))[si.OK=0]="OK",si[si.CANCELLED=1]="CANCELLED",si[si.UNKNOWN=2]="UNKNOWN",si[si.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",si[si.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",si[si.NOT_FOUND=5]="NOT_FOUND",si[si.ALREADY_EXISTS=6]="ALREADY_EXISTS",si[si.PERMISSION_DENIED=7]="PERMISSION_DENIED",si[si.UNAUTHENTICATED=16]="UNAUTHENTICATED",si[si.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",si[si.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",si[si.ABORTED=10]="ABORTED",si[si.OUT_OF_RANGE=11]="OUT_OF_RANGE",si[si.UNIMPLEMENTED=12]="UNIMPLEMENTED",si[si.INTERNAL=13]="INTERNAL",si[si.UNAVAILABLE=14]="UNAVAILABLE",si[si.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zue(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Que=new Qd([4294967295,4294967295],0);function pF(n){const e=Zue().encode(n),t=new z9;return t.update(e),new Uint8Array(t.digest())}function mF(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Qd([t,i],0),new Qd([r,a],0)]}class gD{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new c_(`Invalid padding: ${t}`);if(i<0)throw new c_(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new c_(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new c_(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Qd.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(Qd.fromNumber(i)));return r.compare(Que)===1&&(r=new Qd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=pF(e),[i,r]=mF(t);for(let a=0;a<this.hashCount;a++){const s=this.ye(i,r,a);if(!this.we(s))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new gD(a,r,t);return i.forEach((o=>s.insert(o))),s}insert(e){if(this.ge===0)return;const t=pF(e),[i,r]=mF(t);for(let a=0;a<this.hashCount;a++){const s=this.ye(i,r,a);this.be(s)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class c_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,t,i,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Vx.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new IM(An.min(),r,new wr(ei),mh(),ti())}}class Vx{constructor(e,t,i,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Vx(i,t,ti(),ti(),ti())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=r}}class EH{constructor(e,t){this.targetId=e,this.Ce=t}}class TH{constructor(e,t,i=ss.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class gF{constructor(){this.ve=0,this.Fe=vF(),this.Me=ss.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ti(),t=ti(),i=ti();return this.Fe.forEach(((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:vn(38017,{changeType:a})}})),new Vx(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=vF()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,wi(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Jue{constructor(e){this.Ge=e,this.ze=new Map,this.je=mh(),this.He=Tw(),this.Je=Tw(),this.Ze=new wr(ei)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:vn(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const a=r.target;if(GN(a))if(i===0){const s=new cn(a.path);this.et(t,s,Ms.newNoDocument(s,An.min()))}else wi(i===1,20013,{expectedCount:i});else{const s=this._t(t);if(s!==i){const o=this.ut(e),c=o?this.ct(o,e,s):1;if(c!==0){this.it(t);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=t;let s,o;try{s=up(i).toUint8Array()}catch(c){if(c instanceof Z9)return Uv("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new gD(s,r,a)}catch(c){return Uv(c instanceof c_?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((a=>{const s=this.Ge.ht(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(t,a,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((a,s)=>{const o=this.ot(s);if(o){if(a.current&&GN(o.target)){const c=new cn(o.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,Ms.newNoDocument(c,e))}a.Be&&(t.set(s,a.ke()),a.Ke())}}));let i=ti();this.Je.forEach(((a,s)=>{let o=!0;s.forEachWhile((c=>{const f=this.ot(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(i=i.add(a))})),this.je.forEach(((a,s)=>s.setReadTime(e)));const r=new IM(e,t,this.Ze,this.je,i);return this.je=mh(),this.He=Tw(),this.Je=Tw(),this.Ze=new wr(ei),r}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new gF,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new ga(ei),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new ga(ei),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ht("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gF),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Tw(){return new wr(cn.comparator)}function vF(){return new wr(cn.comparator)}const efe={asc:"ASCENDING",desc:"DESCENDING"},tfe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nfe={and:"AND",or:"OR"};class ife{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qN(n,e){return n.useProto3Json||SM(e)?e:{value:e}}function AT(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AH(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function rfe(n,e){return AT(n,e.toTimestamp())}function $u(n){return wi(!!n,49232),An.fromTimestamp((function(t){const i=cp(t);return new nr(i.seconds,i.nanos)})(n))}function vD(n,e){return $N(n,e).canonicalString()}function $N(n,e){const t=(function(r){return new tr(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function MH(n){const e=tr.fromString(n);return wi(NH(e),10190,{key:e.toString()}),e}function XN(n,e){return vD(n.databaseId,e.path)}function SR(n,e){const t=MH(e);if(t.get(1)!==n.databaseId.projectId)throw new Jt(bt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Jt(bt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new cn(IH(t))}function CH(n,e){return vD(n.databaseId,e)}function afe(n){const e=MH(n);return e.length===4?tr.emptyPath():IH(e)}function YN(n){return new tr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function IH(n){return wi(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function yF(n,e,t){return{name:XN(n,e),fields:t.value.mapValue.fields}}function sfe(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:vn(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=(function(f,h){return f.useProto3Json?(wi(h===void 0||typeof h=="string",58123),ss.fromBase64String(h||"")):(wi(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ss.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&(function(f){const h=f.code===void 0?bt.UNKNOWN:wH(f.code);return new Jt(h,f.message||"")})(s);t=new TH(i,r,a,o||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=SR(n,i.document.name),a=$u(i.document.updateTime),s=i.document.createTime?$u(i.document.createTime):An.min(),o=new ko({mapValue:{fields:i.document.fields}}),c=Ms.newFoundDocument(r,a,s,o),f=i.targetIds||[],h=i.removedTargetIds||[];t=new rE(f,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=SR(n,i.document),a=i.readTime?$u(i.readTime):An.min(),s=Ms.newNoDocument(r,a),o=i.removedTargetIds||[];t=new rE([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=SR(n,i.document),a=i.removedTargetIds||[];t=new rE([],a,r,null)}else{if(!("filter"in e))return vn(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,s=new Yue(r,a),o=i.targetId;t=new EH(o,s)}}return t}function ofe(n,e){let t;if(e instanceof Bx)t={update:yF(n,e.key,e.value)};else if(e instanceof pD)t={delete:XN(n,e.key)};else if(e instanceof Sp)t={update:yF(n,e.key,e.data),updateMask:gfe(e.fieldMask)};else{if(!(e instanceof que))return vn(16599,{dt:e.type});t={verify:XN(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,s){const o=s.transform;if(o instanceof ET)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof ax)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof sx)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof TT)return{fieldPath:s.field.canonicalString(),increment:o.Ae};throw vn(20930,{transform:s.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:rfe(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:vn(27497)})(n,e.precondition)),t}function lfe(n,e){return n&&n.length>0?(wi(e!==void 0,14353),n.map((t=>(function(r,a){let s=r.updateTime?$u(r.updateTime):$u(a);return s.isEqual(An.min())&&(s=$u(a)),new Hue(s,r.transformResults||[])})(t,e)))):[]}function cfe(n,e){return{documents:[CH(n,e.path)]}}function ufe(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=CH(n,r);const a=(function(f){if(f.length!==0)return PH(nf.create(f,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const s=(function(f){if(f.length!==0)return f.map((h=>(function(v){return{field:av(v.field),direction:dfe(v.dir)}})(h)))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=qN(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:r}}function ffe(n){let e=afe(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){wi(i===1,65062);const h=t.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let a=[];t.where&&(a=(function(p){const v=RH(p);return v instanceof nf&&oH(v)?v.getFilters():[v]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map((v=>(function(_){return new wT(sv(_.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(v)))})(t.orderBy));let o=null;t.limit&&(o=(function(p){let v;return v=typeof p=="object"?p.value:p,SM(v)?null:v})(t.limit));let c=null;t.startAt&&(c=(function(p){const v=!!p.before,y=p.values||[];return new ST(y,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(p){const v=!p.before,y=p.values||[];return new ST(y,v)})(t.endAt)),Cue(e,r,s,a,o,"F",c,f)}function hfe(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vn(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function RH(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=sv(t.unaryFilter.field);return pa.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=sv(t.unaryFilter.field);return pa.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=sv(t.unaryFilter.field);return pa.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=sv(t.unaryFilter.field);return pa.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return vn(61313);default:return vn(60726)}})(n):n.fieldFilter!==void 0?(function(t){return pa.create(sv(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return vn(58110);default:return vn(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return nf.create(t.compositeFilter.filters.map((i=>RH(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return vn(1026)}})(t.compositeFilter.op))})(n):vn(30097,{filter:n})}function dfe(n){return efe[n]}function pfe(n){return tfe[n]}function mfe(n){return nfe[n]}function av(n){return{fieldPath:n.canonicalString()}}function sv(n){return ns.fromServerFormat(n.fieldPath)}function PH(n){return n instanceof pa?(function(t){if(t.op==="=="){if(aF(t.value))return{unaryFilter:{field:av(t.field),op:"IS_NAN"}};if(rF(t.value))return{unaryFilter:{field:av(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(aF(t.value))return{unaryFilter:{field:av(t.field),op:"IS_NOT_NAN"}};if(rF(t.value))return{unaryFilter:{field:av(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:av(t.field),op:pfe(t.op),value:t.value}}})(n):n instanceof nf?(function(t){const i=t.getFilters().map((r=>PH(r)));return i.length===1?i[0]:{compositeFilter:{op:mfe(t.op),filters:i}}})(n):vn(54877,{filter:n})}function gfe(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function NH(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function OH(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,t,i,r,a=An.min(),s=An.min(),o=ss.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new $d(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $d(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $d(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $d(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vfe{constructor(e){this.yt=e}}function yfe(n){const e=ffe({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?WN(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bfe{constructor(){this.Sn=new _fe}addToCollectionParentIndex(e,t){return this.Sn.add(t),dt.resolve()}getCollectionParents(e,t){return dt.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return dt.resolve()}deleteFieldIndex(e,t){return dt.resolve()}deleteAllFieldIndexes(e){return dt.resolve()}createTargetIndexes(e,t){return dt.resolve()}getDocumentsMatchingTarget(e,t){return dt.resolve(null)}getIndexType(e,t){return dt.resolve(0)}getFieldIndexes(e,t){return dt.resolve([])}getNextCollectionGroupToUpdate(e){return dt.resolve(null)}getMinOffset(e,t){return dt.resolve(lp.min())}getMinOffsetFromCollectionGroup(e,t){return dt.resolve(lp.min())}updateCollectionGroup(e,t,i){return dt.resolve()}updateIndexEntries(e,t){return dt.resolve()}}class _fe{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new ga(tr.comparator),a=!r.has(i);return this.index[t]=r.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new ga(tr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},DH=41943040;class Oo{static withCacheSize(e){return new Oo(e,Oo.DEFAULT_COLLECTION_PERCENTILE,Oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oo.DEFAULT_COLLECTION_PERCENTILE=10,Oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oo.DEFAULT=new Oo(DH,Oo.DEFAULT_COLLECTION_PERCENTILE,Oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oo.DISABLED=new Oo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Vv(0)}static ar(){return new Vv(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F="LruGarbageCollector",xfe=1048576;function xF([n,e],[t,i]){const r=ei(n,t);return r===0?ei(e,i):r}class Sfe{constructor(e){this.Pr=e,this.buffer=new ga(xF),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();xF(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class wfe{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ht(_F,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ay(t)?Ht(_F,"Ignoring IndexedDB error during garbage collection: ",t):await ry(t)}await this.Ar(3e5)}))}}class Efe{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return dt.resolve(xM.ce);const i=new Sfe(t);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ht("LruGarbageCollector","Garbage collection skipped; disabled"),dt.resolve(bF)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Ht("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bF):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,r,a,s,o,c,f;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Ht("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,s=Date.now(),this.nthSequenceNumber(e,r)))).next((p=>(i=p,o=Date.now(),this.removeTargets(e,i,t)))).next((p=>(a=p,c=Date.now(),this.removeOrphanedDocuments(e,i)))).next((p=>(f=Date.now(),iv()<=Jn.DEBUG&&Ht("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${r} in `+(o-s)+`ms
	Removed ${a} targets in `+(c-o)+`ms
	Removed ${p} documents in `+(f-c)+`ms
Total Duration: ${f-h}ms`),dt.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:p}))))}}function Tfe(n,e){return new Efe(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Afe{constructor(){this.changes=new Cg((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ms.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?dt.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mfe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cfe{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&C_(i.mutation,r,sl.empty(),nr.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,ti()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=ti()){const r=Fm();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((a=>{let s=l_();return a.forEach(((o,c)=>{s=s.insert(o,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,t){const i=Fm();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,ti())))}populateOverlays(e,t,i){const r=[];return i.forEach((a=>{t.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(e,r).next((a=>{a.forEach(((s,o)=>{t.set(s,o)}))}))}computeViews(e,t,i,r){let a=mh();const s=M_(),o=(function(){return M_()})();return t.forEach(((c,f)=>{const h=i.get(f.key);r.has(f.key)&&(h===void 0||h.mutation instanceof Sp)?a=a.insert(f.key,f):h!==void 0?(s.set(f.key,h.mutation.getFieldMask()),C_(h.mutation,f,h.mutation.getFieldMask(),nr.now())):s.set(f.key,sl.empty())})),this.recalculateAndSaveOverlays(e,a).next((c=>(c.forEach(((f,h)=>s.set(f,h))),t.forEach(((f,h)=>o.set(f,new Mfe(h,s.get(f)??null)))),o)))}recalculateAndSaveOverlays(e,t){const i=M_();let r=new wr(((s,o)=>s-o)),a=ti();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((s=>{for(const o of s)o.keys().forEach((c=>{const f=t.get(c);if(f===null)return;let h=i.get(c)||sl.empty();h=o.applyToLocalView(f,h),i.set(c,h);const p=(r.get(o.batchId)||ti()).add(c);r=r.insert(o.batchId,p)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),f=c.key,h=c.value,p=mH();h.forEach((v=>{if(!a.has(v)){const y=xH(t.get(v),i.get(v));y!==null&&p.set(v,y),a=a.add(v)}})),s.push(this.documentOverlayCache.saveOverlays(e,f,p))}return dt.waitFor(s)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return Iue(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Rue(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((a=>{const s=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-a.size):dt.resolve(Fm());let o=tx,c=a;return s.next((f=>dt.forEach(f,((h,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),a.get(h)?dt.resolve():this.remoteDocumentCache.getEntry(e,h).next((v=>{c=c.insert(h,v)}))))).next((()=>this.populateOverlays(e,f,a))).next((()=>this.computeViews(e,c,f,ti()))).next((h=>({batchId:o,changes:pH(h)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new cn(t)).next((i=>{let r=l_();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const a=t.collectionGroup;let s=l_();return this.indexManager.getCollectionParents(e,a).next((o=>dt.forEach(o,(c=>{const f=(function(p,v){return new EM(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next((h=>{h.forEach(((p,v)=>{s=s.insert(p,v)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,r)))).next((s=>{a.forEach(((c,f)=>{const h=f.getKey();s.get(h)===null&&(s=s.insert(h,Ms.newInvalidDocument(h)))}));let o=l_();return s.forEach(((c,f)=>{const h=a.get(c);h!==void 0&&C_(h.mutation,f,sl.empty(),nr.now()),AM(t,f)&&(o=o.insert(c,f))})),o}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ife{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return dt.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:$u(r.createTime)}})(t)),dt.resolve()}getNamedQuery(e,t){return dt.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(r){return{name:r.name,query:yfe(r.bundledQuery),readTime:$u(r.readTime)}})(t)),dt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rfe{constructor(){this.overlays=new wr(cn.comparator),this.Lr=new Map}getOverlay(e,t){return dt.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Fm();return dt.forEach(t,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,a)=>{this.bt(e,t,a)})),dt.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Lr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(i)),dt.resolve()}getOverlaysForCollection(e,t,i){const r=Fm(),a=t.length+1,s=new cn(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const c=o.getNext().value,f=c.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===a&&c.largestBatchId>i&&r.set(c.getKey(),c)}return dt.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let a=new wr(((f,h)=>f-h));const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let h=a.get(f.largestBatchId);h===null&&(h=Fm(),a=a.insert(f.largestBatchId,h)),h.set(f.getKey(),f)}}const o=Fm(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((f,h)=>o.set(f,h))),!(o.size()>=r)););return dt.resolve(o)}bt(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const s=this.Lr.get(r.largestBatchId).delete(i.key);this.Lr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new Xue(t,i));let a=this.Lr.get(t);a===void 0&&(a=ti(),this.Lr.set(t,a)),this.Lr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pfe{constructor(){this.sessionToken=ss.EMPTY_BYTE_STRING}getSessionToken(e){return dt.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,dt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(){this.kr=new ga(Ia.Kr),this.qr=new ga(Ia.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Ia(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Ia(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new cn(new tr([])),i=new Ia(t,e),r=new Ia(t,e+1),a=[];return this.qr.forEachInRange([i,r],(s=>{this.Wr(s),a.push(s.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new cn(new tr([])),i=new Ia(t,e),r=new Ia(t,e+1);let a=ti();return this.qr.forEachInRange([i,r],(s=>{a=a.add(s.key)})),a}containsKey(e){const t=new Ia(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ia{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return cn.comparator(e.key,t.key)||ei(e.Hr,t.Hr)}static Ur(e,t){return ei(e.Hr,t.Hr)||cn.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nfe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new ga(Ia.Kr)}checkEmpty(e){return dt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new $ue(a,t,i,r);this.mutationQueue.push(s);for(const o of r)this.Jr=this.Jr.add(new Ia(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return dt.resolve(s)}lookupMutationBatch(e,t){return dt.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.Xr(i),a=r<0?0:r;return dt.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return dt.resolve(this.mutationQueue.length===0?oD:this.Yn-1)}getAllMutationBatches(e){return dt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ia(t,0),r=new Ia(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([i,r],(s=>{const o=this.Zr(s.Hr);a.push(o)})),dt.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ga(ei);return t.forEach((r=>{const a=new Ia(r,0),s=new Ia(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,s],(o=>{i=i.add(o.Hr)}))})),dt.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let a=i;cn.isDocumentKey(a)||(a=a.child(""));const s=new Ia(new cn(a),0);let o=new ga(ei);return this.Jr.forEachWhile((c=>{const f=c.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(o=o.add(c.Hr)),!0)}),s),dt.resolve(this.Yr(o))}Yr(e){const t=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){wi(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return dt.forEach(t.mutations,(r=>{const a=new Ia(r.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Ia(t,0),r=this.Jr.firstAfterOrEqual(i);return dt.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,dt.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ofe{constructor(e){this.ti=e,this.docs=(function(){return new wr(cn.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),a=r?r.size:0,s=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return dt.resolve(i?i.document.mutableCopy():Ms.newInvalidDocument(t))}getEntries(e,t){let i=mh();return t.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():Ms.newInvalidDocument(r))})),dt.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let a=mh();const s=t.path,o=new cn(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:f,value:{document:h}}=c.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||aue(rue(h),i)<=0||(r.has(h.key)||AM(t,h))&&(a=a.insert(h.key,h.mutableCopy()))}return dt.resolve(a)}getAllFromCollectionGroup(e,t,i,r){vn(9500)}ni(e,t){return dt.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new Dfe(this)}getSize(e){return dt.resolve(this.size)}}class Dfe extends Afe{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(i)})),dt.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lfe{constructor(e){this.persistence=e,this.ri=new Cg((t=>uD(t)),fD),this.lastRemoteSnapshotVersion=An.min(),this.highestTargetId=0,this.ii=0,this.si=new yD,this.targetCount=0,this.oi=Vv._r()}forEachTarget(e,t){return this.ri.forEach(((i,r)=>t(r))),dt.resolve()}getLastRemoteSnapshotVersion(e){return dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return dt.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),dt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),dt.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Vv(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,dt.resolve()}updateTargetData(e,t){return this.lr(t),dt.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,dt.resolve()}removeTargets(e,t,i){let r=0;const a=[];return this.ri.forEach(((s,o)=>{o.sequenceNumber<=t&&i.get(o.targetId)===null&&(this.ri.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),dt.waitFor(a).next((()=>r))}getTargetCount(e){return dt.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return dt.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),dt.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((s=>{a.push(r.markPotentiallyOrphaned(e,s))})),dt.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),dt.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return dt.resolve(i)}containsKey(e,t){return dt.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LH{constructor(e,t){this._i={},this.overlays={},this.ai=new xM(0),this.ui=!1,this.ui=!0,this.ci=new Pfe,this.referenceDelegate=e(this),this.li=new Lfe(this),this.indexManager=new bfe,this.remoteDocumentCache=(function(r){return new Ofe(r)})((i=>this.referenceDelegate.hi(i))),this.serializer=new vfe(t),this.Pi=new Ife(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Rfe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new Nfe(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){Ht("MemoryPersistence","Starting transaction:",e);const r=new kfe(this.ai.next());return this.referenceDelegate.Ti(),i(r).next((a=>this.referenceDelegate.Ii(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ei(e,t){return dt.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class kfe extends oue{constructor(e){super(),this.currentSequenceNumber=e}}class bD{constructor(e){this.persistence=e,this.Ri=new yD,this.Ai=null}static Vi(e){return new bD(e)}get di(){if(this.Ai)return this.Ai;throw vn(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),dt.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),dt.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),dt.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((r=>this.di.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((a=>this.di.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dt.forEach(this.di,(i=>{const r=cn.fromPath(i);return this.mi(e,r).next((a=>{a||t.removeEntry(r,An.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return dt.or([()=>dt.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class MT{constructor(e,t){this.persistence=e,this.fi=new Cg((i=>uue(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=Tfe(this,t)}static Vi(e,t){return new MT(e,t)}Ti(){}Ii(e){return dt.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return dt.forEach(this.fi,((i,r)=>this.wr(e,i,r).next((a=>a?dt.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ni(e,(s=>this.wr(e,s,t).next((o=>{o||(i++,a.removeEntry(s,An.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),dt.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),dt.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),dt.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),dt.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=tE(e.data.value)),t}wr(e,t,i){return dt.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.fi.get(t);return dt.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=r}static Es(e,t){let i=ti(),r=ti();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new _D(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ufe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ffe{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Tle()?8:lue(Ps())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const a={result:null};return this.gs(e,t).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.ps(e,t,r,i).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new Ufe;return this.ys(e,t,s).next((o=>{if(a.result=o,this.As)return this.ws(e,t,s,o.size)}))})).next((()=>a.result))}ws(e,t,i,r){return i.documentReadCount<this.Vs?(iv()<=Jn.DEBUG&&Ht("QueryEngine","SDK will not create cache indexes for query:",rv(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),dt.resolve()):(iv()<=Jn.DEBUG&&Ht("QueryEngine","Query:",rv(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ds*r?(iv()<=Jn.DEBUG&&Ht("QueryEngine","The SDK decides to create cache indexes for query:",rv(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qu(t))):dt.resolve())}gs(e,t){if(cF(t))return dt.resolve(null);let i=qu(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=WN(t,null,"F"),i=qu(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const s=ti(...a);return this.fs.getDocuments(e,s).next((o=>this.indexManager.getMinOffset(e,i).next((c=>{const f=this.bs(t,o);return this.Ss(t,f,s,c.readTime)?this.gs(e,WN(t,null,"F")):this.Ds(e,f,t,c)}))))})))))}ps(e,t,i,r){return cF(t)||r.isEqual(An.min())?dt.resolve(null):this.fs.getDocuments(e,i).next((a=>{const s=this.bs(t,a);return this.Ss(t,s,i,r)?dt.resolve(null):(iv()<=Jn.DEBUG&&Ht("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),rv(t)),this.Ds(e,s,t,iue(r,tx)).next((o=>o)))}))}bs(e,t){let i=new ga(hH(e));return t.forEach(((r,a)=>{AM(e,a)&&(i=i.add(a))})),i}Ss(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}ys(e,t,i){return iv()<=Jn.DEBUG&&Ht("QueryEngine","Using full collection scan to execute query:",rv(t)),this.fs.getDocumentsMatchingQuery(e,t,lp.min(),i)}Ds(e,t,i,r){return this.fs.getDocumentsMatchingQuery(e,i,r).next((a=>(t.forEach((s=>{a=a.insert(s.key,s)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD="LocalStore",zfe=3e8;class Bfe{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new wr(ei),this.Fs=new Cg((a=>uD(a)),fD),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Cfe(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function Vfe(n,e,t,i){return new Bfe(n,e,t,i)}async function kH(n,e){const t=Rn(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const s=[],o=[];let c=ti();for(const f of r){s.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}for(const f of a){o.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(i,c).next((f=>({Ns:f,removedBatchIds:s,addedBatchIds:o})))}))}))}function jfe(n,e){const t=Rn(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(o,c,f,h){const p=f.batch,v=p.keys();let y=dt.resolve();return v.forEach((_=>{y=y.next((()=>h.getEntry(c,_))).next((E=>{const S=f.docVersions.get(_);wi(S!==null,48541),E.version.compareTo(S)<0&&(p.applyToRemoteDocument(E,f),E.isValidDocument()&&(E.setReadTime(f.commitVersion),h.addEntry(E)))}))})),y.next((()=>o.mutationQueue.removeMutationBatch(c,p)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(o){let c=ti();for(let f=0;f<o.mutationResults.length;++f)o.mutationResults[f].transformResults.length>0&&(c=c.add(o.batch.mutations[f].key));return c})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function UH(n){const e=Rn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function Hfe(n,e){const t=Rn(n),i=e.snapshotVersion;let r=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=t.xs.newChangeBuffer({trackRemovals:!0});r=t.vs;const o=[];e.targetChanges.forEach(((h,p)=>{const v=r.get(p);if(!v)return;o.push(t.li.removeMatchingKeys(a,h.removedDocuments,p).next((()=>t.li.addMatchingKeys(a,h.addedDocuments,p))));let y=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ss.EMPTY_BYTE_STRING,An.min()).withLastLimboFreeSnapshotVersion(An.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,i)),r=r.insert(p,y),(function(E,S,w){return E.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=zfe?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0})(v,y,h)&&o.push(t.li.updateTargetData(a,y))}));let c=mh(),f=ti();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(a,h))})),o.push(Gfe(a,s,e.documentUpdates).next((h=>{c=h.Bs,f=h.Ls}))),!i.isEqual(An.min())){const h=t.li.getLastRemoteSnapshotVersion(a).next((p=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,i)));o.push(h)}return dt.waitFor(o).next((()=>s.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,c,f))).next((()=>c))})).then((a=>(t.vs=r,a)))}function Gfe(n,e,t){let i=ti(),r=ti();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let s=mh();return t.forEach(((o,c)=>{const f=a.get(o);c.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(o)),c.isNoDocument()&&c.version.isEqual(An.min())?(e.removeEntry(o,c.readTime),s=s.insert(o,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),s=s.insert(o,c)):Ht(xD,"Ignoring outdated watch update for ",o,". Current version:",f.version," Watch version:",c.version)})),{Bs:s,Ls:r}}))}function Wfe(n,e){const t=Rn(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=oD),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function qfe(n,e){const t=Rn(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.li.getTargetData(i,e).next((a=>a?(r=a,dt.resolve(r)):t.li.allocateTargetId(i).next((s=>(r=new $d(e,s,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.vs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function KN(n,e,t){const i=Rn(n),r=i.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!ay(s))throw s;Ht(xD,`Failed to update sequence numbers for target ${e}: ${s}`)}i.vs=i.vs.remove(e),i.Fs.delete(r.target)}function SF(n,e,t){const i=Rn(n);let r=An.min(),a=ti();return i.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,f,h){const p=Rn(c),v=p.Fs.get(h);return v!==void 0?dt.resolve(p.vs.get(v)):p.li.getTargetData(f,h)})(i,s,qu(e)).next((o=>{if(o)return r=o.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(s,o.targetId).next((c=>{a=c}))})).next((()=>i.Cs.getDocumentsMatchingQuery(s,e,t?r:An.min(),t?a:ti()))).next((o=>($fe(i,Nue(e),o),{documents:o,ks:a})))))}function $fe(n,e,t){let i=n.Ms.get(e)||An.min();t.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Ms.set(e,i)}class wF{constructor(){this.activeTargetIds=Fue()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xfe{constructor(){this.vo=new wF,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new wF,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yfe{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF="ConnectivityMonitor";class TF{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ht(EF,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ht(EF,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Aw=null;function ZN(){return Aw===null?Aw=(function(){return 268435456+Math.round(2147483648*Math.random())})():Aw++,"0x"+Aw.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR="RestConnection",Kfe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Zfe{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.$o=this.databaseId.database===_T?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,a){const s=ZN(),o=this.Qo(e,t.toUriEncodedString());Ht(wR,`Sending RPC '${e}' ${s}:`,o,i);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,r,a);const{host:f}=new URL(o),h=_p(f);return this.zo(e,o,c,i,h).then((p=>(Ht(wR,`Received RPC '${e}' ${s}: `,p),p)),(p=>{throw Uv(wR,`RPC '${e}' ${s} failed with error: `,p,"url: ",o,"request:",i),p}))}jo(e,t,i,r,a,s){return this.Wo(e,t,i,r,a)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+iy})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,a)=>e[a]=r)),i&&i.headers.forEach(((r,a)=>e[a]=r))}Qo(e,t){const i=Kfe[e];let r=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qfe{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="WebChannelConnection",$b=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(r){setTimeout((()=>{throw r}),0)}}))};class vv extends Zfe{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!vv.c_){const e=H9();$b(e,j9.STAT_EVENT,(t=>{t.stat===zN.PROXY?Ht(Es,"STAT_EVENT: detected buffering proxy"):t.stat===zN.NOPROXY&&Ht(Es,"STAT_EVENT: detected no buffering proxy")})),vv.c_=!0}}zo(e,t,i,r,a){const s=ZN();return new Promise(((o,c)=>{const f=new B9;f.setWithCredentials(!0),f.listenOnce(V9.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case eE.NO_ERROR:const p=f.getResponseJson();Ht(Es,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case eE.TIMEOUT:Ht(Es,`RPC '${e}' ${s} timed out`),c(new Jt(bt.DEADLINE_EXCEEDED,"Request time out"));break;case eE.HTTP_ERROR:const v=f.getStatus();if(Ht(Es,`RPC '${e}' ${s} failed with status:`,v,"response text:",f.getResponseText()),v>0){let y=f.getResponseJson();Array.isArray(y)&&(y=y[0]);const _=y==null?void 0:y.error;if(_&&_.status&&_.message){const E=(function(w){const I=w.toLowerCase().replace(/_/g,"-");return Object.values(bt).indexOf(I)>=0?I:bt.UNKNOWN})(_.status);c(new Jt(E,_.message))}else c(new Jt(bt.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Jt(bt.UNAVAILABLE,"Connection failed."));break;default:vn(9055,{l_:e,streamId:s,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Ht(Es,`RPC '${e}' ${s} completed.`)}}));const h=JSON.stringify(r);Ht(Es,`RPC '${e}' ${s} sending request:`,r),f.send(t,"POST",h,i,15)}))}T_(e,t,i){const r=ZN(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(o.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Go(o.initMessageHeaders,t,i),o.encodeInitMessageHeaders=!0;const f=a.join("");Ht(Es,`Creating RPC '${e}' stream ${r}: ${f}`,o);const h=s.createWebChannel(f,o);this.I_(h);let p=!1,v=!1;const y=new Qfe({Ho:_=>{v?Ht(Es,`Not sending because RPC '${e}' stream ${r} is closed:`,_):(p||(Ht(Es,`Opening RPC '${e}' stream ${r} transport.`),h.open(),p=!0),Ht(Es,`RPC '${e}' stream ${r} sending:`,_),h.send(_))},Jo:()=>h.close()});return $b(h,o_.EventType.OPEN,(()=>{v||(Ht(Es,`RPC '${e}' stream ${r} transport opened.`),y.i_())})),$b(h,o_.EventType.CLOSE,(()=>{v||(v=!0,Ht(Es,`RPC '${e}' stream ${r} transport closed`),y.o_(),this.E_(h))})),$b(h,o_.EventType.ERROR,(_=>{v||(v=!0,Uv(Es,`RPC '${e}' stream ${r} transport errored. Name:`,_.name,"Message:",_.message),y.o_(new Jt(bt.UNAVAILABLE,"The operation could not be completed")))})),$b(h,o_.EventType.MESSAGE,(_=>{var E;if(!v){const S=_.data[0];wi(!!S,16349);const w=S,I=(w==null?void 0:w.error)||((E=w[0])==null?void 0:E.error);if(I){Ht(Es,`RPC '${e}' stream ${r} received error:`,I);const P=I.status;let D=(function(U){const R=na[U];if(R!==void 0)return wH(R)})(P),z=I.message;D===void 0&&(D=bt.INTERNAL,z="Unknown error status: "+P+" with message "+I.message),v=!0,y.o_(new Jt(D,z)),h.close()}else Ht(Es,`RPC '${e}' stream ${r} received:`,S),y.__(S)}})),vv.u_(),setTimeout((()=>{y.s_()}),0),y}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return G9()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jfe(n){return new vv(n)}function ER(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(n){return new ife(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vv.c_=!1;class FH{constructor(e,t,i=1e3,r=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=r,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&Ht("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF="PersistentStream";class zH{constructor(e,t,i,r,a,s,o,c){this.Ci=e,this.b_=i,this.S_=r,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new FH(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===bt.RESOURCE_EXHAUSTED?(ph(t.toString()),ph("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===bt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new Jt(bt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ht(AF,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Ht(AF,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ehe extends zH{constructor(e,t,i,r,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,s),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=sfe(this.serializer,e),i=(function(a){if(!("targetChange"in a))return An.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?An.min():s.readTime?$u(s.readTime):An.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=YN(this.serializer),t.addTarget=(function(a,s){let o;const c=s.target;if(o=GN(c)?{documents:cfe(a,c)}:{query:ufe(a,c).ft},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=AH(a,s.resumeToken);const f=qN(a,s.expectedCount);f!==null&&(o.expectedCount=f)}else if(s.snapshotVersion.compareTo(An.min())>0){o.readTime=AT(a,s.snapshotVersion.toTimestamp());const f=qN(a,s.expectedCount);f!==null&&(o.expectedCount=f)}return o})(this.serializer,e);const i=hfe(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=YN(this.serializer),t.removeTarget=e,this.K_(t)}}class the extends zH{constructor(e,t,i,r,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,s),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return wi(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,wi(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){wi(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=lfe(e.writeResults,e.commitTime),i=$u(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=YN(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>ofe(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nhe{}class ihe extends nhe{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Jt(bt.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Wo(e,$N(t,i),r,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Jt(bt.UNKNOWN,a.toString())}))}jo(e,t,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.jo(e,$N(t,i),r,s,o,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Jt(bt.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function rhe(n,e,t,i){return new ihe(n,e,t,i)}class ahe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ph(t),this.aa=!1):Ht("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="RemoteStore";class she{constructor(e,t,i,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((s=>{i.enqueueAndForget((async()=>{Ig(this)&&(Ht(ug,"Restarting streams for network reachability change."),await(async function(c){const f=Rn(c);f.Ea.add(4),await jx(f),f.Va.set("Unknown"),f.Ea.delete(4),await PM(f)})(this))}))})),this.Va=new ahe(i,r)}}async function PM(n){if(Ig(n))for(const e of n.Ra)await e(!0)}async function jx(n){for(const e of n.Ra)await e(!1)}function BH(n,e){const t=Rn(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),TD(t)?ED(t):sy(t).O_()&&wD(t,e))}function SD(n,e){const t=Rn(n),i=sy(t);t.Ia.delete(e),i.O_()&&VH(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ig(t)&&t.Va.set("Unknown"))}function wD(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(An.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}sy(n).Z_(e)}function VH(n,e){n.da.$e(e),sy(n).X_(e)}function ED(n){n.da=new Jue({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),sy(n).start(),n.Va.ua()}function TD(n){return Ig(n)&&!sy(n).x_()&&n.Ia.size>0}function Ig(n){return Rn(n).Ea.size===0}function jH(n){n.da=void 0}async function ohe(n){n.Va.set("Online")}async function lhe(n){n.Ia.forEach(((e,t)=>{wD(n,e)}))}async function che(n,e){jH(n),TD(n)?(n.Va.ha(e),ED(n)):n.Va.set("Unknown")}async function uhe(n,e,t){if(n.Va.set("Online"),e instanceof TH&&e.state===2&&e.cause)try{await(async function(r,a){const s=a.cause;for(const o of a.targetIds)r.Ia.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.Ia.delete(o),r.da.removeTarget(o))})(n,e)}catch(i){Ht(ug,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await CT(n,i)}else if(e instanceof rE?n.da.Xe(e):e instanceof EH?n.da.st(e):n.da.tt(e),!t.isEqual(An.min()))try{const i=await UH(n.localStore);t.compareTo(i)>=0&&await(function(a,s){const o=a.da.Tt(s);return o.targetChanges.forEach(((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const h=a.Ia.get(f);h&&a.Ia.set(f,h.withResumeToken(c.resumeToken,s))}})),o.targetMismatches.forEach(((c,f)=>{const h=a.Ia.get(c);if(!h)return;a.Ia.set(c,h.withResumeToken(ss.EMPTY_BYTE_STRING,h.snapshotVersion)),VH(a,c);const p=new $d(h.target,c,f,h.sequenceNumber);wD(a,p)})),a.remoteSyncer.applyRemoteEvent(o)})(n,t)}catch(i){Ht(ug,"Failed to raise snapshot:",i),await CT(n,i)}}async function CT(n,e,t){if(!ay(e))throw e;n.Ea.add(1),await jx(n),n.Va.set("Offline"),t||(t=()=>UH(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ht(ug,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await PM(n)}))}function HH(n,e){return e().catch((t=>CT(n,t,e)))}async function NM(n){const e=Rn(n),t=hp(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:oD;for(;fhe(e);)try{const r=await Wfe(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,hhe(e,r)}catch(r){await CT(e,r)}GH(e)&&WH(e)}function fhe(n){return Ig(n)&&n.Ta.length<10}function hhe(n,e){n.Ta.push(e);const t=hp(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function GH(n){return Ig(n)&&!hp(n).x_()&&n.Ta.length>0}function WH(n){hp(n).start()}async function dhe(n){hp(n).ra()}async function phe(n){const e=hp(n);for(const t of n.Ta)e.ea(t.mutations)}async function mhe(n,e,t){const i=n.Ta.shift(),r=mD.from(i,e,t);await HH(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await NM(n)}async function ghe(n,e){e&&hp(n).Y_&&await(async function(i,r){if((function(s){return Kue(s)&&s!==bt.ABORTED})(r.code)){const a=i.Ta.shift();hp(i).B_(),await HH(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await NM(i)}})(n,e),GH(n)&&WH(n)}async function MF(n,e){const t=Rn(n);t.asyncQueue.verifyOperationInProgress(),Ht(ug,"RemoteStore received new credentials");const i=Ig(t);t.Ea.add(3),await jx(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await PM(t)}async function vhe(n,e){const t=Rn(n);e?(t.Ea.delete(2),await PM(t)):e||(t.Ea.add(2),await jx(t),t.Va.set("Unknown"))}function sy(n){return n.ma||(n.ma=(function(t,i,r){const a=Rn(t);return a.sa(),new ehe(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:ohe.bind(null,n),Yo:lhe.bind(null,n),t_:che.bind(null,n),J_:uhe.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),TD(n)?ED(n):n.Va.set("Unknown")):(await n.ma.stop(),jH(n))}))),n.ma}function hp(n){return n.fa||(n.fa=(function(t,i,r){const a=Rn(t);return a.sa(),new the(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:dhe.bind(null,n),t_:ghe.bind(null,n),ta:phe.bind(null,n),na:mhe.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await NM(n)):(await n.fa.stop(),n.Ta.length>0&&(Ht(ug,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,t,i,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new Xm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,a){const s=Date.now()+i,o=new AD(e,t,s,r,a);return o.start(i),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Jt(bt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function MD(n,e){if(ph("AsyncQueue",`${e}: ${n}`),ay(n))return new Jt(bt.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{static emptySet(e){return new yv(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||cn.comparator(t.key,i.key):(t,i)=>cn.comparator(t.key,i.key),this.keyedMap=l_(),this.sortedSet=new wr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new yv;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(){this.ga=new wr(cn.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):vn(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class jv{constructor(e,t,i,r,a,s,o,c,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,r,a){const s=[];return t.forEach((o=>{s.push({type:0,doc:o})})),new jv(e,t,yv.emptySet(t),s,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&TM(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yhe{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class bhe{constructor(){this.queries=IF(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=Rn(t),a=r.queries;r.queries=IF(),a.forEach(((s,o)=>{for(const c of o.ba)c.onError(i)}))})(this,new Jt(bt.ABORTED,"Firestore shutting down"))}}function IF(){return new Cg((n=>fH(n)),TM)}async function _he(n,e){const t=Rn(n);let i=3;const r=e.query;let a=t.queries.get(r);a?!a.Sa()&&e.Da()&&(i=2):(a=new yhe,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(r,!0);break;case 1:a.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(s){const o=MD(s,`Initialization of query '${rv(e.query)}' failed`);return void e.onError(o)}t.queries.set(r,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&CD(t)}async function xhe(n,e){const t=Rn(n),i=e.query;let r=3;const a=t.queries.get(i);if(a){const s=a.ba.indexOf(e);s>=0&&(a.ba.splice(s,1),a.ba.length===0?r=e.Da()?0:1:!a.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function She(n,e){const t=Rn(n);let i=!1;for(const r of e){const a=r.query,s=t.queries.get(a);if(s){for(const o of s.ba)o.Fa(r)&&(i=!0);s.wa=r}}i&&CD(t)}function whe(n,e,t){const i=Rn(n),r=i.queries.get(e);if(r)for(const a of r.ba)a.onError(t);i.queries.delete(e)}function CD(n){n.Ca.forEach((e=>{e.next()}))}var QN,RF;(RF=QN||(QN={})).Ma="default",RF.Cache="cache";class Ehe{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new jv(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=jv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==QN.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qH{constructor(e){this.key=e}}class $H{constructor(e){this.key=e}}class The{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ti(),this.mutatedKeys=ti(),this.eu=hH(e),this.tu=new yv(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new CF,r=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((h,p)=>{const v=r.get(h),y=AM(this.query,p)?p:null,_=!!v&&this.mutatedKeys.has(v.key),E=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let S=!1;v&&y?v.data.isEqual(y.data)?_!==E&&(i.track({type:3,doc:y}),S=!0):this.su(v,y)||(i.track({type:2,doc:y}),S=!0,(c&&this.eu(y,c)>0||f&&this.eu(y,f)<0)&&(o=!0)):!v&&y?(i.track({type:0,doc:y}),S=!0):v&&!y&&(i.track({type:1,doc:v}),S=!0,(c||f)&&(o=!0)),S&&(y?(s=s.add(y),a=E?a.add(h):a.delete(h)):(s=s.delete(h),a=a.delete(h)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),a=a.delete(h.key),i.track({type:1,doc:h})}return{tu:s,iu:i,Ss:o,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((h,p)=>(function(y,_){const E=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vn(20277,{Vt:S})}};return E(y)-E(_)})(h.type,p.type)||this.eu(h.doc,p.doc))),this.ou(i),r=r??!1;const o=t&&!r?this._u():[],c=this.Ya.size===0&&this.current&&!r?1:0,f=c!==this.Xa;return this.Xa=c,s.length!==0||f?{snapshot:new jv(this.query,e.tu,a,s,e.mutatedKeys,c===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new CF,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ti(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new $H(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new qH(i))})),t}cu(e){this.Za=e.ks,this.Ya=ti();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return jv.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ID="SyncEngine";class Ahe{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Mhe{constructor(e){this.key=e,this.hu=!1}}class Che{constructor(e,t,i,r,a,s){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Cg((o=>fH(o)),TM),this.Iu=new Map,this.Eu=new Set,this.Ru=new wr(cn.comparator),this.Au=new Map,this.Vu=new yD,this.du={},this.mu=new Map,this.fu=Vv.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Ihe(n,e,t=!0){const i=JH(n);let r;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await XH(i,e,t,!0),r}async function Rhe(n,e){const t=JH(n);await XH(t,e,!0,!1)}async function XH(n,e,t,i){const r=await qfe(n.localStore,qu(e)),a=r.targetId,s=n.sharedClientState.addLocalQueryTarget(a,t);let o;return i&&(o=await Phe(n,e,a,s==="current",r.resumeToken)),n.isPrimaryClient&&t&&BH(n.remoteStore,r),o}async function Phe(n,e,t,i,r){n.pu=(p,v,y)=>(async function(E,S,w,I){let P=S.view.ru(w);P.Ss&&(P=await SF(E.localStore,S.query,!1).then((({documents:U})=>S.view.ru(U,P))));const D=I&&I.targetChanges.get(S.targetId),z=I&&I.targetMismatches.get(S.targetId)!=null,k=S.view.applyChanges(P,E.isPrimaryClient,D,z);return NF(E,S.targetId,k.au),k.snapshot})(n,p,v,y);const a=await SF(n.localStore,e,!0),s=new The(e,a.ks),o=s.ru(a.documents),c=Vx.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),f=s.applyChanges(o,n.isPrimaryClient,c);NF(n,t,f.au);const h=new Ahe(e,t,s);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function Nhe(n,e,t){const i=Rn(n),r=i.Tu.get(e),a=i.Iu.get(r.targetId);if(a.length>1)return i.Iu.set(r.targetId,a.filter((s=>!TM(s,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await KN(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&SD(i.remoteStore,r.targetId),JN(i,r.targetId)})).catch(ry)):(JN(i,r.targetId),await KN(i.localStore,r.targetId,!0))}async function Ohe(n,e){const t=Rn(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),SD(t.remoteStore,i.targetId))}async function Dhe(n,e,t){const i=Vhe(n);try{const r=await(function(s,o){const c=Rn(s),f=nr.now(),h=o.reduce(((y,_)=>y.add(_.key)),ti());let p,v;return c.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let _=mh(),E=ti();return c.xs.getEntries(y,h).next((S=>{_=S,_.forEach(((w,I)=>{I.isValidDocument()||(E=E.add(w))}))})).next((()=>c.localDocuments.getOverlayedDocuments(y,_))).next((S=>{p=S;const w=[];for(const I of o){const P=Wue(I,p.get(I.key).overlayedDocument);P!=null&&w.push(new Sp(I.key,P,rH(P.value.mapValue),zc.exists(!0)))}return c.mutationQueue.addMutationBatch(y,f,w,o)})).next((S=>{v=S;const w=S.applyToLocalDocumentSet(p,E);return c.documentOverlayCache.saveOverlays(y,S.batchId,w)}))})).then((()=>({batchId:v.batchId,changes:pH(p)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(s,o,c){let f=s.du[s.currentUser.toKey()];f||(f=new wr(ei)),f=f.insert(o,c),s.du[s.currentUser.toKey()]=f})(i,r.batchId,t),await Hx(i,r.changes),await NM(i.remoteStore)}catch(r){const a=MD(r,"Failed to persist write");t.reject(a)}}async function YH(n,e){const t=Rn(n);try{const i=await Hfe(t.localStore,e);e.targetChanges.forEach(((r,a)=>{const s=t.Au.get(a);s&&(wi(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?s.hu=!0:r.modifiedDocuments.size>0?wi(s.hu,14607):r.removedDocuments.size>0&&(wi(s.hu,42227),s.hu=!1))})),await Hx(t,i,e)}catch(i){await ry(i)}}function PF(n,e,t){const i=Rn(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((a,s)=>{const o=s.view.va(e);o.snapshot&&r.push(o.snapshot)})),(function(s,o){const c=Rn(s);c.onlineState=o;let f=!1;c.queries.forEach(((h,p)=>{for(const v of p.ba)v.va(o)&&(f=!0)})),f&&CD(c)})(i.eventManager,e),r.length&&i.Pu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Lhe(n,e,t){const i=Rn(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),a=r&&r.key;if(a){let s=new wr(cn.comparator);s=s.insert(a,Ms.newNoDocument(a,An.min()));const o=ti().add(a),c=new IM(An.min(),new Map,new wr(ei),s,o);await YH(i,c),i.Ru=i.Ru.remove(a),i.Au.delete(e),RD(i)}else await KN(i.localStore,e,!1).then((()=>JN(i,e,t))).catch(ry)}async function khe(n,e){const t=Rn(n),i=e.batch.batchId;try{const r=await jfe(t.localStore,e);ZH(t,i,null),KH(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Hx(t,r)}catch(r){await ry(r)}}async function Uhe(n,e,t){const i=Rn(n);try{const r=await(function(s,o){const c=Rn(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let h;return c.mutationQueue.lookupMutationBatch(f,o).next((p=>(wi(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(f,p)))).next((()=>c.mutationQueue.performConsistencyCheck(f))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(f,h,o))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,h))).next((()=>c.localDocuments.getDocuments(f,h)))}))})(i.localStore,e);ZH(i,e,t),KH(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Hx(i,r)}catch(r){await ry(r)}}function KH(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function ZH(n,e,t){const i=Rn(n);let r=i.du[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(t?a.reject(t):a.resolve(),r=r.remove(e)),i.du[i.currentUser.toKey()]=r}}function JN(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||QH(n,i)}))}function QH(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(SD(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),RD(n))}function NF(n,e,t){for(const i of t)i instanceof qH?(n.Vu.addReference(i.key,e),Fhe(n,i)):i instanceof $H?(Ht(ID,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||QH(n,i.key)):vn(19791,{wu:i})}function Fhe(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(Ht(ID,"New document in limbo: "+t),n.Eu.add(i),RD(n))}function RD(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new cn(tr.fromString(e)),i=n.fu.next();n.Au.set(i,new Mhe(t)),n.Ru=n.Ru.insert(t,i),BH(n.remoteStore,new $d(qu(hD(t.path)),i,"TargetPurposeLimboResolution",xM.ce))}}async function Hx(n,e,t){const i=Rn(n),r=[],a=[],s=[];i.Tu.isEmpty()||(i.Tu.forEach(((o,c)=>{s.push(i.pu(c,e,t).then((f=>{var h;if((f||t)&&i.isPrimaryClient){const p=f?!f.fromCache:(h=t==null?void 0:t.targetChanges.get(c.targetId))==null?void 0:h.current;i.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(f){r.push(f);const p=_D.Es(c.targetId,f);a.push(p)}})))})),await Promise.all(s),i.Pu.J_(r),await(async function(c,f){const h=Rn(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>dt.forEach(f,(v=>dt.forEach(v.Ts,(y=>h.persistence.referenceDelegate.addReference(p,v.targetId,y))).next((()=>dt.forEach(v.Is,(y=>h.persistence.referenceDelegate.removeReference(p,v.targetId,y)))))))))}catch(p){if(!ay(p))throw p;Ht(xD,"Failed to update sequence numbers: "+p)}for(const p of f){const v=p.targetId;if(!p.fromCache){const y=h.vs.get(v),_=y.snapshotVersion,E=y.withLastLimboFreeSnapshotVersion(_);h.vs=h.vs.insert(v,E)}}})(i.localStore,a))}async function zhe(n,e){const t=Rn(n);if(!t.currentUser.isEqual(e)){Ht(ID,"User change. New user:",e.toKey());const i=await kH(t.localStore,e);t.currentUser=e,(function(a,s){a.mu.forEach((o=>{o.forEach((c=>{c.reject(new Jt(bt.CANCELLED,s))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Hx(t,i.Ns)}}function Bhe(n,e){const t=Rn(n),i=t.Au.get(e);if(i&&i.hu)return ti().add(i.key);{let r=ti();const a=t.Iu.get(e);if(!a)return r;for(const s of a){const o=t.Tu.get(s);r=r.unionWith(o.view.nu)}return r}}function JH(n){const e=Rn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=YH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Bhe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Lhe.bind(null,e),e.Pu.J_=She.bind(null,e.eventManager),e.Pu.yu=whe.bind(null,e.eventManager),e}function Vhe(n){const e=Rn(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=khe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Uhe.bind(null,e),e}class IT{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=RM(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Vfe(this.persistence,new Ffe,e.initialUser,this.serializer)}Cu(e){return new LH(bD.Vi,this.serializer)}Du(e){return new Xfe}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}IT.provider={build:()=>new IT};class jhe extends IT{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){wi(this.persistence.referenceDelegate instanceof MT,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new wfe(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Oo.withCacheSize(this.cacheSizeBytes):Oo.DEFAULT;return new LH((i=>MT.Vi(i,t)),this.serializer)}}class eO{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>PF(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=zhe.bind(null,this.syncEngine),await vhe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new bhe})()}createDatastore(e){const t=RM(e.databaseInfo.databaseId),i=Jfe(e.databaseInfo);return rhe(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,a,s,o){return new she(i,r,a,s,o)})(this.localStore,this.datastore,e.asyncQueue,(t=>PF(this.syncEngine,t,0)),(function(){return TF.v()?new TF:new Yfe})())}createSyncEngine(e,t){return(function(r,a,s,o,c,f,h){const p=new Che(r,a,s,o,c,f);return h&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const a=Rn(r);Ht(ug,"RemoteStore shutting down."),a.Ea.add(5),await jx(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}eO.provider={build:()=>new eO};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hhe{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ph("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="FirestoreClient";class Ghe{constructor(e,t,i,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=r,this.user=As.UNAUTHENTICATED,this.clientId=aD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async s=>{Ht(dp,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,(s=>(Ht(dp,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=MD(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function TR(n,e){n.asyncQueue.verifyOperationInProgress(),Ht(dp,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await kH(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function OF(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Whe(n);Ht(dp,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>MF(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>MF(e.remoteStore,r))),n._onlineComponents=e}async function Whe(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ht(dp,"Using user provided OfflineComponentProvider");try{await TR(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===bt.FAILED_PRECONDITION||r.code===bt.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Uv("Error using user provided cache. Falling back to memory cache: "+t),await TR(n,new IT)}}else Ht(dp,"Using default OfflineComponentProvider"),await TR(n,new jhe(void 0));return n._offlineComponents}async function e7(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ht(dp,"Using user provided OnlineComponentProvider"),await OF(n,n._uninitializedComponentsProvider._online)):(Ht(dp,"Using default OnlineComponentProvider"),await OF(n,new eO))),n._onlineComponents}function qhe(n){return e7(n).then((e=>e.syncEngine))}async function DF(n){const e=await e7(n),t=e.eventManager;return t.onListen=Ihe.bind(null,e.syncEngine),t.onUnlisten=Nhe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Rhe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Ohe.bind(null,e.syncEngine),t}function $he(n,e,t,i){const r=new Hhe(i),a=new Ehe(e,r,t);return n.asyncQueue.enqueueAndForget((async()=>_he(await DF(n),a))),()=>{r.Nu(),n.asyncQueue.enqueueAndForget((async()=>xhe(await DF(n),a)))}}function Xhe(n,e){const t=new Xm;return n.asyncQueue.enqueueAndForget((async()=>Dhe(await qhe(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t7(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yhe="ComponentProvider",LF=new Map;function Khe(n,e,t,i,r){return new due(n,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,t7(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n7="firestore.googleapis.com",kF=!0;class UF{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Jt(bt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=n7,this.ssl=kF}else this.host=e.host,this.ssl=e.ssl??kF;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=DH;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xfe)throw new Jt(bt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nue("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=t7(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Jt(bt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Jt(bt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Jt(bt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class OM{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new UF({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Jt(bt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Jt(bt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new UF(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new qce;switch(i.type){case"firstParty":return new Kce(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Jt(bt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=LF.get(t);i&&(Ht(Yhe,"Removing Datastore"),LF.delete(t),i.terminate())})(this),Promise.resolve()}}function Zhe(n,e,t,i={}){var f;n=Jd(n,OM);const r=_p(e),a=n._getSettings(),s={...a,emulatorOptions:n._getEmulatorOptions()},o=`${e}:${t}`;r&&(J3(`https://${o}`),eD("Firestore",!0)),a.host!==n7&&a.host!==o&&Uv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:o,ssl:r,emulatorOptions:i};if(!og(c,s)&&(n._setSettings(c),i.mockUserToken)){let h,p;if(typeof i.mockUserToken=="string")h=i.mockUserToken,p=As.MOCK_USER;else{h=O9(i.mockUserToken,(f=n._app)==null?void 0:f.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new Jt(bt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new As(v)}n._authCredentials=new $ce(new q9(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new DM(this.firestore,e,this._query)}}class ma{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ep(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ma(this.firestore,e,this._key)}toJSON(){return{type:ma._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(zx(t,ma._jsonSchema))return new ma(e,i||null,new cn(tr.fromString(t.referencePath)))}}ma._jsonSchemaVersion="firestore/documentReference/1.0",ma._jsonSchema={type:ia("string",ma._jsonSchemaVersion),referencePath:ia("string")};class ep extends DM{constructor(e,t,i){super(e,t,hD(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ma(this.firestore,null,new cn(e))}withConverter(e){return new ep(this.firestore,e,this._path)}}function Mw(n,e,...t){if(n=qr(n),$9("collection","path",e),n instanceof OM){const i=tr.fromString(e,...t);return K2(i),new ep(n,null,i)}{if(!(n instanceof ma||n instanceof ep))throw new Jt(bt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(tr.fromString(e,...t));return K2(i),new ep(n.firestore,null,i)}}function Od(n,e,...t){if(n=qr(n),arguments.length===1&&(e=aD.newId()),$9("doc","path",e),n instanceof OM){const i=tr.fromString(e,...t);return Y2(i),new ma(n,null,new cn(i))}{if(!(n instanceof ma||n instanceof ep))throw new Jt(bt.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(tr.fromString(e,...t));return Y2(i),new ma(n.firestore,n instanceof ep?n.converter:null,new cn(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF="AsyncQueue";class zF{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new FH(this,"async_queue_retry"),this._c=()=>{const i=ER();i&&Ht(FF,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=ER();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ER();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Xm;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ay(e))throw e;Ht(FF,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ph("INTERNAL UNHANDLED ERROR: ",BF(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=AD.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&vn(47125,{Pc:BF(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function BF(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Hv extends OM{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new zF,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zF(e),this._firestoreClient=void 0,await e}}}function Qhe(n,e){const t=typeof n=="object"?n:iD(),i=typeof n=="string"?n:_T,r=_M(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=R9("firestore");a&&Zhe(r,...a)}return r}function i7(n){if(n._terminated)throw new Jt(bt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Jhe(n),n._firestoreClient}function Jhe(n){var i,r,a,s;const e=n._freezeSettings(),t=Khe(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(r=n._app)==null?void 0:r.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Ghe(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(c){const f=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xl(ss.fromBase64String(e))}catch(t){throw new Jt(bt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xl(ss.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zx(e,Xl._jsonSchema))return Xl.fromBase64String(e.bytes)}}Xl._jsonSchemaVersion="firestore/bytes/1.0",Xl._jsonSchema={type:ia("string",Xl._jsonSchemaVersion),bytes:ia("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Jt(bt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ns(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Jt(bt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Jt(bt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ei(this._lat,e._lat)||ei(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xu._jsonSchemaVersion}}static fromJSON(e){if(zx(e,Xu._jsonSchema))return new Xu(e.latitude,e.longitude)}}Xu._jsonSchemaVersion="firestore/geoPoint/1.0",Xu._jsonSchema={type:ia("string",Xu._jsonSchemaVersion),latitude:ia("number"),longitude:ia("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Bc._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zx(e,Bc._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Bc(e.vectorValues);throw new Jt(bt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Bc._jsonSchemaVersion="firestore/vectorValue/1.0",Bc._jsonSchema={type:ia("string",Bc._jsonSchemaVersion),vectorValues:ia("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ede=/^__.*__$/;class tde{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Sp(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bx(e,this.data,t,this.fieldTransforms)}}class r7{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Sp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function a7(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vn(40011,{dataSource:n})}}class OD{constructor(e,t,i,r,a,s){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new OD({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return RT(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(a7(this.dataSource)&&ede.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class nde{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||RM(e)}createContext(e,t,i,r=!1){return new OD({dataSource:e,methodName:t,targetDoc:i,path:ns.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function s7(n){const e=n._freezeSettings(),t=RM(n._databaseId);return new nde(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ide(n,e,t,i,r,a={}){const s=n.createContext(a.merge||a.mergeFields?2:0,e,t,r);DD("Data must be an object, but it was:",s,i);const o=o7(i,s);let c,f;if(a.merge)c=new sl(s.fieldMask),f=s.fieldTransforms;else if(a.mergeFields){const h=[];for(const p of a.mergeFields){const v=ox(e,p,t);if(!s.contains(v))throw new Jt(bt.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);u7(h,v)||h.push(v)}c=new sl(h),f=s.fieldTransforms.filter((p=>c.covers(p.field)))}else c=null,f=s.fieldTransforms;return new tde(new ko(o),c,f)}class LM extends ND{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof LM}}function rde(n,e,t,i){const r=n.createContext(1,e,t);DD("Data must be an object, but it was:",r,i);const a=[],s=ko.empty();xp(i,((c,f)=>{const h=c7(e,c,t);f=qr(f);const p=r.childContextForFieldPath(h);if(f instanceof LM)a.push(h);else{const v=kM(f,p);v!=null&&(a.push(h),s.set(h,v))}}));const o=new sl(a);return new r7(s,o,r.fieldTransforms)}function ade(n,e,t,i,r,a){const s=n.createContext(1,e,t),o=[ox(e,i,t)],c=[r];if(a.length%2!=0)throw new Jt(bt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)o.push(ox(e,a[v])),c.push(a[v+1]);const f=[],h=ko.empty();for(let v=o.length-1;v>=0;--v)if(!u7(f,o[v])){const y=o[v];let _=c[v];_=qr(_);const E=s.childContextForFieldPath(y);if(_ instanceof LM)f.push(y);else{const S=kM(_,E);S!=null&&(f.push(y),h.set(y,S))}}const p=new sl(f);return new r7(h,p,s.fieldTransforms)}function kM(n,e){if(l7(n=qr(n)))return DD("Unsupported field value:",e,n),o7(n,e);if(n instanceof ND)return(function(i,r){if(!a7(r.dataSource))throw r.createError(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,r){const a=[];let s=0;for(const o of i){let c=kM(o,r.childContextForArray(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}})(n,e)}return(function(i,r){if((i=qr(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return zue(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=nr.fromDate(i);return{timestampValue:AT(r.serializer,a)}}if(i instanceof nr){const a=new nr(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:AT(r.serializer,a)}}if(i instanceof Xu)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Xl)return{bytesValue:AH(r.serializer,i._byteString)};if(i instanceof ma){const a=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(a))throw r.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:vD(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Bc)return(function(s,o){const c=s instanceof Bc?s.toArray():s;return{mapValue:{fields:{[nH]:{stringValue:iH},[xT]:{arrayValue:{values:c.map((h=>{if(typeof h!="number")throw o.createError("VectorValues must only contain numeric values.");return dD(o.serializer,h)}))}}}}}})(i,r);if(OH(i))return i._toProto(r.serializer);throw r.createError(`Unsupported field value: ${sD(i)}`)})(n,e)}function o7(n,e){const t={};return K9(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xp(n,((i,r)=>{const a=kM(r,e.childContextForField(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function l7(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof nr||n instanceof Xu||n instanceof Xl||n instanceof ma||n instanceof ND||n instanceof Bc||OH(n))}function DD(n,e,t){if(!l7(t)||!X9(t)){const i=sD(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function ox(n,e,t){if((e=qr(e))instanceof PD)return e._internalPath;if(typeof e=="string")return c7(n,e);throw RT("Field path arguments must be of type string or ",n,!1,void 0,t)}const sde=new RegExp("[~\\*/\\[\\]]");function c7(n,e,t){if(e.search(sde)>=0)throw RT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new PD(...e.split("."))._internalPath}catch{throw RT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function RT(n,e,t,i,r){const a=i&&!i.isEmpty(),s=r!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${i}`),s&&(c+=` in document ${r}`),c+=")"),new Jt(bt.INVALID_ARGUMENT,o+n+c)}function u7(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ode{convertValue(e,t="none"){switch(fp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(up(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw vn(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return xp(e,((r,a)=>{i[r]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,r,a;const t=(a=(r=(i=e.fields)==null?void 0:i[xT].arrayValue)==null?void 0:r.values)==null?void 0:a.map((s=>Hr(s.doubleValue)));return new Bc(t)}convertGeoPoint(e){return new Xu(Hr(e.latitude),Hr(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=wM(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(nx(e));default:return null}}convertTimestamp(e){const t=cp(e);return new nr(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=tr.fromString(e);wi(NH(i),9688,{name:e});const r=new ix(i.get(1),i.get(3)),a=new cn(i.popFirst(5));return r.isEqual(t)||ph(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7 extends ode{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ma(this.firestore,null,t)}}const VF="@firebase/firestore",jF="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HF(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const a of i)if(a in r&&typeof r[a]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(e,t,i,r,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ma(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lde(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(ox("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class lde extends h7{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cde(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Jt(bt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function ude(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class u_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ym extends h7{constructor(e,t,i,r,a,s){super(e,t,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new aE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(ox("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Jt(bt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ym._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ym._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ym._jsonSchema={type:ia("string",Ym._jsonSchemaVersion),bundleSource:ia("string","DocumentSnapshot"),bundleName:ia("string"),bundle:ia("string")};class aE extends Ym{data(e={}){return super.data(e)}}class bv{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new u_(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new aE(this._firestore,this._userDataWriter,i.key,i,new u_(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Jt(bt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map((o=>{const c=new aE(r._firestore,r._userDataWriter,o.doc.key,o.doc,new u_(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((o=>a||o.type!==3)).map((o=>{const c=new aE(r._firestore,r._userDataWriter,o.doc.key,o.doc,new u_(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,h=-1;return o.type!==0&&(f=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),h=s.indexOf(o.doc.key)),{type:fde(o.type),doc:c,oldIndex:f,newIndex:h}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Jt(bt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=bv._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=aD.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function fde(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vn(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bv._jsonSchemaVersion="firestore/querySnapshot/1.0",bv._jsonSchema={type:ia("string",bv._jsonSchemaVersion),bundleSource:ia("string","QuerySnapshot"),bundleName:ia("string"),bundle:ia("string")};function Cw(n,e,t,...i){n=Jd(n,ma);const r=Jd(n.firestore,Hv),a=s7(r);let s;return s=typeof(e=qr(e))=="string"||e instanceof PD?ade(a,"updateDoc",n._key,e,t,i):rde(a,"updateDoc",n._key,e),LD(r,[s.toMutation(n._key,zc.exists(!0))])}function AR(n){return LD(Jd(n.firestore,Hv),[new pD(n._key,zc.none())])}function Iw(n,e){const t=Jd(n.firestore,Hv),i=Od(n),r=ude(n.converter,e),a=s7(n.firestore);return LD(t,[ide(a,"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,zc.exists(!1))]).then((()=>i))}function Rw(n,...e){var f,h,p;n=qr(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||HF(e[i])||(t=e[i++]);const r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(HF(e[i])){const v=e[i];e[i]=(f=v.next)==null?void 0:f.bind(v),e[i+1]=(h=v.error)==null?void 0:h.bind(v),e[i+2]=(p=v.complete)==null?void 0:p.bind(v)}let a,s,o;if(n instanceof ma)s=Jd(n.firestore,Hv),o=hD(n._key.path),a={next:v=>{e[i]&&e[i](hde(s,n,v))},error:e[i+1],complete:e[i+2]};else{const v=Jd(n,DM);s=Jd(v.firestore,Hv),o=v._query;const y=new f7(s);a={next:_=>{e[i]&&e[i](new bv(s,y,v,_))},error:e[i+1],complete:e[i+2]},cde(n._query)}const c=i7(s);return $he(c,o,r,a)}function LD(n,e){const t=i7(n);return Xhe(t,e)}function hde(n,e,t){const i=t.docs.get(e._key),r=new f7(n);return new Ym(n,r,e._key,i,new u_(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){Wce(Mg),lg(new op("firestore",((i,{instanceIdentifier:r,options:a})=>{const s=i.getProvider("app").getImmediate(),o=new Hv(new Xce(i.getProvider("auth-internal")),new Zce(s,i.getProvider("app-check-internal")),pue(s,r),s);return a={useFetchStreams:t,...a},o._setSettings(a),o}),"PUBLIC").setMultipleInstances(!0)),Wu(VF,jF,e),Wu(VF,jF,"esm2020")})();function d7(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dde=d7,p7=new Ux("auth","Firebase",d7());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=new tD("@firebase/auth");function pde(n,...e){PT.logLevel<=Jn.WARN&&PT.warn(`Auth (${Mg}): ${n}`,...e)}function sE(n,...e){PT.logLevel<=Jn.ERROR&&PT.error(`Auth (${Mg}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(n,...e){throw UD(n,...e)}function Vc(n,...e){return UD(n,...e)}function kD(n,e,t){const i={...dde(),[e]:t};return new Ux("auth","Firebase",i).create(e,{appName:n.name})}function Km(n){return kD(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mde(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&rf(n,"argument-error"),kD(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function UD(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return p7.create(n,...e)}function xn(n,e,...t){if(!n)throw UD(e,...t)}function rh(n){const e="INTERNAL ASSERTION FAILED: "+n;throw sE(e),new Error(e)}function gh(n,e){n||rh(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function gde(){return GF()==="http:"||GF()==="https:"}function GF(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vde(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gde()||Sle()||"connection"in navigator)?navigator.onLine:!0}function yde(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,t){this.shortDelay=e,this.longDelay=t,gh(t>e,"Short delay should be less than long delay!"),this.isMobile=ble()||wle()}get(){return vde()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(n,e){gh(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m7{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bde={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _de=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xde=new Gx(3e4,6e4);function zD(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function oy(n,e,t,i,r={}){return g7(n,r,async()=>{let a={},s={};i&&(e==="GET"?s=i:a={body:JSON.stringify(i)});const o=Fx({key:n.config.apiKey,...s}).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:c,...a};return xle()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&_p(n.emulatorConfig.host)&&(f.credentials="include"),m7.fetch()(await v7(n,n.config.apiHost,t,o),f)})}async function g7(n,e,t){n._canInitEmulator=!1;const i={...bde,...e};try{const r=new wde(n),a=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Pw(n,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[c,f]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pw(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Pw(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw Pw(n,"user-disabled",s);const h=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw kD(n,h,f);rf(n,h)}}catch(r){if(r instanceof hf)throw r;rf(n,"network-request-failed",{message:String(r)})}}async function Sde(n,e,t,i,r={}){const a=await oy(n,e,t,i,r);return"mfaPendingCredential"in a&&rf(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function v7(n,e,t,i){const r=`${e}${t}?${i}`,a=n,s=a.config.emulator?FD(n.config,r):`${n.config.apiScheme}://${r}`;return _de.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}class wde{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Vc(this.auth,"network-request-failed")),xde.get())})}}function Pw(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=Vc(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ede(n,e){return oy(n,"POST","/v1/accounts:delete",e)}async function NT(n,e){return oy(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Tde(n,e=!1){const t=qr(n),i=await t.getIdToken(e),r=BD(i);xn(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:r,token:i,authTime:I_(MR(r.auth_time)),issuedAtTime:I_(MR(r.iat)),expirationTime:I_(MR(r.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function MR(n){return Number(n)*1e3}function BD(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return sE("JWT malformed, contained fewer than 3 sections"),null;try{const r=C9(t);return r?JSON.parse(r):(sE("Failed to decode base64 JWT payload"),null)}catch(r){return sE("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function WF(n){const e=BD(n);return xn(e,"internal-error"),xn(typeof e.exp<"u","internal-error"),xn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lx(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof hf&&Ade(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function Ade({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mde{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=I_(this.lastLoginAt),this.creationTime=I_(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OT(n){var p;const e=n.auth,t=await n.getIdToken(),i=await lx(n,NT(e,{idToken:t}));xn(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const a=(p=r.providerUserInfo)!=null&&p.length?y7(r.providerUserInfo):[],s=Ide(n.providerData,a),o=n.isAnonymous,c=!(n.email&&r.passwordHash)&&!(s!=null&&s.length),f=o?c:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new nO(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(n,h)}async function Cde(n){const e=qr(n);await OT(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ide(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function y7(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rde(n,e){const t=await g7(n,{},async()=>{const i=Fx({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=n.config,s=await v7(n,r,"/v1/token",`key=${a}`),o=await n._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:i};return n.emulatorConfig&&_p(n.emulatorConfig.host)&&(c.credentials="include"),m7.fetch()(s,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Pde(n,e){return oy(n,"POST","/v2/accounts:revokeToken",zD(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xn(e.idToken,"internal-error"),xn(typeof e.idToken<"u","internal-error"),xn(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):WF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xn(e.length!==0,"internal-error");const t=WF(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(xn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:a}=await Rde(e,t);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:a}=t,s=new _v;return i&&(xn(typeof i=="string","internal-error",{appName:e}),s.refreshToken=i),r&&(xn(typeof r=="string","internal-error",{appName:e}),s.accessToken=r),a&&(xn(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _v,this.toJSON())}_performRefresh(){return rh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(n,e){xn(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Uc{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new Mde(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new nO(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await lx(this,this.stsTokenManager.getToken(this.auth,e));return xn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Tde(this,e)}reload(){return Cde(this)}_assign(e){this!==e&&(xn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Uc({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){xn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await OT(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($l(this.auth.app))return Promise.reject(Km(this.auth));const e=await this.getIdToken();return await lx(this,Ede(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,a=t.phoneNumber??void 0,s=t.photoURL??void 0,o=t.tenantId??void 0,c=t._redirectEventId??void 0,f=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:p,emailVerified:v,isAnonymous:y,providerData:_,stsTokenManager:E}=t;xn(p&&E,e,"internal-error");const S=_v.fromJSON(this.name,E);xn(typeof p=="string",e,"internal-error"),Id(i,e.name),Id(r,e.name),xn(typeof v=="boolean",e,"internal-error"),xn(typeof y=="boolean",e,"internal-error"),Id(a,e.name),Id(s,e.name),Id(o,e.name),Id(c,e.name),Id(f,e.name),Id(h,e.name);const w=new Uc({uid:p,auth:e,email:r,emailVerified:v,displayName:i,isAnonymous:y,photoURL:s,phoneNumber:a,tenantId:o,stsTokenManager:S,createdAt:f,lastLoginAt:h});return _&&Array.isArray(_)&&(w.providerData=_.map(I=>({...I}))),c&&(w._redirectEventId=c),w}static async _fromIdTokenResponse(e,t,i=!1){const r=new _v;r.updateFromServerResponse(t);const a=new Uc({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await OT(a),a}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];xn(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?y7(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),o=new _v;o.updateFromIdToken(i);const c=new Uc({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new nO(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF=new Map;function ah(n){gh(n instanceof Function,"Expected a class definition");let e=qF.get(n);return e?(gh(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,qF.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}b7.type="NONE";const $F=b7;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(n,e,t){return`firebase:${n}:${e}:${t}`}class xv{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=oE(this.userKey,r.apiKey,a),this.fullPersistenceKey=oE("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await NT(this.auth,{idToken:e}).catch(()=>{});return t?Uc._fromGetAccountInfoResponse(this.auth,t,e):null}return Uc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new xv(ah($F),e,i);const r=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=r[0]||ah($F);const s=oE(i,e.config.apiKey,e.name);let o=null;for(const f of t)try{const h=await f._get(s);if(h){let p;if(typeof h=="string"){const v=await NT(e,{idToken:h}).catch(()=>{});if(!v)break;p=await Uc._fromGetAccountInfoResponse(e,v,h)}else p=Uc._fromJSON(e,h);f!==a&&(o=p),a=f;break}}catch{}const c=r.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new xv(a,e,i):(a=c[0],o&&await a._set(s,o.toJSON()),await Promise.all(t.map(async f=>{if(f!==a)try{await f._remove(s)}catch{}})),new xv(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(w7(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_7(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(T7(e))return"Blackberry";if(A7(e))return"Webos";if(x7(e))return"Safari";if((e.includes("chrome/")||S7(e))&&!e.includes("edge/"))return"Chrome";if(E7(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function _7(n=Ps()){return/firefox\//i.test(n)}function x7(n=Ps()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function S7(n=Ps()){return/crios\//i.test(n)}function w7(n=Ps()){return/iemobile/i.test(n)}function E7(n=Ps()){return/android/i.test(n)}function T7(n=Ps()){return/blackberry/i.test(n)}function A7(n=Ps()){return/webos/i.test(n)}function VD(n=Ps()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Nde(n=Ps()){var e;return VD(n)&&!!((e=window.navigator)!=null&&e.standalone)}function Ode(){return Ele()&&document.documentMode===10}function M7(n=Ps()){return VD(n)||E7(n)||A7(n)||T7(n)||/windows phone/i.test(n)||w7(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C7(n,e=[]){let t;switch(n){case"Browser":t=XF(Ps());break;case"Worker":t=`${XF(Ps())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Mg}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dde{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((s,o)=>{try{const c=e(a);s(c)}catch(c){o(c)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lde(n,e={}){return oy(n,"GET","/v2/passwordPolicy",zD(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kde=6;class Ude{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??kde,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fde{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new YF(this),this.idTokenSubscription=new YF(this),this.beforeStateQueue=new Dde(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=p7,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ah(t)),this._initializationPromise=this.queue(async()=>{var i,r,a;if(!this._deleted&&(this.persistenceManager=await xv.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await NT(this,{idToken:e}),i=await Uc._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if($l(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(a=this.redirectUser)==null?void 0:a._redirectEventId,o=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===o)&&(c!=null&&c.user)&&(i=c.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return xn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await OT(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yde()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($l(this.app))return Promise.reject(Km(this));const t=e?qr(e):null;return t&&xn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&xn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $l(this.app)?Promise.reject(Km(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $l(this.app)?Promise.reject(Km(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ah(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Lde(this),t=new Ude(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ux("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Pde(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ah(e)||this._popupRedirectResolver;xn(t,this,"argument-error"),this.redirectPersistenceManager=await xv.create(this,[ah(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(xn(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,i,r);return()=>{s=!0,c()}}else{const c=e.addObserver(t);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=C7(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if($l(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&pde(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function UM(n){return qr(n)}class YF{constructor(e){this.auth=e,this.observer=null,this.addObserver=Nle(t=>this.observer=t)}get next(){return xn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jD={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zde(n){jD=n}function Bde(n){return jD.loadJS(n)}function Vde(){return jD.gapiScript}function jde(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hde(n,e){const t=_M(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),a=t.getOptions();if(og(a,e??{}))return r;rf(r,"already-initialized")}return t.initialize({options:e})}function Gde(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ah);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Wde(n,e,t){const i=UM(n);xn(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,a=I7(e),{host:s,port:o}=qde(e),c=o===null?"":`:${o}`,f={url:`${a}//${s}${c}/`},h=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){xn(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),xn(og(f,i.config.emulator)&&og(h,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=h,i.settings.appVerificationDisabledForTesting=!0,_p(s)?(J3(`${a}//${s}${c}`),eD("Auth",!0)):$de()}function I7(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function qde(n){const e=I7(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:KF(i.substr(a.length+1))}}else{const[a,s]=i.split(":");return{host:a,port:KF(s)}}}function KF(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function $de(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return rh("not implemented")}_getIdTokenResponse(e){return rh("not implemented")}_linkToIdToken(e,t){return rh("not implemented")}_getReauthenticationResolver(e){return rh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sv(n,e){return Sde(n,"POST","/v1/accounts:signInWithIdp",zD(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xde="http://localhost";class fg extends R7{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new fg(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rf("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...a}=t;if(!i||!r)return null;const s=new fg(i,r);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return Sv(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Sv(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Sv(e,t)}buildRequest(){const e={requestUri:Xde,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fx(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx extends HD{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd extends Wx{constructor(){super("facebook.com")}static credential(e){return fg._fromParams({providerId:Fd.PROVIDER_ID,signInMethod:Fd.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fd.credentialFromTaggedObject(e)}static credentialFromError(e){return Fd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fd.credential(e.oauthAccessToken)}catch{return null}}}Fd.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fd.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends Wx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return fg._fromParams({providerId:nh.PROVIDER_ID,signInMethod:nh.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return nh.credentialFromTaggedObject(e)}static credentialFromError(e){return nh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return nh.credential(t,i)}catch{return null}}}nh.GOOGLE_SIGN_IN_METHOD="google.com";nh.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd extends Wx{constructor(){super("github.com")}static credential(e){return fg._fromParams({providerId:zd.PROVIDER_ID,signInMethod:zd.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zd.credentialFromTaggedObject(e)}static credentialFromError(e){return zd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zd.credential(e.oauthAccessToken)}catch{return null}}}zd.GITHUB_SIGN_IN_METHOD="github.com";zd.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd extends Wx{constructor(){super("twitter.com")}static credential(e,t){return fg._fromParams({providerId:Bd.PROVIDER_ID,signInMethod:Bd.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Bd.credentialFromTaggedObject(e)}static credentialFromError(e){return Bd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Bd.credential(t,i)}catch{return null}}}Bd.TWITTER_SIGN_IN_METHOD="twitter.com";Bd.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const a=await Uc._fromIdTokenResponse(e,i,r),s=ZF(i);return new Gv({user:a,providerId:s,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=ZF(i);return new Gv({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function ZF(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT extends hf{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,DT.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new DT(e,t,i,r)}}function P7(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?DT._fromErrorAndOperation(n,a,e,i):a})}async function Yde(n,e,t=!1){const i=await lx(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Gv._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kde(n,e,t=!1){const{auth:i}=n;if($l(i.app))return Promise.reject(Km(i));const r="reauthenticate";try{const a=await lx(n,P7(i,r,e,n),t);xn(a.idToken,i,"internal-error");const s=BD(a.idToken);xn(s,i,"internal-error");const{sub:o}=s;return xn(n.uid===o,i,"user-mismatch"),Gv._forOperation(n,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&rf(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zde(n,e,t=!1){if($l(n.app))return Promise.reject(Km(n));const i="signIn",r=await P7(n,i,e),a=await Gv._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(a.user),a}function Qde(n,e,t,i){return qr(n).onIdTokenChanged(e,t,i)}function Jde(n,e,t){return qr(n).beforeAuthStateChanged(e,t)}function epe(n,e,t,i){return qr(n).onAuthStateChanged(e,t,i)}function tpe(n){return qr(n).signOut()}const LT="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(LT,"1"),this.storage.removeItem(LT),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const npe=1e3,ipe=10;class O7 extends N7{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=M7(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,o,c)=>{this.notifyListeners(s,c)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const s=this.storage.getItem(i);!t&&this.localCache[i]===s||this.notifyListeners(i,s)},a=this.storage.getItem(i);Ode()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,ipe):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},npe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}O7.type="LOCAL";const rpe=O7;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7 extends N7{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}D7.type="SESSION";const L7=D7;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ape(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new FM(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:a}=t.data,s=this.handlersMap[r];if(!(s!=null&&s.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const o=Array.from(s).map(async f=>f(t.origin,a)),c=await ape(o);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}FM.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class spe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,s;return new Promise((o,c)=>{const f=GD("",20);r.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},i);s={messageChannel:r,onMessage(p){const v=p;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(v.data.response);break;default:clearTimeout(h),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(){return window}function ope(n){Yu().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k7(){return typeof Yu().WorkerGlobalScope<"u"&&typeof Yu().importScripts=="function"}async function lpe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cpe(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function upe(){return k7()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U7="firebaseLocalStorageDb",fpe=1,kT="firebaseLocalStorage",F7="fbase_key";class qx{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function zM(n,e){return n.transaction([kT],e?"readwrite":"readonly").objectStore(kT)}function hpe(){const n=indexedDB.deleteDatabase(U7);return new qx(n).toPromise()}function iO(){const n=indexedDB.open(U7,fpe);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(kT,{keyPath:F7})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(kT)?e(i):(i.close(),await hpe(),e(await iO()))})})}async function QF(n,e,t){const i=zM(n,!0).put({[F7]:e,value:t});return new qx(i).toPromise()}async function dpe(n,e){const t=zM(n,!1).get(e),i=await new qx(t).toPromise();return i===void 0?null:i.value}function JF(n,e){const t=zM(n,!0).delete(e);return new qx(t).toPromise()}const ppe=800,mpe=3;class z7{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await iO(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>mpe)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return k7()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=FM._getInstance(upe()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await lpe(),!this.activeServiceWorker)return;this.sender=new spe(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cpe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await iO();return await QF(e,LT,"1"),await JF(e,LT),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>QF(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>dpe(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>JF(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=zM(r,!1).getAll();return new qx(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ppe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}z7.type="LOCAL";const gpe=z7;new Gx(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B7(n,e){return e?ah(e):(xn(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD extends R7{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sv(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Sv(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Sv(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function vpe(n){return Zde(n.auth,new WD(n),n.bypassAuthState)}function ype(n){const{auth:e,user:t}=n;return xn(t,e,"internal-error"),Kde(t,new WD(n),n.bypassAuthState)}async function bpe(n){const{auth:e,user:t}=n;return xn(t,e,"internal-error"),Yde(t,new WD(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7{constructor(e,t,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vpe;case"linkViaPopup":case"linkViaRedirect":return bpe;case"reauthViaPopup":case"reauthViaRedirect":return ype;default:rf(this.auth,"internal-error")}}resolve(e){gh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _pe=new Gx(2e3,1e4);async function xpe(n,e,t){if($l(n.app))return Promise.reject(Vc(n,"operation-not-supported-in-this-environment"));const i=UM(n);mde(n,e,HD);const r=B7(i,t);return new zm(i,"signInViaPopup",e,r).executeNotNull()}class zm extends V7{constructor(e,t,i,r,a){super(e,t,r,a),this.provider=i,this.authWindow=null,this.pollId=null,zm.currentPopupAction&&zm.currentPopupAction.cancel(),zm.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xn(e,this.auth,"internal-error"),e}async onExecution(){gh(this.filter.length===1,"Popup operations only handle one event");const e=GD();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Vc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Vc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zm.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_pe.get())};e()}}zm.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Spe="pendingRedirect",lE=new Map;class wpe extends V7{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=lE.get(this.auth._key());if(!e){try{const i=await Epe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}lE.set(this.auth._key(),e)}return this.bypassAuthState||lE.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Epe(n,e){const t=Mpe(e),i=Ape(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function Tpe(n,e){lE.set(n._key(),e)}function Ape(n){return ah(n._redirectPersistence)}function Mpe(n){return oE(Spe,n.config.apiKey,n.name)}async function Cpe(n,e,t=!1){if($l(n.app))return Promise.reject(Km(n));const i=UM(n),r=B7(i,e),s=await new wpe(i,r,t).execute();return s&&!t&&(delete s.user._redirectEventId,await i._persistUserIfCurrent(s.user),await i._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ipe=600*1e3;class Rpe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ppe(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!j7(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Vc(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ipe&&this.cachedEventUids.clear(),this.cachedEventUids.has(ez(e))}saveEventToCache(e){this.cachedEventUids.add(ez(e)),this.lastProcessedEventTime=Date.now()}}function ez(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function j7({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Ppe(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return j7(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Npe(n,e={}){return oy(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ope=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Dpe=/^https?/;async function Lpe(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Npe(n);for(const t of e)try{if(kpe(t))return}catch{}rf(n,"unauthorized-domain")}function kpe(n){const e=tO(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return s.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===i}if(!Dpe.test(t))return!1;if(Ope.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Upe=new Gx(3e4,6e4);function tz(){const n=Yu().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Fpe(n){return new Promise((e,t)=>{var r,a,s;function i(){tz(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tz(),t(Vc(n,"network-request-failed"))},timeout:Upe.get()})}if((a=(r=Yu().gapi)==null?void 0:r.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((s=Yu().gapi)!=null&&s.load)i();else{const o=jde("iframefcb");return Yu()[o]=()=>{gapi.load?i():t(Vc(n,"network-request-failed"))},Bde(`${Vde()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw cE=null,e})}let cE=null;function zpe(n){return cE=cE||Fpe(n),cE}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bpe=new Gx(5e3,15e3),Vpe="__/auth/iframe",jpe="emulator/auth/iframe",Hpe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gpe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wpe(n){const e=n.config;xn(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?FD(e,jpe):`https://${n.config.authDomain}/${Vpe}`,i={apiKey:e.apiKey,appName:n.name,v:Mg},r=Gpe.get(n.config.apiHost);r&&(i.eid=r);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Fx(i).slice(1)}`}async function qpe(n){const e=await zpe(n),t=Yu().gapi;return xn(t,n,"internal-error"),e.open({where:document.body,url:Wpe(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hpe,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const s=Vc(n,"network-request-failed"),o=Yu().setTimeout(()=>{a(s)},Bpe.get());function c(){Yu().clearTimeout(o),r(i)}i.ping(c).then(c,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $pe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Xpe=500,Ype=600,Kpe="_blank",Zpe="http://localhost";class nz{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Qpe(n,e,t,i=Xpe,r=Ype){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const c={...$pe,width:i.toString(),height:r.toString(),top:a,left:s},f=Ps().toLowerCase();t&&(o=S7(f)?Kpe:t),_7(f)&&(e=e||Zpe,c.scrollbars="yes");const h=Object.entries(c).reduce((v,[y,_])=>`${v}${y}=${_},`,"");if(Nde(f)&&o!=="_self")return Jpe(e||"",o),new nz(null);const p=window.open(e||"",o,h);xn(p,n,"popup-blocked");try{p.focus()}catch{}return new nz(p)}function Jpe(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eme="__/auth/handler",tme="emulator/auth/handler",nme=encodeURIComponent("fac");async function iz(n,e,t,i,r,a){xn(n.config.authDomain,n,"auth-domain-config-required"),xn(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Mg,eventId:r};if(e instanceof HD){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",Ple(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))s[h]=p}if(e instanceof Wx){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);const o=s;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const c=await n._getAppCheckToken(),f=c?`#${nme}=${encodeURIComponent(c)}`:"";return`${ime(n)}?${Fx(o).slice(1)}${f}`}function ime({config:n}){return n.emulator?FD(n,tme):`https://${n.authDomain}/${eme}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="webStorageSupport";class rme{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=L7,this._completeRedirectFn=Cpe,this._overrideRedirectResult=Tpe}async _openPopup(e,t,i,r){var s;gh((s=this.eventManagers[e._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await iz(e,t,i,tO(),r);return Qpe(e,a,GD())}async _openRedirect(e,t,i,r){await this._originValidation(e);const a=await iz(e,t,i,tO(),r);return ope(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:a}=this.eventManagers[t];return r?Promise.resolve(r):(gh(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await qpe(e),i=new Rpe(e);return t.register("authEvent",r=>(xn(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(CR,{type:CR},r=>{var s;const a=(s=r==null?void 0:r[0])==null?void 0:s[CR];a!==void 0&&t(!!a),rf(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Lpe(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return M7()||x7()||VD()}}const ame=rme;var rz="@firebase/auth",az="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sme{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ome(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lme(n){lg(new op("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=i.options;xn(s&&!s.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:s,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:C7(n)},f=new Fde(i,r,a,c);return Gde(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),lg(new op("auth-internal",e=>{const t=UM(e.getProvider("auth").getImmediate());return(i=>new sme(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wu(rz,az,ome(n)),Wu(rz,az,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cme=300,ume=N9("authIdTokenMaxAge")||cme;let sz=null;const fme=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>ume)return;const r=t==null?void 0:t.token;sz!==r&&(sz=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function hme(n=iD()){const e=_M(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Hde(n,{popupRedirectResolver:ame,persistence:[gpe,rpe,L7]}),i=N9("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const s=fme(a.toString());Jde(t,s,()=>s(t.currentUser)),Qde(t,o=>s(o))}}const r=I9("auth");return r&&Wde(t,`http://${r}`),t}function dme(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}zde({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const a=Vc("internal-error");a.customData=r,t(a)},i.type="text/javascript",i.charset="UTF-8",dme().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lme("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7="firebasestorage.googleapis.com",G7="storageBucket",pme=120*1e3,mme=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends hf{constructor(e,t,i=0){super(IR(e),`Firebase Storage: ${t} (${IR(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Dr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return IR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Or;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Or||(Or={}));function IR(n){return"storage/"+n}function qD(){const n="An unknown error occurred, please check the error payload for server response.";return new Dr(Or.UNKNOWN,n)}function gme(n){return new Dr(Or.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function vme(n){return new Dr(Or.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function yme(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Dr(Or.UNAUTHENTICATED,n)}function bme(){return new Dr(Or.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function _me(n){return new Dr(Or.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function xme(){return new Dr(Or.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Sme(){return new Dr(Or.CANCELED,"User canceled the upload/download.")}function wme(n){return new Dr(Or.INVALID_URL,"Invalid URL '"+n+"'.")}function Eme(n){return new Dr(Or.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Tme(){return new Dr(Or.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+G7+"' property when initializing the app?")}function Ame(){return new Dr(Or.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Mme(){return new Dr(Or.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Cme(n){return new Dr(Or.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function rO(n){return new Dr(Or.INVALID_ARGUMENT,n)}function W7(){return new Dr(Or.APP_DELETED,"The Firebase app was deleted.")}function Ime(n){return new Dr(Or.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function R_(n,e){return new Dr(Or.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Xb(n){throw new Dr(Or.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=ol.makeFromUrl(e,t)}catch{return new ol(e,"")}if(i.path==="")return i;throw Eme(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)";function a(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const s="(/(.*))?$",o=new RegExp("^gs://"+r+s,"i"),c={bucket:1,path:3};function f(D){D.path_=decodeURIComponent(D.path)}const h="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${h}/b/${r}/o${v}`,"i"),_={bucket:1,path:3},E=t===H7?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",w=new RegExp(`^https?://${E}/${r}/${S}`,"i"),P=[{regex:o,indices:c,postModify:a},{regex:y,indices:_,postModify:f},{regex:w,indices:{bucket:1,path:2},postModify:f}];for(let D=0;D<P.length;D++){const z=P[D],k=z.regex.exec(e);if(k){const U=k[z.indices.bucket];let R=k[z.indices.path];R||(R=""),i=new ol(U,R),z.postModify(i);break}}if(i==null)throw wme(e);return i}}class Rme{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pme(n,e,t){let i=1,r=null,a=null,s=!1,o=0;function c(){return o===2}let f=!1;function h(...S){f||(f=!0,e.apply(null,S))}function p(S){r=setTimeout(()=>{r=null,n(y,c())},S)}function v(){a&&clearTimeout(a)}function y(S,...w){if(f){v();return}if(S){v(),h.call(null,S,...w);return}if(c()||s){v(),h.call(null,S,...w);return}i<64&&(i*=2);let P;o===1?(o=2,P=0):P=(i+Math.random())*1e3,p(P)}let _=!1;function E(S){_||(_=!0,v(),!f&&(r!==null?(S||(o=2),clearTimeout(r),p(0)):S||(o=1)))}return p(0),a=setTimeout(()=>{s=!0,E(!0)},t),E}function Nme(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ome(n){return n!==void 0}function Dme(n){return typeof n=="object"&&!Array.isArray(n)}function $D(n){return typeof n=="string"||n instanceof String}function oz(n){return XD()&&n instanceof Blob}function XD(){return typeof Blob<"u"}function lz(n,e,t,i){if(i<e)throw rO(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw rO(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function q7(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const r=e(i)+"="+e(n[i]);t=t+r+"&"}return t=t.slice(0,-1),t}var Zm;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Zm||(Zm={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lme(n,e){const t=n>=500&&n<600,r=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||r||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kme{constructor(e,t,i,r,a,s,o,c,f,h,p,v=!0,y=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=a,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=h,this.connectionFactory_=p,this.retry=v,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,E)=>{this.resolve_=_,this.reject_=E,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Nw(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const s=o=>{const c=o.loaded,f=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&a.addUploadProgressListener(s),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(s),this.pendingConnection_=null;const o=a.getErrorCode()===Zm.NO_ERROR,c=a.getStatus();if(!o||Lme(c,this.additionalRetryCodes_)&&this.retry){const h=a.getErrorCode()===Zm.ABORT;i(!1,new Nw(!1,null,h));return}const f=this.successCodes_.indexOf(c)!==-1;i(!0,new Nw(f,a))})},t=(i,r)=>{const a=this.resolve_,s=this.reject_,o=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(o,o.getResponse());Ome(c)?a(c):a()}catch(c){s(c)}else if(o!==null){const c=qD();c.serverResponse=o.getErrorText(),this.errorCallback_?s(this.errorCallback_(o,c)):s(c)}else if(r.canceled){const c=this.appDelete_?W7():Sme();s(c)}else{const c=xme();s(c)}};this.canceled_?t(!1,new Nw(!1,null,!0)):this.backoffId_=Pme(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Nme(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Nw{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function Ume(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Fme(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function zme(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Bme(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Vme(n,e,t,i,r,a,s=!0,o=!1){const c=q7(n.urlParams),f=n.url+c,h=Object.assign({},n.headers);return zme(h,e),Ume(h,t),Fme(h,a),Bme(h,i),new kme(f,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jme(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Hme(...n){const e=jme();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(XD())return new Blob(n);throw new Dr(Or.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Gme(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wme(n){if(typeof atob>"u")throw Cme("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class RR{constructor(e,t){this.data=e,this.contentType=t||null}}function qme(n,e){switch(n){case Vu.RAW:return new RR($7(e));case Vu.BASE64:case Vu.BASE64URL:return new RR(X7(n,e));case Vu.DATA_URL:return new RR(Xme(e),Yme(e))}throw qD()}function $7(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=i,s=n.charCodeAt(++t);i=65536|(a&1023)<<10|s&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function $me(n){let e;try{e=decodeURIComponent(n)}catch{throw R_(Vu.DATA_URL,"Malformed data URL.")}return $7(e)}function X7(n,e){switch(n){case Vu.BASE64:{const r=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(r||a)throw R_(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Vu.BASE64URL:{const r=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(r||a)throw R_(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Wme(e)}catch(r){throw r.message.includes("polyfill")?r:R_(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class Y7{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw R_(Vu.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=Kme(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function Xme(n){const e=new Y7(n);return e.base64?X7(Vu.BASE64,e.rest):$me(e.rest)}function Yme(n){return new Y7(n).contentType}function Kme(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t){let i=0,r="";oz(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(oz(this.data_)){const i=this.data_,r=Gme(i,e,t);return r===null?null:new Vd(r)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Vd(i,!0)}}static getBlob(...e){if(XD()){const t=e.map(i=>i instanceof Vd?i.data_:i);return new Vd(Hme.apply(null,t))}else{const t=e.map(s=>$D(s)?qme(Vu.RAW,s).data:s.data_);let i=0;t.forEach(s=>{i+=s.byteLength});const r=new Uint8Array(i);let a=0;return t.forEach(s=>{for(let o=0;o<s.length;o++)r[a++]=s[o]}),new Vd(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K7(n){let e;try{e=JSON.parse(n)}catch{return null}return Dme(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zme(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Qme(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function Z7(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jme(n,e){return e}class Ys{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||Jme}}let Ow=null;function ege(n){return!$D(n)||n.length<2?n:Z7(n)}function Q7(){if(Ow)return Ow;const n=[];n.push(new Ys("bucket")),n.push(new Ys("generation")),n.push(new Ys("metageneration")),n.push(new Ys("name","fullPath",!0));function e(a,s){return ege(s)}const t=new Ys("name");t.xform=e,n.push(t);function i(a,s){return s!==void 0?Number(s):s}const r=new Ys("size");return r.xform=i,n.push(r),n.push(new Ys("timeCreated")),n.push(new Ys("updated")),n.push(new Ys("md5Hash",null,!0)),n.push(new Ys("cacheControl",null,!0)),n.push(new Ys("contentDisposition",null,!0)),n.push(new Ys("contentEncoding",null,!0)),n.push(new Ys("contentLanguage",null,!0)),n.push(new Ys("contentType",null,!0)),n.push(new Ys("metadata","customMetadata",!0)),Ow=n,Ow}function tge(n,e){function t(){const i=n.bucket,r=n.fullPath,a=new ol(i,r);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function nge(n,e,t){const i={};i.type="file";const r=t.length;for(let a=0;a<r;a++){const s=t[a];i[s.local]=s.xform(i,e[s.server])}return tge(i,n),i}function J7(n,e,t){const i=K7(e);return i===null?null:nge(n,i,t)}function ige(n,e,t,i){const r=K7(e);if(r===null||!$D(r.downloadTokens))return null;const a=r.downloadTokens;if(a.length===0)return null;const s=encodeURIComponent;return a.split(",").map(f=>{const h=n.bucket,p=n.fullPath,v="/b/"+s(h)+"/o/"+s(p),y=YD(v,t,i),_=q7({alt:"media",token:f});return y+_})[0]}function rge(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const a=e[r];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class eG{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tG(n){if(!n)throw qD()}function age(n,e){function t(i,r){const a=J7(n,r,e);return tG(a!==null),a}return t}function sge(n,e){function t(i,r){const a=J7(n,r,e);return tG(a!==null),ige(a,r,n.host,n._protocol)}return t}function nG(n){function e(t,i){let r;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?r=bme():r=yme():t.getStatus()===402?r=vme(n.bucket):t.getStatus()===403?r=_me(n.path):r=i,r.status=t.getStatus(),r.serverResponse=i.serverResponse,r}return e}function oge(n){const e=nG(n);function t(i,r){let a=e(i,r);return i.getStatus()===404&&(a=gme(n.path)),a.serverResponse=r.serverResponse,a}return t}function lge(n,e,t){const i=e.fullServerUrl(),r=YD(i,n.host,n._protocol),a="GET",s=n.maxOperationRetryTime,o=new eG(r,a,sge(n,t),s);return o.errorHandler=oge(e),o}function cge(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function uge(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=cge(null,e)),i}function fge(n,e,t,i,r){const a=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function o(){let P="";for(let D=0;D<2;D++)P=P+Math.random().toString().slice(2);return P}const c=o();s["Content-Type"]="multipart/related; boundary="+c;const f=uge(e,i,r),h=rge(f,t),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+f.contentType+`\r
\r
`,v=`\r
--`+c+"--",y=Vd.getBlob(p,i,v);if(y===null)throw Ame();const _={name:f.fullPath},E=YD(a,n.host,n._protocol),S="POST",w=n.maxUploadRetryTime,I=new eG(E,S,age(n,t),w);return I.urlParams=_,I.headers=s,I.body=y.uploadData(),I.errorHandler=nG(e),I}class hge{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Zm.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Zm.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Zm.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r,a){if(this.sent_)throw Xb("cannot .send() more than once");if(_p(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const s in a)a.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,a[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xb("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xb("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xb("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xb("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class dge extends hge{initXhr(){this.xhr_.responseType="text"}}function iG(){return new dge}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,t){this._service=e,t instanceof ol?this._location=t:this._location=ol.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new hg(e,t)}get root(){const e=new ol(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Z7(this._location.path)}get storage(){return this._service}get parent(){const e=Zme(this._location.path);if(e===null)return null;const t=new ol(this._location.bucket,e);return new hg(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Ime(e)}}function pge(n,e,t){n._throwIfRoot("uploadBytes");const i=fge(n.storage,n._location,Q7(),new Vd(e,!0),t);return n.storage.makeRequestWithTokens(i,iG).then(r=>({metadata:r,ref:n}))}function mge(n){n._throwIfRoot("getDownloadURL");const e=lge(n.storage,n._location,Q7());return n.storage.makeRequestWithTokens(e,iG).then(t=>{if(t===null)throw Mme();return t})}function gge(n,e){const t=Qme(n._location.path,e),i=new ol(n._location.bucket,t);return new hg(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vge(n){return/^[A-Za-z]+:\/\//.test(n)}function yge(n,e){return new hg(n,e)}function rG(n,e){if(n instanceof KD){const t=n;if(t._bucket==null)throw Tme();const i=new hg(t,t._bucket);return e!=null?rG(i,e):i}else return e!==void 0?gge(n,e):n}function bge(n,e){if(e&&vge(e)){if(n instanceof KD)return yge(n,e);throw rO("To use ref(service, url), the first argument must be a Storage instance.")}else return rG(n,e)}function cz(n,e){const t=e==null?void 0:e[G7];return t==null?null:ol.makeFromBucketSpec(t,n)}function _ge(n,e,t,i={}){n.host=`${e}:${t}`;const r=_p(e);r&&(J3(`https://${n.host}/b`),eD("Storage",!0)),n._isUsingEmulator=!0,n._protocol=r?"https":"http";const{mockUserToken:a}=i;a&&(n._overrideAuthToken=typeof a=="string"?a:O9(a,n.app.options.projectId))}class KD{constructor(e,t,i,r,a,s=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=a,this._isUsingEmulator=s,this._bucket=null,this._host=H7,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pme,this._maxUploadRetryTime=mme,this._requests=new Set,r!=null?this._bucket=ol.makeFromBucketSpec(r,this._host):this._bucket=cz(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ol.makeFromBucketSpec(this._url,e):this._bucket=cz(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){lz("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){lz("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if($l(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hg(this,e)}_makeRequest(e,t,i,r,a=!0){if(this._deleted)return new Rme(W7());{const s=Vme(e,this._appId,i,r,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,r).getPromise()}}const uz="@firebase/storage",fz="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aG="storage";function hz(n,e,t){return n=qr(n),pge(n,e,t)}function dz(n){return n=qr(n),mge(n)}function pz(n,e){return n=qr(n),bge(n,e)}function xge(n=iD(),e){n=qr(n);const i=_M(n,aG).getImmediate({identifier:e}),r=R9("storage");return r&&Sge(i,...r),i}function Sge(n,e,t,i={}){_ge(n,e,t,i)}function wge(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new KD(t,i,r,e,Mg)}function Ege(){lg(new op(aG,wge,"PUBLIC").setMultipleInstances(!0)),Wu(uz,fz,""),Wu(uz,fz,"esm2020")}Ege();const Tge={apiKey:"AIzaSyCI9AH2vtxc9IhHdQBzA_5QPJDF5p-OTUE",authDomain:"tunas-craft.firebaseapp.com",projectId:"tunas-craft",storageBucket:"tunas-craft.appspot.com",messagingSenderId:"805844799800",appId:"1:805844799800:web:8c3332ee01c3c4f9c1f1cd",measurementId:"G-BMF86Q9D45"},ZD=k9(Tge),Rc=Qhe(ZD),PR=hme(ZD),mz=xge(ZD),sG=q.createContext(),BM=()=>q.useContext(sG),Age=({children:n})=>{const[e,t]=q.useState([]),[i,r]=q.useState([]),[a,s]=q.useState([]),[o,c]=q.useState([]),[f,h]=q.useState(null),[p,v]=q.useState(!0),y=Mw(Rc,"clients"),_=Mw(Rc,"orders"),E=Mw(Rc,"leads"),S=Mw(Rc,"expenses");q.useEffect(()=>{const J=epe(PR,G=>{if(h(G),v(!1),G){const $=Rw(y,Q=>{t(Q.docs.map(re=>({...re.data(),id:re.id})))}),ae=Rw(_,Q=>{r(Q.docs.map(re=>({...re.data(),id:re.id})))}),le=Rw(E,Q=>{s(Q.docs.map(re=>({...re.data(),id:re.id})))}),ue=Rw(S,Q=>{c(Q.docs.map(re=>({...re.data(),id:re.id})))});return()=>{$(),ae(),le(),ue()}}else t([]),r([]),s([]),c([])});return()=>J()},[]);const w=async()=>{const J=new nh;try{await xpe(PR,J)}catch(G){console.error("Login failed",G),G.code==="auth/unauthorized-domain"?alert("Error: El dominio no est autorizado. Ve a Firebase Console -> Authentication -> Settings -> Authorized Domains y agrega 'tunascraft.com'."):alert("Error al iniciar sesin: "+G.message)}},I=async()=>{try{await tpe(PR)}catch(J){console.error("Logout failed",J)}},P=async J=>{try{const G={...J,joinedAt:new Date().toISOString()},$=await Iw(y,G);return{...G,id:$.id}}catch(G){throw console.error("Error adding client:",G),alert(`Error guardando cliente: ${G.code} - ${G.message}`),G}},D=async(J,G)=>{const $=Od(Rc,"clients",J);await Cw($,G)},z=async J=>{try{const G=Od(Rc,"clients",J);await AR(G)}catch(G){console.error("Error deleting client:",G),alert(`Error al eliminar cliente: ${G.code} - ${G.message}`)}},k=async J=>{let G=parseFloat(J.total);const $=e.find(ue=>ue.id===J.clientId);$&&($.type==="mayorista"&&(G*=.9),$.type==="distribuidor"&&(G*=.75));const ae={...J,total:G.toFixed(2),remaining:(G-(J.advance||0)).toFixed(2),date:new Date().toLocaleDateString("es-MX"),status:J.status||"pedido"},le=await Iw(_,ae);return{...ae,id:le.id}},U=async(J,G)=>{const $=Od(Rc,"orders",J);await Cw($,{status:G})},R=async(J,G)=>{const $=Od(Rc,"orders",J);await Cw($,G)};q.useEffect(()=>{window.updateOrderContext=R},[i]);const M=async J=>{try{const G=Od(Rc,"orders",J);await AR(G)}catch(G){console.error("Error deleting order:",G),alert(`Error al eliminar pedido: ${G.code} - ${G.message}`)}},L=async J=>{const G={...J,date:new Date().toLocaleDateString("es-MX"),status:"Nuevo"},$=await Iw(E,G);return{...G,id:$.id}},B=async(J,G)=>{const $=Od(Rc,"leads",J);await Cw($,{status:G})},V=async J=>{const G={...J,amount:parseFloat(J.amount),date:J.date||new Date().toISOString()},$=await Iw(S,G);return{...G,id:$.id}},j=async J=>{try{const G=Od(Rc,"expenses",J);await AR(G)}catch(G){console.error("Error deleting expense:",G),alert(`Error al eliminar gasto: ${G.code} - ${G.message}`)}},Z=async J=>{console.warn("Import not fully supported in Firebase version yet.")};return N.jsx(sG.Provider,{value:{clients:e,orders:i,leads:a,user:f,loadingAuth:p,login:w,logout:I,addClient:P,updateClient:D,deleteClient:z,addOrder:k,updateOrderStatus:U,updateOrder:R,deleteOrder:M,addLead:L,updateLeadStatus:B,expenses:o,addExpense:V,deleteExpense:j,importDatabase:Z},children:n})};function oG(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=oG(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function rr(){for(var n,e,t=0,i="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=oG(n))&&(i&&(i+=" "),i+=e);return i}var Mge=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function QD(n){if(typeof n!="string")return!1;var e=Mge;return e.includes(n)}var Cge=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Ige=new Set(Cge);function lG(n){return typeof n!="string"?!1:Ige.has(n)}function cG(n){return typeof n=="string"&&n.startsWith("data-")}function Hc(n){if(typeof n!="object"||n===null)return{};var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(lG(t)||cG(t))&&(e[t]=n[t]);return e}function VM(n){if(n==null)return null;if(q.isValidElement(n)&&typeof n.props=="object"&&n.props!==null){var e=n.props;return Hc(e)}return typeof n=="object"&&!Array.isArray(n)?Hc(n):null}function ec(n){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(lG(t)||cG(t)||QD(t))&&(e[t]=n[t]);return e}function Rge(n){return n==null?null:q.isValidElement(n)?ec(n.props):typeof n=="object"&&!Array.isArray(n)?ec(n):null}var Pge=["children","width","height","viewBox","className","style","title","desc"];function aO(){return aO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},aO.apply(null,arguments)}function Nge(n,e){if(n==null)return{};var t,i,r=Oge(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function Oge(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var uG=q.forwardRef((n,e)=>{var{children:t,width:i,height:r,viewBox:a,className:s,style:o,title:c,desc:f}=n,h=Nge(n,Pge),p=a||{width:i,height:r,x:0,y:0},v=rr("recharts-surface",s);return q.createElement("svg",aO({},ec(h),{className:v,width:i,height:r,style:o,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:e}),q.createElement("title",null,c),q.createElement("desc",null,f),t)}),Dge=["children","className"];function sO(){return sO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},sO.apply(null,arguments)}function Lge(n,e){if(n==null)return{};var t,i,r=kge(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function kge(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var af=q.forwardRef((n,e)=>{var{children:t,className:i}=n,r=Lge(n,Dge),a=rr("recharts-layer",i);return q.createElement("g",sO({className:a},ec(r),{ref:e}),t)}),Uge=q.createContext(null);function Rr(n){return function(){return n}}const oO=Math.PI,lO=2*oO,Cm=1e-6,Fge=lO-Cm;function fG(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function zge(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return fG;const t=10**e;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*t)/t+i[r]}}class Bge{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?fG:zge(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,i,r){this._append`Q${+e},${+t},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,t,i,r,a,s){this._append`C${+e},${+t},${+i},${+r},${this._x1=+a},${this._y1=+s}`}arcTo(e,t,i,r,a){if(e=+e,t=+t,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=i-e,f=r-t,h=s-e,p=o-t,v=h*h+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(v>Cm)if(!(Math.abs(p*c-f*h)>Cm)||!a)this._append`L${this._x1=e},${this._y1=t}`;else{let y=i-s,_=r-o,E=c*c+f*f,S=y*y+_*_,w=Math.sqrt(E),I=Math.sqrt(v),P=a*Math.tan((oO-Math.acos((E+v-S)/(2*w*I)))/2),D=P/I,z=P/w;Math.abs(D-1)>Cm&&this._append`L${e+D*h},${t+D*p}`,this._append`A${a},${a},0,0,${+(p*y>h*_)},${this._x1=e+z*c},${this._y1=t+z*f}`}}arc(e,t,i,r,a,s){if(e=+e,t=+t,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let o=i*Math.cos(r),c=i*Math.sin(r),f=e+o,h=t+c,p=1^s,v=s?r-a:a-r;this._x1===null?this._append`M${f},${h}`:(Math.abs(this._x1-f)>Cm||Math.abs(this._y1-h)>Cm)&&this._append`L${f},${h}`,i&&(v<0&&(v=v%lO+lO),v>Fge?this._append`A${i},${i},0,1,${p},${e-o},${t-c}A${i},${i},0,1,${p},${this._x1=f},${this._y1=h}`:v>Cm&&this._append`A${i},${i},0,${+(v>=oO)},${p},${this._x1=e+i*Math.cos(a)},${this._y1=t+i*Math.sin(a)}`)}rect(e,t,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function hG(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const i=Math.floor(t);if(!(i>=0))throw new RangeError(`invalid digits: ${t}`);e=i}return n},()=>new Bge(e)}function JD(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function dG(n){this._context=n}dG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:this._context.lineTo(n,e);break}}};function jM(n){return new dG(n)}function pG(n){return n[0]}function mG(n){return n[1]}function gG(n,e){var t=Rr(!0),i=null,r=jM,a=null,s=hG(o);n=typeof n=="function"?n:n===void 0?pG:Rr(n),e=typeof e=="function"?e:e===void 0?mG:Rr(e);function o(c){var f,h=(c=JD(c)).length,p,v=!1,y;for(i==null&&(a=r(y=s())),f=0;f<=h;++f)!(f<h&&t(p=c[f],f,c))===v&&((v=!v)?a.lineStart():a.lineEnd()),v&&a.point(+n(p,f,c),+e(p,f,c));if(y)return a=null,y+""||null}return o.x=function(c){return arguments.length?(n=typeof c=="function"?c:Rr(+c),o):n},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:Rr(+c),o):e},o.defined=function(c){return arguments.length?(t=typeof c=="function"?c:Rr(!!c),o):t},o.curve=function(c){return arguments.length?(r=c,i!=null&&(a=r(i)),o):r},o.context=function(c){return arguments.length?(c==null?i=a=null:a=r(i=c),o):i},o}function Dw(n,e,t){var i=null,r=Rr(!0),a=null,s=jM,o=null,c=hG(f);n=typeof n=="function"?n:n===void 0?pG:Rr(+n),e=typeof e=="function"?e:Rr(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?mG:Rr(+t);function f(p){var v,y,_,E=(p=JD(p)).length,S,w=!1,I,P=new Array(E),D=new Array(E);for(a==null&&(o=s(I=c())),v=0;v<=E;++v){if(!(v<E&&r(S=p[v],v,p))===w)if(w=!w)y=v,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),_=v-1;_>=y;--_)o.point(P[_],D[_]);o.lineEnd(),o.areaEnd()}w&&(P[v]=+n(S,v,p),D[v]=+e(S,v,p),o.point(i?+i(S,v,p):P[v],t?+t(S,v,p):D[v]))}if(I)return o=null,I+""||null}function h(){return gG().defined(r).curve(s).context(a)}return f.x=function(p){return arguments.length?(n=typeof p=="function"?p:Rr(+p),i=null,f):n},f.x0=function(p){return arguments.length?(n=typeof p=="function"?p:Rr(+p),f):n},f.x1=function(p){return arguments.length?(i=p==null?null:typeof p=="function"?p:Rr(+p),f):i},f.y=function(p){return arguments.length?(e=typeof p=="function"?p:Rr(+p),t=null,f):e},f.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Rr(+p),f):e},f.y1=function(p){return arguments.length?(t=p==null?null:typeof p=="function"?p:Rr(+p),f):t},f.lineX0=f.lineY0=function(){return h().x(n).y(e)},f.lineY1=function(){return h().x(n).y(t)},f.lineX1=function(){return h().x(i).y(e)},f.defined=function(p){return arguments.length?(r=typeof p=="function"?p:Rr(!!p),f):r},f.curve=function(p){return arguments.length?(s=p,a!=null&&(o=s(a)),f):s},f.context=function(p){return arguments.length?(p==null?a=o=null:o=s(a=p),f):a},f}class vG{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function Vge(n){return new vG(n,!0)}function jge(n){return new vG(n,!1)}function UT(){}function FT(n,e,t){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+e)/6,(n._y0+4*n._y1+t)/6)}function yG(n){this._context=n}yG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:FT(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:FT(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function Hge(n){return new yG(n)}function bG(n){this._context=n}bG.prototype={areaStart:UT,areaEnd:UT,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x2=n,this._y2=e;break;case 1:this._point=2,this._x3=n,this._y3=e;break;case 2:this._point=3,this._x4=n,this._y4=e,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+e)/6);break;default:FT(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function Gge(n){return new bG(n)}function _G(n){this._context=n}_G.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+n)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 3:this._point=4;default:FT(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function Wge(n){return new _G(n)}function xG(n){this._context=n}xG.prototype={areaStart:UT,areaEnd:UT,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,e){n=+n,e=+e,this._point?this._context.lineTo(n,e):(this._point=1,this._context.moveTo(n,e))}};function qge(n){return new xG(n)}function gz(n){return n<0?-1:1}function vz(n,e,t){var i=n._x1-n._x0,r=e-n._x1,a=(n._y1-n._y0)/(i||r<0&&-0),s=(t-n._y1)/(r||i<0&&-0),o=(a*r+s*i)/(i+r);return(gz(a)+gz(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function yz(n,e){var t=n._x1-n._x0;return t?(3*(n._y1-n._y0)/t-e)/2:e}function NR(n,e,t){var i=n._x0,r=n._y0,a=n._x1,s=n._y1,o=(a-i)/3;n._context.bezierCurveTo(i+o,r+o*e,a-o,s-o*t,a,s)}function zT(n){this._context=n}zT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:NR(this,this._t0,yz(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){var t=NaN;if(n=+n,e=+e,!(n===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,NR(this,yz(this,t=vz(this,n,e)),t);break;default:NR(this,this._t0,t=vz(this,n,e));break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e,this._t0=t}}};function SG(n){this._context=new wG(n)}(SG.prototype=Object.create(zT.prototype)).point=function(n,e){zT.prototype.point.call(this,e,n)};function wG(n){this._context=n}wG.prototype={moveTo:function(n,e){this._context.moveTo(e,n)},closePath:function(){this._context.closePath()},lineTo:function(n,e){this._context.lineTo(e,n)},bezierCurveTo:function(n,e,t,i,r,a){this._context.bezierCurveTo(e,n,i,t,a,r)}};function $ge(n){return new zT(n)}function Xge(n){return new SG(n)}function EG(n){this._context=n}EG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,e=this._y,t=n.length;if(t)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),t===2)this._context.lineTo(n[1],e[1]);else for(var i=bz(n),r=bz(e),a=0,s=1;s<t;++a,++s)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],n[s],e[s]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,e){this._x.push(+n),this._y.push(+e)}};function bz(n){var e,t=n.length-1,i,r=new Array(t),a=new Array(t),s=new Array(t);for(r[0]=0,a[0]=2,s[0]=n[0]+2*n[1],e=1;e<t-1;++e)r[e]=1,a[e]=4,s[e]=4*n[e]+2*n[e+1];for(r[t-1]=2,a[t-1]=7,s[t-1]=8*n[t-1]+n[t],e=1;e<t;++e)i=r[e]/a[e-1],a[e]-=i,s[e]-=i*s[e-1];for(r[t-1]=s[t-1]/a[t-1],e=t-2;e>=0;--e)r[e]=(s[e]-r[e+1])/a[e];for(a[t-1]=(n[t]+r[t-1])/2,e=0;e<t-1;++e)a[e]=2*n[e+1]-r[e+1];return[r,a]}function Yge(n){return new EG(n)}function HM(n,e){this._context=n,this._t=e}HM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(n,e);else{var t=this._x*(1-this._t)+n*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=n,this._y=e}};function Kge(n){return new HM(n,.5)}function Zge(n){return new HM(n,0)}function Qge(n){return new HM(n,1)}function dg(n,e){if((s=n.length)>1)for(var t=1,i,r,a=n[e[0]],s,o=a.length;t<s;++t)for(r=a,a=n[e[t]],i=0;i<o;++i)a[i][1]+=a[i][0]=isNaN(r[i][1])?r[i][0]:r[i][1]}function cO(n){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=e;return t}function Jge(n,e){return n[e]}function e0e(n){const e=[];return e.key=n,e}function t0e(){var n=Rr([]),e=cO,t=dg,i=Jge;function r(a){var s=Array.from(n.apply(this,arguments),e0e),o,c=s.length,f=-1,h;for(const p of a)for(o=0,++f;o<c;++o)(s[o][f]=[0,+i(p,s[o].key,f,a)]).data=p;for(o=0,h=JD(e(s));o<c;++o)s[h[o]].index=o;return t(s,h),s}return r.keys=function(a){return arguments.length?(n=typeof a=="function"?a:Rr(Array.from(a)),r):n},r.value=function(a){return arguments.length?(i=typeof a=="function"?a:Rr(+a),r):i},r.order=function(a){return arguments.length?(e=a==null?cO:typeof a=="function"?a:Rr(Array.from(a)),r):e},r.offset=function(a){return arguments.length?(t=a??dg,r):t},r}function n0e(n,e){if((i=n.length)>0){for(var t,i,r=0,a=n[0].length,s;r<a;++r){for(s=t=0;t<i;++t)s+=n[t][r][1]||0;if(s)for(t=0;t<i;++t)n[t][r][1]/=s}dg(n,e)}}function i0e(n,e){if((r=n.length)>0){for(var t=0,i=n[e[0]],r,a=i.length;t<a;++t){for(var s=0,o=0;s<r;++s)o+=n[s][t][1]||0;i[t][1]+=i[t][0]=-o/2}dg(n,e)}}function r0e(n,e){if(!(!((s=n.length)>0)||!((a=(r=n[e[0]]).length)>0))){for(var t=0,i=1,r,a,s;i<a;++i){for(var o=0,c=0,f=0;o<s;++o){for(var h=n[e[o]],p=h[i][1]||0,v=h[i-1][1]||0,y=(p-v)/2,_=0;_<o;++_){var E=n[e[_]],S=E[i][1]||0,w=E[i-1][1]||0;y+=S-w}c+=p,f+=y*p}r[i-1][1]+=r[i-1][0]=t,c&&(t-=f/c)}r[i-1][1]+=r[i-1][0]=t,dg(n,e)}}var OR={},DR={},_z;function a0e(){return _z||(_z=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==="__proto__"}n.isUnsafeProperty=e})(DR)),DR}var LR={},xz;function TG(){return xz||(xz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){switch(typeof t){case"number":case"symbol":return!1;case"string":return t.includes(".")||t.includes("[")||t.includes("]")}}n.isDeepKey=e})(LR)),LR}var kR={},Sz;function eL(){return Sz||(Sz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){var i;return typeof t=="string"||typeof t=="symbol"?t:Object.is((i=t==null?void 0:t.valueOf)==null?void 0:i.call(t),-0)?"-0":String(t)}n.toKey=e})(kR)),kR}var UR={},FR={},wz;function s0e(){return wz||(wz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){if(t==null)return"";if(typeof t=="string")return t;if(Array.isArray(t))return t.map(e).join(",");const i=String(t);return i==="0"&&Object.is(Number(t),-0)?"-0":i}n.toString=e})(FR)),FR}var Ez;function tL(){return Ez||(Ez=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=s0e(),t=eL();function i(r){if(Array.isArray(r))return r.map(t.toKey);if(typeof r=="symbol")return[r];r=e.toString(r);const a=[],s=r.length;if(s===0)return a;let o=0,c="",f="",h=!1;for(r.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const p=r[o];f?p==="\\"&&o+1<s?(o++,c+=r[o]):p===f?f="":c+=p:h?p==='"'||p==="'"?f=p:p==="]"?(h=!1,a.push(c),c=""):c+=p:p==="["?(h=!0,c&&(a.push(c),c="")):p==="."?c&&(a.push(c),c=""):c+=p,o++}return c&&a.push(c),a}n.toPath=i})(UR)),UR}var Tz;function nL(){return Tz||(Tz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=a0e(),t=TG(),i=eL(),r=tL();function a(o,c,f){if(o==null)return f;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return f;const h=o[c];return h===void 0?t.isDeepKey(c)?a(o,r.toPath(c),f):f:h}case"number":case"symbol":{typeof c=="number"&&(c=i.toKey(c));const h=o[c];return h===void 0?f:h}default:{if(Array.isArray(c))return s(o,c,f);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return f;const h=o[c];return h===void 0?f:h}}}function s(o,c,f){if(c.length===0)return f;let h=o;for(let p=0;p<c.length;p++){if(h==null||e.isUnsafeProperty(c[p]))return f;h=h[c[p]]}return h===void 0?f:h}n.get=a})(OR)),OR}var zR,Az;function o0e(){return Az||(Az=1,zR=nL().get),zR}var l0e=o0e();const GM=Wc(l0e);var c0e=4;function Xd(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c0e,t=10**e,i=Math.round(n*t)/t;return Object.is(i,-0)?0:i}function Qa(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return n.reduce((r,a,s)=>{var o=t[s-1];return typeof o=="string"?r+o+a:o!==void 0?r+Xd(o)+a:r+a},"")}var Yl=n=>n===0?0:n>0?1:-1,sf=n=>typeof n=="number"&&n!=+n,pg=n=>typeof n=="string"&&n.indexOf("%")===n.length-1,Zt=n=>(typeof n=="number"||n instanceof Number)&&!sf(n),of=n=>Zt(n)||typeof n=="string",u0e=0,cx=n=>{var e=++u0e;return"".concat(n||"").concat(e)},pp=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Zt(e)&&typeof e!="string")return i;var a;if(pg(e)){if(t==null)return i;var s=e.indexOf("%");a=t*parseFloat(e.slice(0,s))/100}else a=+e;return sf(a)&&(a=i),r&&t!=null&&a>t&&(a=t),a},AG=n=>{if(!Array.isArray(n))return!1;for(var e=n.length,t={},i=0;i<e;i++)if(!t[String(n[i])])t[String(n[i])]=!0;else return!0;return!1};function Du(n,e,t){return Zt(n)&&Zt(e)?Xd(n+t*(e-n)):e}function MG(n,e,t){if(!(!n||!n.length))return n.find(i=>i&&(typeof e=="function"?e(i):GM(i,e))===t)}var Ns=n=>n===null||typeof n>"u",iL=n=>Ns(n)?n:"".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));function Fo(n){return n!=null}function ly(){}var CG=n=>"radius"in n&&"startAngle"in n&&"endAngle"in n,rL=(n,e)=>{if(!n||typeof n=="function"||typeof n=="boolean")return null;var t=n;if(q.isValidElement(n)&&(t=n.props),typeof t!="object"&&typeof t!="function")return null;var i={};return Object.keys(t).forEach(r=>{QD(r)&&(i[r]=(a=>t[r](t,a)))}),i},f0e=(n,e,t)=>i=>(n(e,t,i),null),h0e=(n,e,t)=>{if(n===null||typeof n!="object"&&typeof n!="function")return null;var i=null;return Object.keys(n).forEach(r=>{var a=n[r];QD(r)&&typeof a=="function"&&(i||(i={}),i[r]=f0e(a,e,t))}),i};function Mz(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function d0e(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Mz(Object(t),!0).forEach(function(i){p0e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Mz(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function p0e(n,e,t){return(e=m0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function m0e(n){var e=g0e(n,"string");return typeof e=="symbol"?e:e+""}function g0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function pl(n,e){var t=d0e({},n),i=e,r=Object.keys(e),a=r.reduce((s,o)=>(s[o]===void 0&&i[o]!==void 0&&(s[o]=i[o]),s),t);return a}var BR={},VR={},Cz;function v0e(){return Cz||(Cz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,i){const r=new Map;for(let a=0;a<t.length;a++){const s=t[a],o=i(s,a,t);r.has(o)||r.set(o,s)}return Array.from(r.values())}n.uniqBy=e})(VR)),VR}var jR={},Iz;function y0e(){return Iz||(Iz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,i){return function(...r){return t.apply(this,r.slice(0,i))}}n.ary=e})(jR)),jR}var HR={},Rz;function IG(){return Rz||(Rz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t}n.identity=e})(HR)),HR}var GR={},WR={},qR={},Pz;function b0e(){return Pz||(Pz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Number.isSafeInteger(t)&&t>=0}n.isLength=e})(qR)),qR}var Nz;function aL(){return Nz||(Nz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=b0e();function t(i){return i!=null&&typeof i!="function"&&e.isLength(i.length)}n.isArrayLike=t})(WR)),WR}var $R={},Oz;function _0e(){return Oz||(Oz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="object"&&t!==null}n.isObjectLike=e})($R)),$R}var Dz;function x0e(){return Dz||(Dz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=aL(),t=_0e();function i(r){return t.isObjectLike(r)&&e.isArrayLike(r)}n.isArrayLikeObject=i})(GR)),GR}var XR={},YR={},Lz;function S0e(){return Lz||(Lz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=nL();function t(i){return function(r){return e.get(r,i)}}n.property=t})(YR)),YR}var KR={},ZR={},QR={},JR={},kz;function RG(){return kz||(kz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t!==null&&(typeof t=="object"||typeof t=="function")}n.isObject=e})(JR)),JR}var eP={},Uz;function PG(){return Uz||(Uz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==null||typeof t!="object"&&typeof t!="function"}n.isPrimitive=e})(eP)),eP}var tP={},Fz;function NG(){return Fz||(Fz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,i){return t===i||Number.isNaN(t)&&Number.isNaN(i)}n.isEqualsSameValueZero=e})(tP)),tP}var zz;function w0e(){return zz||(zz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=RG(),t=PG(),i=NG();function r(h,p,v){return typeof v!="function"?r(h,p,()=>{}):a(h,p,function y(_,E,S,w,I,P){const D=v(_,E,S,w,I,P);return D!==void 0?!!D:a(_,E,y,P)},new Map)}function a(h,p,v,y){if(p===h)return!0;switch(typeof p){case"object":return s(h,p,v,y);case"function":return Object.keys(p).length>0?a(h,{...p},v,y):i.isEqualsSameValueZero(h,p);default:return e.isObject(h)?typeof p=="string"?p==="":!0:i.isEqualsSameValueZero(h,p)}}function s(h,p,v,y){if(p==null)return!0;if(Array.isArray(p))return c(h,p,v,y);if(p instanceof Map)return o(h,p,v,y);if(p instanceof Set)return f(h,p,v,y);const _=Object.keys(p);if(h==null||t.isPrimitive(h))return _.length===0;if(_.length===0)return!0;if(y!=null&&y.has(p))return y.get(p)===h;y==null||y.set(p,h);try{for(let E=0;E<_.length;E++){const S=_[E];if(!t.isPrimitive(h)&&!(S in h)||p[S]===void 0&&h[S]!==void 0||p[S]===null&&h[S]!==null||!v(h[S],p[S],S,h,p,y))return!1}return!0}finally{y==null||y.delete(p)}}function o(h,p,v,y){if(p.size===0)return!0;if(!(h instanceof Map))return!1;for(const[_,E]of p.entries()){const S=h.get(_);if(v(S,E,_,h,p,y)===!1)return!1}return!0}function c(h,p,v,y){if(p.length===0)return!0;if(!Array.isArray(h))return!1;const _=new Set;for(let E=0;E<p.length;E++){const S=p[E];let w=!1;for(let I=0;I<h.length;I++){if(_.has(I))continue;const P=h[I];let D=!1;if(v(P,S,E,h,p,y)&&(D=!0),D){_.add(I),w=!0;break}}if(!w)return!1}return!0}function f(h,p,v,y){return p.size===0?!0:h instanceof Set?c([...h],[...p],v,y):!1}n.isMatchWith=r,n.isSetMatch=f})(QR)),QR}var Bz;function OG(){return Bz||(Bz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=w0e();function t(i,r){return e.isMatchWith(i,r,()=>{})}n.isMatch=t})(ZR)),ZR}var nP={},iP={},rP={},Vz;function E0e(){return Vz||(Vz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Object.getOwnPropertySymbols(t).filter(i=>Object.prototype.propertyIsEnumerable.call(t,i))}n.getSymbols=e})(rP)),rP}var aP={},jz;function sL(){return jz||(jz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}n.getTag=e})(aP)),aP}var sP={},Hz;function DG(){return Hz||(Hz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",t="[object String]",i="[object Number]",r="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",c="[object Map]",f="[object Set]",h="[object Array]",p="[object Function]",v="[object ArrayBuffer]",y="[object Object]",_="[object Error]",E="[object DataView]",S="[object Uint8Array]",w="[object Uint8ClampedArray]",I="[object Uint16Array]",P="[object Uint32Array]",D="[object BigUint64Array]",z="[object Int8Array]",k="[object Int16Array]",U="[object Int32Array]",R="[object BigInt64Array]",M="[object Float32Array]",L="[object Float64Array]";n.argumentsTag=a,n.arrayBufferTag=v,n.arrayTag=h,n.bigInt64ArrayTag=R,n.bigUint64ArrayTag=D,n.booleanTag=r,n.dataViewTag=E,n.dateTag=o,n.errorTag=_,n.float32ArrayTag=M,n.float64ArrayTag=L,n.functionTag=p,n.int16ArrayTag=k,n.int32ArrayTag=U,n.int8ArrayTag=z,n.mapTag=c,n.numberTag=i,n.objectTag=y,n.regexpTag=e,n.setTag=f,n.stringTag=t,n.symbolTag=s,n.uint16ArrayTag=I,n.uint32ArrayTag=P,n.uint8ArrayTag=S,n.uint8ClampedArrayTag=w})(sP)),sP}var oP={},Gz;function T0e(){return Gz||(Gz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}n.isTypedArray=e})(oP)),oP}var Wz;function LG(){return Wz||(Wz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=E0e(),t=sL(),i=DG(),r=PG(),a=T0e();function s(h,p){return o(h,void 0,h,new Map,p)}function o(h,p,v,y=new Map,_=void 0){const E=_==null?void 0:_(h,p,v,y);if(E!==void 0)return E;if(r.isPrimitive(h))return h;if(y.has(h))return y.get(h);if(Array.isArray(h)){const S=new Array(h.length);y.set(h,S);for(let w=0;w<h.length;w++)S[w]=o(h[w],w,v,y,_);return Object.hasOwn(h,"index")&&(S.index=h.index),Object.hasOwn(h,"input")&&(S.input=h.input),S}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const S=new RegExp(h.source,h.flags);return S.lastIndex=h.lastIndex,S}if(h instanceof Map){const S=new Map;y.set(h,S);for(const[w,I]of h)S.set(w,o(I,w,v,y,_));return S}if(h instanceof Set){const S=new Set;y.set(h,S);for(const w of h)S.add(o(w,void 0,v,y,_));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(a.isTypedArray(h)){const S=new(Object.getPrototypeOf(h)).constructor(h.length);y.set(h,S);for(let w=0;w<h.length;w++)S[w]=o(h[w],w,v,y,_);return S}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const S=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return y.set(h,S),c(S,h,v,y,_),S}if(typeof File<"u"&&h instanceof File){const S=new File([h],h.name,{type:h.type});return y.set(h,S),c(S,h,v,y,_),S}if(typeof Blob<"u"&&h instanceof Blob){const S=new Blob([h],{type:h.type});return y.set(h,S),c(S,h,v,y,_),S}if(h instanceof Error){const S=new h.constructor;return y.set(h,S),S.message=h.message,S.name=h.name,S.stack=h.stack,S.cause=h.cause,c(S,h,v,y,_),S}if(h instanceof Boolean){const S=new Boolean(h.valueOf());return y.set(h,S),c(S,h,v,y,_),S}if(h instanceof Number){const S=new Number(h.valueOf());return y.set(h,S),c(S,h,v,y,_),S}if(h instanceof String){const S=new String(h.valueOf());return y.set(h,S),c(S,h,v,y,_),S}if(typeof h=="object"&&f(h)){const S=Object.create(Object.getPrototypeOf(h));return y.set(h,S),c(S,h,v,y,_),S}return h}function c(h,p,v=h,y,_){const E=[...Object.keys(p),...e.getSymbols(p)];for(let S=0;S<E.length;S++){const w=E[S],I=Object.getOwnPropertyDescriptor(h,w);(I==null||I.writable)&&(h[w]=o(p[w],w,v,y,_))}}function f(h){switch(t.getTag(h)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}n.cloneDeepWith=s,n.cloneDeepWithImpl=o,n.copyProperties=c})(iP)),iP}var qz;function A0e(){return qz||(qz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=LG();function t(i){return e.cloneDeepWithImpl(i,void 0,i,new Map,void 0)}n.cloneDeep=t})(nP)),nP}var $z;function M0e(){return $z||($z=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=OG(),t=A0e();function i(r){return r=t.cloneDeep(r),a=>e.isMatch(a,r)}n.matches=i})(KR)),KR}var lP={},cP={},uP={},Xz;function C0e(){return Xz||(Xz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=LG(),t=sL(),i=DG();function r(a,s){return e.cloneDeepWith(a,(o,c,f,h)=>{const p=s==null?void 0:s(o,c,f,h);if(p!==void 0)return p;if(typeof a=="object"){if(t.getTag(a)===i.objectTag&&typeof a.constructor!="function"){const v={};return h.set(a,v),e.copyProperties(v,a,f,h),v}switch(Object.prototype.toString.call(a)){case i.numberTag:case i.stringTag:case i.booleanTag:{const v=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(v,a),v}case i.argumentsTag:{const v={};return e.copyProperties(v,a),v.length=a.length,v[Symbol.iterator]=a[Symbol.iterator],v}default:return}}})}n.cloneDeepWith=r})(uP)),uP}var Yz;function I0e(){return Yz||(Yz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=C0e();function t(i){return e.cloneDeepWith(i)}n.cloneDeep=t})(cP)),cP}var fP={},hP={},Kz;function kG(){return Kz||(Kz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function t(i,r=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<r;case"symbol":return!1;case"string":return e.test(i)}}n.isIndex=t})(hP)),hP}var dP={},Zz;function R0e(){return Zz||(Zz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=sL();function t(i){return i!==null&&typeof i=="object"&&e.getTag(i)==="[object Arguments]"}n.isArguments=t})(dP)),dP}var Qz;function P0e(){return Qz||(Qz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=TG(),t=kG(),i=R0e(),r=tL();function a(s,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&e.isDeepKey(o)&&(s==null?void 0:s[o])==null?c=r.toPath(o):c=[o],c.length===0)return!1;let f=s;for(let h=0;h<c.length;h++){const p=c[h];if((f==null||!Object.hasOwn(f,p))&&!((Array.isArray(f)||i.isArguments(f))&&t.isIndex(p)&&p<f.length))return!1;f=f[p]}return!0}n.has=a})(fP)),fP}var Jz;function N0e(){return Jz||(Jz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=OG(),t=eL(),i=I0e(),r=nL(),a=P0e();function s(o,c){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=t.toKey(o);break}}return c=i.cloneDeep(c),function(f){const h=r.get(f,o);return h===void 0?a.has(f,o):c===void 0?h===void 0:e.isMatch(h,c)}}n.matchesProperty=s})(lP)),lP}var e5;function O0e(){return e5||(e5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=IG(),t=S0e(),i=M0e(),r=N0e();function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?r.matchesProperty(s[0],s[1]):i.matches(s);case"string":case"symbol":case"number":return t.property(s)}}n.iteratee=a})(XR)),XR}var t5;function D0e(){return t5||(t5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=v0e(),t=y0e(),i=IG(),r=x0e(),a=O0e();function s(o,c=i.identity){return r.isArrayLikeObject(o)?e.uniqBy(Array.from(o),t.ary(a.iteratee(c),1)):[]}n.uniqBy=s})(BR)),BR}var pP,n5;function L0e(){return n5||(n5=1,pP=D0e().uniqBy),pP}var k0e=L0e();const i5=Wc(k0e);function U0e(n,e,t){return e===!0?i5(n,t):typeof e=="function"?i5(n,e):n}var oL=q.createContext(null),F0e=n=>n,Na=()=>{var n=q.useContext(oL);return n?n.store.dispatch:F0e},uE=()=>{},z0e=()=>uE,B0e=(n,e)=>n===e;function hn(n){var e=q.useContext(oL),t=q.useMemo(()=>e?i=>{if(i!=null)return n(i)}:uE,[e,n]);return J8.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:z0e,e?e.store.getState:uE,e?e.store.getState:uE,t,B0e)}function V0e(n,e=`expected a function, instead received ${typeof n}`){if(typeof n!="function")throw new TypeError(e)}function j0e(n,e=`expected an object, instead received ${typeof n}`){if(typeof n!="object")throw new TypeError(e)}function H0e(n,e="expected all items to be functions, instead received the following types: "){if(!n.every(t=>typeof t=="function")){const t=n.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${t}]`)}}var r5=n=>Array.isArray(n)?n:[n];function G0e(n){const e=Array.isArray(n[0])?n[0]:n;return H0e(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function W0e(n,e){const t=[],{length:i}=n;for(let r=0;r<i;r++)t.push(n[r].apply(null,e));return t}var q0e=class{constructor(n){this.value=n}deref(){return this.value}},$0e=typeof WeakRef<"u"?WeakRef:q0e,X0e=0,a5=1;function Lw(){return{s:X0e,v:void 0,o:null,p:null}}function UG(n,e={}){let t=Lw();const{resultEqualityCheck:i}=e;let r,a=0;function s(){var p;let o=t;const{length:c}=arguments;for(let v=0,y=c;v<y;v++){const _=arguments[v];if(typeof _=="function"||typeof _=="object"&&_!==null){let E=o.o;E===null&&(o.o=E=new WeakMap);const S=E.get(_);S===void 0?(o=Lw(),E.set(_,o)):o=S}else{let E=o.p;E===null&&(o.p=E=new Map);const S=E.get(_);S===void 0?(o=Lw(),E.set(_,o)):o=S}}const f=o;let h;if(o.s===a5)h=o.v;else if(h=n.apply(null,arguments),a++,i){const v=((p=r==null?void 0:r.deref)==null?void 0:p.call(r))??r;v!=null&&i(v,h)&&(h=v,a!==0&&a--),r=typeof h=="object"&&h!==null||typeof h=="function"?new $0e(h):h}return f.s=a5,f.v=h,h}return s.clearCache=()=>{t=Lw(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function Y0e(n,...e){const t=typeof n=="function"?{memoize:n,memoizeOptions:e}:n,i=(...r)=>{let a=0,s=0,o,c={},f=r.pop();typeof f=="object"&&(c=f,f=r.pop()),V0e(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const h={...t,...c},{memoize:p,memoizeOptions:v=[],argsMemoize:y=UG,argsMemoizeOptions:_=[]}=h,E=r5(v),S=r5(_),w=G0e(r),I=p(function(){return a++,f.apply(null,arguments)},...E),P=y(function(){s++;const z=W0e(w,arguments);return o=I.apply(null,z),o},...S);return Object.assign(P,{resultFunc:f,memoizedResultFunc:I,dependencies:w,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:y})};return Object.assign(i,{withTypes:()=>i}),i}var Ye=Y0e(UG),K0e=Object.assign((n,e=Ye)=>{j0e(n,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof n}`);const t=Object.keys(n),i=t.map(a=>n[a]);return e(i,(...a)=>a.reduce((s,o,c)=>(s[t[c]]=o,s),{}))},{withTypes:()=>K0e}),mP={},gP={},vP={},s5;function Z0e(){return s5||(s5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(i){return typeof i=="symbol"?1:i===null?2:i===void 0?3:i!==i?4:0}const t=(i,r,a)=>{if(i!==r){const s=e(i),o=e(r);if(s===o&&s===0){if(i<r)return a==="desc"?1:-1;if(i>r)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};n.compareValues=t})(vP)),vP}var yP={},bP={},o5;function FG(){return o5||(o5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="symbol"||t instanceof Symbol}n.isSymbol=e})(bP)),bP}var l5;function Q0e(){return l5||(l5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=FG(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(i.test(a)||!t.test(a))||s!=null&&Object.hasOwn(s,a)}n.isKey=r})(yP)),yP}var c5;function J0e(){return c5||(c5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Z0e(),t=Q0e(),i=tL();function r(a,s,o,c){if(a==null)return[];o=c?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(y=>String(y));const f=(y,_)=>{let E=y;for(let S=0;S<_.length&&E!=null;++S)E=E[_[S]];return E},h=(y,_)=>_==null||y==null?_:typeof y=="object"&&"key"in y?Object.hasOwn(_,y.key)?_[y.key]:f(_,y.path):typeof y=="function"?y(_):Array.isArray(y)?f(_,y):typeof _=="object"?_[y]:_,p=s.map(y=>(Array.isArray(y)&&y.length===1&&(y=y[0]),y==null||typeof y=="function"||Array.isArray(y)||t.isKey(y)?y:{key:y,path:i.toPath(y)}));return a.map(y=>({original:y,criteria:p.map(_=>h(_,y))})).slice().sort((y,_)=>{for(let E=0;E<p.length;E++){const S=e.compareValues(y.criteria[E],_.criteria[E],o[E]);if(S!==0)return S}return 0}).map(y=>y.original)}n.orderBy=r})(gP)),gP}var _P={},u5;function eve(){return u5||(u5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,i=1){const r=[],a=Math.floor(i),s=(o,c)=>{for(let f=0;f<o.length;f++){const h=o[f];Array.isArray(h)&&c<a?s(h,c+1):r.push(h)}};return s(t,0),r}n.flatten=e})(_P)),_P}var xP={},f5;function zG(){return f5||(f5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=kG(),t=aL(),i=RG(),r=NG();function a(s,o,c){return i.isObject(c)&&(typeof o=="number"&&t.isArrayLike(c)&&e.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?r.isEqualsSameValueZero(c[o],s):!1}n.isIterateeCall=a})(xP)),xP}var h5;function tve(){return h5||(h5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=J0e(),t=eve(),i=zG();function r(a,...s){const o=s.length;return o>1&&i.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&i.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,t.flatten(s),["asc"])}n.sortBy=r})(mP)),mP}var SP,d5;function nve(){return d5||(d5=1,SP=tve().sortBy),SP}var ive=nve();const WM=Wc(ive);var BG=n=>n.legend.settings,rve=n=>n.legend.size,ave=n=>n.legend.payload;Ye([ave,BG],(n,e)=>{var{itemSorter:t}=e,i=n.flat(1);return t?WM(i,t):i});var kw=1;function sve(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,t]=q.useState({height:0,left:0,top:0,width:0}),i=q.useCallback(r=>{if(r!=null){var a=r.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>kw||Math.abs(s.left-e.left)>kw||Math.abs(s.top-e.top)>kw||Math.abs(s.width-e.width)>kw)&&t({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...n]);return[e,i]}function Za(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var ove=typeof Symbol=="function"&&Symbol.observable||"@@observable",p5=ove,wP=()=>Math.random().toString(36).substring(7).split("").join("."),lve={INIT:`@@redux/INIT${wP()}`,REPLACE:`@@redux/REPLACE${wP()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${wP()}`},BT=lve;function lL(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function VG(n,e,t){if(typeof n!="function")throw new Error(Za(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Za(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Za(1));return t(VG)(n,e)}let i=n,r=e,a=new Map,s=a,o=0,c=!1;function f(){s===a&&(s=new Map,a.forEach((S,w)=>{s.set(w,S)}))}function h(){if(c)throw new Error(Za(3));return r}function p(S){if(typeof S!="function")throw new Error(Za(4));if(c)throw new Error(Za(5));let w=!0;f();const I=o++;return s.set(I,S),function(){if(w){if(c)throw new Error(Za(6));w=!1,f(),s.delete(I),a=null}}}function v(S){if(!lL(S))throw new Error(Za(7));if(typeof S.type>"u")throw new Error(Za(8));if(typeof S.type!="string")throw new Error(Za(17));if(c)throw new Error(Za(9));try{c=!0,r=i(r,S)}finally{c=!1}return(a=s).forEach(I=>{I()}),S}function y(S){if(typeof S!="function")throw new Error(Za(10));i=S,v({type:BT.REPLACE})}function _(){const S=p;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(Za(11));function I(){const D=w;D.next&&D.next(h())}return I(),{unsubscribe:S(I)}},[p5](){return this}}}return v({type:BT.INIT}),{dispatch:v,subscribe:p,getState:h,replaceReducer:y,[p5]:_}}function cve(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:BT.INIT})>"u")throw new Error(Za(12));if(typeof t(void 0,{type:BT.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Za(13))})}function jG(n){const e=Object.keys(n),t={};for(let a=0;a<e.length;a++){const s=e[a];typeof n[s]=="function"&&(t[s]=n[s])}const i=Object.keys(t);let r;try{cve(t)}catch(a){r=a}return function(s={},o){if(r)throw r;let c=!1;const f={};for(let h=0;h<i.length;h++){const p=i[h],v=t[p],y=s[p],_=v(y,o);if(typeof _>"u")throw o&&o.type,new Error(Za(14));f[p]=_,c=c||_!==y}return c=c||i.length!==Object.keys(s).length,c?f:s}}function VT(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function uve(...n){return e=>(t,i)=>{const r=e(t,i);let a=()=>{throw new Error(Za(15))};const s={getState:r.getState,dispatch:(c,...f)=>a(c,...f)},o=n.map(c=>c(s));return a=VT(...o)(r.dispatch),{...r,dispatch:a}}}function HG(n){return lL(n)&&"type"in n&&typeof n.type=="string"}var GG=Symbol.for("immer-nothing"),m5=Symbol.for("immer-draftable"),ro=Symbol.for("immer-state");function Oc(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var ll=Object,Wv=ll.getPrototypeOf,jT="constructor",qM="prototype",uO="configurable",HT="enumerable",fE="writable",ux="value",vh=n=>!!n&&!!n[ro];function Gc(n){var e;return n?WG(n)||XM(n)||!!n[m5]||!!((e=n[jT])!=null&&e[m5])||YM(n)||KM(n):!1}var fve=ll[qM][jT].toString(),g5=new WeakMap;function WG(n){if(!n||!cL(n))return!1;const e=Wv(n);if(e===null||e===ll[qM])return!0;const t=ll.hasOwnProperty.call(e,jT)&&e[jT];if(t===Object)return!0;if(!ov(t))return!1;let i=g5.get(t);return i===void 0&&(i=Function.toString.call(t),g5.set(t,i)),i===fve}function $M(n,e,t=!0){$x(n)===0?(t?Reflect.ownKeys(n):ll.keys(n)).forEach(r=>{e(r,n[r],n)}):n.forEach((i,r)=>e(r,i,n))}function $x(n){const e=n[ro];return e?e.type_:XM(n)?1:YM(n)?2:KM(n)?3:0}var v5=(n,e,t=$x(n))=>t===2?n.has(e):ll[qM].hasOwnProperty.call(n,e),fO=(n,e,t=$x(n))=>t===2?n.get(e):n[e],GT=(n,e,t,i=$x(n))=>{i===2?n.set(e,t):i===3?n.add(t):n[e]=t};function hve(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var XM=Array.isArray,YM=n=>n instanceof Map,KM=n=>n instanceof Set,cL=n=>typeof n=="object",ov=n=>typeof n=="function",EP=n=>typeof n=="boolean";function dve(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var Jf=n=>n.copy_||n.base_,uL=n=>n.modified_?n.copy_:n.base_;function hO(n,e){if(YM(n))return new Map(n);if(KM(n))return new Set(n);if(XM(n))return Array[qM].slice.call(n);const t=WG(n);if(e===!0||e==="class_only"&&!t){const i=ll.getOwnPropertyDescriptors(n);delete i[ro];let r=Reflect.ownKeys(i);for(let a=0;a<r.length;a++){const s=r[a],o=i[s];o[fE]===!1&&(o[fE]=!0,o[uO]=!0),(o.get||o.set)&&(i[s]={[uO]:!0,[fE]:!0,[HT]:o[HT],[ux]:n[s]})}return ll.create(Wv(n),i)}else{const i=Wv(n);if(i!==null&&t)return{...n};const r=ll.create(i);return ll.assign(r,n)}}function fL(n,e=!1){return ZM(n)||vh(n)||!Gc(n)||($x(n)>1&&ll.defineProperties(n,{set:Uw,add:Uw,clear:Uw,delete:Uw}),ll.freeze(n),e&&$M(n,(t,i)=>{fL(i,!0)},!1)),n}function pve(){Oc(2)}var Uw={[ux]:pve};function ZM(n){return n===null||!cL(n)?!0:ll.isFrozen(n)}var WT="MapSet",dO="Patches",y5="ArrayMethods",qG={};function mg(n){const e=qG[n];return e||Oc(0,n),e}var b5=n=>!!qG[n],fx,$G=()=>fx,mve=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:b5(WT)?mg(WT):void 0,arrayMethodsPlugin_:b5(y5)?mg(y5):void 0});function _5(n,e){e&&(n.patchPlugin_=mg(dO),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function pO(n){mO(n),n.drafts_.forEach(gve),n.drafts_=null}function mO(n){n===fx&&(fx=n.parent_)}var x5=n=>fx=mve(fx,n);function gve(n){const e=n[ro];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function S5(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[ro].modified_&&(pO(e),Oc(4)),Gc(n)&&(n=w5(e,n));const{patchPlugin_:r}=e;r&&r.generateReplacementPatches_(t[ro].base_,n,e)}else n=w5(e,t);return vve(e,n,!0),pO(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==GG?n:void 0}function w5(n,e){if(ZM(e))return e;const t=e[ro];if(!t)return qT(e,n.handledSet_,n);if(!QM(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:i}=t;if(i)for(;i.length>0;)i.pop()(n);KG(t,n)}return t.copy_}function vve(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&fL(e,t)}function XG(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var QM=(n,e)=>n.scope_===e,yve=[];function YG(n,e,t,i){const r=Jf(n),a=n.type_;if(i!==void 0&&fO(r,i,a)===e){GT(r,i,t,a);return}if(!n.draftLocations_){const o=n.draftLocations_=new Map;$M(r,(c,f)=>{if(vh(f)){const h=o.get(f)||[];h.push(c),o.set(f,h)}})}const s=n.draftLocations_.get(e)??yve;for(const o of s)GT(r,o,t,a)}function bve(n,e,t){n.callbacks_.push(function(r){var o;const a=e;if(!a||!QM(a,r))return;(o=r.mapSetPlugin_)==null||o.fixSetContents(a);const s=uL(a);YG(n,a.draft_??a,s,t),KG(a,r)})}function KG(n,e){var i;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((i=n.assigned_)==null?void 0:i.size)??0)>0)){const{patchPlugin_:r}=e;if(r){const a=r.getPath(n);a&&r.generatePatches_(n,a,e)}XG(n)}}function _ve(n,e,t){const{scope_:i}=n;if(vh(t)){const r=t[ro];QM(r,i)&&r.callbacks_.push(function(){hE(n);const s=uL(r);YG(n,t,s,e)})}else Gc(t)&&n.callbacks_.push(function(){const a=Jf(n);n.type_===3?a.has(t)&&qT(t,i.handledSet_,i):fO(a,e,n.type_)===t&&i.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&qT(fO(n.copy_,e,n.type_),i.handledSet_,i)})}function qT(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||vh(n)||e.has(n)||!Gc(n)||ZM(n)||(e.add(n),$M(n,(i,r)=>{if(vh(r)){const a=r[ro];if(QM(a,t)){const s=uL(a);GT(n,i,s,n.type_),XG(a)}}else Gc(r)&&qT(r,e,t)})),n}function xve(n,e){const t=XM(n),i={type_:t?1:0,scope_:e?e.scope_:$G(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=i,a=$T;t&&(r=[i],a=hx);const{revoke:s,proxy:o}=Proxy.revocable(r,a);return i.draft_=o,i.revoke_=s,[o,i]}var $T={get(n,e){if(e===ro)return n;let t=n.scope_.arrayMethodsPlugin_;const i=n.type_===1&&typeof e=="string";if(i&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const r=Jf(n);if(!v5(r,e,n.type_))return Sve(n,r,e);const a=r[e];if(n.finalized_||!Gc(a)||i&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&dve(e))return a;if(a===TP(n.base_,e)){hE(n);const s=n.type_===1?+e:e,o=vO(n.scope_,a,n,s);return n.copy_[s]=o}return a},has(n,e){return e in Jf(n)},ownKeys(n){return Reflect.ownKeys(Jf(n))},set(n,e,t){const i=ZG(Jf(n),e);if(i!=null&&i.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const r=TP(Jf(n),e),a=r==null?void 0:r[ro];if(a&&a.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(hve(t,r)&&(t!==void 0||v5(n.base_,e,n.type_)))return!0;hE(n),gO(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),_ve(n,e,t)),!0},deleteProperty(n,e){return hE(n),TP(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),gO(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Jf(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{[fE]:!0,[uO]:n.type_!==1||e!=="length",[HT]:i[HT],[ux]:t[e]}},defineProperty(){Oc(11)},getPrototypeOf(n){return Wv(n.base_)},setPrototypeOf(){Oc(12)}},hx={};for(let n in $T){let e=$T[n];hx[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}hx.deleteProperty=function(n,e){return hx.set.call(this,n,e,void 0)};hx.set=function(n,e,t){return $T.set.call(this,n[0],e,t,n[0])};function TP(n,e){const t=n[ro];return(t?Jf(t):n)[e]}function Sve(n,e,t){var r;const i=ZG(e,t);return i?ux in i?i[ux]:(r=i.get)==null?void 0:r.call(n.draft_):void 0}function ZG(n,e){if(!(e in n))return;let t=Wv(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Wv(t)}}function gO(n){n.modified_||(n.modified_=!0,n.parent_&&gO(n.parent_))}function hE(n){n.copy_||(n.assigned_=new Map,n.copy_=hO(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var wve=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,i,r)=>{if(ov(t)&&!ov(i)){const s=i;i=t;const o=this;return function(f=s,...h){return o.produce(f,p=>i.call(this,p,...h))}}ov(i)||Oc(6),r!==void 0&&!ov(r)&&Oc(7);let a;if(Gc(t)){const s=x5(this),o=vO(s,t,void 0);let c=!0;try{a=i(o),c=!1}finally{c?pO(s):mO(s)}return _5(s,r),S5(a,s)}else if(!t||!cL(t)){if(a=i(t),a===void 0&&(a=t),a===GG&&(a=void 0),this.autoFreeze_&&fL(a,!0),r){const s=[],o=[];mg(dO).generateReplacementPatches_(t,a,{patches_:s,inversePatches_:o}),r(s,o)}return a}else Oc(1,t)},this.produceWithPatches=(t,i)=>{if(ov(t))return(o,...c)=>this.produceWithPatches(o,f=>t(f,...c));let r,a;return[this.produce(t,i,(o,c)=>{r=o,a=c}),r,a]},EP(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),EP(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),EP(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Gc(e)||Oc(8),vh(e)&&(e=jc(e));const t=x5(this),i=vO(t,e,void 0);return i[ro].isManual_=!0,mO(t),i}finishDraft(e,t){const i=e&&e[ro];(!i||!i.isManual_)&&Oc(9);const{scope_:r}=i;return _5(r,t),S5(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let i;for(i=t.length-1;i>=0;i--){const a=t[i];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}i>-1&&(t=t.slice(i+1));const r=mg(dO).applyPatches_;return vh(e)?r(e,t):this.produce(e,a=>r(a,t))}};function vO(n,e,t,i){const[r,a]=YM(e)?mg(WT).proxyMap_(e,t):KM(e)?mg(WT).proxySet_(e,t):xve(e,t);return((t==null?void 0:t.scope_)??$G()).drafts_.push(r),a.callbacks_=(t==null?void 0:t.callbacks_)??[],a.key_=i,t&&i!==void 0?bve(t,a,i):a.callbacks_.push(function(c){var h;(h=c.mapSetPlugin_)==null||h.fixSetContents(a);const{patchPlugin_:f}=c;a.modified_&&f&&f.generatePatches_(a,[],c)}),r}function jc(n){return vh(n)||Oc(10,n),QG(n)}function QG(n){if(!Gc(n)||ZM(n))return n;const e=n[ro];let t,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=hO(n,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else t=hO(n,!0);return $M(t,(r,a)=>{GT(t,r,QG(a))},i),e&&(e.finalized_=!1),t}var Eve=new wve,JG=Eve.produce;function eW(n){return({dispatch:t,getState:i})=>r=>a=>typeof a=="function"?a(t,i,n):r(a)}var Tve=eW(),Ave=eW,Mve=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?VT:VT.apply(null,arguments)};function tc(n,e){function t(...i){if(e){let r=e(...i);if(!r)throw new Error(fl(0));return{type:n,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>HG(i)&&i.type===n,t}var tW=class f_ extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,f_.prototype)}static get[Symbol.species](){return f_}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new f_(...e[0].concat(this)):new f_(...e.concat(this))}};function E5(n){return Gc(n)?JG(n,()=>{}):n}function Fw(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function Cve(n){return typeof n=="boolean"}var Ive=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:a=!0}=e??{};let s=new tW;return t&&(Cve(t)?s.push(Tve):s.push(Ave(t.extraArgument))),s},nW="RTK_autoBatch",fr=()=>n=>({payload:n,meta:{[nW]:!0}}),T5=n=>e=>{setTimeout(e,n)},iW=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let r=!0,a=!1,s=!1;const o=new Set,c=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:T5(10):n.type==="callback"?n.queueNotification:T5(n.timeout),f=()=>{s=!1,a&&(a=!1,o.forEach(h=>h()))};return Object.assign({},i,{subscribe(h){const p=()=>r&&h(),v=i.subscribe(p);return o.add(h),()=>{v(),o.delete(h)}},dispatch(h){var p;try{return r=!((p=h==null?void 0:h.meta)!=null&&p[nW]),a=!r,a&&(s||(s=!0,c(f))),i.dispatch(h)}finally{r=!0}}})},Rve=n=>function(t){const{autoBatch:i=!0}=t??{};let r=new tW(n);return i&&r.push(iW(typeof i=="object"?i:void 0)),r};function Pve(n){const e=Ive(),{reducer:t=void 0,middleware:i,devTools:r=!0,preloadedState:a=void 0,enhancers:s=void 0}=n||{};let o;if(typeof t=="function")o=t;else if(lL(t))o=jG(t);else throw new Error(fl(1));let c;typeof i=="function"?c=i(e):c=e();let f=VT;r&&(f=Mve({trace:!1,...typeof r=="object"&&r}));const h=uve(...c),p=Rve(h);let v=typeof s=="function"?s(p):p();const y=f(...v);return VG(o,a,y)}function rW(n){const e={},t=[];let i;const r={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(fl(28));if(o in e)throw new Error(fl(29));return e[o]=s,r},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&t.push({matcher:a.settled,reducer:s.settled}),r},addMatcher(a,s){return t.push({matcher:a,reducer:s}),r},addDefaultCase(a){return i=a,r}};return n(r),[e,t,i]}function Nve(n){return typeof n=="function"}function Ove(n,e){let[t,i,r]=rW(e),a;if(Nve(n))a=()=>E5(n());else{const o=E5(n);a=()=>o}function s(o=a(),c){let f=[t[c.type],...i.filter(({matcher:h})=>h(c)).map(({reducer:h})=>h)];return f.filter(h=>!!h).length===0&&(f=[r]),f.reduce((h,p)=>{if(p)if(vh(h)){const y=p(h,c);return y===void 0?h:y}else{if(Gc(h))return JG(h,v=>p(v,c));{const v=p(h,c);if(v===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return h},o)}return s.getInitialState=a,s}var Dve="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Lve=(n=21)=>{let e="",t=n;for(;t--;)e+=Dve[Math.random()*64|0];return e},kve=Symbol.for("rtk-slice-createasyncthunk");function Uve(n,e){return`${n}/${e}`}function Fve({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[kve];return function(r){const{name:a,reducerPath:s=a}=r;if(!a)throw new Error(fl(11));const o=(typeof r.reducers=="function"?r.reducers(Bve()):r.reducers)||{},c=Object.keys(o),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(D,z){const k=typeof D=="string"?D:D.type;if(!k)throw new Error(fl(12));if(k in f.sliceCaseReducersByType)throw new Error(fl(13));return f.sliceCaseReducersByType[k]=z,h},addMatcher(D,z){return f.sliceMatchers.push({matcher:D,reducer:z}),h},exposeAction(D,z){return f.actionCreators[D]=z,h},exposeCaseReducer(D,z){return f.sliceCaseReducersByName[D]=z,h}};c.forEach(D=>{const z=o[D],k={reducerName:D,type:Uve(a,D),createNotation:typeof r.reducers=="function"};jve(z)?Gve(k,z,h,e):Vve(k,z,h)});function p(){const[D={},z=[],k=void 0]=typeof r.extraReducers=="function"?rW(r.extraReducers):[r.extraReducers],U={...D,...f.sliceCaseReducersByType};return Ove(r.initialState,R=>{for(let M in U)R.addCase(M,U[M]);for(let M of f.sliceMatchers)R.addMatcher(M.matcher,M.reducer);for(let M of z)R.addMatcher(M.matcher,M.reducer);k&&R.addDefaultCase(k)})}const v=D=>D,y=new Map,_=new WeakMap;let E;function S(D,z){return E||(E=p()),E(D,z)}function w(){return E||(E=p()),E.getInitialState()}function I(D,z=!1){function k(R){let M=R[D];return typeof M>"u"&&z&&(M=Fw(_,k,w)),M}function U(R=v){const M=Fw(y,z,()=>new WeakMap);return Fw(M,R,()=>{const L={};for(const[B,V]of Object.entries(r.selectors??{}))L[B]=zve(V,R,()=>Fw(_,R,w),z);return L})}return{reducerPath:D,getSelectors:U,get selectors(){return U(k)},selectSlice:k}}const P={name:a,reducer:S,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:w,...I(s),injectInto(D,{reducerPath:z,...k}={}){const U=z??s;return D.inject({reducerPath:U,reducer:S},k),{...P,...I(U,!0)}}};return P}}function zve(n,e,t,i){function r(a,...s){let o=e(a);return typeof o>"u"&&i&&(o=t()),n(o,...s)}return r.unwrapped=n,r}var Bo=Fve();function Bve(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function Vve({type:n,reducerName:e,createNotation:t},i,r){let a,s;if("reducer"in i){if(t&&!Hve(i))throw new Error(fl(17));a=i.reducer,s=i.prepare}else a=i;r.addCase(n,a).exposeCaseReducer(e,a).exposeAction(e,s?tc(n,s):tc(n))}function jve(n){return n._reducerDefinitionType==="asyncThunk"}function Hve(n){return n._reducerDefinitionType==="reducerWithPrepare"}function Gve({type:n,reducerName:e},t,i,r){if(!r)throw new Error(fl(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:c,settled:f,options:h}=t,p=r(n,a,h);i.exposeAction(e,p),s&&i.addCase(p.fulfilled,s),o&&i.addCase(p.pending,o),c&&i.addCase(p.rejected,c),f&&i.addMatcher(p.settled,f),i.exposeCaseReducer(e,{fulfilled:s||zw,pending:o||zw,rejected:c||zw,settled:f||zw})}function zw(){}var Wve="task",aW="listener",sW="completed",hL="cancelled",qve=`task-${hL}`,$ve=`task-${sW}`,yO=`${aW}-${hL}`,Xve=`${aW}-${sW}`,JM=class{constructor(n){aI(this,"name","TaskAbortError");aI(this,"message");this.code=n,this.message=`${Wve} ${hL} (reason: ${n})`}},dL=(n,e)=>{if(typeof n!="function")throw new TypeError(fl(32))},XT=()=>{},oW=(n,e=XT)=>(n.catch(e),n),lW=(n,e)=>(n.addEventListener("abort",e,{once:!0}),()=>n.removeEventListener("abort",e)),Qm=n=>{if(n.aborted)throw new JM(n.reason)};function cW(n,e){let t=XT;return new Promise((i,r)=>{const a=()=>r(new JM(n.reason));if(n.aborted){a();return}t=lW(n,a),e.finally(()=>t()).then(i,r)}).finally(()=>{t=XT})}var Yve=async(n,e)=>{try{return await Promise.resolve(),{status:"ok",value:await n()}}catch(t){return{status:t instanceof JM?"cancelled":"rejected",error:t}}finally{e==null||e()}},YT=n=>e=>oW(cW(n,e).then(t=>(Qm(n),t))),uW=n=>{const e=YT(n);return t=>e(new Promise(i=>setTimeout(i,t)))},{assign:wv}=Object,A5={},eC="listenerMiddleware",Kve=(n,e)=>{const t=i=>lW(n,()=>i.abort(n.reason));return(i,r)=>{dL(i);const a=new AbortController;t(a);const s=Yve(async()=>{Qm(n),Qm(a.signal);const o=await i({pause:YT(a.signal),delay:uW(a.signal),signal:a.signal});return Qm(a.signal),o},()=>a.abort($ve));return r!=null&&r.autoJoin&&e.push(s.catch(XT)),{result:YT(n)(s),cancel(){a.abort(qve)}}}},Zve=(n,e)=>{const t=async(i,r)=>{Qm(e);let a=()=>{};const o=[new Promise((c,f)=>{let h=n({predicate:i,effect:(p,v)=>{v.unsubscribe(),c([p,v.getState(),v.getOriginalState()])}});a=()=>{h(),f()}})];r!=null&&o.push(new Promise(c=>setTimeout(c,r,null)));try{const c=await cW(e,Promise.race(o));return Qm(e),c}finally{a()}};return(i,r)=>oW(t(i,r))},fW=n=>{let{type:e,actionCreator:t,matcher:i,predicate:r,effect:a}=n;if(e)r=tc(e).match;else if(t)e=t.type,r=t.match;else if(i)r=i;else if(!r)throw new Error(fl(21));return dL(a),{predicate:r,type:e,effect:a}},hW=wv(n=>{const{type:e,predicate:t,effect:i}=fW(n);return{id:Lve(),effect:i,type:e,predicate:t,pending:new Set,unsubscribe:()=>{throw new Error(fl(22))}}},{withTypes:()=>hW}),M5=(n,e)=>{const{type:t,effect:i,predicate:r}=fW(e);return Array.from(n.values()).find(a=>(typeof t=="string"?a.type===t:a.predicate===r)&&a.effect===i)},bO=n=>{n.pending.forEach(e=>{e.abort(yO)})},Qve=(n,e)=>()=>{for(const t of e.keys())bO(t);n.clear()},C5=(n,e,t)=>{try{n(e,t)}catch(i){setTimeout(()=>{throw i},0)}},dW=wv(tc(`${eC}/add`),{withTypes:()=>dW}),Jve=tc(`${eC}/removeAll`),pW=wv(tc(`${eC}/remove`),{withTypes:()=>pW}),eye=(...n)=>{console.error(`${eC}/error`,...n)},Xx=(n={})=>{const e=new Map,t=new Map,i=y=>{const _=t.get(y)??0;t.set(y,_+1)},r=y=>{const _=t.get(y)??1;_===1?t.delete(y):t.set(y,_-1)},{extra:a,onError:s=eye}=n;dL(s);const o=y=>(y.unsubscribe=()=>e.delete(y.id),e.set(y.id,y),_=>{y.unsubscribe(),_!=null&&_.cancelActive&&bO(y)}),c=y=>{const _=M5(e,y)??hW(y);return o(_)};wv(c,{withTypes:()=>c});const f=y=>{const _=M5(e,y);return _&&(_.unsubscribe(),y.cancelActive&&bO(_)),!!_};wv(f,{withTypes:()=>f});const h=async(y,_,E,S)=>{const w=new AbortController,I=Zve(c,w.signal),P=[];try{y.pending.add(w),i(y),await Promise.resolve(y.effect(_,wv({},E,{getOriginalState:S,condition:(D,z)=>I(D,z).then(Boolean),take:I,delay:uW(w.signal),pause:YT(w.signal),extra:a,signal:w.signal,fork:Kve(w.signal,P),unsubscribe:y.unsubscribe,subscribe:()=>{e.set(y.id,y)},cancelActiveListeners:()=>{y.pending.forEach((D,z,k)=>{D!==w&&(D.abort(yO),k.delete(D))})},cancel:()=>{w.abort(yO),y.pending.delete(w)},throwIfCancelled:()=>{Qm(w.signal)}})))}catch(D){D instanceof JM||C5(s,D,{raisedBy:"effect"})}finally{await Promise.all(P),w.abort(Xve),r(y),y.pending.delete(w)}},p=Qve(e,t);return{middleware:y=>_=>E=>{if(!HG(E))return _(E);if(dW.match(E))return c(E.payload);if(Jve.match(E)){p();return}if(pW.match(E))return f(E.payload);let S=y.getState();const w=()=>{if(S===A5)throw new Error(fl(23));return S};let I;try{if(I=_(E),e.size>0){const P=y.getState(),D=Array.from(e.values());for(const z of D){let k=!1;try{k=z.predicate(E,P,S)}catch(U){k=!1,C5(s,U,{raisedBy:"predicate"})}k&&h(z,E,y,w)}}}finally{S=A5}return I},startListening:c,stopListening:f,clearListeners:p}};function fl(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var tye={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},mW=Bo({name:"chartLayout",initialState:tye,reducers:{setLayout(n,e){n.layoutType=e.payload},setChartSize(n,e){n.width=e.payload.width,n.height=e.payload.height},setMargin(n,e){var t,i,r,a;n.margin.top=(t=e.payload.top)!==null&&t!==void 0?t:0,n.margin.right=(i=e.payload.right)!==null&&i!==void 0?i:0,n.margin.bottom=(r=e.payload.bottom)!==null&&r!==void 0?r:0,n.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(n,e){n.scale=e.payload}}}),{setMargin:nye,setLayout:iye,setChartSize:rye,setScale:aye}=mW.actions,sye=mW.reducer;function gW(n,e,t){return Array.isArray(n)&&n&&e+t!==0?n.slice(e,t+1):n}function ni(n){return Number.isFinite(n)}function lf(n){return typeof n=="number"&&n>0&&Number.isFinite(n)}function I5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function fv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?I5(Object(t),!0).forEach(function(i){oye(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):I5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function oye(n,e,t){return(e=lye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lye(n){var e=cye(n,"string");return typeof e=="symbol"?e:e+""}function cye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function as(n,e,t){return Ns(n)||Ns(e)?t:of(e)?GM(n,e,t):typeof e=="function"?e(n):t}var uye=(n,e,t)=>{if(e&&t){var{width:i,height:r}=t,{align:a,verticalAlign:s,layout:o}=e;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&Zt(n[a]))return fv(fv({},n),{},{[a]:n[a]+(i||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&Zt(n[s]))return fv(fv({},n),{},{[s]:n[s]+(r||0)})}return n},df=(n,e)=>n==="horizontal"&&e==="xAxis"||n==="vertical"&&e==="yAxis"||n==="centric"&&e==="angleAxis"||n==="radial"&&e==="radiusAxis",vW=(n,e,t,i)=>{if(i)return n.map(o=>o.coordinate);var r,a,s=n.map(o=>(o.coordinate===e&&(r=!0),o.coordinate===t&&(a=!0),o.coordinate));return r||s.push(e),a||s.push(t),s},yW=(n,e,t)=>{if(!n)return null;var{duplicateDomain:i,type:r,range:a,scale:s,realScaleType:o,isCategorical:c,categoricalDomain:f,tickCount:h,ticks:p,niceTicks:v,axisType:y}=n;if(!s)return null;var _=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,E=r==="category"&&s.bandwidth?s.bandwidth()/_:0;if(E=y==="angleAxis"&&a&&a.length>=2?Yl(a[0]-a[1])*2*E:E,p||v){var S=(p||v||[]).map((w,I)=>{var P=i?i.indexOf(w):w,D=s.map(P);return ni(D)?{coordinate:D+E,value:w,offset:E,index:I}:null}).filter(Fo);return S}return c&&f?f.map((w,I)=>{var P=s.map(w);return ni(P)?{coordinate:P+E,value:w,index:I,offset:E}:null}).filter(Fo):s.ticks&&h!=null?s.ticks(h).map((w,I)=>{var P=s.map(w);return ni(P)?{coordinate:P+E,value:w,index:I,offset:E}:null}).filter(Fo):s.domain().map((w,I)=>{var P=s.map(w);return ni(P)?{coordinate:P+E,value:i?i[w]:w,index:I,offset:E}:null}).filter(Fo)},fye=n=>{var e,t=n.length;if(!(t<=0)){var i=(e=n[0])===null||e===void 0?void 0:e.length;if(!(i==null||i<=0))for(var r=0;r<i;++r)for(var a=0,s=0,o=0;o<t;++o){var c=n[o],f=c==null?void 0:c[r];if(f!=null){var h=f[1],p=f[0],v=sf(h)?p:h;v>=0?(f[0]=a,a+=v,f[1]=a):(f[0]=s,s+=v,f[1]=s)}}}},hye=n=>{var e,t=n.length;if(!(t<=0)){var i=(e=n[0])===null||e===void 0?void 0:e.length;if(!(i==null||i<=0))for(var r=0;r<i;++r)for(var a=0,s=0;s<t;++s){var o=n[s],c=o==null?void 0:o[r];if(c!=null){var f=sf(c[1])?c[0]:c[1];f>=0?(c[0]=a,a+=f,c[1]=a):(c[0]=0,c[1]=0)}}}},dye={sign:fye,expand:n0e,none:dg,silhouette:i0e,wiggle:r0e,positive:hye},pye=(n,e,t)=>{var i,r=(i=dye[t])!==null&&i!==void 0?i:dg,a=t0e().keys(e).value((o,c)=>Number(as(o,c,0))).order(cO).offset(r),s=a(n);return s.forEach((o,c)=>{o.forEach((f,h)=>{var p=as(n[h],e[c],0);Array.isArray(p)&&p.length===2&&Zt(p[0])&&Zt(p[1])&&(f[0]=p[0],f[1]=p[1])})}),s};function mye(n){return n==null?void 0:String(n)}function R5(n){var{axis:e,ticks:t,bandSize:i,entry:r,index:a,dataKey:s}=n;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Ns(r[e.dataKey])){var o=MG(t,"value",r[e.dataKey]);if(o)return o.coordinate+i/2}return t!=null&&t[a]?t[a].coordinate+i/2:null}var c=as(r,Ns(s)?e.dataKey:s),f=e.scale.map(c);return Zt(f)?f:null}var gye=n=>{var e=n.flat(2).filter(Zt);return[Math.min(...e),Math.max(...e)]},vye=n=>[n[0]===1/0?0:n[0],n[1]===-1/0?0:n[1]],yye=(n,e,t)=>{if(n!=null)return vye(Object.keys(n).reduce((i,r)=>{var a=n[r];if(!a)return i;var{stackedData:s}=a,o=s.reduce((c,f)=>{var h=gW(f,e,t),p=gye(h);return!ni(p[0])||!ni(p[1])?c:[Math.min(c[0],p[0]),Math.max(c[1],p[1])]},[1/0,-1/0]);return[Math.min(o[0],i[0]),Math.max(o[1],i[1])]},[1/0,-1/0]))},P5=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,N5=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,KT=(n,e,t)=>{if(n&&n.scale&&n.scale.bandwidth){var i=n.scale.bandwidth();if(!t||i>0)return i}if(n&&e&&e.length>=2){for(var r=WM(e,h=>h.coordinate),a=1/0,s=1,o=r.length;s<o;s++){var c=r[s],f=r[s-1];a=Math.min(((c==null?void 0:c.coordinate)||0)-((f==null?void 0:f.coordinate)||0),a)}return a===1/0?0:a}return t?void 0:0};function O5(n){var{tooltipEntrySettings:e,dataKey:t,payload:i,value:r,name:a}=n;return fv(fv({},e),{},{dataKey:t,payload:i,value:r,name:a})}function bW(n,e){if(n)return String(n);if(typeof e=="string")return e}var bye=(n,e)=>{if(e==="horizontal")return n.chartX;if(e==="vertical")return n.chartY},_ye=(n,e)=>e==="centric"?n.angle:n.radius,wh=n=>n.layout.width,Eh=n=>n.layout.height,xye=n=>n.layout.scale,_W=n=>n.layout.margin,tC=Ye(n=>n.cartesianAxis.xAxis,n=>Object.values(n)),nC=Ye(n=>n.cartesianAxis.yAxis,n=>Object.values(n)),Sye="data-recharts-item-index",wye="data-recharts-item-id",Yx=60;function D5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Bw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?D5(Object(t),!0).forEach(function(i){Eye(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):D5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Eye(n,e,t){return(e=Tye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Tye(n){var e=Aye(n,"string");return typeof e=="symbol"?e:e+""}function Aye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Mye=n=>n.brush.height;function Cye(n){var e=nC(n);return e.reduce((t,i)=>{if(i.orientation==="left"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:Yx;return t+r}return t},0)}function Iye(n){var e=nC(n);return e.reduce((t,i)=>{if(i.orientation==="right"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:Yx;return t+r}return t},0)}function Rye(n){var e=tC(n);return e.reduce((t,i)=>i.orientation==="top"&&!i.mirror&&!i.hide?t+i.height:t,0)}function Pye(n){var e=tC(n);return e.reduce((t,i)=>i.orientation==="bottom"&&!i.mirror&&!i.hide?t+i.height:t,0)}var os=Ye([wh,Eh,_W,Mye,Cye,Iye,Rye,Pye,BG,rve],(n,e,t,i,r,a,s,o,c,f)=>{var h={left:(t.left||0)+r,right:(t.right||0)+a},p={top:(t.top||0)+s,bottom:(t.bottom||0)+o},v=Bw(Bw({},p),h),y=v.bottom;v.bottom+=i,v=uye(v,c,f);var _=n-v.left-v.right,E=e-v.top-v.bottom;return Bw(Bw({brushBottom:y},v),{},{width:Math.max(_,0),height:Math.max(E,0)})}),Nye=Ye(os,n=>({x:n.left,y:n.top,width:n.width,height:n.height})),xW=Ye(wh,Eh,(n,e)=>({x:0,y:0,width:n,height:e})),Oye=q.createContext(null),Vo=()=>q.useContext(Oye)!=null,iC=n=>n.brush,rC=Ye([iC,os,_W],(n,e,t)=>({height:n.height,x:Zt(n.x)?n.x:e.left,y:Zt(n.y)?n.y:e.top+e.height+e.brushBottom-((t==null?void 0:t.bottom)||0),width:Zt(n.width)?n.width:e.width})),AP={},MP={},CP={},L5;function Dye(){return L5||(L5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,i,{signal:r,edges:a}={}){let s,o=null;const c=a!=null&&a.includes("leading"),f=a==null||a.includes("trailing"),h=()=>{o!==null&&(t.apply(s,o),s=void 0,o=null)},p=()=>{f&&h(),E()};let v=null;const y=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,p()},i)},_=()=>{v!==null&&(clearTimeout(v),v=null)},E=()=>{_(),s=void 0,o=null},S=()=>{h()},w=function(...I){if(r!=null&&r.aborted)return;s=this,o=I;const P=v==null;y(),c&&P&&h()};return w.schedule=y,w.cancel=E,w.flush=S,r==null||r.addEventListener("abort",E,{once:!0}),w}n.debounce=e})(CP)),CP}var k5;function Lye(){return k5||(k5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Dye();function t(i,r=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:c}=a,f=Array(2);s&&(f[0]="leading"),o&&(f[1]="trailing");let h,p=null;const v=e.debounce(function(...E){h=i.apply(this,E),p=null},r,{edges:f}),y=function(...E){return c!=null&&(p===null&&(p=Date.now()),Date.now()-p>=c)?(h=i.apply(this,E),p=Date.now(),v.cancel(),v.schedule(),h):(v.apply(this,E),h)},_=()=>(v.flush(),h);return y.cancel=v.cancel,y.flush=_,y}n.debounce=t})(MP)),MP}var U5;function kye(){return U5||(U5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Lye();function t(i,r=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return e.debounce(i,r,{leading:s,maxWait:r,trailing:o})}n.throttle=t})(AP)),AP}var IP,F5;function Uye(){return F5||(F5=1,IP=kye().throttle),IP}var Fye=Uye();const zye=Wc(Fye);var ZT=function(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(t===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(t===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(t.replace(/%s/g,()=>r[s++]))}},ju={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},SW=(n,e,t)=>{var{width:i=ju.width,height:r=ju.height,aspect:a,maxHeight:s}=t,o=pg(i)?n:Number(i),c=pg(r)?e:Number(r);return a&&a>0&&(o?c=o/a:c&&(o=c*a),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:o,calculatedHeight:c}},Bye={width:0,height:0,overflow:"visible"},Vye={width:0,overflowX:"visible"},jye={height:0,overflowY:"visible"},Hye={},Gye=n=>{var{width:e,height:t}=n,i=pg(e),r=pg(t);return i&&r?Bye:i?Vye:r?jye:Hye};function Wye(n){var{width:e,height:t,aspect:i}=n,r=e,a=t;return r===void 0&&a===void 0?(r=ju.width,a=ju.height):r===void 0?r=i&&i>0?void 0:ju.width:a===void 0&&(a=i&&i>0?void 0:ju.height),{width:r,height:a}}function _O(){return _O=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},_O.apply(null,arguments)}function z5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function B5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?z5(Object(t),!0).forEach(function(i){qye(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):z5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function qye(n,e,t){return(e=$ye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $ye(n){var e=Xye(n,"string");return typeof e=="symbol"?e:e+""}function Xye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var wW=q.createContext(ju.initialDimension);function Yye(n){return lf(n.width)&&lf(n.height)}function EW(n){var{children:e,width:t,height:i}=n,r=q.useMemo(()=>({width:t,height:i}),[t,i]);return Yye(r)?q.createElement(wW.Provider,{value:r},e):null}var pL=()=>q.useContext(wW),Kye=q.forwardRef((n,e)=>{var{aspect:t,initialDimension:i=ju.initialDimension,width:r,height:a,minWidth:s=ju.minWidth,minHeight:o,maxHeight:c,children:f,debounce:h=ju.debounce,id:p,className:v,onResize:y,style:_={}}=n,E=q.useRef(null),S=q.useRef();S.current=y,q.useImperativeHandle(e,()=>E.current);var[w,I]=q.useState({containerWidth:i.width,containerHeight:i.height}),P=q.useCallback((R,M)=>{I(L=>{var B=Math.round(R),V=Math.round(M);return L.containerWidth===B&&L.containerHeight===V?L:{containerWidth:B,containerHeight:V}})},[]);q.useEffect(()=>{if(E.current==null||typeof ResizeObserver>"u")return ly;var R=V=>{var j,Z=V[0];if(Z!=null){var{width:J,height:G}=Z.contentRect;P(J,G),(j=S.current)===null||j===void 0||j.call(S,J,G)}};h>0&&(R=zye(R,h,{trailing:!0,leading:!1}));var M=new ResizeObserver(R),{width:L,height:B}=E.current.getBoundingClientRect();return P(L,B),M.observe(E.current),()=>{M.disconnect()}},[P,h]);var{containerWidth:D,containerHeight:z}=w;ZT(!t||t>0,"The aspect(%s) must be greater than zero.",t);var{calculatedWidth:k,calculatedHeight:U}=SW(D,z,{width:r,height:a,aspect:t,maxHeight:c});return ZT(k!=null&&k>0||U!=null&&U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,k,U,r,a,s,o,t),q.createElement("div",{id:p?"".concat(p):void 0,className:rr("recharts-responsive-container",v),style:B5(B5({},_),{},{width:r,height:a,minWidth:s,minHeight:o,maxHeight:c}),ref:E},q.createElement("div",{style:Gye({width:r,height:a})},q.createElement(EW,{width:k,height:U},f)))}),Zye=q.forwardRef((n,e)=>{var t=pL();if(lf(t.width)&&lf(t.height))return n.children;var{width:i,height:r}=Wye({width:n.width,height:n.height,aspect:n.aspect}),{calculatedWidth:a,calculatedHeight:s}=SW(void 0,void 0,{width:i,height:r,aspect:n.aspect,maxHeight:n.maxHeight});return Zt(a)&&Zt(s)?q.createElement(EW,{width:a,height:s},n.children):q.createElement(Kye,_O({},n,{width:i,height:r,ref:e}))});function mL(n){if(n)return{x:n.x,y:n.y,upperWidth:"upperWidth"in n?n.upperWidth:n.width,lowerWidth:"lowerWidth"in n?n.lowerWidth:n.width,width:n.width,height:n.height}}var aC=()=>{var n,e=Vo(),t=hn(Nye),i=hn(rC),r=(n=hn(iC))===null||n===void 0?void 0:n.padding;return!e||!i||!r?t:{width:i.width-r.left-r.right,height:i.height-r.top-r.bottom,x:r.left,y:r.top}},Qye={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},TW=()=>{var n;return(n=hn(os))!==null&&n!==void 0?n:Qye},AW=()=>hn(wh),MW=()=>hn(Eh),dr=n=>n.layout.layoutType,cy=()=>hn(dr),gL=()=>{var n=cy();if(n==="horizontal"||n==="vertical")return n},CW=n=>{var e=n.layout.layoutType;if(e==="centric"||e==="radial")return e},Jye=()=>{var n=cy();return n!==void 0},Kx=n=>{var e=Na(),t=Vo(),{width:i,height:r}=n,a=pL(),s=i,o=r;return a&&(s=a.width>0?a.width:i,o=a.height>0?a.height:r),q.useEffect(()=>{!t&&lf(s)&&lf(o)&&e(rye({width:s,height:o}))},[e,t,s,o]),null},IW=Symbol.for("immer-nothing"),V5=Symbol.for("immer-draftable"),dl=Symbol.for("immer-state");function Dc(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var dx=Object.getPrototypeOf;function qv(n){return!!n&&!!n[dl]}function gg(n){var e;return n?RW(n)||Array.isArray(n)||!!n[V5]||!!((e=n.constructor)!=null&&e[V5])||Zx(n)||oC(n):!1}var ebe=Object.prototype.constructor.toString(),j5=new WeakMap;function RW(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);if(e===null||e===Object.prototype)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(t===Object)return!0;if(typeof t!="function")return!1;let i=j5.get(t);return i===void 0&&(i=Function.toString.call(t),j5.set(t,i)),i===ebe}function QT(n,e,t=!0){sC(n)===0?(t?Reflect.ownKeys(n):Object.keys(n)).forEach(r=>{e(r,n[r],n)}):n.forEach((i,r)=>e(r,i,n))}function sC(n){const e=n[dl];return e?e.type_:Array.isArray(n)?1:Zx(n)?2:oC(n)?3:0}function xO(n,e){return sC(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function PW(n,e,t){const i=sC(n);i===2?n.set(e,t):i===3?n.add(t):n[e]=t}function tbe(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function Zx(n){return n instanceof Map}function oC(n){return n instanceof Set}function Im(n){return n.copy_||n.base_}function SO(n,e){if(Zx(n))return new Map(n);if(oC(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=RW(n);if(e===!0||e==="class_only"&&!t){const i=Object.getOwnPropertyDescriptors(n);delete i[dl];let r=Reflect.ownKeys(i);for(let a=0;a<r.length;a++){const s=r[a],o=i[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(i[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[s]})}return Object.create(dx(n),i)}else{const i=dx(n);if(i!==null&&t)return{...n};const r=Object.create(i);return Object.assign(r,n)}}function vL(n,e=!1){return lC(n)||qv(n)||!gg(n)||(sC(n)>1&&Object.defineProperties(n,{set:Vw,add:Vw,clear:Vw,delete:Vw}),Object.freeze(n),e&&Object.values(n).forEach(t=>vL(t,!0))),n}function nbe(){Dc(2)}var Vw={value:nbe};function lC(n){return n===null||typeof n!="object"?!0:Object.isFrozen(n)}var ibe={};function vg(n){const e=ibe[n];return e||Dc(0,n),e}var px;function NW(){return px}function rbe(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function H5(n,e){e&&(vg("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function wO(n){EO(n),n.drafts_.forEach(abe),n.drafts_=null}function EO(n){n===px&&(px=n.parent_)}function G5(n){return px=rbe(px,n)}function abe(n){const e=n[dl];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function W5(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[dl].modified_&&(wO(e),Dc(4)),gg(n)&&(n=JT(e,n),e.parent_||eA(e,n)),e.patches_&&vg("Patches").generateReplacementPatches_(t[dl].base_,n,e.patches_,e.inversePatches_)):n=JT(e,t,[]),wO(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==IW?n:void 0}function JT(n,e,t){if(lC(e))return e;const i=n.immer_.shouldUseStrictIteration(),r=e[dl];if(!r)return QT(e,(a,s)=>q5(n,r,e,a,s,t),i),e;if(r.scope_!==n)return e;if(!r.modified_)return eA(n,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let s=a,o=!1;r.type_===3&&(s=new Set(a),a.clear(),o=!0),QT(s,(c,f)=>q5(n,r,a,c,f,t,o),i),eA(n,a,!1),t&&n.patches_&&vg("Patches").generatePatches_(r,t,n.patches_,n.inversePatches_)}return r.copy_}function q5(n,e,t,i,r,a,s){if(r==null||typeof r!="object"&&!s)return;const o=lC(r);if(!(o&&!s)){if(qv(r)){const c=a&&e&&e.type_!==3&&!xO(e.assigned_,i)?a.concat(i):void 0,f=JT(n,r,c);if(PW(t,i,f),qv(f))n.canAutoFreeze_=!1;else return}else s&&t.add(r);if(gg(r)&&!o){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||e&&e.base_&&e.base_[i]===r&&o)return;JT(n,r),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&(Zx(t)?t.has(i):Object.prototype.propertyIsEnumerable.call(t,i))&&eA(n,r)}}}function eA(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&vL(e,t)}function sbe(n,e){const t=Array.isArray(n),i={type_:t?1:0,scope_:e?e.scope_:NW(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,a=yL;t&&(r=[i],a=mx);const{revoke:s,proxy:o}=Proxy.revocable(r,a);return i.draft_=o,i.revoke_=s,o}var yL={get(n,e){if(e===dl)return n;const t=Im(n);if(!xO(t,e))return obe(n,t,e);const i=t[e];return n.finalized_||!gg(i)?i:i===RP(n.base_,e)?(PP(n),n.copy_[e]=AO(i,n)):i},has(n,e){return e in Im(n)},ownKeys(n){return Reflect.ownKeys(Im(n))},set(n,e,t){const i=OW(Im(n),e);if(i!=null&&i.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const r=RP(Im(n),e),a=r==null?void 0:r[dl];if(a&&a.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(tbe(t,r)&&(t!==void 0||xO(n.base_,e)))return!0;PP(n),TO(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return RP(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,PP(n),TO(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Im(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty(){Dc(11)},getPrototypeOf(n){return dx(n.base_)},setPrototypeOf(){Dc(12)}},mx={};QT(yL,(n,e)=>{mx[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});mx.deleteProperty=function(n,e){return mx.set.call(this,n,e,void 0)};mx.set=function(n,e,t){return yL.set.call(this,n[0],e,t,n[0])};function RP(n,e){const t=n[dl];return(t?Im(t):n)[e]}function obe(n,e,t){var r;const i=OW(e,t);return i?"value"in i?i.value:(r=i.get)==null?void 0:r.call(n.draft_):void 0}function OW(n,e){if(!(e in n))return;let t=dx(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=dx(t)}}function TO(n){n.modified_||(n.modified_=!0,n.parent_&&TO(n.parent_))}function PP(n){n.copy_||(n.copy_=SO(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var lbe=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,i)=>{if(typeof e=="function"&&typeof t!="function"){const a=t;t=e;const s=this;return function(c=a,...f){return s.produce(c,h=>t.call(this,h,...f))}}typeof t!="function"&&Dc(6),i!==void 0&&typeof i!="function"&&Dc(7);let r;if(gg(e)){const a=G5(this),s=AO(e,void 0);let o=!0;try{r=t(s),o=!1}finally{o?wO(a):EO(a)}return H5(a,i),W5(r,a)}else if(!e||typeof e!="object"){if(r=t(e),r===void 0&&(r=e),r===IW&&(r=void 0),this.autoFreeze_&&vL(r,!0),i){const a=[],s=[];vg("Patches").generateReplacementPatches_(e,r,a,s),i(a,s)}return r}else Dc(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,c=>e(c,...o));let i,r;return[this.produce(e,t,(s,o)=>{i=s,r=o}),i,r]},typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof(n==null?void 0:n.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),typeof(n==null?void 0:n.useStrictIteration)=="boolean"&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){gg(n)||Dc(8),qv(n)&&(n=cbe(n));const e=G5(this),t=AO(n,void 0);return t[dl].isManual_=!0,EO(e),t}finishDraft(n,e){const t=n&&n[dl];(!t||!t.isManual_)&&Dc(9);const{scope_:i}=t;return H5(i,e),W5(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const r=e[t];if(r.path.length===0&&r.op==="replace"){n=r.value;break}}t>-1&&(e=e.slice(t+1));const i=vg("Patches").applyPatches_;return qv(n)?i(n,e):this.produce(n,r=>i(r,e))}};function AO(n,e){const t=Zx(n)?vg("MapSet").proxyMap_(n,e):oC(n)?vg("MapSet").proxySet_(n,e):sbe(n,e);return(e?e.scope_:NW()).drafts_.push(t),t}function cbe(n){return qv(n)||Dc(10,n),DW(n)}function DW(n){if(!gg(n)||lC(n))return n;const e=n[dl];let t,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=SO(n,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else t=SO(n,!0);return QT(t,(r,a)=>{PW(t,r,DW(a))},i),e&&(e.finalized_=!1),t}var ube=new lbe;ube.produce;var fbe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},LW=Bo({name:"legend",initialState:fbe,reducers:{setLegendSize(n,e){n.size.width=e.payload.width,n.size.height=e.payload.height},setLegendSettings(n,e){n.settings.align=e.payload.align,n.settings.layout=e.payload.layout,n.settings.verticalAlign=e.payload.verticalAlign,n.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(n,e){n.payload.push(e.payload)},prepare:fr()},replaceLegendPayload:{reducer(n,e){var{prev:t,next:i}=e.payload,r=jc(n).payload.indexOf(t);r>-1&&(n.payload[r]=i)},prepare:fr()},removeLegendPayload:{reducer(n,e){var t=jc(n).payload.indexOf(e.payload);t>-1&&n.payload.splice(t,1)},prepare:fr()}}}),{setLegendSize:aOe,setLegendSettings:sOe,addLegendPayload:hbe,replaceLegendPayload:dbe,removeLegendPayload:pbe}=LW.actions,mbe=LW.reducer;function MO(){return MO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},MO.apply(null,arguments)}function $5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Yb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$5(Object(t),!0).forEach(function(i){gbe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function gbe(n,e,t){return(e=vbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vbe(n){var e=ybe(n,"string");return typeof e=="symbol"?e:e+""}function ybe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function bbe(n){return Array.isArray(n)&&of(n[0])&&of(n[1])?n.join(" ~ "):n}var Z0={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},_be=n=>{var{separator:e=Z0.separator,contentStyle:t,itemStyle:i,labelStyle:r=Z0.labelStyle,payload:a,formatter:s,itemSorter:o,wrapperClassName:c,labelClassName:f,label:h,labelFormatter:p,accessibilityLayer:v=Z0.accessibilityLayer}=n,y=()=>{if(a&&a.length){var z={padding:0,margin:0},k=(o?WM(a,o):a).map((U,R)=>{if(U.type==="none")return null;var M=U.formatter||s||bbe,{value:L,name:B}=U,V=L,j=B;if(M){var Z=M(L,B,U,R,a);if(Array.isArray(Z))[V,j]=Z;else if(Z!=null)V=Z;else return null}var J=Yb(Yb({},Z0.itemStyle),{},{color:U.color||Z0.itemStyle.color},i);return q.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:J},of(j)?q.createElement("span",{className:"recharts-tooltip-item-name"},j):null,of(j)?q.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,q.createElement("span",{className:"recharts-tooltip-item-value"},V),q.createElement("span",{className:"recharts-tooltip-item-unit"},U.unit||""))});return q.createElement("ul",{className:"recharts-tooltip-item-list",style:z},k)}return null},_=Yb(Yb({},Z0.contentStyle),t),E=Yb({margin:0},r),S=!Ns(h),w=S?h:"",I=rr("recharts-default-tooltip",c),P=rr("recharts-tooltip-label",f);S&&p&&a!==void 0&&a!==null&&(w=p(h,a));var D=v?{role:"status","aria-live":"assertive"}:{};return q.createElement("div",MO({className:I,style:_},D),q.createElement("p",{className:P,style:E},q.isValidElement(w)?w:"".concat(w)),y())},Kb="recharts-tooltip-wrapper",xbe={visibility:"hidden"};function Sbe(n){var{coordinate:e,translateX:t,translateY:i}=n;return rr(Kb,{["".concat(Kb,"-right")]:Zt(t)&&e&&Zt(e.x)&&t>=e.x,["".concat(Kb,"-left")]:Zt(t)&&e&&Zt(e.x)&&t<e.x,["".concat(Kb,"-bottom")]:Zt(i)&&e&&Zt(e.y)&&i>=e.y,["".concat(Kb,"-top")]:Zt(i)&&e&&Zt(e.y)&&i<e.y})}function X5(n){var{allowEscapeViewBox:e,coordinate:t,key:i,offset:r,position:a,reverseDirection:s,tooltipDimension:o,viewBox:c,viewBoxDimension:f}=n;if(a&&Zt(a[i]))return a[i];var h=t[i]-o-(r>0?r:0),p=t[i]+r;if(e[i])return s[i]?h:p;var v=c[i];if(v==null)return 0;if(s[i]){var y=h,_=v;return y<_?Math.max(p,v):Math.max(h,v)}if(f==null)return 0;var E=p+o,S=v+f;return E>S?Math.max(h,v):Math.max(p,v)}function wbe(n){var{translateX:e,translateY:t,useTranslate3d:i}=n;return{transform:i?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function Ebe(n){var{allowEscapeViewBox:e,coordinate:t,offsetTop:i,offsetLeft:r,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:c,viewBox:f}=n,h,p,v;return o.height>0&&o.width>0&&t?(p=X5({allowEscapeViewBox:e,coordinate:t,key:"x",offset:r,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:f,viewBoxDimension:f.width}),v=X5({allowEscapeViewBox:e,coordinate:t,key:"y",offset:i,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:f,viewBoxDimension:f.height}),h=wbe({translateX:p,translateY:v,useTranslate3d:c})):h=xbe,{cssProperties:h,cssClasses:Sbe({translateX:p,translateY:v,coordinate:t})}}function Y5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function jw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Y5(Object(t),!0).forEach(function(i){CO(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Y5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function CO(n,e,t){return(e=Tbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Tbe(n){var e=Abe(n,"string");return typeof e=="symbol"?e:e+""}function Abe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Mbe extends q.PureComponent{constructor(){super(...arguments),CO(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),CO(this,"handleKeyDown",e=>{if(e.key==="Escape"){var t,i,r,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(t=(i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==null&&t!==void 0?t:0,y:(r=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((t=this.props.coordinate)===null||t===void 0?void 0:t.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:t,animationDuration:i,animationEasing:r,children:a,coordinate:s,hasPayload:o,isAnimationActive:c,offset:f,position:h,reverseDirection:p,useTranslate3d:v,viewBox:y,wrapperStyle:_,lastBoundingBox:E,innerRef:S,hasPortalFromProps:w}=this.props,I=typeof f=="number"?f:f.x,P=typeof f=="number"?f:f.y,{cssClasses:D,cssProperties:z}=Ebe({allowEscapeViewBox:t,coordinate:s,offsetLeft:I,offsetTop:P,position:h,reverseDirection:p,tooltipBox:{height:E.height,width:E.width},useTranslate3d:v,viewBox:y}),k=w?{}:jw(jw({transition:c&&e?"transform ".concat(i,"ms ").concat(r):void 0},z),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),U=jw(jw({},k),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},_);return q.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:D,style:U,ref:S},a)}}var kW=()=>{var n;return(n=hn(e=>e.rootProps.accessibilityLayer))!==null&&n!==void 0?n:!0};function IO(){return IO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},IO.apply(null,arguments)}function K5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Z5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?K5(Object(t),!0).forEach(function(i){Cbe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):K5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Cbe(n,e,t){return(e=Ibe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ibe(n){var e=Rbe(n,"string");return typeof e=="symbol"?e:e+""}function Rbe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Q5={curveBasisClosed:Gge,curveBasisOpen:Wge,curveBasis:Hge,curveBumpX:Vge,curveBumpY:jge,curveLinearClosed:qge,curveLinear:jM,curveMonotoneX:$ge,curveMonotoneY:Xge,curveNatural:Yge,curveStep:Kge,curveStepAfter:Qge,curveStepBefore:Zge},tA=n=>ni(n.x)&&ni(n.y),J5=n=>n.base!=null&&tA(n.base)&&tA(n),Zb=n=>n.x,Qb=n=>n.y,Pbe=(n,e)=>{if(typeof n=="function")return n;var t="curve".concat(iL(n));if((t==="curveMonotone"||t==="curveBump")&&e){var i=Q5["".concat(t).concat(e==="vertical"?"Y":"X")];if(i)return i}return Q5[t]||jM},eB={connectNulls:!1,type:"linear"},Nbe=n=>{var{type:e=eB.type,points:t=[],baseLine:i,layout:r,connectNulls:a=eB.connectNulls}=n,s=Pbe(e,r),o=a?t.filter(tA):t;if(Array.isArray(i)){var c,f=t.map((_,E)=>Z5(Z5({},_),{},{base:i[E]}));r==="vertical"?c=Dw().y(Qb).x1(Zb).x0(_=>_.base.x):c=Dw().x(Zb).y1(Qb).y0(_=>_.base.y);var h=c.defined(J5).curve(s),p=a?f.filter(J5):f;return h(p)}var v;r==="vertical"&&Zt(i)?v=Dw().y(Qb).x1(Zb).x0(i):Zt(i)?v=Dw().x(Zb).y1(Qb).y0(i):v=gG().x(Zb).y(Qb);var y=v.defined(tA).curve(s);return y(o)},dE=n=>{var{className:e,points:t,path:i,pathRef:r}=n,a=cy();if((!t||!t.length)&&!i)return null;var s={type:n.type,points:n.points,baseLine:n.baseLine,layout:n.layout||a,connectNulls:n.connectNulls},o=t&&t.length?Nbe(s):i;return q.createElement("path",IO({},Hc(n),rL(n),{className:rr("recharts-curve",e),d:o===null?void 0:o,ref:r}))},Obe=["x","y","top","left","width","height","className"];function RO(){return RO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},RO.apply(null,arguments)}function tB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Dbe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tB(Object(t),!0).forEach(function(i){Lbe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):tB(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Lbe(n,e,t){return(e=kbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kbe(n){var e=Ube(n,"string");return typeof e=="symbol"?e:e+""}function Ube(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Fbe(n,e){if(n==null)return{};var t,i,r=zbe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function zbe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var Bbe=(n,e,t,i,r,a)=>"M".concat(n,",").concat(r,"v").concat(i,"M").concat(a,",").concat(e,"h").concat(t),Vbe=n=>{var{x:e=0,y:t=0,top:i=0,left:r=0,width:a=0,height:s=0,className:o}=n,c=Fbe(n,Obe),f=Dbe({x:e,y:t,top:i,left:r,width:a,height:s},c);return!Zt(e)||!Zt(t)||!Zt(a)||!Zt(s)||!Zt(i)||!Zt(r)?null:q.createElement("path",RO({},ec(f),{className:rr("recharts-cross",o),d:Bbe(e,t,a,s,i,r)}))};function jbe(n,e,t,i){var r=i/2;return{stroke:"none",fill:"#ccc",x:n==="horizontal"?e.x-r:t.left+.5,y:n==="horizontal"?t.top+.5:e.y-r,width:n==="horizontal"?i:t.width-1,height:n==="horizontal"?t.height-1:i}}function nB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function iB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nB(Object(t),!0).forEach(function(i){Hbe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):nB(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Hbe(n,e,t){return(e=Gbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Gbe(n){var e=Wbe(n,"string");return typeof e=="symbol"?e:e+""}function Wbe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var qbe=n=>n.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),$be=(n,e,t)=>n.map(i=>"".concat(qbe(i)," ").concat(e,"ms ").concat(t)).join(","),Xbe=(n,e)=>[Object.keys(n),Object.keys(e)].reduce((t,i)=>t.filter(r=>i.includes(r))),gx=(n,e)=>Object.keys(e).reduce((t,i)=>iB(iB({},t),{},{[i]:n(i,e[i])}),{});function rB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function da(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rB(Object(t),!0).forEach(function(i){Ybe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):rB(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Ybe(n,e,t){return(e=Kbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Kbe(n){var e=Zbe(n,"string");return typeof e=="symbol"?e:e+""}function Zbe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var nA=(n,e,t)=>n+(e-n)*t,PO=n=>{var{from:e,to:t}=n;return e!==t},UW=(n,e,t)=>{var i=gx((r,a)=>{if(PO(a)){var[s,o]=n(a.from,a.to,a.velocity);return da(da({},a),{},{from:s,velocity:o})}return a},e);return t<1?gx((r,a)=>PO(a)&&i[r]!=null?da(da({},a),{},{velocity:nA(a.velocity,i[r].velocity,t),from:nA(a.from,i[r].from,t)}):a,e):UW(n,i,t-1)};function Qbe(n,e,t,i,r,a){var s,o=i.reduce((v,y)=>da(da({},v),{},{[y]:{from:n[y],velocity:0,to:e[y]}}),{}),c=()=>gx((v,y)=>y.from,o),f=()=>!Object.values(o).filter(PO).length,h=null,p=v=>{s||(s=v);var y=v-s,_=y/t.dt;o=UW(t,o,_),r(da(da(da({},n),e),c())),s=v,f()||(h=a.setTimeout(p))};return()=>(h=a.setTimeout(p),()=>{var v;(v=h)===null||v===void 0||v()})}function Jbe(n,e,t,i,r,a,s){var o=null,c=r.reduce((p,v)=>{var y=n[v],_=e[v];return y==null||_==null?p:da(da({},p),{},{[v]:[y,_]})},{}),f,h=p=>{f||(f=p);var v=(p-f)/i,y=gx((E,S)=>nA(...S,t(v)),c);if(a(da(da(da({},n),e),y)),v<1)o=s.setTimeout(h);else{var _=gx((E,S)=>nA(...S,t(1)),c);a(da(da(da({},n),e),_))}};return()=>(o=s.setTimeout(h),()=>{var p;(p=o)===null||p===void 0||p()})}const e_e=(n,e,t,i,r,a)=>{var s=Xbe(n,e);return t==null?()=>(r(da(da({},n),e)),()=>{}):t.isStepper===!0?Qbe(n,e,t,s,r,a):Jbe(n,e,t,i,s,r,a)};var iA=1e-4,FW=(n,e)=>[0,3*n,3*e-6*n,3*n-3*e+1],zW=(n,e)=>n.map((t,i)=>t*e**i).reduce((t,i)=>t+i),aB=(n,e)=>t=>{var i=FW(n,e);return zW(i,t)},t_e=(n,e)=>t=>{var i=FW(n,e),r=[...i.map((a,s)=>a*s).slice(1),0];return zW(r,t)},n_e=n=>{var e,t=n.split("(");if(t.length!==2||t[0]!=="cubic-bezier")return null;var i=(e=t[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(i==null||i.length!==4)return null;var r=i.map(a=>parseFloat(a));return[r[0],r[1],r[2],r[3]]},i_e=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t.length===1)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r=n_e(t[0]);if(r)return r}}return t.length===4?t:[0,0,1,1]},r_e=(n,e,t,i)=>{var r=aB(n,t),a=aB(e,i),s=t_e(n,t),o=f=>f>1?1:f<0?0:f,c=f=>{for(var h=f>1?1:f,p=h,v=0;v<8;++v){var y=r(p)-h,_=s(p);if(Math.abs(y-h)<iA||_<iA)return a(p);p=o(p-y/_)}return a(p)};return c.isStepper=!1,c},sB=function(){return r_e(...i_e(...arguments))},a_e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:t=100,damping:i=8,dt:r=17}=e,a=(s,o,c)=>{var f=-(s-o)*t,h=c*i,p=c+(f-h)*r/1e3,v=c*r/1e3+s;return Math.abs(v-o)<iA&&Math.abs(p)<iA?[o,0]:[v,p]};return a.isStepper=!0,a.dt=r,a},s_e=n=>{if(typeof n=="string")switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return sB(n);case"spring":return a_e();default:if(n.split("(")[0]==="cubic-bezier")return sB(n)}return typeof n=="function"?n:null};function o_e(n){var e,t=()=>null,i=!1,r=null,a=s=>{if(!i){if(Array.isArray(s)){if(!s.length)return;var o=s,[c,...f]=o;if(typeof c=="number"){r=n.setTimeout(a.bind(null,f),c);return}a(c),r=n.setTimeout(a.bind(null,f));return}typeof s=="string"&&(e=s,t(e)),typeof s=="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:()=>{i=!0},start:s=>{i=!1,r&&(r(),r=null),a(s)},subscribe:s=>(t=s,()=>{t=()=>null}),getTimeoutController:()=>n}}class l_e{setTimeout(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=performance.now(),r=null,a=s=>{s-i>=t?e(s):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(a))};return r=requestAnimationFrame(a),()=>{r!=null&&cancelAnimationFrame(r)}}}function c_e(){return o_e(new l_e)}var u_e=q.createContext(c_e);function f_e(n,e){var t=q.useContext(u_e);return q.useMemo(()=>e??t(n),[n,e,t])}var h_e=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Qx={isSsr:h_e()},d_e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},oB={t:0},NP={t:1};function BW(n){var e=pl(n,d_e),{isActive:t,canBegin:i,duration:r,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:c,children:f}=e,h=t==="auto"?!Qx.isSsr:t,p=f_e(e.animationId,e.animationManager),[v,y]=q.useState(h?oB:NP),_=q.useRef(null);return q.useEffect(()=>{h||y(NP)},[h]),q.useEffect(()=>{if(!h||!i)return ly;var E=e_e(oB,NP,s_e(a),r,y,p.getTimeoutController()),S=()=>{_.current=E()};return p.start([c,s,S,r,o]),()=>{p.stop(),_.current&&_.current(),o()}},[h,i,r,a,s,c,o,p]),f(v.t)}function VW(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",t=q.useRef(cx(e)),i=q.useRef(n);return i.current!==n&&(t.current=cx(e),i.current=n),t.current}var p_e=["radius"],m_e=["radius"],lB,cB,uB,fB,hB,dB,pB,mB,gB,vB;function yB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function bB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yB(Object(t),!0).forEach(function(i){g_e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yB(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function g_e(n,e,t){return(e=v_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function v_e(n){var e=y_e(n,"string");return typeof e=="symbol"?e:e+""}function y_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function rA(){return rA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},rA.apply(null,arguments)}function _B(n,e){if(n==null)return{};var t,i,r=b_e(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function b_e(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function Ru(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var xB=(n,e,t,i,r)=>{var a=Xd(t),s=Xd(i),o=Math.min(Math.abs(a)/2,Math.abs(s)/2),c=s>=0?1:-1,f=a>=0?1:-1,h=s>=0&&a>=0||s<0&&a<0?1:0,p;if(o>0&&Array.isArray(r)){for(var v=[0,0,0,0],y=0,_=4;y<_;y++){var E,S=(E=r[y])!==null&&E!==void 0?E:0;v[y]=S>o?o:S}p=Qa(lB||(lB=Ru(["M",",",""])),n,e+c*v[0]),v[0]>0&&(p+=Qa(cB||(cB=Ru(["A ",",",",0,0,",",",",",""])),v[0],v[0],h,n+f*v[0],e)),p+=Qa(uB||(uB=Ru(["L ",",",""])),n+t-f*v[1],e),v[1]>0&&(p+=Qa(fB||(fB=Ru(["A ",",",",0,0,",`,
        `,",",""])),v[1],v[1],h,n+t,e+c*v[1])),p+=Qa(hB||(hB=Ru(["L ",",",""])),n+t,e+i-c*v[2]),v[2]>0&&(p+=Qa(dB||(dB=Ru(["A ",",",",0,0,",`,
        `,",",""])),v[2],v[2],h,n+t-f*v[2],e+i)),p+=Qa(pB||(pB=Ru(["L ",",",""])),n+f*v[3],e+i),v[3]>0&&(p+=Qa(mB||(mB=Ru(["A ",",",",0,0,",`,
        `,",",""])),v[3],v[3],h,n,e+i-c*v[3])),p+="Z"}else if(o>0&&r===+r&&r>0){var w=Math.min(o,r);p=Qa(gB||(gB=Ru(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),n,e+c*w,w,w,h,n+f*w,e,n+t-f*w,e,w,w,h,n+t,e+c*w,n+t,e+i-c*w,w,w,h,n+t-f*w,e+i,n+f*w,e+i,w,w,h,n,e+i-c*w)}else p=Qa(vB||(vB=Ru(["M ",","," h "," v "," h "," Z"])),n,e,t,i,-t);return p},SB={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},__e=n=>{var e=pl(n,SB),t=q.useRef(null),[i,r]=q.useState(-1);q.useEffect(()=>{if(t.current&&t.current.getTotalLength)try{var $=t.current.getTotalLength();$&&r($)}catch{}},[]);var{x:a,y:s,width:o,height:c,radius:f,className:h}=e,{animationEasing:p,animationDuration:v,animationBegin:y,isAnimationActive:_,isUpdateAnimationActive:E}=e,S=q.useRef(o),w=q.useRef(c),I=q.useRef(a),P=q.useRef(s),D=q.useMemo(()=>({x:a,y:s,width:o,height:c,radius:f}),[a,s,o,c,f]),z=VW(D,"rectangle-");if(a!==+a||s!==+s||o!==+o||c!==+c||o===0||c===0)return null;var k=rr("recharts-rectangle",h);if(!E){var U=ec(e),{radius:R}=U,M=_B(U,p_e);return q.createElement("path",rA({},M,{x:Xd(a),y:Xd(s),width:Xd(o),height:Xd(c),radius:typeof f=="number"?f:void 0,className:k,d:xB(a,s,o,c,f)}))}var L=S.current,B=w.current,V=I.current,j=P.current,Z="0px ".concat(i===-1?1:i,"px"),J="".concat(i,"px 0px"),G=$be(["strokeDasharray"],v,typeof p=="string"?p:SB.animationEasing);return q.createElement(BW,{animationId:z,key:z,canBegin:i>0,duration:v,easing:p,isActive:E,begin:y},$=>{var ae=Du(L,o,$),le=Du(B,c,$),ue=Du(V,a,$),Q=Du(j,s,$);t.current&&(S.current=ae,w.current=le,I.current=ue,P.current=Q);var re;_?$>0?re={transition:G,strokeDasharray:J}:re={strokeDasharray:Z}:re={strokeDasharray:J};var ye=ec(e),{radius:de}=ye,xe=_B(ye,m_e);return q.createElement("path",rA({},xe,{radius:typeof f=="number"?f:void 0,className:k,d:xB(ue,Q,ae,le,f),ref:t,style:bB(bB({},re),e.style)}))})};function wB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function EB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wB(Object(t),!0).forEach(function(i){x_e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):wB(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function x_e(n,e,t){return(e=S_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function S_e(n){var e=w_e(n,"string");return typeof e=="symbol"?e:e+""}function w_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var aA=Math.PI/180,E_e=n=>n*180/Math.PI,is=(n,e,t,i)=>({x:n+Math.cos(-aA*i)*t,y:e+Math.sin(-aA*i)*t}),T_e=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(i.left||0)-(i.right||0)),Math.abs(t-(i.top||0)-(i.bottom||0)))/2},A_e=(n,e)=>{var{x:t,y:i}=n,{x:r,y:a}=e;return Math.sqrt((t-r)**2+(i-a)**2)},M_e=(n,e)=>{var{x:t,y:i}=n,{cx:r,cy:a}=e,s=A_e({x:t,y:i},{x:r,y:a});if(s<=0)return{radius:s,angle:0};var o=(t-r)/s,c=Math.acos(o);return i>a&&(c=2*Math.PI-c),{radius:s,angle:E_e(c),angleInRadian:c}},C_e=n=>{var{startAngle:e,endAngle:t}=n,i=Math.floor(e/360),r=Math.floor(t/360),a=Math.min(i,r);return{startAngle:e-a*360,endAngle:t-a*360}},I_e=(n,e)=>{var{startAngle:t,endAngle:i}=e,r=Math.floor(t/360),a=Math.floor(i/360),s=Math.min(r,a);return n+s*360},R_e=(n,e)=>{var{chartX:t,chartY:i}=n,{radius:r,angle:a}=M_e({x:t,y:i},e),{innerRadius:s,outerRadius:o}=e;if(r<s||r>o||r===0)return null;var{startAngle:c,endAngle:f}=C_e(e),h=a,p;if(c<=f){for(;h>f;)h-=360;for(;h<c;)h+=360;p=h>=c&&h<=f}else{for(;h>c;)h-=360;for(;h<f;)h+=360;p=h>=f&&h<=c}return p?EB(EB({},e),{},{radius:r,angle:I_e(h,e)}):null};function jW(n){var{cx:e,cy:t,radius:i,startAngle:r,endAngle:a}=n,s=is(e,t,i,r),o=is(e,t,i,a);return{points:[s,o],cx:e,cy:t,radius:i,startAngle:r,endAngle:a}}var TB,AB,MB,CB,IB,RB,PB;function NO(){return NO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},NO.apply(null,arguments)}function Bm(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var P_e=(n,e)=>{var t=Yl(e-n),i=Math.min(Math.abs(e-n),359.999);return t*i},Hw=n=>{var{cx:e,cy:t,radius:i,angle:r,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:c}=n,f=o*(s?1:-1)+i,h=Math.asin(o/f)/aA,p=c?r:r+a*h,v=is(e,t,f,p),y=is(e,t,i,p),_=c?r-a*h:r,E=is(e,t,f*Math.cos(h*aA),_);return{center:v,circleTangency:y,lineTangency:E,theta:h}},HW=n=>{var{cx:e,cy:t,innerRadius:i,outerRadius:r,startAngle:a,endAngle:s}=n,o=P_e(a,s),c=a+o,f=is(e,t,r,a),h=is(e,t,r,c),p=Qa(TB||(TB=Bm(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),f.x,f.y,r,r,+(Math.abs(o)>180),+(a>c),h.x,h.y);if(i>0){var v=is(e,t,i,a),y=is(e,t,i,c);p+=Qa(AB||(AB=Bm(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),y.x,y.y,i,i,+(Math.abs(o)>180),+(a<=c),v.x,v.y)}else p+=Qa(MB||(MB=Bm(["L ",","," Z"])),e,t);return p},N_e=n=>{var{cx:e,cy:t,innerRadius:i,outerRadius:r,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:c,endAngle:f}=n,h=Yl(f-c),{circleTangency:p,lineTangency:v,theta:y}=Hw({cx:e,cy:t,radius:r,angle:c,sign:h,cornerRadius:a,cornerIsExternal:o}),{circleTangency:_,lineTangency:E,theta:S}=Hw({cx:e,cy:t,radius:r,angle:f,sign:-h,cornerRadius:a,cornerIsExternal:o}),w=o?Math.abs(c-f):Math.abs(c-f)-y-S;if(w<0)return s?Qa(CB||(CB=Bm(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),v.x,v.y,a,a,a*2,a,a,-a*2):HW({cx:e,cy:t,innerRadius:i,outerRadius:r,startAngle:c,endAngle:f});var I=Qa(IB||(IB=Bm(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),v.x,v.y,a,a,+(h<0),p.x,p.y,r,r,+(w>180),+(h<0),_.x,_.y,a,a,+(h<0),E.x,E.y);if(i>0){var{circleTangency:P,lineTangency:D,theta:z}=Hw({cx:e,cy:t,radius:i,angle:c,sign:h,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:k,lineTangency:U,theta:R}=Hw({cx:e,cy:t,radius:i,angle:f,sign:-h,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),M=o?Math.abs(c-f):Math.abs(c-f)-z-R;if(M<0&&a===0)return"".concat(I,"L").concat(e,",").concat(t,"Z");I+=Qa(RB||(RB=Bm(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),U.x,U.y,a,a,+(h<0),k.x,k.y,i,i,+(M>180),+(h>0),P.x,P.y,a,a,+(h<0),D.x,D.y)}else I+=Qa(PB||(PB=Bm(["L",",","Z"])),e,t);return I},O_e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},D_e=n=>{var e=pl(n,O_e),{cx:t,cy:i,innerRadius:r,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:c,startAngle:f,endAngle:h,className:p}=e;if(a<r||f===h)return null;var v=rr("recharts-sector",p),y=a-r,_=pp(s,y,0,!0),E;return _>0&&Math.abs(f-h)<360?E=N_e({cx:t,cy:i,innerRadius:r,outerRadius:a,cornerRadius:Math.min(_,y/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:f,endAngle:h}):E=HW({cx:t,cy:i,innerRadius:r,outerRadius:a,startAngle:f,endAngle:h}),q.createElement("path",NO({},ec(e),{className:v,d:E}))};function L_e(n,e,t){if(n==="horizontal")return[{x:e.x,y:t.top},{x:e.x,y:t.top+t.height}];if(n==="vertical")return[{x:t.left,y:e.y},{x:t.left+t.width,y:e.y}];if(CG(e)){if(n==="centric"){var{cx:i,cy:r,innerRadius:a,outerRadius:s,angle:o}=e,c=is(i,r,a,o),f=is(i,r,s,o);return[{x:c.x,y:c.y},{x:f.x,y:f.y}]}return jW(e)}}var OP={},DP={},LP={},NB;function k_e(){return NB||(NB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=FG();function t(i){return e.isSymbol(i)?NaN:Number(i)}n.toNumber=t})(LP)),LP}var OB;function U_e(){return OB||(OB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=k_e();function t(i){return i?(i=e.toNumber(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}n.toFinite=t})(DP)),DP}var DB;function F_e(){return DB||(DB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=zG(),t=U_e();function i(r,a,s){s&&typeof s!="number"&&e.isIterateeCall(r,a,s)&&(a=s=void 0),r=t.toFinite(r),a===void 0?(a=r,r=0):a=t.toFinite(a),s=s===void 0?r<a?1:-1:t.toFinite(s);const o=Math.max(Math.ceil((a-r)/(s||1)),0),c=new Array(o);for(let f=0;f<o;f++)c[f]=r,r+=s;return c}n.range=i})(OP)),OP}var kP,LB;function z_e(){return LB||(LB=1,kP=F_e().range),kP}var B_e=z_e();const GW=Wc(B_e);function tp(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function V_e(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function bL(n){let e,t,i;n.length!==2?(e=tp,t=(o,c)=>tp(n(o),c),i=(o,c)=>n(o)-c):(e=n===tp||n===V_e?n:j_e,t=n,i=n);function r(o,c,f=0,h=o.length){if(f<h){if(e(c,c)!==0)return h;do{const p=f+h>>>1;t(o[p],c)<0?f=p+1:h=p}while(f<h)}return f}function a(o,c,f=0,h=o.length){if(f<h){if(e(c,c)!==0)return h;do{const p=f+h>>>1;t(o[p],c)<=0?f=p+1:h=p}while(f<h)}return f}function s(o,c,f=0,h=o.length){const p=r(o,c,f,h-1);return p>f&&i(o[p-1],c)>-i(o[p],c)?p-1:p}return{left:r,center:s,right:a}}function j_e(){return 0}function WW(n){return n===null?NaN:+n}function*H_e(n,e){for(let t of n)t!=null&&(t=+t)>=t&&(yield t)}const G_e=bL(tp),Jx=G_e.right;bL(WW).center;class kB extends Map{constructor(e,t=$_e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(UB(this,e))}has(e){return super.has(UB(this,e))}set(e,t){return super.set(W_e(this,e),t)}delete(e){return super.delete(q_e(this,e))}}function UB({_intern:n,_key:e},t){const i=e(t);return n.has(i)?n.get(i):t}function W_e({_intern:n,_key:e},t){const i=e(t);return n.has(i)?n.get(i):(n.set(i,t),t)}function q_e({_intern:n,_key:e},t){const i=e(t);return n.has(i)&&(t=n.get(i),n.delete(i)),t}function $_e(n){return n!==null&&typeof n=="object"?n.valueOf():n}function X_e(n=tp){if(n===tp)return qW;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const i=n(e,t);return i||i===0?i:(n(t,t)===0)-(n(e,e)===0)}}function qW(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0)}const Y_e=Math.sqrt(50),K_e=Math.sqrt(10),Z_e=Math.sqrt(2);function sA(n,e,t){const i=(e-n)/Math.max(0,t),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),s=a>=Y_e?10:a>=K_e?5:a>=Z_e?2:1;let o,c,f;return r<0?(f=Math.pow(10,-r)/s,o=Math.round(n*f),c=Math.round(e*f),o/f<n&&++o,c/f>e&&--c,f=-f):(f=Math.pow(10,r)*s,o=Math.round(n/f),c=Math.round(e/f),o*f<n&&++o,c*f>e&&--c),c<o&&.5<=t&&t<2?sA(n,e,t*2):[o,c,f]}function OO(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const i=e<n,[r,a,s]=i?sA(e,n,t):sA(n,e,t);if(!(a>=r))return[];const o=a-r+1,c=new Array(o);if(i)if(s<0)for(let f=0;f<o;++f)c[f]=(a-f)/-s;else for(let f=0;f<o;++f)c[f]=(a-f)*s;else if(s<0)for(let f=0;f<o;++f)c[f]=(r+f)/-s;else for(let f=0;f<o;++f)c[f]=(r+f)*s;return c}function DO(n,e,t){return e=+e,n=+n,t=+t,sA(n,e,t)[2]}function LO(n,e,t){e=+e,n=+n,t=+t;const i=e<n,r=i?DO(e,n,t):DO(n,e,t);return(i?-1:1)*(r<0?1/-r:r)}function FB(n,e){let t;for(const i of n)i!=null&&(t<i||t===void 0&&i>=i)&&(t=i);return t}function zB(n,e){let t;for(const i of n)i!=null&&(t>i||t===void 0&&i>=i)&&(t=i);return t}function $W(n,e,t=0,i=1/0,r){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),i=Math.floor(Math.min(n.length-1,i)),!(t<=e&&e<=i))return n;for(r=r===void 0?qW:X_e(r);i>t;){if(i-t>600){const c=i-t+1,f=e-t+1,h=Math.log(c),p=.5*Math.exp(2*h/3),v=.5*Math.sqrt(h*p*(c-p)/c)*(f-c/2<0?-1:1),y=Math.max(t,Math.floor(e-f*p/c+v)),_=Math.min(i,Math.floor(e+(c-f)*p/c+v));$W(n,e,y,_,r)}const a=n[e];let s=t,o=i;for(Jb(n,t,e),r(n[i],a)>0&&Jb(n,t,i);s<o;){for(Jb(n,s,o),++s,--o;r(n[s],a)<0;)++s;for(;r(n[o],a)>0;)--o}r(n[t],a)===0?Jb(n,t,o):(++o,Jb(n,o,i)),o<=e&&(t=o+1),e<=o&&(i=o-1)}return n}function Jb(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}function Q_e(n,e,t){if(n=Float64Array.from(H_e(n)),!(!(i=n.length)||isNaN(e=+e))){if(e<=0||i<2)return zB(n);if(e>=1)return FB(n);var i,r=(i-1)*e,a=Math.floor(r),s=FB($W(n,a).subarray(0,a+1)),o=zB(n.subarray(a+1));return s+(o-s)*(r-a)}}function J_e(n,e,t=WW){if(!(!(i=n.length)||isNaN(e=+e))){if(e<=0||i<2)return+t(n[0],0,n);if(e>=1)return+t(n[i-1],i-1,n);var i,r=(i-1)*e,a=Math.floor(r),s=+t(n[a],a,n),o=+t(n[a+1],a+1,n);return s+(o-s)*(r-a)}}function exe(n,e,t){n=+n,e=+e,t=(r=arguments.length)<2?(e=n,n=0,1):r<3?1:+t;for(var i=-1,r=Math.max(0,Math.ceil((e-n)/t))|0,a=new Array(r);++i<r;)a[i]=n+i*t;return a}function rc(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function Th(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const kO=Symbol("implicit");function _L(){var n=new kB,e=[],t=[],i=kO;function r(a){let s=n.get(a);if(s===void 0){if(i!==kO)return i;n.set(a,s=e.push(a)-1)}return t[s%t.length]}return r.domain=function(a){if(!arguments.length)return e.slice();e=[],n=new kB;for(const s of a)n.has(s)||n.set(s,e.push(s)-1);return r},r.range=function(a){return arguments.length?(t=Array.from(a),r):t.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return _L(e,t).unknown(i)},rc.apply(r,arguments),r}function xL(){var n=_L().unknown(void 0),e=n.domain,t=n.range,i=0,r=1,a,s,o=!1,c=0,f=0,h=.5;delete n.unknown;function p(){var v=e().length,y=r<i,_=y?r:i,E=y?i:r;a=(E-_)/Math.max(1,v-c+f*2),o&&(a=Math.floor(a)),_+=(E-_-a*(v-c))*h,s=a*(1-c),o&&(_=Math.round(_),s=Math.round(s));var S=exe(v).map(function(w){return _+a*w});return t(y?S.reverse():S)}return n.domain=function(v){return arguments.length?(e(v),p()):e()},n.range=function(v){return arguments.length?([i,r]=v,i=+i,r=+r,p()):[i,r]},n.rangeRound=function(v){return[i,r]=v,i=+i,r=+r,o=!0,p()},n.bandwidth=function(){return s},n.step=function(){return a},n.round=function(v){return arguments.length?(o=!!v,p()):o},n.padding=function(v){return arguments.length?(c=Math.min(1,f=+v),p()):c},n.paddingInner=function(v){return arguments.length?(c=Math.min(1,v),p()):c},n.paddingOuter=function(v){return arguments.length?(f=+v,p()):f},n.align=function(v){return arguments.length?(h=Math.max(0,Math.min(1,v)),p()):h},n.copy=function(){return xL(e(),[i,r]).round(o).paddingInner(c).paddingOuter(f).align(h)},rc.apply(p(),arguments)}function XW(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return XW(e())},n}function txe(){return XW(xL.apply(null,arguments).paddingInner(1))}function SL(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function YW(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function e1(){}var vx=.7,oA=1/vx,Ev="\\s*([+-]?\\d+)\\s*",yx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ku="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nxe=/^#([0-9a-f]{3,8})$/,ixe=new RegExp(`^rgb\\(${Ev},${Ev},${Ev}\\)$`),rxe=new RegExp(`^rgb\\(${Ku},${Ku},${Ku}\\)$`),axe=new RegExp(`^rgba\\(${Ev},${Ev},${Ev},${yx}\\)$`),sxe=new RegExp(`^rgba\\(${Ku},${Ku},${Ku},${yx}\\)$`),oxe=new RegExp(`^hsl\\(${yx},${Ku},${Ku}\\)$`),lxe=new RegExp(`^hsla\\(${yx},${Ku},${Ku},${yx}\\)$`),BB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};SL(e1,bx,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:VB,formatHex:VB,formatHex8:cxe,formatHsl:uxe,formatRgb:jB,toString:jB});function VB(){return this.rgb().formatHex()}function cxe(){return this.rgb().formatHex8()}function uxe(){return KW(this).formatHsl()}function jB(){return this.rgb().formatRgb()}function bx(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=nxe.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?HB(e):t===3?new zo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Gw(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Gw(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ixe.exec(n))?new zo(e[1],e[2],e[3],1):(e=rxe.exec(n))?new zo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=axe.exec(n))?Gw(e[1],e[2],e[3],e[4]):(e=sxe.exec(n))?Gw(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=oxe.exec(n))?qB(e[1],e[2]/100,e[3]/100,1):(e=lxe.exec(n))?qB(e[1],e[2]/100,e[3]/100,e[4]):BB.hasOwnProperty(n)?HB(BB[n]):n==="transparent"?new zo(NaN,NaN,NaN,0):null}function HB(n){return new zo(n>>16&255,n>>8&255,n&255,1)}function Gw(n,e,t,i){return i<=0&&(n=e=t=NaN),new zo(n,e,t,i)}function fxe(n){return n instanceof e1||(n=bx(n)),n?(n=n.rgb(),new zo(n.r,n.g,n.b,n.opacity)):new zo}function UO(n,e,t,i){return arguments.length===1?fxe(n):new zo(n,e,t,i??1)}function zo(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}SL(zo,UO,YW(e1,{brighter(n){return n=n==null?oA:Math.pow(oA,n),new zo(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?vx:Math.pow(vx,n),new zo(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new zo(Jm(this.r),Jm(this.g),Jm(this.b),lA(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:GB,formatHex:GB,formatHex8:hxe,formatRgb:WB,toString:WB}));function GB(){return`#${Vm(this.r)}${Vm(this.g)}${Vm(this.b)}`}function hxe(){return`#${Vm(this.r)}${Vm(this.g)}${Vm(this.b)}${Vm((isNaN(this.opacity)?1:this.opacity)*255)}`}function WB(){const n=lA(this.opacity);return`${n===1?"rgb(":"rgba("}${Jm(this.r)}, ${Jm(this.g)}, ${Jm(this.b)}${n===1?")":`, ${n})`}`}function lA(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Jm(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Vm(n){return n=Jm(n),(n<16?"0":"")+n.toString(16)}function qB(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Lc(n,e,t,i)}function KW(n){if(n instanceof Lc)return new Lc(n.h,n.s,n.l,n.opacity);if(n instanceof e1||(n=bx(n)),!n)return new Lc;if(n instanceof Lc)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),a=Math.max(e,t,i),s=NaN,o=a-r,c=(a+r)/2;return o?(e===a?s=(t-i)/o+(t<i)*6:t===a?s=(i-e)/o+2:s=(e-t)/o+4,o/=c<.5?a+r:2-a-r,s*=60):o=c>0&&c<1?0:s,new Lc(s,o,c,n.opacity)}function dxe(n,e,t,i){return arguments.length===1?KW(n):new Lc(n,e,t,i??1)}function Lc(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}SL(Lc,dxe,YW(e1,{brighter(n){return n=n==null?oA:Math.pow(oA,n),new Lc(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?vx:Math.pow(vx,n),new Lc(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new zo(UP(n>=240?n-240:n+120,r,i),UP(n,r,i),UP(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new Lc($B(this.h),Ww(this.s),Ww(this.l),lA(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=lA(this.opacity);return`${n===1?"hsl(":"hsla("}${$B(this.h)}, ${Ww(this.s)*100}%, ${Ww(this.l)*100}%${n===1?")":`, ${n})`}`}}));function $B(n){return n=(n||0)%360,n<0?n+360:n}function Ww(n){return Math.max(0,Math.min(1,n||0))}function UP(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const wL=n=>()=>n;function pxe(n,e){return function(t){return n+t*e}}function mxe(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function gxe(n){return(n=+n)==1?ZW:function(e,t){return t-e?mxe(e,t,n):wL(isNaN(e)?t:e)}}function ZW(n,e){var t=e-n;return t?pxe(n,t):wL(isNaN(n)?e:n)}const XB=(function n(e){var t=gxe(e);function i(r,a){var s=t((r=UO(r)).r,(a=UO(a)).r),o=t(r.g,a.g),c=t(r.b,a.b),f=ZW(r.opacity,a.opacity);return function(h){return r.r=s(h),r.g=o(h),r.b=c(h),r.opacity=f(h),r+""}}return i.gamma=n,i})(1);function vxe(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,i=e.slice(),r;return function(a){for(r=0;r<t;++r)i[r]=n[r]*(1-a)+e[r]*a;return i}}function yxe(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function bxe(n,e){var t=e?e.length:0,i=n?Math.min(t,n.length):0,r=new Array(i),a=new Array(t),s;for(s=0;s<i;++s)r[s]=uy(n[s],e[s]);for(;s<t;++s)a[s]=e[s];return function(o){for(s=0;s<i;++s)a[s]=r[s](o);return a}}function _xe(n,e){var t=new Date;return n=+n,e=+e,function(i){return t.setTime(n*(1-i)+e*i),t}}function cA(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function xxe(n,e){var t={},i={},r;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in n?t[r]=uy(n[r],e[r]):i[r]=e[r];return function(a){for(r in t)i[r]=t[r](a);return i}}var FO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,FP=new RegExp(FO.source,"g");function Sxe(n){return function(){return n}}function wxe(n){return function(e){return n(e)+""}}function Exe(n,e){var t=FO.lastIndex=FP.lastIndex=0,i,r,a,s=-1,o=[],c=[];for(n=n+"",e=e+"";(i=FO.exec(n))&&(r=FP.exec(e));)(a=r.index)>t&&(a=e.slice(t,a),o[s]?o[s]+=a:o[++s]=a),(i=i[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,c.push({i:s,x:cA(i,r)})),t=FP.lastIndex;return t<e.length&&(a=e.slice(t),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?wxe(c[0].x):Sxe(e):(e=c.length,function(f){for(var h=0,p;h<e;++h)o[(p=c[h]).i]=p.x(f);return o.join("")})}function uy(n,e){var t=typeof e,i;return e==null||t==="boolean"?wL(e):(t==="number"?cA:t==="string"?(i=bx(e))?(e=i,XB):Exe:e instanceof bx?XB:e instanceof Date?_xe:yxe(e)?vxe:Array.isArray(e)?bxe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?xxe:cA)(n,e)}function EL(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function Txe(n,e){e===void 0&&(e=n,n=uy);for(var t=0,i=e.length-1,r=e[0],a=new Array(i<0?0:i);t<i;)a[t]=n(r,r=e[++t]);return function(s){var o=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return a[o](s-o)}}function Axe(n){return function(){return n}}function uA(n){return+n}var YB=[0,1];function to(n){return n}function zO(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:Axe(isNaN(e)?NaN:.5)}function Mxe(n,e){var t;return n>e&&(t=n,n=e,e=t),function(i){return Math.max(n,Math.min(e,i))}}function Cxe(n,e,t){var i=n[0],r=n[1],a=e[0],s=e[1];return r<i?(i=zO(r,i),a=t(s,a)):(i=zO(i,r),a=t(a,s)),function(o){return a(i(o))}}function Ixe(n,e,t){var i=Math.min(n.length,e.length)-1,r=new Array(i),a=new Array(i),s=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++s<i;)r[s]=zO(n[s],n[s+1]),a[s]=t(e[s],e[s+1]);return function(o){var c=Jx(n,o,1,i)-1;return a[c](r[c](o))}}function t1(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function cC(){var n=YB,e=YB,t=uy,i,r,a,s=to,o,c,f;function h(){var v=Math.min(n.length,e.length);return s!==to&&(s=Mxe(n[0],n[v-1])),o=v>2?Ixe:Cxe,c=f=null,p}function p(v){return v==null||isNaN(v=+v)?a:(c||(c=o(n.map(i),e,t)))(i(s(v)))}return p.invert=function(v){return s(r((f||(f=o(e,n.map(i),cA)))(v)))},p.domain=function(v){return arguments.length?(n=Array.from(v,uA),h()):n.slice()},p.range=function(v){return arguments.length?(e=Array.from(v),h()):e.slice()},p.rangeRound=function(v){return e=Array.from(v),t=EL,h()},p.clamp=function(v){return arguments.length?(s=v?!0:to,h()):s!==to},p.interpolate=function(v){return arguments.length?(t=v,h()):t},p.unknown=function(v){return arguments.length?(a=v,p):a},function(v,y){return i=v,r=y,h()}}function TL(){return cC()(to,to)}function Rxe(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function fA(n,e){if(!isFinite(n)||n===0)return null;var t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"),i=n.slice(0,t);return[i.length>1?i[0]+i.slice(2):i,+n.slice(t+1)]}function $v(n){return n=fA(Math.abs(n)),n?n[1]:NaN}function Pxe(n,e){return function(t,i){for(var r=t.length,a=[],s=0,o=n[0],c=0;r>0&&o>0&&(c+o+1>i&&(o=Math.max(1,i-c)),a.push(t.substring(r-=o,r+o)),!((c+=o+1)>i));)o=n[s=(s+1)%n.length];return a.reverse().join(e)}}function Nxe(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var Oxe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _x(n){if(!(e=Oxe.exec(n)))throw new Error("invalid format: "+n);var e;return new AL({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}_x.prototype=AL.prototype;function AL(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}AL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Dxe(n){e:for(var e=n.length,t=1,i=-1,r;t<e;++t)switch(n[t]){case".":i=r=t;break;case"0":i===0&&(i=t),r=t;break;default:if(!+n[t])break e;i>0&&(i=0);break}return i>0?n.slice(0,i)+n.slice(r+1):n}var hA;function Lxe(n,e){var t=fA(n,e);if(!t)return hA=void 0,n.toPrecision(e);var i=t[0],r=t[1],a=r-(hA=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+fA(n,Math.max(0,e+a-1))[0]}function KB(n,e){var t=fA(n,e);if(!t)return n+"";var i=t[0],r=t[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const ZB={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:Rxe,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>KB(n*100,e),r:KB,s:Lxe,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function QB(n){return n}var JB=Array.prototype.map,e6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function kxe(n){var e=n.grouping===void 0||n.thousands===void 0?QB:Pxe(JB.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",i=n.currency===void 0?"":n.currency[1]+"",r=n.decimal===void 0?".":n.decimal+"",a=n.numerals===void 0?QB:Nxe(JB.call(n.numerals,String)),s=n.percent===void 0?"%":n.percent+"",o=n.minus===void 0?"":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function f(p,v){p=_x(p);var y=p.fill,_=p.align,E=p.sign,S=p.symbol,w=p.zero,I=p.width,P=p.comma,D=p.precision,z=p.trim,k=p.type;k==="n"?(P=!0,k="g"):ZB[k]||(D===void 0&&(D=12),z=!0,k="g"),(w||y==="0"&&_==="=")&&(w=!0,y="0",_="=");var U=(v&&v.prefix!==void 0?v.prefix:"")+(S==="$"?t:S==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():""),R=(S==="$"?i:/[%p]/.test(k)?s:"")+(v&&v.suffix!==void 0?v.suffix:""),M=ZB[k],L=/[defgprs%]/.test(k);D=D===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D));function B(V){var j=U,Z=R,J,G,$;if(k==="c")Z=M(V)+Z,V="";else{V=+V;var ae=V<0||1/V<0;if(V=isNaN(V)?c:M(Math.abs(V),D),z&&(V=Dxe(V)),ae&&+V==0&&E!=="+"&&(ae=!1),j=(ae?E==="("?E:o:E==="-"||E==="("?"":E)+j,Z=(k==="s"&&!isNaN(V)&&hA!==void 0?e6[8+hA/3]:"")+Z+(ae&&E==="("?")":""),L){for(J=-1,G=V.length;++J<G;)if($=V.charCodeAt(J),48>$||$>57){Z=($===46?r+V.slice(J+1):V.slice(J))+Z,V=V.slice(0,J);break}}}P&&!w&&(V=e(V,1/0));var le=j.length+V.length+Z.length,ue=le<I?new Array(I-le+1).join(y):"";switch(P&&w&&(V=e(ue+V,ue.length?I-Z.length:1/0),ue=""),_){case"<":V=j+V+Z+ue;break;case"=":V=j+ue+V+Z;break;case"^":V=ue.slice(0,le=ue.length>>1)+j+V+Z+ue.slice(le);break;default:V=ue+j+V+Z;break}return a(V)}return B.toString=function(){return p+""},B}function h(p,v){var y=Math.max(-8,Math.min(8,Math.floor($v(v)/3)))*3,_=Math.pow(10,-y),E=f((p=_x(p),p.type="f",p),{suffix:e6[8+y/3]});return function(S){return E(_*S)}}return{format:f,formatPrefix:h}}var qw,ML,QW;Uxe({thousands:",",grouping:[3],currency:["$",""]});function Uxe(n){return qw=kxe(n),ML=qw.format,QW=qw.formatPrefix,qw}function Fxe(n){return Math.max(0,-$v(Math.abs(n)))}function zxe(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($v(e)/3)))*3-$v(Math.abs(n)))}function Bxe(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,$v(e)-$v(n))+1}function JW(n,e,t,i){var r=LO(n,e,t),a;switch(i=_x(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(n),Math.abs(e));return i.precision==null&&!isNaN(a=zxe(r,s))&&(i.precision=a),QW(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=Bxe(r,Math.max(Math.abs(n),Math.abs(e))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=Fxe(r))&&(i.precision=a-(i.type==="%")*2);break}}return ML(i)}function wp(n){var e=n.domain;return n.ticks=function(t){var i=e();return OO(i[0],i[i.length-1],t??10)},n.tickFormat=function(t,i){var r=e();return JW(r[0],r[r.length-1],t??10,i)},n.nice=function(t){t==null&&(t=10);var i=e(),r=0,a=i.length-1,s=i[r],o=i[a],c,f,h=10;for(o<s&&(f=s,s=o,o=f,f=r,r=a,a=f);h-- >0;){if(f=DO(s,o,t),f===c)return i[r]=s,i[a]=o,e(i);if(f>0)s=Math.floor(s/f)*f,o=Math.ceil(o/f)*f;else if(f<0)s=Math.ceil(s*f)/f,o=Math.floor(o*f)/f;else break;c=f}return n},n}function eq(){var n=TL();return n.copy=function(){return t1(n,eq())},rc.apply(n,arguments),wp(n)}function tq(n){var e;function t(i){return i==null||isNaN(i=+i)?e:i}return t.invert=t,t.domain=t.range=function(i){return arguments.length?(n=Array.from(i,uA),t):n.slice()},t.unknown=function(i){return arguments.length?(e=i,t):e},t.copy=function(){return tq(n).unknown(e)},n=arguments.length?Array.from(n,uA):[0,1],wp(t)}function nq(n,e){n=n.slice();var t=0,i=n.length-1,r=n[t],a=n[i],s;return a<r&&(s=t,t=i,i=s,s=r,r=a,a=s),n[t]=e.floor(r),n[i]=e.ceil(a),n}function t6(n){return Math.log(n)}function n6(n){return Math.exp(n)}function Vxe(n){return-Math.log(-n)}function jxe(n){return-Math.exp(-n)}function Hxe(n){return isFinite(n)?+("1e"+n):n<0?0:n}function Gxe(n){return n===10?Hxe:n===Math.E?Math.exp:e=>Math.pow(n,e)}function Wxe(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function i6(n){return(e,t)=>-n(-e,t)}function CL(n){const e=n(t6,n6),t=e.domain;let i=10,r,a;function s(){return r=Wxe(i),a=Gxe(i),t()[0]<0?(r=i6(r),a=i6(a),n(Vxe,jxe)):n(t6,n6),e}return e.base=function(o){return arguments.length?(i=+o,s()):i},e.domain=function(o){return arguments.length?(t(o),s()):t()},e.ticks=o=>{const c=t();let f=c[0],h=c[c.length-1];const p=h<f;p&&([f,h]=[h,f]);let v=r(f),y=r(h),_,E;const S=o==null?10:+o;let w=[];if(!(i%1)&&y-v<S){if(v=Math.floor(v),y=Math.ceil(y),f>0){for(;v<=y;++v)for(_=1;_<i;++_)if(E=v<0?_/a(-v):_*a(v),!(E<f)){if(E>h)break;w.push(E)}}else for(;v<=y;++v)for(_=i-1;_>=1;--_)if(E=v>0?_/a(-v):_*a(v),!(E<f)){if(E>h)break;w.push(E)}w.length*2<S&&(w=OO(f,h,S))}else w=OO(v,y,Math.min(y-v,S)).map(a);return p?w.reverse():w},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=i===10?"s":","),typeof c!="function"&&(!(i%1)&&(c=_x(c)).precision==null&&(c.trim=!0),c=ML(c)),o===1/0)return c;const f=Math.max(1,i*o/e.ticks().length);return h=>{let p=h/a(Math.round(r(h)));return p*i<i-.5&&(p*=i),p<=f?c(h):""}},e.nice=()=>t(nq(t(),{floor:o=>a(Math.floor(r(o))),ceil:o=>a(Math.ceil(r(o)))})),e}function iq(){const n=CL(cC()).domain([1,10]);return n.copy=()=>t1(n,iq()).base(n.base()),rc.apply(n,arguments),n}function r6(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function a6(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function IL(n){var e=1,t=n(r6(e),a6(e));return t.constant=function(i){return arguments.length?n(r6(e=+i),a6(e)):e},wp(t)}function rq(){var n=IL(cC());return n.copy=function(){return t1(n,rq()).constant(n.constant())},rc.apply(n,arguments)}function s6(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function qxe(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function $xe(n){return n<0?-n*n:n*n}function RL(n){var e=n(to,to),t=1;function i(){return t===1?n(to,to):t===.5?n(qxe,$xe):n(s6(t),s6(1/t))}return e.exponent=function(r){return arguments.length?(t=+r,i()):t},wp(e)}function PL(){var n=RL(cC());return n.copy=function(){return t1(n,PL()).exponent(n.exponent())},rc.apply(n,arguments),n}function Xxe(){return PL.apply(null,arguments).exponent(.5)}function o6(n){return Math.sign(n)*n*n}function Yxe(n){return Math.sign(n)*Math.sqrt(Math.abs(n))}function aq(){var n=TL(),e=[0,1],t=!1,i;function r(a){var s=Yxe(n(a));return isNaN(s)?i:t?Math.round(s):s}return r.invert=function(a){return n.invert(o6(a))},r.domain=function(a){return arguments.length?(n.domain(a),r):n.domain()},r.range=function(a){return arguments.length?(n.range((e=Array.from(a,uA)).map(o6)),r):e.slice()},r.rangeRound=function(a){return r.range(a).round(!0)},r.round=function(a){return arguments.length?(t=!!a,r):t},r.clamp=function(a){return arguments.length?(n.clamp(a),r):n.clamp()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return aq(n.domain(),e).round(t).clamp(n.clamp()).unknown(i)},rc.apply(r,arguments),wp(r)}function sq(){var n=[],e=[],t=[],i;function r(){var s=0,o=Math.max(1,e.length);for(t=new Array(o-1);++s<o;)t[s-1]=J_e(n,s/o);return a}function a(s){return s==null||isNaN(s=+s)?i:e[Jx(t,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?t[o-1]:n[0],o<t.length?t[o]:n[n.length-1]]},a.domain=function(s){if(!arguments.length)return n.slice();n=[];for(let o of s)o!=null&&!isNaN(o=+o)&&n.push(o);return n.sort(tp),r()},a.range=function(s){return arguments.length?(e=Array.from(s),r()):e.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.quantiles=function(){return t.slice()},a.copy=function(){return sq().domain(n).range(e).unknown(i)},rc.apply(a,arguments)}function oq(){var n=0,e=1,t=1,i=[.5],r=[0,1],a;function s(c){return c!=null&&c<=c?r[Jx(i,c,0,t)]:a}function o(){var c=-1;for(i=new Array(t);++c<t;)i[c]=((c+1)*e-(c-t)*n)/(t+1);return s}return s.domain=function(c){return arguments.length?([n,e]=c,n=+n,e=+e,o()):[n,e]},s.range=function(c){return arguments.length?(t=(r=Array.from(c)).length-1,o()):r.slice()},s.invertExtent=function(c){var f=r.indexOf(c);return f<0?[NaN,NaN]:f<1?[n,i[0]]:f>=t?[i[t-1],e]:[i[f-1],i[f]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return i.slice()},s.copy=function(){return oq().domain([n,e]).range(r).unknown(a)},rc.apply(wp(s),arguments)}function lq(){var n=[.5],e=[0,1],t,i=1;function r(a){return a!=null&&a<=a?e[Jx(n,a,0,i)]:t}return r.domain=function(a){return arguments.length?(n=Array.from(a),i=Math.min(n.length,e.length-1),r):n.slice()},r.range=function(a){return arguments.length?(e=Array.from(a),i=Math.min(n.length,e.length-1),r):e.slice()},r.invertExtent=function(a){var s=e.indexOf(a);return[n[s-1],n[s]]},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return lq().domain(n).range(e).unknown(t)},rc.apply(r,arguments)}const zP=new Date,BP=new Date;function ba(n,e,t,i){function r(a){return n(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(n(a=new Date(+a)),a),r.ceil=a=>(n(a=new Date(a-1)),e(a,1),n(a),a),r.round=a=>{const s=r(a),o=r.ceil(a);return a-s<o-a?s:o},r.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),r.range=(a,s,o)=>{const c=[];if(a=r.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let f;do c.push(f=new Date(+a)),e(a,o),n(a);while(f<a&&a<s);return c},r.filter=a=>ba(s=>{if(s>=s)for(;n(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),t&&(r.count=(a,s)=>(zP.setTime(+a),BP.setTime(+s),n(zP),n(BP),Math.floor(t(zP,BP))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?s=>i(s)%a===0:s=>r.count(0,s)%a===0):r)),r}const dA=ba(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);dA.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?ba(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):dA);dA.range;const sh=1e3,Kl=sh*60,oh=Kl*60,yh=oh*24,NL=yh*7,l6=yh*30,VP=yh*365,jm=ba(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*sh)},(n,e)=>(e-n)/sh,n=>n.getUTCSeconds());jm.range;const OL=ba(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*sh)},(n,e)=>{n.setTime(+n+e*Kl)},(n,e)=>(e-n)/Kl,n=>n.getMinutes());OL.range;const DL=ba(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*Kl)},(n,e)=>(e-n)/Kl,n=>n.getUTCMinutes());DL.range;const LL=ba(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*sh-n.getMinutes()*Kl)},(n,e)=>{n.setTime(+n+e*oh)},(n,e)=>(e-n)/oh,n=>n.getHours());LL.range;const kL=ba(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*oh)},(n,e)=>(e-n)/oh,n=>n.getUTCHours());kL.range;const n1=ba(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*Kl)/yh,n=>n.getDate()-1);n1.range;const uC=ba(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/yh,n=>n.getUTCDate()-1);uC.range;const cq=ba(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/yh,n=>Math.floor(n/yh));cq.range;function Rg(n){return ba(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Kl)/NL)}const fC=Rg(0),pA=Rg(1),Kxe=Rg(2),Zxe=Rg(3),Xv=Rg(4),Qxe=Rg(5),Jxe=Rg(6);fC.range;pA.range;Kxe.range;Zxe.range;Xv.range;Qxe.range;Jxe.range;function Pg(n){return ba(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/NL)}const hC=Pg(0),mA=Pg(1),e1e=Pg(2),t1e=Pg(3),Yv=Pg(4),n1e=Pg(5),i1e=Pg(6);hC.range;mA.range;e1e.range;t1e.range;Yv.range;n1e.range;i1e.range;const UL=ba(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());UL.range;const FL=ba(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());FL.range;const bh=ba(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());bh.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:ba(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});bh.range;const _h=ba(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());_h.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:ba(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});_h.range;function uq(n,e,t,i,r,a){const s=[[jm,1,sh],[jm,5,5*sh],[jm,15,15*sh],[jm,30,30*sh],[a,1,Kl],[a,5,5*Kl],[a,15,15*Kl],[a,30,30*Kl],[r,1,oh],[r,3,3*oh],[r,6,6*oh],[r,12,12*oh],[i,1,yh],[i,2,2*yh],[t,1,NL],[e,1,l6],[e,3,3*l6],[n,1,VP]];function o(f,h,p){const v=h<f;v&&([f,h]=[h,f]);const y=p&&typeof p.range=="function"?p:c(f,h,p),_=y?y.range(f,+h+1):[];return v?_.reverse():_}function c(f,h,p){const v=Math.abs(h-f)/p,y=bL(([,,S])=>S).right(s,v);if(y===s.length)return n.every(LO(f/VP,h/VP,p));if(y===0)return dA.every(Math.max(LO(f,h,p),1));const[_,E]=s[v/s[y-1][2]<s[y][2]/v?y-1:y];return _.every(E)}return[o,c]}const[r1e,a1e]=uq(_h,FL,hC,cq,kL,DL),[s1e,o1e]=uq(bh,UL,fC,n1,LL,OL);function jP(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function HP(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function e_(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function l1e(n){var e=n.dateTime,t=n.date,i=n.time,r=n.periods,a=n.days,s=n.shortDays,o=n.months,c=n.shortMonths,f=t_(r),h=n_(r),p=t_(a),v=n_(a),y=t_(s),_=n_(s),E=t_(o),S=n_(o),w=t_(c),I=n_(c),P={a:$,A:ae,b:le,B:ue,c:null,d:p6,e:p6,f:P1e,g:V1e,G:H1e,H:C1e,I:I1e,j:R1e,L:fq,m:N1e,M:O1e,p:Q,q:re,Q:v6,s:y6,S:D1e,u:L1e,U:k1e,V:U1e,w:F1e,W:z1e,x:null,X:null,y:B1e,Y:j1e,Z:G1e,"%":g6},D={a:ye,A:de,b:xe,B:ve,c:null,d:m6,e:m6,f:X1e,g:rSe,G:sSe,H:W1e,I:q1e,j:$1e,L:dq,m:Y1e,M:K1e,p:Te,q:Ze,Q:v6,s:y6,S:Z1e,u:Q1e,U:J1e,V:eSe,w:tSe,W:nSe,x:null,X:null,y:iSe,Y:aSe,Z:oSe,"%":g6},z={a:L,A:B,b:V,B:j,c:Z,d:h6,e:h6,f:E1e,g:f6,G:u6,H:d6,I:d6,j:_1e,L:w1e,m:b1e,M:x1e,p:M,q:y1e,Q:A1e,s:M1e,S:S1e,u:d1e,U:p1e,V:m1e,w:h1e,W:g1e,x:J,X:G,y:f6,Y:u6,Z:v1e,"%":T1e};P.x=k(t,P),P.X=k(i,P),P.c=k(e,P),D.x=k(t,D),D.X=k(i,D),D.c=k(e,D);function k(be,Ve){return function(vt){var Ie=[],It=-1,Ne=0,je=be.length,Le,Qe,oe;for(vt instanceof Date||(vt=new Date(+vt));++It<je;)be.charCodeAt(It)===37&&(Ie.push(be.slice(Ne,It)),(Qe=c6[Le=be.charAt(++It)])!=null?Le=be.charAt(++It):Qe=Le==="e"?" ":"0",(oe=Ve[Le])&&(Le=oe(vt,Qe)),Ie.push(Le),Ne=It+1);return Ie.push(be.slice(Ne,It)),Ie.join("")}}function U(be,Ve){return function(vt){var Ie=e_(1900,void 0,1),It=R(Ie,be,vt+="",0),Ne,je;if(It!=vt.length)return null;if("Q"in Ie)return new Date(Ie.Q);if("s"in Ie)return new Date(Ie.s*1e3+("L"in Ie?Ie.L:0));if(Ve&&!("Z"in Ie)&&(Ie.Z=0),"p"in Ie&&(Ie.H=Ie.H%12+Ie.p*12),Ie.m===void 0&&(Ie.m="q"in Ie?Ie.q:0),"V"in Ie){if(Ie.V<1||Ie.V>53)return null;"w"in Ie||(Ie.w=1),"Z"in Ie?(Ne=HP(e_(Ie.y,0,1)),je=Ne.getUTCDay(),Ne=je>4||je===0?mA.ceil(Ne):mA(Ne),Ne=uC.offset(Ne,(Ie.V-1)*7),Ie.y=Ne.getUTCFullYear(),Ie.m=Ne.getUTCMonth(),Ie.d=Ne.getUTCDate()+(Ie.w+6)%7):(Ne=jP(e_(Ie.y,0,1)),je=Ne.getDay(),Ne=je>4||je===0?pA.ceil(Ne):pA(Ne),Ne=n1.offset(Ne,(Ie.V-1)*7),Ie.y=Ne.getFullYear(),Ie.m=Ne.getMonth(),Ie.d=Ne.getDate()+(Ie.w+6)%7)}else("W"in Ie||"U"in Ie)&&("w"in Ie||(Ie.w="u"in Ie?Ie.u%7:"W"in Ie?1:0),je="Z"in Ie?HP(e_(Ie.y,0,1)).getUTCDay():jP(e_(Ie.y,0,1)).getDay(),Ie.m=0,Ie.d="W"in Ie?(Ie.w+6)%7+Ie.W*7-(je+5)%7:Ie.w+Ie.U*7-(je+6)%7);return"Z"in Ie?(Ie.H+=Ie.Z/100|0,Ie.M+=Ie.Z%100,HP(Ie)):jP(Ie)}}function R(be,Ve,vt,Ie){for(var It=0,Ne=Ve.length,je=vt.length,Le,Qe;It<Ne;){if(Ie>=je)return-1;if(Le=Ve.charCodeAt(It++),Le===37){if(Le=Ve.charAt(It++),Qe=z[Le in c6?Ve.charAt(It++):Le],!Qe||(Ie=Qe(be,vt,Ie))<0)return-1}else if(Le!=vt.charCodeAt(Ie++))return-1}return Ie}function M(be,Ve,vt){var Ie=f.exec(Ve.slice(vt));return Ie?(be.p=h.get(Ie[0].toLowerCase()),vt+Ie[0].length):-1}function L(be,Ve,vt){var Ie=y.exec(Ve.slice(vt));return Ie?(be.w=_.get(Ie[0].toLowerCase()),vt+Ie[0].length):-1}function B(be,Ve,vt){var Ie=p.exec(Ve.slice(vt));return Ie?(be.w=v.get(Ie[0].toLowerCase()),vt+Ie[0].length):-1}function V(be,Ve,vt){var Ie=w.exec(Ve.slice(vt));return Ie?(be.m=I.get(Ie[0].toLowerCase()),vt+Ie[0].length):-1}function j(be,Ve,vt){var Ie=E.exec(Ve.slice(vt));return Ie?(be.m=S.get(Ie[0].toLowerCase()),vt+Ie[0].length):-1}function Z(be,Ve,vt){return R(be,e,Ve,vt)}function J(be,Ve,vt){return R(be,t,Ve,vt)}function G(be,Ve,vt){return R(be,i,Ve,vt)}function $(be){return s[be.getDay()]}function ae(be){return a[be.getDay()]}function le(be){return c[be.getMonth()]}function ue(be){return o[be.getMonth()]}function Q(be){return r[+(be.getHours()>=12)]}function re(be){return 1+~~(be.getMonth()/3)}function ye(be){return s[be.getUTCDay()]}function de(be){return a[be.getUTCDay()]}function xe(be){return c[be.getUTCMonth()]}function ve(be){return o[be.getUTCMonth()]}function Te(be){return r[+(be.getUTCHours()>=12)]}function Ze(be){return 1+~~(be.getUTCMonth()/3)}return{format:function(be){var Ve=k(be+="",P);return Ve.toString=function(){return be},Ve},parse:function(be){var Ve=U(be+="",!1);return Ve.toString=function(){return be},Ve},utcFormat:function(be){var Ve=k(be+="",D);return Ve.toString=function(){return be},Ve},utcParse:function(be){var Ve=U(be+="",!0);return Ve.toString=function(){return be},Ve}}}var c6={"-":"",_:" ",0:"0"},Oa=/^\s*\d+/,c1e=/^%/,u1e=/[\\^$*+?|[\]().{}]/g;function hi(n,e,t){var i=n<0?"-":"",r=(i?-n:n)+"",a=r.length;return i+(a<t?new Array(t-a+1).join(e)+r:r)}function f1e(n){return n.replace(u1e,"\\$&")}function t_(n){return new RegExp("^(?:"+n.map(f1e).join("|")+")","i")}function n_(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function h1e(n,e,t){var i=Oa.exec(e.slice(t,t+1));return i?(n.w=+i[0],t+i[0].length):-1}function d1e(n,e,t){var i=Oa.exec(e.slice(t,t+1));return i?(n.u=+i[0],t+i[0].length):-1}function p1e(n,e,t){var i=Oa.exec(e.slice(t,t+2));return i?(n.U=+i[0],t+i[0].length):-1}function m1e(n,e,t){var i=Oa.exec(e.slice(t,t+2));return i?(n.V=+i[0],t+i[0].length):-1}function g1e(n,e,t){var i=Oa.exec(e.slice(t,t+2));return i?(n.W=+i[0],t+i[0].length):-1}function u6(n,e,t){var i=Oa.exec(e.slice(t,t+4));return i?(n.y=+i[0],t+i[0].length):-1}function f6(n,e,t){var i=Oa.exec(e.slice(t,t+2));return i?(n.y=+i[0]+(+i[0]>68?1900:2e3),t+i[0].length):-1}function v1e(n,e,t){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return i?(n.Z=i[1]?0:-(i[2]+(i[3]||"00")),t+i[0].length):-1}function y1e(n,e,t){var i=Oa.exec(e.slice(t,t+1));return i?(n.q=i[0]*3-3,t+i[0].length):-1}function b1e(n,e,t){var i=Oa.exec(e.slice(t,t+2));return i?(n.m=i[0]-1,t+i[0].length):-1}function h6(n,e,t){var i=Oa.exec(e.slice(t,t+2));return i?(n.d=+i[0],t+i[0].length):-1}function _1e(n,e,t){var i=Oa.exec(e.slice(t,t+3));return i?(n.m=0,n.d=+i[0],t+i[0].length):-1}function d6(n,e,t){var i=Oa.exec(e.slice(t,t+2));return i?(n.H=+i[0],t+i[0].length):-1}function x1e(n,e,t){var i=Oa.exec(e.slice(t,t+2));return i?(n.M=+i[0],t+i[0].length):-1}function S1e(n,e,t){var i=Oa.exec(e.slice(t,t+2));return i?(n.S=+i[0],t+i[0].length):-1}function w1e(n,e,t){var i=Oa.exec(e.slice(t,t+3));return i?(n.L=+i[0],t+i[0].length):-1}function E1e(n,e,t){var i=Oa.exec(e.slice(t,t+6));return i?(n.L=Math.floor(i[0]/1e3),t+i[0].length):-1}function T1e(n,e,t){var i=c1e.exec(e.slice(t,t+1));return i?t+i[0].length:-1}function A1e(n,e,t){var i=Oa.exec(e.slice(t));return i?(n.Q=+i[0],t+i[0].length):-1}function M1e(n,e,t){var i=Oa.exec(e.slice(t));return i?(n.s=+i[0],t+i[0].length):-1}function p6(n,e){return hi(n.getDate(),e,2)}function C1e(n,e){return hi(n.getHours(),e,2)}function I1e(n,e){return hi(n.getHours()%12||12,e,2)}function R1e(n,e){return hi(1+n1.count(bh(n),n),e,3)}function fq(n,e){return hi(n.getMilliseconds(),e,3)}function P1e(n,e){return fq(n,e)+"000"}function N1e(n,e){return hi(n.getMonth()+1,e,2)}function O1e(n,e){return hi(n.getMinutes(),e,2)}function D1e(n,e){return hi(n.getSeconds(),e,2)}function L1e(n){var e=n.getDay();return e===0?7:e}function k1e(n,e){return hi(fC.count(bh(n)-1,n),e,2)}function hq(n){var e=n.getDay();return e>=4||e===0?Xv(n):Xv.ceil(n)}function U1e(n,e){return n=hq(n),hi(Xv.count(bh(n),n)+(bh(n).getDay()===4),e,2)}function F1e(n){return n.getDay()}function z1e(n,e){return hi(pA.count(bh(n)-1,n),e,2)}function B1e(n,e){return hi(n.getFullYear()%100,e,2)}function V1e(n,e){return n=hq(n),hi(n.getFullYear()%100,e,2)}function j1e(n,e){return hi(n.getFullYear()%1e4,e,4)}function H1e(n,e){var t=n.getDay();return n=t>=4||t===0?Xv(n):Xv.ceil(n),hi(n.getFullYear()%1e4,e,4)}function G1e(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+hi(e/60|0,"0",2)+hi(e%60,"0",2)}function m6(n,e){return hi(n.getUTCDate(),e,2)}function W1e(n,e){return hi(n.getUTCHours(),e,2)}function q1e(n,e){return hi(n.getUTCHours()%12||12,e,2)}function $1e(n,e){return hi(1+uC.count(_h(n),n),e,3)}function dq(n,e){return hi(n.getUTCMilliseconds(),e,3)}function X1e(n,e){return dq(n,e)+"000"}function Y1e(n,e){return hi(n.getUTCMonth()+1,e,2)}function K1e(n,e){return hi(n.getUTCMinutes(),e,2)}function Z1e(n,e){return hi(n.getUTCSeconds(),e,2)}function Q1e(n){var e=n.getUTCDay();return e===0?7:e}function J1e(n,e){return hi(hC.count(_h(n)-1,n),e,2)}function pq(n){var e=n.getUTCDay();return e>=4||e===0?Yv(n):Yv.ceil(n)}function eSe(n,e){return n=pq(n),hi(Yv.count(_h(n),n)+(_h(n).getUTCDay()===4),e,2)}function tSe(n){return n.getUTCDay()}function nSe(n,e){return hi(mA.count(_h(n)-1,n),e,2)}function iSe(n,e){return hi(n.getUTCFullYear()%100,e,2)}function rSe(n,e){return n=pq(n),hi(n.getUTCFullYear()%100,e,2)}function aSe(n,e){return hi(n.getUTCFullYear()%1e4,e,4)}function sSe(n,e){var t=n.getUTCDay();return n=t>=4||t===0?Yv(n):Yv.ceil(n),hi(n.getUTCFullYear()%1e4,e,4)}function oSe(){return"+0000"}function g6(){return"%"}function v6(n){return+n}function y6(n){return Math.floor(+n/1e3)}var Q0,mq,gq;lSe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function lSe(n){return Q0=l1e(n),mq=Q0.format,Q0.parse,gq=Q0.utcFormat,Q0.utcParse,Q0}function cSe(n){return new Date(n)}function uSe(n){return n instanceof Date?+n:+new Date(+n)}function zL(n,e,t,i,r,a,s,o,c,f){var h=TL(),p=h.invert,v=h.domain,y=f(".%L"),_=f(":%S"),E=f("%I:%M"),S=f("%I %p"),w=f("%a %d"),I=f("%b %d"),P=f("%B"),D=f("%Y");function z(k){return(c(k)<k?y:o(k)<k?_:s(k)<k?E:a(k)<k?S:i(k)<k?r(k)<k?w:I:t(k)<k?P:D)(k)}return h.invert=function(k){return new Date(p(k))},h.domain=function(k){return arguments.length?v(Array.from(k,uSe)):v().map(cSe)},h.ticks=function(k){var U=v();return n(U[0],U[U.length-1],k??10)},h.tickFormat=function(k,U){return U==null?z:f(U)},h.nice=function(k){var U=v();return(!k||typeof k.range!="function")&&(k=e(U[0],U[U.length-1],k??10)),k?v(nq(U,k)):h},h.copy=function(){return t1(h,zL(n,e,t,i,r,a,s,o,c,f))},h}function fSe(){return rc.apply(zL(s1e,o1e,bh,UL,fC,n1,LL,OL,jm,mq).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function hSe(){return rc.apply(zL(r1e,a1e,_h,FL,hC,uC,kL,DL,jm,gq).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function dC(){var n=0,e=1,t,i,r,a,s=to,o=!1,c;function f(p){return p==null||isNaN(p=+p)?c:s(r===0?.5:(p=(a(p)-t)*r,o?Math.max(0,Math.min(1,p)):p))}f.domain=function(p){return arguments.length?([n,e]=p,t=a(n=+n),i=a(e=+e),r=t===i?0:1/(i-t),f):[n,e]},f.clamp=function(p){return arguments.length?(o=!!p,f):o},f.interpolator=function(p){return arguments.length?(s=p,f):s};function h(p){return function(v){var y,_;return arguments.length?([y,_]=v,s=p(y,_),f):[s(0),s(1)]}}return f.range=h(uy),f.rangeRound=h(EL),f.unknown=function(p){return arguments.length?(c=p,f):c},function(p){return a=p,t=p(n),i=p(e),r=t===i?0:1/(i-t),f}}function Ep(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function vq(){var n=wp(dC()(to));return n.copy=function(){return Ep(n,vq())},Th.apply(n,arguments)}function yq(){var n=CL(dC()).domain([1,10]);return n.copy=function(){return Ep(n,yq()).base(n.base())},Th.apply(n,arguments)}function bq(){var n=IL(dC());return n.copy=function(){return Ep(n,bq()).constant(n.constant())},Th.apply(n,arguments)}function BL(){var n=RL(dC());return n.copy=function(){return Ep(n,BL()).exponent(n.exponent())},Th.apply(n,arguments)}function dSe(){return BL.apply(null,arguments).exponent(.5)}function _q(){var n=[],e=to;function t(i){if(i!=null&&!isNaN(i=+i))return e((Jx(n,i,1)-1)/(n.length-1))}return t.domain=function(i){if(!arguments.length)return n.slice();n=[];for(let r of i)r!=null&&!isNaN(r=+r)&&n.push(r);return n.sort(tp),t},t.interpolator=function(i){return arguments.length?(e=i,t):e},t.range=function(){return n.map((i,r)=>e(r/(n.length-1)))},t.quantiles=function(i){return Array.from({length:i+1},(r,a)=>Q_e(n,a/i))},t.copy=function(){return _q(e).domain(n)},Th.apply(t,arguments)}function pC(){var n=0,e=.5,t=1,i=1,r,a,s,o,c,f=to,h,p=!1,v;function y(E){return isNaN(E=+E)?v:(E=.5+((E=+h(E))-a)*(i*E<i*a?o:c),f(p?Math.max(0,Math.min(1,E)):E))}y.domain=function(E){return arguments.length?([n,e,t]=E,r=h(n=+n),a=h(e=+e),s=h(t=+t),o=r===a?0:.5/(a-r),c=a===s?0:.5/(s-a),i=a<r?-1:1,y):[n,e,t]},y.clamp=function(E){return arguments.length?(p=!!E,y):p},y.interpolator=function(E){return arguments.length?(f=E,y):f};function _(E){return function(S){var w,I,P;return arguments.length?([w,I,P]=S,f=Txe(E,[w,I,P]),y):[f(0),f(.5),f(1)]}}return y.range=_(uy),y.rangeRound=_(EL),y.unknown=function(E){return arguments.length?(v=E,y):v},function(E){return h=E,r=E(n),a=E(e),s=E(t),o=r===a?0:.5/(a-r),c=a===s?0:.5/(s-a),i=a<r?-1:1,y}}function xq(){var n=wp(pC()(to));return n.copy=function(){return Ep(n,xq())},Th.apply(n,arguments)}function Sq(){var n=CL(pC()).domain([.1,1,10]);return n.copy=function(){return Ep(n,Sq()).base(n.base())},Th.apply(n,arguments)}function wq(){var n=IL(pC());return n.copy=function(){return Ep(n,wq()).constant(n.constant())},Th.apply(n,arguments)}function VL(){var n=RL(pC());return n.copy=function(){return Ep(n,VL()).exponent(n.exponent())},Th.apply(n,arguments)}function pSe(){return VL.apply(null,arguments).exponent(.5)}const h_=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:xL,scaleDiverging:xq,scaleDivergingLog:Sq,scaleDivergingPow:VL,scaleDivergingSqrt:pSe,scaleDivergingSymlog:wq,scaleIdentity:tq,scaleImplicit:kO,scaleLinear:eq,scaleLog:iq,scaleOrdinal:_L,scalePoint:txe,scalePow:PL,scaleQuantile:sq,scaleQuantize:oq,scaleRadial:aq,scaleSequential:vq,scaleSequentialLog:yq,scaleSequentialPow:BL,scaleSequentialQuantile:_q,scaleSequentialSqrt:dSe,scaleSequentialSymlog:bq,scaleSqrt:Xxe,scaleSymlog:rq,scaleThreshold:lq,scaleTime:fSe,scaleUtc:hSe,tickFormat:JW},Symbol.toStringTag,{value:"Module"}));var Ah=n=>n.chartData,Eq=Ye([Ah],n=>{var e=n.chartData!=null?n.chartData.length-1:0;return{chartData:n.chartData,computedData:n.computedData,dataEndIndex:e,dataStartIndex:0}}),Tq=(n,e,t,i)=>i?Eq(n):Ah(n),mSe=(n,e,t)=>t?Eq(n):Ah(n);function xh(n){if(Array.isArray(n)&&n.length===2){var[e,t]=n;if(ni(e)&&ni(t))return!0}return!1}function b6(n,e,t){return t?n:[Math.min(n[0],e[0]),Math.max(n[1],e[1])]}function Aq(n,e){if(e&&typeof n!="function"&&Array.isArray(n)&&n.length===2){var[t,i]=n,r,a;if(ni(t))r=t;else if(typeof t=="function")return;if(ni(i))a=i;else if(typeof i=="function")return;var s=[r,a];if(xh(s))return s}}function gSe(n,e,t){if(!(!t&&e==null)){if(typeof n=="function"&&e!=null)try{var i=n(e,t);if(xh(i))return b6(i,e,t)}catch{}if(Array.isArray(n)&&n.length===2){var[r,a]=n,s,o;if(r==="auto")e!=null&&(s=Math.min(...e));else if(Zt(r))s=r;else if(typeof r=="function")try{e!=null&&(s=r(e==null?void 0:e[0]))}catch{}else if(typeof r=="string"&&P5.test(r)){var c=P5.exec(r);if(c==null||c[1]==null||e==null)s=void 0;else{var f=+c[1];s=e[0]-f}}else s=e==null?void 0:e[0];if(a==="auto")e!=null&&(o=Math.max(...e));else if(Zt(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e==null?void 0:e[1]))}catch{}else if(typeof a=="string"&&N5.test(a)){var h=N5.exec(a);if(h==null||h[1]==null||e==null)o=void 0;else{var p=+h[1];o=e[1]+p}}else o=e==null?void 0:e[1];var v=[s,o];if(xh(v))return e==null?v:b6(v,e,t)}}}var fy=1e9,vSe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},HL,hr=!0,nc="[DecimalError] ",eg=nc+"Invalid argument: ",jL=nc+"Exponent out of range: ",hy=Math.floor,Rm=Math.pow,ySe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,rl,Ra=1e7,er=7,Mq=9007199254740991,gA=hy(Mq/er),qt={};qt.absoluteValue=qt.abs=function(){var n=new this.constructor(this);return n.s&&(n.s=1),n};qt.comparedTo=qt.cmp=function(n){var e,t,i,r,a=this;if(n=new a.constructor(n),a.s!==n.s)return a.s||-n.s;if(a.e!==n.e)return a.e>n.e^a.s<0?1:-1;for(i=a.d.length,r=n.d.length,e=0,t=i<r?i:r;e<t;++e)if(a.d[e]!==n.d[e])return a.d[e]>n.d[e]^a.s<0?1:-1;return i===r?0:i>r^a.s<0?1:-1};qt.decimalPlaces=qt.dp=function(){var n=this,e=n.d.length-1,t=(e-n.e)*er;if(e=n.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};qt.dividedBy=qt.div=function(n){return uh(this,new this.constructor(n))};qt.dividedToIntegerBy=qt.idiv=function(n){var e=this,t=e.constructor;return zi(uh(e,new t(n),0,1),t.precision)};qt.equals=qt.eq=function(n){return!this.cmp(n)};qt.exponent=function(){return aa(this)};qt.greaterThan=qt.gt=function(n){return this.cmp(n)>0};qt.greaterThanOrEqualTo=qt.gte=function(n){return this.cmp(n)>=0};qt.isInteger=qt.isint=function(){return this.e>this.d.length-2};qt.isNegative=qt.isneg=function(){return this.s<0};qt.isPositive=qt.ispos=function(){return this.s>0};qt.isZero=function(){return this.s===0};qt.lessThan=qt.lt=function(n){return this.cmp(n)<0};qt.lessThanOrEqualTo=qt.lte=function(n){return this.cmp(n)<1};qt.logarithm=qt.log=function(n){var e,t=this,i=t.constructor,r=i.precision,a=r+5;if(n===void 0)n=new i(10);else if(n=new i(n),n.s<1||n.eq(rl))throw Error(nc+"NaN");if(t.s<1)throw Error(nc+(t.s?"NaN":"-Infinity"));return t.eq(rl)?new i(0):(hr=!1,e=uh(xx(t,a),xx(n,a),a),hr=!0,zi(e,r))};qt.minus=qt.sub=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?Rq(e,n):Cq(e,(n.s=-n.s,n))};qt.modulo=qt.mod=function(n){var e,t=this,i=t.constructor,r=i.precision;if(n=new i(n),!n.s)throw Error(nc+"NaN");return t.s?(hr=!1,e=uh(t,n,0,1).times(n),hr=!0,t.minus(e)):zi(new i(t),r)};qt.naturalExponential=qt.exp=function(){return Iq(this)};qt.naturalLogarithm=qt.ln=function(){return xx(this)};qt.negated=qt.neg=function(){var n=new this.constructor(this);return n.s=-n.s||0,n};qt.plus=qt.add=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?Cq(e,n):Rq(e,(n.s=-n.s,n))};qt.precision=qt.sd=function(n){var e,t,i,r=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(eg+n);if(e=aa(r)+1,i=r.d.length-1,t=i*er+1,i=r.d[i],i){for(;i%10==0;i/=10)t--;for(i=r.d[0];i>=10;i/=10)t++}return n&&e>t?e:t};qt.squareRoot=qt.sqrt=function(){var n,e,t,i,r,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(nc+"NaN")}for(n=aa(o),hr=!1,r=Math.sqrt(+o),r==0||r==1/0?(e=Hu(o.d),(e.length+n)%2==0&&(e+="0"),r=Math.sqrt(e),n=hy((n+1)/2)-(n<0||n%2),r==1/0?e="5e"+n:(e=r.toExponential(),e=e.slice(0,e.indexOf("e")+1)+n),i=new c(e)):i=new c(r.toString()),t=c.precision,r=s=t+3;;)if(a=i,i=a.plus(uh(o,a,s+2)).times(.5),Hu(a.d).slice(0,s)===(e=Hu(i.d)).slice(0,s)){if(e=e.slice(s-3,s+1),r==s&&e=="4999"){if(zi(a,t+1,0),a.times(a).eq(o)){i=a;break}}else if(e!="9999")break;s+=4}return hr=!0,zi(i,t)};qt.times=qt.mul=function(n){var e,t,i,r,a,s,o,c,f,h=this,p=h.constructor,v=h.d,y=(n=new p(n)).d;if(!h.s||!n.s)return new p(0);for(n.s*=h.s,t=h.e+n.e,c=v.length,f=y.length,c<f&&(a=v,v=y,y=a,s=c,c=f,f=s),a=[],s=c+f,i=s;i--;)a.push(0);for(i=f;--i>=0;){for(e=0,r=c+i;r>i;)o=a[r]+y[i]*v[r-i-1]+e,a[r--]=o%Ra|0,e=o/Ra|0;a[r]=(a[r]+e)%Ra|0}for(;!a[--s];)a.pop();return e?++t:a.shift(),n.d=a,n.e=t,hr?zi(n,p.precision):n};qt.toDecimalPlaces=qt.todp=function(n,e){var t=this,i=t.constructor;return t=new i(t),n===void 0?t:(cf(n,0,fy),e===void 0?e=i.rounding:cf(e,0,8),zi(t,n+aa(t)+1,e))};qt.toExponential=function(n,e){var t,i=this,r=i.constructor;return n===void 0?t=yg(i,!0):(cf(n,0,fy),e===void 0?e=r.rounding:cf(e,0,8),i=zi(new r(i),n+1,e),t=yg(i,!0,n+1)),t};qt.toFixed=function(n,e){var t,i,r=this,a=r.constructor;return n===void 0?yg(r):(cf(n,0,fy),e===void 0?e=a.rounding:cf(e,0,8),i=zi(new a(r),n+aa(r)+1,e),t=yg(i.abs(),!1,n+aa(i)+1),r.isneg()&&!r.isZero()?"-"+t:t)};qt.toInteger=qt.toint=function(){var n=this,e=n.constructor;return zi(new e(n),aa(n)+1,e.rounding)};qt.toNumber=function(){return+this};qt.toPower=qt.pow=function(n){var e,t,i,r,a,s,o=this,c=o.constructor,f=12,h=+(n=new c(n));if(!n.s)return new c(rl);if(o=new c(o),!o.s){if(n.s<1)throw Error(nc+"Infinity");return o}if(o.eq(rl))return o;if(i=c.precision,n.eq(rl))return zi(o,i);if(e=n.e,t=n.d.length-1,s=e>=t,a=o.s,s){if((t=h<0?-h:h)<=Mq){for(r=new c(rl),e=Math.ceil(i/er+4),hr=!1;t%2&&(r=r.times(o),x6(r.d,e)),t=hy(t/2),t!==0;)o=o.times(o),x6(o.d,e);return hr=!0,n.s<0?new c(rl).div(r):zi(r,i)}}else if(a<0)throw Error(nc+"NaN");return a=a<0&&n.d[Math.max(e,t)]&1?-1:1,o.s=1,hr=!1,r=n.times(xx(o,i+f)),hr=!0,r=Iq(r),r.s=a,r};qt.toPrecision=function(n,e){var t,i,r=this,a=r.constructor;return n===void 0?(t=aa(r),i=yg(r,t<=a.toExpNeg||t>=a.toExpPos)):(cf(n,1,fy),e===void 0?e=a.rounding:cf(e,0,8),r=zi(new a(r),n,e),t=aa(r),i=yg(r,n<=t||t<=a.toExpNeg,n)),i};qt.toSignificantDigits=qt.tosd=function(n,e){var t=this,i=t.constructor;return n===void 0?(n=i.precision,e=i.rounding):(cf(n,1,fy),e===void 0?e=i.rounding:cf(e,0,8)),zi(new i(t),n,e)};qt.toString=qt.valueOf=qt.val=qt.toJSON=qt[Symbol.for("nodejs.util.inspect.custom")]=function(){var n=this,e=aa(n),t=n.constructor;return yg(n,e<=t.toExpNeg||e>=t.toExpPos)};function Cq(n,e){var t,i,r,a,s,o,c,f,h=n.constructor,p=h.precision;if(!n.s||!e.s)return e.s||(e=new h(n)),hr?zi(e,p):e;if(c=n.d,f=e.d,s=n.e,r=e.e,c=c.slice(),a=s-r,a){for(a<0?(i=c,a=-a,o=f.length):(i=f,r=s,o=c.length),s=Math.ceil(p/er),o=s>o?s+1:o+1,a>o&&(a=o,i.length=1),i.reverse();a--;)i.push(0);i.reverse()}for(o=c.length,a=f.length,o-a<0&&(a=o,i=f,f=c,c=i),t=0;a;)t=(c[--a]=c[a]+f[a]+t)/Ra|0,c[a]%=Ra;for(t&&(c.unshift(t),++r),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=r,hr?zi(e,p):e}function cf(n,e,t){if(n!==~~n||n<e||n>t)throw Error(eg+n)}function Hu(n){var e,t,i,r=n.length-1,a="",s=n[0];if(r>0){for(a+=s,e=1;e<r;e++)i=n[e]+"",t=er-i.length,t&&(a+=Dd(t)),a+=i;s=n[e],i=s+"",t=er-i.length,t&&(a+=Dd(t))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var uh=(function(){function n(i,r){var a,s=0,o=i.length;for(i=i.slice();o--;)a=i[o]*r+s,i[o]=a%Ra|0,s=a/Ra|0;return s&&i.unshift(s),i}function e(i,r,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(i[o]!=r[o]){c=i[o]>r[o]?1:-1;break}return c}function t(i,r,a){for(var s=0;a--;)i[a]-=s,s=i[a]<r[a]?1:0,i[a]=s*Ra+i[a]-r[a];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,a,s){var o,c,f,h,p,v,y,_,E,S,w,I,P,D,z,k,U,R,M=i.constructor,L=i.s==r.s?1:-1,B=i.d,V=r.d;if(!i.s)return new M(i);if(!r.s)throw Error(nc+"Division by zero");for(c=i.e-r.e,U=V.length,z=B.length,y=new M(L),_=y.d=[],f=0;V[f]==(B[f]||0);)++f;if(V[f]>(B[f]||0)&&--c,a==null?I=a=M.precision:s?I=a+(aa(i)-aa(r))+1:I=a,I<0)return new M(0);if(I=I/er+2|0,f=0,U==1)for(h=0,V=V[0],I++;(f<z||h)&&I--;f++)P=h*Ra+(B[f]||0),_[f]=P/V|0,h=P%V|0;else{for(h=Ra/(V[0]+1)|0,h>1&&(V=n(V,h),B=n(B,h),U=V.length,z=B.length),D=U,E=B.slice(0,U),S=E.length;S<U;)E[S++]=0;R=V.slice(),R.unshift(0),k=V[0],V[1]>=Ra/2&&++k;do h=0,o=e(V,E,U,S),o<0?(w=E[0],U!=S&&(w=w*Ra+(E[1]||0)),h=w/k|0,h>1?(h>=Ra&&(h=Ra-1),p=n(V,h),v=p.length,S=E.length,o=e(p,E,v,S),o==1&&(h--,t(p,U<v?R:V,v))):(h==0&&(o=h=1),p=V.slice()),v=p.length,v<S&&p.unshift(0),t(E,p,S),o==-1&&(S=E.length,o=e(V,E,U,S),o<1&&(h++,t(E,U<S?R:V,S))),S=E.length):o===0&&(h++,E=[0]),_[f++]=h,o&&E[0]?E[S++]=B[D]||0:(E=[B[D]],S=1);while((D++<z||E[0]!==void 0)&&I--)}return _[0]||_.shift(),y.e=c,zi(y,s?a+aa(y)+1:a)}})();function Iq(n,e){var t,i,r,a,s,o,c=0,f=0,h=n.constructor,p=h.precision;if(aa(n)>16)throw Error(jL+aa(n));if(!n.s)return new h(rl);for(hr=!1,o=p,s=new h(.03125);n.abs().gte(.1);)n=n.times(s),f+=5;for(i=Math.log(Rm(2,f))/Math.LN10*2+5|0,o+=i,t=r=a=new h(rl),h.precision=o;;){if(r=zi(r.times(n),o),t=t.times(++c),s=a.plus(uh(r,t,o)),Hu(s.d).slice(0,o)===Hu(a.d).slice(0,o)){for(;f--;)a=zi(a.times(a),o);return h.precision=p,e==null?(hr=!0,zi(a,p)):a}a=s}}function aa(n){for(var e=n.e*er,t=n.d[0];t>=10;t/=10)e++;return e}function GP(n,e,t){if(e>n.LN10.sd())throw hr=!0,t&&(n.precision=t),Error(nc+"LN10 precision limit exceeded");return zi(new n(n.LN10),e)}function Dd(n){for(var e="";n--;)e+="0";return e}function xx(n,e){var t,i,r,a,s,o,c,f,h,p=1,v=10,y=n,_=y.d,E=y.constructor,S=E.precision;if(y.s<1)throw Error(nc+(y.s?"NaN":"-Infinity"));if(y.eq(rl))return new E(0);if(e==null?(hr=!1,f=S):f=e,y.eq(10))return e==null&&(hr=!0),GP(E,f);if(f+=v,E.precision=f,t=Hu(_),i=t.charAt(0),a=aa(y),Math.abs(a)<15e14){for(;i<7&&i!=1||i==1&&t.charAt(1)>3;)y=y.times(n),t=Hu(y.d),i=t.charAt(0),p++;a=aa(y),i>1?(y=new E("0."+t),a++):y=new E(i+"."+t.slice(1))}else return c=GP(E,f+2,S).times(a+""),y=xx(new E(i+"."+t.slice(1)),f-v).plus(c),E.precision=S,e==null?(hr=!0,zi(y,S)):y;for(o=s=y=uh(y.minus(rl),y.plus(rl),f),h=zi(y.times(y),f),r=3;;){if(s=zi(s.times(h),f),c=o.plus(uh(s,new E(r),f)),Hu(c.d).slice(0,f)===Hu(o.d).slice(0,f))return o=o.times(2),a!==0&&(o=o.plus(GP(E,f+2,S).times(a+""))),o=uh(o,new E(p),f),E.precision=S,e==null?(hr=!0,zi(o,S)):o;o=c,r+=2}}function _6(n,e){var t,i,r;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(t<0&&(t=i),t+=+e.slice(i+1),e=e.substring(0,i)):t<0&&(t=e.length),i=0;e.charCodeAt(i)===48;)++i;for(r=e.length;e.charCodeAt(r-1)===48;)--r;if(e=e.slice(i,r),e){if(r-=i,t=t-i-1,n.e=hy(t/er),n.d=[],i=(t+1)%er,t<0&&(i+=er),i<r){for(i&&n.d.push(+e.slice(0,i)),r-=er;i<r;)n.d.push(+e.slice(i,i+=er));e=e.slice(i),i=er-e.length}else i-=r;for(;i--;)e+="0";if(n.d.push(+e),hr&&(n.e>gA||n.e<-gA))throw Error(jL+t)}else n.s=0,n.e=0,n.d=[0];return n}function zi(n,e,t){var i,r,a,s,o,c,f,h,p=n.d;for(s=1,a=p[0];a>=10;a/=10)s++;if(i=e-s,i<0)i+=er,r=e,f=p[h=0];else{if(h=Math.ceil((i+1)/er),a=p.length,h>=a)return n;for(f=a=p[h],s=1;a>=10;a/=10)s++;i%=er,r=i-er+s}if(t!==void 0&&(a=Rm(10,s-r-1),o=f/a%10|0,c=e<0||p[h+1]!==void 0||f%a,c=t<4?(o||c)&&(t==0||t==(n.s<0?3:2)):o>5||o==5&&(t==4||c||t==6&&(i>0?r>0?f/Rm(10,s-r):0:p[h-1])%10&1||t==(n.s<0?8:7))),e<1||!p[0])return c?(a=aa(n),p.length=1,e=e-a-1,p[0]=Rm(10,(er-e%er)%er),n.e=hy(-e/er)||0):(p.length=1,p[0]=n.e=n.s=0),n;if(i==0?(p.length=h,a=1,h--):(p.length=h+1,a=Rm(10,er-i),p[h]=r>0?(f/Rm(10,s-r)%Rm(10,r)|0)*a:0),c)for(;;)if(h==0){(p[0]+=a)==Ra&&(p[0]=1,++n.e);break}else{if(p[h]+=a,p[h]!=Ra)break;p[h--]=0,a=1}for(i=p.length;p[--i]===0;)p.pop();if(hr&&(n.e>gA||n.e<-gA))throw Error(jL+aa(n));return n}function Rq(n,e){var t,i,r,a,s,o,c,f,h,p,v=n.constructor,y=v.precision;if(!n.s||!e.s)return e.s?e.s=-e.s:e=new v(n),hr?zi(e,y):e;if(c=n.d,p=e.d,i=e.e,f=n.e,c=c.slice(),s=f-i,s){for(h=s<0,h?(t=c,s=-s,o=p.length):(t=p,i=f,o=c.length),r=Math.max(Math.ceil(y/er),o)+2,s>r&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for(r=c.length,o=p.length,h=r<o,h&&(o=r),r=0;r<o;r++)if(c[r]!=p[r]){h=c[r]<p[r];break}s=0}for(h&&(t=c,c=p,p=t,e.s=-e.s),o=c.length,r=p.length-o;r>0;--r)c[o++]=0;for(r=p.length;r>s;){if(c[--r]<p[r]){for(a=r;a&&c[--a]===0;)c[a]=Ra-1;--c[a],c[r]+=Ra}c[r]-=p[r]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--i;return c[0]?(e.d=c,e.e=i,hr?zi(e,y):e):new v(0)}function yg(n,e,t){var i,r=aa(n),a=Hu(n.d),s=a.length;return e?(t&&(i=t-s)>0?a=a.charAt(0)+"."+a.slice(1)+Dd(i):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(r<0?"e":"e+")+r):r<0?(a="0."+Dd(-r-1)+a,t&&(i=t-s)>0&&(a+=Dd(i))):r>=s?(a+=Dd(r+1-s),t&&(i=t-r-1)>0&&(a=a+"."+Dd(i))):((i=r+1)<s&&(a=a.slice(0,i)+"."+a.slice(i)),t&&(i=t-s)>0&&(r+1===s&&(a+="."),a+=Dd(i))),n.s<0?"-"+a:a}function x6(n,e){if(n.length>e)return n.length=e,!0}function Pq(n){var e,t,i;function r(a){var s=this;if(!(s instanceof r))return new r(a);if(s.constructor=r,a instanceof r){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(eg+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return _6(s,a.toString())}else if(typeof a!="string")throw Error(eg+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,ySe.test(a))_6(s,a);else throw Error(eg+a)}if(r.prototype=qt,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=Pq,r.config=r.set=bSe,n===void 0&&(n={}),n)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<i.length;)n.hasOwnProperty(t=i[e++])||(n[t]=this[t]);return r.config(n),r}function bSe(n){if(!n||typeof n!="object")throw Error(nc+"Object expected");var e,t,i,r=["precision",1,fy,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<r.length;e+=3)if((i=n[t=r[e]])!==void 0)if(hy(i)===i&&i>=r[e+1]&&i<=r[e+2])this[t]=i;else throw Error(eg+t+": "+i);if((i=n[t="LN10"])!==void 0)if(i==Math.LN10)this[t]=new this(i);else throw Error(eg+t+": "+i);return this}var HL=Pq(vSe);rl=new HL(1);const Mi=HL;function Nq(n){var e;return n===0?e=1:e=Math.floor(new Mi(n).abs().log(10).toNumber())+1,e}function Oq(n,e,t){for(var i=new Mi(n),r=0,a=[];i.lt(e)&&r<1e5;)a.push(i.toNumber()),i=i.add(t),r++;return a}var Dq=n=>{var[e,t]=n,[i,r]=[e,t];return e>t&&([i,r]=[t,e]),[i,r]},Lq=(n,e,t)=>{if(n.lte(0))return new Mi(0);var i=Nq(n.toNumber()),r=new Mi(10).pow(i),a=n.div(r),s=i!==1?.05:.1,o=new Mi(Math.ceil(a.div(s).toNumber())).add(t).mul(s),c=o.mul(r);return e?new Mi(c.toNumber()):new Mi(Math.ceil(c.toNumber()))},_Se=(n,e,t)=>{var i=new Mi(1),r=new Mi(n);if(!r.isint()&&t){var a=Math.abs(n);a<1?(i=new Mi(10).pow(Nq(n)-1),r=new Mi(Math.floor(r.div(i).toNumber())).mul(i)):a>1&&(r=new Mi(Math.floor(n)))}else n===0?r=new Mi(Math.floor((e-1)/2)):t||(r=new Mi(Math.floor(n)));for(var s=Math.floor((e-1)/2),o=[],c=0;c<e;c++)o.push(r.add(new Mi(c-s).mul(i)).toNumber());return o},kq=function(e,t,i,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(i-1)))return{step:new Mi(0),tickMin:new Mi(0),tickMax:new Mi(0)};var s=Lq(new Mi(t).sub(e).div(i-1),r,a),o;e<=0&&t>=0?o=new Mi(0):(o=new Mi(e).add(t).div(2),o=o.sub(new Mi(o).mod(s)));var c=Math.ceil(o.sub(e).div(s).toNumber()),f=Math.ceil(new Mi(t).sub(o).div(s).toNumber()),h=c+f+1;return h>i?kq(e,t,i,r,a+1):(h<i&&(f=t>0?f+(i-h):f,c=t>0?c:c+(i-h)),{step:s,tickMin:o.sub(new Mi(c).mul(s)),tickMax:o.add(new Mi(f).mul(s))})},xSe=function(e){var[t,i]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[o,c]=Dq([t,i]);if(o===-1/0||c===1/0){var f=c===1/0?[o,...Array(r-1).fill(1/0)]:[...Array(r-1).fill(-1/0),c];return t>i?f.reverse():f}if(o===c)return _Se(o,r,a);var{step:h,tickMin:p,tickMax:v}=kq(o,c,s,a,0),y=Oq(p,v.add(new Mi(.1).mul(h)),h);return t>i?y.reverse():y},SSe=function(e,t){var[i,r]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=Dq([i,r]);if(s===-1/0||o===1/0)return[i,r];if(s===o)return[s];var c=Math.max(t,2),f=Lq(new Mi(o).sub(s).div(c-1),a,0),h=[...Oq(new Mi(s),new Mi(o),f),o];return a===!1&&(h=h.map(p=>Math.round(p))),i>r?h.reverse():h},wSe=n=>n.rootProps.barCategoryGap,mC=n=>n.rootProps.stackOffset,Uq=n=>n.rootProps.reverseStackOrder,GL=n=>n.options.chartName,WL=n=>n.rootProps.syncId,Fq=n=>n.rootProps.syncMethod,qL=n=>n.options.eventEmitter,ESe=n=>n.rootProps.baseValue,no={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Sm={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},Pu={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},gC=(n,e)=>{if(!(!n||!e))return n!=null&&n.reversed?[e[1],e[0]]:e};function vC(n,e,t){if(t!=="auto")return t;if(n!=null)return df(n,e)?"category":"number"}function S6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function vA(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?S6(Object(t),!0).forEach(function(i){TSe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):S6(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function TSe(n,e,t){return(e=ASe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ASe(n){var e=MSe(n,"string");return typeof e=="symbol"?e:e+""}function MSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var w6={allowDataOverflow:Sm.allowDataOverflow,allowDecimals:Sm.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Sm.angleAxisId,includeHidden:!1,name:void 0,reversed:Sm.reversed,scale:Sm.scale,tick:Sm.tick,tickCount:void 0,ticks:void 0,type:Sm.type,unit:void 0},E6={allowDataOverflow:Pu.allowDataOverflow,allowDecimals:Pu.allowDecimals,allowDuplicatedCategory:Pu.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Pu.radiusAxisId,includeHidden:Pu.includeHidden,name:void 0,reversed:Pu.reversed,scale:Pu.scale,tick:Pu.tick,tickCount:Pu.tickCount,ticks:void 0,type:Pu.type,unit:void 0},CSe=(n,e)=>{if(e!=null)return n.polarAxis.angleAxis[e]},$L=Ye([CSe,CW],(n,e)=>{var t;if(n!=null)return n;var i=(t=vC(e,"angleAxis",w6.type))!==null&&t!==void 0?t:"category";return vA(vA({},w6),{},{type:i})}),ISe=(n,e)=>n.polarAxis.radiusAxis[e],XL=Ye([ISe,CW],(n,e)=>{var t;if(n!=null)return n;var i=(t=vC(e,"radiusAxis",E6.type))!==null&&t!==void 0?t:"category";return vA(vA({},E6),{},{type:i})}),yC=n=>n.polarOptions,YL=Ye([wh,Eh,os],T_e),zq=Ye([yC,YL],(n,e)=>{if(n!=null)return pp(n.innerRadius,e,0)}),Bq=Ye([yC,YL],(n,e)=>{if(n!=null)return pp(n.outerRadius,e,e*.8)}),RSe=n=>{if(n==null)return[0,0];var{startAngle:e,endAngle:t}=n;return[e,t]},Vq=Ye([yC],RSe);Ye([$L,Vq],gC);var jq=Ye([YL,zq,Bq],(n,e,t)=>{if(!(n==null||e==null||t==null))return[e,t]});Ye([XL,jq],gC);var Hq=Ye([dr,yC,zq,Bq,wh,Eh],(n,e,t,i,r,a)=>{if(!(n!=="centric"&&n!=="radial"||e==null||t==null||i==null)){var{cx:s,cy:o,startAngle:c,endAngle:f}=e;return{cx:pp(s,r,r/2),cy:pp(o,a,a/2),innerRadius:t,outerRadius:i,startAngle:c,endAngle:f,clockWise:!1}}}),Da=(n,e)=>e,bC=(n,e,t)=>t;function KL(n){return n==null?void 0:n.id}function Gq(n,e,t){var{chartData:i=[]}=e,{allowDuplicatedCategory:r,dataKey:a}=t,s=new Map;return n.forEach(o=>{var c,f=(c=o.data)!==null&&c!==void 0?c:i;if(!(f==null||f.length===0)){var h=KL(o);f.forEach((p,v)=>{var y=a==null||r?v:String(as(p,a,null)),_=as(p,o.dataKey,0),E;s.has(y)?E=s.get(y):E={},Object.assign(E,{[h]:_}),s.set(y,E)})}}),Array.from(s.values())}function ZL(n){return"stackId"in n&&n.stackId!=null&&n.dataKey!=null}var _C=(n,e)=>n===e?!0:n==null||e==null?!1:n[0]===e[0]&&n[1]===e[1];function xC(n,e){return Array.isArray(n)&&Array.isArray(e)&&n.length===0&&e.length===0?!0:n===e}function PSe(n,e){if(n.length===e.length){for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return!1}var La=n=>{var e=dr(n);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},dy=n=>n.tooltip.settings.axisId;function NSe(n){if(n in h_)return h_[n]();var e="scale".concat(iL(n));if(e in h_)return h_[e]()}function T6(n){var e=n.ticks,t=n.bandwidth,i=n.range(),r=[Math.min(...i),Math.max(...i)];return{domain:()=>n.domain(),range:(function(a){function s(){return a.apply(this,arguments)}return s.toString=function(){return a.toString()},s})(()=>r),rangeMin:()=>r[0],rangeMax:()=>r[1],isInRange(a){var s=r[0],o=r[1];return s<=o?a>=s&&a<=o:a>=o&&a<=s},bandwidth:t?()=>t.call(n):void 0,ticks:e?a=>e.call(n,a):void 0,map:(a,s)=>{var o=n(a);if(o!=null){if(n.bandwidth&&s!==null&&s!==void 0&&s.position){var c=n.bandwidth();switch(s.position){case"middle":o+=c/2;break;case"end":o+=c;break}}return o}}}}function A6(n,e,t){if(typeof n=="function")return T6(n.copy().domain(e).range(t));if(n!=null){var i=NSe(n);if(i!=null)return i.domain(e).range(t),T6(i)}}var OSe=(n,e)=>{if(e!=null)switch(n){case"linear":{if(!xh(e)){for(var t,i,r=0;r<e.length;r++){var a=e[r];ni(a)&&((t===void 0||a<t)&&(t=a),(i===void 0||a>i)&&(i=a))}return t!==void 0&&i!==void 0?[t,i]:void 0}return e}default:return e}};function M6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function yA(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?M6(Object(t),!0).forEach(function(i){DSe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):M6(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function DSe(n,e,t){return(e=LSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function LSe(n){var e=kSe(n,"string");return typeof e=="symbol"?e:e+""}function kSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var BO=[0,"auto"],Ma={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Wq=(n,e)=>n.cartesianAxis.xAxis[e],Mh=(n,e)=>{var t=Wq(n,e);return t??Ma},Ca={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:BO,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Yx},qq=(n,e)=>n.cartesianAxis.yAxis[e],Ch=(n,e)=>{var t=qq(n,e);return t??Ca},USe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},QL=(n,e)=>{var t=n.cartesianAxis.zAxis[e];return t??USe},oo=(n,e,t)=>{switch(e){case"xAxis":return Mh(n,t);case"yAxis":return Ch(n,t);case"zAxis":return QL(n,t);case"angleAxis":return $L(n,t);case"radiusAxis":return XL(n,t);default:throw new Error("Unexpected axis type: ".concat(e))}},FSe=(n,e,t)=>{switch(e){case"xAxis":return Mh(n,t);case"yAxis":return Ch(n,t);default:throw new Error("Unexpected axis type: ".concat(e))}},i1=(n,e,t)=>{switch(e){case"xAxis":return Mh(n,t);case"yAxis":return Ch(n,t);case"angleAxis":return $L(n,t);case"radiusAxis":return XL(n,t);default:throw new Error("Unexpected axis type: ".concat(e))}},$q=n=>n.graphicalItems.cartesianItems.some(e=>e.type==="bar")||n.graphicalItems.polarItems.some(e=>e.type==="radialBar");function Xq(n,e){return t=>{switch(n){case"xAxis":return"xAxisId"in t&&t.xAxisId===e;case"yAxis":return"yAxisId"in t&&t.yAxisId===e;case"zAxis":return"zAxisId"in t&&t.zAxisId===e;case"angleAxis":return"angleAxisId"in t&&t.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in t&&t.radiusAxisId===e;default:return!1}}}var Yq=n=>n.graphicalItems.cartesianItems,zSe=Ye([Da,bC],Xq),Kq=(n,e,t)=>n.filter(t).filter(i=>(e==null?void 0:e.includeHidden)===!0?!0:!i.hide),r1=Ye([Yq,oo,zSe],Kq,{memoizeOptions:{resultEqualityCheck:xC}}),Zq=Ye([r1],n=>n.filter(e=>e.type==="area"||e.type==="bar").filter(ZL)),Qq=n=>n.filter(e=>!("stackId"in e)||e.stackId===void 0),BSe=Ye([r1],Qq),Jq=n=>n.map(e=>e.data).filter(Boolean).flat(1),VSe=Ye([r1],Jq,{memoizeOptions:{resultEqualityCheck:xC}}),e$=(n,e)=>{var{chartData:t=[],dataStartIndex:i,dataEndIndex:r}=e;return n.length>0?n:t.slice(i,r+1)},JL=Ye([VSe,Tq],e$),t$=(n,e,t)=>(e==null?void 0:e.dataKey)!=null?n.map(i=>({value:as(i,e.dataKey)})):t.length>0?t.map(i=>i.dataKey).flatMap(i=>n.map(r=>({value:as(r,i)}))):n.map(i=>({value:i})),SC=Ye([JL,oo,r1],t$);function n$(n,e){switch(n){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function pE(n){if(of(n)||n instanceof Date){var e=Number(n);if(ni(e))return e}}function C6(n){if(Array.isArray(n)){var e=[pE(n[0]),pE(n[1])];return xh(e)?e:void 0}var t=pE(n);if(t!=null)return[t,t]}function Sh(n){return n.map(pE).filter(Fo)}function jSe(n,e,t){return!t||typeof e!="number"||sf(e)?[]:t.length?Sh(t.flatMap(i=>{var r=as(n,i.dataKey),a,s;if(Array.isArray(r)?[a,s]=r:a=s=r,!(!ni(a)||!ni(s)))return[e-a,e+s]})):[]}var _a=n=>{var e=La(n),t=dy(n);return i1(n,e,t)},a1=Ye([_a],n=>n==null?void 0:n.dataKey),HSe=Ye([Zq,Tq,_a],Gq),i$=(n,e,t,i)=>{var r={},a=e.reduce((s,o)=>{if(o.stackId==null)return s;var c=s[o.stackId];return c==null&&(c=[]),c.push(o),s[o.stackId]=c,s},r);return Object.fromEntries(Object.entries(a).map(s=>{var[o,c]=s,f=i?[...c].reverse():c,h=f.map(KL);return[o,{stackedData:pye(n,h,t),graphicalItems:f}]}))},r$=Ye([HSe,Zq,mC,Uq],i$),a$=(n,e,t,i)=>{var{dataStartIndex:r,dataEndIndex:a}=e;if(i==null&&t!=="zAxis"){var s=yye(n,r,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},GSe=Ye([oo],n=>n.allowDataOverflow),ek=n=>{var e;if(n==null||!("domain"in n))return BO;if(n.domain!=null)return n.domain;if("ticks"in n&&n.ticks!=null){if(n.type==="number"){var t=Sh(n.ticks);return[Math.min(...t),Math.max(...t)]}if(n.type==="category")return n.ticks.map(String)}return(e=n==null?void 0:n.domain)!==null&&e!==void 0?e:BO},s$=Ye([oo],ek),o$=Ye([s$,GSe],Aq),WSe=Ye([r$,Ah,Da,o$],a$,{memoizeOptions:{resultEqualityCheck:_C}}),tk=n=>n.errorBars,qSe=(n,e,t)=>n.flatMap(i=>e[i.id]).filter(Boolean).filter(i=>n$(t,i)),bA=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=t.filter(Boolean);if(r.length!==0){var a=r.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},l$=(n,e,t,i,r)=>{var a,s;if(t.length>0&&n.forEach(o=>{t.forEach(c=>{var f,h,p=(f=i[c.id])===null||f===void 0?void 0:f.filter(w=>n$(r,w)),v=as(o,(h=e.dataKey)!==null&&h!==void 0?h:c.dataKey),y=jSe(o,v,p);if(y.length>=2){var _=Math.min(...y),E=Math.max(...y);(a==null||_<a)&&(a=_),(s==null||E>s)&&(s=E)}var S=C6(v);S!=null&&(a=a==null?S[0]:Math.min(a,S[0]),s=s==null?S[1]:Math.max(s,S[1]))})}),(e==null?void 0:e.dataKey)!=null&&n.forEach(o=>{var c=C6(as(o,e.dataKey));c!=null&&(a=a==null?c[0]:Math.min(a,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),ni(a)&&ni(s))return[a,s]},$Se=Ye([JL,oo,BSe,tk,Da],l$,{memoizeOptions:{resultEqualityCheck:_C}});function XSe(n){var{value:e}=n;if(of(e)||e instanceof Date)return e}var YSe=(n,e,t)=>{var i=n.map(XSe).filter(r=>r!=null);return t&&(e.dataKey==null||e.allowDuplicatedCategory&&AG(i))?GW(0,n.length):e.allowDuplicatedCategory?i:Array.from(new Set(i))},c$=n=>n.referenceElements.dots,py=(n,e,t)=>n.filter(i=>i.ifOverflow==="extendDomain").filter(i=>e==="xAxis"?i.xAxisId===t:i.yAxisId===t),KSe=Ye([c$,Da,bC],py),u$=n=>n.referenceElements.areas,ZSe=Ye([u$,Da,bC],py),f$=n=>n.referenceElements.lines,QSe=Ye([f$,Da,bC],py),h$=(n,e)=>{if(n!=null){var t=Sh(n.map(i=>e==="xAxis"?i.x:i.y));if(t.length!==0)return[Math.min(...t),Math.max(...t)]}},JSe=Ye(KSe,Da,h$),d$=(n,e)=>{if(n!=null){var t=Sh(n.flatMap(i=>[e==="xAxis"?i.x1:i.y1,e==="xAxis"?i.x2:i.y2]));if(t.length!==0)return[Math.min(...t),Math.max(...t)]}},ewe=Ye([ZSe,Da],d$);function twe(n){var e;if(n.x!=null)return Sh([n.x]);var t=(e=n.segment)===null||e===void 0?void 0:e.map(i=>i.x);return t==null||t.length===0?[]:Sh(t)}function nwe(n){var e;if(n.y!=null)return Sh([n.y]);var t=(e=n.segment)===null||e===void 0?void 0:e.map(i=>i.y);return t==null||t.length===0?[]:Sh(t)}var p$=(n,e)=>{if(n!=null){var t=n.flatMap(i=>e==="xAxis"?twe(i):nwe(i));if(t.length!==0)return[Math.min(...t),Math.max(...t)]}},iwe=Ye([QSe,Da],p$),rwe=Ye(JSe,iwe,ewe,(n,e,t)=>bA(n,t,e)),m$=(n,e,t,i,r,a,s,o)=>{if(t!=null)return t;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",f=c?bA(i,a,r):bA(a,r);return gSe(e,f,n.allowDataOverflow)},awe=Ye([oo,s$,o$,WSe,$Se,rwe,dr,Da],m$,{memoizeOptions:{resultEqualityCheck:_C}}),swe=[0,1],g$=(n,e,t,i,r,a,s)=>{if(!((n==null||t==null||t.length===0)&&s===void 0)){var{dataKey:o,type:c}=n,f=df(e,a);if(f&&o==null){var h;return GW(0,(h=t==null?void 0:t.length)!==null&&h!==void 0?h:0)}return c==="category"?YSe(i,n,f):r==="expand"?swe:s}},nk=Ye([oo,dr,JL,SC,mC,Da,awe],g$);function owe(n){return n in h_}var v$=(n,e,t)=>{if(n!=null){var{scale:i,type:r}=n;if(i==="auto")return r==="category"&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!e)?"point":r==="category"?"band":"linear";if(typeof i=="string"){var a="scale".concat(iL(i));return owe(a)?a:"point"}}},my=Ye([oo,$q,GL],v$);function ik(n,e,t,i){if(!(t==null||i==null))return typeof n.scale=="function"?A6(n.scale,t,i):A6(e,t,i)}var y$=(n,e,t)=>{var i=ek(e);if(!(t!=="auto"&&t!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(i)&&(i[0]==="auto"||i[1]==="auto")&&xh(n))return xSe(n,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&xh(n))return SSe(n,e.tickCount,e.allowDecimals)}},rk=Ye([nk,i1,my],y$),b$=(n,e,t,i)=>{if(i!=="angleAxis"&&(n==null?void 0:n.type)==="number"&&xh(e)&&Array.isArray(t)&&t.length>0){var r,a,s=e[0],o=(r=t[0])!==null&&r!==void 0?r:0,c=e[1],f=(a=t[t.length-1])!==null&&a!==void 0?a:0;return[Math.min(s,o),Math.max(c,f)]}return e},lwe=Ye([oo,nk,rk,Da],b$),cwe=Ye(SC,oo,(n,e)=>{if(!(!e||e.type!=="number")){var t=1/0,i=Array.from(Sh(n.map(p=>p.value))).sort((p,v)=>p-v),r=i[0],a=i[i.length-1];if(r==null||a==null)return 1/0;var s=a-r;if(s===0)return 1/0;for(var o=0;o<i.length-1;o++){var c=i[o],f=i[o+1];if(!(c==null||f==null)){var h=f-c;t=Math.min(t,h)}}return t/s}}),_$=Ye(cwe,dr,wSe,os,(n,e,t,i,r)=>r,(n,e,t,i,r)=>{if(!ni(n))return 0;var a=e==="vertical"?i.height:i.width;if(r==="gap")return n*a/2;if(r==="no-gap"){var s=pp(t,n*a),o=n*a/2;return o-s-(o-s)/a*s}return 0}),uwe=(n,e,t)=>{var i=Mh(n,e);return i==null||typeof i.padding!="string"?0:_$(n,"xAxis",e,t,i.padding)},fwe=(n,e,t)=>{var i=Ch(n,e);return i==null||typeof i.padding!="string"?0:_$(n,"yAxis",e,t,i.padding)},hwe=Ye(Mh,uwe,(n,e)=>{var t,i;if(n==null)return{left:0,right:0};var{padding:r}=n;return typeof r=="string"?{left:e,right:e}:{left:((t=r.left)!==null&&t!==void 0?t:0)+e,right:((i=r.right)!==null&&i!==void 0?i:0)+e}}),dwe=Ye(Ch,fwe,(n,e)=>{var t,i;if(n==null)return{top:0,bottom:0};var{padding:r}=n;return typeof r=="string"?{top:e,bottom:e}:{top:((t=r.top)!==null&&t!==void 0?t:0)+e,bottom:((i=r.bottom)!==null&&i!==void 0?i:0)+e}}),pwe=Ye([os,hwe,rC,iC,(n,e,t)=>t],(n,e,t,i,r)=>{var{padding:a}=i;return r?[a.left,t.width-a.right]:[n.left+e.left,n.left+n.width-e.right]}),mwe=Ye([os,dr,dwe,rC,iC,(n,e,t)=>t],(n,e,t,i,r,a)=>{var{padding:s}=r;return a?[i.height-s.bottom,s.top]:e==="horizontal"?[n.top+n.height-t.bottom,n.top+t.top]:[n.top+t.top,n.top+n.height-t.bottom]}),s1=(n,e,t,i)=>{var r;switch(e){case"xAxis":return pwe(n,t,i);case"yAxis":return mwe(n,t,i);case"zAxis":return(r=QL(n,t))===null||r===void 0?void 0:r.range;case"angleAxis":return Vq(n);case"radiusAxis":return jq(n,t);default:return}},x$=Ye([oo,s1],gC),gwe=Ye([my,lwe],OSe),wC=Ye([oo,my,gwe,x$],ik);Ye([r1,tk,Da],qSe);function S$(n,e){return n.id<e.id?-1:n.id>e.id?1:0}var EC=(n,e)=>e,TC=(n,e,t)=>t,vwe=Ye(tC,EC,TC,(n,e,t)=>n.filter(i=>i.orientation===e).filter(i=>i.mirror===t).sort(S$)),ywe=Ye(nC,EC,TC,(n,e,t)=>n.filter(i=>i.orientation===e).filter(i=>i.mirror===t).sort(S$)),w$=(n,e)=>({width:n.width,height:e.height}),bwe=(n,e)=>{var t=typeof e.width=="number"?e.width:Yx;return{width:t,height:n.height}},_we=Ye(os,Mh,w$),xwe=(n,e,t)=>{switch(e){case"top":return n.top;case"bottom":return t-n.bottom;default:return 0}},Swe=(n,e,t)=>{switch(e){case"left":return n.left;case"right":return t-n.right;default:return 0}},wwe=Ye(Eh,os,vwe,EC,TC,(n,e,t,i,r)=>{var a={},s;return t.forEach(o=>{var c=w$(e,o);s==null&&(s=xwe(e,i,n));var f=i==="top"&&!r||i==="bottom"&&r;a[o.id]=s-Number(f)*c.height,s+=(f?-1:1)*c.height}),a}),Ewe=Ye(wh,os,ywe,EC,TC,(n,e,t,i,r)=>{var a={},s;return t.forEach(o=>{var c=bwe(e,o);s==null&&(s=Swe(e,i,n));var f=i==="left"&&!r||i==="right"&&r;a[o.id]=s-Number(f)*c.width,s+=(f?-1:1)*c.width}),a}),Twe=(n,e)=>{var t=Mh(n,e);if(t!=null)return wwe(n,t.orientation,t.mirror)},Awe=Ye([os,Mh,Twe,(n,e)=>e],(n,e,t,i)=>{if(e!=null){var r=t==null?void 0:t[i];return r==null?{x:n.left,y:0}:{x:n.left,y:r}}}),Mwe=(n,e)=>{var t=Ch(n,e);if(t!=null)return Ewe(n,t.orientation,t.mirror)},Cwe=Ye([os,Ch,Mwe,(n,e)=>e],(n,e,t,i)=>{if(e!=null){var r=t==null?void 0:t[i];return r==null?{x:0,y:n.top}:{x:r,y:n.top}}}),Iwe=Ye(os,Ch,(n,e)=>{var t=typeof e.width=="number"?e.width:Yx;return{width:t,height:n.height}}),E$=(n,e,t,i)=>{if(t!=null){var{allowDuplicatedCategory:r,type:a,dataKey:s}=t,o=df(n,i),c=e.map(f=>f.value);if(s&&o&&a==="category"&&r&&AG(c))return c}},ak=Ye([dr,SC,oo,Da],E$),T$=(n,e,t,i)=>{if(!(t==null||t.dataKey==null)){var{type:r,scale:a}=t,s=df(n,i);if(s&&(r==="number"||a!=="auto"))return e.map(o=>o.value)}},sk=Ye([dr,SC,i1,Da],T$),I6=Ye([dr,FSe,my,wC,ak,sk,s1,rk,Da],(n,e,t,i,r,a,s,o,c)=>{if(e!=null){var f=df(n,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:a,duplicateDomain:r,isCategorical:f,niceTicks:o,range:s,realScaleType:t,scale:i}}}),Rwe=(n,e,t,i,r,a,s,o,c)=>{if(!(e==null||i==null)){var f=df(n,c),{type:h,ticks:p,tickCount:v}=e,y=t==="scaleBand"&&typeof i.bandwidth=="function"?i.bandwidth()/2:2,_=h==="category"&&i.bandwidth?i.bandwidth()/y:0;_=c==="angleAxis"&&a!=null&&a.length>=2?Yl(a[0]-a[1])*2*_:_;var E=p||r;return E?E.map((S,w)=>{var I=s?s.indexOf(S):S,P=i.map(I);return ni(P)?{index:w,coordinate:P+_,value:S,offset:_}:null}).filter(Fo):f&&o?o.map((S,w)=>{var I=i.map(S);return ni(I)?{coordinate:I+_,value:S,index:w,offset:_}:null}).filter(Fo):i.ticks?i.ticks(v).map((S,w)=>{var I=i.map(S);return ni(I)?{coordinate:I+_,value:S,index:w,offset:_}:null}).filter(Fo):i.domain().map((S,w)=>{var I=i.map(S);return ni(I)?{coordinate:I+_,value:s?s[S]:S,index:w,offset:_}:null}).filter(Fo)}},A$=Ye([dr,i1,my,wC,rk,s1,ak,sk,Da],Rwe),Pwe=(n,e,t,i,r,a,s)=>{if(!(e==null||t==null||i==null||i[0]===i[1])){var o=df(n,s),{tickCount:c}=e,f=0;return f=s==="angleAxis"&&(i==null?void 0:i.length)>=2?Yl(i[0]-i[1])*2*f:f,o&&a?a.map((h,p)=>{var v=t.map(h);return ni(v)?{coordinate:v+f,value:h,index:p,offset:f}:null}).filter(Fo):t.ticks?t.ticks(c).map((h,p)=>{var v=t.map(h);return ni(v)?{coordinate:v+f,value:h,index:p,offset:f}:null}).filter(Fo):t.domain().map((h,p)=>{var v=t.map(h);return ni(v)?{coordinate:v+f,value:r?r[h]:h,index:p,offset:f}:null}).filter(Fo)}},M$=Ye([dr,i1,wC,s1,ak,sk,Da],Pwe),C$=Ye(oo,wC,(n,e)=>{if(!(n==null||e==null))return yA(yA({},n),{},{scale:e})}),Nwe=Ye([oo,my,nk,x$],ik);Ye((n,e,t)=>QL(n,t),Nwe,(n,e)=>{if(!(n==null||e==null))return yA(yA({},n),{},{scale:e})});var Owe=Ye([dr,tC,nC],(n,e,t)=>{switch(n){case"horizontal":return e.some(i=>i.reversed)?"right-to-left":"left-to-right";case"vertical":return t.some(i=>i.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),I$=n=>n.options.defaultTooltipEventType,R$=n=>n.options.validateTooltipEventTypes;function P$(n,e,t){if(n==null)return e;var i=n?"axis":"item";return t==null?e:t.includes(i)?i:e}function ok(n,e){var t=I$(n),i=R$(n);return P$(e,t,i)}function Dwe(n){return hn(e=>ok(e,n))}var N$=(n,e)=>{var t,i=Number(e);if(!(sf(i)||e==null))return i>=0?n==null||(t=n[i])===null||t===void 0?void 0:t.value:void 0},Lwe=n=>n.tooltip.settings,jd={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},kwe={itemInteraction:{click:jd,hover:jd},axisInteraction:{click:jd,hover:jd},keyboardInteraction:jd,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},O$=Bo({name:"tooltip",initialState:kwe,reducers:{addTooltipEntrySettings:{reducer(n,e){n.tooltipItemPayloads.push(e.payload)},prepare:fr()},replaceTooltipEntrySettings:{reducer(n,e){var{prev:t,next:i}=e.payload,r=jc(n).tooltipItemPayloads.indexOf(t);r>-1&&(n.tooltipItemPayloads[r]=i)},prepare:fr()},removeTooltipEntrySettings:{reducer(n,e){var t=jc(n).tooltipItemPayloads.indexOf(e.payload);t>-1&&n.tooltipItemPayloads.splice(t,1)},prepare:fr()},setTooltipSettingsState(n,e){n.settings=e.payload},setActiveMouseOverItemIndex(n,e){n.syncInteraction.active=!1,n.keyboardInteraction.active=!1,n.itemInteraction.hover.active=!0,n.itemInteraction.hover.index=e.payload.activeIndex,n.itemInteraction.hover.dataKey=e.payload.activeDataKey,n.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,n.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(n){n.itemInteraction.hover.active=!1,n.axisInteraction.hover.active=!1},mouseLeaveItem(n){n.itemInteraction.hover.active=!1},setActiveClickItemIndex(n,e){n.syncInteraction.active=!1,n.itemInteraction.click.active=!0,n.keyboardInteraction.active=!1,n.itemInteraction.click.index=e.payload.activeIndex,n.itemInteraction.click.dataKey=e.payload.activeDataKey,n.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,n.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(n,e){n.syncInteraction.active=!1,n.axisInteraction.hover.active=!0,n.keyboardInteraction.active=!1,n.axisInteraction.hover.index=e.payload.activeIndex,n.axisInteraction.hover.dataKey=e.payload.activeDataKey,n.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(n,e){n.syncInteraction.active=!1,n.keyboardInteraction.active=!1,n.axisInteraction.click.active=!0,n.axisInteraction.click.index=e.payload.activeIndex,n.axisInteraction.click.dataKey=e.payload.activeDataKey,n.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(n,e){n.syncInteraction=e.payload},setKeyboardInteraction(n,e){n.keyboardInteraction.active=e.payload.active,n.keyboardInteraction.index=e.payload.activeIndex,n.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:Uwe,replaceTooltipEntrySettings:Fwe,removeTooltipEntrySettings:zwe,setTooltipSettingsState:Bwe,setActiveMouseOverItemIndex:Vwe,mouseLeaveItem:oOe,mouseLeaveChart:D$,setActiveClickItemIndex:lOe,setMouseOverAxisIndex:L$,setMouseClickAxisIndex:jwe,setSyncInteraction:VO,setKeyboardInteraction:jO}=O$.actions,Hwe=O$.reducer;function R6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function $w(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?R6(Object(t),!0).forEach(function(i){Gwe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):R6(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Gwe(n,e,t){return(e=Wwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Wwe(n){var e=qwe(n,"string");return typeof e=="symbol"?e:e+""}function qwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function $we(n,e,t){return e==="axis"?t==="click"?n.axisInteraction.click:n.axisInteraction.hover:t==="click"?n.itemInteraction.click:n.itemInteraction.hover}function Xwe(n){return n.index!=null}var k$=(n,e,t,i)=>{if(e==null)return jd;var r=$we(n,e,t);if(r==null)return jd;if(r.active)return r;if(n.keyboardInteraction.active)return n.keyboardInteraction;if(n.syncInteraction.active&&n.syncInteraction.index!=null)return n.syncInteraction;var a=n.settings.active===!0;if(Xwe(r)){if(a)return $w($w({},r),{},{active:!0})}else if(i!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:i,graphicalItemId:void 0};return $w($w({},jd),{},{coordinate:r.coordinate})};function Ywe(n){if(typeof n=="number")return Number.isFinite(n)?n:void 0;if(n instanceof Date){var e=n.valueOf();return Number.isFinite(e)?e:void 0}var t=Number(n);return Number.isFinite(t)?t:void 0}function Kwe(n,e){var t=Ywe(n),i=e[0],r=e[1];if(t===void 0)return!1;var a=Math.min(i,r),s=Math.max(i,r);return t>=a&&t<=s}function Zwe(n,e,t){if(t==null||e==null)return!0;var i=as(n,e);return i==null||!xh(t)?!0:Kwe(i,t)}var lk=(n,e,t,i)=>{var r=n==null?void 0:n.index;if(r==null)return null;var a=Number(r);if(!ni(a))return r;var s=0,o=1/0;e.length>0&&(o=e.length-1);var c=Math.max(s,Math.min(a,o)),f=e[c];return f==null||Zwe(f,t,i)?String(c):null},U$=(n,e,t,i,r,a,s)=>{if(a!=null){var o=s[0],c=o==null?void 0:o.getPosition(a);if(c!=null)return c;var f=r==null?void 0:r[Number(a)];if(f)switch(t){case"horizontal":return{x:f.coordinate,y:(i.top+e)/2};default:return{x:(i.left+n)/2,y:f.coordinate}}}},F$=(n,e,t,i)=>{if(e==="axis")return n.tooltipItemPayloads;if(n.tooltipItemPayloads.length===0)return[];var r;if(t==="hover"?r=n.itemInteraction.hover.graphicalItemId:r=n.itemInteraction.click.graphicalItemId,r==null&&i!=null){var a=n.tooltipItemPayloads[0];return a!=null?[a]:[]}return n.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.graphicalItemId)===r})},z$=n=>n.options.tooltipPayloadSearcher,gy=n=>n.tooltip;function P6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function N6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?P6(Object(t),!0).forEach(function(i){Qwe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):P6(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Qwe(n,e,t){return(e=Jwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Jwe(n){var e=eEe(n,"string");return typeof e=="symbol"?e:e+""}function eEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function tEe(n,e){return n??e}var B$=(n,e,t,i,r,a,s)=>{if(!(e==null||a==null)){var{chartData:o,computedData:c,dataStartIndex:f,dataEndIndex:h}=t,p=[];return n.reduce((v,y)=>{var _,{dataDefinedOnItem:E,settings:S}=y,w=tEe(E,o),I=Array.isArray(w)?gW(w,f,h):w,P=(_=S==null?void 0:S.dataKey)!==null&&_!==void 0?_:i,D=S==null?void 0:S.nameKey,z;if(i&&Array.isArray(I)&&!Array.isArray(I[0])&&s==="axis"?z=MG(I,i,r):z=a(I,e,c,D),Array.isArray(z))z.forEach(U=>{var R=N6(N6({},S),{},{name:U.name,unit:U.unit,color:void 0,fill:void 0});v.push(O5({tooltipEntrySettings:R,dataKey:U.dataKey,payload:U.payload,value:as(U.payload,U.dataKey),name:U.name}))});else{var k;v.push(O5({tooltipEntrySettings:S,dataKey:P,payload:z,value:as(z,P),name:(k=as(z,D))!==null&&k!==void 0?k:S==null?void 0:S.name}))}return v},p)}},ck=Ye([_a,$q,GL],v$),nEe=Ye([n=>n.graphicalItems.cartesianItems,n=>n.graphicalItems.polarItems],(n,e)=>[...n,...e]),iEe=Ye([La,dy],Xq),vy=Ye([nEe,_a,iEe],Kq,{memoizeOptions:{resultEqualityCheck:xC}}),rEe=Ye([vy],n=>n.filter(ZL)),aEe=Ye([vy],Jq,{memoizeOptions:{resultEqualityCheck:xC}}),yy=Ye([aEe,Ah],e$),sEe=Ye([rEe,Ah,_a],Gq),uk=Ye([yy,_a,vy],t$),V$=Ye([_a],ek),oEe=Ye([_a],n=>n.allowDataOverflow),j$=Ye([V$,oEe],Aq),lEe=Ye([vy],n=>n.filter(ZL)),cEe=Ye([sEe,lEe,mC,Uq],i$),uEe=Ye([cEe,Ah,La,j$],a$),fEe=Ye([vy],Qq),hEe=Ye([yy,_a,fEe,tk,La],l$,{memoizeOptions:{resultEqualityCheck:_C}}),dEe=Ye([c$,La,dy],py),pEe=Ye([dEe,La],h$),mEe=Ye([u$,La,dy],py),gEe=Ye([mEe,La],d$),vEe=Ye([f$,La,dy],py),yEe=Ye([vEe,La],p$),bEe=Ye([pEe,yEe,gEe],bA),_Ee=Ye([_a,V$,j$,uEe,hEe,bEe,dr,La],m$),o1=Ye([_a,dr,yy,uk,mC,La,_Ee],g$),xEe=Ye([o1,_a,ck],y$),SEe=Ye([_a,o1,xEe,La],b$),H$=n=>{var e=La(n),t=dy(n),i=!1;return s1(n,e,t,i)},G$=Ye([_a,H$],gC),W$=Ye([_a,ck,SEe,G$],ik),wEe=Ye([dr,uk,_a,La],E$),EEe=Ye([dr,uk,_a,La],T$),TEe=(n,e,t,i,r,a,s,o)=>{if(e){var{type:c}=e,f=df(n,o);if(i){var h=t==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,p=c==="category"&&i.bandwidth?i.bandwidth()/h:0;return p=o==="angleAxis"&&r!=null&&(r==null?void 0:r.length)>=2?Yl(r[0]-r[1])*2*p:p,f&&s?s.map((v,y)=>{var _=i.map(v);return ni(_)?{coordinate:_+p,value:v,index:y,offset:p}:null}).filter(Fo):i.domain().map((v,y)=>{var _=i.map(v);return ni(_)?{coordinate:_+p,value:a?a[v]:v,index:y,offset:p}:null}).filter(Fo)}}},Ih=Ye([dr,_a,ck,W$,H$,wEe,EEe,La],TEe),fk=Ye([I$,R$,Lwe],(n,e,t)=>P$(t.shared,n,e)),q$=n=>n.tooltip.settings.trigger,hk=n=>n.tooltip.settings.defaultIndex,l1=Ye([gy,fk,q$,hk],k$),Sx=Ye([l1,yy,a1,o1],lk),$$=Ye([Ih,Sx],N$),AEe=Ye([l1],n=>{if(n)return n.dataKey});Ye([l1],n=>{if(n)return n.graphicalItemId});var X$=Ye([gy,fk,q$,hk],F$),MEe=Ye([wh,Eh,dr,os,Ih,hk,X$],U$),CEe=Ye([l1,MEe],(n,e)=>n!=null&&n.coordinate?n.coordinate:e),IEe=Ye([l1],n=>{var e;return(e=n==null?void 0:n.active)!==null&&e!==void 0?e:!1}),REe=Ye([X$,Sx,Ah,a1,$$,z$,fk],B$),PEe=Ye([REe],n=>{if(n!=null){var e=n.map(t=>t.payload).filter(t=>t!=null);return Array.from(new Set(e))}});function O6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function D6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?O6(Object(t),!0).forEach(function(i){NEe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):O6(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function NEe(n,e,t){return(e=OEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OEe(n){var e=DEe(n,"string");return typeof e=="symbol"?e:e+""}function DEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var LEe=()=>hn(_a),kEe=()=>{var n=LEe(),e=hn(Ih),t=hn(W$);return KT(!n||!t?void 0:D6(D6({},n),{},{scale:t}),e)};function L6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function J0(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?L6(Object(t),!0).forEach(function(i){UEe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):L6(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function UEe(n,e,t){return(e=FEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function FEe(n){var e=zEe(n,"string");return typeof e=="symbol"?e:e+""}function zEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var BEe=(n,e,t,i)=>{var r=e.find(a=>a&&a.index===t);if(r){if(n==="horizontal")return{x:r.coordinate,y:i.chartY};if(n==="vertical")return{x:i.chartX,y:r.coordinate}}return{x:0,y:0}},VEe=(n,e,t,i)=>{var r=e.find(f=>f&&f.index===t);if(r){if(n==="centric"){var a=r.coordinate,{radius:s}=i;return J0(J0(J0({},i),is(i.cx,i.cy,s,a)),{},{angle:a,radius:s})}var o=r.coordinate,{angle:c}=i;return J0(J0(J0({},i),is(i.cx,i.cy,o,c)),{},{angle:c,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function jEe(n,e){var{chartX:t,chartY:i}=n;return t>=e.left&&t<=e.left+e.width&&i>=e.top&&i<=e.top+e.height}var Y$=(n,e,t,i,r)=>{var a,s=(a=e==null?void 0:e.length)!==null&&a!==void 0?a:0;if(s<=1||n==null)return 0;if(i==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var o=0;o<s;o++){var c,f,h,p,v,y=o>0?(c=t[o-1])===null||c===void 0?void 0:c.coordinate:(f=t[s-1])===null||f===void 0?void 0:f.coordinate,_=(h=t[o])===null||h===void 0?void 0:h.coordinate,E=o>=s-1?(p=t[0])===null||p===void 0?void 0:p.coordinate:(v=t[o+1])===null||v===void 0?void 0:v.coordinate,S=void 0;if(!(y==null||_==null||E==null))if(Yl(_-y)!==Yl(E-_)){var w=[];if(Yl(E-_)===Yl(r[1]-r[0])){S=E;var I=_+r[1]-r[0];w[0]=Math.min(I,(I+y)/2),w[1]=Math.max(I,(I+y)/2)}else{S=y;var P=E+r[1]-r[0];w[0]=Math.min(_,(P+_)/2),w[1]=Math.max(_,(P+_)/2)}var D=[Math.min(_,(S+_)/2),Math.max(_,(S+_)/2)];if(n>D[0]&&n<=D[1]||n>=w[0]&&n<=w[1]){var z;return(z=t[o])===null||z===void 0?void 0:z.index}}else{var k=Math.min(y,E),U=Math.max(y,E);if(n>(k+_)/2&&n<=(U+_)/2){var R;return(R=t[o])===null||R===void 0?void 0:R.index}}}else if(e)for(var M=0;M<s;M++){var L=e[M];if(L!=null){var B=e[M+1],V=e[M-1];if(M===0&&B!=null&&n<=(L.coordinate+B.coordinate)/2||M===s-1&&V!=null&&n>(L.coordinate+V.coordinate)/2||M>0&&M<s-1&&V!=null&&B!=null&&n>(L.coordinate+V.coordinate)/2&&n<=(L.coordinate+B.coordinate)/2)return L.index}}return-1},K$=()=>hn(GL),dk=(n,e)=>e,Z$=(n,e,t)=>t,pk=(n,e,t,i)=>i,HEe=Ye(Ih,n=>WM(n,e=>e.coordinate)),mk=Ye([gy,dk,Z$,pk],k$),gk=Ye([mk,yy,a1,o1],lk),GEe=(n,e,t)=>{if(e!=null){var i=gy(n);return e==="axis"?t==="hover"?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:t==="hover"?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}},Q$=Ye([gy,dk,Z$,pk],F$),_A=Ye([wh,Eh,dr,os,Ih,pk,Q$],U$),WEe=Ye([mk,_A],(n,e)=>{var t;return(t=n.coordinate)!==null&&t!==void 0?t:e}),J$=Ye([Ih,gk],N$),qEe=Ye([Q$,gk,Ah,a1,J$,z$,dk],B$),$Ee=Ye([mk,gk],(n,e)=>({isActive:n.active&&e!=null,activeIndex:e})),XEe=(n,e,t,i,r,a,s)=>{if(!(!n||!t||!i||!r)&&jEe(n,s)){var o=bye(n,e),c=Y$(o,a,r,t,i),f=BEe(e,r,c,n);return{activeIndex:String(c),activeCoordinate:f}}},YEe=(n,e,t,i,r,a,s)=>{if(!(!n||!i||!r||!a||!t)){var o=R_e(n,t);if(o){var c=_ye(o,e),f=Y$(c,s,a,i,r),h=VEe(e,a,f,o);return{activeIndex:String(f),activeCoordinate:h}}}},KEe=(n,e,t,i,r,a,s,o)=>{if(!(!n||!e||!i||!r||!a))return e==="horizontal"||e==="vertical"?XEe(n,e,i,r,a,s,o):YEe(n,e,t,i,r,a,s)},ZEe=Ye(n=>n.zIndex.zIndexMap,(n,e)=>e,(n,e,t)=>t,(n,e,t)=>{if(e!=null){var i=n[e];if(i!=null)return t?i.panoramaElement:i.element}}),QEe=Ye(n=>n.zIndex.zIndexMap,n=>{var e=Object.keys(n).map(i=>parseInt(i,10)).concat(Object.values(no)),t=Array.from(new Set(e));return t.sort((i,r)=>i-r)},{memoizeOptions:{resultEqualityCheck:PSe}});function k6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function U6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?k6(Object(t),!0).forEach(function(i){JEe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):k6(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function JEe(n,e,t){return(e=eTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function eTe(n){var e=tTe(n,"string");return typeof e=="symbol"?e:e+""}function tTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var nTe={},iTe={zIndexMap:Object.values(no).reduce((n,e)=>U6(U6({},n),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),nTe)},rTe=new Set(Object.values(no));function aTe(n){return rTe.has(n)}var eX=Bo({name:"zIndex",initialState:iTe,reducers:{registerZIndexPortal:{reducer:(n,e)=>{var{zIndex:t}=e.payload;n.zIndexMap[t]?n.zIndexMap[t].consumers+=1:n.zIndexMap[t]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:fr()},unregisterZIndexPortal:{reducer:(n,e)=>{var{zIndex:t}=e.payload;n.zIndexMap[t]&&(n.zIndexMap[t].consumers-=1,n.zIndexMap[t].consumers<=0&&!aTe(t)&&delete n.zIndexMap[t])},prepare:fr()},registerZIndexPortalElement:{reducer:(n,e)=>{var{zIndex:t,element:i,isPanorama:r}=e.payload;n.zIndexMap[t]?r?n.zIndexMap[t].panoramaElement=i:n.zIndexMap[t].element=i:n.zIndexMap[t]={consumers:0,element:r?void 0:i,panoramaElement:r?i:void 0}},prepare:fr()},unregisterZIndexPortalElement:{reducer:(n,e)=>{var{zIndex:t}=e.payload;n.zIndexMap[t]&&(e.payload.isPanorama?n.zIndexMap[t].panoramaElement=void 0:n.zIndexMap[t].element=void 0)},prepare:fr()}}}),{registerZIndexPortal:sTe,unregisterZIndexPortal:oTe,registerZIndexPortalElement:lTe,unregisterZIndexPortalElement:cTe}=eX.actions,uTe=eX.reducer;function Rh(n){var{zIndex:e,children:t}=n,i=Jye(),r=i&&e!==void 0&&e!==0,a=Vo(),s=Na();q.useLayoutEffect(()=>r?(s(sTe({zIndex:e})),()=>{s(oTe({zIndex:e}))}):ly,[s,e,r]);var o=hn(c=>ZEe(c,e,a));return r?o?XV.createPortal(t,o):null:t}function HO(){return HO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},HO.apply(null,arguments)}function F6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Xw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?F6(Object(t),!0).forEach(function(i){fTe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):F6(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function fTe(n,e,t){return(e=hTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function hTe(n){var e=dTe(n,"string");return typeof e=="symbol"?e:e+""}function dTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function pTe(n){var{cursor:e,cursorComp:t,cursorProps:i}=n;return q.isValidElement(e)?q.cloneElement(e,i):q.createElement(t,i)}function mTe(n){var e,{coordinate:t,payload:i,index:r,offset:a,tooltipAxisBandSize:s,layout:o,cursor:c,tooltipEventType:f,chartName:h}=n,p=t,v=i,y=r;if(!c||!p||h!=="ScatterChart"&&f!=="axis")return null;var _,E,S;if(h==="ScatterChart")_=p,E=Vbe,S=no.cursorLine;else if(h==="BarChart")_=jbe(o,p,a,s),E=__e,S=no.cursorRectangle;else if(o==="radial"&&CG(p)){var{cx:w,cy:I,radius:P,startAngle:D,endAngle:z}=jW(p);_={cx:w,cy:I,startAngle:D,endAngle:z,innerRadius:P,outerRadius:P},E=D_e,S=no.cursorLine}else _={points:L_e(o,p,a)},E=dE,S=no.cursorLine;var k=typeof c=="object"&&"className"in c?c.className:void 0,U=Xw(Xw(Xw(Xw({stroke:"#ccc",pointerEvents:"none"},a),_),VM(c)),{},{payload:v,payloadIndex:y,className:rr("recharts-tooltip-cursor",k)});return q.createElement(Rh,{zIndex:(e=n.zIndex)!==null&&e!==void 0?e:S},q.createElement(pTe,{cursor:c,cursorComp:E,cursorProps:U}))}function gTe(n){var e=kEe(),t=TW(),i=cy(),r=K$();return e==null||t==null||i==null||r==null?null:q.createElement(mTe,HO({},n,{offset:t,layout:i,tooltipAxisBandSize:e,chartName:r}))}var tX=q.createContext(null),vTe=()=>q.useContext(tX),WP={exports:{}},z6;function yTe(){return z6||(z6=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function r(c,f,h){this.fn=c,this.context=f,this.once=h||!1}function a(c,f,h,p,v){if(typeof h!="function")throw new TypeError("The listener must be a function");var y=new r(h,p||c,v),_=t?t+f:f;return c._events[_]?c._events[_].fn?c._events[_]=[c._events[_],y]:c._events[_].push(y):(c._events[_]=y,c._eventsCount++),c}function s(c,f){--c._eventsCount===0?c._events=new i:delete c._events[f]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var f=[],h,p;if(this._eventsCount===0)return f;for(p in h=this._events)e.call(h,p)&&f.push(t?p.slice(1):p);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f},o.prototype.listeners=function(f){var h=t?t+f:f,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var v=0,y=p.length,_=new Array(y);v<y;v++)_[v]=p[v].fn;return _},o.prototype.listenerCount=function(f){var h=t?t+f:f,p=this._events[h];return p?p.fn?1:p.length:0},o.prototype.emit=function(f,h,p,v,y,_){var E=t?t+f:f;if(!this._events[E])return!1;var S=this._events[E],w=arguments.length,I,P;if(S.fn){switch(S.once&&this.removeListener(f,S.fn,void 0,!0),w){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,h),!0;case 3:return S.fn.call(S.context,h,p),!0;case 4:return S.fn.call(S.context,h,p,v),!0;case 5:return S.fn.call(S.context,h,p,v,y),!0;case 6:return S.fn.call(S.context,h,p,v,y,_),!0}for(P=1,I=new Array(w-1);P<w;P++)I[P-1]=arguments[P];S.fn.apply(S.context,I)}else{var D=S.length,z;for(P=0;P<D;P++)switch(S[P].once&&this.removeListener(f,S[P].fn,void 0,!0),w){case 1:S[P].fn.call(S[P].context);break;case 2:S[P].fn.call(S[P].context,h);break;case 3:S[P].fn.call(S[P].context,h,p);break;case 4:S[P].fn.call(S[P].context,h,p,v);break;default:if(!I)for(z=1,I=new Array(w-1);z<w;z++)I[z-1]=arguments[z];S[P].fn.apply(S[P].context,I)}}return!0},o.prototype.on=function(f,h,p){return a(this,f,h,p,!1)},o.prototype.once=function(f,h,p){return a(this,f,h,p,!0)},o.prototype.removeListener=function(f,h,p,v){var y=t?t+f:f;if(!this._events[y])return this;if(!h)return s(this,y),this;var _=this._events[y];if(_.fn)_.fn===h&&(!v||_.once)&&(!p||_.context===p)&&s(this,y);else{for(var E=0,S=[],w=_.length;E<w;E++)(_[E].fn!==h||v&&!_[E].once||p&&_[E].context!==p)&&S.push(_[E]);S.length?this._events[y]=S.length===1?S[0]:S:s(this,y)}return this},o.prototype.removeAllListeners=function(f){var h;return f?(h=t?t+f:f,this._events[h]&&s(this,h)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,n.exports=o})(WP)),WP.exports}var bTe=yTe();const _Te=Wc(bTe);var wx=new _Te,GO="recharts.syncEvent.tooltip",B6="recharts.syncEvent.brush",xTe=(n,e)=>{if(e&&Array.isArray(n)){var t=Number.parseInt(e,10);if(!sf(t))return n[t]}},STe={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},nX=Bo({name:"options",initialState:STe,reducers:{createEventEmitter:n=>{n.eventEmitter==null&&(n.eventEmitter=Symbol("rechartsEventEmitter"))}}}),wTe=nX.reducer,{createEventEmitter:ETe}=nX.actions;function TTe(n){return n.tooltip.syncInteraction}var ATe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},iX=Bo({name:"chartData",initialState:ATe,reducers:{setChartData(n,e){if(n.chartData=e.payload,e.payload==null){n.dataStartIndex=0,n.dataEndIndex=0;return}e.payload.length>0&&n.dataEndIndex!==e.payload.length-1&&(n.dataEndIndex=e.payload.length-1)},setComputedData(n,e){n.computedData=e.payload},setDataStartEndIndexes(n,e){var{startIndex:t,endIndex:i}=e.payload;t!=null&&(n.dataStartIndex=t),i!=null&&(n.dataEndIndex=i)}}}),{setChartData:V6,setDataStartEndIndexes:MTe,setComputedData:cOe}=iX.actions,CTe=iX.reducer,ITe=["x","y"];function j6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ev(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?j6(Object(t),!0).forEach(function(i){RTe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):j6(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function RTe(n,e,t){return(e=PTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function PTe(n){var e=NTe(n,"string");return typeof e=="symbol"?e:e+""}function NTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function OTe(n,e){if(n==null)return{};var t,i,r=DTe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function DTe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function LTe(){var n=hn(WL),e=hn(qL),t=Na(),i=hn(Fq),r=hn(Ih),a=cy(),s=aC(),o=hn(c=>c.rootProps.className);q.useEffect(()=>{if(n==null)return ly;var c=(f,h,p)=>{if(e!==p&&n===f){if(i==="index"){var v;if(s&&h!==null&&h!==void 0&&(v=h.payload)!==null&&v!==void 0&&v.coordinate&&h.payload.sourceViewBox){var y=h.payload.coordinate,{x:_,y:E}=y,S=OTe(y,ITe),{x:w,y:I,width:P,height:D}=h.payload.sourceViewBox,z=ev(ev({},S),{},{x:s.x+(P?(_-w)/P:0)*s.width,y:s.y+(D?(E-I)/D:0)*s.height});t(ev(ev({},h),{},{payload:ev(ev({},h.payload),{},{coordinate:z})}))}else t(h);return}if(r!=null){var k;if(typeof i=="function"){var U={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},R=i(r,U);k=r[R]}else i==="value"&&(k=r.find(G=>String(G.value)===h.payload.label));var{coordinate:M}=h.payload;if(k==null||h.payload.active===!1||M==null||s==null){t(VO({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:L,y:B}=M,V=Math.min(L,s.x+s.width),j=Math.min(B,s.y+s.height),Z={x:a==="horizontal"?k.coordinate:V,y:a==="horizontal"?j:k.coordinate},J=VO({active:h.payload.active,coordinate:Z,dataKey:h.payload.dataKey,index:String(k.index),label:h.payload.label,sourceViewBox:h.payload.sourceViewBox,graphicalItemId:h.payload.graphicalItemId});t(J)}}};return wx.on(GO,c),()=>{wx.off(GO,c)}},[o,t,e,n,i,r,a,s])}function kTe(){var n=hn(WL),e=hn(qL),t=Na();q.useEffect(()=>{if(n==null)return ly;var i=(r,a,s)=>{e!==s&&n===r&&t(MTe(a))};return wx.on(B6,i),()=>{wx.off(B6,i)}},[t,e,n])}function UTe(){var n=Na();q.useEffect(()=>{n(ETe())},[n]),LTe(),kTe()}function FTe(n,e,t,i,r,a){var s=hn(y=>GEe(y,n,e)),o=hn(qL),c=hn(WL),f=hn(Fq),h=hn(TTe),p=h==null?void 0:h.active,v=aC();q.useEffect(()=>{if(!p&&c!=null&&o!=null){var y=VO({active:a,coordinate:t,dataKey:s,index:r,label:typeof i=="number"?String(i):i,sourceViewBox:v,graphicalItemId:void 0});wx.emit(GO,c,y,o)}},[p,t,s,r,i,o,c,f,a,v])}function H6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function G6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?H6(Object(t),!0).forEach(function(i){zTe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):H6(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function zTe(n,e,t){return(e=BTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function BTe(n){var e=VTe(n,"string");return typeof e=="symbol"?e:e+""}function VTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function jTe(n){return n.dataKey}function HTe(n,e){return q.isValidElement(n)?q.cloneElement(n,e):typeof n=="function"?q.createElement(n,e):q.createElement(_be,e)}var W6=[],GTe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function WTe(n){var e,t,i=pl(n,GTe),{active:r,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:c,filterNull:f,isAnimationActive:h,offset:p,payloadUniqBy:v,position:y,reverseDirection:_,useTranslate3d:E,wrapperStyle:S,cursor:w,shared:I,trigger:P,defaultIndex:D,portal:z,axisId:k}=i,U=Na(),R=typeof D=="number"?String(D):D;q.useEffect(()=>{U(Bwe({shared:I,trigger:P,axisId:k,active:r,defaultIndex:R}))},[U,I,P,k,r,R]);var M=aC(),L=kW(),B=Dwe(I),{activeIndex:V,isActive:j}=(e=hn(Te=>$Ee(Te,B,P,R)))!==null&&e!==void 0?e:{},Z=hn(Te=>qEe(Te,B,P,R)),J=hn(Te=>J$(Te,B,P,R)),G=hn(Te=>WEe(Te,B,P,R)),$=Z,ae=vTe(),le=(t=r??j)!==null&&t!==void 0?t:!1,[ue,Q]=sve([$,le]),re=B==="axis"?J:void 0;FTe(B,P,G,re,V,le);var ye=z??ae;if(ye==null||M==null||B==null)return null;var de=$??W6;le||(de=W6),f&&de.length&&(de=U0e(de.filter(Te=>Te.value!=null&&(Te.hide!==!0||i.includeHidden)),v,jTe));var xe=de.length>0,ve=q.createElement(Mbe,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:h,active:le,coordinate:G,hasPayload:xe,offset:p,position:y,reverseDirection:_,useTranslate3d:E,viewBox:M,wrapperStyle:S,lastBoundingBox:ue,innerRef:Q,hasPortalFromProps:!!z},HTe(c,G6(G6({},i),{},{payload:de,label:re,active:le,activeIndex:V,coordinate:G,accessibilityLayer:L})));return q.createElement(q.Fragment,null,XV.createPortal(ve,ye),le&&q.createElement(gTe,{cursor:w,tooltipEventType:B,coordinate:G,payload:de,index:V}))}function qTe(n,e,t){return(e=$Te(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $Te(n){var e=XTe(n,"string");return typeof e=="symbol"?e:e+""}function XTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class YTe{constructor(e){qTe(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return t!==void 0&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var i=this.cache.keys().next().value;i!=null&&this.cache.delete(i)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}function q6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function KTe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?q6(Object(t),!0).forEach(function(i){ZTe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):q6(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function ZTe(n,e,t){return(e=QTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function QTe(n){var e=JTe(n,"string");return typeof e=="symbol"?e:e+""}function JTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var eAe={cacheSize:2e3,enableCache:!0},rX=KTe({},eAe),$6=new YTe(rX.cacheSize),tAe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},X6="recharts_measurement_span";function nAe(n,e){var t=e.fontSize||"",i=e.fontFamily||"",r=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",o=e.textTransform||"";return"".concat(n,"|").concat(t,"|").concat(i,"|").concat(r,"|").concat(a,"|").concat(s,"|").concat(o)}var Y6=(n,e)=>{try{var t=document.getElementById(X6);t||(t=document.createElement("span"),t.setAttribute("id",X6),t.setAttribute("aria-hidden","true"),document.body.appendChild(t)),Object.assign(t.style,tAe,e),t.textContent="".concat(n);var i=t.getBoundingClientRect();return{width:i.width,height:i.height}}catch{return{width:0,height:0}}},P_=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Qx.isSsr)return{width:0,height:0};if(!rX.enableCache)return Y6(e,t);var i=nAe(e,t),r=$6.get(i);if(r)return r;var a=Y6(e,t);return $6.set(i,a),a},aX;function iAe(n,e,t){return(e=rAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rAe(n){var e=aAe(n,"string");return typeof e=="symbol"?e:e+""}function aAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var K6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Z6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,sAe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,oAe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,lAe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},cAe=["cm","mm","pt","pc","in","Q","px"];function uAe(n){return cAe.includes(n)}var hv="NaN";function fAe(n,e){return n*lAe[e]}class Ja{static parse(e){var t,[,i,r]=(t=oAe.exec(e))!==null&&t!==void 0?t:[];return i==null?Ja.NaN:new Ja(parseFloat(i),r??"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,sf(e)&&(this.unit=""),t!==""&&!sAe.test(t)&&(this.num=NaN,this.unit=""),uAe(t)&&(this.num=fAe(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new Ja(NaN,""):new Ja(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Ja(NaN,""):new Ja(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ja(NaN,""):new Ja(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ja(NaN,""):new Ja(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return sf(this.num)}}aX=Ja;iAe(Ja,"NaN",new aX(NaN,""));function sX(n){if(n==null||n.includes(hv))return hv;for(var e=n;e.includes("*")||e.includes("/");){var t,[,i,r,a]=(t=K6.exec(e))!==null&&t!==void 0?t:[],s=Ja.parse(i??""),o=Ja.parse(a??""),c=r==="*"?s.multiply(o):s.divide(o);if(c.isNaN())return hv;e=e.replace(K6,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,[,h,p,v]=(f=Z6.exec(e))!==null&&f!==void 0?f:[],y=Ja.parse(h??""),_=Ja.parse(v??""),E=p==="+"?y.add(_):y.subtract(_);if(E.isNaN())return hv;e=e.replace(Z6,E.toString())}return e}var Q6=/\(([^()]*)\)/;function hAe(n){for(var e=n,t;(t=Q6.exec(e))!=null;){var[,i]=t;e=e.replace(Q6,sX(i))}return e}function dAe(n){var e=n.replace(/\s+/g,"");return e=hAe(e),e=sX(e),e}function pAe(n){try{return dAe(n)}catch{return hv}}function qP(n){var e=pAe(n.slice(5,-1));return e===hv?"":e}var mAe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],gAe=["dx","dy","angle","className","breakAll"];function WO(){return WO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},WO.apply(null,arguments)}function J6(n,e){if(n==null)return{};var t,i,r=vAe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function vAe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var oX=/[ \f\n\r\t\v\u2028\u2029]+/,lX=n=>{var{children:e,breakAll:t,style:i}=n;try{var r=[];Ns(e)||(t?r=e.toString().split(""):r=e.toString().split(oX));var a=r.map(o=>({word:o,width:P_(o,i).width})),s=t?0:P_("",i).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function yAe(n){return n==="start"||n==="middle"||n==="end"||n==="inherit"}var cX=(n,e,t,i)=>n.reduce((r,a)=>{var{word:s,width:o}=a,c=r[r.length-1];if(c&&o!=null&&(e==null||i||c.width+o+t<Number(e)))c.words.push(s),c.width+=o+t;else{var f={words:[s],width:o};r.push(f)}return r},[]),uX=n=>n.reduce((e,t)=>e.width>t.width?e:t),bAe="",eV=(n,e,t,i,r,a,s,o)=>{var c=n.slice(0,e),f=lX({breakAll:t,style:i,children:c+bAe});if(!f)return[!1,[]];var h=cX(f.wordsWithComputedWidth,a,s,o),p=h.length>r||uX(h).width>Number(a);return[p,h]},_Ae=(n,e,t,i,r)=>{var{maxLines:a,children:s,style:o,breakAll:c}=n,f=Zt(a),h=String(s),p=cX(e,i,t,r);if(!f||r)return p;var v=p.length>a||uX(p).width>Number(i);if(!v)return p;for(var y=0,_=h.length-1,E=0,S;y<=_&&E<=h.length-1;){var w=Math.floor((y+_)/2),I=w-1,[P,D]=eV(h,I,c,o,a,i,t,r),[z]=eV(h,w,c,o,a,i,t,r);if(!P&&!z&&(y=w+1),P&&z&&(_=w-1),!P&&z){S=D;break}E++}return S||p},tV=n=>{var e=Ns(n)?[]:n.toString().split(oX);return[{words:e,width:void 0}]},xAe=n=>{var{width:e,scaleToFit:t,children:i,style:r,breakAll:a,maxLines:s}=n;if((e||t)&&!Qx.isSsr){var o,c,f=lX({breakAll:a,children:i,style:r});if(f){var{wordsWithComputedWidth:h,spaceWidth:p}=f;o=h,c=p}else return tV(i);return _Ae({breakAll:a,children:i,maxLines:s,style:r},o,c,e,!!t)}return tV(i)},fX="#808080",SAe={angle:0,breakAll:!1,capHeight:"0.71em",fill:fX,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},vk=q.forwardRef((n,e)=>{var t=pl(n,SAe),{x:i,y:r,lineHeight:a,capHeight:s,fill:o,scaleToFit:c,textAnchor:f,verticalAnchor:h}=t,p=J6(t,mAe),v=q.useMemo(()=>xAe({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:c,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,c,p.style,p.width]),{dx:y,dy:_,angle:E,className:S,breakAll:w}=p,I=J6(p,gAe);if(!of(i)||!of(r)||v.length===0)return null;var P=Number(i)+(Zt(y)?y:0),D=Number(r)+(Zt(_)?_:0);if(!ni(P)||!ni(D))return null;var z;switch(h){case"start":z=qP("calc(".concat(s,")"));break;case"middle":z=qP("calc(".concat((v.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:z=qP("calc(".concat(v.length-1," * -").concat(a,")"));break}var k=[],U=v[0];if(c&&U!=null){var R=U.width,{width:M}=p;k.push("scale(".concat(Zt(M)&&Zt(R)?M/R:1,")"))}return E&&k.push("rotate(".concat(E,", ").concat(P,", ").concat(D,")")),k.length&&(I.transform=k.join(" ")),q.createElement("text",WO({},ec(I),{ref:e,x:P,y:D,className:rr("recharts-text",S),textAnchor:f,fill:o.includes("url")?fX:o}),v.map((L,B)=>{var V=L.words.join(w?"":" ");return q.createElement("tspan",{x:P,dy:B===0?z:a,key:"".concat(V,"-").concat(B)},V)}))});vk.displayName="Text";function nV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Nu(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nV(Object(t),!0).forEach(function(i){wAe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):nV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function wAe(n,e,t){return(e=EAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function EAe(n){var e=TAe(n,"string");return typeof e=="symbol"?e:e+""}function TAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var AAe=n=>{var{viewBox:e,position:t,offset:i=0,parentViewBox:r}=n,{x:a,y:s,height:o,upperWidth:c,lowerWidth:f}=mL(e),h=a,p=a+(c-f)/2,v=(h+p)/2,y=(c+f)/2,_=h+c/2,E=o>=0?1:-1,S=E*i,w=E>0?"end":"start",I=E>0?"start":"end",P=c>=0?1:-1,D=P*i,z=P>0?"end":"start",k=P>0?"start":"end",U=r;if(t==="top"){var R={x:h+c/2,y:s-S,horizontalAnchor:"middle",verticalAnchor:w};return U&&(R.height=Math.max(s-U.y,0),R.width=c),R}if(t==="bottom"){var M={x:p+f/2,y:s+o+S,horizontalAnchor:"middle",verticalAnchor:I};return U&&(M.height=Math.max(U.y+U.height-(s+o),0),M.width=f),M}if(t==="left"){var L={x:v-D,y:s+o/2,horizontalAnchor:z,verticalAnchor:"middle"};return U&&(L.width=Math.max(L.x-U.x,0),L.height=o),L}if(t==="right"){var B={x:v+y+D,y:s+o/2,horizontalAnchor:k,verticalAnchor:"middle"};return U&&(B.width=Math.max(U.x+U.width-B.x,0),B.height=o),B}var V=U?{width:y,height:o}:{};return t==="insideLeft"?Nu({x:v+D,y:s+o/2,horizontalAnchor:k,verticalAnchor:"middle"},V):t==="insideRight"?Nu({x:v+y-D,y:s+o/2,horizontalAnchor:z,verticalAnchor:"middle"},V):t==="insideTop"?Nu({x:h+c/2,y:s+S,horizontalAnchor:"middle",verticalAnchor:I},V):t==="insideBottom"?Nu({x:p+f/2,y:s+o-S,horizontalAnchor:"middle",verticalAnchor:w},V):t==="insideTopLeft"?Nu({x:h+D,y:s+S,horizontalAnchor:k,verticalAnchor:I},V):t==="insideTopRight"?Nu({x:h+c-D,y:s+S,horizontalAnchor:z,verticalAnchor:I},V):t==="insideBottomLeft"?Nu({x:p+D,y:s+o-S,horizontalAnchor:k,verticalAnchor:w},V):t==="insideBottomRight"?Nu({x:p+f-D,y:s+o-S,horizontalAnchor:z,verticalAnchor:w},V):t&&typeof t=="object"&&(Zt(t.x)||pg(t.x))&&(Zt(t.y)||pg(t.y))?Nu({x:a+pp(t.x,y),y:s+pp(t.y,o),horizontalAnchor:"end",verticalAnchor:"end"},V):Nu({x:_,y:s+o/2,horizontalAnchor:"middle",verticalAnchor:"middle"},V)},MAe=["labelRef"],CAe=["content"];function iV(n,e){if(n==null)return{};var t,i,r=IAe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function IAe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function rV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function d_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rV(Object(t),!0).forEach(function(i){RAe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):rV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function RAe(n,e,t){return(e=PAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function PAe(n){var e=NAe(n,"string");return typeof e=="symbol"?e:e+""}function NAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ih(){return ih=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ih.apply(null,arguments)}var hX=q.createContext(null),OAe=n=>{var{x:e,y:t,upperWidth:i,lowerWidth:r,width:a,height:s,children:o}=n,c=q.useMemo(()=>({x:e,y:t,upperWidth:i,lowerWidth:r,width:a,height:s}),[e,t,i,r,a,s]);return q.createElement(hX.Provider,{value:c},o)},dX=()=>{var n=q.useContext(hX),e=aC();return n||(e?mL(e):void 0)},DAe=q.createContext(null),LAe=()=>{var n=q.useContext(DAe),e=hn(Hq);return n||e},kAe=n=>{var{value:e,formatter:t}=n,i=Ns(n.children)?e:n.children;return typeof t=="function"?t(i):i},yk=n=>n!=null&&typeof n=="function",UAe=(n,e)=>{var t=Yl(e-n),i=Math.min(Math.abs(e-n),360);return t*i},FAe=(n,e,t,i,r)=>{var{offset:a,className:s}=n,{cx:o,cy:c,innerRadius:f,outerRadius:h,startAngle:p,endAngle:v,clockWise:y}=r,_=(f+h)/2,E=UAe(p,v),S=E>=0?1:-1,w,I;switch(e){case"insideStart":w=p+S*a,I=y;break;case"insideEnd":w=v-S*a,I=!y;break;case"end":w=v+S*a,I=y;break;default:throw new Error("Unsupported position ".concat(e))}I=E<=0?I:!I;var P=is(o,c,_,w),D=is(o,c,_,w+(I?1:-1)*359),z="M".concat(P.x,",").concat(P.y,`
    A`).concat(_,",").concat(_,",0,1,").concat(I?0:1,`,
    `).concat(D.x,",").concat(D.y),k=Ns(n.id)?cx("recharts-radial-line-"):n.id;return q.createElement("text",ih({},i,{dominantBaseline:"central",className:rr("recharts-radial-bar-label",s)}),q.createElement("defs",null,q.createElement("path",{id:k,d:z})),q.createElement("textPath",{xlinkHref:"#".concat(k)},t))},zAe=(n,e,t)=>{var{cx:i,cy:r,innerRadius:a,outerRadius:s,startAngle:o,endAngle:c}=n,f=(o+c)/2;if(t==="outside"){var{x:h,y:p}=is(i,r,s+e,f);return{x:h,y:p,textAnchor:h>=i?"start":"end",verticalAnchor:"middle"}}if(t==="center")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(t==="centerTop")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"start"};if(t==="centerBottom")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"end"};var v=(a+s)/2,{x:y,y:_}=is(i,r,v,f);return{x:y,y:_,textAnchor:"middle",verticalAnchor:"middle"}},mE=n=>n!=null&&"cx"in n&&Zt(n.cx),BAe={angle:0,offset:5,zIndex:no.label,position:"middle",textBreakAll:!1};function VAe(n){if(!mE(n))return n;var{cx:e,cy:t,outerRadius:i}=n,r=i*2;return{x:e-i,y:t-i,width:r,upperWidth:r,lowerWidth:r,height:r}}function Ld(n){var e=pl(n,BAe),{viewBox:t,parentViewBox:i,position:r,value:a,children:s,content:o,className:c="",textBreakAll:f,labelRef:h}=e,p=LAe(),v=dX(),y=r==="center"?v:p??v,_,E,S;t==null?_=y:mE(t)?_=t:_=mL(t);var w=VAe(_);if(!_||Ns(a)&&Ns(s)&&!q.isValidElement(o)&&typeof o!="function")return null;var I=d_(d_({},e),{},{viewBox:_});if(q.isValidElement(o)){var{labelRef:P}=I,D=iV(I,MAe);return q.cloneElement(o,D)}if(typeof o=="function"){var{content:z}=I,k=iV(I,CAe);if(E=q.createElement(o,k),q.isValidElement(E))return E}else E=kAe(e);var U=ec(e);if(mE(_)){if(r==="insideStart"||r==="insideEnd"||r==="end")return FAe(e,r,E,U,_);S=zAe(_,e.offset,e.position)}else{if(!w)return null;var R=AAe({viewBox:w,position:r,offset:e.offset,parentViewBox:mE(i)?void 0:i});S=d_(d_({x:R.x,y:R.y,textAnchor:R.horizontalAnchor,verticalAnchor:R.verticalAnchor},R.width!==void 0?{width:R.width}:{}),R.height!==void 0?{height:R.height}:{})}return q.createElement(Rh,{zIndex:e.zIndex},q.createElement(vk,ih({ref:h,className:rr("recharts-label",c)},U,S,{textAnchor:yAe(U.textAnchor)?U.textAnchor:S.textAnchor,breakAll:f}),E))}Ld.displayName="Label";var jAe=(n,e,t)=>{if(!n)return null;var i={viewBox:e,labelRef:t};return n===!0?q.createElement(Ld,ih({key:"label-implicit"},i)):of(n)?q.createElement(Ld,ih({key:"label-implicit",value:n},i)):q.isValidElement(n)?n.type===Ld?q.cloneElement(n,d_({key:"label-implicit"},i)):q.createElement(Ld,ih({key:"label-implicit",content:n},i)):yk(n)?q.createElement(Ld,ih({key:"label-implicit",content:n},i)):n&&typeof n=="object"?q.createElement(Ld,ih({},n,{key:"label-implicit"},i)):null};function HAe(n){var{label:e,labelRef:t}=n,i=dX();return jAe(e,i,t)||null}var $P={},XP={},aV;function GAe(){return aV||(aV=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t[t.length-1]}n.last=e})(XP)),XP}var YP={},sV;function WAe(){return sV||(sV=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Array.isArray(t)?t:Array.from(t)}n.toArray=e})(YP)),YP}var oV;function qAe(){return oV||(oV=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=GAe(),t=WAe(),i=aL();function r(a){if(i.isArrayLike(a))return e.last(t.toArray(a))}n.last=r})($P)),$P}var KP,lV;function $Ae(){return lV||(lV=1,KP=qAe().last),KP}var XAe=$Ae();const YAe=Wc(XAe);var KAe=["valueAccessor"],ZAe=["dataKey","clockWise","id","textBreakAll","zIndex"];function xA(){return xA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},xA.apply(null,arguments)}function cV(n,e){if(n==null)return{};var t,i,r=QAe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function QAe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var JAe=n=>Array.isArray(n.value)?YAe(n.value):n.value,pX=q.createContext(void 0),eMe=pX.Provider,mX=q.createContext(void 0);mX.Provider;function tMe(){return q.useContext(pX)}function nMe(){return q.useContext(mX)}function gE(n){var{valueAccessor:e=JAe}=n,t=cV(n,KAe),{dataKey:i,clockWise:r,id:a,textBreakAll:s,zIndex:o}=t,c=cV(t,ZAe),f=tMe(),h=nMe(),p=f||h;return!p||!p.length?null:q.createElement(Rh,{zIndex:o??no.label},q.createElement(af,{className:"recharts-label-list"},p.map((v,y)=>{var _,E=Ns(i)?e(v,y):as(v.payload,i),S=Ns(a)?{}:{id:"".concat(a,"-").concat(y)};return q.createElement(Ld,xA({key:"label-".concat(y)},ec(v),c,S,{fill:(_=t.fill)!==null&&_!==void 0?_:v.fill,parentViewBox:v.parentViewBox,value:E,textBreakAll:s,viewBox:v.viewBox,index:y,zIndex:0}))})))}gE.displayName="LabelList";function iMe(n){var{label:e}=n;return e?e===!0?q.createElement(gE,{key:"labelList-implicit"}):q.isValidElement(e)||yk(e)?q.createElement(gE,{key:"labelList-implicit",content:e}):typeof e=="object"?q.createElement(gE,xA({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function qO(){return qO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},qO.apply(null,arguments)}var gX=n=>{var{cx:e,cy:t,r:i,className:r}=n,a=rr("recharts-dot",r);return Zt(e)&&Zt(t)&&Zt(i)?q.createElement("circle",qO({},Hc(n),rL(n),{className:a,cx:e,cy:t,r:i})):null},rMe={radiusAxis:{},angleAxis:{}},vX=Bo({name:"polarAxis",initialState:rMe,reducers:{addRadiusAxis(n,e){n.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(n,e){delete n.radiusAxis[e.payload.id]},addAngleAxis(n,e){n.angleAxis[e.payload.id]=e.payload},removeAngleAxis(n,e){delete n.angleAxis[e.payload.id]}}}),{addRadiusAxis:uOe,removeRadiusAxis:fOe,addAngleAxis:hOe,removeAngleAxis:dOe}=vX.actions,aMe=vX.reducer;function sMe(n){return n&&typeof n=="object"&&"className"in n&&typeof n.className=="string"?n.className:""}var yX=n=>n&&typeof n=="object"&&"clipDot"in n?!!n.clipDot:!0;function oMe(n){var{tooltipEntrySettings:e}=n,t=Na(),i=Vo(),r=q.useRef(null);return q.useLayoutEffect(()=>{i||(r.current===null?t(Uwe(e)):r.current!==e&&t(Fwe({prev:r.current,next:e})),r.current=e)},[e,t,i]),q.useLayoutEffect(()=>()=>{r.current&&(t(zwe(r.current)),r.current=null)},[t]),null}function lMe(n){var{legendPayload:e}=n,t=Na(),i=Vo(),r=q.useRef(null);return q.useLayoutEffect(()=>{i||(r.current===null?t(hbe(e)):r.current!==e&&t(dbe({prev:r.current,next:e})),r.current=e)},[t,i,e]),q.useLayoutEffect(()=>()=>{r.current&&(t(pbe(r.current)),r.current=null)},[t]),null}var ZP,cMe=()=>{var[n]=q.useState(()=>cx("uid-"));return n},uMe=(ZP=WV.useId)!==null&&ZP!==void 0?ZP:cMe;function fMe(n,e){var t=uMe();return e||(n?"".concat(n,"-").concat(t):t)}var hMe=q.createContext(void 0),dMe=n=>{var{id:e,type:t,children:i}=n,r=fMe("recharts-".concat(t),e);return q.createElement(hMe.Provider,{value:r},i(r))},pMe={cartesianItems:[],polarItems:[]},bX=Bo({name:"graphicalItems",initialState:pMe,reducers:{addCartesianGraphicalItem:{reducer(n,e){n.cartesianItems.push(e.payload)},prepare:fr()},replaceCartesianGraphicalItem:{reducer(n,e){var{prev:t,next:i}=e.payload,r=jc(n).cartesianItems.indexOf(t);r>-1&&(n.cartesianItems[r]=i)},prepare:fr()},removeCartesianGraphicalItem:{reducer(n,e){var t=jc(n).cartesianItems.indexOf(e.payload);t>-1&&n.cartesianItems.splice(t,1)},prepare:fr()},addPolarGraphicalItem:{reducer(n,e){n.polarItems.push(e.payload)},prepare:fr()},removePolarGraphicalItem:{reducer(n,e){var t=jc(n).polarItems.indexOf(e.payload);t>-1&&n.polarItems.splice(t,1)},prepare:fr()}}}),{addCartesianGraphicalItem:mMe,replaceCartesianGraphicalItem:gMe,removeCartesianGraphicalItem:vMe,addPolarGraphicalItem:pOe,removePolarGraphicalItem:mOe}=bX.actions,yMe=bX.reducer,bMe=n=>{var e=Na(),t=q.useRef(null);return q.useLayoutEffect(()=>{t.current===null?e(mMe(n)):t.current!==n&&e(gMe({prev:t.current,next:n})),t.current=n},[e,n]),q.useLayoutEffect(()=>()=>{t.current&&(e(vMe(t.current)),t.current=null)},[e]),null},_Me=q.memo(bMe),xMe=["points"];function uV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function QP(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uV(Object(t),!0).forEach(function(i){SMe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):uV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function SMe(n,e,t){return(e=wMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wMe(n){var e=EMe(n,"string");return typeof e=="symbol"?e:e+""}function EMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function SA(){return SA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},SA.apply(null,arguments)}function TMe(n,e){if(n==null)return{};var t,i,r=AMe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function AMe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function MMe(n){var{option:e,dotProps:t,className:i}=n;if(q.isValidElement(e))return q.cloneElement(e,t);if(typeof e=="function")return e(t);var r=rr(i,typeof e!="boolean"?e.className:""),a=t??{},{points:s}=a,o=TMe(a,xMe);return q.createElement(gX,SA({},o,{className:r}))}function CMe(n,e){return n==null?!1:e?!0:n.length===1}function IMe(n){var{points:e,dot:t,className:i,dotClassName:r,dataKey:a,baseProps:s,needClip:o,clipPathId:c,zIndex:f=no.scatter}=n;if(!CMe(e,t))return null;var h=yX(t),p=Rge(t),v=e.map((_,E)=>{var S,w,I=QP(QP(QP({r:3},s),p),{},{index:E,cx:(S=_.x)!==null&&S!==void 0?S:void 0,cy:(w=_.y)!==null&&w!==void 0?w:void 0,dataKey:a,value:_.value,payload:_.payload,points:e});return q.createElement(MMe,{key:"dot-".concat(E),option:t,dotProps:I,className:r})}),y={};return o&&c!=null&&(y.clipPath="url(#clipPath-".concat(h?"":"dots-").concat(c,")")),q.createElement(Rh,{zIndex:f},q.createElement(af,SA({className:i},y),v))}function fV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function hV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fV(Object(t),!0).forEach(function(i){RMe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):fV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function RMe(n,e,t){return(e=PMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function PMe(n){var e=NMe(n,"string");return typeof e=="symbol"?e:e+""}function NMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var _X=0,OMe={xAxis:{},yAxis:{},zAxis:{}},xX=Bo({name:"cartesianAxis",initialState:OMe,reducers:{addXAxis:{reducer(n,e){n.xAxis[e.payload.id]=e.payload},prepare:fr()},replaceXAxis:{reducer(n,e){var{prev:t,next:i}=e.payload;n.xAxis[t.id]!==void 0&&(t.id!==i.id&&delete n.xAxis[t.id],n.xAxis[i.id]=i)},prepare:fr()},removeXAxis:{reducer(n,e){delete n.xAxis[e.payload.id]},prepare:fr()},addYAxis:{reducer(n,e){n.yAxis[e.payload.id]=e.payload},prepare:fr()},replaceYAxis:{reducer(n,e){var{prev:t,next:i}=e.payload;n.yAxis[t.id]!==void 0&&(t.id!==i.id&&delete n.yAxis[t.id],n.yAxis[i.id]=i)},prepare:fr()},removeYAxis:{reducer(n,e){delete n.yAxis[e.payload.id]},prepare:fr()},addZAxis:{reducer(n,e){n.zAxis[e.payload.id]=e.payload},prepare:fr()},replaceZAxis:{reducer(n,e){var{prev:t,next:i}=e.payload;n.zAxis[t.id]!==void 0&&(t.id!==i.id&&delete n.zAxis[t.id],n.zAxis[i.id]=i)},prepare:fr()},removeZAxis:{reducer(n,e){delete n.zAxis[e.payload.id]},prepare:fr()},updateYAxisWidth(n,e){var{id:t,width:i}=e.payload,r=n.yAxis[t];if(r){var a,s=r.widthHistory||[];if(s.length===3&&s[0]===s[2]&&i===s[1]&&i!==r.width&&Math.abs(i-((a=s[0])!==null&&a!==void 0?a:0))<=1)return;var o=[...s,i].slice(-3);n.yAxis[t]=hV(hV({},r),{},{width:i,widthHistory:o})}}}}),{addXAxis:DMe,replaceXAxis:LMe,removeXAxis:kMe,addYAxis:UMe,replaceYAxis:FMe,removeYAxis:zMe,addZAxis:gOe,replaceZAxis:vOe,removeZAxis:yOe,updateYAxisWidth:BMe}=xX.actions,VMe=xX.reducer,jMe=Ye([os],n=>({top:n.top,bottom:n.bottom,left:n.left,right:n.right})),HMe=Ye([jMe,wh,Eh],(n,e,t)=>{if(!(!n||e==null||t==null))return{x:n.left,y:n.top,width:Math.max(0,e-n.left-n.right),height:Math.max(0,t-n.top-n.bottom)}}),bk=()=>hn(HMe),GMe=()=>hn(PEe);function dV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function JP(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dV(Object(t),!0).forEach(function(i){WMe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):dV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function WMe(n,e,t){return(e=qMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qMe(n){var e=$Me(n,"string");return typeof e=="symbol"?e:e+""}function $Me(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var XMe=n=>{var{point:e,childIndex:t,mainColor:i,activeDot:r,dataKey:a,clipPath:s}=n;if(r===!1||e.x==null||e.y==null)return null;var o={index:t,dataKey:a,cx:e.x,cy:e.y,r:4,fill:i??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},c=JP(JP(JP({},o),VM(r)),rL(r)),f;return q.isValidElement(r)?f=q.cloneElement(r,c):typeof r=="function"?f=r(c):f=q.createElement(gX,c),q.createElement(af,{className:"recharts-active-dot",clipPath:s},f)};function pV(n){var{points:e,mainColor:t,activeDot:i,itemDataKey:r,clipPath:a,zIndex:s=no.activeDot}=n,o=hn(Sx),c=GMe();if(e==null||c==null)return null;var f=e.find(h=>c.includes(h.payload));return Ns(f)?null:q.createElement(Rh,{zIndex:s},q.createElement(XMe,{point:f,childIndex:Number(o),mainColor:t,dataKey:r,activeDot:i,clipPath:a}))}var YMe=n=>{var{chartData:e}=n,t=Na(),i=Vo();return q.useEffect(()=>i?()=>{}:(t(V6(e)),()=>{t(V6(void 0))}),[e,t,i]),null},mV={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},SX=Bo({name:"brush",initialState:mV,reducers:{setBrushSettings(n,e){return e.payload==null?mV:e.payload}}}),{setBrushSettings:bOe}=SX.actions,KMe=SX.reducer;function ZMe(n){return(n%180+180)%180}var QMe=function(e){var{width:t,height:i}=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=ZMe(r),s=a*Math.PI/180,o=Math.atan(i/t),c=s>o&&s<Math.PI-o?i/Math.sin(s):t/Math.cos(s);return Math.abs(c)},JMe={dots:[],areas:[],lines:[]},wX=Bo({name:"referenceElements",initialState:JMe,reducers:{addDot:(n,e)=>{n.dots.push(e.payload)},removeDot:(n,e)=>{var t=jc(n).dots.findIndex(i=>i===e.payload);t!==-1&&n.dots.splice(t,1)},addArea:(n,e)=>{n.areas.push(e.payload)},removeArea:(n,e)=>{var t=jc(n).areas.findIndex(i=>i===e.payload);t!==-1&&n.areas.splice(t,1)},addLine:(n,e)=>{n.lines.push(e.payload)},removeLine:(n,e)=>{var t=jc(n).lines.findIndex(i=>i===e.payload);t!==-1&&n.lines.splice(t,1)}}}),{addDot:_Oe,removeDot:xOe,addArea:SOe,removeArea:wOe,addLine:EOe,removeLine:TOe}=wX.actions,eCe=wX.reducer,tCe=q.createContext(void 0),nCe=n=>{var{children:e}=n,[t]=q.useState("".concat(cx("recharts"),"-clip")),i=bk();if(i==null)return null;var{x:r,y:a,width:s,height:o}=i;return q.createElement(tCe.Provider,{value:t},q.createElement("defs",null,q.createElement("clipPath",{id:t},q.createElement("rect",{x:r,y:a,height:o,width:s}))),e)};function EX(n,e){if(e<1)return[];if(e===1)return n;for(var t=[],i=0;i<n.length;i+=e){var r=n[i];r!==void 0&&t.push(r)}return t}function iCe(n,e,t){var i={width:n.width+e.width,height:n.height+e.height};return QMe(i,t)}function rCe(n,e,t){var i=t==="width",{x:r,y:a,width:s,height:o}=n;return e===1?{start:i?r:a,end:i?r+s:a+o}:{start:i?r+s:a+o,end:i?r:a}}function Ex(n,e,t,i,r){if(n*e<n*i||n*e>n*r)return!1;var a=t();return n*(e-n*a/2-i)>=0&&n*(e+n*a/2-r)<=0}function aCe(n,e){return EX(n,e+1)}function sCe(n,e,t,i,r){for(var a=(i||[]).slice(),{start:s,end:o}=e,c=0,f=1,h=s,p=function(){var _=i==null?void 0:i[c];if(_===void 0)return{v:EX(i,f)};var E=c,S,w=()=>(S===void 0&&(S=t(_,E)),S),I=_.coordinate,P=c===0||Ex(n,I,w,h,o);P||(c=0,h=s,f+=1),P&&(h=I+n*(w()/2+r),c+=f)},v;f<=a.length;)if(v=p(),v)return v.v;return[]}function oCe(n,e,t,i,r){var a=(i||[]).slice(),s=a.length;if(s===0)return[];for(var{start:o,end:c}=e,f=1;f<=s;f++){for(var h=(s-1)%f,p=o,v=!0,y=function(){var D=i[E];if(D==null)return 0;var z=E,k,U=()=>(k===void 0&&(k=t(D,z)),k),R=D.coordinate,M=E===h||Ex(n,R,U,p,c);if(!M)return v=!1,1;M&&(p=R+n*(U()/2+r))},_,E=h;E<s&&(_=y(),!(_!==0&&_===1));E+=f);if(v){for(var S=[],w=h;w<s;w+=f){var I=i[w];I!=null&&S.push(I)}return S}}return[]}function gV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Ts(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gV(Object(t),!0).forEach(function(i){lCe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function lCe(n,e,t){return(e=cCe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cCe(n){var e=uCe(n,"string");return typeof e=="symbol"?e:e+""}function uCe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function fCe(n,e,t,i,r){for(var a=(i||[]).slice(),s=a.length,{start:o}=e,{end:c}=e,f=function(v){var y=a[v];if(y==null)return 1;var _=y,E,S=()=>(E===void 0&&(E=t(y,v)),E);if(v===s-1){var w=n*(_.coordinate+n*S()/2-c);a[v]=_=Ts(Ts({},_),{},{tickCoord:w>0?_.coordinate-w*n:_.coordinate})}else a[v]=_=Ts(Ts({},_),{},{tickCoord:_.coordinate});if(_.tickCoord!=null){var I=Ex(n,_.tickCoord,S,o,c);I&&(c=_.tickCoord-n*(S()/2+r),a[v]=Ts(Ts({},_),{},{isShow:!0}))}},h=s-1;h>=0;h--)f(h);return a}function hCe(n,e,t,i,r,a){var s=(i||[]).slice(),o=s.length,{start:c,end:f}=e;if(a){var h=i[o-1];if(h!=null){var p=t(h,o-1),v=n*(h.coordinate+n*p/2-f);if(s[o-1]=h=Ts(Ts({},h),{},{tickCoord:v>0?h.coordinate-v*n:h.coordinate}),h.tickCoord!=null){var y=Ex(n,h.tickCoord,()=>p,c,f);y&&(f=h.tickCoord-n*(p/2+r),s[o-1]=Ts(Ts({},h),{},{isShow:!0}))}}}for(var _=a?o-1:o,E=function(I){var P=s[I];if(P==null)return 1;var D=P,z,k=()=>(z===void 0&&(z=t(P,I)),z);if(I===0){var U=n*(D.coordinate-n*k()/2-c);s[I]=D=Ts(Ts({},D),{},{tickCoord:U<0?D.coordinate-U*n:D.coordinate})}else s[I]=D=Ts(Ts({},D),{},{tickCoord:D.coordinate});if(D.tickCoord!=null){var R=Ex(n,D.tickCoord,k,c,f);R&&(c=D.tickCoord+n*(k()/2+r),s[I]=Ts(Ts({},D),{},{isShow:!0}))}},S=0;S<_;S++)E(S);return s}function _k(n,e,t){var{tick:i,ticks:r,viewBox:a,minTickGap:s,orientation:o,interval:c,tickFormatter:f,unit:h,angle:p}=n;if(!r||!r.length||!i)return[];if(Zt(c)||Qx.isSsr){var v;return(v=aCe(r,Zt(c)?c:0))!==null&&v!==void 0?v:[]}var y=[],_=o==="top"||o==="bottom"?"width":"height",E=h&&_==="width"?P_(h,{fontSize:e,letterSpacing:t}):{width:0,height:0},S=(z,k)=>{var U=typeof f=="function"?f(z.value,k):z.value;return _==="width"?iCe(P_(U,{fontSize:e,letterSpacing:t}),E,p):P_(U,{fontSize:e,letterSpacing:t})[_]},w=r[0],I=r[1],P=r.length>=2&&w!=null&&I!=null?Yl(I.coordinate-w.coordinate):1,D=rCe(a,P,_);return c==="equidistantPreserveStart"?sCe(P,D,S,r,s):c==="equidistantPreserveEnd"?oCe(P,D,S,r,s):(c==="preserveStart"||c==="preserveStartEnd"?y=hCe(P,D,S,r,s,c==="preserveStartEnd"):y=fCe(P,D,S,r,s),y.filter(z=>z.isShow))}var dCe=n=>{var{ticks:e,label:t,labelGapWithTick:i=5,tickSize:r=0,tickMargin:a=0}=n,s=0;if(e){Array.from(e).forEach(h=>{if(h){var p=h.getBoundingClientRect();p.width>s&&(s=p.width)}});var o=t?t.getBoundingClientRect().width:0,c=r+a,f=s+c+o+(t?i:0);return Math.round(f)}return 0},pCe=["axisLine","width","height","className","hide","ticks","axisType"];function mCe(n,e){if(n==null)return{};var t,i,r=gCe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function gCe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function bg(){return bg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},bg.apply(null,arguments)}function vV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Pr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vV(Object(t),!0).forEach(function(i){vCe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function vCe(n,e,t){return(e=yCe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function yCe(n){var e=bCe(n,"string");return typeof e=="symbol"?e:e+""}function bCe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var fh={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:no.axis};function _Ce(n){var{x:e,y:t,width:i,height:r,orientation:a,mirror:s,axisLine:o,otherSvgProps:c}=n;if(!o)return null;var f=Pr(Pr(Pr({},c),Hc(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var h=+(a==="top"&&!s||a==="bottom"&&s);f=Pr(Pr({},f),{},{x1:e,y1:t+h*r,x2:e+i,y2:t+h*r})}else{var p=+(a==="left"&&!s||a==="right"&&s);f=Pr(Pr({},f),{},{x1:e+p*i,y1:t,x2:e+p*i,y2:t+r})}return q.createElement("line",bg({},f,{className:rr("recharts-cartesian-axis-line",GM(o,"className"))}))}function xCe(n,e,t,i,r,a,s,o,c){var f,h,p,v,y,_,E=o?-1:1,S=n.tickSize||s,w=Zt(n.tickCoord)?n.tickCoord:n.coordinate;switch(a){case"top":f=h=n.coordinate,v=t+ +!o*r,p=v-E*S,_=p-E*c,y=w;break;case"left":p=v=n.coordinate,h=e+ +!o*i,f=h-E*S,y=f-E*c,_=w;break;case"right":p=v=n.coordinate,h=e+ +o*i,f=h+E*S,y=f+E*c,_=w;break;default:f=h=n.coordinate,v=t+ +o*r,p=v+E*S,_=p+E*c,y=w;break}return{line:{x1:f,y1:p,x2:h,y2:v},tick:{x:y,y:_}}}function SCe(n,e){switch(n){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function wCe(n,e){switch(n){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function ECe(n){var{option:e,tickProps:t,value:i}=n,r,a=rr(t.className,"recharts-cartesian-axis-tick-value");if(q.isValidElement(e))r=q.cloneElement(e,Pr(Pr({},t),{},{className:a}));else if(typeof e=="function")r=e(Pr(Pr({},t),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=rr(s,sMe(e))),r=q.createElement(vk,bg({},t,{className:s}),i)}return r}var TCe=q.forwardRef((n,e)=>{var{ticks:t=[],tick:i,tickLine:r,stroke:a,tickFormatter:s,unit:o,padding:c,tickTextProps:f,orientation:h,mirror:p,x:v,y,width:_,height:E,tickSize:S,tickMargin:w,fontSize:I,letterSpacing:P,getTicksConfig:D,events:z,axisType:k}=n,U=_k(Pr(Pr({},D),{},{ticks:t}),I,P),R=SCe(h,p),M=wCe(h,p),L=Hc(D),B=VM(i),V={};typeof r=="object"&&(V=r);var j=Pr(Pr({},L),{},{fill:"none"},V),Z=U.map($=>Pr({entry:$},xCe($,v,y,_,E,h,S,p,w))),J=Z.map($=>{var{entry:ae,line:le}=$;return q.createElement(af,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ae.value,"-").concat(ae.coordinate,"-").concat(ae.tickCoord)},r&&q.createElement("line",bg({},j,le,{className:rr("recharts-cartesian-axis-tick-line",GM(r,"className"))})))}),G=Z.map(($,ae)=>{var le,ue,{entry:Q,tick:re}=$,ye=Pr(Pr(Pr(Pr({verticalAnchor:M},L),{},{textAnchor:R,stroke:"none",fill:a},re),{},{index:ae,payload:Q,visibleTicksCount:U.length,tickFormatter:s,padding:c},f),{},{angle:(le=(ue=f==null?void 0:f.angle)!==null&&ue!==void 0?ue:L.angle)!==null&&le!==void 0?le:0}),de=Pr(Pr({},ye),B);return q.createElement(af,bg({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Q.value,"-").concat(Q.coordinate,"-").concat(Q.tickCoord)},h0e(z,Q,ae)),i&&q.createElement(ECe,{option:i,tickProps:de,value:"".concat(typeof s=="function"?s(Q.value,ae):Q.value).concat(o||"")}))});return q.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(k,"-ticks")},G.length>0&&q.createElement(Rh,{zIndex:no.label},q.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(k,"-tick-labels"),ref:e},G)),J.length>0&&q.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(k,"-tick-lines")},J))}),ACe=q.forwardRef((n,e)=>{var{axisLine:t,width:i,height:r,className:a,hide:s,ticks:o,axisType:c}=n,f=mCe(n,pCe),[h,p]=q.useState(""),[v,y]=q.useState(""),_=q.useRef(null);q.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var S;return dCe({ticks:_.current,label:(S=n.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:n.tickSize,tickMargin:n.tickMargin})}}));var E=q.useCallback(S=>{if(S){var w=S.getElementsByClassName("recharts-cartesian-axis-tick-value");_.current=w;var I=w[0];if(I){var P=window.getComputedStyle(I),D=P.fontSize,z=P.letterSpacing;(D!==h||z!==v)&&(p(D),y(z))}}},[h,v]);return s||i!=null&&i<=0||r!=null&&r<=0?null:q.createElement(Rh,{zIndex:n.zIndex},q.createElement(af,{className:rr("recharts-cartesian-axis",a)},q.createElement(_Ce,{x:n.x,y:n.y,width:i,height:r,orientation:n.orientation,mirror:n.mirror,axisLine:t,otherSvgProps:Hc(n)}),q.createElement(TCe,{ref:E,axisType:c,events:f,fontSize:h,getTicksConfig:n,height:n.height,letterSpacing:v,mirror:n.mirror,orientation:n.orientation,padding:n.padding,stroke:n.stroke,tick:n.tick,tickFormatter:n.tickFormatter,tickLine:n.tickLine,tickMargin:n.tickMargin,tickSize:n.tickSize,tickTextProps:n.tickTextProps,ticks:o,unit:n.unit,width:n.width,x:n.x,y:n.y}),q.createElement(OAe,{x:n.x,y:n.y,width:n.width,height:n.height,lowerWidth:n.width,upperWidth:n.width},q.createElement(HAe,{label:n.label,labelRef:n.labelRef}),n.children)))}),xk=q.forwardRef((n,e)=>{var t=pl(n,fh);return q.createElement(ACe,bg({},t,{ref:e}))});xk.displayName="CartesianAxis";var MCe=["x1","y1","x2","y2","key"],CCe=["offset"],ICe=["xAxisId","yAxisId"],RCe=["xAxisId","yAxisId"];function yV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Cs(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yV(Object(t),!0).forEach(function(i){PCe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function PCe(n,e,t){return(e=NCe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NCe(n){var e=OCe(n,"string");return typeof e=="symbol"?e:e+""}function OCe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Hm(){return Hm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Hm.apply(null,arguments)}function wA(n,e){if(n==null)return{};var t,i,r=DCe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function DCe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var LCe=n=>{var{fill:e}=n;if(!e||e==="none")return null;var{fillOpacity:t,x:i,y:r,width:a,height:s,ry:o}=n;return q.createElement("rect",{x:i,y:r,ry:o,width:a,height:s,stroke:"none",fill:e,fillOpacity:t,className:"recharts-cartesian-grid-bg"})};function TX(n){var{option:e,lineItemProps:t}=n,i;if(q.isValidElement(e))i=q.cloneElement(e,t);else if(typeof e=="function")i=e(t);else{var r,{x1:a,y1:s,x2:o,y2:c,key:f}=t,h=wA(t,MCe),p=(r=Hc(h))!==null&&r!==void 0?r:{},{offset:v}=p,y=wA(p,CCe);i=q.createElement("line",Hm({},y,{x1:a,y1:s,x2:o,y2:c,fill:"none",key:f}))}return i}function kCe(n){var{x:e,width:t,horizontal:i=!0,horizontalPoints:r}=n;if(!i||!r||!r.length)return null;var{xAxisId:a,yAxisId:s}=n,o=wA(n,ICe),c=r.map((f,h)=>{var p=Cs(Cs({},o),{},{x1:e,y1:f,x2:e+t,y2:f,key:"line-".concat(h),index:h});return q.createElement(TX,{key:"line-".concat(h),option:i,lineItemProps:p})});return q.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function UCe(n){var{y:e,height:t,vertical:i=!0,verticalPoints:r}=n;if(!i||!r||!r.length)return null;var{xAxisId:a,yAxisId:s}=n,o=wA(n,RCe),c=r.map((f,h)=>{var p=Cs(Cs({},o),{},{x1:f,y1:e,x2:f,y2:e+t,key:"line-".concat(h),index:h});return q.createElement(TX,{option:i,lineItemProps:p,key:"line-".concat(h)})});return q.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function FCe(n){var{horizontalFill:e,fillOpacity:t,x:i,y:r,width:a,height:s,horizontalPoints:o,horizontal:c=!0}=n;if(!c||!e||!e.length||o==null)return null;var f=o.map(p=>Math.round(p+r-r)).sort((p,v)=>p-v);r!==f[0]&&f.unshift(0);var h=f.map((p,v)=>{var y=f[v+1],_=y==null,E=_?r+s-p:y-p;if(E<=0)return null;var S=v%e.length;return q.createElement("rect",{key:"react-".concat(v),y:p,x:i,height:E,width:a,stroke:"none",fill:e[S],fillOpacity:t,className:"recharts-cartesian-grid-bg"})});return q.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function zCe(n){var{vertical:e=!0,verticalFill:t,fillOpacity:i,x:r,y:a,width:s,height:o,verticalPoints:c}=n;if(!e||!t||!t.length)return null;var f=c.map(p=>Math.round(p+r-r)).sort((p,v)=>p-v);r!==f[0]&&f.unshift(0);var h=f.map((p,v)=>{var y=f[v+1],_=y==null,E=_?r+s-p:y-p;if(E<=0)return null;var S=v%t.length;return q.createElement("rect",{key:"react-".concat(v),x:p,y:a,width:E,height:o,stroke:"none",fill:t[S],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return q.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var BCe=(n,e)=>{var{xAxis:t,width:i,height:r,offset:a}=n;return vW(_k(Cs(Cs(Cs({},fh),t),{},{ticks:yW(t),viewBox:{x:0,y:0,width:i,height:r}})),a.left,a.left+a.width,e)},VCe=(n,e)=>{var{yAxis:t,width:i,height:r,offset:a}=n;return vW(_k(Cs(Cs(Cs({},fh),t),{},{ticks:yW(t),viewBox:{x:0,y:0,width:i,height:r}})),a.top,a.top+a.height,e)},jCe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:no.grid};function AX(n){var e=AW(),t=MW(),i=TW(),r=Cs(Cs({},pl(n,jCe)),{},{x:Zt(n.x)?n.x:i.left,y:Zt(n.y)?n.y:i.top,width:Zt(n.width)?n.width:i.width,height:Zt(n.height)?n.height:i.height}),{xAxisId:a,yAxisId:s,x:o,y:c,width:f,height:h,syncWithTicks:p,horizontalValues:v,verticalValues:y}=r,_=Vo(),E=hn(M=>I6(M,"xAxis",a,_)),S=hn(M=>I6(M,"yAxis",s,_));if(!lf(f)||!lf(h)||!Zt(o)||!Zt(c))return null;var w=r.verticalCoordinatesGenerator||BCe,I=r.horizontalCoordinatesGenerator||VCe,{horizontalPoints:P,verticalPoints:D}=r;if((!P||!P.length)&&typeof I=="function"){var z=v&&v.length,k=I({yAxis:S?Cs(Cs({},S),{},{ticks:z?v:S.ticks}):void 0,width:e??f,height:t??h,offset:i},z?!0:p);ZT(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(P=k)}if((!D||!D.length)&&typeof w=="function"){var U=y&&y.length,R=w({xAxis:E?Cs(Cs({},E),{},{ticks:U?y:E.ticks}):void 0,width:e??f,height:t??h,offset:i},U?!0:p);ZT(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(D=R)}return q.createElement(Rh,{zIndex:r.zIndex},q.createElement("g",{className:"recharts-cartesian-grid"},q.createElement(LCe,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),q.createElement(FCe,Hm({},r,{horizontalPoints:P})),q.createElement(zCe,Hm({},r,{verticalPoints:D})),q.createElement(kCe,Hm({},r,{offset:i,horizontalPoints:P,xAxis:E,yAxis:S})),q.createElement(UCe,Hm({},r,{offset:i,verticalPoints:D,xAxis:E,yAxis:S}))))}AX.displayName="CartesianGrid";var HCe={},MX=Bo({name:"errorBars",initialState:HCe,reducers:{addErrorBar:(n,e)=>{var{itemId:t,errorBar:i}=e.payload;n[t]||(n[t]=[]),n[t].push(i)},replaceErrorBar:(n,e)=>{var{itemId:t,prev:i,next:r}=e.payload;n[t]&&(n[t]=n[t].map(a=>a.dataKey===i.dataKey&&a.direction===i.direction?r:a))},removeErrorBar:(n,e)=>{var{itemId:t,errorBar:i}=e.payload;n[t]&&(n[t]=n[t].filter(r=>r.dataKey!==i.dataKey||r.direction!==i.direction))}}}),{addErrorBar:AOe,replaceErrorBar:MOe,removeErrorBar:COe}=MX.actions,GCe=MX.reducer;function CX(n,e){var t,i,r=hn(f=>Mh(f,n)),a=hn(f=>Ch(f,e)),s=(t=r==null?void 0:r.allowDataOverflow)!==null&&t!==void 0?t:Ma.allowDataOverflow,o=(i=a==null?void 0:a.allowDataOverflow)!==null&&i!==void 0?i:Ca.allowDataOverflow,c=s||o;return{needClip:c,needClipX:s,needClipY:o}}function WCe(n){var{xAxisId:e,yAxisId:t,clipPathId:i}=n,r=bk(),{needClipX:a,needClipY:s,needClip:o}=CX(e,t);if(!o||!r)return null;var{x:c,y:f,width:h,height:p}=r;return q.createElement("clipPath",{id:"clipPath-".concat(i)},q.createElement("rect",{x:a?c:c-h/2,y:s?f:f-p/2,width:a?h:h*2,height:s?p:p*2}))}function qCe(n){var e=VM(n),t=3,i=2;if(e!=null){var{r,strokeWidth:a}=e,s=Number(r),o=Number(a);return(Number.isNaN(s)||s<0)&&(s=t),(Number.isNaN(o)||o<0)&&(o=i),{r:s,strokeWidth:o}}return{r:t,strokeWidth:i}}var eN={exports:{}},tN={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bV;function $Ce(){if(bV)return tN;bV=1;var n=Kv();function e(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var t=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,r=n.useRef,a=n.useEffect,s=n.useMemo,o=n.useDebugValue;return tN.useSyncExternalStoreWithSelector=function(c,f,h,p,v){var y=r(null);if(y.current===null){var _={hasValue:!1,value:null};y.current=_}else _=y.current;y=s(function(){function S(z){if(!w){if(w=!0,I=z,z=p(z),v!==void 0&&_.hasValue){var k=_.value;if(v(k,z))return P=k}return P=z}if(k=P,t(I,z))return k;var U=p(z);return v!==void 0&&v(k,U)?(I=z,k):(I=z,P=U)}var w=!1,I,P,D=h===void 0?null:h;return[function(){return S(f())},D===null?void 0:function(){return S(D())}]},[f,h,p,v]);var E=i(c,y[0],y[1]);return a(function(){_.hasValue=!0,_.value=E},[E]),o(E),E},tN}var _V;function XCe(){return _V||(_V=1,eN.exports=$Ce()),eN.exports}XCe();function YCe(n){n()}function KCe(){let n=null,e=null;return{clear(){n=null,e=null},notify(){YCe(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const r=e={callback:t,next:null,prev:e};return r.prev?r.prev.next=r:n=r,function(){!i||n===null||(i=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:n=r.next)}}}}var xV={notify(){},get:()=>[]};function ZCe(n,e){let t,i=xV,r=0,a=!1;function s(E){h();const S=i.subscribe(E);let w=!1;return()=>{w||(w=!0,S(),p())}}function o(){i.notify()}function c(){_.onStateChange&&_.onStateChange()}function f(){return a}function h(){r++,t||(t=n.subscribe(c),i=KCe())}function p(){r--,t&&r===0&&(t(),t=void 0,i.clear(),i=xV)}function v(){a||(a=!0,h())}function y(){a&&(a=!1,p())}const _={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:f,trySubscribe:v,tryUnsubscribe:y,getListeners:()=>i};return _}var QCe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",JCe=QCe(),eIe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",tIe=eIe(),nIe=()=>JCe||tIe?q.useLayoutEffect:q.useEffect,iIe=nIe();function SV(n,e){return n===e?n!==0||e!==0||1/n===1/e:n!==n&&e!==e}function rIe(n,e){if(SV(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!SV(n[t[r]],e[t[r]]))return!1;return!0}var nN=Symbol.for("react-redux-context"),iN=typeof globalThis<"u"?globalThis:{};function aIe(){if(!q.createContext)return{};const n=iN[nN]??(iN[nN]=new Map);let e=n.get(q.createContext);return e||(e=q.createContext(null),n.set(q.createContext,e)),e}var sIe=aIe();function oIe(n){const{children:e,context:t,serverState:i,store:r}=n,a=q.useMemo(()=>{const c=ZCe(r);return{store:r,subscription:c,getServerState:i?()=>i:void 0}},[r,i]),s=q.useMemo(()=>r.getState(),[r]);iIe(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const o=t||sIe;return q.createElement(o.Provider,{value:a},e)}var lIe=oIe,cIe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function uIe(n,e){return n==null&&e==null?!0:typeof n=="number"&&typeof e=="number"?n===e||n!==n&&e!==e:n===e}function Sk(n,e){var t=new Set([...Object.keys(n),...Object.keys(e)]);for(var i of t)if(cIe.has(i)){if(n[i]==null&&e[i]==null)continue;if(!rIe(n[i],e[i]))return!1}else if(!uIe(n[i],e[i]))return!1;return!0}function wk(n,e){var t,i;return(t=(i=n.graphicalItems.cartesianItems.find(r=>r.id===e))===null||i===void 0?void 0:i.xAxisId)!==null&&t!==void 0?t:_X}function Ek(n,e){var t,i;return(t=(i=n.graphicalItems.cartesianItems.find(r=>r.id===e))===null||i===void 0?void 0:i.yAxisId)!==null&&t!==void 0?t:_X}var IX=(n,e,t)=>C$(n,"xAxis",wk(n,e),t),RX=(n,e,t)=>M$(n,"xAxis",wk(n,e),t),PX=(n,e,t)=>C$(n,"yAxis",Ek(n,e),t),NX=(n,e,t)=>M$(n,"yAxis",Ek(n,e),t),fIe=Ye([dr,IX,PX,RX,NX],(n,e,t,i,r)=>df(n,"xAxis")?KT(e,i,!1):KT(t,r,!1)),hIe=(n,e)=>e,OX=Ye([Yq,hIe],(n,e)=>n.filter(t=>t.type==="area").find(t=>t.id===e)),DX=n=>{var e=dr(n),t=df(e,"xAxis");return t?"yAxis":"xAxis"},dIe=(n,e)=>{var t=DX(n);return t==="yAxis"?Ek(n,e):wk(n,e)},pIe=(n,e,t)=>r$(n,DX(n),dIe(n,e),t),mIe=Ye([OX,pIe],(n,e)=>{var t;if(!(n==null||e==null)){var{stackId:i}=n,r=KL(n);if(!(i==null||r==null)){var a=(t=e[i])===null||t===void 0?void 0:t.stackedData,s=a==null?void 0:a.find(o=>o.key===r);if(s!=null)return s.map(o=>[o[0],o[1]])}}}),gIe=Ye([dr,IX,PX,RX,NX,mIe,mSe,fIe,OX,ESe],(n,e,t,i,r,a,s,o,c,f)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:v}=s;if(!(c==null||n!=="horizontal"&&n!=="vertical"||e==null||t==null||i==null||r==null||i.length===0||r.length===0||o==null)){var{data:y}=c,_;if(y&&y.length>0?_=y:_=h==null?void 0:h.slice(p,v+1),_!=null)return LIe({layout:n,xAxis:e,yAxis:t,xAxisTicks:i,yAxisTicks:r,dataStartIndex:p,areaSettings:c,stackedData:a,displayedData:_,chartBaseValue:f,bandSize:o})}}),vIe=["id"],yIe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function tg(){return tg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},tg.apply(null,arguments)}function LX(n,e){if(n==null)return{};var t,i,r=bIe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function bIe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function wV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function dv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wV(Object(t),!0).forEach(function(i){_Ie(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):wV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function _Ie(n,e,t){return(e=xIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xIe(n){var e=SIe(n,"string");return typeof e=="symbol"?e:e+""}function SIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function EA(n,e){return n&&n!=="none"?n:e}var wIe=n=>{var{dataKey:e,name:t,stroke:i,fill:r,legendType:a,hide:s}=n;return[{inactive:s,dataKey:e,type:a,color:EA(i,r),value:bW(t,e),payload:n}]},EIe=q.memo(n=>{var{dataKey:e,data:t,stroke:i,strokeWidth:r,fill:a,name:s,hide:o,unit:c,tooltipType:f,id:h}=n,p={dataDefinedOnItem:t,getPosition:ly,settings:{stroke:i,strokeWidth:r,fill:a,dataKey:e,nameKey:void 0,name:bW(s,e),hide:o,type:f,color:EA(i,a),unit:c,graphicalItemId:h}};return q.createElement(oMe,{tooltipEntrySettings:p})});function TIe(n){var{clipPathId:e,points:t,props:i}=n,{needClip:r,dot:a,dataKey:s}=i,o=Hc(i);return q.createElement(IMe,{points:t,dot:a,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:s,baseProps:o,needClip:r,clipPathId:e})}function AIe(n){var{showLabels:e,children:t,points:i}=n,r=i.map(a=>{var s,o,c={x:(s=a.x)!==null&&s!==void 0?s:0,y:(o=a.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return dv(dv({},c),{},{value:a.value,payload:a.payload,parentViewBox:void 0,viewBox:c,fill:void 0})});return q.createElement(eMe,{value:e?r:void 0},t)}function EV(n){var{points:e,baseLine:t,needClip:i,clipPathId:r,props:a}=n,{layout:s,type:o,stroke:c,connectNulls:f,isRange:h}=a,{id:p}=a,v=LX(a,vIe),y=Hc(v),_=ec(v);return q.createElement(q.Fragment,null,(e==null?void 0:e.length)>1&&q.createElement(af,{clipPath:i?"url(#clipPath-".concat(r,")"):void 0},q.createElement(dE,tg({},_,{id:p,points:e,connectNulls:f,type:o,baseLine:t,layout:s,stroke:"none",className:"recharts-area-area"})),c!=="none"&&q.createElement(dE,tg({},y,{className:"recharts-area-curve",layout:s,type:o,connectNulls:f,fill:"none",points:e})),c!=="none"&&h&&q.createElement(dE,tg({},y,{className:"recharts-area-curve",layout:s,type:o,connectNulls:f,fill:"none",points:t}))),q.createElement(TIe,{points:e,props:v,clipPathId:r}))}function MIe(n){var e,t,{alpha:i,baseLine:r,points:a,strokeWidth:s}=n,o=(e=a[0])===null||e===void 0?void 0:e.y,c=(t=a[a.length-1])===null||t===void 0?void 0:t.y;if(!ni(o)||!ni(c))return null;var f=i*Math.abs(o-c),h=Math.max(...a.map(p=>p.x||0));return Zt(r)?h=Math.max(r,h):r&&Array.isArray(r)&&r.length&&(h=Math.max(...r.map(p=>p.x||0),h)),Zt(h)?q.createElement("rect",{x:0,y:o<c?o:o-f,width:h+(s?parseInt("".concat(s),10):1),height:Math.floor(f)}):null}function CIe(n){var e,t,{alpha:i,baseLine:r,points:a,strokeWidth:s}=n,o=(e=a[0])===null||e===void 0?void 0:e.x,c=(t=a[a.length-1])===null||t===void 0?void 0:t.x;if(!ni(o)||!ni(c))return null;var f=i*Math.abs(o-c),h=Math.max(...a.map(p=>p.y||0));return Zt(r)?h=Math.max(r,h):r&&Array.isArray(r)&&r.length&&(h=Math.max(...r.map(p=>p.y||0),h)),Zt(h)?q.createElement("rect",{x:o<c?o:o-f,y:0,width:f,height:Math.floor(h+(s?parseInt("".concat(s),10):1))}):null}function IIe(n){var{alpha:e,layout:t,points:i,baseLine:r,strokeWidth:a}=n;return t==="vertical"?q.createElement(MIe,{alpha:e,points:i,baseLine:r,strokeWidth:a}):q.createElement(CIe,{alpha:e,points:i,baseLine:r,strokeWidth:a})}function RIe(n){var{needClip:e,clipPathId:t,props:i,previousPointsRef:r,previousBaselineRef:a}=n,{points:s,baseLine:o,isAnimationActive:c,animationBegin:f,animationDuration:h,animationEasing:p,onAnimationStart:v,onAnimationEnd:y}=i,_=q.useMemo(()=>({points:s,baseLine:o}),[s,o]),E=VW(_,"recharts-area-"),S=gL(),[w,I]=q.useState(!1),P=!w,D=q.useCallback(()=>{typeof y=="function"&&y(),I(!1)},[y]),z=q.useCallback(()=>{typeof v=="function"&&v(),I(!0)},[v]);if(S==null)return null;var k=r.current,U=a.current;return q.createElement(AIe,{showLabels:P,points:s},i.children,q.createElement(BW,{animationId:E,begin:f,duration:h,isActive:c,easing:p,onAnimationEnd:D,onAnimationStart:z,key:E},R=>{if(k){var M=k.length/s.length,L=R===1?s:s.map((V,j)=>{var Z=Math.floor(j*M);if(k[Z]){var J=k[Z];return dv(dv({},V),{},{x:Du(J.x,V.x,R),y:Du(J.y,V.y,R)})}return V}),B;return Zt(o)?B=Du(U,o,R):Ns(o)||sf(o)?B=Du(U,0,R):B=o.map((V,j)=>{var Z=Math.floor(j*M);if(Array.isArray(U)&&U[Z]){var J=U[Z];return dv(dv({},V),{},{x:Du(J.x,V.x,R),y:Du(J.y,V.y,R)})}return V}),R>0&&(r.current=L,a.current=B),q.createElement(EV,{points:L,baseLine:B,needClip:e,clipPathId:t,props:i})}return R>0&&(r.current=s,a.current=o),q.createElement(af,null,c&&q.createElement("defs",null,q.createElement("clipPath",{id:"animationClipPath-".concat(t)},q.createElement(IIe,{alpha:R,points:s,baseLine:o,layout:S,strokeWidth:i.strokeWidth}))),q.createElement(af,{clipPath:"url(#animationClipPath-".concat(t,")")},q.createElement(EV,{points:s,baseLine:o,needClip:e,clipPathId:t,props:i})))}),q.createElement(iMe,{label:i.label}))}function PIe(n){var{needClip:e,clipPathId:t,props:i}=n,r=q.useRef(null),a=q.useRef();return q.createElement(RIe,{needClip:e,clipPathId:t,props:i,previousPointsRef:r,previousBaselineRef:a})}class NIe extends q.PureComponent{render(){var{hide:e,dot:t,points:i,className:r,top:a,left:s,needClip:o,xAxisId:c,yAxisId:f,width:h,height:p,id:v,baseLine:y,zIndex:_}=this.props;if(e)return null;var E=rr("recharts-area",r),S=v,{r:w,strokeWidth:I}=qCe(t),P=yX(t),D=w*2+I,z=o?"url(#clipPath-".concat(P?"":"dots-").concat(S,")"):void 0;return q.createElement(Rh,{zIndex:_},q.createElement(af,{className:E},o&&q.createElement("defs",null,q.createElement(WCe,{clipPathId:S,xAxisId:c,yAxisId:f}),!P&&q.createElement("clipPath",{id:"clipPath-dots-".concat(S)},q.createElement("rect",{x:s-D/2,y:a-D/2,width:h+D,height:p+D}))),q.createElement(PIe,{needClip:o,clipPathId:S,props:this.props})),q.createElement(pV,{points:i,mainColor:EA(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:z}),this.props.isRange&&Array.isArray(y)&&q.createElement(pV,{points:y,mainColor:EA(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:z}))}}var kX={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:no.area};function OIe(n){var e,t=pl(n,kX),{activeDot:i,animationBegin:r,animationDuration:a,animationEasing:s,connectNulls:o,dot:c,fill:f,fillOpacity:h,hide:p,isAnimationActive:v,legendType:y,stroke:_,xAxisId:E,yAxisId:S}=t,w=LX(t,yIe),I=cy(),P=K$(),{needClip:D}=CX(E,S),z=Vo(),{points:k,isRange:U,baseLine:R}=(e=hn(Z=>gIe(Z,n.id,z)))!==null&&e!==void 0?e:{},M=bk();if(I!=="horizontal"&&I!=="vertical"||M==null||P!=="AreaChart"&&P!=="ComposedChart")return null;var{height:L,width:B,x:V,y:j}=M;return!k||!k.length?null:q.createElement(NIe,tg({},w,{activeDot:i,animationBegin:r,animationDuration:a,animationEasing:s,baseLine:R,connectNulls:o,dot:c,fill:f,fillOpacity:h,height:L,hide:p,layout:I,isAnimationActive:v==="auto"?!Qx.isSsr:v,isRange:U,legendType:y,needClip:D,points:k,stroke:_,width:B,left:V,top:j,xAxisId:E,yAxisId:S}))}var DIe=(n,e,t,i,r)=>{var a=t??e;if(Zt(a))return a;var s=n==="horizontal"?r:i,o=s.scale.domain();if(s.type==="number"){var c=Math.max(o[0],o[1]),f=Math.min(o[0],o[1]);return a==="dataMin"?f:a==="dataMax"||c<0?c:Math.max(Math.min(o[0],o[1]),0)}return a==="dataMin"?o[0]:a==="dataMax"?o[1]:o[0]};function LIe(n){var{areaSettings:{connectNulls:e,baseValue:t,dataKey:i},stackedData:r,layout:a,chartBaseValue:s,xAxis:o,yAxis:c,displayedData:f,dataStartIndex:h,xAxisTicks:p,yAxisTicks:v,bandSize:y}=n,_=r&&r.length,E=DIe(a,s,t,o,c),S=a==="horizontal",w=!1,I=f.map((D,z)=>{var k,U,R,M;if(_)M=r[h+z];else{var L=as(D,i);Array.isArray(L)?(M=L,w=!0):M=[E,L]}var B=(k=(U=M)===null||U===void 0?void 0:U[1])!==null&&k!==void 0?k:null,V=B==null||_&&!e&&as(D,i)==null;if(S){var j;return{x:R5({axis:o,ticks:p,bandSize:y,entry:D,index:z}),y:V?null:(j=c.scale.map(B))!==null&&j!==void 0?j:null,value:M,payload:D}}return{x:V?null:(R=o.scale.map(B))!==null&&R!==void 0?R:null,y:R5({axis:c,ticks:v,bandSize:y,entry:D,index:z}),value:M,payload:D}}),P;return _||w?P=I.map(D=>{var z,k=Array.isArray(D.value)?D.value[0]:null;if(S){var U;return{x:D.x,y:k!=null&&D.y!=null&&(U=c.scale.map(k))!==null&&U!==void 0?U:null,payload:D.payload}}return{x:k!=null&&(z=o.scale.map(k))!==null&&z!==void 0?z:null,y:D.y,payload:D.payload}}):P=S?c.scale.map(E):o.scale.map(E),{points:I,baseLine:P??0,isRange:w}}function kIe(n){var e=pl(n,kX),t=Vo();return q.createElement(dMe,{id:e.id,type:"area"},i=>q.createElement(q.Fragment,null,q.createElement(lMe,{legendPayload:wIe(e)}),q.createElement(EIe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),q.createElement(_Me,{type:"area",id:i,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:mye(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:t,connectNulls:e.connectNulls}),q.createElement(OIe,tg({},e,{id:i}))))}var UX=q.memo(kIe,Sk);UX.displayName="Area";var UIe=["domain","range"],FIe=["domain","range"];function TV(n,e){if(n==null)return{};var t,i,r=zIe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function zIe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function AV(n,e){return n===e?!0:Array.isArray(n)&&n.length===2&&Array.isArray(e)&&e.length===2?n[0]===e[0]&&n[1]===e[1]:!1}function FX(n,e){if(n===e)return!0;var{domain:t,range:i}=n,r=TV(n,UIe),{domain:a,range:s}=e,o=TV(e,FIe);return!AV(t,a)||!AV(i,s)?!1:Sk(r,o)}var BIe=["type"],VIe=["dangerouslySetInnerHTML","ticks","scale"],jIe=["id","scale"];function $O(){return $O=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},$O.apply(null,arguments)}function MV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function CV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?MV(Object(t),!0).forEach(function(i){HIe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):MV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function HIe(n,e,t){return(e=GIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function GIe(n){var e=WIe(n,"string");return typeof e=="symbol"?e:e+""}function WIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function XO(n,e){if(n==null)return{};var t,i,r=qIe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function qIe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function $Ie(n){var e=Na(),t=q.useRef(null),i=gL(),{type:r}=n,a=XO(n,BIe),s=vC(i,"xAxis",r),o=q.useMemo(()=>{if(s!=null)return CV(CV({},a),{},{type:s})},[a,s]);return q.useLayoutEffect(()=>{o!=null&&(t.current===null?e(DMe(o)):t.current!==o&&e(LMe({prev:t.current,next:o})),t.current=o)},[o,e]),q.useLayoutEffect(()=>()=>{t.current&&(e(kMe(t.current)),t.current=null)},[e]),null}var XIe=n=>{var{xAxisId:e,className:t}=n,i=hn(xW),r=Vo(),a="xAxis",s=hn(w=>A$(w,a,e,r)),o=hn(w=>_we(w,e)),c=hn(w=>Awe(w,e)),f=hn(w=>Wq(w,e));if(o==null||c==null||f==null)return null;var{dangerouslySetInnerHTML:h,ticks:p,scale:v}=n,y=XO(n,VIe),{id:_,scale:E}=f,S=XO(f,jIe);return q.createElement(xk,$O({},y,S,{x:c.x,y:c.y,width:o.width,height:o.height,className:rr("recharts-".concat(a," ").concat(a),t),viewBox:i,ticks:s,axisType:a}))},YIe={allowDataOverflow:Ma.allowDataOverflow,allowDecimals:Ma.allowDecimals,allowDuplicatedCategory:Ma.allowDuplicatedCategory,angle:Ma.angle,axisLine:fh.axisLine,height:Ma.height,hide:!1,includeHidden:Ma.includeHidden,interval:Ma.interval,label:!1,minTickGap:Ma.minTickGap,mirror:Ma.mirror,orientation:Ma.orientation,padding:Ma.padding,reversed:Ma.reversed,scale:Ma.scale,tick:Ma.tick,tickCount:Ma.tickCount,tickLine:fh.tickLine,tickSize:fh.tickSize,type:Ma.type,xAxisId:0},KIe=n=>{var e=pl(n,YIe);return q.createElement(q.Fragment,null,q.createElement($Ie,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),q.createElement(XIe,e))},zX=q.memo(KIe,FX);zX.displayName="XAxis";var ZIe=["type"],QIe=["dangerouslySetInnerHTML","ticks","scale"],JIe=["id","scale"];function YO(){return YO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},YO.apply(null,arguments)}function IV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function RV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?IV(Object(t),!0).forEach(function(i){eRe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):IV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function eRe(n,e,t){return(e=tRe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tRe(n){var e=nRe(n,"string");return typeof e=="symbol"?e:e+""}function nRe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function KO(n,e){if(n==null)return{};var t,i,r=iRe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function iRe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function rRe(n){var e=Na(),t=q.useRef(null),i=gL(),{type:r}=n,a=KO(n,ZIe),s=vC(i,"yAxis",r),o=q.useMemo(()=>{if(s!=null)return RV(RV({},a),{},{type:s})},[s,a]);return q.useLayoutEffect(()=>{o!=null&&(t.current===null?e(UMe(o)):t.current!==o&&e(FMe({prev:t.current,next:o})),t.current=o)},[o,e]),q.useLayoutEffect(()=>()=>{t.current&&(e(zMe(t.current)),t.current=null)},[e]),null}function aRe(n){var{yAxisId:e,className:t,width:i,label:r}=n,a=q.useRef(null),s=q.useRef(null),o=hn(xW),c=Vo(),f=Na(),h="yAxis",p=hn(k=>Iwe(k,e)),v=hn(k=>Cwe(k,e)),y=hn(k=>A$(k,h,e,c)),_=hn(k=>qq(k,e));if(q.useLayoutEffect(()=>{if(!(i!=="auto"||!p||yk(r)||q.isValidElement(r)||_==null)){var k=a.current;if(k){var U=k.getCalculatedWidth();Math.round(p.width)!==Math.round(U)&&f(BMe({id:e,width:U}))}}},[y,p,f,r,e,i,_]),p==null||v==null||_==null)return null;var{dangerouslySetInnerHTML:E,ticks:S,scale:w}=n,I=KO(n,QIe),{id:P,scale:D}=_,z=KO(_,JIe);return q.createElement(xk,YO({},I,z,{ref:a,labelRef:s,x:v.x,y:v.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:p.width,height:p.height,className:rr("recharts-".concat(h," ").concat(h),t),viewBox:o,ticks:y,axisType:h}))}var sRe={allowDataOverflow:Ca.allowDataOverflow,allowDecimals:Ca.allowDecimals,allowDuplicatedCategory:Ca.allowDuplicatedCategory,angle:Ca.angle,axisLine:fh.axisLine,hide:!1,includeHidden:Ca.includeHidden,interval:Ca.interval,label:!1,minTickGap:Ca.minTickGap,mirror:Ca.mirror,orientation:Ca.orientation,padding:Ca.padding,reversed:Ca.reversed,scale:Ca.scale,tick:Ca.tick,tickCount:Ca.tickCount,tickLine:fh.tickLine,tickSize:fh.tickSize,type:Ca.type,width:Ca.width,yAxisId:0},oRe=n=>{var e=pl(n,sRe);return q.createElement(q.Fragment,null,q.createElement(rRe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),q.createElement(aRe,e))},BX=q.memo(oRe,FX);BX.displayName="YAxis";var lRe=(n,e)=>e,Tk=Ye([lRe,dr,Hq,La,G$,Ih,HEe,os],KEe),Ak=n=>{var e=n.currentTarget.getBoundingClientRect(),t=e.width/n.currentTarget.offsetWidth,i=e.height/n.currentTarget.offsetHeight;return{chartX:Math.round((n.clientX-e.left)/t),chartY:Math.round((n.clientY-e.top)/i)}},VX=tc("mouseClick"),jX=Xx();jX.startListening({actionCreator:VX,effect:(n,e)=>{var t=n.payload,i=Tk(e.getState(),Ak(t));(i==null?void 0:i.activeIndex)!=null&&e.dispatch(jwe({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var ZO=tc("mouseMove"),HX=Xx(),Yw=null;HX.startListening({actionCreator:ZO,effect:(n,e)=>{var t=n.payload;Yw!==null&&cancelAnimationFrame(Yw);var i=Ak(t);Yw=requestAnimationFrame(()=>{var r=e.getState(),a=ok(r,r.tooltip.settings.shared);if(a==="axis"){var s=Tk(r,i);(s==null?void 0:s.activeIndex)!=null?e.dispatch(L$({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(D$())}Yw=null})}});function cRe(n,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":n==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var PV={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},GX=Bo({name:"rootProps",initialState:PV,reducers:{updateOptions:(n,e)=>{var t;n.accessibilityLayer=e.payload.accessibilityLayer,n.barCategoryGap=e.payload.barCategoryGap,n.barGap=(t=e.payload.barGap)!==null&&t!==void 0?t:PV.barGap,n.barSize=e.payload.barSize,n.maxBarSize=e.payload.maxBarSize,n.stackOffset=e.payload.stackOffset,n.syncId=e.payload.syncId,n.syncMethod=e.payload.syncMethod,n.className=e.payload.className,n.baseValue=e.payload.baseValue,n.reverseStackOrder=e.payload.reverseStackOrder}}}),uRe=GX.reducer,{updateOptions:fRe}=GX.actions,hRe=null,dRe={updatePolarOptions:(n,e)=>e.payload},WX=Bo({name:"polarOptions",initialState:hRe,reducers:dRe}),{updatePolarOptions:IOe}=WX.actions,pRe=WX.reducer,qX=tc("keyDown"),$X=tc("focus"),Mk=Xx();Mk.startListening({actionCreator:qX,effect:(n,e)=>{var t=e.getState(),i=t.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=t.tooltip,a=n.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=lk(r,yy(t),a1(t),o1(t)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var c=Ih(t);if(a==="Enter"){var f=_A(t,"axis","hover",String(r.index));e.dispatch(jO({active:!r.active,activeIndex:r.index,activeCoordinate:f}));return}var h=Owe(t),p=h==="left-to-right"?1:-1,v=a==="ArrowRight"?1:-1,y=o+v*p;if(!(c==null||y>=c.length||y<0)){var _=_A(t,"axis","hover",String(y));e.dispatch(jO({active:!0,activeIndex:y.toString(),activeCoordinate:_}))}}}}}});Mk.startListening({actionCreator:$X,effect:(n,e)=>{var t=e.getState(),i=t.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=t.tooltip;if(!r.active&&r.index==null){var a="0",s=_A(t,"axis","hover",String(a));e.dispatch(jO({active:!0,activeIndex:a,activeCoordinate:s}))}}}});var ql=tc("externalEvent"),XX=Xx(),rN=new Map;XX.startListening({actionCreator:ql,effect:(n,e)=>{var{handler:t,reactEvent:i}=n.payload;if(t!=null){i.persist();var r=i.type,a=rN.get(r);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=e.getState(),c={activeCoordinate:CEe(o),activeDataKey:AEe(o),activeIndex:Sx(o),activeLabel:$$(o),activeTooltipIndex:Sx(o),isTooltipActive:IEe(o)};t(c,i)}finally{rN.delete(r)}});rN.set(r,s)}}});var mRe=Ye([gy],n=>n.tooltipItemPayloads),gRe=Ye([mRe,(n,e)=>e,(n,e,t)=>t],(n,e,t)=>{if(e!=null){var i=n.find(a=>a.settings.graphicalItemId===t);if(i!=null){var{getPosition:r}=i;if(r!=null)return r(e)}}}),YX=tc("touchMove"),KX=Xx();KX.startListening({actionCreator:YX,effect:(n,e)=>{var t=n.payload;if(!(t.touches==null||t.touches.length===0)){var i=e.getState(),r=ok(i,i.tooltip.settings.shared);if(r==="axis"){var a=t.touches[0];if(a==null)return;var s=Tk(i,Ak({clientX:a.clientX,clientY:a.clientY,currentTarget:t.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&e.dispatch(L$({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(r==="item"){var o,c=t.touches[0];if(document.elementFromPoint==null||c==null)return;var f=document.elementFromPoint(c.clientX,c.clientY);if(!f||!f.getAttribute)return;var h=f.getAttribute(Sye),p=(o=f.getAttribute(wye))!==null&&o!==void 0?o:void 0,v=vy(i).find(E=>E.id===p);if(h==null||v==null||p==null)return;var{dataKey:y}=v,_=gRe(i,h,p);e.dispatch(Vwe({activeDataKey:y,activeIndex:h,activeCoordinate:_,activeGraphicalItemId:p}))}}}});var vRe=jG({brush:KMe,cartesianAxis:VMe,chartData:CTe,errorBars:GCe,graphicalItems:yMe,layout:sye,legend:mbe,options:wTe,polarAxis:aMe,polarOptions:pRe,referenceElements:eCe,rootProps:uRe,tooltip:Hwe,zIndex:uTe}),yRe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Pve({reducer:vRe,preloadedState:e,middleware:i=>{var r;return i({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([jX.middleware,HX.middleware,Mk.middleware,XX.middleware,KX.middleware])},enhancers:i=>{var r=i;return typeof i=="function"&&(r=i()),r.concat(iW({type:"raf"}))},devTools:{serialize:{replacer:cRe},name:"recharts-".concat(t)}})};function bRe(n){var{preloadedState:e,children:t,reduxStoreName:i}=n,r=Vo(),a=q.useRef(null);if(r)return t;a.current==null&&(a.current=yRe(e,i));var s=oL;return q.createElement(lIe,{context:s,store:a.current},t)}function _Re(n){var{layout:e,margin:t}=n,i=Na(),r=Vo();return q.useEffect(()=>{r||(i(iye(e)),i(nye(t)))},[i,r,e,t]),null}var xRe=q.memo(_Re,Sk);function SRe(n){var e=Na();return q.useEffect(()=>{e(fRe(n))},[e,n]),null}function NV(n){var{zIndex:e,isPanorama:t}=n,i=q.useRef(null),r=Na();return q.useLayoutEffect(()=>(i.current&&r(lTe({zIndex:e,element:i.current,isPanorama:t})),()=>{r(cTe({zIndex:e,isPanorama:t}))}),[r,e,t]),q.createElement("g",{tabIndex:-1,ref:i})}function OV(n){var{children:e,isPanorama:t}=n,i=hn(QEe);if(!i||i.length===0)return e;var r=i.filter(s=>s<0),a=i.filter(s=>s>0);return q.createElement(q.Fragment,null,r.map(s=>q.createElement(NV,{key:s,zIndex:s,isPanorama:t})),e,a.map(s=>q.createElement(NV,{key:s,zIndex:s,isPanorama:t})))}var wRe=["children"];function ERe(n,e){if(n==null)return{};var t,i,r=TRe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function TRe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function TA(){return TA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},TA.apply(null,arguments)}var ARe={width:"100%",height:"100%",display:"block"},MRe=q.forwardRef((n,e)=>{var t=AW(),i=MW(),r=kW();if(!lf(t)||!lf(i))return null;var{children:a,otherAttributes:s,title:o,desc:c}=n,f,h;return s!=null&&(typeof s.tabIndex=="number"?f=s.tabIndex:f=r?0:void 0,typeof s.role=="string"?h=s.role:h=r?"application":void 0),q.createElement(uG,TA({},s,{title:o,desc:c,role:h,tabIndex:f,width:t,height:i,style:ARe,ref:e}),a)}),CRe=n=>{var{children:e}=n,t=hn(rC);if(!t)return null;var{width:i,height:r,y:a,x:s}=t;return q.createElement(uG,{width:i,height:r,x:s,y:a},e)},DV=q.forwardRef((n,e)=>{var{children:t}=n,i=ERe(n,wRe),r=Vo();return r?q.createElement(CRe,null,q.createElement(OV,{isPanorama:!0},t)):q.createElement(MRe,TA({ref:e},i),q.createElement(OV,{isPanorama:!1},t))});function IRe(){var n=Na(),[e,t]=q.useState(null),i=hn(xye);return q.useEffect(()=>{if(e!=null){var r=e.getBoundingClientRect(),a=r.width/e.offsetWidth;ni(a)&&a!==i&&n(aye(a))}},[e,n,i]),t}function LV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function RRe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?LV(Object(t),!0).forEach(function(i){PRe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):LV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function PRe(n,e,t){return(e=NRe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NRe(n){var e=ORe(n,"string");return typeof e=="symbol"?e:e+""}function ORe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function np(){return np=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},np.apply(null,arguments)}var DRe=()=>(UTe(),null);function AA(n){if(typeof n=="number")return n;if(typeof n=="string"){var e=parseFloat(n);if(!Number.isNaN(e))return e}return 0}var LRe=q.forwardRef((n,e)=>{var t,i,r=q.useRef(null),[a,s]=q.useState({containerWidth:AA((t=n.style)===null||t===void 0?void 0:t.width),containerHeight:AA((i=n.style)===null||i===void 0?void 0:i.height)}),o=q.useCallback((f,h)=>{s(p=>{var v=Math.round(f),y=Math.round(h);return p.containerWidth===v&&p.containerHeight===y?p:{containerWidth:v,containerHeight:y}})},[]),c=q.useCallback(f=>{if(typeof e=="function"&&e(f),f!=null&&typeof ResizeObserver<"u"){var{width:h,height:p}=f.getBoundingClientRect();o(h,p);var v=_=>{var E=_[0];if(E!=null){var{width:S,height:w}=E.contentRect;o(S,w)}},y=new ResizeObserver(v);y.observe(f),r.current=y}},[e,o]);return q.useEffect(()=>()=>{var f=r.current;f!=null&&f.disconnect()},[o]),q.createElement(q.Fragment,null,q.createElement(Kx,{width:a.containerWidth,height:a.containerHeight}),q.createElement("div",np({ref:c},n)))}),kRe=q.forwardRef((n,e)=>{var{width:t,height:i}=n,[r,a]=q.useState({containerWidth:AA(t),containerHeight:AA(i)}),s=q.useCallback((c,f)=>{a(h=>{var p=Math.round(c),v=Math.round(f);return h.containerWidth===p&&h.containerHeight===v?h:{containerWidth:p,containerHeight:v}})},[]),o=q.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:f,height:h}=c.getBoundingClientRect();s(f,h)}},[e,s]);return q.createElement(q.Fragment,null,q.createElement(Kx,{width:r.containerWidth,height:r.containerHeight}),q.createElement("div",np({ref:o},n)))}),URe=q.forwardRef((n,e)=>{var{width:t,height:i}=n;return q.createElement(q.Fragment,null,q.createElement(Kx,{width:t,height:i}),q.createElement("div",np({ref:e},n)))}),FRe=q.forwardRef((n,e)=>{var{width:t,height:i}=n;return typeof t=="string"||typeof i=="string"?q.createElement(kRe,np({},n,{ref:e})):typeof t=="number"&&typeof i=="number"?q.createElement(URe,np({},n,{width:t,height:i,ref:e})):q.createElement(q.Fragment,null,q.createElement(Kx,{width:t,height:i}),q.createElement("div",np({ref:e},n)))});function zRe(n){return n?LRe:FRe}var BRe=q.forwardRef((n,e)=>{var{children:t,className:i,height:r,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:c,onMouseEnter:f,onMouseLeave:h,onMouseMove:p,onMouseUp:v,onTouchEnd:y,onTouchMove:_,onTouchStart:E,style:S,width:w,responsive:I,dispatchTouchEvents:P=!0}=n,D=q.useRef(null),z=Na(),[k,U]=q.useState(null),[R,M]=q.useState(null),L=IRe(),B=pL(),V=(B==null?void 0:B.width)>0?B.width:w,j=(B==null?void 0:B.height)>0?B.height:r,Z=q.useCallback(be=>{L(be),typeof e=="function"&&e(be),U(be),M(be),be!=null&&(D.current=be)},[L,e,U,M]),J=q.useCallback(be=>{z(VX(be)),z(ql({handler:a,reactEvent:be}))},[z,a]),G=q.useCallback(be=>{z(ZO(be)),z(ql({handler:f,reactEvent:be}))},[z,f]),$=q.useCallback(be=>{z(D$()),z(ql({handler:h,reactEvent:be}))},[z,h]),ae=q.useCallback(be=>{z(ZO(be)),z(ql({handler:p,reactEvent:be}))},[z,p]),le=q.useCallback(()=>{z($X())},[z]),ue=q.useCallback(be=>{z(qX(be.key))},[z]),Q=q.useCallback(be=>{z(ql({handler:s,reactEvent:be}))},[z,s]),re=q.useCallback(be=>{z(ql({handler:o,reactEvent:be}))},[z,o]),ye=q.useCallback(be=>{z(ql({handler:c,reactEvent:be}))},[z,c]),de=q.useCallback(be=>{z(ql({handler:v,reactEvent:be}))},[z,v]),xe=q.useCallback(be=>{z(ql({handler:E,reactEvent:be}))},[z,E]),ve=q.useCallback(be=>{P&&z(YX(be)),z(ql({handler:_,reactEvent:be}))},[z,P,_]),Te=q.useCallback(be=>{z(ql({handler:y,reactEvent:be}))},[z,y]),Ze=zRe(I);return q.createElement(tX.Provider,{value:k},q.createElement(Uge.Provider,{value:R},q.createElement(Ze,{width:V??(S==null?void 0:S.width),height:j??(S==null?void 0:S.height),className:rr("recharts-wrapper",i),style:RRe({position:"relative",cursor:"default",width:V,height:j},S),onClick:J,onContextMenu:Q,onDoubleClick:re,onFocus:le,onKeyDown:ue,onMouseDown:ye,onMouseEnter:G,onMouseLeave:$,onMouseMove:ae,onMouseUp:de,onTouchEnd:Te,onTouchMove:ve,onTouchStart:xe,ref:Z},q.createElement(DRe,null),t)))}),VRe=["width","height","responsive","children","className","style","compact","title","desc"];function jRe(n,e){if(n==null)return{};var t,i,r=HRe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function HRe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var GRe=q.forwardRef((n,e)=>{var{width:t,height:i,responsive:r,children:a,className:s,style:o,compact:c,title:f,desc:h}=n,p=jRe(n,VRe),v=Hc(p);return c?q.createElement(q.Fragment,null,q.createElement(Kx,{width:t,height:i}),q.createElement(DV,{otherAttributes:v,title:f,desc:h},a)):q.createElement(BRe,{className:s,style:o,width:t,height:i,responsive:r??!1,onClick:n.onClick,onMouseLeave:n.onMouseLeave,onMouseEnter:n.onMouseEnter,onMouseMove:n.onMouseMove,onMouseDown:n.onMouseDown,onMouseUp:n.onMouseUp,onContextMenu:n.onContextMenu,onDoubleClick:n.onDoubleClick,onTouchStart:n.onTouchStart,onTouchMove:n.onTouchMove,onTouchEnd:n.onTouchEnd},q.createElement(DV,{otherAttributes:v,title:f,desc:h,ref:e},q.createElement(nCe,null,a)))});function QO(){return QO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},QO.apply(null,arguments)}var WRe={top:5,right:5,bottom:5,left:5},qRe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:WRe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},$Re=q.forwardRef(function(e,t){var i,r=pl(e.categoricalChartProps,qRe),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:f}=e,h={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return q.createElement(bRe,{preloadedState:{options:h},reduxStoreName:(i=f.id)!==null&&i!==void 0?i:a},q.createElement(YMe,{chartData:f.data}),q.createElement(xRe,{layout:r.layout,margin:r.margin}),q.createElement(SRe,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),q.createElement(GRe,QO({},r,{ref:t})))}),XRe=["axis"],YRe=q.forwardRef((n,e)=>q.createElement($Re,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:XRe,tooltipPayloadSearcher:xTe,categoricalChartProps:n,ref:e}));const ZX=6048e5,KRe=864e5,kV=Symbol.for("constructDateFrom");function mp(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&kV in n?n[kV](e):n instanceof Date?new n.constructor(e):new Date(e)}function $c(n,e){return mp(e||n,n)}let ZRe={};function AC(){return ZRe}function Tx(n,e){var o,c,f,h;const t=AC(),i=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((h=(f=t.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??0,r=$c(n,e==null?void 0:e.in),a=r.getDay(),s=(a<i?7:0)+a-i;return r.setDate(r.getDate()-s),r.setHours(0,0,0,0),r}function MA(n,e){return Tx(n,{...e,weekStartsOn:1})}function QX(n,e){const t=$c(n,e==null?void 0:e.in),i=t.getFullYear(),r=mp(t,0);r.setFullYear(i+1,0,4),r.setHours(0,0,0,0);const a=MA(r),s=mp(t,0);s.setFullYear(i,0,4),s.setHours(0,0,0,0);const o=MA(s);return t.getTime()>=a.getTime()?i+1:t.getTime()>=o.getTime()?i:i-1}function UV(n){const e=$c(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function QRe(n,...e){const t=mp.bind(null,e.find(i=>typeof i=="object"));return e.map(t)}function FV(n,e){const t=$c(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function JRe(n,e,t){const[i,r]=QRe(t==null?void 0:t.in,n,e),a=FV(i),s=FV(r),o=+a-UV(a),c=+s-UV(s);return Math.round((o-c)/KRe)}function ePe(n,e){const t=QX(n,e),i=mp(n,0);return i.setFullYear(t,0,4),i.setHours(0,0,0,0),MA(i)}function tPe(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function nPe(n){return!(!tPe(n)&&typeof n!="number"||isNaN(+$c(n)))}function iPe(n,e){const t=$c(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const rPe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},aPe=(n,e,t)=>{let i;const r=rPe[n];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function Tv(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const sPe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},oPe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},lPe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},cPe={date:Tv({formats:sPe,defaultWidth:"full"}),time:Tv({formats:oPe,defaultWidth:"full"}),dateTime:Tv({formats:lPe,defaultWidth:"full"})},uPe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fPe=(n,e,t,i)=>uPe[n];function Uu(n){return(e,t)=>{const i=t!=null&&t.context?String(t.context):"standalone";let r;if(i==="formatting"&&n.formattingValues){const s=n.defaultFormattingWidth||n.defaultWidth,o=t!=null&&t.width?String(t.width):s;r=n.formattingValues[o]||n.formattingValues[s]}else{const s=n.defaultWidth,o=t!=null&&t.width?String(t.width):n.defaultWidth;r=n.values[o]||n.values[s]}const a=n.argumentCallback?n.argumentCallback(e):e;return r[a]}}const hPe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},dPe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},pPe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},mPe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},gPe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},vPe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},yPe=(n,e)=>{const t=Number(n),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},bPe={ordinalNumber:yPe,era:Uu({values:hPe,defaultWidth:"wide"}),quarter:Uu({values:dPe,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Uu({values:pPe,defaultWidth:"wide"}),day:Uu({values:mPe,defaultWidth:"wide"}),dayPeriod:Uu({values:gPe,defaultWidth:"wide",formattingValues:vPe,defaultFormattingWidth:"wide"})};function Fu(n){return(e,t={})=>{const i=t.width,r=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],a=e.match(r);if(!a)return null;const s=a[0],o=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(o)?xPe(o,p=>p.test(s)):_Pe(o,p=>p.test(s));let f;f=n.valueCallback?n.valueCallback(c):c,f=t.valueCallback?t.valueCallback(f):f;const h=e.slice(s.length);return{value:f,rest:h}}}function _Pe(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function xPe(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function JX(n){return(e,t={})=>{const i=e.match(n.matchPattern);if(!i)return null;const r=i[0],a=e.match(n.parsePattern);if(!a)return null;let s=n.valueCallback?n.valueCallback(a[0]):a[0];s=t.valueCallback?t.valueCallback(s):s;const o=e.slice(r.length);return{value:s,rest:o}}}const SPe=/^(\d+)(th|st|nd|rd)?/i,wPe=/\d+/i,EPe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},TPe={any:[/^b/i,/^(a|c)/i]},APe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},MPe={any:[/1/i,/2/i,/3/i,/4/i]},CPe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},IPe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},RPe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},PPe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},NPe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},OPe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},DPe={ordinalNumber:JX({matchPattern:SPe,parsePattern:wPe,valueCallback:n=>parseInt(n,10)}),era:Fu({matchPatterns:EPe,defaultMatchWidth:"wide",parsePatterns:TPe,defaultParseWidth:"any"}),quarter:Fu({matchPatterns:APe,defaultMatchWidth:"wide",parsePatterns:MPe,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Fu({matchPatterns:CPe,defaultMatchWidth:"wide",parsePatterns:IPe,defaultParseWidth:"any"}),day:Fu({matchPatterns:RPe,defaultMatchWidth:"wide",parsePatterns:PPe,defaultParseWidth:"any"}),dayPeriod:Fu({matchPatterns:NPe,defaultMatchWidth:"any",parsePatterns:OPe,defaultParseWidth:"any"})},LPe={code:"en-US",formatDistance:aPe,formatLong:cPe,formatRelative:fPe,localize:bPe,match:DPe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function kPe(n,e){const t=$c(n,e==null?void 0:e.in);return JRe(t,iPe(t))+1}function UPe(n,e){const t=$c(n,e==null?void 0:e.in),i=+MA(t)-+ePe(t);return Math.round(i/ZX)+1}function eY(n,e){var h,p,v,y;const t=$c(n,e==null?void 0:e.in),i=t.getFullYear(),r=AC(),a=(e==null?void 0:e.firstWeekContainsDate)??((p=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((y=(v=r.locale)==null?void 0:v.options)==null?void 0:y.firstWeekContainsDate)??1,s=mp((e==null?void 0:e.in)||n,0);s.setFullYear(i+1,0,a),s.setHours(0,0,0,0);const o=Tx(s,e),c=mp((e==null?void 0:e.in)||n,0);c.setFullYear(i,0,a),c.setHours(0,0,0,0);const f=Tx(c,e);return+t>=+o?i+1:+t>=+f?i:i-1}function FPe(n,e){var o,c,f,h;const t=AC(),i=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(f=t.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,r=eY(n,e),a=mp((e==null?void 0:e.in)||n,0);return a.setFullYear(r,0,i),a.setHours(0,0,0,0),Tx(a,e)}function zPe(n,e){const t=$c(n,e==null?void 0:e.in),i=+Tx(t,e)-+FPe(t,e);return Math.round(i/ZX)+1}function Ai(n,e){const t=n<0?"-":"",i=Math.abs(n).toString().padStart(e,"0");return t+i}const Rd={y(n,e){const t=n.getFullYear(),i=t>0?t:1-t;return Ai(e==="yy"?i%100:i,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Ai(t+1,2)},d(n,e){return Ai(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Ai(n.getHours()%12||12,e.length)},H(n,e){return Ai(n.getHours(),e.length)},m(n,e){return Ai(n.getMinutes(),e.length)},s(n,e){return Ai(n.getSeconds(),e.length)},S(n,e){const t=e.length,i=n.getMilliseconds(),r=Math.trunc(i*Math.pow(10,t-3));return Ai(r,e.length)}},tv={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},zV={G:function(n,e,t){const i=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(i,{width:"abbreviated"});case"GGGGG":return t.era(i,{width:"narrow"});case"GGGG":default:return t.era(i,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const i=n.getFullYear(),r=i>0?i:1-i;return t.ordinalNumber(r,{unit:"year"})}return Rd.y(n,e)},Y:function(n,e,t,i){const r=eY(n,i),a=r>0?r:1-r;if(e==="YY"){const s=a%100;return Ai(s,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):Ai(a,e.length)},R:function(n,e){const t=QX(n);return Ai(t,e.length)},u:function(n,e){const t=n.getFullYear();return Ai(t,e.length)},Q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return Ai(i,2);case"Qo":return t.ordinalNumber(i,{unit:"quarter"});case"QQQ":return t.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return Ai(i,2);case"qo":return t.ordinalNumber(i,{unit:"quarter"});case"qqq":return t.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,e,t){const i=n.getMonth();switch(e){case"M":case"MM":return Rd.M(n,e);case"Mo":return t.ordinalNumber(i+1,{unit:"month"});case"MMM":return t.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(i,{width:"wide",context:"formatting"})}},L:function(n,e,t){const i=n.getMonth();switch(e){case"L":return String(i+1);case"LL":return Ai(i+1,2);case"Lo":return t.ordinalNumber(i+1,{unit:"month"});case"LLL":return t.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(i,{width:"wide",context:"standalone"})}},w:function(n,e,t,i){const r=zPe(n,i);return e==="wo"?t.ordinalNumber(r,{unit:"week"}):Ai(r,e.length)},I:function(n,e,t){const i=UPe(n);return e==="Io"?t.ordinalNumber(i,{unit:"week"}):Ai(i,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Rd.d(n,e)},D:function(n,e,t){const i=kPe(n);return e==="Do"?t.ordinalNumber(i,{unit:"dayOfYear"}):Ai(i,e.length)},E:function(n,e,t){const i=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(i,{width:"short",context:"formatting"});case"EEEE":default:return t.day(i,{width:"wide",context:"formatting"})}},e:function(n,e,t,i){const r=n.getDay(),a=(r-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Ai(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(r,{width:"short",context:"formatting"});case"eeee":default:return t.day(r,{width:"wide",context:"formatting"})}},c:function(n,e,t,i){const r=n.getDay(),a=(r-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Ai(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(r,{width:"narrow",context:"standalone"});case"cccccc":return t.day(r,{width:"short",context:"standalone"});case"cccc":default:return t.day(r,{width:"wide",context:"standalone"})}},i:function(n,e,t){const i=n.getDay(),r=i===0?7:i;switch(e){case"i":return String(r);case"ii":return Ai(r,e.length);case"io":return t.ordinalNumber(r,{unit:"day"});case"iii":return t.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(i,{width:"short",context:"formatting"});case"iiii":default:return t.day(i,{width:"wide",context:"formatting"})}},a:function(n,e,t){const r=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(n,e,t){const i=n.getHours();let r;switch(i===12?r=tv.noon:i===0?r=tv.midnight:r=i/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(n,e,t){const i=n.getHours();let r;switch(i>=17?r=tv.evening:i>=12?r=tv.afternoon:i>=4?r=tv.morning:r=tv.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let i=n.getHours()%12;return i===0&&(i=12),t.ordinalNumber(i,{unit:"hour"})}return Rd.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Rd.H(n,e)},K:function(n,e,t){const i=n.getHours()%12;return e==="Ko"?t.ordinalNumber(i,{unit:"hour"}):Ai(i,e.length)},k:function(n,e,t){let i=n.getHours();return i===0&&(i=24),e==="ko"?t.ordinalNumber(i,{unit:"hour"}):Ai(i,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Rd.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Rd.s(n,e)},S:function(n,e){return Rd.S(n,e)},X:function(n,e,t){const i=n.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return VV(i);case"XXXX":case"XX":return Pm(i);case"XXXXX":case"XXX":default:return Pm(i,":")}},x:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"x":return VV(i);case"xxxx":case"xx":return Pm(i);case"xxxxx":case"xxx":default:return Pm(i,":")}},O:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+BV(i,":");case"OOOO":default:return"GMT"+Pm(i,":")}},z:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+BV(i,":");case"zzzz":default:return"GMT"+Pm(i,":")}},t:function(n,e,t){const i=Math.trunc(+n/1e3);return Ai(i,e.length)},T:function(n,e,t){return Ai(+n,e.length)}};function BV(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),r=Math.trunc(i/60),a=i%60;return a===0?t+String(r):t+String(r)+e+Ai(a,2)}function VV(n,e){return n%60===0?(n>0?"-":"+")+Ai(Math.abs(n)/60,2):Pm(n,e)}function Pm(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),r=Ai(Math.trunc(i/60),2),a=Ai(i%60,2);return t+r+e+a}const jV=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},tY=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},BPe=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],i=t[1],r=t[2];if(!r)return jV(n,e);let a;switch(i){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",jV(i,e)).replace("{{time}}",tY(r,e))},VPe={p:tY,P:BPe},jPe=/^D+$/,HPe=/^Y+$/,GPe=["D","DD","YY","YYYY"];function WPe(n){return jPe.test(n)}function qPe(n){return HPe.test(n)}function $Pe(n,e,t){const i=XPe(n,e,t);if(console.warn(i),GPe.includes(n))throw new RangeError(i)}function XPe(n,e,t){const i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${i} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const YPe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,KPe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ZPe=/^'([^]*?)'?$/,QPe=/''/g,JPe=/[a-zA-Z]/;function eNe(n,e,t){var h,p,v,y,_,E,S,w;const i=AC(),r=(t==null?void 0:t.locale)??i.locale??LPe,a=(t==null?void 0:t.firstWeekContainsDate)??((p=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((y=(v=i.locale)==null?void 0:v.options)==null?void 0:y.firstWeekContainsDate)??1,s=(t==null?void 0:t.weekStartsOn)??((E=(_=t==null?void 0:t.locale)==null?void 0:_.options)==null?void 0:E.weekStartsOn)??i.weekStartsOn??((w=(S=i.locale)==null?void 0:S.options)==null?void 0:w.weekStartsOn)??0,o=$c(n,t==null?void 0:t.in);if(!nPe(o))throw new RangeError("Invalid time value");let c=e.match(KPe).map(I=>{const P=I[0];if(P==="p"||P==="P"){const D=VPe[P];return D(I,r.formatLong)}return I}).join("").match(YPe).map(I=>{if(I==="''")return{isToken:!1,value:"'"};const P=I[0];if(P==="'")return{isToken:!1,value:tNe(I)};if(zV[P])return{isToken:!0,value:I};if(P.match(JPe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+P+"`");return{isToken:!1,value:I}});r.localize.preprocessor&&(c=r.localize.preprocessor(o,c));const f={firstWeekContainsDate:a,weekStartsOn:s,locale:r};return c.map(I=>{if(!I.isToken)return I.value;const P=I.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&qPe(P)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&WPe(P))&&$Pe(P,e,String(n));const D=zV[P[0]];return D(o,P,r.localize,f)}).join("")}function tNe(n){const e=n.match(ZPe);return e?e[1].replace(QPe,"'"):n}const nNe={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},iNe=(n,e,t)=>{let i;const r=nNe[n];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"en "+i:"hace "+i:i},rNe={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},aNe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},sNe={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},oNe={date:Tv({formats:rNe,defaultWidth:"full"}),time:Tv({formats:aNe,defaultWidth:"full"}),dateTime:Tv({formats:sNe,defaultWidth:"full"})},lNe={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},cNe={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},uNe=(n,e,t,i)=>e.getHours()!==1?cNe[n]:lNe[n],fNe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},hNe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},dNe={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},pNe={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},mNe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},gNe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},vNe=(n,e)=>Number(n)+"",yNe={ordinalNumber:vNe,era:Uu({values:fNe,defaultWidth:"wide"}),quarter:Uu({values:hNe,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:Uu({values:dNe,defaultWidth:"wide"}),day:Uu({values:pNe,defaultWidth:"wide"}),dayPeriod:Uu({values:mNe,defaultWidth:"wide",formattingValues:gNe,defaultFormattingWidth:"wide"})},bNe=/^(\d+)()?/i,_Ne=/\d+/i,xNe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},SNe={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},wNe={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},ENe={any:[/1/i,/2/i,/3/i,/4/i]},TNe={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},ANe={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},MNe={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},CNe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},INe={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},RNe={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},PNe={ordinalNumber:JX({matchPattern:bNe,parsePattern:_Ne,valueCallback:function(n){return parseInt(n,10)}}),era:Fu({matchPatterns:xNe,defaultMatchWidth:"wide",parsePatterns:SNe,defaultParseWidth:"any"}),quarter:Fu({matchPatterns:wNe,defaultMatchWidth:"wide",parsePatterns:ENe,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Fu({matchPatterns:TNe,defaultMatchWidth:"wide",parsePatterns:ANe,defaultParseWidth:"any"}),day:Fu({matchPatterns:MNe,defaultMatchWidth:"wide",parsePatterns:CNe,defaultParseWidth:"any"}),dayPeriod:Fu({matchPatterns:INe,defaultMatchWidth:"any",parsePatterns:RNe,defaultParseWidth:"any"})},NNe={code:"es",formatDistance:iNe,formatLong:oNe,formatRelative:uNe,localize:yNe,match:PNe,options:{weekStartsOn:1,firstWeekContainsDate:1}},ONe=({orders:n})=>{const e=n.reduce((i,r)=>{try{const[a,s,o]=r.date.split("/"),c=`${o}-${s}-${a}`;i[c]||(i[c]=0),i[c]+=parseFloat(r.total)}catch{}return i},{}),t=Object.keys(e).sort().map(i=>({date:i,total:e[i],displayDate:eNe(new Date(i),"dd MMM",{locale:NNe})}));return N.jsxs("div",{className:"h-[300px] w-full bg-slate-800 p-4 rounded-xl border border-slate-700",children:[N.jsx("h3",{className:"text-slate-400 text-sm font-bold mb-4 uppercase",children:"Ventas (Histrico)"}),N.jsx(Zye,{width:"100%",height:"100%",children:N.jsxs(YRe,{data:t,children:[N.jsx("defs",{children:N.jsxs("linearGradient",{id:"colorTotal",x1:"0",y1:"0",x2:"0",y2:"1",children:[N.jsx("stop",{offset:"5%",stopColor:"#F59E0B",stopOpacity:.8}),N.jsx("stop",{offset:"95%",stopColor:"#F59E0B",stopOpacity:0})]})}),N.jsx(AX,{strokeDasharray:"3 3",stroke:"#374151"}),N.jsx(zX,{dataKey:"displayDate",stroke:"#9CA3AF",fontSize:12}),N.jsx(BX,{stroke:"#9CA3AF",fontSize:12,unit:"$"}),N.jsx(WTe,{contentStyle:{backgroundColor:"#1F2937",borderColor:"#374151",color:"#F3F4F6"},formatter:i=>[`$${i}`,"Ventas"]}),N.jsx(UX,{type:"monotone",dataKey:"total",stroke:"#F59E0B",fillOpacity:1,fill:"url(#colorTotal)"})]})})]})};function DNe(n,e){return e.forEach((function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach((function(i){if(i!=="default"&&!(i in n)){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}}))})),Object.freeze(n)}function nY(n,e){return new Promise((function(t,i){let r;return LNe(n).then((function(a){try{return r=a,t(new Blob([e.slice(0,2),r,e.slice(2)],{type:"image/jpeg"}))}catch(s){return i(s)}}),i)}))}const LNe=n=>new Promise(((e,t)=>{const i=new FileReader;i.addEventListener("load",(({target:{result:r}})=>{const a=new DataView(r);let s=0;if(a.getUint16(s)!==65496)return t("not a valid JPEG");for(s+=2;;){const o=a.getUint16(s);if(o===65498)break;const c=a.getUint16(s+2);if(o===65505&&a.getUint32(s+4)===1165519206){const f=s+10;let h;switch(a.getUint16(f)){case 18761:h=!0;break;case 19789:h=!1;break;default:return t("TIFF header contains invalid endian")}if(a.getUint16(f+2,h)!==42)return t("TIFF header contains invalid version");const p=a.getUint32(f+4,h),v=f+p+2+12*a.getUint16(f+p,h);for(let y=f+p+2;y<v;y+=12)if(a.getUint16(y,h)==274){if(a.getUint16(y+2,h)!==3)return t("Orientation data type is invalid");if(a.getUint32(y+4,h)!==1)return t("Orientation data count is invalid");a.setUint16(y+8,1,h);break}return e(r.slice(s,s+2+c))}s+=2+c}return e(new Blob)})),i.readAsArrayBuffer(n)}));var CA={},kNe={get exports(){return CA},set exports(n){CA=n}};(function(n){var e,t,i={};kNe.exports=i,i.parse=function(r,a){for(var s=i.bin.readUshort,o=i.bin.readUint,c=0,f={},h=new Uint8Array(r),p=h.length-4;o(h,p)!=101010256;)p--;c=p,c+=4;var v=s(h,c+=4);s(h,c+=2);var y=o(h,c+=2),_=o(h,c+=4);c+=4,c=_;for(var E=0;E<v;E++){o(h,c),c+=4,c+=4,c+=4,o(h,c+=4),y=o(h,c+=4);var S=o(h,c+=4),w=s(h,c+=4),I=s(h,c+2),P=s(h,c+4);c+=6;var D=o(h,c+=8);c+=4,c+=w+I+P,i._readLocal(h,D,f,y,S,a)}return f},i._readLocal=function(r,a,s,o,c,f){var h=i.bin.readUshort,p=i.bin.readUint;p(r,a),h(r,a+=4),h(r,a+=2);var v=h(r,a+=2);p(r,a+=2),p(r,a+=4),a+=4;var y=h(r,a+=8),_=h(r,a+=2);a+=2;var E=i.bin.readUTF8(r,a,y);if(a+=y,a+=_,f)s[E]={size:c,csize:o};else{var S=new Uint8Array(r.buffer,a);if(v==0)s[E]=new Uint8Array(S.buffer.slice(a,a+o));else{if(v!=8)throw"unknown compression method: "+v;var w=new Uint8Array(c);i.inflateRaw(S,w),s[E]=w}}},i.inflateRaw=function(r,a){return i.F.inflate(r,a)},i.inflate=function(r,a){return r[0],r[1],i.inflateRaw(new Uint8Array(r.buffer,r.byteOffset+2,r.length-6),a)},i.deflate=function(r,a){a==null&&(a={level:6});var s=0,o=new Uint8Array(50+Math.floor(1.1*r.length));o[s]=120,o[s+1]=156,s+=2,s=i.F.deflateRaw(r,o,s,a.level);var c=i.adler(r,0,r.length);return o[s+0]=c>>>24&255,o[s+1]=c>>>16&255,o[s+2]=c>>>8&255,o[s+3]=c>>>0&255,new Uint8Array(o.buffer,0,s+4)},i.deflateRaw=function(r,a){a==null&&(a={level:6});var s=new Uint8Array(50+Math.floor(1.1*r.length)),o=i.F.deflateRaw(r,s,o,a.level);return new Uint8Array(s.buffer,0,o)},i.encode=function(r,a){a==null&&(a=!1);var s=0,o=i.bin.writeUint,c=i.bin.writeUshort,f={};for(var h in r){var p=!i._noNeed(h)&&!a,v=r[h],y=i.crc.crc(v,0,v.length);f[h]={cpr:p,usize:v.length,crc:y,file:p?i.deflateRaw(v):v}}for(var h in f)s+=f[h].file.length+30+46+2*i.bin.sizeUTF8(h);s+=22;var _=new Uint8Array(s),E=0,S=[];for(var h in f){var w=f[h];S.push(E),E=i._writeHeader(_,E,h,w,0)}var I=0,P=E;for(var h in f)w=f[h],S.push(E),E=i._writeHeader(_,E,h,w,1,S[I++]);var D=E-P;return o(_,E,101010256),E+=4,c(_,E+=4,I),c(_,E+=2,I),o(_,E+=2,D),o(_,E+=4,P),E+=4,E+=2,_.buffer},i._noNeed=function(r){var a=r.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},i._writeHeader=function(r,a,s,o,c,f){var h=i.bin.writeUint,p=i.bin.writeUshort,v=o.file;return h(r,a,c==0?67324752:33639248),a+=4,c==1&&(a+=2),p(r,a,20),p(r,a+=2,0),p(r,a+=2,o.cpr?8:0),h(r,a+=2,0),h(r,a+=4,o.crc),h(r,a+=4,v.length),h(r,a+=4,o.usize),p(r,a+=4,i.bin.sizeUTF8(s)),p(r,a+=2,0),a+=2,c==1&&(a+=2,a+=2,h(r,a+=6,f),a+=4),a+=i.bin.writeUTF8(r,a,s),c==0&&(r.set(v,a),a+=v.length),a},i.crc={table:(function(){for(var r=new Uint32Array(256),a=0;a<256;a++){for(var s=a,o=0;o<8;o++)1&s?s=3988292384^s>>>1:s>>>=1;r[a]=s}return r})(),update:function(r,a,s,o){for(var c=0;c<o;c++)r=i.crc.table[255&(r^a[s+c])]^r>>>8;return r},crc:function(r,a,s){return 4294967295^i.crc.update(4294967295,r,a,s)}},i.adler=function(r,a,s){for(var o=1,c=0,f=a,h=a+s;f<h;){for(var p=Math.min(f+5552,h);f<p;)c+=o+=r[f++];o%=65521,c%=65521}return c<<16|o},i.bin={readUshort:function(r,a){return r[a]|r[a+1]<<8},writeUshort:function(r,a,s){r[a]=255&s,r[a+1]=s>>8&255},readUint:function(r,a){return 16777216*r[a+3]+(r[a+2]<<16|r[a+1]<<8|r[a])},writeUint:function(r,a,s){r[a]=255&s,r[a+1]=s>>8&255,r[a+2]=s>>16&255,r[a+3]=s>>24&255},readASCII:function(r,a,s){for(var o="",c=0;c<s;c++)o+=String.fromCharCode(r[a+c]);return o},writeASCII:function(r,a,s){for(var o=0;o<s.length;o++)r[a+o]=s.charCodeAt(o)},pad:function(r){return r.length<2?"0"+r:r},readUTF8:function(r,a,s){for(var o,c="",f=0;f<s;f++)c+="%"+i.bin.pad(r[a+f].toString(16));try{o=decodeURIComponent(c)}catch{return i.bin.readASCII(r,a,s)}return o},writeUTF8:function(r,a,s){for(var o=s.length,c=0,f=0;f<o;f++){var h=s.charCodeAt(f);if((4294967168&h)==0)r[a+c]=h,c++;else if((4294965248&h)==0)r[a+c]=192|h>>6,r[a+c+1]=128|h>>0&63,c+=2;else if((4294901760&h)==0)r[a+c]=224|h>>12,r[a+c+1]=128|h>>6&63,r[a+c+2]=128|h>>0&63,c+=3;else{if((4292870144&h)!=0)throw"e";r[a+c]=240|h>>18,r[a+c+1]=128|h>>12&63,r[a+c+2]=128|h>>6&63,r[a+c+3]=128|h>>0&63,c+=4}}return c},sizeUTF8:function(r){for(var a=r.length,s=0,o=0;o<a;o++){var c=r.charCodeAt(o);if((4294967168&c)==0)s++;else if((4294965248&c)==0)s+=2;else if((4294901760&c)==0)s+=3;else{if((4292870144&c)!=0)throw"e";s+=4}}return s}},i.F={},i.F.deflateRaw=function(r,a,s,o){var c=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],f=i.F.U,h=i.F._goodIndex;i.F._hash;var p=i.F._putsE,v=0,y=s<<3,_=0,E=r.length;if(o==0){for(;v<E;)p(a,y,v+(B=Math.min(65535,E-v))==E?1:0),y=i.F._copyExact(r,v,B,a,y+8),v+=B;return y>>>3}var S=f.lits,w=f.strt,I=f.prev,P=0,D=0,z=0,k=0,U=0,R=0;for(E>2&&(w[R=i.F._hash(r,0)]=0),v=0;v<E;v++){if(U=R,v+1<E-2){R=i.F._hash(r,v+1);var M=v+1&32767;I[M]=w[R],w[R]=M}if(_<=v){(P>14e3||D>26697)&&E-v>100&&(_<v&&(S[P]=v-_,P+=2,_=v),y=i.F._writeBlock(v==E-1||_==E?1:0,S,P,k,r,z,v-z,a,y),P=D=k=0,z=v);var L=0;v<E-2&&(L=i.F._bestMatch(r,v,I,U,Math.min(c[2],E-v),c[3]));var B=L>>>16,V=65535&L;if(L!=0){V=65535&L;var j=h(B=L>>>16,f.of0);f.lhst[257+j]++;var Z=h(V,f.df0);f.dhst[Z]++,k+=f.exb[j]+f.dxb[Z],S[P]=B<<23|v-_,S[P+1]=V<<16|j<<8|Z,P+=2,_=v+B}else f.lhst[r[v]]++;D++}}for(z==v&&r.length!=0||(_<v&&(S[P]=v-_,P+=2,_=v),y=i.F._writeBlock(1,S,P,k,r,z,v-z,a,y),P=0,D=0,P=D=k=0,z=v);(7&y)!=0;)y++;return y>>>3},i.F._bestMatch=function(r,a,s,o,c,f){var h=32767&a,p=s[h],v=h-p+32768&32767;if(p==h||o!=i.F._hash(r,a-v))return 0;for(var y=0,_=0,E=Math.min(32767,a);v<=E&&--f!=0&&p!=h;){if(y==0||r[a+y]==r[a+y-v]){var S=i.F._howLong(r,a,v);if(S>y){if(_=v,(y=S)>=c)break;v+2<S&&(S=v+2);for(var w=0,I=0;I<S-2;I++){var P=a-v+I+32768&32767,D=P-s[P]+32768&32767;D>w&&(w=D,p=P)}}}v+=(h=p)-(p=s[h])+32768&32767}return y<<16|_},i.F._howLong=function(r,a,s){if(r[a]!=r[a-s]||r[a+1]!=r[a+1-s]||r[a+2]!=r[a+2-s])return 0;var o=a,c=Math.min(r.length,a+258);for(a+=3;a<c&&r[a]==r[a-s];)a++;return a-o},i.F._hash=function(r,a){return(r[a]<<8|r[a+1])+(r[a+2]<<4)&65535},i.saved=0,i.F._writeBlock=function(r,a,s,o,c,f,h,p,v){var y,_,E,S,w,I,P,D,z,k=i.F.U,U=i.F._putsF,R=i.F._putsE;k.lhst[256]++,_=(y=i.F.getTrees())[0],E=y[1],S=y[2],w=y[3],I=y[4],P=y[5],D=y[6],z=y[7];var M=32+((v+3&7)==0?0:8-(v+3&7))+(h<<3),L=o+i.F.contSize(k.fltree,k.lhst)+i.F.contSize(k.fdtree,k.dhst),B=o+i.F.contSize(k.ltree,k.lhst)+i.F.contSize(k.dtree,k.dhst);B+=14+3*P+i.F.contSize(k.itree,k.ihst)+(2*k.ihst[16]+3*k.ihst[17]+7*k.ihst[18]);for(var V=0;V<286;V++)k.lhst[V]=0;for(V=0;V<30;V++)k.dhst[V]=0;for(V=0;V<19;V++)k.ihst[V]=0;var j=M<L&&M<B?0:L<B?1:2;if(U(p,v,r),U(p,v+1,j),v+=3,j==0){for(;(7&v)!=0;)v++;v=i.F._copyExact(c,f,h,p,v)}else{var Z,J;if(j==1&&(Z=k.fltree,J=k.fdtree),j==2){i.F.makeCodes(k.ltree,_),i.F.revCodes(k.ltree,_),i.F.makeCodes(k.dtree,E),i.F.revCodes(k.dtree,E),i.F.makeCodes(k.itree,S),i.F.revCodes(k.itree,S),Z=k.ltree,J=k.dtree,R(p,v,w-257),R(p,v+=5,I-1),R(p,v+=5,P-4),v+=4;for(var G=0;G<P;G++)R(p,v+3*G,k.itree[1+(k.ordr[G]<<1)]);v+=3*P,v=i.F._codeTiny(D,k.itree,p,v),v=i.F._codeTiny(z,k.itree,p,v)}for(var $=f,ae=0;ae<s;ae+=2){for(var le=a[ae],ue=le>>>23,Q=$+(8388607&le);$<Q;)v=i.F._writeLit(c[$++],Z,p,v);if(ue!=0){var re=a[ae+1],ye=re>>16,de=re>>8&255,xe=255&re;R(p,v=i.F._writeLit(257+de,Z,p,v),ue-k.of0[de]),v+=k.exb[de],U(p,v=i.F._writeLit(xe,J,p,v),ye-k.df0[xe]),v+=k.dxb[xe],$+=ue}}v=i.F._writeLit(256,Z,p,v)}return v},i.F._copyExact=function(r,a,s,o,c){var f=c>>>3;return o[f]=s,o[f+1]=s>>>8,o[f+2]=255-o[f],o[f+3]=255-o[f+1],f+=4,o.set(new Uint8Array(r.buffer,a,s),f),c+(s+4<<3)},i.F.getTrees=function(){for(var r=i.F.U,a=i.F._hufTree(r.lhst,r.ltree,15),s=i.F._hufTree(r.dhst,r.dtree,15),o=[],c=i.F._lenCodes(r.ltree,o),f=[],h=i.F._lenCodes(r.dtree,f),p=0;p<o.length;p+=2)r.ihst[o[p]]++;for(p=0;p<f.length;p+=2)r.ihst[f[p]]++;for(var v=i.F._hufTree(r.ihst,r.itree,7),y=19;y>4&&r.itree[1+(r.ordr[y-1]<<1)]==0;)y--;return[a,s,v,c,h,y,o,f]},i.F.getSecond=function(r){for(var a=[],s=0;s<r.length;s+=2)a.push(r[s+1]);return a},i.F.nonZero=function(r){for(var a="",s=0;s<r.length;s+=2)r[s+1]!=0&&(a+=(s>>1)+",");return a},i.F.contSize=function(r,a){for(var s=0,o=0;o<a.length;o++)s+=a[o]*r[1+(o<<1)];return s},i.F._codeTiny=function(r,a,s,o){for(var c=0;c<r.length;c+=2){var f=r[c],h=r[c+1];o=i.F._writeLit(f,a,s,o);var p=f==16?2:f==17?3:7;f>15&&(i.F._putsE(s,o,h,p),o+=p)}return o},i.F._lenCodes=function(r,a){for(var s=r.length;s!=2&&r[s-1]==0;)s-=2;for(var o=0;o<s;o+=2){var c=r[o+1],f=o+3<s?r[o+3]:-1,h=o+5<s?r[o+5]:-1,p=o==0?-1:r[o-1];if(c==0&&f==c&&h==c){for(var v=o+5;v+2<s&&r[v+2]==c;)v+=2;(y=Math.min(v+1-o>>>1,138))<11?a.push(17,y-3):a.push(18,y-11),o+=2*y-2}else if(c==p&&f==c&&h==c){for(v=o+5;v+2<s&&r[v+2]==c;)v+=2;var y=Math.min(v+1-o>>>1,6);a.push(16,y-3),o+=2*y-2}else a.push(c,0)}return s>>>1},i.F._hufTree=function(r,a,s){var o=[],c=r.length,f=a.length,h=0;for(h=0;h<f;h+=2)a[h]=0,a[h+1]=0;for(h=0;h<c;h++)r[h]!=0&&o.push({lit:h,f:r[h]});var p=o.length,v=o.slice(0);if(p==0)return 0;if(p==1){var y=o[0].lit;return v=y==0?1:0,a[1+(y<<1)]=1,a[1+(v<<1)]=1,1}o.sort((function(D,z){return D.f-z.f}));var _=o[0],E=o[1],S=0,w=1,I=2;for(o[0]={lit:-1,f:_.f+E.f,l:_,r:E,d:0};w!=p-1;)_=S!=w&&(I==p||o[S].f<o[I].f)?o[S++]:o[I++],E=S!=w&&(I==p||o[S].f<o[I].f)?o[S++]:o[I++],o[w++]={lit:-1,f:_.f+E.f,l:_,r:E};var P=i.F.setDepth(o[w-1],0);for(P>s&&(i.F.restrictDepth(v,s,P),P=s),h=0;h<p;h++)a[1+(v[h].lit<<1)]=v[h].d;return P},i.F.setDepth=function(r,a){return r.lit!=-1?(r.d=a,a):Math.max(i.F.setDepth(r.l,a+1),i.F.setDepth(r.r,a+1))},i.F.restrictDepth=function(r,a,s){var o=0,c=1<<s-a,f=0;for(r.sort((function(p,v){return v.d==p.d?p.f-v.f:v.d-p.d})),o=0;o<r.length&&r[o].d>a;o++){var h=r[o].d;r[o].d=a,f+=c-(1<<s-h)}for(f>>>=s-a;f>0;)(h=r[o].d)<a?(r[o].d++,f-=1<<a-h-1):o++;for(;o>=0;o--)r[o].d==a&&f<0&&(r[o].d--,f++);f!=0&&console.log("debt left")},i.F._goodIndex=function(r,a){var s=0;return a[16|s]<=r&&(s|=16),a[8|s]<=r&&(s|=8),a[4|s]<=r&&(s|=4),a[2|s]<=r&&(s|=2),a[1|s]<=r&&(s|=1),s},i.F._writeLit=function(r,a,s,o){return i.F._putsF(s,o,a[r<<1]),o+a[1+(r<<1)]},i.F.inflate=function(r,a){var s=Uint8Array;if(r[0]==3&&r[1]==0)return a||new s(0);var o=i.F,c=o._bitsF,f=o._bitsE,h=o._decodeTiny,p=o.makeCodes,v=o.codes2map,y=o._get17,_=o.U,E=a==null;E&&(a=new s(r.length>>>2<<3));for(var S,w,I=0,P=0,D=0,z=0,k=0,U=0,R=0,M=0,L=0;I==0;)if(I=c(r,L,1),P=c(r,L+1,2),L+=3,P!=0){if(E&&(a=i.F._check(a,M+(1<<17))),P==1&&(S=_.flmap,w=_.fdmap,U=511,R=31),P==2){D=f(r,L,5)+257,z=f(r,L+5,5)+1,k=f(r,L+10,4)+4,L+=14;for(var B=0;B<38;B+=2)_.itree[B]=0,_.itree[B+1]=0;var V=1;for(B=0;B<k;B++){var j=f(r,L+3*B,3);_.itree[1+(_.ordr[B]<<1)]=j,j>V&&(V=j)}L+=3*k,p(_.itree,V),v(_.itree,V,_.imap),S=_.lmap,w=_.dmap,L=h(_.imap,(1<<V)-1,D+z,r,L,_.ttree);var Z=o._copyOut(_.ttree,0,D,_.ltree);U=(1<<Z)-1;var J=o._copyOut(_.ttree,D,z,_.dtree);R=(1<<J)-1,p(_.ltree,Z),v(_.ltree,Z,S),p(_.dtree,J),v(_.dtree,J,w)}for(;;){var G=S[y(r,L)&U];L+=15&G;var $=G>>>4;if(!($>>>8))a[M++]=$;else{if($==256)break;var ae=M+$-254;if($>264){var le=_.ldef[$-257];ae=M+(le>>>3)+f(r,L,7&le),L+=7&le}var ue=w[y(r,L)&R];L+=15&ue;var Q=ue>>>4,re=_.ddef[Q],ye=(re>>>4)+c(r,L,15&re);for(L+=15&re,E&&(a=i.F._check(a,M+(1<<17)));M<ae;)a[M]=a[M++-ye],a[M]=a[M++-ye],a[M]=a[M++-ye],a[M]=a[M++-ye];M=ae}}}else{(7&L)!=0&&(L+=8-(7&L));var de=4+(L>>>3),xe=r[de-4]|r[de-3]<<8;E&&(a=i.F._check(a,M+xe)),a.set(new s(r.buffer,r.byteOffset+de,xe),M),L=de+xe<<3,M+=xe}return a.length==M?a:a.slice(0,M)},i.F._check=function(r,a){var s=r.length;if(a<=s)return r;var o=new Uint8Array(Math.max(s<<1,a));return o.set(r,0),o},i.F._decodeTiny=function(r,a,s,o,c,f){for(var h=i.F._bitsE,p=i.F._get17,v=0;v<s;){var y=r[p(o,c)&a];c+=15&y;var _=y>>>4;if(_<=15)f[v]=_,v++;else{var E=0,S=0;_==16?(S=3+h(o,c,2),c+=2,E=f[v-1]):_==17?(S=3+h(o,c,3),c+=3):_==18&&(S=11+h(o,c,7),c+=7);for(var w=v+S;v<w;)f[v]=E,v++}}return c},i.F._copyOut=function(r,a,s,o){for(var c=0,f=0,h=o.length>>>1;f<s;){var p=r[f+a];o[f<<1]=0,o[1+(f<<1)]=p,p>c&&(c=p),f++}for(;f<h;)o[f<<1]=0,o[1+(f<<1)]=0,f++;return c},i.F.makeCodes=function(r,a){for(var s,o,c,f,h=i.F.U,p=r.length,v=h.bl_count,y=0;y<=a;y++)v[y]=0;for(y=1;y<p;y+=2)v[r[y]]++;var _=h.next_code;for(s=0,v[0]=0,o=1;o<=a;o++)s=s+v[o-1]<<1,_[o]=s;for(c=0;c<p;c+=2)(f=r[c+1])!=0&&(r[c]=_[f],_[f]++)},i.F.codes2map=function(r,a,s){for(var o=r.length,c=i.F.U.rev15,f=0;f<o;f+=2)if(r[f+1]!=0)for(var h=f>>1,p=r[f+1],v=h<<4|p,y=a-p,_=r[f]<<y,E=_+(1<<y);_!=E;)s[c[_]>>>15-a]=v,_++},i.F.revCodes=function(r,a){for(var s=i.F.U.rev15,o=15-a,c=0;c<r.length;c+=2){var f=r[c]<<a-r[c+1];r[c]=s[f]>>>o}},i.F._putsE=function(r,a,s){s<<=7&a;var o=a>>>3;r[o]|=s,r[o+1]|=s>>>8},i.F._putsF=function(r,a,s){s<<=7&a;var o=a>>>3;r[o]|=s,r[o+1]|=s>>>8,r[o+2]|=s>>>16},i.F._bitsE=function(r,a,s){return(r[a>>>3]|r[1+(a>>>3)]<<8)>>>(7&a)&(1<<s)-1},i.F._bitsF=function(r,a,s){return(r[a>>>3]|r[1+(a>>>3)]<<8|r[2+(a>>>3)]<<16)>>>(7&a)&(1<<s)-1},i.F._get17=function(r,a){return(r[a>>>3]|r[1+(a>>>3)]<<8|r[2+(a>>>3)]<<16)>>>(7&a)},i.F._get25=function(r,a){return(r[a>>>3]|r[1+(a>>>3)]<<8|r[2+(a>>>3)]<<16|r[3+(a>>>3)]<<24)>>>(7&a)},i.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var r=i.F.U,a=0;a<32768;a++){var s=a;s=(4278255360&(s=(4042322160&(s=(3435973836&(s=(2863311530&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,r.rev15[a]=(s>>>16|s<<16)>>>17}function o(c,f,h){for(;f--!=0;)c.push(0,h)}for(a=0;a<32;a++)r.ldef[a]=r.of0[a]<<3|r.exb[a],r.ddef[a]=r.df0[a]<<4|r.dxb[a];o(r.fltree,144,8),o(r.fltree,112,9),o(r.fltree,24,7),o(r.fltree,8,8),i.F.makeCodes(r.fltree,9),i.F.codes2map(r.fltree,9,r.flmap),i.F.revCodes(r.fltree,9),o(r.fdtree,32,5),i.F.makeCodes(r.fdtree,5),i.F.codes2map(r.fdtree,5,r.fdmap),i.F.revCodes(r.fdtree,5),o(r.itree,19,0),o(r.ltree,286,0),o(r.dtree,30,0),o(r.ttree,320,0)})()})();var UNe=DNe({__proto__:null,default:CA},[CA]);const Pc=(function(){var n={nextZero(h,p){for(;h[p]!=0;)p++;return p},readUshort:(h,p)=>h[p]<<8|h[p+1],writeUshort(h,p,v){h[p]=v>>8&255,h[p+1]=255&v},readUint:(h,p)=>16777216*h[p]+(h[p+1]<<16|h[p+2]<<8|h[p+3]),writeUint(h,p,v){h[p]=v>>24&255,h[p+1]=v>>16&255,h[p+2]=v>>8&255,h[p+3]=255&v},readASCII(h,p,v){let y="";for(let _=0;_<v;_++)y+=String.fromCharCode(h[p+_]);return y},writeASCII(h,p,v){for(let y=0;y<v.length;y++)h[p+y]=v.charCodeAt(y)},readBytes(h,p,v){const y=[];for(let _=0;_<v;_++)y.push(h[p+_]);return y},pad:h=>h.length<2?`0${h}`:h,readUTF8(h,p,v){let y,_="";for(let E=0;E<v;E++)_+=`%${n.pad(h[p+E].toString(16))}`;try{y=decodeURIComponent(_)}catch{return n.readASCII(h,p,v)}return y}};function e(h,p,v,y){const _=p*v,E=a(y),S=Math.ceil(p*E/8),w=new Uint8Array(4*_),I=new Uint32Array(w.buffer),{ctype:P}=y,{depth:D}=y,z=n.readUshort;if(P==6){const le=_<<2;if(D==8)for(var k=0;k<le;k+=4)w[k]=h[k],w[k+1]=h[k+1],w[k+2]=h[k+2],w[k+3]=h[k+3];if(D==16)for(k=0;k<le;k++)w[k]=h[k<<1]}else if(P==2){const le=y.tabs.tRNS;if(le==null){if(D==8)for(k=0;k<_;k++){var U=3*k;I[k]=255<<24|h[U+2]<<16|h[U+1]<<8|h[U]}if(D==16)for(k=0;k<_;k++)U=6*k,I[k]=255<<24|h[U+4]<<16|h[U+2]<<8|h[U]}else{var R=le[0];const ue=le[1],Q=le[2];if(D==8)for(k=0;k<_;k++){var M=k<<2;U=3*k,I[k]=255<<24|h[U+2]<<16|h[U+1]<<8|h[U],h[U]==R&&h[U+1]==ue&&h[U+2]==Q&&(w[M+3]=0)}if(D==16)for(k=0;k<_;k++)M=k<<2,U=6*k,I[k]=255<<24|h[U+4]<<16|h[U+2]<<8|h[U],z(h,U)==R&&z(h,U+2)==ue&&z(h,U+4)==Q&&(w[M+3]=0)}}else if(P==3){const le=y.tabs.PLTE,ue=y.tabs.tRNS,Q=ue?ue.length:0;if(D==1)for(var L=0;L<v;L++){var B=L*S,V=L*p;for(k=0;k<p;k++){M=V+k<<2;var j=3*(Z=h[B+(k>>3)]>>7-((7&k)<<0)&1);w[M]=le[j],w[M+1]=le[j+1],w[M+2]=le[j+2],w[M+3]=Z<Q?ue[Z]:255}}if(D==2)for(L=0;L<v;L++)for(B=L*S,V=L*p,k=0;k<p;k++)M=V+k<<2,j=3*(Z=h[B+(k>>2)]>>6-((3&k)<<1)&3),w[M]=le[j],w[M+1]=le[j+1],w[M+2]=le[j+2],w[M+3]=Z<Q?ue[Z]:255;if(D==4)for(L=0;L<v;L++)for(B=L*S,V=L*p,k=0;k<p;k++)M=V+k<<2,j=3*(Z=h[B+(k>>1)]>>4-((1&k)<<2)&15),w[M]=le[j],w[M+1]=le[j+1],w[M+2]=le[j+2],w[M+3]=Z<Q?ue[Z]:255;if(D==8)for(k=0;k<_;k++){var Z;M=k<<2,j=3*(Z=h[k]),w[M]=le[j],w[M+1]=le[j+1],w[M+2]=le[j+2],w[M+3]=Z<Q?ue[Z]:255}}else if(P==4){if(D==8)for(k=0;k<_;k++){M=k<<2;var J=h[G=k<<1];w[M]=J,w[M+1]=J,w[M+2]=J,w[M+3]=h[G+1]}if(D==16)for(k=0;k<_;k++){var G;M=k<<2,J=h[G=k<<2],w[M]=J,w[M+1]=J,w[M+2]=J,w[M+3]=h[G+2]}}else if(P==0)for(R=y.tabs.tRNS?y.tabs.tRNS:-1,L=0;L<v;L++){const le=L*S,ue=L*p;if(D==1)for(var $=0;$<p;$++){var ae=(J=255*(h[le+($>>>3)]>>>7-(7&$)&1))==255*R?0:255;I[ue+$]=ae<<24|J<<16|J<<8|J}else if(D==2)for($=0;$<p;$++)ae=(J=85*(h[le+($>>>2)]>>>6-((3&$)<<1)&3))==85*R?0:255,I[ue+$]=ae<<24|J<<16|J<<8|J;else if(D==4)for($=0;$<p;$++)ae=(J=17*(h[le+($>>>1)]>>>4-((1&$)<<2)&15))==17*R?0:255,I[ue+$]=ae<<24|J<<16|J<<8|J;else if(D==8)for($=0;$<p;$++)ae=(J=h[le+$])==R?0:255,I[ue+$]=ae<<24|J<<16|J<<8|J;else if(D==16)for($=0;$<p;$++)J=h[le+($<<1)],ae=z(h,le+($<<1))==R?0:255,I[ue+$]=ae<<24|J<<16|J<<8|J}return w}function t(h,p,v,y){const _=a(h),E=Math.ceil(v*_/8),S=new Uint8Array((E+1+h.interlace)*y);return p=h.tabs.CgBI?r(p,S):i(p,S),h.interlace==0?p=s(p,h,0,v,y):h.interlace==1&&(p=(function(I,P){const D=P.width,z=P.height,k=a(P),U=k>>3,R=Math.ceil(D*k/8),M=new Uint8Array(z*R);let L=0;const B=[0,0,4,0,2,0,1],V=[0,4,0,2,0,1,0],j=[8,8,8,4,4,2,2],Z=[8,8,4,4,2,2,1];let J=0;for(;J<7;){const $=j[J],ae=Z[J];let le=0,ue=0,Q=B[J];for(;Q<z;)Q+=$,ue++;let re=V[J];for(;re<D;)re+=ae,le++;const ye=Math.ceil(le*k/8);s(I,P,L,le,ue);let de=0,xe=B[J];for(;xe<z;){let ve=V[J],Te=L+de*ye<<3;for(;ve<D;){var G;if(k==1&&(G=(G=I[Te>>3])>>7-(7&Te)&1,M[xe*R+(ve>>3)]|=G<<7-((7&ve)<<0)),k==2&&(G=(G=I[Te>>3])>>6-(7&Te)&3,M[xe*R+(ve>>2)]|=G<<6-((3&ve)<<1)),k==4&&(G=(G=I[Te>>3])>>4-(7&Te)&15,M[xe*R+(ve>>1)]|=G<<4-((1&ve)<<2)),k>=8){const Ze=xe*R+ve*U;for(let be=0;be<U;be++)M[Ze+be]=I[(Te>>3)+be]}Te+=k,ve+=ae}de++,xe+=$}le*ue!=0&&(L+=ue*(1+ye)),J+=1}return M})(p,h)),p}function i(h,p){return r(new Uint8Array(h.buffer,2,h.length-6),p)}var r=(function(){const h={H:{}};return h.H.N=function(p,v){const y=Uint8Array;let _,E,S=0,w=0,I=0,P=0,D=0,z=0,k=0,U=0,R=0;if(p[0]==3&&p[1]==0)return v||new y(0);const M=h.H,L=M.b,B=M.e,V=M.R,j=M.n,Z=M.A,J=M.Z,G=M.m,$=v==null;for($&&(v=new y(p.length>>>2<<5));S==0;)if(S=L(p,R,1),w=L(p,R+1,2),R+=3,w!=0){if($&&(v=h.H.W(v,U+(1<<17))),w==1&&(_=G.J,E=G.h,z=511,k=31),w==2){I=B(p,R,5)+257,P=B(p,R+5,5)+1,D=B(p,R+10,4)+4,R+=14;let le=1;for(var ae=0;ae<38;ae+=2)G.Q[ae]=0,G.Q[ae+1]=0;for(ae=0;ae<D;ae++){const re=B(p,R+3*ae,3);G.Q[1+(G.X[ae]<<1)]=re,re>le&&(le=re)}R+=3*D,j(G.Q,le),Z(G.Q,le,G.u),_=G.w,E=G.d,R=V(G.u,(1<<le)-1,I+P,p,R,G.v);const ue=M.V(G.v,0,I,G.C);z=(1<<ue)-1;const Q=M.V(G.v,I,P,G.D);k=(1<<Q)-1,j(G.C,ue),Z(G.C,ue,_),j(G.D,Q),Z(G.D,Q,E)}for(;;){const le=_[J(p,R)&z];R+=15&le;const ue=le>>>4;if(!(ue>>>8))v[U++]=ue;else{if(ue==256)break;{let Q=U+ue-254;if(ue>264){const ve=G.q[ue-257];Q=U+(ve>>>3)+B(p,R,7&ve),R+=7&ve}const re=E[J(p,R)&k];R+=15&re;const ye=re>>>4,de=G.c[ye],xe=(de>>>4)+L(p,R,15&de);for(R+=15&de;U<Q;)v[U]=v[U++-xe],v[U]=v[U++-xe],v[U]=v[U++-xe],v[U]=v[U++-xe];U=Q}}}}else{(7&R)!=0&&(R+=8-(7&R));const le=4+(R>>>3),ue=p[le-4]|p[le-3]<<8;$&&(v=h.H.W(v,U+ue)),v.set(new y(p.buffer,p.byteOffset+le,ue),U),R=le+ue<<3,U+=ue}return v.length==U?v:v.slice(0,U)},h.H.W=function(p,v){const y=p.length;if(v<=y)return p;const _=new Uint8Array(y<<1);return _.set(p,0),_},h.H.R=function(p,v,y,_,E,S){const w=h.H.e,I=h.H.Z;let P=0;for(;P<y;){const D=p[I(_,E)&v];E+=15&D;const z=D>>>4;if(z<=15)S[P]=z,P++;else{let k=0,U=0;z==16?(U=3+w(_,E,2),E+=2,k=S[P-1]):z==17?(U=3+w(_,E,3),E+=3):z==18&&(U=11+w(_,E,7),E+=7);const R=P+U;for(;P<R;)S[P]=k,P++}}return E},h.H.V=function(p,v,y,_){let E=0,S=0;const w=_.length>>>1;for(;S<y;){const I=p[S+v];_[S<<1]=0,_[1+(S<<1)]=I,I>E&&(E=I),S++}for(;S<w;)_[S<<1]=0,_[1+(S<<1)]=0,S++;return E},h.H.n=function(p,v){const y=h.H.m,_=p.length;let E,S,w,I;const P=y.j;for(var D=0;D<=v;D++)P[D]=0;for(D=1;D<_;D+=2)P[p[D]]++;const z=y.K;for(E=0,P[0]=0,S=1;S<=v;S++)E=E+P[S-1]<<1,z[S]=E;for(w=0;w<_;w+=2)I=p[w+1],I!=0&&(p[w]=z[I],z[I]++)},h.H.A=function(p,v,y){const _=p.length,E=h.H.m.r;for(let S=0;S<_;S+=2)if(p[S+1]!=0){const w=S>>1,I=p[S+1],P=w<<4|I,D=v-I;let z=p[S]<<D;const k=z+(1<<D);for(;z!=k;)y[E[z]>>>15-v]=P,z++}},h.H.l=function(p,v){const y=h.H.m.r,_=15-v;for(let E=0;E<p.length;E+=2){const S=p[E]<<v-p[E+1];p[E]=y[S]>>>_}},h.H.M=function(p,v,y){y<<=7&v;const _=v>>>3;p[_]|=y,p[_+1]|=y>>>8},h.H.I=function(p,v,y){y<<=7&v;const _=v>>>3;p[_]|=y,p[_+1]|=y>>>8,p[_+2]|=y>>>16},h.H.e=function(p,v,y){return(p[v>>>3]|p[1+(v>>>3)]<<8)>>>(7&v)&(1<<y)-1},h.H.b=function(p,v,y){return(p[v>>>3]|p[1+(v>>>3)]<<8|p[2+(v>>>3)]<<16)>>>(7&v)&(1<<y)-1},h.H.Z=function(p,v){return(p[v>>>3]|p[1+(v>>>3)]<<8|p[2+(v>>>3)]<<16)>>>(7&v)},h.H.i=function(p,v){return(p[v>>>3]|p[1+(v>>>3)]<<8|p[2+(v>>>3)]<<16|p[3+(v>>>3)]<<24)>>>(7&v)},h.H.m=(function(){const p=Uint16Array,v=Uint32Array;return{K:new p(16),j:new p(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new p(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new v(32),J:new p(512),_:[],h:new p(32),$:[],w:new p(32768),C:[],v:[],d:new p(32768),D:[],u:new p(512),Q:[],r:new p(32768),s:new v(286),Y:new v(30),a:new v(19),t:new v(15e3),k:new p(65536),g:new p(32768)}})(),(function(){const p=h.H.m;for(var v=0;v<32768;v++){let _=v;_=(2863311530&_)>>>1|(1431655765&_)<<1,_=(3435973836&_)>>>2|(858993459&_)<<2,_=(4042322160&_)>>>4|(252645135&_)<<4,_=(4278255360&_)>>>8|(16711935&_)<<8,p.r[v]=(_>>>16|_<<16)>>>17}function y(_,E,S){for(;E--!=0;)_.push(0,S)}for(v=0;v<32;v++)p.q[v]=p.S[v]<<3|p.T[v],p.c[v]=p.p[v]<<4|p.z[v];y(p._,144,8),y(p._,112,9),y(p._,24,7),y(p._,8,8),h.H.n(p._,9),h.H.A(p._,9,p.J),h.H.l(p._,9),y(p.$,32,5),h.H.n(p.$,5),h.H.A(p.$,5,p.h),h.H.l(p.$,5),y(p.Q,19,0),y(p.C,286,0),y(p.D,30,0),y(p.v,320,0)})(),h.H.N})();function a(h){return[1,null,3,1,2,null,4][h.ctype]*h.depth}function s(h,p,v,y,_){let E=a(p);const S=Math.ceil(y*E/8);let w,I;E=Math.ceil(E/8);let P=h[v],D=0;if(P>1&&(h[v]=[0,0,1][P-2]),P==3)for(D=E;D<S;D++)h[D+1]=h[D+1]+(h[D+1-E]>>>1)&255;for(let z=0;z<_;z++)if(w=v+z*S,I=w+z+1,P=h[I-1],D=0,P==0)for(;D<S;D++)h[w+D]=h[I+D];else if(P==1){for(;D<E;D++)h[w+D]=h[I+D];for(;D<S;D++)h[w+D]=h[I+D]+h[w+D-E]}else if(P==2)for(;D<S;D++)h[w+D]=h[I+D]+h[w+D-S];else if(P==3){for(;D<E;D++)h[w+D]=h[I+D]+(h[w+D-S]>>>1);for(;D<S;D++)h[w+D]=h[I+D]+(h[w+D-S]+h[w+D-E]>>>1)}else{for(;D<E;D++)h[w+D]=h[I+D]+o(0,h[w+D-S],0);for(;D<S;D++)h[w+D]=h[I+D]+o(h[w+D-E],h[w+D-S],h[w+D-E-S])}return h}function o(h,p,v){const y=h+p-v,_=y-h,E=y-p,S=y-v;return _*_<=E*E&&_*_<=S*S?h:E*E<=S*S?p:v}function c(h,p,v){v.width=n.readUint(h,p),p+=4,v.height=n.readUint(h,p),p+=4,v.depth=h[p],p++,v.ctype=h[p],p++,v.compress=h[p],p++,v.filter=h[p],p++,v.interlace=h[p],p++}function f(h,p,v,y,_,E,S,w,I){const P=Math.min(p,_),D=Math.min(v,E);let z=0,k=0;for(let J=0;J<D;J++)for(let G=0;G<P;G++)if(S>=0&&w>=0?(z=J*p+G<<2,k=(w+J)*_+S+G<<2):(z=(-w+J)*p-S+G<<2,k=J*_+G<<2),I==0)y[k]=h[z],y[k+1]=h[z+1],y[k+2]=h[z+2],y[k+3]=h[z+3];else if(I==1){var U=h[z+3]*.00392156862745098,R=h[z]*U,M=h[z+1]*U,L=h[z+2]*U,B=y[k+3]*(1/255),V=y[k]*B,j=y[k+1]*B,Z=y[k+2]*B;const $=1-U,ae=U+B*$,le=ae==0?0:1/ae;y[k+3]=255*ae,y[k+0]=(R+V*$)*le,y[k+1]=(M+j*$)*le,y[k+2]=(L+Z*$)*le}else if(I==2)U=h[z+3],R=h[z],M=h[z+1],L=h[z+2],B=y[k+3],V=y[k],j=y[k+1],Z=y[k+2],U==B&&R==V&&M==j&&L==Z?(y[k]=0,y[k+1]=0,y[k+2]=0,y[k+3]=0):(y[k]=R,y[k+1]=M,y[k+2]=L,y[k+3]=U);else if(I==3){if(U=h[z+3],R=h[z],M=h[z+1],L=h[z+2],B=y[k+3],V=y[k],j=y[k+1],Z=y[k+2],U==B&&R==V&&M==j&&L==Z)continue;if(U<220&&B>20)return!1}return!0}return{decode:function(p){const v=new Uint8Array(p);let y=8;const _=n,E=_.readUshort,S=_.readUint,w={tabs:{},frames:[]},I=new Uint8Array(v.length);let P,D=0,z=0;const k=[137,80,78,71,13,10,26,10];for(var U=0;U<8;U++)if(v[U]!=k[U])throw"The input is not a PNG file!";for(;y<v.length;){const J=_.readUint(v,y);y+=4;const G=_.readASCII(v,y,4);if(y+=4,G=="IHDR")c(v,y,w);else if(G=="iCCP"){for(var R=y;v[R]!=0;)R++;_.readASCII(v,y,R-y),v[R+1];const $=v.slice(R+2,y+J);let ae=null;try{ae=i($)}catch{ae=r($)}w.tabs[G]=ae}else if(G=="CgBI")w.tabs[G]=v.slice(y,y+4);else if(G=="IDAT"){for(U=0;U<J;U++)I[D+U]=v[y+U];D+=J}else if(G=="acTL")w.tabs[G]={num_frames:S(v,y),num_plays:S(v,y+4)},P=new Uint8Array(v.length);else if(G=="fcTL"){z!=0&&((Z=w.frames[w.frames.length-1]).data=t(w,P.slice(0,z),Z.rect.width,Z.rect.height),z=0);const $={x:S(v,y+12),y:S(v,y+16),width:S(v,y+4),height:S(v,y+8)};let ae=E(v,y+22);ae=E(v,y+20)/(ae==0?100:ae);const le={rect:$,delay:Math.round(1e3*ae),dispose:v[y+24],blend:v[y+25]};w.frames.push(le)}else if(G=="fdAT"){for(U=0;U<J-4;U++)P[z+U]=v[y+U+4];z+=J-4}else if(G=="pHYs")w.tabs[G]=[_.readUint(v,y),_.readUint(v,y+4),v[y+8]];else if(G=="cHRM")for(w.tabs[G]=[],U=0;U<8;U++)w.tabs[G].push(_.readUint(v,y+4*U));else if(G=="tEXt"||G=="zTXt"){w.tabs[G]==null&&(w.tabs[G]={});var M=_.nextZero(v,y),L=_.readASCII(v,y,M-y),B=y+J-M-1;if(G=="tEXt")j=_.readASCII(v,M+1,B);else{var V=i(v.slice(M+2,M+2+B));j=_.readUTF8(V,0,V.length)}w.tabs[G][L]=j}else if(G=="iTXt"){w.tabs[G]==null&&(w.tabs[G]={}),M=0,R=y,M=_.nextZero(v,R),L=_.readASCII(v,R,M-R);const $=v[R=M+1];var j;v[R+1],R+=2,M=_.nextZero(v,R),_.readASCII(v,R,M-R),R=M+1,M=_.nextZero(v,R),_.readUTF8(v,R,M-R),B=J-((R=M+1)-y),$==0?j=_.readUTF8(v,R,B):(V=i(v.slice(R,R+B)),j=_.readUTF8(V,0,V.length)),w.tabs[G][L]=j}else if(G=="PLTE")w.tabs[G]=_.readBytes(v,y,J);else if(G=="hIST"){const $=w.tabs.PLTE.length/3;for(w.tabs[G]=[],U=0;U<$;U++)w.tabs[G].push(E(v,y+2*U))}else if(G=="tRNS")w.ctype==3?w.tabs[G]=_.readBytes(v,y,J):w.ctype==0?w.tabs[G]=E(v,y):w.ctype==2&&(w.tabs[G]=[E(v,y),E(v,y+2),E(v,y+4)]);else if(G=="gAMA")w.tabs[G]=_.readUint(v,y)/1e5;else if(G=="sRGB")w.tabs[G]=v[y];else if(G=="bKGD")w.ctype==0||w.ctype==4?w.tabs[G]=[E(v,y)]:w.ctype==2||w.ctype==6?w.tabs[G]=[E(v,y),E(v,y+2),E(v,y+4)]:w.ctype==3&&(w.tabs[G]=v[y]);else if(G=="IEND")break;y+=J,_.readUint(v,y),y+=4}var Z;return z!=0&&((Z=w.frames[w.frames.length-1]).data=t(w,P.slice(0,z),Z.rect.width,Z.rect.height)),w.data=t(w,I,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(p){const v=p.width,y=p.height;if(p.tabs.acTL==null)return[e(p.data,v,y,p).buffer];const _=[];p.frames[0].data==null&&(p.frames[0].data=p.data);const E=v*y*4,S=new Uint8Array(E),w=new Uint8Array(E),I=new Uint8Array(E);for(let D=0;D<p.frames.length;D++){const z=p.frames[D],k=z.rect.x,U=z.rect.y,R=z.rect.width,M=z.rect.height,L=e(z.data,R,M,p);if(D!=0)for(var P=0;P<E;P++)I[P]=S[P];if(z.blend==0?f(L,R,M,S,v,y,k,U,0):z.blend==1&&f(L,R,M,S,v,y,k,U,1),_.push(S.buffer.slice(0)),z.dispose!=0){if(z.dispose==1)f(w,R,M,S,v,y,k,U,0);else if(z.dispose==2)for(P=0;P<E;P++)S[P]=I[P]}}return _},_paeth:o,_copyTile:f,_bin:n}})();(function(){const{_copyTile:n}=Pc,{_bin:e}=Pc,t=Pc._paeth;var i={table:(function(){const R=new Uint32Array(256);for(let M=0;M<256;M++){let L=M;for(let B=0;B<8;B++)1&L?L=3988292384^L>>>1:L>>>=1;R[M]=L}return R})(),update(R,M,L,B){for(let V=0;V<B;V++)R=i.table[255&(R^M[L+V])]^R>>>8;return R},crc:(R,M,L)=>4294967295^i.update(4294967295,R,M,L)};function r(R,M,L,B){M[L]+=R[0]*B>>4,M[L+1]+=R[1]*B>>4,M[L+2]+=R[2]*B>>4,M[L+3]+=R[3]*B>>4}function a(R){return Math.max(0,Math.min(255,R))}function s(R,M){const L=R[0]-M[0],B=R[1]-M[1],V=R[2]-M[2],j=R[3]-M[3];return L*L+B*B+V*V+j*j}function o(R,M,L,B,V,j,Z){Z==null&&(Z=1);const J=B.length,G=[];for(var $=0;$<J;$++){const xe=B[$];G.push([xe>>>0&255,xe>>>8&255,xe>>>16&255,xe>>>24&255])}for($=0;$<J;$++){let xe=4294967295;for(var ae=0,le=0;le<J;le++){var ue=s(G[$],G[le]);le!=$&&ue<xe&&(xe=ue,ae=le)}}const Q=new Uint32Array(V.buffer),re=new Int16Array(M*L*4),ye=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for($=0;$<ye.length;$++)ye[$]=255*((ye[$]+.5)/16-.5);for(let xe=0;xe<L;xe++)for(let ve=0;ve<M;ve++){var de;$=4*(xe*M+ve),Z!=2?de=[a(R[$]+re[$]),a(R[$+1]+re[$+1]),a(R[$+2]+re[$+2]),a(R[$+3]+re[$+3])]:(ue=ye[4*(3&xe)+(3&ve)],de=[a(R[$]+ue),a(R[$+1]+ue),a(R[$+2]+ue),a(R[$+3]+ue)]),ae=0;let Te=16777215;for(le=0;le<J;le++){const Ve=s(de,G[le]);Ve<Te&&(Te=Ve,ae=le)}const Ze=G[ae],be=[de[0]-Ze[0],de[1]-Ze[1],de[2]-Ze[2],de[3]-Ze[3]];Z==1&&(ve!=M-1&&r(be,re,$+4,7),xe!=L-1&&(ve!=0&&r(be,re,$+4*M-4,3),r(be,re,$+4*M,5),ve!=M-1&&r(be,re,$+4*M+4,1))),j[$>>2]=ae,Q[$>>2]=B[ae]}}function c(R,M,L,B,V){V==null&&(V={});const{crc:j}=i,Z=e.writeUint,J=e.writeUshort,G=e.writeASCII;let $=8;const ae=R.frames.length>1;let le,ue=!1,Q=33+(ae?20:0);if(V.sRGB!=null&&(Q+=13),V.pHYs!=null&&(Q+=21),V.iCCP!=null&&(le=pako.deflate(V.iCCP),Q+=21+le.length+4),R.ctype==3){for(var re=R.plte.length,ye=0;ye<re;ye++)R.plte[ye]>>>24!=255&&(ue=!0);Q+=8+3*re+4+(ue?8+1*re+4:0)}for(var de=0;de<R.frames.length;de++)ae&&(Q+=38),Q+=(Ze=R.frames[de]).cimg.length+12,de!=0&&(Q+=4);Q+=12;const xe=new Uint8Array(Q),ve=[137,80,78,71,13,10,26,10];for(ye=0;ye<8;ye++)xe[ye]=ve[ye];if(Z(xe,$,13),$+=4,G(xe,$,"IHDR"),$+=4,Z(xe,$,M),$+=4,Z(xe,$,L),$+=4,xe[$]=R.depth,$++,xe[$]=R.ctype,$++,xe[$]=0,$++,xe[$]=0,$++,xe[$]=0,$++,Z(xe,$,j(xe,$-17,17)),$+=4,V.sRGB!=null&&(Z(xe,$,1),$+=4,G(xe,$,"sRGB"),$+=4,xe[$]=V.sRGB,$++,Z(xe,$,j(xe,$-5,5)),$+=4),V.iCCP!=null){const be=13+le.length;Z(xe,$,be),$+=4,G(xe,$,"iCCP"),$+=4,G(xe,$,"ICC profile"),$+=11,$+=2,xe.set(le,$),$+=le.length,Z(xe,$,j(xe,$-(be+4),be+4)),$+=4}if(V.pHYs!=null&&(Z(xe,$,9),$+=4,G(xe,$,"pHYs"),$+=4,Z(xe,$,V.pHYs[0]),$+=4,Z(xe,$,V.pHYs[1]),$+=4,xe[$]=V.pHYs[2],$++,Z(xe,$,j(xe,$-13,13)),$+=4),ae&&(Z(xe,$,8),$+=4,G(xe,$,"acTL"),$+=4,Z(xe,$,R.frames.length),$+=4,Z(xe,$,V.loop!=null?V.loop:0),$+=4,Z(xe,$,j(xe,$-12,12)),$+=4),R.ctype==3){for(Z(xe,$,3*(re=R.plte.length)),$+=4,G(xe,$,"PLTE"),$+=4,ye=0;ye<re;ye++){const be=3*ye,Ve=R.plte[ye],vt=255&Ve,Ie=Ve>>>8&255,It=Ve>>>16&255;xe[$+be+0]=vt,xe[$+be+1]=Ie,xe[$+be+2]=It}if($+=3*re,Z(xe,$,j(xe,$-3*re-4,3*re+4)),$+=4,ue){for(Z(xe,$,re),$+=4,G(xe,$,"tRNS"),$+=4,ye=0;ye<re;ye++)xe[$+ye]=R.plte[ye]>>>24&255;$+=re,Z(xe,$,j(xe,$-re-4,re+4)),$+=4}}let Te=0;for(de=0;de<R.frames.length;de++){var Ze=R.frames[de];ae&&(Z(xe,$,26),$+=4,G(xe,$,"fcTL"),$+=4,Z(xe,$,Te++),$+=4,Z(xe,$,Ze.rect.width),$+=4,Z(xe,$,Ze.rect.height),$+=4,Z(xe,$,Ze.rect.x),$+=4,Z(xe,$,Ze.rect.y),$+=4,J(xe,$,B[de]),$+=2,J(xe,$,1e3),$+=2,xe[$]=Ze.dispose,$++,xe[$]=Ze.blend,$++,Z(xe,$,j(xe,$-30,30)),$+=4);const be=Ze.cimg;Z(xe,$,(re=be.length)+(de==0?0:4)),$+=4;const Ve=$;G(xe,$,de==0?"IDAT":"fdAT"),$+=4,de!=0&&(Z(xe,$,Te++),$+=4),xe.set(be,$),$+=re,Z(xe,$,j(xe,Ve,$-Ve)),$+=4}return Z(xe,$,0),$+=4,G(xe,$,"IEND"),$+=4,Z(xe,$,j(xe,$-4,4)),$+=4,xe.buffer}function f(R,M,L){for(let B=0;B<R.frames.length;B++){const V=R.frames[B];V.rect.width;const j=V.rect.height,Z=new Uint8Array(j*V.bpl+j);V.cimg=y(V.img,j,V.bpp,V.bpl,Z,M,L)}}function h(R,M,L,B,V){const j=V[0],Z=V[1],J=V[2],G=V[3],$=V[4],ae=V[5];let le=6,ue=8,Q=255;for(var re=0;re<R.length;re++){const Le=new Uint8Array(R[re]);for(var ye=Le.length,de=0;de<ye;de+=4)Q&=Le[de+3]}const xe=Q!=255,ve=(function(Qe,oe,_t,tt,wt,at){const ne=[];for(var Y=0;Y<Qe.length;Y++){const ct=new Uint8Array(Qe[Y]),At=new Uint32Array(ct.buffer);var me;let Ut=0,et=0,st=oe,Et=_t,fe=tt?1:0;if(Y!=0){const Pe=at||tt||Y==1||ne[Y-2].dispose!=0?1:2;let xt=0,pe=1e9;for(let ut=0;ut<Pe;ut++){var Ue=new Uint8Array(Qe[Y-1-ut]);const ft=new Uint32Array(Qe[Y-1-ut]);let lt=oe,nt=_t,Ke=-1,ht=-1;for(let rn=0;rn<_t;rn++)for(let Qt=0;Qt<oe;Qt++)At[De=rn*oe+Qt]!=ft[De]&&(Qt<lt&&(lt=Qt),Qt>Ke&&(Ke=Qt),rn<nt&&(nt=rn),rn>ht&&(ht=rn));Ke==-1&&(lt=nt=Ke=ht=0),wt&&((1&lt)==1&&lt--,(1&nt)==1&&nt--);const Wt=(Ke-lt+1)*(ht-nt+1);Wt<pe&&(pe=Wt,xt=ut,Ut=lt,et=nt,st=Ke-lt+1,Et=ht-nt+1)}Ue=new Uint8Array(Qe[Y-1-xt]),xt==1&&(ne[Y-1].dispose=2),me=new Uint8Array(st*Et*4),n(Ue,oe,_t,me,st,Et,-Ut,-et,0),fe=n(ct,oe,_t,me,st,Et,-Ut,-et,3)?1:0,fe==1?v(ct,oe,_t,me,{x:Ut,y:et,width:st,height:Et}):n(ct,oe,_t,me,st,Et,-Ut,-et,0)}else me=ct.slice(0);ne.push({rect:{x:Ut,y:et,width:st,height:Et},img:me,blend:fe,dispose:0})}if(tt)for(Y=0;Y<ne.length;Y++){if((Mt=ne[Y]).blend==1)continue;const ct=Mt.rect,At=ne[Y-1].rect,Ut=Math.min(ct.x,At.x),et=Math.min(ct.y,At.y),st={x:Ut,y:et,width:Math.max(ct.x+ct.width,At.x+At.width)-Ut,height:Math.max(ct.y+ct.height,At.y+At.height)-et};ne[Y-1].dispose=1,Y-1!=0&&p(Qe,oe,_t,ne,Y-1,st,wt),p(Qe,oe,_t,ne,Y,st,wt)}let qe=0;if(Qe.length!=1)for(var De=0;De<ne.length;De++){var Mt;qe+=(Mt=ne[De]).rect.width*Mt.rect.height}return ne})(R,M,L,j,Z,J),Te={},Ze=[],be=[];if(B!=0){const Le=[];for(de=0;de<ve.length;de++)Le.push(ve[de].img.buffer);const Qe=(function(wt){let at=0;for(var ne=0;ne<wt.length;ne++)at+=wt[ne].byteLength;const Y=new Uint8Array(at);let me=0;for(ne=0;ne<wt.length;ne++){const Ue=new Uint8Array(wt[ne]),qe=Ue.length;for(let De=0;De<qe;De+=4){let Mt=Ue[De],ct=Ue[De+1],At=Ue[De+2];const Ut=Ue[De+3];Ut==0&&(Mt=ct=At=0),Y[me+De]=Mt,Y[me+De+1]=ct,Y[me+De+2]=At,Y[me+De+3]=Ut}me+=qe}return Y.buffer})(Le),oe=E(Qe,B);for(de=0;de<oe.plte.length;de++)Ze.push(oe.plte[de].est.rgba);let _t=0;for(de=0;de<ve.length;de++){const tt=(vt=ve[de]).img.length;var Ve=new Uint8Array(oe.inds.buffer,_t>>2,tt>>2);be.push(Ve);const wt=new Uint8Array(oe.abuf,_t,tt);ae&&o(vt.img,vt.rect.width,vt.rect.height,Ze,wt,Ve),vt.img.set(wt),_t+=tt}}else for(re=0;re<ve.length;re++){var vt=ve[re];const Le=new Uint32Array(vt.img.buffer);var Ie=vt.rect.width;for(ye=Le.length,Ve=new Uint8Array(ye),be.push(Ve),de=0;de<ye;de++){const Qe=Le[de];if(de!=0&&Qe==Le[de-1])Ve[de]=Ve[de-1];else if(de>Ie&&Qe==Le[de-Ie])Ve[de]=Ve[de-Ie];else{let oe=Te[Qe];if(oe==null&&(Te[Qe]=oe=Ze.length,Ze.push(Qe),Ze.length>=300))break;Ve[de]=oe}}}const It=Ze.length;for(It<=256&&$==0&&(ue=It<=2?1:It<=4?2:It<=16?4:8,ue=Math.max(ue,G)),re=0;re<ve.length;re++){(vt=ve[re]).rect.x,vt.rect.y,Ie=vt.rect.width;const Le=vt.rect.height;let Qe=vt.img;new Uint32Array(Qe.buffer);let oe=4*Ie,_t=4;if(It<=256&&$==0){oe=Math.ceil(ue*Ie/8);var Ne=new Uint8Array(oe*Le);const tt=be[re];for(let wt=0;wt<Le;wt++){de=wt*oe;const at=wt*Ie;if(ue==8)for(var je=0;je<Ie;je++)Ne[de+je]=tt[at+je];else if(ue==4)for(je=0;je<Ie;je++)Ne[de+(je>>1)]|=tt[at+je]<<4-4*(1&je);else if(ue==2)for(je=0;je<Ie;je++)Ne[de+(je>>2)]|=tt[at+je]<<6-2*(3&je);else if(ue==1)for(je=0;je<Ie;je++)Ne[de+(je>>3)]|=tt[at+je]<<7-1*(7&je)}Qe=Ne,le=3,_t=1}else if(xe==0&&ve.length==1){Ne=new Uint8Array(Ie*Le*3);const tt=Ie*Le;for(de=0;de<tt;de++){const wt=3*de,at=4*de;Ne[wt]=Qe[at],Ne[wt+1]=Qe[at+1],Ne[wt+2]=Qe[at+2]}Qe=Ne,le=2,_t=3,oe=3*Ie}vt.img=Qe,vt.bpl=oe,vt.bpp=_t}return{ctype:le,depth:ue,plte:Ze,frames:ve}}function p(R,M,L,B,V,j,Z){const J=Uint8Array,G=Uint32Array,$=new J(R[V-1]),ae=new G(R[V-1]),le=V+1<R.length?new J(R[V+1]):null,ue=new J(R[V]),Q=new G(ue.buffer);let re=M,ye=L,de=-1,xe=-1;for(let Te=0;Te<j.height;Te++)for(let Ze=0;Ze<j.width;Ze++){const be=j.x+Ze,Ve=j.y+Te,vt=Ve*M+be,Ie=Q[vt];Ie==0||B[V-1].dispose==0&&ae[vt]==Ie&&(le==null||le[4*vt+3]!=0)||(be<re&&(re=be),be>de&&(de=be),Ve<ye&&(ye=Ve),Ve>xe&&(xe=Ve))}de==-1&&(re=ye=de=xe=0),Z&&((1&re)==1&&re--,(1&ye)==1&&ye--),j={x:re,y:ye,width:de-re+1,height:xe-ye+1};const ve=B[V];ve.rect=j,ve.blend=1,ve.img=new Uint8Array(j.width*j.height*4),B[V-1].dispose==0?(n($,M,L,ve.img,j.width,j.height,-j.x,-j.y,0),v(ue,M,L,ve.img,j)):n(ue,M,L,ve.img,j.width,j.height,-j.x,-j.y,0)}function v(R,M,L,B,V){n(R,M,L,B,V.width,V.height,-V.x,-V.y,2)}function y(R,M,L,B,V,j,Z){const J=[];let G,$=[0,1,2,3,4];j!=-1?$=[j]:(M*B>5e5||L==1)&&($=[0]),Z&&(G={level:0});const ae=UNe;for(var le=0;le<$.length;le++){for(let re=0;re<M;re++)_(V,R,re,B,L,$[le]);J.push(ae.deflate(V,G))}let ue,Q=1e9;for(le=0;le<J.length;le++)J[le].length<Q&&(ue=le,Q=J[le].length);return J[ue]}function _(R,M,L,B,V,j){const Z=L*B;let J=Z+L;if(R[J]=j,J++,j==0)if(B<500)for(var G=0;G<B;G++)R[J+G]=M[Z+G];else R.set(new Uint8Array(M.buffer,Z,B),J);else if(j==1){for(G=0;G<V;G++)R[J+G]=M[Z+G];for(G=V;G<B;G++)R[J+G]=M[Z+G]-M[Z+G-V]+256&255}else if(L==0){for(G=0;G<V;G++)R[J+G]=M[Z+G];if(j==2)for(G=V;G<B;G++)R[J+G]=M[Z+G];if(j==3)for(G=V;G<B;G++)R[J+G]=M[Z+G]-(M[Z+G-V]>>1)+256&255;if(j==4)for(G=V;G<B;G++)R[J+G]=M[Z+G]-t(M[Z+G-V],0,0)+256&255}else{if(j==2)for(G=0;G<B;G++)R[J+G]=M[Z+G]+256-M[Z+G-B]&255;if(j==3){for(G=0;G<V;G++)R[J+G]=M[Z+G]+256-(M[Z+G-B]>>1)&255;for(G=V;G<B;G++)R[J+G]=M[Z+G]+256-(M[Z+G-B]+M[Z+G-V]>>1)&255}if(j==4){for(G=0;G<V;G++)R[J+G]=M[Z+G]+256-t(0,M[Z+G-B],0)&255;for(G=V;G<B;G++)R[J+G]=M[Z+G]+256-t(M[Z+G-V],M[Z+G-B],M[Z+G-V-B])&255}}}function E(R,M){const L=new Uint8Array(R),B=L.slice(0),V=new Uint32Array(B.buffer),j=S(B,M),Z=j[0],J=j[1],G=L.length,$=new Uint8Array(G>>2);let ae;if(L.length<2e7)for(var le=0;le<G;le+=4)ae=w(Z,ue=L[le]*(1/255),Q=L[le+1]*(1/255),re=L[le+2]*(1/255),ye=L[le+3]*(1/255)),$[le>>2]=ae.ind,V[le>>2]=ae.est.rgba;else for(le=0;le<G;le+=4){var ue=L[le]*.00392156862745098,Q=L[le+1]*(1/255),re=L[le+2]*(1/255),ye=L[le+3]*(1/255);for(ae=Z;ae.left;)ae=I(ae.est,ue,Q,re,ye)<=0?ae.left:ae.right;$[le>>2]=ae.ind,V[le>>2]=ae.est.rgba}return{abuf:B.buffer,inds:$,plte:J}}function S(R,M,L){L==null&&(L=1e-4);const B=new Uint32Array(R.buffer),V={i0:0,i1:R.length,bst:null,est:null,tdst:0,left:null,right:null};V.bst=z(R,V.i0,V.i1),V.est=k(V.bst);const j=[V];for(;j.length<M;){let J=0,G=0;for(var Z=0;Z<j.length;Z++)j[Z].est.L>J&&(J=j[Z].est.L,G=Z);if(J<L)break;const $=j[G],ae=P(R,B,$.i0,$.i1,$.est.e,$.est.eMq255);if($.i0>=ae||$.i1<=ae){$.est.L=0;continue}const le={i0:$.i0,i1:ae,bst:null,est:null,tdst:0,left:null,right:null};le.bst=z(R,le.i0,le.i1),le.est=k(le.bst);const ue={i0:ae,i1:$.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ue.bst={R:[],m:[],N:$.bst.N-le.bst.N},Z=0;Z<16;Z++)ue.bst.R[Z]=$.bst.R[Z]-le.bst.R[Z];for(Z=0;Z<4;Z++)ue.bst.m[Z]=$.bst.m[Z]-le.bst.m[Z];ue.est=k(ue.bst),$.left=le,$.right=ue,j[G]=le,j.push(ue)}for(j.sort(((J,G)=>G.bst.N-J.bst.N)),Z=0;Z<j.length;Z++)j[Z].ind=Z;return[V,j]}function w(R,M,L,B,V){if(R.left==null)return R.tdst=(function(le,ue,Q,re,ye){const de=ue-le[0],xe=Q-le[1],ve=re-le[2],Te=ye-le[3];return de*de+xe*xe+ve*ve+Te*Te})(R.est.q,M,L,B,V),R;const j=I(R.est,M,L,B,V);let Z=R.left,J=R.right;j>0&&(Z=R.right,J=R.left);const G=w(Z,M,L,B,V);if(G.tdst<=j*j)return G;const $=w(J,M,L,B,V);return $.tdst<G.tdst?$:G}function I(R,M,L,B,V){const{e:j}=R;return j[0]*M+j[1]*L+j[2]*B+j[3]*V-R.eMq}function P(R,M,L,B,V,j){for(B-=4;L<B;){for(;D(R,L,V)<=j;)L+=4;for(;D(R,B,V)>j;)B-=4;if(L>=B)break;const Z=M[L>>2];M[L>>2]=M[B>>2],M[B>>2]=Z,L+=4,B-=4}for(;D(R,L,V)>j;)L-=4;return L+4}function D(R,M,L){return R[M]*L[0]+R[M+1]*L[1]+R[M+2]*L[2]+R[M+3]*L[3]}function z(R,M,L){const B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],V=[0,0,0,0],j=L-M>>2;for(let Z=M;Z<L;Z+=4){const J=R[Z]*.00392156862745098,G=R[Z+1]*(1/255),$=R[Z+2]*(1/255),ae=R[Z+3]*(1/255);V[0]+=J,V[1]+=G,V[2]+=$,V[3]+=ae,B[0]+=J*J,B[1]+=J*G,B[2]+=J*$,B[3]+=J*ae,B[5]+=G*G,B[6]+=G*$,B[7]+=G*ae,B[10]+=$*$,B[11]+=$*ae,B[15]+=ae*ae}return B[4]=B[1],B[8]=B[2],B[9]=B[6],B[12]=B[3],B[13]=B[7],B[14]=B[11],{R:B,m:V,N:j}}function k(R){const{R:M}=R,{m:L}=R,{N:B}=R,V=L[0],j=L[1],Z=L[2],J=L[3],G=B==0?0:1/B,$=[M[0]-V*V*G,M[1]-V*j*G,M[2]-V*Z*G,M[3]-V*J*G,M[4]-j*V*G,M[5]-j*j*G,M[6]-j*Z*G,M[7]-j*J*G,M[8]-Z*V*G,M[9]-Z*j*G,M[10]-Z*Z*G,M[11]-Z*J*G,M[12]-J*V*G,M[13]-J*j*G,M[14]-J*Z*G,M[15]-J*J*G],ae=$,le=U;let ue=[Math.random(),Math.random(),Math.random(),Math.random()],Q=0,re=0;if(B!=0)for(let de=0;de<16&&(ue=le.multVec(ae,ue),re=Math.sqrt(le.dot(ue,ue)),ue=le.sml(1/re,ue),!(de!=0&&Math.abs(re-Q)<1e-9));de++)Q=re;const ye=[V*G,j*G,Z*G,J*G];return{Cov:$,q:ye,e:ue,L:Q,eMq255:le.dot(le.sml(255,ye),ue),eMq:le.dot(ue,ye),rgba:(Math.round(255*ye[3])<<24|Math.round(255*ye[2])<<16|Math.round(255*ye[1])<<8|Math.round(255*ye[0])<<0)>>>0}}var U={multVec:(R,M)=>[R[0]*M[0]+R[1]*M[1]+R[2]*M[2]+R[3]*M[3],R[4]*M[0]+R[5]*M[1]+R[6]*M[2]+R[7]*M[3],R[8]*M[0]+R[9]*M[1]+R[10]*M[2]+R[11]*M[3],R[12]*M[0]+R[13]*M[1]+R[14]*M[2]+R[15]*M[3]],dot:(R,M)=>R[0]*M[0]+R[1]*M[1]+R[2]*M[2]+R[3]*M[3],sml:(R,M)=>[R*M[0],R*M[1],R*M[2],R*M[3]]};Pc.encode=function(M,L,B,V,j,Z,J){V==null&&(V=0),J==null&&(J=!1);const G=h(M,L,B,V,[!1,!1,!1,0,J,!1]);return f(G,-1),c(G,L,B,j,Z)},Pc.encodeLL=function(M,L,B,V,j,Z,J,G){const $={ctype:0+(V==1?0:2)+(j==0?0:4),depth:Z,frames:[]},ae=(V+j)*Z,le=ae*L;for(let ue=0;ue<M.length;ue++)$.frames.push({rect:{x:0,y:0,width:L,height:B},img:new Uint8Array(M[ue]),blend:0,dispose:1,bpp:Math.ceil(ae/8),bpl:Math.ceil(le/8)});return f($,0,!0),c($,L,B,J,G)},Pc.encode.compress=h,Pc.encode.dither=o,Pc.quantize=E,Pc.quantize.getKDtree=S,Pc.quantize.getNearest=w})();const iY={toArrayBuffer(n,e){const t=n.width,i=n.height,r=t<<2,a=n.getContext("2d").getImageData(0,0,t,i),s=new Uint32Array(a.data.buffer),o=(32*t+31)/32<<2,c=o*i,f=122+c,h=new ArrayBuffer(f),p=new DataView(h),v=1<<20;let y,_,E,S,w=v,I=0,P=0,D=0;function z(R){p.setUint16(P,R,!0),P+=2}function k(R){p.setUint32(P,R,!0),P+=4}function U(R){P+=R}z(19778),k(f),U(4),k(122),k(108),k(t),k(-i>>>0),z(1),z(32),k(3),k(c),k(2835),k(2835),U(8),k(16711680),k(65280),k(255),k(4278190080),k(1466527264),(function R(){for(;I<i&&w>0;){for(S=122+I*o,y=0;y<r;)w--,_=s[D++],E=_>>>24,p.setUint32(S+y,_<<8|E),y+=4;I++}D<s.length?(w=v,setTimeout(R,iY._dly)):e(h)})()},toBlob(n,e){this.toArrayBuffer(n,(t=>{e(new Blob([t],{type:"image/bmp"}))}))},_dly:9};var Do={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},FNe={[Do.CHROME]:16384,[Do.FIREFOX]:11180,[Do.DESKTOP_SAFARI]:16384,[Do.IE]:8192,[Do.IOS]:4096,[Do.ETC]:8192};const Ck=typeof window<"u",rY=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,IA=Ck&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),zNe=(Ck||rY)&&(IA&&IA.getOriginalSymbol(window,"File")||typeof File<"u"&&File),aY=(Ck||rY)&&(IA&&IA.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Ik(n,e,t=Date.now()){return new Promise((i=>{const r=n.split(","),a=r[0].match(/:(.*?);/)[1],s=globalThis.atob(r[1]);let o=s.length;const c=new Uint8Array(o);for(;o--;)c[o]=s.charCodeAt(o);const f=new Blob([c],{type:a});f.name=e,f.lastModified=t,i(f)}))}function sY(n){return new Promise(((e,t)=>{const i=new aY;i.onload=()=>e(i.result),i.onerror=r=>t(r),i.readAsDataURL(n)}))}function oY(n){return new Promise(((e,t)=>{const i=new Image;i.onload=()=>e(i),i.onerror=r=>t(r),i.src=n}))}function Gm(){if(Gm.cachedResult!==void 0)return Gm.cachedResult;let n=Do.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?n=Do.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?n=Do.IOS:/Safari/i.test(e)?n=Do.DESKTOP_SAFARI:/Firefox/i.test(e)?n=Do.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(n=Do.IE),Gm.cachedResult=n,Gm.cachedResult}function lY(n,e){const t=Gm(),i=FNe[t];let r=n,a=e,s=r*a;const o=r>a?a/r:r/a;for(;s>i*i;){const c=(i+r)/2,f=(i+a)/2;c<f?(a=f,r=f*o):(a=c*o,r=c),s=r*a}return{width:r,height:a}}function MC(n,e){let t,i;try{if(t=new OffscreenCanvas(n,e),i=t.getContext("2d"),i===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),i=t.getContext("2d")}return t.width=n,t.height=e,[t,i]}function cY(n,e){const{width:t,height:i}=lY(n.width,n.height),[r,a]=MC(t,i);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,r.width,r.height)),a.drawImage(n,0,0,r.width,r.height),r}function vE(){return vE.cachedResult!==void 0||(vE.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),vE.cachedResult}function RA(n,e={}){return new Promise((function(t,i){let r,a;var s=function(){try{return a=cY(r,e.fileType||n.type),t([r,a])}catch(c){return i(c)}},o=function(c){try{var f=function(h){try{throw h}catch(p){return i(p)}};try{let h;return sY(n).then((function(p){try{return h=p,oY(h).then((function(v){try{return r=v,(function(){try{return s()}catch(y){return i(y)}})()}catch(y){return f(y)}}),f)}catch(v){return f(v)}}),f)}catch(h){f(h)}}catch(h){return i(h)}};try{if(vE()||[Do.DESKTOP_SAFARI,Do.MOBILE_SAFARI].includes(Gm()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(n).then((function(c){try{return r=c,s()}catch{return o()}}),o)}catch{o()}}))}function PA(n,e,t,i,r=1){return new Promise((function(a,s){let o;if(e==="image/png"){let p,v,y;return p=n.getContext("2d"),{data:v}=p.getImageData(0,0,n.width,n.height),y=Pc.encode([v.buffer],n.width,n.height,4096*r),o=new Blob([y],{type:e}),o.name=t,o.lastModified=i,c.call(this)}{let p=function(){return c.call(this)};var f=p;if(e==="image/bmp")return new Promise((v=>iY.toBlob(n,v))).then((function(v){try{return o=v,o.name=t,o.lastModified=i,p.call(this)}catch(y){return s(y)}}).bind(this),s);{let v=function(){return p.call(this)};var h=v;if(typeof OffscreenCanvas=="function"&&n instanceof OffscreenCanvas)return n.convertToBlob({type:e,quality:r}).then((function(y){try{return o=y,o.name=t,o.lastModified=i,v.call(this)}catch(_){return s(_)}}).bind(this),s);{let y;return y=n.toDataURL(e,r),Ik(y,t,i).then((function(_){try{return o=_,v.call(this)}catch(E){return s(E)}}).bind(this),s)}}}function c(){return a(o)}}))}function Lu(n){n.width=0,n.height=0}function pv(){return new Promise((function(n,e){let t,i,r,a;return pv.cachedResult!==void 0?n(pv.cachedResult):Ik("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(s){try{return t=s,RA(t).then((function(o){try{return i=o[1],PA(i,t.type,t.name,t.lastModified).then((function(c){try{return r=c,Lu(i),RA(r).then((function(f){try{return a=f[0],pv.cachedResult=a.width===1&&a.height===2,n(pv.cachedResult)}catch(h){return e(h)}}),e)}catch(f){return e(f)}}),e)}catch(c){return e(c)}}),e)}catch(o){return e(o)}}),e)}))}function uY(n){return new Promise(((e,t)=>{const i=new aY;i.onload=r=>{const a=new DataView(r.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const s=a.byteLength;let o=2;for(;o<s;){if(a.getUint16(o+2,!1)<=8)return e(-1);const c=a.getUint16(o,!1);if(o+=2,c==65505){if(a.getUint32(o+=2,!1)!=1165519206)return e(-1);const f=a.getUint16(o+=6,!1)==18761;o+=a.getUint32(o+4,f);const h=a.getUint16(o,f);o+=2;for(let p=0;p<h;p++)if(a.getUint16(o+12*p,f)==274)return e(a.getUint16(o+12*p+8,f))}else{if((65280&c)!=65280)break;o+=a.getUint16(o,!1)}}return e(-1)},i.onerror=r=>t(r),i.readAsArrayBuffer(n)}))}function fY(n,e){const{width:t}=n,{height:i}=n,{maxWidthOrHeight:r}=e;let a,s=n;return isFinite(r)&&(t>r||i>r)&&([s,a]=MC(t,i),t>i?(s.width=r,s.height=i/t*r):(s.width=t/i*r,s.height=r),a.drawImage(n,0,0,s.width,s.height),Lu(n)),s}function hY(n,e){const{width:t}=n,{height:i}=n,[r,a]=MC(t,i);switch(e>4&&e<9?(r.width=i,r.height=t):(r.width=t,r.height=i),e){case 2:a.transform(-1,0,0,1,t,0);break;case 3:a.transform(-1,0,0,-1,t,i);break;case 4:a.transform(1,0,0,-1,0,i);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,i,0);break;case 7:a.transform(0,-1,-1,0,i,t);break;case 8:a.transform(0,-1,1,0,0,t)}return a.drawImage(n,0,0,t,i),Lu(n),r}function HV(n,e,t=0){return new Promise((function(i,r){let a,s,o,c,f,h,p,v,y,_,E,S,w,I,P,D,z,k,U,R;function M(B=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=B,e.onProgress(Math.min(a,100))}function L(B){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(B,a),100),e.onProgress(a)}return a=t,s=e.maxIteration||10,o=1024*e.maxSizeMB*1024,M(),RA(n,e).then((function(B){try{return[,c]=B,M(),f=fY(c,e),M(),new Promise((function(V,j){var Z;if(!(Z=e.exifOrientation))return uY(n).then((function(G){try{return Z=G,J.call(this)}catch($){return j($)}}).bind(this),j);function J(){return V(Z)}return J.call(this)})).then((function(V){try{return h=V,M(),pv().then((function(j){try{return p=j?f:hY(f,h),M(),v=e.initialQuality||1,y=e.fileType||n.type,PA(p,y,n.name,n.lastModified,v).then((function(Z){try{{let ae=function(){if(s--&&(P>o||P>w)){let ue,Q;return ue=R?.95*U.width:U.width,Q=R?.95*U.height:U.height,[z,k]=MC(ue,Q),k.drawImage(U,0,0,ue,Q),v*=y==="image/png"?.85:.95,PA(z,y,n.name,n.lastModified,v).then((function(re){try{return D=re,Lu(U),U=z,P=D.size,L(Math.min(99,Math.floor((I-P)/(I-o)*100))),ae}catch(ye){return r(ye)}}),r)}return[1]},le=function(){return Lu(U),Lu(z),Lu(f),Lu(p),Lu(c),L(100),i(D)};var G=ae,$=le;if(_=Z,M(),E=_.size>o,S=_.size>n.size,!E&&!S)return L(100),i(_);var J;return w=n.size,I=_.size,P=I,U=p,R=!e.alwaysKeepResolution&&E,(J=(function(ue){for(;ue;){if(ue.then)return void ue.then(J,r);try{if(ue.pop){if(ue.length)return ue.pop()?le.call(this):ue;ue=ae}else ue=ue.call(this)}catch(Q){return r(Q)}}}).bind(this))(ae)}}catch(ae){return r(ae)}}).bind(this),r)}catch(Z){return r(Z)}}).bind(this),r)}catch(j){return r(j)}}).bind(this),r)}catch(V){return r(V)}}).bind(this),r)}))}const BNe=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let aN;function VNe(n,e){return new Promise(((t,i)=>{aN||(aN=(function(s){const o=[];return o.push(s),URL.createObjectURL(new Blob(o))})(BNe));const r=new Worker(aN);r.addEventListener("message",(function(s){if(e.signal&&e.signal.aborted)r.terminate();else if(s.data.progress===void 0){if(s.data.error)return i(new Error(s.data.error)),void r.terminate();t(s.data.file),r.terminate()}else e.onProgress(s.data.progress)})),r.addEventListener("error",i),e.signal&&e.signal.addEventListener("abort",(()=>{i(e.signal.reason),r.terminate()})),r.postMessage({file:n,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function Ka(n,e){return new Promise((function(t,i){let r,a,s,o,c,f;if(r={...e},s=0,{onProgress:o}=r,r.maxSizeMB=r.maxSizeMB||Number.POSITIVE_INFINITY,c=typeof r.useWebWorker!="boolean"||r.useWebWorker,delete r.useWebWorker,r.onProgress=y=>{s=y,typeof o=="function"&&o(s)},!(n instanceof Blob||n instanceof zNe))return i(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(n.type))return i(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!c||typeof Worker!="function"||f)return HV(n,r).then((function(y){try{return a=y,v.call(this)}catch(_){return i(_)}}).bind(this),i);var h=(function(){try{return v.call(this)}catch(y){return i(y)}}).bind(this),p=function(y){try{return HV(n,r).then((function(_){try{return a=_,h()}catch(E){return i(E)}}),i)}catch(_){return i(_)}};try{return r.libURL=r.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",VNe(n,r).then((function(y){try{return a=y,h()}catch{return p()}}),p)}catch{p()}function v(){try{a.name=n.name,a.lastModified=n.lastModified}catch{}try{r.preserveExif&&n.type==="image/jpeg"&&(!r.fileType||r.fileType&&r.fileType===n.type)&&(a=nY(n,a))}catch{}return t(a)}}))}Ka.getDataUrlFromFile=sY,Ka.getFilefromDataUrl=Ik,Ka.loadImage=oY,Ka.drawImageInCanvas=cY,Ka.drawFileInCanvas=RA,Ka.canvasToFile=PA,Ka.getExifOrientation=uY,Ka.handleMaxWidthOrHeight=fY,Ka.followExifOrientation=hY,Ka.cleanupCanvasMemory=Lu,Ka.isAutoOrientationInBrowser=pv,Ka.approximateBelowMaximumCanvasSizeOfBrowser=lY,Ka.copyExifWithoutOrientation=nY,Ka.getBrowserName=Gm,Ka.version="2.0.2";const jNe=()=>{var di,Ii,Er,kr,$r,ls,lo;const{clients:n,orders:e,leads:t,user:i,loadingAuth:r,login:a,logout:s,addClient:o,updateClient:c,addOrder:f,updateOrder:h,updateOrderStatus:p,deleteOrder:v,addLead:y,updateLead:_,deleteLead:E,expenses:S,addExpense:w,deleteExpense:I}=BM(),P=he=>{switch(he){case"pedido":return"bg-brand-orange/20 text-brand-orange border-brand-orange/30";case"proceso":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"terminado":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"entregado":return"bg-green-500/20 text-green-400 border-green-500/30";default:return"bg-slate-900 border-slate-600 text-slate-300"}},[D,z]=q.useState("dashboard"),[k,U]=q.useState(!1),[R,M]=q.useState(!1),[L,B]=q.useState(null),[V,j]=q.useState(!1),[Z,J]=q.useState(!1),[G,$]=q.useState(!1),[ae,le]=q.useState(!0),[ue,Q]=q.useState(null),[re,ye]=q.useState(null),[de,xe]=q.useState(null),[ve,Te]=q.useState(null),[Ze,be]=q.useState([{desc:"",qty:1,price:0}]),[Ve,vt]=q.useState(0),[Ie,It]=q.useState(null);q.useMemo(()=>{const he=Ze.reduce((We,gt)=>We+parseFloat(gt.price||0)*parseFloat(gt.qty||1),0);vt(he)},[Ze]);const[Ne,je]=q.useState({status:"all",clientId:""}),[Le,Qe]=q.useState(""),[oe,_t]=q.useState(0),tt=30,[wt,at]=q.useState({status:"all",search:""}),[ne,Y]=q.useState({key:null,direction:"asc"}),[me,Ue]=q.useState({date:"",method:"all"}),[qe,De]=q.useState({key:"name",direction:"asc"}),Mt=()=>be([...Ze,{desc:"",qty:1,price:0}]),ct=he=>be(Ze.filter((We,gt)=>gt!==he)),At=(he,We,gt)=>{const Vt=[...Ze];Vt[he][We]=gt,be(Vt)},Ut=q.useMemo(()=>{let he=e.filter(We=>{const gt=wt.search.toLowerCase(),Vt=n.find(Oe=>Oe.id===We.clientId),en=Vt?Vt.name.toLowerCase():(We.client||"").toLowerCase(),_n=Vt?Vt.email.toLowerCase():"",ee=gt===""||We.id.toLowerCase().includes(gt)||en.includes(gt)||_n.includes(gt),Se=wt.status==="all"||We.status===wt.status;return ee&&Se});return ne.key&&he.sort((We,gt)=>{let Vt=We[ne.key],en=gt[ne.key];if(ne.key==="deadline"&&(Vt=Vt||"",en=en||""),ne.key==="status"){const _n={pedido:0,proceso:1,terminado:2,entregado:3};Vt=_n[Vt]??99,en=_n[en]??99}return Vt<en?ne.direction==="asc"?-1:1:Vt>en?ne.direction==="asc"?1:-1:0}),he},[e,n,wt,ne]),et=q.useMemo(()=>S.filter(he=>{const We=me.date===""||he.date===me.date,gt=me.method==="all"||he.method===me.method;return We&&gt}),[S,me]),st=he=>{let We="asc";ne.key===he&&ne.direction==="asc"&&(We="desc"),Y({key:he,direction:We})},Et=he=>{let We="asc";qe.key===he&&qe.direction==="asc"&&(We="desc"),De({key:he,direction:We})},fe=q.useMemo(()=>{let he=n.map(We=>({...We,orderCount:e.filter(gt=>gt.clientId===We.id).length}));if(Le){const We=Le.toLowerCase();he=he.filter(gt=>gt.name.toLowerCase().includes(We)||gt.email&&gt.email.toLowerCase().includes(We)||gt.phone&&gt.phone.includes(We))}return qe.key&&he.sort((We,gt)=>{let Vt=We[qe.key],en=gt[qe.key];return typeof Vt=="string"&&(Vt=Vt.toLowerCase()),typeof en=="string"&&(en=en.toLowerCase()),Vt<en?qe.direction==="asc"?-1:1:Vt>en?qe.direction==="asc"?1:-1:0}),he},[n,e,Le,qe]);if(r)return N.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-900 text-white",children:"Cargando..."});if(!i)return N.jsx("div",{className:"flex flex-col items-center justify-center h-screen bg-slate-900 text-white p-4",children:N.jsxs("div",{className:"bg-slate-800 p-8 rounded-2xl border border-slate-700 text-center max-w-md w-full",children:[N.jsxs("h1",{className:"font-display font-bold text-3xl mb-2",children:["Tuna's ",N.jsx("span",{className:"text-brand-orange",children:"Admin"})]}),N.jsx("p",{className:"text-slate-400 mb-8",children:"Inicia sesin para gestionar tu negocio."}),N.jsxs("button",{onClick:a,className:"w-full bg-white text-gray-900 font-bold py-3 px-4 rounded-xl flex items-center justify-center gap-3 hover:bg-gray-100 transition-colors",children:[N.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",className:"w-6 h-6",alt:"Google"}),"Acceder con Google"]})]})});const Pe=he=>{const We=he.target.files[0];if(!We)return;const gt=new FileReader;gt.onload=Vt=>{try{importDatabase(JSON.parse(Vt.target.result)),alert("Base de datos importada.")}catch{alert("Error JSON")}},gt.readAsText(We)},xt=he=>{he.preventDefault();const We=new FormData(he.target);w({concept:We.get("concept"),amount:We.get("amount"),date:We.get("date"),method:We.get("method")}),he.target.reset(),alert("Gasto registrado")},pe=he=>{he.preventDefault();const We=new FormData(he.target),gt=We.get("street"),Vt=We.get("colony"),en=We.get("zip"),_n=We.get("state"),ee=`${gt}, Col. ${Vt}, ${en}, ${_n}`;o({name:We.get("name"),type:We.get("type"),email:We.get("email"),phone:We.get("phone"),facebook:We.get("facebook"),instagram:We.get("instagram"),address:ee,street:gt,colony:Vt,zip:en,state:_n}),J(!1)},ut=he=>{he.preventDefault();const We=new FormData(he.target),gt=We.get("street"),Vt=We.get("colony"),en=We.get("zip"),_n=We.get("state"),ee=`${gt}, Col. ${Vt}, ${en}, ${_n}`;c(de.id,{name:We.get("name"),email:We.get("email"),phone:We.get("phone"),facebook:We.get("facebook"),instagram:We.get("instagram"),type:We.get("type"),address:ee,street:gt,colony:Vt,zip:en,state:_n}),xe(null)},ft=he=>{he.preventDefault();const We=new FormData(he.target),gt=We.get("clientId");let Vt=We.get("manualName"),en=We.get("manualEmail"),_n=We.get("manualPhone");if(gt&&gt!=="manual"){const Se=n.find(Oe=>Oe.id===gt);Se&&(Vt=Se.name,en=Se.email,_n=Se.phone)}const ee={clientId:gt!=="manual"?gt:null,name:Vt,email:en,phone:_n,details:We.get("details"),quantity:We.get("quantity")};try{y(ee),$(!1),alert("Cotizacin creada correctamente")}catch(Se){console.error("Error adding lead:",Se),alert("Error al crear la cotizacin")}},lt=he=>{he.preventDefault();const We=new FormData(he.target),gt=L.leadId,Vt=We.get("name"),en=We.get("email"),_n=We.get("phone"),ee=We.get("street"),Se=We.get("colony"),Oe=We.get("zip"),Re=We.get("state"),Ee=`${ee}, Col. ${Se}, ${Oe}, ${Re}`,yt=We.get("itemDesc"),Nt=parseFloat(We.get("itemQty")),pt=parseFloat(We.get("itemPrice")),Lt=parseFloat(We.get("total")),Ft=We.get("deadline"),jt=parseFloat(We.get("advance")||0);let Ot=null;const $t=n.find(wn=>en&&wn.email===en||_n&&wn.phone===_n);$t?(Ot=$t.id,c($t.id,{name:Vt,email:en,phone:_n,type:$t.type,address:Ee,street:ee,colony:Se,zip:Oe,state:Re})):Ot=o({name:Vt,email:en,phone:_n,type:"normal",address:Ee,street:ee,colony:Se,zip:Oe,state:Re}).id,f({clientId:Ot,items:[{desc:yt,qty:Nt,price:pt.toFixed(2)}],total:Lt.toFixed(2),advance:jt.toFixed(2),deliveryLocation:Ee,status:"pedido",date:new Date().toLocaleDateString("es-MX"),deadline:Ft}),updateLeadStatus(gt,"Aceptada"),B(null)},nt=async(he,We)=>{const gt=e.find(_n=>_n.id===he);if(!gt||!gt.items)return;const Vt=[...gt.items],en=Vt[We].completed||!1;Vt[We]={...Vt[We],completed:!en};try{await h(he,{items:Vt})}catch(_n){console.error("Error toggling item:",_n),alert("Error al actualizar el artculo.")}},Ke=async he=>{const We=he.target.files[0];if(!We)return;const gt={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,fileType:"image/webp"};try{const Vt=await Ka(We,gt),en=pz(mz,`orders/${ue.orderId}/${Date.now()}_${We.name}`);await hz(en,Vt);const _n=await dz(en);await h(ue.orderId,{progressImage:_n}),Q(null),alert("Imagen subida con xito")}catch(Vt){console.error("Error uploading image:",Vt),alert("Error al subir la imagen.")}},ht=async he=>{var We;he.preventDefault(),M(!0);try{const gt=new FormData(he.target),Vt=gt.get("clientId");let en=Vt;if(Vt==="new"){const Re=gt.get("newClientName"),Ee=gt.get("newClientContact"),yt="normal",Nt=gt.get("newClientStreet"),pt=gt.get("newClientColony"),Lt=gt.get("newClientZip"),Ft=gt.get("newClientState"),jt=gt.get("newClientPhone"),Ot=`${Nt}, Col. ${pt}, ${Lt}, ${Ft}`;en=(await o({name:Re,email:Ee,phone:jt,type:yt,address:Ot,street:Nt,colony:pt,zip:Lt,state:Ft})).id}const _n=parseFloat(gt.get("advance")||0);if(_n>Ve){alert("El anticipo no puede ser mayor al total del pedido."),M(!1);return}const ee={clientId:en,items:Ze.map(Re=>({...Re,price:parseFloat(Re.price).toFixed(2)})),total:Ve.toFixed(2),advance:_n.toFixed(2),remaining:(Ve-_n).toFixed(2),deliveryLocation:gt.get("delivery"),status:"pedido",date:new Date().toLocaleDateString("es-MX"),deadline:gt.get("deadline"),evidenceLink:gt.get("evidenceLink")};let Se=Ie;Ie?(await h(Ie,{...ee,status:(We=e.find(Re=>Re.id===Ie))==null?void 0:We.status}),alert("Pedido actualizado")):Se=(await f(ee)).id;const Oe=gt.get("orderImage");if(Oe&&Oe.size>0)try{const Ee=await Ka(Oe,{maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,fileType:"image/webp"}),yt=pz(mz,`orders/${Se}/${Date.now()}_${Oe.name}`);await hz(yt,Ee);const Nt=await dz(yt);await h(Se,{progressImage:Nt})}catch(Re){console.error("Error uploading form image:",Re),alert("El pedido se guard pero hubo un error subiendo la imagen.")}j(!1),It(null),be([{desc:"",qty:1,price:0}])}catch(gt){console.error("Error saving order:",gt),alert("Error al guardar pedido: "+gt.message)}finally{M(!1)}},Wt=he=>{It(he.id),be(he.items||[]),j(!0)},rn=he=>{confirm("Ests seguro de eliminar este pedido?")&&v(he)},Qt=he=>{confirm("Ests seguro de eliminar este cliente?")&&deleteClient(he)},Ei=he=>{const We=n.find(Oe=>Oe.id===he.clientId),gt=(We==null?void 0:We.phone)||he.phone;if(!gt){alert("Este pedido no tiene un nmero de telfono asociado.");return}const Vt=gt.replace(/\D/g,""),en=`${window.location.origin}/status`,_n=he.items.map(Oe=>`- ${Oe.qty}x ${Oe.desc}`).join(`
`),ee=`Hola ${(We==null?void 0:We.name)||"Cliente"}, tu pedido #${he.id.slice(-4)} tiene un estatus de *${he.status}*.

Resumen:
${_n}
        
Puedes revisar el avance y detalles aqu: ${en}
        
Saludos, Tuna's Craft `,Se=`https://wa.me/${Vt}?text=${encodeURIComponent(ee)}`;window.open(Se,"_blank")},Bi=e.reduce((he,We)=>he+parseFloat(We.total||0),0),ka=e.reduce((he,We)=>he+parseFloat(We.advance||0),0),Ds=e.reduce((he,We)=>he+parseFloat(We.remaining||We.total-(We.advance||0)||0),0),Ls=S.reduce((he,We)=>he+parseFloat(We.amount||0),0),Ua=Bi-Ls,oa=t.filter(he=>he.status==="Nuevo"||he.status==="Pendiente").length,jo=t.filter(he=>he.status==="Rechazada").length,Lr=t.filter(he=>!(Ne.status!=="all"&&he.status!==Ne.status||Ne.clientId&&!he.id.includes(Ne.clientId))).slice(oe*tt,(oe+1)*tt);return N.jsxs("div",{className:"flex h-screen bg-slate-900 text-slate-100 font-sans overflow-hidden relative",children:[N.jsx("button",{onClick:()=>U(!k),className:"md:hidden absolute top-6 right-6 z-50 p-2 bg-slate-800 rounded-lg text-white shadow-lg border border-slate-700",children:k?N.jsx(J_,{size:24}):N.jsx(S9,{size:24})}),k&&N.jsx("div",{className:"fixed inset-0 bg-black/80 z-40 md:hidden",onClick:()=>U(!1)}),N.jsxs("aside",{className:`
                fixed md:static top-0 left-0 h-full w-64 bg-slate-800 border-r border-slate-700 
                flex flex-col p-6 z-40 transition-transform duration-300 ease-in-out
                ${k?"translate-x-0":"-translate-x-full md:translate-x-0"}
             `,children:[N.jsxs("h1",{className:"font-display font-bold text-2xl text-white mb-8 ml-8 md:ml-0",children:["Tuna's ",N.jsx("span",{className:"text-brand-orange",children:"Admin"})]}),N.jsxs("nav",{className:"space-y-2 flex-1",children:[N.jsx(i_,{id:"dashboard",icon:N.jsx(gT,{}),label:"Dashboard",active:D,set:he=>{z(he),U(!1)}}),N.jsx(i_,{id:"orders",icon:N.jsx(Q_,{}),label:"Pedidos",active:D,set:he=>{z(he),U(!1)}}),N.jsx(i_,{id:"leads",icon:N.jsx(joe,{}),label:"Cotizaciones",active:D,set:he=>{z(he),U(!1)}}),N.jsx(i_,{id:"clients",icon:N.jsx(rle,{}),label:"Clientes",active:D,set:he=>{z(he),U(!1)}}),N.jsx(i_,{id:"expenses",icon:N.jsx(Loe,{}),label:"Gastos",active:D,set:he=>{z(he),U(!1)}})]}),N.jsxs("div",{className:"mt-auto pt-6 border-t border-slate-700 space-y-2",children:[N.jsxs(il,{to:"/",className:"flex items-center gap-2 text-slate-400 hover:text-white px-2",children:[N.jsx(yM,{size:16})," Ir al Sitio"]}),N.jsxs("label",{className:"w-full bg-slate-700 hover:bg-slate-600 p-2 rounded text-center items-center justify-center flex cursor-pointer gap-2 text-sm",children:[N.jsx(O2,{size:14})," Importar DB",N.jsx("input",{type:"file",className:"hidden",accept:".json",onChange:Pe})]}),N.jsxs("button",{onClick:s,className:"w-full bg-red-900/30 hover:bg-red-900/50 text-red-200 p-2 rounded flex items-center justify-center gap-2 text-sm transition-colors",children:[N.jsx(Am,{size:14})," Cerrar Sesin"]})]})]}),N.jsxs("main",{className:"flex-1 overflow-y-auto p-8 relative",children:[D==="dashboard"&&N.jsxs("div",{className:"space-y-6",children:[N.jsx("h2",{className:"text-3xl font-display font-bold md:ml-0 ml-12",children:"Resumen"}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[N.jsx(Pd,{title:"Ventas Totales",value:`$${Bi.toFixed(2)}`,icon:N.jsx(Uoe,{className:"text-brand-blue"})}),N.jsx(Pd,{title:"Gastos Totales",value:`$${Ls.toFixed(2)}`,color:"text-red-400"}),N.jsx(Pd,{title:"Ganancia Neta",value:`$${Ua.toFixed(2)}`,color:Ua>=0?"text-green-400":"text-red-500"}),N.jsx(Pd,{title:"Cobrado",value:`$${ka.toFixed(2)}`,color:"text-green-500"}),N.jsx(Pd,{title:"Por Cobrar",value:`$${Ds.toFixed(2)}`,color:"text-brand-orange"}),N.jsx(Pd,{title:"Pedidos Activos",value:e.filter(he=>he.status!=="entregado").length}),N.jsx(Pd,{title:"Cotizaciones Activas",value:oa,color:"text-blue-400"}),N.jsx(Pd,{title:"Cot. Rechazadas",value:jo,color:"text-red-400"})]}),N.jsx(ONe,{orders:e})]}),D==="orders"&&N.jsxs("div",{children:[N.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[N.jsx("h2",{className:"text-3xl font-display font-bold md:ml-0 ml-12",children:"Pedidos"}),N.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto",children:[N.jsxs(il,{to:"/venta-tienda",className:"bg-brand-orange hover:bg-orange-600 px-4 py-2 rounded-lg font-bold flex items-center justify-center gap-2 transition-colors",children:[N.jsx(E9,{size:18})," Venta Mostrador"]}),N.jsxs("div",{className:"relative w-full md:w-auto",children:[N.jsx("input",{placeholder:"Buscar (ID, Cliente, Correo)...",className:"bg-slate-800 border border-slate-600 rounded-lg pl-3 pr-10 py-2 w-full md:w-64 text-sm focus:outline-none focus:border-brand-blue",value:wt.search,onChange:he=>at({...wt,search:he.target.value})}),wt.search&&N.jsx("button",{onClick:()=>at({...wt,search:""}),className:"absolute right-3 top-2.5 text-slate-400 hover:text-white",children:""})]}),N.jsxs("select",{className:"bg-slate-800 border border-slate-600 rounded-lg p-2 text-sm focus:outline-none focus:border-brand-blue",value:wt.status,onChange:he=>at({...wt,status:he.target.value}),children:[N.jsx("option",{value:"all",children:"Todos los Estatus"}),N.jsx("option",{value:"pedido",children:"Pedido"}),N.jsx("option",{value:"proceso",children:"En Proceso"}),N.jsx("option",{value:"terminado",children:"Terminado"}),N.jsx("option",{value:"entregado",children:"Entregado"})]}),N.jsxs("button",{onClick:()=>j(!0),className:"bg-brand-blue hover:bg-blue-600 px-4 py-2 rounded-lg font-bold flex items-center justify-center gap-2",children:[N.jsx(nv,{size:18})," Nuevo Pedido"]})]})]}),N.jsx("div",{className:"bg-slate-800 rounded-xl overflow-hidden border border-slate-700 overflow-x-auto",children:N.jsxs("table",{className:"w-full text-left min-w-[800px]",children:[N.jsx("thead",{className:"bg-slate-700/50 text-slate-300",children:N.jsxs("tr",{children:[N.jsx("th",{className:"p-4",children:"ID"}),N.jsx("th",{className:"p-4",children:"Cliente"}),N.jsx("th",{className:"p-4",children:"Lugar"}),N.jsx("th",{className:"p-4 text-center",children:"Arts."}),N.jsx("th",{className:"p-4 cursor-pointer hover:text-white transition-colors select-none",onClick:()=>st("deadline"),children:N.jsxs("div",{className:"flex items-center gap-1",children:["Fecha Entrega",ne.key==="deadline"&&N.jsx(C2,{size:14,className:ne.direction==="asc"?"text-brand-blue":"text-brand-orange"})]})}),N.jsx("th",{className:"p-4",children:"Restante"}),N.jsx("th",{className:"p-4 cursor-pointer hover:text-white transition-colors select-none",onClick:()=>st("status"),children:N.jsxs("div",{className:"flex items-center gap-1",children:["Estatus",ne.key==="status"&&N.jsx(C2,{size:14,className:ne.direction==="asc"?"text-brand-blue":"text-brand-orange"})]})}),N.jsx("th",{className:"p-4",children:"Total"}),N.jsx("th",{className:"p-4 text-center",children:"Acciones"})]})}),N.jsx("tbody",{className:"divide-y divide-slate-700",children:Ut.map(he=>{var We;return N.jsxs("tr",{className:"hover:bg-slate-700/30",children:[N.jsxs("td",{className:"p-4 text-xs text-slate-500",children:["#",he.id.slice(-4)]}),N.jsx("td",{className:"p-4 font-medium",children:he.client||((We=n.find(gt=>gt.id===he.clientId))==null?void 0:We.name)||"Unknown"}),N.jsx("td",{className:"p-4 text-sm text-slate-400",children:he.deliveryLocation||"Sin ubicacin"}),N.jsxs("td",{className:"p-4 text-center",children:[N.jsx("div",{className:"font-bold text-sm mb-1",children:he.items?he.items.length:1}),N.jsx("div",{className:"flex flex-col gap-1 max-w-[200px] mx-auto",children:he.items&&he.items.map((gt,Vt)=>N.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[N.jsx("input",{type:"checkbox",checked:gt.completed||!1,onChange:()=>nt(he.id,Vt),className:"cursor-pointer rounded border-slate-600 bg-slate-700 text-brand-blue focus:ring-brand-blue",title:"Marcar como listo"}),N.jsxs("span",{className:`text-[10px] leading-tight truncate ${gt.completed?"text-green-400 line-through decoration-green-400/50":"text-slate-400"}`,children:[gt.qty,"x ",gt.desc]})]},Vt))})]}),N.jsx("td",{className:"p-4 text-sm text-slate-400",children:he.deadline||"Pendiente"}),N.jsxs("td",{className:"p-4 text-brand-orange font-bold",children:["$",he.remaining]}),N.jsx("td",{className:"p-4",children:N.jsx("div",{className:"flex flex-col gap-2",children:N.jsxs("select",{value:he.status,onChange:gt=>p(he.id,gt.target.value),className:`border rounded text-xs p-2 w-full font-bold ${P(he.status)}`,children:[N.jsx("option",{value:"pedido",className:"bg-slate-900 text-slate-300",children:"Pedido"}),N.jsx("option",{value:"proceso",className:"bg-slate-900 text-slate-300",children:"En Proceso"}),N.jsx("option",{value:"terminado",className:"bg-slate-900 text-slate-300",children:"Terminado"}),N.jsx("option",{value:"entregado",className:"bg-slate-900 text-slate-300",children:"Entregado"})]})})}),N.jsxs("td",{className:"p-4 font-bold",children:["$",he.total]}),N.jsx("td",{className:"p-4",children:N.jsxs("div",{className:"flex justify-center items-center gap-2",children:[N.jsx("button",{onClick:()=>ye({type:"order",data:he}),className:"p-2 text-brand-orange hover:bg-brand-orange/20 rounded-full transition-colors",title:"Ver Detalles",children:N.jsx(I2,{size:18})}),N.jsx("button",{onClick:()=>Wt(he),className:"p-2 text-blue-400 hover:bg-blue-400/20 rounded-full transition-colors",title:"Editar",children:N.jsx(N2,{size:18})}),N.jsx("button",{onClick:()=>Q({orderId:he.id}),className:"p-2 text-purple-400 hover:bg-purple-400/20 rounded-full transition-colors",title:"Subir Foto",children:N.jsx(O2,{size:18})}),N.jsx("button",{onClick:()=>Ei(he),className:"p-2 text-green-400 hover:bg-green-400/20 rounded-full transition-colors",title:"Enviar WhatsApp",children:N.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",className:"w-4 h-4",alt:"WA"})}),N.jsx("button",{onClick:()=>rn(he.id),className:"p-2 text-red-400 hover:bg-red-400/20 rounded-full transition-colors",title:"Eliminar",children:N.jsx(Am,{size:18})})]})})]},he.id)})})]})})]}),D==="clients"&&N.jsxs("div",{children:[N.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[N.jsx("h2",{className:"text-3xl font-display font-bold",children:"Clientes"}),N.jsxs("div",{className:"flex w-full md:w-auto gap-2",children:[N.jsxs("div",{className:"relative flex-1 md:w-64",children:[N.jsx(w9,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",size:16}),N.jsx("input",{type:"text",placeholder:"Buscar cliente...",value:Le,onChange:he=>Qe(he.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg pl-10 pr-4 py-2 text-sm focus:outline-none focus:border-brand-blue"})]}),N.jsxs("button",{onClick:()=>J(!0),className:"bg-brand-blue hover:bg-blue-600 px-4 py-2 rounded-lg font-bold flex items-center gap-2 whitespace-nowrap",children:[N.jsx(nv,{size:18})," Nuevo"]})]})]}),N.jsx("div",{className:"bg-slate-800 rounded-xl overflow-hidden border border-slate-700 overflow-x-auto",children:N.jsxs("table",{className:"w-full text-left min-w-[800px]",children:[N.jsx("thead",{className:"bg-slate-700/50 text-slate-300",children:N.jsxs("tr",{children:[N.jsx("th",{className:"p-4 cursor-pointer hover:text-white",onClick:()=>Et("name"),children:N.jsxs("div",{className:"flex items-center gap-1",children:["Nombre",qe.key==="name"&&(qe.direction==="asc"?N.jsx(pR,{size:14}):N.jsx(dR,{size:14}))]})}),N.jsx("th",{className:"p-4 cursor-pointer hover:text-white",onClick:()=>Et("type"),children:N.jsxs("div",{className:"flex items-center gap-1",children:["Tipo",qe.key==="type"&&(qe.direction==="asc"?N.jsx(pR,{size:14}):N.jsx(dR,{size:14}))]})}),N.jsx("th",{className:"p-4 cursor-pointer hover:text-white",onClick:()=>Et("orderCount"),children:N.jsxs("div",{className:"flex items-center gap-1",children:["No. Pedidos",qe.key==="orderCount"&&(qe.direction==="asc"?N.jsx(pR,{size:14}):N.jsx(dR,{size:14}))]})}),N.jsx("th",{className:"p-4",children:"Contacto"}),N.jsx("th",{className:"p-4",children:"Direccin"}),N.jsx("th",{className:"p-4 text-center",children:"Acciones"})]})}),N.jsx("tbody",{className:"divide-y divide-slate-700",children:fe.map(he=>N.jsxs("tr",{className:"hover:bg-slate-700/30",children:[N.jsxs("td",{className:"p-4 font-bold",children:[he.name,N.jsxs("div",{className:"text-xs text-slate-500 font-normal",children:["ID: ",he.id.slice(-6)]})]}),N.jsx("td",{className:"p-4",children:N.jsx("span",{className:`text-xs px-2 py-1 rounded uppercase font-bold 
                                                    ${he.type==="distribuidor"?"bg-purple-500/20 text-purple-400":he.type==="mayorista"?"bg-blue-500/20 text-blue-400":"bg-slate-600/20 text-slate-400"}`,children:he.type})}),N.jsx("td",{className:"p-4 text-center font-bold text-slate-300",children:he.orderCount}),N.jsxs("td",{className:"p-4 text-sm text-slate-400",children:[N.jsx("div",{children:he.email}),N.jsx("div",{children:he.phone}),(he.facebook||he.instagram)&&N.jsxs("div",{className:"flex gap-2 text-xs text-slate-500 mt-1",children:[he.facebook&&N.jsxs("span",{children:["FB: ",he.facebook]}),he.instagram&&N.jsxs("span",{children:["IG: ",he.instagram]})]})]}),N.jsx("td",{className:"p-4 text-sm text-slate-400 max-w-xs truncate",children:he.address||"Sin direccin"}),N.jsx("td",{className:"p-4 text-center",children:N.jsxs("div",{className:"flex justify-center gap-2",children:[N.jsx("button",{onClick:()=>Te(he),className:"p-2 bg-blue-900/30 hover:bg-blue-900/50 text-blue-200 rounded transition-colors",title:"Ver Historial",children:N.jsx(I2,{size:16})}),N.jsx("button",{onClick:()=>xe(he),className:"p-2 bg-slate-700 hover:bg-slate-600 rounded transition-colors",title:"Editar",children:N.jsx(N2,{size:16})}),N.jsx("button",{onClick:()=>Qt(he.id),className:"p-2 bg-red-900/30 hover:bg-red-900/50 text-red-200 rounded transition-colors",title:"Eliminar",children:N.jsx(Am,{size:16})})]})})]},he.id))})]})})]}),D==="leads"&&N.jsxs("div",{children:[N.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[N.jsx("h2",{className:"text-3xl font-display font-bold md:ml-0 ml-12",children:"Cotizaciones"}),N.jsxs("div",{className:"flex flex-col md:flex-row gap-2 w-full md:w-auto",children:[N.jsxs("button",{onClick:()=>$(!0),className:"bg-brand-blue hover:bg-blue-600 px-3 py-2 rounded-lg font-bold flex items-center justify-center gap-2 text-sm",children:[N.jsx(nv,{size:16})," Nueva"]}),N.jsxs("select",{className:"bg-slate-800 border border-slate-600 rounded p-2 text-sm",onChange:he=>je({...Ne,status:he.target.value}),children:[N.jsx("option",{value:"all",children:"Ver Todos"}),N.jsx("option",{value:"Nuevo",children:"Nuevos"}),N.jsx("option",{value:"Aceptada",children:"Aceptadas"})]})]})]}),N.jsx("div",{className:"grid gap-4",children:Lr.map(he=>N.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[N.jsxs("div",{className:"w-full md:w-auto",children:[N.jsx("h3",{className:"font-bold",children:he.name}),N.jsx("p",{className:"text-sm text-slate-400",children:he.details})]}),N.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto justify-between md:justify-end",children:[N.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${he.status==="Aceptada"?"bg-green-500/20 text-green-400":"bg-brand-orange/20 text-brand-orange"}`,children:he.status}),he.status!=="Aceptada"&&N.jsx("button",{onClick:()=>B({leadId:he.id,name:he.name,email:he.email,phone:he.phone,itemDesc:he.details,itemQty:he.quantity||1,price:0,deadline:""}),className:"bg-green-600 hover:bg-green-500 text-white text-xs px-3 py-2 rounded",children:"Aprobar"})]})]},he.id))}),N.jsxs("div",{className:"flex justify-center mt-6 gap-2",children:[N.jsx("button",{disabled:oe===0,onClick:()=>_t(he=>he-1),className:"px-3 py-1 bg-slate-800 rounded disabled:opacity-50",children:"Anterior"}),N.jsxs("span",{className:"px-3 py-1",children:["Pg ",oe+1]}),N.jsx("button",{disabled:Lr.length<tt,onClick:()=>_t(he=>he+1),className:"px-3 py-1 bg-slate-800 rounded disabled:opacity-50",children:"Siguiente"})]})]}),D==="expenses"&&N.jsxs("div",{className:"space-y-6",children:[N.jsx("h2",{className:"text-3xl font-display font-bold md:ml-0 ml-12",children:"Gastos"}),N.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700",children:[N.jsx("h3",{className:"font-bold text-lg mb-4",children:"Registrar Nuevo Gasto"}),N.jsxs("form",{onSubmit:xt,className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[N.jsxs("div",{className:"md:col-span-2",children:[N.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Concepto / Material"}),N.jsx("input",{name:"concept",required:!0,placeholder:"Ej. Madera, Pintura...",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Costo"}),N.jsxs("div",{className:"relative",children:[N.jsx("span",{className:"absolute left-3 top-2 text-slate-500",children:"$"}),N.jsx("input",{name:"amount",type:"number",step:"0.01",required:!0,placeholder:"0.00",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 pl-7"})]})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Fecha de Pago"}),N.jsx("input",{name:"date",type:"date",required:!0,className:"w-full bg-slate-900 border border-slate-600 rounded p-2"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Mtodo de Pago"}),N.jsxs("select",{name:"method",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",children:[N.jsx("option",{value:"Kueski",children:"Kueski"}),N.jsx("option",{value:"Mercadolibre",children:"MercadoLibre"}),N.jsx("option",{value:"Tarjeta",children:"Tarjeta"}),N.jsx("option",{value:"Efectivo",children:"Efectivo"}),N.jsx("option",{value:"Transferencia",children:"Transferencia"})]})]}),N.jsx("div",{className:"md:col-span-5 flex justify-end",children:N.jsxs("button",{type:"submit",className:"bg-brand-blue hover:bg-blue-600 px-6 py-2 rounded-lg font-bold flex items-center gap-2",children:[N.jsx(nv,{size:18})," Registrar Gasto"]})})]})]}),N.jsx("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center mb-4",children:N.jsxs("div",{className:"flex flex-col md:flex-row gap-4 w-full md:w-auto",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Filtrar por Fecha"}),N.jsx("input",{type:"date",value:me.date,onChange:he=>Ue({...me,date:he.target.value}),className:"bg-slate-800 border border-slate-700 rounded p-2 text-sm w-full md:w-auto"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Filtrar por Mtodo"}),N.jsxs("select",{value:me.method,onChange:he=>Ue({...me,method:he.target.value}),className:"bg-slate-800 border border-slate-700 rounded p-2 text-sm w-full md:w-auto",children:[N.jsx("option",{value:"all",children:"Ver Todos"}),N.jsx("option",{value:"Kueski",children:"Kueski"}),N.jsx("option",{value:"Mercadolibre",children:"MercadoLibre"}),N.jsx("option",{value:"Tarjeta",children:"Tarjeta"}),N.jsx("option",{value:"Efectivo",children:"Efectivo"}),N.jsx("option",{value:"Transferencia",children:"Transferencia"})]})]}),(me.date||me.method!=="all")&&N.jsx("div",{className:"flex items-end",children:N.jsx("button",{onClick:()=>Ue({date:"",method:"all"}),className:"text-brand-orange hover:text-orange-400 text-xs font-bold underline mb-3",children:"Limpiar Filtros"})})]})}),N.jsx("div",{className:"bg-slate-800 rounded-xl overflow-hidden border border-slate-700 overflow-x-auto",children:N.jsxs("table",{className:"w-full text-left min-w-[600px]",children:[N.jsx("thead",{className:"bg-slate-700/50 text-slate-300",children:N.jsxs("tr",{children:[N.jsx("th",{className:"p-4",children:"Concepto"}),N.jsx("th",{className:"p-4",children:"Fecha"}),N.jsx("th",{className:"p-4",children:"Mtodo"}),N.jsx("th",{className:"p-4 text-right",children:"Monto"}),N.jsx("th",{className:"p-4 text-center",children:"Acciones"})]})}),N.jsxs("tbody",{className:"divide-y divide-slate-700",children:[et.map(he=>N.jsxs("tr",{className:"hover:bg-slate-700/30",children:[N.jsx("td",{className:"p-4 font-bold",children:he.concept}),N.jsx("td",{className:"p-4 text-slate-400 text-sm",children:he.date}),N.jsx("td",{className:"p-4 text-slate-400 text-sm",children:N.jsx("span",{className:"bg-slate-700 px-2 py-1 rounded text-xs",children:he.method})}),N.jsxs("td",{className:"p-4 text-right font-bold text-red-400",children:["-$",parseFloat(he.amount).toFixed(2)]}),N.jsx("td",{className:"p-4 text-center",children:N.jsx("button",{onClick:()=>I(he.id),className:"text-slate-500 hover:text-red-400 transition-colors",children:N.jsx(Am,{size:16})})})]},he.id)),et.length===0&&N.jsx("tr",{children:N.jsx("td",{colSpan:"5",className:"p-8 text-center text-slate-500",children:"No hay gastos coinciden con los filtros."})})]})]})})]})]}),V&&N.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:N.jsxs("form",{onSubmit:ht,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-2xl border border-slate-700 max-h-[90vh] overflow-y-auto",children:[N.jsx("h3",{className:"text-xl font-bold mb-4",children:Ie?"Editar Pedido":"Nuevo Pedido"}),N.jsxs("div",{className:"space-y-4",children:[N.jsxs("div",{className:"bg-black/20 p-4 rounded-xl",children:[N.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Cliente"}),N.jsxs("select",{name:"clientId",defaultValue:Ie?(di=e.find(he=>he.id===Ie))==null?void 0:di.clientId:"",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 mb-2",onChange:he=>{if(he.target.value==="new")document.getElementById("newClientFields").style.display="block";else{document.getElementById("newClientFields").style.display="none";const We=n.find(gt=>gt.id===he.target.value);We&&We.address&&(document.getElementById("deliveryInput").value=We.address)}},children:[N.jsx("option",{value:"",children:"-- Seleccionar Cliente --"}),N.jsx("option",{value:"new",children:"+ Crear Nuevo Cliente"}),n.map(he=>N.jsxs("option",{value:he.id,children:[he.name," (",he.type,")"]},he.id))]}),N.jsxs("div",{id:"newClientFields",style:{display:"none"},className:"space-y-2 mt-2 border-t border-slate-600 pt-2",children:[N.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[N.jsx("input",{name:"newClientName",placeholder:"Nombre Completo",className:"bg-slate-900 border border-slate-600 rounded p-2"}),N.jsx("input",{name:"newClientContact",placeholder:"Email",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),N.jsx("input",{name:"newClientPhone",placeholder:"Telfono",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),N.jsx("h4",{className:"text-xs text-gray-400 font-bold uppercase mt-1",children:"Direccin"}),N.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[N.jsx("input",{name:"newClientStreet",placeholder:"Calle y Nmero",className:"bg-slate-900 border border-slate-600 rounded p-2"}),N.jsx("input",{name:"newClientColony",placeholder:"Colonia",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),N.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[N.jsx("input",{name:"newClientZip",placeholder:"C.P.",className:"bg-slate-900 border border-slate-600 rounded p-2"}),N.jsx("input",{name:"newClientState",placeholder:"Estado",className:"bg-slate-900 border border-slate-600 rounded p-2"})]})]})]}),N.jsxs("div",{className:"bg-black/20 p-4 rounded-xl",children:[N.jsxs("div",{className:"flex justify-between items-center mb-2",children:[N.jsx("label",{className:"block text-xs text-slate-400 font-bold uppercase",children:"Productos"}),N.jsxs("button",{type:"button",onClick:Mt,className:"text-xs text-brand-blue hover:underline flex items-center gap-1",children:[N.jsx(nv,{size:12})," Agregar"]})]}),N.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto pr-2",children:Ze.map((he,We)=>N.jsxs("div",{className:"flex gap-2 items-center",children:[N.jsx("input",{placeholder:"Descripcin",value:he.desc,onChange:gt=>At(We,"desc",gt.target.value),className:"flex-1 bg-slate-900 border border-slate-600 rounded p-2 text-sm",required:!0}),N.jsx("input",{type:"number",placeholder:"Cant",value:he.qty,onChange:gt=>At(We,"qty",gt.target.value),className:"w-16 bg-slate-900 border border-slate-600 rounded p-2 text-sm",required:!0,min:"1"}),N.jsx("input",{type:"number",placeholder:"$ Unit",value:he.price,onChange:gt=>At(We,"price",gt.target.value),className:"w-24 bg-slate-900 border border-slate-600 rounded p-2 text-sm",required:!0}),Ze.length>1&&N.jsx("button",{type:"button",onClick:()=>ct(We),className:"text-red-400 hover:text-red-300",children:N.jsx(Am,{size:16})})]},We))})]}),N.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Totales"}),N.jsxs("div",{className:"bg-slate-900 p-3 rounded-xl border border-slate-600",children:[N.jsxs("div",{className:"flex justify-between mb-1 text-sm",children:[N.jsx("span",{children:"Subtotal:"}),N.jsxs("span",{className:"font-bold",children:["$",Ve.toFixed(2)]})]}),N.jsxs("div",{className:"flex justify-between items-center",children:[N.jsx("span",{className:"text-xs text-gray-400",children:"Anticipo:"}),N.jsx("input",{name:"advance",type:"number",defaultValue:Ie?(Ii=e.find(he=>he.id===Ie))==null?void 0:Ii.advance:"0",className:"w-24 bg-black/50 border border-slate-700 rounded p-1 text-right text-sm"})]}),N.jsxs("div",{className:"flex justify-between items-center mt-2 pt-2 border-t border-slate-700",children:[N.jsx("span",{className:"text-xs text-gray-400",children:"Fecha Entrega:"}),N.jsx("input",{name:"deadline",type:"date",defaultValue:Ie?(Er=e.find(he=>he.id===Ie))==null?void 0:Er.deadline:"",className:"w-32 bg-black/50 border border-slate-700 rounded p-1 text-right text-sm"})]}),N.jsxs("div",{className:"flex justify-between items-center mt-2 pt-2 border-t border-slate-700",children:[N.jsx("span",{className:"text-xs text-gray-400",children:"Evidencia:"}),N.jsx("input",{name:"orderImage",type:"file",accept:"image/*",className:"w-32 text-xs text-slate-500 file:py-1 file:px-2 file:rounded-full file:border-0 file:text-xs file:bg-brand-blue file:text-white hover:file:bg-blue-600"})]})]})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Entrega"}),N.jsx("textarea",{id:"deliveryInput",name:"delivery",defaultValue:Ie?(kr=e.find(he=>he.id===Ie))==null?void 0:kr.deliveryLocation:"",placeholder:"Direccin de entrega...",className:"w-full h-20 bg-slate-900 border border-slate-600 rounded p-2 text-sm resize-none mb-4",required:!0}),N.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Link de Evidencia (Drive/Fotos)"}),N.jsx("input",{name:"evidenceLink",type:"url",placeholder:"https://drive.google.com/...",defaultValue:Ie?($r=e.find(he=>he.id===Ie))==null?void 0:$r.evidenceLink:"",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-sm text-blue-400"})]})]})]}),N.jsxs("div",{className:"flex justify-end gap-3 mt-6 border-t border-slate-700 pt-4",children:[N.jsx("button",{type:"button",onClick:()=>j(!1),className:"text-slate-400 hover:text-white",disabled:R,children:"Cancelar"}),N.jsx("button",{type:"submit",className:`px-6 py-2 rounded font-bold text-white transition-all flex items-center gap-2
                                    ${R?"bg-slate-600 cursor-not-allowed":"bg-brand-blue hover:bg-blue-600"}`,disabled:R,children:R?N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardando..."]}):`${Ie?"Actualizar Pedido":"Crear Pedido"} ($${Ve.toFixed(2)})`})]})]})}),Z&&N.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:N.jsxs("form",{onSubmit:pe,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-md border border-slate-700",children:[N.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo Cliente"}),N.jsxs("div",{className:"space-y-3",children:[N.jsx("input",{name:"name",placeholder:"Nombre Completo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0}),N.jsx("input",{name:"email",placeholder:"Correo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),N.jsx("input",{name:"phone",placeholder:"Telfono",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),N.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[N.jsx("input",{name:"facebook",placeholder:"Facebook",className:"bg-slate-900 border border-slate-600 rounded p-2"}),N.jsx("input",{name:"instagram",placeholder:"Instagram",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),N.jsx("h4",{className:"text-xs text-gray-400 font-bold uppercase mt-2",children:"Direccin"}),N.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[N.jsx("input",{name:"street",placeholder:"Calle y Nmero",className:"bg-slate-900 border border-slate-600 rounded p-2"}),N.jsx("input",{name:"colony",placeholder:"Colonia",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),N.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[N.jsx("input",{name:"zip",placeholder:"C.P.",className:"bg-slate-900 border border-slate-600 rounded p-2"}),N.jsx("input",{name:"state",placeholder:"Estado",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs mb-1 text-slate-400",children:"Tipo de Cliente"}),N.jsxs("select",{name:"type",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",children:[N.jsx("option",{value:"normal",children:"Normal"}),N.jsx("option",{value:"mayorista",children:"Mayorista (10% Desc)"}),N.jsx("option",{value:"distribuidor",children:"Distribuidor (25% Desc)"})]})]})]}),N.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[N.jsx("button",{type:"button",onClick:()=>J(!1),className:"text-slate-400",children:"Cancelar"}),N.jsx("button",{type:"submit",className:"bg-brand-blue px-4 py-2 rounded font-bold",children:"Guardar"})]})]})}),L&&N.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:N.jsxs("form",{onSubmit:lt,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-2xl border border-slate-700 max-h-[90vh] overflow-y-auto",children:[N.jsx("h3",{className:"text-xl font-bold mb-4",children:"Aprobar Cotizacin & Crear Pedido"}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[N.jsxs("div",{className:"space-y-3",children:[N.jsx("h4",{className:"text-xs text-brand-blue font-bold uppercase border-b border-brand-blue/30 pb-1",children:"Datos del Cliente"}),N.jsx("input",{name:"name",defaultValue:L.name,placeholder:"Nombre Completo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0}),N.jsx("input",{name:"email",defaultValue:L.email,placeholder:"Correo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),N.jsx("input",{name:"phone",defaultValue:L.phone,placeholder:"Telfono",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0}),N.jsxs("div",{className:"bg-black/20 p-2 rounded",children:[N.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Direccin (Opcional)"}),N.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[N.jsx("input",{name:"street",placeholder:"Calle y Nm",className:"bg-slate-900 border border-slate-600 rounded p-2 text-sm"}),N.jsx("input",{name:"colony",placeholder:"Colonia",className:"bg-slate-900 border border-slate-600 rounded p-2 text-sm"})]}),N.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[N.jsx("input",{name:"zip",placeholder:"C.P.",className:"bg-slate-900 border border-slate-600 rounded p-2 text-sm"}),N.jsx("input",{name:"state",placeholder:"Estado",className:"bg-slate-900 border border-slate-600 rounded p-2 text-sm"})]})]})]}),N.jsxs("div",{className:"space-y-3",children:[N.jsx("h4",{className:"text-xs text-brand-orange font-bold uppercase border-b border-brand-orange/30 pb-1",children:"Datos del Pedido"}),N.jsxs("div",{children:[N.jsx("label",{className:"text-xs text-gray-400",children:"Producto / Descripcin"}),N.jsx("textarea",{name:"itemDesc",defaultValue:L.itemDesc,className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-sm h-20 resize-none",required:!0})]}),N.jsxs("div",{className:"flex gap-2",children:[N.jsxs("div",{className:"flex-1",children:[N.jsx("label",{className:"text-xs text-gray-400",children:"Cantidad"}),N.jsx("input",{name:"itemQty",type:"number",defaultValue:L.itemQty,className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0})]}),N.jsxs("div",{className:"flex-1",children:[N.jsx("label",{className:"text-xs text-gray-400",children:"Precio Unit."}),N.jsx("input",{name:"itemPrice",type:"number",step:"0.01",placeholder:"$0.00",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",onChange:he=>{const We=parseFloat(he.target.value)||0,gt=parseFloat(document.querySelector('input[name="itemQty"]').value)||1;document.getElementById("approvalTotal").value=(We*gt).toFixed(2)},required:!0})]})]}),N.jsxs("div",{children:[N.jsx("label",{className:"text-xs text-gray-400",children:"Total del Pedido"}),N.jsx("input",{id:"approvalTotal",name:"total",readOnly:!0,className:"w-full bg-black/40 border border-slate-600 rounded p-2 font-bold text-white"})]}),N.jsxs("div",{className:"flex gap-2",children:[N.jsxs("div",{className:"flex-1",children:[N.jsx("label",{className:"text-xs text-gray-400",children:"Anticipo"}),N.jsx("input",{name:"advance",type:"number",defaultValue:"0",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"})]}),N.jsxs("div",{className:"flex-1",children:[N.jsx("label",{className:"text-xs text-gray-400",children:"Fecha Entrega"}),N.jsx("input",{name:"deadline",type:"date",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"})]})]})]})]}),N.jsxs("div",{className:"flex justify-end gap-3 mt-6 border-t border-slate-700 pt-4",children:[N.jsx("button",{type:"button",onClick:()=>B(null),className:"text-slate-400 hover:text-white",children:"Cancelar"}),N.jsx("button",{type:"submit",className:"bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded font-bold",children:"Generar Pedido"})]})]})}),ue&&N.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:N.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl w-full max-w-sm border border-slate-700 text-center",children:[N.jsx("h3",{className:"text-xl font-bold mb-4",children:"Evidencia del Pedido"}),N.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Sube una foto de cmo va el pedido o cmo qued (Max 1MB)."}),N.jsx("input",{type:"file",accept:"image/*",onChange:Ke,className:`block w-full text-sm text-slate-500
                            file:mr-4 file:py-2 file:px-4
                            file:rounded-full file:border-0
                            file:text-sm file:font-semibold
                            file:bg-brand-blue file:text-white
                            hover:file:bg-blue-600 mb-6`}),N.jsx("button",{onClick:()=>Q(null),className:"text-slate-400 text-sm",children:"Cancelar"})]})}),re&&N.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:N.jsxs("div",{className:"bg-slate-800 p-8 rounded-2xl w-full max-w-2xl border border-slate-700 shadow-2xl relative max-h-[90vh] overflow-y-auto",children:[N.jsx("button",{onClick:()=>ye(null),className:"absolute top-4 right-4 text-slate-400 hover:text-white",children:N.jsx(Am,{size:20,className:"rotate-45"})}),N.jsxs("h3",{className:"text-2xl font-bold mb-6 text-white flex items-center gap-2",children:[re.type==="order"?N.jsx(gT,{className:"text-brand-blue"}):N.jsx(Tag,{className:"text-brand-orange"}),"Detalle de ",re.type==="order"?"Pedido":"Cotizacin"]}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[N.jsxs("div",{className:"space-y-4",children:[N.jsxs("div",{children:[N.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-1",children:"Cliente"}),N.jsx("p",{className:"text-white text-lg font-bold",children:re.type==="order"?(ls=n.find(he=>he.id===re.data.clientId))==null?void 0:ls.name:re.data.name}),N.jsx("p",{className:"text-sm text-gray-400",children:re.type==="order"?(lo=n.find(he=>he.id===re.data.clientId))==null?void 0:lo.email:re.data.email})]}),re.data.items&&re.data.items.length>0&&N.jsxs("div",{children:[N.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-2",children:"Desglose de Artculos"}),N.jsx("div",{className:"bg-black/30 rounded-lg p-3 space-y-2",children:re.data.items.map((he,We)=>N.jsxs("div",{className:"flex justify-between text-sm",children:[N.jsxs("span",{className:"text-slate-200",children:[he.qty,"x ",he.desc]}),he.price&&N.jsxs("span",{className:"text-slate-500",children:["$",he.price]})]},We))})]}),!re.data.items&&N.jsxs("div",{children:[N.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-1",children:"Descripcin"}),N.jsx("p",{className:"text-slate-300",children:re.data.desc||re.data.details}),N.jsxs("p",{className:"text-slate-300 text-sm mt-1",children:["Cantidad: ",re.data.quantity||1]})]}),re.type==="order"&&N.jsxs("div",{className:"bg-brand-blue/10 p-4 rounded-xl border border-brand-blue/30",children:[N.jsxs("div",{className:"flex justify-between mb-1",children:[N.jsx("span",{className:"text-gray-400",children:"Total"}),N.jsxs("span",{className:"text-white font-bold",children:["$",re.data.total]})]}),N.jsxs("div",{className:"flex justify-between mb-1",children:[N.jsx("span",{className:"text-gray-400",children:"Anticipo"}),N.jsxs("span",{className:"text-green-400 font-bold",children:["-$",re.data.advance]})]}),N.jsxs("div",{className:"border-t border-white/10 pt-2 flex justify-between",children:[N.jsx("span",{className:"text-brand-orange font-bold",children:"Restante"}),N.jsxs("span",{className:"text-brand-orange font-bold text-xl",children:["$",re.data.remaining]})]})]})]}),N.jsxs("div",{className:"space-y-4",children:[re.data.progressImage&&N.jsxs("div",{children:[N.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-2",children:"Evidencia / Progreso"}),N.jsx("img",{src:re.data.progressImage,className:"w-full rounded-xl border border-slate-600"})]}),re.data.refType==="link"&&re.data.refLink&&N.jsxs("div",{children:[N.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-2",children:"Referencia"}),N.jsx("a",{href:re.data.refLink,target:"_blank",className:"text-brand-blue underline break-all text-sm",children:re.data.refLink})]})]})]}),N.jsx("div",{className:"mt-8 pt-6 border-t border-slate-700 flex justify-end",children:N.jsx("button",{onClick:()=>ye(null),className:"px-6 py-2 rounded bg-slate-700 hover:bg-slate-600 text-white",children:"Cerrar"})})]})}),de&&N.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:N.jsxs("form",{onSubmit:ut,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-md border border-slate-700",children:[N.jsx("h3",{className:"text-xl font-bold mb-4",children:"Editar Cliente"}),N.jsxs("div",{className:"space-y-3",children:[N.jsxs("div",{className:"bg-black/20 p-3 rounded border border-slate-700",children:[N.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Nombre"}),N.jsx("input",{name:"name",defaultValue:de.name,className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0})]}),N.jsxs("div",{className:"bg-black/20 p-3 rounded border border-slate-700",children:[N.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Contacto"}),N.jsx("input",{name:"email",defaultValue:de.email,placeholder:"Correo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 mb-2"}),N.jsx("input",{name:"phone",defaultValue:de.phone,placeholder:"Telfono",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),N.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[N.jsx("input",{name:"facebook",defaultValue:de.facebook,placeholder:"Facebook",className:"bg-slate-900 border border-slate-600 rounded p-2"}),N.jsx("input",{name:"instagram",defaultValue:de.instagram,placeholder:"Instagram",className:"bg-slate-900 border border-slate-600 rounded p-2"})]})]}),N.jsxs("div",{className:"bg-black/20 p-3 rounded border border-slate-700",children:[N.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Direccin"}),N.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[N.jsx("input",{name:"street",defaultValue:de.street,placeholder:"Calle y Nmero",className:"bg-slate-900 border border-slate-600 rounded p-2"}),N.jsx("input",{name:"colony",defaultValue:de.colony,placeholder:"Colonia",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),N.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[N.jsx("input",{name:"zip",defaultValue:de.zip,placeholder:"C.P.",className:"bg-slate-900 border border-slate-600 rounded p-2"}),N.jsx("input",{name:"state",defaultValue:de.state,placeholder:"Estado",className:"bg-slate-900 border border-slate-600 rounded p-2"})]})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs mb-1 text-slate-400",children:"Tipo de Cliente"}),N.jsxs("select",{name:"type",defaultValue:de.type,className:"w-full bg-slate-900 border border-slate-600 rounded p-2",children:[N.jsx("option",{value:"normal",children:"Normal"}),N.jsx("option",{value:"mayorista",children:"Mayorista (10% Desc)"}),N.jsx("option",{value:"distribuidor",children:"Distribuidor (25% Desc)"})]})]})]}),N.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[N.jsx("button",{type:"button",onClick:()=>xe(null),className:"text-slate-400",children:"Cancelar"}),N.jsx("button",{type:"submit",className:"bg-brand-blue px-4 py-2 rounded font-bold",children:"Guardar Cambios"})]})]})}),G&&N.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:N.jsxs("form",{onSubmit:ft,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-lg border border-slate-700",children:[N.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nueva Cotizacin"}),N.jsxs("div",{className:"space-y-4",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Cliente"}),N.jsxs("select",{name:"clientId",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 mb-2",onChange:he=>le(he.target.value==="manual"),children:[N.jsx("option",{value:"manual",children:"-- Cliente Manual / Nuevo --"}),n.map(he=>N.jsx("option",{value:he.id,children:he.name},he.id))]}),ae&&N.jsxs("div",{className:"space-y-2 border-t border-slate-600 pt-2",children:[N.jsx("input",{name:"manualName",placeholder:"Nombre Cliente",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0}),N.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[N.jsx("input",{name:"manualEmail",placeholder:"Correo",className:"bg-slate-900 border border-slate-600 rounded p-2"}),N.jsx("input",{name:"manualPhone",placeholder:"Telfono",className:"bg-slate-900 border border-slate-600 rounded p-2",required:!0})]})]})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Detalles"}),N.jsx("textarea",{name:"details",placeholder:"Describe lo que el cliente quiere cotizar...",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 h-24 resize-none",required:!0})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Cantidad"}),N.jsx("input",{name:"quantity",type:"number",defaultValue:"1",className:"w-24 bg-slate-900 border border-slate-600 rounded p-2",required:!0})]})]}),N.jsxs("div",{className:"flex justify-end gap-3 mt-6 border-t border-slate-700 pt-4",children:[N.jsx("button",{type:"button",onClick:()=>$(!1),className:"text-slate-400",children:"Cancelar"}),N.jsx("button",{type:"submit",className:"bg-brand-blue px-6 py-2 rounded font-bold hover:bg-blue-600",children:"Crear Cotizacin"})]})]})}),ve&&N.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:N.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl w-full max-w-2xl border border-slate-700 max-h-[85vh] overflow-y-auto",children:[N.jsxs("div",{className:"flex justify-between items-start mb-6",children:[N.jsxs("div",{children:[N.jsx("h3",{className:"text-xl font-bold",children:"Historial de Pedidos"}),N.jsx("p",{className:"text-slate-400",children:ve.name})]}),N.jsx("button",{onClick:()=>Te(null),className:"p-1 hover:bg-slate-700 rounded-full",children:N.jsx(J_,{size:20})})]}),N.jsx("div",{className:"bg-slate-900 rounded-xl overflow-hidden border border-slate-700",children:N.jsxs("table",{className:"w-full text-left font-sm",children:[N.jsx("thead",{className:"bg-slate-800 text-slate-300",children:N.jsxs("tr",{children:[N.jsx("th",{className:"p-3",children:"ID"}),N.jsx("th",{className:"p-3",children:"Fecha"}),N.jsx("th",{className:"p-3",children:"Artculos"}),N.jsx("th",{className:"p-3",children:"Pagos"}),N.jsx("th",{className:"p-3",children:"Estatus"})]})}),N.jsxs("tbody",{className:"divide-y divide-slate-700",children:[e.filter(he=>he.clientId===ve.id).map(he=>N.jsxs("tr",{className:"hover:bg-slate-800",children:[N.jsxs("td",{className:"p-3 text-xs text-slate-500 align-top",children:["#",he.id.slice(-4)]}),N.jsx("td",{className:"p-3 text-sm align-top whitespace-nowrap",children:he.date}),N.jsx("td",{className:"p-3 align-top min-w-[200px]",children:he.items&&he.items.length>0?N.jsx("div",{className:"space-y-1",children:he.items.map((We,gt)=>N.jsxs("div",{className:"text-sm",children:[N.jsxs("span",{className:"text-slate-300 font-bold",children:[We.qty,"x"]})," ",We.desc,We.price&&N.jsxs("span",{className:"text-slate-500 text-xs ml-1",children:["($",We.price,")"]})]},gt))}):N.jsx("span",{className:"text-slate-500 text-sm",children:he.desc||he.details})}),N.jsxs("td",{className:"p-3 align-top min-w-[150px]",children:[N.jsxs("div",{className:"flex justify-between text-sm",children:[N.jsx("span",{className:"text-slate-400",children:"Total:"}),N.jsxs("span",{className:"font-bold",children:["$",he.total]})]}),N.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[N.jsx("span",{className:"text-slate-500",children:"Anticipo:"}),N.jsxs("span",{className:"text-green-500",children:["-$",he.advance||0]})]}),N.jsxs("div",{className:"flex justify-between text-xs mt-1 border-t border-slate-700 pt-1",children:[N.jsx("span",{className:"text-slate-400",children:"Resta:"}),N.jsxs("span",{className:`font-bold ${he.remaining>0||he.total-(he.advance||0)>0?"text-brand-orange":"text-slate-500"}`,children:["$",he.remaining??he.total-(he.advance||0)]})]})]}),N.jsx("td",{className:"p-3 align-top",children:N.jsx("span",{className:`text-xs px-2 py-1 rounded uppercase font-bold border ${P(he.status)}`,children:he.status})})]},he.id)),e.filter(he=>he.clientId===ve.id).length===0&&N.jsx("tr",{children:N.jsx("td",{colSpan:"5",className:"p-6 text-center text-slate-500",children:"Este cliente no tiene pedidos registrados."})})]})]})})]})})]})},i_=({id:n,icon:e,label:t,active:i,set:r})=>N.jsxs("button",{onClick:()=>r(n),className:`w-full text-left px-4 py-3 rounded-lg flex items-center gap-3 transition-colors ${i===n?"bg-slate-700 text-white":"text-slate-400 hover:bg-slate-800"}`,children:[e," ",N.jsx("span",{children:t})]}),Pd=({title:n,value:e,icon:t,color:i="text-white"})=>N.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700 flex flex-col justify-between",children:[N.jsxs("div",{className:"flex justify-between items-start mb-2",children:[N.jsx("h3",{className:"text-slate-400 text-xs font-bold uppercase",children:n}),t]}),N.jsx("p",{className:`text-3xl font-bold ${i}`,children:e})]}),HNe=()=>{const{addLead:n}=BM(),[e,t]=q.useState({name:"",email:"",phone:"",quantity:1,details:""}),[i,r]=q.useState(!1),[a,s]=q.useState(!1),o=f=>{const{id:h,value:p}=f.target;t(v=>({...v,[h]:p}))},c=async f=>{if(f.preventDefault(),!i){r(!0);try{const h=n({...e,imageUrl:null});let p=` *Nueva Solicitud de Cotizacin*

`;p+=` *Nombre:* ${e.name}
`,p+=` *Correo:* ${e.email}
`,e.phone&&(p+=` *Telfono:* ${e.phone}
`),p+=` *Piezas:* ${e.quantity}
`,e.details&&(p+=` *Detalles:* ${e.details}
`),h&&h.id&&(p+=`
ID: ${h.id}`),window.open(`https://wa.me/525619956812?text=${encodeURIComponent(p)}`,"_blank"),s(!0),t({name:"",email:"",phone:"",quantity:1,details:""})}catch(h){console.error("Error submitting quote:",h);const p=h.code?`${h.code}: ${h.message}`:h.message;alert(`Error al enviar: ${p}`)}finally{r(!1)}}};return N.jsxs("div",{className:"bg-brand-dark min-h-screen text-slate-100 font-sans py-20 px-4 relative overflow-hidden",children:[N.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none",children:[N.jsx("div",{className:"absolute top-1/4 -right-20 w-96 h-96 bg-brand-orange/10 rounded-full blur-3xl animate-pulse"}),N.jsx("div",{className:"absolute bottom-1/4 -left-20 w-96 h-96 bg-brand-blue/10 rounded-full blur-3xl animate-pulse delay-1000"})]}),N.jsxs("div",{className:"max-w-2xl mx-auto",children:[N.jsxs(il,{to:"/",className:"inline-flex items-center text-gray-400 hover:text-white mb-8 transition-colors",children:[N.jsx(yM,{className:"mr-2",size:20})," Volver al Inicio"]}),N.jsxs("div",{className:"glass p-8 md:p-10 rounded-3xl shadow-2xl",children:[N.jsxs("div",{className:"text-center mb-8",children:[N.jsxs("h1",{className:"font-display text-4xl font-bold mb-4",children:["Cotiza tu ",N.jsx("span",{className:"text-brand-blue",children:"Proyecto"})]}),N.jsx("p",{className:"text-gray-400",children:"Cuntanos tu idea para imprimirla en 3D."})]}),a&&N.jsxs("div",{className:"bg-green-500/20 border border-green-500/50 text-green-400 p-4 rounded-xl mb-6 text-center animate-fade-in",children:[N.jsx("p",{className:"font-bold",children:"Cotizacin creada con xito!"}),N.jsx("p",{className:"text-sm",children:"Te hemos redirigido a WhatsApp para continuar."})]}),N.jsxs("form",{onSubmit:c,className:"space-y-6",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre Completo"}),N.jsx("input",{type:"text",id:"name",required:!0,value:e.name,onChange:o,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Correo Electrnico"}),N.jsx("input",{type:"email",id:"email",required:!0,value:e.email,onChange:o,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Telfono / WhatsApp"}),N.jsx("input",{type:"tel",id:"phone",value:e.phone,onChange:o,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nmero de piezas"}),N.jsx("input",{type:"number",id:"quantity",min:"1",required:!0,value:e.quantity,onChange:o,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Detalles Adicionales"}),N.jsx("textarea",{id:"details",rows:"3",value:e.details,onChange:o,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]}),N.jsx("button",{type:"submit",disabled:i,className:`w-full bg-brand-blue hover:bg-blue-600 text-white font-bold py-4 rounded-xl shadow-lg shadow-blue-500/30 transition-all hover:scale-[1.01] ${i?"opacity-50 cursor-not-allowed":""}`,children:i?"Procesando...":"Continuar en WhatsApp"})]})]})]})]})},GV=()=>{const{addOrder:n,addClient:e,clients:t}=BM(),i=nj(),[r,a]=q.useState(""),[s,o]=q.useState(""),[c,f]=q.useState(""),[h,p]=q.useState([{desc:"",qty:1,price:""}]),v=q.useMemo(()=>h.reduce((w,I)=>w+parseFloat(I.price||0)*parseFloat(I.qty||1),0),[h]),y=()=>{p([...h,{desc:"",qty:1,price:""}])},_=w=>{p(h.filter((I,P)=>P!==w))},E=(w,I,P)=>{const D=[...h];D[w][I]=P,p(D)},S=async w=>{w.preventDefault();let I=null;const P=s.trim().toLowerCase(),D=t.find(z=>z.email&&z.email.toLowerCase()===P||z.phone&&z.phone===P);D?I=D.id:I=(await e({name:r||"Cliente Mostrador",email:s.includes("@")?s:"",phone:s.includes("@")?"":s,type:"normal",address:"En Tienda",street:"En Tienda",colony:"",zip:"",state:""})).id,await n({clientId:I,items:h.map(z=>({...z,price:parseFloat(z.price).toFixed(2)})),total:v.toFixed(2),advance:v.toFixed(2),deliveryLocation:"Entregado en Tienda",status:"entregado",date:new Date().toLocaleDateString("es-MX"),deadline:c||new Date().toISOString().split("T")[0]}),alert("Venta registrada con xito!"),i("/admin")};return N.jsx("div",{className:"min-h-screen bg-slate-900 text-slate-100 font-sans p-6 md:p-12",children:N.jsxs("div",{className:"max-w-3xl mx-auto",children:[N.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[N.jsx(il,{to:"/admin",className:"p-2 bg-slate-800 rounded-full hover:bg-slate-700 transition-colors",children:N.jsx(yM,{size:24})}),N.jsxs("h1",{className:"text-3xl font-display font-bold flex items-center gap-3",children:[N.jsx(E9,{className:"text-brand-orange"}),"Registro de Venta ",N.jsx("span",{className:"text-slate-500 font-normal text-xl",children:"| Mostrador"})]})]}),N.jsxs("form",{onSubmit:S,className:"bg-slate-800 p-8 rounded-2xl border border-slate-700 shadow-2xl",children:[N.jsxs("div",{className:"mb-8",children:[N.jsx("h2",{className:"text-xs font-bold text-brand-blue uppercase tracking-wider mb-4 border-b border-brand-blue/20 pb-2",children:"Datos del Cliente"}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Nombre Cliente"}),N.jsx("input",{type:"text",required:!0,className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 focus:border-brand-blue focus:outline-none transition-colors",placeholder:"Ej. Juan Prez",value:r,onChange:w=>a(w.target.value)})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Contacto (Email / Tel)"}),N.jsx("input",{type:"text",className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 focus:border-brand-blue focus:outline-none transition-colors",placeholder:"Opcional",value:s,onChange:w=>o(w.target.value)})]})]})]}),N.jsxs("div",{className:"mb-8",children:[N.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-white/10 pb-2",children:[N.jsx("h2",{className:"text-xs font-bold text-brand-orange uppercase tracking-wider",children:"Productos"}),N.jsxs("button",{type:"button",onClick:y,className:"text-xs bg-slate-700 hover:bg-slate-600 px-3 py-1 rounded-full flex items-center gap-1 transition-colors",children:[N.jsx(nv,{size:14})," Agregar Producto"]})]}),N.jsx("div",{className:"space-y-3",children:h.map((w,I)=>N.jsxs("div",{className:"flex gap-3 items-start animate-fade-in-up",children:[N.jsx("div",{className:"flex-1",children:N.jsx("input",{type:"text",placeholder:"Descripcin del producto...",required:!0,className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 text-sm focus:border-brand-orange focus:outline-none transition-colors",value:w.desc,onChange:P=>E(I,"desc",P.target.value)})}),N.jsx("div",{className:"w-20",children:N.jsx("input",{type:"number",placeholder:"Cant.",required:!0,min:"1",className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 text-sm text-center focus:border-brand-orange focus:outline-none transition-colors",value:w.qty,onChange:P=>E(I,"qty",P.target.value)})}),N.jsxs("div",{className:"w-32 relative",children:[N.jsx("span",{className:"absolute left-3 top-3 text-slate-500",children:"$"}),N.jsx("input",{type:"number",placeholder:"0.00",required:!0,step:"0.50",className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 pl-6 text-sm text-right focus:border-brand-orange focus:outline-none transition-colors",value:w.price,onChange:P=>E(I,"price",P.target.value)})]}),h.length>1&&N.jsx("button",{type:"button",onClick:()=>_(I),className:"p-3 text-red-400 hover:bg-red-400/10 rounded-lg transition-colors",children:N.jsx(Am,{size:18})})]},I))})]}),N.jsxs("div",{className:"bg-slate-900 p-6 rounded-xl flex flex-col md:flex-row justify-between items-center gap-6",children:[N.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm",children:[N.jsx(Q_,{size:16}),N.jsxs("span",{children:["La venta se registrar como ",N.jsx("strong",{children:"ENTREGADA"})," y pagada al 100%."]})]}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("label",{className:"text-sm text-slate-400",children:"Entrega:"}),N.jsx("input",{type:"date",className:"bg-slate-800 border border-slate-600 rounded p-2 text-white text-sm focus:border-brand-blue outline-none",value:c,onChange:w=>f(w.target.value)})]}),N.jsxs("div",{className:"flex items-center gap-6",children:[N.jsxs("div",{className:"text-right",children:[N.jsx("span",{className:"block text-xs text-slate-400 uppercase font-bold",children:"Total a Pagar"}),N.jsxs("span",{className:"text-3xl font-display font-bold text-white",children:["$",v.toFixed(2)]})]}),N.jsxs("button",{type:"submit",className:"bg-brand-blue hover:bg-blue-500 text-white px-8 py-4 rounded-xl font-bold text-lg shadow-lg shadow-blue-500/20 hover:scale-[1.02] transition-all flex items-center gap-2",children:[N.jsx(Q_,{size:24})," Registrar Venta"]})]})]})]})]})})},GNe=()=>{const{clients:n,orders:e}=BM(),[t,i]=q.useState(""),[r,a]=q.useState(null),[s,o]=q.useState(""),c=f=>{f.preventDefault(),o(""),a(null);const h=t.trim().replace(/^#/,"").toLowerCase();if(!h)return;let p=[];const v=e.find(y=>{const _=y.id.toString().toLowerCase();return _===h||_.endsWith(h)});if(v)p.push(v);else{const y=n.find(_=>_.id.toLowerCase()===h||_.email&&_.email.toLowerCase()===h||_.phone&&_.phone.replace(/\D/g,"")===h.replace(/\D/g,""));y&&(p=e.filter(_=>String(_.clientId)===String(y.id)))}p.length>0?a(p.reverse()):o("No se encontraron pedidos con esa informacin. Verifica el ID o Correo.")};return N.jsxs("div",{className:"min-h-screen bg-brand-dark text-slate-100 font-sans flex flex-col items-center p-6 md:justify-center",children:[N.jsx("div",{className:"w-full max-w-2xl mb-8 flex justify-start",children:N.jsx(il,{to:"/",className:"text-gray-400 hover:text-white flex items-center gap-2",children:" Volver"})}),N.jsxs("div",{className:"w-full max-w-2xl",children:[N.jsxs("h1",{className:"text-3xl font-display font-bold text-center mb-2",children:["Revisa estatus de tu ",N.jsx("span",{className:"text-brand-orange",children:"Pedido"})]}),N.jsx("p",{className:"text-center text-gray-400 mb-8",children:"Ingresa tu ID de pedido, correo o telfono."}),N.jsxs("div",{className:"glass p-6 md:p-8 rounded-2xl shadow-xl border border-white/10 mb-8",children:[N.jsxs("form",{onSubmit:c,className:"flex flex-col md:flex-row gap-4",children:[N.jsx("input",{type:"text",required:!0,value:t,onChange:f=>i(f.target.value),className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue",placeholder:"ID, Correo o Telfono..."}),N.jsxs("button",{type:"submit",className:"bg-brand-blue hover:bg-blue-600 text-white font-bold px-6 py-3 rounded-lg transition-all flex items-center justify-center gap-2 w-full md:w-auto",children:[N.jsx(w9,{size:18})," Buscar"]})]}),s&&N.jsxs("div",{className:"mt-4 p-3 bg-red-500/10 border border-red-500/20 text-red-400 rounded-lg text-sm text-center flex items-center justify-center gap-2",children:[N.jsx(Roe,{size:16})," ",s]})]}),r&&r.length>0&&N.jsx("div",{className:"space-y-6",children:r.map(f=>N.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl p-6 shadow-2xl animate-float",children:[N.jsxs("div",{className:"flex justify-between items-start mb-6",children:[N.jsxs("div",{children:[N.jsxs("h3",{className:"font-bold text-xl text-white",children:["Pedido #",f.id.slice(-4)]}),N.jsx("p",{className:"text-xs text-gray-500",children:f.id}),N.jsxs("p",{className:"text-gray-400 text-sm",children:["Fecha: ",f.date]})]}),N.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase
                                        ${f.status==="entregado"?"bg-green-500/20 text-green-400":f.status==="terminado"?"bg-blue-500/20 text-blue-400":"bg-brand-orange/20 text-brand-orange"}`,children:f.status})]}),N.jsxs("div",{className:"space-y-4 mb-6",children:[N.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-3",children:[N.jsxs("div",{className:"flex justify-between items-center mb-2",children:[N.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase",children:"Productos"}),f.items&&N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("div",{className:"w-24 h-2 bg-slate-700 rounded-full overflow-hidden",children:N.jsx("div",{className:"h-full bg-green-500 transition-all duration-500",style:{width:`${f.items.filter(h=>h.completed).length/f.items.length*100}%`}})}),N.jsxs("span",{className:"text-[10px] text-gray-400",children:[f.items.filter(h=>h.completed).length,"/",f.items.length]})]})]}),f.items&&f.items.map((h,p)=>N.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-200 mb-1 border-b border-slate-700/50 pb-1 last:border-0 last:pb-0",children:[N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("div",{className:`w-4 h-4 rounded-full flex items-center justify-center border ${h.completed?"bg-green-500 border-green-500":"border-slate-600"}`,children:h.completed&&N.jsx(Q_,{size:10,className:"text-white"})}),N.jsxs("span",{className:h.completed?"text-gray-500 line-through":"",children:[h.qty,"x ",h.desc]})]}),h.price&&N.jsxs("span",{className:"text-gray-500",children:["$",h.price," c/u"]})]},p))]}),N.jsx("div",{className:"flex items-center gap-3 text-slate-300",children:f.status==="entregado"?N.jsxs(N.Fragment,{children:[N.jsx(Q_,{className:"text-green-400"}),N.jsx("span",{className:"text-green-400 font-bold",children:"Entregado!"})]}):N.jsxs("div",{className:"flex flex-col gap-1",children:[N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx(Ooe,{className:"text-brand-orange",size:16}),N.jsxs("span",{children:["Entrega estimada: ",f.deadline||"Pendiente"]})]}),f.deliveryLocation&&N.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-400 ml-6",children:N.jsxs("span",{children:[" Zona/Direccin: ",f.deliveryLocation]})})]})}),f.progressImage&&N.jsxs("div",{className:"mt-4",children:[N.jsx("h4",{className:"text-xs font-bold text-gray-400 mb-2 uppercase",children:"Avance del Pedido"}),N.jsx("img",{src:f.progressImage,alt:"Avance",className:"w-full rounded-lg border border-slate-600 shadow-lg"})]}),f.evidenceLink&&N.jsx("div",{className:"mt-4",children:N.jsxs("a",{href:f.evidenceLink,target:"_blank",rel:"noopener noreferrer",className:"w-full block bg-slate-800 hover:bg-slate-700 border border-slate-600 text-center py-3 rounded-xl transition-colors flex items-center justify-center gap-2 text-brand-blue font-bold",children:[N.jsx(gT,{size:18})," Ver Fotos / Evidencia (Drive)"]})})]}),N.jsxs("div",{className:"bg-slate-900 rounded-xl p-4",children:[N.jsxs("div",{className:"flex justify-between mb-2",children:[N.jsx("span",{className:"text-gray-400",children:"Total"}),N.jsxs("span",{className:"text-white font-bold",children:["$",f.total]})]}),N.jsxs("div",{className:"flex justify-between mb-2",children:[N.jsx("span",{className:"text-gray-400",children:"Pagado (Anticipo)"}),N.jsxs("span",{className:"text-green-400 font-bold",children:["-$",f.advance||0]})]}),N.jsx("div",{className:"border-t border-slate-700 my-2"}),N.jsxs("div",{className:"flex justify-between",children:[N.jsx("span",{className:"text-brand-orange font-bold",children:"Por Pagar"}),N.jsxs("span",{className:"text-brand-orange font-bold text-xl",children:["$",f.remaining||f.total]})]})]})]},f.id))})]})]})},WNe=()=>{const{products:n,loading:e}=T9(),[t,i]=q.useState("all"),[r,a]=q.useState(null),s=["Todos",...new Set(n.map(c=>c.category).filter(Boolean))],o=t==="Todos"||t==="all"?n:n.filter(c=>c.category===t);return N.jsxs("div",{className:"bg-brand-dark min-h-screen text-slate-100 font-sans pb-16",children:[N.jsxs("div",{className:"pt-8 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto",children:[N.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[N.jsx(il,{to:"/",className:"p-2 rounded-full bg-slate-800 hover:bg-slate-700 text-white transition-colors",children:N.jsx(yM,{size:24})}),N.jsx("h1",{className:"font-display text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400",children:"Catlogo Completo"})]}),N.jsx("div",{className:"flex flex-wrap gap-3 mb-8 sticky top-4 z-40 py-4 bg-brand-dark/95 backdrop-blur rounded-2xl px-4 border border-white/5",children:s.map(c=>N.jsx("button",{onClick:()=>i(c),className:`px-5 py-2 rounded-full font-bold text-sm transition-all border 
                                ${t===c||c==="Todos"&&t==="all"?"bg-brand-orange text-white border-brand-orange shadow-lg shadow-orange-500/30":"bg-transparent text-gray-400 border-gray-700 hover:border-gray-500 hover:text-white"}`,children:c},c))}),e?N.jsx("div",{className:"flex justify-center items-center h-64 text-slate-500",children:"Cargando productos..."}):N.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:o.map((c,f)=>N.jsxs("div",{onClick:()=>a(c.image),className:"group relative overflow-hidden rounded-2xl shadow-xl aspect-square bg-gray-900 cursor-pointer hover:shadow-2xl hover:shadow-brand-blue/10 transition-all hover:scale-[1.02] border border-white/5",children:[N.jsx("div",{className:"w-full h-full bg-cover bg-center group-hover:scale-110 transition-transform duration-500",style:{backgroundImage:`url('${c.image}')`}}),N.jsx("div",{className:"absolute top-3 right-3 z-10",children:N.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-extrabold uppercase tracking-wider shadow-sm backdrop-blur-md ${c.quantity>0?"bg-green-500/90 text-white":"bg-red-500/90 text-white"}`,children:c.quantity>0?"Disponible":"Agotado"})}),N.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-4 bg-gradient-to-t from-black via-black/80 to-transparent pt-12",children:[N.jsx("h3",{className:"text-white font-bold text-lg leading-tight truncate",children:c.name}),N.jsx("p",{className:"text-brand-orange font-bold text-xl",children:c.price})]})]},f))})]}),r&&N.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/95 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>a(null),children:[N.jsx("button",{className:"absolute top-4 right-4 text-white hover:text-brand-orange p-2 bg-black/50 rounded-full",children:N.jsx(J_,{size:32})}),N.jsx("img",{src:r,alt:"Vista completa",className:"max-h-[85vh] max-w-[95vw] rounded-lg shadow-2xl border border-white/10",onClick:c=>c.stopPropagation()})]})]})};function qNe(){return N.jsx(iZ,{children:N.jsxs(KK,{children:[N.jsx(Nd,{path:"/",element:N.jsx(ole,{})}),N.jsx(Nd,{path:"/admin",element:N.jsx(jNe,{})}),N.jsx(Nd,{path:"/quote",element:N.jsx(HNe,{})}),N.jsx(Nd,{path:"/status",element:N.jsx(GNe,{})}),N.jsx(Nd,{path:"/catalogo",element:N.jsx(WNe,{})}),N.jsx(Nd,{path:"/venta-tienda",element:N.jsx(GV,{})}),N.jsx(Nd,{path:"/venta-fisica",element:N.jsx(GV,{})})]})})}class $Ne extends _g.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t),this.setState({errorInfo:t})}render(){return this.state.hasError?N.jsxs("div",{style:{color:"red",padding:"20px",background:"white"},children:[N.jsx("h1",{children:"Something went wrong."}),N.jsx("pre",{children:this.state.error&&this.state.error.toString()}),N.jsx("pre",{children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}):this.props.children}}rK.createRoot(document.getElementById("root")).render(N.jsx(_g.StrictMode,{children:N.jsx($Ne,{children:N.jsx(Age,{children:N.jsx(qNe,{})})})}));
