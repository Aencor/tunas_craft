var fY=Object.defineProperty;var hY=(n,e,t)=>e in n?fY(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var jC=(n,e,t)=>hY(n,typeof e!="symbol"?e+"":e,t);function dY(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function Vu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var HC={exports:{}},T_={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kk;function pY(){if(Kk)return T_;Kk=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var s=null;if(a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),"key"in r){a={};for(var l in r)l!=="key"&&(a[l]=r[l])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:s,ref:r!==void 0?r:null,props:a}}return T_.Fragment=e,T_.jsx=t,T_.jsxs=t,T_}var Zk;function mY(){return Zk||(Zk=1,HC.exports=pY()),HC.exports}var O=mY(),GC={exports:{}},Sn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qk;function gY(){if(Qk)return Sn;Qk=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),v=Symbol.iterator;function _(J){return J===null||typeof J!="object"?null:(J=v&&J[v]||J["@@iterator"],typeof J=="function"?J:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,S={};function w(J,pe,Ee){this.props=J,this.context=pe,this.refs=S,this.updater=Ee||x}w.prototype.isReactComponent={},w.prototype.setState=function(J,pe){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,pe,"setState")},w.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function I(){}I.prototype=w.prototype;function R(J,pe,Ee){this.props=J,this.context=pe,this.refs=S,this.updater=Ee||x}var D=R.prototype=new I;D.constructor=R,T(D,w.prototype),D.isPureReactComponent=!0;var B=Array.isArray;function z(){}var k={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function P(J,pe,Ee){var Ge=Ee.ref;return{$$typeof:n,type:J,key:pe,ref:Ge!==void 0?Ge:null,props:Ee}}function L(J,pe){return P(J.type,pe,J.props)}function V(J){return typeof J=="object"&&J!==null&&J.$$typeof===n}function W(J){var pe={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(Ee){return pe[Ee]})}var q=/\/+/g;function ue(J,pe){return typeof J=="object"&&J!==null&&J.key!=null?W(""+J.key):pe.toString(36)}function le(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(z,z):(J.status="pending",J.then(function(pe){J.status==="pending"&&(J.status="fulfilled",J.value=pe)},function(pe){J.status==="pending"&&(J.status="rejected",J.reason=pe)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function ee(J,pe,Ee,Ge,ht){var be=typeof J;(be==="undefined"||be==="boolean")&&(J=null);var Te=!1;if(J===null)Te=!0;else switch(be){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(J.$$typeof){case n:case e:Te=!0;break;case p:return Te=J._init,ee(Te(J._payload),pe,Ee,Ge,ht)}}if(Te)return ht=ht(J),Te=Ge===""?"."+ue(J,0):Ge,B(ht)?(Ee="",Te!=null&&(Ee=Te.replace(q,"$&/")+"/"),ee(ht,pe,Ee,"",function(Ye){return Ye})):ht!=null&&(V(ht)&&(ht=L(ht,Ee+(ht.key==null||J&&J.key===ht.key?"":(""+ht.key).replace(q,"$&/")+"/")+Te)),pe.push(ht)),1;Te=0;var dt=Ge===""?".":Ge+":";if(B(J))for(var ve=0;ve<J.length;ve++)Ge=J[ve],be=dt+ue(Ge,ve),Te+=ee(Ge,pe,Ee,be,ht);else if(ve=_(J),typeof ve=="function")for(J=ve.call(J),ve=0;!(Ge=J.next()).done;)Ge=Ge.value,be=dt+ue(Ge,ve++),Te+=ee(Ge,pe,Ee,be,ht);else if(be==="object"){if(typeof J.then=="function")return ee(le(J),pe,Ee,Ge,ht);throw pe=String(J),Error("Objects are not valid as a React child (found: "+(pe==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":pe)+"). If you meant to render a collection of children, use an array instead.")}return Te}function ie(J,pe,Ee){if(J==null)return J;var Ge=[],ht=0;return ee(J,Ge,"","",function(be){return pe.call(Ee,be,ht++)}),Ge}function he(J){if(J._status===-1){var pe=J._result;pe=pe(),pe.then(function(Ee){(J._status===0||J._status===-1)&&(J._status=1,J._result=Ee)},function(Ee){(J._status===0||J._status===-1)&&(J._status=2,J._result=Ee)}),J._status===-1&&(J._status=0,J._result=pe)}if(J._status===1)return J._result.default;throw J._result}var we=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var pe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(pe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)},Me={map:ie,forEach:function(J,pe,Ee){ie(J,function(){pe.apply(this,arguments)},Ee)},count:function(J){var pe=0;return ie(J,function(){pe++}),pe},toArray:function(J){return ie(J,function(pe){return pe})||[]},only:function(J){if(!V(J))throw Error("React.Children.only expected to receive a single React element child.");return J}};return Sn.Activity=g,Sn.Children=Me,Sn.Component=w,Sn.Fragment=t,Sn.Profiler=r,Sn.PureComponent=R,Sn.StrictMode=i,Sn.Suspense=c,Sn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Sn.__COMPILER_RUNTIME={__proto__:null,c:function(J){return k.H.useMemoCache(J)}},Sn.cache=function(J){return function(){return J.apply(null,arguments)}},Sn.cacheSignal=function(){return null},Sn.cloneElement=function(J,pe,Ee){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var Ge=T({},J.props),ht=J.key;if(pe!=null)for(be in pe.key!==void 0&&(ht=""+pe.key),pe)!F.call(pe,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&pe.ref===void 0||(Ge[be]=pe[be]);var be=arguments.length-2;if(be===1)Ge.children=Ee;else if(1<be){for(var Te=Array(be),dt=0;dt<be;dt++)Te[dt]=arguments[dt+2];Ge.children=Te}return P(J.type,ht,Ge)},Sn.createContext=function(J){return J={$$typeof:s,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:a,_context:J},J},Sn.createElement=function(J,pe,Ee){var Ge,ht={},be=null;if(pe!=null)for(Ge in pe.key!==void 0&&(be=""+pe.key),pe)F.call(pe,Ge)&&Ge!=="key"&&Ge!=="__self"&&Ge!=="__source"&&(ht[Ge]=pe[Ge]);var Te=arguments.length-2;if(Te===1)ht.children=Ee;else if(1<Te){for(var dt=Array(Te),ve=0;ve<Te;ve++)dt[ve]=arguments[ve+2];ht.children=dt}if(J&&J.defaultProps)for(Ge in Te=J.defaultProps,Te)ht[Ge]===void 0&&(ht[Ge]=Te[Ge]);return P(J,be,ht)},Sn.createRef=function(){return{current:null}},Sn.forwardRef=function(J){return{$$typeof:l,render:J}},Sn.isValidElement=V,Sn.lazy=function(J){return{$$typeof:p,_payload:{_status:-1,_result:J},_init:he}},Sn.memo=function(J,pe){return{$$typeof:f,type:J,compare:pe===void 0?null:pe}},Sn.startTransition=function(J){var pe=k.T,Ee={};k.T=Ee;try{var Ge=J(),ht=k.S;ht!==null&&ht(Ee,Ge),typeof Ge=="object"&&Ge!==null&&typeof Ge.then=="function"&&Ge.then(z,we)}catch(be){we(be)}finally{pe!==null&&Ee.types!==null&&(pe.types=Ee.types),k.T=pe}},Sn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Sn.use=function(J){return k.H.use(J)},Sn.useActionState=function(J,pe,Ee){return k.H.useActionState(J,pe,Ee)},Sn.useCallback=function(J,pe){return k.H.useCallback(J,pe)},Sn.useContext=function(J){return k.H.useContext(J)},Sn.useDebugValue=function(){},Sn.useDeferredValue=function(J,pe){return k.H.useDeferredValue(J,pe)},Sn.useEffect=function(J,pe){return k.H.useEffect(J,pe)},Sn.useEffectEvent=function(J){return k.H.useEffectEvent(J)},Sn.useId=function(){return k.H.useId()},Sn.useImperativeHandle=function(J,pe,Ee){return k.H.useImperativeHandle(J,pe,Ee)},Sn.useInsertionEffect=function(J,pe){return k.H.useInsertionEffect(J,pe)},Sn.useLayoutEffect=function(J,pe){return k.H.useLayoutEffect(J,pe)},Sn.useMemo=function(J,pe){return k.H.useMemo(J,pe)},Sn.useOptimistic=function(J,pe){return k.H.useOptimistic(J,pe)},Sn.useReducer=function(J,pe,Ee){return k.H.useReducer(J,pe,Ee)},Sn.useRef=function(J){return k.H.useRef(J)},Sn.useState=function(J){return k.H.useState(J)},Sn.useSyncExternalStore=function(J,pe,Ee){return k.H.useSyncExternalStore(J,pe,Ee)},Sn.useTransition=function(){return k.H.useTransition()},Sn.version="19.2.4",Sn}var Jk;function Hy(){return Jk||(Jk=1,GC.exports=gY()),GC.exports}var H=Hy();const dg=Vu(H),x6=dY({__proto__:null,default:dg},[H]);var WC={exports:{}},A_={},qC={exports:{}},$C={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eU;function vY(){return eU||(eU=1,(function(n){function e(ee,ie){var he=ee.length;ee.push(ie);e:for(;0<he;){var we=he-1>>>1,Me=ee[we];if(0<r(Me,ie))ee[we]=ie,ee[he]=Me,he=we;else break e}}function t(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var ie=ee[0],he=ee.pop();if(he!==ie){ee[0]=he;e:for(var we=0,Me=ee.length,J=Me>>>1;we<J;){var pe=2*(we+1)-1,Ee=ee[pe],Ge=pe+1,ht=ee[Ge];if(0>r(Ee,he))Ge<Me&&0>r(ht,Ee)?(ee[we]=ht,ee[Ge]=he,we=Ge):(ee[we]=Ee,ee[pe]=he,we=pe);else if(Ge<Me&&0>r(ht,he))ee[we]=ht,ee[Ge]=he,we=Ge;else break e}}return ie}function r(ee,ie){var he=ee.sortIndex-ie.sortIndex;return he!==0?he:ee.id-ie.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();n.unstable_now=function(){return s.now()-l}}var c=[],f=[],p=1,g=null,v=3,_=!1,x=!1,T=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function D(ee){for(var ie=t(f);ie!==null;){if(ie.callback===null)i(f);else if(ie.startTime<=ee)i(f),ie.sortIndex=ie.expirationTime,e(c,ie);else break;ie=t(f)}}function B(ee){if(T=!1,D(ee),!x)if(t(c)!==null)x=!0,z||(z=!0,W());else{var ie=t(f);ie!==null&&le(B,ie.startTime-ee)}}var z=!1,k=-1,F=5,P=-1;function L(){return S?!0:!(n.unstable_now()-P<F)}function V(){if(S=!1,z){var ee=n.unstable_now();P=ee;var ie=!0;try{e:{x=!1,T&&(T=!1,I(k),k=-1),_=!0;var he=v;try{t:{for(D(ee),g=t(c);g!==null&&!(g.expirationTime>ee&&L());){var we=g.callback;if(typeof we=="function"){g.callback=null,v=g.priorityLevel;var Me=we(g.expirationTime<=ee);if(ee=n.unstable_now(),typeof Me=="function"){g.callback=Me,D(ee),ie=!0;break t}g===t(c)&&i(c),D(ee)}else i(c);g=t(c)}if(g!==null)ie=!0;else{var J=t(f);J!==null&&le(B,J.startTime-ee),ie=!1}}break e}finally{g=null,v=he,_=!1}ie=void 0}}finally{ie?W():z=!1}}}var W;if(typeof R=="function")W=function(){R(V)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,ue=q.port2;q.port1.onmessage=V,W=function(){ue.postMessage(null)}}else W=function(){w(V,0)};function le(ee,ie){k=w(function(){ee(n.unstable_now())},ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(ee){switch(v){case 1:case 2:case 3:var ie=3;break;default:ie=v}var he=v;v=ie;try{return ee()}finally{v=he}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(ee,ie){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var he=v;v=ee;try{return ie()}finally{v=he}},n.unstable_scheduleCallback=function(ee,ie,he){var we=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?we+he:we):he=we,ee){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=he+Me,ee={id:p++,callback:ie,priorityLevel:ee,startTime:he,expirationTime:Me,sortIndex:-1},he>we?(ee.sortIndex=he,e(f,ee),t(c)===null&&ee===t(f)&&(T?(I(k),k=-1):T=!0,le(B,he-we))):(ee.sortIndex=Me,e(c,ee),x||_||(x=!0,z||(z=!0,W()))),ee},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(ee){var ie=v;return function(){var he=v;v=ie;try{return ee.apply(this,arguments)}finally{v=he}}}})($C)),$C}var tU;function S6(){return tU||(tU=1,qC.exports=vY()),qC.exports}var XC={exports:{}},ys={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nU;function yY(){if(nU)return ys;nU=1;var n=Hy();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(c,f,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:c,containerInfo:f,implementation:p}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ys.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ys.createPortal=function(c,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(c,f,null,p)},ys.flushSync=function(c){var f=s.T,p=i.p;try{if(s.T=null,i.p=2,c)return c()}finally{s.T=f,i.p=p,i.d.f()}},ys.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(c,f))},ys.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},ys.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var p=f.as,g=l(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,_=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:_}):p==="script"&&i.d.X(c,{crossOrigin:g,integrity:v,fetchPriority:_,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ys.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=l(f.as,f.crossOrigin);i.d.M(c,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(c)},ys.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,g=l(p,f.crossOrigin);i.d.L(c,p,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ys.preloadModule=function(c,f){if(typeof c=="string")if(f){var p=l(f.as,f.crossOrigin);i.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(c)},ys.requestFormReset=function(c){i.d.r(c)},ys.unstable_batchedUpdates=function(c,f){return c(f)},ys.useFormState=function(c,f,p){return s.H.useFormState(c,f,p)},ys.useFormStatus=function(){return s.H.useHostTransitionStatus()},ys.version="19.2.4",ys}var iU;function w6(){if(iU)return XC.exports;iU=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),XC.exports=yY(),XC.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rU;function _Y(){if(rU)return A_;rU=1;var n=S6(),e=Hy(),t=w6();function i(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)u+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var u=o,m=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(m=u.return),o=u.return;while(o)}return u.tag===3?m:null}function s(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function c(o){if(a(o)!==o)throw Error(i(188))}function f(o){var u=o.alternate;if(!u){if(u=a(o),u===null)throw Error(i(188));return u!==o?null:o}for(var m=o,y=u;;){var M=m.return;if(M===null)break;var C=M.alternate;if(C===null){if(y=M.return,y!==null){m=y;continue}break}if(M.child===C.child){for(C=M.child;C;){if(C===m)return c(M),o;if(C===y)return c(M),u;C=C.sibling}throw Error(i(188))}if(m.return!==y.return)m=M,y=C;else{for(var G=!1,Q=M.child;Q;){if(Q===m){G=!0,m=M,y=C;break}if(Q===y){G=!0,y=M,m=C;break}Q=Q.sibling}if(!G){for(Q=C.child;Q;){if(Q===m){G=!0,m=C,y=M;break}if(Q===y){G=!0,y=C,m=M;break}Q=Q.sibling}if(!G)throw Error(i(189))}}if(m.alternate!==y)throw Error(i(190))}if(m.tag!==3)throw Error(i(188));return m.stateNode.current===m?o:u}function p(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=p(o),u!==null)return u;o=o.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),R=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function W(o){return o===null||typeof o!="object"?null:(o=V&&o[V]||o["@@iterator"],typeof o=="function"?o:null)}var q=Symbol.for("react.client.reference");function ue(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===q?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case T:return"Fragment";case w:return"Profiler";case S:return"StrictMode";case B:return"Suspense";case z:return"SuspenseList";case P:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case x:return"Portal";case R:return o.displayName||"Context";case I:return(o._context.displayName||"Context")+".Consumer";case D:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case k:return u=o.displayName||null,u!==null?u:ue(o.type)||"Memo";case F:u=o._payload,o=o._init;try{return ue(o(u))}catch{}}return null}var le=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},we=[],Me=-1;function J(o){return{current:o}}function pe(o){0>Me||(o.current=we[Me],we[Me]=null,Me--)}function Ee(o,u){Me++,we[Me]=o.current,o.current=u}var Ge=J(null),ht=J(null),be=J(null),Te=J(null);function dt(o,u){switch(Ee(be,u),Ee(ht,o),Ee(Ge,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?_k(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=_k(u),o=bk(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}pe(Ge),Ee(Ge,o)}function ve(){pe(Ge),pe(ht),pe(be)}function Ye(o){o.memoizedState!==null&&Ee(Te,o);var u=Ge.current,m=bk(u,o.type);u!==m&&(Ee(ht,o),Ee(Ge,m))}function wt(o){ht.current===o&&(pe(Ge),pe(ht)),Te.current===o&&(pe(Te),x_._currentValue=he)}var je,At;function Re(o){if(je===void 0)try{throw Error()}catch(m){var u=m.stack.trim().match(/\n( *(at )?)/);je=u&&u[1]||"",At=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+je+o+At}var Qe=!1;function Ve(o,u){if(!o||Qe)return"";Qe=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var it=function(){throw Error()};if(Object.defineProperty(it.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(it,[])}catch(Be){var Ne=Be}Reflect.construct(o,[],it)}else{try{it.call()}catch(Be){Ne=Be}o.call(it.prototype)}}else{try{throw Error()}catch(Be){Ne=Be}(it=o())&&typeof it.catch=="function"&&it.catch(function(){})}}catch(Be){if(Be&&Ne&&typeof Be.stack=="string")return[Be.stack,Ne.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=y.DetermineComponentFrameRoot(),G=C[0],Q=C[1];if(G&&Q){var ce=G.split(`
`),Ie=Q.split(`
`);for(M=y=0;y<ce.length&&!ce[y].includes("DetermineComponentFrameRoot");)y++;for(;M<Ie.length&&!Ie[M].includes("DetermineComponentFrameRoot");)M++;if(y===ce.length||M===Ie.length)for(y=ce.length-1,M=Ie.length-1;1<=y&&0<=M&&ce[y]!==Ie[M];)M--;for(;1<=y&&0<=M;y--,M--)if(ce[y]!==Ie[M]){if(y!==1||M!==1)do if(y--,M--,0>M||ce[y]!==Ie[M]){var Ke=`
`+ce[y].replace(" at new "," at ");return o.displayName&&Ke.includes("<anonymous>")&&(Ke=Ke.replace("<anonymous>",o.displayName)),Ke}while(1<=y&&0<=M);break}}}finally{Qe=!1,Error.prepareStackTrace=m}return(m=o?o.displayName||o.name:"")?Re(m):""}function lt(o,u){switch(o.tag){case 26:case 27:case 5:return Re(o.type);case 16:return Re("Lazy");case 13:return o.child!==u&&u!==null?Re("Suspense Fallback"):Re("Suspense");case 19:return Re("SuspenseList");case 0:case 15:return Ve(o.type,!1);case 11:return Ve(o.type.render,!1);case 1:return Ve(o.type,!0);case 31:return Re("Activity");default:return""}}function ae(o){try{var u="",m=null;do u+=lt(o,m),m=o,o=o.return;while(o);return u}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}var Et=Object.prototype.hasOwnProperty,ft=n.unstable_scheduleCallback,Lt=n.unstable_cancelCallback,pt=n.unstable_shouldYield,te=n.unstable_requestPaint,X=n.unstable_now,de=n.unstable_getCurrentPriorityLevel,Le=n.unstable_ImmediatePriority,Ze=n.unstable_UserBlockingPriority,Oe=n.unstable_NormalPriority,Tt=n.unstable_LowPriority,gt=n.unstable_IdlePriority,Pt=n.log,Ht=n.unstable_setDisableYieldValue,nt=null,ot=null;function xt(o){if(typeof Pt=="function"&&Ht(o),ot&&typeof ot.setStrictMode=="function")try{ot.setStrictMode(nt,o)}catch{}}var Y=Math.clz32?Math.clz32:oe,se=Math.log,Fe=Math.LN2;function oe(o){return o>>>=0,o===0?32:31-(se(o)/Fe|0)|0}var $e=256,qe=262144,et=4194304;function Xe(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function We(o,u,m){var y=o.pendingLanes;if(y===0)return 0;var M=0,C=o.suspendedLanes,G=o.pingedLanes;o=o.warmLanes;var Q=y&134217727;return Q!==0?(y=Q&~C,y!==0?M=Xe(y):(G&=Q,G!==0?M=Xe(G):m||(m=Q&~o,m!==0&&(M=Xe(m))))):(Q=y&~C,Q!==0?M=Xe(Q):G!==0?M=Xe(G):m||(m=y&~o,m!==0&&(M=Xe(m)))),M===0?0:u!==0&&u!==M&&(u&C)===0&&(C=M&-M,m=u&-u,C>=m||C===32&&(m&4194048)!==0)?u:M}function at(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function kt(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function un(){var o=et;return et<<=1,(et&62914560)===0&&(et=4194304),o}function Jt(o){for(var u=[],m=0;31>m;m++)u.push(o);return u}function ii(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Mi(o,u,m,y,M,C){var G=o.pendingLanes;o.pendingLanes=m,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=m,o.entangledLanes&=m,o.errorRecoveryDisabledLanes&=m,o.shellSuspendCounter=0;var Q=o.entanglements,ce=o.expirationTimes,Ie=o.hiddenUpdates;for(m=G&~m;0<m;){var Ke=31-Y(m),it=1<<Ke;Q[Ke]=0,ce[Ke]=-1;var Ne=Ie[Ke];if(Ne!==null)for(Ie[Ke]=null,Ke=0;Ke<Ne.length;Ke++){var Be=Ne[Ke];Be!==null&&(Be.lane&=-536870913)}m&=~it}y!==0&&Qr(o,y,0),C!==0&&M===0&&o.tag!==0&&(o.suspendedLanes|=C&~(G&~u))}function Qr(o,u,m){o.pendingLanes|=u,o.suspendedLanes&=~u;var y=31-Y(u);o.entangledLanes|=u,o.entanglements[y]=o.entanglements[y]|1073741824|m&261930}function rs(o,u){var m=o.entangledLanes|=u;for(o=o.entanglements;m;){var y=31-Y(m),M=1<<y;M&u|o[y]&u&&(o[y]|=u),m&=~M}}function as(o,u){var m=u&-u;return m=(m&42)!==0?1:Jr(m),(m&(o.suspendedLanes|u))!==0?0:m}function Jr(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Cr(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function tu(){var o=ie.p;return o!==0?o:(o=window.event,o===void 0?32:Hk(o.type))}function Ci(o,u){var m=ie.p;try{return ie.p=o,u()}finally{ie.p=m}}var pa=Math.random().toString(36).slice(2),xi="__reactFiber$"+pa,Fi="__reactProps$"+pa,ea="__reactContainer$"+pa,ma="__reactEvents$"+pa,Oa="__reactListeners$"+pa,Fo="__reactHandles$"+pa,nu="__reactResources$"+pa,ga="__reactMarker$"+pa;function ao(o){delete o[xi],delete o[Fi],delete o[ma],delete o[Oa],delete o[Fo]}function Ns(o){var u=o[xi];if(u)return u;for(var m=o.parentNode;m;){if(u=m[ea]||m[xi]){if(m=u.alternate,u.child!==null||m!==null&&m.child!==null)for(o=Mk(o);o!==null;){if(m=o[xi])return m;o=Mk(o)}return u}o=m,m=o.parentNode}return null}function Da(o){if(o=o[xi]||o[ea]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function va(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(i(33))}function ss(o){var u=o[nu];return u||(u=o[nu]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Z(o){o[ga]=!0}var ge=new Set,De={};function Ce(o,u){_e(o,u),_e(o+"Capture",u)}function _e(o,u){for(De[o]=u,o=0;o<u.length;o++)ge.add(u[o])}var vt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ct={},ct={};function Ot(o){return Et.call(ct,o)?!0:Et.call(Ct,o)?!1:vt.test(o)?ct[o]=!0:(Ct[o]=!0,!1)}function Ut(o,u,m){if(Ot(u))if(m===null)o.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var y=u.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+m)}}function Vt(o,u,m){if(m===null)o.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+m)}}function It(o,u,m,y){if(y===null)o.removeAttribute(m);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(m);return}o.setAttributeNS(u,m,""+y)}}function $t(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Pn(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function ri(o,u,m){var y=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var M=y.get,C=y.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return M.call(this)},set:function(G){m=""+G,C.call(this,G)}}),Object.defineProperty(o,u,{enumerable:y.enumerable}),{getValue:function(){return m},setValue:function(G){m=""+G},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Kt(o){if(!o._valueTracker){var u=Pn(o)?"checked":"value";o._valueTracker=ri(o,u,""+o[u])}}function on(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var m=u.getValue(),y="";return o&&(y=Pn(o)?o.checked?"true":"false":o.value),o=y,o!==m?(u.setValue(o),!0):!1}function St(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var An=/[\n"\\]/g;function tn(o){return o.replace(An,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function zi(o,u,m,y,M,C,G,Q){o.name="",G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?o.type=G:o.removeAttribute("type"),u!=null?G==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+$t(u)):o.value!==""+$t(u)&&(o.value=""+$t(u)):G!=="submit"&&G!=="reset"||o.removeAttribute("value"),u!=null?yi(o,G,$t(u)):m!=null?yi(o,G,$t(m)):y!=null&&o.removeAttribute("value"),M==null&&C!=null&&(o.defaultChecked=!!C),M!=null&&(o.checked=M&&typeof M!="function"&&typeof M!="symbol"),Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?o.name=""+$t(Q):o.removeAttribute("name")}function Os(o,u,m,y,M,C,G,Q){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(o.type=C),u!=null||m!=null){if(!(C!=="submit"&&C!=="reset"||u!=null)){Kt(o);return}m=m!=null?""+$t(m):"",u=u!=null?""+$t(u):m,Q||u===o.value||(o.value=u),o.defaultValue=u}y=y??M,y=typeof y!="function"&&typeof y!="symbol"&&!!y,o.checked=Q?o.checked:!!y,o.defaultChecked=!!y,G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"&&(o.name=G),Kt(o)}function yi(o,u,m){u==="number"&&St(o.ownerDocument)===o||o.defaultValue===""+m||(o.defaultValue=""+m)}function ta(o,u,m,y){if(o=o.options,u){u={};for(var M=0;M<m.length;M++)u["$"+m[M]]=!0;for(m=0;m<o.length;m++)M=u.hasOwnProperty("$"+o[m].value),o[m].selected!==M&&(o[m].selected=M),M&&y&&(o[m].defaultSelected=!0)}else{for(m=""+$t(m),u=null,M=0;M<o.length;M++){if(o[M].value===m){o[M].selected=!0,y&&(o[M].defaultSelected=!0);return}u!==null||o[M].disabled||(u=o[M])}u!==null&&(u.selected=!0)}}function Zn(o,u,m){if(u!=null&&(u=""+$t(u),u!==o.value&&(o.value=u),m==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=m!=null?""+$t(m):""}function Ii(o,u,m,y){if(u==null){if(y!=null){if(m!=null)throw Error(i(92));if(le(y)){if(1<y.length)throw Error(i(93));y=y[0]}m=y}m==null&&(m=""),u=m}m=$t(u),o.defaultValue=m,y=o.textContent,y===m&&y!==""&&y!==null&&(o.value=y),Kt(o)}function di(o,u){if(u){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=u;return}}o.textContent=u}var or=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lr(o,u,m){var y=u.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?y?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":y?o.setProperty(u,m):typeof m!="number"||m===0||or.has(u)?u==="float"?o.cssFloat=m:o[u]=(""+m).trim():o[u]=m+"px"}function fl(o,u,m){if(u!=null&&typeof u!="object")throw Error(i(62));if(o=o.style,m!=null){for(var y in m)!m.hasOwnProperty(y)||u!=null&&u.hasOwnProperty(y)||(y.indexOf("--")===0?o.setProperty(y,""):y==="float"?o.cssFloat="":o[y]="");for(var M in u)y=u[M],u.hasOwnProperty(M)&&m[M]!==y&&lr(o,M,y)}else for(var C in u)u.hasOwnProperty(C)&&lr(o,C,u[C])}function La(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _p=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function uf(o){return hl.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function zo(){}var Mh=null;function Ds(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var iu=null,so=null;function Gu(o){var u=Da(o);if(u&&(o=u.stateNode)){var m=o[Fi]||null;e:switch(o=u.stateNode,u.type){case"input":if(zi(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),u=m.name,m.type==="radio"&&u!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+tn(""+u)+'"][type="radio"]'),u=0;u<m.length;u++){var y=m[u];if(y!==o&&y.form===o.form){var M=y[Fi]||null;if(!M)throw Error(i(90));zi(y,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(u=0;u<m.length;u++)y=m[u],y.form===o.form&&on(y)}break e;case"textarea":Zn(o,m.value,m.defaultValue);break e;case"select":u=m.value,u!=null&&ta(o,!!m.multiple,u,!1)}}}var cf=!1;function ru(o,u,m){if(cf)return o(u,m);cf=!0;try{var y=o(u);return y}finally{if(cf=!1,(iu!==null||so!==null)&&(Ko(),iu&&(u=iu,o=so,so=iu=null,Gu(u),o)))for(u=0;u<o.length;u++)Gu(o[u])}}function oo(o,u){var m=o.stateNode;if(m===null)return null;var y=m[Fi]||null;if(y===null)return null;m=y[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(i(231,u,typeof m));return m}var Ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ff=!1;if(Ls)try{var li={};Object.defineProperty(li,"passive",{get:function(){ff=!0}}),window.addEventListener("test",li,li),window.removeEventListener("test",li,li)}catch{ff=!1}var ka=null,Ch=null,dl=null;function Wu(){if(dl)return dl;var o,u=Ch,m=u.length,y,M="value"in ka?ka.value:ka.textContent,C=M.length;for(o=0;o<m&&u[o]===M[o];o++);var G=m-o;for(y=1;y<=G&&u[m-y]===M[C-y];y++);return dl=M.slice(o,1<y?1-y:void 0)}function qu(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function Bo(){return!0}function Vo(){return!1}function zr(o){function u(m,y,M,C,G){this._reactName=m,this._targetInst=M,this.type=y,this.nativeEvent=C,this.target=G,this.currentTarget=null;for(var Q in o)o.hasOwnProperty(Q)&&(m=o[Q],this[Q]=m?m(C):C[Q]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Bo:Vo,this.isPropagationStopped=Vo,this}return g(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Bo)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Bo)},persist:function(){},isPersistent:Bo}),u}var pl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jo=zr(pl),au=g({},pl,{view:0,detail:0}),Ih=zr(au),ml,hf,Ho,$u=g({},au,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:su,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ho&&(Ho&&o.type==="mousemove"?(ml=o.screenX-Ho.screenX,hf=o.screenY-Ho.screenY):hf=ml=0,Ho=o),ml)},movementY:function(o){return"movementY"in o?o.movementY:hf}}),Rh=zr($u),Xu=g({},$u,{dataTransfer:0}),bp=zr(Xu),Ph=g({},au,{relatedTarget:0}),Yu=zr(Ph),Nh=g({},pl,{animationName:0,elapsedTime:0,pseudoElement:0}),Tg=zr(Nh),Oh=g({},pl,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),xp=zr(Oh),Ku=g({},pl,{data:0}),lo=zr(Ku),df={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dh(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=wp[o])?!!u[o]:!1}function su(){return Dh}var ya=g({},au,{key:function(o){if(o.key){var u=df[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=qu(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Sp[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:su,charCode:function(o){return o.type==="keypress"?qu(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?qu(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),gl=zr(ya),pf=g({},$u,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vl=zr(pf),E=g({},au,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:su}),j=zr(E),$=g({},pl,{propertyName:0,elapsedTime:0,pseudoElement:0}),ne=zr($),ye=g({},$u,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),ke=zr(ye),bt=g({},pl,{newState:0,oldState:0}),vn=zr(bt),Qi=[9,13,27,32],Vn=Ls&&"CompositionEvent"in window,Ri=null;Ls&&"documentMode"in document&&(Ri=document.documentMode);var Ua=Ls&&"TextEvent"in window&&!Ri,Go=Ls&&(!Vn||Ri&&8<Ri&&11>=Ri),Wo=" ",os=!1;function ou(o,u){switch(o){case"keyup":return Qi.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mf(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var gf=!1;function eS(o,u){switch(o){case"compositionend":return mf(u);case"keypress":return u.which!==32?null:(os=!0,Wo);case"textInput":return o=u.data,o===Wo&&os?null:o;default:return null}}function h0(o,u){if(gf)return o==="compositionend"||!Vn&&ou(o,u)?(o=Wu(),dl=Ch=ka=null,gf=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Go&&u.locale!=="ko"?null:u.data;default:return null}}var d0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function p0(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!d0[o.type]:u==="textarea"}function Ag(o,u,m,y){iu?so?so.push(y):so=[y]:iu=y,u=a1(u,"onChange"),0<u.length&&(m=new jo("onChange","change",null,m,y),o.push({event:m,listeners:u}))}var Zu=null,vf=null;function tS(o){dk(o,0)}function Lh(o){var u=va(o);if(on(u))return o}function m0(o,u){if(o==="change")return u}var yl=!1;if(Ls){var Ep;if(Ls){var g0="oninput"in document;if(!g0){var v0=document.createElement("div");v0.setAttribute("oninput","return;"),g0=typeof v0.oninput=="function"}Ep=g0}else Ep=!1;yl=Ep&&(!document.documentMode||9<document.documentMode)}function uo(){Zu&&(Zu.detachEvent("onpropertychange",Tp),vf=Zu=null)}function Tp(o){if(o.propertyName==="value"&&Lh(vf)){var u=[];Ag(u,vf,o,Ds(o)),ru(tS,u)}}function nS(o,u,m){o==="focusin"?(uo(),Zu=u,vf=m,Zu.attachEvent("onpropertychange",Tp)):o==="focusout"&&uo()}function y0(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Lh(vf)}function iS(o,u){if(o==="click")return Lh(u)}function rS(o,u){if(o==="input"||o==="change")return Lh(u)}function _0(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var Fa=typeof Object.is=="function"?Object.is:_0;function kh(o,u){if(Fa(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var m=Object.keys(o),y=Object.keys(u);if(m.length!==y.length)return!1;for(y=0;y<m.length;y++){var M=m[y];if(!Et.call(u,M)||!Fa(o[M],u[M]))return!1}return!0}function Ap(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Uh(o,u){var m=Ap(o);o=0;for(var y;m;){if(m.nodeType===3){if(y=o+m.textContent.length,o<=u&&y>=u)return{node:m,offset:u-o};o=y}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Ap(m)}}function Si(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?Si(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function aS(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=St(o.document);u instanceof o.HTMLIFrameElement;){try{var m=typeof u.contentWindow.location.href=="string"}catch{m=!1}if(m)o=u.contentWindow;else break;u=St(o.document)}return u}function b0(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var sS=Ls&&"documentMode"in document&&11>=document.documentMode,_l=null,bl=null,Fh=null,Mg=!1;function zh(o,u,m){var y=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Mg||_l==null||_l!==St(y)||(y=_l,"selectionStart"in y&&b0(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Fh&&kh(Fh,y)||(Fh=y,y=a1(bl,"onSelect"),0<y.length&&(u=new jo("onSelect","select",null,u,m),o.push({event:u,listeners:y}),u.target=_l)))}function _a(o,u){var m={};return m[o.toLowerCase()]=u.toLowerCase(),m["Webkit"+o]="webkit"+u,m["Moz"+o]="moz"+u,m}var yf={animationend:_a("Animation","AnimationEnd"),animationiteration:_a("Animation","AnimationIteration"),animationstart:_a("Animation","AnimationStart"),transitionrun:_a("Transition","TransitionRun"),transitionstart:_a("Transition","TransitionStart"),transitioncancel:_a("Transition","TransitionCancel"),transitionend:_a("Transition","TransitionEnd")},Mp={},x0={};Ls&&(x0=document.createElement("div").style,"AnimationEvent"in window||(delete yf.animationend.animation,delete yf.animationiteration.animation,delete yf.animationstart.animation),"TransitionEvent"in window||delete yf.transitionend.transition);function lu(o){if(Mp[o])return Mp[o];if(!yf[o])return o;var u=yf[o],m;for(m in u)if(u.hasOwnProperty(m)&&m in x0)return Mp[o]=u[m];return o}var Cg=lu("animationend"),Cp=lu("animationiteration"),S0=lu("animationstart"),oS=lu("transitionrun"),fC=lu("transitionstart"),lS=lu("transitioncancel"),w0=lu("transitionend"),co=new Map,Ip="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ip.push("scrollEnd");function fo(o,u){co.set(o,u),Ce(u,[o])}var Rp=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},ho=[],uu=0,Br=0;function Pp(){for(var o=uu,u=Br=uu=0;u<o;){var m=ho[u];ho[u++]=null;var y=ho[u];ho[u++]=null;var M=ho[u];ho[u++]=null;var C=ho[u];if(ho[u++]=null,y!==null&&M!==null){var G=y.pending;G===null?M.next=M:(M.next=G.next,G.next=M),y.pending=M}C!==0&&Qu(m,M,C)}}function Vr(o,u,m,y){ho[uu++]=o,ho[uu++]=u,ho[uu++]=m,ho[uu++]=y,Br|=y,o.lanes|=y,o=o.alternate,o!==null&&(o.lanes|=y)}function Ig(o,u,m,y){return Vr(o,u,m,y),po(o)}function za(o,u){return Vr(o,null,null,u),po(o)}function Qu(o,u,m){o.lanes|=m;var y=o.alternate;y!==null&&(y.lanes|=m);for(var M=!1,C=o.return;C!==null;)C.childLanes|=m,y=C.alternate,y!==null&&(y.childLanes|=m),C.tag===22&&(o=C.stateNode,o===null||o._visibility&1||(M=!0)),o=C,C=C.return;return o.tag===3?(C=o.stateNode,M&&u!==null&&(M=31-Y(m),o=C.hiddenUpdates,y=o[M],y===null?o[M]=[u]:y.push(u),u.lane=m|536870912),C):null}function po(o){if(50<vc)throw vc=0,Uf=null,Error(i(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var Ju={};function E0(o,u,m,y){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bi(o,u,m,y){return new E0(o,u,m,y)}function Rg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function ls(o,u){var m=o.alternate;return m===null?(m=Bi(o.tag,u,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=u,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&65011712,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,u=o.dependencies,m.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m.refCleanup=o.refCleanup,m}function Bh(o,u){o.flags&=65011714;var m=o.alternate;return m===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=m.childLanes,o.lanes=m.lanes,o.child=m.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=m.memoizedProps,o.memoizedState=m.memoizedState,o.updateQueue=m.updateQueue,o.type=m.type,u=m.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function xl(o,u,m,y,M,C){var G=0;if(y=o,typeof o=="function")Rg(o)&&(G=1);else if(typeof o=="string")G=JX(o,m,Ge.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case P:return o=Bi(31,m,u,M),o.elementType=P,o.lanes=C,o;case T:return ec(m.children,M,C,u);case S:G=8,M|=24;break;case w:return o=Bi(12,m,u,M|2),o.elementType=w,o.lanes=C,o;case B:return o=Bi(13,m,u,M),o.elementType=B,o.lanes=C,o;case z:return o=Bi(19,m,u,M),o.elementType=z,o.lanes=C,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case R:G=10;break e;case I:G=9;break e;case D:G=11;break e;case k:G=14;break e;case F:G=16,y=null;break e}G=29,m=Error(i(130,o===null?"null":typeof o,"")),y=null}return u=Bi(G,m,u,M),u.elementType=o,u.type=y,u.lanes=C,u}function ec(o,u,m,y){return o=Bi(7,o,y,u),o.lanes=m,o}function Pg(o,u,m){return o=Bi(6,o,null,u),o.lanes=m,o}function Vh(o){var u=Bi(18,null,null,0);return u.stateNode=o,u}function Ng(o,u,m){return u=Bi(4,o.children!==null?o.children:[],o.key,u),u.lanes=m,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var Np=new WeakMap;function ks(o,u){if(typeof o=="object"&&o!==null){var m=Np.get(o);return m!==void 0?m:(u={value:o,source:u,stack:ae(u)},Np.set(o,u),u)}return{value:o,source:u,stack:ae(u)}}var tc=[],nc=0,jh=null,Hh=0,us=[],Di=0,cu=null,Vi=1,qo="";function Sl(o,u){tc[nc++]=Hh,tc[nc++]=jh,jh=o,Hh=u}function uS(o,u,m){us[Di++]=Vi,us[Di++]=qo,us[Di++]=cu,cu=o;var y=Vi;o=qo;var M=32-Y(y)-1;y&=~(1<<M),m+=1;var C=32-Y(u)+M;if(30<C){var G=M-M%5;C=(y&(1<<G)-1).toString(32),y>>=G,M-=G,Vi=1<<32-Y(u)+M|m<<M|y,qo=C+o}else Vi=1<<C|m<<M|y,qo=o}function wl(o){o.return!==null&&(Sl(o,1),uS(o,1,0))}function Og(o){for(;o===jh;)jh=tc[--nc],tc[nc]=null,Hh=tc[--nc],tc[nc]=null;for(;o===cu;)cu=us[--Di],us[Di]=null,qo=us[--Di],us[Di]=null,Vi=us[--Di],us[Di]=null}function Dg(o,u){us[Di++]=Vi,us[Di++]=qo,us[Di++]=cu,Vi=u.id,qo=u.overflow,cu=o}var Ji=null,wi=null,zn=!1,fu=null,Us=!1,Gh=Error(i(519));function El(o){var u=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tl(ks(u,o)),Gh}function cS(o){var u=o.stateNode,m=o.type,y=o.memoizedProps;switch(u[xi]=o,u[Fi]=y,m){case"dialog":Hn("cancel",u),Hn("close",u);break;case"iframe":case"object":case"embed":Hn("load",u);break;case"video":case"audio":for(m=0;m<Mo.length;m++)Hn(Mo[m],u);break;case"source":Hn("error",u);break;case"img":case"image":case"link":Hn("error",u),Hn("load",u);break;case"details":Hn("toggle",u);break;case"input":Hn("invalid",u),Os(u,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0);break;case"select":Hn("invalid",u);break;case"textarea":Hn("invalid",u),Ii(u,y.value,y.defaultValue,y.children)}m=y.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||u.textContent===""+m||y.suppressHydrationWarning===!0||vk(u.textContent,m)?(y.popover!=null&&(Hn("beforetoggle",u),Hn("toggle",u)),y.onScroll!=null&&Hn("scroll",u),y.onScrollEnd!=null&&Hn("scrollend",u),y.onClick!=null&&(u.onclick=zo),u=!0):u=!1,u||El(o,!0)}function fS(o){for(Ji=o.return;Ji;)switch(Ji.tag){case 5:case 31:case 13:Us=!1;return;case 27:case 3:Us=!0;return;default:Ji=Ji.return}}function Wh(o){if(o!==Ji)return!1;if(!zn)return fS(o),zn=!0,!1;var u=o.tag,m;if((m=u!==3&&u!==27)&&((m=u===5)&&(m=o.type,m=!(m!=="form"&&m!=="button")||MC(o.type,o.memoizedProps)),m=!m),m&&wi&&El(o),fS(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));wi=Ak(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));wi=Ak(o)}else u===27?(u=wi,fd(o.type)?(o=NC,NC=null,wi=o):wi=u):wi=Ji?zl(o.stateNode.nextSibling):null;return!0}function ic(){wi=Ji=null,zn=!1}function Lg(){var o=fu;return o!==null&&(tr===null?tr=o:tr.push.apply(tr,o),fu=null),o}function Tl(o){fu===null?fu=[o]:fu.push(o)}var qh=J(null),rc=null,Al=null;function hu(o,u,m){Ee(qh,u._currentValue),u._currentValue=m}function Ml(o){o._currentValue=qh.current,pe(qh)}function kg(o,u,m){for(;o!==null;){var y=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),o===m)break;o=o.return}}function Ug(o,u,m,y){var M=o.child;for(M!==null&&(M.return=o);M!==null;){var C=M.dependencies;if(C!==null){var G=M.child;C=C.firstContext;e:for(;C!==null;){var Q=C;C=M;for(var ce=0;ce<u.length;ce++)if(Q.context===u[ce]){C.lanes|=m,Q=C.alternate,Q!==null&&(Q.lanes|=m),kg(C.return,m,o),y||(G=null);break e}C=Q.next}}else if(M.tag===18){if(G=M.return,G===null)throw Error(i(341));G.lanes|=m,C=G.alternate,C!==null&&(C.lanes|=m),kg(G,m,o),G=null}else G=M.child;if(G!==null)G.return=M;else for(G=M;G!==null;){if(G===o){G=null;break}if(M=G.sibling,M!==null){M.return=G.return,G=M;break}G=G.return}M=G}}function Cl(o,u,m,y){o=null;for(var M=u,C=!1;M!==null;){if(!C){if((M.flags&524288)!==0)C=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var G=M.alternate;if(G===null)throw Error(i(387));if(G=G.memoizedProps,G!==null){var Q=M.type;Fa(M.pendingProps.value,G.value)||(o!==null?o.push(Q):o=[Q])}}else if(M===Te.current){if(G=M.alternate,G===null)throw Error(i(387));G.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(o!==null?o.push(x_):o=[x_])}M=M.return}o!==null&&Ug(u,o,m,y),u.flags|=262144}function Op(o){for(o=o.firstContext;o!==null;){if(!Fa(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function ac(o){rc=o,Al=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function cn(o){return hS(rc,o)}function $h(o,u){return rc===null&&ac(o),hS(o,u)}function hS(o,u){var m=u._currentValue;if(u={context:u,memoizedValue:m,next:null},Al===null){if(o===null)throw Error(i(308));Al=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else Al=Al.next=u;return m}var dS=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(m,y){o.push(y)}};this.abort=function(){u.aborted=!0,o.forEach(function(m){return m()})}},hC=n.unstable_scheduleCallback,dC=n.unstable_NormalPriority,vr={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function T0(){return{controller:new dS,data:new Map,refCount:0}}function _f(o){o.refCount--,o.refCount===0&&hC(dC,function(){o.controller.abort()})}var Fs=null,Fg=0,du=0,mo=null;function A0(o,u){if(Fs===null){var m=Fs=[];Fg=0,du=Ue(),mo={status:"pending",value:void 0,then:function(y){m.push(y)}}}return Fg++,u.then(M0,M0),u}function M0(){if(--Fg===0&&Fs!==null){mo!==null&&(mo.status="fulfilled");var o=Fs;Fs=null,du=0,mo=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function C0(o,u){var m=[],y={status:"pending",value:null,reason:null,then:function(M){m.push(M)}};return o.then(function(){y.status="fulfilled",y.value=u;for(var M=0;M<m.length;M++)(0,m[M])(u)},function(M){for(y.status="rejected",y.reason=M,M=0;M<m.length;M++)(0,m[M])(void 0)}),y}var pS=ee.S;ee.S=function(o,u){m_=X(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&A0(o,u),pS!==null&&pS(o,u)};var sc=J(null);function zg(){var o=sc.current;return o!==null?o:dn.pooledCache}function Dp(o,u){u===null?Ee(sc,sc.current):Ee(sc,u.pool)}function I0(){var o=zg();return o===null?null:{parent:vr._currentValue,pool:o}}var bf=Error(i(460)),Lp=Error(i(474)),Mn=Error(i(542)),Bg={then:function(){}};function cs(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Vg(o,u,m){switch(m=o[m],m===void 0?o.push(u):m!==u&&(u.then(zo,zo),u=m),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,wf(o),o;default:if(typeof u.status=="string")u.then(zo,zo);else{if(o=dn,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=u,o.status="pending",o.then(function(y){if(u.status==="pending"){var M=u;M.status="fulfilled",M.value=y}},function(y){if(u.status==="pending"){var M=u;M.status="rejected",M.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,wf(o),o}throw Il=u,bf}}function xf(o){try{var u=o._init;return u(o._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(Il=m,bf):m}}var Il=null;function Sf(){if(Il===null)throw Error(i(459));var o=Il;return Il=null,o}function wf(o){if(o===bf||o===Mn)throw Error(i(483))}var Ef=null,Tf=0;function kp(o){var u=Tf;return Tf+=1,Ef===null&&(Ef=[]),Vg(Ef,o,u)}function go(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function Xh(o,u){throw u.$$typeof===v?Error(i(525)):(o=Object.prototype.toString.call(u),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function jg(o){function u(xe,me){if(o){var Ae=xe.deletions;Ae===null?(xe.deletions=[me],xe.flags|=16):Ae.push(me)}}function m(xe,me){if(!o)return null;for(;me!==null;)u(xe,me),me=me.sibling;return null}function y(xe){for(var me=new Map;xe!==null;)xe.key!==null?me.set(xe.key,xe):me.set(xe.index,xe),xe=xe.sibling;return me}function M(xe,me){return xe=ls(xe,me),xe.index=0,xe.sibling=null,xe}function C(xe,me,Ae){return xe.index=Ae,o?(Ae=xe.alternate,Ae!==null?(Ae=Ae.index,Ae<me?(xe.flags|=67108866,me):Ae):(xe.flags|=67108866,me)):(xe.flags|=1048576,me)}function G(xe){return o&&xe.alternate===null&&(xe.flags|=67108866),xe}function Q(xe,me,Ae,Je){return me===null||me.tag!==6?(me=Pg(Ae,xe.mode,Je),me.return=xe,me):(me=M(me,Ae),me.return=xe,me)}function ce(xe,me,Ae,Je){var Qt=Ae.type;return Qt===T?Ke(xe,me,Ae.props.children,Je,Ae.key):me!==null&&(me.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===F&&xf(Qt)===me.type)?(me=M(me,Ae.props),go(me,Ae),me.return=xe,me):(me=xl(Ae.type,Ae.key,Ae.props,null,xe.mode,Je),go(me,Ae),me.return=xe,me)}function Ie(xe,me,Ae,Je){return me===null||me.tag!==4||me.stateNode.containerInfo!==Ae.containerInfo||me.stateNode.implementation!==Ae.implementation?(me=Ng(Ae,xe.mode,Je),me.return=xe,me):(me=M(me,Ae.children||[]),me.return=xe,me)}function Ke(xe,me,Ae,Je,Qt){return me===null||me.tag!==7?(me=ec(Ae,xe.mode,Je,Qt),me.return=xe,me):(me=M(me,Ae),me.return=xe,me)}function it(xe,me,Ae){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return me=Pg(""+me,xe.mode,Ae),me.return=xe,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case _:return Ae=xl(me.type,me.key,me.props,null,xe.mode,Ae),go(Ae,me),Ae.return=xe,Ae;case x:return me=Ng(me,xe.mode,Ae),me.return=xe,me;case F:return me=xf(me),it(xe,me,Ae)}if(le(me)||W(me))return me=ec(me,xe.mode,Ae,null),me.return=xe,me;if(typeof me.then=="function")return it(xe,kp(me),Ae);if(me.$$typeof===R)return it(xe,$h(xe,me),Ae);Xh(xe,me)}return null}function Ne(xe,me,Ae,Je){var Qt=me!==null?me.key:null;if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint")return Qt!==null?null:Q(xe,me,""+Ae,Je);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case _:return Ae.key===Qt?ce(xe,me,Ae,Je):null;case x:return Ae.key===Qt?Ie(xe,me,Ae,Je):null;case F:return Ae=xf(Ae),Ne(xe,me,Ae,Je)}if(le(Ae)||W(Ae))return Qt!==null?null:Ke(xe,me,Ae,Je,null);if(typeof Ae.then=="function")return Ne(xe,me,kp(Ae),Je);if(Ae.$$typeof===R)return Ne(xe,me,$h(xe,Ae),Je);Xh(xe,Ae)}return null}function Be(xe,me,Ae,Je,Qt){if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return xe=xe.get(Ae)||null,Q(me,xe,""+Je,Qt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case _:return xe=xe.get(Je.key===null?Ae:Je.key)||null,ce(me,xe,Je,Qt);case x:return xe=xe.get(Je.key===null?Ae:Je.key)||null,Ie(me,xe,Je,Qt);case F:return Je=xf(Je),Be(xe,me,Ae,Je,Qt)}if(le(Je)||W(Je))return xe=xe.get(Ae)||null,Ke(me,xe,Je,Qt,null);if(typeof Je.then=="function")return Be(xe,me,Ae,kp(Je),Qt);if(Je.$$typeof===R)return Be(xe,me,Ae,$h(me,Je),Qt);Xh(me,Je)}return null}function jt(xe,me,Ae,Je){for(var Qt=null,ai=null,Gt=me,Nn=me=0,Wn=null;Gt!==null&&Nn<Ae.length;Nn++){Gt.index>Nn?(Wn=Gt,Gt=null):Wn=Gt.sibling;var si=Ne(xe,Gt,Ae[Nn],Je);if(si===null){Gt===null&&(Gt=Wn);break}o&&Gt&&si.alternate===null&&u(xe,Gt),me=C(si,me,Nn),ai===null?Qt=si:ai.sibling=si,ai=si,Gt=Wn}if(Nn===Ae.length)return m(xe,Gt),zn&&Sl(xe,Nn),Qt;if(Gt===null){for(;Nn<Ae.length;Nn++)Gt=it(xe,Ae[Nn],Je),Gt!==null&&(me=C(Gt,me,Nn),ai===null?Qt=Gt:ai.sibling=Gt,ai=Gt);return zn&&Sl(xe,Nn),Qt}for(Gt=y(Gt);Nn<Ae.length;Nn++)Wn=Be(Gt,xe,Nn,Ae[Nn],Je),Wn!==null&&(o&&Wn.alternate!==null&&Gt.delete(Wn.key===null?Nn:Wn.key),me=C(Wn,me,Nn),ai===null?Qt=Wn:ai.sibling=Wn,ai=Wn);return o&&Gt.forEach(function(gd){return u(xe,gd)}),zn&&Sl(xe,Nn),Qt}function ln(xe,me,Ae,Je){if(Ae==null)throw Error(i(151));for(var Qt=null,ai=null,Gt=me,Nn=me=0,Wn=null,si=Ae.next();Gt!==null&&!si.done;Nn++,si=Ae.next()){Gt.index>Nn?(Wn=Gt,Gt=null):Wn=Gt.sibling;var gd=Ne(xe,Gt,si.value,Je);if(gd===null){Gt===null&&(Gt=Wn);break}o&&Gt&&gd.alternate===null&&u(xe,Gt),me=C(gd,me,Nn),ai===null?Qt=gd:ai.sibling=gd,ai=gd,Gt=Wn}if(si.done)return m(xe,Gt),zn&&Sl(xe,Nn),Qt;if(Gt===null){for(;!si.done;Nn++,si=Ae.next())si=it(xe,si.value,Je),si!==null&&(me=C(si,me,Nn),ai===null?Qt=si:ai.sibling=si,ai=si);return zn&&Sl(xe,Nn),Qt}for(Gt=y(Gt);!si.done;Nn++,si=Ae.next())si=Be(Gt,xe,Nn,si.value,Je),si!==null&&(o&&si.alternate!==null&&Gt.delete(si.key===null?Nn:si.key),me=C(si,me,Nn),ai===null?Qt=si:ai.sibling=si,ai=si);return o&&Gt.forEach(function(cY){return u(xe,cY)}),zn&&Sl(xe,Nn),Qt}function Ai(xe,me,Ae,Je){if(typeof Ae=="object"&&Ae!==null&&Ae.type===T&&Ae.key===null&&(Ae=Ae.props.children),typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case _:e:{for(var Qt=Ae.key;me!==null;){if(me.key===Qt){if(Qt=Ae.type,Qt===T){if(me.tag===7){m(xe,me.sibling),Je=M(me,Ae.props.children),Je.return=xe,xe=Je;break e}}else if(me.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===F&&xf(Qt)===me.type){m(xe,me.sibling),Je=M(me,Ae.props),go(Je,Ae),Je.return=xe,xe=Je;break e}m(xe,me);break}else u(xe,me);me=me.sibling}Ae.type===T?(Je=ec(Ae.props.children,xe.mode,Je,Ae.key),Je.return=xe,xe=Je):(Je=xl(Ae.type,Ae.key,Ae.props,null,xe.mode,Je),go(Je,Ae),Je.return=xe,xe=Je)}return G(xe);case x:e:{for(Qt=Ae.key;me!==null;){if(me.key===Qt)if(me.tag===4&&me.stateNode.containerInfo===Ae.containerInfo&&me.stateNode.implementation===Ae.implementation){m(xe,me.sibling),Je=M(me,Ae.children||[]),Je.return=xe,xe=Je;break e}else{m(xe,me);break}else u(xe,me);me=me.sibling}Je=Ng(Ae,xe.mode,Je),Je.return=xe,xe=Je}return G(xe);case F:return Ae=xf(Ae),Ai(xe,me,Ae,Je)}if(le(Ae))return jt(xe,me,Ae,Je);if(W(Ae)){if(Qt=W(Ae),typeof Qt!="function")throw Error(i(150));return Ae=Qt.call(Ae),ln(xe,me,Ae,Je)}if(typeof Ae.then=="function")return Ai(xe,me,kp(Ae),Je);if(Ae.$$typeof===R)return Ai(xe,me,$h(xe,Ae),Je);Xh(xe,Ae)}return typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint"?(Ae=""+Ae,me!==null&&me.tag===6?(m(xe,me.sibling),Je=M(me,Ae),Je.return=xe,xe=Je):(m(xe,me),Je=Pg(Ae,xe.mode,Je),Je.return=xe,xe=Je),G(xe)):m(xe,me)}return function(xe,me,Ae,Je){try{Tf=0;var Qt=Ai(xe,me,Ae,Je);return Ef=null,Qt}catch(Gt){if(Gt===bf||Gt===Mn)throw Gt;var ai=Bi(29,Gt,null,xe.mode);return ai.lanes=Je,ai.return=xe,ai}finally{}}}var pu=jg(!0),Hg=jg(!1),Ba=!1;function Up(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function R0(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function mu(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function oc(o,u,m){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(Wt&2)!==0){var M=y.pending;return M===null?u.next=u:(u.next=M.next,M.next=u),y.pending=u,u=po(o),Qu(o,null,m),u}return Vr(o,y,u,m),po(o)}function lc(o,u,m){if(u=u.updateQueue,u!==null&&(u=u.shared,(m&4194048)!==0)){var y=u.lanes;y&=o.pendingLanes,m|=y,u.lanes=m,rs(o,m)}}function Zt(o,u){var m=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,m===y)){var M=null,C=null;if(m=m.firstBaseUpdate,m!==null){do{var G={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};C===null?M=C=G:C=C.next=G,m=m.next}while(m!==null);C===null?M=C=u:C=C.next=u}else M=C=u;m={baseState:y.baseState,firstBaseUpdate:M,lastBaseUpdate:C,shared:y.shared,callbacks:y.callbacks},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=u:o.next=u,m.lastBaseUpdate=u}var P0=!1;function Fp(){if(P0){var o=mo;if(o!==null)throw o}}function Yh(o,u,m,y){P0=!1;var M=o.updateQueue;Ba=!1;var C=M.firstBaseUpdate,G=M.lastBaseUpdate,Q=M.shared.pending;if(Q!==null){M.shared.pending=null;var ce=Q,Ie=ce.next;ce.next=null,G===null?C=Ie:G.next=Ie,G=ce;var Ke=o.alternate;Ke!==null&&(Ke=Ke.updateQueue,Q=Ke.lastBaseUpdate,Q!==G&&(Q===null?Ke.firstBaseUpdate=Ie:Q.next=Ie,Ke.lastBaseUpdate=ce))}if(C!==null){var it=M.baseState;G=0,Ke=Ie=ce=null,Q=C;do{var Ne=Q.lane&-536870913,Be=Ne!==Q.lane;if(Be?(En&Ne)===Ne:(y&Ne)===Ne){Ne!==0&&Ne===du&&(P0=!0),Ke!==null&&(Ke=Ke.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});e:{var jt=o,ln=Q;Ne=u;var Ai=m;switch(ln.tag){case 1:if(jt=ln.payload,typeof jt=="function"){it=jt.call(Ai,it,Ne);break e}it=jt;break e;case 3:jt.flags=jt.flags&-65537|128;case 0:if(jt=ln.payload,Ne=typeof jt=="function"?jt.call(Ai,it,Ne):jt,Ne==null)break e;it=g({},it,Ne);break e;case 2:Ba=!0}}Ne=Q.callback,Ne!==null&&(o.flags|=64,Be&&(o.flags|=8192),Be=M.callbacks,Be===null?M.callbacks=[Ne]:Be.push(Ne))}else Be={lane:Ne,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},Ke===null?(Ie=Ke=Be,ce=it):Ke=Ke.next=Be,G|=Ne;if(Q=Q.next,Q===null){if(Q=M.shared.pending,Q===null)break;Be=Q,Q=Be.next,Be.next=null,M.lastBaseUpdate=Be,M.shared.pending=null}}while(!0);Ke===null&&(ce=it),M.baseState=ce,M.firstBaseUpdate=Ie,M.lastBaseUpdate=Ke,C===null&&(M.shared.lanes=0),kl|=G,o.lanes=G,o.memoizedState=it}}function Kh(o,u){if(typeof o!="function")throw Error(i(191,o));o.call(u)}function mS(o,u){var m=o.callbacks;if(m!==null)for(o.callbacks=null,o=0;o<m.length;o++)Kh(m[o],u)}var Zh=J(null),Gg=J(0);function gS(o,u){o=js,Ee(Gg,o),Ee(Zh,u),js=o|u.baseLanes}function N0(){Ee(Gg,js),Ee(Zh,Zh.current)}function zp(){js=Gg.current,pe(Zh),pe(Gg)}var fs=J(null),Va=null;function gu(o){var u=o.alternate;Ee(Bn,Bn.current&1),Ee(fs,o),Va===null&&(u===null||Zh.current!==null||u.memoizedState!==null)&&(Va=o)}function O0(o){Ee(Bn,Bn.current),Ee(fs,o),Va===null&&(Va=o)}function vS(o){o.tag===22?(Ee(Bn,Bn.current),Ee(fs,o),Va===null&&(Va=o)):hs()}function hs(){Ee(Bn,Bn.current),Ee(fs,fs.current)}function ur(o){pe(fs),Va===o&&(Va=null),pe(Bn)}var Bn=J(0);function zs(o){for(var u=o;u!==null;){if(u.tag===13){var m=u.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||RC(m)||PC(m)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Li=0,bn=null,pi=null,kn=null,vo=!1,Qh=!1,Af=!1,Wg=0,Bp=0,Jh=null,D0=0;function ji(){throw Error(i(321))}function L0(o,u){if(u===null)return!1;for(var m=0;m<u.length&&m<o.length;m++)if(!Fa(o[m],u[m]))return!1;return!0}function qg(o,u,m,y,M,C){return Li=C,bn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,ee.H=o===null||o.memoizedState===null?YS:t_,Af=!1,C=m(y,M),Af=!1,Qh&&(C=Mf(u,m,y,M)),yS(o),C}function yS(o){ee.H=ed;var u=pi!==null&&pi.next!==null;if(Li=0,kn=pi=bn=null,vo=!1,Bp=0,Jh=null,u)throw Error(i(300));o===null||yr||(o=o.dependencies,o!==null&&Op(o)&&(yr=!0))}function Mf(o,u,m,y){bn=o;var M=0;do{if(Qh&&(Jh=null),Bp=0,Qh=!1,25<=M)throw Error(i(301));if(M+=1,kn=pi=null,o.updateQueue!=null){var C=o.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}ee.H=yo,C=u(m,y)}while(Qh);return C}function Cf(){var o=ee.H,u=o.useState()[0];return u=typeof u.then=="function"?Vp(u):u,o=o.useState()[0],(pi!==null?pi.memoizedState:null)!==o&&(bn.flags|=1024),u}function k0(){var o=Wg!==0;return Wg=0,o}function U0(o,u,m){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~m}function F0(o){if(vo){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}vo=!1}Li=0,kn=pi=bn=null,Qh=!1,Bp=Wg=0,Jh=null}function Ir(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?bn.memoizedState=kn=o:kn=kn.next=o,kn}function cr(){if(pi===null){var o=bn.alternate;o=o!==null?o.memoizedState:null}else o=pi.next;var u=kn===null?bn.memoizedState:kn.next;if(u!==null)kn=u,pi=o;else{if(o===null)throw bn.alternate===null?Error(i(467)):Error(i(310));pi=o,o={memoizedState:pi.memoizedState,baseState:pi.baseState,baseQueue:pi.baseQueue,queue:pi.queue,next:null},kn===null?bn.memoizedState=kn=o:kn=kn.next=o}return kn}function $g(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vp(o){var u=Bp;return Bp+=1,Jh===null&&(Jh=[]),o=Vg(Jh,o,u),u=bn,(kn===null?u.memoizedState:kn.next)===null&&(u=u.alternate,ee.H=u===null||u.memoizedState===null?YS:t_),o}function uc(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Vp(o);if(o.$$typeof===R)return cn(o)}throw Error(i(438,String(o)))}function z0(o){var u=null,m=bn.updateQueue;if(m!==null&&(u=m.memoCache),u==null){var y=bn.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(M){return M.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),m===null&&(m=$g(),bn.updateQueue=m),m.memoCache=u,m=u.data[u.index],m===void 0)for(m=u.data[u.index]=Array(o),y=0;y<o;y++)m[y]=L;return u.index++,m}function vu(o,u){return typeof u=="function"?u(o):u}function Xg(o){var u=cr();return B0(u,pi,o)}function B0(o,u,m){var y=o.queue;if(y===null)throw Error(i(311));y.lastRenderedReducer=m;var M=o.baseQueue,C=y.pending;if(C!==null){if(M!==null){var G=M.next;M.next=C.next,C.next=G}u.baseQueue=M=C,y.pending=null}if(C=o.baseState,M===null)o.memoizedState=C;else{u=M.next;var Q=G=null,ce=null,Ie=u,Ke=!1;do{var it=Ie.lane&-536870913;if(it!==Ie.lane?(En&it)===it:(Li&it)===it){var Ne=Ie.revertLane;if(Ne===0)ce!==null&&(ce=ce.next={lane:0,revertLane:0,gesture:null,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null}),it===du&&(Ke=!0);else if((Li&Ne)===Ne){Ie=Ie.next,Ne===du&&(Ke=!0);continue}else it={lane:0,revertLane:Ie.revertLane,gesture:null,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null},ce===null?(Q=ce=it,G=C):ce=ce.next=it,bn.lanes|=Ne,kl|=Ne;it=Ie.action,Af&&m(C,it),C=Ie.hasEagerState?Ie.eagerState:m(C,it)}else Ne={lane:it,revertLane:Ie.revertLane,gesture:Ie.gesture,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null},ce===null?(Q=ce=Ne,G=C):ce=ce.next=Ne,bn.lanes|=it,kl|=it;Ie=Ie.next}while(Ie!==null&&Ie!==u);if(ce===null?G=C:ce.next=Q,!Fa(C,o.memoizedState)&&(yr=!0,Ke&&(m=mo,m!==null)))throw m;o.memoizedState=C,o.baseState=G,o.baseQueue=ce,y.lastRenderedState=C}return M===null&&(y.lanes=0),[o.memoizedState,y.dispatch]}function V0(o){var u=cr(),m=u.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=o;var y=m.dispatch,M=m.pending,C=u.memoizedState;if(M!==null){m.pending=null;var G=M=M.next;do C=o(C,G.action),G=G.next;while(G!==M);Fa(C,u.memoizedState)||(yr=!0),u.memoizedState=C,u.baseQueue===null&&(u.baseState=C),m.lastRenderedState=C}return[C,y]}function _S(o,u,m){var y=bn,M=cr(),C=zn;if(C){if(m===void 0)throw Error(i(407));m=m()}else m=u();var G=!Fa((pi||M).memoizedState,m);if(G&&(M.memoizedState=m,yr=!0),M=M.queue,Y0(SS.bind(null,y,M,o),[o]),M.getSnapshot!==u||G||kn!==null&&kn.memoizedState.tag&1){if(y.flags|=2048,cc(9,{destroy:void 0},xS.bind(null,y,M,m,u),null),dn===null)throw Error(i(349));C||(Li&127)!==0||bS(y,u,m)}return m}function bS(o,u,m){o.flags|=16384,o={getSnapshot:u,value:m},u=bn.updateQueue,u===null?(u=$g(),bn.updateQueue=u,u.stores=[o]):(m=u.stores,m===null?u.stores=[o]:m.push(o))}function xS(o,u,m,y){u.value=m,u.getSnapshot=y,wS(u)&&ES(o)}function SS(o,u,m){return m(function(){wS(u)&&ES(o)})}function wS(o){var u=o.getSnapshot;o=o.value;try{var m=u();return!Fa(o,m)}catch{return!0}}function ES(o){var u=za(o,2);u!==null&&In(u,o,2)}function j0(o){var u=Ir();if(typeof o=="function"){var m=o;if(o=m(),Af){xt(!0);try{m()}finally{xt(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vu,lastRenderedState:o},u}function H0(o,u,m,y){return o.baseState=m,B0(o,pi,typeof y=="function"?y:vu)}function pC(o,u,m,y,M){if(Qg(o))throw Error(i(485));if(o=u.action,o!==null){var C={payload:M,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(G){C.listeners.push(G)}};ee.T!==null?m(!0):C.isTransition=!1,y(C),m=u.pending,m===null?(C.next=u.pending=C,TS(u,C)):(C.next=m.next,u.pending=m.next=C)}}function TS(o,u){var m=u.action,y=u.payload,M=o.state;if(u.isTransition){var C=ee.T,G={};ee.T=G;try{var Q=m(M,y),ce=ee.S;ce!==null&&ce(G,Q),AS(o,u,Q)}catch(Ie){G0(o,u,Ie)}finally{C!==null&&G.types!==null&&(C.types=G.types),ee.T=C}}else try{C=m(M,y),AS(o,u,C)}catch(Ie){G0(o,u,Ie)}}function AS(o,u,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(y){MS(o,u,y)},function(y){return G0(o,u,y)}):MS(o,u,m)}function MS(o,u,m){u.status="fulfilled",u.value=m,CS(u),o.state=m,u=o.pending,u!==null&&(m=u.next,m===u?o.pending=null:(m=m.next,u.next=m,TS(o,m)))}function G0(o,u,m){var y=o.pending;if(o.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=m,CS(u),u=u.next;while(u!==y)}o.action=null}function CS(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function W0(o,u){return u}function q0(o,u){if(zn){var m=dn.formState;if(m!==null){e:{var y=bn;if(zn){if(wi){t:{for(var M=wi,C=Us;M.nodeType!==8;){if(!C){M=null;break t}if(M=zl(M.nextSibling),M===null){M=null;break t}}C=M.data,M=C==="F!"||C==="F"?M:null}if(M){wi=zl(M.nextSibling),y=M.data==="F!";break e}}El(y)}y=!1}y&&(u=m[0])}}return m=Ir(),m.memoizedState=m.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:W0,lastRenderedState:u},m.queue=y,m=qS.bind(null,bn,y),y.dispatch=m,y=j0(!1),C=e_.bind(null,bn,!1,y.queue),y=Ir(),M={state:u,dispatch:null,action:o,pending:null},y.queue=M,m=pC.bind(null,bn,M,C,m),M.dispatch=m,y.memoizedState=o,[u,m,!1]}function IS(o){var u=cr();return $0(u,pi,o)}function $0(o,u,m){if(u=B0(o,u,W0)[0],o=Xg(vu)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=Vp(u)}catch(G){throw G===bf?Mn:G}else y=u;u=cr();var M=u.queue,C=M.dispatch;return m!==u.memoizedState&&(bn.flags|=2048,cc(9,{destroy:void 0},RS.bind(null,M,m),null)),[y,C,o]}function RS(o,u){o.action=u}function X0(o){var u=cr(),m=pi;if(m!==null)return $0(u,m,o);cr(),u=u.memoizedState,m=cr();var y=m.queue.dispatch;return m.memoizedState=o,[u,y,!1]}function cc(o,u,m,y){return o={tag:o,create:m,deps:y,inst:u,next:null},u=bn.updateQueue,u===null&&(u=$g(),bn.updateQueue=u),m=u.lastEffect,m===null?u.lastEffect=o.next=o:(y=m.next,m.next=o,o.next=y,u.lastEffect=o),o}function Yg(){return cr().memoizedState}function Kg(o,u,m,y){var M=Ir();bn.flags|=o,M.memoizedState=cc(1|u,{destroy:void 0},m,y===void 0?null:y)}function Zg(o,u,m,y){var M=cr();y=y===void 0?null:y;var C=M.memoizedState.inst;pi!==null&&y!==null&&L0(y,pi.memoizedState.deps)?M.memoizedState=cc(u,C,m,y):(bn.flags|=o,M.memoizedState=cc(1|u,C,m,y))}function PS(o,u){Kg(8390656,8,o,u)}function Y0(o,u){Zg(2048,8,o,u)}function NS(o){bn.flags|=4;var u=bn.updateQueue;if(u===null)u=$g(),bn.updateQueue=u,u.events=[o];else{var m=u.events;m===null?u.events=[o]:m.push(o)}}function OS(o){var u=cr().memoizedState;return NS({ref:u,nextImpl:o}),function(){if((Wt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}function DS(o,u){return Zg(4,2,o,u)}function LS(o,u){return Zg(4,4,o,u)}function kS(o,u){if(typeof u=="function"){o=o();var m=u(o);return function(){typeof m=="function"?m():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function US(o,u,m){m=m!=null?m.concat([o]):null,Zg(4,4,kS.bind(null,u,o),m)}function K0(){}function FS(o,u){var m=cr();u=u===void 0?null:u;var y=m.memoizedState;return u!==null&&L0(u,y[1])?y[0]:(m.memoizedState=[o,u],o)}function zS(o,u){var m=cr();u=u===void 0?null:u;var y=m.memoizedState;if(u!==null&&L0(u,y[1]))return y[0];if(y=o(),Af){xt(!0);try{o()}finally{xt(!1)}}return m.memoizedState=[y,u],y}function Z0(o,u,m){return m===void 0||(Li&1073741824)!==0&&(En&261930)===0?o.memoizedState=u:(o.memoizedState=m,o=Dn(),bn.lanes|=o,kl|=o,m)}function BS(o,u,m,y){return Fa(m,u)?m:Zh.current!==null?(o=Z0(o,m,y),Fa(o,u)||(yr=!0),o):(Li&42)===0||(Li&1073741824)!==0&&(En&261930)===0?(yr=!0,o.memoizedState=m):(o=Dn(),bn.lanes|=o,kl|=o,u)}function VS(o,u,m,y,M){var C=ie.p;ie.p=C!==0&&8>C?C:8;var G=ee.T,Q={};ee.T=Q,e_(o,!1,u,m);try{var ce=M(),Ie=ee.S;if(Ie!==null&&Ie(Q,ce),ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var Ke=C0(ce,y);jp(o,u,Ke,Gs(o))}else jp(o,u,y,Gs(o))}catch(it){jp(o,u,{then:function(){},status:"rejected",reason:it},Gs())}finally{ie.p=C,G!==null&&Q.types!==null&&(G.types=Q.types),ee.T=G}}function mC(){}function Q0(o,u,m,y){if(o.tag!==5)throw Error(i(476));var M=jS(o).queue;VS(o,M,u,he,m===null?mC:function(){return HS(o),m(y)})}function jS(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vu,lastRenderedState:he},next:null};var m={};return u.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vu,lastRenderedState:m},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function HS(o){var u=jS(o);u.next===null&&(u=o.alternate.memoizedState),jp(o,u.next.queue,{},Gs())}function J0(){return cn(x_)}function GS(){return cr().memoizedState}function WS(){return cr().memoizedState}function gC(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var m=Gs();o=mu(m);var y=oc(u,o,m);y!==null&&(In(y,u,m),lc(y,u,m)),u={cache:T0()},o.payload=u;return}u=u.return}}function vC(o,u,m){var y=Gs();m={lane:y,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Qg(o)?$S(u,m):(m=Ig(o,u,m,y),m!==null&&(In(m,o,y),XS(m,u,y)))}function qS(o,u,m){var y=Gs();jp(o,u,m,y)}function jp(o,u,m,y){var M={lane:y,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(Qg(o))$S(u,M);else{var C=o.alternate;if(o.lanes===0&&(C===null||C.lanes===0)&&(C=u.lastRenderedReducer,C!==null))try{var G=u.lastRenderedState,Q=C(G,m);if(M.hasEagerState=!0,M.eagerState=Q,Fa(Q,G))return Vr(o,u,M,0),dn===null&&Pp(),!1}catch{}finally{}if(m=Ig(o,u,M,y),m!==null)return In(m,o,y),XS(m,u,y),!0}return!1}function e_(o,u,m,y){if(y={lane:2,revertLane:Ue(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},Qg(o)){if(u)throw Error(i(479))}else u=Ig(o,m,y,2),u!==null&&In(u,o,2)}function Qg(o){var u=o.alternate;return o===bn||u!==null&&u===bn}function $S(o,u){Qh=vo=!0;var m=o.pending;m===null?u.next=u:(u.next=m.next,m.next=u),o.pending=u}function XS(o,u,m){if((m&4194048)!==0){var y=u.lanes;y&=o.pendingLanes,m|=y,u.lanes=m,rs(o,m)}}var ed={readContext:cn,use:uc,useCallback:ji,useContext:ji,useEffect:ji,useImperativeHandle:ji,useLayoutEffect:ji,useInsertionEffect:ji,useMemo:ji,useReducer:ji,useRef:ji,useState:ji,useDebugValue:ji,useDeferredValue:ji,useTransition:ji,useSyncExternalStore:ji,useId:ji,useHostTransitionStatus:ji,useFormState:ji,useActionState:ji,useOptimistic:ji,useMemoCache:ji,useCacheRefresh:ji};ed.useEffectEvent=ji;var YS={readContext:cn,use:uc,useCallback:function(o,u){return Ir().memoizedState=[o,u===void 0?null:u],o},useContext:cn,useEffect:PS,useImperativeHandle:function(o,u,m){m=m!=null?m.concat([o]):null,Kg(4194308,4,kS.bind(null,u,o),m)},useLayoutEffect:function(o,u){return Kg(4194308,4,o,u)},useInsertionEffect:function(o,u){Kg(4,2,o,u)},useMemo:function(o,u){var m=Ir();u=u===void 0?null:u;var y=o();if(Af){xt(!0);try{o()}finally{xt(!1)}}return m.memoizedState=[y,u],y},useReducer:function(o,u,m){var y=Ir();if(m!==void 0){var M=m(u);if(Af){xt(!0);try{m(u)}finally{xt(!1)}}}else M=u;return y.memoizedState=y.baseState=M,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:M},y.queue=o,o=o.dispatch=vC.bind(null,bn,o),[y.memoizedState,o]},useRef:function(o){var u=Ir();return o={current:o},u.memoizedState=o},useState:function(o){o=j0(o);var u=o.queue,m=qS.bind(null,bn,u);return u.dispatch=m,[o.memoizedState,m]},useDebugValue:K0,useDeferredValue:function(o,u){var m=Ir();return Z0(m,o,u)},useTransition:function(){var o=j0(!1);return o=VS.bind(null,bn,o.queue,!0,!1),Ir().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,m){var y=bn,M=Ir();if(zn){if(m===void 0)throw Error(i(407));m=m()}else{if(m=u(),dn===null)throw Error(i(349));(En&127)!==0||bS(y,u,m)}M.memoizedState=m;var C={value:m,getSnapshot:u};return M.queue=C,PS(SS.bind(null,y,C,o),[o]),y.flags|=2048,cc(9,{destroy:void 0},xS.bind(null,y,C,m,u),null),m},useId:function(){var o=Ir(),u=dn.identifierPrefix;if(zn){var m=qo,y=Vi;m=(y&~(1<<32-Y(y)-1)).toString(32)+m,u="_"+u+"R_"+m,m=Wg++,0<m&&(u+="H"+m.toString(32)),u+="_"}else m=D0++,u="_"+u+"r_"+m.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:J0,useFormState:q0,useActionState:q0,useOptimistic:function(o){var u=Ir();u.memoizedState=u.baseState=o;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=m,u=e_.bind(null,bn,!0,m),m.dispatch=u,[o,u]},useMemoCache:z0,useCacheRefresh:function(){return Ir().memoizedState=gC.bind(null,bn)},useEffectEvent:function(o){var u=Ir(),m={impl:o};return u.memoizedState=m,function(){if((Wt&2)!==0)throw Error(i(440));return m.impl.apply(void 0,arguments)}}},t_={readContext:cn,use:uc,useCallback:FS,useContext:cn,useEffect:Y0,useImperativeHandle:US,useInsertionEffect:DS,useLayoutEffect:LS,useMemo:zS,useReducer:Xg,useRef:Yg,useState:function(){return Xg(vu)},useDebugValue:K0,useDeferredValue:function(o,u){var m=cr();return BS(m,pi.memoizedState,o,u)},useTransition:function(){var o=Xg(vu)[0],u=cr().memoizedState;return[typeof o=="boolean"?o:Vp(o),u]},useSyncExternalStore:_S,useId:GS,useHostTransitionStatus:J0,useFormState:IS,useActionState:IS,useOptimistic:function(o,u){var m=cr();return H0(m,pi,o,u)},useMemoCache:z0,useCacheRefresh:WS};t_.useEffectEvent=OS;var yo={readContext:cn,use:uc,useCallback:FS,useContext:cn,useEffect:Y0,useImperativeHandle:US,useInsertionEffect:DS,useLayoutEffect:LS,useMemo:zS,useReducer:V0,useRef:Yg,useState:function(){return V0(vu)},useDebugValue:K0,useDeferredValue:function(o,u){var m=cr();return pi===null?Z0(m,o,u):BS(m,pi.memoizedState,o,u)},useTransition:function(){var o=V0(vu)[0],u=cr().memoizedState;return[typeof o=="boolean"?o:Vp(o),u]},useSyncExternalStore:_S,useId:GS,useHostTransitionStatus:J0,useFormState:X0,useActionState:X0,useOptimistic:function(o,u){var m=cr();return pi!==null?H0(m,pi,o,u):(m.baseState=o,[o,m.queue.dispatch])},useMemoCache:z0,useCacheRefresh:WS};yo.useEffectEvent=OS;function Jg(o,u,m,y){u=o.memoizedState,m=m(y,u),m=m==null?u:g({},u,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var Hp={enqueueSetState:function(o,u,m){o=o._reactInternals;var y=Gs(),M=mu(y);M.payload=u,m!=null&&(M.callback=m),u=oc(o,M,y),u!==null&&(In(u,o,y),lc(u,o,y))},enqueueReplaceState:function(o,u,m){o=o._reactInternals;var y=Gs(),M=mu(y);M.tag=1,M.payload=u,m!=null&&(M.callback=m),u=oc(o,M,y),u!==null&&(In(u,o,y),lc(u,o,y))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var m=Gs(),y=mu(m);y.tag=2,u!=null&&(y.callback=u),u=oc(o,y,m),u!==null&&(In(u,o,m),lc(u,o,m))}};function n_(o,u,m,y,M,C,G){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,C,G):u.prototype&&u.prototype.isPureReactComponent?!kh(m,y)||!kh(M,C):!0}function i_(o,u,m,y){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(m,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(m,y),u.state!==o&&Hp.enqueueReplaceState(u,u.state,null)}function fc(o,u){var m=u;if("ref"in u){m={};for(var y in u)y!=="ref"&&(m[y]=u[y])}if(o=o.defaultProps){m===u&&(m=g({},m));for(var M in o)m[M]===void 0&&(m[M]=o[M])}return m}function KS(o){Rp(o)}function r_(o){console.error(o)}function a_(o){Rp(o)}function ev(o,u){try{var m=o.onUncaughtError;m(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function ZS(o,u,m){try{var y=o.onCaughtError;y(m.value,{componentStack:m.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function s_(o,u,m){return m=mu(m),m.tag=3,m.payload={element:null},m.callback=function(){ev(o,u)},m}function o_(o){return o=mu(o),o.tag=3,o}function QS(o,u,m,y){var M=m.type.getDerivedStateFromError;if(typeof M=="function"){var C=y.value;o.payload=function(){return M(C)},o.callback=function(){ZS(u,m,y)}}var G=m.stateNode;G!==null&&typeof G.componentDidCatch=="function"&&(o.callback=function(){ZS(u,m,y),typeof M!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var Q=y.stack;this.componentDidCatch(y.value,{componentStack:Q!==null?Q:""})})}function Rr(o,u,m,y,M){if(m.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=m.alternate,u!==null&&Cl(u,m,M,!0),m=fs.current,m!==null){switch(m.tag){case 31:case 13:return Va===null?od():m.alternate===null&&Hi===0&&(Hi=3),m.flags&=-257,m.flags|=65536,m.lanes=M,y===Bg?m.flags|=16384:(u=m.updateQueue,u===null?m.updateQueue=new Set([y]):u.add(y),tm(o,y,M)),!1;case 22:return m.flags|=65536,y===Bg?m.flags|=16384:(u=m.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},m.updateQueue=u):(m=u.retryQueue,m===null?u.retryQueue=new Set([y]):m.add(y)),tm(o,y,M)),!1}throw Error(i(435,m.tag))}return tm(o,y,M),od(),!1}if(zn)return u=fs.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=M,y!==Gh&&(o=Error(i(422),{cause:y}),Tl(ks(o,m)))):(y!==Gh&&(u=Error(i(423),{cause:y}),Tl(ks(u,m))),o=o.current.alternate,o.flags|=65536,M&=-M,o.lanes|=M,y=ks(y,m),M=s_(o.stateNode,y,M),Zt(o,M),Hi!==4&&(Hi=2)),!1;var C=Error(i(520),{cause:y});if(C=ks(C,m),kf===null?kf=[C]:kf.push(C),Hi!==4&&(Hi=2),u===null)return!0;y=ks(y,m),m=u;do{switch(m.tag){case 3:return m.flags|=65536,o=M&-M,m.lanes|=o,o=s_(m.stateNode,y,o),Zt(m,o),!1;case 1:if(u=m.type,C=m.stateNode,(m.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(dr===null||!dr.has(C))))return m.flags|=65536,M&=-M,m.lanes|=M,M=o_(M),QS(M,o,m,y),Zt(m,M),!1}m=m.return}while(m!==null);return!1}var tv=Error(i(461)),yr=!1;function jr(o,u,m,y){u.child=o===null?Hg(u,null,m,y):pu(u,o.child,m,y)}function l_(o,u,m,y,M){m=m.render;var C=u.ref;if("ref"in y){var G={};for(var Q in y)Q!=="ref"&&(G[Q]=y[Q])}else G=y;return ac(u),y=qg(o,u,m,G,C,M),Q=k0(),o!==null&&!yr?(U0(o,u,M),fr(o,u,M)):(zn&&Q&&wl(u),u.flags|=1,jr(o,u,y,M),u.child)}function If(o,u,m,y,M){if(o===null){var C=m.type;return typeof C=="function"&&!Rg(C)&&C.defaultProps===void 0&&m.compare===null?(u.tag=15,u.type=C,nv(o,u,C,y,M)):(o=xl(m.type,null,y,u,u.mode,M),o.ref=u.ref,o.return=u,u.child=o)}if(C=o.child,!lv(o,M)){var G=C.memoizedProps;if(m=m.compare,m=m!==null?m:kh,m(G,y)&&o.ref===u.ref)return fr(o,u,M)}return u.flags|=1,o=ls(C,y),o.ref=u.ref,o.return=u,u.child=o}function nv(o,u,m,y,M){if(o!==null){var C=o.memoizedProps;if(kh(C,y)&&o.ref===u.ref)if(yr=!1,u.pendingProps=y=C,lv(o,M))(o.flags&131072)!==0&&(yr=!0);else return u.lanes=o.lanes,fr(o,u,M)}return td(o,u,m,y,M)}function Rf(o,u,m,y){var M=y.children,C=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((u.flags&128)!==0){if(C=C!==null?C.baseLanes|m:m,o!==null){for(y=u.child=o.child,M=0;y!==null;)M=M|y.lanes|y.childLanes,y=y.sibling;y=M&~C}else y=0,u.child=null;return ds(o,u,C,m,y)}if((m&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&Dp(u,C!==null?C.cachePool:null),C!==null?gS(u,C):N0(),vS(u);else return y=u.lanes=536870912,ds(o,u,C!==null?C.baseLanes|m:m,m,y)}else C!==null?(Dp(u,C.cachePool),gS(u,C),hs(),u.memoizedState=null):(o!==null&&Dp(u,null),N0(),hs());return jr(o,u,M,m),u.child}function Rl(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function ds(o,u,m,y,M){var C=zg();return C=C===null?null:{parent:vr._currentValue,pool:C},u.memoizedState={baseLanes:m,cachePool:C},o!==null&&Dp(u,null),N0(),vS(u),o!==null&&Cl(o,u,y,!0),u.childLanes=M,null}function iv(o,u){return u=ov({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function JS(o,u,m){return pu(u,o.child,null,m),o=iv(u,u.pendingProps),o.flags|=2,ur(u),u.memoizedState=null,o}function rv(o,u,m){var y=u.pendingProps,M=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(zn){if(y.mode==="hidden")return o=iv(u,y),u.lanes=536870912,Rl(null,o);if(O0(u),(o=wi)?(o=Tk(o,Us),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:cu!==null?{id:Vi,overflow:qo}:null,retryLane:536870912,hydrationErrors:null},m=Vh(o),m.return=u,u.child=m,Ji=u,wi=null)):o=null,o===null)throw El(u);return u.lanes=536870912,null}return iv(u,y)}var C=o.memoizedState;if(C!==null){var G=C.dehydrated;if(O0(u),M)if(u.flags&256)u.flags&=-257,u=JS(o,u,m);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(i(558));else if(yr||Cl(o,u,m,!1),M=(m&o.childLanes)!==0,yr||M){if(y=dn,y!==null&&(G=as(y,m),G!==0&&G!==C.retryLane))throw C.retryLane=G,za(o,G),In(y,o,G),tv;od(),u=JS(o,u,m)}else o=C.treeContext,wi=zl(G.nextSibling),Ji=u,zn=!0,fu=null,Us=!1,o!==null&&Dg(u,o),u=iv(u,y),u.flags|=4096;return u}return o=ls(o.child,{mode:y.mode,children:y.children}),o.ref=u.ref,u.child=o,o.return=u,o}function Pf(o,u){var m=u.ref;if(m===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(i(284));(o===null||o.ref!==m)&&(u.flags|=4194816)}}function td(o,u,m,y,M){return ac(u),m=qg(o,u,m,y,void 0,M),y=k0(),o!==null&&!yr?(U0(o,u,M),fr(o,u,M)):(zn&&y&&wl(u),u.flags|=1,jr(o,u,m,M),u.child)}function Gp(o,u,m,y,M,C){return ac(u),u.updateQueue=null,m=Mf(u,y,m,M),yS(o),y=k0(),o!==null&&!yr?(U0(o,u,C),fr(o,u,C)):(zn&&y&&wl(u),u.flags|=1,jr(o,u,m,C),u.child)}function av(o,u,m,y,M){if(ac(u),u.stateNode===null){var C=Ju,G=m.contextType;typeof G=="object"&&G!==null&&(C=cn(G)),C=new m(y,C),u.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Hp,u.stateNode=C,C._reactInternals=u,C=u.stateNode,C.props=y,C.state=u.memoizedState,C.refs={},Up(u),G=m.contextType,C.context=typeof G=="object"&&G!==null?cn(G):Ju,C.state=u.memoizedState,G=m.getDerivedStateFromProps,typeof G=="function"&&(Jg(u,m,G,y),C.state=u.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(G=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),G!==C.state&&Hp.enqueueReplaceState(C,C.state,null),Yh(u,y,C,M),Fp(),C.state=u.memoizedState),typeof C.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(o===null){C=u.stateNode;var Q=u.memoizedProps,ce=fc(m,Q);C.props=ce;var Ie=C.context,Ke=m.contextType;G=Ju,typeof Ke=="object"&&Ke!==null&&(G=cn(Ke));var it=m.getDerivedStateFromProps;Ke=typeof it=="function"||typeof C.getSnapshotBeforeUpdate=="function",Q=u.pendingProps!==Q,Ke||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(Q||Ie!==G)&&i_(u,C,y,G),Ba=!1;var Ne=u.memoizedState;C.state=Ne,Yh(u,y,C,M),Fp(),Ie=u.memoizedState,Q||Ne!==Ie||Ba?(typeof it=="function"&&(Jg(u,m,it,y),Ie=u.memoizedState),(ce=Ba||n_(u,m,ce,y,Ne,Ie,G))?(Ke||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(u.flags|=4194308)):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=Ie),C.props=y,C.state=Ie,C.context=G,y=ce):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{C=u.stateNode,R0(o,u),G=u.memoizedProps,Ke=fc(m,G),C.props=Ke,it=u.pendingProps,Ne=C.context,Ie=m.contextType,ce=Ju,typeof Ie=="object"&&Ie!==null&&(ce=cn(Ie)),Q=m.getDerivedStateFromProps,(Ie=typeof Q=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(G!==it||Ne!==ce)&&i_(u,C,y,ce),Ba=!1,Ne=u.memoizedState,C.state=Ne,Yh(u,y,C,M),Fp();var Be=u.memoizedState;G!==it||Ne!==Be||Ba||o!==null&&o.dependencies!==null&&Op(o.dependencies)?(typeof Q=="function"&&(Jg(u,m,Q,y),Be=u.memoizedState),(Ke=Ba||n_(u,m,Ke,y,Ne,Be,ce)||o!==null&&o.dependencies!==null&&Op(o.dependencies))?(Ie||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(y,Be,ce),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(y,Be,ce)),typeof C.componentDidUpdate=="function"&&(u.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof C.componentDidUpdate!="function"||G===o.memoizedProps&&Ne===o.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||G===o.memoizedProps&&Ne===o.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=Be),C.props=y,C.state=Be,C.context=ce,y=Ke):(typeof C.componentDidUpdate!="function"||G===o.memoizedProps&&Ne===o.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||G===o.memoizedProps&&Ne===o.memoizedState||(u.flags|=1024),y=!1)}return C=y,Pf(o,u),y=(u.flags&128)!==0,C||y?(C=u.stateNode,m=y&&typeof m.getDerivedStateFromError!="function"?null:C.render(),u.flags|=1,o!==null&&y?(u.child=pu(u,o.child,null,M),u.child=pu(u,null,m,M)):jr(o,u,m,M),u.memoizedState=C.state,o=u.child):o=fr(o,u,M),o}function e1(o,u,m,y){return ic(),u.flags|=256,jr(o,u,m,y),u.child}var u_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ba(o){return{baseLanes:o,cachePool:I0()}}function sv(o,u,m){return o=o!==null?o.childLanes&~m:0,u&&(o|=Ga),o}function t1(o,u,m){var y=u.pendingProps,M=!1,C=(u.flags&128)!==0,G;if((G=C)||(G=o!==null&&o.memoizedState===null?!1:(Bn.current&2)!==0),G&&(M=!0,u.flags&=-129),G=(u.flags&32)!==0,u.flags&=-33,o===null){if(zn){if(M?gu(u):hs(),(o=wi)?(o=Tk(o,Us),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:cu!==null?{id:Vi,overflow:qo}:null,retryLane:536870912,hydrationErrors:null},m=Vh(o),m.return=u,u.child=m,Ji=u,wi=null)):o=null,o===null)throw El(u);return PC(o)?u.lanes=32:u.lanes=536870912,null}var Q=y.children;return y=y.fallback,M?(hs(),M=u.mode,Q=ov({mode:"hidden",children:Q},M),y=ec(y,M,m,null),Q.return=u,y.return=u,Q.sibling=y,u.child=Q,y=u.child,y.memoizedState=ba(m),y.childLanes=sv(o,G,m),u.memoizedState=u_,Rl(null,y)):(gu(u),Wp(u,Q))}var ce=o.memoizedState;if(ce!==null&&(Q=ce.dehydrated,Q!==null)){if(C)u.flags&256?(gu(u),u.flags&=-257,u=c_(o,u,m)):u.memoizedState!==null?(hs(),u.child=o.child,u.flags|=128,u=null):(hs(),Q=y.fallback,M=u.mode,y=ov({mode:"visible",children:y.children},M),Q=ec(Q,M,m,null),Q.flags|=2,y.return=u,Q.return=u,y.sibling=Q,u.child=y,pu(u,o.child,null,m),y=u.child,y.memoizedState=ba(m),y.childLanes=sv(o,G,m),u.memoizedState=u_,u=Rl(null,y));else if(gu(u),PC(Q)){if(G=Q.nextSibling&&Q.nextSibling.dataset,G)var Ie=G.dgst;G=Ie,y=Error(i(419)),y.stack="",y.digest=G,Tl({value:y,source:null,stack:null}),u=c_(o,u,m)}else if(yr||Cl(o,u,m,!1),G=(m&o.childLanes)!==0,yr||G){if(G=dn,G!==null&&(y=as(G,m),y!==0&&y!==ce.retryLane))throw ce.retryLane=y,za(o,y),In(G,o,y),tv;RC(Q)||od(),u=c_(o,u,m)}else RC(Q)?(u.flags|=192,u.child=o.child,u=null):(o=ce.treeContext,wi=zl(Q.nextSibling),Ji=u,zn=!0,fu=null,Us=!1,o!==null&&Dg(u,o),u=Wp(u,y.children),u.flags|=4096);return u}return M?(hs(),Q=y.fallback,M=u.mode,ce=o.child,Ie=ce.sibling,y=ls(ce,{mode:"hidden",children:y.children}),y.subtreeFlags=ce.subtreeFlags&65011712,Ie!==null?Q=ls(Ie,Q):(Q=ec(Q,M,m,null),Q.flags|=2),Q.return=u,y.return=u,y.sibling=Q,u.child=y,Rl(null,y),y=u.child,Q=o.child.memoizedState,Q===null?Q=ba(m):(M=Q.cachePool,M!==null?(ce=vr._currentValue,M=M.parent!==ce?{parent:ce,pool:ce}:M):M=I0(),Q={baseLanes:Q.baseLanes|m,cachePool:M}),y.memoizedState=Q,y.childLanes=sv(o,G,m),u.memoizedState=u_,Rl(o.child,y)):(gu(u),m=o.child,o=m.sibling,m=ls(m,{mode:"visible",children:y.children}),m.return=u,m.sibling=null,o!==null&&(G=u.deletions,G===null?(u.deletions=[o],u.flags|=16):G.push(o)),u.child=m,u.memoizedState=null,m)}function Wp(o,u){return u=ov({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function ov(o,u){return o=Bi(22,o,null,u),o.lanes=0,o}function c_(o,u,m){return pu(u,o.child,null,m),o=Wp(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function n1(o,u,m){o.lanes|=u;var y=o.alternate;y!==null&&(y.lanes|=u),kg(o.return,u,m)}function Nf(o,u,m,y,M,C){var G=o.memoizedState;G===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:m,tailMode:M,treeForkCount:C}:(G.isBackwards=u,G.rendering=null,G.renderingStartTime=0,G.last=y,G.tail=m,G.tailMode=M,G.treeForkCount=C)}function ps(o,u,m){var y=u.pendingProps,M=y.revealOrder,C=y.tail;y=y.children;var G=Bn.current,Q=(G&2)!==0;if(Q?(G=G&1|2,u.flags|=128):G&=1,Ee(Bn,G),jr(o,u,y,m),y=zn?Hh:0,!Q&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&n1(o,m,u);else if(o.tag===19)n1(o,m,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(M){case"forwards":for(m=u.child,M=null;m!==null;)o=m.alternate,o!==null&&zs(o)===null&&(M=m),m=m.sibling;m=M,m===null?(M=u.child,u.child=null):(M=m.sibling,m.sibling=null),Nf(u,!1,M,m,C,y);break;case"backwards":case"unstable_legacy-backwards":for(m=null,M=u.child,u.child=null;M!==null;){if(o=M.alternate,o!==null&&zs(o)===null){u.child=M;break}o=M.sibling,M.sibling=m,m=M,M=o}Nf(u,!0,m,null,C,y);break;case"together":Nf(u,!1,null,null,void 0,y);break;default:u.memoizedState=null}return u.child}function fr(o,u,m){if(o!==null&&(u.dependencies=o.dependencies),kl|=u.lanes,(m&u.childLanes)===0)if(o!==null){if(Cl(o,u,m,!1),(m&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(i(153));if(u.child!==null){for(o=u.child,m=ls(o,o.pendingProps),u.child=m,m.return=u;o.sibling!==null;)o=o.sibling,m=m.sibling=ls(o,o.pendingProps),m.return=u;m.sibling=null}return u.child}function lv(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&Op(o)))}function yC(o,u,m){switch(u.tag){case 3:dt(u,u.stateNode.containerInfo),hu(u,vr,o.memoizedState.cache),ic();break;case 27:case 5:Ye(u);break;case 4:dt(u,u.stateNode.containerInfo);break;case 10:hu(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,O0(u),null;break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(gu(u),u.flags|=128,null):(m&u.child.childLanes)!==0?t1(o,u,m):(gu(u),o=fr(o,u,m),o!==null?o.sibling:null);gu(u);break;case 19:var M=(o.flags&128)!==0;if(y=(m&u.childLanes)!==0,y||(Cl(o,u,m,!1),y=(m&u.childLanes)!==0),M){if(y)return ps(o,u,m);u.flags|=128}if(M=u.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),Ee(Bn,Bn.current),y)break;return null;case 22:return u.lanes=0,Rf(o,u,m,u.pendingProps);case 24:hu(u,vr,o.memoizedState.cache)}return fr(o,u,m)}function uv(o,u,m){if(o!==null)if(o.memoizedProps!==u.pendingProps)yr=!0;else{if(!lv(o,m)&&(u.flags&128)===0)return yr=!1,yC(o,u,m);yr=(o.flags&131072)!==0}else yr=!1,zn&&(u.flags&1048576)!==0&&uS(u,Hh,u.index);switch(u.lanes=0,u.tag){case 16:e:{var y=u.pendingProps;if(o=xf(u.elementType),u.type=o,typeof o=="function")Rg(o)?(y=fc(o,y),u.tag=1,u=av(null,u,o,y,m)):(u.tag=0,u=td(null,u,o,y,m));else{if(o!=null){var M=o.$$typeof;if(M===D){u.tag=11,u=l_(null,u,o,y,m);break e}else if(M===k){u.tag=14,u=If(null,u,o,y,m);break e}}throw u=ue(o)||o,Error(i(306,u,""))}}return u;case 0:return td(o,u,u.type,u.pendingProps,m);case 1:return y=u.type,M=fc(y,u.pendingProps),av(o,u,y,M,m);case 3:e:{if(dt(u,u.stateNode.containerInfo),o===null)throw Error(i(387));y=u.pendingProps;var C=u.memoizedState;M=C.element,R0(o,u),Yh(u,y,null,m);var G=u.memoizedState;if(y=G.cache,hu(u,vr,y),y!==C.cache&&Ug(u,[vr],m,!0),Fp(),y=G.element,C.isDehydrated)if(C={element:y,isDehydrated:!1,cache:G.cache},u.updateQueue.baseState=C,u.memoizedState=C,u.flags&256){u=e1(o,u,y,m);break e}else if(y!==M){M=ks(Error(i(424)),u),Tl(M),u=e1(o,u,y,m);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(wi=zl(o.firstChild),Ji=u,zn=!0,fu=null,Us=!0,m=Hg(u,null,y,m),u.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(ic(),y===M){u=fr(o,u,m);break e}jr(o,u,y,m)}u=u.child}return u;case 26:return Pf(o,u),o===null?(m=Pk(u.type,null,u.pendingProps,null))?u.memoizedState=m:zn||(m=u.type,o=u.pendingProps,y=s1(be.current).createElement(m),y[xi]=u,y[Fi]=o,qa(y,m,o),Z(y),u.stateNode=y):u.memoizedState=Pk(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return Ye(u),o===null&&zn&&(y=u.stateNode=Ck(u.type,u.pendingProps,be.current),Ji=u,Us=!0,M=wi,fd(u.type)?(NC=M,wi=zl(y.firstChild)):wi=M),jr(o,u,u.pendingProps.children,m),Pf(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&zn&&((M=y=wi)&&(y=BX(y,u.type,u.pendingProps,Us),y!==null?(u.stateNode=y,Ji=u,wi=zl(y.firstChild),Us=!1,M=!0):M=!1),M||El(u)),Ye(u),M=u.type,C=u.pendingProps,G=o!==null?o.memoizedProps:null,y=C.children,MC(M,C)?y=null:G!==null&&MC(M,G)&&(u.flags|=32),u.memoizedState!==null&&(M=qg(o,u,Cf,null,null,m),x_._currentValue=M),Pf(o,u),jr(o,u,y,m),u.child;case 6:return o===null&&zn&&((o=m=wi)&&(m=VX(m,u.pendingProps,Us),m!==null?(u.stateNode=m,Ji=u,wi=null,o=!0):o=!1),o||El(u)),null;case 13:return t1(o,u,m);case 4:return dt(u,u.stateNode.containerInfo),y=u.pendingProps,o===null?u.child=pu(u,null,y,m):jr(o,u,y,m),u.child;case 11:return l_(o,u,u.type,u.pendingProps,m);case 7:return jr(o,u,u.pendingProps,m),u.child;case 8:return jr(o,u,u.pendingProps.children,m),u.child;case 12:return jr(o,u,u.pendingProps.children,m),u.child;case 10:return y=u.pendingProps,hu(u,u.type,y.value),jr(o,u,y.children,m),u.child;case 9:return M=u.type._context,y=u.pendingProps.children,ac(u),M=cn(M),y=y(M),u.flags|=1,jr(o,u,y,m),u.child;case 14:return If(o,u,u.type,u.pendingProps,m);case 15:return nv(o,u,u.type,u.pendingProps,m);case 19:return ps(o,u,m);case 31:return rv(o,u,m);case 22:return Rf(o,u,m,u.pendingProps);case 24:return ac(u),y=cn(vr),o===null?(M=zg(),M===null&&(M=dn,C=T0(),M.pooledCache=C,C.refCount++,C!==null&&(M.pooledCacheLanes|=m),M=C),u.memoizedState={parent:y,cache:M},Up(u),hu(u,vr,M)):((o.lanes&m)!==0&&(R0(o,u),Yh(u,null,null,m),Fp()),M=o.memoizedState,C=u.memoizedState,M.parent!==y?(M={parent:y,cache:y},u.memoizedState=M,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=M),hu(u,vr,y)):(y=C.cache,hu(u,vr,y),y!==M.cache&&Ug(u,[vr],m,!0))),jr(o,u,u.pendingProps.children,m),u.child;case 29:throw u.pendingProps}throw Error(i(156,u.tag))}function Pl(o){o.flags|=4}function qp(o,u,m,y,M){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(M&335544128)===M)if(o.stateNode.complete)o.flags|=8192;else if(Wi())o.flags|=8192;else throw Il=Bg,Lp}else o.flags&=-16777217}function f_(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!kk(u))if(Wi())o.flags|=8192;else throw Il=Bg,Lp}function yu(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?un():536870912,o.lanes|=u,Pi|=u)}function Nl(o,u){if(!zn)switch(o.tailMode){case"hidden":u=o.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var y=null;m!==null;)m.alternate!==null&&(y=m),m=m.sibling;y===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function mi(o){var u=o.alternate!==null&&o.alternate.child===o.child,m=0,y=0;if(u)for(var M=o.child;M!==null;)m|=M.lanes|M.childLanes,y|=M.subtreeFlags&65011712,y|=M.flags&65011712,M.return=o,M=M.sibling;else for(M=o.child;M!==null;)m|=M.lanes|M.childLanes,y|=M.subtreeFlags,y|=M.flags,M.return=o,M=M.sibling;return o.subtreeFlags|=y,o.childLanes=m,u}function $p(o,u,m){var y=u.pendingProps;switch(Og(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mi(u),null;case 1:return mi(u),null;case 3:return m=u.stateNode,y=null,o!==null&&(y=o.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),Ml(vr),ve(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(Wh(u)?Pl(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Lg())),mi(u),null;case 26:var M=u.type,C=u.memoizedState;return o===null?(Pl(u),C!==null?(mi(u),f_(u,C)):(mi(u),qp(u,M,null,y,m))):C?C!==o.memoizedState?(Pl(u),mi(u),f_(u,C)):(mi(u),u.flags&=-16777217):(o=o.memoizedProps,o!==y&&Pl(u),mi(u),qp(u,M,o,y,m)),null;case 27:if(wt(u),m=be.current,M=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==y&&Pl(u);else{if(!y){if(u.stateNode===null)throw Error(i(166));return mi(u),null}o=Ge.current,Wh(u)?cS(u):(o=Ck(M,y,m),u.stateNode=o,Pl(u))}return mi(u),null;case 5:if(wt(u),M=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==y&&Pl(u);else{if(!y){if(u.stateNode===null)throw Error(i(166));return mi(u),null}if(C=Ge.current,Wh(u))cS(u);else{var G=s1(be.current);switch(C){case 1:C=G.createElementNS("http://www.w3.org/2000/svg",M);break;case 2:C=G.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;default:switch(M){case"svg":C=G.createElementNS("http://www.w3.org/2000/svg",M);break;case"math":C=G.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;case"script":C=G.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof y.is=="string"?G.createElement("select",{is:y.is}):G.createElement("select"),y.multiple?C.multiple=!0:y.size&&(C.size=y.size);break;default:C=typeof y.is=="string"?G.createElement(M,{is:y.is}):G.createElement(M)}}C[xi]=u,C[Fi]=y;e:for(G=u.child;G!==null;){if(G.tag===5||G.tag===6)C.appendChild(G.stateNode);else if(G.tag!==4&&G.tag!==27&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===u)break e;for(;G.sibling===null;){if(G.return===null||G.return===u)break e;G=G.return}G.sibling.return=G.return,G=G.sibling}u.stateNode=C;e:switch(qa(C,M,y),M){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&Pl(u)}}return mi(u),qp(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,m),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==y&&Pl(u);else{if(typeof y!="string"&&u.stateNode===null)throw Error(i(166));if(o=be.current,Wh(u)){if(o=u.stateNode,m=u.memoizedProps,y=null,M=Ji,M!==null)switch(M.tag){case 27:case 5:y=M.memoizedProps}o[xi]=u,o=!!(o.nodeValue===m||y!==null&&y.suppressHydrationWarning===!0||vk(o.nodeValue,m)),o||El(u,!0)}else o=s1(o).createTextNode(y),o[xi]=u,u.stateNode=o}return mi(u),null;case 31:if(m=u.memoizedState,o===null||o.memoizedState!==null){if(y=Wh(u),m!==null){if(o===null){if(!y)throw Error(i(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[xi]=u}else ic(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;mi(u),o=!1}else m=Lg(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=m),o=!0;if(!o)return u.flags&256?(ur(u),u):(ur(u),null);if((u.flags&128)!==0)throw Error(i(558))}return mi(u),null;case 13:if(y=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(M=Wh(u),y!==null&&y.dehydrated!==null){if(o===null){if(!M)throw Error(i(318));if(M=u.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(i(317));M[xi]=u}else ic(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;mi(u),M=!1}else M=Lg(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=M),M=!0;if(!M)return u.flags&256?(ur(u),u):(ur(u),null)}return ur(u),(u.flags&128)!==0?(u.lanes=m,u):(m=y!==null,o=o!==null&&o.memoizedState!==null,m&&(y=u.child,M=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(M=y.alternate.memoizedState.cachePool.pool),C=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(C=y.memoizedState.cachePool.pool),C!==M&&(y.flags|=2048)),m!==o&&m&&(u.child.flags|=8192),yu(u,u.updateQueue),mi(u),null);case 4:return ve(),o===null&&SC(u.stateNode.containerInfo),mi(u),null;case 10:return Ml(u.type),mi(u),null;case 19:if(pe(Bn),y=u.memoizedState,y===null)return mi(u),null;if(M=(u.flags&128)!==0,C=y.rendering,C===null)if(M)Nl(y,!1);else{if(Hi!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(C=zs(o),C!==null){for(u.flags|=128,Nl(y,!1),o=C.updateQueue,u.updateQueue=o,yu(u,o),u.subtreeFlags=0,o=m,m=u.child;m!==null;)Bh(m,o),m=m.sibling;return Ee(Bn,Bn.current&1|2),zn&&Sl(u,y.treeForkCount),u.child}o=o.sibling}y.tail!==null&&X()>hr&&(u.flags|=128,M=!0,Nl(y,!1),u.lanes=4194304)}else{if(!M)if(o=zs(C),o!==null){if(u.flags|=128,M=!0,o=o.updateQueue,u.updateQueue=o,yu(u,o),Nl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!C.alternate&&!zn)return mi(u),null}else 2*X()-y.renderingStartTime>hr&&m!==536870912&&(u.flags|=128,M=!0,Nl(y,!1),u.lanes=4194304);y.isBackwards?(C.sibling=u.child,u.child=C):(o=y.last,o!==null?o.sibling=C:u.child=C,y.last=C)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=X(),o.sibling=null,m=Bn.current,Ee(Bn,M?m&1|2:m&1),zn&&Sl(u,y.treeForkCount),o):(mi(u),null);case 22:case 23:return ur(u),zp(),y=u.memoizedState!==null,o!==null?o.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(m&536870912)!==0&&(u.flags&128)===0&&(mi(u),u.subtreeFlags&6&&(u.flags|=8192)):mi(u),m=u.updateQueue,m!==null&&yu(u,m.retryQueue),m=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048),o!==null&&pe(sc),null;case 24:return m=null,o!==null&&(m=o.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),Ml(vr),mi(u),null;case 25:return null;case 30:return null}throw Error(i(156,u.tag))}function _o(o,u){switch(Og(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return Ml(vr),ve(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return wt(u),null;case 31:if(u.memoizedState!==null){if(ur(u),u.alternate===null)throw Error(i(340));ic()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(ur(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(i(340));ic()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return pe(Bn),null;case 4:return ve(),null;case 10:return Ml(u.type),null;case 22:case 23:return ur(u),zp(),o!==null&&pe(sc),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return Ml(vr),null;case 25:return null;default:return null}}function Bs(o,u){switch(Og(u),u.tag){case 3:Ml(vr),ve();break;case 26:case 27:case 5:wt(u);break;case 4:ve();break;case 31:u.memoizedState!==null&&ur(u);break;case 13:ur(u);break;case 19:pe(Bn);break;case 10:Ml(u.type);break;case 22:case 23:ur(u),zp(),o!==null&&pe(sc);break;case 24:Ml(vr)}}function bo(o,u){try{var m=u.updateQueue,y=m!==null?m.lastEffect:null;if(y!==null){var M=y.next;m=M;do{if((m.tag&o)===o){y=void 0;var C=m.create,G=m.inst;y=C(),G.destroy=y}m=m.next}while(m!==M)}}catch(Q){Qn(u,u.return,Q)}}function na(o,u,m){try{var y=u.updateQueue,M=y!==null?y.lastEffect:null;if(M!==null){var C=M.next;y=C;do{if((y.tag&o)===o){var G=y.inst,Q=G.destroy;if(Q!==void 0){G.destroy=void 0,M=u;var ce=m,Ie=Q;try{Ie()}catch(Ke){Qn(M,ce,Ke)}}}y=y.next}while(y!==C)}}catch(Ke){Qn(u,u.return,Ke)}}function $o(o){var u=o.updateQueue;if(u!==null){var m=o.stateNode;try{mS(u,m)}catch(y){Qn(o,o.return,y)}}}function Hr(o,u,m){m.props=fc(o.type,o.memoizedProps),m.state=o.memoizedState;try{m.componentWillUnmount()}catch(y){Qn(o,u,y)}}function _u(o,u){try{var m=o.ref;if(m!==null){switch(o.tag){case 26:case 27:case 5:var y=o.stateNode;break;case 30:y=o.stateNode;break;default:y=o.stateNode}typeof m=="function"?o.refCleanup=m(y):m.current=y}}catch(M){Qn(o,u,M)}}function ia(o,u){var m=o.ref,y=o.refCleanup;if(m!==null)if(typeof y=="function")try{y()}catch(M){Qn(o,u,M)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(M){Qn(o,u,M)}else m.current=null}function Xp(o){var u=o.type,m=o.memoizedProps,y=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":m.autoFocus&&y.focus();break e;case"img":m.src?y.src=m.src:m.srcSet&&(y.srcset=m.srcSet)}}catch(M){Qn(o,o.return,M)}}function Pr(o,u,m){try{var y=o.stateNode;DX(y,o.type,m,u),y[Fi]=u}catch(M){Qn(o,o.return,M)}}function ki(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&fd(o.type)||o.tag===4}function Un(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||ki(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&fd(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Ol(o,u,m){var y=o.tag;if(y===5||y===6)o=o.stateNode,u?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(o,u):(u=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,u.appendChild(o),m=m._reactRootContainer,m!=null||u.onclick!==null||(u.onclick=zo));else if(y!==4&&(y===27&&fd(o.type)&&(m=o.stateNode,u=null),o=o.child,o!==null))for(Ol(o,u,m),o=o.sibling;o!==null;)Ol(o,u,m),o=o.sibling}function ja(o,u,m){var y=o.tag;if(y===5||y===6)o=o.stateNode,u?m.insertBefore(o,u):m.appendChild(o);else if(y!==4&&(y===27&&fd(o.type)&&(m=o.stateNode),o=o.child,o!==null))for(ja(o,u,m),o=o.sibling;o!==null;)ja(o,u,m),o=o.sibling}function cv(o){var u=o.stateNode,m=o.memoizedProps;try{for(var y=o.type,M=u.attributes;M.length;)u.removeAttributeNode(M[0]);qa(u,y,m),u[xi]=o,u[Fi]=m}catch(C){Qn(o,o.return,C)}}var xo=!1,Ei=!1,Xo=!1,i1=typeof WeakSet=="function"?WeakSet:Set,Gr=null;function _C(o,u){if(o=o.containerInfo,TC=d1,o=aS(o),b0(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var y=m.getSelection&&m.getSelection();if(y&&y.rangeCount!==0){m=y.anchorNode;var M=y.anchorOffset,C=y.focusNode;y=y.focusOffset;try{m.nodeType,C.nodeType}catch{m=null;break e}var G=0,Q=-1,ce=-1,Ie=0,Ke=0,it=o,Ne=null;t:for(;;){for(var Be;it!==m||M!==0&&it.nodeType!==3||(Q=G+M),it!==C||y!==0&&it.nodeType!==3||(ce=G+y),it.nodeType===3&&(G+=it.nodeValue.length),(Be=it.firstChild)!==null;)Ne=it,it=Be;for(;;){if(it===o)break t;if(Ne===m&&++Ie===M&&(Q=G),Ne===C&&++Ke===y&&(ce=G),(Be=it.nextSibling)!==null)break;it=Ne,Ne=it.parentNode}it=Be}m=Q===-1||ce===-1?null:{start:Q,end:ce}}else m=null}m=m||{start:0,end:0}}else m=null;for(AC={focusedElem:o,selectionRange:m},d1=!1,Gr=u;Gr!==null;)if(u=Gr,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,Gr=o;else for(;Gr!==null;){switch(u=Gr,C=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(m=0;m<o.length;m++)M=o[m],M.ref.impl=M.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&C!==null){o=void 0,m=u,M=C.memoizedProps,C=C.memoizedState,y=m.stateNode;try{var jt=fc(m.type,M);o=y.getSnapshotBeforeUpdate(jt,C),y.__reactInternalSnapshotBeforeUpdate=o}catch(ln){Qn(m,m.return,ln)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,m=o.nodeType,m===9)IC(o);else if(m===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":IC(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=u.sibling,o!==null){o.return=u.return,Gr=o;break}Gr=u.return}}function Ui(o,u,m){var y=m.flags;switch(m.tag){case 0:case 11:case 15:Eo(o,m),y&4&&bo(5,m);break;case 1:if(Eo(o,m),y&4)if(o=m.stateNode,u===null)try{o.componentDidMount()}catch(G){Qn(m,m.return,G)}else{var M=fc(m.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(M,u,o.__reactInternalSnapshotBeforeUpdate)}catch(G){Qn(m,m.return,G)}}y&64&&$o(m),y&512&&_u(m,m.return);break;case 3:if(Eo(o,m),y&64&&(o=m.updateQueue,o!==null)){if(u=null,m.child!==null)switch(m.child.tag){case 27:case 5:u=m.child.stateNode;break;case 1:u=m.child.stateNode}try{mS(o,u)}catch(G){Qn(m,m.return,G)}}break;case 27:u===null&&y&4&&cv(m);case 26:case 5:Eo(o,m),u===null&&y&4&&Xp(m),y&512&&_u(m,m.return);break;case 12:Eo(o,m);break;case 31:Eo(o,m),y&4&&hc(o,m);break;case 13:Eo(o,m),y&4&&nd(o,m),y&64&&(o=m.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(m=b.bind(null,m),jX(o,m))));break;case 22:if(y=m.memoizedState!==null||xo,!y){u=u!==null&&u.memoizedState!==null||Ei,M=xo;var C=Ei;xo=y,(Ei=u)&&!C?Ha(o,m,(m.subtreeFlags&8772)!==0):Eo(o,m),xo=M,Ei=C}break;case 30:break;default:Eo(o,m)}}function Yp(o){var u=o.alternate;u!==null&&(o.alternate=null,Yp(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&ao(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var ui=null,xa=!1;function So(o,u,m){for(m=m.child;m!==null;)fv(o,u,m),m=m.sibling}function fv(o,u,m){if(ot&&typeof ot.onCommitFiberUnmount=="function")try{ot.onCommitFiberUnmount(nt,m)}catch{}switch(m.tag){case 26:Ei||ia(m,u),So(o,u,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Ei||ia(m,u);var y=ui,M=xa;fd(m.type)&&(ui=m.stateNode,xa=!1),So(o,u,m),y_(m.stateNode),ui=y,xa=M;break;case 5:Ei||ia(m,u);case 6:if(y=ui,M=xa,ui=null,So(o,u,m),ui=y,xa=M,ui!==null)if(xa)try{(ui.nodeType===9?ui.body:ui.nodeName==="HTML"?ui.ownerDocument.body:ui).removeChild(m.stateNode)}catch(C){Qn(m,u,C)}else try{ui.removeChild(m.stateNode)}catch(C){Qn(m,u,C)}break;case 18:ui!==null&&(xa?(o=ui,wk(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,m.stateNode),_v(o)):wk(ui,m.stateNode));break;case 4:y=ui,M=xa,ui=m.stateNode.containerInfo,xa=!0,So(o,u,m),ui=y,xa=M;break;case 0:case 11:case 14:case 15:na(2,m,u),Ei||na(4,m,u),So(o,u,m);break;case 1:Ei||(ia(m,u),y=m.stateNode,typeof y.componentWillUnmount=="function"&&Hr(m,u,y)),So(o,u,m);break;case 21:So(o,u,m);break;case 22:Ei=(y=Ei)||m.memoizedState!==null,So(o,u,m),Ei=y;break;default:So(o,u,m)}}function hc(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{_v(o)}catch(m){Qn(u,u.return,m)}}}function nd(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{_v(o)}catch(m){Qn(u,u.return,m)}}function h_(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new i1),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new i1),u;default:throw Error(i(435,o.tag))}}function bu(o,u){var m=h_(o);u.forEach(function(y){if(!m.has(y)){m.add(y);var M=A.bind(null,o,y);y.then(M,M)}})}function Nr(o,u){var m=u.deletions;if(m!==null)for(var y=0;y<m.length;y++){var M=m[y],C=o,G=u,Q=G;e:for(;Q!==null;){switch(Q.tag){case 27:if(fd(Q.type)){ui=Q.stateNode,xa=!1;break e}break;case 5:ui=Q.stateNode,xa=!1;break e;case 3:case 4:ui=Q.stateNode.containerInfo,xa=!0;break e}Q=Q.return}if(ui===null)throw Error(i(160));fv(C,G,M),ui=null,xa=!1,C=M.alternate,C!==null&&(C.return=null),M.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)dc(u,o),u=u.sibling}var wo=null;function dc(o,u){var m=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Nr(u,o),Or(o),y&4&&(na(3,o,o.return),bo(3,o),na(5,o,o.return));break;case 1:Nr(u,o),Or(o),y&512&&(Ei||m===null||ia(m,m.return)),y&64&&xo&&(o=o.updateQueue,o!==null&&(y=o.callbacks,y!==null&&(m=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=m===null?y:m.concat(y))));break;case 26:var M=wo;if(Nr(u,o),Or(o),y&512&&(Ei||m===null||ia(m,m.return)),y&4){var C=m!==null?m.memoizedState:null;if(y=o.memoizedState,m===null)if(y===null)if(o.stateNode===null){e:{y=o.type,m=o.memoizedProps,M=M.ownerDocument||M;t:switch(y){case"title":C=M.getElementsByTagName("title")[0],(!C||C[ga]||C[xi]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=M.createElement(y),M.head.insertBefore(C,M.querySelector("head > title"))),qa(C,y,m),C[xi]=o,Z(C),y=C;break e;case"link":var G=Dk("link","href",M).get(y+(m.href||""));if(G){for(var Q=0;Q<G.length;Q++)if(C=G[Q],C.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&C.getAttribute("rel")===(m.rel==null?null:m.rel)&&C.getAttribute("title")===(m.title==null?null:m.title)&&C.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){G.splice(Q,1);break t}}C=M.createElement(y),qa(C,y,m),M.head.appendChild(C);break;case"meta":if(G=Dk("meta","content",M).get(y+(m.content||""))){for(Q=0;Q<G.length;Q++)if(C=G[Q],C.getAttribute("content")===(m.content==null?null:""+m.content)&&C.getAttribute("name")===(m.name==null?null:m.name)&&C.getAttribute("property")===(m.property==null?null:m.property)&&C.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&C.getAttribute("charset")===(m.charSet==null?null:m.charSet)){G.splice(Q,1);break t}}C=M.createElement(y),qa(C,y,m),M.head.appendChild(C);break;default:throw Error(i(468,y))}C[xi]=o,Z(C),y=C}o.stateNode=y}else Lk(M,o.type,o.stateNode);else o.stateNode=Ok(M,y,o.memoizedProps);else C!==y?(C===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):C.count--,y===null?Lk(M,o.type,o.stateNode):Ok(M,y,o.memoizedProps)):y===null&&o.stateNode!==null&&Pr(o,o.memoizedProps,m.memoizedProps)}break;case 27:Nr(u,o),Or(o),y&512&&(Ei||m===null||ia(m,m.return)),m!==null&&y&4&&Pr(o,o.memoizedProps,m.memoizedProps);break;case 5:if(Nr(u,o),Or(o),y&512&&(Ei||m===null||ia(m,m.return)),o.flags&32){M=o.stateNode;try{di(M,"")}catch(jt){Qn(o,o.return,jt)}}y&4&&o.stateNode!=null&&(M=o.memoizedProps,Pr(o,M,m!==null?m.memoizedProps:M)),y&1024&&(Xo=!0);break;case 6:if(Nr(u,o),Or(o),y&4){if(o.stateNode===null)throw Error(i(162));y=o.memoizedProps,m=o.stateNode;try{m.nodeValue=y}catch(jt){Qn(o,o.return,jt)}}break;case 3:if(u1=null,M=wo,wo=o1(u.containerInfo),Nr(u,o),wo=M,Or(o),y&4&&m!==null&&m.memoizedState.isDehydrated)try{_v(u.containerInfo)}catch(jt){Qn(o,o.return,jt)}Xo&&(Xo=!1,hv(o));break;case 4:y=wo,wo=o1(o.stateNode.containerInfo),Nr(u,o),Or(o),wo=y;break;case 12:Nr(u,o),Or(o);break;case 31:Nr(u,o),Or(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,bu(o,y)));break;case 13:Nr(u,o),Or(o),o.child.flags&8192&&o.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(id=X()),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,bu(o,y)));break;case 22:M=o.memoizedState!==null;var ce=m!==null&&m.memoizedState!==null,Ie=xo,Ke=Ei;if(xo=Ie||M,Ei=Ke||ce,Nr(u,o),Ei=Ke,xo=Ie,Or(o),y&8192)e:for(u=o.stateNode,u._visibility=M?u._visibility&-2:u._visibility|1,M&&(m===null||ce||xo||Ei||Dl(o)),m=null,u=o;;){if(u.tag===5||u.tag===26){if(m===null){ce=m=u;try{if(C=ce.stateNode,M)G=C.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none";else{Q=ce.stateNode;var it=ce.memoizedProps.style,Ne=it!=null&&it.hasOwnProperty("display")?it.display:null;Q.style.display=Ne==null||typeof Ne=="boolean"?"":(""+Ne).trim()}}catch(jt){Qn(ce,ce.return,jt)}}}else if(u.tag===6){if(m===null){ce=u;try{ce.stateNode.nodeValue=M?"":ce.memoizedProps}catch(jt){Qn(ce,ce.return,jt)}}}else if(u.tag===18){if(m===null){ce=u;try{var Be=ce.stateNode;M?Ek(Be,!0):Ek(ce.stateNode,!1)}catch(jt){Qn(ce,ce.return,jt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;m===u&&(m=null),u=u.return}m===u&&(m=null),u.sibling.return=u.return,u=u.sibling}y&4&&(y=o.updateQueue,y!==null&&(m=y.retryQueue,m!==null&&(y.retryQueue=null,bu(o,m))));break;case 19:Nr(u,o),Or(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,bu(o,y)));break;case 30:break;case 21:break;default:Nr(u,o),Or(o)}}function Or(o){var u=o.flags;if(u&2){try{for(var m,y=o.return;y!==null;){if(ki(y)){m=y;break}y=y.return}if(m==null)throw Error(i(160));switch(m.tag){case 27:var M=m.stateNode,C=Un(o);ja(o,C,M);break;case 5:var G=m.stateNode;m.flags&32&&(di(G,""),m.flags&=-33);var Q=Un(o);ja(o,Q,G);break;case 3:case 4:var ce=m.stateNode.containerInfo,Ie=Un(o);Ol(o,Ie,ce);break;default:throw Error(i(161))}}catch(Ke){Qn(o,o.return,Ke)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function hv(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;hv(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function Eo(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)Ui(o,u.alternate,u),u=u.sibling}function Dl(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:na(4,u,u.return),Dl(u);break;case 1:ia(u,u.return);var m=u.stateNode;typeof m.componentWillUnmount=="function"&&Hr(u,u.return,m),Dl(u);break;case 27:y_(u.stateNode);case 26:case 5:ia(u,u.return),Dl(u);break;case 22:u.memoizedState===null&&Dl(u);break;case 30:Dl(u);break;default:Dl(u)}o=o.sibling}}function Ha(o,u,m){for(m=m&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,M=o,C=u,G=C.flags;switch(C.tag){case 0:case 11:case 15:Ha(M,C,m),bo(4,C);break;case 1:if(Ha(M,C,m),y=C,M=y.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(Ie){Qn(y,y.return,Ie)}if(y=C,M=y.updateQueue,M!==null){var Q=y.stateNode;try{var ce=M.shared.hiddenCallbacks;if(ce!==null)for(M.shared.hiddenCallbacks=null,M=0;M<ce.length;M++)Kh(ce[M],Q)}catch(Ie){Qn(y,y.return,Ie)}}m&&G&64&&$o(C),_u(C,C.return);break;case 27:cv(C);case 26:case 5:Ha(M,C,m),m&&y===null&&G&4&&Xp(C),_u(C,C.return);break;case 12:Ha(M,C,m);break;case 31:Ha(M,C,m),m&&G&4&&hc(M,C);break;case 13:Ha(M,C,m),m&&G&4&&nd(M,C);break;case 22:C.memoizedState===null&&Ha(M,C,m),_u(C,C.return);break;case 30:break;default:Ha(M,C,m)}u=u.sibling}}function pc(o,u){var m=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==m&&(o!=null&&o.refCount++,m!=null&&_f(m))}function Of(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&_f(o))}function ra(o,u,m,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)d_(o,u,m,y),u=u.sibling}function d_(o,u,m,y){var M=u.flags;switch(u.tag){case 0:case 11:case 15:ra(o,u,m,y),M&2048&&bo(9,u);break;case 1:ra(o,u,m,y);break;case 3:ra(o,u,m,y),M&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&_f(o)));break;case 12:if(M&2048){ra(o,u,m,y),o=u.stateNode;try{var C=u.memoizedProps,G=C.id,Q=C.onPostCommit;typeof Q=="function"&&Q(G,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(ce){Qn(u,u.return,ce)}}else ra(o,u,m,y);break;case 31:ra(o,u,m,y);break;case 13:ra(o,u,m,y);break;case 23:break;case 22:C=u.stateNode,G=u.alternate,u.memoizedState!==null?C._visibility&2?ra(o,u,m,y):Ll(o,u):C._visibility&2?ra(o,u,m,y):(C._visibility|=2,aa(o,u,m,y,(u.subtreeFlags&10256)!==0||!1)),M&2048&&pc(G,u);break;case 24:ra(o,u,m,y),M&2048&&Of(u.alternate,u);break;default:ra(o,u,m,y)}}function aa(o,u,m,y,M){for(M=M&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var C=o,G=u,Q=m,ce=y,Ie=G.flags;switch(G.tag){case 0:case 11:case 15:aa(C,G,Q,ce,M),bo(8,G);break;case 23:break;case 22:var Ke=G.stateNode;G.memoizedState!==null?Ke._visibility&2?aa(C,G,Q,ce,M):Ll(C,G):(Ke._visibility|=2,aa(C,G,Q,ce,M)),M&&Ie&2048&&pc(G.alternate,G);break;case 24:aa(C,G,Q,ce,M),M&&Ie&2048&&Of(G.alternate,G);break;default:aa(C,G,Q,ce,M)}u=u.sibling}}function Ll(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var m=o,y=u,M=y.flags;switch(y.tag){case 22:Ll(m,y),M&2048&&pc(y.alternate,y);break;case 24:Ll(m,y),M&2048&&Of(y.alternate,y);break;default:Ll(m,y)}u=u.sibling}}var Df=8192;function Vs(o,u,m){if(o.subtreeFlags&Df)for(o=o.child;o!==null;)dv(o,u,m),o=o.sibling}function dv(o,u,m){switch(o.tag){case 26:Vs(o,u,m),o.flags&Df&&o.memoizedState!==null&&eY(m,wo,o.memoizedState,o.memoizedProps);break;case 5:Vs(o,u,m);break;case 3:case 4:var y=wo;wo=o1(o.stateNode.containerInfo),Vs(o,u,m),wo=y;break;case 22:o.memoizedState===null&&(y=o.alternate,y!==null&&y.memoizedState!==null?(y=Df,Df=16777216,Vs(o,u,m),Df=y):Vs(o,u,m));break;default:Vs(o,u,m)}}function Lf(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function mc(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var m=0;m<u.length;m++){var y=u[m];Gr=y,er(y,o)}Lf(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ms(o),o=o.sibling}function ms(o){switch(o.tag){case 0:case 11:case 15:mc(o),o.flags&2048&&na(9,o,o.return);break;case 3:mc(o);break;case 12:mc(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,gs(o)):mc(o);break;default:mc(o)}}function gs(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var m=0;m<u.length;m++){var y=u[m];Gr=y,er(y,o)}Lf(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:na(8,u,u.return),gs(u);break;case 22:m=u.stateNode,m._visibility&2&&(m._visibility&=-3,gs(u));break;default:gs(u)}o=o.sibling}}function er(o,u){for(;Gr!==null;){var m=Gr;switch(m.tag){case 0:case 11:case 15:na(8,m,u);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var y=m.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:_f(m.memoizedState.cache)}if(y=m.child,y!==null)y.return=m,Gr=y;else e:for(m=o;Gr!==null;){y=Gr;var M=y.sibling,C=y.return;if(Yp(y),y===m){Gr=null;break e}if(M!==null){M.return=C,Gr=M;break e}Gr=C}}}var xu={getCacheForType:function(o){var u=cn(vr),m=u.data.get(o);return m===void 0&&(m=o(),u.data.set(o,m)),m},cacheSignal:function(){return cn(vr).controller.signal}},xn=typeof WeakMap=="function"?WeakMap:Map,Wt=0,dn=null,Cn=null,En=0,jn=0,Sa=null,To=!1,Yo=!1,p_=!1,js=0,Hi=0,kl=0,gc=0,Kp=0,Ga=0,Pi=0,kf=null,tr=null,nr=!1,id=0,m_=0,hr=1/0,Gi=null,dr=null,ci=0,Hs=null,rd=null,Ao=0,ad=0,sd=null,Zp=null,vc=0,Uf=null;function Gs(){return(Wt&2)!==0&&En!==0?En&-En:ee.T!==null?Ue():tu()}function Dn(){if(Ga===0)if((En&536870912)===0||zn){var o=qe;qe<<=1,(qe&3932160)===0&&(qe=262144),Ga=o}else Ga=536870912;return o=fs.current,o!==null&&(o.flags|=32),Ga}function In(o,u,m){(o===dn&&(jn===2||jn===9)||o.cancelPendingCommit!==null)&&(_c(o,0),_r(o,En,Ga,!1)),ii(o,m),((Wt&2)===0||o!==dn)&&(o===dn&&((Wt&2)===0&&(gc|=m),Hi===4&&_r(o,En,Ga,!1)),mt(o))}function Ln(o,u,m){if((Wt&6)!==0)throw Error(i(327));var y=!m&&(u&127)===0&&(u&o.expiredLanes)===0||at(o,u),M=y?Qp(o,u):Wa(o,u,!0),C=y;do{if(M===0){Yo&&!y&&_r(o,u,0,!1);break}else{if(m=o.current.alternate,C&&!fi(m)){M=Wa(o,u,!1),C=!1;continue}if(M===2){if(C=u,o.errorRecoveryDisabledLanes&C)var G=0;else G=o.pendingLanes&-536870913,G=G!==0?G:G&536870912?536870912:0;if(G!==0){u=G;e:{var Q=o;M=kf;var ce=Q.current.memoizedState.isDehydrated;if(ce&&(_c(Q,G).flags|=256),G=Wa(Q,G,!1),G!==2){if(p_&&!ce){Q.errorRecoveryDisabledLanes|=C,gc|=C,M=4;break e}C=tr,tr=M,C!==null&&(tr===null?tr=C:tr.push.apply(tr,C))}M=G}if(C=!1,M!==2)continue}}if(M===1){_c(o,0),_r(o,u,0,!0);break}e:{switch(y=o,C=M,C){case 0:case 1:throw Error(i(345));case 4:if((u&4194048)!==u)break;case 6:_r(y,u,Ga,!To);break e;case 2:tr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((u&62914560)===u&&(M=id+300-X(),10<M)){if(_r(y,u,Ga,!To),We(y,0,!0)!==0)break e;Ao=u,y.timeoutHandle=xk(Fn.bind(null,y,m,tr,Gi,nr,u,Ga,gc,Pi,To,C,"Throttled",-0,0),M);break e}Fn(y,m,tr,Gi,nr,u,Ga,gc,Pi,To,C,null,-0,0)}}break}while(!0);mt(o)}function Fn(o,u,m,y,M,C,G,Q,ce,Ie,Ke,it,Ne,Be){if(o.timeoutHandle=-1,it=u.subtreeFlags,it&8192||(it&16785408)===16785408){it={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zo},dv(u,C,it);var jt=(C&62914560)===C?id-X():(C&4194048)===C?m_-X():0;if(jt=tY(it,jt),jt!==null){Ao=C,o.cancelPendingCommit=jt(wu.bind(null,o,u,C,m,y,M,G,Q,ce,Ke,it,null,Ne,Be)),_r(o,C,G,!Ie);return}}wu(o,u,C,m,y,M,G,Q,ce)}function fi(o){for(var u=o;;){var m=u.tag;if((m===0||m===11||m===15)&&u.flags&16384&&(m=u.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var y=0;y<m.length;y++){var M=m[y],C=M.getSnapshot;M=M.value;try{if(!Fa(C(),M))return!1}catch{return!1}}if(m=u.child,u.subtreeFlags&16384&&m!==null)m.return=u,u=m;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function _r(o,u,m,y){u&=~Kp,u&=~gc,o.suspendedLanes|=u,o.pingedLanes&=~u,y&&(o.warmLanes|=u),y=o.expirationTimes;for(var M=u;0<M;){var C=31-Y(M),G=1<<C;y[C]=-1,M&=~G}m!==0&&Qr(o,m,u)}function Ko(){return(Wt&6)===0?(Nt(0),!1):!0}function yc(){if(Cn!==null){if(jn===0)var o=Cn.return;else o=Cn,Al=rc=null,F0(o),Ef=null,Tf=0,o=Cn;for(;o!==null;)Bs(o.alternate,o),o=o.return;Cn=null}}function _c(o,u){var m=o.timeoutHandle;m!==-1&&(o.timeoutHandle=-1,UX(m)),m=o.cancelPendingCommit,m!==null&&(o.cancelPendingCommit=null,m()),Ao=0,yc(),dn=o,Cn=m=ls(o.current,null),En=u,jn=0,Sa=null,To=!1,Yo=at(o,u),p_=!1,Pi=Ga=Kp=gc=kl=Hi=0,tr=kf=null,nr=!1,(u&8)!==0&&(u|=u&32);var y=o.entangledLanes;if(y!==0)for(o=o.entanglements,y&=u;0<y;){var M=31-Y(y),C=1<<M;u|=o[M],y&=~C}return js=u,Pp(),m}function Ul(o,u){bn=null,ee.H=ed,u===bf||u===Mn?(u=Sf(),jn=3):u===Lp?(u=Sf(),jn=4):jn=u===tv?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Sa=u,Cn===null&&(Hi=1,ev(o,ks(u,o.current)))}function Wi(){var o=fs.current;return o===null?!0:(En&4194048)===En?Va===null:(En&62914560)===En||(En&536870912)!==0?o===Va:!1}function Su(){var o=ee.H;return ee.H=ed,o===null?ed:o}function bc(){var o=ee.A;return ee.A=xu,o}function od(){Hi=4,To||(En&4194048)!==En&&fs.current!==null||(Yo=!0),(kl&134217727)===0&&(gc&134217727)===0||dn===null||_r(dn,En,Ga,!1)}function Wa(o,u,m){var y=Wt;Wt|=2;var M=Su(),C=bc();(dn!==o||En!==u)&&(Gi=null,_c(o,u)),u=!1;var G=Hi;e:do try{if(jn!==0&&Cn!==null){var Q=Cn,ce=Sa;switch(jn){case 8:yc(),G=6;break e;case 3:case 2:case 9:case 6:fs.current===null&&(u=!0);var Ie=jn;if(jn=0,Sa=null,Ff(o,Q,ce,Ie),m&&Yo){G=0;break e}break;default:Ie=jn,jn=0,Sa=null,Ff(o,Q,ce,Ie)}}ld(),G=Hi;break}catch(Ke){Ul(o,Ke)}while(!0);return u&&o.shellSuspendCounter++,Al=rc=null,Wt=y,ee.H=M,ee.A=C,Cn===null&&(dn=null,En=0,Pp()),G}function ld(){for(;Cn!==null;)pv(Cn)}function Qp(o,u){var m=Wt;Wt|=2;var y=Su(),M=bc();dn!==o||En!==u?(Gi=null,hr=X()+500,_c(o,u)):Yo=at(o,u);e:do try{if(jn!==0&&Cn!==null){u=Cn;var C=Sa;t:switch(jn){case 1:jn=0,Sa=null,Ff(o,u,C,1);break;case 2:case 9:if(cs(C)){jn=0,Sa=null,Jp(u);break}u=function(){jn!==2&&jn!==9||dn!==o||(jn=7),mt(o)},C.then(u,u);break e;case 3:jn=7;break e;case 4:jn=5;break e;case 7:cs(C)?(jn=0,Sa=null,Jp(u)):(jn=0,Sa=null,Ff(o,u,C,7));break;case 5:var G=null;switch(Cn.tag){case 26:G=Cn.memoizedState;case 5:case 27:var Q=Cn;if(G?kk(G):Q.stateNode.complete){jn=0,Sa=null;var ce=Q.sibling;if(ce!==null)Cn=ce;else{var Ie=Q.return;Ie!==null?(Cn=Ie,xc(Ie)):Cn=null}break t}}jn=0,Sa=null,Ff(o,u,C,5);break;case 6:jn=0,Sa=null,Ff(o,u,C,6);break;case 8:yc(),Hi=6;break e;default:throw Error(i(462))}}vs();break}catch(Ke){Ul(o,Ke)}while(!0);return Al=rc=null,ee.H=y,ee.A=M,Wt=m,Cn!==null?0:(dn=null,En=0,Pp(),Hi)}function vs(){for(;Cn!==null&&!pt();)pv(Cn)}function pv(o){var u=uv(o.alternate,o,js);o.memoizedProps=o.pendingProps,u===null?xc(o):Cn=u}function Jp(o){var u=o,m=u.alternate;switch(u.tag){case 15:case 0:u=Gp(m,u,u.pendingProps,u.type,void 0,En);break;case 11:u=Gp(m,u,u.pendingProps,u.type.render,u.ref,En);break;case 5:F0(u);default:Bs(m,u),u=Cn=Bh(u,js),u=uv(m,u,js)}o.memoizedProps=o.pendingProps,u===null?xc(o):Cn=u}function Ff(o,u,m,y){Al=rc=null,F0(u),Ef=null,Tf=0;var M=u.return;try{if(Rr(o,M,u,m,En)){Hi=1,ev(o,ks(m,o.current)),Cn=null;return}}catch(C){if(M!==null)throw Cn=M,C;Hi=1,ev(o,ks(m,o.current)),Cn=null;return}u.flags&32768?(zn||y===1?o=!0:Yo||(En&536870912)!==0?o=!1:(To=o=!0,(y===2||y===9||y===3||y===6)&&(y=fs.current,y!==null&&y.tag===13&&(y.flags|=16384))),em(u,o)):xc(u)}function xc(o){var u=o;do{if((u.flags&32768)!==0){em(u,To);return}o=u.return;var m=$p(u.alternate,u,js);if(m!==null){Cn=m;return}if(u=u.sibling,u!==null){Cn=u;return}Cn=u=o}while(u!==null);Hi===0&&(Hi=5)}function em(o,u){do{var m=_o(o.alternate,o);if(m!==null){m.flags&=32767,Cn=m;return}if(m=o.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!u&&(o=o.sibling,o!==null)){Cn=o;return}Cn=o=m}while(o!==null);Hi=6,Cn=null}function wu(o,u,m,y,M,C,G,Q,ce){o.cancelPendingCommit=null;do ud();while(ci!==0);if((Wt&6)!==0)throw Error(i(327));if(u!==null){if(u===o.current)throw Error(i(177));if(C=u.lanes|u.childLanes,C|=Br,Mi(o,m,C,G,Q,ce),o===dn&&(Cn=dn=null,En=0),rd=u,Hs=o,Ao=m,ad=C,sd=M,Zp=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,N(Oe,function(){return mv(),null})):(o.callbackNode=null,o.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=ee.T,ee.T=null,M=ie.p,ie.p=2,G=Wt,Wt|=4;try{_C(o,u,m)}finally{Wt=G,ie.p=M,ee.T=y}}ci=1,br(),Eu(),zf()}}function br(){if(ci===1){ci=0;var o=Hs,u=rd,m=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||m){m=ee.T,ee.T=null;var y=ie.p;ie.p=2;var M=Wt;Wt|=4;try{dc(u,o);var C=AC,G=aS(o.containerInfo),Q=C.focusedElem,ce=C.selectionRange;if(G!==Q&&Q&&Q.ownerDocument&&Si(Q.ownerDocument.documentElement,Q)){if(ce!==null&&b0(Q)){var Ie=ce.start,Ke=ce.end;if(Ke===void 0&&(Ke=Ie),"selectionStart"in Q)Q.selectionStart=Ie,Q.selectionEnd=Math.min(Ke,Q.value.length);else{var it=Q.ownerDocument||document,Ne=it&&it.defaultView||window;if(Ne.getSelection){var Be=Ne.getSelection(),jt=Q.textContent.length,ln=Math.min(ce.start,jt),Ai=ce.end===void 0?ln:Math.min(ce.end,jt);!Be.extend&&ln>Ai&&(G=Ai,Ai=ln,ln=G);var xe=Uh(Q,ln),me=Uh(Q,Ai);if(xe&&me&&(Be.rangeCount!==1||Be.anchorNode!==xe.node||Be.anchorOffset!==xe.offset||Be.focusNode!==me.node||Be.focusOffset!==me.offset)){var Ae=it.createRange();Ae.setStart(xe.node,xe.offset),Be.removeAllRanges(),ln>Ai?(Be.addRange(Ae),Be.extend(me.node,me.offset)):(Ae.setEnd(me.node,me.offset),Be.addRange(Ae))}}}}for(it=[],Be=Q;Be=Be.parentNode;)Be.nodeType===1&&it.push({element:Be,left:Be.scrollLeft,top:Be.scrollTop});for(typeof Q.focus=="function"&&Q.focus(),Q=0;Q<it.length;Q++){var Je=it[Q];Je.element.scrollLeft=Je.left,Je.element.scrollTop=Je.top}}d1=!!TC,AC=TC=null}finally{Wt=M,ie.p=y,ee.T=m}}o.current=u,ci=2}}function Eu(){if(ci===2){ci=0;var o=Hs,u=rd,m=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||m){m=ee.T,ee.T=null;var y=ie.p;ie.p=2;var M=Wt;Wt|=4;try{Ui(o,u.alternate,u)}finally{Wt=M,ie.p=y,ee.T=m}}ci=3}}function zf(){if(ci===4||ci===3){ci=0,te();var o=Hs,u=rd,m=Ao,y=Zp;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?ci=5:(ci=0,rd=Hs=null,Fl(o,o.pendingLanes));var M=o.pendingLanes;if(M===0&&(dr=null),Cr(m),u=u.stateNode,ot&&typeof ot.onCommitFiberRoot=="function")try{ot.onCommitFiberRoot(nt,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=ee.T,M=ie.p,ie.p=2,ee.T=null;try{for(var C=o.onRecoverableError,G=0;G<y.length;G++){var Q=y[G];C(Q.value,{componentStack:Q.stack})}}finally{ee.T=u,ie.p=M}}(Ao&3)!==0&&ud(),mt(o),M=o.pendingLanes,(m&261930)!==0&&(M&42)!==0?o===Uf?vc++:(vc=0,Uf=o):vc=0,Nt(0)}}function Fl(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,_f(u)))}function ud(){return br(),Eu(),zf(),mv()}function mv(){if(ci!==5)return!1;var o=Hs,u=ad;ad=0;var m=Cr(Ao),y=ee.T,M=ie.p;try{ie.p=32>m?32:m,ee.T=null,m=sd,sd=null;var C=Hs,G=Ao;if(ci=0,rd=Hs=null,Ao=0,(Wt&6)!==0)throw Error(i(331));var Q=Wt;if(Wt|=4,ms(C.current),d_(C,C.current,G,m),Wt=Q,Nt(0,!1),ot&&typeof ot.onPostCommitFiberRoot=="function")try{ot.onPostCommitFiberRoot(nt,C)}catch{}return!0}finally{ie.p=M,ee.T=y,Fl(o,u)}}function g_(o,u,m){u=ks(m,u),u=s_(o.stateNode,u,2),o=oc(o,u,2),o!==null&&(ii(o,2),mt(o))}function Qn(o,u,m){if(o.tag===3)g_(o,o,m);else for(;u!==null;){if(u.tag===3){g_(u,o,m);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(dr===null||!dr.has(y))){o=ks(m,o),m=o_(2),y=oc(u,m,2),y!==null&&(QS(m,y,u,o),ii(y,2),mt(y));break}}u=u.return}}function tm(o,u,m){var y=o.pingCache;if(y===null){y=o.pingCache=new xn;var M=new Set;y.set(u,M)}else M=y.get(u),M===void 0&&(M=new Set,y.set(u,M));M.has(m)||(p_=!0,M.add(m),o=h.bind(null,o,u,m),u.then(o,o))}function h(o,u,m){var y=o.pingCache;y!==null&&y.delete(u),o.pingedLanes|=o.suspendedLanes&m,o.warmLanes&=~m,dn===o&&(En&m)===m&&(Hi===4||Hi===3&&(En&62914560)===En&&300>X()-id?(Wt&2)===0&&_c(o,0):Kp|=m,Pi===En&&(Pi=0)),mt(o)}function d(o,u){u===0&&(u=un()),o=za(o,u),o!==null&&(ii(o,u),mt(o))}function b(o){var u=o.memoizedState,m=0;u!==null&&(m=u.retryLane),d(o,m)}function A(o,u){var m=0;switch(o.tag){case 31:case 13:var y=o.stateNode,M=o.memoizedState;M!==null&&(m=M.retryLane);break;case 19:y=o.stateNode;break;case 22:y=o.stateNode._retryCache;break;default:throw Error(i(314))}y!==null&&y.delete(u),d(o,m)}function N(o,u){return ft(o,u)}var U=null,K=null,fe=!1,ze=!1,st=!1,_t=0;function mt(o){o!==K&&o.next===null&&(K===null?U=K=o:K=K.next=o),ze=!0,fe||(fe=!0,Se())}function Nt(o,u){if(!st&&ze){st=!0;do for(var m=!1,y=U;y!==null;){if(o!==0){var M=y.pendingLanes;if(M===0)var C=0;else{var G=y.suspendedLanes,Q=y.pingedLanes;C=(1<<31-Y(42|o)+1)-1,C&=M&~(G&~Q),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(m=!0,Pe(y,C))}else C=En,C=We(y,y===dn?C:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(C&3)===0||at(y,C)||(m=!0,Pe(y,C));y=y.next}while(m);st=!1}}function yn(){pr()}function pr(){ze=fe=!1;var o=0;_t!==0&&kX()&&(o=_t);for(var u=X(),m=null,y=U;y!==null;){var M=y.next,C=cd(y,u);C===0?(y.next=null,m===null?U=M:m.next=M,M===null&&(K=m)):(m=y,(o!==0||(C&3)!==0)&&(ze=!0)),y=M}ci!==0&&ci!==5||Nt(o),_t!==0&&(_t=0)}function cd(o,u){for(var m=o.suspendedLanes,y=o.pingedLanes,M=o.expirationTimes,C=o.pendingLanes&-62914561;0<C;){var G=31-Y(C),Q=1<<G,ce=M[G];ce===-1?((Q&m)===0||(Q&y)!==0)&&(M[G]=kt(Q,u)):ce<=u&&(o.expiredLanes|=Q),C&=~Q}if(u=dn,m=En,m=We(o,o===u?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y=o.callbackNode,m===0||o===u&&(jn===2||jn===9)||o.cancelPendingCommit!==null)return y!==null&&y!==null&&Lt(y),o.callbackNode=null,o.callbackPriority=0;if((m&3)===0||at(o,m)){if(u=m&-m,u===o.callbackPriority)return u;switch(y!==null&&Lt(y),Cr(m)){case 2:case 8:m=Ze;break;case 32:m=Oe;break;case 268435456:m=gt;break;default:m=Oe}return y=Sc.bind(null,o),m=ft(m,y),o.callbackPriority=u,o.callbackNode=m,u}return y!==null&&y!==null&&Lt(y),o.callbackPriority=2,o.callbackNode=null,2}function Sc(o,u){if(ci!==0&&ci!==5)return o.callbackNode=null,o.callbackPriority=0,null;var m=o.callbackNode;if(ud()&&o.callbackNode!==m)return null;var y=En;return y=We(o,o===dn?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y===0?null:(Ln(o,y,u),cd(o,X()),o.callbackNode!=null&&o.callbackNode===m?Sc.bind(null,o):null)}function Pe(o,u){if(ud())return null;Ln(o,u,!0)}function Se(){FX(function(){(Wt&6)!==0?ft(Le,yn):pr()})}function Ue(){if(_t===0){var o=du;o===0&&(o=$e,$e<<=1,($e&261888)===0&&($e=256)),_t=o}return _t}function yt(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:uf(""+o)}function en(o,u){var m=u.ownerDocument.createElement("input");return m.name=u.name,m.value=u.value,o.id&&m.setAttribute("form",o.id),u.parentNode.insertBefore(m,u),o=new FormData(o),m.parentNode.removeChild(m),o}function qi(o,u,m,y,M){if(u==="submit"&&m&&m.stateNode===M){var C=yt((M[Fi]||null).action),G=y.submitter;G&&(u=(u=G[Fi]||null)?yt(u.formAction):G.getAttribute("formAction"),u!==null&&(C=u,G=null));var Q=new jo("action","action",null,y,M);o.push({event:Q,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(_t!==0){var ce=G?en(M,G):new FormData(M);Q0(m,{pending:!0,data:ce,method:M.method,action:C},null,ce)}}else typeof C=="function"&&(Q.preventDefault(),ce=G?en(M,G):new FormData(M),Q0(m,{pending:!0,data:ce,method:M.method,action:C},C,ce))},currentTarget:M}]})}}for(var rn=0;rn<Ip.length;rn++){var Gn=Ip[rn],Wr=Gn.toLowerCase(),Jn=Gn[0].toUpperCase()+Gn.slice(1);fo(Wr,"on"+Jn)}fo(Cg,"onAnimationEnd"),fo(Cp,"onAnimationIteration"),fo(S0,"onAnimationStart"),fo("dblclick","onDoubleClick"),fo("focusin","onFocus"),fo("focusout","onBlur"),fo(oS,"onTransitionRun"),fo(fC,"onTransitionStart"),fo(lS,"onTransitionCancel"),fo(w0,"onTransitionEnd"),_e("onMouseEnter",["mouseout","mouseover"]),_e("onMouseLeave",["mouseout","mouseover"]),_e("onPointerEnter",["pointerout","pointerover"]),_e("onPointerLeave",["pointerout","pointerover"]),Ce("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ce("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ce("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ce("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ce("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ce("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mo));function dk(o,u){u=(u&4)!==0;for(var m=0;m<o.length;m++){var y=o[m],M=y.event;y=y.listeners;e:{var C=void 0;if(u)for(var G=y.length-1;0<=G;G--){var Q=y[G],ce=Q.instance,Ie=Q.currentTarget;if(Q=Q.listener,ce!==C&&M.isPropagationStopped())break e;C=Q,M.currentTarget=Ie;try{C(M)}catch(Ke){Rp(Ke)}M.currentTarget=null,C=ce}else for(G=0;G<y.length;G++){if(Q=y[G],ce=Q.instance,Ie=Q.currentTarget,Q=Q.listener,ce!==C&&M.isPropagationStopped())break e;C=Q,M.currentTarget=Ie;try{C(M)}catch(Ke){Rp(Ke)}M.currentTarget=null,C=ce}}}}function Hn(o,u){var m=u[ma];m===void 0&&(m=u[ma]=new Set);var y=o+"__bubble";m.has(y)||(pk(u,o,2,!1),m.add(y))}function xC(o,u,m){var y=0;u&&(y|=4),pk(m,o,y,u)}var r1="_reactListening"+Math.random().toString(36).slice(2);function SC(o){if(!o[r1]){o[r1]=!0,ge.forEach(function(m){m!=="selectionchange"&&(bC.has(m)||xC(m,!1,o),xC(m,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[r1]||(u[r1]=!0,xC("selectionchange",!1,u))}}function pk(o,u,m,y){switch(Hk(u)){case 2:var M=rY;break;case 8:M=aY;break;default:M=UC}m=M.bind(null,u,m,o),M=void 0,!ff||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(M=!0),y?M!==void 0?o.addEventListener(u,m,{capture:!0,passive:M}):o.addEventListener(u,m,!0):M!==void 0?o.addEventListener(u,m,{passive:M}):o.addEventListener(u,m,!1)}function wC(o,u,m,y,M){var C=y;if((u&1)===0&&(u&2)===0&&y!==null)e:for(;;){if(y===null)return;var G=y.tag;if(G===3||G===4){var Q=y.stateNode.containerInfo;if(Q===M)break;if(G===4)for(G=y.return;G!==null;){var ce=G.tag;if((ce===3||ce===4)&&G.stateNode.containerInfo===M)return;G=G.return}for(;Q!==null;){if(G=Ns(Q),G===null)return;if(ce=G.tag,ce===5||ce===6||ce===26||ce===27){y=C=G;continue e}Q=Q.parentNode}}y=y.return}ru(function(){var Ie=C,Ke=Ds(m),it=[];e:{var Ne=co.get(o);if(Ne!==void 0){var Be=jo,jt=o;switch(o){case"keypress":if(qu(m)===0)break e;case"keydown":case"keyup":Be=gl;break;case"focusin":jt="focus",Be=Yu;break;case"focusout":jt="blur",Be=Yu;break;case"beforeblur":case"afterblur":Be=Yu;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Be=Rh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Be=bp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Be=j;break;case Cg:case Cp:case S0:Be=Tg;break;case w0:Be=ne;break;case"scroll":case"scrollend":Be=Ih;break;case"wheel":Be=ke;break;case"copy":case"cut":case"paste":Be=xp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Be=vl;break;case"toggle":case"beforetoggle":Be=vn}var ln=(u&4)!==0,Ai=!ln&&(o==="scroll"||o==="scrollend"),xe=ln?Ne!==null?Ne+"Capture":null:Ne;ln=[];for(var me=Ie,Ae;me!==null;){var Je=me;if(Ae=Je.stateNode,Je=Je.tag,Je!==5&&Je!==26&&Je!==27||Ae===null||xe===null||(Je=oo(me,xe),Je!=null&&ln.push(v_(me,Je,Ae))),Ai)break;me=me.return}0<ln.length&&(Ne=new Be(Ne,jt,null,m,Ke),it.push({event:Ne,listeners:ln}))}}if((u&7)===0){e:{if(Ne=o==="mouseover"||o==="pointerover",Be=o==="mouseout"||o==="pointerout",Ne&&m!==Mh&&(jt=m.relatedTarget||m.fromElement)&&(Ns(jt)||jt[ea]))break e;if((Be||Ne)&&(Ne=Ke.window===Ke?Ke:(Ne=Ke.ownerDocument)?Ne.defaultView||Ne.parentWindow:window,Be?(jt=m.relatedTarget||m.toElement,Be=Ie,jt=jt?Ns(jt):null,jt!==null&&(Ai=a(jt),ln=jt.tag,jt!==Ai||ln!==5&&ln!==27&&ln!==6)&&(jt=null)):(Be=null,jt=Ie),Be!==jt)){if(ln=Rh,Je="onMouseLeave",xe="onMouseEnter",me="mouse",(o==="pointerout"||o==="pointerover")&&(ln=vl,Je="onPointerLeave",xe="onPointerEnter",me="pointer"),Ai=Be==null?Ne:va(Be),Ae=jt==null?Ne:va(jt),Ne=new ln(Je,me+"leave",Be,m,Ke),Ne.target=Ai,Ne.relatedTarget=Ae,Je=null,Ns(Ke)===Ie&&(ln=new ln(xe,me+"enter",jt,m,Ke),ln.target=Ae,ln.relatedTarget=Ai,Je=ln),Ai=Je,Be&&jt)t:{for(ln=PX,xe=Be,me=jt,Ae=0,Je=xe;Je;Je=ln(Je))Ae++;Je=0;for(var Qt=me;Qt;Qt=ln(Qt))Je++;for(;0<Ae-Je;)xe=ln(xe),Ae--;for(;0<Je-Ae;)me=ln(me),Je--;for(;Ae--;){if(xe===me||me!==null&&xe===me.alternate){ln=xe;break t}xe=ln(xe),me=ln(me)}ln=null}else ln=null;Be!==null&&mk(it,Ne,Be,ln,!1),jt!==null&&Ai!==null&&mk(it,Ai,jt,ln,!0)}}e:{if(Ne=Ie?va(Ie):window,Be=Ne.nodeName&&Ne.nodeName.toLowerCase(),Be==="select"||Be==="input"&&Ne.type==="file")var ai=m0;else if(p0(Ne))if(yl)ai=rS;else{ai=y0;var Gt=nS}else Be=Ne.nodeName,!Be||Be.toLowerCase()!=="input"||Ne.type!=="checkbox"&&Ne.type!=="radio"?Ie&&La(Ie.elementType)&&(ai=m0):ai=iS;if(ai&&(ai=ai(o,Ie))){Ag(it,ai,m,Ke);break e}Gt&&Gt(o,Ne,Ie),o==="focusout"&&Ie&&Ne.type==="number"&&Ie.memoizedProps.value!=null&&yi(Ne,"number",Ne.value)}switch(Gt=Ie?va(Ie):window,o){case"focusin":(p0(Gt)||Gt.contentEditable==="true")&&(_l=Gt,bl=Ie,Fh=null);break;case"focusout":Fh=bl=_l=null;break;case"mousedown":Mg=!0;break;case"contextmenu":case"mouseup":case"dragend":Mg=!1,zh(it,m,Ke);break;case"selectionchange":if(sS)break;case"keydown":case"keyup":zh(it,m,Ke)}var Nn;if(Vn)e:{switch(o){case"compositionstart":var Wn="onCompositionStart";break e;case"compositionend":Wn="onCompositionEnd";break e;case"compositionupdate":Wn="onCompositionUpdate";break e}Wn=void 0}else gf?ou(o,m)&&(Wn="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(Wn="onCompositionStart");Wn&&(Go&&m.locale!=="ko"&&(gf||Wn!=="onCompositionStart"?Wn==="onCompositionEnd"&&gf&&(Nn=Wu()):(ka=Ke,Ch="value"in ka?ka.value:ka.textContent,gf=!0)),Gt=a1(Ie,Wn),0<Gt.length&&(Wn=new lo(Wn,o,null,m,Ke),it.push({event:Wn,listeners:Gt}),Nn?Wn.data=Nn:(Nn=mf(m),Nn!==null&&(Wn.data=Nn)))),(Nn=Ua?eS(o,m):h0(o,m))&&(Wn=a1(Ie,"onBeforeInput"),0<Wn.length&&(Gt=new lo("onBeforeInput","beforeinput",null,m,Ke),it.push({event:Gt,listeners:Wn}),Gt.data=Nn)),qi(it,o,Ie,m,Ke)}dk(it,u)})}function v_(o,u,m){return{instance:o,listener:u,currentTarget:m}}function a1(o,u){for(var m=u+"Capture",y=[];o!==null;){var M=o,C=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||C===null||(M=oo(o,m),M!=null&&y.unshift(v_(o,M,C)),M=oo(o,u),M!=null&&y.push(v_(o,M,C))),o.tag===3)return y;o=o.return}return[]}function PX(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function mk(o,u,m,y,M){for(var C=u._reactName,G=[];m!==null&&m!==y;){var Q=m,ce=Q.alternate,Ie=Q.stateNode;if(Q=Q.tag,ce!==null&&ce===y)break;Q!==5&&Q!==26&&Q!==27||Ie===null||(ce=Ie,M?(Ie=oo(m,C),Ie!=null&&G.unshift(v_(m,Ie,ce))):M||(Ie=oo(m,C),Ie!=null&&G.push(v_(m,Ie,ce)))),m=m.return}G.length!==0&&o.push({event:u,listeners:G})}var NX=/\r\n?/g,OX=/\u0000|\uFFFD/g;function gk(o){return(typeof o=="string"?o:""+o).replace(NX,`
`).replace(OX,"")}function vk(o,u){return u=gk(u),gk(o)===u}function Ti(o,u,m,y,M,C){switch(m){case"children":typeof y=="string"?u==="body"||u==="textarea"&&y===""||di(o,y):(typeof y=="number"||typeof y=="bigint")&&u!=="body"&&di(o,""+y);break;case"className":Vt(o,"class",y);break;case"tabIndex":Vt(o,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Vt(o,m,y);break;case"style":fl(o,y,C);break;case"data":if(u!=="object"){Vt(o,"data",y);break}case"src":case"href":if(y===""&&(u!=="a"||m!=="href")){o.removeAttribute(m);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(m);break}y=uf(""+y),o.setAttribute(m,y);break;case"action":case"formAction":if(typeof y=="function"){o.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(m==="formAction"?(u!=="input"&&Ti(o,u,"name",M.name,M,null),Ti(o,u,"formEncType",M.formEncType,M,null),Ti(o,u,"formMethod",M.formMethod,M,null),Ti(o,u,"formTarget",M.formTarget,M,null)):(Ti(o,u,"encType",M.encType,M,null),Ti(o,u,"method",M.method,M,null),Ti(o,u,"target",M.target,M,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(m);break}y=uf(""+y),o.setAttribute(m,y);break;case"onClick":y!=null&&(o.onclick=zo);break;case"onScroll":y!=null&&Hn("scroll",o);break;case"onScrollEnd":y!=null&&Hn("scrollend",o);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(m=y.__html,m!=null){if(M.children!=null)throw Error(i(60));o.innerHTML=m}}break;case"multiple":o.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":o.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){o.removeAttribute("xlink:href");break}m=uf(""+y),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(m,""+y):o.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(m,""):o.removeAttribute(m);break;case"capture":case"download":y===!0?o.setAttribute(m,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(m,y):o.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?o.setAttribute(m,y):o.removeAttribute(m);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?o.removeAttribute(m):o.setAttribute(m,y);break;case"popover":Hn("beforetoggle",o),Hn("toggle",o),Ut(o,"popover",y);break;case"xlinkActuate":It(o,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":It(o,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":It(o,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":It(o,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":It(o,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":It(o,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":It(o,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":It(o,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":It(o,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Ut(o,"is",y);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=_p.get(m)||m,Ut(o,m,y))}}function EC(o,u,m,y,M,C){switch(m){case"style":fl(o,y,C);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(m=y.__html,m!=null){if(M.children!=null)throw Error(i(60));o.innerHTML=m}}break;case"children":typeof y=="string"?di(o,y):(typeof y=="number"||typeof y=="bigint")&&di(o,""+y);break;case"onScroll":y!=null&&Hn("scroll",o);break;case"onScrollEnd":y!=null&&Hn("scrollend",o);break;case"onClick":y!=null&&(o.onclick=zo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!De.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(M=m.endsWith("Capture"),u=m.slice(2,M?m.length-7:void 0),C=o[Fi]||null,C=C!=null?C[m]:null,typeof C=="function"&&o.removeEventListener(u,C,M),typeof y=="function")){typeof C!="function"&&C!==null&&(m in o?o[m]=null:o.hasAttribute(m)&&o.removeAttribute(m)),o.addEventListener(u,y,M);break e}m in o?o[m]=y:y===!0?o.setAttribute(m,""):Ut(o,m,y)}}}function qa(o,u,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Hn("error",o),Hn("load",o);var y=!1,M=!1,C;for(C in m)if(m.hasOwnProperty(C)){var G=m[C];if(G!=null)switch(C){case"src":y=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:Ti(o,u,C,G,m,null)}}M&&Ti(o,u,"srcSet",m.srcSet,m,null),y&&Ti(o,u,"src",m.src,m,null);return;case"input":Hn("invalid",o);var Q=C=G=M=null,ce=null,Ie=null;for(y in m)if(m.hasOwnProperty(y)){var Ke=m[y];if(Ke!=null)switch(y){case"name":M=Ke;break;case"type":G=Ke;break;case"checked":ce=Ke;break;case"defaultChecked":Ie=Ke;break;case"value":C=Ke;break;case"defaultValue":Q=Ke;break;case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(i(137,u));break;default:Ti(o,u,y,Ke,m,null)}}Os(o,C,Q,ce,Ie,G,M,!1);return;case"select":Hn("invalid",o),y=G=C=null;for(M in m)if(m.hasOwnProperty(M)&&(Q=m[M],Q!=null))switch(M){case"value":C=Q;break;case"defaultValue":G=Q;break;case"multiple":y=Q;default:Ti(o,u,M,Q,m,null)}u=C,m=G,o.multiple=!!y,u!=null?ta(o,!!y,u,!1):m!=null&&ta(o,!!y,m,!0);return;case"textarea":Hn("invalid",o),C=M=y=null;for(G in m)if(m.hasOwnProperty(G)&&(Q=m[G],Q!=null))switch(G){case"value":y=Q;break;case"defaultValue":M=Q;break;case"children":C=Q;break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(91));break;default:Ti(o,u,G,Q,m,null)}Ii(o,y,M,C);return;case"option":for(ce in m)if(m.hasOwnProperty(ce)&&(y=m[ce],y!=null))switch(ce){case"selected":o.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Ti(o,u,ce,y,m,null)}return;case"dialog":Hn("beforetoggle",o),Hn("toggle",o),Hn("cancel",o),Hn("close",o);break;case"iframe":case"object":Hn("load",o);break;case"video":case"audio":for(y=0;y<Mo.length;y++)Hn(Mo[y],o);break;case"image":Hn("error",o),Hn("load",o);break;case"details":Hn("toggle",o);break;case"embed":case"source":case"link":Hn("error",o),Hn("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ie in m)if(m.hasOwnProperty(Ie)&&(y=m[Ie],y!=null))switch(Ie){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:Ti(o,u,Ie,y,m,null)}return;default:if(La(u)){for(Ke in m)m.hasOwnProperty(Ke)&&(y=m[Ke],y!==void 0&&EC(o,u,Ke,y,m,void 0));return}}for(Q in m)m.hasOwnProperty(Q)&&(y=m[Q],y!=null&&Ti(o,u,Q,y,m,null))}function DX(o,u,m,y){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,C=null,G=null,Q=null,ce=null,Ie=null,Ke=null;for(Be in m){var it=m[Be];if(m.hasOwnProperty(Be)&&it!=null)switch(Be){case"checked":break;case"value":break;case"defaultValue":ce=it;default:y.hasOwnProperty(Be)||Ti(o,u,Be,null,y,it)}}for(var Ne in y){var Be=y[Ne];if(it=m[Ne],y.hasOwnProperty(Ne)&&(Be!=null||it!=null))switch(Ne){case"type":C=Be;break;case"name":M=Be;break;case"checked":Ie=Be;break;case"defaultChecked":Ke=Be;break;case"value":G=Be;break;case"defaultValue":Q=Be;break;case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(i(137,u));break;default:Be!==it&&Ti(o,u,Ne,Be,y,it)}}zi(o,G,Q,ce,Ie,Ke,C,M);return;case"select":Be=G=Q=Ne=null;for(C in m)if(ce=m[C],m.hasOwnProperty(C)&&ce!=null)switch(C){case"value":break;case"multiple":Be=ce;default:y.hasOwnProperty(C)||Ti(o,u,C,null,y,ce)}for(M in y)if(C=y[M],ce=m[M],y.hasOwnProperty(M)&&(C!=null||ce!=null))switch(M){case"value":Ne=C;break;case"defaultValue":Q=C;break;case"multiple":G=C;default:C!==ce&&Ti(o,u,M,C,y,ce)}u=Q,m=G,y=Be,Ne!=null?ta(o,!!m,Ne,!1):!!y!=!!m&&(u!=null?ta(o,!!m,u,!0):ta(o,!!m,m?[]:"",!1));return;case"textarea":Be=Ne=null;for(Q in m)if(M=m[Q],m.hasOwnProperty(Q)&&M!=null&&!y.hasOwnProperty(Q))switch(Q){case"value":break;case"children":break;default:Ti(o,u,Q,null,y,M)}for(G in y)if(M=y[G],C=m[G],y.hasOwnProperty(G)&&(M!=null||C!=null))switch(G){case"value":Ne=M;break;case"defaultValue":Be=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:M!==C&&Ti(o,u,G,M,y,C)}Zn(o,Ne,Be);return;case"option":for(var jt in m)if(Ne=m[jt],m.hasOwnProperty(jt)&&Ne!=null&&!y.hasOwnProperty(jt))switch(jt){case"selected":o.selected=!1;break;default:Ti(o,u,jt,null,y,Ne)}for(ce in y)if(Ne=y[ce],Be=m[ce],y.hasOwnProperty(ce)&&Ne!==Be&&(Ne!=null||Be!=null))switch(ce){case"selected":o.selected=Ne&&typeof Ne!="function"&&typeof Ne!="symbol";break;default:Ti(o,u,ce,Ne,y,Be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ln in m)Ne=m[ln],m.hasOwnProperty(ln)&&Ne!=null&&!y.hasOwnProperty(ln)&&Ti(o,u,ln,null,y,Ne);for(Ie in y)if(Ne=y[Ie],Be=m[Ie],y.hasOwnProperty(Ie)&&Ne!==Be&&(Ne!=null||Be!=null))switch(Ie){case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(i(137,u));break;default:Ti(o,u,Ie,Ne,y,Be)}return;default:if(La(u)){for(var Ai in m)Ne=m[Ai],m.hasOwnProperty(Ai)&&Ne!==void 0&&!y.hasOwnProperty(Ai)&&EC(o,u,Ai,void 0,y,Ne);for(Ke in y)Ne=y[Ke],Be=m[Ke],!y.hasOwnProperty(Ke)||Ne===Be||Ne===void 0&&Be===void 0||EC(o,u,Ke,Ne,y,Be);return}}for(var xe in m)Ne=m[xe],m.hasOwnProperty(xe)&&Ne!=null&&!y.hasOwnProperty(xe)&&Ti(o,u,xe,null,y,Ne);for(it in y)Ne=y[it],Be=m[it],!y.hasOwnProperty(it)||Ne===Be||Ne==null&&Be==null||Ti(o,u,it,Ne,y,Be)}function yk(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function LX(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,m=performance.getEntriesByType("resource"),y=0;y<m.length;y++){var M=m[y],C=M.transferSize,G=M.initiatorType,Q=M.duration;if(C&&Q&&yk(G)){for(G=0,Q=M.responseEnd,y+=1;y<m.length;y++){var ce=m[y],Ie=ce.startTime;if(Ie>Q)break;var Ke=ce.transferSize,it=ce.initiatorType;Ke&&yk(it)&&(ce=ce.responseEnd,G+=Ke*(ce<Q?1:(Q-Ie)/(ce-Ie)))}if(--y,u+=8*(C+G)/(M.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var TC=null,AC=null;function s1(o){return o.nodeType===9?o:o.ownerDocument}function _k(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bk(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function MC(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var CC=null;function kX(){var o=window.event;return o&&o.type==="popstate"?o===CC?!1:(CC=o,!0):(CC=null,!1)}var xk=typeof setTimeout=="function"?setTimeout:void 0,UX=typeof clearTimeout=="function"?clearTimeout:void 0,Sk=typeof Promise=="function"?Promise:void 0,FX=typeof queueMicrotask=="function"?queueMicrotask:typeof Sk<"u"?function(o){return Sk.resolve(null).then(o).catch(zX)}:xk;function zX(o){setTimeout(function(){throw o})}function fd(o){return o==="head"}function wk(o,u){var m=u,y=0;do{var M=m.nextSibling;if(o.removeChild(m),M&&M.nodeType===8)if(m=M.data,m==="/$"||m==="/&"){if(y===0){o.removeChild(M),_v(u);return}y--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")y++;else if(m==="html")y_(o.ownerDocument.documentElement);else if(m==="head"){m=o.ownerDocument.head,y_(m);for(var C=m.firstChild;C;){var G=C.nextSibling,Q=C.nodeName;C[ga]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&C.rel.toLowerCase()==="stylesheet"||m.removeChild(C),C=G}}else m==="body"&&y_(o.ownerDocument.body);m=M}while(m);_v(u)}function Ek(o,u){var m=o;o=0;do{var y=m.nextSibling;if(m.nodeType===1?u?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(u?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),y&&y.nodeType===8)if(m=y.data,m==="/$"){if(o===0)break;o--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||o++;m=y}while(m)}function IC(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var m=u;switch(u=u.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":IC(m),ao(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}o.removeChild(m)}}function BX(o,u,m,y){for(;o.nodeType===1;){var M=m;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!y&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(y){if(!o[ga])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(C=o.getAttribute("rel"),C==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(C!==M.rel||o.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||o.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||o.getAttribute("title")!==(M.title==null?null:M.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(C=o.getAttribute("src"),(C!==(M.src==null?null:M.src)||o.getAttribute("type")!==(M.type==null?null:M.type)||o.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&C&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var C=M.name==null?null:""+M.name;if(M.type==="hidden"&&o.getAttribute("name")===C)return o}else return o;if(o=zl(o.nextSibling),o===null)break}return null}function VX(o,u,m){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!m||(o=zl(o.nextSibling),o===null))return null;return o}function Tk(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=zl(o.nextSibling),o===null))return null;return o}function RC(o){return o.data==="$?"||o.data==="$~"}function PC(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function jX(o,u){var m=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||m.readyState!=="loading")u();else{var y=function(){u(),m.removeEventListener("DOMContentLoaded",y)};m.addEventListener("DOMContentLoaded",y),o._reactRetry=y}}function zl(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var NC=null;function Ak(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var m=o.data;if(m==="/$"||m==="/&"){if(u===0)return zl(o.nextSibling);u--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||u++}o=o.nextSibling}return null}function Mk(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(u===0)return o;u--}else m!=="/$"&&m!=="/&"||u++}o=o.previousSibling}return null}function Ck(o,u,m){switch(u=s1(m),o){case"html":if(o=u.documentElement,!o)throw Error(i(452));return o;case"head":if(o=u.head,!o)throw Error(i(453));return o;case"body":if(o=u.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function y_(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);ao(o)}var Bl=new Map,Ik=new Set;function o1(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Bf=ie.d;ie.d={f:HX,r:GX,D:WX,C:qX,L:$X,m:XX,X:KX,S:YX,M:ZX};function HX(){var o=Bf.f(),u=Ko();return o||u}function GX(o){var u=Da(o);u!==null&&u.tag===5&&u.type==="form"?HS(u):Bf.r(o)}var gv=typeof document>"u"?null:document;function Rk(o,u,m){var y=gv;if(y&&typeof u=="string"&&u){var M=tn(u);M='link[rel="'+o+'"][href="'+M+'"]',typeof m=="string"&&(M+='[crossorigin="'+m+'"]'),Ik.has(M)||(Ik.add(M),o={rel:o,crossOrigin:m,href:u},y.querySelector(M)===null&&(u=y.createElement("link"),qa(u,"link",o),Z(u),y.head.appendChild(u)))}}function WX(o){Bf.D(o),Rk("dns-prefetch",o,null)}function qX(o,u){Bf.C(o,u),Rk("preconnect",o,u)}function $X(o,u,m){Bf.L(o,u,m);var y=gv;if(y&&o&&u){var M='link[rel="preload"][as="'+tn(u)+'"]';u==="image"&&m&&m.imageSrcSet?(M+='[imagesrcset="'+tn(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(M+='[imagesizes="'+tn(m.imageSizes)+'"]')):M+='[href="'+tn(o)+'"]';var C=M;switch(u){case"style":C=vv(o);break;case"script":C=yv(o)}Bl.has(C)||(o=g({rel:"preload",href:u==="image"&&m&&m.imageSrcSet?void 0:o,as:u},m),Bl.set(C,o),y.querySelector(M)!==null||u==="style"&&y.querySelector(__(C))||u==="script"&&y.querySelector(b_(C))||(u=y.createElement("link"),qa(u,"link",o),Z(u),y.head.appendChild(u)))}}function XX(o,u){Bf.m(o,u);var m=gv;if(m&&o){var y=u&&typeof u.as=="string"?u.as:"script",M='link[rel="modulepreload"][as="'+tn(y)+'"][href="'+tn(o)+'"]',C=M;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=yv(o)}if(!Bl.has(C)&&(o=g({rel:"modulepreload",href:o},u),Bl.set(C,o),m.querySelector(M)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(b_(C)))return}y=m.createElement("link"),qa(y,"link",o),Z(y),m.head.appendChild(y)}}}function YX(o,u,m){Bf.S(o,u,m);var y=gv;if(y&&o){var M=ss(y).hoistableStyles,C=vv(o);u=u||"default";var G=M.get(C);if(!G){var Q={loading:0,preload:null};if(G=y.querySelector(__(C)))Q.loading=5;else{o=g({rel:"stylesheet",href:o,"data-precedence":u},m),(m=Bl.get(C))&&OC(o,m);var ce=G=y.createElement("link");Z(ce),qa(ce,"link",o),ce._p=new Promise(function(Ie,Ke){ce.onload=Ie,ce.onerror=Ke}),ce.addEventListener("load",function(){Q.loading|=1}),ce.addEventListener("error",function(){Q.loading|=2}),Q.loading|=4,l1(G,u,y)}G={type:"stylesheet",instance:G,count:1,state:Q},M.set(C,G)}}}function KX(o,u){Bf.X(o,u);var m=gv;if(m&&o){var y=ss(m).hoistableScripts,M=yv(o),C=y.get(M);C||(C=m.querySelector(b_(M)),C||(o=g({src:o,async:!0},u),(u=Bl.get(M))&&DC(o,u),C=m.createElement("script"),Z(C),qa(C,"link",o),m.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},y.set(M,C))}}function ZX(o,u){Bf.M(o,u);var m=gv;if(m&&o){var y=ss(m).hoistableScripts,M=yv(o),C=y.get(M);C||(C=m.querySelector(b_(M)),C||(o=g({src:o,async:!0,type:"module"},u),(u=Bl.get(M))&&DC(o,u),C=m.createElement("script"),Z(C),qa(C,"link",o),m.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},y.set(M,C))}}function Pk(o,u,m,y){var M=(M=be.current)?o1(M):null;if(!M)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(u=vv(m.href),m=ss(M).hoistableStyles,y=m.get(u),y||(y={type:"style",instance:null,count:0,state:null},m.set(u,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){o=vv(m.href);var C=ss(M).hoistableStyles,G=C.get(o);if(G||(M=M.ownerDocument||M,G={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(o,G),(C=M.querySelector(__(o)))&&!C._p&&(G.instance=C,G.state.loading=5),Bl.has(o)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Bl.set(o,m),C||QX(M,o,m,G.state))),u&&y===null)throw Error(i(528,""));return G}if(u&&y!==null)throw Error(i(529,""));return null;case"script":return u=m.async,m=m.src,typeof m=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=yv(m),m=ss(M).hoistableScripts,y=m.get(u),y||(y={type:"script",instance:null,count:0,state:null},m.set(u,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function vv(o){return'href="'+tn(o)+'"'}function __(o){return'link[rel="stylesheet"]['+o+"]"}function Nk(o){return g({},o,{"data-precedence":o.precedence,precedence:null})}function QX(o,u,m,y){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?y.loading=1:(u=o.createElement("link"),y.preload=u,u.addEventListener("load",function(){return y.loading|=1}),u.addEventListener("error",function(){return y.loading|=2}),qa(u,"link",m),Z(u),o.head.appendChild(u))}function yv(o){return'[src="'+tn(o)+'"]'}function b_(o){return"script[async]"+o}function Ok(o,u,m){if(u.count++,u.instance===null)switch(u.type){case"style":var y=o.querySelector('style[data-href~="'+tn(m.href)+'"]');if(y)return u.instance=y,Z(y),y;var M=g({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return y=(o.ownerDocument||o).createElement("style"),Z(y),qa(y,"style",M),l1(y,m.precedence,o),u.instance=y;case"stylesheet":M=vv(m.href);var C=o.querySelector(__(M));if(C)return u.state.loading|=4,u.instance=C,Z(C),C;y=Nk(m),(M=Bl.get(M))&&OC(y,M),C=(o.ownerDocument||o).createElement("link"),Z(C);var G=C;return G._p=new Promise(function(Q,ce){G.onload=Q,G.onerror=ce}),qa(C,"link",y),u.state.loading|=4,l1(C,m.precedence,o),u.instance=C;case"script":return C=yv(m.src),(M=o.querySelector(b_(C)))?(u.instance=M,Z(M),M):(y=m,(M=Bl.get(C))&&(y=g({},m),DC(y,M)),o=o.ownerDocument||o,M=o.createElement("script"),Z(M),qa(M,"link",y),o.head.appendChild(M),u.instance=M);case"void":return null;default:throw Error(i(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(y=u.instance,u.state.loading|=4,l1(y,m.precedence,o));return u.instance}function l1(o,u,m){for(var y=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=y.length?y[y.length-1]:null,C=M,G=0;G<y.length;G++){var Q=y[G];if(Q.dataset.precedence===u)C=Q;else if(C!==M)break}C?C.parentNode.insertBefore(o,C.nextSibling):(u=m.nodeType===9?m.head:m,u.insertBefore(o,u.firstChild))}function OC(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function DC(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var u1=null;function Dk(o,u,m){if(u1===null){var y=new Map,M=u1=new Map;M.set(m,y)}else M=u1,y=M.get(m),y||(y=new Map,M.set(m,y));if(y.has(o))return y;for(y.set(o,null),m=m.getElementsByTagName(o),M=0;M<m.length;M++){var C=m[M];if(!(C[ga]||C[xi]||o==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var G=C.getAttribute(u)||"";G=o+G;var Q=y.get(G);Q?Q.push(C):y.set(G,[C])}}return y}function Lk(o,u,m){o=o.ownerDocument||o,o.head.insertBefore(m,u==="title"?o.querySelector("head > title"):null)}function JX(o,u,m){if(m===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function kk(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function eY(o,u,m,y){if(m.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var M=vv(y.href),C=u.querySelector(__(M));if(C){u=C._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=c1.bind(o),u.then(o,o)),m.state.loading|=4,m.instance=C,Z(C);return}C=u.ownerDocument||u,y=Nk(y),(M=Bl.get(M))&&OC(y,M),C=C.createElement("link"),Z(C);var G=C;G._p=new Promise(function(Q,ce){G.onload=Q,G.onerror=ce}),qa(C,"link",y),m.instance=C}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(m,u),(u=m.state.preload)&&(m.state.loading&3)===0&&(o.count++,m=c1.bind(o),u.addEventListener("load",m),u.addEventListener("error",m))}}var LC=0;function tY(o,u){return o.stylesheets&&o.count===0&&h1(o,o.stylesheets),0<o.count||0<o.imgCount?function(m){var y=setTimeout(function(){if(o.stylesheets&&h1(o,o.stylesheets),o.unsuspend){var C=o.unsuspend;o.unsuspend=null,C()}},6e4+u);0<o.imgBytes&&LC===0&&(LC=62500*LX());var M=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&h1(o,o.stylesheets),o.unsuspend)){var C=o.unsuspend;o.unsuspend=null,C()}},(o.imgBytes>LC?50:800)+u);return o.unsuspend=m,function(){o.unsuspend=null,clearTimeout(y),clearTimeout(M)}}:null}function c1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)h1(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var f1=null;function h1(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,f1=new Map,u.forEach(nY,o),f1=null,c1.call(o))}function nY(o,u){if(!(u.state.loading&4)){var m=f1.get(o);if(m)var y=m.get(null);else{m=new Map,f1.set(o,m);for(var M=o.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<M.length;C++){var G=M[C];(G.nodeName==="LINK"||G.getAttribute("media")!=="not all")&&(m.set(G.dataset.precedence,G),y=G)}y&&m.set(null,y)}M=u.instance,G=M.getAttribute("data-precedence"),C=m.get(G)||y,C===y&&m.set(null,M),m.set(G,M),this.count++,y=c1.bind(this),M.addEventListener("load",y),M.addEventListener("error",y),C?C.parentNode.insertBefore(M,C.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(M,o.firstChild)),u.state.loading|=4}}var x_={$$typeof:R,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function iY(o,u,m,y,M,C,G,Q,ce){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jt(0),this.hiddenUpdates=Jt(null),this.identifierPrefix=y,this.onUncaughtError=M,this.onCaughtError=C,this.onRecoverableError=G,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ce,this.incompleteTransitions=new Map}function Uk(o,u,m,y,M,C,G,Q,ce,Ie,Ke,it){return o=new iY(o,u,m,G,ce,Ie,Ke,it,Q),u=1,C===!0&&(u|=24),C=Bi(3,null,null,u),o.current=C,C.stateNode=o,u=T0(),u.refCount++,o.pooledCache=u,u.refCount++,C.memoizedState={element:y,isDehydrated:m,cache:u},Up(C),o}function Fk(o){return o?(o=Ju,o):Ju}function zk(o,u,m,y,M,C){M=Fk(M),y.context===null?y.context=M:y.pendingContext=M,y=mu(u),y.payload={element:m},C=C===void 0?null:C,C!==null&&(y.callback=C),m=oc(o,y,u),m!==null&&(In(m,o,u),lc(m,o,u))}function Bk(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<u?m:u}}function kC(o,u){Bk(o,u),(o=o.alternate)&&Bk(o,u)}function Vk(o){if(o.tag===13||o.tag===31){var u=za(o,67108864);u!==null&&In(u,o,67108864),kC(o,67108864)}}function jk(o){if(o.tag===13||o.tag===31){var u=Gs();u=Jr(u);var m=za(o,u);m!==null&&In(m,o,u),kC(o,u)}}var d1=!0;function rY(o,u,m,y){var M=ee.T;ee.T=null;var C=ie.p;try{ie.p=2,UC(o,u,m,y)}finally{ie.p=C,ee.T=M}}function aY(o,u,m,y){var M=ee.T;ee.T=null;var C=ie.p;try{ie.p=8,UC(o,u,m,y)}finally{ie.p=C,ee.T=M}}function UC(o,u,m,y){if(d1){var M=FC(y);if(M===null)wC(o,u,y,p1,m),Gk(o,y);else if(oY(M,o,u,m,y))y.stopPropagation();else if(Gk(o,y),u&4&&-1<sY.indexOf(o)){for(;M!==null;){var C=Da(M);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var G=Xe(C.pendingLanes);if(G!==0){var Q=C;for(Q.pendingLanes|=2,Q.entangledLanes|=2;G;){var ce=1<<31-Y(G);Q.entanglements[1]|=ce,G&=~ce}mt(C),(Wt&6)===0&&(hr=X()+500,Nt(0))}}break;case 31:case 13:Q=za(C,2),Q!==null&&In(Q,C,2),Ko(),kC(C,2)}if(C=FC(y),C===null&&wC(o,u,y,p1,m),C===M)break;M=C}M!==null&&y.stopPropagation()}else wC(o,u,y,null,m)}}function FC(o){return o=Ds(o),zC(o)}var p1=null;function zC(o){if(p1=null,o=Ns(o),o!==null){var u=a(o);if(u===null)o=null;else{var m=u.tag;if(m===13){if(o=s(u),o!==null)return o;o=null}else if(m===31){if(o=l(u),o!==null)return o;o=null}else if(m===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return p1=o,null}function Hk(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(de()){case Le:return 2;case Ze:return 8;case Oe:case Tt:return 32;case gt:return 268435456;default:return 32}default:return 32}}var BC=!1,hd=null,dd=null,pd=null,S_=new Map,w_=new Map,md=[],sY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gk(o,u){switch(o){case"focusin":case"focusout":hd=null;break;case"dragenter":case"dragleave":dd=null;break;case"mouseover":case"mouseout":pd=null;break;case"pointerover":case"pointerout":S_.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":w_.delete(u.pointerId)}}function E_(o,u,m,y,M,C){return o===null||o.nativeEvent!==C?(o={blockedOn:u,domEventName:m,eventSystemFlags:y,nativeEvent:C,targetContainers:[M]},u!==null&&(u=Da(u),u!==null&&Vk(u)),o):(o.eventSystemFlags|=y,u=o.targetContainers,M!==null&&u.indexOf(M)===-1&&u.push(M),o)}function oY(o,u,m,y,M){switch(u){case"focusin":return hd=E_(hd,o,u,m,y,M),!0;case"dragenter":return dd=E_(dd,o,u,m,y,M),!0;case"mouseover":return pd=E_(pd,o,u,m,y,M),!0;case"pointerover":var C=M.pointerId;return S_.set(C,E_(S_.get(C)||null,o,u,m,y,M)),!0;case"gotpointercapture":return C=M.pointerId,w_.set(C,E_(w_.get(C)||null,o,u,m,y,M)),!0}return!1}function Wk(o){var u=Ns(o.target);if(u!==null){var m=a(u);if(m!==null){if(u=m.tag,u===13){if(u=s(m),u!==null){o.blockedOn=u,Ci(o.priority,function(){jk(m)});return}}else if(u===31){if(u=l(m),u!==null){o.blockedOn=u,Ci(o.priority,function(){jk(m)});return}}else if(u===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function m1(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var m=FC(o.nativeEvent);if(m===null){m=o.nativeEvent;var y=new m.constructor(m.type,m);Mh=y,m.target.dispatchEvent(y),Mh=null}else return u=Da(m),u!==null&&Vk(u),o.blockedOn=m,!1;u.shift()}return!0}function qk(o,u,m){m1(o)&&m.delete(u)}function lY(){BC=!1,hd!==null&&m1(hd)&&(hd=null),dd!==null&&m1(dd)&&(dd=null),pd!==null&&m1(pd)&&(pd=null),S_.forEach(qk),w_.forEach(qk)}function g1(o,u){o.blockedOn===u&&(o.blockedOn=null,BC||(BC=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,lY)))}var v1=null;function $k(o){v1!==o&&(v1=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){v1===o&&(v1=null);for(var u=0;u<o.length;u+=3){var m=o[u],y=o[u+1],M=o[u+2];if(typeof y!="function"){if(zC(y||m)===null)continue;break}var C=Da(m);C!==null&&(o.splice(u,3),u-=3,Q0(C,{pending:!0,data:M,method:m.method,action:y},y,M))}}))}function _v(o){function u(ce){return g1(ce,o)}hd!==null&&g1(hd,o),dd!==null&&g1(dd,o),pd!==null&&g1(pd,o),S_.forEach(u),w_.forEach(u);for(var m=0;m<md.length;m++){var y=md[m];y.blockedOn===o&&(y.blockedOn=null)}for(;0<md.length&&(m=md[0],m.blockedOn===null);)Wk(m),m.blockedOn===null&&md.shift();if(m=(o.ownerDocument||o).$$reactFormReplay,m!=null)for(y=0;y<m.length;y+=3){var M=m[y],C=m[y+1],G=M[Fi]||null;if(typeof C=="function")G||$k(m);else if(G){var Q=null;if(C&&C.hasAttribute("formAction")){if(M=C,G=C[Fi]||null)Q=G.formAction;else if(zC(M)!==null)continue}else Q=G.action;typeof Q=="function"?m[y+1]=Q:(m.splice(y,3),y-=3),$k(m)}}}function Xk(){function o(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(G){return M=G})},focusReset:"manual",scroll:"manual"})}function u(){M!==null&&(M(),M=null),y||setTimeout(m,20)}function m(){if(!y&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var y=!1,M=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(m,100),function(){y=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),M!==null&&(M(),M=null)}}}function VC(o){this._internalRoot=o}y1.prototype.render=VC.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(i(409));var m=u.current,y=Gs();zk(m,y,o,u,null,null)},y1.prototype.unmount=VC.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;zk(o.current,2,null,o,null,null),Ko(),u[ea]=null}};function y1(o){this._internalRoot=o}y1.prototype.unstable_scheduleHydration=function(o){if(o){var u=tu();o={blockedOn:null,target:o,priority:u};for(var m=0;m<md.length&&u!==0&&u<md[m].priority;m++);md.splice(m,0,o),m===0&&Wk(o)}};var Yk=e.version;if(Yk!=="19.2.4")throw Error(i(527,Yk,"19.2.4"));ie.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=f(u),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var uY={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_1.isDisabled&&_1.supportsFiber)try{nt=_1.inject(uY),ot=_1}catch{}}return A_.createRoot=function(o,u){if(!r(o))throw Error(i(299));var m=!1,y="",M=KS,C=r_,G=a_;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(M=u.onUncaughtError),u.onCaughtError!==void 0&&(C=u.onCaughtError),u.onRecoverableError!==void 0&&(G=u.onRecoverableError)),u=Uk(o,1,!1,null,null,m,y,null,M,C,G,Xk),o[ea]=u.current,SC(o),new VC(u)},A_.hydrateRoot=function(o,u,m){if(!r(o))throw Error(i(299));var y=!1,M="",C=KS,G=r_,Q=a_,ce=null;return m!=null&&(m.unstable_strictMode===!0&&(y=!0),m.identifierPrefix!==void 0&&(M=m.identifierPrefix),m.onUncaughtError!==void 0&&(C=m.onUncaughtError),m.onCaughtError!==void 0&&(G=m.onCaughtError),m.onRecoverableError!==void 0&&(Q=m.onRecoverableError),m.formState!==void 0&&(ce=m.formState)),u=Uk(o,1,!0,u,m??null,y,M,ce,C,G,Q,Xk),u.context=Fk(null),m=u.current,y=Gs(),y=Jr(y),M=mu(y),M.callback=null,oc(m,M,y),m=y,u.current.lanes=m,ii(u,m),mt(u),o[ea]=u.current,SC(o),new y1(u)},A_.version="19.2.4",A_}var aU;function bY(){if(aU)return WC.exports;aU=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),WC.exports=_Y(),WC.exports}var xY=bY();const SY=Vu(xY);var E6=w6();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tb(){return Tb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Tb.apply(this,arguments)}var Ud;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ud||(Ud={}));const sU="popstate";function wY(n){n===void 0&&(n={});function e(i,r){let{pathname:a,search:s,hash:l}=i.location;return jP("",{pathname:a,search:s,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:sE(r)}return TY(e,t,null,n)}function Yr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function FO(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function EY(){return Math.random().toString(36).substr(2,8)}function oU(n,e){return{usr:n.state,key:n.key,idx:e}}function jP(n,e,t,i){return t===void 0&&(t=null),Tb({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Gy(e):e,{state:t,key:e&&e.key||i||EY()})}function sE(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Gy(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function TY(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:a=!1}=i,s=r.history,l=Ud.Pop,c=null,f=p();f==null&&(f=0,s.replaceState(Tb({},s.state,{idx:f}),""));function p(){return(s.state||{idx:null}).idx}function g(){l=Ud.Pop;let S=p(),w=S==null?null:S-f;f=S,c&&c({action:l,location:T.location,delta:w})}function v(S,w){l=Ud.Push;let I=jP(T.location,S,w);f=p()+1;let R=oU(I,f),D=T.createHref(I);try{s.pushState(R,"",D)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;r.location.assign(D)}a&&c&&c({action:l,location:T.location,delta:1})}function _(S,w){l=Ud.Replace;let I=jP(T.location,S,w);f=p();let R=oU(I,f),D=T.createHref(I);s.replaceState(R,"",D),a&&c&&c({action:l,location:T.location,delta:0})}function x(S){let w=r.location.origin!=="null"?r.location.origin:r.location.href,I=typeof S=="string"?S:sE(S);return I=I.replace(/ $/,"%20"),Yr(w,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,w)}let T={get action(){return l},get location(){return n(r,s)},listen(S){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(sU,g),c=S,()=>{r.removeEventListener(sU,g),c=null}},createHref(S){return e(r,S)},createURL:x,encodeLocation(S){let w=x(S);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:v,replace:_,go(S){return s.go(S)}};return T}var lU;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(lU||(lU={}));function AY(n,e,t){return t===void 0&&(t="/"),MY(n,e,t)}function MY(n,e,t,i){let r=typeof e=="string"?Gy(e):e,a=zO(r.pathname||"/",t);if(a==null)return null;let s=T6(n);CY(s);let l=null;for(let c=0;l==null&&c<s.length;++c){let f=BY(a);l=UY(s[c],f)}return l}function T6(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(a,s,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};c.relativePath.startsWith("/")&&(Yr(c.relativePath.startsWith(i),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(i.length));let f=Hd([i,c.relativePath]),p=t.concat(c);a.children&&a.children.length>0&&(Yr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),T6(a.children,e,p,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:LY(f,a.index),routesMeta:p})};return n.forEach((a,s)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))r(a,s);else for(let c of A6(a.path))r(a,s,c)}),e}function A6(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let s=A6(i.join("/")),l=[];return l.push(...s.map(c=>c===""?a:[a,c].join("/"))),r&&l.push(...s),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function CY(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:kY(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const IY=/^:[\w-]+$/,RY=3,PY=2,NY=1,OY=10,DY=-2,uU=n=>n==="*";function LY(n,e){let t=n.split("/"),i=t.length;return t.some(uU)&&(i+=DY),e&&(i+=PY),t.filter(r=>!uU(r)).reduce((r,a)=>r+(IY.test(a)?RY:a===""?NY:OY),i)}function kY(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function UY(n,e,t){let{routesMeta:i}=n,r={},a="/",s=[];for(let l=0;l<i.length;++l){let c=i[l],f=l===i.length-1,p=a==="/"?e:e.slice(a.length)||"/",g=FY({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},p),v=c.route;if(!g)return null;Object.assign(r,g.params),s.push({params:r,pathname:Hd([a,g.pathname]),pathnameBase:WY(Hd([a,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(a=Hd([a,g.pathnameBase]))}return s}function FY(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=zY(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let a=r[0],s=a.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((f,p,g)=>{let{paramName:v,isOptional:_}=p;if(v==="*"){let T=l[g]||"";s=a.slice(0,a.length-T.length).replace(/(.)\/+$/,"$1")}const x=l[g];return _&&!x?f[v]=void 0:f[v]=(x||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:s,pattern:n}}function zY(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),FO(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,c)=>(i.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function BY(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return FO(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function zO(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}const VY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jY=n=>VY.test(n);function HY(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Gy(n):n,a;if(t)if(jY(t))a=t;else{if(t.includes("//")){let s=t;t=t.replace(/\/\/+/g,"/"),FO(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+t))}t.startsWith("/")?a=cU(t.substring(1),"/"):a=cU(t,e)}else a=e;return{pathname:a,search:qY(i),hash:$Y(r)}}function cU(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function YC(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GY(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function M6(n,e){let t=GY(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function C6(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=Gy(n):(r=Tb({},n),Yr(!r.pathname||!r.pathname.includes("?"),YC("?","pathname","search",r)),Yr(!r.pathname||!r.pathname.includes("#"),YC("#","pathname","hash",r)),Yr(!r.search||!r.search.includes("#"),YC("#","search","hash",r)));let a=n===""||r.pathname==="",s=a?"/":r.pathname,l;if(s==null)l=t;else{let g=e.length-1;if(!i&&s.startsWith("..")){let v=s.split("/");for(;v[0]==="..";)v.shift(),g-=1;r.pathname=v.join("/")}l=g>=0?e[g]:"/"}let c=HY(r,l),f=s&&s!=="/"&&s.endsWith("/"),p=(a||s===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(f||p)&&(c.pathname+="/"),c}const Hd=n=>n.join("/").replace(/\/\/+/g,"/"),WY=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),qY=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,$Y=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function XY(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const I6=["post","put","patch","delete"];new Set(I6);const YY=["get",...I6];new Set(YY);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ab(){return Ab=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ab.apply(this,arguments)}const BO=H.createContext(null),KY=H.createContext(null),pg=H.createContext(null),gA=H.createContext(null),mg=H.createContext({outlet:null,matches:[],isDataRoute:!1}),R6=H.createContext(null);function ZY(n,e){let{relative:t}=e===void 0?{}:e;vx()||Yr(!1);let{basename:i,navigator:r}=H.useContext(pg),{hash:a,pathname:s,search:l}=O6(n,{relative:t}),c=s;return i!=="/"&&(c=s==="/"?i:Hd([i,s])),r.createHref({pathname:c,search:l,hash:a})}function vx(){return H.useContext(gA)!=null}function vA(){return vx()||Yr(!1),H.useContext(gA).location}function P6(n){H.useContext(pg).static||H.useLayoutEffect(n)}function N6(){let{isDataRoute:n}=H.useContext(mg);return n?cK():QY()}function QY(){vx()||Yr(!1);let n=H.useContext(BO),{basename:e,future:t,navigator:i}=H.useContext(pg),{matches:r}=H.useContext(mg),{pathname:a}=vA(),s=JSON.stringify(M6(r,t.v7_relativeSplatPath)),l=H.useRef(!1);return P6(()=>{l.current=!0}),H.useCallback(function(f,p){if(p===void 0&&(p={}),!l.current)return;if(typeof f=="number"){i.go(f);return}let g=C6(f,JSON.parse(s),a,p.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Hd([e,g.pathname])),(p.replace?i.replace:i.push)(g,p.state,p)},[e,i,s,a,n])}function O6(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=H.useContext(pg),{matches:r}=H.useContext(mg),{pathname:a}=vA(),s=JSON.stringify(M6(r,i.v7_relativeSplatPath));return H.useMemo(()=>C6(n,JSON.parse(s),a,t==="path"),[n,s,a,t])}function JY(n,e){return eK(n,e)}function eK(n,e,t,i){vx()||Yr(!1);let{navigator:r}=H.useContext(pg),{matches:a}=H.useContext(mg),s=a[a.length-1],l=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let f=vA(),p;if(e){var g;let S=typeof e=="string"?Gy(e):e;c==="/"||(g=S.pathname)!=null&&g.startsWith(c)||Yr(!1),p=S}else p=f;let v=p.pathname||"/",_=v;if(c!=="/"){let S=c.replace(/^\//,"").split("/");_="/"+v.replace(/^\//,"").split("/").slice(S.length).join("/")}let x=AY(n,{pathname:_}),T=aK(x&&x.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:Hd([c,r.encodeLocation?r.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Hd([c,r.encodeLocation?r.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,t,i);return e&&T?H.createElement(gA.Provider,{value:{location:Ab({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Ud.Pop}},T):T}function tK(){let n=uK(),e=XY(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:r},t):null,null)}const nK=H.createElement(tK,null);class iK extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?H.createElement(mg.Provider,{value:this.props.routeContext},H.createElement(R6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rK(n){let{routeContext:e,match:t,children:i}=n,r=H.useContext(BO);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),H.createElement(mg.Provider,{value:e},i)}function aK(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=i)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,l=(r=t)==null?void 0:r.errors;if(l!=null){let p=s.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);p>=0||Yr(!1),s=s.slice(0,Math.min(s.length,p+1))}let c=!1,f=-1;if(t&&i&&i.v7_partialHydration)for(let p=0;p<s.length;p++){let g=s[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=p),g.route.id){let{loaderData:v,errors:_}=t,x=g.route.loader&&v[g.route.id]===void 0&&(!_||_[g.route.id]===void 0);if(g.route.lazy||x){c=!0,f>=0?s=s.slice(0,f+1):s=[s[0]];break}}}return s.reduceRight((p,g,v)=>{let _,x=!1,T=null,S=null;t&&(_=l&&g.route.id?l[g.route.id]:void 0,T=g.route.errorElement||nK,c&&(f<0&&v===0?(fK("route-fallback"),x=!0,S=null):f===v&&(x=!0,S=g.route.hydrateFallbackElement||null)));let w=e.concat(s.slice(0,v+1)),I=()=>{let R;return _?R=T:x?R=S:g.route.Component?R=H.createElement(g.route.Component,null):g.route.element?R=g.route.element:R=p,H.createElement(rK,{match:g,routeContext:{outlet:p,matches:w,isDataRoute:t!=null},children:R})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?H.createElement(iK,{location:t.location,revalidation:t.revalidation,component:T,error:_,children:I(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):I()},null)}var D6=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(D6||{}),L6=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(L6||{});function sK(n){let e=H.useContext(BO);return e||Yr(!1),e}function oK(n){let e=H.useContext(KY);return e||Yr(!1),e}function lK(n){let e=H.useContext(mg);return e||Yr(!1),e}function k6(n){let e=lK(),t=e.matches[e.matches.length-1];return t.route.id||Yr(!1),t.route.id}function uK(){var n;let e=H.useContext(R6),t=oK(),i=k6();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function cK(){let{router:n}=sK(D6.UseNavigateStable),e=k6(L6.UseNavigateStable),t=H.useRef(!1);return P6(()=>{t.current=!0}),H.useCallback(function(r,a){a===void 0&&(a={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,Ab({fromRouteId:e},a)))},[n,e])}const fU={};function fK(n,e,t){fU[n]||(fU[n]=!0)}function hK(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Md(n){Yr(!1)}function dK(n){let{basename:e="/",children:t=null,location:i,navigationType:r=Ud.Pop,navigator:a,static:s=!1,future:l}=n;vx()&&Yr(!1);let c=e.replace(/^\/*/,"/"),f=H.useMemo(()=>({basename:c,navigator:a,static:s,future:Ab({v7_relativeSplatPath:!1},l)}),[c,l,a,s]);typeof i=="string"&&(i=Gy(i));let{pathname:p="/",search:g="",hash:v="",state:_=null,key:x="default"}=i,T=H.useMemo(()=>{let S=zO(p,c);return S==null?null:{location:{pathname:S,search:g,hash:v,state:_,key:x},navigationType:r}},[c,p,g,v,_,x,r]);return T==null?null:H.createElement(pg.Provider,{value:f},H.createElement(gA.Provider,{children:t,value:T}))}function pK(n){let{children:e,location:t}=n;return JY(HP(e),t)}new Promise(()=>{});function HP(n,e){e===void 0&&(e=[]);let t=[];return H.Children.forEach(n,(i,r)=>{if(!H.isValidElement(i))return;let a=[...e,r];if(i.type===H.Fragment){t.push.apply(t,HP(i.props.children,a));return}i.type!==Md&&Yr(!1),!i.props.index||!i.props.children||Yr(!1);let s={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(s.children=HP(i.props.children,a)),t.push(s)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function GP(){return GP=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},GP.apply(this,arguments)}function mK(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,a;for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function gK(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function vK(n,e){return n.button===0&&(!e||e==="_self")&&!gK(n)}const yK=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],_K="6";try{window.__reactRouterVersion=_K}catch{}const bK="startTransition",hU=x6[bK];function xK(n){let{basename:e,children:t,future:i,window:r}=n,a=H.useRef();a.current==null&&(a.current=wY({window:r,v5Compat:!0}));let s=a.current,[l,c]=H.useState({action:s.action,location:s.location}),{v7_startTransition:f}=i||{},p=H.useCallback(g=>{f&&hU?hU(()=>c(g)):c(g)},[c,f]);return H.useLayoutEffect(()=>s.listen(p),[s,p]),H.useEffect(()=>hK(i),[i]),H.createElement(dK,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:s,future:i})}const SK=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wK=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jo=H.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:a,replace:s,state:l,target:c,to:f,preventScrollReset:p,viewTransition:g}=e,v=mK(e,yK),{basename:_}=H.useContext(pg),x,T=!1;if(typeof f=="string"&&wK.test(f)&&(x=f,SK))try{let R=new URL(window.location.href),D=f.startsWith("//")?new URL(R.protocol+f):new URL(f),B=zO(D.pathname,_);D.origin===R.origin&&B!=null?f=B+D.search+D.hash:T=!0}catch{}let S=ZY(f,{relative:r}),w=EK(f,{replace:s,state:l,target:c,preventScrollReset:p,relative:r,viewTransition:g});function I(R){i&&i(R),R.defaultPrevented||w(R)}return H.createElement("a",GP({},v,{href:x||S,onClick:T||a?i:I,ref:t,target:c}))});var dU;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(dU||(dU={}));var pU;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(pU||(pU={}));function EK(n,e){let{target:t,replace:i,state:r,preventScrollReset:a,relative:s,viewTransition:l}=e===void 0?{}:e,c=N6(),f=vA(),p=O6(n,{relative:s});return H.useCallback(g=>{if(vK(g,t)){g.preventDefault();let v=i!==void 0?i:sE(f)===sE(p);c(n,{replace:v,state:r,preventScrollReset:a,relative:s,viewTransition:l})}},[f,c,p,i,r,t,n,a,s,l])}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const yA="182",vm={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ym={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},U6=0,WP=1,F6=2,TK=3,z6=0,ly=1,ob=2,Mm=3,lh=0,eo=1,Pc=2,zc=0,Fm=1,qP=2,$P=3,XP=4,B6=5,Rd=100,V6=101,j6=102,H6=103,G6=104,W6=200,q6=201,$6=202,X6=203,oE=204,lE=205,Y6=206,K6=207,Z6=208,Q6=209,J6=210,ej=211,tj=212,nj=213,ij=214,uE=0,cE=1,fE=2,Ym=3,hE=4,dE=5,pE=6,mE=7,yx=0,rj=1,aj=2,$l=0,VO=1,jO=2,HO=3,_A=4,GO=5,WO=6,qO=7,YP="attached",sj="detached",bA=300,qc=301,Zd=302,Mb=303,Cb=304,Wy=306,Ib=1e3,Oo=1001,Rb=1002,Ur=1003,$O=1004,AK=1004,ny=1005,MK=1005,Ki=1006,lb=1007,CK=1007,Dc=1008,IK=1008,Ys=1009,XO=1010,YO=1011,_y=1012,xA=1013,Xl=1014,Zs=1015,$c=1016,SA=1017,wA=1018,by=1020,KO=35902,ZO=35899,QO=1021,JO=1022,Ms=1023,Xc=1026,Fd=1027,EA=1028,_x=1029,Km=1030,TA=1031,RK=1032,AA=1033,ub=33776,cb=33777,fb=33778,hb=33779,gE=35840,vE=35841,yE=35842,_E=35843,bE=36196,xE=37492,SE=37496,wE=37488,EE=37489,TE=37490,AE=37491,ME=37808,CE=37809,IE=37810,RE=37811,PE=37812,NE=37813,OE=37814,DE=37815,LE=37816,kE=37817,UE=37818,FE=37819,zE=37820,BE=37821,VE=36492,jE=36494,HE=36495,GE=36283,WE=36284,qE=36285,$E=36286,oj=2200,lj=2201,uj=2202,Pb=2300,XE=2301,zw=2302,Cm=2400,Im=2401,Nb=2402,MA=2500,eD=2501,PK=0,NK=1,OK=2,cj=3200,DK=3201,LK=3202,kK=3203,cp=0,fj=1,Kf="",Za="srgb",Qd="srgb-linear",Ob="linear",gi="srgb",UK="",FK="rg",zK="ga",BK=0,_m=7680,VK=7681,jK=7682,HK=7683,GK=34055,WK=34056,qK=5386,$K=512,XK=513,YK=514,KK=515,ZK=516,QK=517,JK=518,KP=519,hj=512,dj=513,pj=514,CA=515,mj=516,gj=517,IA=518,vj=519,Db=35044,eZ=35048,tZ=35040,nZ=35045,iZ=35049,rZ=35041,aZ=35046,sZ=35050,oZ=35042,lZ="100",ZP="300 es",tl=2e3,xy=2001,uZ={COMPUTE:"compute",RENDER:"render"},cZ={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},fZ={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function yj(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const hZ={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function iy(n,e){return new hZ[n](e)}function _j(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Lb(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function bj(){const n=Lb("canvas");return n.style.display="block",n}const mU={};let Jd=null;function dZ(n){Jd=n}function pZ(){return Jd}function kb(...n){const e="THREE."+n.shift();Jd?Jd("log",e,...n):console.log(e,...n)}function Mt(...n){const e="THREE."+n.shift();Jd?Jd("warn",e,...n):console.warn(e,...n)}function Yt(...n){const e="THREE."+n.shift();Jd?Jd("error",e,...n):console.error(e,...n)}function Sy(...n){const e=n.join(" ");e in mU||(mU[e]=!0,Mt(...n))}function mZ(n,e,t){return new Promise(function(i,r){function a(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:i()}}setTimeout(a,t)})}let af=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e);e.target=null}}};const _s=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let gU=1234567;const zm=Math.PI/180,wy=180/Math.PI;function al(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(_s[n&255]+_s[n>>8&255]+_s[n>>16&255]+_s[n>>24&255]+"-"+_s[e&255]+_s[e>>8&255]+"-"+_s[e>>16&15|64]+_s[e>>24&255]+"-"+_s[t&63|128]+_s[t>>8&255]+"-"+_s[t>>16&255]+_s[t>>24&255]+_s[i&255]+_s[i>>8&255]+_s[i>>16&255]+_s[i>>24&255]).toLowerCase()}function fn(n,e,t){return Math.max(e,Math.min(t,n))}function tD(n,e){return(n%e+e)%e}function gZ(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function vZ(n,e,t){return n!==e?(t-n)/(e-n):0}function db(n,e,t){return(1-t)*n+t*e}function yZ(n,e,t,i){return db(n,e,1-Math.exp(-t*i))}function _Z(n,e=1){return e-Math.abs(tD(n,e*2)-e)}function bZ(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function xZ(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function SZ(n,e){return n+Math.floor(Math.random()*(e-n+1))}function wZ(n,e){return n+Math.random()*(e-n)}function EZ(n){return n*(.5-Math.random())}function TZ(n){n!==void 0&&(gU=n);let e=gU+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function AZ(n){return n*zm}function MZ(n){return n*wy}function CZ(n){return(n&n-1)===0&&n!==0}function IZ(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function RZ(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function PZ(n,e,t,i,r){const a=Math.cos,s=Math.sin,l=a(t/2),c=s(t/2),f=a((e+i)/2),p=s((e+i)/2),g=a((e-i)/2),v=s((e-i)/2),_=a((i-e)/2),x=s((i-e)/2);switch(r){case"XYX":n.set(l*p,c*g,c*v,l*f);break;case"YZY":n.set(c*v,l*p,c*g,l*f);break;case"ZXZ":n.set(c*g,c*v,l*p,l*f);break;case"XZX":n.set(l*p,c*x,c*_,l*f);break;case"YXY":n.set(c*_,l*p,c*x,l*f);break;case"ZYZ":n.set(c*x,c*_,l*p,l*f);break;default:Mt("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Ks(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Rn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const xj={DEG2RAD:zm,RAD2DEG:wy,generateUUID:al,clamp:fn,euclideanModulo:tD,mapLinear:gZ,inverseLerp:vZ,lerp:db,damp:yZ,pingpong:_Z,smoothstep:bZ,smootherstep:xZ,randInt:SZ,randFloat:wZ,randFloatSpread:EZ,seededRandom:TZ,degToRad:AZ,radToDeg:MZ,isPowerOfTwo:CZ,ceilPowerOfTwo:IZ,floorPowerOfTwo:RZ,setQuaternionFromProperEuler:PZ,normalize:Rn,denormalize:Ks};class tt{constructor(e=0,t=0){tt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=fn(this.x,e.x,t.x),this.y=fn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=fn(this.x,e,t),this.y=fn(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(fn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(fn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),a=this.x-e.x,s=this.y-e.y;return this.x=a*i-s*r+e.x,this.y=a*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Cs{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,a,s,l){let c=i[r+0],f=i[r+1],p=i[r+2],g=i[r+3],v=a[s+0],_=a[s+1],x=a[s+2],T=a[s+3];if(l<=0){e[t+0]=c,e[t+1]=f,e[t+2]=p,e[t+3]=g;return}if(l>=1){e[t+0]=v,e[t+1]=_,e[t+2]=x,e[t+3]=T;return}if(g!==T||c!==v||f!==_||p!==x){let S=c*v+f*_+p*x+g*T;S<0&&(v=-v,_=-_,x=-x,T=-T,S=-S);let w=1-l;if(S<.9995){const I=Math.acos(S),R=Math.sin(I);w=Math.sin(w*I)/R,l=Math.sin(l*I)/R,c=c*w+v*l,f=f*w+_*l,p=p*w+x*l,g=g*w+T*l}else{c=c*w+v*l,f=f*w+_*l,p=p*w+x*l,g=g*w+T*l;const I=1/Math.sqrt(c*c+f*f+p*p+g*g);c*=I,f*=I,p*=I,g*=I}}e[t]=c,e[t+1]=f,e[t+2]=p,e[t+3]=g}static multiplyQuaternionsFlat(e,t,i,r,a,s){const l=i[r],c=i[r+1],f=i[r+2],p=i[r+3],g=a[s],v=a[s+1],_=a[s+2],x=a[s+3];return e[t]=l*x+p*g+c*_-f*v,e[t+1]=c*x+p*v+f*g-l*_,e[t+2]=f*x+p*_+l*v-c*g,e[t+3]=p*x-l*g-c*v-f*_,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,a=e._z,s=e._order,l=Math.cos,c=Math.sin,f=l(i/2),p=l(r/2),g=l(a/2),v=c(i/2),_=c(r/2),x=c(a/2);switch(s){case"XYZ":this._x=v*p*g+f*_*x,this._y=f*_*g-v*p*x,this._z=f*p*x+v*_*g,this._w=f*p*g-v*_*x;break;case"YXZ":this._x=v*p*g+f*_*x,this._y=f*_*g-v*p*x,this._z=f*p*x-v*_*g,this._w=f*p*g+v*_*x;break;case"ZXY":this._x=v*p*g-f*_*x,this._y=f*_*g+v*p*x,this._z=f*p*x+v*_*g,this._w=f*p*g-v*_*x;break;case"ZYX":this._x=v*p*g-f*_*x,this._y=f*_*g+v*p*x,this._z=f*p*x-v*_*g,this._w=f*p*g+v*_*x;break;case"YZX":this._x=v*p*g+f*_*x,this._y=f*_*g+v*p*x,this._z=f*p*x-v*_*g,this._w=f*p*g-v*_*x;break;case"XZY":this._x=v*p*g-f*_*x,this._y=f*_*g-v*p*x,this._z=f*p*x+v*_*g,this._w=f*p*g+v*_*x;break;default:Mt("Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],a=t[8],s=t[1],l=t[5],c=t[9],f=t[2],p=t[6],g=t[10],v=i+l+g;if(v>0){const _=.5/Math.sqrt(v+1);this._w=.25/_,this._x=(p-c)*_,this._y=(a-f)*_,this._z=(s-r)*_}else if(i>l&&i>g){const _=2*Math.sqrt(1+i-l-g);this._w=(p-c)/_,this._x=.25*_,this._y=(r+s)/_,this._z=(a+f)/_}else if(l>g){const _=2*Math.sqrt(1+l-i-g);this._w=(a-f)/_,this._x=(r+s)/_,this._y=.25*_,this._z=(c+p)/_}else{const _=2*Math.sqrt(1+g-i-l);this._w=(s-r)/_,this._x=(a+f)/_,this._y=(c+p)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(fn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,a=e._z,s=e._w,l=t._x,c=t._y,f=t._z,p=t._w;return this._x=i*p+s*l+r*f-a*c,this._y=r*p+s*c+a*l-i*f,this._z=a*p+s*f+i*c-r*l,this._w=s*p-i*l-r*c-a*f,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let i=e._x,r=e._y,a=e._z,s=e._w,l=this.dot(e);l<0&&(i=-i,r=-r,a=-a,s=-s,l=-l);let c=1-t;if(l<.9995){const f=Math.acos(l),p=Math.sin(f);c=Math.sin(c*f)/p,t=Math.sin(t*f)/p,this._x=this._x*c+i*t,this._y=this._y*c+r*t,this._z=this._z*c+a*t,this._w=this._w*c+s*t,this._onChangeCallback()}else this._x=this._x*c+i*t,this._y=this._y*c+r*t,this._z=this._z*c+a*t,this._w=this._w*c+s*t,this.normalize();return this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class re{constructor(e=0,t=0,i=0){re.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(vU.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(vU.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6]*r,this.y=a[1]*t+a[4]*i+a[7]*r,this.z=a[2]*t+a[5]*i+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,a=e.elements,s=1/(a[3]*t+a[7]*i+a[11]*r+a[15]);return this.x=(a[0]*t+a[4]*i+a[8]*r+a[12])*s,this.y=(a[1]*t+a[5]*i+a[9]*r+a[13])*s,this.z=(a[2]*t+a[6]*i+a[10]*r+a[14])*s,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,a=e.x,s=e.y,l=e.z,c=e.w,f=2*(s*r-l*i),p=2*(l*t-a*r),g=2*(a*i-s*t);return this.x=t+c*f+s*g-l*p,this.y=i+c*p+l*f-a*g,this.z=r+c*g+a*p-s*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r,this.y=a[1]*t+a[5]*i+a[9]*r,this.z=a[2]*t+a[6]*i+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=fn(this.x,e.x,t.x),this.y=fn(this.y,e.y,t.y),this.z=fn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=fn(this.x,e,t),this.y=fn(this.y,e,t),this.z=fn(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(fn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,a=e.z,s=t.x,l=t.y,c=t.z;return this.x=r*c-a*l,this.y=a*s-i*c,this.z=i*l-r*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return KC.copy(this).projectOnVector(e),this.sub(KC)}reflect(e){return this.sub(KC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(fn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const KC=new re,vU=new Cs;class Tn{constructor(e,t,i,r,a,s,l,c,f){Tn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,s,l,c,f)}set(e,t,i,r,a,s,l,c,f){const p=this.elements;return p[0]=e,p[1]=r,p[2]=l,p[3]=t,p[4]=a,p[5]=c,p[6]=i,p[7]=s,p[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,a=this.elements,s=i[0],l=i[3],c=i[6],f=i[1],p=i[4],g=i[7],v=i[2],_=i[5],x=i[8],T=r[0],S=r[3],w=r[6],I=r[1],R=r[4],D=r[7],B=r[2],z=r[5],k=r[8];return a[0]=s*T+l*I+c*B,a[3]=s*S+l*R+c*z,a[6]=s*w+l*D+c*k,a[1]=f*T+p*I+g*B,a[4]=f*S+p*R+g*z,a[7]=f*w+p*D+g*k,a[2]=v*T+_*I+x*B,a[5]=v*S+_*R+x*z,a[8]=v*w+_*D+x*k,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=e[6],f=e[7],p=e[8];return t*s*p-t*l*f-i*a*p+i*l*c+r*a*f-r*s*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=e[6],f=e[7],p=e[8],g=p*s-l*f,v=l*c-p*a,_=f*a-s*c,x=t*g+i*v+r*_;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const T=1/x;return e[0]=g*T,e[1]=(r*f-p*i)*T,e[2]=(l*i-r*s)*T,e[3]=v*T,e[4]=(p*t-r*c)*T,e[5]=(r*a-l*t)*T,e[6]=_*T,e[7]=(i*c-f*t)*T,e[8]=(s*t-i*a)*T,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,a,s,l){const c=Math.cos(a),f=Math.sin(a);return this.set(i*c,i*f,-i*(c*s+f*l)+s+e,-r*f,r*c,-r*(-f*s+c*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(ZC.makeScale(e,t)),this}rotate(e){return this.premultiply(ZC.makeRotation(-e)),this}translate(e,t){return this.premultiply(ZC.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const ZC=new Tn,yU=new Tn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),_U=new Tn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function NZ(){const n={enabled:!0,workingColorSpace:Qd,spaces:{},convert:function(r,a,s){return this.enabled===!1||a===s||!a||!s||(this.spaces[a].transfer===gi&&(r.r=rh(r.r),r.g=rh(r.g),r.b=rh(r.b)),this.spaces[a].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[a].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===gi&&(r.r=uy(r.r),r.g=uy(r.g),r.b=uy(r.b))),r},workingToColorSpace:function(r,a){return this.convert(r,this.workingColorSpace,a)},colorSpaceToWorking:function(r,a){return this.convert(r,a,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Kf?Ob:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,a=this.workingColorSpace){return r.fromArray(this.spaces[a].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,a,s){return r.copy(this.spaces[a].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,a){return Sy("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,a)},toWorkingColorSpace:function(r,a){return Sy("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,a)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Qd]:{primaries:e,whitePoint:i,transfer:Ob,toXYZ:yU,fromXYZ:_U,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Za},outputColorSpaceConfig:{drawingBufferColorSpace:Za}},[Za]:{primaries:e,whitePoint:i,transfer:gi,toXYZ:yU,fromXYZ:_U,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Za}}}),n}const qn=NZ();function rh(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function uy(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let bv;class Sj{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{bv===void 0&&(bv=Lb("canvas")),bv.width=e.width,bv.height=e.height;const r=bv.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=bv}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Lb("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),a=r.data;for(let s=0;s<a.length;s++)a[s]=rh(a[s]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(rh(t[i]/255)*255):t[i]=rh(t[i]);return{data:t,width:e.width,height:e.height}}else return Mt("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let OZ=0;class zd{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:OZ++}),this.uuid=al(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let a;if(Array.isArray(r)){a=[];for(let s=0,l=r.length;s<l;s++)r[s].isDataTexture?a.push(QC(r[s].image)):a.push(QC(r[s]))}else a=QC(r);i.url=a}return t||(e.images[this.uuid]=i),i}}function QC(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Sj.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(Mt("Texture: Unable to serialize Texture."),{})}let DZ=0;const JC=new re;class Er extends af{constructor(e=Er.DEFAULT_IMAGE,t=Er.DEFAULT_MAPPING,i=Oo,r=Oo,a=Ki,s=Dc,l=Ms,c=Ys,f=Er.DEFAULT_ANISOTROPY,p=Kf){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:DZ++}),this.uuid=al(),this.name="",this.source=new zd(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=a,this.minFilter=s,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=c,this.offset=new tt(0,0),this.repeat=new tt(1,1),this.center=new tt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Tn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(JC).x}get height(){return this.source.getSize(JC).y}get depth(){return this.source.getSize(JC).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){Mt(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){Mt(`Texture.setValues(): property '${t}' does not exist.`);continue}r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==bA)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ib:e.x=e.x-Math.floor(e.x);break;case Oo:e.x=e.x<0?0:1;break;case Rb:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ib:e.y=e.y-Math.floor(e.y);break;case Oo:e.y=e.y<0?0:1;break;case Rb:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Er.DEFAULT_IMAGE=null;Er.DEFAULT_MAPPING=bA;Er.DEFAULT_ANISOTROPY=1;class Ni{constructor(e=0,t=0,i=0,r=1){Ni.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,a=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*a,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*a,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*a,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,a;const c=e.elements,f=c[0],p=c[4],g=c[8],v=c[1],_=c[5],x=c[9],T=c[2],S=c[6],w=c[10];if(Math.abs(p-v)<.01&&Math.abs(g-T)<.01&&Math.abs(x-S)<.01){if(Math.abs(p+v)<.1&&Math.abs(g+T)<.1&&Math.abs(x+S)<.1&&Math.abs(f+_+w-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const R=(f+1)/2,D=(_+1)/2,B=(w+1)/2,z=(p+v)/4,k=(g+T)/4,F=(x+S)/4;return R>D&&R>B?R<.01?(i=0,r=.707106781,a=.707106781):(i=Math.sqrt(R),r=z/i,a=k/i):D>B?D<.01?(i=.707106781,r=0,a=.707106781):(r=Math.sqrt(D),i=z/r,a=F/r):B<.01?(i=.707106781,r=.707106781,a=0):(a=Math.sqrt(B),i=k/a,r=F/a),this.set(i,r,a,t),this}let I=Math.sqrt((S-x)*(S-x)+(g-T)*(g-T)+(v-p)*(v-p));return Math.abs(I)<.001&&(I=1),this.x=(S-x)/I,this.y=(g-T)/I,this.z=(v-p)/I,this.w=Math.acos((f+_+w-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=fn(this.x,e.x,t.x),this.y=fn(this.y,e.y,t.y),this.z=fn(this.z,e.z,t.z),this.w=fn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=fn(this.x,e,t),this.y=fn(this.y,e,t),this.z=fn(this.z,e,t),this.w=fn(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(fn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class nD extends af{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ki,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new Ni(0,0,e,t),this.scissorTest=!1,this.viewport=new Ni(0,0,e,t);const r={width:e,height:t,depth:i.depth},a=new Er(r);this.textures=[];const s=i.count;for(let l=0;l<s;l++)this.textures[l]=a.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:Ki,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,a=this.textures.length;r<a;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i,this.textures[r].isData3DTexture!==!0&&(this.textures[r].isArrayTexture=this.textures[r].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new zd(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class sl extends nD{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class RA extends Er{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ur,this.minFilter=Ur,this.wrapR=Oo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class LZ extends sl{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new RA(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class PA extends Er{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ur,this.minFilter=Ur,this.wrapR=Oo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class kZ extends sl{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new PA(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class es{constructor(e=new re(1/0,1/0,1/0),t=new re(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Tu.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Tu.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Tu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const a=i.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,l=a.count;s<l;s++)e.isMesh===!0?e.getVertexPosition(s,Tu):Tu.fromBufferAttribute(a,s),Tu.applyMatrix4(e.matrixWorld),this.expandByPoint(Tu);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),b1.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),b1.copy(i.boundingBox)),b1.applyMatrix4(e.matrixWorld),this.union(b1)}const r=e.children;for(let a=0,s=r.length;a<s;a++)this.expandByObject(r[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Tu),Tu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(M_),x1.subVectors(this.max,M_),xv.subVectors(e.a,M_),Sv.subVectors(e.b,M_),wv.subVectors(e.c,M_),vd.subVectors(Sv,xv),yd.subVectors(wv,Sv),nm.subVectors(xv,wv);let t=[0,-vd.z,vd.y,0,-yd.z,yd.y,0,-nm.z,nm.y,vd.z,0,-vd.x,yd.z,0,-yd.x,nm.z,0,-nm.x,-vd.y,vd.x,0,-yd.y,yd.x,0,-nm.y,nm.x,0];return!eI(t,xv,Sv,wv,x1)||(t=[1,0,0,0,1,0,0,0,1],!eI(t,xv,Sv,wv,x1))?!1:(S1.crossVectors(vd,yd),t=[S1.x,S1.y,S1.z],eI(t,xv,Sv,wv,x1))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Tu).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Tu).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Vf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Vf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Vf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Vf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Vf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Vf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Vf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Vf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Vf),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Vf=[new re,new re,new re,new re,new re,new re,new re,new re],Tu=new re,b1=new es,xv=new re,Sv=new re,wv=new re,vd=new re,yd=new re,nm=new re,M_=new re,x1=new re,S1=new re,im=new re;function eI(n,e,t,i,r){for(let a=0,s=n.length-3;a<=s;a+=3){im.fromArray(n,a);const l=r.x*Math.abs(im.x)+r.y*Math.abs(im.y)+r.z*Math.abs(im.z),c=e.dot(im),f=t.dot(im),p=i.dot(im);if(Math.max(-Math.max(c,f,p),Math.min(c,f,p))>l)return!1}return!0}const UZ=new es,C_=new re,tI=new re;class Ca{constructor(e=new re,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):UZ.setFromPoints(e).getCenter(i);let r=0;for(let a=0,s=e.length;a<s;a++)r=Math.max(r,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;C_.subVectors(e,this.center);const t=C_.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(C_,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(tI.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(C_.copy(e.center).add(tI)),this.expandByPoint(C_.copy(e.center).sub(tI))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const jf=new re,nI=new re,w1=new re,_d=new re,iI=new re,E1=new re,rI=new re;class gg{constructor(e=new re,t=new re(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,jf)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=jf.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(jf.copy(this.origin).addScaledVector(this.direction,t),jf.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){nI.copy(e).add(t).multiplyScalar(.5),w1.copy(t).sub(e).normalize(),_d.copy(this.origin).sub(nI);const a=e.distanceTo(t)*.5,s=-this.direction.dot(w1),l=_d.dot(this.direction),c=-_d.dot(w1),f=_d.lengthSq(),p=Math.abs(1-s*s);let g,v,_,x;if(p>0)if(g=s*c-l,v=s*l-c,x=a*p,g>=0)if(v>=-x)if(v<=x){const T=1/p;g*=T,v*=T,_=g*(g+s*v+2*l)+v*(s*g+v+2*c)+f}else v=a,g=Math.max(0,-(s*v+l)),_=-g*g+v*(v+2*c)+f;else v=-a,g=Math.max(0,-(s*v+l)),_=-g*g+v*(v+2*c)+f;else v<=-x?(g=Math.max(0,-(-s*a+l)),v=g>0?-a:Math.min(Math.max(-a,-c),a),_=-g*g+v*(v+2*c)+f):v<=x?(g=0,v=Math.min(Math.max(-a,-c),a),_=v*(v+2*c)+f):(g=Math.max(0,-(s*a+l)),v=g>0?a:Math.min(Math.max(-a,-c),a),_=-g*g+v*(v+2*c)+f);else v=s>0?-a:a,g=Math.max(0,-(s*v+l)),_=-g*g+v*(v+2*c)+f;return i&&i.copy(this.origin).addScaledVector(this.direction,g),r&&r.copy(nI).addScaledVector(w1,v),_}intersectSphere(e,t){jf.subVectors(e.center,this.origin);const i=jf.dot(this.direction),r=jf.dot(jf)-i*i,a=e.radius*e.radius;if(r>a)return null;const s=Math.sqrt(a-r),l=i-s,c=i+s;return c<0?null:l<0?this.at(c,t):this.at(l,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,a,s,l,c;const f=1/this.direction.x,p=1/this.direction.y,g=1/this.direction.z,v=this.origin;return f>=0?(i=(e.min.x-v.x)*f,r=(e.max.x-v.x)*f):(i=(e.max.x-v.x)*f,r=(e.min.x-v.x)*f),p>=0?(a=(e.min.y-v.y)*p,s=(e.max.y-v.y)*p):(a=(e.max.y-v.y)*p,s=(e.min.y-v.y)*p),i>s||a>r||((a>i||isNaN(i))&&(i=a),(s<r||isNaN(r))&&(r=s),g>=0?(l=(e.min.z-v.z)*g,c=(e.max.z-v.z)*g):(l=(e.max.z-v.z)*g,c=(e.min.z-v.z)*g),i>c||l>r)||((l>i||i!==i)&&(i=l),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,jf)!==null}intersectTriangle(e,t,i,r,a){iI.subVectors(t,e),E1.subVectors(i,e),rI.crossVectors(iI,E1);let s=this.direction.dot(rI),l;if(s>0){if(r)return null;l=1}else if(s<0)l=-1,s=-s;else return null;_d.subVectors(this.origin,e);const c=l*this.direction.dot(E1.crossVectors(_d,E1));if(c<0)return null;const f=l*this.direction.dot(iI.cross(_d));if(f<0||c+f>s)return null;const p=-l*_d.dot(rI);return p<0?null:this.at(p/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class pn{constructor(e,t,i,r,a,s,l,c,f,p,g,v,_,x,T,S){pn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,s,l,c,f,p,g,v,_,x,T,S)}set(e,t,i,r,a,s,l,c,f,p,g,v,_,x,T,S){const w=this.elements;return w[0]=e,w[4]=t,w[8]=i,w[12]=r,w[1]=a,w[5]=s,w[9]=l,w[13]=c,w[2]=f,w[6]=p,w[10]=g,w[14]=v,w[3]=_,w[7]=x,w[11]=T,w[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new pn().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),i.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this)}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,i=e.elements,r=1/Ev.setFromMatrixColumn(e,0).length(),a=1/Ev.setFromMatrixColumn(e,1).length(),s=1/Ev.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*a,t[5]=i[5]*a,t[6]=i[6]*a,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,a=e.z,s=Math.cos(i),l=Math.sin(i),c=Math.cos(r),f=Math.sin(r),p=Math.cos(a),g=Math.sin(a);if(e.order==="XYZ"){const v=s*p,_=s*g,x=l*p,T=l*g;t[0]=c*p,t[4]=-c*g,t[8]=f,t[1]=_+x*f,t[5]=v-T*f,t[9]=-l*c,t[2]=T-v*f,t[6]=x+_*f,t[10]=s*c}else if(e.order==="YXZ"){const v=c*p,_=c*g,x=f*p,T=f*g;t[0]=v+T*l,t[4]=x*l-_,t[8]=s*f,t[1]=s*g,t[5]=s*p,t[9]=-l,t[2]=_*l-x,t[6]=T+v*l,t[10]=s*c}else if(e.order==="ZXY"){const v=c*p,_=c*g,x=f*p,T=f*g;t[0]=v-T*l,t[4]=-s*g,t[8]=x+_*l,t[1]=_+x*l,t[5]=s*p,t[9]=T-v*l,t[2]=-s*f,t[6]=l,t[10]=s*c}else if(e.order==="ZYX"){const v=s*p,_=s*g,x=l*p,T=l*g;t[0]=c*p,t[4]=x*f-_,t[8]=v*f+T,t[1]=c*g,t[5]=T*f+v,t[9]=_*f-x,t[2]=-f,t[6]=l*c,t[10]=s*c}else if(e.order==="YZX"){const v=s*c,_=s*f,x=l*c,T=l*f;t[0]=c*p,t[4]=T-v*g,t[8]=x*g+_,t[1]=g,t[5]=s*p,t[9]=-l*p,t[2]=-f*p,t[6]=_*g+x,t[10]=v-T*g}else if(e.order==="XZY"){const v=s*c,_=s*f,x=l*c,T=l*f;t[0]=c*p,t[4]=-g,t[8]=f*p,t[1]=v*g+T,t[5]=s*p,t[9]=_*g-x,t[2]=x*g-_,t[6]=l*p,t[10]=T*g+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(FZ,e,zZ)}lookAt(e,t,i){const r=this.elements;return Zo.subVectors(e,t),Zo.lengthSq()===0&&(Zo.z=1),Zo.normalize(),bd.crossVectors(i,Zo),bd.lengthSq()===0&&(Math.abs(i.z)===1?Zo.x+=1e-4:Zo.z+=1e-4,Zo.normalize(),bd.crossVectors(i,Zo)),bd.normalize(),T1.crossVectors(Zo,bd),r[0]=bd.x,r[4]=T1.x,r[8]=Zo.x,r[1]=bd.y,r[5]=T1.y,r[9]=Zo.y,r[2]=bd.z,r[6]=T1.z,r[10]=Zo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,a=this.elements,s=i[0],l=i[4],c=i[8],f=i[12],p=i[1],g=i[5],v=i[9],_=i[13],x=i[2],T=i[6],S=i[10],w=i[14],I=i[3],R=i[7],D=i[11],B=i[15],z=r[0],k=r[4],F=r[8],P=r[12],L=r[1],V=r[5],W=r[9],q=r[13],ue=r[2],le=r[6],ee=r[10],ie=r[14],he=r[3],we=r[7],Me=r[11],J=r[15];return a[0]=s*z+l*L+c*ue+f*he,a[4]=s*k+l*V+c*le+f*we,a[8]=s*F+l*W+c*ee+f*Me,a[12]=s*P+l*q+c*ie+f*J,a[1]=p*z+g*L+v*ue+_*he,a[5]=p*k+g*V+v*le+_*we,a[9]=p*F+g*W+v*ee+_*Me,a[13]=p*P+g*q+v*ie+_*J,a[2]=x*z+T*L+S*ue+w*he,a[6]=x*k+T*V+S*le+w*we,a[10]=x*F+T*W+S*ee+w*Me,a[14]=x*P+T*q+S*ie+w*J,a[3]=I*z+R*L+D*ue+B*he,a[7]=I*k+R*V+D*le+B*we,a[11]=I*F+R*W+D*ee+B*Me,a[15]=I*P+R*q+D*ie+B*J,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],a=e[12],s=e[1],l=e[5],c=e[9],f=e[13],p=e[2],g=e[6],v=e[10],_=e[14],x=e[3],T=e[7],S=e[11],w=e[15],I=c*_-f*v,R=l*_-f*g,D=l*v-c*g,B=s*_-f*p,z=s*v-c*p,k=s*g-l*p;return t*(T*I-S*R+w*D)-i*(x*I-S*B+w*z)+r*(x*R-T*B+w*k)-a*(x*D-T*z+S*k)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=e[6],f=e[7],p=e[8],g=e[9],v=e[10],_=e[11],x=e[12],T=e[13],S=e[14],w=e[15],I=g*S*f-T*v*f+T*c*_-l*S*_-g*c*w+l*v*w,R=x*v*f-p*S*f-x*c*_+s*S*_+p*c*w-s*v*w,D=p*T*f-x*g*f+x*l*_-s*T*_-p*l*w+s*g*w,B=x*g*c-p*T*c-x*l*v+s*T*v+p*l*S-s*g*S,z=t*I+i*R+r*D+a*B;if(z===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const k=1/z;return e[0]=I*k,e[1]=(T*v*a-g*S*a-T*r*_+i*S*_+g*r*w-i*v*w)*k,e[2]=(l*S*a-T*c*a+T*r*f-i*S*f-l*r*w+i*c*w)*k,e[3]=(g*c*a-l*v*a-g*r*f+i*v*f+l*r*_-i*c*_)*k,e[4]=R*k,e[5]=(p*S*a-x*v*a+x*r*_-t*S*_-p*r*w+t*v*w)*k,e[6]=(x*c*a-s*S*a-x*r*f+t*S*f+s*r*w-t*c*w)*k,e[7]=(s*v*a-p*c*a+p*r*f-t*v*f-s*r*_+t*c*_)*k,e[8]=D*k,e[9]=(x*g*a-p*T*a-x*i*_+t*T*_+p*i*w-t*g*w)*k,e[10]=(s*T*a-x*l*a+x*i*f-t*T*f-s*i*w+t*l*w)*k,e[11]=(p*l*a-s*g*a-p*i*f+t*g*f+s*i*_-t*l*_)*k,e[12]=B*k,e[13]=(p*T*r-x*g*r+x*i*v-t*T*v-p*i*S+t*g*S)*k,e[14]=(x*l*r-s*T*r-x*i*c+t*T*c+s*i*S-t*l*S)*k,e[15]=(s*g*r-p*l*r+p*i*c-t*g*c-s*i*v+t*l*v)*k,this}scale(e){const t=this.elements,i=e.x,r=e.y,a=e.z;return t[0]*=i,t[4]*=r,t[8]*=a,t[1]*=i,t[5]*=r,t[9]*=a,t[2]*=i,t[6]*=r,t[10]*=a,t[3]*=i,t[7]*=r,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),a=1-i,s=e.x,l=e.y,c=e.z,f=a*s,p=a*l;return this.set(f*s+i,f*l-r*c,f*c+r*l,0,f*l+r*c,p*l+i,p*c-r*s,0,f*c-r*l,p*c+r*s,a*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,a,s){return this.set(1,i,a,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,a=t._x,s=t._y,l=t._z,c=t._w,f=a+a,p=s+s,g=l+l,v=a*f,_=a*p,x=a*g,T=s*p,S=s*g,w=l*g,I=c*f,R=c*p,D=c*g,B=i.x,z=i.y,k=i.z;return r[0]=(1-(T+w))*B,r[1]=(_+D)*B,r[2]=(x-R)*B,r[3]=0,r[4]=(_-D)*z,r[5]=(1-(v+w))*z,r[6]=(S+I)*z,r[7]=0,r[8]=(x+R)*k,r[9]=(S-I)*k,r[10]=(1-(v+T))*k,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;if(e.x=r[12],e.y=r[13],e.z=r[14],this.determinant()===0)return i.set(1,1,1),t.identity(),this;let a=Ev.set(r[0],r[1],r[2]).length();const s=Ev.set(r[4],r[5],r[6]).length(),l=Ev.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),Au.copy(this);const f=1/a,p=1/s,g=1/l;return Au.elements[0]*=f,Au.elements[1]*=f,Au.elements[2]*=f,Au.elements[4]*=p,Au.elements[5]*=p,Au.elements[6]*=p,Au.elements[8]*=g,Au.elements[9]*=g,Au.elements[10]*=g,t.setFromRotationMatrix(Au),i.x=a,i.y=s,i.z=l,this}makePerspective(e,t,i,r,a,s,l=tl,c=!1){const f=this.elements,p=2*a/(t-e),g=2*a/(i-r),v=(t+e)/(t-e),_=(i+r)/(i-r);let x,T;if(c)x=a/(s-a),T=s*a/(s-a);else if(l===tl)x=-(s+a)/(s-a),T=-2*s*a/(s-a);else if(l===xy)x=-s/(s-a),T=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return f[0]=p,f[4]=0,f[8]=v,f[12]=0,f[1]=0,f[5]=g,f[9]=_,f[13]=0,f[2]=0,f[6]=0,f[10]=x,f[14]=T,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(e,t,i,r,a,s,l=tl,c=!1){const f=this.elements,p=2/(t-e),g=2/(i-r),v=-(t+e)/(t-e),_=-(i+r)/(i-r);let x,T;if(c)x=1/(s-a),T=s/(s-a);else if(l===tl)x=-2/(s-a),T=-(s+a)/(s-a);else if(l===xy)x=-1/(s-a),T=-a/(s-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return f[0]=p,f[4]=0,f[8]=0,f[12]=v,f[1]=0,f[5]=g,f[9]=0,f[13]=_,f[2]=0,f[6]=0,f[10]=x,f[14]=T,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Ev=new re,Au=new pn,FZ=new re(0,0,0),zZ=new re(1,1,1),bd=new re,T1=new re,Zo=new re,bU=new pn,xU=new Cs;class ll{constructor(e=0,t=0,i=0,r=ll.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,a=r[0],s=r[4],l=r[8],c=r[1],f=r[5],p=r[9],g=r[2],v=r[6],_=r[10];switch(t){case"XYZ":this._y=Math.asin(fn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-p,_),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(v,f),this._z=0);break;case"YXZ":this._x=Math.asin(-fn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(l,_),this._z=Math.atan2(c,f)):(this._y=Math.atan2(-g,a),this._z=0);break;case"ZXY":this._x=Math.asin(fn(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-g,_),this._z=Math.atan2(-s,f)):(this._y=0,this._z=Math.atan2(c,a));break;case"ZYX":this._y=Math.asin(-fn(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(v,_),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-s,f));break;case"YZX":this._z=Math.asin(fn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-p,f),this._y=Math.atan2(-g,a)):(this._x=0,this._y=Math.atan2(l,_));break;case"XZY":this._z=Math.asin(-fn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(v,f),this._y=Math.atan2(l,a)):(this._x=Math.atan2(-p,_),this._y=0);break;default:Mt("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return bU.makeRotationFromQuaternion(e),this.setFromRotationMatrix(bU,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return xU.setFromEuler(this),this.setFromQuaternion(xU,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ll.DEFAULT_ORDER="XYZ";class Ey{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let BZ=0;const SU=new re,Tv=new Cs,Hf=new pn,A1=new re,I_=new re,VZ=new re,jZ=new Cs,wU=new re(1,0,0),EU=new re(0,1,0),TU=new re(0,0,1),AU={type:"added"},HZ={type:"removed"},Av={type:"childadded",child:null},aI={type:"childremoved",child:null};class ni extends af{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:BZ++}),this.uuid=al(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ni.DEFAULT_UP.clone();const e=new re,t=new ll,i=new Cs,r=new re(1,1,1);function a(){i.setFromEuler(t,!1)}function s(){t.setFromQuaternion(i,void 0,!1)}t._onChange(a),i._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new pn},normalMatrix:{value:new Tn}}),this.matrix=new pn,this.matrixWorld=new pn,this.matrixAutoUpdate=ni.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ni.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Ey,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Tv.setFromAxisAngle(e,t),this.quaternion.multiply(Tv),this}rotateOnWorldAxis(e,t){return Tv.setFromAxisAngle(e,t),this.quaternion.premultiply(Tv),this}rotateX(e){return this.rotateOnAxis(wU,e)}rotateY(e){return this.rotateOnAxis(EU,e)}rotateZ(e){return this.rotateOnAxis(TU,e)}translateOnAxis(e,t){return SU.copy(e).applyQuaternion(this.quaternion),this.position.add(SU.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(wU,e)}translateY(e){return this.translateOnAxis(EU,e)}translateZ(e){return this.translateOnAxis(TU,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Hf.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?A1.copy(e):A1.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),I_.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Hf.lookAt(I_,A1,this.up):Hf.lookAt(A1,I_,this.up),this.quaternion.setFromRotationMatrix(Hf),r&&(Hf.extractRotation(r.matrixWorld),Tv.setFromRotationMatrix(Hf),this.quaternion.premultiply(Tv.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(Yt("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(AU),Av.child=e,this.dispatchEvent(Av),Av.child=null):Yt("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(HZ),aI.child=e,this.dispatchEvent(aI),aI.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Hf.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Hf.multiply(e.parent.matrixWorld)),e.applyMatrix4(Hf),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(AU),Av.child=e,this.dispatchEvent(Av),Av.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const s=this.children[i].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(I_,e,VZ),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(I_,jZ,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(l=>({...l,boundingBox:l.boundingBox?l.boundingBox.toJSON():void 0,boundingSphere:l.boundingSphere?l.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(l=>({...l})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function a(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let f=0,p=c.length;f<p;f++){const g=c[f];a(e.shapes,g)}else a(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,f=this.material.length;c<f;c++)l.push(a(e.materials,this.material[c]));r.material=l}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];r.animations.push(a(e.animations,c))}}if(t){const l=s(e.geometries),c=s(e.materials),f=s(e.textures),p=s(e.images),g=s(e.shapes),v=s(e.skeletons),_=s(e.animations),x=s(e.nodes);l.length>0&&(i.geometries=l),c.length>0&&(i.materials=c),f.length>0&&(i.textures=f),p.length>0&&(i.images=p),g.length>0&&(i.shapes=g),v.length>0&&(i.skeletons=v),_.length>0&&(i.animations=_),x.length>0&&(i.nodes=x)}return i.object=r,i;function s(l){const c=[];for(const f in l){const p=l[f];delete p.metadata,c.push(p)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}ni.DEFAULT_UP=new re(0,1,0);ni.DEFAULT_MATRIX_AUTO_UPDATE=!0;ni.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Mu=new re,Gf=new re,sI=new re,Wf=new re,Mv=new re,Cv=new re,MU=new re,oI=new re,lI=new re,uI=new re,cI=new Ni,fI=new Ni,hI=new Ni;class Po{constructor(e=new re,t=new re,i=new re){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Mu.subVectors(e,t),r.cross(Mu);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,t,i,r,a){Mu.subVectors(r,t),Gf.subVectors(i,t),sI.subVectors(e,t);const s=Mu.dot(Mu),l=Mu.dot(Gf),c=Mu.dot(sI),f=Gf.dot(Gf),p=Gf.dot(sI),g=s*f-l*l;if(g===0)return a.set(0,0,0),null;const v=1/g,_=(f*c-l*p)*v,x=(s*p-l*c)*v;return a.set(1-_-x,x,_)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Wf)===null?!1:Wf.x>=0&&Wf.y>=0&&Wf.x+Wf.y<=1}static getInterpolation(e,t,i,r,a,s,l,c){return this.getBarycoord(e,t,i,r,Wf)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(a,Wf.x),c.addScaledVector(s,Wf.y),c.addScaledVector(l,Wf.z),c)}static getInterpolatedAttribute(e,t,i,r,a,s){return cI.setScalar(0),fI.setScalar(0),hI.setScalar(0),cI.fromBufferAttribute(e,t),fI.fromBufferAttribute(e,i),hI.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(cI,a.x),s.addScaledVector(fI,a.y),s.addScaledVector(hI,a.z),s}static isFrontFacing(e,t,i,r){return Mu.subVectors(i,t),Gf.subVectors(e,t),Mu.cross(Gf).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Mu.subVectors(this.c,this.b),Gf.subVectors(this.a,this.b),Mu.cross(Gf).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Po.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Po.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,a){return Po.getInterpolation(e,this.a,this.b,this.c,t,i,r,a)}containsPoint(e){return Po.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Po.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,a=this.c;let s,l;Mv.subVectors(r,i),Cv.subVectors(a,i),oI.subVectors(e,i);const c=Mv.dot(oI),f=Cv.dot(oI);if(c<=0&&f<=0)return t.copy(i);lI.subVectors(e,r);const p=Mv.dot(lI),g=Cv.dot(lI);if(p>=0&&g<=p)return t.copy(r);const v=c*g-p*f;if(v<=0&&c>=0&&p<=0)return s=c/(c-p),t.copy(i).addScaledVector(Mv,s);uI.subVectors(e,a);const _=Mv.dot(uI),x=Cv.dot(uI);if(x>=0&&_<=x)return t.copy(a);const T=_*f-c*x;if(T<=0&&f>=0&&x<=0)return l=f/(f-x),t.copy(i).addScaledVector(Cv,l);const S=p*x-_*g;if(S<=0&&g-p>=0&&_-x>=0)return MU.subVectors(a,r),l=(g-p)/(g-p+(_-x)),t.copy(r).addScaledVector(MU,l);const w=1/(S+T+v);return s=T*w,l=v*w,t.copy(i).addScaledVector(Mv,s).addScaledVector(Cv,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const wj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},xd={h:0,s:0,l:0},M1={h:0,s:0,l:0};function dI(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let Dt=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Za){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,qn.colorSpaceToWorking(this,t),this}setRGB(e,t,i,r=qn.workingColorSpace){return this.r=e,this.g=t,this.b=i,qn.colorSpaceToWorking(this,r),this}setHSL(e,t,i,r=qn.workingColorSpace){if(e=tD(e,1),t=fn(t,0,1),i=fn(i,0,1),t===0)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+t):i+t-i*t,s=2*i-a;this.r=dI(s,a,e+1/3),this.g=dI(s,a,e),this.b=dI(s,a,e-1/3)}return qn.colorSpaceToWorking(this,r),this}setStyle(e,t=Za){function i(a){a!==void 0&&parseFloat(a)<1&&Mt("Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=r[1],l=r[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:Mt("Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=r[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(a,16),t);Mt("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Za){const i=wj[e.toLowerCase()];return i!==void 0?this.setHex(i,t):Mt("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=rh(e.r),this.g=rh(e.g),this.b=rh(e.b),this}copyLinearToSRGB(e){return this.r=uy(e.r),this.g=uy(e.g),this.b=uy(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Za){return qn.workingToColorSpace(bs.copy(this),e),Math.round(fn(bs.r*255,0,255))*65536+Math.round(fn(bs.g*255,0,255))*256+Math.round(fn(bs.b*255,0,255))}getHexString(e=Za){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=qn.workingColorSpace){qn.workingToColorSpace(bs.copy(this),t);const i=bs.r,r=bs.g,a=bs.b,s=Math.max(i,r,a),l=Math.min(i,r,a);let c,f;const p=(l+s)/2;if(l===s)c=0,f=0;else{const g=s-l;switch(f=p<=.5?g/(s+l):g/(2-s-l),s){case i:c=(r-a)/g+(r<a?6:0);break;case r:c=(a-i)/g+2;break;case a:c=(i-r)/g+4;break}c/=6}return e.h=c,e.s=f,e.l=p,e}getRGB(e,t=qn.workingColorSpace){return qn.workingToColorSpace(bs.copy(this),t),e.r=bs.r,e.g=bs.g,e.b=bs.b,e}getStyle(e=Za){qn.workingToColorSpace(bs.copy(this),e);const t=bs.r,i=bs.g,r=bs.b;return e!==Za?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(xd),this.setHSL(xd.h+e,xd.s+t,xd.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(xd),e.getHSL(M1);const i=db(xd.h,M1.h,t),r=db(xd.s,M1.s,t),a=db(xd.l,M1.l,t);return this.setHSL(i,r,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,a=e.elements;return this.r=a[0]*t+a[3]*i+a[6]*r,this.g=a[1]*t+a[4]*i+a[7]*r,this.b=a[2]*t+a[5]*i+a[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const bs=new Dt;Dt.NAMES=wj;let GZ=0;class Ps extends af{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:GZ++}),this.uuid=al(),this.name="",this.type="Material",this.blending=Fm,this.side=lh,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=oE,this.blendDst=lE,this.blendEquation=Rd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Dt(0,0,0),this.blendAlpha=0,this.depthFunc=Ym,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=KP,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=_m,this.stencilZFail=_m,this.stencilZPass=_m,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){Mt(`Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){Mt(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Fm&&(i.blending=this.blending),this.side!==lh&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==oE&&(i.blendSrc=this.blendSrc),this.blendDst!==lE&&(i.blendDst=this.blendDst),this.blendEquation!==Rd&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Ym&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==KP&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==_m&&(i.stencilFail=this.stencilFail),this.stencilZFail!==_m&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==_m&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.allowOverride===!1&&(i.allowOverride=!1),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(a){const s=[];for(const l in a){const c=a[l];delete c.metadata,s.push(c)}return s}if(t){const a=r(e.textures),s=r(e.images);a.length>0&&(i.textures=a),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let a=0;a!==r;++a)i[a]=t[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class fp extends Ps{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Dt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ll,this.combine=yx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Zf=WZ();function WZ(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const f=c-127;f<-27?(i[c]=0,i[c|256]=32768,r[c]=24,r[c|256]=24):f<-14?(i[c]=1024>>-f-14,i[c|256]=1024>>-f-14|32768,r[c]=-f-1,r[c|256]=-f-1):f<=15?(i[c]=f+15<<10,i[c|256]=f+15<<10|32768,r[c]=13,r[c|256]=13):f<128?(i[c]=31744,i[c|256]=64512,r[c]=24,r[c|256]=24):(i[c]=31744,i[c|256]=64512,r[c]=13,r[c|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let f=c<<13,p=0;for(;(f&8388608)===0;)f<<=1,p-=8388608;f&=-8388609,p+=947912704,a[c]=f|p}for(let c=1024;c<2048;++c)a[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)s[c]=c<<23;s[31]=1199570944,s[32]=2147483648;for(let c=33;c<63;++c)s[c]=2147483648+(c-32<<23);s[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:a,exponentTable:s,offsetTable:l}}function Io(n){Math.abs(n)>65504&&Mt("DataUtils.toHalfFloat(): Value out of range."),n=fn(n,-65504,65504),Zf.floatView[0]=n;const e=Zf.uint32View[0],t=e>>23&511;return Zf.baseTable[t]+((e&8388607)>>Zf.shiftTable[t])}function K_(n){const e=n>>10;return Zf.uint32View[0]=Zf.mantissaTable[Zf.offsetTable[e]+(n&1023)]+Zf.exponentTable[e],Zf.floatView[0]}class qZ{static toHalfFloat(e){return Io(e)}static fromHalfFloat(e){return K_(e)}}const qr=new re,C1=new tt;let $Z=0;class hi{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:$Z++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Db,this.updateRanges=[],this.gpuType=Zs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)C1.fromBufferAttribute(this,t),C1.applyMatrix3(e),this.setXY(t,C1.x,C1.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)qr.fromBufferAttribute(this,t),qr.applyMatrix3(e),this.setXYZ(t,qr.x,qr.y,qr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)qr.fromBufferAttribute(this,t),qr.applyMatrix4(e),this.setXYZ(t,qr.x,qr.y,qr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)qr.fromBufferAttribute(this,t),qr.applyNormalMatrix(e),this.setXYZ(t,qr.x,qr.y,qr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)qr.fromBufferAttribute(this,t),qr.transformDirection(e),this.setXYZ(t,qr.x,qr.y,qr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Ks(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Rn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ks(t,this.array)),t}setX(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ks(t,this.array)),t}setY(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ks(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ks(t,this.array)),t}setW(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Rn(t,this.array),i=Rn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Rn(t,this.array),i=Rn(i,this.array),r=Rn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=Rn(t,this.array),i=Rn(i,this.array),r=Rn(r,this.array),a=Rn(a,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Db&&(e.usage=this.usage),e}}class XZ extends hi{constructor(e,t,i){super(new Int8Array(e),t,i)}}class YZ extends hi{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class KZ extends hi{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class ZZ extends hi{constructor(e,t,i){super(new Int16Array(e),t,i)}}class iD extends hi{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class QZ extends hi{constructor(e,t,i){super(new Int32Array(e),t,i)}}class rD extends hi{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class JZ extends hi{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=K_(this.array[e*this.itemSize]);return this.normalized&&(t=Ks(t,this.array)),t}setX(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize]=Io(t),this}getY(e){let t=K_(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ks(t,this.array)),t}setY(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize+1]=Io(t),this}getZ(e){let t=K_(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ks(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize+2]=Io(t),this}getW(e){let t=K_(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ks(t,this.array)),t}setW(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize+3]=Io(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Rn(t,this.array),i=Rn(i,this.array)),this.array[e+0]=Io(t),this.array[e+1]=Io(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Rn(t,this.array),i=Rn(i,this.array),r=Rn(r,this.array)),this.array[e+0]=Io(t),this.array[e+1]=Io(i),this.array[e+2]=Io(r),this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=Rn(t,this.array),i=Rn(i,this.array),r=Rn(r,this.array),a=Rn(a,this.array)),this.array[e+0]=Io(t),this.array[e+1]=Io(i),this.array[e+2]=Io(r),this.array[e+3]=Io(a),this}}class zt extends hi{constructor(e,t,i){super(new Float32Array(e),t,i)}}let eQ=0;const Vl=new pn,pI=new ni,Iv=new re,Qo=new es,R_=new es,wa=new re;class gn extends af{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:eQ++}),this.uuid=al(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(yj(e)?rD:iD)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const a=new Tn().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Vl.makeRotationFromQuaternion(e),this.applyMatrix4(Vl),this}rotateX(e){return Vl.makeRotationX(e),this.applyMatrix4(Vl),this}rotateY(e){return Vl.makeRotationY(e),this.applyMatrix4(Vl),this}rotateZ(e){return Vl.makeRotationZ(e),this.applyMatrix4(Vl),this}translate(e,t,i){return Vl.makeTranslation(e,t,i),this.applyMatrix4(Vl),this}scale(e,t,i){return Vl.makeScale(e,t,i),this.applyMatrix4(Vl),this}lookAt(e){return pI.lookAt(e),pI.updateMatrix(),this.applyMatrix4(pI.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Iv).negate(),this.translate(Iv.x,Iv.y,Iv.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,a=e.length;r<a;r++){const s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new zt(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const a=e[r];t.setXYZ(r,a.x,a.y,a.z||0)}e.length>t.count&&Mt("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new es);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Yt("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new re(-1/0,-1/0,-1/0),new re(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const a=t[i];Qo.setFromBufferAttribute(a),this.morphTargetsRelative?(wa.addVectors(this.boundingBox.min,Qo.min),this.boundingBox.expandByPoint(wa),wa.addVectors(this.boundingBox.max,Qo.max),this.boundingBox.expandByPoint(wa)):(this.boundingBox.expandByPoint(Qo.min),this.boundingBox.expandByPoint(Qo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Yt('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ca);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Yt("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new re,1/0);return}if(e){const i=this.boundingSphere.center;if(Qo.setFromBufferAttribute(e),t)for(let a=0,s=t.length;a<s;a++){const l=t[a];R_.setFromBufferAttribute(l),this.morphTargetsRelative?(wa.addVectors(Qo.min,R_.min),Qo.expandByPoint(wa),wa.addVectors(Qo.max,R_.max),Qo.expandByPoint(wa)):(Qo.expandByPoint(R_.min),Qo.expandByPoint(R_.max))}Qo.getCenter(i);let r=0;for(let a=0,s=e.count;a<s;a++)wa.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(wa));if(t)for(let a=0,s=t.length;a<s;a++){const l=t[a],c=this.morphTargetsRelative;for(let f=0,p=l.count;f<p;f++)wa.fromBufferAttribute(l,f),c&&(Iv.fromBufferAttribute(e,f),wa.add(Iv)),r=Math.max(r,i.distanceToSquared(wa))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&Yt('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){Yt("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new hi(new Float32Array(4*i.count),4));const s=this.getAttribute("tangent"),l=[],c=[];for(let F=0;F<i.count;F++)l[F]=new re,c[F]=new re;const f=new re,p=new re,g=new re,v=new tt,_=new tt,x=new tt,T=new re,S=new re;function w(F,P,L){f.fromBufferAttribute(i,F),p.fromBufferAttribute(i,P),g.fromBufferAttribute(i,L),v.fromBufferAttribute(a,F),_.fromBufferAttribute(a,P),x.fromBufferAttribute(a,L),p.sub(f),g.sub(f),_.sub(v),x.sub(v);const V=1/(_.x*x.y-x.x*_.y);isFinite(V)&&(T.copy(p).multiplyScalar(x.y).addScaledVector(g,-_.y).multiplyScalar(V),S.copy(g).multiplyScalar(_.x).addScaledVector(p,-x.x).multiplyScalar(V),l[F].add(T),l[P].add(T),l[L].add(T),c[F].add(S),c[P].add(S),c[L].add(S))}let I=this.groups;I.length===0&&(I=[{start:0,count:e.count}]);for(let F=0,P=I.length;F<P;++F){const L=I[F],V=L.start,W=L.count;for(let q=V,ue=V+W;q<ue;q+=3)w(e.getX(q+0),e.getX(q+1),e.getX(q+2))}const R=new re,D=new re,B=new re,z=new re;function k(F){B.fromBufferAttribute(r,F),z.copy(B);const P=l[F];R.copy(P),R.sub(B.multiplyScalar(B.dot(P))).normalize(),D.crossVectors(z,P);const V=D.dot(c[F])<0?-1:1;s.setXYZW(F,R.x,R.y,R.z,V)}for(let F=0,P=I.length;F<P;++F){const L=I[F],V=L.start,W=L.count;for(let q=V,ue=V+W;q<ue;q+=3)k(e.getX(q+0)),k(e.getX(q+1)),k(e.getX(q+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new hi(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let v=0,_=i.count;v<_;v++)i.setXYZ(v,0,0,0);const r=new re,a=new re,s=new re,l=new re,c=new re,f=new re,p=new re,g=new re;if(e)for(let v=0,_=e.count;v<_;v+=3){const x=e.getX(v+0),T=e.getX(v+1),S=e.getX(v+2);r.fromBufferAttribute(t,x),a.fromBufferAttribute(t,T),s.fromBufferAttribute(t,S),p.subVectors(s,a),g.subVectors(r,a),p.cross(g),l.fromBufferAttribute(i,x),c.fromBufferAttribute(i,T),f.fromBufferAttribute(i,S),l.add(p),c.add(p),f.add(p),i.setXYZ(x,l.x,l.y,l.z),i.setXYZ(T,c.x,c.y,c.z),i.setXYZ(S,f.x,f.y,f.z)}else for(let v=0,_=t.count;v<_;v+=3)r.fromBufferAttribute(t,v+0),a.fromBufferAttribute(t,v+1),s.fromBufferAttribute(t,v+2),p.subVectors(s,a),g.subVectors(r,a),p.cross(g),i.setXYZ(v+0,p.x,p.y,p.z),i.setXYZ(v+1,p.x,p.y,p.z),i.setXYZ(v+2,p.x,p.y,p.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)wa.fromBufferAttribute(e,t),wa.normalize(),e.setXYZ(t,wa.x,wa.y,wa.z)}toNonIndexed(){function e(l,c){const f=l.array,p=l.itemSize,g=l.normalized,v=new f.constructor(c.length*p);let _=0,x=0;for(let T=0,S=c.length;T<S;T++){l.isInterleavedBufferAttribute?_=c[T]*l.data.stride+l.offset:_=c[T]*p;for(let w=0;w<p;w++)v[x++]=f[_++]}return new hi(v,p,g)}if(this.index===null)return Mt("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new gn,i=this.index.array,r=this.attributes;for(const l in r){const c=r[l],f=e(c,i);t.setAttribute(l,f)}const a=this.morphAttributes;for(const l in a){const c=[],f=a[l];for(let p=0,g=f.length;p<g;p++){const v=f[p],_=e(v,i);c.push(_)}t.morphAttributes[l]=c}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let l=0,c=s.length;l<c;l++){const f=s[l];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const f in c)c[f]!==void 0&&(e[f]=c[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i){const f=i[c];e.data.attributes[c]=f.toJSON(e.data)}const r={};let a=!1;for(const c in this.morphAttributes){const f=this.morphAttributes[c],p=[];for(let g=0,v=f.length;g<v;g++){const _=f[g];p.push(_.toJSON(e.data))}p.length>0&&(r[c]=p,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere=l.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const f in r){const p=r[f];this.setAttribute(f,p.clone(t))}const a=e.morphAttributes;for(const f in a){const p=[],g=a[f];for(let v=0,_=g.length;v<_;v++)p.push(g[v].clone(t));this.morphAttributes[f]=p}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let f=0,p=s.length;f<p;f++){const g=s[f];this.addGroup(g.start,g.count,g.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const CU=new pn,rm=new gg,I1=new Ca,IU=new re,R1=new re,P1=new re,N1=new re,mI=new re,O1=new re,RU=new re,D1=new re;class Zr extends ni{constructor(e=new gn,t=new fp){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const l=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,a=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(a&&l){O1.set(0,0,0);for(let c=0,f=a.length;c<f;c++){const p=l[c],g=a[c];p!==0&&(mI.fromBufferAttribute(g,e),s?O1.addScaledVector(mI,p):O1.addScaledVector(mI.sub(t),p))}t.add(O1)}return t}raycast(e,t){const i=this.geometry,r=this.material,a=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),I1.copy(i.boundingSphere),I1.applyMatrix4(a),rm.copy(e.ray).recast(e.near),!(I1.containsPoint(rm.origin)===!1&&(rm.intersectSphere(I1,IU)===null||rm.origin.distanceToSquared(IU)>(e.far-e.near)**2))&&(CU.copy(a).invert(),rm.copy(e.ray).applyMatrix4(CU),!(i.boundingBox!==null&&rm.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,rm)))}_computeIntersections(e,t,i){let r;const a=this.geometry,s=this.material,l=a.index,c=a.attributes.position,f=a.attributes.uv,p=a.attributes.uv1,g=a.attributes.normal,v=a.groups,_=a.drawRange;if(l!==null)if(Array.isArray(s))for(let x=0,T=v.length;x<T;x++){const S=v[x],w=s[S.materialIndex],I=Math.max(S.start,_.start),R=Math.min(l.count,Math.min(S.start+S.count,_.start+_.count));for(let D=I,B=R;D<B;D+=3){const z=l.getX(D),k=l.getX(D+1),F=l.getX(D+2);r=L1(this,w,e,i,f,p,g,z,k,F),r&&(r.faceIndex=Math.floor(D/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const x=Math.max(0,_.start),T=Math.min(l.count,_.start+_.count);for(let S=x,w=T;S<w;S+=3){const I=l.getX(S),R=l.getX(S+1),D=l.getX(S+2);r=L1(this,s,e,i,f,p,g,I,R,D),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}else if(c!==void 0)if(Array.isArray(s))for(let x=0,T=v.length;x<T;x++){const S=v[x],w=s[S.materialIndex],I=Math.max(S.start,_.start),R=Math.min(c.count,Math.min(S.start+S.count,_.start+_.count));for(let D=I,B=R;D<B;D+=3){const z=D,k=D+1,F=D+2;r=L1(this,w,e,i,f,p,g,z,k,F),r&&(r.faceIndex=Math.floor(D/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const x=Math.max(0,_.start),T=Math.min(c.count,_.start+_.count);for(let S=x,w=T;S<w;S+=3){const I=S,R=S+1,D=S+2;r=L1(this,s,e,i,f,p,g,I,R,D),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}}}function tQ(n,e,t,i,r,a,s,l){let c;if(e.side===eo?c=i.intersectTriangle(s,a,r,!0,l):c=i.intersectTriangle(r,a,s,e.side===lh,l),c===null)return null;D1.copy(l),D1.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(D1);return f<t.near||f>t.far?null:{distance:f,point:D1.clone(),object:n}}function L1(n,e,t,i,r,a,s,l,c,f){n.getVertexPosition(l,R1),n.getVertexPosition(c,P1),n.getVertexPosition(f,N1);const p=tQ(n,e,t,i,R1,P1,N1,RU);if(p){const g=new re;Po.getBarycoord(RU,R1,P1,N1,g),r&&(p.uv=Po.getInterpolatedAttribute(r,l,c,f,g,new tt)),a&&(p.uv1=Po.getInterpolatedAttribute(a,l,c,f,g,new tt)),s&&(p.normal=Po.getInterpolatedAttribute(s,l,c,f,g,new re),p.normal.dot(i.direction)>0&&p.normal.multiplyScalar(-1));const v={a:l,b:c,c:f,normal:new re,materialIndex:0};Po.getNormal(R1,P1,N1,v.normal),p.face=v,p.barycoord=g}return p}class vg extends gn{constructor(e=1,t=1,i=1,r=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:a,depthSegments:s};const l=this;r=Math.floor(r),a=Math.floor(a),s=Math.floor(s);const c=[],f=[],p=[],g=[];let v=0,_=0;x("z","y","x",-1,-1,i,t,e,s,a,0),x("z","y","x",1,-1,i,t,-e,s,a,1),x("x","z","y",1,1,e,i,t,r,s,2),x("x","z","y",1,-1,e,i,-t,r,s,3),x("x","y","z",1,-1,e,t,i,r,a,4),x("x","y","z",-1,-1,e,t,-i,r,a,5),this.setIndex(c),this.setAttribute("position",new zt(f,3)),this.setAttribute("normal",new zt(p,3)),this.setAttribute("uv",new zt(g,2));function x(T,S,w,I,R,D,B,z,k,F,P){const L=D/k,V=B/F,W=D/2,q=B/2,ue=z/2,le=k+1,ee=F+1;let ie=0,he=0;const we=new re;for(let Me=0;Me<ee;Me++){const J=Me*V-q;for(let pe=0;pe<le;pe++){const Ee=pe*L-W;we[T]=Ee*I,we[S]=J*R,we[w]=ue,f.push(we.x,we.y,we.z),we[T]=0,we[S]=0,we[w]=z>0?1:-1,p.push(we.x,we.y,we.z),g.push(pe/k),g.push(1-Me/F),ie+=1}}for(let Me=0;Me<F;Me++)for(let J=0;J<k;J++){const pe=v+J+le*Me,Ee=v+J+le*(Me+1),Ge=v+(J+1)+le*(Me+1),ht=v+(J+1)+le*Me;c.push(pe,Ee,ht),c.push(Ee,Ge,ht),he+=6}l.addGroup(_,he,P),_+=he,v+=ie}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vg(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ty(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(Mt("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function $s(n){const e={};for(let t=0;t<n.length;t++){const i=Ty(n[t]);for(const r in i)e[r]=i[r]}return e}function nQ(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function Ej(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:qn.workingColorSpace}const Tj={clone:Ty,merge:$s};var iQ=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,rQ=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Yl extends Ps{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=iQ,this.fragmentShader=rQ,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ty(e.uniforms),this.uniformsGroups=nQ(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class NA extends ni{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new pn,this.projectionMatrix=new pn,this.projectionMatrixInverse=new pn,this.coordinateSystem=tl,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Sd=new re,PU=new tt,NU=new tt;class kr extends NA{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=wy*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(zm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return wy*2*Math.atan(Math.tan(zm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Sd.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Sd.x,Sd.y).multiplyScalar(-e/Sd.z),Sd.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Sd.x,Sd.y).multiplyScalar(-e/Sd.z)}getViewSize(e,t){return this.getViewBounds(e,PU,NU),t.subVectors(NU,PU)}setViewOffset(e,t,i,r,a,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(zm*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,a=-.5*r;const s=this.view;if(this.view!==null&&this.view.enabled){const c=s.fullWidth,f=s.fullHeight;a+=s.offsetX*r/c,t-=s.offsetY*i/f,r*=s.width/c,i*=s.height/f}const l=this.filmOffset;l!==0&&(a+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Rv=-90,Pv=1;class Aj extends ni{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new kr(Rv,Pv,e,t);r.layers=this.layers,this.add(r);const a=new kr(Rv,Pv,e,t);a.layers=this.layers,this.add(a);const s=new kr(Rv,Pv,e,t);s.layers=this.layers,this.add(s);const l=new kr(Rv,Pv,e,t);l.layers=this.layers,this.add(l);const c=new kr(Rv,Pv,e,t);c.layers=this.layers,this.add(c);const f=new kr(Rv,Pv,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,a,s,l,c]=t;for(const f of t)this.remove(f);if(e===tl)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===xy)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,l,c,f,p]=this.children,g=e.getRenderTarget(),v=e.getActiveCubeFace(),_=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const T=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,a),e.setRenderTarget(i,1,r),e.render(t,s),e.setRenderTarget(i,2,r),e.render(t,l),e.setRenderTarget(i,3,r),e.render(t,c),e.setRenderTarget(i,4,r),e.render(t,f),i.texture.generateMipmaps=T,e.setRenderTarget(i,5,r),e.render(t,p),e.setRenderTarget(g,v,_),e.xr.enabled=x,i.texture.needsPMREMUpdate=!0}}class bx extends Er{constructor(e=[],t=qc,i,r,a,s,l,c,f,p){super(e,t,i,r,a,s,l,c,f,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class aD extends sl{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new bx(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new vg(5,5,5),a=new Yl({name:"CubemapFromEquirect",uniforms:Ty(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:eo,blending:zc});a.uniforms.tEquirect.value=t;const s=new Zr(r,a),l=t.minFilter;return t.minFilter===Dc&&(t.minFilter=Ki),new Aj(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(a)}}class ry extends ni{constructor(){super(),this.isGroup=!0,this.type="Group"}}const aQ={type:"move"};class Bw{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ry,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ry,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new re,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new re),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ry,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new re,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new re),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,a=null,s=null;const l=this._targetRay,c=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){s=!0;for(const T of e.hand.values()){const S=t.getJointPose(T,i),w=this._getHandJoint(f,T);S!==null&&(w.matrix.fromArray(S.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=S.radius),w.visible=S!==null}const p=f.joints["index-finger-tip"],g=f.joints["thumb-tip"],v=p.position.distanceTo(g.position),_=.02,x=.005;f.inputState.pinching&&v>_+x?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&v<=_-x&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,i),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&a!==null&&(r=a),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(aQ)))}return l!==null&&(l.visible=r!==null),c!==null&&(c.visible=a!==null),f!==null&&(f.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new ry;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class OA{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Dt(e),this.density=t}clone(){return new OA(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class DA{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Dt(e),this.near=t,this.far=i}clone(){return new DA(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class sD extends ni{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ll,this.environmentIntensity=1,this.environmentRotation=new ll,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class LA{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Db,this.updateRanges=[],this.version=0,this.uuid=al()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,a=this.stride;r<a;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=al()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=al()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ws=new re;class Zm{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Ws.fromBufferAttribute(this,t),Ws.applyMatrix4(e),this.setXYZ(t,Ws.x,Ws.y,Ws.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ws.fromBufferAttribute(this,t),Ws.applyNormalMatrix(e),this.setXYZ(t,Ws.x,Ws.y,Ws.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ws.fromBufferAttribute(this,t),Ws.transformDirection(e),this.setXYZ(t,Ws.x,Ws.y,Ws.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Ks(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Rn(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Rn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ks(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ks(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ks(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ks(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Rn(t,this.array),i=Rn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Rn(t,this.array),i=Rn(i,this.array),r=Rn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=Rn(t,this.array),i=Rn(i,this.array),r=Rn(r,this.array),a=Rn(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=a,this}clone(e){if(e===void 0){kb("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return new hi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Zm(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){kb("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class oD extends Ps{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Dt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Nv;const P_=new re,Ov=new re,Dv=new re,Lv=new tt,N_=new tt,Mj=new pn,k1=new re,O_=new re,U1=new re,OU=new tt,gI=new tt,DU=new tt;class Cj extends ni{constructor(e=new oD){if(super(),this.isSprite=!0,this.type="Sprite",Nv===void 0){Nv=new gn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new LA(t,5);Nv.setIndex([0,1,2,0,2,3]),Nv.setAttribute("position",new Zm(i,3,0,!1)),Nv.setAttribute("uv",new Zm(i,2,3,!1))}this.geometry=Nv,this.material=e,this.center=new tt(.5,.5),this.count=1}raycast(e,t){e.camera===null&&Yt('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ov.setFromMatrixScale(this.matrixWorld),Mj.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Dv.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ov.multiplyScalar(-Dv.z);const i=this.material.rotation;let r,a;i!==0&&(a=Math.cos(i),r=Math.sin(i));const s=this.center;F1(k1.set(-.5,-.5,0),Dv,s,Ov,r,a),F1(O_.set(.5,-.5,0),Dv,s,Ov,r,a),F1(U1.set(.5,.5,0),Dv,s,Ov,r,a),OU.set(0,0),gI.set(1,0),DU.set(1,1);let l=e.ray.intersectTriangle(k1,O_,U1,!1,P_);if(l===null&&(F1(O_.set(-.5,.5,0),Dv,s,Ov,r,a),gI.set(0,1),l=e.ray.intersectTriangle(k1,U1,O_,!1,P_),l===null))return;const c=e.ray.origin.distanceTo(P_);c<e.near||c>e.far||t.push({distance:c,point:P_.clone(),uv:Po.getInterpolation(P_,k1,O_,U1,OU,gI,DU,new tt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function F1(n,e,t,i,r,a){Lv.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(N_.x=a*Lv.x-r*Lv.y,N_.y=r*Lv.x+a*Lv.y):N_.copy(Lv),n.copy(e),n.x+=N_.x,n.y+=N_.y,n.applyMatrix4(Mj)}const z1=new re,LU=new re;class Ij extends ni{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const a=t[i];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let a;for(a=0;a<r.length&&!(t<r[a].distance);a++);return r.splice(a,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),e<a)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){z1.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(z1);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){z1.setFromMatrixPosition(e.matrixWorld),LU.setFromMatrixPosition(this.matrixWorld);const i=z1.distanceTo(LU)/e.zoom;t[0].object.visible=!0;let r,a;for(r=1,a=t.length;r<a;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),i>=s)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<a;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,a=i.length;r<a;r++){const s=i[r];t.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return t}}const kU=new re,UU=new Ni,FU=new Ni,sQ=new re,zU=new pn,B1=new re,vI=new Ca,BU=new pn,yI=new gg;class Rj extends Zr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=YP,this.bindMatrix=new pn,this.bindMatrixInverse=new pn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new es),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,B1),this.boundingBox.expandByPoint(B1)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ca),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,B1),this.boundingSphere.expandByPoint(B1)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),vI.copy(this.boundingSphere),vI.applyMatrix4(r),e.ray.intersectsSphere(vI)!==!1&&(BU.copy(r).invert(),yI.copy(e.ray).applyMatrix4(BU),!(this.boundingBox!==null&&yI.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,yI)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ni,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===YP?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===sj?this.bindMatrixInverse.copy(this.bindMatrix).invert():Mt("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;UU.fromBufferAttribute(r.attributes.skinIndex,e),FU.fromBufferAttribute(r.attributes.skinWeight,e),kU.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const s=FU.getComponent(a);if(s!==0){const l=UU.getComponent(a);zU.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),t.addScaledVector(sQ.copy(kU).applyMatrix4(zU),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}class lD extends ni{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Du extends Er{constructor(e=null,t=1,i=1,r,a,s,l,c,f=Ur,p=Ur,g,v){super(null,s,l,c,f,p,r,a,g,v),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const VU=new pn,oQ=new pn;class kA{constructor(e=[],t=[]){this.uuid=al(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){Mt("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new pn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new pn;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const l=e[a]?e[a].matrixWorld:oQ;VU.multiplyMatrices(l,t[a]),VU.toArray(i,a*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new kA(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Du(t,e,e,Ms,Zs);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const a=e.bones[i];let s=t[a];s===void 0&&(Mt("Skeleton: No bone found with UUID:",a),s=new lD),this.bones.push(s),this.boneInverses.push(new pn().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,a=t.length;r<a;r++){const s=t[r];e.bones.push(s.uuid);const l=i[r];e.boneInverses.push(l.toArray())}return e}}class Ay extends hi{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const kv=new pn,jU=new pn,V1=[],HU=new es,lQ=new pn,D_=new Zr,L_=new Ca;class Pj extends Zr{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Ay(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,lQ)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new es),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,kv),HU.copy(e.boundingBox).applyMatrix4(kv),this.boundingBox.union(HU)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ca),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,kv),L_.copy(e.boundingSphere).applyMatrix4(kv),this.boundingSphere.union(L_)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,a=i.length+1,s=e*a+1;for(let l=0;l<i.length;l++)i[l]=r[s+l]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(D_.geometry=this.geometry,D_.material=this.material,D_.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),L_.copy(this.boundingSphere),L_.applyMatrix4(i),e.ray.intersectsSphere(L_)!==!1))for(let a=0;a<r;a++){this.getMatrixAt(a,kv),jU.multiplyMatrices(i,kv),D_.matrixWorld=jU,D_.raycast(e,V1);for(let s=0,l=V1.length;s<l;s++){const c=V1[s];c.instanceId=a,c.object=this,t.push(c)}V1.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Ay(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Du(new Float32Array(r*this.count),r,this.count,EA,Zs));const a=this.morphTexture.source.data.data;let s=0;for(let f=0;f<i.length;f++)s+=i[f];const l=this.geometry.morphTargetsRelative?1:1-s,c=r*e;a[c]=l,a.set(i,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const _I=new re,uQ=new re,cQ=new Tn;class Xf{constructor(e=new re(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=_I.subVectors(i,t).cross(uQ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(_I),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:t.copy(e.start).addScaledVector(i,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||cQ.getNormalMatrix(e),r=this.coplanarPoint(_I).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const am=new Ca,fQ=new tt(.5,.5),j1=new re;class qy{constructor(e=new Xf,t=new Xf,i=new Xf,r=new Xf,a=new Xf,s=new Xf){this.planes=[e,t,i,r,a,s]}set(e,t,i,r,a,s){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(i),l[3].copy(r),l[4].copy(a),l[5].copy(s),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=tl,i=!1){const r=this.planes,a=e.elements,s=a[0],l=a[1],c=a[2],f=a[3],p=a[4],g=a[5],v=a[6],_=a[7],x=a[8],T=a[9],S=a[10],w=a[11],I=a[12],R=a[13],D=a[14],B=a[15];if(r[0].setComponents(f-s,_-p,w-x,B-I).normalize(),r[1].setComponents(f+s,_+p,w+x,B+I).normalize(),r[2].setComponents(f+l,_+g,w+T,B+R).normalize(),r[3].setComponents(f-l,_-g,w-T,B-R).normalize(),i)r[4].setComponents(c,v,S,D).normalize(),r[5].setComponents(f-c,_-v,w-S,B-D).normalize();else if(r[4].setComponents(f-c,_-v,w-S,B-D).normalize(),t===tl)r[5].setComponents(f+c,_+v,w+S,B+D).normalize();else if(t===xy)r[5].setComponents(c,v,S,D).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),am.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),am.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(am)}intersectsSprite(e){am.center.set(0,0,0);const t=fQ.distanceTo(e.center);return am.radius=.7071067811865476+t,am.applyMatrix4(e.matrixWorld),this.intersectsSphere(am)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(j1.x=r.normal.x>0?e.max.x:e.min.x,j1.y=r.normal.y>0?e.max.y:e.min.y,j1.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(j1)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const wc=new pn,Ec=new qy;class UA{constructor(){this.coordinateSystem=tl}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(wc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Ec.setFromProjectionMatrix(wc,r.coordinateSystem,r.reversedDepth),Ec.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(wc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Ec.setFromProjectionMatrix(wc,r.coordinateSystem,r.reversedDepth),Ec.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(wc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Ec.setFromProjectionMatrix(wc,r.coordinateSystem,r.reversedDepth),Ec.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(wc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Ec.setFromProjectionMatrix(wc,r.coordinateSystem,r.reversedDepth),Ec.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(wc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Ec.setFromProjectionMatrix(wc,r.coordinateSystem,r.reversedDepth),Ec.containsPoint(e))return!0}return!1}clone(){return new UA}}function bI(n,e){return n-e}function hQ(n,e){return n.z-e.z}function dQ(n,e){return e.z-n.z}class pQ{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const a=this.pool,s=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const l=a[this.index];s.push(l),this.index++,l.start=e,l.count=t,l.z=i,l.index=r}reset(){this.list.length=0,this.index=0}}const Co=new pn,mQ=new Dt(1,1,1),GU=new qy,gQ=new UA,H1=new es,sm=new Ca,k_=new re,WU=new re,vQ=new re,xI=new pQ,xs=new Zr,G1=[];function yQ(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let a=0;a<r;a++)for(let s=0;s<i;s++)e.setComponent(a+t,s,n.getComponent(a,s))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function om(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class Nj extends Zr{constructor(e,t,i=t*2,r){super(new gn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Du(t,e,e,Ms,Zs);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Du(t,e,e,_x,Xl);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Du(t,e,e,Ms,Zs);i.colorSpace=qn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const s=e.getAttribute(a),{array:l,itemSize:c,normalized:f}=s,p=new l.constructor(i*c),g=new hi(p,c,f);t.setAttribute(a,g)}if(e.getIndex()!==null){const a=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new hi(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),a=t.getAttribute(i);if(r.itemSize!==a.itemSize||r.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new es);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,Co),this.getBoundingBoxAt(a,H1).applyMatrix4(Co),e.union(H1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ca);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,Co),this.getBoundingSphereAt(a,sm).applyMatrix4(Co),e.union(sm)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(bI),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const a=this._matricesTexture;Co.identity().toArray(a.image.data,r*16),a.needsUpdate=!0;const s=this._colorsTexture;return s&&(mQ.toArray(s.image.data,r*4),s.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const s=e.getIndex();if(s!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?s.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(bI),c=this._availableGeometryIds.shift(),a[c]=r):(c=this._geometryCount,this._geometryCount++,a.push(r)),this.setGeometryAt(c,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,c}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,a=i.getIndex(),s=t.getIndex(),l=this._geometryInfo[e];if(r&&s.count>l.reservedIndexCount||t.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=l.vertexStart,f=l.reservedVertexCount;l.vertexCount=t.getAttribute("position").count;for(const p in i.attributes){const g=t.getAttribute(p),v=i.getAttribute(p);yQ(g,v,c);const _=g.itemSize;for(let x=g.count,T=f;x<T;x++){const S=c+x;for(let w=0;w<_;w++)v.setComponent(S,w,0)}v.needsUpdate=!0,v.addUpdateRange(c*_,f*_)}if(r){const p=l.indexStart,g=l.reservedIndexCount;l.indexCount=t.getIndex().count;for(let v=0;v<s.count;v++)a.setX(p+v,c+s.getX(v));for(let v=s.count,_=g;v<_;v++)a.setX(p+v,c);a.needsUpdate=!0,a.addUpdateRange(p,l.reservedIndexCount)}return l.start=r?l.indexStart:l.vertexStart,l.count=r?l.indexCount:l.vertexCount,l.boundingBox=null,t.boundingBox!==null&&(l.boundingBox=t.boundingBox.clone()),l.boundingSphere=null,t.boundingSphere!==null&&(l.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,a=i.length;r<a;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((s,l)=>l).sort((s,l)=>i[s].vertexStart-i[l].vertexStart),a=this.geometry;for(let s=0,l=i.length;s<l;s++){const c=r[s],f=i[c];if(f.active!==!1){if(a.index!==null){if(f.indexStart!==t){const{indexStart:p,vertexStart:g,reservedIndexCount:v}=f,_=a.index,x=_.array,T=e-g;for(let S=p;S<p+v;S++)x[S]=x[S]+T;_.array.copyWithin(t,p,p+v),_.addUpdateRange(t,v),_.needsUpdate=!0,f.indexStart=t}t+=f.reservedIndexCount}if(f.vertexStart!==e){const{vertexStart:p,reservedVertexCount:g}=f,v=a.attributes;for(const _ in v){const x=v[_],{array:T,itemSize:S}=x;T.copyWithin(e*S,p*S,(p+g)*S),x.addUpdateRange(e*S,g*S),x.needsUpdate=!0}f.vertexStart=e}e+=f.reservedVertexCount,f.start=a.index?f.indexStart:f.vertexStart,this._nextIndexStart=a.index?f.indexStart+f.reservedIndexCount:0,this._nextVertexStart=f.vertexStart+f.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const a=new es,s=i.index,l=i.attributes.position;for(let c=r.start,f=r.start+r.count;c<f;c++){let p=c;s&&(p=s.getX(p)),a.expandByPoint(k_.fromBufferAttribute(l,p))}r.boundingBox=a}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const a=new Ca;this.getBoundingBoxAt(e,H1),H1.getCenter(a.center);const s=i.index,l=i.attributes.position;let c=0;for(let f=r.start,p=r.start+r.count;f<p;f++){let g=f;s&&(g=s.getX(g)),k_.fromBufferAttribute(l,g),c=Math.max(c,a.center.distanceToSquared(k_))}a.radius=Math.sqrt(c),r.boundingSphere=a}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(bI);t[t.length-1]===i.length-1;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),a=new Int32Array(e);om(this._multiDrawCounts,r),om(this._multiDrawStarts,a),this._multiDrawCounts=r,this._multiDrawStarts=a,this._maxInstanceCount=e;const s=this._indirectTexture,l=this._matricesTexture,c=this._colorsTexture;s.dispose(),this._initIndirectTexture(),om(s.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),om(l.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),om(c.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...i.map(l=>l.vertexStart+l.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(c=>c.indexStart+c.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new gn,this._initializeGeometry(a));const s=this.geometry;a.index&&om(a.index.array,s.index.array);for(const l in a.attributes)om(a.attributes[l].array,s.attributes[l].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,a=this.matrixWorld,s=this.geometry;xs.material=this.material,xs.geometry.index=s.index,xs.geometry.attributes=s.attributes,xs.geometry.boundingBox===null&&(xs.geometry.boundingBox=new es),xs.geometry.boundingSphere===null&&(xs.geometry.boundingSphere=new Ca);for(let l=0,c=i.length;l<c;l++){if(!i[l].visible||!i[l].active)continue;const f=i[l].geometryIndex,p=r[f];xs.geometry.setDrawRange(p.start,p.count),this.getMatrixAt(l,xs.matrixWorld).premultiply(a),this.getBoundingBoxAt(f,xs.geometry.boundingBox),this.getBoundingSphereAt(f,xs.geometry.boundingSphere),xs.raycast(e,G1);for(let g=0,v=G1.length;g<v;g++){const _=G1[g];_.object=this,_.batchId=l,t.push(_)}G1.length=0}xs.material=null,xs.geometry.index=null,xs.geometry.attributes={},xs.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=r.getIndex(),l=s===null?1:s.array.BYTES_PER_ELEMENT,c=this._instanceInfo,f=this._multiDrawStarts,p=this._multiDrawCounts,g=this._geometryInfo,v=this.perObjectFrustumCulled,_=this._indirectTexture,x=_.image.data,T=i.isArrayCamera?gQ:GU;v&&!i.isArrayCamera&&(Co.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),GU.setFromProjectionMatrix(Co,i.coordinateSystem,i.reversedDepth));let S=0;if(this.sortObjects){Co.copy(this.matrixWorld).invert(),k_.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Co),WU.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Co);for(let R=0,D=c.length;R<D;R++)if(c[R].visible&&c[R].active){const B=c[R].geometryIndex;this.getMatrixAt(R,Co),this.getBoundingSphereAt(B,sm).applyMatrix4(Co);let z=!1;if(v&&(z=!T.intersectsSphere(sm,i)),!z){const k=g[B],F=vQ.subVectors(sm.center,k_).dot(WU);xI.push(k.start,k.count,F,R)}}const w=xI.list,I=this.customSort;I===null?w.sort(a.transparent?dQ:hQ):I.call(this,w,i);for(let R=0,D=w.length;R<D;R++){const B=w[R];f[S]=B.start*l,p[S]=B.count,x[S]=B.index,S++}xI.reset()}else for(let w=0,I=c.length;w<I;w++)if(c[w].visible&&c[w].active){const R=c[w].geometryIndex;let D=!1;if(v&&(this.getMatrixAt(w,Co),this.getBoundingSphereAt(R,sm).applyMatrix4(Co),D=!T.intersectsSphere(sm,i)),!D){const B=g[R];f[S]=B.start*l,p[S]=B.count,x[S]=w,S++}}_.needsUpdate=!0,this._multiDrawCount=S,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,a,s){this.onBeforeRender(e,null,r,a,s)}}class no extends Ps{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Dt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const YE=new re,KE=new re,qU=new pn,U_=new gg,W1=new Ca,SI=new re,$U=new re;class ep extends ni{constructor(e=new gn,t=new no){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,a=t.count;r<a;r++)YE.fromBufferAttribute(t,r-1),KE.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=YE.distanceTo(KE);e.setAttribute("lineDistance",new zt(i,1))}else Mt("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),W1.copy(i.boundingSphere),W1.applyMatrix4(r),W1.radius+=a,e.ray.intersectsSphere(W1)===!1)return;qU.copy(r).invert(),U_.copy(e.ray).applyMatrix4(qU);const l=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,f=this.isLineSegments?2:1,p=i.index,v=i.attributes.position;if(p!==null){const _=Math.max(0,s.start),x=Math.min(p.count,s.start+s.count);for(let T=_,S=x-1;T<S;T+=f){const w=p.getX(T),I=p.getX(T+1),R=q1(this,e,U_,c,w,I,T);R&&t.push(R)}if(this.isLineLoop){const T=p.getX(x-1),S=p.getX(_),w=q1(this,e,U_,c,T,S,x-1);w&&t.push(w)}}else{const _=Math.max(0,s.start),x=Math.min(v.count,s.start+s.count);for(let T=_,S=x-1;T<S;T+=f){const w=q1(this,e,U_,c,T,T+1,T);w&&t.push(w)}if(this.isLineLoop){const T=q1(this,e,U_,c,x-1,_,x-1);T&&t.push(T)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const l=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}}function q1(n,e,t,i,r,a,s){const l=n.geometry.attributes.position;if(YE.fromBufferAttribute(l,r),KE.fromBufferAttribute(l,a),t.distanceSqToSegment(YE,KE,SI,$U)>i)return;SI.applyMatrix4(n.matrixWorld);const f=e.ray.origin.distanceTo(SI);if(!(f<e.near||f>e.far))return{distance:f,point:$U.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}const XU=new re,YU=new re;class sf extends ep{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,a=t.count;r<a;r+=2)XU.fromBufferAttribute(t,r),YU.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+XU.distanceTo(YU);e.setAttribute("lineDistance",new zt(i,1))}else Mt("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Oj extends ep{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class uD extends Ps{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Dt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const KU=new pn,QP=new gg,$1=new Ca,X1=new re;class Dj extends ni{constructor(e=new gn,t=new uD){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),$1.copy(i.boundingSphere),$1.applyMatrix4(r),$1.radius+=a,e.ray.intersectsSphere($1)===!1)return;KU.copy(r).invert(),QP.copy(e.ray).applyMatrix4(KU);const l=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,f=i.index,g=i.attributes.position;if(f!==null){const v=Math.max(0,s.start),_=Math.min(f.count,s.start+s.count);for(let x=v,T=_;x<T;x++){const S=f.getX(x);X1.fromBufferAttribute(g,S),ZU(X1,S,c,r,e,t,this)}}else{const v=Math.max(0,s.start),_=Math.min(g.count,s.start+s.count);for(let x=v,T=_;x<T;x++)X1.fromBufferAttribute(g,x),ZU(X1,x,c,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const l=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}}function ZU(n,e,t,i,r,a,s){const l=QP.distanceSqToPoint(n);if(l<t){const c=new re;QP.closestPointToPoint(n,c),c.applyMatrix4(i);const f=r.ray.origin.distanceTo(c);if(f<r.near||f>r.far)return;a.push({distance:f,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}class Lj extends Er{constructor(e,t,i,r,a=Ki,s=Ki,l,c,f){super(e,t,i,r,a,s,l,c,f),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const p=this;function g(){p.needsUpdate=!0,p._requestVideoFrameCallbackId=e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(g))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class _Q extends Lj{constructor(e,t,i,r,a,s,l,c){super({},e,t,i,r,a,s,l,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class bQ extends Er{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ur,this.minFilter=Ur,this.generateMipmaps=!1,this.needsUpdate=!0}}class FA extends Er{constructor(e,t,i,r,a,s,l,c,f,p,g,v){super(null,s,l,c,f,p,r,a,g,v),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class xQ extends FA{constructor(e,t,i,r,a,s){super(e,t,i,a,s),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Oo,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class SQ extends FA{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,qc),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class wQ extends Er{constructor(e,t,i,r,a,s,l,c,f){super(e,t,i,r,a,s,l,c,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class My extends Er{constructor(e,t,i=Xl,r,a,s,l=Ur,c=Ur,f,p=Xc,g=1){if(p!==Xc&&p!==Fd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const v={width:e,height:t,depth:g};super(v,r,a,s,l,c,p,i,f),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new zd(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class kj extends My{constructor(e,t=Xl,i=qc,r,a,s=Ur,l=Ur,c,f=Xc){const p={width:e,height:e,depth:1},g=[p,p,p,p,p,p];super(e,e,t,i,r,a,s,l,c,f),this.image=g,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class cD extends Er{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class zA extends gn{constructor(e=1,t=1,i=4,r=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:a},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),a=Math.max(1,Math.floor(a));const s=[],l=[],c=[],f=[],p=t/2,g=Math.PI/2*e,v=t,_=2*g+v,x=i*2+a,T=r+1,S=new re,w=new re;for(let I=0;I<=x;I++){let R=0,D=0,B=0,z=0;if(I<=i){const P=I/i,L=P*Math.PI/2;D=-p-e*Math.cos(L),B=e*Math.sin(L),z=-e*Math.cos(L),R=P*g}else if(I<=i+a){const P=(I-i)/a;D=-p+P*t,B=e,z=0,R=g+P*v}else{const P=(I-i-a)/i,L=P*Math.PI/2;D=p+e*Math.sin(L),B=e*Math.cos(L),z=e*Math.sin(L),R=g+v+P*g}const k=Math.max(0,Math.min(1,R/_));let F=0;I===0?F=.5/r:I===x&&(F=-.5/r);for(let P=0;P<=r;P++){const L=P/r,V=L*Math.PI*2,W=Math.sin(V),q=Math.cos(V);w.x=-B*q,w.y=D,w.z=B*W,l.push(w.x,w.y,w.z),S.set(-B*q,z,B*W),S.normalize(),c.push(S.x,S.y,S.z),f.push(L+F,k)}if(I>0){const P=(I-1)*T;for(let L=0;L<r;L++){const V=P+L,W=P+L+1,q=I*T+L,ue=I*T+L+1;s.push(V,W,q),s.push(W,ue,q)}}}this.setIndex(s),this.setAttribute("position",new zt(l,3)),this.setAttribute("normal",new zt(c,3)),this.setAttribute("uv",new zt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zA(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class BA extends gn{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const a=[],s=[],l=[],c=[],f=new re,p=new tt;s.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(let g=0,v=3;g<=t;g++,v+=3){const _=i+g/t*r;f.x=e*Math.cos(_),f.y=e*Math.sin(_),s.push(f.x,f.y,f.z),l.push(0,0,1),p.x=(s[v]/e+1)/2,p.y=(s[v+1]/e+1)/2,c.push(p.x,p.y)}for(let g=1;g<=t;g++)a.push(g,g+1,0);this.setIndex(a),this.setAttribute("position",new zt(s,3)),this.setAttribute("normal",new zt(l,3)),this.setAttribute("uv",new zt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new BA(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class xx extends gn{constructor(e=1,t=1,i=1,r=32,a=1,s=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:a,openEnded:s,thetaStart:l,thetaLength:c};const f=this;r=Math.floor(r),a=Math.floor(a);const p=[],g=[],v=[],_=[];let x=0;const T=[],S=i/2;let w=0;I(),s===!1&&(e>0&&R(!0),t>0&&R(!1)),this.setIndex(p),this.setAttribute("position",new zt(g,3)),this.setAttribute("normal",new zt(v,3)),this.setAttribute("uv",new zt(_,2));function I(){const D=new re,B=new re;let z=0;const k=(t-e)/i;for(let F=0;F<=a;F++){const P=[],L=F/a,V=L*(t-e)+e;for(let W=0;W<=r;W++){const q=W/r,ue=q*c+l,le=Math.sin(ue),ee=Math.cos(ue);B.x=V*le,B.y=-L*i+S,B.z=V*ee,g.push(B.x,B.y,B.z),D.set(le,k,ee).normalize(),v.push(D.x,D.y,D.z),_.push(q,1-L),P.push(x++)}T.push(P)}for(let F=0;F<r;F++)for(let P=0;P<a;P++){const L=T[P][F],V=T[P+1][F],W=T[P+1][F+1],q=T[P][F+1];(e>0||P!==0)&&(p.push(L,V,q),z+=3),(t>0||P!==a-1)&&(p.push(V,W,q),z+=3)}f.addGroup(w,z,0),w+=z}function R(D){const B=x,z=new tt,k=new re;let F=0;const P=D===!0?e:t,L=D===!0?1:-1;for(let W=1;W<=r;W++)g.push(0,S*L,0),v.push(0,L,0),_.push(.5,.5),x++;const V=x;for(let W=0;W<=r;W++){const ue=W/r*c+l,le=Math.cos(ue),ee=Math.sin(ue);k.x=P*ee,k.y=S*L,k.z=P*le,g.push(k.x,k.y,k.z),v.push(0,L,0),z.x=le*.5+.5,z.y=ee*.5*L+.5,_.push(z.x,z.y),x++}for(let W=0;W<r;W++){const q=B+W,ue=V+W;D===!0?p.push(ue,ue+1,q):p.push(ue+1,ue,q),F+=3}f.addGroup(w,F,D===!0?1:2),w+=F}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xx(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Sx extends xx{constructor(e=1,t=1,i=32,r=1,a=!1,s=0,l=Math.PI*2){super(0,e,t,i,r,a,s,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:l}}static fromJSON(e){return new Sx(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class hp extends gn{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const a=[],s=[];l(r),f(i),p(),this.setAttribute("position",new zt(a,3)),this.setAttribute("normal",new zt(a.slice(),3)),this.setAttribute("uv",new zt(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(I){const R=new re,D=new re,B=new re;for(let z=0;z<t.length;z+=3)_(t[z+0],R),_(t[z+1],D),_(t[z+2],B),c(R,D,B,I)}function c(I,R,D,B){const z=B+1,k=[];for(let F=0;F<=z;F++){k[F]=[];const P=I.clone().lerp(D,F/z),L=R.clone().lerp(D,F/z),V=z-F;for(let W=0;W<=V;W++)W===0&&F===z?k[F][W]=P:k[F][W]=P.clone().lerp(L,W/V)}for(let F=0;F<z;F++)for(let P=0;P<2*(z-F)-1;P++){const L=Math.floor(P/2);P%2===0?(v(k[F][L+1]),v(k[F+1][L]),v(k[F][L])):(v(k[F][L+1]),v(k[F+1][L+1]),v(k[F+1][L]))}}function f(I){const R=new re;for(let D=0;D<a.length;D+=3)R.x=a[D+0],R.y=a[D+1],R.z=a[D+2],R.normalize().multiplyScalar(I),a[D+0]=R.x,a[D+1]=R.y,a[D+2]=R.z}function p(){const I=new re;for(let R=0;R<a.length;R+=3){I.x=a[R+0],I.y=a[R+1],I.z=a[R+2];const D=S(I)/2/Math.PI+.5,B=w(I)/Math.PI+.5;s.push(D,1-B)}x(),g()}function g(){for(let I=0;I<s.length;I+=6){const R=s[I+0],D=s[I+2],B=s[I+4],z=Math.max(R,D,B),k=Math.min(R,D,B);z>.9&&k<.1&&(R<.2&&(s[I+0]+=1),D<.2&&(s[I+2]+=1),B<.2&&(s[I+4]+=1))}}function v(I){a.push(I.x,I.y,I.z)}function _(I,R){const D=I*3;R.x=e[D+0],R.y=e[D+1],R.z=e[D+2]}function x(){const I=new re,R=new re,D=new re,B=new re,z=new tt,k=new tt,F=new tt;for(let P=0,L=0;P<a.length;P+=9,L+=6){I.set(a[P+0],a[P+1],a[P+2]),R.set(a[P+3],a[P+4],a[P+5]),D.set(a[P+6],a[P+7],a[P+8]),z.set(s[L+0],s[L+1]),k.set(s[L+2],s[L+3]),F.set(s[L+4],s[L+5]),B.copy(I).add(R).add(D).divideScalar(3);const V=S(B);T(z,L+0,I,V),T(k,L+2,R,V),T(F,L+4,D,V)}}function T(I,R,D,B){B<0&&I.x===1&&(s[R]=I.x-1),D.x===0&&D.z===0&&(s[R]=B/2/Math.PI+.5)}function S(I){return Math.atan2(I.z,-I.x)}function w(I){return Math.atan2(-I.y,Math.sqrt(I.x*I.x+I.z*I.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hp(e.vertices,e.indices,e.radius,e.detail)}}class VA extends hp{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new VA(e.radius,e.detail)}}const Y1=new re,K1=new re,wI=new re,Z1=new Po;class Uj extends gn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),a=Math.cos(zm*t),s=e.getIndex(),l=e.getAttribute("position"),c=s?s.count:l.count,f=[0,0,0],p=["a","b","c"],g=new Array(3),v={},_=[];for(let x=0;x<c;x+=3){s?(f[0]=s.getX(x),f[1]=s.getX(x+1),f[2]=s.getX(x+2)):(f[0]=x,f[1]=x+1,f[2]=x+2);const{a:T,b:S,c:w}=Z1;if(T.fromBufferAttribute(l,f[0]),S.fromBufferAttribute(l,f[1]),w.fromBufferAttribute(l,f[2]),Z1.getNormal(wI),g[0]=`${Math.round(T.x*r)},${Math.round(T.y*r)},${Math.round(T.z*r)}`,g[1]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,g[2]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let I=0;I<3;I++){const R=(I+1)%3,D=g[I],B=g[R],z=Z1[p[I]],k=Z1[p[R]],F=`${D}_${B}`,P=`${B}_${D}`;P in v&&v[P]?(wI.dot(v[P].normal)<=a&&(_.push(z.x,z.y,z.z),_.push(k.x,k.y,k.z)),v[P]=null):F in v||(v[F]={index0:f[I],index1:f[R],normal:wI.clone()})}}for(const x in v)if(v[x]){const{index0:T,index1:S}=v[x];Y1.fromBufferAttribute(l,T),K1.fromBufferAttribute(l,S),_.push(Y1.x,Y1.y,Y1.z),_.push(K1.x,K1.y,K1.z)}this.setAttribute("position",new zt(_,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let ju=class{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){Mt("Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),a=0;t.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),a+=i.distanceTo(r),t.push(a),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const a=i.length;let s;t?s=t:s=e*i[a-1];let l=0,c=a-1,f;for(;l<=c;)if(r=Math.floor(l+(c-l)/2),f=i[r]-s,f<0)l=r+1;else if(f>0)c=r-1;else{c=r;break}if(r=c,i[r]===s)return r/(a-1);const p=i[r],v=i[r+1]-p,_=(s-p)/v;return(r+_)/(a-1)}getTangent(e,t){let r=e-1e-4,a=e+1e-4;r<0&&(r=0),a>1&&(a=1);const s=this.getPoint(r),l=this.getPoint(a),c=t||(s.isVector2?new tt:new re);return c.copy(l).sub(s).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new re,r=[],a=[],s=[],l=new re,c=new pn;for(let _=0;_<=e;_++){const x=_/e;r[_]=this.getTangentAt(x,new re)}a[0]=new re,s[0]=new re;let f=Number.MAX_VALUE;const p=Math.abs(r[0].x),g=Math.abs(r[0].y),v=Math.abs(r[0].z);p<=f&&(f=p,i.set(1,0,0)),g<=f&&(f=g,i.set(0,1,0)),v<=f&&i.set(0,0,1),l.crossVectors(r[0],i).normalize(),a[0].crossVectors(r[0],l),s[0].crossVectors(r[0],a[0]);for(let _=1;_<=e;_++){if(a[_]=a[_-1].clone(),s[_]=s[_-1].clone(),l.crossVectors(r[_-1],r[_]),l.length()>Number.EPSILON){l.normalize();const x=Math.acos(fn(r[_-1].dot(r[_]),-1,1));a[_].applyMatrix4(c.makeRotationAxis(l,x))}s[_].crossVectors(r[_],a[_])}if(t===!0){let _=Math.acos(fn(a[0].dot(a[e]),-1,1));_/=e,r[0].dot(l.crossVectors(a[0],a[e]))>0&&(_=-_);for(let x=1;x<=e;x++)a[x].applyMatrix4(c.makeRotationAxis(r[x],_*x)),s[x].crossVectors(r[x],a[x])}return{tangents:r,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}};class jA extends ju{constructor(e=0,t=0,i=1,r=1,a=0,s=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=l,this.aRotation=c}getPoint(e,t=new tt){const i=t,r=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(s?a=0:a=r),this.aClockwise===!0&&!s&&(a===r?a=-r:a=a-r);const l=this.aStartAngle+e*a;let c=this.aX+this.xRadius*Math.cos(l),f=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const p=Math.cos(this.aRotation),g=Math.sin(this.aRotation),v=c-this.aX,_=f-this.aY;c=v*p-_*g+this.aX,f=v*g+_*p+this.aY}return i.set(c,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Fj extends jA{constructor(e,t,i,r,a,s){super(e,t,i,i,r,a,s),this.isArcCurve=!0,this.type="ArcCurve"}}function fD(){let n=0,e=0,t=0,i=0;function r(a,s,l,c){n=a,e=l,t=-3*a+3*s-2*l-c,i=2*a-2*s+l+c}return{initCatmullRom:function(a,s,l,c,f){r(s,l,f*(l-a),f*(c-s))},initNonuniformCatmullRom:function(a,s,l,c,f,p,g){let v=(s-a)/f-(l-a)/(f+p)+(l-s)/p,_=(l-s)/p-(c-s)/(p+g)+(c-l)/g;v*=p,_*=p,r(s,l,v,_)},calc:function(a){const s=a*a,l=s*a;return n+e*a+t*s+i*l}}}const Q1=new re,EI=new fD,TI=new fD,AI=new fD;class zj extends ju{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new re){const i=t,r=this.points,a=r.length,s=(a-(this.closed?0:1))*e;let l=Math.floor(s),c=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/a)+1)*a:c===0&&l===a-1&&(l=a-2,c=1);let f,p;this.closed||l>0?f=r[(l-1)%a]:(Q1.subVectors(r[0],r[1]).add(r[0]),f=Q1);const g=r[l%a],v=r[(l+1)%a];if(this.closed||l+2<a?p=r[(l+2)%a]:(Q1.subVectors(r[a-1],r[a-2]).add(r[a-1]),p=Q1),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let x=Math.pow(f.distanceToSquared(g),_),T=Math.pow(g.distanceToSquared(v),_),S=Math.pow(v.distanceToSquared(p),_);T<1e-4&&(T=1),x<1e-4&&(x=T),S<1e-4&&(S=T),EI.initNonuniformCatmullRom(f.x,g.x,v.x,p.x,x,T,S),TI.initNonuniformCatmullRom(f.y,g.y,v.y,p.y,x,T,S),AI.initNonuniformCatmullRom(f.z,g.z,v.z,p.z,x,T,S)}else this.curveType==="catmullrom"&&(EI.initCatmullRom(f.x,g.x,v.x,p.x,this.tension),TI.initCatmullRom(f.y,g.y,v.y,p.y,this.tension),AI.initCatmullRom(f.z,g.z,v.z,p.z,this.tension));return i.set(EI.calc(c),TI.calc(c),AI.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new re().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function QU(n,e,t,i,r){const a=(i-e)*.5,s=(r-t)*.5,l=n*n,c=n*l;return(2*t-2*i+a+s)*c+(-3*t+3*i-2*a-s)*l+a*n+t}function EQ(n,e){const t=1-n;return t*t*e}function TQ(n,e){return 2*(1-n)*n*e}function AQ(n,e){return n*n*e}function pb(n,e,t,i){return EQ(n,e)+TQ(n,t)+AQ(n,i)}function MQ(n,e){const t=1-n;return t*t*t*e}function CQ(n,e){const t=1-n;return 3*t*t*n*e}function IQ(n,e){return 3*(1-n)*n*n*e}function RQ(n,e){return n*n*n*e}function mb(n,e,t,i,r){return MQ(n,e)+CQ(n,t)+IQ(n,i)+RQ(n,r)}class hD extends ju{constructor(e=new tt,t=new tt,i=new tt,r=new tt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new tt){const i=t,r=this.v0,a=this.v1,s=this.v2,l=this.v3;return i.set(mb(e,r.x,a.x,s.x,l.x),mb(e,r.y,a.y,s.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Bj extends ju{constructor(e=new re,t=new re,i=new re,r=new re){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new re){const i=t,r=this.v0,a=this.v1,s=this.v2,l=this.v3;return i.set(mb(e,r.x,a.x,s.x,l.x),mb(e,r.y,a.y,s.y,l.y),mb(e,r.z,a.z,s.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class dD extends ju{constructor(e=new tt,t=new tt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new tt){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new tt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Vj extends ju{constructor(e=new re,t=new re){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new re){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new re){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pD extends ju{constructor(e=new tt,t=new tt,i=new tt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new tt){const i=t,r=this.v0,a=this.v1,s=this.v2;return i.set(pb(e,r.x,a.x,s.x),pb(e,r.y,a.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class mD extends ju{constructor(e=new re,t=new re,i=new re){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new re){const i=t,r=this.v0,a=this.v1,s=this.v2;return i.set(pb(e,r.x,a.x,s.x),pb(e,r.y,a.y,s.y),pb(e,r.z,a.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class gD extends ju{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new tt){const i=t,r=this.points,a=(r.length-1)*e,s=Math.floor(a),l=a-s,c=r[s===0?s:s-1],f=r[s],p=r[s>r.length-2?r.length-1:s+1],g=r[s>r.length-3?r.length-1:s+2];return i.set(QU(l,c.x,f.x,p.x,g.x),QU(l,c.y,f.y,p.y,g.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new tt().fromArray(r))}return this}}var ZE=Object.freeze({__proto__:null,ArcCurve:Fj,CatmullRomCurve3:zj,CubicBezierCurve:hD,CubicBezierCurve3:Bj,EllipseCurve:jA,LineCurve:dD,LineCurve3:Vj,QuadraticBezierCurve:pD,QuadraticBezierCurve3:mD,SplineCurve:gD});class jj extends ju{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new ZE[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let a=0;for(;a<r.length;){if(r[a]>=i){const s=r[a]-i,l=this.curves[a],c=l.getLength(),f=c===0?0:1-s/c;return l.getPointAt(f,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,a=this.curves;r<a.length;r++){const s=a[r],l=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,c=s.getPoints(l);for(let f=0;f<c.length;f++){const p=c[f];i&&i.equals(p)||(t.push(p),i=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new ZE[r.type]().fromJSON(r))}return this}}let QE=class extends jj{constructor(e){super(),this.type="Path",this.currentPoint=new tt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new dD(this.currentPoint.clone(),new tt(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const a=new pD(this.currentPoint.clone(),new tt(e,t),new tt(i,r));return this.curves.push(a),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,a,s){const l=new hD(this.currentPoint.clone(),new tt(e,t),new tt(i,r),new tt(a,s));return this.curves.push(l),this.currentPoint.set(a,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new gD(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,a,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+l,t+c,i,r,a,s),this}absarc(e,t,i,r,a,s){return this.absellipse(e,t,i,i,r,a,s),this}ellipse(e,t,i,r,a,s,l,c){const f=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+f,t+p,i,r,a,s,l,c),this}absellipse(e,t,i,r,a,s,l,c){const f=new jA(e,t,i,r,a,s,l,c);if(this.curves.length>0){const g=f.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(f);const p=f.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class Bm extends QE{constructor(e){super(e),this.uuid=al(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new QE().fromJSON(r))}return this}}function PQ(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let a=Hj(n,0,r,t,!0);const s=[];if(!a||a.next===a.prev)return s;let l,c,f;if(i&&(a=kQ(n,e,a,t)),n.length>80*t){l=n[0],c=n[1];let p=l,g=c;for(let v=t;v<r;v+=t){const _=n[v],x=n[v+1];_<l&&(l=_),x<c&&(c=x),_>p&&(p=_),x>g&&(g=x)}f=Math.max(p-l,g-c),f=f!==0?32767/f:0}return Ub(a,s,t,l,c,f,0),s}function Hj(n,e,t,i,r){let a;if(r===$Q(n,e,t,i)>0)for(let s=e;s<t;s+=i)a=JU(s/i|0,n[s],n[s+1],a);else for(let s=t-i;s>=e;s-=i)a=JU(s/i|0,n[s],n[s+1],a);return a&&Cy(a,a.next)&&(zb(a),a=a.next),a}function Qm(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Cy(t,t.next)||mr(t.prev,t,t.next)===0)){if(zb(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Ub(n,e,t,i,r,a,s){if(!n)return;!s&&a&&VQ(n,i,r,a);let l=n;for(;n.prev!==n.next;){const c=n.prev,f=n.next;if(a?OQ(n,i,r,a):NQ(n)){e.push(c.i,n.i,f.i),zb(n),n=f.next,l=f.next;continue}if(n=f,n===l){s?s===1?(n=DQ(Qm(n),e),Ub(n,e,t,i,r,a,2)):s===2&&LQ(n,e,t,i,r,a):Ub(Qm(n),e,t,i,r,a,1);break}}}function NQ(n){const e=n.prev,t=n,i=n.next;if(mr(e,t,i)>=0)return!1;const r=e.x,a=t.x,s=i.x,l=e.y,c=t.y,f=i.y,p=Math.min(r,a,s),g=Math.min(l,c,f),v=Math.max(r,a,s),_=Math.max(l,c,f);let x=i.next;for(;x!==e;){if(x.x>=p&&x.x<=v&&x.y>=g&&x.y<=_&&Z_(r,l,a,c,s,f,x.x,x.y)&&mr(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function OQ(n,e,t,i){const r=n.prev,a=n,s=n.next;if(mr(r,a,s)>=0)return!1;const l=r.x,c=a.x,f=s.x,p=r.y,g=a.y,v=s.y,_=Math.min(l,c,f),x=Math.min(p,g,v),T=Math.max(l,c,f),S=Math.max(p,g,v),w=JP(_,x,e,t,i),I=JP(T,S,e,t,i);let R=n.prevZ,D=n.nextZ;for(;R&&R.z>=w&&D&&D.z<=I;){if(R.x>=_&&R.x<=T&&R.y>=x&&R.y<=S&&R!==r&&R!==s&&Z_(l,p,c,g,f,v,R.x,R.y)&&mr(R.prev,R,R.next)>=0||(R=R.prevZ,D.x>=_&&D.x<=T&&D.y>=x&&D.y<=S&&D!==r&&D!==s&&Z_(l,p,c,g,f,v,D.x,D.y)&&mr(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;R&&R.z>=w;){if(R.x>=_&&R.x<=T&&R.y>=x&&R.y<=S&&R!==r&&R!==s&&Z_(l,p,c,g,f,v,R.x,R.y)&&mr(R.prev,R,R.next)>=0)return!1;R=R.prevZ}for(;D&&D.z<=I;){if(D.x>=_&&D.x<=T&&D.y>=x&&D.y<=S&&D!==r&&D!==s&&Z_(l,p,c,g,f,v,D.x,D.y)&&mr(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function DQ(n,e){let t=n;do{const i=t.prev,r=t.next.next;!Cy(i,r)&&Wj(i,t,t.next,r)&&Fb(i,r)&&Fb(r,i)&&(e.push(i.i,t.i,r.i),zb(t),zb(t.next),t=n=r),t=t.next}while(t!==n);return Qm(t)}function LQ(n,e,t,i,r,a){let s=n;do{let l=s.next.next;for(;l!==s.prev;){if(s.i!==l.i&&GQ(s,l)){let c=qj(s,l);s=Qm(s,s.next),c=Qm(c,c.next),Ub(s,e,t,i,r,a,0),Ub(c,e,t,i,r,a,0);return}l=l.next}s=s.next}while(s!==n)}function kQ(n,e,t,i){const r=[];for(let a=0,s=e.length;a<s;a++){const l=e[a]*i,c=a<s-1?e[a+1]*i:n.length,f=Hj(n,l,c,i,!1);f===f.next&&(f.steiner=!0),r.push(HQ(f))}r.sort(UQ);for(let a=0;a<r.length;a++)t=FQ(r[a],t);return t}function UQ(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function FQ(n,e){const t=zQ(n,e);if(!t)return e;const i=qj(t,n);return Qm(i,i.next),Qm(t,t.next)}function zQ(n,e){let t=e;const i=n.x,r=n.y;let a=-1/0,s;if(Cy(n,t))return t;do{if(Cy(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const g=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=i&&g>a&&(a=g,s=t.x<t.next.x?t:t.next,g===i))return s}t=t.next}while(t!==e);if(!s)return null;const l=s,c=s.x,f=s.y;let p=1/0;t=s;do{if(i>=t.x&&t.x>=c&&i!==t.x&&Gj(r<f?i:a,r,c,f,r<f?a:i,r,t.x,t.y)){const g=Math.abs(r-t.y)/(i-t.x);Fb(t,n)&&(g<p||g===p&&(t.x>s.x||t.x===s.x&&BQ(s,t)))&&(s=t,p=g)}t=t.next}while(t!==l);return s}function BQ(n,e){return mr(n.prev,n,e.prev)<0&&mr(e.next,n,n.next)<0}function VQ(n,e,t,i){let r=n;do r.z===0&&(r.z=JP(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,jQ(r)}function jQ(n){let e,t=1;do{let i=n,r;n=null;let a=null;for(e=0;i;){e++;let s=i,l=0;for(let f=0;f<t&&(l++,s=s.nextZ,!!s);f++);let c=t;for(;l>0||c>0&&s;)l!==0&&(c===0||!s||i.z<=s.z)?(r=i,i=i.nextZ,l--):(r=s,s=s.nextZ,c--),a?a.nextZ=r:n=r,r.prevZ=a,a=r;i=s}a.nextZ=null,t*=2}while(e>1);return n}function JP(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function HQ(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Gj(n,e,t,i,r,a,s,l){return(r-s)*(e-l)>=(n-s)*(a-l)&&(n-s)*(i-l)>=(t-s)*(e-l)&&(t-s)*(a-l)>=(r-s)*(i-l)}function Z_(n,e,t,i,r,a,s,l){return!(n===s&&e===l)&&Gj(n,e,t,i,r,a,s,l)}function GQ(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!WQ(n,e)&&(Fb(n,e)&&Fb(e,n)&&qQ(n,e)&&(mr(n.prev,n,e.prev)||mr(n,e.prev,e))||Cy(n,e)&&mr(n.prev,n,n.next)>0&&mr(e.prev,e,e.next)>0)}function mr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Cy(n,e){return n.x===e.x&&n.y===e.y}function Wj(n,e,t,i){const r=ew(mr(n,e,t)),a=ew(mr(n,e,i)),s=ew(mr(t,i,n)),l=ew(mr(t,i,e));return!!(r!==a&&s!==l||r===0&&J1(n,t,e)||a===0&&J1(n,i,e)||s===0&&J1(t,n,i)||l===0&&J1(t,e,i))}function J1(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function ew(n){return n>0?1:n<0?-1:0}function WQ(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Wj(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Fb(n,e){return mr(n.prev,n,n.next)<0?mr(n,e,n.next)>=0&&mr(n,n.prev,e)>=0:mr(n,e,n.prev)<0||mr(n,n.next,e)<0}function qQ(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&r<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function qj(n,e){const t=eN(n.i,n.x,n.y),i=eN(e.i,e.x,e.y),r=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,a.next=i,i.prev=a,i}function JU(n,e,t,i){const r=eN(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function zb(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function eN(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function $Q(n,e,t,i){let r=0;for(let a=e,s=t-i;a<t;a+=i)r+=(n[s]-n[a])*(n[a+1]+n[s+1]),s=a;return r}class XQ{static triangulate(e,t,i=2){return PQ(e,t,i)}}class Nu{static area(e){const t=e.length;let i=0;for(let r=t-1,a=0;a<t;r=a++)i+=e[r].x*e[a].y-e[a].x*e[r].y;return i*.5}static isClockWise(e){return Nu.area(e)<0}static triangulateShape(e,t){const i=[],r=[],a=[];e4(e),t4(i,e);let s=e.length;t.forEach(e4);for(let c=0;c<t.length;c++)r.push(s),s+=t[c].length,t4(i,t[c]);const l=XQ.triangulate(i,r);for(let c=0;c<l.length;c+=3)a.push(l.slice(c,c+3));return a}}function e4(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function t4(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class HA extends gn{constructor(e=new Bm([new tt(.5,.5),new tt(-.5,.5),new tt(-.5,-.5),new tt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],a=[];for(let l=0,c=e.length;l<c;l++){const f=e[l];s(f)}this.setAttribute("position",new zt(r,3)),this.setAttribute("uv",new zt(a,2)),this.computeVertexNormals();function s(l){const c=[],f=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,g=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,_=t.bevelThickness!==void 0?t.bevelThickness:.2,x=t.bevelSize!==void 0?t.bevelSize:_-.1,T=t.bevelOffset!==void 0?t.bevelOffset:0,S=t.bevelSegments!==void 0?t.bevelSegments:3;const w=t.extrudePath,I=t.UVGenerator!==void 0?t.UVGenerator:YQ;let R,D=!1,B,z,k,F;if(w){R=w.getSpacedPoints(p),D=!0,v=!1;const Re=w.isCatmullRomCurve3?w.closed:!1;B=w.computeFrenetFrames(p,Re),z=new re,k=new re,F=new re}v||(S=0,_=0,x=0,T=0);const P=l.extractPoints(f);let L=P.shape;const V=P.holes;if(!Nu.isClockWise(L)){L=L.reverse();for(let Re=0,Qe=V.length;Re<Qe;Re++){const Ve=V[Re];Nu.isClockWise(Ve)&&(V[Re]=Ve.reverse())}}function q(Re){const Ve=10000000000000001e-36;let lt=Re[0];for(let ae=1;ae<=Re.length;ae++){const Et=ae%Re.length,ft=Re[Et],Lt=ft.x-lt.x,pt=ft.y-lt.y,te=Lt*Lt+pt*pt,X=Math.max(Math.abs(ft.x),Math.abs(ft.y),Math.abs(lt.x),Math.abs(lt.y)),de=Ve*X*X;if(te<=de){Re.splice(Et,1),ae--;continue}lt=ft}}q(L),V.forEach(q);const ue=V.length,le=L;for(let Re=0;Re<ue;Re++){const Qe=V[Re];L=L.concat(Qe)}function ee(Re,Qe,Ve){return Qe||Yt("ExtrudeGeometry: vec does not exist"),Re.clone().addScaledVector(Qe,Ve)}const ie=L.length;function he(Re,Qe,Ve){let lt,ae,Et;const ft=Re.x-Qe.x,Lt=Re.y-Qe.y,pt=Ve.x-Re.x,te=Ve.y-Re.y,X=ft*ft+Lt*Lt,de=ft*te-Lt*pt;if(Math.abs(de)>Number.EPSILON){const Le=Math.sqrt(X),Ze=Math.sqrt(pt*pt+te*te),Oe=Qe.x-Lt/Le,Tt=Qe.y+ft/Le,gt=Ve.x-te/Ze,Pt=Ve.y+pt/Ze,Ht=((gt-Oe)*te-(Pt-Tt)*pt)/(ft*te-Lt*pt);lt=Oe+ft*Ht-Re.x,ae=Tt+Lt*Ht-Re.y;const nt=lt*lt+ae*ae;if(nt<=2)return new tt(lt,ae);Et=Math.sqrt(nt/2)}else{let Le=!1;ft>Number.EPSILON?pt>Number.EPSILON&&(Le=!0):ft<-Number.EPSILON?pt<-Number.EPSILON&&(Le=!0):Math.sign(Lt)===Math.sign(te)&&(Le=!0),Le?(lt=-Lt,ae=ft,Et=Math.sqrt(X)):(lt=ft,ae=Lt,Et=Math.sqrt(X/2))}return new tt(lt/Et,ae/Et)}const we=[];for(let Re=0,Qe=le.length,Ve=Qe-1,lt=Re+1;Re<Qe;Re++,Ve++,lt++)Ve===Qe&&(Ve=0),lt===Qe&&(lt=0),we[Re]=he(le[Re],le[Ve],le[lt]);const Me=[];let J,pe=we.concat();for(let Re=0,Qe=ue;Re<Qe;Re++){const Ve=V[Re];J=[];for(let lt=0,ae=Ve.length,Et=ae-1,ft=lt+1;lt<ae;lt++,Et++,ft++)Et===ae&&(Et=0),ft===ae&&(ft=0),J[lt]=he(Ve[lt],Ve[Et],Ve[ft]);Me.push(J),pe=pe.concat(J)}let Ee;if(S===0)Ee=Nu.triangulateShape(le,V);else{const Re=[],Qe=[];for(let Ve=0;Ve<S;Ve++){const lt=Ve/S,ae=_*Math.cos(lt*Math.PI/2),Et=x*Math.sin(lt*Math.PI/2)+T;for(let ft=0,Lt=le.length;ft<Lt;ft++){const pt=ee(le[ft],we[ft],Et);ve(pt.x,pt.y,-ae),lt===0&&Re.push(pt)}for(let ft=0,Lt=ue;ft<Lt;ft++){const pt=V[ft];J=Me[ft];const te=[];for(let X=0,de=pt.length;X<de;X++){const Le=ee(pt[X],J[X],Et);ve(Le.x,Le.y,-ae),lt===0&&te.push(Le)}lt===0&&Qe.push(te)}}Ee=Nu.triangulateShape(Re,Qe)}const Ge=Ee.length,ht=x+T;for(let Re=0;Re<ie;Re++){const Qe=v?ee(L[Re],pe[Re],ht):L[Re];D?(k.copy(B.normals[0]).multiplyScalar(Qe.x),z.copy(B.binormals[0]).multiplyScalar(Qe.y),F.copy(R[0]).add(k).add(z),ve(F.x,F.y,F.z)):ve(Qe.x,Qe.y,0)}for(let Re=1;Re<=p;Re++)for(let Qe=0;Qe<ie;Qe++){const Ve=v?ee(L[Qe],pe[Qe],ht):L[Qe];D?(k.copy(B.normals[Re]).multiplyScalar(Ve.x),z.copy(B.binormals[Re]).multiplyScalar(Ve.y),F.copy(R[Re]).add(k).add(z),ve(F.x,F.y,F.z)):ve(Ve.x,Ve.y,g/p*Re)}for(let Re=S-1;Re>=0;Re--){const Qe=Re/S,Ve=_*Math.cos(Qe*Math.PI/2),lt=x*Math.sin(Qe*Math.PI/2)+T;for(let ae=0,Et=le.length;ae<Et;ae++){const ft=ee(le[ae],we[ae],lt);ve(ft.x,ft.y,g+Ve)}for(let ae=0,Et=V.length;ae<Et;ae++){const ft=V[ae];J=Me[ae];for(let Lt=0,pt=ft.length;Lt<pt;Lt++){const te=ee(ft[Lt],J[Lt],lt);D?ve(te.x,te.y+R[p-1].y,R[p-1].x+Ve):ve(te.x,te.y,g+Ve)}}}be(),Te();function be(){const Re=r.length/3;if(v){let Qe=0,Ve=ie*Qe;for(let lt=0;lt<Ge;lt++){const ae=Ee[lt];Ye(ae[2]+Ve,ae[1]+Ve,ae[0]+Ve)}Qe=p+S*2,Ve=ie*Qe;for(let lt=0;lt<Ge;lt++){const ae=Ee[lt];Ye(ae[0]+Ve,ae[1]+Ve,ae[2]+Ve)}}else{for(let Qe=0;Qe<Ge;Qe++){const Ve=Ee[Qe];Ye(Ve[2],Ve[1],Ve[0])}for(let Qe=0;Qe<Ge;Qe++){const Ve=Ee[Qe];Ye(Ve[0]+ie*p,Ve[1]+ie*p,Ve[2]+ie*p)}}i.addGroup(Re,r.length/3-Re,0)}function Te(){const Re=r.length/3;let Qe=0;dt(le,Qe),Qe+=le.length;for(let Ve=0,lt=V.length;Ve<lt;Ve++){const ae=V[Ve];dt(ae,Qe),Qe+=ae.length}i.addGroup(Re,r.length/3-Re,1)}function dt(Re,Qe){let Ve=Re.length;for(;--Ve>=0;){const lt=Ve;let ae=Ve-1;ae<0&&(ae=Re.length-1);for(let Et=0,ft=p+S*2;Et<ft;Et++){const Lt=ie*Et,pt=ie*(Et+1),te=Qe+lt+Lt,X=Qe+ae+Lt,de=Qe+ae+pt,Le=Qe+lt+pt;wt(te,X,de,Le)}}}function ve(Re,Qe,Ve){c.push(Re),c.push(Qe),c.push(Ve)}function Ye(Re,Qe,Ve){je(Re),je(Qe),je(Ve);const lt=r.length/3,ae=I.generateTopUV(i,r,lt-3,lt-2,lt-1);At(ae[0]),At(ae[1]),At(ae[2])}function wt(Re,Qe,Ve,lt){je(Re),je(Qe),je(lt),je(Qe),je(Ve),je(lt);const ae=r.length/3,Et=I.generateSideWallUV(i,r,ae-6,ae-3,ae-2,ae-1);At(Et[0]),At(Et[1]),At(Et[3]),At(Et[1]),At(Et[2]),At(Et[3])}function je(Re){r.push(c[Re*3+0]),r.push(c[Re*3+1]),r.push(c[Re*3+2])}function At(Re){a.push(Re.x),a.push(Re.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return KQ(t,i,e)}static fromJSON(e,t){const i=[];for(let a=0,s=e.shapes.length;a<s;a++){const l=t[e.shapes[a]];i.push(l)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new ZE[r.type]().fromJSON(r)),new HA(i,e.options)}}const YQ={generateTopUV:function(n,e,t,i,r){const a=e[t*3],s=e[t*3+1],l=e[i*3],c=e[i*3+1],f=e[r*3],p=e[r*3+1];return[new tt(a,s),new tt(l,c),new tt(f,p)]},generateSideWallUV:function(n,e,t,i,r,a){const s=e[t*3],l=e[t*3+1],c=e[t*3+2],f=e[i*3],p=e[i*3+1],g=e[i*3+2],v=e[r*3],_=e[r*3+1],x=e[r*3+2],T=e[a*3],S=e[a*3+1],w=e[a*3+2];return Math.abs(l-p)<Math.abs(s-f)?[new tt(s,1-c),new tt(f,1-g),new tt(v,1-x),new tt(T,1-w)]:[new tt(l,1-c),new tt(p,1-g),new tt(_,1-x),new tt(S,1-w)]}};function KQ(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const a=n[i];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class GA extends hp{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new GA(e.radius,e.detail)}}class WA extends gn{constructor(e=[new tt(0,-.5),new tt(.5,0),new tt(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=fn(r,0,Math.PI*2);const a=[],s=[],l=[],c=[],f=[],p=1/t,g=new re,v=new tt,_=new re,x=new re,T=new re;let S=0,w=0;for(let I=0;I<=e.length-1;I++)switch(I){case 0:S=e[I+1].x-e[I].x,w=e[I+1].y-e[I].y,_.x=w*1,_.y=-S,_.z=w*0,T.copy(_),_.normalize(),c.push(_.x,_.y,_.z);break;case e.length-1:c.push(T.x,T.y,T.z);break;default:S=e[I+1].x-e[I].x,w=e[I+1].y-e[I].y,_.x=w*1,_.y=-S,_.z=w*0,x.copy(_),_.x+=T.x,_.y+=T.y,_.z+=T.z,_.normalize(),c.push(_.x,_.y,_.z),T.copy(x)}for(let I=0;I<=t;I++){const R=i+I*p*r,D=Math.sin(R),B=Math.cos(R);for(let z=0;z<=e.length-1;z++){g.x=e[z].x*D,g.y=e[z].y,g.z=e[z].x*B,s.push(g.x,g.y,g.z),v.x=I/t,v.y=z/(e.length-1),l.push(v.x,v.y);const k=c[3*z+0]*D,F=c[3*z+1],P=c[3*z+0]*B;f.push(k,F,P)}}for(let I=0;I<t;I++)for(let R=0;R<e.length-1;R++){const D=R+I*e.length,B=D,z=D+e.length,k=D+e.length+1,F=D+1;a.push(B,z,F),a.push(k,F,z)}this.setIndex(a),this.setAttribute("position",new zt(s,3)),this.setAttribute("uv",new zt(l,2)),this.setAttribute("normal",new zt(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new WA(e.points,e.segments,e.phiStart,e.phiLength)}}class wx extends hp{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new wx(e.radius,e.detail)}}class $y extends gn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const a=e/2,s=t/2,l=Math.floor(i),c=Math.floor(r),f=l+1,p=c+1,g=e/l,v=t/c,_=[],x=[],T=[],S=[];for(let w=0;w<p;w++){const I=w*v-s;for(let R=0;R<f;R++){const D=R*g-a;x.push(D,-I,0),T.push(0,0,1),S.push(R/l),S.push(1-w/c)}}for(let w=0;w<c;w++)for(let I=0;I<l;I++){const R=I+f*w,D=I+f*(w+1),B=I+1+f*(w+1),z=I+1+f*w;_.push(R,D,z),_.push(D,B,z)}this.setIndex(_),this.setAttribute("position",new zt(x,3)),this.setAttribute("normal",new zt(T,3)),this.setAttribute("uv",new zt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $y(e.width,e.height,e.widthSegments,e.heightSegments)}}class qA extends gn{constructor(e=.5,t=1,i=32,r=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:s},i=Math.max(3,i),r=Math.max(1,r);const l=[],c=[],f=[],p=[];let g=e;const v=(t-e)/r,_=new re,x=new tt;for(let T=0;T<=r;T++){for(let S=0;S<=i;S++){const w=a+S/i*s;_.x=g*Math.cos(w),_.y=g*Math.sin(w),c.push(_.x,_.y,_.z),f.push(0,0,1),x.x=(_.x/t+1)/2,x.y=(_.y/t+1)/2,p.push(x.x,x.y)}g+=v}for(let T=0;T<r;T++){const S=T*(i+1);for(let w=0;w<i;w++){const I=w+S,R=I,D=I+i+1,B=I+i+2,z=I+1;l.push(R,D,z),l.push(D,B,z)}}this.setIndex(l),this.setAttribute("position",new zt(c,3)),this.setAttribute("normal",new zt(f,3)),this.setAttribute("uv",new zt(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qA(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class $A extends gn{constructor(e=new Bm([new tt(0,.5),new tt(-.5,-.5),new tt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],a=[],s=[];let l=0,c=0;if(Array.isArray(e)===!1)f(e);else for(let p=0;p<e.length;p++)f(e[p]),this.addGroup(l,c,p),l+=c,c=0;this.setIndex(i),this.setAttribute("position",new zt(r,3)),this.setAttribute("normal",new zt(a,3)),this.setAttribute("uv",new zt(s,2));function f(p){const g=r.length/3,v=p.extractPoints(t);let _=v.shape;const x=v.holes;Nu.isClockWise(_)===!1&&(_=_.reverse());for(let S=0,w=x.length;S<w;S++){const I=x[S];Nu.isClockWise(I)===!0&&(x[S]=I.reverse())}const T=Nu.triangulateShape(_,x);for(let S=0,w=x.length;S<w;S++){const I=x[S];_=_.concat(I)}for(let S=0,w=_.length;S<w;S++){const I=_[S];r.push(I.x,I.y,0),a.push(0,0,1),s.push(I.x,I.y)}for(let S=0,w=T.length;S<w;S++){const I=T[S],R=I[0]+g,D=I[1]+g,B=I[2]+g;i.push(R,D,B),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return ZQ(t,e)}static fromJSON(e,t){const i=[];for(let r=0,a=e.shapes.length;r<a;r++){const s=t[e.shapes[r]];i.push(s)}return new $A(i,e.curveSegments)}}function ZQ(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Ex extends gn{constructor(e=1,t=32,i=16,r=0,a=Math.PI*2,s=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:a,thetaStart:s,thetaLength:l},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(s+l,Math.PI);let f=0;const p=[],g=new re,v=new re,_=[],x=[],T=[],S=[];for(let w=0;w<=i;w++){const I=[],R=w/i;let D=0;w===0&&s===0?D=.5/t:w===i&&c===Math.PI&&(D=-.5/t);for(let B=0;B<=t;B++){const z=B/t;g.x=-e*Math.cos(r+z*a)*Math.sin(s+R*l),g.y=e*Math.cos(s+R*l),g.z=e*Math.sin(r+z*a)*Math.sin(s+R*l),x.push(g.x,g.y,g.z),v.copy(g).normalize(),T.push(v.x,v.y,v.z),S.push(z+D,1-R),I.push(f++)}p.push(I)}for(let w=0;w<i;w++)for(let I=0;I<t;I++){const R=p[w][I+1],D=p[w][I],B=p[w+1][I],z=p[w+1][I+1];(w!==0||s>0)&&_.push(R,D,z),(w!==i-1||c<Math.PI)&&_.push(D,B,z)}this.setIndex(_),this.setAttribute("position",new zt(x,3)),this.setAttribute("normal",new zt(T,3)),this.setAttribute("uv",new zt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ex(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class XA extends hp{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new XA(e.radius,e.detail)}}class YA extends gn{constructor(e=1,t=.4,i=12,r=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:a},i=Math.floor(i),r=Math.floor(r);const s=[],l=[],c=[],f=[],p=new re,g=new re,v=new re;for(let _=0;_<=i;_++)for(let x=0;x<=r;x++){const T=x/r*a,S=_/i*Math.PI*2;g.x=(e+t*Math.cos(S))*Math.cos(T),g.y=(e+t*Math.cos(S))*Math.sin(T),g.z=t*Math.sin(S),l.push(g.x,g.y,g.z),p.x=e*Math.cos(T),p.y=e*Math.sin(T),v.subVectors(g,p).normalize(),c.push(v.x,v.y,v.z),f.push(x/r),f.push(_/i)}for(let _=1;_<=i;_++)for(let x=1;x<=r;x++){const T=(r+1)*_+x-1,S=(r+1)*(_-1)+x-1,w=(r+1)*(_-1)+x,I=(r+1)*_+x;s.push(T,S,I),s.push(S,w,I)}this.setIndex(s),this.setAttribute("position",new zt(l,3)),this.setAttribute("normal",new zt(c,3)),this.setAttribute("uv",new zt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new YA(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class KA extends gn{constructor(e=1,t=.4,i=64,r=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:a,q:s},i=Math.floor(i),r=Math.floor(r);const l=[],c=[],f=[],p=[],g=new re,v=new re,_=new re,x=new re,T=new re,S=new re,w=new re;for(let R=0;R<=i;++R){const D=R/i*a*Math.PI*2;I(D,a,s,e,_),I(D+.01,a,s,e,x),S.subVectors(x,_),w.addVectors(x,_),T.crossVectors(S,w),w.crossVectors(T,S),T.normalize(),w.normalize();for(let B=0;B<=r;++B){const z=B/r*Math.PI*2,k=-t*Math.cos(z),F=t*Math.sin(z);g.x=_.x+(k*w.x+F*T.x),g.y=_.y+(k*w.y+F*T.y),g.z=_.z+(k*w.z+F*T.z),c.push(g.x,g.y,g.z),v.subVectors(g,_).normalize(),f.push(v.x,v.y,v.z),p.push(R/i),p.push(B/r)}}for(let R=1;R<=i;R++)for(let D=1;D<=r;D++){const B=(r+1)*(R-1)+(D-1),z=(r+1)*R+(D-1),k=(r+1)*R+D,F=(r+1)*(R-1)+D;l.push(B,z,F),l.push(z,k,F)}this.setIndex(l),this.setAttribute("position",new zt(c,3)),this.setAttribute("normal",new zt(f,3)),this.setAttribute("uv",new zt(p,2));function I(R,D,B,z,k){const F=Math.cos(R),P=Math.sin(R),L=B/D*R,V=Math.cos(L);k.x=z*(2+V)*.5*F,k.y=z*(2+V)*P*.5,k.z=z*Math.sin(L)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new KA(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class ZA extends gn{constructor(e=new mD(new re(-1,-1,0),new re(-1,1,0),new re(1,1,0)),t=64,i=1,r=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:a};const s=e.computeFrenetFrames(t,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const l=new re,c=new re,f=new tt;let p=new re;const g=[],v=[],_=[],x=[];T(),this.setIndex(x),this.setAttribute("position",new zt(g,3)),this.setAttribute("normal",new zt(v,3)),this.setAttribute("uv",new zt(_,2));function T(){for(let R=0;R<t;R++)S(R);S(a===!1?t:0),I(),w()}function S(R){p=e.getPointAt(R/t,p);const D=s.normals[R],B=s.binormals[R];for(let z=0;z<=r;z++){const k=z/r*Math.PI*2,F=Math.sin(k),P=-Math.cos(k);c.x=P*D.x+F*B.x,c.y=P*D.y+F*B.y,c.z=P*D.z+F*B.z,c.normalize(),v.push(c.x,c.y,c.z),l.x=p.x+i*c.x,l.y=p.y+i*c.y,l.z=p.z+i*c.z,g.push(l.x,l.y,l.z)}}function w(){for(let R=1;R<=t;R++)for(let D=1;D<=r;D++){const B=(r+1)*(R-1)+(D-1),z=(r+1)*R+(D-1),k=(r+1)*R+D,F=(r+1)*(R-1)+D;x.push(B,z,F),x.push(z,k,F)}}function I(){for(let R=0;R<=t;R++)for(let D=0;D<=r;D++)f.x=R/t,f.y=D/r,_.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new ZA(new ZE[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class $j extends gn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new re,a=new re;if(e.index!==null){const s=e.attributes.position,l=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let f=0,p=c.length;f<p;++f){const g=c[f],v=g.start,_=g.count;for(let x=v,T=v+_;x<T;x+=3)for(let S=0;S<3;S++){const w=l.getX(x+S),I=l.getX(x+(S+1)%3);r.fromBufferAttribute(s,w),a.fromBufferAttribute(s,I),n4(r,a,i)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let l=0,c=s.count/3;l<c;l++)for(let f=0;f<3;f++){const p=3*l+f,g=3*l+(f+1)%3;r.fromBufferAttribute(s,p),a.fromBufferAttribute(s,g),n4(r,a,i)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new zt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function n4(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var i4=Object.freeze({__proto__:null,BoxGeometry:vg,CapsuleGeometry:zA,CircleGeometry:BA,ConeGeometry:Sx,CylinderGeometry:xx,DodecahedronGeometry:VA,EdgesGeometry:Uj,ExtrudeGeometry:HA,IcosahedronGeometry:GA,LatheGeometry:WA,OctahedronGeometry:wx,PlaneGeometry:$y,PolyhedronGeometry:hp,RingGeometry:qA,ShapeGeometry:$A,SphereGeometry:Ex,TetrahedronGeometry:XA,TorusGeometry:YA,TorusKnotGeometry:KA,TubeGeometry:ZA,WireframeGeometry:$j});class Xj extends Ps{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Dt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class vD extends Yl{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class yD extends Ps{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Dt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cp,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ll,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Yj extends yD{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new tt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return fn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Dt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Dt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Dt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Kj extends Ps{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Dt(16777215),this.specular=new Dt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cp,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ll,this.combine=yx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Zj extends Ps{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Dt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cp,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Qj extends Ps{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cp,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Jj extends Ps{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Dt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cp,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ll,this.combine=yx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _D extends Ps{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=cj,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class bD extends Ps{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class e8 extends Ps{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Dt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cp,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class t8 extends no{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Rm(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function n8(n){function e(r,a){return n[r]-n[a]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function tN(n,e,t){const i=n.length,r=new n.constructor(i);for(let a=0,s=0;s!==i;++a){const l=t[a]*e;for(let c=0;c!==e;++c)r[s++]=n[l+c]}return r}function xD(n,e,t,i){let r=1,a=n[0];for(;a!==void 0&&a[i]===void 0;)a=n[r++];if(a===void 0)return;let s=a[i];if(s!==void 0)if(Array.isArray(s))do s=a[i],s!==void 0&&(e.push(a.time),t.push(...s)),a=n[r++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[i],s!==void 0&&(e.push(a.time),s.toArray(t,t.length)),a=n[r++];while(a!==void 0);else do s=a[i],s!==void 0&&(e.push(a.time),t.push(s)),a=n[r++];while(a!==void 0)}function QQ(n,e,t,i,r=30){const a=n.clone();a.name=e;const s=[];for(let c=0;c<a.tracks.length;++c){const f=a.tracks[c],p=f.getValueSize(),g=[],v=[];for(let _=0;_<f.times.length;++_){const x=f.times[_]*r;if(!(x<t||x>=i)){g.push(f.times[_]);for(let T=0;T<p;++T)v.push(f.values[_*p+T])}}g.length!==0&&(f.times=Rm(g,f.times.constructor),f.values=Rm(v,f.values.constructor),s.push(f))}a.tracks=s;let l=1/0;for(let c=0;c<a.tracks.length;++c)l>a.tracks[c].times[0]&&(l=a.tracks[c].times[0]);for(let c=0;c<a.tracks.length;++c)a.tracks[c].shift(-1*l);return a.resetDuration(),a}function JQ(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,a=e/i;for(let s=0;s<r;++s){const l=t.tracks[s],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const f=n.tracks.find(function(w){return w.name===l.name&&w.ValueTypeName===c});if(f===void 0)continue;let p=0;const g=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=g/3);let v=0;const _=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=_/3);const x=l.times.length-1;let T;if(a<=l.times[0]){const w=p,I=g-p;T=l.values.slice(w,I)}else if(a>=l.times[x]){const w=x*g+p,I=w+g-p;T=l.values.slice(w,I)}else{const w=l.createInterpolant(),I=p,R=g-p;w.evaluate(a),T=w.resultBuffer.slice(I,R)}c==="quaternion"&&new Cs().fromArray(T).normalize().conjugate().toArray(T);const S=f.times.length;for(let w=0;w<S;++w){const I=w*_+v;if(c==="quaternion")Cs.multiplyQuaternionsFlat(f.values,I,T,0,f.values,I);else{const R=_-v*2;for(let D=0;D<R;++D)f.values[I+D]-=T[D]}}}return n.blendMode=eD,n}class eJ{static convertArray(e,t){return Rm(e,t)}static isTypedArray(e){return _j(e)}static getKeyframeOrder(e){return n8(e)}static sortedArray(e,t,i){return tN(e,t,i)}static flattenJSON(e,t,i,r){xD(e,t,i,r)}static subclip(e,t,i,r,a=30){return QQ(e,t,i,r,a)}static makeClipAdditive(e,t=0,i=e,r=30){return JQ(e,t,i,r)}}class Tx{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],a=t[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let l=i+2;;){if(r===void 0){if(e<a)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(a=r,r=t[++i],e<r)break t}s=t.length;break n}if(!(e>=a)){const l=t[1];e<l&&(i=2,a=l);for(let c=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=a,a=t[--i-1],e>=a)break t}s=i,i=0;break n}break e}for(;i<s;){const l=i+s>>>1;e<t[l]?s=l:i=l+1}if(r=t[i],a=t[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,r)}return this.interpolate_(i,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r;for(let s=0;s!==r;++s)t[s]=i[a+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class i8 extends Tx{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Cm,endingEnd:Cm}}intervalChanged_(e,t,i){const r=this.parameterPositions;let a=e-2,s=e+1,l=r[a],c=r[s];if(l===void 0)switch(this.getSettings_().endingStart){case Im:a=e,l=2*t-i;break;case Nb:a=r.length-2,l=t+r[a]-r[a+1];break;default:a=e,l=i}if(c===void 0)switch(this.getSettings_().endingEnd){case Im:s=e,c=2*i-t;break;case Nb:s=1,c=i+r[1]-r[0];break;default:s=e-1,c=t}const f=(i-t)*.5,p=this.valueSize;this._weightPrev=f/(t-l),this._weightNext=f/(c-i),this._offsetPrev=a*p,this._offsetNext=s*p}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,l=this.valueSize,c=e*l,f=c-l,p=this._offsetPrev,g=this._offsetNext,v=this._weightPrev,_=this._weightNext,x=(i-t)/(r-t),T=x*x,S=T*x,w=-v*S+2*v*T-v*x,I=(1+v)*S+(-1.5-2*v)*T+(-.5+v)*x+1,R=(-1-_)*S+(1.5+_)*T+.5*x,D=_*S-_*T;for(let B=0;B!==l;++B)a[B]=w*s[p+B]+I*s[f+B]+R*s[c+B]+D*s[g+B];return a}}class SD extends Tx{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,l=this.valueSize,c=e*l,f=c-l,p=(i-t)/(r-t),g=1-p;for(let v=0;v!==l;++v)a[v]=s[f+v]*g+s[c+v]*p;return a}}class r8 extends Tx{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Jl{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Rm(t,this.TimeBufferType),this.values=Rm(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Rm(e.times,Array),values:Rm(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new r8(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new SD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new i8(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Pb:t=this.InterpolantFactoryMethodDiscrete;break;case XE:t=this.InterpolantFactoryMethodLinear;break;case zw:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return Mt("KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Pb;case this.InterpolantFactoryMethodLinear:return XE;case this.InterpolantFactoryMethodSmooth:return zw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let a=0,s=r-1;for(;a!==r&&i[a]<e;)++a;for(;s!==-1&&i[s]>t;)--s;if(++s,a!==0||s!==r){a>=s&&(s=Math.max(s,1),a=s-1);const l=this.getValueSize();this.times=i.slice(a,s),this.values=this.values.slice(a*l,s*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(Yt("KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,a=i.length;a===0&&(Yt("KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let l=0;l!==a;l++){const c=i[l];if(typeof c=="number"&&isNaN(c)){Yt("KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(s!==null&&s>c){Yt("KeyframeTrack: Out of order keys.",this,l,c,s),e=!1;break}s=c}if(r!==void 0&&_j(r))for(let l=0,c=r.length;l!==c;++l){const f=r[l];if(isNaN(f)){Yt("KeyframeTrack: Value is not a valid number.",this,l,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===zw,a=e.length-1;let s=1;for(let l=1;l<a;++l){let c=!1;const f=e[l],p=e[l+1];if(f!==p&&(l!==1||f!==e[0]))if(r)c=!0;else{const g=l*i,v=g-i,_=g+i;for(let x=0;x!==i;++x){const T=t[g+x];if(T!==t[v+x]||T!==t[_+x]){c=!0;break}}}if(c){if(l!==s){e[s]=e[l];const g=l*i,v=s*i;for(let _=0;_!==i;++_)t[v+_]=t[g+_]}++s}}if(a>0){e[s]=e[a];for(let l=a*i,c=s*i,f=0;f!==i;++f)t[c+f]=t[l+f];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Jl.prototype.ValueTypeName="";Jl.prototype.TimeBufferType=Float32Array;Jl.prototype.ValueBufferType=Float32Array;Jl.prototype.DefaultInterpolation=XE;class yg extends Jl{constructor(e,t,i){super(e,t,i)}}yg.prototype.ValueTypeName="bool";yg.prototype.ValueBufferType=Array;yg.prototype.DefaultInterpolation=Pb;yg.prototype.InterpolantFactoryMethodLinear=void 0;yg.prototype.InterpolantFactoryMethodSmooth=void 0;class wD extends Jl{constructor(e,t,i,r){super(e,t,i,r)}}wD.prototype.ValueTypeName="color";class Bb extends Jl{constructor(e,t,i,r){super(e,t,i,r)}}Bb.prototype.ValueTypeName="number";class a8 extends Tx{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,l=this.valueSize,c=(i-t)/(r-t);let f=e*l;for(let p=f+l;f!==p;f+=4)Cs.slerpFlat(a,0,s,f-l,s,f,c);return a}}class Ax extends Jl{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new a8(this.times,this.values,this.getValueSize(),e)}}Ax.prototype.ValueTypeName="quaternion";Ax.prototype.InterpolantFactoryMethodSmooth=void 0;class _g extends Jl{constructor(e,t,i){super(e,t,i)}}_g.prototype.ValueTypeName="string";_g.prototype.ValueBufferType=Array;_g.prototype.DefaultInterpolation=Pb;_g.prototype.InterpolantFactoryMethodLinear=void 0;_g.prototype.InterpolantFactoryMethodSmooth=void 0;class Vb extends Jl{constructor(e,t,i,r){super(e,t,i,r)}}Vb.prototype.ValueTypeName="vector";class jb{constructor(e="",t=-1,i=[],r=MA){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=al(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,l=i.length;s!==l;++s)t.push(nJ(i[s]).scale(r));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a.userData=JSON.parse(e.userData||"{}"),a}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let a=0,s=i.length;a!==s;++a)t.push(Jl.toJSON(i[a]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const a=t.length,s=[];for(let l=0;l<a;l++){let c=[],f=[];c.push((l+a-1)%a,l,(l+1)%a),f.push(0,1,0);const p=n8(c);c=tN(c,1,p),f=tN(f,1,p),!r&&c[0]===0&&(c.push(a),f.push(f[0])),s.push(new Bb(".morphTargetInfluences["+t[l].name+"]",c,f).scale(1/i))}return new this(e,-1,s)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},a=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const f=e[l],p=f.name.match(a);if(p&&p.length>1){const g=p[1];let v=r[g];v||(r[g]=v=[]),v.push(f)}}const s=[];for(const l in r)s.push(this.CreateFromMorphTargetSequence(l,r[l],t,i));return s}static parseAnimation(e,t){if(Mt("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return Yt("AnimationClip: No animation in JSONLoader data."),null;const i=function(g,v,_,x,T){if(_.length!==0){const S=[],w=[];xD(_,S,w,x),S.length!==0&&T.push(new g(v,S,w))}},r=[],a=e.name||"default",s=e.fps||30,l=e.blendMode;let c=e.length||-1;const f=e.hierarchy||[];for(let g=0;g<f.length;g++){const v=f[g].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const _={};let x;for(x=0;x<v.length;x++)if(v[x].morphTargets)for(let T=0;T<v[x].morphTargets.length;T++)_[v[x].morphTargets[T]]=-1;for(const T in _){const S=[],w=[];for(let I=0;I!==v[x].morphTargets.length;++I){const R=v[x];S.push(R.time),w.push(R.morphTarget===T?1:0)}r.push(new Bb(".morphTargetInfluence["+T+"]",S,w))}c=_.length*s}else{const _=".bones["+t[g].name+"]";i(Vb,_+".position",v,"pos",r),i(Ax,_+".quaternion",v,"rot",r),i(Vb,_+".scale",v,"scl",r)}}return r.length===0?null:new this(a,c,r,l)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const a=this.tracks[i];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function tJ(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Bb;case"vector":case"vector2":case"vector3":case"vector4":return Vb;case"color":return wD;case"quaternion":return Ax;case"bool":case"boolean":return yg;case"string":return _g}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function nJ(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=tJ(n.type);if(n.times===void 0){const t=[],i=[];xD(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Lc={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class ED{constructor(e,t,i){const r=this;let a=!1,s=0,l=0,c;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this._abortController=null,this.itemStart=function(p){l++,a===!1&&r.onStart!==void 0&&r.onStart(p,s,l),a=!0},this.itemEnd=function(p){s++,r.onProgress!==void 0&&r.onProgress(p,s,l),s===l&&(a=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(p){r.onError!==void 0&&r.onError(p)},this.resolveURL=function(p){return c?c(p):p},this.setURLModifier=function(p){return c=p,this},this.addHandler=function(p,g){return f.push(p,g),this},this.removeHandler=function(p){const g=f.indexOf(p);return g!==-1&&f.splice(g,2),this},this.getHandler=function(p){for(let g=0,v=f.length;g<v;g+=2){const _=f[g],x=f[g+1];if(_.global&&(_.lastIndex=0),_.test(p))return x}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const s8=new ED;class io{constructor(e){this.manager=e!==void 0?e:s8,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,a){i.load(e,r,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}io.DEFAULT_MATERIAL_NAME="__DEFAULT";const qf={};class iJ extends Error{constructor(e,t){super(e),this.response=t}}class Yc extends io{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=Lc.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(qf[e]!==void 0){qf[e].push({onLoad:t,onProgress:i,onError:r});return}qf[e]=[],qf[e].push({onLoad:t,onProgress:i,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),l=this.mimeType,c=this.responseType;fetch(s).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&Mt("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const p=qf[e],g=f.body.getReader(),v=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),_=v?parseInt(v):0,x=_!==0;let T=0;const S=new ReadableStream({start(w){I();function I(){g.read().then(({done:R,value:D})=>{if(R)w.close();else{T+=D.byteLength;const B=new ProgressEvent("progress",{lengthComputable:x,loaded:T,total:_});for(let z=0,k=p.length;z<k;z++){const F=p[z];F.onProgress&&F.onProgress(B)}w.enqueue(D),I()}},R=>{w.error(R)})}}});return new Response(S)}else throw new iJ(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(c){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(p=>new DOMParser().parseFromString(p,l));case"json":return f.json();default:if(l==="")return f.text();{const g=/charset="?([^;"\s]*)"?/i.exec(l),v=g&&g[1]?g[1].toLowerCase():void 0,_=new TextDecoder(v);return f.arrayBuffer().then(x=>_.decode(x))}}}).then(f=>{Lc.add(`file:${e}`,f);const p=qf[e];delete qf[e];for(let g=0,v=p.length;g<v;g++){const _=p[g];_.onLoad&&_.onLoad(f)}}).catch(f=>{const p=qf[e];if(p===void 0)throw this.manager.itemError(e),f;delete qf[e];for(let g=0,v=p.length;g<v;g++){const _=p[g];_.onError&&_.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class rJ extends io{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Yc(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{t(a.parse(JSON.parse(l)))}catch(c){r?r(c):Yt(c),a.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=jb.parse(e[i]);t.push(r)}return t}}class aJ extends io{constructor(e){super(e)}load(e,t,i,r){const a=this,s=[],l=new FA,c=new Yc(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(a.withCredentials);let f=0;function p(g){c.load(e[g],function(v){const _=a.parse(v,!0);s[g]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},f+=1,f===6&&(_.mipmapCount===1&&(l.minFilter=Ki),l.image=s,l.format=_.format,l.needsUpdate=!0,t&&t(l))},i,r)}if(Array.isArray(e))for(let g=0,v=e.length;g<v;++g)p(g);else c.load(e,function(g){const v=a.parse(g,!0);if(v.isCubemap){const _=v.mipmaps.length/v.mipmapCount;for(let x=0;x<_;x++){s[x]={mipmaps:[]};for(let T=0;T<v.mipmapCount;T++)s[x].mipmaps.push(v.mipmaps[x*v.mipmapCount+T]),s[x].format=v.format,s[x].width=v.width,s[x].height=v.height}l.image=s}else l.image.width=v.width,l.image.height=v.height,l.mipmaps=v.mipmaps;v.mipmapCount===1&&(l.minFilter=Ki),l.format=v.format,l.needsUpdate=!0,t&&t(l)},i,r);return l}}const Uv=new WeakMap;class Hb extends io{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Lc.get(`image:${e}`);if(s!==void 0){if(s.complete===!0)a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0);else{let g=Uv.get(s);g===void 0&&(g=[],Uv.set(s,g)),g.push({onLoad:t,onError:r})}return s}const l=Lb("img");function c(){p(),t&&t(this);const g=Uv.get(this)||[];for(let v=0;v<g.length;v++){const _=g[v];_.onLoad&&_.onLoad(this)}Uv.delete(this),a.manager.itemEnd(e)}function f(g){p(),r&&r(g),Lc.remove(`image:${e}`);const v=Uv.get(this)||[];for(let _=0;_<v.length;_++){const x=v[_];x.onError&&x.onError(g)}Uv.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function p(){l.removeEventListener("load",c,!1),l.removeEventListener("error",f,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),Lc.add(`image:${e}`,l),a.manager.itemStart(e),l.src=e,l}}class sJ extends io{constructor(e){super(e)}load(e,t,i,r){const a=new bx;a.colorSpace=Za;const s=new Hb(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let l=0;function c(f){s.load(e[f],function(p){a.images[f]=p,l++,l===6&&(a.needsUpdate=!0,t&&t(a))},void 0,r)}for(let f=0;f<e.length;++f)c(f);return a}}class oJ extends io{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Du,l=new Yc(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(a.withCredentials),l.load(e,function(c){let f;try{f=a.parse(c)}catch(p){if(r!==void 0)r(p);else{p(p);return}}f.image!==void 0?s.image=f.image:f.data!==void 0&&(s.image.width=f.width,s.image.height=f.height,s.image.data=f.data),s.wrapS=f.wrapS!==void 0?f.wrapS:Oo,s.wrapT=f.wrapT!==void 0?f.wrapT:Oo,s.magFilter=f.magFilter!==void 0?f.magFilter:Ki,s.minFilter=f.minFilter!==void 0?f.minFilter:Ki,s.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(s.colorSpace=f.colorSpace),f.flipY!==void 0&&(s.flipY=f.flipY),f.format!==void 0&&(s.format=f.format),f.type!==void 0&&(s.type=f.type),f.mipmaps!==void 0&&(s.mipmaps=f.mipmaps,s.minFilter=Dc),f.mipmapCount===1&&(s.minFilter=Ki),f.generateMipmaps!==void 0&&(s.generateMipmaps=f.generateMipmaps),s.needsUpdate=!0,t&&t(s,f)},i,r),s}}class lJ extends io{constructor(e){super(e)}load(e,t,i,r){const a=new Er,s=new Hb(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(l){a.image=l,a.needsUpdate=!0,t!==void 0&&t(a)},i,r),a}}class dp extends ni{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Dt(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}}class o8 extends dp{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ni.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Dt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}toJSON(e){const t=super.toJSON(e);return t.object.groundColor=this.groundColor.getHex(),t}}const MI=new pn,r4=new re,a4=new re;class TD{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new tt(512,512),this.mapType=Ys,this.map=null,this.mapPass=null,this.matrix=new pn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new qy,this._frameExtents=new tt(1,1),this._viewportCount=1,this._viewports=[new Ni(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;r4.setFromMatrixPosition(e.matrixWorld),t.position.copy(r4),a4.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(a4),t.updateMatrixWorld(),MI.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(MI,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(MI)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class uJ extends TD{constructor(){super(new kr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,i=wy*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||t.far;(i!==t.fov||r!==t.aspect||a!==t.far)&&(t.fov=i,t.aspect=r,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class l8 extends dp{constructor(e,t,i=0,r=Math.PI/3,a=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ni.DEFAULT_UP),this.updateMatrix(),this.target=new ni,this.distance=i,this.angle=r,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new uJ}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.angle=this.angle,t.object.decay=this.decay,t.object.penumbra=this.penumbra,t.object.target=this.target.uuid,this.map&&this.map.isTexture&&(t.object.map=this.map.toJSON(e).uuid),t.object.shadow=this.shadow.toJSON(),t}}class cJ extends TD{constructor(){super(new kr(90,1,.5,500)),this.isPointLightShadow=!0}}class u8 extends dp{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new cJ}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.decay=this.decay,t.object.shadow=this.shadow.toJSON(),t}}class ah extends NA{constructor(e=-1,t=1,i=1,r=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let a=i-e,s=i+e,l=r+t,c=r-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=f*this.view.offsetX,s=a+f*this.view.width,l-=p*this.view.offsetY,c=l-p*this.view.height}this.projectionMatrix.makeOrthographic(a,s,l,c,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class fJ extends TD{constructor(){super(new ah(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class c8 extends dp{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ni.DEFAULT_UP),this.updateMatrix(),this.target=new ni,this.shadow=new fJ}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}}class f8 extends dp{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class h8 extends dp{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class AD{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new re)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*r),t.addScaledVector(s[2],.488603*a),t.addScaledVector(s[3],.488603*i),t.addScaledVector(s[4],1.092548*(i*r)),t.addScaledVector(s[5],1.092548*(r*a)),t.addScaledVector(s[6],.315392*(3*a*a-1)),t.addScaledVector(s[7],1.092548*(i*a)),t.addScaledVector(s[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*r),t.addScaledVector(s[2],2*.511664*a),t.addScaledVector(s[3],2*.511664*i),t.addScaledVector(s[4],2*.429043*i*r),t.addScaledVector(s[5],2*.429043*r*a),t.addScaledVector(s[6],.743125*a*a-.247708),t.addScaledVector(s[7],2*.429043*i*a),t.addScaledVector(s[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,a=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*a,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*i*a,t[8]=.546274*(i*i-r*r)}}class d8 extends dp{constructor(e=new AD,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class QA extends io{constructor(e){super(e),this.textures={}}load(e,t,i,r){const a=this,s=new Yc(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(l){try{t(a.parse(JSON.parse(l)))}catch(c){r?r(c):Yt(c),a.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(a){return t[a]===void 0&&Mt("MaterialLoader: Undefined texture",a),t[a]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Dt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(r.allowOverride=e.allowOverride),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(r.uniforms[a]={},s.type){case"t":r.uniforms[a].value=i(s.value);break;case"c":r.uniforms[a].value=new Dt().setHex(s.value);break;case"v2":r.uniforms[a].value=new tt().fromArray(s.value);break;case"v3":r.uniforms[a].value=new re().fromArray(s.value);break;case"v4":r.uniforms[a].value=new Ni().fromArray(s.value);break;case"m3":r.uniforms[a].value=new Tn().fromArray(s.value);break;case"m4":r.uniforms[a].value=new pn().fromArray(s.value);break;default:r.uniforms[a].value=s.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)r.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),r.normalScale=new tt().fromArray(a)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new tt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return QA.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:Xj,SpriteMaterial:oD,RawShaderMaterial:vD,ShaderMaterial:Yl,PointsMaterial:uD,MeshPhysicalMaterial:Yj,MeshStandardMaterial:yD,MeshPhongMaterial:Kj,MeshToonMaterial:Zj,MeshNormalMaterial:Qj,MeshLambertMaterial:Jj,MeshDepthMaterial:_D,MeshDistanceMaterial:bD,MeshBasicMaterial:fp,MeshMatcapMaterial:e8,LineDashedMaterial:t8,LineBasicMaterial:no,Material:Ps};return new t[e]}}class nN{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class p8 extends gn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class m8 extends io{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Yc(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(l){try{t(a.parse(JSON.parse(l)))}catch(c){r?r(c):Yt(c),a.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(_,x){if(t[x]!==void 0)return t[x];const S=_.interleavedBuffers[x],w=a(_,S.buffer),I=iy(S.type,w),R=new LA(I,S.stride);return R.uuid=S.uuid,t[x]=R,R}function a(_,x){if(i[x]!==void 0)return i[x];const S=_.arrayBuffers[x],w=new Uint32Array(S).buffer;return i[x]=w,w}const s=e.isInstancedBufferGeometry?new p8:new gn,l=e.data.index;if(l!==void 0){const _=iy(l.type,l.array);s.setIndex(new hi(_,1))}const c=e.data.attributes;for(const _ in c){const x=c[_];let T;if(x.isInterleavedBufferAttribute){const S=r(e.data,x.data);T=new Zm(S,x.itemSize,x.offset,x.normalized)}else{const S=iy(x.type,x.array),w=x.isInstancedBufferAttribute?Ay:hi;T=new w(S,x.itemSize,x.normalized)}x.name!==void 0&&(T.name=x.name),x.usage!==void 0&&T.setUsage(x.usage),s.setAttribute(_,T)}const f=e.data.morphAttributes;if(f)for(const _ in f){const x=f[_],T=[];for(let S=0,w=x.length;S<w;S++){const I=x[S];let R;if(I.isInterleavedBufferAttribute){const D=r(e.data,I.data);R=new Zm(D,I.itemSize,I.offset,I.normalized)}else{const D=iy(I.type,I.array);R=new hi(D,I.itemSize,I.normalized)}I.name!==void 0&&(R.name=I.name),T.push(R)}s.morphAttributes[_]=T}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let _=0,x=g.length;_!==x;++_){const T=g[_];s.addGroup(T.start,T.count,T.materialIndex)}const v=e.data.boundingSphere;return v!==void 0&&(s.boundingSphere=new Ca().fromJSON(v)),e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class hJ extends io{constructor(e){super(e)}load(e,t,i,r){const a=this,s=this.path===""?nN.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const l=new Yc(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){let f=null;try{f=JSON.parse(c)}catch(g){r!==void 0&&r(g),g("ObjectLoader: Can't parse "+e+".",g.message);return}const p=f.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),Yt("ObjectLoader: Can't load "+e);return}a.parse(f,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?nN.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const a=new Yc(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,t),l=JSON.parse(s),c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(l)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,function(){t!==void 0&&t(f)}),l=this.parseTextures(e.textures,s),c=this.parseMaterials(e.materials,l),f=this.parseObject(e.object,a,c,l,i),p=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,p),this.bindLightTargets(f),t!==void 0){let g=!1;for(const v in s)if(s[v].data instanceof HTMLImageElement){g=!0;break}g===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,s),c=this.parseObject(e.object,r,l,s,t),f=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,f),this.bindLightTargets(c),c}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const a=new Bm().fromJSON(e[i]);t[a.uuid]=a}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(a){a.isBone&&(r[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const l=new kA().fromJSON(e[a],r);i[l.uuid]=l}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new m8;for(let a=0,s=e.length;a<s;a++){let l;const c=e[a];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":l=r.parse(c);break;default:c.type in i4?l=i4[c.type].fromJSON(c,t):Mt(`ObjectLoader: Unsupported geometry type "${c.type}"`)}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),c.userData!==void 0&&(l.userData=c.userData),i[c.uuid]=l}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const a=new QA;a.setTextures(t);for(let s=0,l=e.length;s<l;s++){const c=e[s];i[c.uuid]===void 0&&(i[c.uuid]=a.parse(c)),r[c.uuid]=i[c.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],a=jb.parse(r);t[a.uuid]=a}return t}parseImages(e,t){const i=this,r={};let a;function s(c){return i.manager.itemStart(c),a.load(c,function(){i.manager.itemEnd(c)},void 0,function(){i.manager.itemError(c),i.manager.itemEnd(c)})}function l(c){if(typeof c=="string"){const f=c,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return s(p)}else return c.data?{data:iy(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new ED(t);a=new Hb(c),a.setCrossOrigin(this.crossOrigin);for(let f=0,p=e.length;f<p;f++){const g=e[f],v=g.url;if(Array.isArray(v)){const _=[];for(let x=0,T=v.length;x<T;x++){const S=v[x],w=l(S);w!==null&&(w instanceof HTMLImageElement?_.push(w):_.push(new Du(w.data,w.width,w.height)))}r[g.uuid]=new zd(_)}else{const _=l(g.url);r[g.uuid]=new zd(_)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function a(s){if(typeof s=="string"){const l=s,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await r.loadAsync(c)}else return s.data?{data:iy(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){r=new Hb(this.manager),r.setCrossOrigin(this.crossOrigin);for(let s=0,l=e.length;s<l;s++){const c=e[s],f=c.url;if(Array.isArray(f)){const p=[];for(let g=0,v=f.length;g<v;g++){const _=f[g],x=await a(_);x!==null&&(x instanceof HTMLImageElement?p.push(x):p.push(new Du(x.data,x.width,x.height)))}i[c.uuid]=new zd(p)}else{const p=await a(c.url);i[c.uuid]=new zd(p)}}}return i}parseTextures(e,t){function i(a,s){return typeof a=="number"?a:(Mt("ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const r={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const l=e[a];l.image===void 0&&Mt('ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&Mt("ObjectLoader: Undefined image",l.image);const c=t[l.image],f=c.data;let p;Array.isArray(f)?(p=new bx,f.length===6&&(p.needsUpdate=!0)):(f&&f.data?p=new Du:p=new Er,f&&(p.needsUpdate=!0)),p.source=c,p.uuid=l.uuid,l.name!==void 0&&(p.name=l.name),l.mapping!==void 0&&(p.mapping=i(l.mapping,dJ)),l.channel!==void 0&&(p.channel=l.channel),l.offset!==void 0&&p.offset.fromArray(l.offset),l.repeat!==void 0&&p.repeat.fromArray(l.repeat),l.center!==void 0&&p.center.fromArray(l.center),l.rotation!==void 0&&(p.rotation=l.rotation),l.wrap!==void 0&&(p.wrapS=i(l.wrap[0],s4),p.wrapT=i(l.wrap[1],s4)),l.format!==void 0&&(p.format=l.format),l.internalFormat!==void 0&&(p.internalFormat=l.internalFormat),l.type!==void 0&&(p.type=l.type),l.colorSpace!==void 0&&(p.colorSpace=l.colorSpace),l.minFilter!==void 0&&(p.minFilter=i(l.minFilter,o4)),l.magFilter!==void 0&&(p.magFilter=i(l.magFilter,o4)),l.anisotropy!==void 0&&(p.anisotropy=l.anisotropy),l.flipY!==void 0&&(p.flipY=l.flipY),l.generateMipmaps!==void 0&&(p.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(p.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(p.compareFunction=l.compareFunction),l.userData!==void 0&&(p.userData=l.userData),r[l.uuid]=p}return r}parseObject(e,t,i,r,a){let s;function l(v){return t[v]===void 0&&Mt("ObjectLoader: Undefined geometry",v),t[v]}function c(v){if(v!==void 0){if(Array.isArray(v)){const _=[];for(let x=0,T=v.length;x<T;x++){const S=v[x];i[S]===void 0&&Mt("ObjectLoader: Undefined material",S),_.push(i[S])}return _}return i[v]===void 0&&Mt("ObjectLoader: Undefined material",v),i[v]}}function f(v){return r[v]===void 0&&Mt("ObjectLoader: Undefined texture",v),r[v]}let p,g;switch(e.type){case"Scene":s=new sD,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new Dt(e.background):s.background=f(e.background)),e.environment!==void 0&&(s.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new DA(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new OA(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new kr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new ah(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new f8(e.color,e.intensity);break;case"DirectionalLight":s=new c8(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new u8(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new h8(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new l8(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new o8(e.color,e.groundColor,e.intensity);break;case"LightProbe":const v=new AD().fromArray(e.sh);s=new d8(v,e.intensity);break;case"SkinnedMesh":p=l(e.geometry),g=c(e.material),s=new Rj(p,g),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":p=l(e.geometry),g=c(e.material),s=new Zr(p,g);break;case"InstancedMesh":p=l(e.geometry),g=c(e.material);const _=e.count,x=e.instanceMatrix,T=e.instanceColor;s=new Pj(p,g,_),s.instanceMatrix=new Ay(new Float32Array(x.array),16),T!==void 0&&(s.instanceColor=new Ay(new Float32Array(T.array),T.itemSize));break;case"BatchedMesh":p=l(e.geometry),g=c(e.material),s=new Nj(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,g),s.geometry=p,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._geometryInfo=e.geometryInfo.map(S=>{let w=null,I=null;return S.boundingBox!==void 0&&(w=new es().fromJSON(S.boundingBox)),S.boundingSphere!==void 0&&(I=new Ca().fromJSON(S.boundingSphere)),{...S,boundingBox:w,boundingSphere:I}}),s._instanceInfo=e.instanceInfo,s._availableInstanceIds=e._availableInstanceIds,s._availableGeometryIds=e._availableGeometryIds,s._nextIndexStart=e.nextIndexStart,s._nextVertexStart=e.nextVertexStart,s._geometryCount=e.geometryCount,s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._matricesTexture=f(e.matricesTexture.uuid),s._indirectTexture=f(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=f(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(s.boundingSphere=new Ca().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(s.boundingBox=new es().fromJSON(e.boundingBox));break;case"LOD":s=new Ij;break;case"Line":s=new ep(l(e.geometry),c(e.material));break;case"LineLoop":s=new Oj(l(e.geometry),c(e.material));break;case"LineSegments":s=new sf(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":s=new Dj(l(e.geometry),c(e.material));break;case"Sprite":s=new Cj(c(e.material));break;case"Group":s=new ry;break;case"Bone":s=new lD;break;default:s=new ni}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(s.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let _=0;_<v.length;_++)s.add(this.parseObject(v[_],t,i,r,a))}if(e.animations!==void 0){const v=e.animations;for(let _=0;_<v.length;_++){const x=v[_];s.animations.push(a[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const v=e.levels;for(let _=0;_<v.length;_++){const x=v[_],T=s.getObjectByProperty("uuid",x.object);T!==void 0&&s.addLevel(T,x.distance,x.hysteresis)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?Mt("ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new ni}})}}const dJ={UVMapping:bA,CubeReflectionMapping:qc,CubeRefractionMapping:Zd,EquirectangularReflectionMapping:Mb,EquirectangularRefractionMapping:Cb,CubeUVReflectionMapping:Wy},s4={RepeatWrapping:Ib,ClampToEdgeWrapping:Oo,MirroredRepeatWrapping:Rb},o4={NearestFilter:Ur,NearestMipmapNearestFilter:$O,NearestMipmapLinearFilter:ny,LinearFilter:Ki,LinearMipmapNearestFilter:lb,LinearMipmapLinearFilter:Dc},CI=new WeakMap;class pJ extends io{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&Mt("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&Mt("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Lc.get(`image-bitmap:${e}`);if(s!==void 0){if(a.manager.itemStart(e),s.then){s.then(f=>{if(CI.has(s)===!0)r&&r(CI.get(s)),a.manager.itemError(e),a.manager.itemEnd(e);else return t&&t(f),a.manager.itemEnd(e),f});return}return setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader,l.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const c=fetch(e,l).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(f){return Lc.add(`image-bitmap:${e}`,f),t&&t(f),a.manager.itemEnd(e),f}).catch(function(f){r&&r(f),CI.set(c,f),Lc.remove(`image-bitmap:${e}`),a.manager.itemError(e),a.manager.itemEnd(e)});Lc.add(`image-bitmap:${e}`,c),a.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let tw;class MD{static getContext(){return tw===void 0&&(tw=new(window.AudioContext||window.webkitAudioContext)),tw}static setContext(e){tw=e}}class mJ extends io{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Yc(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(c){try{const f=c.slice(0);MD.getContext().decodeAudioData(f,function(g){t(g)}).catch(l)}catch(f){l(f)}},i,r);function l(c){r?r(c):Yt(c),a.manager.itemError(e)}}}const l4=new pn,u4=new pn,lm=new pn;class gJ{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new kr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new kr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,lm.copy(e.projectionMatrix);const r=t.eyeSep/2,a=r*t.near/t.focus,s=t.near*Math.tan(zm*t.fov*.5)/t.zoom;let l,c;u4.elements[12]=-r,l4.elements[12]=r,l=-s*t.aspect+a,c=s*t.aspect+a,lm.elements[0]=2*t.near/(c-l),lm.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(lm),l=-s*t.aspect-a,c=s*t.aspect-a,lm.elements[0]=2*t.near/(c-l),lm.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(lm)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(u4),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(l4)}}class g8 extends kr{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}let CD=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};const um=new re,II=new Cs,vJ=new re,cm=new re,fm=new re;class yJ extends ni{constructor(){super(),this.type="AudioListener",this.context=MD.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new CD}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(um,II,vJ),cm.set(0,0,-1).applyQuaternion(II),fm.set(0,1,0).applyQuaternion(II),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(um.x,i),t.positionY.linearRampToValueAtTime(um.y,i),t.positionZ.linearRampToValueAtTime(um.z,i),t.forwardX.linearRampToValueAtTime(cm.x,i),t.forwardY.linearRampToValueAtTime(cm.y,i),t.forwardZ.linearRampToValueAtTime(cm.z,i),t.upX.linearRampToValueAtTime(fm.x,i),t.upY.linearRampToValueAtTime(fm.y,i),t.upZ.linearRampToValueAtTime(fm.z,i)}else t.setPosition(um.x,um.y,um.z),t.setOrientation(cm.x,cm.y,cm.z,fm.x,fm.y,fm.z)}}class v8 extends ni{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){Mt("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){Mt("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){Mt("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){Mt("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){Mt("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(Mt("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){Mt("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(Mt("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const hm=new re,c4=new Cs,_J=new re,dm=new re;class bJ extends v8{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(hm,c4,_J),dm.set(0,0,1).applyQuaternion(c4);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(hm.x,i),t.positionY.linearRampToValueAtTime(hm.y,i),t.positionZ.linearRampToValueAtTime(hm.z,i),t.orientationX.linearRampToValueAtTime(dm.x,i),t.orientationY.linearRampToValueAtTime(dm.y,i),t.orientationZ.linearRampToValueAtTime(dm.z,i)}else t.setPosition(hm.x,hm.y,hm.z),t.setOrientation(dm.x,dm.y,dm.z)}}class xJ{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class y8{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,a,s;switch(t){case"quaternion":r=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,a=e*r+r;let s=this.cumulativeWeight;if(s===0){for(let l=0;l!==r;++l)i[a+l]=i[l];s=t}else{s+=t;const l=t/s;this._mixBufferRegion(i,a,0,l,r)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const c=t*this._origIndex;this._mixBufferRegion(i,r,c,1-a,t)}s>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let c=t,f=t+t;c!==f;++c)if(i[c]!==i[c+t]){l.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let a=i,s=r;a!==s;++a)t[a]=t[r+a%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,a){if(r>=.5)for(let s=0;s!==a;++s)e[t+s]=e[i+s]}_slerp(e,t,i,r){Cs.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,a){const s=this._workIndex*a;Cs.multiplyQuaternionsFlat(e,s,e,t,e,i),Cs.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,i,r,a){const s=1-r;for(let l=0;l!==a;++l){const c=t+l;e[c]=e[c]*s+e[i+l]*r}}_lerpAdditive(e,t,i,r,a){for(let s=0;s!==a;++s){const l=t+s;e[l]=e[l]+e[i+s]*r}}}const ID="\\[\\]\\.:\\/",SJ=new RegExp("["+ID+"]","g"),RD="[^"+ID+"]",wJ="[^"+ID.replace("\\.","")+"]",EJ=/((?:WC+[\/:])*)/.source.replace("WC",RD),TJ=/(WCOD+)?/.source.replace("WCOD",wJ),AJ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",RD),MJ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",RD),CJ=new RegExp("^"+EJ+TJ+AJ+MJ+"$"),IJ=["material","materials","bones","map"];class RJ{constructor(e,t,i){const r=i||ti.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=i.length;r!==a;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class ti{constructor(e,t,i){this.path=t,this.parsedPath=i||ti.parseTrackName(t),this.node=ti.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new ti.Composite(e,t,i):new ti(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(SJ,"")}static parseTrackName(e){const t=CJ.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const a=i.nodeName.substring(r+1);IJ.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(a){for(let s=0;s<a.length;s++){const l=a[s];if(l.name===t||l.uuid===t)return l;const c=i(l.children);if(c)return c}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let a=t.propertyIndex;if(e||(e=ti.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){Mt("PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let f=t.objectIndex;switch(i){case"materials":if(!e.material){Yt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){Yt("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){Yt("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===f){f=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){Yt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){Yt("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){Yt("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(f!==void 0){if(e[f]===void 0){Yt("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const s=e[r];if(s===void 0){const f=t.nodeName;Yt("PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?l=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){Yt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){Yt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ti.Composite=RJ;ti.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ti.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ti.prototype.GetterByBindingType=[ti.prototype._getValue_direct,ti.prototype._getValue_array,ti.prototype._getValue_arrayElement,ti.prototype._getValue_toArray];ti.prototype.SetterByBindingTypeAndVersioning=[[ti.prototype._setValue_direct,ti.prototype._setValue_direct_setNeedsUpdate,ti.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ti.prototype._setValue_array,ti.prototype._setValue_array_setNeedsUpdate,ti.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ti.prototype._setValue_arrayElement,ti.prototype._setValue_arrayElement_setNeedsUpdate,ti.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ti.prototype._setValue_fromArray,ti.prototype._setValue_fromArray_setNeedsUpdate,ti.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class PJ{constructor(){this.isAnimationObjectGroup=!0,this.uuid=al(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length;let l,c=e.length,f=this.nCachedObjects_;for(let p=0,g=arguments.length;p!==g;++p){const v=arguments[p],_=v.uuid;let x=t[_];if(x===void 0){x=c++,t[_]=x,e.push(v);for(let T=0,S=s;T!==S;++T)a[T].push(new ti(v,i[T],r[T]))}else if(x<f){l=e[x];const T=--f,S=e[T];t[S.uuid]=x,e[x]=S,t[_]=T,e[T]=v;for(let w=0,I=s;w!==I;++w){const R=a[w],D=R[T];let B=R[x];R[x]=D,B===void 0&&(B=new ti(v,i[w],r[w])),R[T]=B}}else e[x]!==l&&Yt("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_;for(let s=0,l=arguments.length;s!==l;++s){const c=arguments[s],f=c.uuid,p=t[f];if(p!==void 0&&p>=a){const g=a++,v=e[g];t[v.uuid]=p,e[p]=v,t[f]=g,e[g]=c;for(let _=0,x=r;_!==x;++_){const T=i[_],S=T[g],w=T[p];T[p]=S,T[g]=w}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_,s=e.length;for(let l=0,c=arguments.length;l!==c;++l){const f=arguments[l],p=f.uuid,g=t[p];if(g!==void 0)if(delete t[p],g<a){const v=--a,_=e[v],x=--s,T=e[x];t[_.uuid]=g,e[g]=_,t[T.uuid]=v,e[v]=T,e.pop();for(let S=0,w=r;S!==w;++S){const I=i[S],R=I[v],D=I[x];I[g]=R,I[v]=D,I.pop()}}else{const v=--s,_=e[v];v>0&&(t[_.uuid]=g),e[g]=_,e.pop();for(let x=0,T=r;x!==T;++x){const S=i[x];S[g]=S[v],S.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const a=this._bindings;if(r!==void 0)return a[r];const s=this._paths,l=this._parsedPaths,c=this._objects,f=c.length,p=this.nCachedObjects_,g=new Array(f);r=a.length,i[e]=r,s.push(e),l.push(t),a.push(g);for(let v=p,_=c.length;v!==_;++v){const x=c[v];g[v]=new ti(x,e,t)}return g}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,a=this._parsedPaths,s=this._bindings,l=s.length-1,c=s[l],f=e[l];t[f]=i,s[i]=c,s.pop(),a[i]=a[l],a.pop(),r[i]=r[l],r.pop()}}}class _8{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const a=t.tracks,s=a.length,l=new Array(s),c={endingStart:Cm,endingEnd:Cm};for(let f=0;f!==s;++f){const p=a[f].createInterpolant(null);l[f]=p,p.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=lj,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,a=e._clip.duration,s=a/r,l=r/a;e.warp(1,s,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,a=r.time,s=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,f=l.sampleValues;return c[0]=a,c[1]=a+i,f[0]=e/s,f[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const c=(e-a)*i;c<0||i===0?t=0:(this._startTime=null,t=i*c)}t*=this._updateTimeScale(e);const s=this._updateTime(t),l=this._updateWeight(e);if(l>0){const c=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case eD:for(let p=0,g=c.length;p!==g;++p)c[p].evaluate(s),f[p].accumulateAdditive(l);break;case MA:default:for(let p=0,g=c.length;p!==g;++p)c[p].evaluate(s),f[p].accumulate(r,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,a=this._loopCount;const s=i===uj;if(e===0)return a===-1?r:s&&(a&1)===1?t-r:r;if(i===oj){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=t||r<0){const l=Math.floor(r/t);r-=t*l,a+=Math.abs(l);const c=this.repetitions-a;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const f=e<0;this._setEndings(f,!f,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=r;if(s&&(a&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Im,r.endingEnd=Im):(e?r.endingStart=this.zeroSlopeAtStart?Im:Cm:r.endingStart=Nb,t?r.endingEnd=this.zeroSlopeAtEnd?Im:Cm:r.endingEnd=Nb)}_scheduleFading(e,t,i){const r=this._mixer,a=r.time;let s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const l=s.parameterPositions,c=s.sampleValues;return l[0]=a,c[0]=t,l[1]=a+e,c[1]=i,this}}const NJ=new Float32Array(1);class OJ extends af{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,a=r.length,s=e._propertyBindings,l=e._interpolants,c=i.uuid,f=this._bindingsByRootAndName;let p=f[c];p===void 0&&(p={},f[c]=p);for(let g=0;g!==a;++g){const v=r[g],_=v.name;let x=p[_];if(x!==void 0)++x.referenceCount,s[g]=x;else{if(x=s[g],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,c,_));continue}const T=t&&t._propertyBindings[g].binding.parsedPath;x=new y8(ti.create(i,_,T),v.ValueTypeName,v.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,c,_),s[g]=x}l[g].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,a=this._actionsByClip[r];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,a=this._actionsByClip;let s=a[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=s;else{const l=s.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,l=s[a],c=l.knownActions,f=c[c.length-1],p=e._byClipCacheIndex;f._byClipCacheIndex=p,c[p]=f,c.pop(),e._byClipCacheIndex=null;const g=l.actionByRoot,v=(e._localRoot||this._root).uuid;delete g[v],c.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,a=this._bindings;let s=r[t];s===void 0&&(s={},r[t]=s),s[i]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,a=i.path,s=this._bindingsByRootAndName,l=s[r],c=t[t.length-1],f=e._cacheIndex;c._cacheIndex=f,t[f]=c,t.pop(),delete l[a],Object.keys(l).length===0&&delete s[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new SD(new Float32Array(2),new Float32Array(2),1,NJ),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=t[r];e.__cacheIndex=r,t[r]=e,a.__cacheIndex=i,t[i]=a}clipAction(e,t,i){const r=t||this._root,a=r.uuid;let s=typeof e=="string"?jb.findByName(r,e):e;const l=s!==null?s.uuid:e,c=this._actionsByClip[l];let f=null;if(i===void 0&&(s!==null?i=s.blendMode:i=MA),c!==void 0){const g=c.actionByRoot[a];if(g!==void 0&&g.blendMode===i)return g;f=c.knownActions[0],s===null&&(s=f._clip)}if(s===null)return null;const p=new _8(this,s,t,i);return this._bindAction(p,f),this._addInactiveAction(p,l,a),p}existingAction(e,t){const i=t||this._root,r=i.uuid,a=typeof e=="string"?jb.findByName(i,e):e,s=a?a.uuid:e,l=this._actionsByClip[s];return l!==void 0&&l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let f=0;f!==i;++f)t[f]._update(r,e,a,s);const l=this._bindings,c=this._nActiveBindings;for(let f=0;f!==c;++f)l[f].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,a=r[i];if(a!==void 0){const s=a.knownActions;for(let l=0,c=s.length;l!==c;++l){const f=s[l];this._deactivateAction(f);const p=f._cacheIndex,g=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,g._cacheIndex=p,t[p]=g,t.pop(),this._removeInactiveBindingsForAction(f)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const s in i){const l=i[s].actionByRoot,c=l[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,a=r[t];if(a!==void 0)for(const s in a){const l=a[s];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class DJ extends nD{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new PA(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class PD{constructor(e){this.value=e}clone(){return new PD(this.value.clone===void 0?this.value:this.value.clone())}}let LJ=0;class kJ extends af{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:LJ++}),this.name="",this.usage=Db,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const a=Array.isArray(t[i])?t[i]:[t[i]];for(let s=0;s<a.length;s++)this.uniforms.push(a[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class UJ extends LA{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class FJ{constructor(e,t,i,r,a,s=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=a,this.normalized=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const f4=new pn;class b8{constructor(e,t,i=0,r=1/0){this.ray=new gg(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Ey,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):Yt("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return f4.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(f4),this}intersectObject(e,t=!0,i=[]){return iN(e,this,i,t),i.sort(h4),i}intersectObjects(e,t=!0,i=[]){for(let r=0,a=e.length;r<a;r++)iN(e[r],this,i,t);return i.sort(h4),i}}function h4(n,e){return n.distance-e.distance}function iN(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const a=n.children;for(let s=0,l=a.length;s<l;s++)iN(a[s],e,t,!0)}}class zJ{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=BJ.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function BJ(){this._document.hidden===!1&&this.reset()}class rN{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=fn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(fn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class VJ{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class ND{constructor(e,t,i,r){ND.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const a=this.elements;return a[0]=e,a[2]=t,a[1]=i,a[3]=r,this}}const d4=new tt;class jJ{constructor(e=new tt(1/0,1/0),t=new tt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=d4.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,d4).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const p4=new re,nw=new re,Fv=new re,zv=new re,RI=new re,HJ=new re,GJ=new re;class WJ{constructor(e=new re,t=new re){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){p4.subVectors(e,this.start),nw.subVectors(this.end,this.start);const i=nw.dot(nw);let a=nw.dot(p4)/i;return t&&(a=fn(a,0,1)),a}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,t=HJ,i=GJ){const r=10000000000000001e-32;let a,s;const l=this.start,c=e.start,f=this.end,p=e.end;Fv.subVectors(f,l),zv.subVectors(p,c),RI.subVectors(l,c);const g=Fv.dot(Fv),v=zv.dot(zv),_=zv.dot(RI);if(g<=r&&v<=r)return t.copy(l),i.copy(c),t.sub(i),t.dot(t);if(g<=r)a=0,s=_/v,s=fn(s,0,1);else{const x=Fv.dot(RI);if(v<=r)s=0,a=fn(-x/g,0,1);else{const T=Fv.dot(zv),S=g*v-T*T;S!==0?a=fn((T*_-x*v)/S,0,1):a=0,s=(T*a+_)/v,s<0?(s=0,a=fn(-x/g,0,1)):s>1&&(s=1,a=fn((T-x)/g,0,1))}}return t.copy(l).add(Fv.multiplyScalar(a)),i.copy(c).add(zv.multiplyScalar(s)),t.sub(i),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const m4=new re;class qJ extends ni{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new gn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,l=1,c=32;s<c;s++,l++){const f=s/c*Math.PI*2,p=l/c*Math.PI*2;r.push(Math.cos(f),Math.sin(f),1,Math.cos(p),Math.sin(p),1)}i.setAttribute("position",new zt(r,3));const a=new no({fog:!1,toneMapped:!1});this.cone=new sf(i,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),m4.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(m4),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const wd=new re,iw=new pn,PI=new pn;class $J extends sf{constructor(e){const t=x8(e),i=new gn,r=[],a=[];for(let f=0;f<t.length;f++){const p=t[f];p.parent&&p.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(0,0,0),a.push(0,0,0))}i.setAttribute("position",new zt(r,3)),i.setAttribute("color",new zt(a,3));const s=new no({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,s),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const l=new Dt(255),c=new Dt(65280);this.setColors(l,c)}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");PI.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<t.length;a++){const l=t[a];l.parent&&l.parent.isBone&&(iw.multiplyMatrices(PI,l.matrixWorld),wd.setFromMatrixPosition(iw),r.setXYZ(s,wd.x,wd.y,wd.z),iw.multiplyMatrices(PI,l.parent.matrixWorld),wd.setFromMatrixPosition(iw),r.setXYZ(s+1,wd.x,wd.y,wd.z),s+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const r=this.geometry.getAttribute("color");for(let a=0;a<r.count;a+=2)r.setXYZ(a,e.r,e.g,e.b),r.setXYZ(a+1,t.r,t.g,t.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function x8(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...x8(n.children[t]));return e}class XJ extends Zr{constructor(e,t,i){const r=new Ex(t,4,2),a=new fp({wireframe:!0,fog:!1,toneMapped:!1});super(r,a),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const YJ=new re,g4=new Dt,v4=new Dt;class KJ extends ni{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new wx(t);r.rotateY(Math.PI*.5),this.material=new fp({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=r.getAttribute("position"),s=new Float32Array(a.count*3);r.setAttribute("color",new hi(s,3)),this.add(new Zr(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");g4.copy(this.light.color),v4.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const a=i<r/2?g4:v4;t.setXYZ(i,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(YJ.setFromMatrixPosition(this.light.matrixWorld).negate())}}class ZJ extends sf{constructor(e=10,t=10,i=4473924,r=8947848){i=new Dt(i),r=new Dt(r);const a=t/2,s=e/t,l=e/2,c=[],f=[];for(let v=0,_=0,x=-l;v<=t;v++,x+=s){c.push(-l,0,x,l,0,x),c.push(x,0,-l,x,0,l);const T=v===a?i:r;T.toArray(f,_),_+=3,T.toArray(f,_),_+=3,T.toArray(f,_),_+=3,T.toArray(f,_),_+=3}const p=new gn;p.setAttribute("position",new zt(c,3)),p.setAttribute("color",new zt(f,3));const g=new no({vertexColors:!0,toneMapped:!1});super(p,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class QJ extends sf{constructor(e=10,t=16,i=8,r=64,a=4473924,s=8947848){a=new Dt(a),s=new Dt(s);const l=[],c=[];if(t>1)for(let g=0;g<t;g++){const v=g/t*(Math.PI*2),_=Math.sin(v)*e,x=Math.cos(v)*e;l.push(0,0,0),l.push(_,0,x);const T=g&1?a:s;c.push(T.r,T.g,T.b),c.push(T.r,T.g,T.b)}for(let g=0;g<i;g++){const v=g&1?a:s,_=e-e/i*g;for(let x=0;x<r;x++){let T=x/r*(Math.PI*2),S=Math.sin(T)*_,w=Math.cos(T)*_;l.push(S,0,w),c.push(v.r,v.g,v.b),T=(x+1)/r*(Math.PI*2),S=Math.sin(T)*_,w=Math.cos(T)*_,l.push(S,0,w),c.push(v.r,v.g,v.b)}}const f=new gn;f.setAttribute("position",new zt(l,3)),f.setAttribute("color",new zt(c,3));const p=new no({vertexColors:!0,toneMapped:!1});super(f,p),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const y4=new re,rw=new re,_4=new re;class JJ extends ni{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new gn;r.setAttribute("position",new zt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new no({fog:!1,toneMapped:!1});this.lightPlane=new ep(r,a),this.add(this.lightPlane),r=new gn,r.setAttribute("position",new zt([0,0,0,0,0,1],3)),this.targetLine=new ep(r,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),y4.setFromMatrixPosition(this.light.matrixWorld),rw.setFromMatrixPosition(this.light.target.matrixWorld),_4.subVectors(rw,y4),this.lightPlane.lookAt(rw),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(rw),this.targetLine.scale.z=_4.length()}}const aw=new re,xr=new NA;class eee extends sf{constructor(e){const t=new gn,i=new no({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],a=[],s={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(x,T){c(x),c(T)}function c(x){r.push(0,0,0),a.push(0,0,0),s[x]===void 0&&(s[x]=[]),s[x].push(r.length/3-1)}t.setAttribute("position",new zt(r,3)),t.setAttribute("color",new zt(a,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const f=new Dt(16755200),p=new Dt(16711680),g=new Dt(43775),v=new Dt(16777215),_=new Dt(3355443);this.setColors(f,p,g,v,_)}setColors(e,t,i,r,a){const l=this.geometry.getAttribute("color");return l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,a.r,a.g,a.b),l.setXYZ(41,a.r,a.g,a.b),l.setXYZ(42,a.r,a.g,a.b),l.setXYZ(43,a.r,a.g,a.b),l.setXYZ(44,a.r,a.g,a.b),l.setXYZ(45,a.r,a.g,a.b),l.setXYZ(46,a.r,a.g,a.b),l.setXYZ(47,a.r,a.g,a.b),l.setXYZ(48,a.r,a.g,a.b),l.setXYZ(49,a.r,a.g,a.b),l.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;let a,s;if(xr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)a=1,s=0;else if(this.camera.coordinateSystem===tl)a=-1,s=1;else if(this.camera.coordinateSystem===xy)a=0,s=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Dr("c",t,e,xr,0,0,a),Dr("t",t,e,xr,0,0,s),Dr("n1",t,e,xr,-i,-r,a),Dr("n2",t,e,xr,i,-r,a),Dr("n3",t,e,xr,-i,r,a),Dr("n4",t,e,xr,i,r,a),Dr("f1",t,e,xr,-i,-r,s),Dr("f2",t,e,xr,i,-r,s),Dr("f3",t,e,xr,-i,r,s),Dr("f4",t,e,xr,i,r,s),Dr("u1",t,e,xr,i*.7,r*1.1,a),Dr("u2",t,e,xr,-i*.7,r*1.1,a),Dr("u3",t,e,xr,0,r*2,a),Dr("cf1",t,e,xr,-i,0,s),Dr("cf2",t,e,xr,i,0,s),Dr("cf3",t,e,xr,0,-r,s),Dr("cf4",t,e,xr,0,r,s),Dr("cn1",t,e,xr,-i,0,a),Dr("cn2",t,e,xr,i,0,a),Dr("cn3",t,e,xr,0,-r,a),Dr("cn4",t,e,xr,0,r,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Dr(n,e,t,i,r,a,s){aw.set(r,a,s).unproject(i);const l=e[n];if(l!==void 0){const c=t.getAttribute("position");for(let f=0,p=l.length;f<p;f++)c.setXYZ(l[f],aw.x,aw.y,aw.z)}}const sw=new es;class tee extends sf{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),a=new gn;a.setIndex(new hi(i,1)),a.setAttribute("position",new hi(r,3)),super(a,new no({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&sw.setFromObject(this.object),sw.isEmpty())return;const e=sw.min,t=sw.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class nee extends sf{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new gn;a.setIndex(new hi(i,1)),a.setAttribute("position",new zt(r,3)),super(a,new no({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class iee extends ep{constructor(e,t=1,i=16776960){const r=i,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new gn;s.setAttribute("position",new zt(a,3)),s.computeBoundingSphere(),super(s,new no({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new gn;c.setAttribute("position",new zt(l,3)),c.computeBoundingSphere(),this.add(new Zr(c,new fp({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const b4=new re;let ow,NI;class ree extends ni{constructor(e=new re(0,0,1),t=new re(0,0,0),i=1,r=16776960,a=i*.2,s=a*.2){super(),this.type="ArrowHelper",ow===void 0&&(ow=new gn,ow.setAttribute("position",new zt([0,0,0,0,1,0],3)),NI=new Sx(.5,1,5,1),NI.translate(0,-.5,0)),this.position.copy(t),this.line=new ep(ow,new no({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Zr(NI,new fp({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,a,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{b4.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(b4,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class aee extends sf{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new gn;r.setAttribute("position",new zt(t,3)),r.setAttribute("color",new zt(i,3));const a=new no({vertexColors:!0,toneMapped:!1});super(r,a),this.type="AxesHelper"}setColors(e,t,i){const r=new Dt,a=this.geometry.attributes.color.array;return r.set(e),r.toArray(a,0),r.toArray(a,3),r.set(t),r.toArray(a,6),r.toArray(a,9),r.set(i),r.toArray(a,12),r.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class see{constructor(){this.type="ShapePath",this.color=new Dt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new QE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,a,s){return this.currentPath.bezierCurveTo(e,t,i,r,a,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(w){const I=[];for(let R=0,D=w.length;R<D;R++){const B=w[R],z=new Bm;z.curves=B.curves,I.push(z)}return I}function i(w,I){const R=I.length;let D=!1;for(let B=R-1,z=0;z<R;B=z++){let k=I[B],F=I[z],P=F.x-k.x,L=F.y-k.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(k=I[z],P=-P,F=I[B],L=-L),w.y<k.y||w.y>F.y)continue;if(w.y===k.y){if(w.x===k.x)return!0}else{const V=L*(w.x-k.x)-P*(w.y-k.y);if(V===0)return!0;if(V<0)continue;D=!D}}else{if(w.y!==k.y)continue;if(F.x<=w.x&&w.x<=k.x||k.x<=w.x&&w.x<=F.x)return!0}}return D}const r=Nu.isClockWise,a=this.subPaths;if(a.length===0)return[];let s,l,c;const f=[];if(a.length===1)return l=a[0],c=new Bm,c.curves=l.curves,f.push(c),f;let p=!r(a[0].getPoints());p=e?!p:p;const g=[],v=[];let _=[],x=0,T;v[x]=void 0,_[x]=[];for(let w=0,I=a.length;w<I;w++)l=a[w],T=l.getPoints(),s=r(T),s=e?!s:s,s?(!p&&v[x]&&x++,v[x]={s:new Bm,p:T},v[x].s.curves=l.curves,p&&x++,_[x]=[]):_[x].push({h:l,p:T[0]});if(!v[0])return t(a);if(v.length>1){let w=!1,I=0;for(let R=0,D=v.length;R<D;R++)g[R]=[];for(let R=0,D=v.length;R<D;R++){const B=_[R];for(let z=0;z<B.length;z++){const k=B[z];let F=!0;for(let P=0;P<v.length;P++)i(k.p,v[P].p)&&(R!==P&&I++,F?(F=!1,g[P].push(k)):w=!0);F&&g[R].push(k)}}I>0&&w===!1&&(_=g)}let S;for(let w=0,I=v.length;w<I;w++){c=v[w].s,f.push(c),S=_[w];for(let R=0,D=S.length;R<D;R++)c.holes.push(S[R].h)}return f}}class oee extends af{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){Mt("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function lee(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function uee(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function cee(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function aN(n,e,t,i){const r=fee(i);switch(t){case QO:return n*e;case EA:return n*e/r.components*r.byteLength;case _x:return n*e/r.components*r.byteLength;case Km:return n*e*2/r.components*r.byteLength;case TA:return n*e*2/r.components*r.byteLength;case JO:return n*e*3/r.components*r.byteLength;case Ms:return n*e*4/r.components*r.byteLength;case AA:return n*e*4/r.components*r.byteLength;case ub:case cb:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case fb:case hb:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case vE:case _E:return Math.max(n,16)*Math.max(e,8)/4;case gE:case yE:return Math.max(n,8)*Math.max(e,8)/2;case bE:case xE:case wE:case EE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case SE:case TE:case AE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case ME:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case CE:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case IE:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case RE:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case PE:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case NE:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case OE:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case DE:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case LE:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case kE:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case UE:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case FE:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case zE:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case BE:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case VE:case jE:case HE:return Math.ceil(n/4)*Math.ceil(e/4)*16;case GE:case WE:return Math.ceil(n/4)*Math.ceil(e/4)*8;case qE:case $E:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function fee(n){switch(n){case Ys:case XO:return{byteLength:1,components:1};case _y:case YO:case $c:return{byteLength:2,components:1};case SA:case wA:return{byteLength:2,components:4};case Xl:case xA:case Zs:return{byteLength:4,components:1};case KO:case ZO:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class hee{static contain(e,t){return lee(e,t)}static cover(e,t){return uee(e,t)}static fill(e){return cee(e)}static getByteLength(e,t,i,r){return aN(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:yA}}));typeof window<"u"&&(window.__THREE__?Mt("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=yA);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function S8(){let n=null,e=!1,t=null,i=null;function r(a,s){t(a,s),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function dee(n){const e=new WeakMap;function t(l,c){const f=l.array,p=l.usage,g=f.byteLength,v=n.createBuffer();n.bindBuffer(c,v),n.bufferData(c,f,p),l.onUploadCallback();let _;if(f instanceof Float32Array)_=n.FLOAT;else if(typeof Float16Array<"u"&&f instanceof Float16Array)_=n.HALF_FLOAT;else if(f instanceof Uint16Array)l.isFloat16BufferAttribute?_=n.HALF_FLOAT:_=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)_=n.SHORT;else if(f instanceof Uint32Array)_=n.UNSIGNED_INT;else if(f instanceof Int32Array)_=n.INT;else if(f instanceof Int8Array)_=n.BYTE;else if(f instanceof Uint8Array)_=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)_=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:v,type:_,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version,size:g}}function i(l,c,f){const p=c.array,g=c.updateRanges;if(n.bindBuffer(f,l),g.length===0)n.bufferSubData(f,0,p);else{g.sort((_,x)=>_.start-x.start);let v=0;for(let _=1;_<g.length;_++){const x=g[v],T=g[_];T.start<=x.start+x.count+1?x.count=Math.max(x.count,T.start+T.count-x.start):(++v,g[v]=T)}g.length=v+1;for(let _=0,x=g.length;_<x;_++){const T=g[_];n.bufferSubData(f,T.start*p.BYTES_PER_ELEMENT,p,T.start,T.count)}c.clearUpdateRanges()}c.onUploadCallback()}function r(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=e.get(l);c&&(n.deleteBuffer(c.buffer),e.delete(l))}function s(l,c){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const p=e.get(l);(!p||p.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const f=e.get(l);if(f===void 0)e.set(l,t(l,c));else if(f.version<l.version){if(f.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(f.buffer,l,c),f.version=l.version}}return{get:r,remove:a,update:s}}var pee=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,mee=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,gee=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,vee=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,yee=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,_ee=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,bee=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,xee=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,See=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,wee=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Eee=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Tee=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Aee=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Mee=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Cee=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Iee=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Ree=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Pee=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Nee=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Oee=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Dee=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Lee=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,kee=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Uee=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Fee=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,zee=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Bee=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Vee=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,jee=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Hee=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Gee="gl_FragColor = linearToOutputTexel( gl_FragColor );",Wee=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,qee=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,$ee=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,Xee=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Yee=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Kee=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Zee=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Qee=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Jee=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,ete=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,tte=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,nte=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,ite=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,rte=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,ate=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,ste=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,ote=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lte=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,ute=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,cte=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,fte=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,hte=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,dte=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,pte=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,mte=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,gte=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,vte=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,yte=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,_te=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,bte=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,xte=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Ste=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,wte=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Ete=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Tte=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Ate=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Mte=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Cte=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Ite=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Rte=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Pte=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Nte=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Ote=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Dte=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Lte=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,kte=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Ute=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Fte=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,zte=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Bte=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Vte=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,jte=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Hte=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Gte=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Wte=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,qte=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,$te=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Xte=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Yte=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,Kte=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Zte=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Qte=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Jte=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,ene=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,tne=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,nne=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,ine=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,rne=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,ane=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,sne=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,one=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,lne=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,une=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,cne=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,fne=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,hne=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const dne=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,pne=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,mne=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,gne=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vne=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,yne=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_ne=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,bne=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,xne=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Sne=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,wne=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Ene=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Tne=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Ane=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Mne=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Cne=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ine=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Rne=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Pne=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Nne=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,One=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Dne=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Lne=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kne=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Une=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Fne=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zne=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Bne=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Vne=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,jne=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Hne=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Gne=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Wne=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,qne=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,On={alphahash_fragment:pee,alphahash_pars_fragment:mee,alphamap_fragment:gee,alphamap_pars_fragment:vee,alphatest_fragment:yee,alphatest_pars_fragment:_ee,aomap_fragment:bee,aomap_pars_fragment:xee,batching_pars_vertex:See,batching_vertex:wee,begin_vertex:Eee,beginnormal_vertex:Tee,bsdfs:Aee,iridescence_fragment:Mee,bumpmap_pars_fragment:Cee,clipping_planes_fragment:Iee,clipping_planes_pars_fragment:Ree,clipping_planes_pars_vertex:Pee,clipping_planes_vertex:Nee,color_fragment:Oee,color_pars_fragment:Dee,color_pars_vertex:Lee,color_vertex:kee,common:Uee,cube_uv_reflection_fragment:Fee,defaultnormal_vertex:zee,displacementmap_pars_vertex:Bee,displacementmap_vertex:Vee,emissivemap_fragment:jee,emissivemap_pars_fragment:Hee,colorspace_fragment:Gee,colorspace_pars_fragment:Wee,envmap_fragment:qee,envmap_common_pars_fragment:$ee,envmap_pars_fragment:Xee,envmap_pars_vertex:Yee,envmap_physical_pars_fragment:ste,envmap_vertex:Kee,fog_vertex:Zee,fog_pars_vertex:Qee,fog_fragment:Jee,fog_pars_fragment:ete,gradientmap_pars_fragment:tte,lightmap_pars_fragment:nte,lights_lambert_fragment:ite,lights_lambert_pars_fragment:rte,lights_pars_begin:ate,lights_toon_fragment:ote,lights_toon_pars_fragment:lte,lights_phong_fragment:ute,lights_phong_pars_fragment:cte,lights_physical_fragment:fte,lights_physical_pars_fragment:hte,lights_fragment_begin:dte,lights_fragment_maps:pte,lights_fragment_end:mte,logdepthbuf_fragment:gte,logdepthbuf_pars_fragment:vte,logdepthbuf_pars_vertex:yte,logdepthbuf_vertex:_te,map_fragment:bte,map_pars_fragment:xte,map_particle_fragment:Ste,map_particle_pars_fragment:wte,metalnessmap_fragment:Ete,metalnessmap_pars_fragment:Tte,morphinstance_vertex:Ate,morphcolor_vertex:Mte,morphnormal_vertex:Cte,morphtarget_pars_vertex:Ite,morphtarget_vertex:Rte,normal_fragment_begin:Pte,normal_fragment_maps:Nte,normal_pars_fragment:Ote,normal_pars_vertex:Dte,normal_vertex:Lte,normalmap_pars_fragment:kte,clearcoat_normal_fragment_begin:Ute,clearcoat_normal_fragment_maps:Fte,clearcoat_pars_fragment:zte,iridescence_pars_fragment:Bte,opaque_fragment:Vte,packing:jte,premultiplied_alpha_fragment:Hte,project_vertex:Gte,dithering_fragment:Wte,dithering_pars_fragment:qte,roughnessmap_fragment:$te,roughnessmap_pars_fragment:Xte,shadowmap_pars_fragment:Yte,shadowmap_pars_vertex:Kte,shadowmap_vertex:Zte,shadowmask_pars_fragment:Qte,skinbase_vertex:Jte,skinning_pars_vertex:ene,skinning_vertex:tne,skinnormal_vertex:nne,specularmap_fragment:ine,specularmap_pars_fragment:rne,tonemapping_fragment:ane,tonemapping_pars_fragment:sne,transmission_fragment:one,transmission_pars_fragment:lne,uv_pars_fragment:une,uv_pars_vertex:cne,uv_vertex:fne,worldpos_vertex:hne,background_vert:dne,background_frag:pne,backgroundCube_vert:mne,backgroundCube_frag:gne,cube_vert:vne,cube_frag:yne,depth_vert:_ne,depth_frag:bne,distance_vert:xne,distance_frag:Sne,equirect_vert:wne,equirect_frag:Ene,linedashed_vert:Tne,linedashed_frag:Ane,meshbasic_vert:Mne,meshbasic_frag:Cne,meshlambert_vert:Ine,meshlambert_frag:Rne,meshmatcap_vert:Pne,meshmatcap_frag:Nne,meshnormal_vert:One,meshnormal_frag:Dne,meshphong_vert:Lne,meshphong_frag:kne,meshphysical_vert:Une,meshphysical_frag:Fne,meshtoon_vert:zne,meshtoon_frag:Bne,points_vert:Vne,points_frag:jne,shadow_vert:Hne,shadow_frag:Gne,sprite_vert:Wne,sprite_frag:qne},Rt={common:{diffuse:{value:new Dt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Tn},alphaMap:{value:null},alphaMapTransform:{value:new Tn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Tn}},envmap:{envMap:{value:null},envMapRotation:{value:new Tn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Tn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Tn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Tn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Tn},normalScale:{value:new tt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Tn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Tn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Tn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Tn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Dt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Dt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Tn},alphaTest:{value:0},uvTransform:{value:new Tn}},sprite:{diffuse:{value:new Dt(16777215)},opacity:{value:1},center:{value:new tt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Tn},alphaMap:{value:null},alphaMapTransform:{value:new Tn},alphaTest:{value:0}}},Cu={basic:{uniforms:$s([Rt.common,Rt.specularmap,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.fog]),vertexShader:On.meshbasic_vert,fragmentShader:On.meshbasic_frag},lambert:{uniforms:$s([Rt.common,Rt.specularmap,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.fog,Rt.lights,{emissive:{value:new Dt(0)}}]),vertexShader:On.meshlambert_vert,fragmentShader:On.meshlambert_frag},phong:{uniforms:$s([Rt.common,Rt.specularmap,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.fog,Rt.lights,{emissive:{value:new Dt(0)},specular:{value:new Dt(1118481)},shininess:{value:30}}]),vertexShader:On.meshphong_vert,fragmentShader:On.meshphong_frag},standard:{uniforms:$s([Rt.common,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.roughnessmap,Rt.metalnessmap,Rt.fog,Rt.lights,{emissive:{value:new Dt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:On.meshphysical_vert,fragmentShader:On.meshphysical_frag},toon:{uniforms:$s([Rt.common,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.gradientmap,Rt.fog,Rt.lights,{emissive:{value:new Dt(0)}}]),vertexShader:On.meshtoon_vert,fragmentShader:On.meshtoon_frag},matcap:{uniforms:$s([Rt.common,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.fog,{matcap:{value:null}}]),vertexShader:On.meshmatcap_vert,fragmentShader:On.meshmatcap_frag},points:{uniforms:$s([Rt.points,Rt.fog]),vertexShader:On.points_vert,fragmentShader:On.points_frag},dashed:{uniforms:$s([Rt.common,Rt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:On.linedashed_vert,fragmentShader:On.linedashed_frag},depth:{uniforms:$s([Rt.common,Rt.displacementmap]),vertexShader:On.depth_vert,fragmentShader:On.depth_frag},normal:{uniforms:$s([Rt.common,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,{opacity:{value:1}}]),vertexShader:On.meshnormal_vert,fragmentShader:On.meshnormal_frag},sprite:{uniforms:$s([Rt.sprite,Rt.fog]),vertexShader:On.sprite_vert,fragmentShader:On.sprite_frag},background:{uniforms:{uvTransform:{value:new Tn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:On.background_vert,fragmentShader:On.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Tn}},vertexShader:On.backgroundCube_vert,fragmentShader:On.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:On.cube_vert,fragmentShader:On.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:On.equirect_vert,fragmentShader:On.equirect_frag},distance:{uniforms:$s([Rt.common,Rt.displacementmap,{referencePosition:{value:new re},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:On.distance_vert,fragmentShader:On.distance_frag},shadow:{uniforms:$s([Rt.lights,Rt.fog,{color:{value:new Dt(0)},opacity:{value:1}}]),vertexShader:On.shadow_vert,fragmentShader:On.shadow_frag}};Cu.physical={uniforms:$s([Cu.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Tn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Tn},clearcoatNormalScale:{value:new tt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Tn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Tn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Tn},sheen:{value:0},sheenColor:{value:new Dt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Tn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Tn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Tn},transmissionSamplerSize:{value:new tt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Tn},attenuationDistance:{value:0},attenuationColor:{value:new Dt(0)},specularColor:{value:new Dt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Tn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Tn},anisotropyVector:{value:new tt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Tn}}]),vertexShader:On.meshphysical_vert,fragmentShader:On.meshphysical_frag};const lw={r:0,b:0,g:0},pm=new ll,$ne=new pn;function Xne(n,e,t,i,r,a,s){const l=new Dt(0);let c=a===!0?0:1,f,p,g=null,v=0,_=null;function x(R){let D=R.isScene===!0?R.background:null;return D&&D.isTexture&&(D=(R.backgroundBlurriness>0?t:e).get(D)),D}function T(R){let D=!1;const B=x(R);B===null?w(l,c):B&&B.isColor&&(w(B,1),D=!0);const z=n.xr.getEnvironmentBlendMode();z==="additive"?i.buffers.color.setClear(0,0,0,1,s):z==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||D)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function S(R,D){const B=x(D);B&&(B.isCubeTexture||B.mapping===Wy)?(p===void 0&&(p=new Zr(new vg(1,1,1),new Yl({name:"BackgroundCubeMaterial",uniforms:Ty(Cu.backgroundCube.uniforms),vertexShader:Cu.backgroundCube.vertexShader,fragmentShader:Cu.backgroundCube.fragmentShader,side:eo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(z,k,F){this.matrixWorld.copyPosition(F.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(p)),pm.copy(D.backgroundRotation),pm.x*=-1,pm.y*=-1,pm.z*=-1,B.isCubeTexture&&B.isRenderTargetTexture===!1&&(pm.y*=-1,pm.z*=-1),p.material.uniforms.envMap.value=B,p.material.uniforms.flipEnvMap.value=B.isCubeTexture&&B.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=D.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4($ne.makeRotationFromEuler(pm)),p.material.toneMapped=qn.getTransfer(B.colorSpace)!==gi,(g!==B||v!==B.version||_!==n.toneMapping)&&(p.material.needsUpdate=!0,g=B,v=B.version,_=n.toneMapping),p.layers.enableAll(),R.unshift(p,p.geometry,p.material,0,0,null)):B&&B.isTexture&&(f===void 0&&(f=new Zr(new $y(2,2),new Yl({name:"BackgroundMaterial",uniforms:Ty(Cu.background.uniforms),vertexShader:Cu.background.vertexShader,fragmentShader:Cu.background.fragmentShader,side:lh,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(f)),f.material.uniforms.t2D.value=B,f.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,f.material.toneMapped=qn.getTransfer(B.colorSpace)!==gi,B.matrixAutoUpdate===!0&&B.updateMatrix(),f.material.uniforms.uvTransform.value.copy(B.matrix),(g!==B||v!==B.version||_!==n.toneMapping)&&(f.material.needsUpdate=!0,g=B,v=B.version,_=n.toneMapping),f.layers.enableAll(),R.unshift(f,f.geometry,f.material,0,0,null))}function w(R,D){R.getRGB(lw,Ej(n)),i.buffers.color.setClear(lw.r,lw.g,lw.b,D,s)}function I(){p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return l},setClearColor:function(R,D=1){l.set(R),c=D,w(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(R){c=R,w(l,c)},render:T,addToRenderList:S,dispose:I}}function Yne(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=v(null);let a=r,s=!1;function l(L,V,W,q,ue){let le=!1;const ee=g(q,W,V);a!==ee&&(a=ee,f(a.object)),le=_(L,q,W,ue),le&&x(L,q,W,ue),ue!==null&&e.update(ue,n.ELEMENT_ARRAY_BUFFER),(le||s)&&(s=!1,D(L,V,W,q),ue!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(ue).buffer))}function c(){return n.createVertexArray()}function f(L){return n.bindVertexArray(L)}function p(L){return n.deleteVertexArray(L)}function g(L,V,W){const q=W.wireframe===!0;let ue=i[L.id];ue===void 0&&(ue={},i[L.id]=ue);let le=ue[V.id];le===void 0&&(le={},ue[V.id]=le);let ee=le[q];return ee===void 0&&(ee=v(c()),le[q]=ee),ee}function v(L){const V=[],W=[],q=[];for(let ue=0;ue<t;ue++)V[ue]=0,W[ue]=0,q[ue]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:V,enabledAttributes:W,attributeDivisors:q,object:L,attributes:{},index:null}}function _(L,V,W,q){const ue=a.attributes,le=V.attributes;let ee=0;const ie=W.getAttributes();for(const he in ie)if(ie[he].location>=0){const Me=ue[he];let J=le[he];if(J===void 0&&(he==="instanceMatrix"&&L.instanceMatrix&&(J=L.instanceMatrix),he==="instanceColor"&&L.instanceColor&&(J=L.instanceColor)),Me===void 0||Me.attribute!==J||J&&Me.data!==J.data)return!0;ee++}return a.attributesNum!==ee||a.index!==q}function x(L,V,W,q){const ue={},le=V.attributes;let ee=0;const ie=W.getAttributes();for(const he in ie)if(ie[he].location>=0){let Me=le[he];Me===void 0&&(he==="instanceMatrix"&&L.instanceMatrix&&(Me=L.instanceMatrix),he==="instanceColor"&&L.instanceColor&&(Me=L.instanceColor));const J={};J.attribute=Me,Me&&Me.data&&(J.data=Me.data),ue[he]=J,ee++}a.attributes=ue,a.attributesNum=ee,a.index=q}function T(){const L=a.newAttributes;for(let V=0,W=L.length;V<W;V++)L[V]=0}function S(L){w(L,0)}function w(L,V){const W=a.newAttributes,q=a.enabledAttributes,ue=a.attributeDivisors;W[L]=1,q[L]===0&&(n.enableVertexAttribArray(L),q[L]=1),ue[L]!==V&&(n.vertexAttribDivisor(L,V),ue[L]=V)}function I(){const L=a.newAttributes,V=a.enabledAttributes;for(let W=0,q=V.length;W<q;W++)V[W]!==L[W]&&(n.disableVertexAttribArray(W),V[W]=0)}function R(L,V,W,q,ue,le,ee){ee===!0?n.vertexAttribIPointer(L,V,W,ue,le):n.vertexAttribPointer(L,V,W,q,ue,le)}function D(L,V,W,q){T();const ue=q.attributes,le=W.getAttributes(),ee=V.defaultAttributeValues;for(const ie in le){const he=le[ie];if(he.location>=0){let we=ue[ie];if(we===void 0&&(ie==="instanceMatrix"&&L.instanceMatrix&&(we=L.instanceMatrix),ie==="instanceColor"&&L.instanceColor&&(we=L.instanceColor)),we!==void 0){const Me=we.normalized,J=we.itemSize,pe=e.get(we);if(pe===void 0)continue;const Ee=pe.buffer,Ge=pe.type,ht=pe.bytesPerElement,be=Ge===n.INT||Ge===n.UNSIGNED_INT||we.gpuType===xA;if(we.isInterleavedBufferAttribute){const Te=we.data,dt=Te.stride,ve=we.offset;if(Te.isInstancedInterleavedBuffer){for(let Ye=0;Ye<he.locationSize;Ye++)w(he.location+Ye,Te.meshPerAttribute);L.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=Te.meshPerAttribute*Te.count)}else for(let Ye=0;Ye<he.locationSize;Ye++)S(he.location+Ye);n.bindBuffer(n.ARRAY_BUFFER,Ee);for(let Ye=0;Ye<he.locationSize;Ye++)R(he.location+Ye,J/he.locationSize,Ge,Me,dt*ht,(ve+J/he.locationSize*Ye)*ht,be)}else{if(we.isInstancedBufferAttribute){for(let Te=0;Te<he.locationSize;Te++)w(he.location+Te,we.meshPerAttribute);L.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=we.meshPerAttribute*we.count)}else for(let Te=0;Te<he.locationSize;Te++)S(he.location+Te);n.bindBuffer(n.ARRAY_BUFFER,Ee);for(let Te=0;Te<he.locationSize;Te++)R(he.location+Te,J/he.locationSize,Ge,Me,J*ht,J/he.locationSize*Te*ht,be)}}else if(ee!==void 0){const Me=ee[ie];if(Me!==void 0)switch(Me.length){case 2:n.vertexAttrib2fv(he.location,Me);break;case 3:n.vertexAttrib3fv(he.location,Me);break;case 4:n.vertexAttrib4fv(he.location,Me);break;default:n.vertexAttrib1fv(he.location,Me)}}}}I()}function B(){F();for(const L in i){const V=i[L];for(const W in V){const q=V[W];for(const ue in q)p(q[ue].object),delete q[ue];delete V[W]}delete i[L]}}function z(L){if(i[L.id]===void 0)return;const V=i[L.id];for(const W in V){const q=V[W];for(const ue in q)p(q[ue].object),delete q[ue];delete V[W]}delete i[L.id]}function k(L){for(const V in i){const W=i[V];if(W[L.id]===void 0)continue;const q=W[L.id];for(const ue in q)p(q[ue].object),delete q[ue];delete W[L.id]}}function F(){P(),s=!0,a!==r&&(a=r,f(a.object))}function P(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:l,reset:F,resetDefaultState:P,dispose:B,releaseStatesOfGeometry:z,releaseStatesOfProgram:k,initAttributes:T,enableAttribute:S,disableUnusedAttributes:I}}function Kne(n,e,t){let i;function r(f){i=f}function a(f,p){n.drawArrays(i,f,p),t.update(p,i,1)}function s(f,p,g){g!==0&&(n.drawArraysInstanced(i,f,p,g),t.update(p,i,g))}function l(f,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,f,0,p,0,g);let _=0;for(let x=0;x<g;x++)_+=p[x];t.update(_,i,1)}function c(f,p,g,v){if(g===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let x=0;x<f.length;x++)s(f[x],p[x],v[x]);else{_.multiDrawArraysInstancedWEBGL(i,f,0,p,0,v,0,g);let x=0;for(let T=0;T<g;T++)x+=p[T]*v[T];t.update(x,i,1)}}this.setMode=r,this.render=a,this.renderInstances=s,this.renderMultiDraw=l,this.renderMultiDrawInstances=c}function Zne(n,e,t,i){let r;function a(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const k=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(k){return!(k!==Ms&&i.convert(k)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(k){const F=k===$c&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(k!==Ys&&i.convert(k)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&k!==Zs&&!F)}function c(k){if(k==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";k="mediump"}return k==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=t.precision!==void 0?t.precision:"highp";const p=c(f);p!==f&&(Mt("WebGLRenderer:",f,"not supported, using",p,"instead."),f=p);const g=t.logarithmicDepthBuffer===!0,v=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),_=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),T=n.getParameter(n.MAX_TEXTURE_SIZE),S=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),w=n.getParameter(n.MAX_VERTEX_ATTRIBS),I=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),R=n.getParameter(n.MAX_VARYING_VECTORS),D=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),B=n.getParameter(n.MAX_SAMPLES),z=n.getParameter(n.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:c,textureFormatReadable:s,textureTypeReadable:l,precision:f,logarithmicDepthBuffer:g,reversedDepthBuffer:v,maxTextures:_,maxVertexTextures:x,maxTextureSize:T,maxCubemapSize:S,maxAttributes:w,maxVertexUniforms:I,maxVaryings:R,maxFragmentUniforms:D,maxSamples:B,samples:z}}function Qne(n){const e=this;let t=null,i=0,r=!1,a=!1;const s=new Xf,l=new Tn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(g,v){const _=g.length!==0||v||i!==0||r;return r=v,i=g.length,_},this.beginShadows=function(){a=!0,p(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(g,v){t=p(g,v,0)},this.setState=function(g,v,_){const x=g.clippingPlanes,T=g.clipIntersection,S=g.clipShadows,w=n.get(g);if(!r||x===null||x.length===0||a&&!S)a?p(null):f();else{const I=a?0:i,R=I*4;let D=w.clippingState||null;c.value=D,D=p(x,v,R,_);for(let B=0;B!==R;++B)D[B]=t[B];w.clippingState=D,this.numIntersection=T?this.numPlanes:0,this.numPlanes+=I}};function f(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function p(g,v,_,x){const T=g!==null?g.length:0;let S=null;if(T!==0){if(S=c.value,x!==!0||S===null){const w=_+T*4,I=v.matrixWorldInverse;l.getNormalMatrix(I),(S===null||S.length<w)&&(S=new Float32Array(w));for(let R=0,D=_;R!==T;++R,D+=4)s.copy(g[R]).applyMatrix4(I,l),s.normal.toArray(S,D),S[D+3]=s.constant}c.value=S,c.needsUpdate=!0}return e.numPlanes=T,e.numIntersection=0,S}}function Jne(n){let e=new WeakMap;function t(s,l){return l===Mb?s.mapping=qc:l===Cb&&(s.mapping=Zd),s}function i(s){if(s&&s.isTexture){const l=s.mapping;if(l===Mb||l===Cb)if(e.has(s)){const c=e.get(s).texture;return t(c,s.mapping)}else{const c=s.image;if(c&&c.height>0){const f=new aD(c.height);return f.fromEquirectangularTexture(n,s),e.set(s,f),s.addEventListener("dispose",r),t(f.texture,s.mapping)}else return null}}return s}function r(s){const l=s.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap}return{get:i,dispose:a}}const Bd=4,x4=[.125,.215,.35,.446,.526,.582],Am=20,eie=256,F_=new ah,S4=new Dt;let OI=null,DI=0,LI=0,kI=!1;const tie=new re;class sN{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,i=.1,r=100,a={}){const{size:s=256,position:l=tie}=a;OI=this._renderer.getRenderTarget(),DI=this._renderer.getActiveCubeFace(),LI=this._renderer.getActiveMipmapLevel(),kI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,i,r,c,l),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=T4(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=E4(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(OI,DI,LI),this._renderer.xr.enabled=kI,e.scissorTest=!1,Bv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===qc||e.mapping===Zd?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),OI=this._renderer.getRenderTarget(),DI=this._renderer.getActiveCubeFace(),LI=this._renderer.getActiveMipmapLevel(),kI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Ki,minFilter:Ki,generateMipmaps:!1,type:$c,format:Ms,colorSpace:Qd,depthBuffer:!1},r=w4(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=w4(e,t,i);const{_lodMax:a}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=nie(a)),this._blurMaterial=rie(a,e,t),this._ggxMaterial=iie(a,e,t)}return r}_compileMaterial(e){const t=new Zr(new gn,e);this._renderer.compile(t,F_)}_sceneToCubeUV(e,t,i,r,a){const c=new kr(90,1,t,i),f=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],g=this._renderer,v=g.autoClear,_=g.toneMapping;g.getClearColor(S4),g.toneMapping=$l,g.autoClear=!1,g.state.buffers.depth.getReversed()&&(g.setRenderTarget(r),g.clearDepth(),g.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Zr(new vg,new fp({name:"PMREM.Background",side:eo,depthWrite:!1,depthTest:!1})));const T=this._backgroundBox,S=T.material;let w=!1;const I=e.background;I?I.isColor&&(S.color.copy(I),e.background=null,w=!0):(S.color.copy(S4),w=!0);for(let R=0;R<6;R++){const D=R%3;D===0?(c.up.set(0,f[R],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x+p[R],a.y,a.z)):D===1?(c.up.set(0,0,f[R]),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y+p[R],a.z)):(c.up.set(0,f[R],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y,a.z+p[R]));const B=this._cubeSize;Bv(r,D*B,R>2?B:0,B,B),g.setRenderTarget(r),w&&g.render(T,c),g.render(e,c)}g.toneMapping=_,g.autoClear=v,e.background=I}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===qc||e.mapping===Zd;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=T4()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=E4());const a=r?this._cubemapMaterial:this._equirectMaterial,s=this._lodMeshes[0];s.material=a;const l=a.uniforms;l.envMap.value=e;const c=this._cubeSize;Bv(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(s,F_)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodMeshes.length;for(let a=1;a<r;a++)this._applyGGXFilter(e,a-1,a);t.autoClear=i}_applyGGXFilter(e,t,i){const r=this._renderer,a=this._pingPongRenderTarget,s=this._ggxMaterial,l=this._lodMeshes[i];l.material=s;const c=s.uniforms,f=i/(this._lodMeshes.length-1),p=t/(this._lodMeshes.length-1),g=Math.sqrt(f*f-p*p),v=0+f*1.25,_=g*v,{_lodMax:x}=this,T=this._sizeLods[i],S=3*T*(i>x-Bd?i-x+Bd:0),w=4*(this._cubeSize-T);c.envMap.value=e.texture,c.roughness.value=_,c.mipInt.value=x-t,Bv(a,S,w,3*T,2*T),r.setRenderTarget(a),r.render(l,F_),c.envMap.value=a.texture,c.roughness.value=0,c.mipInt.value=x-i,Bv(e,S,w,3*T,2*T),r.setRenderTarget(e),r.render(l,F_)}_blur(e,t,i,r,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",a),this._halfBlur(s,e,i,i,r,"longitudinal",a)}_halfBlur(e,t,i,r,a,s,l){const c=this._renderer,f=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&Yt("blur direction must be either latitudinal or longitudinal!");const p=3,g=this._lodMeshes[r];g.material=f;const v=f.uniforms,_=this._sizeLods[i]-1,x=isFinite(a)?Math.PI/(2*_):2*Math.PI/(2*Am-1),T=a/x,S=isFinite(a)?1+Math.floor(p*T):Am;S>Am&&Mt(`sigmaRadians, ${a}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${Am}`);const w=[];let I=0;for(let k=0;k<Am;++k){const F=k/T,P=Math.exp(-F*F/2);w.push(P),k===0?I+=P:k<S&&(I+=2*P)}for(let k=0;k<w.length;k++)w[k]=w[k]/I;v.envMap.value=e.texture,v.samples.value=S,v.weights.value=w,v.latitudinal.value=s==="latitudinal",l&&(v.poleAxis.value=l);const{_lodMax:R}=this;v.dTheta.value=x,v.mipInt.value=R-i;const D=this._sizeLods[r],B=3*D*(r>R-Bd?r-R+Bd:0),z=4*(this._cubeSize-D);Bv(t,B,z,3*D,2*D),c.setRenderTarget(t),c.render(g,F_)}}function nie(n){const e=[],t=[],i=[];let r=n;const a=n-Bd+1+x4.length;for(let s=0;s<a;s++){const l=Math.pow(2,r);e.push(l);let c=1/l;s>n-Bd?c=x4[s-n+Bd-1]:s===0&&(c=0),t.push(c);const f=1/(l-2),p=-f,g=1+f,v=[p,p,g,p,g,g,p,p,g,g,p,g],_=6,x=6,T=3,S=2,w=1,I=new Float32Array(T*x*_),R=new Float32Array(S*x*_),D=new Float32Array(w*x*_);for(let z=0;z<_;z++){const k=z%3*2/3-1,F=z>2?0:-1,P=[k,F,0,k+2/3,F,0,k+2/3,F+1,0,k,F,0,k+2/3,F+1,0,k,F+1,0];I.set(P,T*x*z),R.set(v,S*x*z);const L=[z,z,z,z,z,z];D.set(L,w*x*z)}const B=new gn;B.setAttribute("position",new hi(I,T)),B.setAttribute("uv",new hi(R,S)),B.setAttribute("faceIndex",new hi(D,w)),i.push(new Zr(B,null)),r>Bd&&r--}return{lodMeshes:i,sizeLods:e,sigmas:t}}function w4(n,e,t){const i=new sl(n,e,t);return i.texture.mapping=Wy,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Bv(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function iie(n,e,t){return new Yl({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:eie,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:JA(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:zc,depthTest:!1,depthWrite:!1})}function rie(n,e,t){const i=new Float32Array(Am),r=new re(0,1,0);return new Yl({name:"SphericalGaussianBlur",defines:{n:Am,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:JA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:zc,depthTest:!1,depthWrite:!1})}function E4(){return new Yl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:JA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:zc,depthTest:!1,depthWrite:!1})}function T4(){return new Yl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:JA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:zc,depthTest:!1,depthWrite:!1})}function JA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function aie(n){let e=new WeakMap,t=null;function i(l){if(l&&l.isTexture){const c=l.mapping,f=c===Mb||c===Cb,p=c===qc||c===Zd;if(f||p){let g=e.get(l);const v=g!==void 0?g.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==v)return t===null&&(t=new sN(n)),g=f?t.fromEquirectangular(l,g):t.fromCubemap(l,g),g.texture.pmremVersion=l.pmremVersion,e.set(l,g),g.texture;if(g!==void 0)return g.texture;{const _=l.image;return f&&_&&_.height>0||p&&_&&r(_)?(t===null&&(t=new sN(n)),g=f?t.fromEquirectangular(l):t.fromCubemap(l),g.texture.pmremVersion=l.pmremVersion,e.set(l,g),l.addEventListener("dispose",a),g.texture):null}}}return l}function r(l){let c=0;const f=6;for(let p=0;p<f;p++)l[p]!==void 0&&c++;return c===f}function a(l){const c=l.target;c.removeEventListener("dispose",a);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:s}}function sie(n){const e={};function t(i){if(e[i]!==void 0)return e[i];const r=n.getExtension(i);return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&Sy("WebGLRenderer: "+i+" extension not supported."),r}}}function oie(n,e,t,i){const r={},a=new WeakMap;function s(g){const v=g.target;v.index!==null&&e.remove(v.index);for(const x in v.attributes)e.remove(v.attributes[x]);v.removeEventListener("dispose",s),delete r[v.id];const _=a.get(v);_&&(e.remove(_),a.delete(v)),i.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function l(g,v){return r[v.id]===!0||(v.addEventListener("dispose",s),r[v.id]=!0,t.memory.geometries++),v}function c(g){const v=g.attributes;for(const _ in v)e.update(v[_],n.ARRAY_BUFFER)}function f(g){const v=[],_=g.index,x=g.attributes.position;let T=0;if(_!==null){const I=_.array;T=_.version;for(let R=0,D=I.length;R<D;R+=3){const B=I[R+0],z=I[R+1],k=I[R+2];v.push(B,z,z,k,k,B)}}else if(x!==void 0){const I=x.array;T=x.version;for(let R=0,D=I.length/3-1;R<D;R+=3){const B=R+0,z=R+1,k=R+2;v.push(B,z,z,k,k,B)}}else return;const S=new(yj(v)?rD:iD)(v,1);S.version=T;const w=a.get(g);w&&e.remove(w),a.set(g,S)}function p(g){const v=a.get(g);if(v){const _=g.index;_!==null&&v.version<_.version&&f(g)}else f(g);return a.get(g)}return{get:l,update:c,getWireframeAttribute:p}}function lie(n,e,t){let i;function r(v){i=v}let a,s;function l(v){a=v.type,s=v.bytesPerElement}function c(v,_){n.drawElements(i,_,a,v*s),t.update(_,i,1)}function f(v,_,x){x!==0&&(n.drawElementsInstanced(i,_,a,v*s,x),t.update(_,i,x))}function p(v,_,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,_,0,a,v,0,x);let S=0;for(let w=0;w<x;w++)S+=_[w];t.update(S,i,1)}function g(v,_,x,T){if(x===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let w=0;w<v.length;w++)f(v[w]/s,_[w],T[w]);else{S.multiDrawElementsInstancedWEBGL(i,_,0,a,v,0,T,0,x);let w=0;for(let I=0;I<x;I++)w+=_[I]*T[I];t.update(w,i,1)}}this.setMode=r,this.setIndex=l,this.render=c,this.renderInstances=f,this.renderMultiDraw=p,this.renderMultiDrawInstances=g}function uie(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,s,l){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=l*(a/3);break;case n.LINES:t.lines+=l*(a/2);break;case n.LINE_STRIP:t.lines+=l*(a-1);break;case n.LINE_LOOP:t.lines+=l*a;break;case n.POINTS:t.points+=l*a;break;default:Yt("WebGLInfo: Unknown draw mode:",s);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function cie(n,e,t){const i=new WeakMap,r=new Ni;function a(s,l,c){const f=s.morphTargetInfluences,p=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,g=p!==void 0?p.length:0;let v=i.get(l);if(v===void 0||v.count!==g){let L=function(){F.dispose(),i.delete(l),l.removeEventListener("dispose",L)};var _=L;v!==void 0&&v.texture.dispose();const x=l.morphAttributes.position!==void 0,T=l.morphAttributes.normal!==void 0,S=l.morphAttributes.color!==void 0,w=l.morphAttributes.position||[],I=l.morphAttributes.normal||[],R=l.morphAttributes.color||[];let D=0;x===!0&&(D=1),T===!0&&(D=2),S===!0&&(D=3);let B=l.attributes.position.count*D,z=1;B>e.maxTextureSize&&(z=Math.ceil(B/e.maxTextureSize),B=e.maxTextureSize);const k=new Float32Array(B*z*4*g),F=new RA(k,B,z,g);F.type=Zs,F.needsUpdate=!0;const P=D*4;for(let V=0;V<g;V++){const W=w[V],q=I[V],ue=R[V],le=B*z*4*V;for(let ee=0;ee<W.count;ee++){const ie=ee*P;x===!0&&(r.fromBufferAttribute(W,ee),k[le+ie+0]=r.x,k[le+ie+1]=r.y,k[le+ie+2]=r.z,k[le+ie+3]=0),T===!0&&(r.fromBufferAttribute(q,ee),k[le+ie+4]=r.x,k[le+ie+5]=r.y,k[le+ie+6]=r.z,k[le+ie+7]=0),S===!0&&(r.fromBufferAttribute(ue,ee),k[le+ie+8]=r.x,k[le+ie+9]=r.y,k[le+ie+10]=r.z,k[le+ie+11]=ue.itemSize===4?r.w:1)}}v={count:g,texture:F,size:new tt(B,z)},i.set(l,v),l.addEventListener("dispose",L)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let x=0;for(let S=0;S<f.length;S++)x+=f[S];const T=l.morphTargetsRelative?1:1-x;c.getUniforms().setValue(n,"morphTargetBaseInfluence",T),c.getUniforms().setValue(n,"morphTargetInfluences",f)}c.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}return{update:a}}function fie(n,e,t,i){let r=new WeakMap;function a(c){const f=i.render.frame,p=c.geometry,g=e.get(c,p);if(r.get(g)!==f&&(e.update(g),r.set(g,f)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),r.get(c)!==f&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,f))),c.isSkinnedMesh){const v=c.skeleton;r.get(v)!==f&&(v.update(),r.set(v,f))}return g}function s(){r=new WeakMap}function l(c){const f=c.target;f.removeEventListener("dispose",l),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:a,dispose:s}}const hie={[VO]:"LINEAR_TONE_MAPPING",[jO]:"REINHARD_TONE_MAPPING",[HO]:"CINEON_TONE_MAPPING",[_A]:"ACES_FILMIC_TONE_MAPPING",[WO]:"AGX_TONE_MAPPING",[qO]:"NEUTRAL_TONE_MAPPING",[GO]:"CUSTOM_TONE_MAPPING"};function die(n,e,t,i,r){const a=new sl(e,t,{type:n,depthBuffer:i,stencilBuffer:r}),s=new sl(e,t,{type:$c,depthBuffer:!1,stencilBuffer:!1}),l=new gn;l.setAttribute("position",new zt([-1,3,0,-1,-1,0,3,-1,0],3)),l.setAttribute("uv",new zt([0,2,0,0,2,0],2));const c=new vD({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),f=new Zr(l,c),p=new ah(-1,1,1,-1,0,1);let g=null,v=null,_=!1,x,T=null,S=[],w=!1;this.setSize=function(I,R){a.setSize(I,R),s.setSize(I,R);for(let D=0;D<S.length;D++){const B=S[D];B.setSize&&B.setSize(I,R)}},this.setEffects=function(I){S=I,w=S.length>0&&S[0].isRenderPass===!0;const R=a.width,D=a.height;for(let B=0;B<S.length;B++){const z=S[B];z.setSize&&z.setSize(R,D)}},this.begin=function(I,R){if(_||I.toneMapping===$l&&S.length===0)return!1;if(T=R,R!==null){const D=R.width,B=R.height;(a.width!==D||a.height!==B)&&this.setSize(D,B)}return w===!1&&I.setRenderTarget(a),x=I.toneMapping,I.toneMapping=$l,!0},this.hasRenderPass=function(){return w},this.end=function(I,R){I.toneMapping=x,_=!0;let D=a,B=s;for(let z=0;z<S.length;z++){const k=S[z];if(k.enabled!==!1&&(k.render(I,B,D,R),k.needsSwap!==!1)){const F=D;D=B,B=F}}if(g!==I.outputColorSpace||v!==I.toneMapping){g=I.outputColorSpace,v=I.toneMapping,c.defines={},qn.getTransfer(g)===gi&&(c.defines.SRGB_TRANSFER="");const z=hie[v];z&&(c.defines[z]=""),c.needsUpdate=!0}c.uniforms.tDiffuse.value=D.texture,I.setRenderTarget(T),I.render(f,p),T=null,_=!1},this.isCompositing=function(){return _},this.dispose=function(){a.dispose(),s.dispose(),l.dispose(),c.dispose()}}const w8=new Er,oN=new My(1,1),E8=new RA,T8=new PA,A8=new bx,A4=[],M4=[],C4=new Float32Array(16),I4=new Float32Array(9),R4=new Float32Array(4);function Xy(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let a=A4[r];if(a===void 0&&(a=new Float32Array(r),A4[r]=a),e!==0){i.toArray(a,0);for(let s=1,l=0;s!==e;++s)l+=t,n[s].toArray(a,l)}return a}function ca(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function fa(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function eM(n,e){let t=M4[e];t===void 0&&(t=new Int32Array(e),M4[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function pie(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function mie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ca(t,e))return;n.uniform2fv(this.addr,e),fa(t,e)}}function gie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ca(t,e))return;n.uniform3fv(this.addr,e),fa(t,e)}}function vie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ca(t,e))return;n.uniform4fv(this.addr,e),fa(t,e)}}function yie(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ca(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),fa(t,e)}else{if(ca(t,i))return;R4.set(i),n.uniformMatrix2fv(this.addr,!1,R4),fa(t,i)}}function _ie(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ca(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),fa(t,e)}else{if(ca(t,i))return;I4.set(i),n.uniformMatrix3fv(this.addr,!1,I4),fa(t,i)}}function bie(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ca(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),fa(t,e)}else{if(ca(t,i))return;C4.set(i),n.uniformMatrix4fv(this.addr,!1,C4),fa(t,i)}}function xie(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Sie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ca(t,e))return;n.uniform2iv(this.addr,e),fa(t,e)}}function wie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ca(t,e))return;n.uniform3iv(this.addr,e),fa(t,e)}}function Eie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ca(t,e))return;n.uniform4iv(this.addr,e),fa(t,e)}}function Tie(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Aie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ca(t,e))return;n.uniform2uiv(this.addr,e),fa(t,e)}}function Mie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ca(t,e))return;n.uniform3uiv(this.addr,e),fa(t,e)}}function Cie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ca(t,e))return;n.uniform4uiv(this.addr,e),fa(t,e)}}function Iie(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let a;this.type===n.SAMPLER_2D_SHADOW?(oN.compareFunction=t.isReversedDepthBuffer()?IA:CA,a=oN):a=w8,t.setTexture2D(e||a,r)}function Rie(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||T8,r)}function Pie(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||A8,r)}function Nie(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||E8,r)}function Oie(n){switch(n){case 5126:return pie;case 35664:return mie;case 35665:return gie;case 35666:return vie;case 35674:return yie;case 35675:return _ie;case 35676:return bie;case 5124:case 35670:return xie;case 35667:case 35671:return Sie;case 35668:case 35672:return wie;case 35669:case 35673:return Eie;case 5125:return Tie;case 36294:return Aie;case 36295:return Mie;case 36296:return Cie;case 35678:case 36198:case 36298:case 36306:case 35682:return Iie;case 35679:case 36299:case 36307:return Rie;case 35680:case 36300:case 36308:case 36293:return Pie;case 36289:case 36303:case 36311:case 36292:return Nie}}function Die(n,e){n.uniform1fv(this.addr,e)}function Lie(n,e){const t=Xy(e,this.size,2);n.uniform2fv(this.addr,t)}function kie(n,e){const t=Xy(e,this.size,3);n.uniform3fv(this.addr,t)}function Uie(n,e){const t=Xy(e,this.size,4);n.uniform4fv(this.addr,t)}function Fie(n,e){const t=Xy(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function zie(n,e){const t=Xy(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Bie(n,e){const t=Xy(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Vie(n,e){n.uniform1iv(this.addr,e)}function jie(n,e){n.uniform2iv(this.addr,e)}function Hie(n,e){n.uniform3iv(this.addr,e)}function Gie(n,e){n.uniform4iv(this.addr,e)}function Wie(n,e){n.uniform1uiv(this.addr,e)}function qie(n,e){n.uniform2uiv(this.addr,e)}function $ie(n,e){n.uniform3uiv(this.addr,e)}function Xie(n,e){n.uniform4uiv(this.addr,e)}function Yie(n,e,t){const i=this.cache,r=e.length,a=eM(t,r);ca(i,a)||(n.uniform1iv(this.addr,a),fa(i,a));let s;this.type===n.SAMPLER_2D_SHADOW?s=oN:s=w8;for(let l=0;l!==r;++l)t.setTexture2D(e[l]||s,a[l])}function Kie(n,e,t){const i=this.cache,r=e.length,a=eM(t,r);ca(i,a)||(n.uniform1iv(this.addr,a),fa(i,a));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||T8,a[s])}function Zie(n,e,t){const i=this.cache,r=e.length,a=eM(t,r);ca(i,a)||(n.uniform1iv(this.addr,a),fa(i,a));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||A8,a[s])}function Qie(n,e,t){const i=this.cache,r=e.length,a=eM(t,r);ca(i,a)||(n.uniform1iv(this.addr,a),fa(i,a));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||E8,a[s])}function Jie(n){switch(n){case 5126:return Die;case 35664:return Lie;case 35665:return kie;case 35666:return Uie;case 35674:return Fie;case 35675:return zie;case 35676:return Bie;case 5124:case 35670:return Vie;case 35667:case 35671:return jie;case 35668:case 35672:return Hie;case 35669:case 35673:return Gie;case 5125:return Wie;case 36294:return qie;case 36295:return $ie;case 36296:return Xie;case 35678:case 36198:case 36298:case 36306:case 35682:return Yie;case 35679:case 36299:case 36307:return Kie;case 35680:case 36300:case 36308:case 36293:return Zie;case 36289:case 36303:case 36311:case 36292:return Qie}}class ere{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=Oie(t.type)}}class tre{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Jie(t.type)}}class nre{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let a=0,s=r.length;a!==s;++a){const l=r[a];l.setValue(e,t[l.id],i)}}}const UI=/(\w+)(\])?(\[|\.)?/g;function P4(n,e){n.seq.push(e),n.map[e.id]=e}function ire(n,e,t){const i=n.name,r=i.length;for(UI.lastIndex=0;;){const a=UI.exec(i),s=UI.lastIndex;let l=a[1];const c=a[2]==="]",f=a[3];if(c&&(l=l|0),f===void 0||f==="["&&s+2===r){P4(t,f===void 0?new ere(l,n,e):new tre(l,n,e));break}else{let g=t.map[l];g===void 0&&(g=new nre(l),P4(t,g)),t=g}}}class Vw{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const l=e.getActiveUniform(t,s),c=e.getUniformLocation(t,l.name);ire(l,c,this)}const r=[],a=[];for(const s of this.seq)s.type===e.SAMPLER_2D_SHADOW||s.type===e.SAMPLER_CUBE_SHADOW||s.type===e.SAMPLER_2D_ARRAY_SHADOW?r.push(s):a.push(s);r.length>0&&(this.seq=r.concat(a))}setValue(e,t,i,r){const a=this.map[t];a!==void 0&&a.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let a=0,s=t.length;a!==s;++a){const l=t[a],c=i[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,a=e.length;r!==a;++r){const s=e[r];s.id in t&&i.push(s)}return i}}function N4(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const rre=37297;let are=0;function sre(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let s=r;s<a;s++){const l=s+1;i.push(`${l===e?">":" "} ${l}: ${t[s]}`)}return i.join(`
`)}const O4=new Tn;function ore(n){qn._getMatrix(O4,qn.workingColorSpace,n);const e=`mat3( ${O4.elements.map(t=>t.toFixed(4))} )`;switch(qn.getTransfer(n)){case Ob:return[e,"LinearTransferOETF"];case gi:return[e,"sRGBTransferOETF"];default:return Mt("WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function D4(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),a=(n.getShaderInfoLog(e)||"").trim();if(i&&a==="")return"";const s=/ERROR: 0:(\d+)/.exec(a);if(s){const l=parseInt(s[1]);return t.toUpperCase()+`

`+a+`

`+sre(n.getShaderSource(e),l)}else return a}function lre(n,e){const t=ore(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}const ure={[VO]:"Linear",[jO]:"Reinhard",[HO]:"Cineon",[_A]:"ACESFilmic",[WO]:"AgX",[qO]:"Neutral",[GO]:"Custom"};function cre(n,e){const t=ure[e];return t===void 0?(Mt("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+n+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const uw=new re;function fre(){qn.getLuminanceCoefficients(uw);const n=uw.x.toFixed(4),e=uw.y.toFixed(4),t=uw.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function hre(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Q_).join(`
`)}function dre(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function pre(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const a=n.getActiveAttrib(e,r),s=a.name;let l=1;a.type===n.FLOAT_MAT2&&(l=2),a.type===n.FLOAT_MAT3&&(l=3),a.type===n.FLOAT_MAT4&&(l=4),t[s]={type:a.type,location:n.getAttribLocation(e,s),locationSize:l}}return t}function Q_(n){return n!==""}function L4(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function k4(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const mre=/^[ \t]*#include +<([\w\d./]+)>/gm;function lN(n){return n.replace(mre,vre)}const gre=new Map;function vre(n,e){let t=On[e];if(t===void 0){const i=gre.get(e);if(i!==void 0)t=On[i],Mt('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return lN(t)}const yre=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function U4(n){return n.replace(yre,_re)}function _re(n,e,t,i){let r="";for(let a=parseInt(e);a<parseInt(t);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function F4(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const bre={[ly]:"SHADOWMAP_TYPE_PCF",[Mm]:"SHADOWMAP_TYPE_VSM"};function xre(n){return bre[n.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const Sre={[qc]:"ENVMAP_TYPE_CUBE",[Zd]:"ENVMAP_TYPE_CUBE",[Wy]:"ENVMAP_TYPE_CUBE_UV"};function wre(n){return n.envMap===!1?"ENVMAP_TYPE_CUBE":Sre[n.envMapMode]||"ENVMAP_TYPE_CUBE"}const Ere={[Zd]:"ENVMAP_MODE_REFRACTION"};function Tre(n){return n.envMap===!1?"ENVMAP_MODE_REFLECTION":Ere[n.envMapMode]||"ENVMAP_MODE_REFLECTION"}const Are={[yx]:"ENVMAP_BLENDING_MULTIPLY",[rj]:"ENVMAP_BLENDING_MIX",[aj]:"ENVMAP_BLENDING_ADD"};function Mre(n){return n.envMap===!1?"ENVMAP_BLENDING_NONE":Are[n.combine]||"ENVMAP_BLENDING_NONE"}function Cre(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function Ire(n,e,t,i){const r=n.getContext(),a=t.defines;let s=t.vertexShader,l=t.fragmentShader;const c=xre(t),f=wre(t),p=Tre(t),g=Mre(t),v=Cre(t),_=hre(t),x=dre(a),T=r.createProgram();let S,w,I=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(Q_).join(`
`),S.length>0&&(S+=`
`),w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(Q_).join(`
`),w.length>0&&(w+=`
`)):(S=[F4(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Q_).join(`
`),w=[F4(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==$l?"#define TONE_MAPPING":"",t.toneMapping!==$l?On.tonemapping_pars_fragment:"",t.toneMapping!==$l?cre("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",On.colorspace_pars_fragment,lre("linearToOutputTexel",t.outputColorSpace),fre(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Q_).join(`
`)),s=lN(s),s=L4(s,t),s=k4(s,t),l=lN(l),l=L4(l,t),l=k4(l,t),s=U4(s),l=U4(l),t.isRawShaderMaterial!==!0&&(I=`#version 300 es
`,S=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,w=["#define varying in",t.glslVersion===ZP?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===ZP?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const R=I+S+s,D=I+w+l,B=N4(r,r.VERTEX_SHADER,R),z=N4(r,r.FRAGMENT_SHADER,D);r.attachShader(T,B),r.attachShader(T,z),t.index0AttributeName!==void 0?r.bindAttribLocation(T,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(T,0,"position"),r.linkProgram(T);function k(V){if(n.debug.checkShaderErrors){const W=r.getProgramInfoLog(T)||"",q=r.getShaderInfoLog(B)||"",ue=r.getShaderInfoLog(z)||"",le=W.trim(),ee=q.trim(),ie=ue.trim();let he=!0,we=!0;if(r.getProgramParameter(T,r.LINK_STATUS)===!1)if(he=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,T,B,z);else{const Me=D4(r,B,"vertex"),J=D4(r,z,"fragment");Yt("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(T,r.VALIDATE_STATUS)+`

Material Name: `+V.name+`
Material Type: `+V.type+`

Program Info Log: `+le+`
`+Me+`
`+J)}else le!==""?Mt("WebGLProgram: Program Info Log:",le):(ee===""||ie==="")&&(we=!1);we&&(V.diagnostics={runnable:he,programLog:le,vertexShader:{log:ee,prefix:S},fragmentShader:{log:ie,prefix:w}})}r.deleteShader(B),r.deleteShader(z),F=new Vw(r,T),P=pre(r,T)}let F;this.getUniforms=function(){return F===void 0&&k(this),F};let P;this.getAttributes=function(){return P===void 0&&k(this),P};let L=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=r.getProgramParameter(T,rre)),L},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(T),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=are++,this.cacheKey=e,this.usedTimes=1,this.program=T,this.vertexShader=B,this.fragmentShader=z,this}let Rre=0;class Pre{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),a=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new Nre(e),t.set(e,i)),i}}class Nre{constructor(e){this.id=Rre++,this.code=e,this.usedTimes=0}}function Ore(n,e,t,i,r,a,s){const l=new Ey,c=new Pre,f=new Set,p=[],g=new Map,v=r.logarithmicDepthBuffer;let _=r.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function T(P){return f.add(P),P===0?"uv":`uv${P}`}function S(P,L,V,W,q){const ue=W.fog,le=q.geometry,ee=P.isMeshStandardMaterial?W.environment:null,ie=(P.isMeshStandardMaterial?t:e).get(P.envMap||ee),he=ie&&ie.mapping===Wy?ie.image.height:null,we=x[P.type];P.precision!==null&&(_=r.getMaxPrecision(P.precision),_!==P.precision&&Mt("WebGLProgram.getParameters:",P.precision,"not supported, using",_,"instead."));const Me=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,J=Me!==void 0?Me.length:0;let pe=0;le.morphAttributes.position!==void 0&&(pe=1),le.morphAttributes.normal!==void 0&&(pe=2),le.morphAttributes.color!==void 0&&(pe=3);let Ee,Ge,ht,be;if(we){const Jt=Cu[we];Ee=Jt.vertexShader,Ge=Jt.fragmentShader}else Ee=P.vertexShader,Ge=P.fragmentShader,c.update(P),ht=c.getVertexShaderID(P),be=c.getFragmentShaderID(P);const Te=n.getRenderTarget(),dt=n.state.buffers.depth.getReversed(),ve=q.isInstancedMesh===!0,Ye=q.isBatchedMesh===!0,wt=!!P.map,je=!!P.matcap,At=!!ie,Re=!!P.aoMap,Qe=!!P.lightMap,Ve=!!P.bumpMap,lt=!!P.normalMap,ae=!!P.displacementMap,Et=!!P.emissiveMap,ft=!!P.metalnessMap,Lt=!!P.roughnessMap,pt=P.anisotropy>0,te=P.clearcoat>0,X=P.dispersion>0,de=P.iridescence>0,Le=P.sheen>0,Ze=P.transmission>0,Oe=pt&&!!P.anisotropyMap,Tt=te&&!!P.clearcoatMap,gt=te&&!!P.clearcoatNormalMap,Pt=te&&!!P.clearcoatRoughnessMap,Ht=de&&!!P.iridescenceMap,nt=de&&!!P.iridescenceThicknessMap,ot=Le&&!!P.sheenColorMap,xt=Le&&!!P.sheenRoughnessMap,Y=!!P.specularMap,se=!!P.specularColorMap,Fe=!!P.specularIntensityMap,oe=Ze&&!!P.transmissionMap,$e=Ze&&!!P.thicknessMap,qe=!!P.gradientMap,et=!!P.alphaMap,Xe=P.alphaTest>0,We=!!P.alphaHash,at=!!P.extensions;let kt=$l;P.toneMapped&&(Te===null||Te.isXRRenderTarget===!0)&&(kt=n.toneMapping);const un={shaderID:we,shaderType:P.type,shaderName:P.name,vertexShader:Ee,fragmentShader:Ge,defines:P.defines,customVertexShaderID:ht,customFragmentShaderID:be,isRawShaderMaterial:P.isRawShaderMaterial===!0,glslVersion:P.glslVersion,precision:_,batching:Ye,batchingColor:Ye&&q._colorsTexture!==null,instancing:ve,instancingColor:ve&&q.instanceColor!==null,instancingMorph:ve&&q.morphTexture!==null,outputColorSpace:Te===null?n.outputColorSpace:Te.isXRRenderTarget===!0?Te.texture.colorSpace:Qd,alphaToCoverage:!!P.alphaToCoverage,map:wt,matcap:je,envMap:At,envMapMode:At&&ie.mapping,envMapCubeUVHeight:he,aoMap:Re,lightMap:Qe,bumpMap:Ve,normalMap:lt,displacementMap:ae,emissiveMap:Et,normalMapObjectSpace:lt&&P.normalMapType===fj,normalMapTangentSpace:lt&&P.normalMapType===cp,metalnessMap:ft,roughnessMap:Lt,anisotropy:pt,anisotropyMap:Oe,clearcoat:te,clearcoatMap:Tt,clearcoatNormalMap:gt,clearcoatRoughnessMap:Pt,dispersion:X,iridescence:de,iridescenceMap:Ht,iridescenceThicknessMap:nt,sheen:Le,sheenColorMap:ot,sheenRoughnessMap:xt,specularMap:Y,specularColorMap:se,specularIntensityMap:Fe,transmission:Ze,transmissionMap:oe,thicknessMap:$e,gradientMap:qe,opaque:P.transparent===!1&&P.blending===Fm&&P.alphaToCoverage===!1,alphaMap:et,alphaTest:Xe,alphaHash:We,combine:P.combine,mapUv:wt&&T(P.map.channel),aoMapUv:Re&&T(P.aoMap.channel),lightMapUv:Qe&&T(P.lightMap.channel),bumpMapUv:Ve&&T(P.bumpMap.channel),normalMapUv:lt&&T(P.normalMap.channel),displacementMapUv:ae&&T(P.displacementMap.channel),emissiveMapUv:Et&&T(P.emissiveMap.channel),metalnessMapUv:ft&&T(P.metalnessMap.channel),roughnessMapUv:Lt&&T(P.roughnessMap.channel),anisotropyMapUv:Oe&&T(P.anisotropyMap.channel),clearcoatMapUv:Tt&&T(P.clearcoatMap.channel),clearcoatNormalMapUv:gt&&T(P.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Pt&&T(P.clearcoatRoughnessMap.channel),iridescenceMapUv:Ht&&T(P.iridescenceMap.channel),iridescenceThicknessMapUv:nt&&T(P.iridescenceThicknessMap.channel),sheenColorMapUv:ot&&T(P.sheenColorMap.channel),sheenRoughnessMapUv:xt&&T(P.sheenRoughnessMap.channel),specularMapUv:Y&&T(P.specularMap.channel),specularColorMapUv:se&&T(P.specularColorMap.channel),specularIntensityMapUv:Fe&&T(P.specularIntensityMap.channel),transmissionMapUv:oe&&T(P.transmissionMap.channel),thicknessMapUv:$e&&T(P.thicknessMap.channel),alphaMapUv:et&&T(P.alphaMap.channel),vertexTangents:!!le.attributes.tangent&&(lt||pt),vertexColors:P.vertexColors,vertexAlphas:P.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,pointsUvs:q.isPoints===!0&&!!le.attributes.uv&&(wt||et),fog:!!ue,useFog:P.fog===!0,fogExp2:!!ue&&ue.isFogExp2,flatShading:P.flatShading===!0&&P.wireframe===!1,sizeAttenuation:P.sizeAttenuation===!0,logarithmicDepthBuffer:v,reversedDepthBuffer:dt,skinning:q.isSkinnedMesh===!0,morphTargets:le.morphAttributes.position!==void 0,morphNormals:le.morphAttributes.normal!==void 0,morphColors:le.morphAttributes.color!==void 0,morphTargetsCount:J,morphTextureStride:pe,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:P.dithering,shadowMapEnabled:n.shadowMap.enabled&&V.length>0,shadowMapType:n.shadowMap.type,toneMapping:kt,decodeVideoTexture:wt&&P.map.isVideoTexture===!0&&qn.getTransfer(P.map.colorSpace)===gi,decodeVideoTextureEmissive:Et&&P.emissiveMap.isVideoTexture===!0&&qn.getTransfer(P.emissiveMap.colorSpace)===gi,premultipliedAlpha:P.premultipliedAlpha,doubleSided:P.side===Pc,flipSided:P.side===eo,useDepthPacking:P.depthPacking>=0,depthPacking:P.depthPacking||0,index0AttributeName:P.index0AttributeName,extensionClipCullDistance:at&&P.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(at&&P.extensions.multiDraw===!0||Ye)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:P.customProgramCacheKey()};return un.vertexUv1s=f.has(1),un.vertexUv2s=f.has(2),un.vertexUv3s=f.has(3),f.clear(),un}function w(P){const L=[];if(P.shaderID?L.push(P.shaderID):(L.push(P.customVertexShaderID),L.push(P.customFragmentShaderID)),P.defines!==void 0)for(const V in P.defines)L.push(V),L.push(P.defines[V]);return P.isRawShaderMaterial===!1&&(I(L,P),R(L,P),L.push(n.outputColorSpace)),L.push(P.customProgramCacheKey),L.join()}function I(P,L){P.push(L.precision),P.push(L.outputColorSpace),P.push(L.envMapMode),P.push(L.envMapCubeUVHeight),P.push(L.mapUv),P.push(L.alphaMapUv),P.push(L.lightMapUv),P.push(L.aoMapUv),P.push(L.bumpMapUv),P.push(L.normalMapUv),P.push(L.displacementMapUv),P.push(L.emissiveMapUv),P.push(L.metalnessMapUv),P.push(L.roughnessMapUv),P.push(L.anisotropyMapUv),P.push(L.clearcoatMapUv),P.push(L.clearcoatNormalMapUv),P.push(L.clearcoatRoughnessMapUv),P.push(L.iridescenceMapUv),P.push(L.iridescenceThicknessMapUv),P.push(L.sheenColorMapUv),P.push(L.sheenRoughnessMapUv),P.push(L.specularMapUv),P.push(L.specularColorMapUv),P.push(L.specularIntensityMapUv),P.push(L.transmissionMapUv),P.push(L.thicknessMapUv),P.push(L.combine),P.push(L.fogExp2),P.push(L.sizeAttenuation),P.push(L.morphTargetsCount),P.push(L.morphAttributeCount),P.push(L.numDirLights),P.push(L.numPointLights),P.push(L.numSpotLights),P.push(L.numSpotLightMaps),P.push(L.numHemiLights),P.push(L.numRectAreaLights),P.push(L.numDirLightShadows),P.push(L.numPointLightShadows),P.push(L.numSpotLightShadows),P.push(L.numSpotLightShadowsWithMaps),P.push(L.numLightProbes),P.push(L.shadowMapType),P.push(L.toneMapping),P.push(L.numClippingPlanes),P.push(L.numClipIntersection),P.push(L.depthPacking)}function R(P,L){l.disableAll(),L.instancing&&l.enable(0),L.instancingColor&&l.enable(1),L.instancingMorph&&l.enable(2),L.matcap&&l.enable(3),L.envMap&&l.enable(4),L.normalMapObjectSpace&&l.enable(5),L.normalMapTangentSpace&&l.enable(6),L.clearcoat&&l.enable(7),L.iridescence&&l.enable(8),L.alphaTest&&l.enable(9),L.vertexColors&&l.enable(10),L.vertexAlphas&&l.enable(11),L.vertexUv1s&&l.enable(12),L.vertexUv2s&&l.enable(13),L.vertexUv3s&&l.enable(14),L.vertexTangents&&l.enable(15),L.anisotropy&&l.enable(16),L.alphaHash&&l.enable(17),L.batching&&l.enable(18),L.dispersion&&l.enable(19),L.batchingColor&&l.enable(20),L.gradientMap&&l.enable(21),P.push(l.mask),l.disableAll(),L.fog&&l.enable(0),L.useFog&&l.enable(1),L.flatShading&&l.enable(2),L.logarithmicDepthBuffer&&l.enable(3),L.reversedDepthBuffer&&l.enable(4),L.skinning&&l.enable(5),L.morphTargets&&l.enable(6),L.morphNormals&&l.enable(7),L.morphColors&&l.enable(8),L.premultipliedAlpha&&l.enable(9),L.shadowMapEnabled&&l.enable(10),L.doubleSided&&l.enable(11),L.flipSided&&l.enable(12),L.useDepthPacking&&l.enable(13),L.dithering&&l.enable(14),L.transmission&&l.enable(15),L.sheen&&l.enable(16),L.opaque&&l.enable(17),L.pointsUvs&&l.enable(18),L.decodeVideoTexture&&l.enable(19),L.decodeVideoTextureEmissive&&l.enable(20),L.alphaToCoverage&&l.enable(21),P.push(l.mask)}function D(P){const L=x[P.type];let V;if(L){const W=Cu[L];V=Tj.clone(W.uniforms)}else V=P.uniforms;return V}function B(P,L){let V=g.get(L);return V!==void 0?++V.usedTimes:(V=new Ire(n,L,P,a),p.push(V),g.set(L,V)),V}function z(P){if(--P.usedTimes===0){const L=p.indexOf(P);p[L]=p[p.length-1],p.pop(),g.delete(P.cacheKey),P.destroy()}}function k(P){c.remove(P)}function F(){c.dispose()}return{getParameters:S,getProgramCacheKey:w,getUniforms:D,acquireProgram:B,releaseProgram:z,releaseShaderCache:k,programs:p,dispose:F}}function Dre(){let n=new WeakMap;function e(s){return n.has(s)}function t(s){let l=n.get(s);return l===void 0&&(l={},n.set(s,l)),l}function i(s){n.delete(s)}function r(s,l,c){n.get(s)[l]=c}function a(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:a}}function Lre(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function z4(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function B4(){const n=[];let e=0;const t=[],i=[],r=[];function a(){e=0,t.length=0,i.length=0,r.length=0}function s(g,v,_,x,T,S){let w=n[e];return w===void 0?(w={id:g.id,object:g,geometry:v,material:_,groupOrder:x,renderOrder:g.renderOrder,z:T,group:S},n[e]=w):(w.id=g.id,w.object=g,w.geometry=v,w.material=_,w.groupOrder=x,w.renderOrder=g.renderOrder,w.z=T,w.group=S),e++,w}function l(g,v,_,x,T,S){const w=s(g,v,_,x,T,S);_.transmission>0?i.push(w):_.transparent===!0?r.push(w):t.push(w)}function c(g,v,_,x,T,S){const w=s(g,v,_,x,T,S);_.transmission>0?i.unshift(w):_.transparent===!0?r.unshift(w):t.unshift(w)}function f(g,v){t.length>1&&t.sort(g||Lre),i.length>1&&i.sort(v||z4),r.length>1&&r.sort(v||z4)}function p(){for(let g=e,v=n.length;g<v;g++){const _=n[g];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:t,transmissive:i,transparent:r,init:a,push:l,unshift:c,finish:p,sort:f}}function kre(){let n=new WeakMap;function e(i,r){const a=n.get(i);let s;return a===void 0?(s=new B4,n.set(i,[s])):r>=a.length?(s=new B4,a.push(s)):s=a[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function Ure(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new re,color:new Dt};break;case"SpotLight":t={position:new re,direction:new re,color:new Dt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new re,color:new Dt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new re,skyColor:new Dt,groundColor:new Dt};break;case"RectAreaLight":t={color:new Dt,position:new re,halfWidth:new re,halfHeight:new re};break}return n[e.id]=t,t}}}function Fre(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let zre=0;function Bre(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Vre(n){const e=new Ure,t=Fre(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)i.probe.push(new re);const r=new re,a=new pn,s=new pn;function l(f){let p=0,g=0,v=0;for(let P=0;P<9;P++)i.probe[P].set(0,0,0);let _=0,x=0,T=0,S=0,w=0,I=0,R=0,D=0,B=0,z=0,k=0;f.sort(Bre);for(let P=0,L=f.length;P<L;P++){const V=f[P],W=V.color,q=V.intensity,ue=V.distance;let le=null;if(V.shadow&&V.shadow.map&&(V.shadow.map.texture.format===Km?le=V.shadow.map.texture:le=V.shadow.map.depthTexture||V.shadow.map.texture),V.isAmbientLight)p+=W.r*q,g+=W.g*q,v+=W.b*q;else if(V.isLightProbe){for(let ee=0;ee<9;ee++)i.probe[ee].addScaledVector(V.sh.coefficients[ee],q);k++}else if(V.isDirectionalLight){const ee=e.get(V);if(ee.color.copy(V.color).multiplyScalar(V.intensity),V.castShadow){const ie=V.shadow,he=t.get(V);he.shadowIntensity=ie.intensity,he.shadowBias=ie.bias,he.shadowNormalBias=ie.normalBias,he.shadowRadius=ie.radius,he.shadowMapSize=ie.mapSize,i.directionalShadow[_]=he,i.directionalShadowMap[_]=le,i.directionalShadowMatrix[_]=V.shadow.matrix,I++}i.directional[_]=ee,_++}else if(V.isSpotLight){const ee=e.get(V);ee.position.setFromMatrixPosition(V.matrixWorld),ee.color.copy(W).multiplyScalar(q),ee.distance=ue,ee.coneCos=Math.cos(V.angle),ee.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),ee.decay=V.decay,i.spot[T]=ee;const ie=V.shadow;if(V.map&&(i.spotLightMap[B]=V.map,B++,ie.updateMatrices(V),V.castShadow&&z++),i.spotLightMatrix[T]=ie.matrix,V.castShadow){const he=t.get(V);he.shadowIntensity=ie.intensity,he.shadowBias=ie.bias,he.shadowNormalBias=ie.normalBias,he.shadowRadius=ie.radius,he.shadowMapSize=ie.mapSize,i.spotShadow[T]=he,i.spotShadowMap[T]=le,D++}T++}else if(V.isRectAreaLight){const ee=e.get(V);ee.color.copy(W).multiplyScalar(q),ee.halfWidth.set(V.width*.5,0,0),ee.halfHeight.set(0,V.height*.5,0),i.rectArea[S]=ee,S++}else if(V.isPointLight){const ee=e.get(V);if(ee.color.copy(V.color).multiplyScalar(V.intensity),ee.distance=V.distance,ee.decay=V.decay,V.castShadow){const ie=V.shadow,he=t.get(V);he.shadowIntensity=ie.intensity,he.shadowBias=ie.bias,he.shadowNormalBias=ie.normalBias,he.shadowRadius=ie.radius,he.shadowMapSize=ie.mapSize,he.shadowCameraNear=ie.camera.near,he.shadowCameraFar=ie.camera.far,i.pointShadow[x]=he,i.pointShadowMap[x]=le,i.pointShadowMatrix[x]=V.shadow.matrix,R++}i.point[x]=ee,x++}else if(V.isHemisphereLight){const ee=e.get(V);ee.skyColor.copy(V.color).multiplyScalar(q),ee.groundColor.copy(V.groundColor).multiplyScalar(q),i.hemi[w]=ee,w++}}S>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Rt.LTC_FLOAT_1,i.rectAreaLTC2=Rt.LTC_FLOAT_2):(i.rectAreaLTC1=Rt.LTC_HALF_1,i.rectAreaLTC2=Rt.LTC_HALF_2)),i.ambient[0]=p,i.ambient[1]=g,i.ambient[2]=v;const F=i.hash;(F.directionalLength!==_||F.pointLength!==x||F.spotLength!==T||F.rectAreaLength!==S||F.hemiLength!==w||F.numDirectionalShadows!==I||F.numPointShadows!==R||F.numSpotShadows!==D||F.numSpotMaps!==B||F.numLightProbes!==k)&&(i.directional.length=_,i.spot.length=T,i.rectArea.length=S,i.point.length=x,i.hemi.length=w,i.directionalShadow.length=I,i.directionalShadowMap.length=I,i.pointShadow.length=R,i.pointShadowMap.length=R,i.spotShadow.length=D,i.spotShadowMap.length=D,i.directionalShadowMatrix.length=I,i.pointShadowMatrix.length=R,i.spotLightMatrix.length=D+B-z,i.spotLightMap.length=B,i.numSpotLightShadowsWithMaps=z,i.numLightProbes=k,F.directionalLength=_,F.pointLength=x,F.spotLength=T,F.rectAreaLength=S,F.hemiLength=w,F.numDirectionalShadows=I,F.numPointShadows=R,F.numSpotShadows=D,F.numSpotMaps=B,F.numLightProbes=k,i.version=zre++)}function c(f,p){let g=0,v=0,_=0,x=0,T=0;const S=p.matrixWorldInverse;for(let w=0,I=f.length;w<I;w++){const R=f[w];if(R.isDirectionalLight){const D=i.directional[g];D.direction.setFromMatrixPosition(R.matrixWorld),r.setFromMatrixPosition(R.target.matrixWorld),D.direction.sub(r),D.direction.transformDirection(S),g++}else if(R.isSpotLight){const D=i.spot[_];D.position.setFromMatrixPosition(R.matrixWorld),D.position.applyMatrix4(S),D.direction.setFromMatrixPosition(R.matrixWorld),r.setFromMatrixPosition(R.target.matrixWorld),D.direction.sub(r),D.direction.transformDirection(S),_++}else if(R.isRectAreaLight){const D=i.rectArea[x];D.position.setFromMatrixPosition(R.matrixWorld),D.position.applyMatrix4(S),s.identity(),a.copy(R.matrixWorld),a.premultiply(S),s.extractRotation(a),D.halfWidth.set(R.width*.5,0,0),D.halfHeight.set(0,R.height*.5,0),D.halfWidth.applyMatrix4(s),D.halfHeight.applyMatrix4(s),x++}else if(R.isPointLight){const D=i.point[v];D.position.setFromMatrixPosition(R.matrixWorld),D.position.applyMatrix4(S),v++}else if(R.isHemisphereLight){const D=i.hemi[T];D.direction.setFromMatrixPosition(R.matrixWorld),D.direction.transformDirection(S),T++}}}return{setup:l,setupView:c,state:i}}function V4(n){const e=new Vre(n),t=[],i=[];function r(p){f.camera=p,t.length=0,i.length=0}function a(p){t.push(p)}function s(p){i.push(p)}function l(){e.setup(t)}function c(p){e.setupView(t,p)}const f={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:f,setupLights:l,setupLightsView:c,pushLight:a,pushShadow:s}}function jre(n){let e=new WeakMap;function t(r,a=0){const s=e.get(r);let l;return s===void 0?(l=new V4(n),e.set(r,[l])):a>=s.length?(l=new V4(n),s.push(l)):l=s[a],l}function i(){e=new WeakMap}return{get:t,dispose:i}}const Hre=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Gre=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,Wre=[new re(1,0,0),new re(-1,0,0),new re(0,1,0),new re(0,-1,0),new re(0,0,1),new re(0,0,-1)],qre=[new re(0,-1,0),new re(0,-1,0),new re(0,0,1),new re(0,0,-1),new re(0,-1,0),new re(0,-1,0)],j4=new pn,z_=new re,FI=new re;function $re(n,e,t){let i=new qy;const r=new tt,a=new tt,s=new Ni,l=new _D,c=new bD,f={},p=t.maxTextureSize,g={[lh]:eo,[eo]:lh,[Pc]:Pc},v=new Yl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new tt},radius:{value:4}},vertexShader:Hre,fragmentShader:Gre}),_=v.clone();_.defines.HORIZONTAL_PASS=1;const x=new gn;x.setAttribute("position",new hi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const T=new Zr(x,v),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ly;let w=this.type;this.render=function(z,k,F){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||z.length===0)return;z.type===ob&&(Mt("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),z.type=ly);const P=n.getRenderTarget(),L=n.getActiveCubeFace(),V=n.getActiveMipmapLevel(),W=n.state;W.setBlending(zc),W.buffers.depth.getReversed()===!0?W.buffers.color.setClear(0,0,0,0):W.buffers.color.setClear(1,1,1,1),W.buffers.depth.setTest(!0),W.setScissorTest(!1);const q=w!==this.type;q&&k.traverse(function(ue){ue.material&&(Array.isArray(ue.material)?ue.material.forEach(le=>le.needsUpdate=!0):ue.material.needsUpdate=!0)});for(let ue=0,le=z.length;ue<le;ue++){const ee=z[ue],ie=ee.shadow;if(ie===void 0){Mt("WebGLShadowMap:",ee,"has no shadow.");continue}if(ie.autoUpdate===!1&&ie.needsUpdate===!1)continue;r.copy(ie.mapSize);const he=ie.getFrameExtents();if(r.multiply(he),a.copy(ie.mapSize),(r.x>p||r.y>p)&&(r.x>p&&(a.x=Math.floor(p/he.x),r.x=a.x*he.x,ie.mapSize.x=a.x),r.y>p&&(a.y=Math.floor(p/he.y),r.y=a.y*he.y,ie.mapSize.y=a.y)),ie.map===null||q===!0){if(ie.map!==null&&(ie.map.depthTexture!==null&&(ie.map.depthTexture.dispose(),ie.map.depthTexture=null),ie.map.dispose()),this.type===Mm){if(ee.isPointLight){Mt("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}ie.map=new sl(r.x,r.y,{format:Km,type:$c,minFilter:Ki,magFilter:Ki,generateMipmaps:!1}),ie.map.texture.name=ee.name+".shadowMap",ie.map.depthTexture=new My(r.x,r.y,Zs),ie.map.depthTexture.name=ee.name+".shadowMapDepth",ie.map.depthTexture.format=Xc,ie.map.depthTexture.compareFunction=null,ie.map.depthTexture.minFilter=Ur,ie.map.depthTexture.magFilter=Ur}else{ee.isPointLight?(ie.map=new aD(r.x),ie.map.depthTexture=new kj(r.x,Xl)):(ie.map=new sl(r.x,r.y),ie.map.depthTexture=new My(r.x,r.y,Xl)),ie.map.depthTexture.name=ee.name+".shadowMap",ie.map.depthTexture.format=Xc;const Me=n.state.buffers.depth.getReversed();this.type===ly?(ie.map.depthTexture.compareFunction=Me?IA:CA,ie.map.depthTexture.minFilter=Ki,ie.map.depthTexture.magFilter=Ki):(ie.map.depthTexture.compareFunction=null,ie.map.depthTexture.minFilter=Ur,ie.map.depthTexture.magFilter=Ur)}ie.camera.updateProjectionMatrix()}const we=ie.map.isWebGLCubeRenderTarget?6:1;for(let Me=0;Me<we;Me++){if(ie.map.isWebGLCubeRenderTarget)n.setRenderTarget(ie.map,Me),n.clear();else{Me===0&&(n.setRenderTarget(ie.map),n.clear());const J=ie.getViewport(Me);s.set(a.x*J.x,a.y*J.y,a.x*J.z,a.y*J.w),W.viewport(s)}if(ee.isPointLight){const J=ie.camera,pe=ie.matrix,Ee=ee.distance||J.far;Ee!==J.far&&(J.far=Ee,J.updateProjectionMatrix()),z_.setFromMatrixPosition(ee.matrixWorld),J.position.copy(z_),FI.copy(J.position),FI.add(Wre[Me]),J.up.copy(qre[Me]),J.lookAt(FI),J.updateMatrixWorld(),pe.makeTranslation(-z_.x,-z_.y,-z_.z),j4.multiplyMatrices(J.projectionMatrix,J.matrixWorldInverse),ie._frustum.setFromProjectionMatrix(j4,J.coordinateSystem,J.reversedDepth)}else ie.updateMatrices(ee);i=ie.getFrustum(),D(k,F,ie.camera,ee,this.type)}ie.isPointLightShadow!==!0&&this.type===Mm&&I(ie,F),ie.needsUpdate=!1}w=this.type,S.needsUpdate=!1,n.setRenderTarget(P,L,V)};function I(z,k){const F=e.update(T);v.defines.VSM_SAMPLES!==z.blurSamples&&(v.defines.VSM_SAMPLES=z.blurSamples,_.defines.VSM_SAMPLES=z.blurSamples,v.needsUpdate=!0,_.needsUpdate=!0),z.mapPass===null&&(z.mapPass=new sl(r.x,r.y,{format:Km,type:$c})),v.uniforms.shadow_pass.value=z.map.depthTexture,v.uniforms.resolution.value=z.mapSize,v.uniforms.radius.value=z.radius,n.setRenderTarget(z.mapPass),n.clear(),n.renderBufferDirect(k,null,F,v,T,null),_.uniforms.shadow_pass.value=z.mapPass.texture,_.uniforms.resolution.value=z.mapSize,_.uniforms.radius.value=z.radius,n.setRenderTarget(z.map),n.clear(),n.renderBufferDirect(k,null,F,_,T,null)}function R(z,k,F,P){let L=null;const V=F.isPointLight===!0?z.customDistanceMaterial:z.customDepthMaterial;if(V!==void 0)L=V;else if(L=F.isPointLight===!0?c:l,n.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0||k.alphaToCoverage===!0){const W=L.uuid,q=k.uuid;let ue=f[W];ue===void 0&&(ue={},f[W]=ue);let le=ue[q];le===void 0&&(le=L.clone(),ue[q]=le,k.addEventListener("dispose",B)),L=le}if(L.visible=k.visible,L.wireframe=k.wireframe,P===Mm?L.side=k.shadowSide!==null?k.shadowSide:k.side:L.side=k.shadowSide!==null?k.shadowSide:g[k.side],L.alphaMap=k.alphaMap,L.alphaTest=k.alphaToCoverage===!0?.5:k.alphaTest,L.map=k.map,L.clipShadows=k.clipShadows,L.clippingPlanes=k.clippingPlanes,L.clipIntersection=k.clipIntersection,L.displacementMap=k.displacementMap,L.displacementScale=k.displacementScale,L.displacementBias=k.displacementBias,L.wireframeLinewidth=k.wireframeLinewidth,L.linewidth=k.linewidth,F.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const W=n.properties.get(L);W.light=F}return L}function D(z,k,F,P,L){if(z.visible===!1)return;if(z.layers.test(k.layers)&&(z.isMesh||z.isLine||z.isPoints)&&(z.castShadow||z.receiveShadow&&L===Mm)&&(!z.frustumCulled||i.intersectsObject(z))){z.modelViewMatrix.multiplyMatrices(F.matrixWorldInverse,z.matrixWorld);const q=e.update(z),ue=z.material;if(Array.isArray(ue)){const le=q.groups;for(let ee=0,ie=le.length;ee<ie;ee++){const he=le[ee],we=ue[he.materialIndex];if(we&&we.visible){const Me=R(z,we,P,L);z.onBeforeShadow(n,z,k,F,q,Me,he),n.renderBufferDirect(F,null,q,Me,z,he),z.onAfterShadow(n,z,k,F,q,Me,he)}}}else if(ue.visible){const le=R(z,ue,P,L);z.onBeforeShadow(n,z,k,F,q,le,null),n.renderBufferDirect(F,null,q,le,z,null),z.onAfterShadow(n,z,k,F,q,le,null)}}const W=z.children;for(let q=0,ue=W.length;q<ue;q++)D(W[q],k,F,P,L)}function B(z){z.target.removeEventListener("dispose",B);for(const F in f){const P=f[F],L=z.target.uuid;L in P&&(P[L].dispose(),delete P[L])}}}const Xre={[uE]:cE,[fE]:pE,[hE]:mE,[Ym]:dE,[cE]:uE,[pE]:fE,[mE]:hE,[dE]:Ym};function Yre(n,e){function t(){let oe=!1;const $e=new Ni;let qe=null;const et=new Ni(0,0,0,0);return{setMask:function(Xe){qe!==Xe&&!oe&&(n.colorMask(Xe,Xe,Xe,Xe),qe=Xe)},setLocked:function(Xe){oe=Xe},setClear:function(Xe,We,at,kt,un){un===!0&&(Xe*=kt,We*=kt,at*=kt),$e.set(Xe,We,at,kt),et.equals($e)===!1&&(n.clearColor(Xe,We,at,kt),et.copy($e))},reset:function(){oe=!1,qe=null,et.set(-1,0,0,0)}}}function i(){let oe=!1,$e=!1,qe=null,et=null,Xe=null;return{setReversed:function(We){if($e!==We){const at=e.get("EXT_clip_control");We?at.clipControlEXT(at.LOWER_LEFT_EXT,at.ZERO_TO_ONE_EXT):at.clipControlEXT(at.LOWER_LEFT_EXT,at.NEGATIVE_ONE_TO_ONE_EXT),$e=We;const kt=Xe;Xe=null,this.setClear(kt)}},getReversed:function(){return $e},setTest:function(We){We?Te(n.DEPTH_TEST):dt(n.DEPTH_TEST)},setMask:function(We){qe!==We&&!oe&&(n.depthMask(We),qe=We)},setFunc:function(We){if($e&&(We=Xre[We]),et!==We){switch(We){case uE:n.depthFunc(n.NEVER);break;case cE:n.depthFunc(n.ALWAYS);break;case fE:n.depthFunc(n.LESS);break;case Ym:n.depthFunc(n.LEQUAL);break;case hE:n.depthFunc(n.EQUAL);break;case dE:n.depthFunc(n.GEQUAL);break;case pE:n.depthFunc(n.GREATER);break;case mE:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}et=We}},setLocked:function(We){oe=We},setClear:function(We){Xe!==We&&($e&&(We=1-We),n.clearDepth(We),Xe=We)},reset:function(){oe=!1,qe=null,et=null,Xe=null,$e=!1}}}function r(){let oe=!1,$e=null,qe=null,et=null,Xe=null,We=null,at=null,kt=null,un=null;return{setTest:function(Jt){oe||(Jt?Te(n.STENCIL_TEST):dt(n.STENCIL_TEST))},setMask:function(Jt){$e!==Jt&&!oe&&(n.stencilMask(Jt),$e=Jt)},setFunc:function(Jt,ii,Mi){(qe!==Jt||et!==ii||Xe!==Mi)&&(n.stencilFunc(Jt,ii,Mi),qe=Jt,et=ii,Xe=Mi)},setOp:function(Jt,ii,Mi){(We!==Jt||at!==ii||kt!==Mi)&&(n.stencilOp(Jt,ii,Mi),We=Jt,at=ii,kt=Mi)},setLocked:function(Jt){oe=Jt},setClear:function(Jt){un!==Jt&&(n.clearStencil(Jt),un=Jt)},reset:function(){oe=!1,$e=null,qe=null,et=null,Xe=null,We=null,at=null,kt=null,un=null}}}const a=new t,s=new i,l=new r,c=new WeakMap,f=new WeakMap;let p={},g={},v=new WeakMap,_=[],x=null,T=!1,S=null,w=null,I=null,R=null,D=null,B=null,z=null,k=new Dt(0,0,0),F=0,P=!1,L=null,V=null,W=null,q=null,ue=null;const le=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ee=!1,ie=0;const he=n.getParameter(n.VERSION);he.indexOf("WebGL")!==-1?(ie=parseFloat(/^WebGL (\d)/.exec(he)[1]),ee=ie>=1):he.indexOf("OpenGL ES")!==-1&&(ie=parseFloat(/^OpenGL ES (\d)/.exec(he)[1]),ee=ie>=2);let we=null,Me={};const J=n.getParameter(n.SCISSOR_BOX),pe=n.getParameter(n.VIEWPORT),Ee=new Ni().fromArray(J),Ge=new Ni().fromArray(pe);function ht(oe,$e,qe,et){const Xe=new Uint8Array(4),We=n.createTexture();n.bindTexture(oe,We),n.texParameteri(oe,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(oe,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let at=0;at<qe;at++)oe===n.TEXTURE_3D||oe===n.TEXTURE_2D_ARRAY?n.texImage3D($e,0,n.RGBA,1,1,et,0,n.RGBA,n.UNSIGNED_BYTE,Xe):n.texImage2D($e+at,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Xe);return We}const be={};be[n.TEXTURE_2D]=ht(n.TEXTURE_2D,n.TEXTURE_2D,1),be[n.TEXTURE_CUBE_MAP]=ht(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),be[n.TEXTURE_2D_ARRAY]=ht(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),be[n.TEXTURE_3D]=ht(n.TEXTURE_3D,n.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),l.setClear(0),Te(n.DEPTH_TEST),s.setFunc(Ym),Ve(!1),lt(WP),Te(n.CULL_FACE),Re(zc);function Te(oe){p[oe]!==!0&&(n.enable(oe),p[oe]=!0)}function dt(oe){p[oe]!==!1&&(n.disable(oe),p[oe]=!1)}function ve(oe,$e){return g[oe]!==$e?(n.bindFramebuffer(oe,$e),g[oe]=$e,oe===n.DRAW_FRAMEBUFFER&&(g[n.FRAMEBUFFER]=$e),oe===n.FRAMEBUFFER&&(g[n.DRAW_FRAMEBUFFER]=$e),!0):!1}function Ye(oe,$e){let qe=_,et=!1;if(oe){qe=v.get($e),qe===void 0&&(qe=[],v.set($e,qe));const Xe=oe.textures;if(qe.length!==Xe.length||qe[0]!==n.COLOR_ATTACHMENT0){for(let We=0,at=Xe.length;We<at;We++)qe[We]=n.COLOR_ATTACHMENT0+We;qe.length=Xe.length,et=!0}}else qe[0]!==n.BACK&&(qe[0]=n.BACK,et=!0);et&&n.drawBuffers(qe)}function wt(oe){return x!==oe?(n.useProgram(oe),x=oe,!0):!1}const je={[Rd]:n.FUNC_ADD,[V6]:n.FUNC_SUBTRACT,[j6]:n.FUNC_REVERSE_SUBTRACT};je[H6]=n.MIN,je[G6]=n.MAX;const At={[W6]:n.ZERO,[q6]:n.ONE,[$6]:n.SRC_COLOR,[oE]:n.SRC_ALPHA,[J6]:n.SRC_ALPHA_SATURATE,[Z6]:n.DST_COLOR,[Y6]:n.DST_ALPHA,[X6]:n.ONE_MINUS_SRC_COLOR,[lE]:n.ONE_MINUS_SRC_ALPHA,[Q6]:n.ONE_MINUS_DST_COLOR,[K6]:n.ONE_MINUS_DST_ALPHA,[ej]:n.CONSTANT_COLOR,[tj]:n.ONE_MINUS_CONSTANT_COLOR,[nj]:n.CONSTANT_ALPHA,[ij]:n.ONE_MINUS_CONSTANT_ALPHA};function Re(oe,$e,qe,et,Xe,We,at,kt,un,Jt){if(oe===zc){T===!0&&(dt(n.BLEND),T=!1);return}if(T===!1&&(Te(n.BLEND),T=!0),oe!==B6){if(oe!==S||Jt!==P){if((w!==Rd||D!==Rd)&&(n.blendEquation(n.FUNC_ADD),w=Rd,D=Rd),Jt)switch(oe){case Fm:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case qP:n.blendFunc(n.ONE,n.ONE);break;case $P:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case XP:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:Yt("WebGLState: Invalid blending: ",oe);break}else switch(oe){case Fm:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case qP:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case $P:Yt("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case XP:Yt("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Yt("WebGLState: Invalid blending: ",oe);break}I=null,R=null,B=null,z=null,k.set(0,0,0),F=0,S=oe,P=Jt}return}Xe=Xe||$e,We=We||qe,at=at||et,($e!==w||Xe!==D)&&(n.blendEquationSeparate(je[$e],je[Xe]),w=$e,D=Xe),(qe!==I||et!==R||We!==B||at!==z)&&(n.blendFuncSeparate(At[qe],At[et],At[We],At[at]),I=qe,R=et,B=We,z=at),(kt.equals(k)===!1||un!==F)&&(n.blendColor(kt.r,kt.g,kt.b,un),k.copy(kt),F=un),S=oe,P=!1}function Qe(oe,$e){oe.side===Pc?dt(n.CULL_FACE):Te(n.CULL_FACE);let qe=oe.side===eo;$e&&(qe=!qe),Ve(qe),oe.blending===Fm&&oe.transparent===!1?Re(zc):Re(oe.blending,oe.blendEquation,oe.blendSrc,oe.blendDst,oe.blendEquationAlpha,oe.blendSrcAlpha,oe.blendDstAlpha,oe.blendColor,oe.blendAlpha,oe.premultipliedAlpha),s.setFunc(oe.depthFunc),s.setTest(oe.depthTest),s.setMask(oe.depthWrite),a.setMask(oe.colorWrite);const et=oe.stencilWrite;l.setTest(et),et&&(l.setMask(oe.stencilWriteMask),l.setFunc(oe.stencilFunc,oe.stencilRef,oe.stencilFuncMask),l.setOp(oe.stencilFail,oe.stencilZFail,oe.stencilZPass)),Et(oe.polygonOffset,oe.polygonOffsetFactor,oe.polygonOffsetUnits),oe.alphaToCoverage===!0?Te(n.SAMPLE_ALPHA_TO_COVERAGE):dt(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ve(oe){L!==oe&&(oe?n.frontFace(n.CW):n.frontFace(n.CCW),L=oe)}function lt(oe){oe!==U6?(Te(n.CULL_FACE),oe!==V&&(oe===WP?n.cullFace(n.BACK):oe===F6?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):dt(n.CULL_FACE),V=oe}function ae(oe){oe!==W&&(ee&&n.lineWidth(oe),W=oe)}function Et(oe,$e,qe){oe?(Te(n.POLYGON_OFFSET_FILL),(q!==$e||ue!==qe)&&(n.polygonOffset($e,qe),q=$e,ue=qe)):dt(n.POLYGON_OFFSET_FILL)}function ft(oe){oe?Te(n.SCISSOR_TEST):dt(n.SCISSOR_TEST)}function Lt(oe){oe===void 0&&(oe=n.TEXTURE0+le-1),we!==oe&&(n.activeTexture(oe),we=oe)}function pt(oe,$e,qe){qe===void 0&&(we===null?qe=n.TEXTURE0+le-1:qe=we);let et=Me[qe];et===void 0&&(et={type:void 0,texture:void 0},Me[qe]=et),(et.type!==oe||et.texture!==$e)&&(we!==qe&&(n.activeTexture(qe),we=qe),n.bindTexture(oe,$e||be[oe]),et.type=oe,et.texture=$e)}function te(){const oe=Me[we];oe!==void 0&&oe.type!==void 0&&(n.bindTexture(oe.type,null),oe.type=void 0,oe.texture=void 0)}function X(){try{n.compressedTexImage2D(...arguments)}catch(oe){Yt("WebGLState:",oe)}}function de(){try{n.compressedTexImage3D(...arguments)}catch(oe){Yt("WebGLState:",oe)}}function Le(){try{n.texSubImage2D(...arguments)}catch(oe){Yt("WebGLState:",oe)}}function Ze(){try{n.texSubImage3D(...arguments)}catch(oe){Yt("WebGLState:",oe)}}function Oe(){try{n.compressedTexSubImage2D(...arguments)}catch(oe){Yt("WebGLState:",oe)}}function Tt(){try{n.compressedTexSubImage3D(...arguments)}catch(oe){Yt("WebGLState:",oe)}}function gt(){try{n.texStorage2D(...arguments)}catch(oe){Yt("WebGLState:",oe)}}function Pt(){try{n.texStorage3D(...arguments)}catch(oe){Yt("WebGLState:",oe)}}function Ht(){try{n.texImage2D(...arguments)}catch(oe){Yt("WebGLState:",oe)}}function nt(){try{n.texImage3D(...arguments)}catch(oe){Yt("WebGLState:",oe)}}function ot(oe){Ee.equals(oe)===!1&&(n.scissor(oe.x,oe.y,oe.z,oe.w),Ee.copy(oe))}function xt(oe){Ge.equals(oe)===!1&&(n.viewport(oe.x,oe.y,oe.z,oe.w),Ge.copy(oe))}function Y(oe,$e){let qe=f.get($e);qe===void 0&&(qe=new WeakMap,f.set($e,qe));let et=qe.get(oe);et===void 0&&(et=n.getUniformBlockIndex($e,oe.name),qe.set(oe,et))}function se(oe,$e){const et=f.get($e).get(oe);c.get($e)!==et&&(n.uniformBlockBinding($e,et,oe.__bindingPointIndex),c.set($e,et))}function Fe(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},we=null,Me={},g={},v=new WeakMap,_=[],x=null,T=!1,S=null,w=null,I=null,R=null,D=null,B=null,z=null,k=new Dt(0,0,0),F=0,P=!1,L=null,V=null,W=null,q=null,ue=null,Ee.set(0,0,n.canvas.width,n.canvas.height),Ge.set(0,0,n.canvas.width,n.canvas.height),a.reset(),s.reset(),l.reset()}return{buffers:{color:a,depth:s,stencil:l},enable:Te,disable:dt,bindFramebuffer:ve,drawBuffers:Ye,useProgram:wt,setBlending:Re,setMaterial:Qe,setFlipSided:Ve,setCullFace:lt,setLineWidth:ae,setPolygonOffset:Et,setScissorTest:ft,activeTexture:Lt,bindTexture:pt,unbindTexture:te,compressedTexImage2D:X,compressedTexImage3D:de,texImage2D:Ht,texImage3D:nt,updateUBOMapping:Y,uniformBlockBinding:se,texStorage2D:gt,texStorage3D:Pt,texSubImage2D:Le,texSubImage3D:Ze,compressedTexSubImage2D:Oe,compressedTexSubImage3D:Tt,scissor:ot,viewport:xt,reset:Fe}}function Kre(n,e,t,i,r,a,s){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new tt,p=new WeakMap;let g;const v=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(te,X){return _?new OffscreenCanvas(te,X):Lb("canvas")}function T(te,X,de){let Le=1;const Ze=pt(te);if((Ze.width>de||Ze.height>de)&&(Le=de/Math.max(Ze.width,Ze.height)),Le<1)if(typeof HTMLImageElement<"u"&&te instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&te instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&te instanceof ImageBitmap||typeof VideoFrame<"u"&&te instanceof VideoFrame){const Oe=Math.floor(Le*Ze.width),Tt=Math.floor(Le*Ze.height);g===void 0&&(g=x(Oe,Tt));const gt=X?x(Oe,Tt):g;return gt.width=Oe,gt.height=Tt,gt.getContext("2d").drawImage(te,0,0,Oe,Tt),Mt("WebGLRenderer: Texture has been resized from ("+Ze.width+"x"+Ze.height+") to ("+Oe+"x"+Tt+")."),gt}else return"data"in te&&Mt("WebGLRenderer: Image in DataTexture is too big ("+Ze.width+"x"+Ze.height+")."),te;return te}function S(te){return te.generateMipmaps}function w(te){n.generateMipmap(te)}function I(te){return te.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:te.isWebGL3DRenderTarget?n.TEXTURE_3D:te.isWebGLArrayRenderTarget||te.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function R(te,X,de,Le,Ze=!1){if(te!==null){if(n[te]!==void 0)return n[te];Mt("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+te+"'")}let Oe=X;if(X===n.RED&&(de===n.FLOAT&&(Oe=n.R32F),de===n.HALF_FLOAT&&(Oe=n.R16F),de===n.UNSIGNED_BYTE&&(Oe=n.R8)),X===n.RED_INTEGER&&(de===n.UNSIGNED_BYTE&&(Oe=n.R8UI),de===n.UNSIGNED_SHORT&&(Oe=n.R16UI),de===n.UNSIGNED_INT&&(Oe=n.R32UI),de===n.BYTE&&(Oe=n.R8I),de===n.SHORT&&(Oe=n.R16I),de===n.INT&&(Oe=n.R32I)),X===n.RG&&(de===n.FLOAT&&(Oe=n.RG32F),de===n.HALF_FLOAT&&(Oe=n.RG16F),de===n.UNSIGNED_BYTE&&(Oe=n.RG8)),X===n.RG_INTEGER&&(de===n.UNSIGNED_BYTE&&(Oe=n.RG8UI),de===n.UNSIGNED_SHORT&&(Oe=n.RG16UI),de===n.UNSIGNED_INT&&(Oe=n.RG32UI),de===n.BYTE&&(Oe=n.RG8I),de===n.SHORT&&(Oe=n.RG16I),de===n.INT&&(Oe=n.RG32I)),X===n.RGB_INTEGER&&(de===n.UNSIGNED_BYTE&&(Oe=n.RGB8UI),de===n.UNSIGNED_SHORT&&(Oe=n.RGB16UI),de===n.UNSIGNED_INT&&(Oe=n.RGB32UI),de===n.BYTE&&(Oe=n.RGB8I),de===n.SHORT&&(Oe=n.RGB16I),de===n.INT&&(Oe=n.RGB32I)),X===n.RGBA_INTEGER&&(de===n.UNSIGNED_BYTE&&(Oe=n.RGBA8UI),de===n.UNSIGNED_SHORT&&(Oe=n.RGBA16UI),de===n.UNSIGNED_INT&&(Oe=n.RGBA32UI),de===n.BYTE&&(Oe=n.RGBA8I),de===n.SHORT&&(Oe=n.RGBA16I),de===n.INT&&(Oe=n.RGBA32I)),X===n.RGB&&(de===n.UNSIGNED_INT_5_9_9_9_REV&&(Oe=n.RGB9_E5),de===n.UNSIGNED_INT_10F_11F_11F_REV&&(Oe=n.R11F_G11F_B10F)),X===n.RGBA){const Tt=Ze?Ob:qn.getTransfer(Le);de===n.FLOAT&&(Oe=n.RGBA32F),de===n.HALF_FLOAT&&(Oe=n.RGBA16F),de===n.UNSIGNED_BYTE&&(Oe=Tt===gi?n.SRGB8_ALPHA8:n.RGBA8),de===n.UNSIGNED_SHORT_4_4_4_4&&(Oe=n.RGBA4),de===n.UNSIGNED_SHORT_5_5_5_1&&(Oe=n.RGB5_A1)}return(Oe===n.R16F||Oe===n.R32F||Oe===n.RG16F||Oe===n.RG32F||Oe===n.RGBA16F||Oe===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Oe}function D(te,X){let de;return te?X===null||X===Xl||X===by?de=n.DEPTH24_STENCIL8:X===Zs?de=n.DEPTH32F_STENCIL8:X===_y&&(de=n.DEPTH24_STENCIL8,Mt("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):X===null||X===Xl||X===by?de=n.DEPTH_COMPONENT24:X===Zs?de=n.DEPTH_COMPONENT32F:X===_y&&(de=n.DEPTH_COMPONENT16),de}function B(te,X){return S(te)===!0||te.isFramebufferTexture&&te.minFilter!==Ur&&te.minFilter!==Ki?Math.log2(Math.max(X.width,X.height))+1:te.mipmaps!==void 0&&te.mipmaps.length>0?te.mipmaps.length:te.isCompressedTexture&&Array.isArray(te.image)?X.mipmaps.length:1}function z(te){const X=te.target;X.removeEventListener("dispose",z),F(X),X.isVideoTexture&&p.delete(X)}function k(te){const X=te.target;X.removeEventListener("dispose",k),L(X)}function F(te){const X=i.get(te);if(X.__webglInit===void 0)return;const de=te.source,Le=v.get(de);if(Le){const Ze=Le[X.__cacheKey];Ze.usedTimes--,Ze.usedTimes===0&&P(te),Object.keys(Le).length===0&&v.delete(de)}i.remove(te)}function P(te){const X=i.get(te);n.deleteTexture(X.__webglTexture);const de=te.source,Le=v.get(de);delete Le[X.__cacheKey],s.memory.textures--}function L(te){const X=i.get(te);if(te.depthTexture&&(te.depthTexture.dispose(),i.remove(te.depthTexture)),te.isWebGLCubeRenderTarget)for(let Le=0;Le<6;Le++){if(Array.isArray(X.__webglFramebuffer[Le]))for(let Ze=0;Ze<X.__webglFramebuffer[Le].length;Ze++)n.deleteFramebuffer(X.__webglFramebuffer[Le][Ze]);else n.deleteFramebuffer(X.__webglFramebuffer[Le]);X.__webglDepthbuffer&&n.deleteRenderbuffer(X.__webglDepthbuffer[Le])}else{if(Array.isArray(X.__webglFramebuffer))for(let Le=0;Le<X.__webglFramebuffer.length;Le++)n.deleteFramebuffer(X.__webglFramebuffer[Le]);else n.deleteFramebuffer(X.__webglFramebuffer);if(X.__webglDepthbuffer&&n.deleteRenderbuffer(X.__webglDepthbuffer),X.__webglMultisampledFramebuffer&&n.deleteFramebuffer(X.__webglMultisampledFramebuffer),X.__webglColorRenderbuffer)for(let Le=0;Le<X.__webglColorRenderbuffer.length;Le++)X.__webglColorRenderbuffer[Le]&&n.deleteRenderbuffer(X.__webglColorRenderbuffer[Le]);X.__webglDepthRenderbuffer&&n.deleteRenderbuffer(X.__webglDepthRenderbuffer)}const de=te.textures;for(let Le=0,Ze=de.length;Le<Ze;Le++){const Oe=i.get(de[Le]);Oe.__webglTexture&&(n.deleteTexture(Oe.__webglTexture),s.memory.textures--),i.remove(de[Le])}i.remove(te)}let V=0;function W(){V=0}function q(){const te=V;return te>=r.maxTextures&&Mt("WebGLTextures: Trying to use "+te+" texture units while this GPU supports only "+r.maxTextures),V+=1,te}function ue(te){const X=[];return X.push(te.wrapS),X.push(te.wrapT),X.push(te.wrapR||0),X.push(te.magFilter),X.push(te.minFilter),X.push(te.anisotropy),X.push(te.internalFormat),X.push(te.format),X.push(te.type),X.push(te.generateMipmaps),X.push(te.premultiplyAlpha),X.push(te.flipY),X.push(te.unpackAlignment),X.push(te.colorSpace),X.join()}function le(te,X){const de=i.get(te);if(te.isVideoTexture&&ft(te),te.isRenderTargetTexture===!1&&te.isExternalTexture!==!0&&te.version>0&&de.__version!==te.version){const Le=te.image;if(Le===null)Mt("WebGLRenderer: Texture marked for update but no image data found.");else if(Le.complete===!1)Mt("WebGLRenderer: Texture marked for update but image is incomplete");else{be(de,te,X);return}}else te.isExternalTexture&&(de.__webglTexture=te.sourceTexture?te.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,de.__webglTexture,n.TEXTURE0+X)}function ee(te,X){const de=i.get(te);if(te.isRenderTargetTexture===!1&&te.version>0&&de.__version!==te.version){be(de,te,X);return}else te.isExternalTexture&&(de.__webglTexture=te.sourceTexture?te.sourceTexture:null);t.bindTexture(n.TEXTURE_2D_ARRAY,de.__webglTexture,n.TEXTURE0+X)}function ie(te,X){const de=i.get(te);if(te.isRenderTargetTexture===!1&&te.version>0&&de.__version!==te.version){be(de,te,X);return}t.bindTexture(n.TEXTURE_3D,de.__webglTexture,n.TEXTURE0+X)}function he(te,X){const de=i.get(te);if(te.isCubeDepthTexture!==!0&&te.version>0&&de.__version!==te.version){Te(de,te,X);return}t.bindTexture(n.TEXTURE_CUBE_MAP,de.__webglTexture,n.TEXTURE0+X)}const we={[Ib]:n.REPEAT,[Oo]:n.CLAMP_TO_EDGE,[Rb]:n.MIRRORED_REPEAT},Me={[Ur]:n.NEAREST,[$O]:n.NEAREST_MIPMAP_NEAREST,[ny]:n.NEAREST_MIPMAP_LINEAR,[Ki]:n.LINEAR,[lb]:n.LINEAR_MIPMAP_NEAREST,[Dc]:n.LINEAR_MIPMAP_LINEAR},J={[hj]:n.NEVER,[vj]:n.ALWAYS,[dj]:n.LESS,[CA]:n.LEQUAL,[pj]:n.EQUAL,[IA]:n.GEQUAL,[mj]:n.GREATER,[gj]:n.NOTEQUAL};function pe(te,X){if(X.type===Zs&&e.has("OES_texture_float_linear")===!1&&(X.magFilter===Ki||X.magFilter===lb||X.magFilter===ny||X.magFilter===Dc||X.minFilter===Ki||X.minFilter===lb||X.minFilter===ny||X.minFilter===Dc)&&Mt("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(te,n.TEXTURE_WRAP_S,we[X.wrapS]),n.texParameteri(te,n.TEXTURE_WRAP_T,we[X.wrapT]),(te===n.TEXTURE_3D||te===n.TEXTURE_2D_ARRAY)&&n.texParameteri(te,n.TEXTURE_WRAP_R,we[X.wrapR]),n.texParameteri(te,n.TEXTURE_MAG_FILTER,Me[X.magFilter]),n.texParameteri(te,n.TEXTURE_MIN_FILTER,Me[X.minFilter]),X.compareFunction&&(n.texParameteri(te,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(te,n.TEXTURE_COMPARE_FUNC,J[X.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(X.magFilter===Ur||X.minFilter!==ny&&X.minFilter!==Dc||X.type===Zs&&e.has("OES_texture_float_linear")===!1)return;if(X.anisotropy>1||i.get(X).__currentAnisotropy){const de=e.get("EXT_texture_filter_anisotropic");n.texParameterf(te,de.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(X.anisotropy,r.getMaxAnisotropy())),i.get(X).__currentAnisotropy=X.anisotropy}}}function Ee(te,X){let de=!1;te.__webglInit===void 0&&(te.__webglInit=!0,X.addEventListener("dispose",z));const Le=X.source;let Ze=v.get(Le);Ze===void 0&&(Ze={},v.set(Le,Ze));const Oe=ue(X);if(Oe!==te.__cacheKey){Ze[Oe]===void 0&&(Ze[Oe]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,de=!0),Ze[Oe].usedTimes++;const Tt=Ze[te.__cacheKey];Tt!==void 0&&(Ze[te.__cacheKey].usedTimes--,Tt.usedTimes===0&&P(X)),te.__cacheKey=Oe,te.__webglTexture=Ze[Oe].texture}return de}function Ge(te,X,de){return Math.floor(Math.floor(te/de)/X)}function ht(te,X,de,Le){const Oe=te.updateRanges;if(Oe.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,X.width,X.height,de,Le,X.data);else{Oe.sort((nt,ot)=>nt.start-ot.start);let Tt=0;for(let nt=1;nt<Oe.length;nt++){const ot=Oe[Tt],xt=Oe[nt],Y=ot.start+ot.count,se=Ge(xt.start,X.width,4),Fe=Ge(ot.start,X.width,4);xt.start<=Y+1&&se===Fe&&Ge(xt.start+xt.count-1,X.width,4)===se?ot.count=Math.max(ot.count,xt.start+xt.count-ot.start):(++Tt,Oe[Tt]=xt)}Oe.length=Tt+1;const gt=n.getParameter(n.UNPACK_ROW_LENGTH),Pt=n.getParameter(n.UNPACK_SKIP_PIXELS),Ht=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,X.width);for(let nt=0,ot=Oe.length;nt<ot;nt++){const xt=Oe[nt],Y=Math.floor(xt.start/4),se=Math.ceil(xt.count/4),Fe=Y%X.width,oe=Math.floor(Y/X.width),$e=se,qe=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,Fe),n.pixelStorei(n.UNPACK_SKIP_ROWS,oe),t.texSubImage2D(n.TEXTURE_2D,0,Fe,oe,$e,qe,de,Le,X.data)}te.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,gt),n.pixelStorei(n.UNPACK_SKIP_PIXELS,Pt),n.pixelStorei(n.UNPACK_SKIP_ROWS,Ht)}}function be(te,X,de){let Le=n.TEXTURE_2D;(X.isDataArrayTexture||X.isCompressedArrayTexture)&&(Le=n.TEXTURE_2D_ARRAY),X.isData3DTexture&&(Le=n.TEXTURE_3D);const Ze=Ee(te,X),Oe=X.source;t.bindTexture(Le,te.__webglTexture,n.TEXTURE0+de);const Tt=i.get(Oe);if(Oe.version!==Tt.__version||Ze===!0){t.activeTexture(n.TEXTURE0+de);const gt=qn.getPrimaries(qn.workingColorSpace),Pt=X.colorSpace===Kf?null:qn.getPrimaries(X.colorSpace),Ht=X.colorSpace===Kf||gt===Pt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,X.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,X.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ht);let nt=T(X.image,!1,r.maxTextureSize);nt=Lt(X,nt);const ot=a.convert(X.format,X.colorSpace),xt=a.convert(X.type);let Y=R(X.internalFormat,ot,xt,X.colorSpace,X.isVideoTexture);pe(Le,X);let se;const Fe=X.mipmaps,oe=X.isVideoTexture!==!0,$e=Tt.__version===void 0||Ze===!0,qe=Oe.dataReady,et=B(X,nt);if(X.isDepthTexture)Y=D(X.format===Fd,X.type),$e&&(oe?t.texStorage2D(n.TEXTURE_2D,1,Y,nt.width,nt.height):t.texImage2D(n.TEXTURE_2D,0,Y,nt.width,nt.height,0,ot,xt,null));else if(X.isDataTexture)if(Fe.length>0){oe&&$e&&t.texStorage2D(n.TEXTURE_2D,et,Y,Fe[0].width,Fe[0].height);for(let Xe=0,We=Fe.length;Xe<We;Xe++)se=Fe[Xe],oe?qe&&t.texSubImage2D(n.TEXTURE_2D,Xe,0,0,se.width,se.height,ot,xt,se.data):t.texImage2D(n.TEXTURE_2D,Xe,Y,se.width,se.height,0,ot,xt,se.data);X.generateMipmaps=!1}else oe?($e&&t.texStorage2D(n.TEXTURE_2D,et,Y,nt.width,nt.height),qe&&ht(X,nt,ot,xt)):t.texImage2D(n.TEXTURE_2D,0,Y,nt.width,nt.height,0,ot,xt,nt.data);else if(X.isCompressedTexture)if(X.isCompressedArrayTexture){oe&&$e&&t.texStorage3D(n.TEXTURE_2D_ARRAY,et,Y,Fe[0].width,Fe[0].height,nt.depth);for(let Xe=0,We=Fe.length;Xe<We;Xe++)if(se=Fe[Xe],X.format!==Ms)if(ot!==null)if(oe){if(qe)if(X.layerUpdates.size>0){const at=aN(se.width,se.height,X.format,X.type);for(const kt of X.layerUpdates){const un=se.data.subarray(kt*at/se.data.BYTES_PER_ELEMENT,(kt+1)*at/se.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Xe,0,0,kt,se.width,se.height,1,ot,un)}X.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Xe,0,0,0,se.width,se.height,nt.depth,ot,se.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Xe,Y,se.width,se.height,nt.depth,0,se.data,0,0);else Mt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else oe?qe&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Xe,0,0,0,se.width,se.height,nt.depth,ot,xt,se.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Xe,Y,se.width,se.height,nt.depth,0,ot,xt,se.data)}else{oe&&$e&&t.texStorage2D(n.TEXTURE_2D,et,Y,Fe[0].width,Fe[0].height);for(let Xe=0,We=Fe.length;Xe<We;Xe++)se=Fe[Xe],X.format!==Ms?ot!==null?oe?qe&&t.compressedTexSubImage2D(n.TEXTURE_2D,Xe,0,0,se.width,se.height,ot,se.data):t.compressedTexImage2D(n.TEXTURE_2D,Xe,Y,se.width,se.height,0,se.data):Mt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):oe?qe&&t.texSubImage2D(n.TEXTURE_2D,Xe,0,0,se.width,se.height,ot,xt,se.data):t.texImage2D(n.TEXTURE_2D,Xe,Y,se.width,se.height,0,ot,xt,se.data)}else if(X.isDataArrayTexture)if(oe){if($e&&t.texStorage3D(n.TEXTURE_2D_ARRAY,et,Y,nt.width,nt.height,nt.depth),qe)if(X.layerUpdates.size>0){const Xe=aN(nt.width,nt.height,X.format,X.type);for(const We of X.layerUpdates){const at=nt.data.subarray(We*Xe/nt.data.BYTES_PER_ELEMENT,(We+1)*Xe/nt.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,We,nt.width,nt.height,1,ot,xt,at)}X.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,nt.width,nt.height,nt.depth,ot,xt,nt.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Y,nt.width,nt.height,nt.depth,0,ot,xt,nt.data);else if(X.isData3DTexture)oe?($e&&t.texStorage3D(n.TEXTURE_3D,et,Y,nt.width,nt.height,nt.depth),qe&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,nt.width,nt.height,nt.depth,ot,xt,nt.data)):t.texImage3D(n.TEXTURE_3D,0,Y,nt.width,nt.height,nt.depth,0,ot,xt,nt.data);else if(X.isFramebufferTexture){if($e)if(oe)t.texStorage2D(n.TEXTURE_2D,et,Y,nt.width,nt.height);else{let Xe=nt.width,We=nt.height;for(let at=0;at<et;at++)t.texImage2D(n.TEXTURE_2D,at,Y,Xe,We,0,ot,xt,null),Xe>>=1,We>>=1}}else if(Fe.length>0){if(oe&&$e){const Xe=pt(Fe[0]);t.texStorage2D(n.TEXTURE_2D,et,Y,Xe.width,Xe.height)}for(let Xe=0,We=Fe.length;Xe<We;Xe++)se=Fe[Xe],oe?qe&&t.texSubImage2D(n.TEXTURE_2D,Xe,0,0,ot,xt,se):t.texImage2D(n.TEXTURE_2D,Xe,Y,ot,xt,se);X.generateMipmaps=!1}else if(oe){if($e){const Xe=pt(nt);t.texStorage2D(n.TEXTURE_2D,et,Y,Xe.width,Xe.height)}qe&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ot,xt,nt)}else t.texImage2D(n.TEXTURE_2D,0,Y,ot,xt,nt);S(X)&&w(Le),Tt.__version=Oe.version,X.onUpdate&&X.onUpdate(X)}te.__version=X.version}function Te(te,X,de){if(X.image.length!==6)return;const Le=Ee(te,X),Ze=X.source;t.bindTexture(n.TEXTURE_CUBE_MAP,te.__webglTexture,n.TEXTURE0+de);const Oe=i.get(Ze);if(Ze.version!==Oe.__version||Le===!0){t.activeTexture(n.TEXTURE0+de);const Tt=qn.getPrimaries(qn.workingColorSpace),gt=X.colorSpace===Kf?null:qn.getPrimaries(X.colorSpace),Pt=X.colorSpace===Kf||Tt===gt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,X.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,X.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Pt);const Ht=X.isCompressedTexture||X.image[0].isCompressedTexture,nt=X.image[0]&&X.image[0].isDataTexture,ot=[];for(let We=0;We<6;We++)!Ht&&!nt?ot[We]=T(X.image[We],!0,r.maxCubemapSize):ot[We]=nt?X.image[We].image:X.image[We],ot[We]=Lt(X,ot[We]);const xt=ot[0],Y=a.convert(X.format,X.colorSpace),se=a.convert(X.type),Fe=R(X.internalFormat,Y,se,X.colorSpace),oe=X.isVideoTexture!==!0,$e=Oe.__version===void 0||Le===!0,qe=Ze.dataReady;let et=B(X,xt);pe(n.TEXTURE_CUBE_MAP,X);let Xe;if(Ht){oe&&$e&&t.texStorage2D(n.TEXTURE_CUBE_MAP,et,Fe,xt.width,xt.height);for(let We=0;We<6;We++){Xe=ot[We].mipmaps;for(let at=0;at<Xe.length;at++){const kt=Xe[at];X.format!==Ms?Y!==null?oe?qe&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,at,0,0,kt.width,kt.height,Y,kt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,at,Fe,kt.width,kt.height,0,kt.data):Mt("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):oe?qe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,at,0,0,kt.width,kt.height,Y,se,kt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,at,Fe,kt.width,kt.height,0,Y,se,kt.data)}}}else{if(Xe=X.mipmaps,oe&&$e){Xe.length>0&&et++;const We=pt(ot[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,et,Fe,We.width,We.height)}for(let We=0;We<6;We++)if(nt){oe?qe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,0,0,0,ot[We].width,ot[We].height,Y,se,ot[We].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,0,Fe,ot[We].width,ot[We].height,0,Y,se,ot[We].data);for(let at=0;at<Xe.length;at++){const un=Xe[at].image[We].image;oe?qe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,at+1,0,0,un.width,un.height,Y,se,un.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,at+1,Fe,un.width,un.height,0,Y,se,un.data)}}else{oe?qe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,0,0,0,Y,se,ot[We]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,0,Fe,Y,se,ot[We]);for(let at=0;at<Xe.length;at++){const kt=Xe[at];oe?qe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,at+1,0,0,Y,se,kt.image[We]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,at+1,Fe,Y,se,kt.image[We])}}}S(X)&&w(n.TEXTURE_CUBE_MAP),Oe.__version=Ze.version,X.onUpdate&&X.onUpdate(X)}te.__version=X.version}function dt(te,X,de,Le,Ze,Oe){const Tt=a.convert(de.format,de.colorSpace),gt=a.convert(de.type),Pt=R(de.internalFormat,Tt,gt,de.colorSpace),Ht=i.get(X),nt=i.get(de);if(nt.__renderTarget=X,!Ht.__hasExternalTextures){const ot=Math.max(1,X.width>>Oe),xt=Math.max(1,X.height>>Oe);Ze===n.TEXTURE_3D||Ze===n.TEXTURE_2D_ARRAY?t.texImage3D(Ze,Oe,Pt,ot,xt,X.depth,0,Tt,gt,null):t.texImage2D(Ze,Oe,Pt,ot,xt,0,Tt,gt,null)}t.bindFramebuffer(n.FRAMEBUFFER,te),Et(X)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Le,Ze,nt.__webglTexture,0,ae(X)):(Ze===n.TEXTURE_2D||Ze>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ze<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Le,Ze,nt.__webglTexture,Oe),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ve(te,X,de){if(n.bindRenderbuffer(n.RENDERBUFFER,te),X.depthBuffer){const Le=X.depthTexture,Ze=Le&&Le.isDepthTexture?Le.type:null,Oe=D(X.stencilBuffer,Ze),Tt=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;Et(X)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ae(X),Oe,X.width,X.height):de?n.renderbufferStorageMultisample(n.RENDERBUFFER,ae(X),Oe,X.width,X.height):n.renderbufferStorage(n.RENDERBUFFER,Oe,X.width,X.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Tt,n.RENDERBUFFER,te)}else{const Le=X.textures;for(let Ze=0;Ze<Le.length;Ze++){const Oe=Le[Ze],Tt=a.convert(Oe.format,Oe.colorSpace),gt=a.convert(Oe.type),Pt=R(Oe.internalFormat,Tt,gt,Oe.colorSpace);Et(X)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ae(X),Pt,X.width,X.height):de?n.renderbufferStorageMultisample(n.RENDERBUFFER,ae(X),Pt,X.width,X.height):n.renderbufferStorage(n.RENDERBUFFER,Pt,X.width,X.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ye(te,X,de){const Le=X.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(n.FRAMEBUFFER,te),!(X.depthTexture&&X.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ze=i.get(X.depthTexture);if(Ze.__renderTarget=X,(!Ze.__webglTexture||X.depthTexture.image.width!==X.width||X.depthTexture.image.height!==X.height)&&(X.depthTexture.image.width=X.width,X.depthTexture.image.height=X.height,X.depthTexture.needsUpdate=!0),Le){if(Ze.__webglInit===void 0&&(Ze.__webglInit=!0,X.depthTexture.addEventListener("dispose",z)),Ze.__webglTexture===void 0){Ze.__webglTexture=n.createTexture(),t.bindTexture(n.TEXTURE_CUBE_MAP,Ze.__webglTexture),pe(n.TEXTURE_CUBE_MAP,X.depthTexture);const Ht=a.convert(X.depthTexture.format),nt=a.convert(X.depthTexture.type);let ot;X.depthTexture.format===Xc?ot=n.DEPTH_COMPONENT24:X.depthTexture.format===Fd&&(ot=n.DEPTH24_STENCIL8);for(let xt=0;xt<6;xt++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xt,0,ot,X.width,X.height,0,Ht,nt,null)}}else le(X.depthTexture,0);const Oe=Ze.__webglTexture,Tt=ae(X),gt=Le?n.TEXTURE_CUBE_MAP_POSITIVE_X+de:n.TEXTURE_2D,Pt=X.depthTexture.format===Fd?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;if(X.depthTexture.format===Xc)Et(X)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Pt,gt,Oe,0,Tt):n.framebufferTexture2D(n.FRAMEBUFFER,Pt,gt,Oe,0);else if(X.depthTexture.format===Fd)Et(X)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Pt,gt,Oe,0,Tt):n.framebufferTexture2D(n.FRAMEBUFFER,Pt,gt,Oe,0);else throw new Error("Unknown depthTexture format")}function wt(te){const X=i.get(te),de=te.isWebGLCubeRenderTarget===!0;if(X.__boundDepthTexture!==te.depthTexture){const Le=te.depthTexture;if(X.__depthDisposeCallback&&X.__depthDisposeCallback(),Le){const Ze=()=>{delete X.__boundDepthTexture,delete X.__depthDisposeCallback,Le.removeEventListener("dispose",Ze)};Le.addEventListener("dispose",Ze),X.__depthDisposeCallback=Ze}X.__boundDepthTexture=Le}if(te.depthTexture&&!X.__autoAllocateDepthBuffer)if(de)for(let Le=0;Le<6;Le++)Ye(X.__webglFramebuffer[Le],te,Le);else{const Le=te.texture.mipmaps;Le&&Le.length>0?Ye(X.__webglFramebuffer[0],te,0):Ye(X.__webglFramebuffer,te,0)}else if(de){X.__webglDepthbuffer=[];for(let Le=0;Le<6;Le++)if(t.bindFramebuffer(n.FRAMEBUFFER,X.__webglFramebuffer[Le]),X.__webglDepthbuffer[Le]===void 0)X.__webglDepthbuffer[Le]=n.createRenderbuffer(),ve(X.__webglDepthbuffer[Le],te,!1);else{const Ze=te.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Oe=X.__webglDepthbuffer[Le];n.bindRenderbuffer(n.RENDERBUFFER,Oe),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ze,n.RENDERBUFFER,Oe)}}else{const Le=te.texture.mipmaps;if(Le&&Le.length>0?t.bindFramebuffer(n.FRAMEBUFFER,X.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,X.__webglFramebuffer),X.__webglDepthbuffer===void 0)X.__webglDepthbuffer=n.createRenderbuffer(),ve(X.__webglDepthbuffer,te,!1);else{const Ze=te.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Oe=X.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Oe),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ze,n.RENDERBUFFER,Oe)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function je(te,X,de){const Le=i.get(te);X!==void 0&&dt(Le.__webglFramebuffer,te,te.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),de!==void 0&&wt(te)}function At(te){const X=te.texture,de=i.get(te),Le=i.get(X);te.addEventListener("dispose",k);const Ze=te.textures,Oe=te.isWebGLCubeRenderTarget===!0,Tt=Ze.length>1;if(Tt||(Le.__webglTexture===void 0&&(Le.__webglTexture=n.createTexture()),Le.__version=X.version,s.memory.textures++),Oe){de.__webglFramebuffer=[];for(let gt=0;gt<6;gt++)if(X.mipmaps&&X.mipmaps.length>0){de.__webglFramebuffer[gt]=[];for(let Pt=0;Pt<X.mipmaps.length;Pt++)de.__webglFramebuffer[gt][Pt]=n.createFramebuffer()}else de.__webglFramebuffer[gt]=n.createFramebuffer()}else{if(X.mipmaps&&X.mipmaps.length>0){de.__webglFramebuffer=[];for(let gt=0;gt<X.mipmaps.length;gt++)de.__webglFramebuffer[gt]=n.createFramebuffer()}else de.__webglFramebuffer=n.createFramebuffer();if(Tt)for(let gt=0,Pt=Ze.length;gt<Pt;gt++){const Ht=i.get(Ze[gt]);Ht.__webglTexture===void 0&&(Ht.__webglTexture=n.createTexture(),s.memory.textures++)}if(te.samples>0&&Et(te)===!1){de.__webglMultisampledFramebuffer=n.createFramebuffer(),de.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,de.__webglMultisampledFramebuffer);for(let gt=0;gt<Ze.length;gt++){const Pt=Ze[gt];de.__webglColorRenderbuffer[gt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,de.__webglColorRenderbuffer[gt]);const Ht=a.convert(Pt.format,Pt.colorSpace),nt=a.convert(Pt.type),ot=R(Pt.internalFormat,Ht,nt,Pt.colorSpace,te.isXRRenderTarget===!0),xt=ae(te);n.renderbufferStorageMultisample(n.RENDERBUFFER,xt,ot,te.width,te.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+gt,n.RENDERBUFFER,de.__webglColorRenderbuffer[gt])}n.bindRenderbuffer(n.RENDERBUFFER,null),te.depthBuffer&&(de.__webglDepthRenderbuffer=n.createRenderbuffer(),ve(de.__webglDepthRenderbuffer,te,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Oe){t.bindTexture(n.TEXTURE_CUBE_MAP,Le.__webglTexture),pe(n.TEXTURE_CUBE_MAP,X);for(let gt=0;gt<6;gt++)if(X.mipmaps&&X.mipmaps.length>0)for(let Pt=0;Pt<X.mipmaps.length;Pt++)dt(de.__webglFramebuffer[gt][Pt],te,X,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+gt,Pt);else dt(de.__webglFramebuffer[gt],te,X,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+gt,0);S(X)&&w(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Tt){for(let gt=0,Pt=Ze.length;gt<Pt;gt++){const Ht=Ze[gt],nt=i.get(Ht);let ot=n.TEXTURE_2D;(te.isWebGL3DRenderTarget||te.isWebGLArrayRenderTarget)&&(ot=te.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(ot,nt.__webglTexture),pe(ot,Ht),dt(de.__webglFramebuffer,te,Ht,n.COLOR_ATTACHMENT0+gt,ot,0),S(Ht)&&w(ot)}t.unbindTexture()}else{let gt=n.TEXTURE_2D;if((te.isWebGL3DRenderTarget||te.isWebGLArrayRenderTarget)&&(gt=te.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(gt,Le.__webglTexture),pe(gt,X),X.mipmaps&&X.mipmaps.length>0)for(let Pt=0;Pt<X.mipmaps.length;Pt++)dt(de.__webglFramebuffer[Pt],te,X,n.COLOR_ATTACHMENT0,gt,Pt);else dt(de.__webglFramebuffer,te,X,n.COLOR_ATTACHMENT0,gt,0);S(X)&&w(gt),t.unbindTexture()}te.depthBuffer&&wt(te)}function Re(te){const X=te.textures;for(let de=0,Le=X.length;de<Le;de++){const Ze=X[de];if(S(Ze)){const Oe=I(te),Tt=i.get(Ze).__webglTexture;t.bindTexture(Oe,Tt),w(Oe),t.unbindTexture()}}}const Qe=[],Ve=[];function lt(te){if(te.samples>0){if(Et(te)===!1){const X=te.textures,de=te.width,Le=te.height;let Ze=n.COLOR_BUFFER_BIT;const Oe=te.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Tt=i.get(te),gt=X.length>1;if(gt)for(let Ht=0;Ht<X.length;Ht++)t.bindFramebuffer(n.FRAMEBUFFER,Tt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ht,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Tt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ht,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Tt.__webglMultisampledFramebuffer);const Pt=te.texture.mipmaps;Pt&&Pt.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Tt.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Tt.__webglFramebuffer);for(let Ht=0;Ht<X.length;Ht++){if(te.resolveDepthBuffer&&(te.depthBuffer&&(Ze|=n.DEPTH_BUFFER_BIT),te.stencilBuffer&&te.resolveStencilBuffer&&(Ze|=n.STENCIL_BUFFER_BIT)),gt){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Tt.__webglColorRenderbuffer[Ht]);const nt=i.get(X[Ht]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,nt,0)}n.blitFramebuffer(0,0,de,Le,0,0,de,Le,Ze,n.NEAREST),c===!0&&(Qe.length=0,Ve.length=0,Qe.push(n.COLOR_ATTACHMENT0+Ht),te.depthBuffer&&te.resolveDepthBuffer===!1&&(Qe.push(Oe),Ve.push(Oe),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Ve)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Qe))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),gt)for(let Ht=0;Ht<X.length;Ht++){t.bindFramebuffer(n.FRAMEBUFFER,Tt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ht,n.RENDERBUFFER,Tt.__webglColorRenderbuffer[Ht]);const nt=i.get(X[Ht]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Tt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ht,n.TEXTURE_2D,nt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Tt.__webglMultisampledFramebuffer)}else if(te.depthBuffer&&te.resolveDepthBuffer===!1&&c){const X=te.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[X])}}}function ae(te){return Math.min(r.maxSamples,te.samples)}function Et(te){const X=i.get(te);return te.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&X.__useRenderToTexture!==!1}function ft(te){const X=s.render.frame;p.get(te)!==X&&(p.set(te,X),te.update())}function Lt(te,X){const de=te.colorSpace,Le=te.format,Ze=te.type;return te.isCompressedTexture===!0||te.isVideoTexture===!0||de!==Qd&&de!==Kf&&(qn.getTransfer(de)===gi?(Le!==Ms||Ze!==Ys)&&Mt("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Yt("WebGLTextures: Unsupported texture color space:",de)),X}function pt(te){return typeof HTMLImageElement<"u"&&te instanceof HTMLImageElement?(f.width=te.naturalWidth||te.width,f.height=te.naturalHeight||te.height):typeof VideoFrame<"u"&&te instanceof VideoFrame?(f.width=te.displayWidth,f.height=te.displayHeight):(f.width=te.width,f.height=te.height),f}this.allocateTextureUnit=q,this.resetTextureUnits=W,this.setTexture2D=le,this.setTexture2DArray=ee,this.setTexture3D=ie,this.setTextureCube=he,this.rebindTextures=je,this.setupRenderTarget=At,this.updateRenderTargetMipmap=Re,this.updateMultisampleRenderTarget=lt,this.setupDepthRenderbuffer=wt,this.setupFrameBufferTexture=dt,this.useMultisampledRTT=Et,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function M8(n,e){function t(i,r=Kf){let a;const s=qn.getTransfer(r);if(i===Ys)return n.UNSIGNED_BYTE;if(i===SA)return n.UNSIGNED_SHORT_4_4_4_4;if(i===wA)return n.UNSIGNED_SHORT_5_5_5_1;if(i===KO)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===ZO)return n.UNSIGNED_INT_10F_11F_11F_REV;if(i===XO)return n.BYTE;if(i===YO)return n.SHORT;if(i===_y)return n.UNSIGNED_SHORT;if(i===xA)return n.INT;if(i===Xl)return n.UNSIGNED_INT;if(i===Zs)return n.FLOAT;if(i===$c)return n.HALF_FLOAT;if(i===QO)return n.ALPHA;if(i===JO)return n.RGB;if(i===Ms)return n.RGBA;if(i===Xc)return n.DEPTH_COMPONENT;if(i===Fd)return n.DEPTH_STENCIL;if(i===EA)return n.RED;if(i===_x)return n.RED_INTEGER;if(i===Km)return n.RG;if(i===TA)return n.RG_INTEGER;if(i===AA)return n.RGBA_INTEGER;if(i===ub||i===cb||i===fb||i===hb)if(s===gi)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===ub)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===cb)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===fb)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===hb)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===ub)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===cb)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===fb)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===hb)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===gE||i===vE||i===yE||i===_E)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===gE)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===vE)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===yE)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===_E)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===bE||i===xE||i===SE||i===wE||i===EE||i===TE||i===AE)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(i===bE||i===xE)return s===gi?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===SE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC;if(i===wE)return a.COMPRESSED_R11_EAC;if(i===EE)return a.COMPRESSED_SIGNED_R11_EAC;if(i===TE)return a.COMPRESSED_RG11_EAC;if(i===AE)return a.COMPRESSED_SIGNED_RG11_EAC}else return null;if(i===ME||i===CE||i===IE||i===RE||i===PE||i===NE||i===OE||i===DE||i===LE||i===kE||i===UE||i===FE||i===zE||i===BE)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(i===ME)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===CE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===IE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===RE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===PE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===NE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===OE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===DE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===LE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===kE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===UE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===FE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===zE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===BE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===VE||i===jE||i===HE)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(i===VE)return s===gi?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===jE)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===HE)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===GE||i===WE||i===qE||i===$E)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(i===GE)return a.COMPRESSED_RED_RGTC1_EXT;if(i===WE)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===qE)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===$E)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===by?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const Zre=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Qre=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Jre{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const i=new cD(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Yl({vertexShader:Zre,fragmentShader:Qre,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Zr(new $y(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class eae extends af{constructor(e,t){super();const i=this;let r=null,a=1,s=null,l="local-floor",c=1,f=null,p=null,g=null,v=null,_=null,x=null;const T=typeof XRWebGLBinding<"u",S=new Jre,w={},I=t.getContextAttributes();let R=null,D=null;const B=[],z=[],k=new tt;let F=null;const P=new kr;P.viewport=new Ni;const L=new kr;L.viewport=new Ni;const V=[P,L],W=new g8;let q=null,ue=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(be){let Te=B[be];return Te===void 0&&(Te=new Bw,B[be]=Te),Te.getTargetRaySpace()},this.getControllerGrip=function(be){let Te=B[be];return Te===void 0&&(Te=new Bw,B[be]=Te),Te.getGripSpace()},this.getHand=function(be){let Te=B[be];return Te===void 0&&(Te=new Bw,B[be]=Te),Te.getHandSpace()};function le(be){const Te=z.indexOf(be.inputSource);if(Te===-1)return;const dt=B[Te];dt!==void 0&&(dt.update(be.inputSource,be.frame,f||s),dt.dispatchEvent({type:be.type,data:be.inputSource}))}function ee(){r.removeEventListener("select",le),r.removeEventListener("selectstart",le),r.removeEventListener("selectend",le),r.removeEventListener("squeeze",le),r.removeEventListener("squeezestart",le),r.removeEventListener("squeezeend",le),r.removeEventListener("end",ee),r.removeEventListener("inputsourceschange",ie);for(let be=0;be<B.length;be++){const Te=z[be];Te!==null&&(z[be]=null,B[be].disconnect(Te))}q=null,ue=null,S.reset();for(const be in w)delete w[be];e.setRenderTarget(R),_=null,v=null,g=null,r=null,D=null,ht.stop(),i.isPresenting=!1,e.setPixelRatio(F),e.setSize(k.width,k.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(be){a=be,i.isPresenting===!0&&Mt("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(be){l=be,i.isPresenting===!0&&Mt("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||s},this.setReferenceSpace=function(be){f=be},this.getBaseLayer=function(){return v!==null?v:_},this.getBinding=function(){return g===null&&T&&(g=new XRWebGLBinding(r,t)),g},this.getFrame=function(){return x},this.getSession=function(){return r},this.setSession=async function(be){if(r=be,r!==null){if(R=e.getRenderTarget(),r.addEventListener("select",le),r.addEventListener("selectstart",le),r.addEventListener("selectend",le),r.addEventListener("squeeze",le),r.addEventListener("squeezestart",le),r.addEventListener("squeezeend",le),r.addEventListener("end",ee),r.addEventListener("inputsourceschange",ie),I.xrCompatible!==!0&&await t.makeXRCompatible(),F=e.getPixelRatio(),e.getSize(k),T&&"createProjectionLayer"in XRWebGLBinding.prototype){let dt=null,ve=null,Ye=null;I.depth&&(Ye=I.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,dt=I.stencil?Fd:Xc,ve=I.stencil?by:Xl);const wt={colorFormat:t.RGBA8,depthFormat:Ye,scaleFactor:a};g=this.getBinding(),v=g.createProjectionLayer(wt),r.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),D=new sl(v.textureWidth,v.textureHeight,{format:Ms,type:Ys,depthTexture:new My(v.textureWidth,v.textureHeight,ve,void 0,void 0,void 0,void 0,void 0,void 0,dt),stencilBuffer:I.stencil,colorSpace:e.outputColorSpace,samples:I.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}else{const dt={antialias:I.antialias,alpha:!0,depth:I.depth,stencil:I.stencil,framebufferScaleFactor:a};_=new XRWebGLLayer(r,t,dt),r.updateRenderState({baseLayer:_}),e.setPixelRatio(1),e.setSize(_.framebufferWidth,_.framebufferHeight,!1),D=new sl(_.framebufferWidth,_.framebufferHeight,{format:Ms,type:Ys,colorSpace:e.outputColorSpace,stencilBuffer:I.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}D.isXRRenderTarget=!0,this.setFoveation(c),f=null,s=await r.requestReferenceSpace(l),ht.setContext(r),ht.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return S.getDepthTexture()};function ie(be){for(let Te=0;Te<be.removed.length;Te++){const dt=be.removed[Te],ve=z.indexOf(dt);ve>=0&&(z[ve]=null,B[ve].disconnect(dt))}for(let Te=0;Te<be.added.length;Te++){const dt=be.added[Te];let ve=z.indexOf(dt);if(ve===-1){for(let wt=0;wt<B.length;wt++)if(wt>=z.length){z.push(dt),ve=wt;break}else if(z[wt]===null){z[wt]=dt,ve=wt;break}if(ve===-1)break}const Ye=B[ve];Ye&&Ye.connect(dt)}}const he=new re,we=new re;function Me(be,Te,dt){he.setFromMatrixPosition(Te.matrixWorld),we.setFromMatrixPosition(dt.matrixWorld);const ve=he.distanceTo(we),Ye=Te.projectionMatrix.elements,wt=dt.projectionMatrix.elements,je=Ye[14]/(Ye[10]-1),At=Ye[14]/(Ye[10]+1),Re=(Ye[9]+1)/Ye[5],Qe=(Ye[9]-1)/Ye[5],Ve=(Ye[8]-1)/Ye[0],lt=(wt[8]+1)/wt[0],ae=je*Ve,Et=je*lt,ft=ve/(-Ve+lt),Lt=ft*-Ve;if(Te.matrixWorld.decompose(be.position,be.quaternion,be.scale),be.translateX(Lt),be.translateZ(ft),be.matrixWorld.compose(be.position,be.quaternion,be.scale),be.matrixWorldInverse.copy(be.matrixWorld).invert(),Ye[10]===-1)be.projectionMatrix.copy(Te.projectionMatrix),be.projectionMatrixInverse.copy(Te.projectionMatrixInverse);else{const pt=je+ft,te=At+ft,X=ae-Lt,de=Et+(ve-Lt),Le=Re*At/te*pt,Ze=Qe*At/te*pt;be.projectionMatrix.makePerspective(X,de,Le,Ze,pt,te),be.projectionMatrixInverse.copy(be.projectionMatrix).invert()}}function J(be,Te){Te===null?be.matrixWorld.copy(be.matrix):be.matrixWorld.multiplyMatrices(Te.matrixWorld,be.matrix),be.matrixWorldInverse.copy(be.matrixWorld).invert()}this.updateCamera=function(be){if(r===null)return;let Te=be.near,dt=be.far;S.texture!==null&&(S.depthNear>0&&(Te=S.depthNear),S.depthFar>0&&(dt=S.depthFar)),W.near=L.near=P.near=Te,W.far=L.far=P.far=dt,(q!==W.near||ue!==W.far)&&(r.updateRenderState({depthNear:W.near,depthFar:W.far}),q=W.near,ue=W.far),W.layers.mask=be.layers.mask|6,P.layers.mask=W.layers.mask&3,L.layers.mask=W.layers.mask&5;const ve=be.parent,Ye=W.cameras;J(W,ve);for(let wt=0;wt<Ye.length;wt++)J(Ye[wt],ve);Ye.length===2?Me(W,P,L):W.projectionMatrix.copy(P.projectionMatrix),pe(be,W,ve)};function pe(be,Te,dt){dt===null?be.matrix.copy(Te.matrixWorld):(be.matrix.copy(dt.matrixWorld),be.matrix.invert(),be.matrix.multiply(Te.matrixWorld)),be.matrix.decompose(be.position,be.quaternion,be.scale),be.updateMatrixWorld(!0),be.projectionMatrix.copy(Te.projectionMatrix),be.projectionMatrixInverse.copy(Te.projectionMatrixInverse),be.isPerspectiveCamera&&(be.fov=wy*2*Math.atan(1/be.projectionMatrix.elements[5]),be.zoom=1)}this.getCamera=function(){return W},this.getFoveation=function(){if(!(v===null&&_===null))return c},this.setFoveation=function(be){c=be,v!==null&&(v.fixedFoveation=be),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=be)},this.hasDepthSensing=function(){return S.texture!==null},this.getDepthSensingMesh=function(){return S.getMesh(W)},this.getCameraTexture=function(be){return w[be]};let Ee=null;function Ge(be,Te){if(p=Te.getViewerPose(f||s),x=Te,p!==null){const dt=p.views;_!==null&&(e.setRenderTargetFramebuffer(D,_.framebuffer),e.setRenderTarget(D));let ve=!1;dt.length!==W.cameras.length&&(W.cameras.length=0,ve=!0);for(let At=0;At<dt.length;At++){const Re=dt[At];let Qe=null;if(_!==null)Qe=_.getViewport(Re);else{const lt=g.getViewSubImage(v,Re);Qe=lt.viewport,At===0&&(e.setRenderTargetTextures(D,lt.colorTexture,lt.depthStencilTexture),e.setRenderTarget(D))}let Ve=V[At];Ve===void 0&&(Ve=new kr,Ve.layers.enable(At),Ve.viewport=new Ni,V[At]=Ve),Ve.matrix.fromArray(Re.transform.matrix),Ve.matrix.decompose(Ve.position,Ve.quaternion,Ve.scale),Ve.projectionMatrix.fromArray(Re.projectionMatrix),Ve.projectionMatrixInverse.copy(Ve.projectionMatrix).invert(),Ve.viewport.set(Qe.x,Qe.y,Qe.width,Qe.height),At===0&&(W.matrix.copy(Ve.matrix),W.matrix.decompose(W.position,W.quaternion,W.scale)),ve===!0&&W.cameras.push(Ve)}const Ye=r.enabledFeatures;if(Ye&&Ye.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&T){g=i.getBinding();const At=g.getDepthInformation(dt[0]);At&&At.isValid&&At.texture&&S.init(At,r.renderState)}if(Ye&&Ye.includes("camera-access")&&T){e.state.unbindTexture(),g=i.getBinding();for(let At=0;At<dt.length;At++){const Re=dt[At].camera;if(Re){let Qe=w[Re];Qe||(Qe=new cD,w[Re]=Qe);const Ve=g.getCameraImage(Re);Qe.sourceTexture=Ve}}}}for(let dt=0;dt<B.length;dt++){const ve=z[dt],Ye=B[dt];ve!==null&&Ye!==void 0&&Ye.update(ve,Te,f||s)}Ee&&Ee(be,Te),Te.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Te}),x=null}const ht=new S8;ht.setAnimationLoop(Ge),this.setAnimationLoop=function(be){Ee=be},this.dispose=function(){}}}const mm=new ll,tae=new pn;function nae(n,e){function t(S,w){S.matrixAutoUpdate===!0&&S.updateMatrix(),w.value.copy(S.matrix)}function i(S,w){w.color.getRGB(S.fogColor.value,Ej(n)),w.isFog?(S.fogNear.value=w.near,S.fogFar.value=w.far):w.isFogExp2&&(S.fogDensity.value=w.density)}function r(S,w,I,R,D){w.isMeshBasicMaterial||w.isMeshLambertMaterial?a(S,w):w.isMeshToonMaterial?(a(S,w),g(S,w)):w.isMeshPhongMaterial?(a(S,w),p(S,w)):w.isMeshStandardMaterial?(a(S,w),v(S,w),w.isMeshPhysicalMaterial&&_(S,w,D)):w.isMeshMatcapMaterial?(a(S,w),x(S,w)):w.isMeshDepthMaterial?a(S,w):w.isMeshDistanceMaterial?(a(S,w),T(S,w)):w.isMeshNormalMaterial?a(S,w):w.isLineBasicMaterial?(s(S,w),w.isLineDashedMaterial&&l(S,w)):w.isPointsMaterial?c(S,w,I,R):w.isSpriteMaterial?f(S,w):w.isShadowMaterial?(S.color.value.copy(w.color),S.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function a(S,w){S.opacity.value=w.opacity,w.color&&S.diffuse.value.copy(w.color),w.emissive&&S.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(S.map.value=w.map,t(w.map,S.mapTransform)),w.alphaMap&&(S.alphaMap.value=w.alphaMap,t(w.alphaMap,S.alphaMapTransform)),w.bumpMap&&(S.bumpMap.value=w.bumpMap,t(w.bumpMap,S.bumpMapTransform),S.bumpScale.value=w.bumpScale,w.side===eo&&(S.bumpScale.value*=-1)),w.normalMap&&(S.normalMap.value=w.normalMap,t(w.normalMap,S.normalMapTransform),S.normalScale.value.copy(w.normalScale),w.side===eo&&S.normalScale.value.negate()),w.displacementMap&&(S.displacementMap.value=w.displacementMap,t(w.displacementMap,S.displacementMapTransform),S.displacementScale.value=w.displacementScale,S.displacementBias.value=w.displacementBias),w.emissiveMap&&(S.emissiveMap.value=w.emissiveMap,t(w.emissiveMap,S.emissiveMapTransform)),w.specularMap&&(S.specularMap.value=w.specularMap,t(w.specularMap,S.specularMapTransform)),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest);const I=e.get(w),R=I.envMap,D=I.envMapRotation;R&&(S.envMap.value=R,mm.copy(D),mm.x*=-1,mm.y*=-1,mm.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1&&(mm.y*=-1,mm.z*=-1),S.envMapRotation.value.setFromMatrix4(tae.makeRotationFromEuler(mm)),S.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=w.reflectivity,S.ior.value=w.ior,S.refractionRatio.value=w.refractionRatio),w.lightMap&&(S.lightMap.value=w.lightMap,S.lightMapIntensity.value=w.lightMapIntensity,t(w.lightMap,S.lightMapTransform)),w.aoMap&&(S.aoMap.value=w.aoMap,S.aoMapIntensity.value=w.aoMapIntensity,t(w.aoMap,S.aoMapTransform))}function s(S,w){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,w.map&&(S.map.value=w.map,t(w.map,S.mapTransform))}function l(S,w){S.dashSize.value=w.dashSize,S.totalSize.value=w.dashSize+w.gapSize,S.scale.value=w.scale}function c(S,w,I,R){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,S.size.value=w.size*I,S.scale.value=R*.5,w.map&&(S.map.value=w.map,t(w.map,S.uvTransform)),w.alphaMap&&(S.alphaMap.value=w.alphaMap,t(w.alphaMap,S.alphaMapTransform)),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest)}function f(S,w){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,S.rotation.value=w.rotation,w.map&&(S.map.value=w.map,t(w.map,S.mapTransform)),w.alphaMap&&(S.alphaMap.value=w.alphaMap,t(w.alphaMap,S.alphaMapTransform)),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest)}function p(S,w){S.specular.value.copy(w.specular),S.shininess.value=Math.max(w.shininess,1e-4)}function g(S,w){w.gradientMap&&(S.gradientMap.value=w.gradientMap)}function v(S,w){S.metalness.value=w.metalness,w.metalnessMap&&(S.metalnessMap.value=w.metalnessMap,t(w.metalnessMap,S.metalnessMapTransform)),S.roughness.value=w.roughness,w.roughnessMap&&(S.roughnessMap.value=w.roughnessMap,t(w.roughnessMap,S.roughnessMapTransform)),w.envMap&&(S.envMapIntensity.value=w.envMapIntensity)}function _(S,w,I){S.ior.value=w.ior,w.sheen>0&&(S.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),S.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(S.sheenColorMap.value=w.sheenColorMap,t(w.sheenColorMap,S.sheenColorMapTransform)),w.sheenRoughnessMap&&(S.sheenRoughnessMap.value=w.sheenRoughnessMap,t(w.sheenRoughnessMap,S.sheenRoughnessMapTransform))),w.clearcoat>0&&(S.clearcoat.value=w.clearcoat,S.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(S.clearcoatMap.value=w.clearcoatMap,t(w.clearcoatMap,S.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,t(w.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(S.clearcoatNormalMap.value=w.clearcoatNormalMap,t(w.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===eo&&S.clearcoatNormalScale.value.negate())),w.dispersion>0&&(S.dispersion.value=w.dispersion),w.iridescence>0&&(S.iridescence.value=w.iridescence,S.iridescenceIOR.value=w.iridescenceIOR,S.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(S.iridescenceMap.value=w.iridescenceMap,t(w.iridescenceMap,S.iridescenceMapTransform)),w.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=w.iridescenceThicknessMap,t(w.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),w.transmission>0&&(S.transmission.value=w.transmission,S.transmissionSamplerMap.value=I.texture,S.transmissionSamplerSize.value.set(I.width,I.height),w.transmissionMap&&(S.transmissionMap.value=w.transmissionMap,t(w.transmissionMap,S.transmissionMapTransform)),S.thickness.value=w.thickness,w.thicknessMap&&(S.thicknessMap.value=w.thicknessMap,t(w.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=w.attenuationDistance,S.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(S.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(S.anisotropyMap.value=w.anisotropyMap,t(w.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=w.specularIntensity,S.specularColor.value.copy(w.specularColor),w.specularColorMap&&(S.specularColorMap.value=w.specularColorMap,t(w.specularColorMap,S.specularColorMapTransform)),w.specularIntensityMap&&(S.specularIntensityMap.value=w.specularIntensityMap,t(w.specularIntensityMap,S.specularIntensityMapTransform))}function x(S,w){w.matcap&&(S.matcap.value=w.matcap)}function T(S,w){const I=e.get(w).light;S.referencePosition.value.setFromMatrixPosition(I.matrixWorld),S.nearDistance.value=I.shadow.camera.near,S.farDistance.value=I.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function iae(n,e,t,i){let r={},a={},s=[];const l=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(I,R){const D=R.program;i.uniformBlockBinding(I,D)}function f(I,R){let D=r[I.id];D===void 0&&(x(I),D=p(I),r[I.id]=D,I.addEventListener("dispose",S));const B=R.program;i.updateUBOMapping(I,B);const z=e.render.frame;a[I.id]!==z&&(v(I),a[I.id]=z)}function p(I){const R=g();I.__bindingPointIndex=R;const D=n.createBuffer(),B=I.__size,z=I.usage;return n.bindBuffer(n.UNIFORM_BUFFER,D),n.bufferData(n.UNIFORM_BUFFER,B,z),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,R,D),D}function g(){for(let I=0;I<l;I++)if(s.indexOf(I)===-1)return s.push(I),I;return Yt("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(I){const R=r[I.id],D=I.uniforms,B=I.__cache;n.bindBuffer(n.UNIFORM_BUFFER,R);for(let z=0,k=D.length;z<k;z++){const F=Array.isArray(D[z])?D[z]:[D[z]];for(let P=0,L=F.length;P<L;P++){const V=F[P];if(_(V,z,P,B)===!0){const W=V.__offset,q=Array.isArray(V.value)?V.value:[V.value];let ue=0;for(let le=0;le<q.length;le++){const ee=q[le],ie=T(ee);typeof ee=="number"||typeof ee=="boolean"?(V.__data[0]=ee,n.bufferSubData(n.UNIFORM_BUFFER,W+ue,V.__data)):ee.isMatrix3?(V.__data[0]=ee.elements[0],V.__data[1]=ee.elements[1],V.__data[2]=ee.elements[2],V.__data[3]=0,V.__data[4]=ee.elements[3],V.__data[5]=ee.elements[4],V.__data[6]=ee.elements[5],V.__data[7]=0,V.__data[8]=ee.elements[6],V.__data[9]=ee.elements[7],V.__data[10]=ee.elements[8],V.__data[11]=0):(ee.toArray(V.__data,ue),ue+=ie.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,W,V.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function _(I,R,D,B){const z=I.value,k=R+"_"+D;if(B[k]===void 0)return typeof z=="number"||typeof z=="boolean"?B[k]=z:B[k]=z.clone(),!0;{const F=B[k];if(typeof z=="number"||typeof z=="boolean"){if(F!==z)return B[k]=z,!0}else if(F.equals(z)===!1)return F.copy(z),!0}return!1}function x(I){const R=I.uniforms;let D=0;const B=16;for(let k=0,F=R.length;k<F;k++){const P=Array.isArray(R[k])?R[k]:[R[k]];for(let L=0,V=P.length;L<V;L++){const W=P[L],q=Array.isArray(W.value)?W.value:[W.value];for(let ue=0,le=q.length;ue<le;ue++){const ee=q[ue],ie=T(ee),he=D%B,we=he%ie.boundary,Me=he+we;D+=we,Me!==0&&B-Me<ie.storage&&(D+=B-Me),W.__data=new Float32Array(ie.storage/Float32Array.BYTES_PER_ELEMENT),W.__offset=D,D+=ie.storage}}}const z=D%B;return z>0&&(D+=B-z),I.__size=D,I.__cache={},this}function T(I){const R={boundary:0,storage:0};return typeof I=="number"||typeof I=="boolean"?(R.boundary=4,R.storage=4):I.isVector2?(R.boundary=8,R.storage=8):I.isVector3||I.isColor?(R.boundary=16,R.storage=12):I.isVector4?(R.boundary=16,R.storage=16):I.isMatrix3?(R.boundary=48,R.storage=48):I.isMatrix4?(R.boundary=64,R.storage=64):I.isTexture?Mt("WebGLRenderer: Texture samplers can not be part of an uniforms group."):Mt("WebGLRenderer: Unsupported uniform value type.",I),R}function S(I){const R=I.target;R.removeEventListener("dispose",S);const D=s.indexOf(R.__bindingPointIndex);s.splice(D,1),n.deleteBuffer(r[R.id]),delete r[R.id],delete a[R.id]}function w(){for(const I in r)n.deleteBuffer(r[I]);s=[],r={},a={}}return{bind:c,update:f,dispose:w}}const rae=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let Tc=null;function aae(){return Tc===null&&(Tc=new Du(rae,16,16,Km,$c),Tc.name="DFG_LUT",Tc.minFilter=Ki,Tc.magFilter=Ki,Tc.wrapS=Oo,Tc.wrapT=Oo,Tc.generateMipmaps=!1,Tc.needsUpdate=!0),Tc}class C8{constructor(e={}){const{canvas:t=bj(),context:i=null,depth:r=!0,stencil:a=!1,alpha:s=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:f=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:g=!1,reversedDepthBuffer:v=!1,outputBufferType:_=Ys}=e;this.isWebGLRenderer=!0;let x;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");x=i.getContextAttributes().alpha}else x=s;const T=_,S=new Set([AA,TA,_x]),w=new Set([Ys,Xl,_y,by,SA,wA]),I=new Uint32Array(4),R=new Int32Array(4);let D=null,B=null;const z=[],k=[];let F=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=$l,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const P=this;let L=!1;this._outputColorSpace=Za;let V=0,W=0,q=null,ue=-1,le=null;const ee=new Ni,ie=new Ni;let he=null;const we=new Dt(0);let Me=0,J=t.width,pe=t.height,Ee=1,Ge=null,ht=null;const be=new Ni(0,0,J,pe),Te=new Ni(0,0,J,pe);let dt=!1;const ve=new qy;let Ye=!1,wt=!1;const je=new pn,At=new re,Re=new Ni,Qe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ve=!1;function lt(){return q===null?Ee:1}let ae=i;function Et(Z,ge){return t.getContext(Z,ge)}try{const Z={alpha:!0,depth:r,stencil:a,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:f,powerPreference:p,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${yA}`),t.addEventListener("webglcontextlost",kt,!1),t.addEventListener("webglcontextrestored",un,!1),t.addEventListener("webglcontextcreationerror",Jt,!1),ae===null){const ge="webgl2";if(ae=Et(ge,Z),ae===null)throw Et(ge)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Z){throw Yt("WebGLRenderer: "+Z.message),Z}let ft,Lt,pt,te,X,de,Le,Ze,Oe,Tt,gt,Pt,Ht,nt,ot,xt,Y,se,Fe,oe,$e,qe,et,Xe;function We(){ft=new sie(ae),ft.init(),qe=new M8(ae,ft),Lt=new Zne(ae,ft,e,qe),pt=new Yre(ae,ft),Lt.reversedDepthBuffer&&v&&pt.buffers.depth.setReversed(!0),te=new uie(ae),X=new Dre,de=new Kre(ae,ft,pt,X,Lt,qe,te),Le=new Jne(P),Ze=new aie(P),Oe=new dee(ae),et=new Yne(ae,Oe),Tt=new oie(ae,Oe,te,et),gt=new fie(ae,Tt,Oe,te),Fe=new cie(ae,Lt,de),xt=new Qne(X),Pt=new Ore(P,Le,Ze,ft,Lt,et,xt),Ht=new nae(P,X),nt=new kre,ot=new jre(ft),se=new Xne(P,Le,Ze,pt,gt,x,c),Y=new $re(P,gt,Lt),Xe=new iae(ae,te,Lt,pt),oe=new Kne(ae,ft,te),$e=new lie(ae,ft,te),te.programs=Pt.programs,P.capabilities=Lt,P.extensions=ft,P.properties=X,P.renderLists=nt,P.shadowMap=Y,P.state=pt,P.info=te}We(),T!==Ys&&(F=new die(T,t.width,t.height,r,a));const at=new eae(P,ae);this.xr=at,this.getContext=function(){return ae},this.getContextAttributes=function(){return ae.getContextAttributes()},this.forceContextLoss=function(){const Z=ft.get("WEBGL_lose_context");Z&&Z.loseContext()},this.forceContextRestore=function(){const Z=ft.get("WEBGL_lose_context");Z&&Z.restoreContext()},this.getPixelRatio=function(){return Ee},this.setPixelRatio=function(Z){Z!==void 0&&(Ee=Z,this.setSize(J,pe,!1))},this.getSize=function(Z){return Z.set(J,pe)},this.setSize=function(Z,ge,De=!0){if(at.isPresenting){Mt("WebGLRenderer: Can't change size while VR device is presenting.");return}J=Z,pe=ge,t.width=Math.floor(Z*Ee),t.height=Math.floor(ge*Ee),De===!0&&(t.style.width=Z+"px",t.style.height=ge+"px"),F!==null&&F.setSize(t.width,t.height),this.setViewport(0,0,Z,ge)},this.getDrawingBufferSize=function(Z){return Z.set(J*Ee,pe*Ee).floor()},this.setDrawingBufferSize=function(Z,ge,De){J=Z,pe=ge,Ee=De,t.width=Math.floor(Z*De),t.height=Math.floor(ge*De),this.setViewport(0,0,Z,ge)},this.setEffects=function(Z){if(T===Ys){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(Z){for(let ge=0;ge<Z.length;ge++)if(Z[ge].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}F.setEffects(Z||[])},this.getCurrentViewport=function(Z){return Z.copy(ee)},this.getViewport=function(Z){return Z.copy(be)},this.setViewport=function(Z,ge,De,Ce){Z.isVector4?be.set(Z.x,Z.y,Z.z,Z.w):be.set(Z,ge,De,Ce),pt.viewport(ee.copy(be).multiplyScalar(Ee).round())},this.getScissor=function(Z){return Z.copy(Te)},this.setScissor=function(Z,ge,De,Ce){Z.isVector4?Te.set(Z.x,Z.y,Z.z,Z.w):Te.set(Z,ge,De,Ce),pt.scissor(ie.copy(Te).multiplyScalar(Ee).round())},this.getScissorTest=function(){return dt},this.setScissorTest=function(Z){pt.setScissorTest(dt=Z)},this.setOpaqueSort=function(Z){Ge=Z},this.setTransparentSort=function(Z){ht=Z},this.getClearColor=function(Z){return Z.copy(se.getClearColor())},this.setClearColor=function(){se.setClearColor(...arguments)},this.getClearAlpha=function(){return se.getClearAlpha()},this.setClearAlpha=function(){se.setClearAlpha(...arguments)},this.clear=function(Z=!0,ge=!0,De=!0){let Ce=0;if(Z){let _e=!1;if(q!==null){const vt=q.texture.format;_e=S.has(vt)}if(_e){const vt=q.texture.type,Ct=w.has(vt),ct=se.getClearColor(),Ot=se.getClearAlpha(),Ut=ct.r,Vt=ct.g,It=ct.b;Ct?(I[0]=Ut,I[1]=Vt,I[2]=It,I[3]=Ot,ae.clearBufferuiv(ae.COLOR,0,I)):(R[0]=Ut,R[1]=Vt,R[2]=It,R[3]=Ot,ae.clearBufferiv(ae.COLOR,0,R))}else Ce|=ae.COLOR_BUFFER_BIT}ge&&(Ce|=ae.DEPTH_BUFFER_BIT),De&&(Ce|=ae.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ae.clear(Ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",kt,!1),t.removeEventListener("webglcontextrestored",un,!1),t.removeEventListener("webglcontextcreationerror",Jt,!1),se.dispose(),nt.dispose(),ot.dispose(),X.dispose(),Le.dispose(),Ze.dispose(),gt.dispose(),et.dispose(),Xe.dispose(),Pt.dispose(),at.dispose(),at.removeEventListener("sessionstart",Cr),at.removeEventListener("sessionend",tu),Ci.stop()};function kt(Z){Z.preventDefault(),kb("WebGLRenderer: Context Lost."),L=!0}function un(){kb("WebGLRenderer: Context Restored."),L=!1;const Z=te.autoReset,ge=Y.enabled,De=Y.autoUpdate,Ce=Y.needsUpdate,_e=Y.type;We(),te.autoReset=Z,Y.enabled=ge,Y.autoUpdate=De,Y.needsUpdate=Ce,Y.type=_e}function Jt(Z){Yt("WebGLRenderer: A WebGL context could not be created. Reason: ",Z.statusMessage)}function ii(Z){const ge=Z.target;ge.removeEventListener("dispose",ii),Mi(ge)}function Mi(Z){Qr(Z),X.remove(Z)}function Qr(Z){const ge=X.get(Z).programs;ge!==void 0&&(ge.forEach(function(De){Pt.releaseProgram(De)}),Z.isShaderMaterial&&Pt.releaseShaderCache(Z))}this.renderBufferDirect=function(Z,ge,De,Ce,_e,vt){ge===null&&(ge=Qe);const Ct=_e.isMesh&&_e.matrixWorld.determinant()<0,ct=ga(Z,ge,De,Ce,_e);pt.setMaterial(Ce,Ct);let Ot=De.index,Ut=1;if(Ce.wireframe===!0){if(Ot=Tt.getWireframeAttribute(De),Ot===void 0)return;Ut=2}const Vt=De.drawRange,It=De.attributes.position;let $t=Vt.start*Ut,Pn=(Vt.start+Vt.count)*Ut;vt!==null&&($t=Math.max($t,vt.start*Ut),Pn=Math.min(Pn,(vt.start+vt.count)*Ut)),Ot!==null?($t=Math.max($t,0),Pn=Math.min(Pn,Ot.count)):It!=null&&($t=Math.max($t,0),Pn=Math.min(Pn,It.count));const ri=Pn-$t;if(ri<0||ri===1/0)return;et.setup(_e,Ce,ct,De,Ot);let Kt,on=oe;if(Ot!==null&&(Kt=Oe.get(Ot),on=$e,on.setIndex(Kt)),_e.isMesh)Ce.wireframe===!0?(pt.setLineWidth(Ce.wireframeLinewidth*lt()),on.setMode(ae.LINES)):on.setMode(ae.TRIANGLES);else if(_e.isLine){let St=Ce.linewidth;St===void 0&&(St=1),pt.setLineWidth(St*lt()),_e.isLineSegments?on.setMode(ae.LINES):_e.isLineLoop?on.setMode(ae.LINE_LOOP):on.setMode(ae.LINE_STRIP)}else _e.isPoints?on.setMode(ae.POINTS):_e.isSprite&&on.setMode(ae.TRIANGLES);if(_e.isBatchedMesh)if(_e._multiDrawInstances!==null)Sy("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),on.renderMultiDrawInstances(_e._multiDrawStarts,_e._multiDrawCounts,_e._multiDrawCount,_e._multiDrawInstances);else if(ft.get("WEBGL_multi_draw"))on.renderMultiDraw(_e._multiDrawStarts,_e._multiDrawCounts,_e._multiDrawCount);else{const St=_e._multiDrawStarts,An=_e._multiDrawCounts,tn=_e._multiDrawCount,zi=Ot?Oe.get(Ot).bytesPerElement:1,Os=X.get(Ce).currentProgram.getUniforms();for(let yi=0;yi<tn;yi++)Os.setValue(ae,"_gl_DrawID",yi),on.render(St[yi]/zi,An[yi])}else if(_e.isInstancedMesh)on.renderInstances($t,ri,_e.count);else if(De.isInstancedBufferGeometry){const St=De._maxInstanceCount!==void 0?De._maxInstanceCount:1/0,An=Math.min(De.instanceCount,St);on.renderInstances($t,ri,An)}else on.render($t,ri)};function rs(Z,ge,De){Z.transparent===!0&&Z.side===Pc&&Z.forceSinglePass===!1?(Z.side=eo,Z.needsUpdate=!0,Oa(Z,ge,De),Z.side=lh,Z.needsUpdate=!0,Oa(Z,ge,De),Z.side=Pc):Oa(Z,ge,De)}this.compile=function(Z,ge,De=null){De===null&&(De=Z),B=ot.get(De),B.init(ge),k.push(B),De.traverseVisible(function(_e){_e.isLight&&_e.layers.test(ge.layers)&&(B.pushLight(_e),_e.castShadow&&B.pushShadow(_e))}),Z!==De&&Z.traverseVisible(function(_e){_e.isLight&&_e.layers.test(ge.layers)&&(B.pushLight(_e),_e.castShadow&&B.pushShadow(_e))}),B.setupLights();const Ce=new Set;return Z.traverse(function(_e){if(!(_e.isMesh||_e.isPoints||_e.isLine||_e.isSprite))return;const vt=_e.material;if(vt)if(Array.isArray(vt))for(let Ct=0;Ct<vt.length;Ct++){const ct=vt[Ct];rs(ct,De,_e),Ce.add(ct)}else rs(vt,De,_e),Ce.add(vt)}),B=k.pop(),Ce},this.compileAsync=function(Z,ge,De=null){const Ce=this.compile(Z,ge,De);return new Promise(_e=>{function vt(){if(Ce.forEach(function(Ct){X.get(Ct).currentProgram.isReady()&&Ce.delete(Ct)}),Ce.size===0){_e(Z);return}setTimeout(vt,10)}ft.get("KHR_parallel_shader_compile")!==null?vt():setTimeout(vt,10)})};let as=null;function Jr(Z){as&&as(Z)}function Cr(){Ci.stop()}function tu(){Ci.start()}const Ci=new S8;Ci.setAnimationLoop(Jr),typeof self<"u"&&Ci.setContext(self),this.setAnimationLoop=function(Z){as=Z,at.setAnimationLoop(Z),Z===null?Ci.stop():Ci.start()},at.addEventListener("sessionstart",Cr),at.addEventListener("sessionend",tu),this.render=function(Z,ge){if(ge!==void 0&&ge.isCamera!==!0){Yt("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(L===!0)return;const De=at.enabled===!0&&at.isPresenting===!0,Ce=F!==null&&(q===null||De)&&F.begin(P,q);if(Z.matrixWorldAutoUpdate===!0&&Z.updateMatrixWorld(),ge.parent===null&&ge.matrixWorldAutoUpdate===!0&&ge.updateMatrixWorld(),at.enabled===!0&&at.isPresenting===!0&&(F===null||F.isCompositing()===!1)&&(at.cameraAutoUpdate===!0&&at.updateCamera(ge),ge=at.getCamera()),Z.isScene===!0&&Z.onBeforeRender(P,Z,ge,q),B=ot.get(Z,k.length),B.init(ge),k.push(B),je.multiplyMatrices(ge.projectionMatrix,ge.matrixWorldInverse),ve.setFromProjectionMatrix(je,tl,ge.reversedDepth),wt=this.localClippingEnabled,Ye=xt.init(this.clippingPlanes,wt),D=nt.get(Z,z.length),D.init(),z.push(D),at.enabled===!0&&at.isPresenting===!0){const Ct=P.xr.getDepthSensingMesh();Ct!==null&&pa(Ct,ge,-1/0,P.sortObjects)}pa(Z,ge,0,P.sortObjects),D.finish(),P.sortObjects===!0&&D.sort(Ge,ht),Ve=at.enabled===!1||at.isPresenting===!1||at.hasDepthSensing()===!1,Ve&&se.addToRenderList(D,Z),this.info.render.frame++,Ye===!0&&xt.beginShadows();const _e=B.state.shadowsArray;if(Y.render(_e,Z,ge),Ye===!0&&xt.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Ce&&F.hasRenderPass())===!1){const Ct=D.opaque,ct=D.transmissive;if(B.setupLights(),ge.isArrayCamera){const Ot=ge.cameras;if(ct.length>0)for(let Ut=0,Vt=Ot.length;Ut<Vt;Ut++){const It=Ot[Ut];Fi(Ct,ct,Z,It)}Ve&&se.render(Z);for(let Ut=0,Vt=Ot.length;Ut<Vt;Ut++){const It=Ot[Ut];xi(D,Z,It,It.viewport)}}else ct.length>0&&Fi(Ct,ct,Z,ge),Ve&&se.render(Z),xi(D,Z,ge)}q!==null&&W===0&&(de.updateMultisampleRenderTarget(q),de.updateRenderTargetMipmap(q)),Ce&&F.end(P),Z.isScene===!0&&Z.onAfterRender(P,Z,ge),et.resetDefaultState(),ue=-1,le=null,k.pop(),k.length>0?(B=k[k.length-1],Ye===!0&&xt.setGlobalState(P.clippingPlanes,B.state.camera)):B=null,z.pop(),z.length>0?D=z[z.length-1]:D=null};function pa(Z,ge,De,Ce){if(Z.visible===!1)return;if(Z.layers.test(ge.layers)){if(Z.isGroup)De=Z.renderOrder;else if(Z.isLOD)Z.autoUpdate===!0&&Z.update(ge);else if(Z.isLight)B.pushLight(Z),Z.castShadow&&B.pushShadow(Z);else if(Z.isSprite){if(!Z.frustumCulled||ve.intersectsSprite(Z)){Ce&&Re.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(je);const Ct=gt.update(Z),ct=Z.material;ct.visible&&D.push(Z,Ct,ct,De,Re.z,null)}}else if((Z.isMesh||Z.isLine||Z.isPoints)&&(!Z.frustumCulled||ve.intersectsObject(Z))){const Ct=gt.update(Z),ct=Z.material;if(Ce&&(Z.boundingSphere!==void 0?(Z.boundingSphere===null&&Z.computeBoundingSphere(),Re.copy(Z.boundingSphere.center)):(Ct.boundingSphere===null&&Ct.computeBoundingSphere(),Re.copy(Ct.boundingSphere.center)),Re.applyMatrix4(Z.matrixWorld).applyMatrix4(je)),Array.isArray(ct)){const Ot=Ct.groups;for(let Ut=0,Vt=Ot.length;Ut<Vt;Ut++){const It=Ot[Ut],$t=ct[It.materialIndex];$t&&$t.visible&&D.push(Z,Ct,$t,De,Re.z,It)}}else ct.visible&&D.push(Z,Ct,ct,De,Re.z,null)}}const vt=Z.children;for(let Ct=0,ct=vt.length;Ct<ct;Ct++)pa(vt[Ct],ge,De,Ce)}function xi(Z,ge,De,Ce){const{opaque:_e,transmissive:vt,transparent:Ct}=Z;B.setupLightsView(De),Ye===!0&&xt.setGlobalState(P.clippingPlanes,De),Ce&&pt.viewport(ee.copy(Ce)),_e.length>0&&ea(_e,ge,De),vt.length>0&&ea(vt,ge,De),Ct.length>0&&ea(Ct,ge,De),pt.buffers.depth.setTest(!0),pt.buffers.depth.setMask(!0),pt.buffers.color.setMask(!0),pt.setPolygonOffset(!1)}function Fi(Z,ge,De,Ce){if((De.isScene===!0?De.overrideMaterial:null)!==null)return;if(B.state.transmissionRenderTarget[Ce.id]===void 0){const $t=ft.has("EXT_color_buffer_half_float")||ft.has("EXT_color_buffer_float");B.state.transmissionRenderTarget[Ce.id]=new sl(1,1,{generateMipmaps:!0,type:$t?$c:Ys,minFilter:Dc,samples:Lt.samples,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:qn.workingColorSpace})}const vt=B.state.transmissionRenderTarget[Ce.id],Ct=Ce.viewport||ee;vt.setSize(Ct.z*P.transmissionResolutionScale,Ct.w*P.transmissionResolutionScale);const ct=P.getRenderTarget(),Ot=P.getActiveCubeFace(),Ut=P.getActiveMipmapLevel();P.setRenderTarget(vt),P.getClearColor(we),Me=P.getClearAlpha(),Me<1&&P.setClearColor(16777215,.5),P.clear(),Ve&&se.render(De);const Vt=P.toneMapping;P.toneMapping=$l;const It=Ce.viewport;if(Ce.viewport!==void 0&&(Ce.viewport=void 0),B.setupLightsView(Ce),Ye===!0&&xt.setGlobalState(P.clippingPlanes,Ce),ea(Z,De,Ce),de.updateMultisampleRenderTarget(vt),de.updateRenderTargetMipmap(vt),ft.has("WEBGL_multisampled_render_to_texture")===!1){let $t=!1;for(let Pn=0,ri=ge.length;Pn<ri;Pn++){const Kt=ge[Pn],{object:on,geometry:St,material:An,group:tn}=Kt;if(An.side===Pc&&on.layers.test(Ce.layers)){const zi=An.side;An.side=eo,An.needsUpdate=!0,ma(on,De,Ce,St,An,tn),An.side=zi,An.needsUpdate=!0,$t=!0}}$t===!0&&(de.updateMultisampleRenderTarget(vt),de.updateRenderTargetMipmap(vt))}P.setRenderTarget(ct,Ot,Ut),P.setClearColor(we,Me),It!==void 0&&(Ce.viewport=It),P.toneMapping=Vt}function ea(Z,ge,De){const Ce=ge.isScene===!0?ge.overrideMaterial:null;for(let _e=0,vt=Z.length;_e<vt;_e++){const Ct=Z[_e],{object:ct,geometry:Ot,group:Ut}=Ct;let Vt=Ct.material;Vt.allowOverride===!0&&Ce!==null&&(Vt=Ce),ct.layers.test(De.layers)&&ma(ct,ge,De,Ot,Vt,Ut)}}function ma(Z,ge,De,Ce,_e,vt){Z.onBeforeRender(P,ge,De,Ce,_e,vt),Z.modelViewMatrix.multiplyMatrices(De.matrixWorldInverse,Z.matrixWorld),Z.normalMatrix.getNormalMatrix(Z.modelViewMatrix),_e.onBeforeRender(P,ge,De,Ce,Z,vt),_e.transparent===!0&&_e.side===Pc&&_e.forceSinglePass===!1?(_e.side=eo,_e.needsUpdate=!0,P.renderBufferDirect(De,ge,Ce,_e,Z,vt),_e.side=lh,_e.needsUpdate=!0,P.renderBufferDirect(De,ge,Ce,_e,Z,vt),_e.side=Pc):P.renderBufferDirect(De,ge,Ce,_e,Z,vt),Z.onAfterRender(P,ge,De,Ce,_e,vt)}function Oa(Z,ge,De){ge.isScene!==!0&&(ge=Qe);const Ce=X.get(Z),_e=B.state.lights,vt=B.state.shadowsArray,Ct=_e.state.version,ct=Pt.getParameters(Z,_e.state,vt,ge,De),Ot=Pt.getProgramCacheKey(ct);let Ut=Ce.programs;Ce.environment=Z.isMeshStandardMaterial?ge.environment:null,Ce.fog=ge.fog,Ce.envMap=(Z.isMeshStandardMaterial?Ze:Le).get(Z.envMap||Ce.environment),Ce.envMapRotation=Ce.environment!==null&&Z.envMap===null?ge.environmentRotation:Z.envMapRotation,Ut===void 0&&(Z.addEventListener("dispose",ii),Ut=new Map,Ce.programs=Ut);let Vt=Ut.get(Ot);if(Vt!==void 0){if(Ce.currentProgram===Vt&&Ce.lightsStateVersion===Ct)return nu(Z,ct),Vt}else ct.uniforms=Pt.getUniforms(Z),Z.onBeforeCompile(ct,P),Vt=Pt.acquireProgram(ct,Ot),Ut.set(Ot,Vt),Ce.uniforms=ct.uniforms;const It=Ce.uniforms;return(!Z.isShaderMaterial&&!Z.isRawShaderMaterial||Z.clipping===!0)&&(It.clippingPlanes=xt.uniform),nu(Z,ct),Ce.needsLights=Ns(Z),Ce.lightsStateVersion=Ct,Ce.needsLights&&(It.ambientLightColor.value=_e.state.ambient,It.lightProbe.value=_e.state.probe,It.directionalLights.value=_e.state.directional,It.directionalLightShadows.value=_e.state.directionalShadow,It.spotLights.value=_e.state.spot,It.spotLightShadows.value=_e.state.spotShadow,It.rectAreaLights.value=_e.state.rectArea,It.ltc_1.value=_e.state.rectAreaLTC1,It.ltc_2.value=_e.state.rectAreaLTC2,It.pointLights.value=_e.state.point,It.pointLightShadows.value=_e.state.pointShadow,It.hemisphereLights.value=_e.state.hemi,It.directionalShadowMap.value=_e.state.directionalShadowMap,It.directionalShadowMatrix.value=_e.state.directionalShadowMatrix,It.spotShadowMap.value=_e.state.spotShadowMap,It.spotLightMatrix.value=_e.state.spotLightMatrix,It.spotLightMap.value=_e.state.spotLightMap,It.pointShadowMap.value=_e.state.pointShadowMap,It.pointShadowMatrix.value=_e.state.pointShadowMatrix),Ce.currentProgram=Vt,Ce.uniformsList=null,Vt}function Fo(Z){if(Z.uniformsList===null){const ge=Z.currentProgram.getUniforms();Z.uniformsList=Vw.seqWithValue(ge.seq,Z.uniforms)}return Z.uniformsList}function nu(Z,ge){const De=X.get(Z);De.outputColorSpace=ge.outputColorSpace,De.batching=ge.batching,De.batchingColor=ge.batchingColor,De.instancing=ge.instancing,De.instancingColor=ge.instancingColor,De.instancingMorph=ge.instancingMorph,De.skinning=ge.skinning,De.morphTargets=ge.morphTargets,De.morphNormals=ge.morphNormals,De.morphColors=ge.morphColors,De.morphTargetsCount=ge.morphTargetsCount,De.numClippingPlanes=ge.numClippingPlanes,De.numIntersection=ge.numClipIntersection,De.vertexAlphas=ge.vertexAlphas,De.vertexTangents=ge.vertexTangents,De.toneMapping=ge.toneMapping}function ga(Z,ge,De,Ce,_e){ge.isScene!==!0&&(ge=Qe),de.resetTextureUnits();const vt=ge.fog,Ct=Ce.isMeshStandardMaterial?ge.environment:null,ct=q===null?P.outputColorSpace:q.isXRRenderTarget===!0?q.texture.colorSpace:Qd,Ot=(Ce.isMeshStandardMaterial?Ze:Le).get(Ce.envMap||Ct),Ut=Ce.vertexColors===!0&&!!De.attributes.color&&De.attributes.color.itemSize===4,Vt=!!De.attributes.tangent&&(!!Ce.normalMap||Ce.anisotropy>0),It=!!De.morphAttributes.position,$t=!!De.morphAttributes.normal,Pn=!!De.morphAttributes.color;let ri=$l;Ce.toneMapped&&(q===null||q.isXRRenderTarget===!0)&&(ri=P.toneMapping);const Kt=De.morphAttributes.position||De.morphAttributes.normal||De.morphAttributes.color,on=Kt!==void 0?Kt.length:0,St=X.get(Ce),An=B.state.lights;if(Ye===!0&&(wt===!0||Z!==le)){const or=Z===le&&Ce.id===ue;xt.setState(Ce,Z,or)}let tn=!1;Ce.version===St.__version?(St.needsLights&&St.lightsStateVersion!==An.state.version||St.outputColorSpace!==ct||_e.isBatchedMesh&&St.batching===!1||!_e.isBatchedMesh&&St.batching===!0||_e.isBatchedMesh&&St.batchingColor===!0&&_e.colorTexture===null||_e.isBatchedMesh&&St.batchingColor===!1&&_e.colorTexture!==null||_e.isInstancedMesh&&St.instancing===!1||!_e.isInstancedMesh&&St.instancing===!0||_e.isSkinnedMesh&&St.skinning===!1||!_e.isSkinnedMesh&&St.skinning===!0||_e.isInstancedMesh&&St.instancingColor===!0&&_e.instanceColor===null||_e.isInstancedMesh&&St.instancingColor===!1&&_e.instanceColor!==null||_e.isInstancedMesh&&St.instancingMorph===!0&&_e.morphTexture===null||_e.isInstancedMesh&&St.instancingMorph===!1&&_e.morphTexture!==null||St.envMap!==Ot||Ce.fog===!0&&St.fog!==vt||St.numClippingPlanes!==void 0&&(St.numClippingPlanes!==xt.numPlanes||St.numIntersection!==xt.numIntersection)||St.vertexAlphas!==Ut||St.vertexTangents!==Vt||St.morphTargets!==It||St.morphNormals!==$t||St.morphColors!==Pn||St.toneMapping!==ri||St.morphTargetsCount!==on)&&(tn=!0):(tn=!0,St.__version=Ce.version);let zi=St.currentProgram;tn===!0&&(zi=Oa(Ce,ge,_e));let Os=!1,yi=!1,ta=!1;const Zn=zi.getUniforms(),Ii=St.uniforms;if(pt.useProgram(zi.program)&&(Os=!0,yi=!0,ta=!0),Ce.id!==ue&&(ue=Ce.id,yi=!0),Os||le!==Z){pt.buffers.depth.getReversed()&&Z.reversedDepth!==!0&&(Z._reversedDepth=!0,Z.updateProjectionMatrix()),Zn.setValue(ae,"projectionMatrix",Z.projectionMatrix),Zn.setValue(ae,"viewMatrix",Z.matrixWorldInverse);const lr=Zn.map.cameraPosition;lr!==void 0&&lr.setValue(ae,At.setFromMatrixPosition(Z.matrixWorld)),Lt.logarithmicDepthBuffer&&Zn.setValue(ae,"logDepthBufFC",2/(Math.log(Z.far+1)/Math.LN2)),(Ce.isMeshPhongMaterial||Ce.isMeshToonMaterial||Ce.isMeshLambertMaterial||Ce.isMeshBasicMaterial||Ce.isMeshStandardMaterial||Ce.isShaderMaterial)&&Zn.setValue(ae,"isOrthographic",Z.isOrthographicCamera===!0),le!==Z&&(le=Z,yi=!0,ta=!0)}if(St.needsLights&&(An.state.directionalShadowMap.length>0&&Zn.setValue(ae,"directionalShadowMap",An.state.directionalShadowMap,de),An.state.spotShadowMap.length>0&&Zn.setValue(ae,"spotShadowMap",An.state.spotShadowMap,de),An.state.pointShadowMap.length>0&&Zn.setValue(ae,"pointShadowMap",An.state.pointShadowMap,de)),_e.isSkinnedMesh){Zn.setOptional(ae,_e,"bindMatrix"),Zn.setOptional(ae,_e,"bindMatrixInverse");const or=_e.skeleton;or&&(or.boneTexture===null&&or.computeBoneTexture(),Zn.setValue(ae,"boneTexture",or.boneTexture,de))}_e.isBatchedMesh&&(Zn.setOptional(ae,_e,"batchingTexture"),Zn.setValue(ae,"batchingTexture",_e._matricesTexture,de),Zn.setOptional(ae,_e,"batchingIdTexture"),Zn.setValue(ae,"batchingIdTexture",_e._indirectTexture,de),Zn.setOptional(ae,_e,"batchingColorTexture"),_e._colorsTexture!==null&&Zn.setValue(ae,"batchingColorTexture",_e._colorsTexture,de));const di=De.morphAttributes;if((di.position!==void 0||di.normal!==void 0||di.color!==void 0)&&Fe.update(_e,De,zi),(yi||St.receiveShadow!==_e.receiveShadow)&&(St.receiveShadow=_e.receiveShadow,Zn.setValue(ae,"receiveShadow",_e.receiveShadow)),Ce.isMeshGouraudMaterial&&Ce.envMap!==null&&(Ii.envMap.value=Ot,Ii.flipEnvMap.value=Ot.isCubeTexture&&Ot.isRenderTargetTexture===!1?-1:1),Ce.isMeshStandardMaterial&&Ce.envMap===null&&ge.environment!==null&&(Ii.envMapIntensity.value=ge.environmentIntensity),Ii.dfgLUT!==void 0&&(Ii.dfgLUT.value=aae()),yi&&(Zn.setValue(ae,"toneMappingExposure",P.toneMappingExposure),St.needsLights&&ao(Ii,ta),vt&&Ce.fog===!0&&Ht.refreshFogUniforms(Ii,vt),Ht.refreshMaterialUniforms(Ii,Ce,Ee,pe,B.state.transmissionRenderTarget[Z.id]),Vw.upload(ae,Fo(St),Ii,de)),Ce.isShaderMaterial&&Ce.uniformsNeedUpdate===!0&&(Vw.upload(ae,Fo(St),Ii,de),Ce.uniformsNeedUpdate=!1),Ce.isSpriteMaterial&&Zn.setValue(ae,"center",_e.center),Zn.setValue(ae,"modelViewMatrix",_e.modelViewMatrix),Zn.setValue(ae,"normalMatrix",_e.normalMatrix),Zn.setValue(ae,"modelMatrix",_e.matrixWorld),Ce.isShaderMaterial||Ce.isRawShaderMaterial){const or=Ce.uniformsGroups;for(let lr=0,fl=or.length;lr<fl;lr++){const La=or[lr];Xe.update(La,zi),Xe.bind(La,zi)}}return zi}function ao(Z,ge){Z.ambientLightColor.needsUpdate=ge,Z.lightProbe.needsUpdate=ge,Z.directionalLights.needsUpdate=ge,Z.directionalLightShadows.needsUpdate=ge,Z.pointLights.needsUpdate=ge,Z.pointLightShadows.needsUpdate=ge,Z.spotLights.needsUpdate=ge,Z.spotLightShadows.needsUpdate=ge,Z.rectAreaLights.needsUpdate=ge,Z.hemisphereLights.needsUpdate=ge}function Ns(Z){return Z.isMeshLambertMaterial||Z.isMeshToonMaterial||Z.isMeshPhongMaterial||Z.isMeshStandardMaterial||Z.isShadowMaterial||Z.isShaderMaterial&&Z.lights===!0}this.getActiveCubeFace=function(){return V},this.getActiveMipmapLevel=function(){return W},this.getRenderTarget=function(){return q},this.setRenderTargetTextures=function(Z,ge,De){const Ce=X.get(Z);Ce.__autoAllocateDepthBuffer=Z.resolveDepthBuffer===!1,Ce.__autoAllocateDepthBuffer===!1&&(Ce.__useRenderToTexture=!1),X.get(Z.texture).__webglTexture=ge,X.get(Z.depthTexture).__webglTexture=Ce.__autoAllocateDepthBuffer?void 0:De,Ce.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(Z,ge){const De=X.get(Z);De.__webglFramebuffer=ge,De.__useDefaultFramebuffer=ge===void 0};const Da=ae.createFramebuffer();this.setRenderTarget=function(Z,ge=0,De=0){q=Z,V=ge,W=De;let Ce=null,_e=!1,vt=!1;if(Z){const ct=X.get(Z);if(ct.__useDefaultFramebuffer!==void 0){pt.bindFramebuffer(ae.FRAMEBUFFER,ct.__webglFramebuffer),ee.copy(Z.viewport),ie.copy(Z.scissor),he=Z.scissorTest,pt.viewport(ee),pt.scissor(ie),pt.setScissorTest(he),ue=-1;return}else if(ct.__webglFramebuffer===void 0)de.setupRenderTarget(Z);else if(ct.__hasExternalTextures)de.rebindTextures(Z,X.get(Z.texture).__webglTexture,X.get(Z.depthTexture).__webglTexture);else if(Z.depthBuffer){const Vt=Z.depthTexture;if(ct.__boundDepthTexture!==Vt){if(Vt!==null&&X.has(Vt)&&(Z.width!==Vt.image.width||Z.height!==Vt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");de.setupDepthRenderbuffer(Z)}}const Ot=Z.texture;(Ot.isData3DTexture||Ot.isDataArrayTexture||Ot.isCompressedArrayTexture)&&(vt=!0);const Ut=X.get(Z).__webglFramebuffer;Z.isWebGLCubeRenderTarget?(Array.isArray(Ut[ge])?Ce=Ut[ge][De]:Ce=Ut[ge],_e=!0):Z.samples>0&&de.useMultisampledRTT(Z)===!1?Ce=X.get(Z).__webglMultisampledFramebuffer:Array.isArray(Ut)?Ce=Ut[De]:Ce=Ut,ee.copy(Z.viewport),ie.copy(Z.scissor),he=Z.scissorTest}else ee.copy(be).multiplyScalar(Ee).floor(),ie.copy(Te).multiplyScalar(Ee).floor(),he=dt;if(De!==0&&(Ce=Da),pt.bindFramebuffer(ae.FRAMEBUFFER,Ce)&&pt.drawBuffers(Z,Ce),pt.viewport(ee),pt.scissor(ie),pt.setScissorTest(he),_e){const ct=X.get(Z.texture);ae.framebufferTexture2D(ae.FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_CUBE_MAP_POSITIVE_X+ge,ct.__webglTexture,De)}else if(vt){const ct=ge;for(let Ot=0;Ot<Z.textures.length;Ot++){const Ut=X.get(Z.textures[Ot]);ae.framebufferTextureLayer(ae.FRAMEBUFFER,ae.COLOR_ATTACHMENT0+Ot,Ut.__webglTexture,De,ct)}}else if(Z!==null&&De!==0){const ct=X.get(Z.texture);ae.framebufferTexture2D(ae.FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_2D,ct.__webglTexture,De)}ue=-1},this.readRenderTargetPixels=function(Z,ge,De,Ce,_e,vt,Ct,ct=0){if(!(Z&&Z.isWebGLRenderTarget)){Yt("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ot=X.get(Z).__webglFramebuffer;if(Z.isWebGLCubeRenderTarget&&Ct!==void 0&&(Ot=Ot[Ct]),Ot){pt.bindFramebuffer(ae.FRAMEBUFFER,Ot);try{const Ut=Z.textures[ct],Vt=Ut.format,It=Ut.type;if(!Lt.textureFormatReadable(Vt)){Yt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Lt.textureTypeReadable(It)){Yt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ge>=0&&ge<=Z.width-Ce&&De>=0&&De<=Z.height-_e&&(Z.textures.length>1&&ae.readBuffer(ae.COLOR_ATTACHMENT0+ct),ae.readPixels(ge,De,Ce,_e,qe.convert(Vt),qe.convert(It),vt))}finally{const Ut=q!==null?X.get(q).__webglFramebuffer:null;pt.bindFramebuffer(ae.FRAMEBUFFER,Ut)}}},this.readRenderTargetPixelsAsync=async function(Z,ge,De,Ce,_e,vt,Ct,ct=0){if(!(Z&&Z.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ot=X.get(Z).__webglFramebuffer;if(Z.isWebGLCubeRenderTarget&&Ct!==void 0&&(Ot=Ot[Ct]),Ot)if(ge>=0&&ge<=Z.width-Ce&&De>=0&&De<=Z.height-_e){pt.bindFramebuffer(ae.FRAMEBUFFER,Ot);const Ut=Z.textures[ct],Vt=Ut.format,It=Ut.type;if(!Lt.textureFormatReadable(Vt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Lt.textureTypeReadable(It))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const $t=ae.createBuffer();ae.bindBuffer(ae.PIXEL_PACK_BUFFER,$t),ae.bufferData(ae.PIXEL_PACK_BUFFER,vt.byteLength,ae.STREAM_READ),Z.textures.length>1&&ae.readBuffer(ae.COLOR_ATTACHMENT0+ct),ae.readPixels(ge,De,Ce,_e,qe.convert(Vt),qe.convert(It),0);const Pn=q!==null?X.get(q).__webglFramebuffer:null;pt.bindFramebuffer(ae.FRAMEBUFFER,Pn);const ri=ae.fenceSync(ae.SYNC_GPU_COMMANDS_COMPLETE,0);return ae.flush(),await mZ(ae,ri,4),ae.bindBuffer(ae.PIXEL_PACK_BUFFER,$t),ae.getBufferSubData(ae.PIXEL_PACK_BUFFER,0,vt),ae.deleteBuffer($t),ae.deleteSync(ri),vt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(Z,ge=null,De=0){const Ce=Math.pow(2,-De),_e=Math.floor(Z.image.width*Ce),vt=Math.floor(Z.image.height*Ce),Ct=ge!==null?ge.x:0,ct=ge!==null?ge.y:0;de.setTexture2D(Z,0),ae.copyTexSubImage2D(ae.TEXTURE_2D,De,0,0,Ct,ct,_e,vt),pt.unbindTexture()};const va=ae.createFramebuffer(),ss=ae.createFramebuffer();this.copyTextureToTexture=function(Z,ge,De=null,Ce=null,_e=0,vt=null){vt===null&&(_e!==0?(Sy("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),vt=_e,_e=0):vt=0);let Ct,ct,Ot,Ut,Vt,It,$t,Pn,ri;const Kt=Z.isCompressedTexture?Z.mipmaps[vt]:Z.image;if(De!==null)Ct=De.max.x-De.min.x,ct=De.max.y-De.min.y,Ot=De.isBox3?De.max.z-De.min.z:1,Ut=De.min.x,Vt=De.min.y,It=De.isBox3?De.min.z:0;else{const di=Math.pow(2,-_e);Ct=Math.floor(Kt.width*di),ct=Math.floor(Kt.height*di),Z.isDataArrayTexture?Ot=Kt.depth:Z.isData3DTexture?Ot=Math.floor(Kt.depth*di):Ot=1,Ut=0,Vt=0,It=0}Ce!==null?($t=Ce.x,Pn=Ce.y,ri=Ce.z):($t=0,Pn=0,ri=0);const on=qe.convert(ge.format),St=qe.convert(ge.type);let An;ge.isData3DTexture?(de.setTexture3D(ge,0),An=ae.TEXTURE_3D):ge.isDataArrayTexture||ge.isCompressedArrayTexture?(de.setTexture2DArray(ge,0),An=ae.TEXTURE_2D_ARRAY):(de.setTexture2D(ge,0),An=ae.TEXTURE_2D),ae.pixelStorei(ae.UNPACK_FLIP_Y_WEBGL,ge.flipY),ae.pixelStorei(ae.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ge.premultiplyAlpha),ae.pixelStorei(ae.UNPACK_ALIGNMENT,ge.unpackAlignment);const tn=ae.getParameter(ae.UNPACK_ROW_LENGTH),zi=ae.getParameter(ae.UNPACK_IMAGE_HEIGHT),Os=ae.getParameter(ae.UNPACK_SKIP_PIXELS),yi=ae.getParameter(ae.UNPACK_SKIP_ROWS),ta=ae.getParameter(ae.UNPACK_SKIP_IMAGES);ae.pixelStorei(ae.UNPACK_ROW_LENGTH,Kt.width),ae.pixelStorei(ae.UNPACK_IMAGE_HEIGHT,Kt.height),ae.pixelStorei(ae.UNPACK_SKIP_PIXELS,Ut),ae.pixelStorei(ae.UNPACK_SKIP_ROWS,Vt),ae.pixelStorei(ae.UNPACK_SKIP_IMAGES,It);const Zn=Z.isDataArrayTexture||Z.isData3DTexture,Ii=ge.isDataArrayTexture||ge.isData3DTexture;if(Z.isDepthTexture){const di=X.get(Z),or=X.get(ge),lr=X.get(di.__renderTarget),fl=X.get(or.__renderTarget);pt.bindFramebuffer(ae.READ_FRAMEBUFFER,lr.__webglFramebuffer),pt.bindFramebuffer(ae.DRAW_FRAMEBUFFER,fl.__webglFramebuffer);for(let La=0;La<Ot;La++)Zn&&(ae.framebufferTextureLayer(ae.READ_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,X.get(Z).__webglTexture,_e,It+La),ae.framebufferTextureLayer(ae.DRAW_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,X.get(ge).__webglTexture,vt,ri+La)),ae.blitFramebuffer(Ut,Vt,Ct,ct,$t,Pn,Ct,ct,ae.DEPTH_BUFFER_BIT,ae.NEAREST);pt.bindFramebuffer(ae.READ_FRAMEBUFFER,null),pt.bindFramebuffer(ae.DRAW_FRAMEBUFFER,null)}else if(_e!==0||Z.isRenderTargetTexture||X.has(Z)){const di=X.get(Z),or=X.get(ge);pt.bindFramebuffer(ae.READ_FRAMEBUFFER,va),pt.bindFramebuffer(ae.DRAW_FRAMEBUFFER,ss);for(let lr=0;lr<Ot;lr++)Zn?ae.framebufferTextureLayer(ae.READ_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,di.__webglTexture,_e,It+lr):ae.framebufferTexture2D(ae.READ_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_2D,di.__webglTexture,_e),Ii?ae.framebufferTextureLayer(ae.DRAW_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,or.__webglTexture,vt,ri+lr):ae.framebufferTexture2D(ae.DRAW_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_2D,or.__webglTexture,vt),_e!==0?ae.blitFramebuffer(Ut,Vt,Ct,ct,$t,Pn,Ct,ct,ae.COLOR_BUFFER_BIT,ae.NEAREST):Ii?ae.copyTexSubImage3D(An,vt,$t,Pn,ri+lr,Ut,Vt,Ct,ct):ae.copyTexSubImage2D(An,vt,$t,Pn,Ut,Vt,Ct,ct);pt.bindFramebuffer(ae.READ_FRAMEBUFFER,null),pt.bindFramebuffer(ae.DRAW_FRAMEBUFFER,null)}else Ii?Z.isDataTexture||Z.isData3DTexture?ae.texSubImage3D(An,vt,$t,Pn,ri,Ct,ct,Ot,on,St,Kt.data):ge.isCompressedArrayTexture?ae.compressedTexSubImage3D(An,vt,$t,Pn,ri,Ct,ct,Ot,on,Kt.data):ae.texSubImage3D(An,vt,$t,Pn,ri,Ct,ct,Ot,on,St,Kt):Z.isDataTexture?ae.texSubImage2D(ae.TEXTURE_2D,vt,$t,Pn,Ct,ct,on,St,Kt.data):Z.isCompressedTexture?ae.compressedTexSubImage2D(ae.TEXTURE_2D,vt,$t,Pn,Kt.width,Kt.height,on,Kt.data):ae.texSubImage2D(ae.TEXTURE_2D,vt,$t,Pn,Ct,ct,on,St,Kt);ae.pixelStorei(ae.UNPACK_ROW_LENGTH,tn),ae.pixelStorei(ae.UNPACK_IMAGE_HEIGHT,zi),ae.pixelStorei(ae.UNPACK_SKIP_PIXELS,Os),ae.pixelStorei(ae.UNPACK_SKIP_ROWS,yi),ae.pixelStorei(ae.UNPACK_SKIP_IMAGES,ta),vt===0&&ge.generateMipmaps&&ae.generateMipmap(An),pt.unbindTexture()},this.initRenderTarget=function(Z){X.get(Z).__webglFramebuffer===void 0&&de.setupRenderTarget(Z)},this.initTexture=function(Z){Z.isCubeTexture?de.setTextureCube(Z,0):Z.isData3DTexture?de.setTexture3D(Z,0):Z.isDataArrayTexture||Z.isCompressedArrayTexture?de.setTexture2DArray(Z,0):de.setTexture2D(Z,0),pt.unbindTexture()},this.resetState=function(){V=0,W=0,q=null,pt.reset(),et.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return tl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=qn._getDrawingBufferColorSpace(e),t.unpackColorSpace=qn._getUnpackColorSpace()}}const sae=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:_A,AddEquation:Rd,AddOperation:aj,AdditiveAnimationBlendMode:eD,AdditiveBlending:qP,AgXToneMapping:WO,AlphaFormat:QO,AlwaysCompare:vj,AlwaysDepth:cE,AlwaysStencilFunc:KP,AmbientLight:f8,AnimationAction:_8,AnimationClip:jb,AnimationLoader:rJ,AnimationMixer:OJ,AnimationObjectGroup:PJ,AnimationUtils:eJ,ArcCurve:Fj,ArrayCamera:g8,ArrowHelper:ree,AttachedBindMode:YP,Audio:v8,AudioAnalyser:xJ,AudioContext:MD,AudioListener:yJ,AudioLoader:mJ,AxesHelper:aee,BackSide:eo,BasicDepthPacking:cj,BasicShadowMap:z6,BatchedMesh:Nj,Bone:lD,BooleanKeyframeTrack:yg,Box2:jJ,Box3:es,Box3Helper:nee,BoxGeometry:vg,BoxHelper:tee,BufferAttribute:hi,BufferGeometry:gn,BufferGeometryLoader:m8,ByteType:XO,Cache:Lc,Camera:NA,CameraHelper:eee,CanvasTexture:wQ,CapsuleGeometry:zA,CatmullRomCurve3:zj,CineonToneMapping:HO,CircleGeometry:BA,ClampToEdgeWrapping:Oo,Clock:CD,Color:Dt,ColorKeyframeTrack:wD,ColorManagement:qn,CompressedArrayTexture:xQ,CompressedCubeTexture:SQ,CompressedTexture:FA,CompressedTextureLoader:aJ,ConeGeometry:Sx,ConstantAlphaFactor:nj,ConstantColorFactor:ej,Controls:oee,CubeCamera:Aj,CubeDepthTexture:kj,CubeReflectionMapping:qc,CubeRefractionMapping:Zd,CubeTexture:bx,CubeTextureLoader:sJ,CubeUVReflectionMapping:Wy,CubicBezierCurve:hD,CubicBezierCurve3:Bj,CubicInterpolant:i8,CullFaceBack:WP,CullFaceFront:F6,CullFaceFrontBack:TK,CullFaceNone:U6,Curve:ju,CurvePath:jj,CustomBlending:B6,CustomToneMapping:GO,CylinderGeometry:xx,Cylindrical:VJ,Data3DTexture:PA,DataArrayTexture:RA,DataTexture:Du,DataTextureLoader:oJ,DataUtils:qZ,DecrementStencilOp:HK,DecrementWrapStencilOp:WK,DefaultLoadingManager:s8,DepthFormat:Xc,DepthStencilFormat:Fd,DepthTexture:My,DetachedBindMode:sj,DirectionalLight:c8,DirectionalLightHelper:JJ,DiscreteInterpolant:r8,DodecahedronGeometry:VA,DoubleSide:Pc,DstAlphaFactor:Y6,DstColorFactor:Z6,DynamicCopyUsage:sZ,DynamicDrawUsage:eZ,DynamicReadUsage:iZ,EdgesGeometry:Uj,EllipseCurve:jA,EqualCompare:pj,EqualDepth:hE,EqualStencilFunc:YK,EquirectangularReflectionMapping:Mb,EquirectangularRefractionMapping:Cb,Euler:ll,EventDispatcher:af,ExternalTexture:cD,ExtrudeGeometry:HA,FileLoader:Yc,Float16BufferAttribute:JZ,Float32BufferAttribute:zt,FloatType:Zs,Fog:DA,FogExp2:OA,FramebufferTexture:bQ,FrontSide:lh,Frustum:qy,FrustumArray:UA,GLBufferAttribute:FJ,GLSL1:lZ,GLSL3:ZP,GreaterCompare:mj,GreaterDepth:pE,GreaterEqualCompare:IA,GreaterEqualDepth:dE,GreaterEqualStencilFunc:JK,GreaterStencilFunc:ZK,GridHelper:ZJ,Group:ry,HalfFloatType:$c,HemisphereLight:o8,HemisphereLightHelper:KJ,IcosahedronGeometry:GA,ImageBitmapLoader:pJ,ImageLoader:Hb,ImageUtils:Sj,IncrementStencilOp:jK,IncrementWrapStencilOp:GK,InstancedBufferAttribute:Ay,InstancedBufferGeometry:p8,InstancedInterleavedBuffer:UJ,InstancedMesh:Pj,Int16BufferAttribute:ZZ,Int32BufferAttribute:QZ,Int8BufferAttribute:XZ,IntType:xA,InterleavedBuffer:LA,InterleavedBufferAttribute:Zm,Interpolant:Tx,InterpolateDiscrete:Pb,InterpolateLinear:XE,InterpolateSmooth:zw,InterpolationSamplingMode:fZ,InterpolationSamplingType:cZ,InvertStencilOp:qK,KeepStencilOp:_m,KeyframeTrack:Jl,LOD:Ij,LatheGeometry:WA,Layers:Ey,LessCompare:dj,LessDepth:fE,LessEqualCompare:CA,LessEqualDepth:Ym,LessEqualStencilFunc:KK,LessStencilFunc:XK,Light:dp,LightProbe:d8,Line:ep,Line3:WJ,LineBasicMaterial:no,LineCurve:dD,LineCurve3:Vj,LineDashedMaterial:t8,LineLoop:Oj,LineSegments:sf,LinearFilter:Ki,LinearInterpolant:SD,LinearMipMapLinearFilter:IK,LinearMipMapNearestFilter:CK,LinearMipmapLinearFilter:Dc,LinearMipmapNearestFilter:lb,LinearSRGBColorSpace:Qd,LinearToneMapping:VO,LinearTransfer:Ob,Loader:io,LoaderUtils:nN,LoadingManager:ED,LoopOnce:oj,LoopPingPong:uj,LoopRepeat:lj,MOUSE:vm,Material:Ps,MaterialLoader:QA,MathUtils:xj,Matrix2:ND,Matrix3:Tn,Matrix4:pn,MaxEquation:G6,Mesh:Zr,MeshBasicMaterial:fp,MeshDepthMaterial:_D,MeshDistanceMaterial:bD,MeshLambertMaterial:Jj,MeshMatcapMaterial:e8,MeshNormalMaterial:Qj,MeshPhongMaterial:Kj,MeshPhysicalMaterial:Yj,MeshStandardMaterial:yD,MeshToonMaterial:Zj,MinEquation:H6,MirroredRepeatWrapping:Rb,MixOperation:rj,MultiplyBlending:XP,MultiplyOperation:yx,NearestFilter:Ur,NearestMipMapLinearFilter:MK,NearestMipMapNearestFilter:AK,NearestMipmapLinearFilter:ny,NearestMipmapNearestFilter:$O,NeutralToneMapping:qO,NeverCompare:hj,NeverDepth:uE,NeverStencilFunc:$K,NoBlending:zc,NoColorSpace:Kf,NoNormalPacking:UK,NoToneMapping:$l,NormalAnimationBlendMode:MA,NormalBlending:Fm,NormalGAPacking:zK,NormalRGPacking:FK,NotEqualCompare:gj,NotEqualDepth:mE,NotEqualStencilFunc:QK,NumberKeyframeTrack:Bb,Object3D:ni,ObjectLoader:hJ,ObjectSpaceNormalMap:fj,OctahedronGeometry:wx,OneFactor:q6,OneMinusConstantAlphaFactor:ij,OneMinusConstantColorFactor:tj,OneMinusDstAlphaFactor:K6,OneMinusDstColorFactor:Q6,OneMinusSrcAlphaFactor:lE,OneMinusSrcColorFactor:X6,OrthographicCamera:ah,PCFShadowMap:ly,PCFSoftShadowMap:ob,PMREMGenerator:sN,Path:QE,PerspectiveCamera:kr,Plane:Xf,PlaneGeometry:$y,PlaneHelper:iee,PointLight:u8,PointLightHelper:XJ,Points:Dj,PointsMaterial:uD,PolarGridHelper:QJ,PolyhedronGeometry:hp,PositionalAudio:bJ,PropertyBinding:ti,PropertyMixer:y8,QuadraticBezierCurve:pD,QuadraticBezierCurve3:mD,Quaternion:Cs,QuaternionKeyframeTrack:Ax,QuaternionLinearInterpolant:a8,R11_EAC_Format:wE,RED_GREEN_RGTC2_Format:qE,RED_RGTC1_Format:GE,REVISION:yA,RG11_EAC_Format:TE,RGBADepthPacking:DK,RGBAFormat:Ms,RGBAIntegerFormat:AA,RGBA_ASTC_10x10_Format:FE,RGBA_ASTC_10x5_Format:LE,RGBA_ASTC_10x6_Format:kE,RGBA_ASTC_10x8_Format:UE,RGBA_ASTC_12x10_Format:zE,RGBA_ASTC_12x12_Format:BE,RGBA_ASTC_4x4_Format:ME,RGBA_ASTC_5x4_Format:CE,RGBA_ASTC_5x5_Format:IE,RGBA_ASTC_6x5_Format:RE,RGBA_ASTC_6x6_Format:PE,RGBA_ASTC_8x5_Format:NE,RGBA_ASTC_8x6_Format:OE,RGBA_ASTC_8x8_Format:DE,RGBA_BPTC_Format:VE,RGBA_ETC2_EAC_Format:SE,RGBA_PVRTC_2BPPV1_Format:_E,RGBA_PVRTC_4BPPV1_Format:yE,RGBA_S3TC_DXT1_Format:cb,RGBA_S3TC_DXT3_Format:fb,RGBA_S3TC_DXT5_Format:hb,RGBDepthPacking:LK,RGBFormat:JO,RGBIntegerFormat:RK,RGB_BPTC_SIGNED_Format:jE,RGB_BPTC_UNSIGNED_Format:HE,RGB_ETC1_Format:bE,RGB_ETC2_Format:xE,RGB_PVRTC_2BPPV1_Format:vE,RGB_PVRTC_4BPPV1_Format:gE,RGB_S3TC_DXT1_Format:ub,RGDepthPacking:kK,RGFormat:Km,RGIntegerFormat:TA,RawShaderMaterial:vD,Ray:gg,Raycaster:b8,RectAreaLight:h8,RedFormat:EA,RedIntegerFormat:_x,ReinhardToneMapping:jO,RenderTarget:nD,RenderTarget3D:DJ,RepeatWrapping:Ib,ReplaceStencilOp:VK,ReverseSubtractEquation:j6,RingGeometry:qA,SIGNED_R11_EAC_Format:EE,SIGNED_RED_GREEN_RGTC2_Format:$E,SIGNED_RED_RGTC1_Format:WE,SIGNED_RG11_EAC_Format:AE,SRGBColorSpace:Za,SRGBTransfer:gi,Scene:sD,ShaderChunk:On,ShaderLib:Cu,ShaderMaterial:Yl,ShadowMaterial:Xj,Shape:Bm,ShapeGeometry:$A,ShapePath:see,ShapeUtils:Nu,ShortType:YO,Skeleton:kA,SkeletonHelper:$J,SkinnedMesh:Rj,Source:zd,Sphere:Ca,SphereGeometry:Ex,Spherical:rN,SphericalHarmonics3:AD,SplineCurve:gD,SpotLight:l8,SpotLightHelper:qJ,Sprite:Cj,SpriteMaterial:oD,SrcAlphaFactor:oE,SrcAlphaSaturateFactor:J6,SrcColorFactor:$6,StaticCopyUsage:aZ,StaticDrawUsage:Db,StaticReadUsage:nZ,StereoCamera:gJ,StreamCopyUsage:oZ,StreamDrawUsage:tZ,StreamReadUsage:rZ,StringKeyframeTrack:_g,SubtractEquation:V6,SubtractiveBlending:$P,TOUCH:ym,TangentSpaceNormalMap:cp,TetrahedronGeometry:XA,Texture:Er,TextureLoader:lJ,TextureUtils:hee,Timer:zJ,TimestampQuery:uZ,TorusGeometry:YA,TorusKnotGeometry:KA,Triangle:Po,TriangleFanDrawMode:OK,TriangleStripDrawMode:NK,TrianglesDrawMode:PK,TubeGeometry:ZA,UVMapping:bA,Uint16BufferAttribute:iD,Uint32BufferAttribute:rD,Uint8BufferAttribute:YZ,Uint8ClampedBufferAttribute:KZ,Uniform:PD,UniformsGroup:kJ,UniformsLib:Rt,UniformsUtils:Tj,UnsignedByteType:Ys,UnsignedInt101111Type:ZO,UnsignedInt248Type:by,UnsignedInt5999Type:KO,UnsignedIntType:Xl,UnsignedShort4444Type:SA,UnsignedShort5551Type:wA,UnsignedShortType:_y,VSMShadowMap:Mm,Vector2:tt,Vector3:re,Vector4:Ni,VectorKeyframeTrack:Vb,VideoFrameTexture:_Q,VideoTexture:Lj,WebGL3DRenderTarget:kZ,WebGLArrayRenderTarget:LZ,WebGLCoordinateSystem:tl,WebGLCubeRenderTarget:aD,WebGLRenderTarget:sl,WebGLRenderer:C8,WebGLUtils:M8,WebGPUCoordinateSystem:xy,WebXRController:Bw,WireframeGeometry:$j,WrapAroundEnding:Nb,ZeroCurvatureEnding:Cm,ZeroFactor:W6,ZeroSlopeEnding:Im,ZeroStencilOp:BK,createCanvasElement:bj,error:Yt,getConsoleFunction:pZ,log:kb,setConsoleFunction:dZ,warn:Mt,warnOnce:Sy},Symbol.toStringTag,{value:"Module"}));var zI={exports:{}},BI={},VI={exports:{}},jI={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H4;function oae(){if(H4)return jI;H4=1;var n=Hy();function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,a=n.useLayoutEffect,s=n.useDebugValue;function l(g,v){var _=v(),x=i({inst:{value:_,getSnapshot:v}}),T=x[0].inst,S=x[1];return a(function(){T.value=_,T.getSnapshot=v,c(T)&&S({inst:T})},[g,_,v]),r(function(){return c(T)&&S({inst:T}),g(function(){c(T)&&S({inst:T})})},[g]),s(_),_}function c(g){var v=g.getSnapshot;g=g.value;try{var _=v();return!t(g,_)}catch{return!0}}function f(g,v){return v()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return jI.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,jI}var G4;function lae(){return G4||(G4=1,VI.exports=oae()),VI.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W4;function uae(){if(W4)return BI;W4=1;var n=Hy(),e=lae();function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var i=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,a=n.useRef,s=n.useEffect,l=n.useMemo,c=n.useDebugValue;return BI.useSyncExternalStoreWithSelector=function(f,p,g,v,_){var x=a(null);if(x.current===null){var T={hasValue:!1,value:null};x.current=T}else T=x.current;x=l(function(){function w(z){if(!I){if(I=!0,R=z,z=v(z),_!==void 0&&T.hasValue){var k=T.value;if(_(k,z))return D=k}return D=z}if(k=D,i(R,z))return k;var F=v(z);return _!==void 0&&_(k,F)?(R=z,k):(R=z,D=F)}var I=!1,R,D,B=g===void 0?null:g;return[function(){return w(p())},B===null?void 0:function(){return w(B())}]},[p,g,v,_]);var S=r(f,x[0],x[1]);return s(function(){T.hasValue=!0,T.value=S},[S]),c(S),S},BI}var q4;function cae(){return q4||(q4=1,zI.exports=uae()),zI.exports}var I8=cae();const fae=Vu(I8),$4=n=>{let e;const t=new Set,i=(f,p)=>{const g=typeof f=="function"?f(e):f;if(!Object.is(g,e)){const v=e;e=p??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(_=>_(e,v))}},r=()=>e,l={setState:i,getState:r,getInitialState:()=>c,subscribe:f=>(t.add(f),()=>t.delete(f))},c=e=n(i,r,l);return l},hae=(n=>n?$4(n):$4),{useSyncExternalStoreWithSelector:dae}=fae,pae=n=>n;function mae(n,e=pae,t){const i=dae(n.subscribe,n.getState,n.getInitialState,e,t);return dg.useDebugValue(i),i}const X4=(n,e)=>{const t=hae(n),i=(r,a=e)=>mae(t,r,a);return Object.assign(i,t),i},gae=((n,e)=>n?X4(n,e):X4),vae=n=>typeof n=="object"&&typeof n.then=="function",Pm=[];function R8(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function P8(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const a of Pm)if(R8(e,a.keys,a.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return i.lifespan&&i.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,i.lifespan)),a.response;if(!t)throw a.promise}const r={keys:e,equal:i.equal,remove:()=>{const a=Pm.indexOf(r);a!==-1&&Pm.splice(a,1)},promise:(vae(n)?n:n(...e)).then(a=>{r.response=a,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(a=>r.error=a)};if(Pm.push(r),!t)throw r.promise}const yae=(n,e,t)=>P8(n,e,!1,t),_ae=(n,e,t)=>void P8(n,e,!0,t),bae=n=>{if(n===void 0||n.length===0)Pm.splice(0,Pm.length);else{const e=Pm.find(t=>R8(n,t.keys,t.equal));e&&e.remove()}};var uN=S6();const xae=Vu(uN);function OD(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=OD(i,e,t);if(r)return r;i=e?null:i.sibling}}function N8(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const DD=N8(H.createContext(null));class O8 extends H.Component{render(){return H.createElement(DD.Provider,{value:this._reactInternals},this.props.children)}}function D8(){const n=H.useContext(DD);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=H.useId();return H.useMemo(()=>{for(const t of[n,n==null?void 0:n.alternate]){if(!t)continue;const i=OD(t,!1,r=>{let a=r.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[n,e])}const Sae=Symbol.for("react.context"),wae=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===Sae;function Eae(){const n=D8(),[e]=H.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;wae(i)&&i!==DD&&!e.has(i)&&e.set(i,H.use(N8(i))),t=t.return}return e}function Tae(){const n=Eae();return H.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>H.createElement(e,null,H.createElement(t.Provider,{...i,value:n.get(t)})),e=>H.createElement(O8,{...e})),[n])}function L8(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const k8=n=>n&&n.isOrthographicCamera,Aae=n=>n&&n.hasOwnProperty("current"),Mae=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),Mx=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?H.useLayoutEffect:H.useEffect;function U8(n){const e=H.useRef(n);return Mx(()=>void(e.current=n),[n]),e}function Cae(){const n=D8(),e=Tae();return H.useMemo(()=>({children:t})=>{const r=!!OD(n,!0,a=>a.type===H.StrictMode)?H.StrictMode:H.Fragment;return O.jsx(r,{children:O.jsx(e,{children:t})})},[n,e])}function Iae({set:n}){return Mx(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const Rae=(n=>(n=class extends H.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function F8(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function Vv(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const ir={obj:n=>n===Object(n)&&!ir.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(ir.str(n)||ir.num(n)||ir.boo(n))return n===e;const a=ir.obj(n);if(a&&i==="reference")return n===e;const s=ir.arr(n);if(s&&t==="reference")return n===e;if((s||a)&&n===e)return!0;let l;for(l in n)if(!(l in e))return!1;if(a&&t==="shallow"&&i==="shallow"){for(l in r?e:n)if(!ir.equ(n[l],e[l],{strict:r,objects:"reference"}))return!1}else for(l in r?e:n)if(n[l]!==e[l])return!1;if(ir.und(l)){if(s&&n.length===0&&e.length===0||a&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Pae(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function Nae(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const z8=["children","key","ref"];function Oae(n){const e={};for(const t in n)z8.includes(t)||(e[t]=n[t]);return e}function JE(n,e,t,i){const r=n;let a=r==null?void 0:r.__r3f;return a||(a={root:e,type:t,parent:null,children:[],props:Oae(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=a)),a}function Gb(n,e){if(!e.includes("-"))return{root:n,key:e,target:n[e]};if(e in n)return{root:n,key:e,target:n[e]};let t=n;const i=e.split("-");for(const r of i){if(typeof t!="object"||t===null){if(t!==void 0){const a=i.slice(i.indexOf(r)).join("-");return{root:t,key:a,target:void 0}}return{root:n,key:e,target:void 0}}e=r,n=t,t=t[e]}return{root:n,key:e,target:t}}const Y4=/-\d+$/;function eT(n,e){if(ir.str(e.props.attach)){if(Y4.test(e.props.attach)){const r=e.props.attach.replace(Y4,""),{root:a,key:s}=Gb(n.object,r);Array.isArray(a[s])||(a[s]=[])}const{root:t,key:i}=Gb(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else ir.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function tT(n,e){if(ir.str(e.props.attach)){const{root:t,key:i}=Gb(n.object,e.props.attach),r=e.previousAttach;r===void 0?delete t[i]:t[i]=r}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const cN=[...z8,"args","dispose","attach","object","onUpdate","dispose"],K4=new Map;function Dae(n){let e=K4.get(n.constructor);try{e||(e=new n.constructor,K4.set(n.constructor,e))}catch{}return e}function Lae(n,e){const t={};for(const i in e)if(!cN.includes(i)&&!ir.equ(e[i],n.props[i])){t[i]=e[i];for(const r in e)r.startsWith(`${i}-`)&&(t[r]=e[r])}for(const i in n.props){if(cN.includes(i)||e.hasOwnProperty(i))continue;const{root:r,key:a}=Gb(n.object,i);if(r.constructor&&r.constructor.length===0){const s=Dae(r);ir.und(s)||(t[a]=s[a])}else t[a]=0}return t}const kae=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Uae=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Pd(n,e){var t;const i=n.__r3f,r=i&&L8(i).getState(),a=i==null?void 0:i.eventCount;for(const l in e){let c=e[l];if(cN.includes(l))continue;if(i&&Uae.test(l)){typeof c=="function"?i.handlers[l]=c:delete i.handlers[l],i.eventCount=Object.keys(i.handlers).length;continue}if(c===void 0)continue;let{root:f,key:p,target:g}=Gb(n,l);if(g===void 0&&(typeof f!="object"||f===null))throw Error(`R3F: Cannot set "${l}". Ensure it is an object before setting "${p}".`);if(g instanceof Ey&&c instanceof Ey)g.mask=c.mask;else if(g instanceof Dt&&Mae(c))g.set(c);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof g.copy=="function"&&c!=null&&c.constructor&&g.constructor===c.constructor)g.copy(c);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&Array.isArray(c))typeof g.fromArray=="function"?g.fromArray(c):g.set(...c);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof c=="number")typeof g.setScalar=="function"?g.setScalar(c):g.set(c);else{var s;f[p]=c,r&&!r.linear&&kae.includes(p)&&(s=f[p])!=null&&s.isTexture&&f[p].format===Ms&&f[p].type===Ys&&(f[p].colorSpace=Za)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(t=i.object)!=null&&t.isObject3D&&a!==i.eventCount){const l=i.object,c=r.internal.interaction.indexOf(l);c>-1&&r.internal.interaction.splice(c,1),i.eventCount&&l.raycast!==null&&r.internal.interaction.push(l)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&Yy(i),n}function Yy(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function Fae(n,e){n.manual||(k8(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const Xs=n=>n==null?void 0:n.isObject3D;function cw(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function B8(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function zae(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{B8(t.capturedMap,e,i,r)})}function Bae(n){function e(c){const{internal:f}=n.getState(),p=c.offsetX-f.initialClick[0],g=c.offsetY-f.initialClick[1];return Math.round(Math.sqrt(p*p+g*g))}function t(c){return c.filter(f=>["Move","Over","Enter","Out","Leave"].some(p=>{var g;return(g=f.__r3f)==null?void 0:g.handlers["onPointer"+p]}))}function i(c,f){const p=n.getState(),g=new Set,v=[],_=f?f(p.internal.interaction):p.internal.interaction;for(let w=0;w<_.length;w++){const I=Vv(_[w]);I&&(I.raycaster.camera=void 0)}p.previousRoot||p.events.compute==null||p.events.compute(c,p);function x(w){const I=Vv(w);if(!I||!I.events.enabled||I.raycaster.camera===null)return[];if(I.raycaster.camera===void 0){var R;I.events.compute==null||I.events.compute(c,I,(R=I.previousRoot)==null?void 0:R.getState()),I.raycaster.camera===void 0&&(I.raycaster.camera=null)}return I.raycaster.camera?I.raycaster.intersectObject(w,!0):[]}let T=_.flatMap(x).sort((w,I)=>{const R=Vv(w.object),D=Vv(I.object);return!R||!D?w.distance-I.distance:D.events.priority-R.events.priority||w.distance-I.distance}).filter(w=>{const I=cw(w);return g.has(I)?!1:(g.add(I),!0)});p.events.filter&&(T=p.events.filter(T,p));for(const w of T){let I=w.object;for(;I;){var S;(S=I.__r3f)!=null&&S.eventCount&&v.push({...w,eventObject:I}),I=I.parent}}if("pointerId"in c&&p.internal.capturedMap.has(c.pointerId))for(let w of p.internal.capturedMap.get(c.pointerId).values())g.has(cw(w.intersection))||v.push(w.intersection);return v}function r(c,f,p,g){if(c.length){const v={stopped:!1};for(const _ of c){let x=Vv(_.object);if(x||_.object.traverseAncestors(T=>{const S=Vv(T);if(S)return x=S,!1}),x){const{raycaster:T,pointer:S,camera:w,internal:I}=x,R=new re(S.x,S.y,0).unproject(w),D=P=>{var L,V;return(L=(V=I.capturedMap.get(P))==null?void 0:V.has(_.eventObject))!=null?L:!1},B=P=>{const L={intersection:_,target:f.target};I.capturedMap.has(P)?I.capturedMap.get(P).set(_.eventObject,L):I.capturedMap.set(P,new Map([[_.eventObject,L]])),f.target.setPointerCapture(P)},z=P=>{const L=I.capturedMap.get(P);L&&B8(I.capturedMap,_.eventObject,L,P)};let k={};for(let P in f){let L=f[P];typeof L!="function"&&(k[P]=L)}let F={..._,...k,pointer:S,intersections:c,stopped:v.stopped,delta:p,unprojectedPoint:R,ray:T.ray,camera:w,stopPropagation(){const P="pointerId"in f&&I.capturedMap.get(f.pointerId);if((!P||P.has(_.eventObject))&&(F.stopped=v.stopped=!0,I.hovered.size&&Array.from(I.hovered.values()).find(L=>L.eventObject===_.eventObject))){const L=c.slice(0,c.indexOf(_));a([...L,_])}},target:{hasPointerCapture:D,setPointerCapture:B,releasePointerCapture:z},currentTarget:{hasPointerCapture:D,setPointerCapture:B,releasePointerCapture:z},nativeEvent:f};if(g(F),v.stopped===!0)break}}}return c}function a(c){const{internal:f}=n.getState();for(const p of f.hovered.values())if(!c.length||!c.find(g=>g.object===p.object&&g.index===p.index&&g.instanceId===p.instanceId)){const v=p.eventObject.__r3f;if(f.hovered.delete(cw(p)),v!=null&&v.eventCount){const _=v.handlers,x={...p,intersections:c};_.onPointerOut==null||_.onPointerOut(x),_.onPointerLeave==null||_.onPointerLeave(x)}}}function s(c,f){for(let p=0;p<f.length;p++){const g=f[p].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(c)}}function l(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return f=>{const{internal:p}=n.getState();"pointerId"in f&&p.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{p.capturedMap.has(f.pointerId)&&(p.capturedMap.delete(f.pointerId),a([]))})}}return function(p){const{onPointerMissed:g,internal:v}=n.getState();v.lastEvent.current=p;const _=c==="onPointerMove",x=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",S=i(p,_?t:void 0),w=x?e(p):0;c==="onPointerDown"&&(v.initialClick=[p.offsetX,p.offsetY],v.initialHits=S.map(R=>R.eventObject)),x&&!S.length&&w<=2&&(s(p,v.interaction),g&&g(p)),_&&a(S);function I(R){const D=R.eventObject,B=D.__r3f;if(!(B!=null&&B.eventCount))return;const z=B.handlers;if(_){if(z.onPointerOver||z.onPointerEnter||z.onPointerOut||z.onPointerLeave){const k=cw(R),F=v.hovered.get(k);F?F.stopped&&R.stopPropagation():(v.hovered.set(k,R),z.onPointerOver==null||z.onPointerOver(R),z.onPointerEnter==null||z.onPointerEnter(R))}z.onPointerMove==null||z.onPointerMove(R)}else{const k=z[c];k?(!x||v.initialHits.includes(D))&&(s(p,v.interaction.filter(F=>!v.initialHits.includes(F))),k(R)):x&&v.initialHits.includes(D)&&s(p,v.interaction.filter(F=>!v.initialHits.includes(F)))}}r(S,p,w,I)}}return{handlePointer:l}}const Z4=n=>!!(n!=null&&n.render),V8=H.createContext(null),Vae=(n,e)=>{const t=gae((l,c)=>{const f=new re,p=new re,g=new re;function v(w=c().camera,I=p,R=c().size){const{width:D,height:B,top:z,left:k}=R,F=D/B;I.isVector3?g.copy(I):g.set(...I);const P=w.getWorldPosition(f).distanceTo(g);if(k8(w))return{width:D/w.zoom,height:B/w.zoom,top:z,left:k,factor:1,distance:P,aspect:F};{const L=w.fov*Math.PI/180,V=2*Math.tan(L/2)*P,W=V*(D/B);return{width:W,height:V,top:z,left:k,factor:D/W,distance:P,aspect:F}}}let _;const x=w=>l(I=>({performance:{...I.performance,current:w}})),T=new tt;return{set:l,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(w=1)=>n(c(),w),advance:(w,I)=>e(w,I,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new CD,pointer:T,mouse:T,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const w=c();_&&clearTimeout(_),w.performance.current!==w.performance.min&&x(w.performance.min),_=setTimeout(()=>x(c().performance.max),w.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:w=>l(I=>({...I,events:{...I.events,...w}})),setSize:(w,I,R=0,D=0)=>{const B=c().camera,z={width:w,height:I,top:R,left:D};l(k=>({size:z,viewport:{...k.viewport,...v(B,p,z)}}))},setDpr:w=>l(I=>{const R=F8(w);return{viewport:{...I.viewport,dpr:R,initialDpr:I.viewport.initialDpr||R}}}),setFrameloop:(w="always")=>{const I=c().clock;I.stop(),I.elapsedTime=0,w!=="never"&&(I.start(),I.elapsedTime=0),l(()=>({frameloop:w}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:H.createRef(),active:!1,frames:0,priority:0,subscribe:(w,I,R)=>{const D=c().internal;return D.priority=D.priority+(I>0?1:0),D.subscribers.push({ref:w,priority:I,store:R}),D.subscribers=D.subscribers.sort((B,z)=>B.priority-z.priority),()=>{const B=c().internal;B!=null&&B.subscribers&&(B.priority=B.priority-(I>0?1:0),B.subscribers=B.subscribers.filter(z=>z.ref!==w))}}}}}),i=t.getState();let r=i.size,a=i.viewport.dpr,s=i.camera;return t.subscribe(()=>{const{camera:l,size:c,viewport:f,gl:p,set:g}=t.getState();if(c.width!==r.width||c.height!==r.height||f.dpr!==a){r=c,a=f.dpr,Fae(l,c),f.dpr>0&&p.setPixelRatio(f.dpr);const v=typeof HTMLCanvasElement<"u"&&p.domElement instanceof HTMLCanvasElement;p.setSize(c.width,c.height,v)}l!==s&&(s=l,g(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>n(l)),t};function j8(){const n=H.useContext(V8);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Ed(n=t=>t,e){return j8()(n,e)}function LD(n,e=0){const t=j8(),i=t.getState().internal.subscribe,r=U8(n);return Mx(()=>i(r,e,t),[e,i,t]),null}const Q4=new WeakMap,jae=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function H8(n,e){return function(t,...i){let r;return jae(t)?(r=Q4.get(t),r||(r=new t,Q4.set(t,r))):r=t,n&&n(r),Promise.all(i.map(a=>new Promise((s,l)=>r.load(a,c=>{Xs(c==null?void 0:c.scene)&&Object.assign(c,Pae(c.scene)),s(c)},e,c=>l(new Error(`Could not load ${a}: ${c==null?void 0:c.message}`))))))}}function kD(n,e,t,i){const r=Array.isArray(e)?e:[e],a=yae(H8(t,i),[n,...r],{equal:ir.equ});return Array.isArray(e)?a:a[0]}kD.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return _ae(H8(t),[n,...i])};kD.clear=function(n,e){const t=Array.isArray(e)?e:[e];return bae([n,...t])};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */const Hae=1,Gae=8,Wae=32,qae=2;var $ae={version:"9.5.0"};function Xae(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var J4={exports:{}},eF={exports:{}},tF;function Yae(){return tF||(tF=1,(function(n){n.exports=function(e){function t(h,d,b,A){return new T0(h,d,b,A)}function i(){}function r(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)d+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(h){var d=h,b=h;if(h.alternate)for(;d.return;)d=d.return;else{h=d;do d=h,(d.flags&4098)!==0&&(b=d.return),h=d.return;while(h)}return d.tag===3?b:null}function s(h){if(a(h)!==h)throw Error(r(188))}function l(h){var d=h.alternate;if(!d){if(d=a(h),d===null)throw Error(r(188));return d!==h?null:h}for(var b=h,A=d;;){var N=b.return;if(N===null)break;var U=N.alternate;if(U===null){if(A=N.return,A!==null){b=A;continue}break}if(N.child===U.child){for(U=N.child;U;){if(U===b)return s(N),h;if(U===A)return s(N),d;U=U.sibling}throw Error(r(188))}if(b.return!==A.return)b=N,A=U;else{for(var K=!1,fe=N.child;fe;){if(fe===b){K=!0,b=N,A=U;break}if(fe===A){K=!0,A=N,b=U;break}fe=fe.sibling}if(!K){for(fe=U.child;fe;){if(fe===b){K=!0,b=U,A=N;break}if(fe===A){K=!0,A=U,b=N;break}fe=fe.sibling}if(!K)throw Error(r(189))}}if(b.alternate!==A)throw Error(r(190))}if(b.tag!==3)throw Error(r(188));return b.stateNode.current===b?h:d}function c(h){var d=h.tag;if(d===5||d===26||d===27||d===6)return h;for(h=h.child;h!==null;){if(d=c(h),d!==null)return d;h=h.sibling}return null}function f(h){var d=h.tag;if(d===5||d===26||d===27||d===6)return h;for(h=h.child;h!==null;){if(h.tag!==4&&(d=f(h),d!==null))return d;h=h.sibling}return null}function p(h){return h===null||typeof h!="object"?null:(h=mu&&h[mu]||h["@@iterator"],typeof h=="function"?h:null)}function g(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===oc?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case wf:return"Fragment";case Tf:return"Profiler";case Ef:return"StrictMode";case jg:return"Suspense";case pu:return"SuspenseList";case Up:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case Sf:return"Portal";case go:return h.displayName||"Context";case kp:return(h._context.displayName||"Context")+".Consumer";case Xh:var d=h.render;return h=h.displayName,h||(h=d.displayName||d.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case Hg:return d=h.displayName||null,d!==null?d:g(h.type)||"Memo";case Ba:d=h._payload,h=h._init;try{return g(h(d))}catch{}}return null}function v(h){return{current:h}}function _(h){0>Rf||(h.current=nv[Rf],nv[Rf]=null,Rf--)}function x(h,d){Rf++,nv[Rf]=h.current,h.current=d}function T(h){return h>>>=0,h===0?32:31-(iv(h)/JS|0)|0}function S(h){var d=h&42;if(d!==0)return d;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return h&261888;case 262144:case 524288:case 1048576:case 2097152:return h&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function w(h,d,b){var A=h.pendingLanes;if(A===0)return 0;var N=0,U=h.suspendedLanes,K=h.pingedLanes;h=h.warmLanes;var fe=A&134217727;return fe!==0?(A=fe&~U,A!==0?N=S(A):(K&=fe,K!==0?N=S(K):b||(b=fe&~h,b!==0&&(N=S(b))))):(fe=A&~U,fe!==0?N=S(fe):K!==0?N=S(K):b||(b=A&~h,b!==0&&(N=S(b)))),N===0?0:d!==0&&d!==N&&(d&U)===0&&(U=N&-N,b=d&-d,U>=b||U===32&&(b&4194048)!==0)?d:N}function I(h,d){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&d)===0}function R(h,d){switch(h){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function D(){var h=td;return td<<=1,(td&62914560)===0&&(td=4194304),h}function B(h){for(var d=[],b=0;31>b;b++)d.push(h);return d}function z(h,d){h.pendingLanes|=d,d!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function k(h,d,b,A,N,U){var K=h.pendingLanes;h.pendingLanes=b,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=b,h.entangledLanes&=b,h.errorRecoveryDisabledLanes&=b,h.shellSuspendCounter=0;var fe=h.entanglements,ze=h.expirationTimes,st=h.hiddenUpdates;for(b=K&~b;0<b;){var _t=31-ds(b),mt=1<<_t;fe[_t]=0,ze[_t]=-1;var Nt=st[_t];if(Nt!==null)for(st[_t]=null,_t=0;_t<Nt.length;_t++){var yn=Nt[_t];yn!==null&&(yn.lane&=-536870913)}b&=~mt}A!==0&&F(h,A,0),U!==0&&N===0&&h.tag!==0&&(h.suspendedLanes|=U&~(K&~d))}function F(h,d,b){h.pendingLanes|=d,h.suspendedLanes&=~d;var A=31-ds(d);h.entangledLanes|=d,h.entanglements[A]=h.entanglements[A]|1073741824|b&261930}function P(h,d){var b=h.entangledLanes|=d;for(h=h.entanglements;b;){var A=31-ds(b),N=1<<A;N&d|h[A]&d&&(h[A]|=d),b&=~N}}function L(h,d){var b=d&-d;return b=(b&42)!==0?1:V(b),(b&(h.suspendedLanes|d))!==0?0:b}function V(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function W(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function q(h){if(typeof c_=="function"&&n1(h),ps&&typeof ps.setStrictMode=="function")try{ps.setStrictMode(Nf,h)}catch{}}function ue(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}function le(h){if(uv===void 0)try{throw Error()}catch(b){var d=b.stack.trim().match(/\n( *(at )?)/);uv=d&&d[1]||"",Pl=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+uv+h+Pl}function ee(h,d){if(!h||qp)return"";qp=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var A={DetermineComponentFrameRoot:function(){try{if(d){var mt=function(){throw Error()};if(Object.defineProperty(mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(mt,[])}catch(yn){var Nt=yn}Reflect.construct(h,[],mt)}else{try{mt.call()}catch(yn){Nt=yn}h.call(mt.prototype)}}else{try{throw Error()}catch(yn){Nt=yn}(mt=h())&&typeof mt.catch=="function"&&mt.catch(function(){})}}catch(yn){if(yn&&Nt&&typeof yn.stack=="string")return[yn.stack,Nt.stack]}return[null,null]}};A.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(A.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(A.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=A.DetermineComponentFrameRoot(),K=U[0],fe=U[1];if(K&&fe){var ze=K.split(`
`),st=fe.split(`
`);for(N=A=0;A<ze.length&&!ze[A].includes("DetermineComponentFrameRoot");)A++;for(;N<st.length&&!st[N].includes("DetermineComponentFrameRoot");)N++;if(A===ze.length||N===st.length)for(A=ze.length-1,N=st.length-1;1<=A&&0<=N&&ze[A]!==st[N];)N--;for(;1<=A&&0<=N;A--,N--)if(ze[A]!==st[N]){if(A!==1||N!==1)do if(A--,N--,0>N||ze[A]!==st[N]){var _t=`
`+ze[A].replace(" at new "," at ");return h.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",h.displayName)),_t}while(1<=A&&0<=N);break}}}finally{qp=!1,Error.prepareStackTrace=b}return(b=h?h.displayName||h.name:"")?le(b):""}function ie(h,d){switch(h.tag){case 26:case 27:case 5:return le(h.type);case 16:return le("Lazy");case 13:return h.child!==d&&d!==null?le("Suspense Fallback"):le("Suspense");case 19:return le("SuspenseList");case 0:case 15:return ee(h.type,!1);case 11:return ee(h.type.render,!1);case 1:return ee(h.type,!0);case 31:return le("Activity");default:return""}}function he(h){try{var d="",b=null;do d+=ie(h,b),b=h,h=h.return;while(h);return d}catch(A){return`
Error generating stack: `+A.message+`
`+A.stack}}function we(h,d){if(typeof h=="object"&&h!==null){var b=f_.get(h);return b!==void 0?b:(d={value:h,source:d,stack:he(d)},f_.set(h,d),d)}return{value:h,source:d,stack:he(d)}}function Me(h,d){yu[Nl++]=$p,yu[Nl++]=mi,mi=h,$p=d}function J(h,d,b){_o[Bs++]=na,_o[Bs++]=$o,_o[Bs++]=bo,bo=h;var A=na;h=$o;var N=32-ds(A)-1;A&=~(1<<N),b+=1;var U=32-ds(d)+N;if(30<U){var K=N-N%5;U=(A&(1<<K)-1).toString(32),A>>=K,N-=K,na=1<<32-ds(d)+N|b<<N|A,$o=U+h}else na=1<<U|b<<N|A,$o=h}function pe(h){h.return!==null&&(Me(h,1),J(h,1,0))}function Ee(h){for(;h===mi;)mi=yu[--Nl],yu[Nl]=null,$p=yu[--Nl],yu[Nl]=null;for(;h===bo;)bo=_o[--Bs],_o[Bs]=null,$o=_o[--Bs],_o[Bs]=null,na=_o[--Bs],_o[Bs]=null}function Ge(h,d){_o[Bs++]=na,_o[Bs++]=$o,_o[Bs++]=bo,na=d.id,$o=d.overflow,bo=h}function ht(h,d){x(ia,d),x(_u,h),x(Hr,null),h=mS(d),_(Hr),x(Hr,h)}function be(){_(Hr),_(_u),_(ia)}function Te(h){h.memoizedState!==null&&x(Xp,h);var d=Hr.current,b=Zh(d,h.type);d!==b&&(x(_u,h),x(Hr,b))}function dt(h){_u.current===h&&(_(Hr),_(_u)),Xp.current===h&&(_(Xp),ur?Cf._currentValue=Mf:Cf._currentValue2=Mf)}function ve(h){var d=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Qe(we(d,h)),cv}function Ye(h,d){if(!Li)throw Error(r(175));VS(h.stateNode,h.type,h.memoizedProps,d,h)||ve(h,!0)}function wt(h){for(Pr=h.return;Pr;)switch(Pr.tag){case 5:case 31:case 13:ja=!1;return;case 27:case 3:ja=!0;return;default:Pr=Pr.return}}function je(h){if(!Li||h!==Pr)return!1;if(!Un)return wt(h),Un=!0,!1;var d=h.tag;if(Rr?d!==3&&d!==27&&(d!==5||ed(h.type)&&!Va(h.type,h.memoizedProps))&&ki&&ve(h):d!==3&&(d!==5||ed(h.type)&&!Va(h.type,h.memoizedProps))&&ki&&ve(h),wt(h),d===13){if(!Li)throw Error(r(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));ki=J0(h)}else if(d===31){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));ki=HS(h)}else ki=Rr&&d===27?OS(h.type,ki):Pr?NS(h.stateNode):null;return!0}function At(){Li&&(ki=Pr=null,Un=!1)}function Re(){var h=Ol;return h!==null&&(vs===null?vs=h:vs.push.apply(vs,h),Ol=null),h}function Qe(h){Ol===null?Ol=[h]:Ol.push(h)}function Ve(h,d,b){ur?(x(xo,d._currentValue),d._currentValue=b):(x(xo,d._currentValue2),d._currentValue2=b)}function lt(h){var d=xo.current;ur?h._currentValue=d:h._currentValue2=d,_(xo)}function ae(h,d,b){for(;h!==null;){var A=h.alternate;if((h.childLanes&d)!==d?(h.childLanes|=d,A!==null&&(A.childLanes|=d)):A!==null&&(A.childLanes&d)!==d&&(A.childLanes|=d),h===b)break;h=h.return}}function Et(h,d,b,A){var N=h.child;for(N!==null&&(N.return=h);N!==null;){var U=N.dependencies;if(U!==null){var K=N.child;U=U.firstContext;e:for(;U!==null;){var fe=U;U=N;for(var ze=0;ze<d.length;ze++)if(fe.context===d[ze]){U.lanes|=b,fe=U.alternate,fe!==null&&(fe.lanes|=b),ae(U.return,b,h),A||(K=null);break e}U=fe.next}}else if(N.tag===18){if(K=N.return,K===null)throw Error(r(341));K.lanes|=b,U=K.alternate,U!==null&&(U.lanes|=b),ae(K,b,h),K=null}else K=N.child;if(K!==null)K.return=N;else for(K=N;K!==null;){if(K===h){K=null;break}if(N=K.sibling,N!==null){N.return=K.return,K=N;break}K=K.return}N=K}}function ft(h,d,b,A){h=null;for(var N=d,U=!1;N!==null;){if(!U){if((N.flags&524288)!==0)U=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var K=N.alternate;if(K===null)throw Error(r(387));if(K=K.memoizedProps,K!==null){var fe=N.type;fr(N.pendingProps.value,K.value)||(h!==null?h.push(fe):h=[fe])}}else if(N===Xp.current){if(K=N.alternate,K===null)throw Error(r(387));K.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(h!==null?h.push(Cf):h=[Cf])}N=N.return}h!==null&&Et(d,h,b,A),d.flags|=262144}function Lt(h){for(h=h.firstContext;h!==null;){var d=h.context;if(!fr(ur?d._currentValue:d._currentValue2,h.memoizedValue))return!0;h=h.next}return!1}function pt(h){Ei=h,Xo=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function te(h){return de(Ei,h)}function X(h,d){return Ei===null&&pt(h),de(h,d)}function de(h,d){var b=ur?d._currentValue:d._currentValue2;if(d={context:d,memoizedValue:b,next:null},Xo===null){if(h===null)throw Error(r(308));Xo=d,h.dependencies={lanes:0,firstContext:d},h.flags|=524288}else Xo=Xo.next=d;return b}function Le(){return{controller:new i1,data:new Map,refCount:0}}function Ze(h){h.refCount--,h.refCount===0&&Gr(_C,function(){h.controller.abort()})}function Oe(){}function Tt(h){h!==ui&&h.next===null&&(ui===null?Yp=ui=h:ui=ui.next=h),So=!0,xa||(xa=!0,Y())}function gt(h,d){if(!fv&&So){fv=!0;do for(var b=!1,A=Yp;A!==null;){if(h!==0){var N=A.pendingLanes;if(N===0)var U=0;else{var K=A.suspendedLanes,fe=A.pingedLanes;U=(1<<31-ds(42|h)+1)-1,U&=N&~(K&~fe),U=U&201326741?U&201326741|1:U?U|2:0}U!==0&&(b=!0,xt(A,U))}else U=Fn,U=w(A,A===In?U:0,A.cancelPendingCommit!==null||A.timeoutHandle!==hs),(U&3)===0||I(A,U)||(b=!0,xt(A,U));A=A.next}while(b);fv=!1}}function Pt(){Ht()}function Ht(){So=xa=!1;var h=0;hc!==0&&Af()&&(h=hc);for(var d=ba(),b=null,A=Yp;A!==null;){var N=A.next,U=nt(A,d);U===0?(A.next=null,b===null?Yp=N:b.next=N,N===null&&(ui=b)):(b=A,(h!==0||(U&3)!==0)&&(So=!0)),A=N}br!==0&&br!==5||gt(h),hc!==0&&(hc=0)}function nt(h,d){for(var b=h.suspendedLanes,A=h.pingedLanes,N=h.expirationTimes,U=h.pendingLanes&-62914561;0<U;){var K=31-ds(U),fe=1<<K,ze=N[K];ze===-1?((fe&b)===0||(fe&A)!==0)&&(N[K]=R(fe,d)):ze<=d&&(h.expiredLanes|=fe),U&=~fe}if(d=In,b=Fn,b=w(h,h===d?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==hs),A=h.callbackNode,b===0||h===d&&(fi===2||fi===9)||h.cancelPendingCommit!==null)return A!==null&&A!==null&&av(A),h.callbackNode=null,h.callbackPriority=0;if((b&3)===0||I(h,b)){if(d=b&-b,d===h.callbackPriority)return d;switch(A!==null&&av(A),W(b)){case 2:case 8:b=t1;break;case 32:b=Wp;break;case 268435456:b=ov;break;default:b=Wp}return A=ot.bind(null,h),b=Gp(b,A),h.callbackPriority=d,h.callbackNode=b,d}return A!==null&&A!==null&&av(A),h.callbackPriority=2,h.callbackNode=null,2}function ot(h,d){if(br!==0&&br!==5)return h.callbackNode=null,h.callbackPriority=0,null;var b=h.callbackNode;if(Cl()&&h.callbackNode!==b)return null;var A=Fn;return A=w(h,h===In?A:0,h.cancelPendingCommit!==null||h.timeoutHandle!==hs),A===0?null:(qo(h,A,d),nt(h,ba()),h.callbackNode!=null&&h.callbackNode===b?ot.bind(null,h):null)}function xt(h,d){if(Cl())return null;qo(h,d,!0)}function Y(){U0?F0(function(){(Dn&6)!==0?Gp(sv,Pt):Ht()}):Gp(sv,Pt)}function se(){if(hc===0){var h=bu;h===0&&(h=rv,rv<<=1,(rv&261888)===0&&(rv=256)),hc=h}return hc}function Fe(h,d){if(nd===null){var b=nd=[];h_=0,bu=se(),Nr={status:"pending",value:void 0,then:function(A){b.push(A)}}}return h_++,d.then(oe,oe),d}function oe(){if(--h_===0&&nd!==null){Nr!==null&&(Nr.status="fulfilled");var h=nd;nd=null,bu=0,Nr=null;for(var d=0;d<h.length;d++)(0,h[d])()}}function $e(h,d){var b=[],A={status:"pending",value:null,reason:null,then:function(N){b.push(N)}};return h.then(function(){A.status="fulfilled",A.value=d;for(var N=0;N<b.length;N++)(0,b[N])(d)},function(N){for(A.status="rejected",A.reason=N,N=0;N<b.length;N++)(0,b[N])(void 0)}),A}function qe(){var h=dc.current;return h!==null?h:In.pooledCache}function et(h,d){d===null?x(dc,dc.current):x(dc,d.pool)}function Xe(){var h=qe();return h===null?null:{parent:ur?Ui._currentValue:Ui._currentValue2,pool:h}}function We(h,d){if(fr(h,d))return!0;if(typeof h!="object"||h===null||typeof d!="object"||d===null)return!1;var b=Object.keys(h),A=Object.keys(d);if(b.length!==A.length)return!1;for(A=0;A<b.length;A++){var N=b[A];if(!yC.call(d,N)||!fr(h[N],d[N]))return!1}return!0}function at(h){return h=h.status,h==="fulfilled"||h==="rejected"}function kt(h,d,b){switch(b=h[b],b===void 0?h.push(d):b!==d&&(d.then(Oe,Oe),d=b),d.status){case"fulfilled":return d.value;case"rejected":throw h=d.reason,ii(h),h;default:if(typeof d.status=="string")d.then(Oe,Oe);else{if(h=In,h!==null&&100<h.shellSuspendCounter)throw Error(r(482));h=d,h.status="pending",h.then(function(A){if(d.status==="pending"){var N=d;N.status="fulfilled",N.value=A}},function(A){if(d.status==="pending"){var N=d;N.status="rejected",N.reason=A}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw h=d.reason,ii(h),h}throw Ha=d,Or}}function un(h){try{var d=h._init;return d(h._payload)}catch(b){throw b!==null&&typeof b=="object"&&typeof b.then=="function"?(Ha=b,Or):b}}function Jt(){if(Ha===null)throw Error(r(459));var h=Ha;return Ha=null,h}function ii(h){if(h===Or||h===Eo)throw Error(r(483))}function Mi(h){var d=Of;return Of+=1,pc===null&&(pc=[]),kt(pc,h,d)}function Qr(h,d){d=d.props.ref,h.ref=d!==void 0?d:null}function rs(h,d){throw d.$$typeof===xf?Error(r(525)):(h=Object.prototype.toString.call(d),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":h)))}function as(h){function d(Pe,Se){if(h){var Ue=Pe.deletions;Ue===null?(Pe.deletions=[Se],Pe.flags|=16):Ue.push(Se)}}function b(Pe,Se){if(!h)return null;for(;Se!==null;)d(Pe,Se),Se=Se.sibling;return null}function A(Pe){for(var Se=new Map;Pe!==null;)Pe.key!==null?Se.set(Pe.key,Pe):Se.set(Pe.index,Pe),Pe=Pe.sibling;return Se}function N(Pe,Se){return Pe=Fs(Pe,Se),Pe.index=0,Pe.sibling=null,Pe}function U(Pe,Se,Ue){return Pe.index=Ue,h?(Ue=Pe.alternate,Ue!==null?(Ue=Ue.index,Ue<Se?(Pe.flags|=67108866,Se):Ue):(Pe.flags|=67108866,Se)):(Pe.flags|=1048576,Se)}function K(Pe){return h&&Pe.alternate===null&&(Pe.flags|=67108866),Pe}function fe(Pe,Se,Ue,yt){return Se===null||Se.tag!==6?(Se=A0(Ue,Pe.mode,yt),Se.return=Pe,Se):(Se=N(Se,Ue),Se.return=Pe,Se)}function ze(Pe,Se,Ue,yt){var en=Ue.type;return en===wf?_t(Pe,Se,Ue.props.children,yt,Ue.key):Se!==null&&(Se.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===Ba&&un(en)===Se.type)?(Se=N(Se,Ue.props),Qr(Se,Ue),Se.return=Pe,Se):(Se=du(Ue.type,Ue.key,Ue.props,null,Pe.mode,yt),Qr(Se,Ue),Se.return=Pe,Se)}function st(Pe,Se,Ue,yt){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==Ue.containerInfo||Se.stateNode.implementation!==Ue.implementation?(Se=C0(Ue,Pe.mode,yt),Se.return=Pe,Se):(Se=N(Se,Ue.children||[]),Se.return=Pe,Se)}function _t(Pe,Se,Ue,yt,en){return Se===null||Se.tag!==7?(Se=mo(Ue,Pe.mode,yt,en),Se.return=Pe,Se):(Se=N(Se,Ue),Se.return=Pe,Se)}function mt(Pe,Se,Ue){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return Se=A0(""+Se,Pe.mode,Ue),Se.return=Pe,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case Il:return Ue=du(Se.type,Se.key,Se.props,null,Pe.mode,Ue),Qr(Ue,Se),Ue.return=Pe,Ue;case Sf:return Se=C0(Se,Pe.mode,Ue),Se.return=Pe,Se;case Ba:return Se=un(Se),mt(Pe,Se,Ue)}if(lc(Se)||p(Se))return Se=mo(Se,Pe.mode,Ue,null),Se.return=Pe,Se;if(typeof Se.then=="function")return mt(Pe,Mi(Se),Ue);if(Se.$$typeof===go)return mt(Pe,X(Pe,Se),Ue);rs(Pe,Se)}return null}function Nt(Pe,Se,Ue,yt){var en=Se!==null?Se.key:null;if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number"||typeof Ue=="bigint")return en!==null?null:fe(Pe,Se,""+Ue,yt);if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case Il:return Ue.key===en?ze(Pe,Se,Ue,yt):null;case Sf:return Ue.key===en?st(Pe,Se,Ue,yt):null;case Ba:return Ue=un(Ue),Nt(Pe,Se,Ue,yt)}if(lc(Ue)||p(Ue))return en!==null?null:_t(Pe,Se,Ue,yt,null);if(typeof Ue.then=="function")return Nt(Pe,Se,Mi(Ue),yt);if(Ue.$$typeof===go)return Nt(Pe,Se,X(Pe,Ue),yt);rs(Pe,Ue)}return null}function yn(Pe,Se,Ue,yt,en){if(typeof yt=="string"&&yt!==""||typeof yt=="number"||typeof yt=="bigint")return Pe=Pe.get(Ue)||null,fe(Se,Pe,""+yt,en);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case Il:return Pe=Pe.get(yt.key===null?Ue:yt.key)||null,ze(Se,Pe,yt,en);case Sf:return Pe=Pe.get(yt.key===null?Ue:yt.key)||null,st(Se,Pe,yt,en);case Ba:return yt=un(yt),yn(Pe,Se,Ue,yt,en)}if(lc(yt)||p(yt))return Pe=Pe.get(Ue)||null,_t(Se,Pe,yt,en,null);if(typeof yt.then=="function")return yn(Pe,Se,Ue,Mi(yt),en);if(yt.$$typeof===go)return yn(Pe,Se,Ue,X(Se,yt),en);rs(Se,yt)}return null}function pr(Pe,Se,Ue,yt){for(var en=null,qi=null,rn=Se,Gn=Se=0,Wr=null;rn!==null&&Gn<Ue.length;Gn++){rn.index>Gn?(Wr=rn,rn=null):Wr=rn.sibling;var Jn=Nt(Pe,rn,Ue[Gn],yt);if(Jn===null){rn===null&&(rn=Wr);break}h&&rn&&Jn.alternate===null&&d(Pe,rn),Se=U(Jn,Se,Gn),qi===null?en=Jn:qi.sibling=Jn,qi=Jn,rn=Wr}if(Gn===Ue.length)return b(Pe,rn),Un&&Me(Pe,Gn),en;if(rn===null){for(;Gn<Ue.length;Gn++)rn=mt(Pe,Ue[Gn],yt),rn!==null&&(Se=U(rn,Se,Gn),qi===null?en=rn:qi.sibling=rn,qi=rn);return Un&&Me(Pe,Gn),en}for(rn=A(rn);Gn<Ue.length;Gn++)Wr=yn(rn,Pe,Gn,Ue[Gn],yt),Wr!==null&&(h&&Wr.alternate!==null&&rn.delete(Wr.key===null?Gn:Wr.key),Se=U(Wr,Se,Gn),qi===null?en=Wr:qi.sibling=Wr,qi=Wr);return h&&rn.forEach(function(Mo){return d(Pe,Mo)}),Un&&Me(Pe,Gn),en}function cd(Pe,Se,Ue,yt){if(Ue==null)throw Error(r(151));for(var en=null,qi=null,rn=Se,Gn=Se=0,Wr=null,Jn=Ue.next();rn!==null&&!Jn.done;Gn++,Jn=Ue.next()){rn.index>Gn?(Wr=rn,rn=null):Wr=rn.sibling;var Mo=Nt(Pe,rn,Jn.value,yt);if(Mo===null){rn===null&&(rn=Wr);break}h&&rn&&Mo.alternate===null&&d(Pe,rn),Se=U(Mo,Se,Gn),qi===null?en=Mo:qi.sibling=Mo,qi=Mo,rn=Wr}if(Jn.done)return b(Pe,rn),Un&&Me(Pe,Gn),en;if(rn===null){for(;!Jn.done;Gn++,Jn=Ue.next())Jn=mt(Pe,Jn.value,yt),Jn!==null&&(Se=U(Jn,Se,Gn),qi===null?en=Jn:qi.sibling=Jn,qi=Jn);return Un&&Me(Pe,Gn),en}for(rn=A(rn);!Jn.done;Gn++,Jn=Ue.next())Jn=yn(rn,Pe,Gn,Jn.value,yt),Jn!==null&&(h&&Jn.alternate!==null&&rn.delete(Jn.key===null?Gn:Jn.key),Se=U(Jn,Se,Gn),qi===null?en=Jn:qi.sibling=Jn,qi=Jn);return h&&rn.forEach(function(bC){return d(Pe,bC)}),Un&&Me(Pe,Gn),en}function Sc(Pe,Se,Ue,yt){if(typeof Ue=="object"&&Ue!==null&&Ue.type===wf&&Ue.key===null&&(Ue=Ue.props.children),typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case Il:e:{for(var en=Ue.key;Se!==null;){if(Se.key===en){if(en=Ue.type,en===wf){if(Se.tag===7){b(Pe,Se.sibling),yt=N(Se,Ue.props.children),yt.return=Pe,Pe=yt;break e}}else if(Se.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===Ba&&un(en)===Se.type){b(Pe,Se.sibling),yt=N(Se,Ue.props),Qr(yt,Ue),yt.return=Pe,Pe=yt;break e}b(Pe,Se);break}else d(Pe,Se);Se=Se.sibling}Ue.type===wf?(yt=mo(Ue.props.children,Pe.mode,yt,Ue.key),yt.return=Pe,Pe=yt):(yt=du(Ue.type,Ue.key,Ue.props,null,Pe.mode,yt),Qr(yt,Ue),yt.return=Pe,Pe=yt)}return K(Pe);case Sf:e:{for(en=Ue.key;Se!==null;){if(Se.key===en)if(Se.tag===4&&Se.stateNode.containerInfo===Ue.containerInfo&&Se.stateNode.implementation===Ue.implementation){b(Pe,Se.sibling),yt=N(Se,Ue.children||[]),yt.return=Pe,Pe=yt;break e}else{b(Pe,Se);break}else d(Pe,Se);Se=Se.sibling}yt=C0(Ue,Pe.mode,yt),yt.return=Pe,Pe=yt}return K(Pe);case Ba:return Ue=un(Ue),Sc(Pe,Se,Ue,yt)}if(lc(Ue))return pr(Pe,Se,Ue,yt);if(p(Ue)){if(en=p(Ue),typeof en!="function")throw Error(r(150));return Ue=en.call(Ue),cd(Pe,Se,Ue,yt)}if(typeof Ue.then=="function")return Sc(Pe,Se,Mi(Ue),yt);if(Ue.$$typeof===go)return Sc(Pe,Se,X(Pe,Ue),yt);rs(Pe,Ue)}return typeof Ue=="string"&&Ue!==""||typeof Ue=="number"||typeof Ue=="bigint"?(Ue=""+Ue,Se!==null&&Se.tag===6?(b(Pe,Se.sibling),yt=N(Se,Ue),yt.return=Pe,Pe=yt):(b(Pe,Se),yt=A0(Ue,Pe.mode,yt),yt.return=Pe,Pe=yt),K(Pe)):b(Pe,Se)}return function(Pe,Se,Ue,yt){try{Of=0;var en=Sc(Pe,Se,Ue,yt);return pc=null,en}catch(rn){if(rn===Or||rn===Eo)throw rn;var qi=t(29,rn,null,Pe.mode);return qi.lanes=yt,qi.return=Pe,qi}finally{}}}function Jr(){for(var h=Ll,d=Df=Ll=0;d<h;){var b=aa[d];aa[d++]=null;var A=aa[d];aa[d++]=null;var N=aa[d];aa[d++]=null;var U=aa[d];if(aa[d++]=null,A!==null&&N!==null){var K=A.pending;K===null?N.next=N:(N.next=K.next,K.next=N),A.pending=N}U!==0&&pa(b,N,U)}}function Cr(h,d,b,A){aa[Ll++]=h,aa[Ll++]=d,aa[Ll++]=b,aa[Ll++]=A,Df|=A,h.lanes|=A,h=h.alternate,h!==null&&(h.lanes|=A)}function tu(h,d,b,A){return Cr(h,d,b,A),xi(h)}function Ci(h,d){return Cr(h,null,null,d),xi(h)}function pa(h,d,b){h.lanes|=b;var A=h.alternate;A!==null&&(A.lanes|=b);for(var N=!1,U=h.return;U!==null;)U.childLanes|=b,A=U.alternate,A!==null&&(A.childLanes|=b),U.tag===22&&(h=U.stateNode,h===null||h._visibility&1||(N=!0)),h=U,U=U.return;return h.tag===3?(U=h.stateNode,N&&d!==null&&(N=31-ds(b),h=U.hiddenUpdates,A=h[N],A===null?h[N]=[d]:A.push(d),d.lane=b|536870912),U):null}function xi(h){if(50<Qn)throw Qn=0,tm=null,Error(r(185));for(var d=h.return;d!==null;)h=d,d=h.return;return h.tag===3?h.stateNode:null}function Fi(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ea(h,d){h=h.updateQueue,d.updateQueue===h&&(d.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function ma(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Oa(h,d,b){var A=h.updateQueue;if(A===null)return null;if(A=A.shared,(Dn&2)!==0){var N=A.pending;return N===null?d.next=d:(d.next=N.next,N.next=d),A.pending=d,d=xi(h),pa(h,null,b),d}return Cr(h,A,d,b),xi(h)}function Fo(h,d,b){if(d=d.updateQueue,d!==null&&(d=d.shared,(b&4194048)!==0)){var A=d.lanes;A&=h.pendingLanes,b|=A,d.lanes=b,P(h,b)}}function nu(h,d){var b=h.updateQueue,A=h.alternate;if(A!==null&&(A=A.updateQueue,b===A)){var N=null,U=null;if(b=b.firstBaseUpdate,b!==null){do{var K={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};U===null?N=U=K:U=U.next=K,b=b.next}while(b!==null);U===null?N=U=d:U=U.next=d}else N=U=d;b={baseState:A.baseState,firstBaseUpdate:N,lastBaseUpdate:U,shared:A.shared,callbacks:A.callbacks},h.updateQueue=b;return}h=b.lastBaseUpdate,h===null?b.firstBaseUpdate=d:h.next=d,b.lastBaseUpdate=d}function ga(){if(dv){var h=Nr;if(h!==null)throw h}}function ao(h,d,b,A){dv=!1;var N=h.updateQueue;Vs=!1;var U=N.firstBaseUpdate,K=N.lastBaseUpdate,fe=N.shared.pending;if(fe!==null){N.shared.pending=null;var ze=fe,st=ze.next;ze.next=null,K===null?U=st:K.next=st,K=ze;var _t=h.alternate;_t!==null&&(_t=_t.updateQueue,fe=_t.lastBaseUpdate,fe!==K&&(fe===null?_t.firstBaseUpdate=st:fe.next=st,_t.lastBaseUpdate=ze))}if(U!==null){var mt=N.baseState;K=0,_t=st=ze=null,fe=U;do{var Nt=fe.lane&-536870913,yn=Nt!==fe.lane;if(yn?(Fn&Nt)===Nt:(A&Nt)===Nt){Nt!==0&&Nt===bu&&(dv=!0),_t!==null&&(_t=_t.next={lane:0,tag:fe.tag,payload:fe.payload,callback:null,next:null});e:{var pr=h,cd=fe;Nt=d;var Sc=b;switch(cd.tag){case 1:if(pr=cd.payload,typeof pr=="function"){mt=pr.call(Sc,mt,Nt);break e}mt=pr;break e;case 3:pr.flags=pr.flags&-65537|128;case 0:if(pr=cd.payload,Nt=typeof pr=="function"?pr.call(Sc,mt,Nt):pr,Nt==null)break e;mt=Vg({},mt,Nt);break e;case 2:Vs=!0}}Nt=fe.callback,Nt!==null&&(h.flags|=64,yn&&(h.flags|=8192),yn=N.callbacks,yn===null?N.callbacks=[Nt]:yn.push(Nt))}else yn={lane:Nt,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null},_t===null?(st=_t=yn,ze=mt):_t=_t.next=yn,K|=Nt;if(fe=fe.next,fe===null){if(fe=N.shared.pending,fe===null)break;yn=fe,fe=yn.next,yn.next=null,N.lastBaseUpdate=yn,N.shared.pending=null}}while(!0);_t===null&&(ze=mt),N.baseState=ze,N.firstBaseUpdate=st,N.lastBaseUpdate=_t,U===null&&(N.shared.lanes=0),Su|=K,h.lanes=K,h.memoizedState=mt}}function Ns(h,d){if(typeof h!="function")throw Error(r(191,h));h.call(d)}function Da(h,d){var b=h.callbacks;if(b!==null)for(h.callbacks=null,h=0;h<b.length;h++)Ns(b[h],d)}function va(h,d){h=Ul,x(mc,h),x(Lf,d),Ul=h|d.baseLanes}function ss(){x(mc,Ul),x(Lf,Lf.current)}function Z(){Ul=mc.current,_(Lf),_(mc)}function ge(h){var d=h.alternate;x(er,er.current&1),x(ms,h),gs===null&&(d===null||Lf.current!==null||d.memoizedState!==null)&&(gs=h)}function De(h){x(er,er.current),x(ms,h),gs===null&&(gs=h)}function Ce(h){h.tag===22?(x(er,er.current),x(ms,h),gs===null&&(gs=h)):_e()}function _e(){x(er,er.current),x(ms,ms.current)}function vt(h){_(ms),gs===h&&(gs=null),_(er)}function Ct(h){for(var d=h;d!==null;){if(d.tag===13){var b=d.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||cc(b)||Yg(b)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function ct(){throw Error(r(321))}function Ot(h,d){if(d===null)return!1;for(var b=0;b<d.length&&b<h.length;b++)if(!fr(h[b],d[b]))return!1;return!0}function Ut(h,d,b,A,N,U){return xu=U,xn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Zt.H=h===null||h.memoizedState===null?Hi:kl,jn=!1,U=b(A,N),jn=!1,En&&(U=It(d,b,A,N)),Vt(h),U}function Vt(h){Zt.H=js;var d=Wt!==null&&Wt.next!==null;if(xu=0,dn=Wt=xn=null,Cn=!1,To=0,Yo=null,d)throw Error(r(300));h===null||Pi||(h=h.dependencies,h!==null&&Lt(h)&&(Pi=!0))}function It(h,d,b,A){xn=h;var N=0;do{if(En&&(Yo=null),To=0,En=!1,25<=N)throw Error(r(301));if(N+=1,dn=Wt=null,h.updateQueue!=null){var U=h.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}Zt.H=gc,U=d(b,A)}while(En);return U}function $t(){var h=Zt.H,d=h.useState()[0];return d=typeof d.then=="function"?tn(d):d,h=h.useState()[0],(Wt!==null?Wt.memoizedState:null)!==h&&(xn.flags|=1024),d}function Pn(){var h=Sa!==0;return Sa=0,h}function ri(h,d,b){d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~b}function Kt(h){if(Cn){for(h=h.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}Cn=!1}xu=0,dn=Wt=xn=null,En=!1,To=Sa=0,Yo=null}function on(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?xn.memoizedState=dn=h:dn=dn.next=h,dn}function St(){if(Wt===null){var h=xn.alternate;h=h!==null?h.memoizedState:null}else h=Wt.next;var d=dn===null?xn.memoizedState:dn.next;if(d!==null)dn=d,Wt=h;else{if(h===null)throw xn.alternate===null?Error(r(467)):Error(r(310));Wt=h,h={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},dn===null?xn.memoizedState=dn=h:dn=dn.next=h}return dn}function An(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tn(h){var d=To;return To+=1,Yo===null&&(Yo=[]),h=kt(Yo,h,d),d=xn,(dn===null?d.memoizedState:dn.next)===null&&(d=d.alternate,Zt.H=d===null||d.memoizedState===null?Hi:kl),h}function zi(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return tn(h);if(h.$$typeof===go)return te(h)}throw Error(r(438,String(h)))}function Os(h){var d=null,b=xn.updateQueue;if(b!==null&&(d=b.memoCache),d==null){var A=xn.alternate;A!==null&&(A=A.updateQueue,A!==null&&(A=A.memoCache,A!=null&&(d={data:A.data.map(function(N){return N.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),b===null&&(b=An(),xn.updateQueue=b),b.memoCache=d,b=d.data[d.index],b===void 0)for(b=d.data[d.index]=Array(h),A=0;A<h;A++)b[A]=R0;return d.index++,b}function yi(h,d){return typeof d=="function"?d(h):d}function ta(h){var d=St();return Zn(d,Wt,h)}function Zn(h,d,b){var A=h.queue;if(A===null)throw Error(r(311));A.lastRenderedReducer=b;var N=h.baseQueue,U=A.pending;if(U!==null){if(N!==null){var K=N.next;N.next=U.next,U.next=K}d.baseQueue=N=U,A.pending=null}if(U=h.baseState,N===null)h.memoizedState=U;else{d=N.next;var fe=K=null,ze=null,st=d,_t=!1;do{var mt=st.lane&-536870913;if(mt!==st.lane?(Fn&mt)===mt:(xu&mt)===mt){var Nt=st.revertLane;if(Nt===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,gesture:null,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),mt===bu&&(_t=!0);else if((xu&Nt)===Nt){st=st.next,Nt===bu&&(_t=!0);continue}else mt={lane:0,revertLane:st.revertLane,gesture:null,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},ze===null?(fe=ze=mt,K=U):ze=ze.next=mt,xn.lanes|=Nt,Su|=Nt;mt=st.action,jn&&b(U,mt),U=st.hasEagerState?st.eagerState:b(U,mt)}else Nt={lane:mt,revertLane:st.revertLane,gesture:st.gesture,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},ze===null?(fe=ze=Nt,K=U):ze=ze.next=Nt,xn.lanes|=mt,Su|=mt;st=st.next}while(st!==null&&st!==d);if(ze===null?K=U:ze.next=fe,!fr(U,h.memoizedState)&&(Pi=!0,_t&&(b=Nr,b!==null)))throw b;h.memoizedState=U,h.baseState=K,h.baseQueue=ze,A.lastRenderedState=U}return N===null&&(A.lanes=0),[h.memoizedState,A.dispatch]}function Ii(h){var d=St(),b=d.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=h;var A=b.dispatch,N=b.pending,U=d.memoizedState;if(N!==null){b.pending=null;var K=N=N.next;do U=h(U,K.action),K=K.next;while(K!==N);fr(U,d.memoizedState)||(Pi=!0),d.memoizedState=U,d.baseQueue===null&&(d.baseState=U),b.lastRenderedState=U}return[U,A]}function di(h,d,b){var A=xn,N=St(),U=Un;if(U){if(b===void 0)throw Error(r(407));b=b()}else b=d();var K=!fr((Wt||N).memoizedState,b);if(K&&(N.memoizedState=b,Pi=!0),N=N.queue,Bo(fl.bind(null,A,N,h),[h]),N.getSnapshot!==d||K||dn!==null&&dn.memoizedState.tag&1){if(A.flags|=2048,ka(9,{destroy:void 0},lr.bind(null,A,N,b,d),null),In===null)throw Error(r(349));U||(xu&127)!==0||or(A,d,b)}return b}function or(h,d,b){h.flags|=16384,h={getSnapshot:d,value:b},d=xn.updateQueue,d===null?(d=An(),xn.updateQueue=d,d.stores=[h]):(b=d.stores,b===null?d.stores=[h]:b.push(h))}function lr(h,d,b,A){d.value=b,d.getSnapshot=A,La(d)&&_p(h)}function fl(h,d,b){return b(function(){La(d)&&_p(h)})}function La(h){var d=h.getSnapshot;h=h.value;try{var b=d();return!fr(h,b)}catch{return!0}}function _p(h){var d=Ci(h,2);d!==null&&Vi(d,h,2)}function hl(h){var d=on();if(typeof h=="function"){var b=h;if(h=b(),jn){q(!0);try{b()}finally{q(!1)}}}return d.memoizedState=d.baseState=h,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:h},d}function uf(h,d,b,A){return h.baseState=b,Zn(h,Wt,typeof A=="function"?A:yi)}function zo(h,d,b,A,N){if(df(h))throw Error(r(485));if(h=d.action,h!==null){var U={payload:N,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){U.listeners.push(K)}};Zt.T!==null?b(!0):U.isTransition=!1,A(U),b=d.pending,b===null?(U.next=d.pending=U,Mh(d,U)):(U.next=b.next,d.pending=b.next=U)}}function Mh(h,d){var b=d.action,A=d.payload,N=h.state;if(d.isTransition){var U=Zt.T,K={};Zt.T=K;try{var fe=b(N,A),ze=Zt.S;ze!==null&&ze(K,fe),Ds(h,d,fe)}catch(st){so(h,d,st)}finally{U!==null&&K.types!==null&&(U.types=K.types),Zt.T=U}}else try{U=b(N,A),Ds(h,d,U)}catch(st){so(h,d,st)}}function Ds(h,d,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(A){iu(h,d,A)},function(A){return so(h,d,A)}):iu(h,d,b)}function iu(h,d,b){d.status="fulfilled",d.value=b,Gu(d),h.state=b,d=h.pending,d!==null&&(b=d.next,b===d?h.pending=null:(b=b.next,d.next=b,Mh(h,b)))}function so(h,d,b){var A=h.pending;if(h.pending=null,A!==null){A=A.next;do d.status="rejected",d.reason=b,Gu(d),d=d.next;while(d!==A)}h.action=null}function Gu(h){h=h.listeners;for(var d=0;d<h.length;d++)(0,h[d])()}function cf(h,d){return d}function ru(h,d){if(Un){var b=In.formState;if(b!==null){e:{var A=xn;if(Un){if(ki){var N=PS(ki,ja);if(N){ki=NS(N),A=Y0(N);break e}}ve(A)}A=!1}A&&(d=b[0])}}b=on(),b.memoizedState=b.baseState=d,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cf,lastRenderedState:d},b.queue=A,b=xp.bind(null,xn,A),A.dispatch=b,A=hl(!1);var U=lo.bind(null,xn,!1,A.queue);return A=on(),N={state:d,dispatch:null,action:h,pending:null},A.queue=N,b=zo.bind(null,xn,N,U,b),N.dispatch=b,A.memoizedState=h,[d,b,!1]}function oo(h){var d=St();return Ls(d,Wt,h)}function Ls(h,d,b){if(d=Zn(h,d,cf)[0],h=ta(yi)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var A=tn(d)}catch(K){throw K===Or?Eo:K}else A=d;d=St();var N=d.queue,U=N.dispatch;return b!==d.memoizedState&&(xn.flags|=2048,ka(9,{destroy:void 0},ff.bind(null,N,b),null)),[A,U,h]}function ff(h,d){h.action=d}function li(h){var d=St(),b=Wt;if(b!==null)return Ls(d,b,h);St(),d=d.memoizedState,b=St();var A=b.queue.dispatch;return b.memoizedState=h,[d,A,!1]}function ka(h,d,b,A){return h={tag:h,create:b,deps:A,inst:d,next:null},d=xn.updateQueue,d===null&&(d=An(),xn.updateQueue=d),b=d.lastEffect,b===null?d.lastEffect=h.next=h:(A=b.next,b.next=h,h.next=A,d.lastEffect=h),h}function Ch(){return St().memoizedState}function dl(h,d,b,A){var N=on();xn.flags|=h,N.memoizedState=ka(1|d,{destroy:void 0},b,A===void 0?null:A)}function Wu(h,d,b,A){var N=St();A=A===void 0?null:A;var U=N.memoizedState.inst;Wt!==null&&A!==null&&Ot(A,Wt.memoizedState.deps)?N.memoizedState=ka(d,U,b,A):(xn.flags|=h,N.memoizedState=ka(1|d,U,b,A))}function qu(h,d){dl(8390656,8,h,d)}function Bo(h,d){Wu(2048,8,h,d)}function Vo(h){xn.flags|=4;var d=xn.updateQueue;if(d===null)d=An(),xn.updateQueue=d,d.events=[h];else{var b=d.events;b===null?d.events=[h]:b.push(h)}}function zr(h){var d=St().memoizedState;return Vo({ref:d,nextImpl:h}),function(){if((Dn&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}function pl(h,d){return Wu(4,2,h,d)}function jo(h,d){return Wu(4,4,h,d)}function au(h,d){if(typeof d=="function"){h=h();var b=d(h);return function(){typeof b=="function"?b():d(null)}}if(d!=null)return h=h(),d.current=h,function(){d.current=null}}function Ih(h,d,b){b=b!=null?b.concat([h]):null,Wu(4,4,au.bind(null,d,h),b)}function ml(){}function hf(h,d){var b=St();d=d===void 0?null:d;var A=b.memoizedState;return d!==null&&Ot(d,A[1])?A[0]:(b.memoizedState=[h,d],h)}function Ho(h,d){var b=St();d=d===void 0?null:d;var A=b.memoizedState;if(d!==null&&Ot(d,A[1]))return A[0];if(A=h(),jn){q(!0);try{h()}finally{q(!1)}}return b.memoizedState=[A,d],A}function $u(h,d,b){return b===void 0||(xu&1073741824)!==0&&(Fn&261930)===0?h.memoizedState=d:(h.memoizedState=b,h=cu(),xn.lanes|=h,Su|=h,b)}function Rh(h,d,b,A){return fr(b,d)?b:Lf.current!==null?(h=$u(h,b,A),fr(h,d)||(Pi=!0),h):(xu&42)===0||(xu&1073741824)!==0&&(Fn&261930)===0?(Pi=!0,h.memoizedState=b):(h=cu(),xn.lanes|=h,Su|=h,d)}function Xu(h,d,b,A,N){var U=vo();kn(U!==0&&8>U?U:8);var K=Zt.T,fe={};Zt.T=fe,lo(h,!1,d,b);try{var ze=N(),st=Zt.S;if(st!==null&&st(fe,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var _t=$e(ze,A);Ku(h,d,_t,Di(h))}else Ku(h,d,A,Di(h))}catch(mt){Ku(h,d,{then:function(){},status:"rejected",reason:mt},Di())}finally{kn(U),K!==null&&fe.types!==null&&(K.types=fe.types),Zt.T=K}}function bp(h){var d=h.memoizedState;if(d!==null)return d;d={memoizedState:Mf,baseState:Mf,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:Mf},next:null};var b={};return d.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:b},next:null},h.memoizedState=d,h=h.alternate,h!==null&&(h.memoizedState=d),d}function Ph(){return te(Cf)}function Yu(){return St().memoizedState}function Nh(){return St().memoizedState}function Tg(h){for(var d=h.return;d!==null;){switch(d.tag){case 24:case 3:var b=Di();h=ma(b);var A=Oa(d,h,b);A!==null&&(Vi(A,d,b),Fo(A,d,b)),d={cache:Le()},h.payload=d;return}d=d.return}}function Oh(h,d,b){var A=Di();b={lane:A,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},df(h)?Sp(d,b):(b=tu(h,d,b,A),b!==null&&(Vi(b,h,A),wp(b,d,A)))}function xp(h,d,b){var A=Di();Ku(h,d,b,A)}function Ku(h,d,b,A){var N={lane:A,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null};if(df(h))Sp(d,N);else{var U=h.alternate;if(h.lanes===0&&(U===null||U.lanes===0)&&(U=d.lastRenderedReducer,U!==null))try{var K=d.lastRenderedState,fe=U(K,b);if(N.hasEagerState=!0,N.eagerState=fe,fr(fe,K))return Cr(h,d,N,0),In===null&&Jr(),!1}catch{}finally{}if(b=tu(h,d,N,A),b!==null)return Vi(b,h,A),wp(b,d,A),!0}return!1}function lo(h,d,b,A){if(A={lane:2,revertLane:se(),gesture:null,action:A,hasEagerState:!1,eagerState:null,next:null},df(h)){if(d)throw Error(r(479))}else d=tu(h,b,A,2),d!==null&&Vi(d,h,2)}function df(h){var d=h.alternate;return h===xn||d!==null&&d===xn}function Sp(h,d){En=Cn=!0;var b=h.pending;b===null?d.next=d:(d.next=b.next,b.next=d),h.pending=d}function wp(h,d,b){if((b&4194048)!==0){var A=d.lanes;A&=h.pendingLanes,b|=A,d.lanes=b,P(h,b)}}function Dh(h,d,b,A){d=h.memoizedState,b=b(A,d),b=b==null?d:Vg({},d,b),h.memoizedState=b,h.lanes===0&&(h.updateQueue.baseState=b)}function su(h,d,b,A,N,U,K){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(A,U,K):d.prototype&&d.prototype.isPureReactComponent?!We(b,A)||!We(N,U):!0}function ya(h,d,b,A){h=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(b,A),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(b,A),d.state!==h&&Kp.enqueueReplaceState(d,d.state,null)}function gl(h,d){var b=d;if("ref"in d){b={};for(var A in d)A!=="ref"&&(b[A]=d[A])}if(h=h.defaultProps){b===d&&(b=Vg({},b));for(var N in h)b[N]===void 0&&(b[N]=h[N])}return b}function pf(h,d){try{var b=h.onUncaughtError;b(d.value,{componentStack:d.stack})}catch(A){setTimeout(function(){throw A})}}function vl(h,d,b){try{var A=h.onCaughtError;A(b.value,{componentStack:b.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function E(h,d,b){return b=ma(b),b.tag=3,b.payload={element:null},b.callback=function(){pf(h,d)},b}function j(h){return h=ma(h),h.tag=3,h}function $(h,d,b,A){var N=b.type.getDerivedStateFromError;if(typeof N=="function"){var U=A.value;h.payload=function(){return N(U)},h.callback=function(){vl(d,b,A)}}var K=b.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(h.callback=function(){vl(d,b,A),typeof N!="function"&&(wu===null?wu=new Set([this]):wu.add(this));var fe=A.stack;this.componentDidCatch(A.value,{componentStack:fe!==null?fe:""})})}function ne(h,d,b,A,N){if(b.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){if(d=b.alternate,d!==null&&ft(d,b,N,!0),b=ms.current,b!==null){switch(b.tag){case 31:case 13:return gs===null?Gh():b.alternate===null&&Wi===0&&(Wi=3),b.flags&=-257,b.flags|=65536,b.lanes=N,A===Dl?b.flags|=16384:(d=b.updateQueue,d===null?b.updateQueue=new Set([A]):d.add(A),$h(h,A,N)),!1;case 22:return b.flags|=65536,A===Dl?b.flags|=16384:(d=b.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([A])},b.updateQueue=d):(b=d.retryQueue,b===null?d.retryQueue=new Set([A]):b.add(A)),$h(h,A,N)),!1}throw Error(r(435,b.tag))}return $h(h,A,N),Gh(),!1}if(Un)return d=ms.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=N,A!==cv&&(h=Error(r(422),{cause:A}),Qe(we(h,b)))):(A!==cv&&(d=Error(r(423),{cause:A}),Qe(we(d,b))),h=h.current.alternate,h.flags|=65536,N&=-N,h.lanes|=N,A=we(A,b),N=E(h.stateNode,A,N),nu(h,N),Wi!==4&&(Wi=2)),!1;var U=Error(r(520),{cause:A});if(U=we(U,b),Qp===null?Qp=[U]:Qp.push(U),Wi!==4&&(Wi=2),d===null)return!0;A=we(A,b),b=d;do{switch(b.tag){case 3:return b.flags|=65536,h=N&-N,b.lanes|=h,h=E(b.stateNode,A,h),nu(b,h),!1;case 1:if(d=b.type,U=b.stateNode,(b.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(wu===null||!wu.has(U))))return b.flags|=65536,N&=-N,b.lanes|=N,N=j(N),$(N,h,b,A),nu(b,N),!1}b=b.return}while(b!==null);return!1}function ye(h,d,b,A){d.child=h===null?d_(d,null,b,A):ra(d,h.child,b,A)}function ke(h,d,b,A,N){b=b.render;var U=d.ref;if("ref"in A){var K={};for(var fe in A)fe!=="ref"&&(K[fe]=A[fe])}else K=A;return pt(d),A=Ut(h,d,b,K,U,N),fe=Pn(),h!==null&&!Pi?(ri(h,d,N),yl(h,d,N)):(Un&&fe&&pe(d),d.flags|=1,ye(h,d,A,N),d.child)}function bt(h,d,b,A,N){if(h===null){var U=b.type;return typeof U=="function"&&!_f(U)&&U.defaultProps===void 0&&b.compare===null?(d.tag=15,d.type=U,vn(h,d,U,A,N)):(h=du(b.type,null,A,d,d.mode,N),h.ref=d.ref,h.return=d,d.child=h)}if(U=h.child,!Ep(h,N)){var K=U.memoizedProps;if(b=b.compare,b=b!==null?b:We,b(K,A)&&h.ref===d.ref)return yl(h,d,N)}return d.flags|=1,h=Fs(U,A),h.ref=d.ref,h.return=d,d.child=h}function vn(h,d,b,A,N){if(h!==null){var U=h.memoizedProps;if(We(U,A)&&h.ref===d.ref)if(Pi=!1,d.pendingProps=A=U,Ep(h,N))(h.flags&131072)!==0&&(Pi=!0);else return d.lanes=h.lanes,yl(h,d,N)}return ou(h,d,b,A,N)}function Qi(h,d,b,A){var N=A.children,U=h!==null?h.memoizedState:null;if(h===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),A.mode==="hidden"){if((d.flags&128)!==0){if(U=U!==null?U.baseLanes|b:b,h!==null){for(A=d.child=h.child,N=0;A!==null;)N=N|A.lanes|A.childLanes,A=A.sibling;A=N&~U}else A=0,d.child=null;return Ri(h,d,U,b,A)}if((b&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},h!==null&&et(d,U!==null?U.cachePool:null),U!==null?va(d,U):ss(),Ce(d);else return A=d.lanes=536870912,Ri(h,d,U!==null?U.baseLanes|b:b,b,A)}else U!==null?(et(d,U.cachePool),va(d,U),_e(),d.memoizedState=null):(h!==null&&et(d,null),ss(),_e());return ye(h,d,N,b),d.child}function Vn(h,d){return h!==null&&h.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function Ri(h,d,b,A,N){var U=qe();return U=U===null?null:{parent:ur?Ui._currentValue:Ui._currentValue2,pool:U},d.memoizedState={baseLanes:b,cachePool:U},h!==null&&et(d,null),ss(),Ce(d),h!==null&&ft(h,d,A,!0),d.childLanes=N,null}function Ua(h,d){return d=Zu({mode:d.mode,children:d.children},h.mode),d.ref=h.ref,h.child=d,d.return=h,d}function Go(h,d,b){return ra(d,h.child,null,b),h=Ua(d,d.pendingProps),h.flags|=2,vt(d),d.memoizedState=null,h}function Wo(h,d,b){var A=d.pendingProps,N=(d.flags&128)!==0;if(d.flags&=-129,h===null){if(Un){if(A.mode==="hidden")return h=Ua(d,A),d.lanes=536870912,Vn(null,h);if(De(d),(h=ki)?(h=Z0(h,ja),h!==null&&(d.memoizedState={dehydrated:h,treeContext:bo!==null?{id:na,overflow:$o}:null,retryLane:536870912,hydrationErrors:null},b=M0(h),b.return=d,d.child=b,Pr=d,ki=null)):h=null,h===null)throw ve(d);return d.lanes=536870912,null}return Ua(d,A)}var U=h.memoizedState;if(U!==null){var K=U.dehydrated;if(De(d),N)if(d.flags&256)d.flags&=-257,d=Go(h,d,b);else if(d.memoizedState!==null)d.child=h.child,d.flags|=128,d=null;else throw Error(r(558));else if(Pi||ft(h,d,b,!1),N=(b&h.childLanes)!==0,Pi||N){if(A=In,A!==null&&(K=L(A,b),K!==0&&K!==U.retryLane))throw U.retryLane=K,Ci(h,K),Vi(A,h,K),Ga;Gh(),d=Go(h,d,b)}else h=U.treeContext,Li&&(ki=kS(K),Pr=d,Un=!0,Ol=null,ja=!1,h!==null&&Ge(d,h)),d=Ua(d,A),d.flags|=4096;return d}return h=Fs(h.child,{mode:A.mode,children:A.children}),h.ref=d.ref,d.child=h,h.return=d,h}function os(h,d){var b=d.ref;if(b===null)h!==null&&h.ref!==null&&(d.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(r(284));(h===null||h.ref!==b)&&(d.flags|=4194816)}}function ou(h,d,b,A,N){return pt(d),b=Ut(h,d,b,A,void 0,N),A=Pn(),h!==null&&!Pi?(ri(h,d,N),yl(h,d,N)):(Un&&A&&pe(d),d.flags|=1,ye(h,d,b,N),d.child)}function mf(h,d,b,A,N,U){return pt(d),d.updateQueue=null,b=It(d,A,b,N),Vt(h),A=Pn(),h!==null&&!Pi?(ri(h,d,U),yl(h,d,U)):(Un&&A&&pe(d),d.flags|=1,ye(h,d,b,U),d.child)}function gf(h,d,b,A,N){if(pt(d),d.stateNode===null){var U=Rl,K=b.contextType;typeof K=="object"&&K!==null&&(U=te(K)),U=new b(A,U),d.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=Kp,d.stateNode=U,U._reactInternals=d,U=d.stateNode,U.props=A,U.state=d.memoizedState,U.refs={},Fi(d),K=b.contextType,U.context=typeof K=="object"&&K!==null?te(K):Rl,U.state=d.memoizedState,K=b.getDerivedStateFromProps,typeof K=="function"&&(Dh(d,b,K,A),U.state=d.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(K=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),K!==U.state&&Kp.enqueueReplaceState(U,U.state,null),ao(d,A,U,N),ga(),U.state=d.memoizedState),typeof U.componentDidMount=="function"&&(d.flags|=4194308),A=!0}else if(h===null){U=d.stateNode;var fe=d.memoizedProps,ze=gl(b,fe);U.props=ze;var st=U.context,_t=b.contextType;K=Rl,typeof _t=="object"&&_t!==null&&(K=te(_t));var mt=b.getDerivedStateFromProps;_t=typeof mt=="function"||typeof U.getSnapshotBeforeUpdate=="function",fe=d.pendingProps!==fe,_t||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(fe||st!==K)&&ya(d,U,A,K),Vs=!1;var Nt=d.memoizedState;U.state=Nt,ao(d,A,U,N),ga(),st=d.memoizedState,fe||Nt!==st||Vs?(typeof mt=="function"&&(Dh(d,b,mt,A),st=d.memoizedState),(ze=Vs||su(d,b,ze,A,Nt,st,K))?(_t||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(d.flags|=4194308)):(typeof U.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=A,d.memoizedState=st),U.props=A,U.state=st,U.context=K,A=ze):(typeof U.componentDidMount=="function"&&(d.flags|=4194308),A=!1)}else{U=d.stateNode,ea(h,d),K=d.memoizedProps,_t=gl(b,K),U.props=_t,mt=d.pendingProps,Nt=U.context,st=b.contextType,ze=Rl,typeof st=="object"&&st!==null&&(ze=te(st)),fe=b.getDerivedStateFromProps,(st=typeof fe=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(K!==mt||Nt!==ze)&&ya(d,U,A,ze),Vs=!1,Nt=d.memoizedState,U.state=Nt,ao(d,A,U,N),ga();var yn=d.memoizedState;K!==mt||Nt!==yn||Vs||h!==null&&h.dependencies!==null&&Lt(h.dependencies)?(typeof fe=="function"&&(Dh(d,b,fe,A),yn=d.memoizedState),(_t=Vs||su(d,b,_t,A,Nt,yn,ze)||h!==null&&h.dependencies!==null&&Lt(h.dependencies))?(st||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(A,yn,ze),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(A,yn,ze)),typeof U.componentDidUpdate=="function"&&(d.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof U.componentDidUpdate!="function"||K===h.memoizedProps&&Nt===h.memoizedState||(d.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||K===h.memoizedProps&&Nt===h.memoizedState||(d.flags|=1024),d.memoizedProps=A,d.memoizedState=yn),U.props=A,U.state=yn,U.context=ze,A=_t):(typeof U.componentDidUpdate!="function"||K===h.memoizedProps&&Nt===h.memoizedState||(d.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||K===h.memoizedProps&&Nt===h.memoizedState||(d.flags|=1024),A=!1)}return U=A,os(h,d),A=(d.flags&128)!==0,U||A?(U=d.stateNode,b=A&&typeof b.getDerivedStateFromError!="function"?null:U.render(),d.flags|=1,h!==null&&A?(d.child=ra(d,h.child,null,N),d.child=ra(d,null,b,N)):ye(h,d,b,N),d.memoizedState=U.state,h=d.child):h=yl(h,d,N),h}function eS(h,d,b,A){return At(),d.flags|=256,ye(h,d,b,A),d.child}function h0(h){return{baseLanes:h,cachePool:Xe()}}function d0(h,d,b){return h=h!==null?h.childLanes&~b:0,d&&(h|=Wa),h}function p0(h,d,b){var A=d.pendingProps,N=!1,U=(d.flags&128)!==0,K;if((K=U)||(K=h!==null&&h.memoizedState===null?!1:(er.current&2)!==0),K&&(N=!0,d.flags&=-129),K=(d.flags&32)!==0,d.flags&=-33,h===null){if(Un){if(N?ge(d):_e(),(h=ki)?(h=BS(h,ja),h!==null&&(d.memoizedState={dehydrated:h,treeContext:bo!==null?{id:na,overflow:$o}:null,retryLane:536870912,hydrationErrors:null},b=M0(h),b.return=d,d.child=b,Pr=d,ki=null)):h=null,h===null)throw ve(d);return Yg(h)?d.lanes=32:d.lanes=536870912,null}var fe=A.children;return A=A.fallback,N?(_e(),N=d.mode,fe=Zu({mode:"hidden",children:fe},N),A=mo(A,N,b,null),fe.return=d,A.return=d,fe.sibling=A,d.child=fe,A=d.child,A.memoizedState=h0(b),A.childLanes=d0(h,K,b),d.memoizedState=kf,Vn(null,A)):(ge(d),Ag(d,fe))}var ze=h.memoizedState;if(ze!==null&&(fe=ze.dehydrated,fe!==null)){if(U)d.flags&256?(ge(d),d.flags&=-257,d=vf(h,d,b)):d.memoizedState!==null?(_e(),d.child=h.child,d.flags|=128,d=null):(_e(),fe=A.fallback,N=d.mode,A=Zu({mode:"visible",children:A.children},N),fe=mo(fe,N,b,null),fe.flags|=2,A.return=d,fe.return=d,A.sibling=fe,d.child=A,ra(d,h.child,null,b),A=d.child,A.memoizedState=h0(b),A.childLanes=d0(h,K,b),d.memoizedState=kf,d=Vn(null,A));else if(ge(d),Yg(fe))K=Kg(fe).digest,A=Error(r(419)),A.stack="",A.digest=K,Qe({value:A,source:null,stack:null}),d=vf(h,d,b);else if(Pi||ft(h,d,b,!1),K=(b&h.childLanes)!==0,Pi||K){if(K=In,K!==null&&(A=L(K,b),A!==0&&A!==ze.retryLane))throw ze.retryLane=A,Ci(h,A),Vi(K,h,A),Ga;cc(fe)||Gh(),d=vf(h,d,b)}else cc(fe)?(d.flags|=192,d.child=h.child,d=null):(h=ze.treeContext,Li&&(ki=US(fe),Pr=d,Un=!0,Ol=null,ja=!1,h!==null&&Ge(d,h)),d=Ag(d,A.children),d.flags|=4096);return d}return N?(_e(),fe=A.fallback,N=d.mode,ze=h.child,U=ze.sibling,A=Fs(ze,{mode:"hidden",children:A.children}),A.subtreeFlags=ze.subtreeFlags&65011712,U!==null?fe=Fs(U,fe):(fe=mo(fe,N,b,null),fe.flags|=2),fe.return=d,A.return=d,A.sibling=fe,d.child=A,Vn(null,A),A=d.child,fe=h.child.memoizedState,fe===null?fe=h0(b):(N=fe.cachePool,N!==null?(ze=ur?Ui._currentValue:Ui._currentValue2,N=N.parent!==ze?{parent:ze,pool:ze}:N):N=Xe(),fe={baseLanes:fe.baseLanes|b,cachePool:N}),A.memoizedState=fe,A.childLanes=d0(h,K,b),d.memoizedState=kf,Vn(h.child,A)):(ge(d),b=h.child,h=b.sibling,b=Fs(b,{mode:"visible",children:A.children}),b.return=d,b.sibling=null,h!==null&&(K=d.deletions,K===null?(d.deletions=[h],d.flags|=16):K.push(h)),d.child=b,d.memoizedState=null,b)}function Ag(h,d){return d=Zu({mode:"visible",children:d},h.mode),d.return=h,h.child=d}function Zu(h,d){return h=t(22,h,null,d),h.lanes=0,h}function vf(h,d,b){return ra(d,h.child,null,b),h=Ag(d,d.pendingProps.children),h.flags|=2,d.memoizedState=null,h}function tS(h,d,b){h.lanes|=d;var A=h.alternate;A!==null&&(A.lanes|=d),ae(h.return,d,b)}function Lh(h,d,b,A,N,U){var K=h.memoizedState;K===null?h.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:A,tail:b,tailMode:N,treeForkCount:U}:(K.isBackwards=d,K.rendering=null,K.renderingStartTime=0,K.last=A,K.tail=b,K.tailMode=N,K.treeForkCount=U)}function m0(h,d,b){var A=d.pendingProps,N=A.revealOrder,U=A.tail;A=A.children;var K=er.current,fe=(K&2)!==0;if(fe?(K=K&1|2,d.flags|=128):K&=1,x(er,K),ye(h,d,A,b),A=Un?$p:0,!fe&&h!==null&&(h.flags&128)!==0)e:for(h=d.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&tS(h,b,d);else if(h.tag===19)tS(h,b,d);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}switch(N){case"forwards":for(b=d.child,N=null;b!==null;)h=b.alternate,h!==null&&Ct(h)===null&&(N=b),b=b.sibling;b=N,b===null?(N=d.child,d.child=null):(N=b.sibling,b.sibling=null),Lh(d,!1,N,b,U,A);break;case"backwards":case"unstable_legacy-backwards":for(b=null,N=d.child,d.child=null;N!==null;){if(h=N.alternate,h!==null&&Ct(h)===null){d.child=N;break}h=N.sibling,N.sibling=b,b=N,N=h}Lh(d,!0,b,null,U,A);break;case"together":Lh(d,!1,null,null,void 0,A);break;default:d.memoizedState=null}return d.child}function yl(h,d,b){if(h!==null&&(d.dependencies=h.dependencies),Su|=d.lanes,(b&d.childLanes)===0)if(h!==null){if(ft(h,d,b,!1),(b&d.childLanes)===0)return null}else return null;if(h!==null&&d.child!==h.child)throw Error(r(153));if(d.child!==null){for(h=d.child,b=Fs(h,h.pendingProps),d.child=b,b.return=d;h.sibling!==null;)h=h.sibling,b=b.sibling=Fs(h,h.pendingProps),b.return=d;b.sibling=null}return d.child}function Ep(h,d){return(h.lanes&d)!==0?!0:(h=h.dependencies,!!(h!==null&&Lt(h)))}function g0(h,d,b){switch(d.tag){case 3:ht(d,d.stateNode.containerInfo),Ve(d,Ui,h.memoizedState.cache),At();break;case 27:case 5:Te(d);break;case 4:ht(d,d.stateNode.containerInfo);break;case 10:Ve(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,De(d),null;break;case 13:var A=d.memoizedState;if(A!==null)return A.dehydrated!==null?(ge(d),d.flags|=128,null):(b&d.child.childLanes)!==0?p0(h,d,b):(ge(d),h=yl(h,d,b),h!==null?h.sibling:null);ge(d);break;case 19:var N=(h.flags&128)!==0;if(A=(b&d.childLanes)!==0,A||(ft(h,d,b,!1),A=(b&d.childLanes)!==0),N){if(A)return m0(h,d,b);d.flags|=128}if(N=d.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),x(er,er.current),A)break;return null;case 22:return d.lanes=0,Qi(h,d,b,d.pendingProps);case 24:Ve(d,Ui,h.memoizedState.cache)}return yl(h,d,b)}function v0(h,d,b){if(h!==null)if(h.memoizedProps!==d.pendingProps)Pi=!0;else{if(!Ep(h,b)&&(d.flags&128)===0)return Pi=!1,g0(h,d,b);Pi=(h.flags&131072)!==0}else Pi=!1,Un&&(d.flags&1048576)!==0&&J(d,$p,d.index);switch(d.lanes=0,d.tag){case 16:e:{var A=d.pendingProps;if(h=un(d.elementType),d.type=h,typeof h=="function")_f(h)?(A=gl(h,A),d.tag=1,d=gf(null,d,h,A,b)):(d.tag=0,d=ou(null,d,h,A,b));else{if(h!=null){var N=h.$$typeof;if(N===Xh){d.tag=11,d=ke(null,d,h,A,b);break e}else if(N===Hg){d.tag=14,d=bt(null,d,h,A,b);break e}}throw d=g(h)||h,Error(r(306,d,""))}}return d;case 0:return ou(h,d,d.type,d.pendingProps,b);case 1:return A=d.type,N=gl(A,d.pendingProps),gf(h,d,A,N,b);case 3:e:{if(ht(d,d.stateNode.containerInfo),h===null)throw Error(r(387));var U=d.pendingProps;N=d.memoizedState,A=N.element,ea(h,d),ao(d,U,null,b);var K=d.memoizedState;if(U=K.cache,Ve(d,Ui,U),U!==N.cache&&Et(d,[Ui],b,!0),ga(),U=K.element,Li&&N.isDehydrated)if(N={element:U,isDehydrated:!1,cache:K.cache},d.updateQueue.baseState=N,d.memoizedState=N,d.flags&256){d=eS(h,d,U,b);break e}else if(U!==A){A=we(Error(r(424)),d),Qe(A),d=eS(h,d,U,b);break e}else for(Li&&(ki=LS(d.stateNode.containerInfo),Pr=d,Un=!0,Ol=null,ja=!0),b=d_(d,null,U,b),d.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(At(),U===A){d=yl(h,d,b);break e}ye(h,d,U,b)}d=d.child}return d;case 26:if(yo)return os(h,d),h===null?(b=n_(d.type,null,d.pendingProps,null))?d.memoizedState=b:Un||(d.stateNode=ev(d.type,d.pendingProps,ia.current,d)):d.memoizedState=n_(d.type,h.memoizedProps,d.pendingProps,h.memoizedState),null;case 27:if(Rr)return Te(d),h===null&&Rr&&Un&&(A=d.stateNode=tv(d.type,d.pendingProps,ia.current,Hr.current,!1),Pr=d,ja=!0,ki=K0(d.type,A,ki)),ye(h,d,d.pendingProps.children,b),os(h,d),h===null&&(d.flags|=4194304),d.child;case 5:return h===null&&Un&&(YS(d.type,d.pendingProps,Hr.current),(N=A=ki)&&(A=FS(A,d.type,d.pendingProps,ja),A!==null?(d.stateNode=A,Pr=d,ki=DS(A),ja=!1,N=!0):N=!1),N||ve(d)),Te(d),N=d.type,U=d.pendingProps,K=h!==null?h.memoizedProps:null,A=U.children,Va(N,U)?A=null:K!==null&&Va(N,K)&&(d.flags|=32),d.memoizedState!==null&&(N=Ut(h,d,$t,null,null,b),ur?Cf._currentValue=N:Cf._currentValue2=N),os(h,d),ye(h,d,A,b),d.child;case 6:return h===null&&Un&&(t_(d.pendingProps,Hr.current),(h=b=ki)&&(b=zS(b,d.pendingProps,ja),b!==null?(d.stateNode=b,Pr=d,ki=null,h=!0):h=!1),h||ve(d)),null;case 13:return p0(h,d,b);case 4:return ht(d,d.stateNode.containerInfo),A=d.pendingProps,h===null?d.child=ra(d,null,A,b):ye(h,d,A,b),d.child;case 11:return ke(h,d,d.type,d.pendingProps,b);case 7:return ye(h,d,d.pendingProps,b),d.child;case 8:return ye(h,d,d.pendingProps.children,b),d.child;case 12:return ye(h,d,d.pendingProps.children,b),d.child;case 10:return A=d.pendingProps,Ve(d,d.type,A.value),ye(h,d,A.children,b),d.child;case 9:return N=d.type._context,A=d.pendingProps.children,pt(d),N=te(N),A=A(N),d.flags|=1,ye(h,d,A,b),d.child;case 14:return bt(h,d,d.type,d.pendingProps,b);case 15:return vn(h,d,d.type,d.pendingProps,b);case 19:return m0(h,d,b);case 31:return Wo(h,d,b);case 22:return Qi(h,d,b,d.pendingProps);case 24:return pt(d),A=te(Ui),h===null?(N=qe(),N===null&&(N=In,U=Le(),N.pooledCache=U,U.refCount++,U!==null&&(N.pooledCacheLanes|=b),N=U),d.memoizedState={parent:A,cache:N},Fi(d),Ve(d,Ui,N)):((h.lanes&b)!==0&&(ea(h,d),ao(d,null,null,b),ga()),N=h.memoizedState,U=d.memoizedState,N.parent!==A?(N={parent:A,cache:A},d.memoizedState=N,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=N),Ve(d,Ui,A)):(A=U.cache,Ve(d,Ui,A),A!==N.cache&&Et(d,[Ui],b,!0))),ye(h,d,d.pendingProps.children,b),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function uo(h){h.flags|=4}function Tp(h){zs&&(h.flags|=8)}function nS(h,d){if(h!==null&&h.child===d.child)return!1;if((d.flags&16)!==0)return!0;for(h=d.child;h!==null;){if((h.flags&8218)!==0||(h.subtreeFlags&8218)!==0)return!0;h=h.sibling}return!1}function y0(h,d,b,A){if(Bn)for(b=d.child;b!==null;){if(b.tag===5||b.tag===6)zp(h,b.stateNode);else if(!(b.tag===4||Rr&&b.tag===27)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===d)break;for(;b.sibling===null;){if(b.return===null||b.return===d)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else if(zs)for(var N=d.child;N!==null;){if(N.tag===5){var U=N.stateNode;b&&A&&(U=RS(U,N.type,N.memoizedProps)),zp(h,U)}else if(N.tag===6)U=N.stateNode,b&&A&&(U=X0(U,N.memoizedProps)),zp(h,U);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)U=N.child,U!==null&&(U.return=N),y0(h,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===d)break;for(;N.sibling===null;){if(N.return===null||N.return===d)return;N=N.return}N.sibling.return=N.return,N=N.sibling}}function iS(h,d,b,A){var N=!1;if(zs)for(var U=d.child;U!==null;){if(U.tag===5){var K=U.stateNode;b&&A&&(K=RS(K,U.type,U.memoizedProps)),q0(h,K)}else if(U.tag===6)K=U.stateNode,b&&A&&(K=X0(K,U.memoizedProps)),q0(h,K);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)N=U.child,N!==null&&(N.return=U),iS(h,U,!0,!0),N=!0;else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===d)break;for(;U.sibling===null;){if(U.return===null||U.return===d)return N;U=U.return}U.sibling.return=U.return,U=U.sibling}return N}function rS(h,d){if(zs&&nS(h,d)){h=d.stateNode;var b=h.containerInfo,A=W0();iS(A,d,!1,!1),h.pendingChildren=A,uo(d),IS(b,A)}}function _0(h,d,b,A){if(Bn)h.memoizedProps!==A&&uo(d);else if(zs){var N=h.stateNode,U=h.memoizedProps;if((h=nS(h,d))||U!==A){var K=Hr.current;U=CS(N,b,U,A,!h,null),U===N?d.stateNode=N:(Tp(d),fs(U,b,A,K)&&uo(d),d.stateNode=U,h&&y0(U,d,!1,!1))}else d.stateNode=N}}function Fa(h,d,b,A,N){if((h.mode&32)!==0&&(b===null?Bp(d,A):Jh(d,b,A))){if(h.flags|=16777216,(N&335544128)===N||D0(d,A))if(ji(h.stateNode,d,A))h.flags|=8192;else if(zn())h.flags|=8192;else throw Ha=Dl,hv}else h.flags&=-16777217}function kh(h,d){if(s_(d)){if(h.flags|=16777216,!o_(d))if(zn())h.flags|=8192;else throw Ha=Dl,hv}else h.flags&=-16777217}function Ap(h,d){d!==null&&(h.flags|=4),h.flags&16384&&(d=h.tag!==22?D():536870912,h.lanes|=d,ld|=d)}function Uh(h,d){if(!Un)switch(h.tailMode){case"hidden":d=h.tail;for(var b=null;d!==null;)d.alternate!==null&&(b=d),d=d.sibling;b===null?h.tail=null:b.sibling=null;break;case"collapsed":b=h.tail;for(var A=null;b!==null;)b.alternate!==null&&(A=b),b=b.sibling;A===null?d||h.tail===null?h.tail=null:h.tail.sibling=null:A.sibling=null}}function Si(h){var d=h.alternate!==null&&h.alternate.child===h.child,b=0,A=0;if(d)for(var N=h.child;N!==null;)b|=N.lanes|N.childLanes,A|=N.subtreeFlags&65011712,A|=N.flags&65011712,N.return=h,N=N.sibling;else for(N=h.child;N!==null;)b|=N.lanes|N.childLanes,A|=N.subtreeFlags,A|=N.flags,N.return=h,N=N.sibling;return h.subtreeFlags|=A,h.childLanes=b,d}function aS(h,d,b){var A=d.pendingProps;switch(Ee(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Si(d),null;case 1:return Si(d),null;case 3:return b=d.stateNode,A=null,h!==null&&(A=h.memoizedState.cache),d.memoizedState.cache!==A&&(d.flags|=2048),lt(Ui),be(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(h===null||h.child===null)&&(je(d)?uo(d):h===null||h.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Re())),rS(h,d),Si(d),null;case 26:if(yo){var N=d.type,U=d.memoizedState;return h===null?(uo(d),U!==null?(Si(d),kh(d,U)):(Si(d),Fa(d,N,null,A,b))):U?U!==h.memoizedState?(uo(d),Si(d),kh(d,U)):(Si(d),d.flags&=-16777217):(U=h.memoizedProps,Bn?U!==A&&uo(d):_0(h,d,N,A),Si(d),Fa(d,N,U,A,b)),null}case 27:if(Rr){if(dt(d),b=ia.current,N=d.type,h!==null&&d.stateNode!=null)Bn?h.memoizedProps!==A&&uo(d):_0(h,d,N,A);else{if(!A){if(d.stateNode===null)throw Error(r(166));return Si(d),null}h=Hr.current,je(d)?Ye(d,h):(h=tv(N,A,b,h,!0),d.stateNode=h,uo(d))}return Si(d),null}case 5:if(dt(d),N=d.type,h!==null&&d.stateNode!=null)_0(h,d,N,A);else{if(!A){if(d.stateNode===null)throw Error(r(166));return Si(d),null}if(U=Hr.current,je(d))Ye(d,U),qS(d.stateNode,N,A,U)&&(d.flags|=64);else{var K=N0(N,A,ia.current,U,d);Tp(d),y0(K,d,!1,!1),d.stateNode=K,fs(K,N,A,U)&&uo(d)}}return Si(d),Fa(d,d.type,h===null?null:h.memoizedProps,d.pendingProps,b),null;case 6:if(h&&d.stateNode!=null)b=h.memoizedProps,Bn?b!==A&&uo(d):zs&&(b!==A?(h=ia.current,b=Hr.current,Tp(d),d.stateNode=gu(A,h,b,d)):d.stateNode=h.stateNode);else{if(typeof A!="string"&&d.stateNode===null)throw Error(r(166));if(h=ia.current,b=Hr.current,je(d)){if(!Li)throw Error(r(176));if(h=d.stateNode,b=d.memoizedProps,A=null,N=Pr,N!==null)switch(N.tag){case 27:case 5:A=N.memoizedProps}mC(h,b,d,A)||ve(d,!0)}else Tp(d),d.stateNode=gu(A,h,b,d)}return Si(d),null;case 31:if(b=d.memoizedState,h===null||h.memoizedState!==null){if(A=je(d),b!==null){if(h===null){if(!A)throw Error(r(318));if(!Li)throw Error(r(556));if(h=d.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(557));Q0(h,d)}else At(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Si(d),h=!1}else b=Re(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=b),h=!0;if(!h)return d.flags&256?(vt(d),d):(vt(d),null);if((d.flags&128)!==0)throw Error(r(558))}return Si(d),null;case 13:if(A=d.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(N=je(d),A!==null&&A.dehydrated!==null){if(h===null){if(!N)throw Error(r(318));if(!Li)throw Error(r(344));if(N=d.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(r(317));jS(N,d)}else At(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Si(d),N=!1}else N=Re(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=N),N=!0;if(!N)return d.flags&256?(vt(d),d):(vt(d),null)}return vt(d),(d.flags&128)!==0?(d.lanes=b,d):(b=A!==null,h=h!==null&&h.memoizedState!==null,b&&(A=d.child,N=null,A.alternate!==null&&A.alternate.memoizedState!==null&&A.alternate.memoizedState.cachePool!==null&&(N=A.alternate.memoizedState.cachePool.pool),U=null,A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(U=A.memoizedState.cachePool.pool),U!==N&&(A.flags|=2048)),b!==h&&b&&(d.child.flags|=8192),Ap(d,d.updateQueue),Si(d),null);case 4:return be(),rS(h,d),h===null&&pi(d.stateNode.containerInfo),Si(d),null;case 10:return lt(d.type),Si(d),null;case 19:if(_(er),A=d.memoizedState,A===null)return Si(d),null;if(N=(d.flags&128)!==0,U=A.rendering,U===null)if(N)Uh(A,!1);else{if(Wi!==0||h!==null&&(h.flags&128)!==0)for(h=d.child;h!==null;){if(U=Ct(h),U!==null){for(d.flags|=128,Uh(A,!1),h=U.updateQueue,d.updateQueue=h,Ap(d,h),d.subtreeFlags=0,h=b,b=d.child;b!==null;)Fg(b,h),b=b.sibling;return x(er,er.current&1|2),Un&&Me(d,A.treeForkCount),d.child}h=h.sibling}A.tail!==null&&ba()>xc&&(d.flags|=128,N=!0,Uh(A,!1),d.lanes=4194304)}else{if(!N)if(h=Ct(U),h!==null){if(d.flags|=128,N=!0,h=h.updateQueue,d.updateQueue=h,Ap(d,h),Uh(A,!0),A.tail===null&&A.tailMode==="hidden"&&!U.alternate&&!Un)return Si(d),null}else 2*ba()-A.renderingStartTime>xc&&b!==536870912&&(d.flags|=128,N=!0,Uh(A,!1),d.lanes=4194304);A.isBackwards?(U.sibling=d.child,d.child=U):(h=A.last,h!==null?h.sibling=U:d.child=U,A.last=U)}return A.tail!==null?(h=A.tail,A.rendering=h,A.tail=h.sibling,A.renderingStartTime=ba(),h.sibling=null,b=er.current,x(er,N?b&1|2:b&1),Un&&Me(d,A.treeForkCount),h):(Si(d),null);case 22:case 23:return vt(d),Z(),A=d.memoizedState!==null,h!==null?h.memoizedState!==null!==A&&(d.flags|=8192):A&&(d.flags|=8192),A?(b&536870912)!==0&&(d.flags&128)===0&&(Si(d),d.subtreeFlags&6&&(d.flags|=8192)):Si(d),b=d.updateQueue,b!==null&&Ap(d,b.retryQueue),b=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),A=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(A=d.memoizedState.cachePool.pool),A!==b&&(d.flags|=2048),h!==null&&_(dc),null;case 24:return b=null,h!==null&&(b=h.memoizedState.cache),d.memoizedState.cache!==b&&(d.flags|=2048),lt(Ui),Si(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function b0(h,d){switch(Ee(d),d.tag){case 1:return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 3:return lt(Ui),be(),h=d.flags,(h&65536)!==0&&(h&128)===0?(d.flags=h&-65537|128,d):null;case 26:case 27:case 5:return dt(d),null;case 31:if(d.memoizedState!==null){if(vt(d),d.alternate===null)throw Error(r(340));At()}return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 13:if(vt(d),h=d.memoizedState,h!==null&&h.dehydrated!==null){if(d.alternate===null)throw Error(r(340));At()}return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 19:return _(er),null;case 4:return be(),null;case 10:return lt(d.type),null;case 22:case 23:return vt(d),Z(),h!==null&&_(dc),h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 24:return lt(Ui),null;case 25:return null;default:return null}}function sS(h,d){switch(Ee(d),d.tag){case 3:lt(Ui),be();break;case 26:case 27:case 5:dt(d);break;case 4:be();break;case 31:d.memoizedState!==null&&vt(d);break;case 13:vt(d);break;case 19:_(er);break;case 10:lt(d.type);break;case 22:case 23:vt(d),Z(),h!==null&&_(dc);break;case 24:lt(Ui)}}function _l(h,d){try{var b=d.updateQueue,A=b!==null?b.lastEffect:null;if(A!==null){var N=A.next;b=N;do{if((b.tag&h)===h){A=void 0;var U=b.create,K=b.inst;A=U(),K.destroy=A}b=b.next}while(b!==N)}}catch(fe){cn(d,d.return,fe)}}function bl(h,d,b){try{var A=d.updateQueue,N=A!==null?A.lastEffect:null;if(N!==null){var U=N.next;A=U;do{if((A.tag&h)===h){var K=A.inst,fe=K.destroy;if(fe!==void 0){K.destroy=void 0,N=d;var ze=b,st=fe;try{st()}catch(_t){cn(N,ze,_t)}}}A=A.next}while(A!==U)}}catch(_t){cn(d,d.return,_t)}}function Fh(h){var d=h.updateQueue;if(d!==null){var b=h.stateNode;try{Da(d,b)}catch(A){cn(h,h.return,A)}}}function Mg(h,d,b){b.props=gl(h.type,h.memoizedProps),b.state=h.memoizedState;try{b.componentWillUnmount()}catch(A){cn(h,d,A)}}function zh(h,d){try{var b=h.ref;if(b!==null){switch(h.tag){case 26:case 27:case 5:var A=Kh(h.stateNode);break;case 30:A=h.stateNode;break;default:A=h.stateNode}typeof b=="function"?h.refCleanup=b(A):b.current=A}}catch(N){cn(h,d,N)}}function _a(h,d){var b=h.ref,A=h.refCleanup;if(b!==null)if(typeof A=="function")try{A()}catch(N){cn(h,d,N)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(N){cn(h,d,N)}else b.current=null}function yf(h){var d=h.type,b=h.memoizedProps,A=h.stateNode;try{bS(A,d,b,h)}catch(N){cn(h,h.return,N)}}function Mp(h,d,b){try{xS(h.stateNode,h.type,b,d,h)}catch(A){cn(h,h.return,A)}}function x0(h){return h.tag===5||h.tag===3||(yo?h.tag===26:!1)||(Rr?h.tag===27&&If(h.type):!1)||h.tag===4}function lu(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||x0(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(Rr&&h.tag===27&&If(h.type)||h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Cg(h,d,b){var A=h.tag;if(A===5||A===6)h=h.stateNode,d?wS(b,h,d):V0(b,h);else if(A!==4&&(Rr&&A===27&&If(h.type)&&(b=h.stateNode,d=null),h=h.child,h!==null))for(Cg(h,d,b),h=h.sibling;h!==null;)Cg(h,d,b),h=h.sibling}function Cp(h,d,b){var A=h.tag;if(A===5||A===6)h=h.stateNode,d?SS(b,h,d):B0(b,h);else if(A!==4&&(Rr&&A===27&&If(h.type)&&(b=h.stateNode),h=h.child,h!==null))for(Cp(h,d,b),h=h.sibling;h!==null;)Cp(h,d,b),h=h.sibling}function S0(h,d,b){h=h.containerInfo;try{$0(h,b)}catch(A){cn(d,d.return,A)}}function oS(h){var d=h.stateNode,b=h.memoizedProps;try{yr(h.type,b,d,h)}catch(A){cn(h,h.return,A)}}function fC(h,d){for(Gg(h.containerInfo),hr=d;hr!==null;)if(h=hr,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,hr=d;else for(;hr!==null;){h=hr;var b=h.alternate;switch(d=h.flags,h.tag){case 0:if((d&4)!==0&&(d=h.updateQueue,d=d!==null?d.events:null,d!==null))for(var A=0;A<d.length;A++){var N=d[A];N.ref.impl=N.nextImpl}break;case 11:case 15:break;case 1:if((d&1024)!==0&&b!==null){d=void 0,A=h,N=b.memoizedProps,b=b.memoizedState;var U=A.stateNode;try{var K=gl(A.type,N);d=U.getSnapshotBeforeUpdate(K,b),U.__reactInternalSnapshotBeforeUpdate=d}catch(fe){cn(A,A.return,fe)}}break;case 3:(d&1024)!==0&&Bn&&G0(h.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=h.sibling,d!==null){d.return=h.return,hr=d;break}hr=h.return}}function lS(h,d,b){var A=b.flags;switch(b.tag){case 0:case 11:case 15:za(h,b),A&4&&_l(5,b);break;case 1:if(za(h,b),A&4)if(h=b.stateNode,d===null)try{h.componentDidMount()}catch(K){cn(b,b.return,K)}else{var N=gl(b.type,d.memoizedProps);d=d.memoizedState;try{h.componentDidUpdate(N,d,h.__reactInternalSnapshotBeforeUpdate)}catch(K){cn(b,b.return,K)}}A&64&&Fh(b),A&512&&zh(b,b.return);break;case 3:if(za(h,b),A&64&&(A=b.updateQueue,A!==null)){if(h=null,b.child!==null)switch(b.child.tag){case 27:case 5:h=Kh(b.child.stateNode);break;case 1:h=b.child.stateNode}try{Da(A,h)}catch(K){cn(b,b.return,K)}}break;case 27:Rr&&d===null&&A&4&&oS(b);case 26:case 5:if(za(h,b),d===null){if(A&4)yf(b);else if(A&64){h=b.type,d=b.memoizedProps,N=b.stateNode;try{GS(N,h,d,b)}catch(K){cn(b,b.return,K)}}}A&512&&zh(b,b.return);break;case 12:za(h,b);break;case 31:za(h,b),A&4&&fo(h,b);break;case 13:za(h,b),A&4&&Rp(h,b),A&64&&(A=b.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(b=hC.bind(null,b),Zg(A,b))));break;case 22:if(A=b.memoizedState!==null||tr,!A){d=d!==null&&d.memoizedState!==null||nr,N=tr;var U=nr;tr=A,(nr=d)&&!U?po(h,b,(b.subtreeFlags&8772)!==0):za(h,b),tr=N,nr=U}break;case 30:break;default:za(h,b)}}function w0(h){var d=h.alternate;d!==null&&(h.alternate=null,w0(d)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(d=h.stateNode,d!==null&&Wg(d)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function co(h,d,b){for(b=b.child;b!==null;)Ip(h,d,b),b=b.sibling}function Ip(h,d,b){if(ps&&typeof ps.onCommitFiberUnmount=="function")try{ps.onCommitFiberUnmount(Nf,b)}catch{}switch(b.tag){case 26:if(yo){nr||_a(b,d),co(h,d,b),b.memoizedState?fc(b.memoizedState):b.stateNode&&a_(b.stateNode);break}case 27:if(Rr){nr||_a(b,d);var A=Gi,N=dr;If(b.type)&&(Gi=b.stateNode,dr=!1),co(h,d,b),jr(b.stateNode),Gi=A,dr=N;break}case 5:nr||_a(b,d);case 6:if(Bn){if(A=Gi,N=dr,Gi=null,co(h,d,b),Gi=A,dr=N,Gi!==null)if(dr)try{j0(Gi,b.stateNode)}catch(U){cn(b,d,U)}else try{ES(Gi,b.stateNode)}catch(U){cn(b,d,U)}}else co(h,d,b);break;case 18:Bn&&Gi!==null&&(dr?Qg(Gi,b.stateNode):e_(Gi,b.stateNode));break;case 4:Bn?(A=Gi,N=dr,Gi=b.stateNode.containerInfo,dr=!0,co(h,d,b),Gi=A,dr=N):(zs&&S0(b.stateNode,b,W0()),co(h,d,b));break;case 0:case 11:case 14:case 15:bl(2,b,d),nr||bl(4,b,d),co(h,d,b);break;case 1:nr||(_a(b,d),A=b.stateNode,typeof A.componentWillUnmount=="function"&&Mg(b,d,A)),co(h,d,b);break;case 21:co(h,d,b);break;case 22:nr=(A=nr)||b.memoizedState!==null,co(h,d,b),nr=A;break;default:co(h,d,b)}}function fo(h,d){if(Li&&d.memoizedState===null&&(h=d.alternate,h!==null&&(h=h.memoizedState,h!==null))){h=h.dehydrated;try{gC(h)}catch(b){cn(d,d.return,b)}}}function Rp(h,d){if(Li&&d.memoizedState===null&&(h=d.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{vC(h)}catch(b){cn(d,d.return,b)}}function ho(h){switch(h.tag){case 31:case 13:case 19:var d=h.stateNode;return d===null&&(d=h.stateNode=new m_),d;case 22:return h=h.stateNode,d=h._retryCache,d===null&&(d=h._retryCache=new m_),d;default:throw Error(r(435,h.tag))}}function uu(h,d){var b=ho(h);d.forEach(function(A){if(!b.has(A)){b.add(A);var N=dC.bind(null,h,A);A.then(N,N)}})}function Br(h,d){var b=d.deletions;if(b!==null)for(var A=0;A<b.length;A++){var N=b[A],U=h,K=d;if(Bn){var fe=K;e:for(;fe!==null;){switch(fe.tag){case 27:if(Rr){if(If(fe.type)){Gi=fe.stateNode,dr=!1;break e}break}case 5:Gi=fe.stateNode,dr=!1;break e;case 3:case 4:Gi=fe.stateNode.containerInfo,dr=!0;break e}fe=fe.return}if(Gi===null)throw Error(r(160));Ip(U,K,N),Gi=null,dr=!1}else Ip(U,K,N);U=N.alternate,U!==null&&(U.return=null),N.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)Pp(d,h),d=d.sibling}function Pp(h,d){var b=h.alternate,A=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:Br(d,h),Vr(h),A&4&&(bl(3,h,h.return),_l(3,h),bl(5,h,h.return));break;case 1:Br(d,h),Vr(h),A&512&&(nr||b===null||_a(b,b.return)),A&64&&tr&&(h=h.updateQueue,h!==null&&(A=h.callbacks,A!==null&&(b=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=b===null?A:b.concat(A))));break;case 26:if(yo){var N=ci;if(Br(d,h),Vr(h),A&512&&(nr||b===null||_a(b,b.return)),A&4){A=b!==null?b.memoizedState:null;var U=h.memoizedState;b===null?U===null?h.stateNode===null?h.stateNode=KS(N,h.type,h.memoizedProps,h):r_(N,h.type,h.stateNode):h.stateNode=i_(N,U,h.memoizedProps):A!==U?(A===null?b.stateNode!==null&&a_(b.stateNode):fc(A),U===null?r_(N,h.type,h.stateNode):i_(N,U,h.memoizedProps)):U===null&&h.stateNode!==null&&Mp(h,h.memoizedProps,b.memoizedProps)}break}case 27:if(Rr){Br(d,h),Vr(h),A&512&&(nr||b===null||_a(b,b.return)),b!==null&&A&4&&Mp(h,h.memoizedProps,b.memoizedProps);break}case 5:if(Br(d,h),Vr(h),A&512&&(nr||b===null||_a(b,b.return)),Bn){if(h.flags&32){N=h.stateNode;try{H0(N)}catch(mt){cn(h,h.return,mt)}}A&4&&h.stateNode!=null&&(N=h.memoizedProps,Mp(h,N,b!==null?b.memoizedProps:N)),A&1024&&(id=!0)}else zs&&h.alternate!==null&&(h.alternate.stateNode=h.stateNode);break;case 6:if(Br(d,h),Vr(h),A&4&&Bn){if(h.stateNode===null)throw Error(r(162));A=h.memoizedProps,b=b!==null?b.memoizedProps:A,N=h.stateNode;try{_S(N,b,A)}catch(mt){cn(h,h.return,mt)}}break;case 3:if(yo?(ZS(),N=ci,ci=Hp(d.containerInfo),Br(d,h),ci=N):Br(d,h),Vr(h),A&4){if(Bn&&Li&&b!==null&&b.memoizedState.isDehydrated)try{WS(d.containerInfo)}catch(mt){cn(h,h.return,mt)}if(zs){A=d.containerInfo,b=d.pendingChildren;try{$0(A,b)}catch(mt){cn(h,h.return,mt)}}}id&&(id=!1,Ig(h));break;case 4:yo?(b=ci,ci=Hp(h.stateNode.containerInfo),Br(d,h),Vr(h),ci=b):(Br(d,h),Vr(h)),A&4&&zs&&S0(h.stateNode,h,h.stateNode.pendingChildren);break;case 12:Br(d,h),Vr(h);break;case 31:Br(d,h),Vr(h),A&4&&(A=h.updateQueue,A!==null&&(h.updateQueue=null,uu(h,A)));break;case 13:Br(d,h),Vr(h),h.child.flags&8192&&h.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(Jp=ba()),A&4&&(A=h.updateQueue,A!==null&&(h.updateQueue=null,uu(h,A)));break;case 22:N=h.memoizedState!==null;var K=b!==null&&b.memoizedState!==null,fe=tr,ze=nr;if(tr=fe||N,nr=ze||K,Br(d,h),nr=ze,tr=fe,Vr(h),A&8192&&(d=h.stateNode,d._visibility=N?d._visibility&-2:d._visibility|1,N&&(b===null||K||tr||nr||Qu(h)),Bn)){e:if(b=null,Bn)for(d=h;;){if(d.tag===5||yo&&d.tag===26){if(b===null){K=b=d;try{U=K.stateNode,N?pC(U):AS(K.stateNode,K.memoizedProps)}catch(mt){cn(K,K.return,mt)}}}else if(d.tag===6){if(b===null){K=d;try{var st=K.stateNode;N?TS(st):MS(st,K.memoizedProps)}catch(mt){cn(K,K.return,mt)}}}else if(d.tag===18){if(b===null){K=d;try{var _t=K.stateNode;N?$S(_t):XS(K.stateNode)}catch(mt){cn(K,K.return,mt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===h)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;b===d&&(b=null),d=d.return}b===d&&(b=null),d.sibling.return=d.return,d=d.sibling}}A&4&&(A=h.updateQueue,A!==null&&(b=A.retryQueue,b!==null&&(A.retryQueue=null,uu(h,b))));break;case 19:Br(d,h),Vr(h),A&4&&(A=h.updateQueue,A!==null&&(h.updateQueue=null,uu(h,A)));break;case 30:break;case 21:break;default:Br(d,h),Vr(h)}}function Vr(h){var d=h.flags;if(d&2){try{for(var b,A=h.return;A!==null;){if(x0(A)){b=A;break}A=A.return}if(Bn){if(b==null)throw Error(r(160));switch(b.tag){case 27:if(Rr){var N=b.stateNode,U=lu(h);Cp(h,U,N);break}case 5:var K=b.stateNode;b.flags&32&&(H0(K),b.flags&=-33);var fe=lu(h);Cp(h,fe,K);break;case 3:case 4:var ze=b.stateNode.containerInfo,st=lu(h);Cg(h,st,ze);break;default:throw Error(r(161))}}}catch(_t){cn(h,h.return,_t)}h.flags&=-3}d&4096&&(h.flags&=-4097)}function Ig(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var d=h;Ig(d),d.tag===5&&d.flags&1024&&k0(d.stateNode),h=h.sibling}}function za(h,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)lS(h,d.alternate,d),d=d.sibling}function Qu(h){for(h=h.child;h!==null;){var d=h;switch(d.tag){case 0:case 11:case 14:case 15:bl(4,d,d.return),Qu(d);break;case 1:_a(d,d.return);var b=d.stateNode;typeof b.componentWillUnmount=="function"&&Mg(d,d.return,b),Qu(d);break;case 27:Rr&&jr(d.stateNode);case 26:case 5:_a(d,d.return),Qu(d);break;case 22:d.memoizedState===null&&Qu(d);break;case 30:Qu(d);break;default:Qu(d)}h=h.sibling}}function po(h,d,b){for(b=b&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var A=d.alternate,N=h,U=d,K=U.flags;switch(U.tag){case 0:case 11:case 15:po(N,U,b),_l(4,U);break;case 1:if(po(N,U,b),A=U,N=A.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(st){cn(A,A.return,st)}if(A=U,N=A.updateQueue,N!==null){var fe=A.stateNode;try{var ze=N.shared.hiddenCallbacks;if(ze!==null)for(N.shared.hiddenCallbacks=null,N=0;N<ze.length;N++)Ns(ze[N],fe)}catch(st){cn(A,A.return,st)}}b&&K&64&&Fh(U),zh(U,U.return);break;case 27:Rr&&oS(U);case 26:case 5:po(N,U,b),b&&A===null&&K&4&&yf(U),zh(U,U.return);break;case 12:po(N,U,b);break;case 31:po(N,U,b),b&&K&4&&fo(N,U);break;case 13:po(N,U,b),b&&K&4&&Rp(N,U);break;case 22:U.memoizedState===null&&po(N,U,b),zh(U,U.return);break;case 30:break;default:po(N,U,b)}d=d.sibling}}function Ju(h,d){var b=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),h=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(h=d.memoizedState.cachePool.pool),h!==b&&(h!=null&&h.refCount++,b!=null&&Ze(b))}function E0(h,d){h=null,d.alternate!==null&&(h=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==h&&(d.refCount++,h!=null&&Ze(h))}function Bi(h,d,b,A){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Rg(h,d,b,A),d=d.sibling}function Rg(h,d,b,A){var N=d.flags;switch(d.tag){case 0:case 11:case 15:Bi(h,d,b,A),N&2048&&_l(9,d);break;case 1:Bi(h,d,b,A);break;case 3:Bi(h,d,b,A),N&2048&&(h=null,d.alternate!==null&&(h=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==h&&(d.refCount++,h!=null&&Ze(h)));break;case 12:if(N&2048){Bi(h,d,b,A),h=d.stateNode;try{var U=d.memoizedProps,K=U.id,fe=U.onPostCommit;typeof fe=="function"&&fe(K,d.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(ze){cn(d,d.return,ze)}}else Bi(h,d,b,A);break;case 31:Bi(h,d,b,A);break;case 13:Bi(h,d,b,A);break;case 23:break;case 22:U=d.stateNode,K=d.alternate,d.memoizedState!==null?U._visibility&2?Bi(h,d,b,A):Bh(h,d):U._visibility&2?Bi(h,d,b,A):(U._visibility|=2,ls(h,d,b,A,(d.subtreeFlags&10256)!==0||!1)),N&2048&&Ju(K,d);break;case 24:Bi(h,d,b,A),N&2048&&E0(d.alternate,d);break;default:Bi(h,d,b,A)}}function ls(h,d,b,A,N){for(N=N&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var U=h,K=d,fe=b,ze=A,st=K.flags;switch(K.tag){case 0:case 11:case 15:ls(U,K,fe,ze,N),_l(8,K);break;case 23:break;case 22:var _t=K.stateNode;K.memoizedState!==null?_t._visibility&2?ls(U,K,fe,ze,N):Bh(U,K):(_t._visibility|=2,ls(U,K,fe,ze,N)),N&&st&2048&&Ju(K.alternate,K);break;case 24:ls(U,K,fe,ze,N),N&&st&2048&&E0(K.alternate,K);break;default:ls(U,K,fe,ze,N)}d=d.sibling}}function Bh(h,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var b=h,A=d,N=A.flags;switch(A.tag){case 22:Bh(b,A),N&2048&&Ju(A.alternate,A);break;case 24:Bh(b,A),N&2048&&E0(A.alternate,A);break;default:Bh(b,A)}d=d.sibling}}function xl(h,d,b){if(h.subtreeFlags&Hs)for(h=h.child;h!==null;)ec(h,d,b),h=h.sibling}function ec(h,d,b){switch(h.tag){case 26:if(xl(h,d,b),h.flags&Hs)if(h.memoizedState!==null)QS(b,ci,h.memoizedState,h.memoizedProps);else{var A=h.stateNode,N=h.type;h=h.memoizedProps,((d&335544128)===d||D0(N,h))&&qg(b,A,N,h)}break;case 5:xl(h,d,b),h.flags&Hs&&(A=h.stateNode,N=h.type,h=h.memoizedProps,((d&335544128)===d||D0(N,h))&&qg(b,A,N,h));break;case 3:case 4:yo?(A=ci,ci=Hp(h.stateNode.containerInfo),xl(h,d,b),ci=A):xl(h,d,b);break;case 22:h.memoizedState===null&&(A=h.alternate,A!==null&&A.memoizedState!==null?(A=Hs,Hs=16777216,xl(h,d,b),Hs=A):xl(h,d,b));break;default:xl(h,d,b)}}function Pg(h){var d=h.alternate;if(d!==null&&(h=d.child,h!==null)){d.child=null;do d=h.sibling,h.sibling=null,h=d;while(h!==null)}}function Vh(h){var d=h.deletions;if((h.flags&16)!==0){if(d!==null)for(var b=0;b<d.length;b++){var A=d[b];hr=A,ks(A,h)}Pg(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Ng(h),h=h.sibling}function Ng(h){switch(h.tag){case 0:case 11:case 15:Vh(h),h.flags&2048&&bl(9,h,h.return);break;case 3:Vh(h);break;case 12:Vh(h);break;case 22:var d=h.stateNode;h.memoizedState!==null&&d._visibility&2&&(h.return===null||h.return.tag!==13)?(d._visibility&=-3,Np(h)):Vh(h);break;default:Vh(h)}}function Np(h){var d=h.deletions;if((h.flags&16)!==0){if(d!==null)for(var b=0;b<d.length;b++){var A=d[b];hr=A,ks(A,h)}Pg(h)}for(h=h.child;h!==null;){switch(d=h,d.tag){case 0:case 11:case 15:bl(8,d,d.return),Np(d);break;case 22:b=d.stateNode,b._visibility&2&&(b._visibility&=-3,Np(d));break;default:Np(d)}h=h.sibling}}function ks(h,d){for(;hr!==null;){var b=hr;switch(b.tag){case 0:case 11:case 15:bl(8,b,d);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var A=b.memoizedState.cachePool.pool;A!=null&&A.refCount++}break;case 24:Ze(b.memoizedState.cache)}if(A=b.child,A!==null)A.return=b,hr=A;else e:for(b=h;hr!==null;){A=hr;var N=A.sibling,U=A.return;if(w0(A),A===b){hr=null;break e}if(N!==null){N.return=U,hr=N;break e}hr=U}}}function tc(h){var d=bn(h);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(r(364));return d}if(h=cr(h),h===null)throw Error(r(362));return h.stateNode.current}function nc(h,d){var b=h.tag;switch(d.$$typeof){case Ao:if(h.type===d.value)return!0;break;case ad:e:{for(d=d.value,h=[h,0],b=0;b<h.length;){var A=h[b++],N=A.tag,U=h[b++],K=d[U];if(N!==5&&N!==26&&N!==27||!uc(A)){for(;K!=null&&nc(A,K);)U++,K=d[U];if(U===d.length){d=!0;break e}else for(A=A.child;A!==null;)h.push(A,U),A=A.sibling}}d=!1}return d;case sd:if((b===5||b===26||b===27)&&z0(h.stateNode,d.value))return!0;break;case vc:if((b===5||b===6||b===26||b===27)&&(h=Vp(h),h!==null&&0<=h.indexOf(d.value)))return!0;break;case Zp:if((b===5||b===26||b===27)&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function jh(h){switch(h.$$typeof){case Ao:return"<"+(g(h.value)||"Unknown")+">";case ad:return":has("+(jh(h)||"")+")";case sd:return'[role="'+h.value+'"]';case vc:return'"'+h.value+'"';case Zp:return'[data-testname="'+h.value+'"]';default:throw Error(r(365))}}function Hh(h,d){var b=[];h=[h,0];for(var A=0;A<h.length;){var N=h[A++],U=N.tag,K=h[A++],fe=d[K];if(U!==5&&U!==26&&U!==27||!uc(N)){for(;fe!=null&&nc(N,fe);)K++,fe=d[K];if(K===d.length)b.push(N);else for(N=N.child;N!==null;)h.push(N,K),N=N.sibling}}return b}function us(h,d){if(!Ir)throw Error(r(363));h=tc(h),h=Hh(h,d),d=[],h=Array.from(h);for(var b=0;b<h.length;){var A=h[b++],N=A.tag;if(N===5||N===26||N===27)uc(A)||d.push(A.stateNode);else for(A=A.child;A!==null;)h.push(A),A=A.sibling}return d}function Di(){return(Dn&2)!==0&&Fn!==0?Fn&-Fn:Zt.T!==null?se():Qh()}function cu(){if(Wa===0)if((Fn&536870912)===0||Un){var h=Pf;Pf<<=1,(Pf&3932160)===0&&(Pf=262144),Wa=h}else Wa=536870912;return h=ms.current,h!==null&&(h.flags|=32),Wa}function Vi(h,d,b){(h===In&&(fi===2||fi===9)||h.cancelPendingCommit!==null)&&(Ji(h,0),wl(h,Fn,Wa,!1)),z(h,b),((Dn&2)===0||h!==In)&&(h===In&&((Dn&2)===0&&(bc|=b),Wi===4&&wl(h,Fn,Wa,!1)),Tt(h))}function qo(h,d,b){if((Dn&6)!==0)throw Error(r(327));var A=!b&&(d&127)===0&&(d&h.expiredLanes)===0||I(h,d),N=A?fS(h,d):El(h,d,!0),U=A;do{if(N===0){yc&&!A&&wl(h,d,0,!1);break}else{if(b=h.current.alternate,U&&!uS(b)){N=El(h,d,!1),U=!1;continue}if(N===2){if(U=d,h.errorRecoveryDisabledLanes&U)var K=0;else K=h.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){d=K;e:{var fe=h;N=Qp;var ze=Li&&fe.current.memoizedState.isDehydrated;if(ze&&(Ji(fe,K).flags|=256),K=El(fe,K,!1),K!==2){if(_c&&!ze){fe.errorRecoveryDisabledLanes|=U,bc|=U,N=4;break e}U=vs,vs=N,U!==null&&(vs===null?vs=U:vs.push.apply(vs,U))}N=K}if(U=!1,N!==2)continue}}if(N===1){Ji(h,0),wl(h,d,0,!0);break}e:{switch(A=h,U=N,U){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:wl(A,d,Wa,!Ko);break e;case 2:vs=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(N=Jp+300-ba(),10<N)){if(wl(A,d,Wa,!Ko),w(A,0,!0)!==0)break e;Fl=d,A.timeoutHandle=O0(Sl.bind(null,A,b,vs,em,pv,d,Wa,bc,ld,Ko,U,"Throttled",-0,0),N);break e}Sl(A,b,vs,em,pv,d,Wa,bc,ld,Ko,U,null,-0,0)}}break}while(!0);Tt(h)}function Sl(h,d,b,A,N,U,K,fe,ze,st,_t,mt,Nt,yn){if(h.timeoutHandle=hs,mt=d.subtreeFlags,mt&8192||(mt&16785408)===16785408){mt=L0(),ec(d,U,mt);var pr=(U&62914560)===U?Jp-ba():(U&4194048)===U?Ff-ba():0;if(pr=yS(mt,pr),pr!==null){Fl=U,h.cancelPendingCommit=pr(Al.bind(null,h,d,U,b,A,N,K,fe,ze,_t,mt,null,Nt,yn)),wl(h,U,K,!st);return}}Al(h,d,U,b,A,N,K,fe,ze)}function uS(h){for(var d=h;;){var b=d.tag;if((b===0||b===11||b===15)&&d.flags&16384&&(b=d.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var A=0;A<b.length;A++){var N=b[A],U=N.getSnapshot;N=N.value;try{if(!fr(U(),N))return!1}catch{return!1}}if(b=d.child,d.subtreeFlags&16384&&b!==null)b.return=d,d=b;else{if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function wl(h,d,b,A){d&=~od,d&=~bc,h.suspendedLanes|=d,h.pingedLanes&=~d,A&&(h.warmLanes|=d),A=h.expirationTimes;for(var N=d;0<N;){var U=31-ds(N),K=1<<U;A[U]=-1,N&=~K}b!==0&&F(h,b,d)}function Og(){return(Dn&6)===0?(gt(0),!1):!0}function Dg(){if(Ln!==null){if(fi===0)var h=Ln.return;else h=Ln,Xo=Ei=null,Kt(h),pc=null,Of=0,h=Ln;for(;h!==null;)sS(h.alternate,h),h=h.return;Ln=null}}function Ji(h,d){var b=h.timeoutHandle;b!==hs&&(h.timeoutHandle=hs,vS(b)),b=h.cancelPendingCommit,b!==null&&(h.cancelPendingCommit=null,b()),Fl=0,Dg(),In=h,Ln=b=Fs(h.current,null),Fn=d,fi=0,_r=null,Ko=!1,yc=I(h,d),_c=!1,ld=Wa=od=bc=Su=Wi=0,vs=Qp=null,pv=!1,(d&8)!==0&&(d|=d&32);var A=h.entangledLanes;if(A!==0)for(h=h.entanglements,A&=d;0<A;){var N=31-ds(A),U=1<<N;d|=h[N],A&=~U}return Ul=d,Jr(),b}function wi(h,d){xn=null,Zt.H=js,d===Or||d===Eo?(d=Jt(),fi=3):d===hv?(d=Jt(),fi=4):fi=d===Ga?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,_r=d,Ln===null&&(Wi=1,pf(h,we(d,h.current)))}function zn(){var h=ms.current;return h===null?!0:(Fn&4194048)===Fn?gs===null:(Fn&62914560)===Fn||(Fn&536870912)!==0?h===gs:!1}function fu(){var h=Zt.H;return Zt.H=js,h===null?js:h}function Us(){var h=Zt.A;return Zt.A=rd,h}function Gh(){Wi=4,Ko||(Fn&4194048)!==Fn&&ms.current!==null||(yc=!0),(Su&134217727)===0&&(bc&134217727)===0||In===null||wl(In,Fn,Wa,!1)}function El(h,d,b){var A=Dn;Dn|=2;var N=fu(),U=Us();(In!==h||Fn!==d)&&(em=null,Ji(h,d)),d=!1;var K=Wi;e:do try{if(fi!==0&&Ln!==null){var fe=Ln,ze=_r;switch(fi){case 8:Dg(),K=6;break e;case 3:case 2:case 9:case 6:ms.current===null&&(d=!0);var st=fi;if(fi=0,_r=null,Tl(h,fe,ze,st),b&&yc){K=0;break e}break;default:st=fi,fi=0,_r=null,Tl(h,fe,ze,st)}}cS(),K=Wi;break}catch(_t){wi(h,_t)}while(!0);return d&&h.shellSuspendCounter++,Xo=Ei=null,Dn=A,Zt.H=N,Zt.A=U,Ln===null&&(In=null,Fn=0,Jr()),K}function cS(){for(;Ln!==null;)ic(Ln)}function fS(h,d){var b=Dn;Dn|=2;var A=fu(),N=Us();In!==h||Fn!==d?(em=null,xc=ba()+500,Ji(h,d)):yc=I(h,d);e:do try{if(fi!==0&&Ln!==null){d=Ln;var U=_r;t:switch(fi){case 1:fi=0,_r=null,Tl(h,d,U,1);break;case 2:case 9:if(at(U)){fi=0,_r=null,Lg(d);break}d=function(){fi!==2&&fi!==9||In!==h||(fi=7),Tt(h)},U.then(d,d);break e;case 3:fi=7;break e;case 4:fi=5;break e;case 7:at(U)?(fi=0,_r=null,Lg(d)):(fi=0,_r=null,Tl(h,d,U,7));break;case 5:var K=null;switch(Ln.tag){case 26:K=Ln.memoizedState;case 5:case 27:var fe=Ln,ze=fe.type,st=fe.pendingProps;if(K?o_(K):ji(fe.stateNode,ze,st)){fi=0,_r=null;var _t=fe.sibling;if(_t!==null)Ln=_t;else{var mt=fe.return;mt!==null?(Ln=mt,qh(mt)):Ln=null}break t}}fi=0,_r=null,Tl(h,d,U,5);break;case 6:fi=0,_r=null,Tl(h,d,U,6);break;case 8:Dg(),Wi=6;break e;default:throw Error(r(462))}}Wh();break}catch(Nt){wi(h,Nt)}while(!0);return Xo=Ei=null,Zt.H=A,Zt.A=N,Dn=b,Ln!==null?0:(In=null,Fn=0,Jr(),Wi)}function Wh(){for(;Ln!==null&&!e1();)ic(Ln)}function ic(h){var d=v0(h.alternate,h,Ul);h.memoizedProps=h.pendingProps,d===null?qh(h):Ln=d}function Lg(h){var d=h,b=d.alternate;switch(d.tag){case 15:case 0:d=mf(b,d,d.pendingProps,d.type,void 0,Fn);break;case 11:d=mf(b,d,d.pendingProps,d.type.render,d.ref,Fn);break;case 5:Kt(d);default:sS(b,d),d=Ln=Fg(d,Ul),d=v0(b,d,Ul)}h.memoizedProps=h.pendingProps,d===null?qh(h):Ln=d}function Tl(h,d,b,A){Xo=Ei=null,Kt(d),pc=null,Of=0;var N=d.return;try{if(ne(h,N,d,b,Fn)){Wi=1,pf(h,we(b,h.current)),Ln=null;return}}catch(U){if(N!==null)throw Ln=N,U;Wi=1,pf(h,we(b,h.current)),Ln=null;return}d.flags&32768?(Un||A===1?h=!0:yc||(Fn&536870912)!==0?h=!1:(Ko=h=!0,(A===2||A===9||A===3||A===6)&&(A=ms.current,A!==null&&A.tag===13&&(A.flags|=16384))),rc(d,h)):qh(d)}function qh(h){var d=h;do{if((d.flags&32768)!==0){rc(d,Ko);return}h=d.return;var b=aS(d.alternate,d,Ul);if(b!==null){Ln=b;return}if(d=d.sibling,d!==null){Ln=d;return}Ln=d=h}while(d!==null);Wi===0&&(Wi=5)}function rc(h,d){do{var b=b0(h.alternate,h);if(b!==null){b.flags&=32767,Ln=b;return}if(b=h.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!d&&(h=h.sibling,h!==null)){Ln=h;return}Ln=h=b}while(h!==null);Wi=6,Ln=null}function Al(h,d,b,A,N,U,K,fe,ze){h.cancelPendingCommit=null;do Cl();while(br!==0);if((Dn&6)!==0)throw Error(r(327));if(d!==null){if(d===h.current)throw Error(r(177));if(U=d.lanes|d.childLanes,U|=Df,k(h,b,U,K,fe,ze),h===In&&(Ln=In=null,Fn=0),zf=d,Eu=h,Fl=b,ud=U,mv=N,g_=A,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,vr(Wp,function(){return Op(),null})):(h.callbackNode=null,h.callbackPriority=0),A=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||A){A=Zt.T,Zt.T=null,N=vo(),kn(2),K=Dn,Dn|=4;try{fC(h,d,b)}finally{Dn=K,kn(N),Zt.T=A}}br=1,hu(),Ml(),kg()}}function hu(){if(br===1){br=0;var h=Eu,d=zf,b=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||b){b=Zt.T,Zt.T=null;var A=vo();kn(2);var N=Dn;Dn|=4;try{Pp(d,h),gS(h.containerInfo)}finally{Dn=N,kn(A),Zt.T=b}}h.current=d,br=2}}function Ml(){if(br===2){br=0;var h=Eu,d=zf,b=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||b){b=Zt.T,Zt.T=null;var A=vo();kn(2);var N=Dn;Dn|=4;try{lS(h,d.alternate,d)}finally{Dn=N,kn(A),Zt.T=b}}br=3}}function kg(){if(br===4||br===3){br=0,u_();var h=Eu,d=zf,b=Fl,A=g_;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?br=5:(br=0,zf=Eu=null,Ug(h,h.pendingLanes));var N=h.pendingLanes;if(N===0&&(wu=null),W(b),d=d.stateNode,ps&&typeof ps.onCommitFiberRoot=="function")try{ps.onCommitFiberRoot(Nf,d,void 0,(d.current.flags&128)===128)}catch{}if(A!==null){d=Zt.T,N=vo(),kn(2),Zt.T=null;try{for(var U=h.onRecoverableError,K=0;K<A.length;K++){var fe=A[K];U(fe.value,{componentStack:fe.stack})}}finally{Zt.T=d,kn(N)}}(Fl&3)!==0&&Cl(),Tt(h),N=h.pendingLanes,(b&261930)!==0&&(N&42)!==0?h===tm?Qn++:(Qn=0,tm=h):Qn=0,Li&&jp(),gt(0)}}function Ug(h,d){(h.pooledCacheLanes&=d)===0&&(d=h.pooledCache,d!=null&&(h.pooledCache=null,Ze(d)))}function Cl(){return hu(),Ml(),kg(),Op()}function Op(){if(br!==5)return!1;var h=Eu,d=ud;ud=0;var b=W(Fl),A=32>b?32:b;b=Zt.T;var N=vo();try{kn(A),Zt.T=null,A=mv,mv=null;var U=Eu,K=Fl;if(br=0,zf=Eu=null,Fl=0,(Dn&6)!==0)throw Error(r(331));var fe=Dn;if(Dn|=4,Ng(U.current),Rg(U,U.current,K,A),Dn=fe,gt(0,!1),ps&&typeof ps.onPostCommitFiberRoot=="function")try{ps.onPostCommitFiberRoot(Nf,U)}catch{}return!0}finally{kn(N),Zt.T=b,Ug(h,d)}}function ac(h,d,b){d=we(b,d),d=E(h.stateNode,d,2),h=Oa(h,d,2),h!==null&&(z(h,2),Tt(h))}function cn(h,d,b){if(h.tag===3)ac(h,h,b);else for(;d!==null;){if(d.tag===3){ac(d,h,b);break}else if(d.tag===1){var A=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(wu===null||!wu.has(A))){h=we(b,h),b=j(2),A=Oa(d,b,2),A!==null&&($(b,A,d,h),z(A,2),Tt(A));break}}d=d.return}}function $h(h,d,b){var A=h.pingCache;if(A===null){A=h.pingCache=new Gs;var N=new Set;A.set(d,N)}else N=A.get(d),N===void 0&&(N=new Set,A.set(d,N));N.has(b)||(_c=!0,N.add(b),h=hS.bind(null,h,d,b),d.then(h,h))}function hS(h,d,b){var A=h.pingCache;A!==null&&A.delete(d),h.pingedLanes|=h.suspendedLanes&b,h.warmLanes&=~b,In===h&&(Fn&b)===b&&(Wi===4||Wi===3&&(Fn&62914560)===Fn&&300>ba()-Jp?(Dn&2)===0&&Ji(h,0):od|=b,ld===Fn&&(ld=0)),Tt(h)}function dS(h,d){d===0&&(d=D()),h=Ci(h,d),h!==null&&(z(h,d),Tt(h))}function hC(h){var d=h.memoizedState,b=0;d!==null&&(b=d.retryLane),dS(h,b)}function dC(h,d){var b=0;switch(h.tag){case 31:case 13:var A=h.stateNode,N=h.memoizedState;N!==null&&(b=N.retryLane);break;case 19:A=h.stateNode;break;case 22:A=h.stateNode._retryCache;break;default:throw Error(r(314))}A!==null&&A.delete(d),dS(h,b)}function vr(h,d){return Gp(h,d)}function T0(h,d,b,A){this.tag=h,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _f(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Fs(h,d){var b=h.alternate;return b===null?(b=t(h.tag,d,h.key,h.mode),b.elementType=h.elementType,b.type=h.type,b.stateNode=h.stateNode,b.alternate=h,h.alternate=b):(b.pendingProps=d,b.type=h.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=h.flags&65011712,b.childLanes=h.childLanes,b.lanes=h.lanes,b.child=h.child,b.memoizedProps=h.memoizedProps,b.memoizedState=h.memoizedState,b.updateQueue=h.updateQueue,d=h.dependencies,b.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},b.sibling=h.sibling,b.index=h.index,b.ref=h.ref,b.refCleanup=h.refCleanup,b}function Fg(h,d){h.flags&=65011714;var b=h.alternate;return b===null?(h.childLanes=0,h.lanes=d,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=b.childLanes,h.lanes=b.lanes,h.child=b.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=b.memoizedProps,h.memoizedState=b.memoizedState,h.updateQueue=b.updateQueue,h.type=b.type,d=b.dependencies,h.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),h}function du(h,d,b,A,N,U){var K=0;if(A=h,typeof h=="function")_f(h)&&(K=1);else if(typeof h=="string")K=yo&&Rr?Jg(h,b,Hr.current)?26:l_(h)?27:5:yo?Jg(h,b,Hr.current)?26:5:Rr&&l_(h)?27:5;else e:switch(h){case Up:return h=t(31,b,d,N),h.elementType=Up,h.lanes=U,h;case wf:return mo(b.children,N,U,d);case Ef:K=8,N|=24;break;case Tf:return h=t(12,b,d,N|2),h.elementType=Tf,h.lanes=U,h;case jg:return h=t(13,b,d,N),h.elementType=jg,h.lanes=U,h;case pu:return h=t(19,b,d,N),h.elementType=pu,h.lanes=U,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case go:K=10;break e;case kp:K=9;break e;case Xh:K=11;break e;case Hg:K=14;break e;case Ba:K=16,A=null;break e}K=29,b=Error(r(130,h===null?"null":typeof h,"")),A=null}return d=t(K,b,d,N),d.elementType=h,d.type=A,d.lanes=U,d}function mo(h,d,b,A){return h=t(7,h,A,d),h.lanes=b,h}function A0(h,d,b){return h=t(6,h,null,d),h.lanes=b,h}function M0(h){var d=t(18,null,null,0);return d.stateNode=h,d}function C0(h,d,b){return d=t(4,h.children!==null?h.children:[],h.key,d),d.lanes=b,d.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},d}function pS(h,d,b,A,N,U,K,fe,ze){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=hs,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=B(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=B(0),this.hiddenUpdates=B(null),this.identifierPrefix=A,this.onUncaughtError=N,this.onCaughtError=U,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ze,this.incompleteTransitions=new Map}function sc(h,d,b,A,N,U,K,fe,ze,st,_t,mt){return h=new pS(h,d,b,K,ze,st,_t,mt,fe),d=1,U===!0&&(d|=24),U=t(3,null,null,d),h.current=U,U.stateNode=h,d=Le(),d.refCount++,h.pooledCache=d,d.refCount++,U.memoizedState={element:A,isDehydrated:b,cache:d},Fi(U),h}function zg(h){return h?(h=Rl,h):Rl}function Dp(h){var d=h._reactInternals;if(d===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=l(d),h=h!==null?c(h):null,h===null?null:Kh(h.stateNode)}function I0(h,d,b,A,N,U){N=zg(N),A.context===null?A.context=N:A.pendingContext=N,A=ma(d),A.payload={element:b},U=U===void 0?null:U,U!==null&&(A.callback=U),b=Oa(h,A,d),b!==null&&(Vi(b,h,d),Fo(b,h,d))}function bf(h,d){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var b=h.retryLane;h.retryLane=b!==0&&b<d?b:d}}function Lp(h,d){bf(h,d),(h=h.alternate)&&bf(h,d)}var Mn={},Bg=dg,cs=xae,Vg=Object.assign,xf=Symbol.for("react.element"),Il=Symbol.for("react.transitional.element"),Sf=Symbol.for("react.portal"),wf=Symbol.for("react.fragment"),Ef=Symbol.for("react.strict_mode"),Tf=Symbol.for("react.profiler"),kp=Symbol.for("react.consumer"),go=Symbol.for("react.context"),Xh=Symbol.for("react.forward_ref"),jg=Symbol.for("react.suspense"),pu=Symbol.for("react.suspense_list"),Hg=Symbol.for("react.memo"),Ba=Symbol.for("react.lazy"),Up=Symbol.for("react.activity"),R0=Symbol.for("react.memo_cache_sentinel"),mu=Symbol.iterator,oc=Symbol.for("react.client.reference"),lc=Array.isArray,Zt=Bg.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P0=e.rendererVersion,Fp=e.rendererPackageName,Yh=e.extraDevToolsConfig,Kh=e.getPublicInstance,mS=e.getRootHostContext,Zh=e.getChildHostContext,Gg=e.prepareForCommit,gS=e.resetAfterCommit,N0=e.createInstance;e.cloneMutableInstance;var zp=e.appendInitialChild,fs=e.finalizeInitialChildren,Va=e.shouldSetTextContent,gu=e.createTextInstance;e.cloneMutableTextInstance;var O0=e.scheduleTimeout,vS=e.cancelTimeout,hs=e.noTimeout,ur=e.isPrimaryRenderer;e.warnsIfNotActing;var Bn=e.supportsMutation,zs=e.supportsPersistence,Li=e.supportsHydration,bn=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var pi=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var kn=e.setCurrentUpdatePriority,vo=e.getCurrentUpdatePriority,Qh=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var Af=e.shouldAttemptEagerTransition,Wg=e.detachDeletedInstance;e.requestPostPaintCallback;var Bp=e.maySuspendCommit,Jh=e.maySuspendCommitOnUpdate,D0=e.maySuspendCommitInSyncRender,ji=e.preloadInstance,L0=e.startSuspendingCommit,qg=e.suspendInstance;e.suspendOnActiveViewTransition;var yS=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var Mf=e.NotPendingTransition,Cf=e.HostTransitionContext,k0=e.resetFormInstance;e.bindToConsole;var U0=e.supportsMicrotasks,F0=e.scheduleMicrotask,Ir=e.supportsTestSelectors,cr=e.findFiberRoot,$g=e.getBoundingRect,Vp=e.getTextContent,uc=e.isHiddenSubtree,z0=e.matchAccessibilityRole,vu=e.setFocusIfFocusable,Xg=e.setupIntersectionObserver,B0=e.appendChild,V0=e.appendChildToContainer,_S=e.commitTextUpdate,bS=e.commitMount,xS=e.commitUpdate,SS=e.insertBefore,wS=e.insertInContainerBefore,ES=e.removeChild,j0=e.removeChildFromContainer,H0=e.resetTextContent,pC=e.hideInstance,TS=e.hideTextInstance,AS=e.unhideInstance,MS=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var G0=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var CS=e.cloneInstance,W0=e.createContainerChildSet,q0=e.appendChildToContainerChildSet,IS=e.finalizeContainerChildren,$0=e.replaceContainerChildren,RS=e.cloneHiddenInstance,X0=e.cloneHiddenTextInstance,cc=e.isSuspenseInstancePending,Yg=e.isSuspenseInstanceFallback,Kg=e.getSuspenseInstanceFallbackErrorDetails,Zg=e.registerSuspenseInstanceRetry,PS=e.canHydrateFormStateMarker,Y0=e.isFormStateMarkerMatching,NS=e.getNextHydratableSibling,OS=e.getNextHydratableSiblingAfterSingleton,DS=e.getFirstHydratableChild,LS=e.getFirstHydratableChildWithinContainer,kS=e.getFirstHydratableChildWithinActivityInstance,US=e.getFirstHydratableChildWithinSuspenseInstance,K0=e.getFirstHydratableChildWithinSingleton,FS=e.canHydrateInstance,zS=e.canHydrateTextInstance,Z0=e.canHydrateActivityInstance,BS=e.canHydrateSuspenseInstance,VS=e.hydrateInstance,mC=e.hydrateTextInstance,Q0=e.hydrateActivityInstance,jS=e.hydrateSuspenseInstance,HS=e.getNextHydratableInstanceAfterActivityInstance,J0=e.getNextHydratableInstanceAfterSuspenseInstance,GS=e.commitHydratedInstance,WS=e.commitHydratedContainer,gC=e.commitHydratedActivityInstance,vC=e.commitHydratedSuspenseInstance,qS=e.finalizeHydratedChildren,jp=e.flushHydrationEvents;e.clearActivityBoundary;var e_=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var Qg=e.clearSuspenseBoundaryFromContainer,$S=e.hideDehydratedBoundary,XS=e.unhideDehydratedBoundary,ed=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var YS=e.validateHydratableInstance,t_=e.validateHydratableTextInstance,yo=e.supportsResources,Jg=e.isHostHoistableType,Hp=e.getHoistableRoot,n_=e.getResource,i_=e.acquireResource,fc=e.releaseResource,KS=e.hydrateHoistable,r_=e.mountHoistable,a_=e.unmountHoistable,ev=e.createHoistableInstance,ZS=e.prepareToCommitHoistables,s_=e.mayResourceSuspendCommit,o_=e.preloadResource,QS=e.suspendResource,Rr=e.supportsSingletons,tv=e.resolveSingletonInstance,yr=e.acquireSingletonInstance,jr=e.releaseSingletonInstance,l_=e.isHostSingletonType,If=e.isSingletonScope,nv=[],Rf=-1,Rl={},ds=Math.clz32?Math.clz32:T,iv=Math.log,JS=Math.LN2,rv=256,Pf=262144,td=4194304,Gp=cs.unstable_scheduleCallback,av=cs.unstable_cancelCallback,e1=cs.unstable_shouldYield,u_=cs.unstable_requestPaint,ba=cs.unstable_now,sv=cs.unstable_ImmediatePriority,t1=cs.unstable_UserBlockingPriority,Wp=cs.unstable_NormalPriority,ov=cs.unstable_IdlePriority,c_=cs.log,n1=cs.unstable_setDisableYieldValue,Nf=null,ps=null,fr=typeof Object.is=="function"?Object.is:ue,lv=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},yC=Object.prototype.hasOwnProperty,uv,Pl,qp=!1,f_=new WeakMap,yu=[],Nl=0,mi=null,$p=0,_o=[],Bs=0,bo=null,na=1,$o="",Hr=v(null),_u=v(null),ia=v(null),Xp=v(null),Pr=null,ki=null,Un=!1,Ol=null,ja=!1,cv=Error(r(519)),xo=v(null),Ei=null,Xo=null,i1=typeof AbortController<"u"?AbortController:function(){var h=[],d=this.signal={aborted:!1,addEventListener:function(b,A){h.push(A)}};this.abort=function(){d.aborted=!0,h.forEach(function(b){return b()})}},Gr=cs.unstable_scheduleCallback,_C=cs.unstable_NormalPriority,Ui={$$typeof:go,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Yp=null,ui=null,xa=!1,So=!1,fv=!1,hc=0,nd=null,h_=0,bu=0,Nr=null,wo=Zt.S;Zt.S=function(h,d){Ff=ba(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&Fe(h,d),wo!==null&&wo(h,d)};var dc=v(null),Or=Error(r(460)),hv=Error(r(474)),Eo=Error(r(542)),Dl={then:function(){}},Ha=null,pc=null,Of=0,ra=as(!0),d_=as(!1),aa=[],Ll=0,Df=0,Vs=!1,dv=!1,Lf=v(null),mc=v(0),ms=v(null),gs=null,er=v(0),xu=0,xn=null,Wt=null,dn=null,Cn=!1,En=!1,jn=!1,Sa=0,To=0,Yo=null,p_=0,js={readContext:te,use:zi,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useInsertionEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useSyncExternalStore:ct,useId:ct,useHostTransitionStatus:ct,useFormState:ct,useActionState:ct,useOptimistic:ct,useMemoCache:ct,useCacheRefresh:ct};js.useEffectEvent=ct;var Hi={readContext:te,use:zi,useCallback:function(h,d){return on().memoizedState=[h,d===void 0?null:d],h},useContext:te,useEffect:qu,useImperativeHandle:function(h,d,b){b=b!=null?b.concat([h]):null,dl(4194308,4,au.bind(null,d,h),b)},useLayoutEffect:function(h,d){return dl(4194308,4,h,d)},useInsertionEffect:function(h,d){dl(4,2,h,d)},useMemo:function(h,d){var b=on();d=d===void 0?null:d;var A=h();if(jn){q(!0);try{h()}finally{q(!1)}}return b.memoizedState=[A,d],A},useReducer:function(h,d,b){var A=on();if(b!==void 0){var N=b(d);if(jn){q(!0);try{b(d)}finally{q(!1)}}}else N=d;return A.memoizedState=A.baseState=N,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:N},A.queue=h,h=h.dispatch=Oh.bind(null,xn,h),[A.memoizedState,h]},useRef:function(h){var d=on();return h={current:h},d.memoizedState=h},useState:function(h){h=hl(h);var d=h.queue,b=xp.bind(null,xn,d);return d.dispatch=b,[h.memoizedState,b]},useDebugValue:ml,useDeferredValue:function(h,d){var b=on();return $u(b,h,d)},useTransition:function(){var h=hl(!1);return h=Xu.bind(null,xn,h.queue,!0,!1),on().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,d,b){var A=xn,N=on();if(Un){if(b===void 0)throw Error(r(407));b=b()}else{if(b=d(),In===null)throw Error(r(349));(Fn&127)!==0||or(A,d,b)}N.memoizedState=b;var U={value:b,getSnapshot:d};return N.queue=U,qu(fl.bind(null,A,U,h),[h]),A.flags|=2048,ka(9,{destroy:void 0},lr.bind(null,A,U,b,d),null),b},useId:function(){var h=on(),d=In.identifierPrefix;if(Un){var b=$o,A=na;b=(A&~(1<<32-ds(A)-1)).toString(32)+b,d="_"+d+"R_"+b,b=Sa++,0<b&&(d+="H"+b.toString(32)),d+="_"}else b=p_++,d="_"+d+"r_"+b.toString(32)+"_";return h.memoizedState=d},useHostTransitionStatus:Ph,useFormState:ru,useActionState:ru,useOptimistic:function(h){var d=on();d.memoizedState=d.baseState=h;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=b,d=lo.bind(null,xn,!0,b),b.dispatch=d,[h,d]},useMemoCache:Os,useCacheRefresh:function(){return on().memoizedState=Tg.bind(null,xn)},useEffectEvent:function(h){var d=on(),b={impl:h};return d.memoizedState=b,function(){if((Dn&2)!==0)throw Error(r(440));return b.impl.apply(void 0,arguments)}}},kl={readContext:te,use:zi,useCallback:hf,useContext:te,useEffect:Bo,useImperativeHandle:Ih,useInsertionEffect:pl,useLayoutEffect:jo,useMemo:Ho,useReducer:ta,useRef:Ch,useState:function(){return ta(yi)},useDebugValue:ml,useDeferredValue:function(h,d){var b=St();return Rh(b,Wt.memoizedState,h,d)},useTransition:function(){var h=ta(yi)[0],d=St().memoizedState;return[typeof h=="boolean"?h:tn(h),d]},useSyncExternalStore:di,useId:Yu,useHostTransitionStatus:Ph,useFormState:oo,useActionState:oo,useOptimistic:function(h,d){var b=St();return uf(b,Wt,h,d)},useMemoCache:Os,useCacheRefresh:Nh};kl.useEffectEvent=zr;var gc={readContext:te,use:zi,useCallback:hf,useContext:te,useEffect:Bo,useImperativeHandle:Ih,useInsertionEffect:pl,useLayoutEffect:jo,useMemo:Ho,useReducer:Ii,useRef:Ch,useState:function(){return Ii(yi)},useDebugValue:ml,useDeferredValue:function(h,d){var b=St();return Wt===null?$u(b,h,d):Rh(b,Wt.memoizedState,h,d)},useTransition:function(){var h=Ii(yi)[0],d=St().memoizedState;return[typeof h=="boolean"?h:tn(h),d]},useSyncExternalStore:di,useId:Yu,useHostTransitionStatus:Ph,useFormState:li,useActionState:li,useOptimistic:function(h,d){var b=St();return Wt!==null?uf(b,Wt,h,d):(b.baseState=h,[h,b.queue.dispatch])},useMemoCache:Os,useCacheRefresh:Nh};gc.useEffectEvent=zr;var Kp={enqueueSetState:function(h,d,b){h=h._reactInternals;var A=Di(),N=ma(A);N.payload=d,b!=null&&(N.callback=b),d=Oa(h,N,A),d!==null&&(Vi(d,h,A),Fo(d,h,A))},enqueueReplaceState:function(h,d,b){h=h._reactInternals;var A=Di(),N=ma(A);N.tag=1,N.payload=d,b!=null&&(N.callback=b),d=Oa(h,N,A),d!==null&&(Vi(d,h,A),Fo(d,h,A))},enqueueForceUpdate:function(h,d){h=h._reactInternals;var b=Di(),A=ma(b);A.tag=2,d!=null&&(A.callback=d),d=Oa(h,A,b),d!==null&&(Vi(d,h,b),Fo(d,h,b))}},Ga=Error(r(461)),Pi=!1,kf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},tr=!1,nr=!1,id=!1,m_=typeof WeakSet=="function"?WeakSet:Set,hr=null,Gi=null,dr=!1,ci=null,Hs=8192,rd={getCacheForType:function(h){var d=te(Ui),b=d.data.get(h);return b===void 0&&(b=h(),d.data.set(h,b)),b},cacheSignal:function(){return te(Ui).controller.signal}},Ao=0,ad=1,sd=2,Zp=3,vc=4;if(typeof Symbol=="function"&&Symbol.for){var Uf=Symbol.for;Ao=Uf("selector.component"),ad=Uf("selector.has_pseudo_class"),sd=Uf("selector.role"),Zp=Uf("selector.test_id"),vc=Uf("selector.text")}var Gs=typeof WeakMap=="function"?WeakMap:Map,Dn=0,In=null,Ln=null,Fn=0,fi=0,_r=null,Ko=!1,yc=!1,_c=!1,Ul=0,Wi=0,Su=0,bc=0,od=0,Wa=0,ld=0,Qp=null,vs=null,pv=!1,Jp=0,Ff=0,xc=1/0,em=null,wu=null,br=0,Eu=null,zf=null,Fl=0,ud=0,mv=null,g_=null,Qn=0,tm=null;return Mn.attemptContinuousHydration=function(h){if(h.tag===13||h.tag===31){var d=Ci(h,67108864);d!==null&&Vi(d,h,67108864),Lp(h,67108864)}},Mn.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13||h.tag===31){var d=Di();d=V(d);var b=Ci(h,d);b!==null&&Vi(b,h,d),Lp(h,d)}},Mn.attemptSynchronousHydration=function(h){switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var d=S(h.pendingLanes);if(d!==0){for(h.pendingLanes|=2,h.entangledLanes|=2;d;){var b=1<<31-ds(d);h.entanglements[1]|=b,d&=~b}Tt(h),(Dn&6)===0&&(xc=ba()+500,gt(0))}}break;case 31:case 13:d=Ci(h,2),d!==null&&Vi(d,h,2),Og(),Lp(h,2)}},Mn.batchedUpdates=function(h,d){return h(d)},Mn.createComponentSelector=function(h){return{$$typeof:Ao,value:h}},Mn.createContainer=function(h,d,b,A,N,U,K,fe,ze,st){return sc(h,d,!1,null,b,A,U,null,K,fe,ze,st)},Mn.createHasPseudoClassSelector=function(h){return{$$typeof:ad,value:h}},Mn.createHydrationContainer=function(h,d,b,A,N,U,K,fe,ze,st,_t,mt,Nt,yn){var pr;return h=sc(b,A,!0,h,N,U,fe,yn,ze,st,_t,mt),h.context=zg(null),b=h.current,A=Di(),A=V(A),N=ma(A),N.callback=(pr=d)!=null?pr:null,Oa(b,N,A),d=A,h.current.lanes=d,z(h,d),Tt(h),h},Mn.createPortal=function(h,d,b){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sf,key:A==null?null:""+A,children:h,containerInfo:d,implementation:b}},Mn.createRoleSelector=function(h){return{$$typeof:sd,value:h}},Mn.createTestNameSelector=function(h){return{$$typeof:Zp,value:h}},Mn.createTextSelector=function(h){return{$$typeof:vc,value:h}},Mn.defaultOnCaughtError=function(h){console.error(h)},Mn.defaultOnRecoverableError=function(h){lv(h)},Mn.defaultOnUncaughtError=function(h){lv(h)},Mn.deferredUpdates=function(h){var d=Zt.T,b=vo();try{return kn(32),Zt.T=null,h()}finally{kn(b),Zt.T=d}},Mn.discreteUpdates=function(h,d,b,A,N){var U=Zt.T,K=vo();try{return kn(2),Zt.T=null,h(d,b,A,N)}finally{kn(K),Zt.T=U,Dn===0&&(xc=ba()+500)}},Mn.findAllNodes=us,Mn.findBoundingRects=function(h,d){if(!Ir)throw Error(r(363));d=us(h,d),h=[];for(var b=0;b<d.length;b++)h.push($g(d[b]));for(d=h.length-1;0<d;d--){b=h[d];for(var A=b.x,N=A+b.width,U=b.y,K=U+b.height,fe=d-1;0<=fe;fe--)if(d!==fe){var ze=h[fe],st=ze.x,_t=st+ze.width,mt=ze.y,Nt=mt+ze.height;if(A>=st&&U>=mt&&N<=_t&&K<=Nt){h.splice(d,1);break}else if(A!==st||b.width!==ze.width||Nt<U||mt>K){if(!(U!==mt||b.height!==ze.height||_t<A||st>N)){st>A&&(ze.width+=st-A,ze.x=A),_t<N&&(ze.width=N-st),h.splice(d,1);break}}else{mt>U&&(ze.height+=mt-U,ze.y=U),Nt<K&&(ze.height=K-mt),h.splice(d,1);break}}}return h},Mn.findHostInstance=Dp,Mn.findHostInstanceWithNoPortals=function(h){return h=l(h),h=h!==null?f(h):null,h===null?null:Kh(h.stateNode)},Mn.findHostInstanceWithWarning=function(h){return Dp(h)},Mn.flushPassiveEffects=Cl,Mn.flushSyncFromReconciler=function(h){var d=Dn;Dn|=1;var b=Zt.T,A=vo();try{if(kn(2),Zt.T=null,h)return h()}finally{kn(A),Zt.T=b,Dn=d,(Dn&6)===0&&gt(0)}},Mn.flushSyncWork=Og,Mn.focusWithin=function(h,d){if(!Ir)throw Error(r(363));for(h=tc(h),d=Hh(h,d),d=Array.from(d),h=0;h<d.length;){var b=d[h++],A=b.tag;if(!uc(b)){if((A===5||A===26||A===27)&&vu(b.stateNode))return!0;for(b=b.child;b!==null;)d.push(b),b=b.sibling}}return!1},Mn.getFindAllNodesFailureDescription=function(h,d){if(!Ir)throw Error(r(363));var b=0,A=[];h=[tc(h),0];for(var N=0;N<h.length;){var U=h[N++],K=U.tag,fe=h[N++],ze=d[fe];if((K!==5&&K!==26&&K!==27||!uc(U))&&(nc(U,ze)&&(A.push(jh(ze)),fe++,fe>b&&(b=fe)),fe<d.length))for(U=U.child;U!==null;)h.push(U,fe),U=U.sibling}if(b<d.length){for(h=[];b<d.length;b++)h.push(jh(d[b]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},Mn.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 27:case 5:return Kh(h.child.stateNode);default:return h.child.stateNode}},Mn.injectIntoDevTools=function(){var h={bundleType:0,version:P0,rendererPackageName:Fp,currentDispatcherRef:Zt,reconcilerVersion:"19.2.0"};if(Yh!==null&&(h.rendererConfig=Yh),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)h=!0;else{try{Nf=d.inject(h),ps=d}catch{}h=!!d.checkDCE}}return h},Mn.isAlreadyRendering=function(){return(Dn&6)!==0},Mn.observeVisibleRects=function(h,d,b,A){if(!Ir)throw Error(r(363));h=us(h,d);var N=Xg(h,b,A).disconnect;return{disconnect:function(){N()}}},Mn.shouldError=function(){return null},Mn.shouldSuspend=function(){return!1},Mn.startHostTransition=function(h,d,b,A){if(h.tag!==5)throw Error(r(476));var N=bp(h).queue;Xu(h,N,d,Mf,b===null?i:function(){var U=bp(h);return U.next===null&&(U=h.alternate.memoizedState),Ku(h,U.next.queue,{},Di()),b(A)})},Mn.updateContainer=function(h,d,b,A){var N=d.current,U=Di();return I0(N,U,h,d,b,A),U},Mn.updateContainerSync=function(h,d,b,A){return I0(d.current,2,h,d,b,A),2},Mn},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(eF)),eF.exports}var nF;function Kae(){return nF||(nF=1,J4.exports=Yae()),J4.exports}var Zae=Kae();const Qae=Xae(Zae);function Jae(n){const e=Qae(n);return e.injectIntoDevTools(),e}const G8=0,Iy={},ese=/^three(?=[A-Z])/,tM=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let tse=0;const nse=n=>typeof n=="function";function ise(n){if(nse(n)){const e=`${tse++}`;return Iy[e]=n,e}else Object.assign(Iy,n)}function W8(n,e){const t=tM(n),i=Iy[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function rse(n,e,t){var i;return n=tM(n)in Iy?n:n.replace(ese,""),W8(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,JE(e.object,t,n,e)}function ase(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?tT(n.parent,n):Xs(n.object)&&(n.object.visible=!1),n.isHidden=!0,Yy(n)}}function q8(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?eT(n.parent,n):Xs(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,Yy(n)}}function UD(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var r,a;const s=Iy[tM(e.type)];e.object=(r=e.props.object)!=null?r:new s(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(Pd(e.object,e.props),e.props.attach)eT(n,e);else if(Xs(e.object)&&Xs(n.object)){const s=n.object.children.indexOf(t==null?void 0:t.object);if(t&&s!==-1){const l=n.object.children.indexOf(e.object);if(l!==-1){n.object.children.splice(l,1);const c=l<s?s-1:s;n.object.children.splice(c,0,e.object)}else e.object.parent=n.object,n.object.children.splice(s,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const s of e.children)UD(e,s);Yy(e)}}function HI(n,e){e&&(e.parent=n,n.children.push(e),UD(n,e))}function iF(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),UD(n,e,t)}function $8(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():uN.unstable_scheduleCallback(uN.unstable_IdlePriority,e)}}function fN(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?tT(n,e):Xs(e.object)&&Xs(n.object)&&(n.object.remove(e.object),zae(L8(e),e.object));const r=e.props.dispose!==null&&t!==!1;for(let a=e.children.length-1;a>=0;a--){const s=e.children[a];fN(e,s,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&$8(e.object),t===void 0&&Yy(e)}function sse(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const jw=[];function ose(){for(const[t]of jw){const i=t.parent;if(i){t.props.attach?tT(i,t):Xs(t.object)&&Xs(i.object)&&i.object.remove(t.object);for(const r of t.children)r.props.attach?tT(t,r):Xs(r.object)&&Xs(t.object)&&t.object.remove(r.object)}t.isHidden&&q8(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&$8(t.object)}for(const[t,i,r]of jw){t.props=i;const a=t.parent;if(a){var n,e;const s=Iy[tM(t.type)];t.object=(n=t.props.object)!=null?n:new s(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,sse(r,t.object),Pd(t.object,t.props),t.props.attach?eT(a,t):Xs(t.object)&&Xs(a.object)&&a.object.add(t.object);for(const l of t.children)l.props.attach?eT(t,l):Xs(l.object)&&Xs(t.object)&&t.object.add(l.object);Yy(t)}}jw.length=0}const GI=()=>{},rF={};let fw=G8;const lse=0,use=4,hN=Jae({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:rse,removeChild:fN,appendChild:HI,appendInitialChild:HI,insertBefore:iF,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||HI(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||fN(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||iF(i,e,t)},getRootHostContext:()=>rF,getChildHostContext:()=>rF,commitUpdate(n,e,t,i,r){var a,s,l;W8(e,i);let c=!1;if((n.type==="primitive"&&t.object!==i.object||((a=i.args)==null?void 0:a.length)!==((s=t.args)==null?void 0:s.length)||(l=i.args)!=null&&l.some((p,g)=>{var v;return p!==((v=t.args)==null?void 0:v[g])}))&&(c=!0),c)jw.push([n,{...i},r]);else{const p=Lae(n,i);Object.keys(p).length&&(Object.assign(n.props,p),Pd(n.object,p))}(r.sibling===null||(r.flags&use)===lse)&&ose()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n==null?void 0:n.object,prepareForCommit:()=>null,preparePortalMount:n=>JE(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:ase,unhideInstance:q8,createTextInstance:GI,hideTextInstance:GI,unhideTextInstance:GI,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:H.createContext(null),setCurrentUpdatePriority(n){fw=n},getCurrentUpdatePriority(){return fw},resolveUpdatePriority(){var n;if(fw!==G8)return fw;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return qae;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Gae;default:return Wae}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:$ae.version,applyViewTransitionName(n,e,t){},restoreViewTransitionName(n,e){},cancelViewTransitionName(n,e,t){},cancelRootViewTransitionName(n){},restoreRootViewTransitionName(n){},InstanceMeasurement:null,measureInstance:n=>null,wasInstanceInViewport:n=>!0,hasInstanceChanged:(n,e)=>!1,hasInstanceAffectedParent:(n,e)=>!1,suspendOnActiveViewTransition(n,e){},startGestureTransition:()=>null,startViewTransition:()=>null,stopViewTransition(n){},createViewTransitionInstance:n=>null,getCurrentGestureOffset(n){throw new Error("startGestureTransition is not yet supported in react-three-fiber.")},cloneMutableInstance(n,e){return n},cloneMutableTextInstance(n){return n},cloneRootViewTransitionContainer(n){throw new Error("Not implemented.")},removeRootViewTransitionClone(n,e){throw new Error("Not implemented.")},createFragmentInstance:n=>null,updateFragmentInstanceFiber(n,e){},commitNewChildToFragmentInstance(n,e){},deleteChildFromFragmentInstance(n,e){},measureClonedInstance:n=>null,maySuspendCommitOnUpdate:(n,e,t)=>!1,maySuspendCommitInSyncRender:(n,e)=>!1,startSuspendingCommit:()=>null,getSuspendedCommitReason:(n,e)=>null}),Jm=new Map,jv={objects:"shallow",strict:!1};function cse(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:a}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function fse(n){const e=Jm.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,a=i||Vae(mN,sF),s=t||hN.createContainer(a,Hae,null,!1,null,"",r,r,r,null);e||Jm.set(n,{fiber:s,store:a});let l,c,f=!1,p=null;return{async configure(g={}){let v;p=new Promise(J=>v=J);let{gl:_,size:x,scene:T,events:S,onCreated:w,shadows:I=!1,linear:R=!1,flat:D=!1,legacy:B=!1,orthographic:z=!1,frameloop:k="always",dpr:F=[1,2],performance:P,raycaster:L,camera:V,onPointerMissed:W}=g,q=a.getState(),ue=q.gl;if(!q.gl){const J={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},pe=typeof _=="function"?await _(J):_;Z4(pe)?ue=pe:ue=new C8({...J,..._}),q.set({gl:ue})}let le=q.raycaster;le||q.set({raycaster:le=new b8});const{params:ee,...ie}=L||{};if(ir.equ(ie,le,jv)||Pd(le,{...ie}),ir.equ(ee,le.params,jv)||Pd(le,{params:{...le.params,...ee}}),!q.camera||q.camera===c&&!ir.equ(c,V,jv)){c=V;const J=V==null?void 0:V.isCamera,pe=J?V:z?new ah(0,0,0,0,.1,1e3):new kr(75,0,.1,1e3);J||(pe.position.z=5,V&&(Pd(pe,V),pe.manual||("aspect"in V||"left"in V||"right"in V||"bottom"in V||"top"in V)&&(pe.manual=!0,pe.updateProjectionMatrix())),!q.camera&&!(V!=null&&V.rotation)&&pe.lookAt(0,0,0)),q.set({camera:pe}),le.camera=pe}if(!q.scene){let J;T!=null&&T.isScene?(J=T,JE(J,a,"",{})):(J=new sD,JE(J,a,"",{}),T&&Pd(J,T)),q.set({scene:J})}S&&!q.events.handlers&&q.set({events:S(a)});const he=cse(n,x);if(ir.equ(he,q.size,jv)||q.setSize(he.width,he.height,he.top,he.left),F&&q.viewport.dpr!==F8(F)&&q.setDpr(F),q.frameloop!==k&&q.setFrameloop(k),q.onPointerMissed||q.set({onPointerMissed:W}),P&&!ir.equ(P,q.performance,jv)&&q.set(J=>({performance:{...J.performance,...P}})),!q.xr){var we;const J=(Ge,ht)=>{const be=a.getState();be.frameloop!=="never"&&sF(Ge,!0,be,ht)},pe=()=>{const Ge=a.getState();Ge.gl.xr.enabled=Ge.gl.xr.isPresenting,Ge.gl.xr.setAnimationLoop(Ge.gl.xr.isPresenting?J:null),Ge.gl.xr.isPresenting||mN(Ge)},Ee={connect(){const Ge=a.getState().gl;Ge.xr.addEventListener("sessionstart",pe),Ge.xr.addEventListener("sessionend",pe)},disconnect(){const Ge=a.getState().gl;Ge.xr.removeEventListener("sessionstart",pe),Ge.xr.removeEventListener("sessionend",pe)}};typeof((we=ue.xr)==null?void 0:we.addEventListener)=="function"&&Ee.connect(),q.set({xr:Ee})}if(ue.shadowMap){const J=ue.shadowMap.enabled,pe=ue.shadowMap.type;if(ue.shadowMap.enabled=!!I,ir.boo(I))ue.shadowMap.type=ob;else if(ir.str(I)){var Me;const Ee={basic:z6,percentage:ly,soft:ob,variance:Mm};ue.shadowMap.type=(Me=Ee[I])!=null?Me:ob}else ir.obj(I)&&Object.assign(ue.shadowMap,I);(J!==ue.shadowMap.enabled||pe!==ue.shadowMap.type)&&(ue.shadowMap.needsUpdate=!0)}return qn.enabled=!B,f||(ue.outputColorSpace=R?Qd:Za,ue.toneMapping=D?$l:_A),q.legacy!==B&&q.set(()=>({legacy:B})),q.linear!==R&&q.set(()=>({linear:R})),q.flat!==D&&q.set(()=>({flat:D})),_&&!ir.fun(_)&&!Z4(_)&&!ir.equ(_,ue,jv)&&Pd(ue,_),l=w,f=!0,v(),this},render(g){return!f&&!p&&this.configure(),p.then(()=>{hN.updateContainer(O.jsx(hse,{store:a,children:g,onCreated:l,rootElement:n}),s,null,()=>{})}),a},unmount(){X8(n)}}}function hse({store:n,children:e,onCreated:t,rootElement:i}){return Mx(()=>{const r=n.getState();r.set(a=>({internal:{...a.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),O.jsx(V8.Provider,{value:n,children:e})}function X8(n,e){const t=Jm.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),hN.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var a,s,l,c;r.events.disconnect==null||r.events.disconnect(),(a=r.gl)==null||(s=a.renderLists)==null||s.dispose==null||s.dispose(),(l=r.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(c=r.gl)!=null&&c.xr&&r.xr.disconnect(),Nae(r.scene),Jm.delete(n)}catch{}},500)})}}const dse=new Set,pse=new Set,mse=new Set;function WI(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function gb(n,e){switch(n){case"before":return WI(dse,e);case"after":return WI(pse,e);case"tail":return WI(mse,e)}}let qI,$I;function dN(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),qI=e.internal.subscribers;for(let r=0;r<qI.length;r++)$I=qI[r],$I.ref.current($I.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let nT=!1,pN=!1,XI,aF,Hv;function Y8(n){aF=requestAnimationFrame(Y8),nT=!0,XI=0,gb("before",n),pN=!0;for(const t of Jm.values()){var e;Hv=t.store.getState(),Hv.internal.active&&(Hv.frameloop==="always"||Hv.internal.frames>0)&&!((e=Hv.gl.xr)!=null&&e.isPresenting)&&(XI+=dN(n,Hv))}if(pN=!1,gb("after",n),XI===0)return gb("tail",n),nT=!1,cancelAnimationFrame(aF)}function mN(n,e=1){var t;if(!n)return Jm.forEach(i=>mN(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):pN?n.internal.frames=2:n.internal.frames=1,nT||(nT=!0,requestAnimationFrame(Y8)))}function sF(n,e=!0,t,i){if(e&&gb("before",n),t)dN(n,t,i);else for(const r of Jm.values())dN(n,r.store.getState());e&&gb("after",n)}const YI={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function gse(n){const{handlePointer:e}=Bae(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(YI).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:i,events:r}=n.getState();if(r.disconnect==null||r.disconnect(),i(a=>({events:{...a.events,connected:t}})),r.handlers)for(const a in r.handlers){const s=r.handlers[a],[l,c]=YI[a];t.addEventListener(l,s,{passive:c})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const a=i.handlers[r],[s]=YI[r];i.connected.removeEventListener(s,a)}t(r=>({events:{...r.events,connected:void 0}}))}}}}function oF(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function vse({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=H.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=H.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),c=n?typeof n=="number"?n:n.scroll:null,f=n?typeof n=="number"?n:n.resize:null,p=H.useRef(!1);H.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[g,v,_]=H.useMemo(()=>{const w=()=>{if(!l.current.element)return;const{left:I,top:R,width:D,height:B,bottom:z,right:k,x:F,y:P}=l.current.element.getBoundingClientRect(),L={left:I,top:R,width:D,height:B,bottom:z,right:k,x:F,y:P};l.current.element instanceof HTMLElement&&i&&(L.height=l.current.element.offsetHeight,L.width=l.current.element.offsetWidth),Object.freeze(L),p.current&&!xse(l.current.lastBounds,L)&&s(l.current.lastBounds=L)};return[w,f?oF(w,f):w,c?oF(w,c):w]},[s,i,c,f]);function x(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",_,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function T(){l.current.element&&(l.current.resizeObserver=new r(_),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(w=>w.addEventListener("scroll",_,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{_()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const S=w=>{!w||w===l.current.element||(x(),l.current.element=w,l.current.scrollContainers=K8(w),T())};return _se(_,!!e),yse(v),H.useEffect(()=>{x(),T()},[e,_,v]),H.useEffect(()=>x,[]),[S,a,g]}function yse(n){H.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function _se(n,e){H.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function K8(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(a=>a==="auto"||a==="scroll")&&e.push(n),[...e,...K8(n.parentElement)]}const bse=["x","y","top","bottom","left","right","width","height"],xse=(n,e)=>bse.every(t=>n[t]===e[t]);function Sse({ref:n,children:e,fallback:t,resize:i,style:r,gl:a,events:s=gse,eventSource:l,eventPrefix:c,shadows:f,linear:p,flat:g,legacy:v,orthographic:_,frameloop:x,dpr:T,performance:S,raycaster:w,camera:I,scene:R,onPointerMissed:D,onCreated:B,...z}){H.useMemo(()=>ise(sae),[]);const k=Cae(),[F,P]=vse({scroll:!0,debounce:{scroll:50,resize:0},...i}),L=H.useRef(null),V=H.useRef(null);H.useImperativeHandle(n,()=>L.current);const W=U8(D),[q,ue]=H.useState(!1),[le,ee]=H.useState(!1);if(q)throw q;if(le)throw le;const ie=H.useRef(null);Mx(()=>{const we=L.current;if(P.width>0&&P.height>0&&we){ie.current||(ie.current=fse(we));async function Me(){await ie.current.configure({gl:a,scene:R,events:s,shadows:f,linear:p,flat:g,legacy:v,orthographic:_,frameloop:x,dpr:T,performance:S,raycaster:w,camera:I,size:P,onPointerMissed:(...J)=>W.current==null?void 0:W.current(...J),onCreated:J=>{J.events.connect==null||J.events.connect(l?Aae(l)?l.current:l:V.current),c&&J.setEvents({compute:(pe,Ee)=>{const Ge=pe[c+"X"],ht=pe[c+"Y"];Ee.pointer.set(Ge/Ee.size.width*2-1,-(ht/Ee.size.height)*2+1),Ee.raycaster.setFromCamera(Ee.pointer,Ee.camera)}}),B==null||B(J)}}),ie.current.render(O.jsx(k,{children:O.jsx(Rae,{set:ee,children:O.jsx(H.Suspense,{fallback:O.jsx(Iae,{set:ue}),children:e??null})})}))}Me()}}),H.useEffect(()=>{const we=L.current;if(we)return()=>X8(we)},[]);const he=l?"none":"auto";return O.jsx("div",{ref:V,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:he,...r},...z,children:O.jsx("div",{ref:F,style:{width:"100%",height:"100%"},children:O.jsx("canvas",{ref:L,style:{display:"block"},children:t})})})}function wse(n){return O.jsx(O8,{children:O.jsx(Sse,{...n})})}class Ese extends io{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Yc(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{t(a.parse(l))}catch(c){r?r(c):console.error(c),a.manager.itemError(e)}},i,r)}parse(e){function t(f){const p=new DataView(f),g=32/8*3+32/8*3*3+16/8,v=p.getUint32(80,!0);if(80+32/8+v*g===p.byteLength)return!0;const x=[115,111,108,105,100];for(let T=0;T<5;T++)if(i(x,p,T))return!1;return!0}function i(f,p,g){for(let v=0,_=f.length;v<_;v++)if(f[v]!==p.getUint8(g+v))return!1;return!0}function r(f){const p=new DataView(f),g=p.getUint32(80,!0);let v,_,x,T=!1,S,w,I,R,D;for(let V=0;V<70;V++)p.getUint32(V,!1)==1129270351&&p.getUint8(V+4)==82&&p.getUint8(V+5)==61&&(T=!0,S=new Float32Array(g*3*3),w=p.getUint8(V+6)/255,I=p.getUint8(V+7)/255,R=p.getUint8(V+8)/255,D=p.getUint8(V+9)/255);const B=84,z=50,k=new gn,F=new Float32Array(g*3*3),P=new Float32Array(g*3*3),L=new Dt;for(let V=0;V<g;V++){const W=B+V*z,q=p.getFloat32(W,!0),ue=p.getFloat32(W+4,!0),le=p.getFloat32(W+8,!0);if(T){const ee=p.getUint16(W+48,!0);(ee&32768)===0?(v=(ee&31)/31,_=(ee>>5&31)/31,x=(ee>>10&31)/31):(v=w,_=I,x=R)}for(let ee=1;ee<=3;ee++){const ie=W+ee*12,he=V*3*3+(ee-1)*3;F[he]=p.getFloat32(ie,!0),F[he+1]=p.getFloat32(ie+4,!0),F[he+2]=p.getFloat32(ie+8,!0),P[he]=q,P[he+1]=ue,P[he+2]=le,T&&(L.setRGB(v,_,x,Za),S[he]=L.r,S[he+1]=L.g,S[he+2]=L.b)}}return k.setAttribute("position",new hi(F,3)),k.setAttribute("normal",new hi(P,3)),T&&(k.setAttribute("color",new hi(S,3)),k.hasColors=!0,k.alpha=D),k}function a(f){const p=new gn,g=/solid([\s\S]*?)endsolid/g,v=/facet([\s\S]*?)endfacet/g,_=/solid\s(.+)/;let x=0;const T=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,S=new RegExp("vertex"+T+T+T,"g"),w=new RegExp("normal"+T+T+T,"g"),I=[],R=[],D=[],B=new re;let z,k=0,F=0,P=0;for(;(z=g.exec(f))!==null;){F=P;const L=z[0],V=(z=_.exec(L))!==null?z[1]:"";for(D.push(V);(z=v.exec(L))!==null;){let ue=0,le=0;const ee=z[0];for(;(z=w.exec(ee))!==null;)B.x=parseFloat(z[1]),B.y=parseFloat(z[2]),B.z=parseFloat(z[3]),le++;for(;(z=S.exec(ee))!==null;)I.push(parseFloat(z[1]),parseFloat(z[2]),parseFloat(z[3])),R.push(B.x,B.y,B.z),ue++,P++;le!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+x),ue!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+x),x++}const W=F,q=P-F;p.userData.groupNames=D,p.addGroup(W,q,k),k++}return p.setAttribute("position",new zt(I,3)),p.setAttribute("normal",new zt(R,3)),p}function s(f){return typeof f!="string"?new TextDecoder().decode(f):f}function l(f){if(typeof f=="string"){const p=new Uint8Array(f.length);for(let g=0;g<f.length;g++)p[g]=f.charCodeAt(g)&255;return p.buffer||p}else return f}const c=l(e);return t(c)?r(c):a(s(e))}}function iT(){return iT=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},iT.apply(null,arguments)}var Tse=Object.defineProperty,Ase=(n,e,t)=>e in n?Tse(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Mse=(n,e,t)=>(Ase(n,e+"",t),t);class Cse{constructor(){Mse(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e);e.target=null}}}var Ise=Object.defineProperty,Rse=(n,e,t)=>e in n?Ise(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,an=(n,e,t)=>(Rse(n,typeof e!="symbol"?e+"":e,t),t);const hw=new gg,lF=new Xf,Pse=Math.cos(70*(Math.PI/180)),uF=(n,e)=>(n%e+e)%e;let Nse=class extends Cse{constructor(e,t){super(),an(this,"object"),an(this,"domElement"),an(this,"enabled",!0),an(this,"target",new re),an(this,"minDistance",0),an(this,"maxDistance",1/0),an(this,"minZoom",0),an(this,"maxZoom",1/0),an(this,"minPolarAngle",0),an(this,"maxPolarAngle",Math.PI),an(this,"minAzimuthAngle",-1/0),an(this,"maxAzimuthAngle",1/0),an(this,"enableDamping",!1),an(this,"dampingFactor",.05),an(this,"enableZoom",!0),an(this,"zoomSpeed",1),an(this,"enableRotate",!0),an(this,"rotateSpeed",1),an(this,"enablePan",!0),an(this,"panSpeed",1),an(this,"screenSpacePanning",!0),an(this,"keyPanSpeed",7),an(this,"zoomToCursor",!1),an(this,"autoRotate",!1),an(this,"autoRotateSpeed",2),an(this,"reverseOrbit",!1),an(this,"reverseHorizontalOrbit",!1),an(this,"reverseVerticalOrbit",!1),an(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),an(this,"mouseButtons",{LEFT:vm.ROTATE,MIDDLE:vm.DOLLY,RIGHT:vm.PAN}),an(this,"touches",{ONE:ym.ROTATE,TWO:ym.DOLLY_PAN}),an(this,"target0"),an(this,"position0"),an(this,"zoom0"),an(this,"_domElementKeyEvents",null),an(this,"getPolarAngle"),an(this,"getAzimuthalAngle"),an(this,"setPolarAngle"),an(this,"setAzimuthalAngle"),an(this,"getDistance"),an(this,"getZoomScale"),an(this,"listenToKeyEvents"),an(this,"stopListenToKeyEvents"),an(this,"saveState"),an(this,"reset"),an(this,"update"),an(this,"connect"),an(this,"dispose"),an(this,"dollyIn"),an(this,"dollyOut"),an(this,"getScale"),an(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>p.phi,this.getAzimuthalAngle=()=>p.theta,this.setPolarAngle=Y=>{let se=uF(Y,2*Math.PI),Fe=p.phi;Fe<0&&(Fe+=2*Math.PI),se<0&&(se+=2*Math.PI);let oe=Math.abs(se-Fe);2*Math.PI-oe<oe&&(se<Fe?se+=2*Math.PI:Fe+=2*Math.PI),g.phi=se-Fe,i.update()},this.setAzimuthalAngle=Y=>{let se=uF(Y,2*Math.PI),Fe=p.theta;Fe<0&&(Fe+=2*Math.PI),se<0&&(se+=2*Math.PI);let oe=Math.abs(se-Fe);2*Math.PI-oe<oe&&(se<Fe?se+=2*Math.PI:Fe+=2*Math.PI),g.theta=se-Fe,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=Y=>{Y.addEventListener("keydown",Oe),this._domElementKeyEvents=Y},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Oe),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),c=l.NONE},this.update=(()=>{const Y=new re,se=new re(0,1,0),Fe=new Cs().setFromUnitVectors(e.up,se),oe=Fe.clone().invert(),$e=new re,qe=new Cs,et=2*Math.PI;return function(){const We=i.object.position;Fe.setFromUnitVectors(e.up,se),oe.copy(Fe).invert(),Y.copy(We).sub(i.target),Y.applyQuaternion(Fe),p.setFromVector3(Y),i.autoRotate&&c===l.NONE&&ue(W()),i.enableDamping?(p.theta+=g.theta*i.dampingFactor,p.phi+=g.phi*i.dampingFactor):(p.theta+=g.theta,p.phi+=g.phi);let at=i.minAzimuthAngle,kt=i.maxAzimuthAngle;isFinite(at)&&isFinite(kt)&&(at<-Math.PI?at+=et:at>Math.PI&&(at-=et),kt<-Math.PI?kt+=et:kt>Math.PI&&(kt-=et),at<=kt?p.theta=Math.max(at,Math.min(kt,p.theta)):p.theta=p.theta>(at+kt)/2?Math.max(at,p.theta):Math.min(kt,p.theta)),p.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,p.phi)),p.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(_,i.dampingFactor):i.target.add(_),i.zoomToCursor&&P||i.object.isOrthographicCamera?p.radius=Ee(p.radius):p.radius=Ee(p.radius*v),Y.setFromSpherical(p),Y.applyQuaternion(oe),We.copy(i.target).add(Y),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(g.theta*=1-i.dampingFactor,g.phi*=1-i.dampingFactor,_.multiplyScalar(1-i.dampingFactor)):(g.set(0,0,0),_.set(0,0,0));let un=!1;if(i.zoomToCursor&&P){let Jt=null;if(i.object instanceof kr&&i.object.isPerspectiveCamera){const ii=Y.length();Jt=Ee(ii*v);const Mi=ii-Jt;i.object.position.addScaledVector(k,Mi),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const ii=new re(F.x,F.y,0);ii.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/v)),i.object.updateProjectionMatrix(),un=!0;const Mi=new re(F.x,F.y,0);Mi.unproject(i.object),i.object.position.sub(Mi).add(ii),i.object.updateMatrixWorld(),Jt=Y.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Jt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Jt).add(i.object.position):(hw.origin.copy(i.object.position),hw.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(hw.direction))<Pse?e.lookAt(i.target):(lF.setFromNormalAndCoplanarPoint(i.object.up,i.target),hw.intersectPlane(lF,i.target))))}else i.object instanceof ah&&i.object.isOrthographicCamera&&(un=v!==1,un&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/v)),i.object.updateProjectionMatrix()));return v=1,P=!1,un||$e.distanceToSquared(i.object.position)>f||8*(1-qe.dot(i.object.quaternion))>f?(i.dispatchEvent(r),$e.copy(i.object.position),qe.copy(i.object.quaternion),un=!1,!0):!1}})(),this.connect=Y=>{i.domElement=Y,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Pt),i.domElement.addEventListener("pointerdown",pt),i.domElement.addEventListener("pointercancel",X),i.domElement.addEventListener("wheel",Ze)},this.dispose=()=>{var Y,se,Fe,oe,$e,qe;i.domElement&&(i.domElement.style.touchAction="auto"),(Y=i.domElement)==null||Y.removeEventListener("contextmenu",Pt),(se=i.domElement)==null||se.removeEventListener("pointerdown",pt),(Fe=i.domElement)==null||Fe.removeEventListener("pointercancel",X),(oe=i.domElement)==null||oe.removeEventListener("wheel",Ze),($e=i.domElement)==null||$e.ownerDocument.removeEventListener("pointermove",te),(qe=i.domElement)==null||qe.ownerDocument.removeEventListener("pointerup",X),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Oe)};const i=this,r={type:"change"},a={type:"start"},s={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=l.NONE;const f=1e-6,p=new rN,g=new rN;let v=1;const _=new re,x=new tt,T=new tt,S=new tt,w=new tt,I=new tt,R=new tt,D=new tt,B=new tt,z=new tt,k=new re,F=new tt;let P=!1;const L=[],V={};function W(){return 2*Math.PI/60/60*i.autoRotateSpeed}function q(){return Math.pow(.95,i.zoomSpeed)}function ue(Y){i.reverseOrbit||i.reverseHorizontalOrbit?g.theta+=Y:g.theta-=Y}function le(Y){i.reverseOrbit||i.reverseVerticalOrbit?g.phi+=Y:g.phi-=Y}const ee=(()=>{const Y=new re;return function(Fe,oe){Y.setFromMatrixColumn(oe,0),Y.multiplyScalar(-Fe),_.add(Y)}})(),ie=(()=>{const Y=new re;return function(Fe,oe){i.screenSpacePanning===!0?Y.setFromMatrixColumn(oe,1):(Y.setFromMatrixColumn(oe,0),Y.crossVectors(i.object.up,Y)),Y.multiplyScalar(Fe),_.add(Y)}})(),he=(()=>{const Y=new re;return function(Fe,oe){const $e=i.domElement;if($e&&i.object instanceof kr&&i.object.isPerspectiveCamera){const qe=i.object.position;Y.copy(qe).sub(i.target);let et=Y.length();et*=Math.tan(i.object.fov/2*Math.PI/180),ee(2*Fe*et/$e.clientHeight,i.object.matrix),ie(2*oe*et/$e.clientHeight,i.object.matrix)}else $e&&i.object instanceof ah&&i.object.isOrthographicCamera?(ee(Fe*(i.object.right-i.object.left)/i.object.zoom/$e.clientWidth,i.object.matrix),ie(oe*(i.object.top-i.object.bottom)/i.object.zoom/$e.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function we(Y){i.object instanceof kr&&i.object.isPerspectiveCamera||i.object instanceof ah&&i.object.isOrthographicCamera?v=Y:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Me(Y){we(v/Y)}function J(Y){we(v*Y)}function pe(Y){if(!i.zoomToCursor||!i.domElement)return;P=!0;const se=i.domElement.getBoundingClientRect(),Fe=Y.clientX-se.left,oe=Y.clientY-se.top,$e=se.width,qe=se.height;F.x=Fe/$e*2-1,F.y=-(oe/qe)*2+1,k.set(F.x,F.y,1).unproject(i.object).sub(i.object.position).normalize()}function Ee(Y){return Math.max(i.minDistance,Math.min(i.maxDistance,Y))}function Ge(Y){x.set(Y.clientX,Y.clientY)}function ht(Y){pe(Y),D.set(Y.clientX,Y.clientY)}function be(Y){w.set(Y.clientX,Y.clientY)}function Te(Y){T.set(Y.clientX,Y.clientY),S.subVectors(T,x).multiplyScalar(i.rotateSpeed);const se=i.domElement;se&&(ue(2*Math.PI*S.x/se.clientHeight),le(2*Math.PI*S.y/se.clientHeight)),x.copy(T),i.update()}function dt(Y){B.set(Y.clientX,Y.clientY),z.subVectors(B,D),z.y>0?Me(q()):z.y<0&&J(q()),D.copy(B),i.update()}function ve(Y){I.set(Y.clientX,Y.clientY),R.subVectors(I,w).multiplyScalar(i.panSpeed),he(R.x,R.y),w.copy(I),i.update()}function Ye(Y){pe(Y),Y.deltaY<0?J(q()):Y.deltaY>0&&Me(q()),i.update()}function wt(Y){let se=!1;switch(Y.code){case i.keys.UP:he(0,i.keyPanSpeed),se=!0;break;case i.keys.BOTTOM:he(0,-i.keyPanSpeed),se=!0;break;case i.keys.LEFT:he(i.keyPanSpeed,0),se=!0;break;case i.keys.RIGHT:he(-i.keyPanSpeed,0),se=!0;break}se&&(Y.preventDefault(),i.update())}function je(){if(L.length==1)x.set(L[0].pageX,L[0].pageY);else{const Y=.5*(L[0].pageX+L[1].pageX),se=.5*(L[0].pageY+L[1].pageY);x.set(Y,se)}}function At(){if(L.length==1)w.set(L[0].pageX,L[0].pageY);else{const Y=.5*(L[0].pageX+L[1].pageX),se=.5*(L[0].pageY+L[1].pageY);w.set(Y,se)}}function Re(){const Y=L[0].pageX-L[1].pageX,se=L[0].pageY-L[1].pageY,Fe=Math.sqrt(Y*Y+se*se);D.set(0,Fe)}function Qe(){i.enableZoom&&Re(),i.enablePan&&At()}function Ve(){i.enableZoom&&Re(),i.enableRotate&&je()}function lt(Y){if(L.length==1)T.set(Y.pageX,Y.pageY);else{const Fe=xt(Y),oe=.5*(Y.pageX+Fe.x),$e=.5*(Y.pageY+Fe.y);T.set(oe,$e)}S.subVectors(T,x).multiplyScalar(i.rotateSpeed);const se=i.domElement;se&&(ue(2*Math.PI*S.x/se.clientHeight),le(2*Math.PI*S.y/se.clientHeight)),x.copy(T)}function ae(Y){if(L.length==1)I.set(Y.pageX,Y.pageY);else{const se=xt(Y),Fe=.5*(Y.pageX+se.x),oe=.5*(Y.pageY+se.y);I.set(Fe,oe)}R.subVectors(I,w).multiplyScalar(i.panSpeed),he(R.x,R.y),w.copy(I)}function Et(Y){const se=xt(Y),Fe=Y.pageX-se.x,oe=Y.pageY-se.y,$e=Math.sqrt(Fe*Fe+oe*oe);B.set(0,$e),z.set(0,Math.pow(B.y/D.y,i.zoomSpeed)),Me(z.y),D.copy(B)}function ft(Y){i.enableZoom&&Et(Y),i.enablePan&&ae(Y)}function Lt(Y){i.enableZoom&&Et(Y),i.enableRotate&&lt(Y)}function pt(Y){var se,Fe;i.enabled!==!1&&(L.length===0&&((se=i.domElement)==null||se.ownerDocument.addEventListener("pointermove",te),(Fe=i.domElement)==null||Fe.ownerDocument.addEventListener("pointerup",X)),Ht(Y),Y.pointerType==="touch"?Tt(Y):de(Y))}function te(Y){i.enabled!==!1&&(Y.pointerType==="touch"?gt(Y):Le(Y))}function X(Y){var se,Fe,oe;nt(Y),L.length===0&&((se=i.domElement)==null||se.releasePointerCapture(Y.pointerId),(Fe=i.domElement)==null||Fe.ownerDocument.removeEventListener("pointermove",te),(oe=i.domElement)==null||oe.ownerDocument.removeEventListener("pointerup",X)),i.dispatchEvent(s),c=l.NONE}function de(Y){let se;switch(Y.button){case 0:se=i.mouseButtons.LEFT;break;case 1:se=i.mouseButtons.MIDDLE;break;case 2:se=i.mouseButtons.RIGHT;break;default:se=-1}switch(se){case vm.DOLLY:if(i.enableZoom===!1)return;ht(Y),c=l.DOLLY;break;case vm.ROTATE:if(Y.ctrlKey||Y.metaKey||Y.shiftKey){if(i.enablePan===!1)return;be(Y),c=l.PAN}else{if(i.enableRotate===!1)return;Ge(Y),c=l.ROTATE}break;case vm.PAN:if(Y.ctrlKey||Y.metaKey||Y.shiftKey){if(i.enableRotate===!1)return;Ge(Y),c=l.ROTATE}else{if(i.enablePan===!1)return;be(Y),c=l.PAN}break;default:c=l.NONE}c!==l.NONE&&i.dispatchEvent(a)}function Le(Y){if(i.enabled!==!1)switch(c){case l.ROTATE:if(i.enableRotate===!1)return;Te(Y);break;case l.DOLLY:if(i.enableZoom===!1)return;dt(Y);break;case l.PAN:if(i.enablePan===!1)return;ve(Y);break}}function Ze(Y){i.enabled===!1||i.enableZoom===!1||c!==l.NONE&&c!==l.ROTATE||(Y.preventDefault(),i.dispatchEvent(a),Ye(Y),i.dispatchEvent(s))}function Oe(Y){i.enabled===!1||i.enablePan===!1||wt(Y)}function Tt(Y){switch(ot(Y),L.length){case 1:switch(i.touches.ONE){case ym.ROTATE:if(i.enableRotate===!1)return;je(),c=l.TOUCH_ROTATE;break;case ym.PAN:if(i.enablePan===!1)return;At(),c=l.TOUCH_PAN;break;default:c=l.NONE}break;case 2:switch(i.touches.TWO){case ym.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Qe(),c=l.TOUCH_DOLLY_PAN;break;case ym.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ve(),c=l.TOUCH_DOLLY_ROTATE;break;default:c=l.NONE}break;default:c=l.NONE}c!==l.NONE&&i.dispatchEvent(a)}function gt(Y){switch(ot(Y),c){case l.TOUCH_ROTATE:if(i.enableRotate===!1)return;lt(Y),i.update();break;case l.TOUCH_PAN:if(i.enablePan===!1)return;ae(Y),i.update();break;case l.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ft(Y),i.update();break;case l.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Lt(Y),i.update();break;default:c=l.NONE}}function Pt(Y){i.enabled!==!1&&Y.preventDefault()}function Ht(Y){L.push(Y)}function nt(Y){delete V[Y.pointerId];for(let se=0;se<L.length;se++)if(L[se].pointerId==Y.pointerId){L.splice(se,1);return}}function ot(Y){let se=V[Y.pointerId];se===void 0&&(se=new tt,V[Y.pointerId]=se),se.set(Y.pageX,Y.pageY)}function xt(Y){const se=Y.pointerId===L[0].pointerId?L[1]:L[0];return V[se.pointerId]}this.dollyIn=(Y=q())=>{J(Y),i.update()},this.dollyOut=(Y=q())=>{Me(Y),i.update()},this.getScale=()=>v,this.setScale=Y=>{we(Y),i.update()},this.getZoomScale=()=>q(),t!==void 0&&this.connect(t),this.update()}};const Ose=H.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:a=!1,onChange:s,onStart:l,onEnd:c,...f},p)=>{const g=Ed(z=>z.invalidate),v=Ed(z=>z.camera),_=Ed(z=>z.gl),x=Ed(z=>z.events),T=Ed(z=>z.setEvents),S=Ed(z=>z.set),w=Ed(z=>z.get),I=Ed(z=>z.performance),R=e||v,D=i||x.connected||_.domElement,B=H.useMemo(()=>new Nse(R),[R]);return LD(()=>{B.enabled&&B.update()},-1),H.useEffect(()=>(a&&B.connect(a===!0?D:a),B.connect(D),()=>void B.dispose()),[a,D,t,B,g]),H.useEffect(()=>{const z=P=>{g(),t&&I.regress(),s&&s(P)},k=P=>{l&&l(P)},F=P=>{c&&c(P)};return B.addEventListener("change",z),B.addEventListener("start",k),B.addEventListener("end",F),()=>{B.removeEventListener("start",k),B.removeEventListener("end",F),B.removeEventListener("change",z)}},[s,l,c,B,g,T]),H.useEffect(()=>{if(n){const z=w().controls;return S({controls:B}),()=>S({controls:z})}},[n,B]),H.createElement("primitive",iT({ref:p,object:B,enableDamping:r},f))}),Dse=H.forwardRef(function({children:e,object:t,disable:i,disableX:r,disableY:a,disableZ:s,left:l,right:c,top:f,bottom:p,front:g,back:v,onCentered:_,precise:x=!0,cacheKey:T=0,...S},w){const I=H.useRef(null),R=H.useRef(null),D=H.useRef(null),[B]=H.useState(()=>new es),[z]=H.useState(()=>new re),[k]=H.useState(()=>new Ca);return H.useLayoutEffect(()=>{R.current.matrixWorld.identity(),B.setFromObject(t??D.current,x);const F=B.max.x-B.min.x,P=B.max.y-B.min.y,L=B.max.z-B.min.z;B.getCenter(z),B.getBoundingSphere(k);const V=f?P/2:p?-P/2:0,W=l?-F/2:c?F/2:0,q=g?L/2:v?-L/2:0;R.current.position.set(i||r?0:-z.x+W,i||a?0:-z.y+V,i||s?0:-z.z+q),_==null||_({parent:I.current.parent,container:I.current,width:F,height:P,depth:L,boundingBox:B,boundingSphere:k,center:z,verticalAlignment:V,horizontalAlignment:W,depthAlignment:q})},[T,_,f,l,g,i,r,a,s,t,x,c,p,v,B,z,k]),H.useImperativeHandle(w,()=>I.current,[]),H.createElement("group",iT({ref:I},S),H.createElement("group",{ref:R},H.createElement("group",{ref:D},e)))}),Lse=H.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:i=1,floatIntensity:r=1,floatingRange:a=[-.1,.1],autoInvalidate:s=!1,...l},c)=>{const f=H.useRef(null);H.useImperativeHandle(c,()=>f.current,[]);const p=H.useRef(Math.random()*1e4);return LD(g=>{var v,_;if(!e||t===0)return;s&&g.invalidate();const x=p.current+g.clock.elapsedTime;f.current.rotation.x=Math.cos(x/4*t)/8*i,f.current.rotation.y=Math.sin(x/4*t)/8*i,f.current.rotation.z=Math.sin(x/4*t)/20*i;let T=Math.sin(x/4*t)/10;T=xj.mapLinear(T,-.1,.1,(v=a==null?void 0:a[0])!==null&&v!==void 0?v:-.1,(_=a==null?void 0:a[1])!==null&&_!==void 0?_:.1),f.current.position.y=T*r,f.current.updateMatrix()}),H.createElement("group",l,H.createElement("group",{ref:f,matrixAutoUpdate:!1},n))});function kse({url:n}){const e=kD(Ese,n),t=H.useRef();return LD((i,r)=>{t.current&&(t.current.rotation.z+=r*.5)}),O.jsx("mesh",{ref:t,geometry:e,rotation:[-Math.PI/2,0,0],scale:[40,40,40],children:O.jsx("meshPhongMaterial",{color:16777215,specular:1118481,shininess:200})})}function Use(){return O.jsx("div",{className:"w-full h-full",children:O.jsxs(wse,{camera:{position:[0,0,100],fov:50},children:[O.jsx("ambientLight",{intensity:.6}),O.jsx("directionalLight",{position:[10,10,10],intensity:1}),O.jsx("pointLight",{position:[-20,0,20],color:"#F59E0B",intensity:2,distance:100}),O.jsx("pointLight",{position:[20,0,20],color:"#2563EB",intensity:2,distance:100}),O.jsx(Lse,{speed:2,rotationIntensity:.5,floatIntensity:.5,children:O.jsx(Dse,{children:O.jsx(dg.Suspense,{fallback:null,children:O.jsx(kse,{url:"/images/Tuna-s_craft.stl"})})})}),O.jsx(Ose,{enableZoom:!1,autoRotate:!1})]})})}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fse=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zse=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=n=>{const e=zse(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bse={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vse=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jse=H.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:s,...l},c)=>H.createElement("svg",{ref:c,...Bse,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:Z8("lucide",r),...!a&&!Vse(l)&&{"aria-hidden":"true"},...l},[...s.map(([f,p])=>H.createElement(f,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=(n,e)=>{const t=H.forwardRef(({className:i,...r},a)=>H.createElement(jse,{ref:a,iconNode:e,className:Z8(`lucide-${Fse(cF(n))}`,`lucide-${n}`,i),...r}));return t.displayName=cF(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hse=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],nM=Ar("arrow-left",Hse);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Wse=Ar("circle-alert",Gse);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qse=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],rT=Ar("circle-check-big",qse);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $se=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Xse=Ar("clock",$se);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yse=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Kse=Ar("dollar-sign",Yse);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zse=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Qse=Ar("eye",Zse);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jse=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],eoe=Ar("facebook",Jse);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toe=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Q8=Ar("file-text",toe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const noe=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],fF=Ar("house",noe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ioe=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],roe=Ar("instagram",ioe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aoe=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],soe=Ar("menu",aoe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ooe=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],gN=Ar("package",ooe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const loe=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],uoe=Ar("palette",loe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const coe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],J_=Ar("plus",coe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const foe=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],hF=Ar("ruler",foe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hoe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],doe=Ar("search",hoe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const poe=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],J8=Ar("shopping-bag",poe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const moe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],dF=Ar("square-pen",moe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const goe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Kv=Ar("trash-2",goe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const voe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],vN=Ar("upload",voe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yoe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],_oe=Ar("users",yoe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const boe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],yN=Ar("x",boe),xoe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSZQKUeUWpxU8XNWtif8j4aEKN0InJpbxQFpK4Q4Ci5zVI1ZIlUlKTU42AomgXFPfa73Rb0w1CT1mU-/pub?output=csv",e9=()=>{const[n,e]=H.useState([]),[t,i]=H.useState(!0),r=s=>{if(!s)return"";const l=/(?:\/d\/|id=)([a-zA-Z0-9_-]+)/,c=s.match(l);return c&&c[1]?`https://drive.google.com/thumbnail?id=${c[1]}&sz=w800`:s},a=s=>{const l=s.split(`
`),c=l[0].split(",").map(p=>p.trim().toLowerCase()),f=[];for(let p=1;p<l.length;p++){const g=l[p].split(",");if(g.length<c.length)continue;const v={};c.forEach((_,x)=>{let T=g[x]?g[x].trim():"";v[_]=T}),v.name&&f.push({name:v.name,price:v.price||"$0",quantity:parseInt(v.quantity||v.availability||0),category:v.category||"Otros",image:r(v.photo||v.image),color:"#2563EB"})}return f};return H.useEffect(()=>{(async()=>{try{const c=await(await fetch(xoe)).text(),f=a(c);f.length>0&&e(f)}catch(l){console.error("Error fetching gallery:",l)}finally{i(!1)}})()},[]),{products:n,loading:t}},Soe=()=>{const[n,e]=H.useState(!1),[t,i]=H.useState(null),[r,a]=H.useState("all"),{products:s}=e9(),l=["Todos",...new Set(s.map(_=>_.category).filter(Boolean))],f=(r==="Todos"||r==="all"?s:s.filter(_=>_.category===r)).slice(0,12),[p,g]=H.useState(!1);H.useEffect(()=>{const _=()=>g(window.scrollY>20);return window.addEventListener("scroll",_),()=>window.removeEventListener("scroll",_)},[]);const v=()=>e(!n);return O.jsxs("div",{className:"bg-brand-dark min-h-screen text-slate-100 font-sans",children:[O.jsxs("nav",{className:`fixed w-full z-50 transition-all duration-300 ${p?"bg-brand-dark/90 backdrop-blur-md border-b border-white/10":"bg-transparent"}`,children:[O.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:O.jsxs("div",{className:"flex justify-between items-center h-20",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("img",{className:"h-12 w-auto",src:"/logo.png",alt:"Tuna's Craft"}),O.jsx("span",{className:"font-display font-bold text-2xl tracking-tight text-white",children:"Tuna's Craft"})]}),O.jsxs("div",{className:"hidden md:flex space-x-8 items-center",children:[O.jsx("a",{href:"#gallery",className:"text-slate-300 hover:text-white transition-colors",children:"Galera"}),O.jsx("a",{href:"#services",className:"text-slate-300 hover:text-white transition-colors",children:"Servicios"}),O.jsx("a",{href:"#delivery",className:"text-slate-300 hover:text-white transition-colors",children:"Entregas"}),O.jsx(Jo,{to:"/status",className:"text-slate-300 hover:text-white transition-colors",children:"Status del Pedido"}),O.jsx(Jo,{to:"/quote",className:"bg-brand-orange hover:bg-orange-600 text-white px-6 py-2 rounded-full font-bold transition-all transform hover:scale-105 shadow-lg hover:shadow-orange-500/25",children:"Cotizar Ahora"})]}),O.jsx("div",{className:"md:hidden",children:O.jsx("button",{onClick:v,className:"text-gray-300 hover:text-white p-2",children:n?O.jsx(yN,{size:24}):O.jsx(soe,{size:24})})})]})}),n&&O.jsx("div",{className:"md:hidden bg-brand-dark border-t border-white/10 p-4",children:O.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[O.jsx("a",{href:"#gallery",onClick:v,className:"text-slate-300 hover:text-white text-lg",children:"Galera"}),O.jsx("a",{href:"#services",onClick:v,className:"text-slate-300 hover:text-white text-lg",children:"Servicios"}),O.jsx("a",{href:"#delivery",onClick:v,className:"text-slate-300 hover:text-white text-lg",children:"Entregas"}),O.jsx(Jo,{to:"/status",onClick:v,className:"text-slate-300 hover:text-white text-lg",children:"Status del Pedido"}),O.jsx(Jo,{to:"/quote",onClick:v,className:"bg-brand-orange text-white px-8 py-3 rounded-full font-bold text-lg mt-4",children:"Cotizar Ahora"})]})})]}),O.jsxs("section",{className:"relative min-h-screen flex items-center justify-center pt-20 overflow-hidden",children:[O.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden -z-10",children:[O.jsx("div",{className:"absolute top-1/4 -left-20 w-96 h-96 bg-brand-blue/20 rounded-full blur-3xl animate-pulse"}),O.jsx("div",{className:"absolute bottom-1/4 -right-20 w-96 h-96 bg-brand-orange/10 rounded-full blur-3xl animate-pulse delay-1000"})]}),O.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center gap-12 w-full",children:[O.jsxs("div",{className:"flex-1 text-center md:text-left z-10",children:[O.jsxs("h1",{className:"font-display text-5xl md:text-7xl font-extrabold leading-tight mb-6",children:["Tus ideas, impresas en ",O.jsx("br",{}),O.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-brand-blue to-brand-orange",children:"3D Realidad"})]}),O.jsx("p",{className:"text-xl text-gray-400 mb-8 max-w-2xl mx-auto md:mx-0",children:"Creamos figuras, adornos y piezas personalizadas con la mejor calidad. Si lo imaginas, lo podemos imprimir!"}),O.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center md:justify-start",children:O.jsx(Jo,{to:"/quote",className:"bg-brand-blue hover:bg-blue-600 text-white text-lg px-8 py-4 rounded-xl font-bold shadow-xl shadow-blue-500/20 transition-all hover:-translate-y-1",children:"Hacer un Pedido"})})]}),O.jsx("div",{className:"flex-1 w-full h-[400px] md:h-[600px] relative z-10",children:O.jsx(Use,{})})]})]}),O.jsx("section",{id:"services",className:"py-24 bg-brand-dark/50",children:O.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[O.jsxs("div",{className:"text-center mb-16",children:[O.jsxs("h2",{className:"font-display text-4xl font-bold mb-4",children:["Nuestros ",O.jsx("span",{className:"text-brand-blue",children:"Servicios"})]}),O.jsx("p",{className:"text-gray-400",children:"Calidad premium en cada capa."})]}),O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[O.jsx(KI,{icon:O.jsx(hF,{size:40,className:"text-brand-blue"}),title:"Impresin a Medida",desc:"Prototipos, refacciones y piezas tcnicas diseadas especficamente para tus necesidades."}),O.jsx(KI,{icon:O.jsx(uoe,{size:40,className:"text-brand-orange"}),title:"Figuras y Arte",desc:"Coleccionables de anime, videojuegos y miniaturas de alta resolucin para pintar."}),O.jsx(KI,{icon:O.jsx(fF,{size:40,className:"text-purple-500"}),title:"Decoracin",desc:"Macetas, lmparas, litofanas y regalos nicos para darle vida a tus espacios."})]})]})}),O.jsx("section",{id:"delivery",className:"py-24 relative",children:O.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:O.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-[2rem] p-8 md:p-12 shadow-2xl flex flex-col md:flex-row gap-12",children:[O.jsxs("div",{className:"flex-1 space-y-8",children:[O.jsxs("h2",{className:"text-3xl font-display font-bold text-white",children:["Informacin de ",O.jsx("span",{className:"text-brand-orange",children:"Entregas"})]}),O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{className:"flex gap-4",children:[O.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white shadow-lg shadow-blue-500/30",children:O.jsx(fF,{size:24})}),O.jsxs("div",{children:[O.jsx("h4",{className:"font-bold text-white text-lg",children:"Punto de Entrega Principal"}),O.jsx("p",{className:"text-gray-400",children:"Metro Chabacano, CDMX"}),O.jsx("a",{href:"https://maps.google.com/?q=Metro+Chabacano",target:"_blank",rel:"noreferrer",className:"inline-block mt-3 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold px-4 py-2 rounded-lg transition-colors",children:"Ver Ubicacin en Mapa"}),O.jsx("p",{className:"text-blue-400 text-xs font-bold mt-2",children:"Sbados: 11:00 am - 3:00 pm"})]})]}),O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-slate-700 rounded-full flex items-center justify-center text-slate-300",children:O.jsx(hF,{size:24})}),O.jsxs("div",{children:[O.jsx("h4",{className:"font-bold text-white",children:"Entregas Urgentes / Entre Semana"}),O.jsx("p",{className:"text-sm text-gray-500",children:"Punto a convenir (Con costo extra)"})]})]}),O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-brand-orange rounded-full flex items-center justify-center text-black font-bold shadow-lg shadow-orange-500/20",children:O.jsx(gN,{size:24})}),O.jsxs("div",{children:[O.jsx("h4",{className:"font-bold text-white",children:"Envos a todo Mxico"}),O.jsx("p",{className:"text-sm text-gray-500",children:"Paquetera segura (Con costo adicional)"})]})]})]})]}),O.jsxs("div",{className:"flex-1 bg-black/20 rounded-2xl p-8 border border-white/5",children:[O.jsx("h3",{className:"text-xl font-bold text-center mb-8 text-white",children:"Mtodos de Pago"}),O.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[O.jsx("div",{className:"bg-slate-800/50 border border-slate-700 p-4 rounded-xl flex items-center justify-center text-sm font-medium text-gray-300 hover:bg-slate-700/50 transition-colors cursor-default",children:" Tarjeta / MSI"}),O.jsx("div",{className:"bg-slate-800/50 border border-slate-700 p-4 rounded-xl flex items-center justify-center text-sm font-medium text-gray-300 hover:bg-slate-700/50 transition-colors cursor-default",children:" Transferencia"}),O.jsx("div",{className:"bg-slate-800/50 border border-slate-700 p-4 rounded-xl flex items-center justify-center text-sm font-medium text-gray-300 hover:bg-slate-700/50 transition-colors cursor-default",children:" Efectivo"}),O.jsx("div",{className:"bg-white p-4 rounded-xl flex items-center justify-center shadow-lg hover:scale-105 transition-transform cursor-pointer",children:O.jsx("span",{className:"text-blue-500 font-bold italic",children:"mercadopago"})})]}),O.jsx("div",{className:"mt-8 text-center",children:O.jsx(Jo,{to:"/status",className:"inline-flex items-center gap-2 text-brand-blue font-bold hover:text-white transition-colors",children:"Revisa estatus de tu pedido "})})]})]})})}),O.jsxs("section",{id:"gallery",className:"py-24 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[O.jsxs("h2",{className:"font-display text-4xl font-bold mb-6 text-center text-white",children:["Galera de ",O.jsx("span",{className:"text-brand-orange",children:"Trabajos"})]}),O.jsx("div",{className:"flex flex-wrap justify-center gap-3 mb-10",children:l.map(_=>O.jsx("button",{onClick:()=>a(_),className:`px-6 py-2 rounded-full font-bold text-sm transition-all border-2 
                        ${r===_||_==="Todos"&&r==="all"?"bg-brand-orange text-white border-brand-orange shadow-lg shadow-orange-500/30":"bg-transparent text-gray-300 border-gray-600 hover:border-gray-400 hover:text-white"}`,children:_},_))}),O.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:f.map((_,x)=>O.jsxs("div",{onClick:()=>i(_.image),className:"group relative overflow-hidden rounded-2xl shadow-lg aspect-square bg-gray-900 cursor-pointer hover:shadow-2xl transition-all hover:scale-[1.02]",children:[O.jsx("div",{className:"w-full h-full bg-cover bg-center group-hover:scale-110 transition-transform duration-500",style:{backgroundImage:`url('${_.image}')`}}),O.jsx("div",{className:"absolute top-4 right-4 flex flex-col items-end gap-2 z-10",children:O.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider shadow-sm ${_.quantity>0?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:_.quantity>0?"Disponible":"Agotado"})}),O.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-4 bg-gradient-to-t from-black/90 via-black/50 to-transparent",children:[O.jsx("h3",{className:"text-white font-bold text-lg drop-shadow-md leading-tight",children:_.name}),O.jsx("p",{className:"text-brand-orange font-bold text-xl mt-1",children:_.price})]})]},x))})]}),t&&O.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 flex items-center justify-center p-4",onClick:()=>i(null),children:[O.jsx("button",{className:"absolute top-4 right-4 text-white hover:text-brand-orange p-2",children:O.jsx(yN,{size:32})}),O.jsx("img",{src:t,alt:"Full view",className:"max-h-[90vh] max-w-[90vw] rounded-lg shadow-2xl",onClick:_=>_.stopPropagation()})]}),O.jsxs("footer",{className:"bg-black py-16 border-t border-white/10 text-center relative overflow-hidden",children:[O.jsxs("div",{className:"flex justify-center gap-10 mb-10",children:[O.jsx(pF,{href:"https://facebook.com/tunascraft3d",icon:O.jsx(eoe,{}),label:"Facebook"}),O.jsx(pF,{href:"https://instagram.com/tunas_craft",icon:O.jsx(roe,{}),label:"Instagram"})]}),O.jsx("p",{className:"text-gray-500 font-medium text-sm",children:" 2024 Tuna's Craft. Hecho con  y ."}),O.jsx("div",{className:"mt-4",children:O.jsx(Jo,{to:"/admin",className:"text-xs text-gray-700 hover:text-brand-blue",children:"Admin Access"})})]})]})},KI=({icon:n,title:e,desc:t})=>O.jsxs("div",{className:"glass p-8 rounded-2xl hover:bg-white/5 transition-all cursor-default group",children:[O.jsx("div",{className:"w-14 h-14 bg-white/5 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform",children:n}),O.jsx("h3",{className:"font-display text-2xl font-bold mb-3",children:e}),O.jsx("p",{className:"text-gray-400 leading-relaxed",children:t})]}),pF=({href:n,icon:e,label:t})=>O.jsxs("a",{href:n,target:"_blank",rel:"noreferrer",className:"group flex flex-col items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[O.jsx("div",{className:"p-4 bg-white/5 rounded-2xl group-hover:bg-brand-blue/10 group-hover:scale-110 transition-all border border-white/5 shadow-lg",children:dg.cloneElement(e,{size:24})}),O.jsx("span",{className:"text-xs font-medium",children:t})]}),woe=()=>{};var mF={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Eoe=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=n[t++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=n[t++],s=n[t++],l=n[t++],c=((r&7)<<18|(a&63)<<12|(s&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const a=n[t++],s=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|s&63)}}return e.join("")},n9={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const a=n[r],s=r+1<n.length,l=s?n[r+1]:0,c=r+2<n.length,f=c?n[r+2]:0,p=a>>2,g=(a&3)<<4|l>>4;let v=(l&15)<<2|f>>6,_=f&63;c||(_=64,s||(v=64)),i.push(t[p],t[g],t[v],t[_])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(t9(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Eoe(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const a=t[n.charAt(r++)],l=r<n.length?t[n.charAt(r)]:0;++r;const f=r<n.length?t[n.charAt(r)]:64;++r;const g=r<n.length?t[n.charAt(r)]:64;if(++r,a==null||l==null||f==null||g==null)throw new Toe;const v=a<<2|l>>4;if(i.push(v),f!==64){const _=l<<4&240|f>>2;if(i.push(_),g!==64){const x=f<<6&192|g;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Toe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Aoe=function(n){const e=t9(n);return n9.encodeByteArray(e,!0)},aT=function(n){return Aoe(n).replace(/\./g,"")},i9=function(n){try{return n9.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Moe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Coe=()=>Moe().__FIREBASE_DEFAULTS__,Ioe=()=>{if(typeof process>"u"||typeof mF>"u")return;const n=mF.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Roe=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&i9(n[1]);return e&&JSON.parse(e)},iM=()=>{try{return woe()||Coe()||Ioe()||Roe()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},r9=n=>{var e,t;return(t=(e=iM())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},a9=n=>{const e=r9(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},s9=()=>{var n;return(n=iM())==null?void 0:n.config},o9=n=>{var e;return(e=iM())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Poe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function FD(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l9(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[aT(JSON.stringify(t)),aT(JSON.stringify(s)),""].join(".")}const vb={};function Noe(){const n={prod:[],emulator:[]};for(const e of Object.keys(vb))vb[e]?n.emulator.push(e):n.prod.push(e);return n}function Ooe(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let gF=!1;function zD(n,e){if(typeof window>"u"||typeof document>"u"||!pp(window.location.host)||vb[n]===e||vb[n]||gF)return;vb[n]=e;function t(v){return`__firebase__banner__${v}`}const i="__firebase__banner",a=Noe().prod.length>0;function s(){const v=document.getElementById(i);v&&v.remove()}function l(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,_){v.setAttribute("width","24"),v.setAttribute("id",_),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{gF=!0,s()},v}function p(v,_){v.setAttribute("id",_),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=Ooe(i),_=t("text"),x=document.getElementById(_)||document.createElement("span"),T=t("learnmore"),S=document.getElementById(T)||document.createElement("a"),w=t("preprendIcon"),I=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const R=v.element;l(R),p(S,T);const D=f();c(I,w),R.append(I,x,S,D),document.body.appendChild(R)}a?(x.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Doe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Is())}function Loe(){var e;const n=(e=iM())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function koe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Uoe(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Foe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zoe(){const n=Is();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Boe(){return!Loe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Voe(){try{return typeof indexedDB=="object"}catch{return!1}}function joe(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var a;e(((a=r.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hoe="FirebaseError";class of extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Hoe,Object.setPrototypeOf(this,of.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cx.prototype.create)}}class Cx{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],s=a?Goe(a,i):"Error",l=`${this.serviceName}: ${s} (${r}).`;return new of(r,l,i)}}function Goe(n,e){return n.replace(Woe,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Woe=/\{\$([^}]+)}/g;function qoe(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function eg(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const a=n[r],s=e[r];if(vF(a)&&vF(s)){if(!eg(a,s))return!1}else if(a!==s)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function vF(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function $oe(n,e){const t=new Xoe(n,e);return t.subscribe.bind(t)}class Xoe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Yoe(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=ZI),r.error===void 0&&(r.error=ZI),r.complete===void 0&&(r.complete=ZI);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Yoe(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ZI(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(n){return n&&n._delegate?n._delegate:n}class tp{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Koe=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Poe;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Qoe(e))try{this.getOrInitializeService({instanceIdentifier:bm})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=bm){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bm){return this.instances.has(e)}getOptions(e=bm){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);i===l&&s.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&e(a,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Zoe(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=bm){return this.component?this.component.multipleInstances?e:bm:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Zoe(n){return n===bm?void 0:n}function Qoe(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Joe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Koe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $n;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})($n||($n={}));const ele={debug:$n.DEBUG,verbose:$n.VERBOSE,info:$n.INFO,warn:$n.WARN,error:$n.ERROR,silent:$n.SILENT},tle=$n.INFO,nle={[$n.DEBUG]:"log",[$n.VERBOSE]:"log",[$n.INFO]:"info",[$n.WARN]:"warn",[$n.ERROR]:"error"},ile=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=nle[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class BD{constructor(e){this.name=e,this._logLevel=tle,this._logHandler=ile,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $n))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ele[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$n.DEBUG,...e),this._logHandler(this,$n.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$n.VERBOSE,...e),this._logHandler(this,$n.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$n.INFO,...e),this._logHandler(this,$n.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$n.WARN,...e),this._logHandler(this,$n.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$n.ERROR,...e),this._logHandler(this,$n.ERROR,...e)}}const rle=(n,e)=>e.some(t=>n instanceof t);let yF,_F;function ale(){return yF||(yF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sle(){return _F||(_F=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const u9=new WeakMap,_N=new WeakMap,c9=new WeakMap,QI=new WeakMap,VD=new WeakMap;function ole(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",a),n.removeEventListener("error",s)},a=()=>{t(Gd(n.result)),r()},s=()=>{i(n.error),r()};n.addEventListener("success",a),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&u9.set(t,n)}).catch(()=>{}),VD.set(e,n),e}function lle(n){if(_N.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",s),n.removeEventListener("abort",s)},a=()=>{t(),r()},s=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",a),n.addEventListener("error",s),n.addEventListener("abort",s)});_N.set(n,e)}let bN={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return _N.get(n);if(e==="objectStoreNames")return n.objectStoreNames||c9.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gd(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ule(n){bN=n(bN)}function cle(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(JI(this),e,...t);return c9.set(i,e.sort?e.sort():[e]),Gd(i)}:sle().includes(n)?function(...e){return n.apply(JI(this),e),Gd(u9.get(this))}:function(...e){return Gd(n.apply(JI(this),e))}}function fle(n){return typeof n=="function"?cle(n):(n instanceof IDBTransaction&&lle(n),rle(n,ale())?new Proxy(n,bN):n)}function Gd(n){if(n instanceof IDBRequest)return ole(n);if(QI.has(n))return QI.get(n);const e=fle(n);return e!==n&&(QI.set(n,e),VD.set(e,n)),e}const JI=n=>VD.get(n);function hle(n,e,{blocked:t,upgrade:i,blocking:r,terminated:a}={}){const s=indexedDB.open(n,e),l=Gd(s);return i&&s.addEventListener("upgradeneeded",c=>{i(Gd(s.result),c.oldVersion,c.newVersion,Gd(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),r&&c.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const dle=["get","getKey","getAll","getAllKeys","count"],ple=["put","add","delete","clear"],eR=new Map;function bF(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(eR.get(e))return eR.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=ple.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||dle.includes(t)))return;const a=async function(s,...l){const c=this.transaction(s,r?"readwrite":"readonly");let f=c.store;return i&&(f=f.index(l.shift())),(await Promise.all([f[t](...l),r&&c.done]))[0]};return eR.set(e,a),a}ule(n=>({...n,get:(e,t,i)=>bF(e,t)||n.get(e,t,i),has:(e,t)=>!!bF(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mle{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(gle(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function gle(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xN="@firebase/app",xF="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new BD("@firebase/app"),vle="@firebase/app-compat",yle="@firebase/analytics-compat",_le="@firebase/analytics",ble="@firebase/app-check-compat",xle="@firebase/app-check",Sle="@firebase/auth",wle="@firebase/auth-compat",Ele="@firebase/database",Tle="@firebase/data-connect",Ale="@firebase/database-compat",Mle="@firebase/functions",Cle="@firebase/functions-compat",Ile="@firebase/installations",Rle="@firebase/installations-compat",Ple="@firebase/messaging",Nle="@firebase/messaging-compat",Ole="@firebase/performance",Dle="@firebase/performance-compat",Lle="@firebase/remote-config",kle="@firebase/remote-config-compat",Ule="@firebase/storage",Fle="@firebase/storage-compat",zle="@firebase/firestore",Ble="@firebase/ai",Vle="@firebase/firestore-compat",jle="firebase",Hle="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN="[DEFAULT]",Gle={[xN]:"fire-core",[vle]:"fire-core-compat",[_le]:"fire-analytics",[yle]:"fire-analytics-compat",[xle]:"fire-app-check",[ble]:"fire-app-check-compat",[Sle]:"fire-auth",[wle]:"fire-auth-compat",[Ele]:"fire-rtdb",[Tle]:"fire-data-connect",[Ale]:"fire-rtdb-compat",[Mle]:"fire-fn",[Cle]:"fire-fn-compat",[Ile]:"fire-iid",[Rle]:"fire-iid-compat",[Ple]:"fire-fcm",[Nle]:"fire-fcm-compat",[Ole]:"fire-perf",[Dle]:"fire-perf-compat",[Lle]:"fire-rc",[kle]:"fire-rc-compat",[Ule]:"fire-gcs",[Fle]:"fire-gcs-compat",[zle]:"fire-fst",[Vle]:"fire-fst-compat",[Ble]:"fire-vertex","fire-js":"fire-js",[jle]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=new Map,Wle=new Map,wN=new Map;function SF(n,e){try{n.container.addComponent(e)}catch(t){uh.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function tg(n){const e=n.name;if(wN.has(e))return uh.debug(`There were multiple attempts to register component ${e}.`),!1;wN.set(e,n);for(const t of sT.values())SF(t,n);for(const t of Wle.values())SF(t,n);return!0}function rM(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Hl(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qle={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wd=new Cx("app","Firebase",qle);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $le{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new tp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wd.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg=Hle;function f9(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:SN,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Wd.create("bad-app-name",{appName:String(r)});if(t||(t=s9()),!t)throw Wd.create("no-options");const a=sT.get(r);if(a){if(eg(t,a.options)&&eg(i,a.config))return a;throw Wd.create("duplicate-app",{appName:r})}const s=new Joe(r);for(const c of wN.values())s.addComponent(c);const l=new $le(t,i,s);return sT.set(r,l),l}function jD(n=SN){const e=sT.get(n);if(!e&&n===SN&&s9())return f9();if(!e)throw Wd.create("no-app",{appName:n});return e}function Bc(n,e,t){let i=Gle[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const s=[`Unable to register library "${i}" with version "${e}":`];r&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),uh.warn(s.join(" "));return}tg(new tp(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xle="firebase-heartbeat-database",Yle=1,Wb="firebase-heartbeat-store";let tR=null;function h9(){return tR||(tR=hle(Xle,Yle,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Wb)}catch(t){console.warn(t)}}}}).catch(n=>{throw Wd.create("idb-open",{originalErrorMessage:n.message})})),tR}async function Kle(n){try{const t=(await h9()).transaction(Wb),i=await t.objectStore(Wb).get(d9(n));return await t.done,i}catch(e){if(e instanceof of)uh.warn(e.message);else{const t=Wd.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});uh.warn(t.message)}}}async function wF(n,e){try{const i=(await h9()).transaction(Wb,"readwrite");await i.objectStore(Wb).put(e,d9(n)),await i.done}catch(t){if(t instanceof of)uh.warn(t.message);else{const i=Wd.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});uh.warn(i.message)}}}function d9(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zle=1024,Qle=30;class Jle{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new tue(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=EF();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>Qle){const s=nue(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){uh.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=EF(),{heartbeatsToSend:i,unsentEntries:r}=eue(this._heartbeatsCache.heartbeats),a=aT(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return uh.warn(t),""}}}function EF(){return new Date().toISOString().substring(0,10)}function eue(n,e=Zle){const t=[];let i=n.slice();for(const r of n){const a=t.find(s=>s.agent===r.agent);if(a){if(a.dates.push(r.date),TF(t)>e){a.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),TF(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class tue{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Voe()?joe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Kle(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return wF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return wF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function TF(n){return aT(JSON.stringify({version:2,heartbeats:n})).length}function nue(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iue(n){tg(new tp("platform-logger",e=>new mle(e),"PRIVATE")),tg(new tp("heartbeat",e=>new Jle(e),"PRIVATE")),Bc(xN,xF,n),Bc(xN,xF,"esm2020"),Bc("fire-js","")}iue("");var rue="firebase",aue="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bc(rue,aue,"app");var AF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qd,p9;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,F){function P(){}P.prototype=F.prototype,k.F=F.prototype,k.prototype=new P,k.prototype.constructor=k,k.D=function(L,V,W){for(var q=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)q[ue-2]=arguments[ue];return F.prototype[V].apply(L,q)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(k,F,P){P||(P=0);const L=Array(16);if(typeof F=="string")for(var V=0;V<16;++V)L[V]=F.charCodeAt(P++)|F.charCodeAt(P++)<<8|F.charCodeAt(P++)<<16|F.charCodeAt(P++)<<24;else for(V=0;V<16;++V)L[V]=F[P++]|F[P++]<<8|F[P++]<<16|F[P++]<<24;F=k.g[0],P=k.g[1],V=k.g[2];let W=k.g[3],q;q=F+(W^P&(V^W))+L[0]+3614090360&4294967295,F=P+(q<<7&4294967295|q>>>25),q=W+(V^F&(P^V))+L[1]+3905402710&4294967295,W=F+(q<<12&4294967295|q>>>20),q=V+(P^W&(F^P))+L[2]+606105819&4294967295,V=W+(q<<17&4294967295|q>>>15),q=P+(F^V&(W^F))+L[3]+3250441966&4294967295,P=V+(q<<22&4294967295|q>>>10),q=F+(W^P&(V^W))+L[4]+4118548399&4294967295,F=P+(q<<7&4294967295|q>>>25),q=W+(V^F&(P^V))+L[5]+1200080426&4294967295,W=F+(q<<12&4294967295|q>>>20),q=V+(P^W&(F^P))+L[6]+2821735955&4294967295,V=W+(q<<17&4294967295|q>>>15),q=P+(F^V&(W^F))+L[7]+4249261313&4294967295,P=V+(q<<22&4294967295|q>>>10),q=F+(W^P&(V^W))+L[8]+1770035416&4294967295,F=P+(q<<7&4294967295|q>>>25),q=W+(V^F&(P^V))+L[9]+2336552879&4294967295,W=F+(q<<12&4294967295|q>>>20),q=V+(P^W&(F^P))+L[10]+4294925233&4294967295,V=W+(q<<17&4294967295|q>>>15),q=P+(F^V&(W^F))+L[11]+2304563134&4294967295,P=V+(q<<22&4294967295|q>>>10),q=F+(W^P&(V^W))+L[12]+1804603682&4294967295,F=P+(q<<7&4294967295|q>>>25),q=W+(V^F&(P^V))+L[13]+4254626195&4294967295,W=F+(q<<12&4294967295|q>>>20),q=V+(P^W&(F^P))+L[14]+2792965006&4294967295,V=W+(q<<17&4294967295|q>>>15),q=P+(F^V&(W^F))+L[15]+1236535329&4294967295,P=V+(q<<22&4294967295|q>>>10),q=F+(V^W&(P^V))+L[1]+4129170786&4294967295,F=P+(q<<5&4294967295|q>>>27),q=W+(P^V&(F^P))+L[6]+3225465664&4294967295,W=F+(q<<9&4294967295|q>>>23),q=V+(F^P&(W^F))+L[11]+643717713&4294967295,V=W+(q<<14&4294967295|q>>>18),q=P+(W^F&(V^W))+L[0]+3921069994&4294967295,P=V+(q<<20&4294967295|q>>>12),q=F+(V^W&(P^V))+L[5]+3593408605&4294967295,F=P+(q<<5&4294967295|q>>>27),q=W+(P^V&(F^P))+L[10]+38016083&4294967295,W=F+(q<<9&4294967295|q>>>23),q=V+(F^P&(W^F))+L[15]+3634488961&4294967295,V=W+(q<<14&4294967295|q>>>18),q=P+(W^F&(V^W))+L[4]+3889429448&4294967295,P=V+(q<<20&4294967295|q>>>12),q=F+(V^W&(P^V))+L[9]+568446438&4294967295,F=P+(q<<5&4294967295|q>>>27),q=W+(P^V&(F^P))+L[14]+3275163606&4294967295,W=F+(q<<9&4294967295|q>>>23),q=V+(F^P&(W^F))+L[3]+4107603335&4294967295,V=W+(q<<14&4294967295|q>>>18),q=P+(W^F&(V^W))+L[8]+1163531501&4294967295,P=V+(q<<20&4294967295|q>>>12),q=F+(V^W&(P^V))+L[13]+2850285829&4294967295,F=P+(q<<5&4294967295|q>>>27),q=W+(P^V&(F^P))+L[2]+4243563512&4294967295,W=F+(q<<9&4294967295|q>>>23),q=V+(F^P&(W^F))+L[7]+1735328473&4294967295,V=W+(q<<14&4294967295|q>>>18),q=P+(W^F&(V^W))+L[12]+2368359562&4294967295,P=V+(q<<20&4294967295|q>>>12),q=F+(P^V^W)+L[5]+4294588738&4294967295,F=P+(q<<4&4294967295|q>>>28),q=W+(F^P^V)+L[8]+2272392833&4294967295,W=F+(q<<11&4294967295|q>>>21),q=V+(W^F^P)+L[11]+1839030562&4294967295,V=W+(q<<16&4294967295|q>>>16),q=P+(V^W^F)+L[14]+4259657740&4294967295,P=V+(q<<23&4294967295|q>>>9),q=F+(P^V^W)+L[1]+2763975236&4294967295,F=P+(q<<4&4294967295|q>>>28),q=W+(F^P^V)+L[4]+1272893353&4294967295,W=F+(q<<11&4294967295|q>>>21),q=V+(W^F^P)+L[7]+4139469664&4294967295,V=W+(q<<16&4294967295|q>>>16),q=P+(V^W^F)+L[10]+3200236656&4294967295,P=V+(q<<23&4294967295|q>>>9),q=F+(P^V^W)+L[13]+681279174&4294967295,F=P+(q<<4&4294967295|q>>>28),q=W+(F^P^V)+L[0]+3936430074&4294967295,W=F+(q<<11&4294967295|q>>>21),q=V+(W^F^P)+L[3]+3572445317&4294967295,V=W+(q<<16&4294967295|q>>>16),q=P+(V^W^F)+L[6]+76029189&4294967295,P=V+(q<<23&4294967295|q>>>9),q=F+(P^V^W)+L[9]+3654602809&4294967295,F=P+(q<<4&4294967295|q>>>28),q=W+(F^P^V)+L[12]+3873151461&4294967295,W=F+(q<<11&4294967295|q>>>21),q=V+(W^F^P)+L[15]+530742520&4294967295,V=W+(q<<16&4294967295|q>>>16),q=P+(V^W^F)+L[2]+3299628645&4294967295,P=V+(q<<23&4294967295|q>>>9),q=F+(V^(P|~W))+L[0]+4096336452&4294967295,F=P+(q<<6&4294967295|q>>>26),q=W+(P^(F|~V))+L[7]+1126891415&4294967295,W=F+(q<<10&4294967295|q>>>22),q=V+(F^(W|~P))+L[14]+2878612391&4294967295,V=W+(q<<15&4294967295|q>>>17),q=P+(W^(V|~F))+L[5]+4237533241&4294967295,P=V+(q<<21&4294967295|q>>>11),q=F+(V^(P|~W))+L[12]+1700485571&4294967295,F=P+(q<<6&4294967295|q>>>26),q=W+(P^(F|~V))+L[3]+2399980690&4294967295,W=F+(q<<10&4294967295|q>>>22),q=V+(F^(W|~P))+L[10]+4293915773&4294967295,V=W+(q<<15&4294967295|q>>>17),q=P+(W^(V|~F))+L[1]+2240044497&4294967295,P=V+(q<<21&4294967295|q>>>11),q=F+(V^(P|~W))+L[8]+1873313359&4294967295,F=P+(q<<6&4294967295|q>>>26),q=W+(P^(F|~V))+L[15]+4264355552&4294967295,W=F+(q<<10&4294967295|q>>>22),q=V+(F^(W|~P))+L[6]+2734768916&4294967295,V=W+(q<<15&4294967295|q>>>17),q=P+(W^(V|~F))+L[13]+1309151649&4294967295,P=V+(q<<21&4294967295|q>>>11),q=F+(V^(P|~W))+L[4]+4149444226&4294967295,F=P+(q<<6&4294967295|q>>>26),q=W+(P^(F|~V))+L[11]+3174756917&4294967295,W=F+(q<<10&4294967295|q>>>22),q=V+(F^(W|~P))+L[2]+718787259&4294967295,V=W+(q<<15&4294967295|q>>>17),q=P+(W^(V|~F))+L[9]+3951481745&4294967295,k.g[0]=k.g[0]+F&4294967295,k.g[1]=k.g[1]+(V+(q<<21&4294967295|q>>>11))&4294967295,k.g[2]=k.g[2]+V&4294967295,k.g[3]=k.g[3]+W&4294967295}i.prototype.v=function(k,F){F===void 0&&(F=k.length);const P=F-this.blockSize,L=this.C;let V=this.h,W=0;for(;W<F;){if(V==0)for(;W<=P;)r(this,k,W),W+=this.blockSize;if(typeof k=="string"){for(;W<F;)if(L[V++]=k.charCodeAt(W++),V==this.blockSize){r(this,L),V=0;break}}else for(;W<F;)if(L[V++]=k[W++],V==this.blockSize){r(this,L),V=0;break}}this.h=V,this.o+=F},i.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var F=1;F<k.length-8;++F)k[F]=0;F=this.o*8;for(var P=k.length-8;P<k.length;++P)k[P]=F&255,F/=256;for(this.v(k),k=Array(16),F=0,P=0;P<4;++P)for(let L=0;L<32;L+=8)k[F++]=this.g[P]>>>L&255;return k};function a(k,F){var P=l;return Object.prototype.hasOwnProperty.call(P,k)?P[k]:P[k]=F(k)}function s(k,F){this.h=F;const P=[];let L=!0;for(let V=k.length-1;V>=0;V--){const W=k[V]|0;L&&W==F||(P[V]=W,L=!1)}this.g=P}var l={};function c(k){return-128<=k&&k<128?a(k,function(F){return new s([F|0],F<0?-1:0)}):new s([k|0],k<0?-1:0)}function f(k){if(isNaN(k)||!isFinite(k))return g;if(k<0)return S(f(-k));const F=[];let P=1;for(let L=0;k>=P;L++)F[L]=k/P|0,P*=4294967296;return new s(F,0)}function p(k,F){if(k.length==0)throw Error("number format error: empty string");if(F=F||10,F<2||36<F)throw Error("radix out of range: "+F);if(k.charAt(0)=="-")return S(p(k.substring(1),F));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=f(Math.pow(F,8));let L=g;for(let W=0;W<k.length;W+=8){var V=Math.min(8,k.length-W);const q=parseInt(k.substring(W,W+V),F);V<8?(V=f(Math.pow(F,V)),L=L.j(V).add(f(q))):(L=L.j(P),L=L.add(f(q)))}return L}var g=c(0),v=c(1),_=c(16777216);n=s.prototype,n.m=function(){if(T(this))return-S(this).m();let k=0,F=1;for(let P=0;P<this.g.length;P++){const L=this.i(P);k+=(L>=0?L:4294967296+L)*F,F*=4294967296}return k},n.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(x(this))return"0";if(T(this))return"-"+S(this).toString(k);const F=f(Math.pow(k,6));var P=this;let L="";for(;;){const V=D(P,F).g;P=w(P,V.j(F));let W=((P.g.length>0?P.g[0]:P.h)>>>0).toString(k);if(P=V,x(P))return W+L;for(;W.length<6;)W="0"+W;L=W+L}},n.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function x(k){if(k.h!=0)return!1;for(let F=0;F<k.g.length;F++)if(k.g[F]!=0)return!1;return!0}function T(k){return k.h==-1}n.l=function(k){return k=w(this,k),T(k)?-1:x(k)?0:1};function S(k){const F=k.g.length,P=[];for(let L=0;L<F;L++)P[L]=~k.g[L];return new s(P,~k.h).add(v)}n.abs=function(){return T(this)?S(this):this},n.add=function(k){const F=Math.max(this.g.length,k.g.length),P=[];let L=0;for(let V=0;V<=F;V++){let W=L+(this.i(V)&65535)+(k.i(V)&65535),q=(W>>>16)+(this.i(V)>>>16)+(k.i(V)>>>16);L=q>>>16,W&=65535,q&=65535,P[V]=q<<16|W}return new s(P,P[P.length-1]&-2147483648?-1:0)};function w(k,F){return k.add(S(F))}n.j=function(k){if(x(this)||x(k))return g;if(T(this))return T(k)?S(this).j(S(k)):S(S(this).j(k));if(T(k))return S(this.j(S(k)));if(this.l(_)<0&&k.l(_)<0)return f(this.m()*k.m());const F=this.g.length+k.g.length,P=[];for(var L=0;L<2*F;L++)P[L]=0;for(L=0;L<this.g.length;L++)for(let V=0;V<k.g.length;V++){const W=this.i(L)>>>16,q=this.i(L)&65535,ue=k.i(V)>>>16,le=k.i(V)&65535;P[2*L+2*V]+=q*le,I(P,2*L+2*V),P[2*L+2*V+1]+=W*le,I(P,2*L+2*V+1),P[2*L+2*V+1]+=q*ue,I(P,2*L+2*V+1),P[2*L+2*V+2]+=W*ue,I(P,2*L+2*V+2)}for(k=0;k<F;k++)P[k]=P[2*k+1]<<16|P[2*k];for(k=F;k<2*F;k++)P[k]=0;return new s(P,0)};function I(k,F){for(;(k[F]&65535)!=k[F];)k[F+1]+=k[F]>>>16,k[F]&=65535,F++}function R(k,F){this.g=k,this.h=F}function D(k,F){if(x(F))throw Error("division by zero");if(x(k))return new R(g,g);if(T(k))return F=D(S(k),F),new R(S(F.g),S(F.h));if(T(F))return F=D(k,S(F)),new R(S(F.g),F.h);if(k.g.length>30){if(T(k)||T(F))throw Error("slowDivide_ only works with positive integers.");for(var P=v,L=F;L.l(k)<=0;)P=B(P),L=B(L);var V=z(P,1),W=z(L,1);for(L=z(L,2),P=z(P,2);!x(L);){var q=W.add(L);q.l(k)<=0&&(V=V.add(P),W=q),L=z(L,1),P=z(P,1)}return F=w(k,V.j(F)),new R(V,F)}for(V=g;k.l(F)>=0;){for(P=Math.max(1,Math.floor(k.m()/F.m())),L=Math.ceil(Math.log(P)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),W=f(P),q=W.j(F);T(q)||q.l(k)>0;)P-=L,W=f(P),q=W.j(F);x(W)&&(W=v),V=V.add(W),k=w(k,q)}return new R(V,k)}n.B=function(k){return D(this,k).h},n.and=function(k){const F=Math.max(this.g.length,k.g.length),P=[];for(let L=0;L<F;L++)P[L]=this.i(L)&k.i(L);return new s(P,this.h&k.h)},n.or=function(k){const F=Math.max(this.g.length,k.g.length),P=[];for(let L=0;L<F;L++)P[L]=this.i(L)|k.i(L);return new s(P,this.h|k.h)},n.xor=function(k){const F=Math.max(this.g.length,k.g.length),P=[];for(let L=0;L<F;L++)P[L]=this.i(L)^k.i(L);return new s(P,this.h^k.h)};function B(k){const F=k.g.length+1,P=[];for(let L=0;L<F;L++)P[L]=k.i(L)<<1|k.i(L-1)>>>31;return new s(P,k.h)}function z(k,F){const P=F>>5;F%=32;const L=k.g.length-P,V=[];for(let W=0;W<L;W++)V[W]=F>0?k.i(W+P)>>>F|k.i(W+P+1)<<32-F:k.i(W+P);return new s(V,k.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,p9=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=p,qd=s}).apply(typeof AF<"u"?AF:typeof self<"u"?self:typeof window<"u"?window:{});var dw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var m9,eb,g9,Hw,EN,v9,y9,_9;(function(){var n,e=Object.defineProperty;function t(E){E=[typeof globalThis=="object"&&globalThis,E,typeof window=="object"&&window,typeof self=="object"&&self,typeof dw=="object"&&dw];for(var j=0;j<E.length;++j){var $=E[j];if($&&$.Math==Math)return $}throw Error("Cannot find global object")}var i=t(this);function r(E,j){if(j)e:{var $=i;E=E.split(".");for(var ne=0;ne<E.length-1;ne++){var ye=E[ne];if(!(ye in $))break e;$=$[ye]}E=E[E.length-1],ne=$[E],j=j(ne),j!=ne&&j!=null&&e($,E,{configurable:!0,writable:!0,value:j})}}r("Symbol.dispose",function(E){return E||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(E){return E||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(E){return E||function(j){var $=[],ne;for(ne in j)Object.prototype.hasOwnProperty.call(j,ne)&&$.push([ne,j[ne]]);return $}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},s=this||self;function l(E){var j=typeof E;return j=="object"&&E!=null||j=="function"}function c(E,j,$){return E.call.apply(E.bind,arguments)}function f(E,j,$){return f=c,f.apply(null,arguments)}function p(E,j){var $=Array.prototype.slice.call(arguments,1);return function(){var ne=$.slice();return ne.push.apply(ne,arguments),E.apply(this,ne)}}function g(E,j){function $(){}$.prototype=j.prototype,E.Z=j.prototype,E.prototype=new $,E.prototype.constructor=E,E.Ob=function(ne,ye,ke){for(var bt=Array(arguments.length-2),vn=2;vn<arguments.length;vn++)bt[vn-2]=arguments[vn];return j.prototype[ye].apply(ne,bt)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?E=>E&&AsyncContext.Snapshot.wrap(E):E=>E;function _(E){const j=E.length;if(j>0){const $=Array(j);for(let ne=0;ne<j;ne++)$[ne]=E[ne];return $}return[]}function x(E,j){for(let ne=1;ne<arguments.length;ne++){const ye=arguments[ne];var $=typeof ye;if($=$!="object"?$:ye?Array.isArray(ye)?"array":$:"null",$=="array"||$=="object"&&typeof ye.length=="number"){$=E.length||0;const ke=ye.length||0;E.length=$+ke;for(let bt=0;bt<ke;bt++)E[$+bt]=ye[bt]}else E.push(ye)}}class T{constructor(j,$){this.i=j,this.j=$,this.h=0,this.g=null}get(){let j;return this.h>0?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function S(E){s.setTimeout(()=>{throw E},0)}function w(){var E=k;let j=null;return E.g&&(j=E.g,E.g=E.g.next,E.g||(E.h=null),j.next=null),j}class I{constructor(){this.h=this.g=null}add(j,$){const ne=R.get();ne.set(j,$),this.h?this.h.next=ne:this.g=ne,this.h=ne}}var R=new T(()=>new D,E=>E.reset());class D{constructor(){this.next=this.g=this.h=null}set(j,$){this.h=j,this.g=$,this.next=null}reset(){this.next=this.g=this.h=null}}let B,z=!1,k=new I,F=()=>{const E=Promise.resolve(void 0);B=()=>{E.then(P)}};function P(){for(var E;E=w();){try{E.h.call(E.g)}catch($){S($)}var j=R;j.j(E),j.h<100&&(j.h++,E.next=j.g,j.g=E)}z=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(E,j){this.type=E,this.g=this.target=j,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var W=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var E=!1,j=Object.defineProperty({},"passive",{get:function(){E=!0}});try{const $=()=>{};s.addEventListener("test",$,j),s.removeEventListener("test",$,j)}catch{}return E})();function q(E){return/^[\s\xa0]*$/.test(E)}function ue(E,j){V.call(this,E?E.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,E&&this.init(E,j)}g(ue,V),ue.prototype.init=function(E,j){const $=this.type=E.type,ne=E.changedTouches&&E.changedTouches.length?E.changedTouches[0]:null;this.target=E.target||E.srcElement,this.g=j,j=E.relatedTarget,j||($=="mouseover"?j=E.fromElement:$=="mouseout"&&(j=E.toElement)),this.relatedTarget=j,ne?(this.clientX=ne.clientX!==void 0?ne.clientX:ne.pageX,this.clientY=ne.clientY!==void 0?ne.clientY:ne.pageY,this.screenX=ne.screenX||0,this.screenY=ne.screenY||0):(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0),this.button=E.button,this.key=E.key||"",this.ctrlKey=E.ctrlKey,this.altKey=E.altKey,this.shiftKey=E.shiftKey,this.metaKey=E.metaKey,this.pointerId=E.pointerId||0,this.pointerType=E.pointerType,this.state=E.state,this.i=E,E.defaultPrevented&&ue.Z.h.call(this)},ue.prototype.h=function(){ue.Z.h.call(this);const E=this.i;E.preventDefault?E.preventDefault():E.returnValue=!1};var le="closure_listenable_"+(Math.random()*1e6|0),ee=0;function ie(E,j,$,ne,ye){this.listener=E,this.proxy=null,this.src=j,this.type=$,this.capture=!!ne,this.ha=ye,this.key=++ee,this.da=this.fa=!1}function he(E){E.da=!0,E.listener=null,E.proxy=null,E.src=null,E.ha=null}function we(E,j,$){for(const ne in E)j.call($,E[ne],ne,E)}function Me(E,j){for(const $ in E)j.call(void 0,E[$],$,E)}function J(E){const j={};for(const $ in E)j[$]=E[$];return j}const pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ee(E,j){let $,ne;for(let ye=1;ye<arguments.length;ye++){ne=arguments[ye];for($ in ne)E[$]=ne[$];for(let ke=0;ke<pe.length;ke++)$=pe[ke],Object.prototype.hasOwnProperty.call(ne,$)&&(E[$]=ne[$])}}function Ge(E){this.src=E,this.g={},this.h=0}Ge.prototype.add=function(E,j,$,ne,ye){const ke=E.toString();E=this.g[ke],E||(E=this.g[ke]=[],this.h++);const bt=be(E,j,ne,ye);return bt>-1?(j=E[bt],$||(j.fa=!1)):(j=new ie(j,this.src,ke,!!ne,ye),j.fa=$,E.push(j)),j};function ht(E,j){const $=j.type;if($ in E.g){var ne=E.g[$],ye=Array.prototype.indexOf.call(ne,j,void 0),ke;(ke=ye>=0)&&Array.prototype.splice.call(ne,ye,1),ke&&(he(j),E.g[$].length==0&&(delete E.g[$],E.h--))}}function be(E,j,$,ne){for(let ye=0;ye<E.length;++ye){const ke=E[ye];if(!ke.da&&ke.listener==j&&ke.capture==!!$&&ke.ha==ne)return ye}return-1}var Te="closure_lm_"+(Math.random()*1e6|0),dt={};function ve(E,j,$,ne,ye){if(Array.isArray(j)){for(let ke=0;ke<j.length;ke++)ve(E,j[ke],$,ne,ye);return null}return $=ae($),E&&E[le]?E.J(j,$,l(ne)?!!ne.capture:!1,ye):Ye(E,j,$,!1,ne,ye)}function Ye(E,j,$,ne,ye,ke){if(!j)throw Error("Invalid event type");const bt=l(ye)?!!ye.capture:!!ye;let vn=Ve(E);if(vn||(E[Te]=vn=new Ge(E)),$=vn.add(j,$,ne,bt,ke),$.proxy)return $;if(ne=wt(),$.proxy=ne,ne.src=E,ne.listener=$,E.addEventListener)W||(ye=bt),ye===void 0&&(ye=!1),E.addEventListener(j.toString(),ne,ye);else if(E.attachEvent)E.attachEvent(Re(j.toString()),ne);else if(E.addListener&&E.removeListener)E.addListener(ne);else throw Error("addEventListener and attachEvent are unavailable.");return $}function wt(){function E($){return j.call(E.src,E.listener,$)}const j=Qe;return E}function je(E,j,$,ne,ye){if(Array.isArray(j))for(var ke=0;ke<j.length;ke++)je(E,j[ke],$,ne,ye);else ne=l(ne)?!!ne.capture:!!ne,$=ae($),E&&E[le]?(E=E.i,ke=String(j).toString(),ke in E.g&&(j=E.g[ke],$=be(j,$,ne,ye),$>-1&&(he(j[$]),Array.prototype.splice.call(j,$,1),j.length==0&&(delete E.g[ke],E.h--)))):E&&(E=Ve(E))&&(j=E.g[j.toString()],E=-1,j&&(E=be(j,$,ne,ye)),($=E>-1?j[E]:null)&&At($))}function At(E){if(typeof E!="number"&&E&&!E.da){var j=E.src;if(j&&j[le])ht(j.i,E);else{var $=E.type,ne=E.proxy;j.removeEventListener?j.removeEventListener($,ne,E.capture):j.detachEvent?j.detachEvent(Re($),ne):j.addListener&&j.removeListener&&j.removeListener(ne),($=Ve(j))?(ht($,E),$.h==0&&($.src=null,j[Te]=null)):he(E)}}}function Re(E){return E in dt?dt[E]:dt[E]="on"+E}function Qe(E,j){if(E.da)E=!0;else{j=new ue(j,this);const $=E.listener,ne=E.ha||E.src;E.fa&&At(E),E=$.call(ne,j)}return E}function Ve(E){return E=E[Te],E instanceof Ge?E:null}var lt="__closure_events_fn_"+(Math.random()*1e9>>>0);function ae(E){return typeof E=="function"?E:(E[lt]||(E[lt]=function(j){return E.handleEvent(j)}),E[lt])}function Et(){L.call(this),this.i=new Ge(this),this.M=this,this.G=null}g(Et,L),Et.prototype[le]=!0,Et.prototype.removeEventListener=function(E,j,$,ne){je(this,E,j,$,ne)};function ft(E,j){var $,ne=E.G;if(ne)for($=[];ne;ne=ne.G)$.push(ne);if(E=E.M,ne=j.type||j,typeof j=="string")j=new V(j,E);else if(j instanceof V)j.target=j.target||E;else{var ye=j;j=new V(ne,E),Ee(j,ye)}ye=!0;let ke,bt;if($)for(bt=$.length-1;bt>=0;bt--)ke=j.g=$[bt],ye=Lt(ke,ne,!0,j)&&ye;if(ke=j.g=E,ye=Lt(ke,ne,!0,j)&&ye,ye=Lt(ke,ne,!1,j)&&ye,$)for(bt=0;bt<$.length;bt++)ke=j.g=$[bt],ye=Lt(ke,ne,!1,j)&&ye}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var E=this.i;for(const j in E.g){const $=E.g[j];for(let ne=0;ne<$.length;ne++)he($[ne]);delete E.g[j],E.h--}}this.G=null},Et.prototype.J=function(E,j,$,ne){return this.i.add(String(E),j,!1,$,ne)},Et.prototype.K=function(E,j,$,ne){return this.i.add(String(E),j,!0,$,ne)};function Lt(E,j,$,ne){if(j=E.i.g[String(j)],!j)return!0;j=j.concat();let ye=!0;for(let ke=0;ke<j.length;++ke){const bt=j[ke];if(bt&&!bt.da&&bt.capture==$){const vn=bt.listener,Qi=bt.ha||bt.src;bt.fa&&ht(E.i,bt),ye=vn.call(Qi,ne)!==!1&&ye}}return ye&&!ne.defaultPrevented}function pt(E,j){if(typeof E!="function")if(E&&typeof E.handleEvent=="function")E=f(E.handleEvent,E);else throw Error("Invalid listener argument");return Number(j)>2147483647?-1:s.setTimeout(E,j||0)}function te(E){E.g=pt(()=>{E.g=null,E.i&&(E.i=!1,te(E))},E.l);const j=E.h;E.h=null,E.m.apply(null,j)}class X extends L{constructor(j,$){super(),this.m=j,this.l=$,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:te(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function de(E){L.call(this),this.h=E,this.g={}}g(de,L);var Le=[];function Ze(E){we(E.g,function(j,$){this.g.hasOwnProperty($)&&At(j)},E),E.g={}}de.prototype.N=function(){de.Z.N.call(this),Ze(this)},de.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oe=s.JSON.stringify,Tt=s.JSON.parse,gt=class{stringify(E){return s.JSON.stringify(E,void 0)}parse(E){return s.JSON.parse(E,void 0)}};function Pt(){}function Ht(){}var nt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ot(){V.call(this,"d")}g(ot,V);function xt(){V.call(this,"c")}g(xt,V);var Y={},se=null;function Fe(){return se=se||new Et}Y.Ia="serverreachability";function oe(E){V.call(this,Y.Ia,E)}g(oe,V);function $e(E){const j=Fe();ft(j,new oe(j))}Y.STAT_EVENT="statevent";function qe(E,j){V.call(this,Y.STAT_EVENT,E),this.stat=j}g(qe,V);function et(E){const j=Fe();ft(j,new qe(j,E))}Y.Ja="timingevent";function Xe(E,j){V.call(this,Y.Ja,E),this.size=j}g(Xe,V);function We(E,j){if(typeof E!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){E()},j)}function at(){this.g=!0}at.prototype.ua=function(){this.g=!1};function kt(E,j,$,ne,ye,ke){E.info(function(){if(E.g)if(ke){var bt="",vn=ke.split("&");for(let Vn=0;Vn<vn.length;Vn++){var Qi=vn[Vn].split("=");if(Qi.length>1){const Ri=Qi[0];Qi=Qi[1];const Ua=Ri.split("_");bt=Ua.length>=2&&Ua[1]=="type"?bt+(Ri+"="+Qi+"&"):bt+(Ri+"=redacted&")}}}else bt=null;else bt=ke;return"XMLHTTP REQ ("+ne+") [attempt "+ye+"]: "+j+`
`+$+`
`+bt})}function un(E,j,$,ne,ye,ke,bt){E.info(function(){return"XMLHTTP RESP ("+ne+") [ attempt "+ye+"]: "+j+`
`+$+`
`+ke+" "+bt})}function Jt(E,j,$,ne){E.info(function(){return"XMLHTTP TEXT ("+j+"): "+Mi(E,$)+(ne?" "+ne:"")})}function ii(E,j){E.info(function(){return"TIMEOUT: "+j})}at.prototype.info=function(){};function Mi(E,j){if(!E.g)return j;if(!j)return null;try{const ke=JSON.parse(j);if(ke){for(E=0;E<ke.length;E++)if(Array.isArray(ke[E])){var $=ke[E];if(!($.length<2)){var ne=$[1];if(Array.isArray(ne)&&!(ne.length<1)){var ye=ne[0];if(ye!="noop"&&ye!="stop"&&ye!="close")for(let bt=1;bt<ne.length;bt++)ne[bt]=""}}}}return Oe(ke)}catch{return j}}var Qr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},rs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},as;function Jr(){}g(Jr,Pt),Jr.prototype.g=function(){return new XMLHttpRequest},as=new Jr;function Cr(E){return encodeURIComponent(String(E))}function tu(E){var j=1;E=E.split(":");const $=[];for(;j>0&&E.length;)$.push(E.shift()),j--;return E.length&&$.push(E.join(":")),$}function Ci(E,j,$,ne){this.j=E,this.i=j,this.l=$,this.S=ne||1,this.V=new de(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pa}function pa(){this.i=null,this.g="",this.h=!1}var xi={},Fi={};function ea(E,j,$){E.M=1,E.A=on(It(j)),E.u=$,E.R=!0,ma(E,null)}function ma(E,j){E.F=Date.now(),ga(E),E.B=It(E.A);var $=E.B,ne=E.S;Array.isArray(ne)||(ne=[String(ne)]),La($.i,"t",ne),E.C=0,$=E.j.L,E.h=new pa,E.g=wp(E.j,$?j:null,!E.u),E.P>0&&(E.O=new X(f(E.Y,E,E.g),E.P)),j=E.V,$=E.g,ne=E.ba;var ye="readystatechange";Array.isArray(ye)||(ye&&(Le[0]=ye.toString()),ye=Le);for(let ke=0;ke<ye.length;ke++){const bt=ve($,ye[ke],ne||j.handleEvent,!1,j.h||j);if(!bt)break;j.g[bt.key]=bt}j=E.J?J(E.J):{},E.u?(E.v||(E.v="POST"),j["Content-Type"]="application/x-www-form-urlencoded",E.g.ea(E.B,E.v,E.u,j)):(E.v="GET",E.g.ea(E.B,E.v,null,j)),$e(),kt(E.i,E.v,E.B,E.l,E.S,E.u)}Ci.prototype.ba=function(E){E=E.target;const j=this.O;j&&Vo(E)==3?j.j():this.Y(E)},Ci.prototype.Y=function(E){try{if(E==this.g)e:{const vn=Vo(this.g),Qi=this.g.ya(),Vn=this.g.ca();if(!(vn<3)&&(vn!=3||this.g&&(this.h.h||this.g.la()||zr(this.g)))){this.K||vn!=4||Qi==7||(Qi==8||Vn<=0?$e(3):$e(2)),Ns(this);var j=this.g.ca();this.X=j;var $=Oa(this);if(this.o=j==200,un(this.i,this.v,this.B,this.l,this.S,vn,j),this.o){if(this.U&&!this.L){t:{if(this.g){var ne,ye=this.g;if((ne=ye.g?ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(ne)){var ke=ne;break t}}ke=null}if(E=ke)Jt(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ss(this,E);else{this.o=!1,this.m=3,et(12),va(this),Da(this);break e}}if(this.R){E=!0;let Ri;for(;!this.K&&this.C<$.length;)if(Ri=nu(this,$),Ri==Fi){vn==4&&(this.m=4,et(14),E=!1),Jt(this.i,this.l,null,"[Incomplete Response]");break}else if(Ri==xi){this.m=4,et(15),Jt(this.i,this.l,$,"[Invalid Chunk]"),E=!1;break}else Jt(this.i,this.l,Ri,null),ss(this,Ri);if(Fo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vn!=4||$.length!=0||this.h.h||(this.m=1,et(16),E=!1),this.o=this.o&&E,!E)Jt(this.i,this.l,$,"[Invalid Chunked Response]"),va(this),Da(this);else if($.length>0&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.aa&&!bt.P&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Nh(bt),bt.P=!0,et(11))}}else Jt(this.i,this.l,$,null),ss(this,$);vn==4&&va(this),this.o&&!this.K&&(vn==4?xp(this.j,this):(this.o=!1,ga(this)))}else pl(this.g),j==400&&$.indexOf("Unknown SID")>0?(this.m=3,et(12)):(this.m=0,et(13)),va(this),Da(this)}}}catch{}finally{}};function Oa(E){if(!Fo(E))return E.g.la();const j=zr(E.g);if(j==="")return"";let $="";const ne=j.length,ye=Vo(E.g)==4;if(!E.h.i){if(typeof TextDecoder>"u")return va(E),Da(E),"";E.h.i=new s.TextDecoder}for(let ke=0;ke<ne;ke++)E.h.h=!0,$+=E.h.i.decode(j[ke],{stream:!(ye&&ke==ne-1)});return j.length=0,E.h.g+=$,E.C=0,E.h.g}function Fo(E){return E.g?E.v=="GET"&&E.M!=2&&E.j.Aa:!1}function nu(E,j){var $=E.C,ne=j.indexOf(`
`,$);return ne==-1?Fi:($=Number(j.substring($,ne)),isNaN($)?xi:(ne+=1,ne+$>j.length?Fi:(j=j.slice(ne,ne+$),E.C=ne+$,j)))}Ci.prototype.cancel=function(){this.K=!0,va(this)};function ga(E){E.T=Date.now()+E.H,ao(E,E.H)}function ao(E,j){if(E.D!=null)throw Error("WatchDog timer not null");E.D=We(f(E.aa,E),j)}function Ns(E){E.D&&(s.clearTimeout(E.D),E.D=null)}Ci.prototype.aa=function(){this.D=null;const E=Date.now();E-this.T>=0?(ii(this.i,this.B),this.M!=2&&($e(),et(17)),va(this),this.m=2,Da(this)):ao(this,this.T-E)};function Da(E){E.j.I==0||E.K||xp(E.j,E)}function va(E){Ns(E);var j=E.O;j&&typeof j.dispose=="function"&&j.dispose(),E.O=null,Ze(E.V),E.g&&(j=E.g,E.g=null,j.abort(),j.dispose())}function ss(E,j){try{var $=E.j;if($.I!=0&&($.g==E||_e($.h,E))){if(!E.L&&_e($.h,E)&&$.I==3){try{var ne=$.Ba.g.parse(j)}catch{ne=null}if(Array.isArray(ne)&&ne.length==3){var ye=ne;if(ye[0]==0){e:if(!$.v){if($.g)if($.g.F+3e3<E.F)Oh($),ml($);else break e;Yu($),et(18)}}else $.xa=ye[1],0<$.xa-$.K&&ye[2]<37500&&$.F&&$.A==0&&!$.C&&($.C=We(f($.Va,$),6e3));Ce($.h)<=1&&$.ta&&($.ta=void 0)}else lo($,11)}else if((E.L||$.g==E)&&Oh($),!q(j))for(ye=$.Ba.g.parse(j),j=0;j<ye.length;j++){let Vn=ye[j];const Ri=Vn[0];if(!(Ri<=$.K))if($.K=Ri,Vn=Vn[1],$.I==2)if(Vn[0]=="c"){$.M=Vn[1],$.ba=Vn[2];const Ua=Vn[3];Ua!=null&&($.ka=Ua,$.j.info("VER="+$.ka));const Go=Vn[4];Go!=null&&($.za=Go,$.j.info("SVER="+$.za));const Wo=Vn[5];Wo!=null&&typeof Wo=="number"&&Wo>0&&(ne=1.5*Wo,$.O=ne,$.j.info("backChannelRequestTimeoutMs_="+ne)),ne=$;const os=E.g;if(os){const ou=os.g?os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ou){var ke=ne.h;ke.g||ou.indexOf("spdy")==-1&&ou.indexOf("quic")==-1&&ou.indexOf("h2")==-1||(ke.j=ke.l,ke.g=new Set,ke.h&&(vt(ke,ke.h),ke.h=null))}if(ne.G){const mf=os.g?os.g.getResponseHeader("X-HTTP-Session-Id"):null;mf&&(ne.wa=mf,Kt(ne.J,ne.G,mf))}}$.I=3,$.l&&$.l.ra(),$.aa&&($.T=Date.now()-E.F,$.j.info("Handshake RTT: "+$.T+"ms")),ne=$;var bt=E;if(ne.na=Sp(ne,ne.L?ne.ba:null,ne.W),bt.L){Ct(ne.h,bt);var vn=bt,Qi=ne.O;Qi&&(vn.H=Qi),vn.D&&(Ns(vn),ga(vn)),ne.g=bt}else Ph(ne);$.i.length>0&&Ho($)}else Vn[0]!="stop"&&Vn[0]!="close"||lo($,7);else $.I==3&&(Vn[0]=="stop"||Vn[0]=="close"?Vn[0]=="stop"?lo($,7):Ih($):Vn[0]!="noop"&&$.l&&$.l.qa(Vn),$.A=0)}}$e(4)}catch{}}var Z=class{constructor(E,j){this.g=E,this.map=j}};function ge(E){this.l=E||10,s.PerformanceNavigationTiming?(E=s.performance.getEntriesByType("navigation"),E=E.length>0&&(E[0].nextHopProtocol=="hq"||E[0].nextHopProtocol=="h2")):E=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=E?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function De(E){return E.h?!0:E.g?E.g.size>=E.j:!1}function Ce(E){return E.h?1:E.g?E.g.size:0}function _e(E,j){return E.h?E.h==j:E.g?E.g.has(j):!1}function vt(E,j){E.g?E.g.add(j):E.h=j}function Ct(E,j){E.h&&E.h==j?E.h=null:E.g&&E.g.has(j)&&E.g.delete(j)}ge.prototype.cancel=function(){if(this.i=ct(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const E of this.g.values())E.cancel();this.g.clear()}};function ct(E){if(E.h!=null)return E.i.concat(E.h.G);if(E.g!=null&&E.g.size!==0){let j=E.i;for(const $ of E.g.values())j=j.concat($.G);return j}return _(E.i)}var Ot=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ut(E,j){if(E){E=E.split("&");for(let $=0;$<E.length;$++){const ne=E[$].indexOf("=");let ye,ke=null;ne>=0?(ye=E[$].substring(0,ne),ke=E[$].substring(ne+1)):ye=E[$],j(ye,ke?decodeURIComponent(ke.replace(/\+/g," ")):"")}}}function Vt(E){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let j;E instanceof Vt?(this.l=E.l,$t(this,E.j),this.o=E.o,this.g=E.g,Pn(this,E.u),this.h=E.h,ri(this,_p(E.i)),this.m=E.m):E&&(j=String(E).match(Ot))?(this.l=!1,$t(this,j[1]||"",!0),this.o=St(j[2]||""),this.g=St(j[3]||"",!0),Pn(this,j[4]),this.h=St(j[5]||"",!0),ri(this,j[6]||"",!0),this.m=St(j[7]||"")):(this.l=!1,this.i=new Ii(null,this.l))}Vt.prototype.toString=function(){const E=[];var j=this.j;j&&E.push(An(j,zi,!0),":");var $=this.g;return($||j=="file")&&(E.push("//"),(j=this.o)&&E.push(An(j,zi,!0),"@"),E.push(Cr($).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),$=this.u,$!=null&&E.push(":",String($))),($=this.h)&&(this.g&&$.charAt(0)!="/"&&E.push("/"),E.push(An($,$.charAt(0)=="/"?yi:Os,!0))),($=this.i.toString())&&E.push("?",$),($=this.m)&&E.push("#",An($,Zn)),E.join("")},Vt.prototype.resolve=function(E){const j=It(this);let $=!!E.j;$?$t(j,E.j):$=!!E.o,$?j.o=E.o:$=!!E.g,$?j.g=E.g:$=E.u!=null;var ne=E.h;if($)Pn(j,E.u);else if($=!!E.h){if(ne.charAt(0)!="/")if(this.g&&!this.h)ne="/"+ne;else{var ye=j.h.lastIndexOf("/");ye!=-1&&(ne=j.h.slice(0,ye+1)+ne)}if(ye=ne,ye==".."||ye==".")ne="";else if(ye.indexOf("./")!=-1||ye.indexOf("/.")!=-1){ne=ye.lastIndexOf("/",0)==0,ye=ye.split("/");const ke=[];for(let bt=0;bt<ye.length;){const vn=ye[bt++];vn=="."?ne&&bt==ye.length&&ke.push(""):vn==".."?((ke.length>1||ke.length==1&&ke[0]!="")&&ke.pop(),ne&&bt==ye.length&&ke.push("")):(ke.push(vn),ne=!0)}ne=ke.join("/")}else ne=ye}return $?j.h=ne:$=E.i.toString()!=="",$?ri(j,_p(E.i)):$=!!E.m,$&&(j.m=E.m),j};function It(E){return new Vt(E)}function $t(E,j,$){E.j=$?St(j,!0):j,E.j&&(E.j=E.j.replace(/:$/,""))}function Pn(E,j){if(j){if(j=Number(j),isNaN(j)||j<0)throw Error("Bad port number "+j);E.u=j}else E.u=null}function ri(E,j,$){j instanceof Ii?(E.i=j,uf(E.i,E.l)):($||(j=An(j,ta)),E.i=new Ii(j,E.l))}function Kt(E,j,$){E.i.set(j,$)}function on(E){return Kt(E,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),E}function St(E,j){return E?j?decodeURI(E.replace(/%25/g,"%2525")):decodeURIComponent(E):""}function An(E,j,$){return typeof E=="string"?(E=encodeURI(E).replace(j,tn),$&&(E=E.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E):null}function tn(E){return E=E.charCodeAt(0),"%"+(E>>4&15).toString(16)+(E&15).toString(16)}var zi=/[#\/\?@]/g,Os=/[#\?:]/g,yi=/[#\?]/g,ta=/[#\?@]/g,Zn=/#/g;function Ii(E,j){this.h=this.g=null,this.i=E||null,this.j=!!j}function di(E){E.g||(E.g=new Map,E.h=0,E.i&&Ut(E.i,function(j,$){E.add(decodeURIComponent(j.replace(/\+/g," ")),$)}))}n=Ii.prototype,n.add=function(E,j){di(this),this.i=null,E=hl(this,E);let $=this.g.get(E);return $||this.g.set(E,$=[]),$.push(j),this.h+=1,this};function or(E,j){di(E),j=hl(E,j),E.g.has(j)&&(E.i=null,E.h-=E.g.get(j).length,E.g.delete(j))}function lr(E,j){return di(E),j=hl(E,j),E.g.has(j)}n.forEach=function(E,j){di(this),this.g.forEach(function($,ne){$.forEach(function(ye){E.call(j,ye,ne,this)},this)},this)};function fl(E,j){di(E);let $=[];if(typeof j=="string")lr(E,j)&&($=$.concat(E.g.get(hl(E,j))));else for(E=Array.from(E.g.values()),j=0;j<E.length;j++)$=$.concat(E[j]);return $}n.set=function(E,j){return di(this),this.i=null,E=hl(this,E),lr(this,E)&&(this.h-=this.g.get(E).length),this.g.set(E,[j]),this.h+=1,this},n.get=function(E,j){return E?(E=fl(this,E),E.length>0?String(E[0]):j):j};function La(E,j,$){or(E,j),$.length>0&&(E.i=null,E.g.set(hl(E,j),_($)),E.h+=$.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const E=[],j=Array.from(this.g.keys());for(let ne=0;ne<j.length;ne++){var $=j[ne];const ye=Cr($);$=fl(this,$);for(let ke=0;ke<$.length;ke++){let bt=ye;$[ke]!==""&&(bt+="="+Cr($[ke])),E.push(bt)}}return this.i=E.join("&")};function _p(E){const j=new Ii;return j.i=E.i,E.g&&(j.g=new Map(E.g),j.h=E.h),j}function hl(E,j){return j=String(j),E.j&&(j=j.toLowerCase()),j}function uf(E,j){j&&!E.j&&(di(E),E.i=null,E.g.forEach(function($,ne){const ye=ne.toLowerCase();ne!=ye&&(or(this,ne),La(this,ye,$))},E)),E.j=j}function zo(E,j){const $=new at;if(s.Image){const ne=new Image;ne.onload=p(Ds,$,"TestLoadImage: loaded",!0,j,ne),ne.onerror=p(Ds,$,"TestLoadImage: error",!1,j,ne),ne.onabort=p(Ds,$,"TestLoadImage: abort",!1,j,ne),ne.ontimeout=p(Ds,$,"TestLoadImage: timeout",!1,j,ne),s.setTimeout(function(){ne.ontimeout&&ne.ontimeout()},1e4),ne.src=E}else j(!1)}function Mh(E,j){const $=new at,ne=new AbortController,ye=setTimeout(()=>{ne.abort(),Ds($,"TestPingServer: timeout",!1,j)},1e4);fetch(E,{signal:ne.signal}).then(ke=>{clearTimeout(ye),ke.ok?Ds($,"TestPingServer: ok",!0,j):Ds($,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(ye),Ds($,"TestPingServer: error",!1,j)})}function Ds(E,j,$,ne,ye){try{ye&&(ye.onload=null,ye.onerror=null,ye.onabort=null,ye.ontimeout=null),ne($)}catch{}}function iu(){this.g=new gt}function so(E){this.i=E.Sb||null,this.h=E.ab||!1}g(so,Pt),so.prototype.g=function(){return new Gu(this.i,this.h)};function Gu(E,j){Et.call(this),this.H=E,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Gu,Et),n=Gu.prototype,n.open=function(E,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=E,this.D=j,this.readyState=1,oo(this)},n.send=function(E){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const j={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};E&&(j.body=E),(this.H||s).fetch(new Request(this.D,j)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ru(this)),this.readyState=0},n.Pa=function(E){if(this.g&&(this.l=E,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=E.headers,this.readyState=2,oo(this)),this.g&&(this.readyState=3,oo(this),this.g)))if(this.responseType==="arraybuffer")E.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in E){if(this.j=E.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;cf(this)}else E.text().then(this.Oa.bind(this),this.ga.bind(this))};function cf(E){E.j.read().then(E.Ma.bind(E)).catch(E.ga.bind(E))}n.Ma=function(E){if(this.g){if(this.o&&E.value)this.response.push(E.value);else if(!this.o){var j=E.value?E.value:new Uint8Array(0);(j=this.B.decode(j,{stream:!E.done}))&&(this.response=this.responseText+=j)}E.done?ru(this):oo(this),this.readyState==3&&cf(this)}},n.Oa=function(E){this.g&&(this.response=this.responseText=E,ru(this))},n.Na=function(E){this.g&&(this.response=E,ru(this))},n.ga=function(){this.g&&ru(this)};function ru(E){E.readyState=4,E.l=null,E.j=null,E.B=null,oo(E)}n.setRequestHeader=function(E,j){this.A.append(E,j)},n.getResponseHeader=function(E){return this.h&&this.h.get(E.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const E=[],j=this.h.entries();for(var $=j.next();!$.done;)$=$.value,E.push($[0]+": "+$[1]),$=j.next();return E.join(`\r
`)};function oo(E){E.onreadystatechange&&E.onreadystatechange.call(E)}Object.defineProperty(Gu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(E){this.m=E?"include":"same-origin"}});function Ls(E){let j="";return we(E,function($,ne){j+=ne,j+=":",j+=$,j+=`\r
`}),j}function ff(E,j,$){e:{for(ne in $){var ne=!1;break e}ne=!0}ne||($=Ls($),typeof E=="string"?$!=null&&Cr($):Kt(E,j,$))}function li(E){Et.call(this),this.headers=new Map,this.L=E||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(li,Et);var ka=/^https?$/i,Ch=["POST","PUT"];n=li.prototype,n.Fa=function(E){this.H=E},n.ea=function(E,j,$,ne){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+E);j=j?j.toUpperCase():"GET",this.D=E,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():as.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(j,String(E),!0),this.B=!1}catch(ke){dl(this,ke);return}if(E=$||"",$=new Map(this.headers),ne)if(Object.getPrototypeOf(ne)===Object.prototype)for(var ye in ne)$.set(ye,ne[ye]);else if(typeof ne.keys=="function"&&typeof ne.get=="function")for(const ke of ne.keys())$.set(ke,ne.get(ke));else throw Error("Unknown input type for opt_headers: "+String(ne));ne=Array.from($.keys()).find(ke=>ke.toLowerCase()=="content-type"),ye=s.FormData&&E instanceof s.FormData,!(Array.prototype.indexOf.call(Ch,j,void 0)>=0)||ne||ye||$.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ke,bt]of $)this.g.setRequestHeader(ke,bt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(E),this.v=!1}catch(ke){dl(this,ke)}};function dl(E,j){E.h=!1,E.g&&(E.j=!0,E.g.abort(),E.j=!1),E.l=j,E.o=5,Wu(E),Bo(E)}function Wu(E){E.A||(E.A=!0,ft(E,"complete"),ft(E,"error"))}n.abort=function(E){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=E||7,ft(this,"complete"),ft(this,"abort"),Bo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bo(this,!0)),li.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?qu(this):this.Xa())},n.Xa=function(){qu(this)};function qu(E){if(E.h&&typeof a<"u"){if(E.v&&Vo(E)==4)setTimeout(E.Ca.bind(E),0);else if(ft(E,"readystatechange"),Vo(E)==4){E.h=!1;try{const ke=E.ca();e:switch(ke){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var $;if(!($=j)){var ne;if(ne=ke===0){let bt=String(E.D).match(Ot)[1]||null;!bt&&s.self&&s.self.location&&(bt=s.self.location.protocol.slice(0,-1)),ne=!ka.test(bt?bt.toLowerCase():"")}$=ne}if($)ft(E,"complete"),ft(E,"success");else{E.o=6;try{var ye=Vo(E)>2?E.g.statusText:""}catch{ye=""}E.l=ye+" ["+E.ca()+"]",Wu(E)}}finally{Bo(E)}}}}function Bo(E,j){if(E.g){E.m&&(clearTimeout(E.m),E.m=null);const $=E.g;E.g=null,j||ft(E,"ready");try{$.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Vo(E){return E.g?E.g.readyState:0}n.ca=function(){try{return Vo(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(E){if(this.g){var j=this.g.responseText;return E&&j.indexOf(E)==0&&(j=j.substring(E.length)),Tt(j)}};function zr(E){try{if(!E.g)return null;if("response"in E.g)return E.g.response;switch(E.F){case"":case"text":return E.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in E.g)return E.g.mozResponseArrayBuffer}return null}catch{return null}}function pl(E){const j={};E=(E.g&&Vo(E)>=2&&E.g.getAllResponseHeaders()||"").split(`\r
`);for(let ne=0;ne<E.length;ne++){if(q(E[ne]))continue;var $=tu(E[ne]);const ye=$[0];if($=$[1],typeof $!="string")continue;$=$.trim();const ke=j[ye]||[];j[ye]=ke,ke.push($)}Me(j,function(ne){return ne.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function jo(E,j,$){return $&&$.internalChannelParams&&$.internalChannelParams[E]||j}function au(E){this.za=0,this.i=[],this.j=new at,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=jo("failFast",!1,E),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=jo("baseRetryDelayMs",5e3,E),this.Za=jo("retryDelaySeedMs",1e4,E),this.Ta=jo("forwardChannelMaxRetries",2,E),this.va=jo("forwardChannelRequestTimeoutMs",2e4,E),this.ma=E&&E.xmlHttpFactory||void 0,this.Ua=E&&E.Rb||void 0,this.Aa=E&&E.useFetchStreams||!1,this.O=void 0,this.L=E&&E.supportsCrossDomainXhr||!1,this.M="",this.h=new ge(E&&E.concurrentRequestLimit),this.Ba=new iu,this.S=E&&E.fastHandshake||!1,this.R=E&&E.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=E&&E.Pb||!1,E&&E.ua&&this.j.ua(),E&&E.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&E&&E.detectBufferingProxy||!1,this.ia=void 0,E&&E.longPollingTimeout&&E.longPollingTimeout>0&&(this.ia=E.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=au.prototype,n.ka=8,n.I=1,n.connect=function(E,j,$,ne){et(0),this.W=E,this.H=j||{},$&&ne!==void 0&&(this.H.OSID=$,this.H.OAID=ne),this.F=this.X,this.J=Sp(this,null,this.W),Ho(this)};function Ih(E){if(hf(E),E.I==3){var j=E.V++,$=It(E.J);if(Kt($,"SID",E.M),Kt($,"RID",j),Kt($,"TYPE","terminate"),Xu(E,$),j=new Ci(E,E.j,j),j.M=2,j.A=on(It($)),$=!1,s.navigator&&s.navigator.sendBeacon)try{$=s.navigator.sendBeacon(j.A.toString(),"")}catch{}!$&&s.Image&&(new Image().src=j.A,$=!0),$||(j.g=wp(j.j,null),j.g.ea(j.A)),j.F=Date.now(),ga(j)}df(E)}function ml(E){E.g&&(Nh(E),E.g.cancel(),E.g=null)}function hf(E){ml(E),E.v&&(s.clearTimeout(E.v),E.v=null),Oh(E),E.h.cancel(),E.m&&(typeof E.m=="number"&&s.clearTimeout(E.m),E.m=null)}function Ho(E){if(!De(E.h)&&!E.m){E.m=!0;var j=E.Ea;B||F(),z||(B(),z=!0),k.add(j,E),E.D=0}}function $u(E,j){return Ce(E.h)>=E.h.j-(E.m?1:0)?!1:E.m?(E.i=j.G.concat(E.i),!0):E.I==1||E.I==2||E.D>=(E.Sa?0:E.Ta)?!1:(E.m=We(f(E.Ea,E,j),Ku(E,E.D)),E.D++,!0)}n.Ea=function(E){if(this.m)if(this.m=null,this.I==1){if(!E){this.V=Math.floor(Math.random()*1e5),E=this.V++;const ye=new Ci(this,this.j,E);let ke=this.o;if(this.U&&(ke?(ke=J(ke),Ee(ke,this.U)):ke=this.U),this.u!==null||this.R||(ye.J=ke,ke=null),this.S)e:{for(var j=0,$=0;$<this.i.length;$++){t:{var ne=this.i[$];if("__data__"in ne.map&&(ne=ne.map.__data__,typeof ne=="string")){ne=ne.length;break t}ne=void 0}if(ne===void 0)break;if(j+=ne,j>4096){j=$;break e}if(j===4096||$===this.i.length-1){j=$+1;break e}}j=1e3}else j=1e3;j=bp(this,ye,j),$=It(this.J),Kt($,"RID",E),Kt($,"CVER",22),this.G&&Kt($,"X-HTTP-Session-Id",this.G),Xu(this,$),ke&&(this.R?j="headers="+Cr(Ls(ke))+"&"+j:this.u&&ff($,this.u,ke)),vt(this.h,ye),this.Ra&&Kt($,"TYPE","init"),this.S?(Kt($,"$req",j),Kt($,"SID","null"),ye.U=!0,ea(ye,$,null)):ea(ye,$,j),this.I=2}}else this.I==3&&(E?Rh(this,E):this.i.length==0||De(this.h)||Rh(this))};function Rh(E,j){var $;j?$=j.l:$=E.V++;const ne=It(E.J);Kt(ne,"SID",E.M),Kt(ne,"RID",$),Kt(ne,"AID",E.K),Xu(E,ne),E.u&&E.o&&ff(ne,E.u,E.o),$=new Ci(E,E.j,$,E.D+1),E.u===null&&($.J=E.o),j&&(E.i=j.G.concat(E.i)),j=bp(E,$,1e3),$.H=Math.round(E.va*.5)+Math.round(E.va*.5*Math.random()),vt(E.h,$),ea($,ne,j)}function Xu(E,j){E.H&&we(E.H,function($,ne){Kt(j,ne,$)}),E.l&&we({},function($,ne){Kt(j,ne,$)})}function bp(E,j,$){$=Math.min(E.i.length,$);const ne=E.l?f(E.l.Ka,E.l,E):null;e:{var ye=E.i;let vn=-1;for(;;){const Qi=["count="+$];vn==-1?$>0?(vn=ye[0].g,Qi.push("ofs="+vn)):vn=0:Qi.push("ofs="+vn);let Vn=!0;for(let Ri=0;Ri<$;Ri++){var ke=ye[Ri].g;const Ua=ye[Ri].map;if(ke-=vn,ke<0)vn=Math.max(0,ye[Ri].g-100),Vn=!1;else try{ke="req"+ke+"_"||"";try{var bt=Ua instanceof Map?Ua:Object.entries(Ua);for(const[Go,Wo]of bt){let os=Wo;l(Wo)&&(os=Oe(Wo)),Qi.push(ke+Go+"="+encodeURIComponent(os))}}catch(Go){throw Qi.push(ke+"type="+encodeURIComponent("_badmap")),Go}}catch{ne&&ne(Ua)}}if(Vn){bt=Qi.join("&");break e}}bt=void 0}return E=E.i.splice(0,$),j.G=E,bt}function Ph(E){if(!E.g&&!E.v){E.Y=1;var j=E.Da;B||F(),z||(B(),z=!0),k.add(j,E),E.A=0}}function Yu(E){return E.g||E.v||E.A>=3?!1:(E.Y++,E.v=We(f(E.Da,E),Ku(E,E.A)),E.A++,!0)}n.Da=function(){if(this.v=null,Tg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var E=4*this.T;this.j.info("BP detection timer enabled: "+E),this.B=We(f(this.Wa,this),E)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,et(10),ml(this),Tg(this))};function Nh(E){E.B!=null&&(s.clearTimeout(E.B),E.B=null)}function Tg(E){E.g=new Ci(E,E.j,"rpc",E.Y),E.u===null&&(E.g.J=E.o),E.g.P=0;var j=It(E.na);Kt(j,"RID","rpc"),Kt(j,"SID",E.M),Kt(j,"AID",E.K),Kt(j,"CI",E.F?"0":"1"),!E.F&&E.ia&&Kt(j,"TO",E.ia),Kt(j,"TYPE","xmlhttp"),Xu(E,j),E.u&&E.o&&ff(j,E.u,E.o),E.O&&(E.g.H=E.O);var $=E.g;E=E.ba,$.M=1,$.A=on(It(j)),$.u=null,$.R=!0,ma($,E)}n.Va=function(){this.C!=null&&(this.C=null,ml(this),Yu(this),et(19))};function Oh(E){E.C!=null&&(s.clearTimeout(E.C),E.C=null)}function xp(E,j){var $=null;if(E.g==j){Oh(E),Nh(E),E.g=null;var ne=2}else if(_e(E.h,j))$=j.G,Ct(E.h,j),ne=1;else return;if(E.I!=0){if(j.o)if(ne==1){$=j.u?j.u.length:0,j=Date.now()-j.F;var ye=E.D;ne=Fe(),ft(ne,new Xe(ne,$)),Ho(E)}else Ph(E);else if(ye=j.m,ye==3||ye==0&&j.X>0||!(ne==1&&$u(E,j)||ne==2&&Yu(E)))switch($&&$.length>0&&(j=E.h,j.i=j.i.concat($)),ye){case 1:lo(E,5);break;case 4:lo(E,10);break;case 3:lo(E,6);break;default:lo(E,2)}}}function Ku(E,j){let $=E.Qa+Math.floor(Math.random()*E.Za);return E.isActive()||($*=2),$*j}function lo(E,j){if(E.j.info("Error code "+j),j==2){var $=f(E.bb,E),ne=E.Ua;const ye=!ne;ne=new Vt(ne||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||$t(ne,"https"),on(ne),ye?zo(ne.toString(),$):Mh(ne.toString(),$)}else et(2);E.I=0,E.l&&E.l.pa(j),df(E),hf(E)}n.bb=function(E){E?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function df(E){if(E.I=0,E.ja=[],E.l){const j=ct(E.h);(j.length!=0||E.i.length!=0)&&(x(E.ja,j),x(E.ja,E.i),E.h.i.length=0,_(E.i),E.i.length=0),E.l.oa()}}function Sp(E,j,$){var ne=$ instanceof Vt?It($):new Vt($);if(ne.g!="")j&&(ne.g=j+"."+ne.g),Pn(ne,ne.u);else{var ye=s.location;ne=ye.protocol,j=j?j+"."+ye.hostname:ye.hostname,ye=+ye.port;const ke=new Vt(null);ne&&$t(ke,ne),j&&(ke.g=j),ye&&Pn(ke,ye),$&&(ke.h=$),ne=ke}return $=E.G,j=E.wa,$&&j&&Kt(ne,$,j),Kt(ne,"VER",E.ka),Xu(E,ne),ne}function wp(E,j,$){if(j&&!E.L)throw Error("Can't create secondary domain capable XhrIo object.");return j=E.Aa&&!E.ma?new li(new so({ab:$})):new li(E.ma),j.Fa(E.L),j}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dh(){}n=Dh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function su(){}su.prototype.g=function(E,j){return new ya(E,j)};function ya(E,j){Et.call(this),this.g=new au(j),this.l=E,this.h=j&&j.messageUrlParams||null,E=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(E?E["X-Client-Protocol"]="webchannel":E={"X-Client-Protocol":"webchannel"}),this.g.o=E,E=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(E?E["X-WebChannel-Content-Type"]=j.messageContentType:E={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.sa&&(E?E["X-WebChannel-Client-Profile"]=j.sa:E={"X-WebChannel-Client-Profile":j.sa}),this.g.U=E,(E=j&&j.Qb)&&!q(E)&&(this.g.u=E),this.A=j&&j.supportsCrossDomainXhr||!1,this.v=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!q(j)&&(this.g.G=j,E=this.h,E!==null&&j in E&&(E=this.h,j in E&&delete E[j])),this.j=new vl(this)}g(ya,Et),ya.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ya.prototype.close=function(){Ih(this.g)},ya.prototype.o=function(E){var j=this.g;if(typeof E=="string"){var $={};$.__data__=E,E=$}else this.v&&($={},$.__data__=Oe(E),E=$);j.i.push(new Z(j.Ya++,E)),j.I==3&&Ho(j)},ya.prototype.N=function(){this.g.l=null,delete this.j,Ih(this.g),delete this.g,ya.Z.N.call(this)};function gl(E){ot.call(this),E.__headers__&&(this.headers=E.__headers__,this.statusCode=E.__status__,delete E.__headers__,delete E.__status__);var j=E.__sm__;if(j){e:{for(const $ in j){E=$;break e}E=void 0}(this.i=E)&&(E=this.i,j=j!==null&&E in j?j[E]:void 0),this.data=j}else this.data=E}g(gl,ot);function pf(){xt.call(this),this.status=1}g(pf,xt);function vl(E){this.g=E}g(vl,Dh),vl.prototype.ra=function(){ft(this.g,"a")},vl.prototype.qa=function(E){ft(this.g,new gl(E))},vl.prototype.pa=function(E){ft(this.g,new pf)},vl.prototype.oa=function(){ft(this.g,"b")},su.prototype.createWebChannel=su.prototype.g,ya.prototype.send=ya.prototype.o,ya.prototype.open=ya.prototype.m,ya.prototype.close=ya.prototype.close,_9=function(){return new su},y9=function(){return Fe()},v9=Y,EN={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qr.NO_ERROR=0,Qr.TIMEOUT=8,Qr.HTTP_ERROR=6,Hw=Qr,rs.COMPLETE="complete",g9=rs,Ht.EventType=nt,nt.OPEN="a",nt.CLOSE="b",nt.ERROR="c",nt.MESSAGE="d",Et.prototype.listen=Et.prototype.J,eb=Ht,li.prototype.listenOnce=li.prototype.K,li.prototype.getLastError=li.prototype.Ha,li.prototype.getLastErrorCode=li.prototype.ya,li.prototype.getStatus=li.prototype.ca,li.prototype.getResponseJson=li.prototype.La,li.prototype.getResponseText=li.prototype.la,li.prototype.send=li.prototype.ea,li.prototype.setWithCredentials=li.prototype.Fa,m9=li}).apply(typeof dw<"u"?dw:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Es.UNAUTHENTICATED=new Es(null),Es.GOOGLE_CREDENTIALS=new Es("google-credentials-uid"),Es.FIRST_PARTY=new Es("first-party-uid"),Es.MOCK_USER=new Es("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ky="12.8.0";function sue(n){Ky=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng=new BD("@firebase/firestore");function Zv(){return ng.logLevel}function Ft(n,...e){if(ng.logLevel<=$n.DEBUG){const t=e.map(HD);ng.debug(`Firestore (${Ky}): ${n}`,...t)}}function ch(n,...e){if(ng.logLevel<=$n.ERROR){const t=e.map(HD);ng.error(`Firestore (${Ky}): ${n}`,...t)}}function Ry(n,...e){if(ng.logLevel<=$n.WARN){const t=e.map(HD);ng.warn(`Firestore (${Ky}): ${n}`,...t)}}function HD(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,b9(n,i,t)}function b9(n,e,t){let i=`FIRESTORE (${Ky}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ch(i),new Error(i)}function vi(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||b9(e,r,i)}function wn(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xt extends of{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oue{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Es.UNAUTHENTICATED)))}shutdown(){}}class lue{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class uue{constructor(e){this.t=e,this.currentUser=Es.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){vi(this.o===void 0,42304);let i=this.i;const r=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let a=new Vm;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Vm,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const c=a;e.enqueueRetryable((async()=>{await c.promise,await r(this.currentUser)}))},l=c=>{Ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Vm)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(vi(typeof i.accessToken=="string",31837,{l:i}),new x9(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return vi(e===null||typeof e=="string",2055,{h:e}),new Es(e)}}class cue{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Es.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class fue{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new cue(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Es.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class MF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hue{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hl(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){vi(this.o===void 0,3512);const i=a=>{a.error!=null&&Ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,Ft("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const r=a=>{Ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):Ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new MF(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(vi(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new MF(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function due(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=due(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<t&&(i+=e.charAt(r[a]%62))}return i}}function Xn(n,e){return n<e?-1:n>e?1:0}function TN(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),a=e.charAt(i);if(r!==a)return nR(r)===nR(a)?Xn(r,a):nR(r)?1:-1}return Xn(n.length,e.length)}const pue=55296,mue=57343;function nR(n){const e=n.charCodeAt(0);return e>=pue&&e<=mue}function Py(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF="__name__";class Ic{constructor(e,t,i){t===void 0?t=0:t>e.length&&hn(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&hn(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ic.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ic?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const a=Ic.compareSegments(e.get(r),t.get(r));if(a!==0)return a}return Xn(e.length,t.length)}static compareSegments(e,t){const i=Ic.isNumericId(e),r=Ic.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?Ic.extractNumericId(e).compare(Ic.extractNumericId(t)):TN(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qd.fromString(e.substring(4,e.length-2))}}class Xi extends Ic{construct(e,t,i){return new Xi(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Xt(ut.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new Xi(t)}static emptyPath(){return new Xi([])}}const gue=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qa extends Ic{construct(e,t,i){return new Qa(e,t,i)}static isValidIdentifier(e){return gue.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qa.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===CF}static keyField(){return new Qa([CF])}static fromServerFormat(e){const t=[];let i="",r=0;const a=()=>{if(i.length===0)throw new Xt(ut.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let s=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new Xt(ut.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Xt(ut.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else l==="`"?(s=!s,r++):l!=="."||s?(i+=l,r++):(a(),r++)}if(a(),s)throw new Xt(ut.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qa(t)}static emptyPath(){return new Qa([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.path=e}static fromPath(e){return new nn(Xi.fromString(e))}static fromName(e){return new nn(Xi.fromString(e).popFirst(5))}static empty(){return new nn(Xi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xi.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Xi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nn(new Xi(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S9(n,e,t){if(!t)throw new Xt(ut.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function vue(n,e,t,i){if(e===!0&&i===!0)throw new Xt(ut.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function IF(n){if(!nn.isDocumentKey(n))throw new Xt(ut.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function RF(n){if(nn.isDocumentKey(n))throw new Xt(ut.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function w9(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function WD(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":hn(12329,{type:typeof n})}function $d(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Xt(ut.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=WD(n);throw new Xt(ut.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(n,e){const t={typeString:n};return e&&(t.value=e),t}function Rx(n,e){if(!w9(n))throw new Xt(ut.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const s=n[i];if(r&&typeof s!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&s!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new Xt(ut.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF=-62135596800,NF=1e6;class Yi{static now(){return Yi.fromMillis(Date.now())}static fromDate(e){return Yi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*NF);return new Yi(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Xt(ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Xt(ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<PF)throw new Xt(ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xt(ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/NF}_compareTo(e){return this.seconds===e.seconds?Xn(this.nanoseconds,e.nanoseconds):Xn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Yi._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rx(e,Yi._jsonSchema))return new Yi(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-PF;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Yi._jsonSchemaVersion="firestore/timestamp/1.0",Yi._jsonSchema={type:Xr("string",Yi._jsonSchemaVersion),seconds:Xr("number"),nanoseconds:Xr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{static fromTimestamp(e){return new _n(e)}static min(){return new _n(new Yi(0,0))}static max(){return new _n(new Yi(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb=-1;function yue(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=_n.fromTimestamp(i===1e9?new Yi(t+1,0):new Yi(t,i));return new np(r,nn.empty(),e)}function _ue(n){return new np(n.readTime,n.key,qb)}class np{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new np(_n.min(),nn.empty(),qb)}static max(){return new np(_n.max(),nn.empty(),qb)}}function bue(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=nn.comparator(n.documentKey,e.documentKey),t!==0?t:Xn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xue="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sue{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zy(n){if(n.code!==ut.FAILED_PRECONDITION||n.message!==xue)throw n;Ft("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&hn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new rt(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof rt?t:rt.resolve(t)}catch(t){return rt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):rt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):rt.reject(t)}static resolve(e){return new rt(((t,i)=>{t(e)}))}static reject(e){return new rt(((t,i)=>{i(e)}))}static waitFor(e){return new rt(((t,i)=>{let r=0,a=0,s=!1;e.forEach((l=>{++r,l.next((()=>{++a,s&&a===r&&t()}),(c=>i(c)))})),s=!0,a===r&&t()}))}static or(e){let t=rt.resolve(!1);for(const i of e)t=t.next((r=>r?rt.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,a)=>{i.push(t.call(this,r,a))})),this.waitFor(i)}static mapArray(e,t){return new rt(((i,r)=>{const a=e.length,s=new Array(a);let l=0;for(let c=0;c<a;c++){const f=c;t(e[f]).next((p=>{s[f]=p,++l,l===a&&i(s)}),(p=>r(p)))}}))}static doWhile(e,t){return new rt(((i,r)=>{const a=()=>{e()===!0?t().next((()=>{a()}),r):i()};a()}))}}function wue(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qy(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}aM.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=-1;function sM(n){return n==null}function oT(n){return n===0&&1/n==-1/0}function Eue(n){return typeof n=="number"&&Number.isInteger(n)&&!oT(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9="";function Tue(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=OF(e)),e=Aue(n.get(t),e);return OF(e)}function Aue(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const a=n.charAt(r);switch(a){case"\0":t+="";break;case E9:t+="";break;default:t+=a}}return t}function OF(n){return n+E9+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DF(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function mp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function T9(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,t){this.comparator=e,this.root=t||Ka.EMPTY}insert(e,t){return new gr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ka.BLACK,null,null))}remove(e){return new gr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ka.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pw(this.root,e,this.comparator,!1)}getReverseIterator(){return new pw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pw(this.root,e,this.comparator,!0)}}class pw{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ka{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=i??Ka.RED,this.left=r??Ka.EMPTY,this.right=a??Ka.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,a){return new Ka(e??this.key,t??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,i),null):a===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ka.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Ka.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ka.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ka.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw hn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw hn(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw hn(27949);return e+(this.isRed()?0:1)}}Ka.EMPTY=null,Ka.RED=!0,Ka.BLACK=!1;Ka.EMPTY=new class{constructor(){this.size=0}get key(){throw hn(57766)}get value(){throw hn(16141)}get color(){throw hn(16727)}get left(){throw hn(29726)}get right(){throw hn(36894)}copy(e,t,i,r,a){return this}insert(e,t,i){return new Ka(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.comparator=e,this.data=new gr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new LF(this.data.getIterator())}getIteratorFrom(e){return new LF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof ua)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ua(this.comparator);return t.data=e,t}}class LF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.fields=e,e.sort(Qa.comparator)}static empty(){return new nl([])}unionWith(e){let t=new ua(Qa.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new nl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Py(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new A9("Invalid base64 string: "+a):a}})(e);return new ns(t)}static fromUint8Array(e){const t=(function(r){let a="";for(let s=0;s<r.length;++s)a+=String.fromCharCode(r[s]);return a})(e);return new ns(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ns.EMPTY_BYTE_STRING=new ns("");const Mue=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ip(n){if(vi(!!n,39018),typeof n=="string"){let e=0;const t=Mue.exec(n);if(vi(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Lr(n.seconds),nanos:Lr(n.nanos)}}function Lr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function rp(n){return typeof n=="string"?ns.fromBase64String(n):ns.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9="server_timestamp",C9="__type__",I9="__previous_value__",R9="__local_write_time__";function $D(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[C9])==null?void 0:i.stringValue)===M9}function oM(n){const e=n.mapValue.fields[I9];return $D(e)?oM(e):e}function $b(n){const e=ip(n.mapValue.fields[R9].timestampValue);return new Yi(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cue{constructor(e,t,i,r,a,s,l,c,f,p,g){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=p,this.apiKey=g}}const lT="(default)";class Xb{constructor(e,t){this.projectId=e,this.database=t||lT}static empty(){return new Xb("","")}get isDefaultDatabase(){return this.database===lT}isEqual(e){return e instanceof Xb&&e.projectId===this.projectId&&e.database===this.database}}function Iue(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Xt(ut.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xb(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9="__type__",Rue="__max__",mw={mapValue:{}},N9="__vector__",uT="value";function ap(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?$D(n)?4:Nue(n)?9007199254740991:Pue(n)?10:11:hn(28295,{value:n})}function Kc(n,e){if(n===e)return!0;const t=ap(n);if(t!==ap(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $b(n).isEqual($b(e));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const s=ip(r.timestampValue),l=ip(a.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,a){return rp(r.bytesValue).isEqual(rp(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,a){return Lr(r.geoPointValue.latitude)===Lr(a.geoPointValue.latitude)&&Lr(r.geoPointValue.longitude)===Lr(a.geoPointValue.longitude)})(n,e);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return Lr(r.integerValue)===Lr(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const s=Lr(r.doubleValue),l=Lr(a.doubleValue);return s===l?oT(s)===oT(l):isNaN(s)&&isNaN(l)}return!1})(n,e);case 9:return Py(n.arrayValue.values||[],e.arrayValue.values||[],Kc);case 10:case 11:return(function(r,a){const s=r.mapValue.fields||{},l=a.mapValue.fields||{};if(DF(s)!==DF(l))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(l[c]===void 0||!Kc(s[c],l[c])))return!1;return!0})(n,e);default:return hn(52216,{left:n})}}function Yb(n,e){return(n.values||[]).find((t=>Kc(t,e)))!==void 0}function Ny(n,e){if(n===e)return 0;const t=ap(n),i=ap(e);if(t!==i)return Xn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xn(n.booleanValue,e.booleanValue);case 2:return(function(a,s){const l=Lr(a.integerValue||a.doubleValue),c=Lr(s.integerValue||s.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(n,e);case 3:return kF(n.timestampValue,e.timestampValue);case 4:return kF($b(n),$b(e));case 5:return TN(n.stringValue,e.stringValue);case 6:return(function(a,s){const l=rp(a),c=rp(s);return l.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(a,s){const l=a.split("/"),c=s.split("/");for(let f=0;f<l.length&&f<c.length;f++){const p=Xn(l[f],c[f]);if(p!==0)return p}return Xn(l.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,s){const l=Xn(Lr(a.latitude),Lr(s.latitude));return l!==0?l:Xn(Lr(a.longitude),Lr(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return UF(n.arrayValue,e.arrayValue);case 10:return(function(a,s){var v,_,x,T;const l=a.fields||{},c=s.fields||{},f=(v=l[uT])==null?void 0:v.arrayValue,p=(_=c[uT])==null?void 0:_.arrayValue,g=Xn(((x=f==null?void 0:f.values)==null?void 0:x.length)||0,((T=p==null?void 0:p.values)==null?void 0:T.length)||0);return g!==0?g:UF(f,p)})(n.mapValue,e.mapValue);case 11:return(function(a,s){if(a===mw.mapValue&&s===mw.mapValue)return 0;if(a===mw.mapValue)return 1;if(s===mw.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),f=s.fields||{},p=Object.keys(f);c.sort(),p.sort();for(let g=0;g<c.length&&g<p.length;++g){const v=TN(c[g],p[g]);if(v!==0)return v;const _=Ny(l[c[g]],f[p[g]]);if(_!==0)return _}return Xn(c.length,p.length)})(n.mapValue,e.mapValue);default:throw hn(23264,{he:t})}}function kF(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Xn(n,e);const t=ip(n),i=ip(e),r=Xn(t.seconds,i.seconds);return r!==0?r:Xn(t.nanos,i.nanos)}function UF(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const a=Ny(t[r],i[r]);if(a)return a}return Xn(t.length,i.length)}function Oy(n){return AN(n)}function AN(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ip(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return rp(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return nn.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const a of t.values||[])r?r=!1:i+=",",i+=AN(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",a=!0;for(const s of i)a?a=!1:r+=",",r+=`${s}:${AN(t.fields[s])}`;return r+"}"})(n.mapValue):hn(61005,{value:n})}function Gw(n){switch(ap(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=oM(n);return e?16+Gw(e):16;case 5:return 2*n.stringValue.length;case 6:return rp(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+Gw(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return mp(i.fields,((a,s)=>{r+=a.length+Gw(s)})),r})(n.mapValue);default:throw hn(13486,{value:n})}}function MN(n){return!!n&&"integerValue"in n}function XD(n){return!!n&&"arrayValue"in n}function FF(n){return!!n&&"nullValue"in n}function zF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ww(n){return!!n&&"mapValue"in n}function Pue(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[P9])==null?void 0:i.stringValue)===N9}function yb(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return mp(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=yb(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yb(n.arrayValue.values[t]);return e}return{...n}}function Nue(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Rue}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.value=e}static empty(){return new No({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ww(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yb(t)}setAll(e){let t=Qa.emptyPath(),i={},r=[];e.forEach(((s,l)=>{if(!t.isImmediateParentOf(l)){const c=this.getFieldsMap(t);this.applyChanges(c,i,r),i={},r=[],t=l.popLast()}s?i[l.lastSegment()]=yb(s):r.push(l.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,r)}delete(e){const t=this.field(e.popLast());Ww(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Kc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Ww(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){mp(t,((r,a)=>e[r]=a));for(const r of i)delete e[r]}clone(){return new No(yb(this.value))}}function O9(n){const e=[];return mp(n.fields,((t,i)=>{const r=new Qa([t]);if(Ww(i)){const a=O9(i.mapValue).fields;if(a.length===0)e.push(r);else for(const s of a)e.push(r.child(s))}else e.push(r)})),new nl(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t,i,r,a,s,l){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=a,this.data=s,this.documentState=l}static newInvalidDocument(e){return new Ts(e,0,_n.min(),_n.min(),_n.min(),No.empty(),0)}static newFoundDocument(e,t,i,r){return new Ts(e,1,t,_n.min(),i,r,0)}static newNoDocument(e,t){return new Ts(e,2,t,_n.min(),_n.min(),No.empty(),0)}static newUnknownDocument(e,t){return new Ts(e,3,t,_n.min(),_n.min(),No.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_n.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=No.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=No.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_n.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ts&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ts(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,t){this.position=e,this.inclusive=t}}function BF(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const a=e[r],s=n.position[r];if(a.field.isKeyField()?i=nn.comparator(nn.fromName(s.referenceValue),t.key):i=Ny(s,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function VF(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Kc(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,t="asc"){this.field=e,this.dir=t}}function Oue(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{}class oa extends D9{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Lue(e,t,i):t==="array-contains"?new Fue(e,i):t==="in"?new zue(e,i):t==="not-in"?new Bue(e,i):t==="array-contains-any"?new Vue(e,i):new oa(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new kue(e,i):new Uue(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ny(t,this.value)):t!==null&&ap(this.value)===ap(t)&&this.matchesComparison(Ny(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return hn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zc extends D9{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Zc(e,t)}matches(e){return L9(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function L9(n){return n.op==="and"}function k9(n){return Due(n)&&L9(n)}function Due(n){for(const e of n.filters)if(e instanceof Zc)return!1;return!0}function CN(n){if(n instanceof oa)return n.field.canonicalString()+n.op.toString()+Oy(n.value);if(k9(n))return n.filters.map((e=>CN(e))).join(",");{const e=n.filters.map((t=>CN(t))).join(",");return`${n.op}(${e})`}}function U9(n,e){return n instanceof oa?(function(i,r){return r instanceof oa&&i.op===r.op&&i.field.isEqual(r.field)&&Kc(i.value,r.value)})(n,e):n instanceof Zc?(function(i,r){return r instanceof Zc&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,s,l)=>a&&U9(s,r.filters[l])),!0):!1})(n,e):void hn(19439)}function F9(n){return n instanceof oa?(function(t){return`${t.field.canonicalString()} ${t.op} ${Oy(t.value)}`})(n):n instanceof Zc?(function(t){return t.op.toString()+" {"+t.getFilters().map(F9).join(" ,")+"}"})(n):"Filter"}class Lue extends oa{constructor(e,t,i){super(e,t,i),this.key=nn.fromName(i.referenceValue)}matches(e){const t=nn.comparator(e.key,this.key);return this.matchesComparison(t)}}class kue extends oa{constructor(e,t){super(e,"in",t),this.keys=z9("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Uue extends oa{constructor(e,t){super(e,"not-in",t),this.keys=z9("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function z9(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>nn.fromName(i.referenceValue)))}class Fue extends oa{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return XD(t)&&Yb(t.arrayValue,this.value)}}class zue extends oa{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Yb(this.value.arrayValue,t)}}class Bue extends oa{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Yb(this.value.arrayValue,t)}}class Vue extends oa{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!XD(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Yb(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jue{constructor(e,t=null,i=[],r=[],a=null,s=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=s,this.endAt=l,this.Te=null}}function jF(n,e=null,t=[],i=[],r=null,a=null,s=null){return new jue(n,e,t,i,r,a,s)}function YD(n){const e=wn(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>CN(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),sM(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Oy(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Oy(i))).join(",")),e.Te=t}return e.Te}function KD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Oue(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!U9(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!VF(n.startAt,e.startAt)&&VF(n.endAt,e.endAt)}function IN(n){return nn.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,t=null,i=[],r=[],a=null,s="F",l=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=s,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Hue(n,e,t,i,r,a,s,l){return new lM(n,e,t,i,r,a,s,l)}function ZD(n){return new lM(n)}function HF(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Gue(n){return nn.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Wue(n){return n.collectionGroup!==null}function _b(n){const e=wn(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new ua(Qa.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((f=>{f.isInequality()&&(l=l.add(f.field))}))})),l})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new fT(a,i))})),t.has(Qa.keyField().canonicalString())||e.Ie.push(new fT(Qa.keyField(),i))}return e.Ie}function Vc(n){const e=wn(n);return e.Ee||(e.Ee=que(e,_b(n))),e.Ee}function que(n,e){if(n.limitType==="F")return jF(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new fT(r.field,a)}));const t=n.endAt?new cT(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new cT(n.startAt.position,n.startAt.inclusive):null;return jF(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function RN(n,e,t){return new lM(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function uM(n,e){return KD(Vc(n),Vc(e))&&n.limitType===e.limitType}function B9(n){return`${YD(Vc(n))}|lt:${n.limitType}`}function Qv(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>F9(r))).join(", ")}]`),sM(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>Oy(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>Oy(r))).join(",")),`Target(${i})`})(Vc(n))}; limitType=${n.limitType})`}function cM(n,e){return e.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):nn.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,r){for(const a of _b(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(s,l,c){const f=BF(s,l,c);return s.inclusive?f<=0:f<0})(i.startAt,_b(i),r)||i.endAt&&!(function(s,l,c){const f=BF(s,l,c);return s.inclusive?f>=0:f>0})(i.endAt,_b(i),r))})(n,e)}function $ue(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function V9(n){return(e,t)=>{let i=!1;for(const r of _b(n)){const a=Xue(r,e,t);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function Xue(n,e,t){const i=n.field.isKeyField()?nn.comparator(e.key,t.key):(function(a,s,l){const c=s.data.field(a),f=l.data.field(a);return c!==null&&f!==null?Ny(c,f):hn(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return hn(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){mp(this.inner,((t,i)=>{for(const[r,a]of i)e(r,a)}))}isEmpty(){return T9(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yue=new gr(nn.comparator);function fh(){return Yue}const j9=new gr(nn.comparator);function tb(...n){let e=j9;for(const t of n)e=e.insert(t.key,t);return e}function H9(n){let e=j9;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Nm(){return bb()}function G9(){return bb()}function bb(){return new xg((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Kue=new gr(nn.comparator),Zue=new ua(nn.comparator);function Yn(...n){let e=Zue;for(const t of n)e=e.add(t);return e}const Que=new ua(Xn);function Jue(){return Que}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oT(e)?"-0":e}}function W9(n){return{integerValue:""+n}}function ece(n,e){return Eue(e)?W9(e):QD(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(){this._=void 0}}function tce(n,e,t){return n instanceof hT?(function(r,a){const s={fields:{[C9]:{stringValue:M9},[R9]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&$D(a)&&(a=oM(a)),a&&(s.fields[I9]=a),{mapValue:s}})(t,e):n instanceof Kb?$9(n,e):n instanceof Zb?X9(n,e):(function(r,a){const s=q9(r,a),l=GF(s)+GF(r.Ae);return MN(s)&&MN(r.Ae)?W9(l):QD(r.serializer,l)})(n,e)}function nce(n,e,t){return n instanceof Kb?$9(n,e):n instanceof Zb?X9(n,e):t}function q9(n,e){return n instanceof dT?(function(i){return MN(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class hT extends fM{}class Kb extends fM{constructor(e){super(),this.elements=e}}function $9(n,e){const t=Y9(e);for(const i of n.elements)t.some((r=>Kc(r,i)))||t.push(i);return{arrayValue:{values:t}}}class Zb extends fM{constructor(e){super(),this.elements=e}}function X9(n,e){let t=Y9(e);for(const i of n.elements)t=t.filter((r=>!Kc(r,i)));return{arrayValue:{values:t}}}class dT extends fM{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function GF(n){return Lr(n.integerValue||n.doubleValue)}function Y9(n){return XD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function ice(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof Kb&&r instanceof Kb||i instanceof Zb&&r instanceof Zb?Py(i.elements,r.elements,Kc):i instanceof dT&&r instanceof dT?Kc(i.Ae,r.Ae):i instanceof hT&&r instanceof hT})(n.transform,e.transform)}class rce{constructor(e,t){this.version=e,this.transformResults=t}}class Lu{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Lu}static exists(e){return new Lu(void 0,e)}static updateTime(e){return new Lu(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qw(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class hM{}function K9(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new JD(n.key,Lu.none()):new Px(n.key,n.data,Lu.none());{const t=n.data,i=No.empty();let r=new ua(Qa.comparator);for(let a of e.fields)if(!r.has(a)){let s=t.field(a);s===null&&a.length>1&&(a=a.popLast(),s=t.field(a)),s===null?i.delete(a):i.set(a,s),r=r.add(a)}return new gp(n.key,i,new nl(r.toArray()),Lu.none())}}function ace(n,e,t){n instanceof Px?(function(r,a,s){const l=r.value.clone(),c=qF(r.fieldTransforms,a,s.transformResults);l.setAll(c),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()})(n,e,t):n instanceof gp?(function(r,a,s){if(!qw(r.precondition,a))return void a.convertToUnknownDocument(s.version);const l=qF(r.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(Z9(r)),c.setAll(l),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(r,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function xb(n,e,t,i){return n instanceof Px?(function(a,s,l,c){if(!qw(a.precondition,s))return l;const f=a.value.clone(),p=$F(a.fieldTransforms,c,s);return f.setAll(p),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof gp?(function(a,s,l,c){if(!qw(a.precondition,s))return l;const f=$F(a.fieldTransforms,c,s),p=s.data;return p.setAll(Z9(a)),p.setAll(f),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(n,e,t,i):(function(a,s,l){return qw(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l})(n,e,t)}function sce(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),a=q9(i.transform,r||null);a!=null&&(t===null&&(t=No.empty()),t.set(i.field,a))}return t||null}function WF(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Py(i,r,((a,s)=>ice(a,s)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Px extends hM{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class gp extends hM{constructor(e,t,i,r,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Z9(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function qF(n,e,t){const i=new Map;vi(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let r=0;r<t.length;r++){const a=n[r],s=a.transform,l=e.data.field(a.field);i.set(a.field,nce(s,l,t[r]))}return i}function $F(n,e,t){const i=new Map;for(const r of n){const a=r.transform,s=t.data.field(r.field);i.set(r.field,tce(a,s,e))}return i}class JD extends hM{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oce extends hM{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lce{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&ace(a,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=xb(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=xb(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=G9();return this.mutations.forEach((r=>{const a=e.get(r.key),s=a.overlayedDocument;let l=this.applyToLocalView(s,a.mutatedFields);l=t.has(r.key)?null:l;const c=K9(s,l);c!==null&&i.set(r.key,c),s.isValidDocument()||s.convertToNoDocument(_n.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Yn())}isEqual(e){return this.batchId===e.batchId&&Py(this.mutations,e.mutations,((t,i)=>WF(t,i)))&&Py(this.baseMutations,e.baseMutations,((t,i)=>WF(t,i)))}}class e3{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){vi(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return Kue})();const a=e.mutations;for(let s=0;s<a.length;s++)r=r.insert(a[s].key,i[s].version);return new e3(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uce{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cce{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $r,ei;function fce(n){switch(n){case ut.OK:return hn(64938);case ut.CANCELLED:case ut.UNKNOWN:case ut.DEADLINE_EXCEEDED:case ut.RESOURCE_EXHAUSTED:case ut.INTERNAL:case ut.UNAVAILABLE:case ut.UNAUTHENTICATED:return!1;case ut.INVALID_ARGUMENT:case ut.NOT_FOUND:case ut.ALREADY_EXISTS:case ut.PERMISSION_DENIED:case ut.FAILED_PRECONDITION:case ut.ABORTED:case ut.OUT_OF_RANGE:case ut.UNIMPLEMENTED:case ut.DATA_LOSS:return!0;default:return hn(15467,{code:n})}}function Q9(n){if(n===void 0)return ch("GRPC error has no .code"),ut.UNKNOWN;switch(n){case $r.OK:return ut.OK;case $r.CANCELLED:return ut.CANCELLED;case $r.UNKNOWN:return ut.UNKNOWN;case $r.DEADLINE_EXCEEDED:return ut.DEADLINE_EXCEEDED;case $r.RESOURCE_EXHAUSTED:return ut.RESOURCE_EXHAUSTED;case $r.INTERNAL:return ut.INTERNAL;case $r.UNAVAILABLE:return ut.UNAVAILABLE;case $r.UNAUTHENTICATED:return ut.UNAUTHENTICATED;case $r.INVALID_ARGUMENT:return ut.INVALID_ARGUMENT;case $r.NOT_FOUND:return ut.NOT_FOUND;case $r.ALREADY_EXISTS:return ut.ALREADY_EXISTS;case $r.PERMISSION_DENIED:return ut.PERMISSION_DENIED;case $r.FAILED_PRECONDITION:return ut.FAILED_PRECONDITION;case $r.ABORTED:return ut.ABORTED;case $r.OUT_OF_RANGE:return ut.OUT_OF_RANGE;case $r.UNIMPLEMENTED:return ut.UNIMPLEMENTED;case $r.DATA_LOSS:return ut.DATA_LOSS;default:return hn(39323,{code:n})}}(ei=$r||($r={}))[ei.OK=0]="OK",ei[ei.CANCELLED=1]="CANCELLED",ei[ei.UNKNOWN=2]="UNKNOWN",ei[ei.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ei[ei.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ei[ei.NOT_FOUND=5]="NOT_FOUND",ei[ei.ALREADY_EXISTS=6]="ALREADY_EXISTS",ei[ei.PERMISSION_DENIED=7]="PERMISSION_DENIED",ei[ei.UNAUTHENTICATED=16]="UNAUTHENTICATED",ei[ei.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ei[ei.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ei[ei.ABORTED=10]="ABORTED",ei[ei.OUT_OF_RANGE=11]="OUT_OF_RANGE",ei[ei.UNIMPLEMENTED=12]="UNIMPLEMENTED",ei[ei.INTERNAL=13]="INTERNAL",ei[ei.UNAVAILABLE=14]="UNAVAILABLE",ei[ei.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hce(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dce=new qd([4294967295,4294967295],0);function XF(n){const e=hce().encode(n),t=new p9;return t.update(e),new Uint8Array(t.digest())}function YF(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new qd([t,i],0),new qd([r,a],0)]}class t3{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new nb(`Invalid padding: ${t}`);if(i<0)throw new nb(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new nb(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new nb(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=qd.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(qd.fromNumber(i)));return r.compare(dce)===1&&(r=new qd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=XF(e),[i,r]=YF(t);for(let a=0;a<this.hashCount;a++){const s=this.ye(i,r,a);if(!this.we(s))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new t3(a,r,t);return i.forEach((l=>s.insert(l))),s}insert(e){if(this.ge===0)return;const t=XF(e),[i,r]=YF(t);for(let a=0;a<this.hashCount;a++){const s=this.ye(i,r,a);this.be(s)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class nb extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e,t,i,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Nx.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new dM(_n.min(),r,new gr(Xn),fh(),Yn())}}class Nx{constructor(e,t,i,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Nx(i,t,Yn(),Yn(),Yn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=r}}class J9{constructor(e,t){this.targetId=e,this.Ce=t}}class eH{constructor(e,t,i=ns.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class KF{constructor(){this.ve=0,this.Fe=ZF(),this.Me=ns.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Yn(),t=Yn(),i=Yn();return this.Fe.forEach(((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:hn(38017,{changeType:a})}})),new Nx(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=ZF()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,vi(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class pce{constructor(e){this.Ge=e,this.ze=new Map,this.je=fh(),this.He=gw(),this.Je=gw(),this.Ze=new gr(Xn)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:hn(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const a=r.target;if(IN(a))if(i===0){const s=new nn(a.path);this.et(t,s,Ts.newNoDocument(s,_n.min()))}else vi(i===1,20013,{expectedCount:i});else{const s=this._t(t);if(s!==i){const l=this.ut(e),c=l?this.ct(l,e,s):1;if(c!==0){this.it(t);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=t;let s,l;try{s=rp(i).toUint8Array()}catch(c){if(c instanceof A9)return Ry("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new t3(s,r,a)}catch(c){return Ry(c instanceof nb?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((a=>{const s=this.Ge.ht(),l=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.et(t,a,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((a,s)=>{const l=this.ot(s);if(l){if(a.current&&IN(l.target)){const c=new nn(l.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,Ts.newNoDocument(c,e))}a.Be&&(t.set(s,a.ke()),a.Ke())}}));let i=Yn();this.Je.forEach(((a,s)=>{let l=!0;s.forEachWhile((c=>{const f=this.ot(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(i=i.add(a))})),this.je.forEach(((a,s)=>s.setReadTime(e)));const r=new dM(e,t,this.Ze,this.je,i);return this.je=fh(),this.He=gw(),this.Je=gw(),this.Ze=new gr(Xn),r}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new KF,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new ua(Xn),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new ua(Xn),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ft("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new KF),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function gw(){return new gr(nn.comparator)}function ZF(){return new gr(nn.comparator)}const mce={asc:"ASCENDING",desc:"DESCENDING"},gce={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vce={and:"AND",or:"OR"};class yce{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function PN(n,e){return n.useProto3Json||sM(e)?e:{value:e}}function pT(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tH(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function _ce(n,e){return pT(n,e.toTimestamp())}function jc(n){return vi(!!n,49232),_n.fromTimestamp((function(t){const i=ip(t);return new Yi(i.seconds,i.nanos)})(n))}function n3(n,e){return NN(n,e).canonicalString()}function NN(n,e){const t=(function(r){return new Xi(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function nH(n){const e=Xi.fromString(n);return vi(oH(e),10190,{key:e.toString()}),e}function ON(n,e){return n3(n.databaseId,e.path)}function iR(n,e){const t=nH(e);if(t.get(1)!==n.databaseId.projectId)throw new Xt(ut.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Xt(ut.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new nn(rH(t))}function iH(n,e){return n3(n.databaseId,e)}function bce(n){const e=nH(n);return e.length===4?Xi.emptyPath():rH(e)}function DN(n){return new Xi(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rH(n){return vi(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function QF(n,e,t){return{name:ON(n,e),fields:t.value.mapValue.fields}}function xce(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:hn(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=(function(f,p){return f.useProto3Json?(vi(p===void 0||typeof p=="string",58123),ns.fromBase64String(p||"")):(vi(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),ns.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&(function(f){const p=f.code===void 0?ut.UNKNOWN:Q9(f.code);return new Xt(p,f.message||"")})(s);t=new eH(i,r,a,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=iR(n,i.document.name),a=jc(i.document.updateTime),s=i.document.createTime?jc(i.document.createTime):_n.min(),l=new No({mapValue:{fields:i.document.fields}}),c=Ts.newFoundDocument(r,a,s,l),f=i.targetIds||[],p=i.removedTargetIds||[];t=new $w(f,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=iR(n,i.document),a=i.readTime?jc(i.readTime):_n.min(),s=Ts.newNoDocument(r,a),l=i.removedTargetIds||[];t=new $w([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=iR(n,i.document),a=i.removedTargetIds||[];t=new $w([],a,r,null)}else{if(!("filter"in e))return hn(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,s=new cce(r,a),l=i.targetId;t=new J9(l,s)}}return t}function Sce(n,e){let t;if(e instanceof Px)t={update:QF(n,e.key,e.value)};else if(e instanceof JD)t={delete:ON(n,e.key)};else if(e instanceof gp)t={update:QF(n,e.key,e.data),updateMask:Pce(e.fieldMask)};else{if(!(e instanceof oce))return hn(16599,{dt:e.type});t={verify:ON(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,s){const l=s.transform;if(l instanceof hT)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Kb)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Zb)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof dT)return{fieldPath:s.field.canonicalString(),increment:l.Ae};throw hn(20930,{transform:s.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:_ce(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:hn(27497)})(n,e.precondition)),t}function wce(n,e){return n&&n.length>0?(vi(e!==void 0,14353),n.map((t=>(function(r,a){let s=r.updateTime?jc(r.updateTime):jc(a);return s.isEqual(_n.min())&&(s=jc(a)),new rce(s,r.transformResults||[])})(t,e)))):[]}function Ece(n,e){return{documents:[iH(n,e.path)]}}function Tce(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=iH(n,r);const a=(function(f){if(f.length!==0)return sH(Zc.create(f,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const s=(function(f){if(f.length!==0)return f.map((p=>(function(v){return{field:Jv(v.field),direction:Cce(v.dir)}})(p)))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=PN(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:r}}function Ace(n){let e=bce(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){vi(i===1,65062);const p=t.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let a=[];t.where&&(a=(function(g){const v=aH(g);return v instanceof Zc&&k9(v)?v.getFilters():[v]})(t.where));let s=[];t.orderBy&&(s=(function(g){return g.map((v=>(function(x){return new fT(ey(x.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(v)))})(t.orderBy));let l=null;t.limit&&(l=(function(g){let v;return v=typeof g=="object"?g.value:g,sM(v)?null:v})(t.limit));let c=null;t.startAt&&(c=(function(g){const v=!!g.before,_=g.values||[];return new cT(_,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(g){const v=!g.before,_=g.values||[];return new cT(_,v)})(t.endAt)),Hue(e,r,s,a,l,"F",c,f)}function Mce(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return hn(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function aH(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ey(t.unaryFilter.field);return oa.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ey(t.unaryFilter.field);return oa.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ey(t.unaryFilter.field);return oa.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ey(t.unaryFilter.field);return oa.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return hn(61313);default:return hn(60726)}})(n):n.fieldFilter!==void 0?(function(t){return oa.create(ey(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return hn(58110);default:return hn(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Zc.create(t.compositeFilter.filters.map((i=>aH(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return hn(1026)}})(t.compositeFilter.op))})(n):hn(30097,{filter:n})}function Cce(n){return mce[n]}function Ice(n){return gce[n]}function Rce(n){return vce[n]}function Jv(n){return{fieldPath:n.canonicalString()}}function ey(n){return Qa.fromServerFormat(n.fieldPath)}function sH(n){return n instanceof oa?(function(t){if(t.op==="=="){if(zF(t.value))return{unaryFilter:{field:Jv(t.field),op:"IS_NAN"}};if(FF(t.value))return{unaryFilter:{field:Jv(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(zF(t.value))return{unaryFilter:{field:Jv(t.field),op:"IS_NOT_NAN"}};if(FF(t.value))return{unaryFilter:{field:Jv(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jv(t.field),op:Ice(t.op),value:t.value}}})(n):n instanceof Zc?(function(t){const i=t.getFilters().map((r=>sH(r)));return i.length===1?i[0]:{compositeFilter:{op:Rce(t.op),filters:i}}})(n):hn(54877,{filter:n})}function Pce(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function oH(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function lH(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t,i,r,a=_n.min(),s=_n.min(),l=ns.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Vd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Vd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nce{constructor(e){this.yt=e}}function Oce(n){const e=Ace({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?RN(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dce{constructor(){this.Sn=new Lce}addToCollectionParentIndex(e,t){return this.Sn.add(t),rt.resolve()}getCollectionParents(e,t){return rt.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return rt.resolve()}deleteFieldIndex(e,t){return rt.resolve()}deleteAllFieldIndexes(e){return rt.resolve()}createTargetIndexes(e,t){return rt.resolve()}getDocumentsMatchingTarget(e,t){return rt.resolve(null)}getIndexType(e,t){return rt.resolve(0)}getFieldIndexes(e,t){return rt.resolve([])}getNextCollectionGroupToUpdate(e){return rt.resolve(null)}getMinOffset(e,t){return rt.resolve(np.min())}getMinOffsetFromCollectionGroup(e,t){return rt.resolve(np.min())}updateCollectionGroup(e,t,i){return rt.resolve()}updateIndexEntries(e,t){return rt.resolve()}}class Lce{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new ua(Xi.comparator),a=!r.has(i);return this.index[t]=r.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new ua(Xi.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},uH=41943040;class Ro{static withCacheSize(e){return new Ro(e,Ro.DEFAULT_COLLECTION_PERCENTILE,Ro.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ro.DEFAULT_COLLECTION_PERCENTILE=10,Ro.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ro.DEFAULT=new Ro(uH,Ro.DEFAULT_COLLECTION_PERCENTILE,Ro.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ro.DISABLED=new Ro(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Dy(0)}static ar(){return new Dy(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ez="LruGarbageCollector",kce=1048576;function tz([n,e],[t,i]){const r=Xn(n,t);return r===0?Xn(e,i):r}class Uce{constructor(e){this.Pr=e,this.buffer=new ua(tz),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();tz(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Fce{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ft(ez,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qy(t)?Ft(ez,"Ignoring IndexedDB error during garbage collection: ",t):await Zy(t)}await this.Ar(3e5)}))}}class zce{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return rt.resolve(aM.ce);const i=new Uce(t);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ft("LruGarbageCollector","Garbage collection skipped; disabled"),rt.resolve(JF)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JF):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,r,a,s,l,c,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(Ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,s=Date.now(),this.nthSequenceNumber(e,r)))).next((g=>(i=g,l=Date.now(),this.removeTargets(e,i,t)))).next((g=>(a=g,c=Date.now(),this.removeOrphanedDocuments(e,i)))).next((g=>(f=Date.now(),Zv()<=$n.DEBUG&&Ft("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-p}ms
	Determined least recently used ${r} in `+(l-s)+`ms
	Removed ${a} targets in `+(c-l)+`ms
	Removed ${g} documents in `+(f-c)+`ms
Total Duration: ${f-p}ms`),rt.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:g}))))}}function Bce(n,e){return new zce(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vce{constructor(){this.changes=new xg((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ts.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?rt.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jce{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hce{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&xb(i.mutation,r,nl.empty(),Yi.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Yn()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Yn()){const r=Nm();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((a=>{let s=tb();return a.forEach(((l,c)=>{s=s.insert(l,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,t){const i=Nm();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Yn())))}populateOverlays(e,t,i){const r=[];return i.forEach((a=>{t.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(e,r).next((a=>{a.forEach(((s,l)=>{t.set(s,l)}))}))}computeViews(e,t,i,r){let a=fh();const s=bb(),l=(function(){return bb()})();return t.forEach(((c,f)=>{const p=i.get(f.key);r.has(f.key)&&(p===void 0||p.mutation instanceof gp)?a=a.insert(f.key,f):p!==void 0?(s.set(f.key,p.mutation.getFieldMask()),xb(p.mutation,f,p.mutation.getFieldMask(),Yi.now())):s.set(f.key,nl.empty())})),this.recalculateAndSaveOverlays(e,a).next((c=>(c.forEach(((f,p)=>s.set(f,p))),t.forEach(((f,p)=>l.set(f,new jce(p,s.get(f)??null)))),l)))}recalculateAndSaveOverlays(e,t){const i=bb();let r=new gr(((s,l)=>s-l)),a=Yn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((s=>{for(const l of s)l.keys().forEach((c=>{const f=t.get(c);if(f===null)return;let p=i.get(c)||nl.empty();p=l.applyToLocalView(f,p),i.set(c,p);const g=(r.get(l.batchId)||Yn()).add(c);r=r.insert(l.batchId,g)}))})).next((()=>{const s=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),f=c.key,p=c.value,g=G9();p.forEach((v=>{if(!a.has(v)){const _=K9(t.get(v),i.get(v));_!==null&&g.set(v,_),a=a.add(v)}})),s.push(this.documentOverlayCache.saveOverlays(e,f,g))}return rt.waitFor(s)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return Gue(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Wue(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((a=>{const s=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-a.size):rt.resolve(Nm());let l=qb,c=a;return s.next((f=>rt.forEach(f,((p,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),a.get(p)?rt.resolve():this.remoteDocumentCache.getEntry(e,p).next((v=>{c=c.insert(p,v)}))))).next((()=>this.populateOverlays(e,f,a))).next((()=>this.computeViews(e,c,f,Yn()))).next((p=>({batchId:l,changes:H9(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new nn(t)).next((i=>{let r=tb();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const a=t.collectionGroup;let s=tb();return this.indexManager.getCollectionParents(e,a).next((l=>rt.forEach(l,(c=>{const f=(function(g,v){return new lM(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next((p=>{p.forEach(((g,v)=>{s=s.insert(g,v)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,r)))).next((s=>{a.forEach(((c,f)=>{const p=f.getKey();s.get(p)===null&&(s=s.insert(p,Ts.newInvalidDocument(p)))}));let l=tb();return s.forEach(((c,f)=>{const p=a.get(c);p!==void 0&&xb(p.mutation,f,nl.empty(),Yi.now()),cM(t,f)&&(l=l.insert(c,f))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gce{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return rt.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:jc(r.createTime)}})(t)),rt.resolve()}getNamedQuery(e,t){return rt.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(r){return{name:r.name,query:Oce(r.bundledQuery),readTime:jc(r.readTime)}})(t)),rt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wce{constructor(){this.overlays=new gr(nn.comparator),this.Lr=new Map}getOverlay(e,t){return rt.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Nm();return rt.forEach(t,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,a)=>{this.bt(e,t,a)})),rt.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Lr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(i)),rt.resolve()}getOverlaysForCollection(e,t,i){const r=Nm(),a=t.length+1,s=new nn(t.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const c=l.getNext().value,f=c.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===a&&c.largestBatchId>i&&r.set(c.getKey(),c)}return rt.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let a=new gr(((f,p)=>f-p));const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let p=a.get(f.largestBatchId);p===null&&(p=Nm(),a=a.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const l=Nm(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((f,p)=>l.set(f,p))),!(l.size()>=r)););return rt.resolve(l)}bt(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const s=this.Lr.get(r.largestBatchId).delete(i.key);this.Lr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new uce(t,i));let a=this.Lr.get(t);a===void 0&&(a=Yn(),this.Lr.set(t,a)),this.Lr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qce{constructor(){this.sessionToken=ns.EMPTY_BYTE_STRING}getSessionToken(e){return rt.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,rt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(){this.kr=new ua(Aa.Kr),this.qr=new ua(Aa.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Aa(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Aa(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new nn(new Xi([])),i=new Aa(t,e),r=new Aa(t,e+1),a=[];return this.qr.forEachInRange([i,r],(s=>{this.Wr(s),a.push(s.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new nn(new Xi([])),i=new Aa(t,e),r=new Aa(t,e+1);let a=Yn();return this.qr.forEachInRange([i,r],(s=>{a=a.add(s.key)})),a}containsKey(e){const t=new Aa(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Aa{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return nn.comparator(e.key,t.key)||Xn(e.Hr,t.Hr)}static Ur(e,t){return Xn(e.Hr,t.Hr)||nn.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ce{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new ua(Aa.Kr)}checkEmpty(e){return rt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new lce(a,t,i,r);this.mutationQueue.push(s);for(const l of r)this.Jr=this.Jr.add(new Aa(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return rt.resolve(s)}lookupMutationBatch(e,t){return rt.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.Xr(i),a=r<0?0:r;return rt.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return rt.resolve(this.mutationQueue.length===0?qD:this.Yn-1)}getAllMutationBatches(e){return rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Aa(t,0),r=new Aa(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([i,r],(s=>{const l=this.Zr(s.Hr);a.push(l)})),rt.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ua(Xn);return t.forEach((r=>{const a=new Aa(r,0),s=new Aa(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,s],(l=>{i=i.add(l.Hr)}))})),rt.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let a=i;nn.isDocumentKey(a)||(a=a.child(""));const s=new Aa(new nn(a),0);let l=new ua(Xn);return this.Jr.forEachWhile((c=>{const f=c.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(l=l.add(c.Hr)),!0)}),s),rt.resolve(this.Yr(l))}Yr(e){const t=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){vi(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return rt.forEach(t.mutations,(r=>{const a=new Aa(r.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Aa(t,0),r=this.Jr.firstAfterOrEqual(i);return rt.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,rt.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xce{constructor(e){this.ti=e,this.docs=(function(){return new gr(nn.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),a=r?r.size:0,s=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return rt.resolve(i?i.document.mutableCopy():Ts.newInvalidDocument(t))}getEntries(e,t){let i=fh();return t.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():Ts.newInvalidDocument(r))})),rt.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let a=fh();const s=t.path,l=new nn(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:f,value:{document:p}}=c.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||bue(_ue(p),i)<=0||(r.has(p.key)||cM(t,p))&&(a=a.insert(p.key,p.mutableCopy()))}return rt.resolve(a)}getAllFromCollectionGroup(e,t,i,r){hn(9500)}ni(e,t){return rt.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new Yce(this)}getSize(e){return rt.resolve(this.size)}}class Yce extends Vce{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(i)})),rt.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kce{constructor(e){this.persistence=e,this.ri=new xg((t=>YD(t)),KD),this.lastRemoteSnapshotVersion=_n.min(),this.highestTargetId=0,this.ii=0,this.si=new i3,this.targetCount=0,this.oi=Dy._r()}forEachTarget(e,t){return this.ri.forEach(((i,r)=>t(r))),rt.resolve()}getLastRemoteSnapshotVersion(e){return rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return rt.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),rt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),rt.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Dy(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,rt.resolve()}updateTargetData(e,t){return this.lr(t),rt.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,rt.resolve()}removeTargets(e,t,i){let r=0;const a=[];return this.ri.forEach(((s,l)=>{l.sequenceNumber<=t&&i.get(l.targetId)===null&&(this.ri.delete(s),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)})),rt.waitFor(a).next((()=>r))}getTargetCount(e){return rt.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return rt.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),rt.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((s=>{a.push(r.markPotentiallyOrphaned(e,s))})),rt.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),rt.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return rt.resolve(i)}containsKey(e,t){return rt.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(e,t){this._i={},this.overlays={},this.ai=new aM(0),this.ui=!1,this.ui=!0,this.ci=new qce,this.referenceDelegate=e(this),this.li=new Kce(this),this.indexManager=new Dce,this.remoteDocumentCache=(function(r){return new Xce(r)})((i=>this.referenceDelegate.hi(i))),this.serializer=new Nce(t),this.Pi=new Gce(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Wce,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new $ce(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){Ft("MemoryPersistence","Starting transaction:",e);const r=new Zce(this.ai.next());return this.referenceDelegate.Ti(),i(r).next((a=>this.referenceDelegate.Ii(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ei(e,t){return rt.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class Zce extends Sue{constructor(e){super(),this.currentSequenceNumber=e}}class r3{constructor(e){this.persistence=e,this.Ri=new i3,this.Ai=null}static Vi(e){return new r3(e)}get di(){if(this.Ai)return this.Ai;throw hn(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),rt.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),rt.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),rt.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((r=>this.di.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((a=>this.di.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rt.forEach(this.di,(i=>{const r=nn.fromPath(i);return this.mi(e,r).next((a=>{a||t.removeEntry(r,_n.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return rt.or([()=>rt.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class mT{constructor(e,t){this.persistence=e,this.fi=new xg((i=>Tue(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=Bce(this,t)}static Vi(e,t){return new mT(e,t)}Ti(){}Ii(e){return rt.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return rt.forEach(this.fi,((i,r)=>this.wr(e,i,r).next((a=>a?rt.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ni(e,(s=>this.wr(e,s,t).next((l=>{l||(i++,a.removeEntry(s,_n.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),rt.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),rt.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),rt.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),rt.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Gw(e.data.value)),t}wr(e,t,i){return rt.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.fi.get(t);return rt.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=r}static Es(e,t){let i=Yn(),r=Yn();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new a3(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qce{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jce{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Boe()?8:wue(Is())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const a={result:null};return this.gs(e,t).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.ps(e,t,r,i).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new Qce;return this.ys(e,t,s).next((l=>{if(a.result=l,this.As)return this.ws(e,t,s,l.size)}))})).next((()=>a.result))}ws(e,t,i,r){return i.documentReadCount<this.Vs?(Zv()<=$n.DEBUG&&Ft("QueryEngine","SDK will not create cache indexes for query:",Qv(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),rt.resolve()):(Zv()<=$n.DEBUG&&Ft("QueryEngine","Query:",Qv(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ds*r?(Zv()<=$n.DEBUG&&Ft("QueryEngine","The SDK decides to create cache indexes for query:",Qv(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vc(t))):rt.resolve())}gs(e,t){if(HF(t))return rt.resolve(null);let i=Vc(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=RN(t,null,"F"),i=Vc(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const s=Yn(...a);return this.fs.getDocuments(e,s).next((l=>this.indexManager.getMinOffset(e,i).next((c=>{const f=this.bs(t,l);return this.Ss(t,f,s,c.readTime)?this.gs(e,RN(t,null,"F")):this.Ds(e,f,t,c)}))))})))))}ps(e,t,i,r){return HF(t)||r.isEqual(_n.min())?rt.resolve(null):this.fs.getDocuments(e,i).next((a=>{const s=this.bs(t,a);return this.Ss(t,s,i,r)?rt.resolve(null):(Zv()<=$n.DEBUG&&Ft("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Qv(t)),this.Ds(e,s,t,yue(r,qb)).next((l=>l)))}))}bs(e,t){let i=new ua(V9(e));return t.forEach(((r,a)=>{cM(e,a)&&(i=i.add(a))})),i}Ss(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}ys(e,t,i){return Zv()<=$n.DEBUG&&Ft("QueryEngine","Using full collection scan to execute query:",Qv(t)),this.fs.getDocumentsMatchingQuery(e,t,np.min(),i)}Ds(e,t,i,r){return this.fs.getDocumentsMatchingQuery(e,i,r).next((a=>(t.forEach((s=>{a=a.insert(s.key,s)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3="LocalStore",efe=3e8;class tfe{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new gr(Xn),this.Fs=new xg((a=>YD(a)),KD),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hce(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function nfe(n,e,t,i){return new tfe(n,e,t,i)}async function fH(n,e){const t=wn(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const s=[],l=[];let c=Yn();for(const f of r){s.push(f.batchId);for(const p of f.mutations)c=c.add(p.key)}for(const f of a){l.push(f.batchId);for(const p of f.mutations)c=c.add(p.key)}return t.localDocuments.getDocuments(i,c).next((f=>({Ns:f,removedBatchIds:s,addedBatchIds:l})))}))}))}function ife(n,e){const t=wn(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(l,c,f,p){const g=f.batch,v=g.keys();let _=rt.resolve();return v.forEach((x=>{_=_.next((()=>p.getEntry(c,x))).next((T=>{const S=f.docVersions.get(x);vi(S!==null,48541),T.version.compareTo(S)<0&&(g.applyToRemoteDocument(T,f),T.isValidDocument()&&(T.setReadTime(f.commitVersion),p.addEntry(T)))}))})),_.next((()=>l.mutationQueue.removeMutationBatch(c,g)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(l){let c=Yn();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(c=c.add(l.batch.mutations[f].key));return c})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function hH(n){const e=wn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function rfe(n,e){const t=wn(n),i=e.snapshotVersion;let r=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=t.xs.newChangeBuffer({trackRemovals:!0});r=t.vs;const l=[];e.targetChanges.forEach(((p,g)=>{const v=r.get(g);if(!v)return;l.push(t.li.removeMatchingKeys(a,p.removedDocuments,g).next((()=>t.li.addMatchingKeys(a,p.addedDocuments,g))));let _=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?_=_.withResumeToken(ns.EMPTY_BYTE_STRING,_n.min()).withLastLimboFreeSnapshotVersion(_n.min()):p.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(p.resumeToken,i)),r=r.insert(g,_),(function(T,S,w){return T.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=efe?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0})(v,_,p)&&l.push(t.li.updateTargetData(a,_))}));let c=fh(),f=Yn();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(a,p))})),l.push(afe(a,s,e.documentUpdates).next((p=>{c=p.Bs,f=p.Ls}))),!i.isEqual(_n.min())){const p=t.li.getLastRemoteSnapshotVersion(a).next((g=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,i)));l.push(p)}return rt.waitFor(l).next((()=>s.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,c,f))).next((()=>c))})).then((a=>(t.vs=r,a)))}function afe(n,e,t){let i=Yn(),r=Yn();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let s=fh();return t.forEach(((l,c)=>{const f=a.get(l);c.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(_n.min())?(e.removeEntry(l,c.readTime),s=s.insert(l,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),s=s.insert(l,c)):Ft(s3,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",c.version)})),{Bs:s,Ls:r}}))}function sfe(n,e){const t=wn(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=qD),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function ofe(n,e){const t=wn(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.li.getTargetData(i,e).next((a=>a?(r=a,rt.resolve(r)):t.li.allocateTargetId(i).next((s=>(r=new Vd(e,s,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.vs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function LN(n,e,t){const i=wn(n),r=i.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!Qy(s))throw s;Ft(s3,`Failed to update sequence numbers for target ${e}: ${s}`)}i.vs=i.vs.remove(e),i.Fs.delete(r.target)}function nz(n,e,t){const i=wn(n);let r=_n.min(),a=Yn();return i.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,f,p){const g=wn(c),v=g.Fs.get(p);return v!==void 0?rt.resolve(g.vs.get(v)):g.li.getTargetData(f,p)})(i,s,Vc(e)).next((l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(s,l.targetId).next((c=>{a=c}))})).next((()=>i.Cs.getDocumentsMatchingQuery(s,e,t?r:_n.min(),t?a:Yn()))).next((l=>(lfe(i,$ue(e),l),{documents:l,ks:a})))))}function lfe(n,e,t){let i=n.Ms.get(e)||_n.min();t.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Ms.set(e,i)}class iz{constructor(){this.activeTargetIds=Jue()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ufe{constructor(){this.vo=new iz,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new iz,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cfe{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rz="ConnectivityMonitor";class az{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ft(rz,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ft(rz,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vw=null;function kN(){return vw===null?vw=(function(){return 268435456+Math.round(2147483648*Math.random())})():vw++,"0x"+vw.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="RestConnection",ffe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class hfe{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.$o=this.databaseId.database===lT?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,a){const s=kN(),l=this.Qo(e,t.toUriEncodedString());Ft(rR,`Sending RPC '${e}' ${s}:`,l,i);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,r,a);const{host:f}=new URL(l),p=pp(f);return this.zo(e,l,c,i,p).then((g=>(Ft(rR,`Received RPC '${e}' ${s}: `,g),g)),(g=>{throw Ry(rR,`RPC '${e}' ${s} failed with error: `,g,"url: ",l,"request:",i),g}))}jo(e,t,i,r,a,s){return this.Wo(e,t,i,r,a)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ky})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,a)=>e[a]=r)),i&&i.headers.forEach(((r,a)=>e[a]=r))}Qo(e,t){const i=ffe[e];let r=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dfe{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="WebChannelConnection",B_=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(r){setTimeout((()=>{throw r}),0)}}))};class cy extends hfe{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!cy.c_){const e=y9();B_(e,v9.STAT_EVENT,(t=>{t.stat===EN.PROXY?Ft(Ss,"STAT_EVENT: detected buffering proxy"):t.stat===EN.NOPROXY&&Ft(Ss,"STAT_EVENT: detected no buffering proxy")})),cy.c_=!0}}zo(e,t,i,r,a){const s=kN();return new Promise(((l,c)=>{const f=new m9;f.setWithCredentials(!0),f.listenOnce(g9.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Hw.NO_ERROR:const g=f.getResponseJson();Ft(Ss,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),l(g);break;case Hw.TIMEOUT:Ft(Ss,`RPC '${e}' ${s} timed out`),c(new Xt(ut.DEADLINE_EXCEEDED,"Request time out"));break;case Hw.HTTP_ERROR:const v=f.getStatus();if(Ft(Ss,`RPC '${e}' ${s} failed with status:`,v,"response text:",f.getResponseText()),v>0){let _=f.getResponseJson();Array.isArray(_)&&(_=_[0]);const x=_==null?void 0:_.error;if(x&&x.status&&x.message){const T=(function(w){const I=w.toLowerCase().replace(/_/g,"-");return Object.values(ut).indexOf(I)>=0?I:ut.UNKNOWN})(x.status);c(new Xt(T,x.message))}else c(new Xt(ut.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Xt(ut.UNAVAILABLE,"Connection failed."));break;default:hn(9055,{l_:e,streamId:s,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Ft(Ss,`RPC '${e}' ${s} completed.`)}}));const p=JSON.stringify(r);Ft(Ss,`RPC '${e}' ${s} sending request:`,r),f.send(t,"POST",p,i,15)}))}T_(e,t,i){const r=kN(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const f=a.join("");Ft(Ss,`Creating RPC '${e}' stream ${r}: ${f}`,l);const p=s.createWebChannel(f,l);this.I_(p);let g=!1,v=!1;const _=new dfe({Ho:x=>{v?Ft(Ss,`Not sending because RPC '${e}' stream ${r} is closed:`,x):(g||(Ft(Ss,`Opening RPC '${e}' stream ${r} transport.`),p.open(),g=!0),Ft(Ss,`RPC '${e}' stream ${r} sending:`,x),p.send(x))},Jo:()=>p.close()});return B_(p,eb.EventType.OPEN,(()=>{v||(Ft(Ss,`RPC '${e}' stream ${r} transport opened.`),_.i_())})),B_(p,eb.EventType.CLOSE,(()=>{v||(v=!0,Ft(Ss,`RPC '${e}' stream ${r} transport closed`),_.o_(),this.E_(p))})),B_(p,eb.EventType.ERROR,(x=>{v||(v=!0,Ry(Ss,`RPC '${e}' stream ${r} transport errored. Name:`,x.name,"Message:",x.message),_.o_(new Xt(ut.UNAVAILABLE,"The operation could not be completed")))})),B_(p,eb.EventType.MESSAGE,(x=>{var T;if(!v){const S=x.data[0];vi(!!S,16349);const w=S,I=(w==null?void 0:w.error)||((T=w[0])==null?void 0:T.error);if(I){Ft(Ss,`RPC '${e}' stream ${r} received error:`,I);const R=I.status;let D=(function(k){const F=$r[k];if(F!==void 0)return Q9(F)})(R),B=I.message;D===void 0&&(D=ut.INTERNAL,B="Unknown error status: "+R+" with message "+I.message),v=!0,_.o_(new Xt(D,B)),p.close()}else Ft(Ss,`RPC '${e}' stream ${r} received:`,S),_.__(S)}})),cy.u_(),setTimeout((()=>{_.s_()}),0),_}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return _9()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pfe(n){return new cy(n)}function aR(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(n){return new yce(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cy.c_=!1;class dH{constructor(e,t,i=1e3,r=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=r,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&Ft("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sz="PersistentStream";class pH{constructor(e,t,i,r,a,s,l,c){this.Ci=e,this.b_=i,this.S_=r,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new dH(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ut.RESOURCE_EXHAUSTED?(ch(t.toString()),ch("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ut.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new Xt(ut.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ft(sz,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Ft(sz,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class mfe extends pH{constructor(e,t,i,r,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,s),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=xce(this.serializer,e),i=(function(a){if(!("targetChange"in a))return _n.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?_n.min():s.readTime?jc(s.readTime):_n.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=DN(this.serializer),t.addTarget=(function(a,s){let l;const c=s.target;if(l=IN(c)?{documents:Ece(a,c)}:{query:Tce(a,c).ft},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=tH(a,s.resumeToken);const f=PN(a,s.expectedCount);f!==null&&(l.expectedCount=f)}else if(s.snapshotVersion.compareTo(_n.min())>0){l.readTime=pT(a,s.snapshotVersion.toTimestamp());const f=PN(a,s.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,e);const i=Mce(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=DN(this.serializer),t.removeTarget=e,this.K_(t)}}class gfe extends pH{constructor(e,t,i,r,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,s),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return vi(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,vi(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){vi(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=wce(e.writeResults,e.commitTime),i=jc(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=DN(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Sce(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vfe{}class yfe extends vfe{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Xt(ut.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Wo(e,NN(t,i),r,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Xt(ut.UNKNOWN,a.toString())}))}jo(e,t,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,l])=>this.connection.jo(e,NN(t,i),r,s,l,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Xt(ut.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function _fe(n,e,t,i){return new yfe(n,e,t,i)}class bfe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ch(t),this.aa=!1):Ft("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="RemoteStore";class xfe{constructor(e,t,i,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((s=>{i.enqueueAndForget((async()=>{Sg(this)&&(Ft(ig,"Restarting streams for network reachability change."),await(async function(c){const f=wn(c);f.Ea.add(4),await Ox(f),f.Va.set("Unknown"),f.Ea.delete(4),await mM(f)})(this))}))})),this.Va=new bfe(i,r)}}async function mM(n){if(Sg(n))for(const e of n.Ra)await e(!0)}async function Ox(n){for(const e of n.Ra)await e(!1)}function mH(n,e){const t=wn(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),c3(t)?u3(t):Jy(t).O_()&&l3(t,e))}function o3(n,e){const t=wn(n),i=Jy(t);t.Ia.delete(e),i.O_()&&gH(t,e),t.Ia.size===0&&(i.O_()?i.L_():Sg(t)&&t.Va.set("Unknown"))}function l3(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_n.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Jy(n).Z_(e)}function gH(n,e){n.da.$e(e),Jy(n).X_(e)}function u3(n){n.da=new pce({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Jy(n).start(),n.Va.ua()}function c3(n){return Sg(n)&&!Jy(n).x_()&&n.Ia.size>0}function Sg(n){return wn(n).Ea.size===0}function vH(n){n.da=void 0}async function Sfe(n){n.Va.set("Online")}async function wfe(n){n.Ia.forEach(((e,t)=>{l3(n,e)}))}async function Efe(n,e){vH(n),c3(n)?(n.Va.ha(e),u3(n)):n.Va.set("Unknown")}async function Tfe(n,e,t){if(n.Va.set("Online"),e instanceof eH&&e.state===2&&e.cause)try{await(async function(r,a){const s=a.cause;for(const l of a.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,s),r.Ia.delete(l),r.da.removeTarget(l))})(n,e)}catch(i){Ft(ig,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await gT(n,i)}else if(e instanceof $w?n.da.Xe(e):e instanceof J9?n.da.st(e):n.da.tt(e),!t.isEqual(_n.min()))try{const i=await hH(n.localStore);t.compareTo(i)>=0&&await(function(a,s){const l=a.da.Tt(s);return l.targetChanges.forEach(((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const p=a.Ia.get(f);p&&a.Ia.set(f,p.withResumeToken(c.resumeToken,s))}})),l.targetMismatches.forEach(((c,f)=>{const p=a.Ia.get(c);if(!p)return;a.Ia.set(c,p.withResumeToken(ns.EMPTY_BYTE_STRING,p.snapshotVersion)),gH(a,c);const g=new Vd(p.target,c,f,p.sequenceNumber);l3(a,g)})),a.remoteSyncer.applyRemoteEvent(l)})(n,t)}catch(i){Ft(ig,"Failed to raise snapshot:",i),await gT(n,i)}}async function gT(n,e,t){if(!Qy(e))throw e;n.Ea.add(1),await Ox(n),n.Va.set("Offline"),t||(t=()=>hH(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ft(ig,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await mM(n)}))}function yH(n,e){return e().catch((t=>gT(n,t,e)))}async function gM(n){const e=wn(n),t=sp(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qD;for(;Afe(e);)try{const r=await sfe(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,Mfe(e,r)}catch(r){await gT(e,r)}_H(e)&&bH(e)}function Afe(n){return Sg(n)&&n.Ta.length<10}function Mfe(n,e){n.Ta.push(e);const t=sp(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function _H(n){return Sg(n)&&!sp(n).x_()&&n.Ta.length>0}function bH(n){sp(n).start()}async function Cfe(n){sp(n).ra()}async function Ife(n){const e=sp(n);for(const t of n.Ta)e.ea(t.mutations)}async function Rfe(n,e,t){const i=n.Ta.shift(),r=e3.from(i,e,t);await yH(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await gM(n)}async function Pfe(n,e){e&&sp(n).Y_&&await(async function(i,r){if((function(s){return fce(s)&&s!==ut.ABORTED})(r.code)){const a=i.Ta.shift();sp(i).B_(),await yH(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await gM(i)}})(n,e),_H(n)&&bH(n)}async function oz(n,e){const t=wn(n);t.asyncQueue.verifyOperationInProgress(),Ft(ig,"RemoteStore received new credentials");const i=Sg(t);t.Ea.add(3),await Ox(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await mM(t)}async function Nfe(n,e){const t=wn(n);e?(t.Ea.delete(2),await mM(t)):e||(t.Ea.add(2),await Ox(t),t.Va.set("Unknown"))}function Jy(n){return n.ma||(n.ma=(function(t,i,r){const a=wn(t);return a.sa(),new mfe(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:Sfe.bind(null,n),Yo:wfe.bind(null,n),t_:Efe.bind(null,n),J_:Tfe.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),c3(n)?u3(n):n.Va.set("Unknown")):(await n.ma.stop(),vH(n))}))),n.ma}function sp(n){return n.fa||(n.fa=(function(t,i,r){const a=wn(t);return a.sa(),new gfe(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Cfe.bind(null,n),t_:Pfe.bind(null,n),ta:Ife.bind(null,n),na:Rfe.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await gM(n)):(await n.fa.stop(),n.Ta.length>0&&(Ft(ig,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e,t,i,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new Vm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,a){const s=Date.now()+i,l=new f3(e,t,s,r,a);return l.start(i),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xt(ut.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function h3(n,e){if(ch("AsyncQueue",`${e}: ${n}`),Qy(n))return new Xt(ut.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{static emptySet(e){return new fy(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||nn.comparator(t.key,i.key):(t,i)=>nn.comparator(t.key,i.key),this.keyedMap=tb(),this.sortedSet=new gr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new fy;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(){this.ga=new gr(nn.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):hn(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ly{constructor(e,t,i,r,a,s,l,c,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,r,a){const s=[];return t.forEach((l=>{s.push({type:0,doc:l})})),new Ly(e,t,fy.emptySet(t),s,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uM(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ofe{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class Dfe{constructor(){this.queries=uz(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=wn(t),a=r.queries;r.queries=uz(),a.forEach(((s,l)=>{for(const c of l.ba)c.onError(i)}))})(this,new Xt(ut.ABORTED,"Firestore shutting down"))}}function uz(){return new xg((n=>B9(n)),uM)}async function Lfe(n,e){const t=wn(n);let i=3;const r=e.query;let a=t.queries.get(r);a?!a.Sa()&&e.Da()&&(i=2):(a=new Ofe,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(r,!0);break;case 1:a.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(s){const l=h3(s,`Initialization of query '${Qv(e.query)}' failed`);return void e.onError(l)}t.queries.set(r,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&d3(t)}async function kfe(n,e){const t=wn(n),i=e.query;let r=3;const a=t.queries.get(i);if(a){const s=a.ba.indexOf(e);s>=0&&(a.ba.splice(s,1),a.ba.length===0?r=e.Da()?0:1:!a.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Ufe(n,e){const t=wn(n);let i=!1;for(const r of e){const a=r.query,s=t.queries.get(a);if(s){for(const l of s.ba)l.Fa(r)&&(i=!0);s.wa=r}}i&&d3(t)}function Ffe(n,e,t){const i=wn(n),r=i.queries.get(e);if(r)for(const a of r.ba)a.onError(t);i.queries.delete(e)}function d3(n){n.Ca.forEach((e=>{e.next()}))}var UN,cz;(cz=UN||(UN={})).Ma="default",cz.Cache="cache";class zfe{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ly(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ly.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==UN.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xH{constructor(e){this.key=e}}class SH{constructor(e){this.key=e}}class Bfe{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Yn(),this.mutatedKeys=Yn(),this.eu=V9(e),this.tu=new fy(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new lz,r=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,s=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((p,g)=>{const v=r.get(p),_=cM(this.query,g)?g:null,x=!!v&&this.mutatedKeys.has(v.key),T=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let S=!1;v&&_?v.data.isEqual(_.data)?x!==T&&(i.track({type:3,doc:_}),S=!0):this.su(v,_)||(i.track({type:2,doc:_}),S=!0,(c&&this.eu(_,c)>0||f&&this.eu(_,f)<0)&&(l=!0)):!v&&_?(i.track({type:0,doc:_}),S=!0):v&&!_&&(i.track({type:1,doc:v}),S=!0,(c||f)&&(l=!0)),S&&(_?(s=s.add(_),a=T?a.add(p):a.delete(p)):(s=s.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const p=this.query.limitType==="F"?s.last():s.first();s=s.delete(p.key),a=a.delete(p.key),i.track({type:1,doc:p})}return{tu:s,iu:i,Ss:l,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((p,g)=>(function(_,x){const T=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return hn(20277,{Vt:S})}};return T(_)-T(x)})(p.type,g.type)||this.eu(p.doc,g.doc))),this.ou(i),r=r??!1;const l=t&&!r?this._u():[],c=this.Ya.size===0&&this.current&&!r?1:0,f=c!==this.Xa;return this.Xa=c,s.length!==0||f?{snapshot:new Ly(this.query,e.tu,a,s,e.mutatedKeys,c===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new lz,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Yn(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new SH(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new xH(i))})),t}cu(e){this.Za=e.ks,this.Ya=Yn();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ly.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const p3="SyncEngine";class Vfe{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class jfe{constructor(e){this.key=e,this.hu=!1}}class Hfe{constructor(e,t,i,r,a,s){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new xg((l=>B9(l)),uM),this.Iu=new Map,this.Eu=new Set,this.Ru=new gr(nn.comparator),this.Au=new Map,this.Vu=new i3,this.du={},this.mu=new Map,this.fu=Dy.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Gfe(n,e,t=!0){const i=CH(n);let r;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await wH(i,e,t,!0),r}async function Wfe(n,e){const t=CH(n);await wH(t,e,!0,!1)}async function wH(n,e,t,i){const r=await ofe(n.localStore,Vc(e)),a=r.targetId,s=n.sharedClientState.addLocalQueryTarget(a,t);let l;return i&&(l=await qfe(n,e,a,s==="current",r.resumeToken)),n.isPrimaryClient&&t&&mH(n.remoteStore,r),l}async function qfe(n,e,t,i,r){n.pu=(g,v,_)=>(async function(T,S,w,I){let R=S.view.ru(w);R.Ss&&(R=await nz(T.localStore,S.query,!1).then((({documents:k})=>S.view.ru(k,R))));const D=I&&I.targetChanges.get(S.targetId),B=I&&I.targetMismatches.get(S.targetId)!=null,z=S.view.applyChanges(R,T.isPrimaryClient,D,B);return hz(T,S.targetId,z.au),z.snapshot})(n,g,v,_);const a=await nz(n.localStore,e,!0),s=new Bfe(e,a.ks),l=s.ru(a.documents),c=Nx.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),f=s.applyChanges(l,n.isPrimaryClient,c);hz(n,t,f.au);const p=new Vfe(e,t,s);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function $fe(n,e,t){const i=wn(n),r=i.Tu.get(e),a=i.Iu.get(r.targetId);if(a.length>1)return i.Iu.set(r.targetId,a.filter((s=>!uM(s,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await LN(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&o3(i.remoteStore,r.targetId),FN(i,r.targetId)})).catch(Zy)):(FN(i,r.targetId),await LN(i.localStore,r.targetId,!0))}async function Xfe(n,e){const t=wn(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),o3(t.remoteStore,i.targetId))}async function Yfe(n,e,t){const i=nhe(n);try{const r=await(function(s,l){const c=wn(s),f=Yi.now(),p=l.reduce(((_,x)=>_.add(x.key)),Yn());let g,v;return c.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let x=fh(),T=Yn();return c.xs.getEntries(_,p).next((S=>{x=S,x.forEach(((w,I)=>{I.isValidDocument()||(T=T.add(w))}))})).next((()=>c.localDocuments.getOverlayedDocuments(_,x))).next((S=>{g=S;const w=[];for(const I of l){const R=sce(I,g.get(I.key).overlayedDocument);R!=null&&w.push(new gp(I.key,R,O9(R.value.mapValue),Lu.exists(!0)))}return c.mutationQueue.addMutationBatch(_,f,w,l)})).next((S=>{v=S;const w=S.applyToLocalDocumentSet(g,T);return c.documentOverlayCache.saveOverlays(_,S.batchId,w)}))})).then((()=>({batchId:v.batchId,changes:H9(g)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(s,l,c){let f=s.du[s.currentUser.toKey()];f||(f=new gr(Xn)),f=f.insert(l,c),s.du[s.currentUser.toKey()]=f})(i,r.batchId,t),await Dx(i,r.changes),await gM(i.remoteStore)}catch(r){const a=h3(r,"Failed to persist write");t.reject(a)}}async function EH(n,e){const t=wn(n);try{const i=await rfe(t.localStore,e);e.targetChanges.forEach(((r,a)=>{const s=t.Au.get(a);s&&(vi(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?s.hu=!0:r.modifiedDocuments.size>0?vi(s.hu,14607):r.removedDocuments.size>0&&(vi(s.hu,42227),s.hu=!1))})),await Dx(t,i,e)}catch(i){await Zy(i)}}function fz(n,e,t){const i=wn(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((a,s)=>{const l=s.view.va(e);l.snapshot&&r.push(l.snapshot)})),(function(s,l){const c=wn(s);c.onlineState=l;let f=!1;c.queries.forEach(((p,g)=>{for(const v of g.ba)v.va(l)&&(f=!0)})),f&&d3(c)})(i.eventManager,e),r.length&&i.Pu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Kfe(n,e,t){const i=wn(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),a=r&&r.key;if(a){let s=new gr(nn.comparator);s=s.insert(a,Ts.newNoDocument(a,_n.min()));const l=Yn().add(a),c=new dM(_n.min(),new Map,new gr(Xn),s,l);await EH(i,c),i.Ru=i.Ru.remove(a),i.Au.delete(e),m3(i)}else await LN(i.localStore,e,!1).then((()=>FN(i,e,t))).catch(Zy)}async function Zfe(n,e){const t=wn(n),i=e.batch.batchId;try{const r=await ife(t.localStore,e);AH(t,i,null),TH(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Dx(t,r)}catch(r){await Zy(r)}}async function Qfe(n,e,t){const i=wn(n);try{const r=await(function(s,l){const c=wn(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return c.mutationQueue.lookupMutationBatch(f,l).next((g=>(vi(g!==null,37113),p=g.keys(),c.mutationQueue.removeMutationBatch(f,g)))).next((()=>c.mutationQueue.performConsistencyCheck(f))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(f,p,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>c.localDocuments.getDocuments(f,p)))}))})(i.localStore,e);AH(i,e,t),TH(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Dx(i,r)}catch(r){await Zy(r)}}function TH(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function AH(n,e,t){const i=wn(n);let r=i.du[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(t?a.reject(t):a.resolve(),r=r.remove(e)),i.du[i.currentUser.toKey()]=r}}function FN(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||MH(n,i)}))}function MH(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(o3(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),m3(n))}function hz(n,e,t){for(const i of t)i instanceof xH?(n.Vu.addReference(i.key,e),Jfe(n,i)):i instanceof SH?(Ft(p3,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||MH(n,i.key)):hn(19791,{wu:i})}function Jfe(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(Ft(p3,"New document in limbo: "+t),n.Eu.add(i),m3(n))}function m3(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new nn(Xi.fromString(e)),i=n.fu.next();n.Au.set(i,new jfe(t)),n.Ru=n.Ru.insert(t,i),mH(n.remoteStore,new Vd(Vc(ZD(t.path)),i,"TargetPurposeLimboResolution",aM.ce))}}async function Dx(n,e,t){const i=wn(n),r=[],a=[],s=[];i.Tu.isEmpty()||(i.Tu.forEach(((l,c)=>{s.push(i.pu(c,e,t).then((f=>{var p;if((f||t)&&i.isPrimaryClient){const g=f?!f.fromCache:(p=t==null?void 0:t.targetChanges.get(c.targetId))==null?void 0:p.current;i.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(f){r.push(f);const g=a3.Es(c.targetId,f);a.push(g)}})))})),await Promise.all(s),i.Pu.J_(r),await(async function(c,f){const p=wn(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>rt.forEach(f,(v=>rt.forEach(v.Ts,(_=>p.persistence.referenceDelegate.addReference(g,v.targetId,_))).next((()=>rt.forEach(v.Is,(_=>p.persistence.referenceDelegate.removeReference(g,v.targetId,_)))))))))}catch(g){if(!Qy(g))throw g;Ft(s3,"Failed to update sequence numbers: "+g)}for(const g of f){const v=g.targetId;if(!g.fromCache){const _=p.vs.get(v),x=_.snapshotVersion,T=_.withLastLimboFreeSnapshotVersion(x);p.vs=p.vs.insert(v,T)}}})(i.localStore,a))}async function ehe(n,e){const t=wn(n);if(!t.currentUser.isEqual(e)){Ft(p3,"User change. New user:",e.toKey());const i=await fH(t.localStore,e);t.currentUser=e,(function(a,s){a.mu.forEach((l=>{l.forEach((c=>{c.reject(new Xt(ut.CANCELLED,s))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Dx(t,i.Ns)}}function the(n,e){const t=wn(n),i=t.Au.get(e);if(i&&i.hu)return Yn().add(i.key);{let r=Yn();const a=t.Iu.get(e);if(!a)return r;for(const s of a){const l=t.Tu.get(s);r=r.unionWith(l.view.nu)}return r}}function CH(n){const e=wn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=EH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=the.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Kfe.bind(null,e),e.Pu.J_=Ufe.bind(null,e.eventManager),e.Pu.yu=Ffe.bind(null,e.eventManager),e}function nhe(n){const e=wn(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Zfe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Qfe.bind(null,e),e}class vT{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pM(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return nfe(this.persistence,new Jce,e.initialUser,this.serializer)}Cu(e){return new cH(r3.Vi,this.serializer)}Du(e){return new ufe}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vT.provider={build:()=>new vT};class ihe extends vT{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){vi(this.persistence.referenceDelegate instanceof mT,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Fce(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ro.withCacheSize(this.cacheSizeBytes):Ro.DEFAULT;return new cH((i=>mT.Vi(i,t)),this.serializer)}}class zN{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>fz(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ehe.bind(null,this.syncEngine),await Nfe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Dfe})()}createDatastore(e){const t=pM(e.databaseInfo.databaseId),i=pfe(e.databaseInfo);return _fe(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,a,s,l){return new xfe(i,r,a,s,l)})(this.localStore,this.datastore,e.asyncQueue,(t=>fz(this.syncEngine,t,0)),(function(){return az.v()?new az:new cfe})())}createSyncEngine(e,t){return(function(r,a,s,l,c,f,p){const g=new Hfe(r,a,s,l,c,f);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const a=wn(r);Ft(ig,"RemoteStore shutting down."),a.Ea.add(5),await Ox(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}zN.provider={build:()=>new zN};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rhe{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ch("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="FirestoreClient";class ahe{constructor(e,t,i,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=r,this.user=Es.UNAUTHENTICATED,this.clientId=GD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async s=>{Ft(op,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,(s=>(Ft(op,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=h3(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function sR(n,e){n.asyncQueue.verifyOperationInProgress(),Ft(op,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await fH(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function dz(n,e){n.asyncQueue.verifyOperationInProgress();const t=await she(n);Ft(op,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>oz(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>oz(e.remoteStore,r))),n._onlineComponents=e}async function she(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ft(op,"Using user provided OfflineComponentProvider");try{await sR(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ut.FAILED_PRECONDITION||r.code===ut.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Ry("Error using user provided cache. Falling back to memory cache: "+t),await sR(n,new vT)}}else Ft(op,"Using default OfflineComponentProvider"),await sR(n,new ihe(void 0));return n._offlineComponents}async function IH(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ft(op,"Using user provided OnlineComponentProvider"),await dz(n,n._uninitializedComponentsProvider._online)):(Ft(op,"Using default OnlineComponentProvider"),await dz(n,new zN))),n._onlineComponents}function ohe(n){return IH(n).then((e=>e.syncEngine))}async function pz(n){const e=await IH(n),t=e.eventManager;return t.onListen=Gfe.bind(null,e.syncEngine),t.onUnlisten=$fe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Wfe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Xfe.bind(null,e.syncEngine),t}function lhe(n,e,t,i){const r=new rhe(i),a=new zfe(e,r,t);return n.asyncQueue.enqueueAndForget((async()=>Lfe(await pz(n),a))),()=>{r.Nu(),n.asyncQueue.enqueueAndForget((async()=>kfe(await pz(n),a)))}}function uhe(n,e){const t=new Vm;return n.asyncQueue.enqueueAndForget((async()=>Yfe(await ohe(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RH(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const che="ComponentProvider",mz=new Map;function fhe(n,e,t,i,r){return new Cue(n,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,RH(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PH="firestore.googleapis.com",gz=!0;class vz{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Xt(ut.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=PH,this.ssl=gz}else this.host=e.host,this.ssl=e.ssl??gz;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=uH;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kce)throw new Xt(ut.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vue("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RH(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Xt(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Xt(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Xt(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vM{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vz({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xt(ut.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Xt(ut.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vz(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new oue;switch(i.type){case"firstParty":return new fue(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Xt(ut.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=mz.get(t);i&&(Ft(che,"Removing Datastore"),mz.delete(t),i.terminate())})(this),Promise.resolve()}}function hhe(n,e,t,i={}){var f;n=$d(n,vM);const r=pp(e),a=n._getSettings(),s={...a,emulatorOptions:n._getEmulatorOptions()},l=`${e}:${t}`;r&&(FD(`https://${l}`),zD("Firestore",!0)),a.host!==PH&&a.host!==l&&Ry("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:l,ssl:r,emulatorOptions:i};if(!eg(c,s)&&(n._setSettings(c),i.mockUserToken)){let p,g;if(typeof i.mockUserToken=="string")p=i.mockUserToken,g=Es.MOCK_USER;else{p=l9(i.mockUserToken,(f=n._app)==null?void 0:f.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new Xt(ut.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Es(v)}n._authCredentials=new lue(new x9(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new yM(this.firestore,e,this._query)}}class la{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new la(this.firestore,e,this._key)}toJSON(){return{type:la._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Rx(t,la._jsonSchema))return new la(e,i||null,new nn(Xi.fromString(t.referencePath)))}}la._jsonSchemaVersion="firestore/documentReference/1.0",la._jsonSchema={type:Xr("string",la._jsonSchemaVersion),referencePath:Xr("string")};class Xd extends yM{constructor(e,t,i){super(e,t,ZD(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new la(this.firestore,null,new nn(e))}withConverter(e){return new Xd(this.firestore,e,this._path)}}function oR(n,e,...t){if(n=Fr(n),S9("collection","path",e),n instanceof vM){const i=Xi.fromString(e,...t);return RF(i),new Xd(n,null,i)}{if(!(n instanceof la||n instanceof Xd))throw new Xt(ut.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Xi.fromString(e,...t));return RF(i),new Xd(n.firestore,null,i)}}function xm(n,e,...t){if(n=Fr(n),arguments.length===1&&(e=GD.newId()),S9("doc","path",e),n instanceof vM){const i=Xi.fromString(e,...t);return IF(i),new la(n,null,new nn(i))}{if(!(n instanceof la||n instanceof Xd))throw new Xt(ut.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Xi.fromString(e,...t));return IF(i),new la(n.firestore,n instanceof Xd?n.converter:null,new nn(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yz="AsyncQueue";class _z{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new dH(this,"async_queue_retry"),this._c=()=>{const i=aR();i&&Ft(yz,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=aR();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=aR();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Vm;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Qy(e))throw e;Ft(yz,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ch("INTERNAL UNHANDLED ERROR: ",bz(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=f3.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&hn(47125,{Pc:bz(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function bz(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class ky extends vM{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new _z,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _z(e),this._firestoreClient=void 0,await e}}}function dhe(n,e){const t=typeof n=="object"?n:jD(),i=typeof n=="string"?n:lT,r=rM(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=a9("firestore");a&&hhe(r,...a)}return r}function NH(n){if(n._terminated)throw new Xt(ut.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||phe(n),n._firestoreClient}function phe(n){var i,r,a,s;const e=n._freezeSettings(),t=fhe(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(r=n._app)==null?void 0:r.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new ahe(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(c){const f=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gl(ns.fromBase64String(e))}catch(t){throw new Xt(ut.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gl(ns.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rx(e,Gl._jsonSchema))return Gl.fromBase64String(e.bytes)}}Gl._jsonSchemaVersion="firestore/bytes/1.0",Gl._jsonSchema={type:Xr("string",Gl._jsonSchemaVersion),bytes:Xr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Xt(ut.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qa(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Xt(ut.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Xt(ut.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xn(this._lat,e._lat)||Xn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hc._jsonSchemaVersion}}static fromJSON(e){if(Rx(e,Hc._jsonSchema))return new Hc(e.latitude,e.longitude)}}Hc._jsonSchemaVersion="firestore/geoPoint/1.0",Hc._jsonSchema={type:Xr("string",Hc._jsonSchemaVersion),latitude:Xr("number"),longitude:Xr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ku._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rx(e,ku._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ku(e.vectorValues);throw new Xt(ut.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ku._jsonSchemaVersion="firestore/vectorValue/1.0",ku._jsonSchema={type:Xr("string",ku._jsonSchemaVersion),vectorValues:Xr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mhe=/^__.*__$/;class ghe{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new gp(e,this.data,this.fieldMask,t,this.fieldTransforms):new Px(e,this.data,t,this.fieldTransforms)}}class OH{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new gp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function DH(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw hn(40011,{dataSource:n})}}class y3{constructor(e,t,i,r,a,s){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new y3({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return yT(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(DH(this.dataSource)&&mhe.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class vhe{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||pM(e)}createContext(e,t,i,r=!1){return new y3({dataSource:e,methodName:t,targetDoc:i,path:Qa.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function LH(n){const e=n._freezeSettings(),t=pM(n._databaseId);return new vhe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function yhe(n,e,t,i,r,a={}){const s=n.createContext(a.merge||a.mergeFields?2:0,e,t,r);_3("Data must be an object, but it was:",s,i);const l=kH(i,s);let c,f;if(a.merge)c=new nl(s.fieldMask),f=s.fieldTransforms;else if(a.mergeFields){const p=[];for(const g of a.mergeFields){const v=Qb(e,g,t);if(!s.contains(v))throw new Xt(ut.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);zH(p,v)||p.push(v)}c=new nl(p),f=s.fieldTransforms.filter((g=>c.covers(g.field)))}else c=null,f=s.fieldTransforms;return new ghe(new No(l),c,f)}class _M extends v3{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _M}}function _he(n,e,t,i){const r=n.createContext(1,e,t);_3("Data must be an object, but it was:",r,i);const a=[],s=No.empty();mp(i,((c,f)=>{const p=FH(e,c,t);f=Fr(f);const g=r.childContextForFieldPath(p);if(f instanceof _M)a.push(p);else{const v=bM(f,g);v!=null&&(a.push(p),s.set(p,v))}}));const l=new nl(a);return new OH(s,l,r.fieldTransforms)}function bhe(n,e,t,i,r,a){const s=n.createContext(1,e,t),l=[Qb(e,i,t)],c=[r];if(a.length%2!=0)throw new Xt(ut.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)l.push(Qb(e,a[v])),c.push(a[v+1]);const f=[],p=No.empty();for(let v=l.length-1;v>=0;--v)if(!zH(f,l[v])){const _=l[v];let x=c[v];x=Fr(x);const T=s.childContextForFieldPath(_);if(x instanceof _M)f.push(_);else{const S=bM(x,T);S!=null&&(f.push(_),p.set(_,S))}}const g=new nl(f);return new OH(p,g,s.fieldTransforms)}function bM(n,e){if(UH(n=Fr(n)))return _3("Unsupported field value:",e,n),kH(n,e);if(n instanceof v3)return(function(i,r){if(!DH(r.dataSource))throw r.createError(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,r){const a=[];let s=0;for(const l of i){let c=bM(l,r.childContextForArray(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}})(n,e)}return(function(i,r){if((i=Fr(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ece(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Yi.fromDate(i);return{timestampValue:pT(r.serializer,a)}}if(i instanceof Yi){const a=new Yi(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:pT(r.serializer,a)}}if(i instanceof Hc)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Gl)return{bytesValue:tH(r.serializer,i._byteString)};if(i instanceof la){const a=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(a))throw r.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:n3(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ku)return(function(s,l){const c=s instanceof ku?s.toArray():s;return{mapValue:{fields:{[P9]:{stringValue:N9},[uT]:{arrayValue:{values:c.map((p=>{if(typeof p!="number")throw l.createError("VectorValues must only contain numeric values.");return QD(l.serializer,p)}))}}}}}})(i,r);if(lH(i))return i._toProto(r.serializer);throw r.createError(`Unsupported field value: ${WD(i)}`)})(n,e)}function kH(n,e){const t={};return T9(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mp(n,((i,r)=>{const a=bM(r,e.childContextForField(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function UH(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Yi||n instanceof Hc||n instanceof Gl||n instanceof la||n instanceof v3||n instanceof ku||lH(n))}function _3(n,e,t){if(!UH(t)||!w9(t)){const i=WD(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function Qb(n,e,t){if((e=Fr(e))instanceof g3)return e._internalPath;if(typeof e=="string")return FH(n,e);throw yT("Field path arguments must be of type string or ",n,!1,void 0,t)}const xhe=new RegExp("[~\\*/\\[\\]]");function FH(n,e,t){if(e.search(xhe)>=0)throw yT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new g3(...e.split("."))._internalPath}catch{throw yT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function yT(n,e,t,i,r){const a=i&&!i.isEmpty(),s=r!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${i}`),s&&(c+=` in document ${r}`),c+=")"),new Xt(ut.INVALID_ARGUMENT,l+n+c)}function zH(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class She{convertValue(e,t="none"){switch(ap(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw hn(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return mp(e,((r,a)=>{i[r]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,r,a;const t=(a=(r=(i=e.fields)==null?void 0:i[uT].arrayValue)==null?void 0:r.values)==null?void 0:a.map((s=>Lr(s.doubleValue)));return new ku(t)}convertGeoPoint(e){return new Hc(Lr(e.latitude),Lr(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=oM(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp($b(e));default:return null}}convertTimestamp(e){const t=ip(e);return new Yi(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Xi.fromString(e);vi(oH(i),9688,{name:e});const r=new Xb(i.get(1),i.get(3)),a=new nn(i.popFirst(5));return r.isEqual(t)||ch(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BH extends She{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new la(this.firestore,null,t)}}const xz="@firebase/firestore",Sz="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wz(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const a of i)if(a in r&&typeof r[a]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VH{constructor(e,t,i,r,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new la(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new whe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Qb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class whe extends VH{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ehe(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Xt(ut.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function The(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class ib{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jm extends VH{constructor(e,t,i,r,a,s){super(e,t,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Qb("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(ut.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=jm._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}jm._jsonSchemaVersion="firestore/documentSnapshot/1.0",jm._jsonSchema={type:Xr("string",jm._jsonSchemaVersion),bundleSource:Xr("string","DocumentSnapshot"),bundleName:Xr("string"),bundle:Xr("string")};class Xw extends jm{data(e={}){return super.data(e)}}class hy{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ib(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Xw(this._firestore,this._userDataWriter,i.key,i,new ib(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Xt(ut.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map((l=>{const c=new Xw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ib(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((l=>a||l.type!==3)).map((l=>{const c=new Xw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ib(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,p=-1;return l.type!==0&&(f=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),p=s.indexOf(l.doc.key)),{type:Ahe(l.type),doc:c,oldIndex:f,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(ut.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=hy._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=GD.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Ahe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return hn(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hy._jsonSchemaVersion="firestore/querySnapshot/1.0",hy._jsonSchema={type:Xr("string",hy._jsonSchemaVersion),bundleSource:Xr("string","QuerySnapshot"),bundleName:Xr("string"),bundle:Xr("string")};function yw(n,e,t,...i){n=$d(n,la);const r=$d(n.firestore,ky),a=LH(r);let s;return s=typeof(e=Fr(e))=="string"||e instanceof g3?bhe(a,"updateDoc",n._key,e,t,i):_he(a,"updateDoc",n._key,e),b3(r,[s.toMutation(n._key,Lu.exists(!0))])}function Ez(n){return b3($d(n.firestore,ky),[new JD(n._key,Lu.none())])}function lR(n,e){const t=$d(n.firestore,ky),i=xm(n),r=The(n.converter,e),a=LH(n.firestore);return b3(t,[yhe(a,"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Lu.exists(!1))]).then((()=>i))}function uR(n,...e){var f,p,g;n=Fr(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||wz(e[i])||(t=e[i++]);const r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(wz(e[i])){const v=e[i];e[i]=(f=v.next)==null?void 0:f.bind(v),e[i+1]=(p=v.error)==null?void 0:p.bind(v),e[i+2]=(g=v.complete)==null?void 0:g.bind(v)}let a,s,l;if(n instanceof la)s=$d(n.firestore,ky),l=ZD(n._key.path),a={next:v=>{e[i]&&e[i](Mhe(s,n,v))},error:e[i+1],complete:e[i+2]};else{const v=$d(n,yM);s=$d(v.firestore,ky),l=v._query;const _=new BH(s);a={next:x=>{e[i]&&e[i](new hy(s,_,v,x))},error:e[i+1],complete:e[i+2]},Ehe(n._query)}const c=NH(s);return lhe(c,l,r,a)}function b3(n,e){const t=NH(n);return uhe(t,e)}function Mhe(n,e,t){const i=t.docs.get(e._key),r=new BH(n);return new jm(n,r,e._key,i,new ib(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){sue(bg),tg(new tp("firestore",((i,{instanceIdentifier:r,options:a})=>{const s=i.getProvider("app").getImmediate(),l=new ky(new uue(i.getProvider("auth-internal")),new hue(s,i.getProvider("app-check-internal")),Iue(s,r),s);return a={useFetchStreams:t,...a},l._setSettings(a),l}),"PUBLIC").setMultipleInstances(!0)),Bc(xz,Sz,e),Bc(xz,Sz,"esm2020")})();function jH(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Che=jH,HH=new Cx("auth","Firebase",jH());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=new BD("@firebase/auth");function Ihe(n,...e){_T.logLevel<=$n.WARN&&_T.warn(`Auth (${bg}): ${n}`,...e)}function Yw(n,...e){_T.logLevel<=$n.ERROR&&_T.error(`Auth (${bg}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(n,...e){throw S3(n,...e)}function Uu(n,...e){return S3(n,...e)}function x3(n,e,t){const i={...Che(),[e]:t};return new Cx("auth","Firebase",i).create(e,{appName:n.name})}function Hm(n){return x3(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rhe(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Qc(n,"argument-error"),x3(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function S3(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return HH.create(n,...e)}function mn(n,e,...t){if(!n)throw S3(e,...t)}function eh(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Yw(e),new Error(e)}function hh(n,e){n||eh(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function Phe(){return Tz()==="http:"||Tz()==="https:"}function Tz(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nhe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Phe()||Uoe()||"connection"in navigator)?navigator.onLine:!0}function Ohe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,t){this.shortDelay=e,this.longDelay=t,hh(t>e,"Short delay should be less than long delay!"),this.isMobile=Doe()||Foe()}get(){return Nhe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(n,e){hh(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GH{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;eh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;eh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;eh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dhe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lhe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],khe=new Lx(3e4,6e4);function E3(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function e0(n,e,t,i,r={}){return WH(n,r,async()=>{let a={},s={};i&&(e==="GET"?s=i:a={body:JSON.stringify(i)});const l=Ix({key:n.config.apiKey,...s}).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:c,...a};return koe()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&pp(n.emulatorConfig.host)&&(f.credentials="include"),GH.fetch()(await qH(n,n.config.apiHost,t,l),f)})}async function WH(n,e,t){n._canInitEmulator=!1;const i={...Dhe,...e};try{const r=new Fhe(n),a=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw _w(n,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const l=a.ok?s.errorMessage:s.error.message,[c,f]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw _w(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw _w(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw _w(n,"user-disabled",s);const p=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw x3(n,p,f);Qc(n,p)}}catch(r){if(r instanceof of)throw r;Qc(n,"network-request-failed",{message:String(r)})}}async function Uhe(n,e,t,i,r={}){const a=await e0(n,e,t,i,r);return"mfaPendingCredential"in a&&Qc(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function qH(n,e,t,i){const r=`${e}${t}?${i}`,a=n,s=a.config.emulator?w3(n.config,r):`${n.config.apiScheme}://${r}`;return Lhe.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}class Fhe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Uu(this.auth,"network-request-failed")),khe.get())})}}function _w(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=Uu(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zhe(n,e){return e0(n,"POST","/v1/accounts:delete",e)}async function bT(n,e){return e0(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Bhe(n,e=!1){const t=Fr(n),i=await t.getIdToken(e),r=T3(i);mn(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:r,token:i,authTime:Sb(cR(r.auth_time)),issuedAtTime:Sb(cR(r.iat)),expirationTime:Sb(cR(r.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function cR(n){return Number(n)*1e3}function T3(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Yw("JWT malformed, contained fewer than 3 sections"),null;try{const r=i9(t);return r?JSON.parse(r):(Yw("Failed to decode base64 JWT payload"),null)}catch(r){return Yw("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Az(n){const e=T3(n);return mn(e,"internal-error"),mn(typeof e.exp<"u","internal-error"),mn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jb(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof of&&Vhe(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function Vhe({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jhe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sb(this.lastLoginAt),this.creationTime=Sb(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xT(n){var g;const e=n.auth,t=await n.getIdToken(),i=await Jb(n,bT(e,{idToken:t}));mn(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const a=(g=r.providerUserInfo)!=null&&g.length?$H(r.providerUserInfo):[],s=Ghe(n.providerData,a),l=n.isAnonymous,c=!(n.email&&r.passwordHash)&&!(s!=null&&s.length),f=l?c:!1,p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new VN(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function Hhe(n){const e=Fr(n);await xT(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ghe(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function $H(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Whe(n,e){const t=await WH(n,{},async()=>{const i=Ix({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=n.config,s=await qH(n,r,"/v1/token",`key=${a}`),l=await n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:i};return n.emulatorConfig&&pp(n.emulatorConfig.host)&&(c.credentials="include"),GH.fetch()(s,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function qhe(n,e){return e0(n,"POST","/v2/accounts:revokeToken",E3(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){mn(e.idToken,"internal-error"),mn(typeof e.idToken<"u","internal-error"),mn(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Az(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){mn(e.length!==0,"internal-error");const t=Az(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(mn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:a}=await Whe(e,t);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:a}=t,s=new dy;return i&&(mn(typeof i=="string","internal-error",{appName:e}),s.refreshToken=i),r&&(mn(typeof r=="string","internal-error",{appName:e}),s.accessToken=r),a&&(mn(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dy,this.toJSON())}_performRefresh(){return eh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(n,e){mn(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ou{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new jhe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new VN(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Jb(this,this.stsTokenManager.getToken(this.auth,e));return mn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Bhe(this,e)}reload(){return Hhe(this)}_assign(e){this!==e&&(mn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ou({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){mn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await xT(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hl(this.auth.app))return Promise.reject(Hm(this.auth));const e=await this.getIdToken();return await Jb(this,zhe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,a=t.phoneNumber??void 0,s=t.photoURL??void 0,l=t.tenantId??void 0,c=t._redirectEventId??void 0,f=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:_,providerData:x,stsTokenManager:T}=t;mn(g&&T,e,"internal-error");const S=dy.fromJSON(this.name,T);mn(typeof g=="string",e,"internal-error"),Td(i,e.name),Td(r,e.name),mn(typeof v=="boolean",e,"internal-error"),mn(typeof _=="boolean",e,"internal-error"),Td(a,e.name),Td(s,e.name),Td(l,e.name),Td(c,e.name),Td(f,e.name),Td(p,e.name);const w=new Ou({uid:g,auth:e,email:r,emailVerified:v,displayName:i,isAnonymous:_,photoURL:s,phoneNumber:a,tenantId:l,stsTokenManager:S,createdAt:f,lastLoginAt:p});return x&&Array.isArray(x)&&(w.providerData=x.map(I=>({...I}))),c&&(w._redirectEventId=c),w}static async _fromIdTokenResponse(e,t,i=!1){const r=new dy;r.updateFromServerResponse(t);const a=new Ou({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await xT(a),a}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];mn(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?$H(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),l=new dy;l.updateFromIdToken(i);const c=new Ou({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:s}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new VN(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mz=new Map;function th(n){hh(n instanceof Function,"Expected a class definition");let e=Mz.get(n);return e?(hh(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Mz.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XH{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}XH.type="NONE";const Cz=XH;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(n,e,t){return`firebase:${n}:${e}:${t}`}class py{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=Kw(this.userKey,r.apiKey,a),this.fullPersistenceKey=Kw("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await bT(this.auth,{idToken:e}).catch(()=>{});return t?Ou._fromGetAccountInfoResponse(this.auth,t,e):null}return Ou._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new py(th(Cz),e,i);const r=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=r[0]||th(Cz);const s=Kw(i,e.config.apiKey,e.name);let l=null;for(const f of t)try{const p=await f._get(s);if(p){let g;if(typeof p=="string"){const v=await bT(e,{idToken:p}).catch(()=>{});if(!v)break;g=await Ou._fromGetAccountInfoResponse(e,v,p)}else g=Ou._fromJSON(e,p);f!==a&&(l=g),a=f;break}}catch{}const c=r.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new py(a,e,i):(a=c[0],l&&await a._set(s,l.toJSON()),await Promise.all(t.map(async f=>{if(f!==a)try{await f._remove(s)}catch{}})),new py(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iz(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QH(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YH(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eG(e))return"Blackberry";if(tG(e))return"Webos";if(KH(e))return"Safari";if((e.includes("chrome/")||ZH(e))&&!e.includes("edge/"))return"Chrome";if(JH(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function YH(n=Is()){return/firefox\//i.test(n)}function KH(n=Is()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZH(n=Is()){return/crios\//i.test(n)}function QH(n=Is()){return/iemobile/i.test(n)}function JH(n=Is()){return/android/i.test(n)}function eG(n=Is()){return/blackberry/i.test(n)}function tG(n=Is()){return/webos/i.test(n)}function A3(n=Is()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $he(n=Is()){var e;return A3(n)&&!!((e=window.navigator)!=null&&e.standalone)}function Xhe(){return zoe()&&document.documentMode===10}function nG(n=Is()){return A3(n)||JH(n)||tG(n)||eG(n)||/windows phone/i.test(n)||QH(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iG(n,e=[]){let t;switch(n){case"Browser":t=Iz(Is());break;case"Worker":t=`${Iz(Is())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${bg}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yhe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((s,l)=>{try{const c=e(a);s(c)}catch(c){l(c)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Khe(n,e={}){return e0(n,"GET","/v2/passwordPolicy",E3(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zhe=6;class Qhe{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Zhe,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jhe{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rz(this),this.idTokenSubscription=new Rz(this),this.beforeStateQueue=new Yhe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HH,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=th(t)),this._initializationPromise=this.queue(async()=>{var i,r,a;if(!this._deleted&&(this.persistenceManager=await py.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await bT(this,{idToken:e}),i=await Ou._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Hl(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(a=this.redirectUser)==null?void 0:a._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===l)&&(c!=null&&c.user)&&(i=c.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return mn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xT(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ohe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hl(this.app))return Promise.reject(Hm(this));const t=e?Fr(e):null;return t&&mn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&mn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hl(this.app)?Promise.reject(Hm(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hl(this.app)?Promise.reject(Hm(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(th(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Khe(this),t=new Qhe(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Cx("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await qhe(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&th(e)||this._popupRedirectResolver;mn(t,this,"argument-error"),this.redirectPersistenceManager=await py.create(this,[th(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let s=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(mn(l,this,"internal-error"),l.then(()=>{s||a(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,i,r);return()=>{s=!0,c()}}else{const c=e.addObserver(t);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return mn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iG(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Hl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&Ihe(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function xM(n){return Fr(n)}class Rz{constructor(e){this.auth=e,this.observer=null,this.addObserver=$oe(t=>this.observer=t)}get next(){return mn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M3={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ede(n){M3=n}function tde(n){return M3.loadJS(n)}function nde(){return M3.gapiScript}function ide(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rde(n,e){const t=rM(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),a=t.getOptions();if(eg(a,e??{}))return r;Qc(r,"already-initialized")}return t.initialize({options:e})}function ade(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(th);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function sde(n,e,t){const i=xM(n);mn(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,a=rG(e),{host:s,port:l}=ode(e),c=l===null?"":`:${l}`,f={url:`${a}//${s}${c}/`},p=Object.freeze({host:s,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){mn(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),mn(eg(f,i.config.emulator)&&eg(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,pp(s)?(FD(`${a}//${s}${c}`),zD("Auth",!0)):lde()}function rG(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ode(n){const e=rG(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:Pz(i.substr(a.length+1))}}else{const[a,s]=i.split(":");return{host:a,port:Pz(s)}}}function Pz(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function lde(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aG{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return eh("not implemented")}_getIdTokenResponse(e){return eh("not implemented")}_linkToIdToken(e,t){return eh("not implemented")}_getReauthenticationResolver(e){return eh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function my(n,e){return Uhe(n,"POST","/v1/accounts:signInWithIdp",E3(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ude="http://localhost";class rg extends aG{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new rg(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qc("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...a}=t;if(!i||!r)return null;const s=new rg(i,r);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return my(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,my(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,my(e,t)}buildRequest(){const e={requestUri:ude,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ix(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx extends C3{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd extends kx{constructor(){super("facebook.com")}static credential(e){return rg._fromParams({providerId:Nd.PROVIDER_ID,signInMethod:Nd.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nd.credentialFromTaggedObject(e)}static credentialFromError(e){return Nd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nd.credential(e.oauthAccessToken)}catch{return null}}}Nd.FACEBOOK_SIGN_IN_METHOD="facebook.com";Nd.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf extends kx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return rg._fromParams({providerId:Qf.PROVIDER_ID,signInMethod:Qf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qf.credentialFromTaggedObject(e)}static credentialFromError(e){return Qf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Qf.credential(t,i)}catch{return null}}}Qf.GOOGLE_SIGN_IN_METHOD="google.com";Qf.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od extends kx{constructor(){super("github.com")}static credential(e){return rg._fromParams({providerId:Od.PROVIDER_ID,signInMethod:Od.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Od.credentialFromTaggedObject(e)}static credentialFromError(e){return Od.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Od.credential(e.oauthAccessToken)}catch{return null}}}Od.GITHUB_SIGN_IN_METHOD="github.com";Od.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends kx{constructor(){super("twitter.com")}static credential(e,t){return rg._fromParams({providerId:Dd.PROVIDER_ID,signInMethod:Dd.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Dd.credentialFromTaggedObject(e)}static credentialFromError(e){return Dd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Dd.credential(t,i)}catch{return null}}}Dd.TWITTER_SIGN_IN_METHOD="twitter.com";Dd.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const a=await Ou._fromIdTokenResponse(e,i,r),s=Nz(i);return new Uy({user:a,providerId:s,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=Nz(i);return new Uy({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function Nz(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST extends of{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,ST.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new ST(e,t,i,r)}}function sG(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?ST._fromErrorAndOperation(n,a,e,i):a})}async function cde(n,e,t=!1){const i=await Jb(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Uy._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fde(n,e,t=!1){const{auth:i}=n;if(Hl(i.app))return Promise.reject(Hm(i));const r="reauthenticate";try{const a=await Jb(n,sG(i,r,e,n),t);mn(a.idToken,i,"internal-error");const s=T3(a.idToken);mn(s,i,"internal-error");const{sub:l}=s;return mn(n.uid===l,i,"user-mismatch"),Uy._forOperation(n,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Qc(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hde(n,e,t=!1){if(Hl(n.app))return Promise.reject(Hm(n));const i="signIn",r=await sG(n,i,e),a=await Uy._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(a.user),a}function dde(n,e,t,i){return Fr(n).onIdTokenChanged(e,t,i)}function pde(n,e,t){return Fr(n).beforeAuthStateChanged(e,t)}function mde(n,e,t,i){return Fr(n).onAuthStateChanged(e,t,i)}function gde(n){return Fr(n).signOut()}const wT="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oG{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(wT,"1"),this.storage.removeItem(wT),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vde=1e3,yde=10;class lG extends oG{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nG(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,l,c)=>{this.notifyListeners(s,c)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const s=this.storage.getItem(i);!t&&this.localCache[i]===s||this.notifyListeners(i,s)},a=this.storage.getItem(i);Xhe()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,yde):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},vde)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}lG.type="LOCAL";const _de=lG;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uG extends oG{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}uG.type="SESSION";const cG=uG;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bde(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new SM(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:a}=t.data,s=this.handlersMap[r];if(!(s!=null&&s.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(s).map(async f=>f(t.origin,a)),c=await bde(l);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}SM.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xde{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,s;return new Promise((l,c)=>{const f=I3("",20);r.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},i);s={messageChannel:r,onMessage(g){const v=g;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(v.data.response);break;default:clearTimeout(p),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(){return window}function Sde(n){Gc().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fG(){return typeof Gc().WorkerGlobalScope<"u"&&typeof Gc().importScripts=="function"}async function wde(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ede(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Tde(){return fG()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hG="firebaseLocalStorageDb",Ade=1,ET="firebaseLocalStorage",dG="fbase_key";class Ux{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function wM(n,e){return n.transaction([ET],e?"readwrite":"readonly").objectStore(ET)}function Mde(){const n=indexedDB.deleteDatabase(hG);return new Ux(n).toPromise()}function jN(){const n=indexedDB.open(hG,Ade);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(ET,{keyPath:dG})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(ET)?e(i):(i.close(),await Mde(),e(await jN()))})})}async function Oz(n,e,t){const i=wM(n,!0).put({[dG]:e,value:t});return new Ux(i).toPromise()}async function Cde(n,e){const t=wM(n,!1).get(e),i=await new Ux(t).toPromise();return i===void 0?null:i.value}function Dz(n,e){const t=wM(n,!0).delete(e);return new Ux(t).toPromise()}const Ide=800,Rde=3;class pG{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jN(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Rde)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fG()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=SM._getInstance(Tde()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await wde(),!this.activeServiceWorker)return;this.sender=new xde(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ede()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jN();return await Oz(e,wT,"1"),await Dz(e,wT),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Oz(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Cde(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Dz(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=wM(r,!1).getAll();return new Ux(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ide)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pG.type="LOCAL";const Pde=pG;new Lx(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mG(n,e){return e?th(e):(mn(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3 extends aG{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return my(e,this._buildIdpRequest())}_linkToIdToken(e,t){return my(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return my(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Nde(n){return hde(n.auth,new R3(n),n.bypassAuthState)}function Ode(n){const{auth:e,user:t}=n;return mn(t,e,"internal-error"),fde(t,new R3(n),n.bypassAuthState)}async function Dde(n){const{auth:e,user:t}=n;return mn(t,e,"internal-error"),cde(t,new R3(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gG{constructor(e,t,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:a,error:s,type:l}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Nde;case"linkViaPopup":case"linkViaRedirect":return Dde;case"reauthViaPopup":case"reauthViaRedirect":return Ode;default:Qc(this.auth,"internal-error")}}resolve(e){hh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lde=new Lx(2e3,1e4);async function kde(n,e,t){if(Hl(n.app))return Promise.reject(Uu(n,"operation-not-supported-in-this-environment"));const i=xM(n);Rhe(n,e,C3);const r=mG(i,t);return new Om(i,"signInViaPopup",e,r).executeNotNull()}class Om extends gG{constructor(e,t,i,r,a){super(e,t,r,a),this.provider=i,this.authWindow=null,this.pollId=null,Om.currentPopupAction&&Om.currentPopupAction.cancel(),Om.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return mn(e,this.auth,"internal-error"),e}async onExecution(){hh(this.filter.length===1,"Popup operations only handle one event");const e=I3();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Uu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Uu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Om.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Uu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Lde.get())};e()}}Om.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ude="pendingRedirect",Zw=new Map;class Fde extends gG{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Zw.get(this.auth._key());if(!e){try{const i=await zde(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Zw.set(this.auth._key(),e)}return this.bypassAuthState||Zw.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zde(n,e){const t=jde(e),i=Vde(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function Bde(n,e){Zw.set(n._key(),e)}function Vde(n){return th(n._redirectPersistence)}function jde(n){return Kw(Ude,n.config.apiKey,n.name)}async function Hde(n,e,t=!1){if(Hl(n.app))return Promise.reject(Hm(n));const i=xM(n),r=mG(i,e),s=await new Fde(i,r,t).execute();return s&&!t&&(delete s.user._redirectEventId,await i._persistUserIfCurrent(s.user),await i._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gde=600*1e3;class Wde{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qde(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!vG(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Uu(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Gde&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lz(e))}saveEventToCache(e){this.cachedEventUids.add(Lz(e)),this.lastProcessedEventTime=Date.now()}}function Lz(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function vG({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qde(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vG(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $de(n,e={}){return e0(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xde=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yde=/^https?/;async function Kde(n){if(n.config.emulator)return;const{authorizedDomains:e}=await $de(n);for(const t of e)try{if(Zde(t))return}catch{}Qc(n,"unauthorized-domain")}function Zde(n){const e=BN(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return s.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===i}if(!Yde.test(t))return!1;if(Xde.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qde=new Lx(3e4,6e4);function kz(){const n=Gc().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Jde(n){return new Promise((e,t)=>{var r,a,s;function i(){kz(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kz(),t(Uu(n,"network-request-failed"))},timeout:Qde.get()})}if((a=(r=Gc().gapi)==null?void 0:r.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((s=Gc().gapi)!=null&&s.load)i();else{const l=ide("iframefcb");return Gc()[l]=()=>{gapi.load?i():t(Uu(n,"network-request-failed"))},tde(`${nde()}?onload=${l}`).catch(c=>t(c))}}).catch(e=>{throw Qw=null,e})}let Qw=null;function epe(n){return Qw=Qw||Jde(n),Qw}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tpe=new Lx(5e3,15e3),npe="__/auth/iframe",ipe="emulator/auth/iframe",rpe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ape=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function spe(n){const e=n.config;mn(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?w3(e,ipe):`https://${n.config.authDomain}/${npe}`,i={apiKey:e.apiKey,appName:n.name,v:bg},r=ape.get(n.config.apiHost);r&&(i.eid=r);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Ix(i).slice(1)}`}async function ope(n){const e=await epe(n),t=Gc().gapi;return mn(t,n,"internal-error"),e.open({where:document.body,url:spe(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rpe,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const s=Uu(n,"network-request-failed"),l=Gc().setTimeout(()=>{a(s)},tpe.get());function c(){Gc().clearTimeout(l),r(i)}i.ping(c).then(c,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lpe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},upe=500,cpe=600,fpe="_blank",hpe="http://localhost";class Uz{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dpe(n,e,t,i=upe,r=cpe){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const c={...lpe,width:i.toString(),height:r.toString(),top:a,left:s},f=Is().toLowerCase();t&&(l=ZH(f)?fpe:t),YH(f)&&(e=e||hpe,c.scrollbars="yes");const p=Object.entries(c).reduce((v,[_,x])=>`${v}${_}=${x},`,"");if($he(f)&&l!=="_self")return ppe(e||"",l),new Uz(null);const g=window.open(e||"",l,p);mn(g,n,"popup-blocked");try{g.focus()}catch{}return new Uz(g)}function ppe(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mpe="__/auth/handler",gpe="emulator/auth/handler",vpe=encodeURIComponent("fac");async function Fz(n,e,t,i,r,a){mn(n.config.authDomain,n,"auth-domain-config-required"),mn(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:bg,eventId:r};if(e instanceof C3){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",qoe(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))s[p]=g}if(e instanceof kx){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(s.scopes=p.join(","))}n.tenantId&&(s.tid=n.tenantId);const l=s;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await n._getAppCheckToken(),f=c?`#${vpe}=${encodeURIComponent(c)}`:"";return`${ype(n)}?${Ix(l).slice(1)}${f}`}function ype({config:n}){return n.emulator?w3(n,gpe):`https://${n.authDomain}/${mpe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="webStorageSupport";class _pe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cG,this._completeRedirectFn=Hde,this._overrideRedirectResult=Bde}async _openPopup(e,t,i,r){var s;hh((s=this.eventManagers[e._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await Fz(e,t,i,BN(),r);return dpe(e,a,I3())}async _openRedirect(e,t,i,r){await this._originValidation(e);const a=await Fz(e,t,i,BN(),r);return Sde(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:a}=this.eventManagers[t];return r?Promise.resolve(r):(hh(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await ope(e),i=new Wde(e);return t.register("authEvent",r=>(mn(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(fR,{type:fR},r=>{var s;const a=(s=r==null?void 0:r[0])==null?void 0:s[fR];a!==void 0&&t(!!a),Qc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Kde(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nG()||KH()||A3()}}const bpe=_pe;var zz="@firebase/auth",Bz="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xpe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){mn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Spe(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wpe(n){tg(new tp("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:l}=i.options;mn(s&&!s.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:s,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iG(n)},f=new Jhe(i,r,a,c);return ade(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),tg(new tp("auth-internal",e=>{const t=xM(e.getProvider("auth").getImmediate());return(i=>new xpe(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bc(zz,Bz,Spe(n)),Bc(zz,Bz,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Epe=300,Tpe=o9("authIdTokenMaxAge")||Epe;let Vz=null;const Ape=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Tpe)return;const r=t==null?void 0:t.token;Vz!==r&&(Vz=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Mpe(n=jD()){const e=rM(n,"auth");if(e.isInitialized())return e.getImmediate();const t=rde(n,{popupRedirectResolver:bpe,persistence:[Pde,_de,cG]}),i=o9("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const s=Ape(a.toString());pde(t,s,()=>s(t.currentUser)),dde(t,l=>s(l))}}const r=r9("auth");return r&&sde(t,`http://${r}`),t}function Cpe(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}ede({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const a=Uu("internal-error");a.customData=r,t(a)},i.type="text/javascript",i.charset="UTF-8",Cpe().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wpe("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yG="firebasestorage.googleapis.com",_G="storageBucket",Ipe=120*1e3,Rpe=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends of{constructor(e,t,i=0){super(hR(e),`Firebase Storage: ${t} (${hR(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return hR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Tr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Tr||(Tr={}));function hR(n){return"storage/"+n}function P3(){const n="An unknown error occurred, please check the error payload for server response.";return new Mr(Tr.UNKNOWN,n)}function Ppe(n){return new Mr(Tr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function Npe(n){return new Mr(Tr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Ope(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Mr(Tr.UNAUTHENTICATED,n)}function Dpe(){return new Mr(Tr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Lpe(n){return new Mr(Tr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function kpe(){return new Mr(Tr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Upe(){return new Mr(Tr.CANCELED,"User canceled the upload/download.")}function Fpe(n){return new Mr(Tr.INVALID_URL,"Invalid URL '"+n+"'.")}function zpe(n){return new Mr(Tr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Bpe(){return new Mr(Tr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+_G+"' property when initializing the app?")}function Vpe(){return new Mr(Tr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function jpe(){return new Mr(Tr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Hpe(n){return new Mr(Tr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function HN(n){return new Mr(Tr.INVALID_ARGUMENT,n)}function bG(){return new Mr(Tr.APP_DELETED,"The Firebase app was deleted.")}function Gpe(n){return new Mr(Tr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wb(n,e){return new Mr(Tr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function V_(n){throw new Mr(Tr.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=il.makeFromUrl(e,t)}catch{return new il(e,"")}if(i.path==="")return i;throw zpe(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)";function a(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const s="(/(.*))?$",l=new RegExp("^gs://"+r+s,"i"),c={bucket:1,path:3};function f(D){D.path_=decodeURIComponent(D.path)}const p="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",_=new RegExp(`^https?://${g}/${p}/b/${r}/o${v}`,"i"),x={bucket:1,path:3},T=t===yG?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",w=new RegExp(`^https?://${T}/${r}/${S}`,"i"),R=[{regex:l,indices:c,postModify:a},{regex:_,indices:x,postModify:f},{regex:w,indices:{bucket:1,path:2},postModify:f}];for(let D=0;D<R.length;D++){const B=R[D],z=B.regex.exec(e);if(z){const k=z[B.indices.bucket];let F=z[B.indices.path];F||(F=""),i=new il(k,F),B.postModify(i);break}}if(i==null)throw Fpe(e);return i}}class Wpe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qpe(n,e,t){let i=1,r=null,a=null,s=!1,l=0;function c(){return l===2}let f=!1;function p(...S){f||(f=!0,e.apply(null,S))}function g(S){r=setTimeout(()=>{r=null,n(_,c())},S)}function v(){a&&clearTimeout(a)}function _(S,...w){if(f){v();return}if(S){v(),p.call(null,S,...w);return}if(c()||s){v(),p.call(null,S,...w);return}i<64&&(i*=2);let R;l===1?(l=2,R=0):R=(i+Math.random())*1e3,g(R)}let x=!1;function T(S){x||(x=!0,v(),!f&&(r!==null?(S||(l=2),clearTimeout(r),g(0)):S||(l=1)))}return g(0),a=setTimeout(()=>{s=!0,T(!0)},t),T}function $pe(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xpe(n){return n!==void 0}function Ype(n){return typeof n=="object"&&!Array.isArray(n)}function N3(n){return typeof n=="string"||n instanceof String}function jz(n){return O3()&&n instanceof Blob}function O3(){return typeof Blob<"u"}function Hz(n,e,t,i){if(i<e)throw HN(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw HN(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D3(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function xG(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const r=e(i)+"="+e(n[i]);t=t+r+"&"}return t=t.slice(0,-1),t}var Gm;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Gm||(Gm={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kpe(n,e){const t=n>=500&&n<600,r=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||r||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zpe{constructor(e,t,i,r,a,s,l,c,f,p,g,v=!0,_=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=a,this.additionalRetryCodes_=s,this.callback_=l,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=g,this.retry=v,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,T)=>{this.resolve_=x,this.reject_=T,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new bw(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const s=l=>{const c=l.loaded,f=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&a.addUploadProgressListener(s),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(s),this.pendingConnection_=null;const l=a.getErrorCode()===Gm.NO_ERROR,c=a.getStatus();if(!l||Kpe(c,this.additionalRetryCodes_)&&this.retry){const p=a.getErrorCode()===Gm.ABORT;i(!1,new bw(!1,null,p));return}const f=this.successCodes_.indexOf(c)!==-1;i(!0,new bw(f,a))})},t=(i,r)=>{const a=this.resolve_,s=this.reject_,l=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());Xpe(c)?a(c):a()}catch(c){s(c)}else if(l!==null){const c=P3();c.serverResponse=l.getErrorText(),this.errorCallback_?s(this.errorCallback_(l,c)):s(c)}else if(r.canceled){const c=this.appDelete_?bG():Upe();s(c)}else{const c=kpe();s(c)}};this.canceled_?t(!1,new bw(!1,null,!0)):this.backoffId_=qpe(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$pe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class bw{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function Qpe(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Jpe(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function eme(n,e){e&&(n["X-Firebase-GMPID"]=e)}function tme(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function nme(n,e,t,i,r,a,s=!0,l=!1){const c=xG(n.urlParams),f=n.url+c,p=Object.assign({},n.headers);return eme(p,e),Qpe(p,t),Jpe(p,a),tme(p,i),new Zpe(f,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ime(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function rme(...n){const e=ime();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(O3())return new Blob(n);throw new Mr(Tr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ame(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sme(n){if(typeof atob>"u")throw Hpe("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class dR{constructor(e,t){this.data=e,this.contentType=t||null}}function ome(n,e){switch(n){case kc.RAW:return new dR(SG(e));case kc.BASE64:case kc.BASE64URL:return new dR(wG(n,e));case kc.DATA_URL:return new dR(ume(e),cme(e))}throw P3()}function SG(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=i,s=n.charCodeAt(++t);i=65536|(a&1023)<<10|s&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function lme(n){let e;try{e=decodeURIComponent(n)}catch{throw wb(kc.DATA_URL,"Malformed data URL.")}return SG(e)}function wG(n,e){switch(n){case kc.BASE64:{const r=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(r||a)throw wb(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case kc.BASE64URL:{const r=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(r||a)throw wb(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=sme(e)}catch(r){throw r.message.includes("polyfill")?r:wb(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class EG{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw wb(kc.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=fme(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function ume(n){const e=new EG(n);return e.base64?wG(kc.BASE64,e.rest):lme(e.rest)}function cme(n){return new EG(n).contentType}function fme(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,t){let i=0,r="";jz(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(jz(this.data_)){const i=this.data_,r=ame(i,e,t);return r===null?null:new Ld(r)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Ld(i,!0)}}static getBlob(...e){if(O3()){const t=e.map(i=>i instanceof Ld?i.data_:i);return new Ld(rme.apply(null,t))}else{const t=e.map(s=>N3(s)?ome(kc.RAW,s).data:s.data_);let i=0;t.forEach(s=>{i+=s.byteLength});const r=new Uint8Array(i);let a=0;return t.forEach(s=>{for(let l=0;l<s.length;l++)r[a++]=s[l]}),new Ld(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TG(n){let e;try{e=JSON.parse(n)}catch{return null}return Ype(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hme(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function dme(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function AG(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pme(n,e){return e}class qs{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||pme}}let xw=null;function mme(n){return!N3(n)||n.length<2?n:AG(n)}function MG(){if(xw)return xw;const n=[];n.push(new qs("bucket")),n.push(new qs("generation")),n.push(new qs("metageneration")),n.push(new qs("name","fullPath",!0));function e(a,s){return mme(s)}const t=new qs("name");t.xform=e,n.push(t);function i(a,s){return s!==void 0?Number(s):s}const r=new qs("size");return r.xform=i,n.push(r),n.push(new qs("timeCreated")),n.push(new qs("updated")),n.push(new qs("md5Hash",null,!0)),n.push(new qs("cacheControl",null,!0)),n.push(new qs("contentDisposition",null,!0)),n.push(new qs("contentEncoding",null,!0)),n.push(new qs("contentLanguage",null,!0)),n.push(new qs("contentType",null,!0)),n.push(new qs("metadata","customMetadata",!0)),xw=n,xw}function gme(n,e){function t(){const i=n.bucket,r=n.fullPath,a=new il(i,r);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function vme(n,e,t){const i={};i.type="file";const r=t.length;for(let a=0;a<r;a++){const s=t[a];i[s.local]=s.xform(i,e[s.server])}return gme(i,n),i}function CG(n,e,t){const i=TG(e);return i===null?null:vme(n,i,t)}function yme(n,e,t,i){const r=TG(e);if(r===null||!N3(r.downloadTokens))return null;const a=r.downloadTokens;if(a.length===0)return null;const s=encodeURIComponent;return a.split(",").map(f=>{const p=n.bucket,g=n.fullPath,v="/b/"+s(p)+"/o/"+s(g),_=D3(v,t,i),x=xG({alt:"media",token:f});return _+x})[0]}function _me(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const a=e[r];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class IG{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RG(n){if(!n)throw P3()}function bme(n,e){function t(i,r){const a=CG(n,r,e);return RG(a!==null),a}return t}function xme(n,e){function t(i,r){const a=CG(n,r,e);return RG(a!==null),yme(a,r,n.host,n._protocol)}return t}function PG(n){function e(t,i){let r;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?r=Dpe():r=Ope():t.getStatus()===402?r=Npe(n.bucket):t.getStatus()===403?r=Lpe(n.path):r=i,r.status=t.getStatus(),r.serverResponse=i.serverResponse,r}return e}function Sme(n){const e=PG(n);function t(i,r){let a=e(i,r);return i.getStatus()===404&&(a=Ppe(n.path)),a.serverResponse=r.serverResponse,a}return t}function wme(n,e,t){const i=e.fullServerUrl(),r=D3(i,n.host,n._protocol),a="GET",s=n.maxOperationRetryTime,l=new IG(r,a,xme(n,t),s);return l.errorHandler=Sme(e),l}function Eme(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function Tme(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=Eme(null,e)),i}function Ame(n,e,t,i,r){const a=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function l(){let R="";for(let D=0;D<2;D++)R=R+Math.random().toString().slice(2);return R}const c=l();s["Content-Type"]="multipart/related; boundary="+c;const f=Tme(e,i,r),p=_me(f,t),g="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+c+`\r
Content-Type: `+f.contentType+`\r
\r
`,v=`\r
--`+c+"--",_=Ld.getBlob(g,i,v);if(_===null)throw Vpe();const x={name:f.fullPath},T=D3(a,n.host,n._protocol),S="POST",w=n.maxUploadRetryTime,I=new IG(T,S,bme(n,t),w);return I.urlParams=x,I.headers=s,I.body=_.uploadData(),I.errorHandler=PG(e),I}class Mme{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Gm.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Gm.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Gm.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r,a){if(this.sent_)throw V_("cannot .send() more than once");if(pp(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const s in a)a.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,a[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw V_("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw V_("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw V_("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw V_("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Cme extends Mme{initXhr(){this.xhr_.responseType="text"}}function NG(){return new Cme}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,t){this._service=e,t instanceof il?this._location=t:this._location=il.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ag(e,t)}get root(){const e=new il(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return AG(this._location.path)}get storage(){return this._service}get parent(){const e=hme(this._location.path);if(e===null)return null;const t=new il(this._location.bucket,e);return new ag(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Gpe(e)}}function Ime(n,e,t){n._throwIfRoot("uploadBytes");const i=Ame(n.storage,n._location,MG(),new Ld(e,!0),t);return n.storage.makeRequestWithTokens(i,NG).then(r=>({metadata:r,ref:n}))}function Rme(n){n._throwIfRoot("getDownloadURL");const e=wme(n.storage,n._location,MG());return n.storage.makeRequestWithTokens(e,NG).then(t=>{if(t===null)throw jpe();return t})}function Pme(n,e){const t=dme(n._location.path,e),i=new il(n._location.bucket,t);return new ag(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nme(n){return/^[A-Za-z]+:\/\//.test(n)}function Ome(n,e){return new ag(n,e)}function OG(n,e){if(n instanceof L3){const t=n;if(t._bucket==null)throw Bpe();const i=new ag(t,t._bucket);return e!=null?OG(i,e):i}else return e!==void 0?Pme(n,e):n}function Dme(n,e){if(e&&Nme(e)){if(n instanceof L3)return Ome(n,e);throw HN("To use ref(service, url), the first argument must be a Storage instance.")}else return OG(n,e)}function Gz(n,e){const t=e==null?void 0:e[_G];return t==null?null:il.makeFromBucketSpec(t,n)}function Lme(n,e,t,i={}){n.host=`${e}:${t}`;const r=pp(e);r&&(FD(`https://${n.host}/b`),zD("Storage",!0)),n._isUsingEmulator=!0,n._protocol=r?"https":"http";const{mockUserToken:a}=i;a&&(n._overrideAuthToken=typeof a=="string"?a:l9(a,n.app.options.projectId))}class L3{constructor(e,t,i,r,a,s=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=a,this._isUsingEmulator=s,this._bucket=null,this._host=yG,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Ipe,this._maxUploadRetryTime=Rpe,this._requests=new Set,r!=null?this._bucket=il.makeFromBucketSpec(r,this._host):this._bucket=Gz(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=il.makeFromBucketSpec(this._url,e):this._bucket=Gz(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Hz("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Hz("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Hl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ag(this,e)}_makeRequest(e,t,i,r,a=!0){if(this._deleted)return new Wpe(bG());{const s=nme(e,this._appId,i,r,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,r).getPromise()}}const Wz="@firebase/storage",qz="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DG="storage";function kme(n,e,t){return n=Fr(n),Ime(n,e,t)}function Ume(n){return n=Fr(n),Rme(n)}function Fme(n,e){return n=Fr(n),Dme(n,e)}function zme(n=jD(),e){n=Fr(n);const i=rM(n,DG).getImmediate({identifier:e}),r=a9("storage");return r&&Bme(i,...r),i}function Bme(n,e,t,i={}){Lme(n,e,t,i)}function Vme(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new L3(t,i,r,e,bg)}function jme(){tg(new tp(DG,Vme,"PUBLIC").setMultipleInstances(!0)),Bc(Wz,qz,""),Bc(Wz,qz,"esm2020")}jme();const Hme={apiKey:"AIzaSyCI9AH2vtxc9IhHdQBzA_5QPJDF5p-OTUE",authDomain:"tunas-craft.firebaseapp.com",projectId:"tunas-craft",storageBucket:"tunas-craft.firebasestorage.app",messagingSenderId:"805844799800",appId:"1:805844799800:web:8c3332ee01c3c4f9c1f1cd",measurementId:"G-BMF86Q9D45"},k3=f9(Hme),$f=dhe(k3),pR=Mpe(k3),Gme=zme(k3),LG=H.createContext(),EM=()=>H.useContext(LG),Wme=({children:n})=>{const[e,t]=H.useState([]),[i,r]=H.useState([]),[a,s]=H.useState([]),[l,c]=H.useState(null),[f,p]=H.useState(!0),g=oR($f,"clients"),v=oR($f,"orders"),_=oR($f,"leads");H.useEffect(()=>{const L=mde(pR,V=>{if(c(V),p(!1),V){const W=uR(g,le=>{t(le.docs.map(ee=>({...ee.data(),id:ee.id})))}),q=uR(v,le=>{r(le.docs.map(ee=>({...ee.data(),id:ee.id})))}),ue=uR(_,le=>{s(le.docs.map(ee=>({...ee.data(),id:ee.id})))});return()=>{W(),q(),ue()}}else t([]),r([]),s([])});return()=>L()},[]);const x=async()=>{const L=new Qf;try{await kde(pR,L)}catch(V){console.error("Login failed",V),V.code==="auth/unauthorized-domain"?alert("Error: El dominio no est autorizado. Ve a Firebase Console -> Authentication -> Settings -> Authorized Domains y agrega 'tunascraft.com'."):alert("Error al iniciar sesin: "+V.message)}},T=async()=>{try{await gde(pR)}catch(L){console.error("Logout failed",L)}},S=async L=>{try{const V={...L,joinedAt:new Date().toISOString()},W=await lR(g,V);return{...V,id:W.id}}catch(V){throw console.error("Error adding client:",V),alert(`Error guardando cliente: ${V.code} - ${V.message}`),V}},w=async(L,V)=>{const W=xm($f,"clients",L);await yw(W,V)},I=async L=>{try{const V=xm($f,"clients",L);await Ez(V)}catch(V){console.error("Error deleting client:",V),alert(`Error al eliminar cliente: ${V.code} - ${V.message}`)}},R=async L=>{let V=parseFloat(L.total);const W=e.find(le=>le.id===L.clientId);W&&(W.type==="mayorista"&&(V*=.9),W.type==="distribuidor"&&(V*=.75));const q={...L,total:V.toFixed(2),remaining:(V-(L.advance||0)).toFixed(2),date:new Date().toLocaleDateString("es-MX"),status:L.status||"pedido"},ue=await lR(v,q);return{...q,id:ue.id}},D=async(L,V)=>{const W=xm($f,"orders",L);await yw(W,{status:V})},B=async(L,V)=>{const W=xm($f,"orders",L);await yw(W,V)};H.useEffect(()=>{window.updateOrderContext=B},[i]);const z=async L=>{try{const V=xm($f,"orders",L);await Ez(V)}catch(V){console.error("Error deleting order:",V),alert(`Error al eliminar pedido: ${V.code} - ${V.message}`)}},k=async L=>{const V={...L,date:new Date().toLocaleDateString("es-MX"),status:"Nuevo"},W=await lR(_,V);return{...V,id:W.id}},F=async(L,V)=>{const W=xm($f,"leads",L);await yw(W,{status:V})},P=async L=>{console.warn("Import not fully supported in Firebase version yet.")};return O.jsx(LG.Provider,{value:{clients:e,orders:i,leads:a,user:l,loadingAuth:f,login:x,logout:T,addClient:S,updateClient:w,deleteClient:I,addOrder:R,updateOrderStatus:D,updateOrder:B,deleteOrder:z,addLead:k,updateLeadStatus:F,importDatabase:P},children:n})};function kG(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=kG(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function Zi(){for(var n,e,t=0,i="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=kG(n))&&(i&&(i+=" "),i+=e);return i}var qme=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function U3(n){if(typeof n!="string")return!1;var e=qme;return e.includes(n)}var $me=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Xme=new Set($me);function UG(n){return typeof n!="string"?!1:Xme.has(n)}function FG(n){return typeof n=="string"&&n.startsWith("data-")}function zu(n){if(typeof n!="object"||n===null)return{};var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(UG(t)||FG(t))&&(e[t]=n[t]);return e}function TM(n){if(n==null)return null;if(H.isValidElement(n)&&typeof n.props=="object"&&n.props!==null){var e=n.props;return zu(e)}return typeof n=="object"&&!Array.isArray(n)?zu(n):null}function Kl(n){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(UG(t)||FG(t)||U3(t))&&(e[t]=n[t]);return e}function Yme(n){return n==null?null:H.isValidElement(n)?Kl(n.props):typeof n=="object"&&!Array.isArray(n)?Kl(n):null}var Kme=["children","width","height","viewBox","className","style","title","desc"];function GN(){return GN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},GN.apply(null,arguments)}function Zme(n,e){if(n==null)return{};var t,i,r=Qme(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function Qme(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var zG=H.forwardRef((n,e)=>{var{children:t,width:i,height:r,viewBox:a,className:s,style:l,title:c,desc:f}=n,p=Zme(n,Kme),g=a||{width:i,height:r,x:0,y:0},v=Zi("recharts-surface",s);return H.createElement("svg",GN({},Kl(p),{className:v,width:i,height:r,style:l,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:e}),H.createElement("title",null,c),H.createElement("desc",null,f),t)}),Jme=["children","className"];function WN(){return WN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},WN.apply(null,arguments)}function ege(n,e){if(n==null)return{};var t,i,r=tge(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function tge(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var Jc=H.forwardRef((n,e)=>{var{children:t,className:i}=n,r=ege(n,Jme),a=Zi("recharts-layer",i);return H.createElement("g",WN({className:a},Kl(r),{ref:e}),t)}),nge=H.createContext(null);function Sr(n){return function(){return n}}const qN=Math.PI,$N=2*qN,Sm=1e-6,ige=$N-Sm;function BG(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function rge(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return BG;const t=10**e;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*t)/t+i[r]}}class age{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?BG:rge(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,i,r){this._append`Q${+e},${+t},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,t,i,r,a,s){this._append`C${+e},${+t},${+i},${+r},${this._x1=+a},${this._y1=+s}`}arcTo(e,t,i,r,a){if(e=+e,t=+t,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,l=this._y1,c=i-e,f=r-t,p=s-e,g=l-t,v=p*p+g*g;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(v>Sm)if(!(Math.abs(g*c-f*p)>Sm)||!a)this._append`L${this._x1=e},${this._y1=t}`;else{let _=i-s,x=r-l,T=c*c+f*f,S=_*_+x*x,w=Math.sqrt(T),I=Math.sqrt(v),R=a*Math.tan((qN-Math.acos((T+v-S)/(2*w*I)))/2),D=R/I,B=R/w;Math.abs(D-1)>Sm&&this._append`L${e+D*p},${t+D*g}`,this._append`A${a},${a},0,0,${+(g*_>p*x)},${this._x1=e+B*c},${this._y1=t+B*f}`}}arc(e,t,i,r,a,s){if(e=+e,t=+t,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),c=i*Math.sin(r),f=e+l,p=t+c,g=1^s,v=s?r-a:a-r;this._x1===null?this._append`M${f},${p}`:(Math.abs(this._x1-f)>Sm||Math.abs(this._y1-p)>Sm)&&this._append`L${f},${p}`,i&&(v<0&&(v=v%$N+$N),v>ige?this._append`A${i},${i},0,1,${g},${e-l},${t-c}A${i},${i},0,1,${g},${this._x1=f},${this._y1=p}`:v>Sm&&this._append`A${i},${i},0,${+(v>=qN)},${g},${this._x1=e+i*Math.cos(a)},${this._y1=t+i*Math.sin(a)}`)}rect(e,t,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function VG(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const i=Math.floor(t);if(!(i>=0))throw new RangeError(`invalid digits: ${t}`);e=i}return n},()=>new age(e)}function F3(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function jG(n){this._context=n}jG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:this._context.lineTo(n,e);break}}};function AM(n){return new jG(n)}function HG(n){return n[0]}function GG(n){return n[1]}function WG(n,e){var t=Sr(!0),i=null,r=AM,a=null,s=VG(l);n=typeof n=="function"?n:n===void 0?HG:Sr(n),e=typeof e=="function"?e:e===void 0?GG:Sr(e);function l(c){var f,p=(c=F3(c)).length,g,v=!1,_;for(i==null&&(a=r(_=s())),f=0;f<=p;++f)!(f<p&&t(g=c[f],f,c))===v&&((v=!v)?a.lineStart():a.lineEnd()),v&&a.point(+n(g,f,c),+e(g,f,c));if(_)return a=null,_+""||null}return l.x=function(c){return arguments.length?(n=typeof c=="function"?c:Sr(+c),l):n},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Sr(+c),l):e},l.defined=function(c){return arguments.length?(t=typeof c=="function"?c:Sr(!!c),l):t},l.curve=function(c){return arguments.length?(r=c,i!=null&&(a=r(i)),l):r},l.context=function(c){return arguments.length?(c==null?i=a=null:a=r(i=c),l):i},l}function Sw(n,e,t){var i=null,r=Sr(!0),a=null,s=AM,l=null,c=VG(f);n=typeof n=="function"?n:n===void 0?HG:Sr(+n),e=typeof e=="function"?e:Sr(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?GG:Sr(+t);function f(g){var v,_,x,T=(g=F3(g)).length,S,w=!1,I,R=new Array(T),D=new Array(T);for(a==null&&(l=s(I=c())),v=0;v<=T;++v){if(!(v<T&&r(S=g[v],v,g))===w)if(w=!w)_=v,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),x=v-1;x>=_;--x)l.point(R[x],D[x]);l.lineEnd(),l.areaEnd()}w&&(R[v]=+n(S,v,g),D[v]=+e(S,v,g),l.point(i?+i(S,v,g):R[v],t?+t(S,v,g):D[v]))}if(I)return l=null,I+""||null}function p(){return WG().defined(r).curve(s).context(a)}return f.x=function(g){return arguments.length?(n=typeof g=="function"?g:Sr(+g),i=null,f):n},f.x0=function(g){return arguments.length?(n=typeof g=="function"?g:Sr(+g),f):n},f.x1=function(g){return arguments.length?(i=g==null?null:typeof g=="function"?g:Sr(+g),f):i},f.y=function(g){return arguments.length?(e=typeof g=="function"?g:Sr(+g),t=null,f):e},f.y0=function(g){return arguments.length?(e=typeof g=="function"?g:Sr(+g),f):e},f.y1=function(g){return arguments.length?(t=g==null?null:typeof g=="function"?g:Sr(+g),f):t},f.lineX0=f.lineY0=function(){return p().x(n).y(e)},f.lineY1=function(){return p().x(n).y(t)},f.lineX1=function(){return p().x(i).y(e)},f.defined=function(g){return arguments.length?(r=typeof g=="function"?g:Sr(!!g),f):r},f.curve=function(g){return arguments.length?(s=g,a!=null&&(l=s(a)),f):s},f.context=function(g){return arguments.length?(g==null?a=l=null:l=s(a=g),f):a},f}class qG{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function sge(n){return new qG(n,!0)}function oge(n){return new qG(n,!1)}function TT(){}function AT(n,e,t){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+e)/6,(n._y0+4*n._y1+t)/6)}function $G(n){this._context=n}$G.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:AT(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:AT(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function lge(n){return new $G(n)}function XG(n){this._context=n}XG.prototype={areaStart:TT,areaEnd:TT,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x2=n,this._y2=e;break;case 1:this._point=2,this._x3=n,this._y3=e;break;case 2:this._point=3,this._x4=n,this._y4=e,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+e)/6);break;default:AT(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function uge(n){return new XG(n)}function YG(n){this._context=n}YG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+n)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 3:this._point=4;default:AT(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function cge(n){return new YG(n)}function KG(n){this._context=n}KG.prototype={areaStart:TT,areaEnd:TT,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,e){n=+n,e=+e,this._point?this._context.lineTo(n,e):(this._point=1,this._context.moveTo(n,e))}};function fge(n){return new KG(n)}function $z(n){return n<0?-1:1}function Xz(n,e,t){var i=n._x1-n._x0,r=e-n._x1,a=(n._y1-n._y0)/(i||r<0&&-0),s=(t-n._y1)/(r||i<0&&-0),l=(a*r+s*i)/(i+r);return($z(a)+$z(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(l))||0}function Yz(n,e){var t=n._x1-n._x0;return t?(3*(n._y1-n._y0)/t-e)/2:e}function mR(n,e,t){var i=n._x0,r=n._y0,a=n._x1,s=n._y1,l=(a-i)/3;n._context.bezierCurveTo(i+l,r+l*e,a-l,s-l*t,a,s)}function MT(n){this._context=n}MT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:mR(this,this._t0,Yz(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){var t=NaN;if(n=+n,e=+e,!(n===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,mR(this,Yz(this,t=Xz(this,n,e)),t);break;default:mR(this,this._t0,t=Xz(this,n,e));break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e,this._t0=t}}};function ZG(n){this._context=new QG(n)}(ZG.prototype=Object.create(MT.prototype)).point=function(n,e){MT.prototype.point.call(this,e,n)};function QG(n){this._context=n}QG.prototype={moveTo:function(n,e){this._context.moveTo(e,n)},closePath:function(){this._context.closePath()},lineTo:function(n,e){this._context.lineTo(e,n)},bezierCurveTo:function(n,e,t,i,r,a){this._context.bezierCurveTo(e,n,i,t,a,r)}};function hge(n){return new MT(n)}function dge(n){return new ZG(n)}function JG(n){this._context=n}JG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,e=this._y,t=n.length;if(t)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),t===2)this._context.lineTo(n[1],e[1]);else for(var i=Kz(n),r=Kz(e),a=0,s=1;s<t;++a,++s)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],n[s],e[s]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,e){this._x.push(+n),this._y.push(+e)}};function Kz(n){var e,t=n.length-1,i,r=new Array(t),a=new Array(t),s=new Array(t);for(r[0]=0,a[0]=2,s[0]=n[0]+2*n[1],e=1;e<t-1;++e)r[e]=1,a[e]=4,s[e]=4*n[e]+2*n[e+1];for(r[t-1]=2,a[t-1]=7,s[t-1]=8*n[t-1]+n[t],e=1;e<t;++e)i=r[e]/a[e-1],a[e]-=i,s[e]-=i*s[e-1];for(r[t-1]=s[t-1]/a[t-1],e=t-2;e>=0;--e)r[e]=(s[e]-r[e+1])/a[e];for(a[t-1]=(n[t]+r[t-1])/2,e=0;e<t-1;++e)a[e]=2*n[e+1]-r[e+1];return[r,a]}function pge(n){return new JG(n)}function MM(n,e){this._context=n,this._t=e}MM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(n,e);else{var t=this._x*(1-this._t)+n*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=n,this._y=e}};function mge(n){return new MM(n,.5)}function gge(n){return new MM(n,0)}function vge(n){return new MM(n,1)}function sg(n,e){if((s=n.length)>1)for(var t=1,i,r,a=n[e[0]],s,l=a.length;t<s;++t)for(r=a,a=n[e[t]],i=0;i<l;++i)a[i][1]+=a[i][0]=isNaN(r[i][1])?r[i][0]:r[i][1]}function XN(n){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=e;return t}function yge(n,e){return n[e]}function _ge(n){const e=[];return e.key=n,e}function bge(){var n=Sr([]),e=XN,t=sg,i=yge;function r(a){var s=Array.from(n.apply(this,arguments),_ge),l,c=s.length,f=-1,p;for(const g of a)for(l=0,++f;l<c;++l)(s[l][f]=[0,+i(g,s[l].key,f,a)]).data=g;for(l=0,p=F3(e(s));l<c;++l)s[p[l]].index=l;return t(s,p),s}return r.keys=function(a){return arguments.length?(n=typeof a=="function"?a:Sr(Array.from(a)),r):n},r.value=function(a){return arguments.length?(i=typeof a=="function"?a:Sr(+a),r):i},r.order=function(a){return arguments.length?(e=a==null?XN:typeof a=="function"?a:Sr(Array.from(a)),r):e},r.offset=function(a){return arguments.length?(t=a??sg,r):t},r}function xge(n,e){if((i=n.length)>0){for(var t,i,r=0,a=n[0].length,s;r<a;++r){for(s=t=0;t<i;++t)s+=n[t][r][1]||0;if(s)for(t=0;t<i;++t)n[t][r][1]/=s}sg(n,e)}}function Sge(n,e){if((r=n.length)>0){for(var t=0,i=n[e[0]],r,a=i.length;t<a;++t){for(var s=0,l=0;s<r;++s)l+=n[s][t][1]||0;i[t][1]+=i[t][0]=-l/2}sg(n,e)}}function wge(n,e){if(!(!((s=n.length)>0)||!((a=(r=n[e[0]]).length)>0))){for(var t=0,i=1,r,a,s;i<a;++i){for(var l=0,c=0,f=0;l<s;++l){for(var p=n[e[l]],g=p[i][1]||0,v=p[i-1][1]||0,_=(g-v)/2,x=0;x<l;++x){var T=n[e[x]],S=T[i][1]||0,w=T[i-1][1]||0;_+=S-w}c+=g,f+=_*g}r[i-1][1]+=r[i-1][0]=t,c&&(t-=f/c)}r[i-1][1]+=r[i-1][0]=t,sg(n,e)}}var gR={},vR={},Zz;function Ege(){return Zz||(Zz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==="__proto__"}n.isUnsafeProperty=e})(vR)),vR}var yR={},Qz;function e7(){return Qz||(Qz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){switch(typeof t){case"number":case"symbol":return!1;case"string":return t.includes(".")||t.includes("[")||t.includes("]")}}n.isDeepKey=e})(yR)),yR}var _R={},Jz;function z3(){return Jz||(Jz=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){var i;return typeof t=="string"||typeof t=="symbol"?t:Object.is((i=t==null?void 0:t.valueOf)==null?void 0:i.call(t),-0)?"-0":String(t)}n.toKey=e})(_R)),_R}var bR={},xR={},eB;function Tge(){return eB||(eB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){if(t==null)return"";if(typeof t=="string")return t;if(Array.isArray(t))return t.map(e).join(",");const i=String(t);return i==="0"&&Object.is(Number(t),-0)?"-0":i}n.toString=e})(xR)),xR}var tB;function B3(){return tB||(tB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Tge(),t=z3();function i(r){if(Array.isArray(r))return r.map(t.toKey);if(typeof r=="symbol")return[r];r=e.toString(r);const a=[],s=r.length;if(s===0)return a;let l=0,c="",f="",p=!1;for(r.charCodeAt(0)===46&&(a.push(""),l++);l<s;){const g=r[l];f?g==="\\"&&l+1<s?(l++,c+=r[l]):g===f?f="":c+=g:p?g==='"'||g==="'"?f=g:g==="]"?(p=!1,a.push(c),c=""):c+=g:g==="["?(p=!0,c&&(a.push(c),c="")):g==="."?c&&(a.push(c),c=""):c+=g,l++}return c&&a.push(c),a}n.toPath=i})(bR)),bR}var nB;function V3(){return nB||(nB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Ege(),t=e7(),i=z3(),r=B3();function a(l,c,f){if(l==null)return f;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return f;const p=l[c];return p===void 0?t.isDeepKey(c)?a(l,r.toPath(c),f):f:p}case"number":case"symbol":{typeof c=="number"&&(c=i.toKey(c));const p=l[c];return p===void 0?f:p}default:{if(Array.isArray(c))return s(l,c,f);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return f;const p=l[c];return p===void 0?f:p}}}function s(l,c,f){if(c.length===0)return f;let p=l;for(let g=0;g<c.length;g++){if(p==null||e.isUnsafeProperty(c[g]))return f;p=p[c[g]]}return p===void 0?f:p}n.get=a})(gR)),gR}var SR,iB;function Age(){return iB||(iB=1,SR=V3().get),SR}var Mge=Age();const CM=Vu(Mge);var Cge=4;function jd(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cge,t=10**e,i=Math.round(n*t)/t;return Object.is(i,-0)?0:i}function Xa(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return n.reduce((r,a,s)=>{var l=t[s-1];return typeof l=="string"?r+l+a:l!==void 0?r+jd(l)+a:r+a},"")}var Wl=n=>n===0?0:n>0?1:-1,ef=n=>typeof n=="number"&&n!=+n,og=n=>typeof n=="string"&&n.indexOf("%")===n.length-1,qt=n=>(typeof n=="number"||n instanceof Number)&&!ef(n),tf=n=>qt(n)||typeof n=="string",Ige=0,ex=n=>{var e=++Ige;return"".concat(n||"").concat(e)},lp=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!qt(e)&&typeof e!="string")return i;var a;if(og(e)){if(t==null)return i;var s=e.indexOf("%");a=t*parseFloat(e.slice(0,s))/100}else a=+e;return ef(a)&&(a=i),r&&t!=null&&a>t&&(a=t),a},t7=n=>{if(!Array.isArray(n))return!1;for(var e=n.length,t={},i=0;i<e;i++)if(!t[String(n[i])])t[String(n[i])]=!0;else return!0;return!1};function Rc(n,e,t){return qt(n)&&qt(e)?jd(n+t*(e-n)):e}function n7(n,e,t){if(!(!n||!n.length))return n.find(i=>i&&(typeof e=="function"?e(i):CM(i,e))===t)}var Rs=n=>n===null||typeof n>"u",j3=n=>Rs(n)?n:"".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));function Do(n){return n!=null}function t0(){}var i7=n=>"radius"in n&&"startAngle"in n&&"endAngle"in n,H3=(n,e)=>{if(!n||typeof n=="function"||typeof n=="boolean")return null;var t=n;if(H.isValidElement(n)&&(t=n.props),typeof t!="object"&&typeof t!="function")return null;var i={};return Object.keys(t).forEach(r=>{U3(r)&&(i[r]=(a=>t[r](t,a)))}),i},Rge=(n,e,t)=>i=>(n(e,t,i),null),Pge=(n,e,t)=>{if(n===null||typeof n!="object"&&typeof n!="function")return null;var i=null;return Object.keys(n).forEach(r=>{var a=n[r];U3(r)&&typeof a=="function"&&(i||(i={}),i[r]=Rge(a,e,t))}),i};function rB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Nge(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rB(Object(t),!0).forEach(function(i){Oge(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):rB(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Oge(n,e,t){return(e=Dge(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Dge(n){var e=Lge(n,"string");return typeof e=="symbol"?e:e+""}function Lge(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function cl(n,e){var t=Nge({},n),i=e,r=Object.keys(e),a=r.reduce((s,l)=>(s[l]===void 0&&i[l]!==void 0&&(s[l]=i[l]),s),t);return a}var wR={},ER={},aB;function kge(){return aB||(aB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,i){const r=new Map;for(let a=0;a<t.length;a++){const s=t[a],l=i(s,a,t);r.has(l)||r.set(l,s)}return Array.from(r.values())}n.uniqBy=e})(ER)),ER}var TR={},sB;function Uge(){return sB||(sB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,i){return function(...r){return t.apply(this,r.slice(0,i))}}n.ary=e})(TR)),TR}var AR={},oB;function r7(){return oB||(oB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t}n.identity=e})(AR)),AR}var MR={},CR={},IR={},lB;function Fge(){return lB||(lB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Number.isSafeInteger(t)&&t>=0}n.isLength=e})(IR)),IR}var uB;function G3(){return uB||(uB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Fge();function t(i){return i!=null&&typeof i!="function"&&e.isLength(i.length)}n.isArrayLike=t})(CR)),CR}var RR={},cB;function zge(){return cB||(cB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="object"&&t!==null}n.isObjectLike=e})(RR)),RR}var fB;function Bge(){return fB||(fB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=G3(),t=zge();function i(r){return t.isObjectLike(r)&&e.isArrayLike(r)}n.isArrayLikeObject=i})(MR)),MR}var PR={},NR={},hB;function Vge(){return hB||(hB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=V3();function t(i){return function(r){return e.get(r,i)}}n.property=t})(NR)),NR}var OR={},DR={},LR={},kR={},dB;function a7(){return dB||(dB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t!==null&&(typeof t=="object"||typeof t=="function")}n.isObject=e})(kR)),kR}var UR={},pB;function s7(){return pB||(pB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==null||typeof t!="object"&&typeof t!="function"}n.isPrimitive=e})(UR)),UR}var FR={},mB;function o7(){return mB||(mB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,i){return t===i||Number.isNaN(t)&&Number.isNaN(i)}n.isEqualsSameValueZero=e})(FR)),FR}var gB;function jge(){return gB||(gB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=a7(),t=s7(),i=o7();function r(p,g,v){return typeof v!="function"?r(p,g,()=>{}):a(p,g,function _(x,T,S,w,I,R){const D=v(x,T,S,w,I,R);return D!==void 0?!!D:a(x,T,_,R)},new Map)}function a(p,g,v,_){if(g===p)return!0;switch(typeof g){case"object":return s(p,g,v,_);case"function":return Object.keys(g).length>0?a(p,{...g},v,_):i.isEqualsSameValueZero(p,g);default:return e.isObject(p)?typeof g=="string"?g==="":!0:i.isEqualsSameValueZero(p,g)}}function s(p,g,v,_){if(g==null)return!0;if(Array.isArray(g))return c(p,g,v,_);if(g instanceof Map)return l(p,g,v,_);if(g instanceof Set)return f(p,g,v,_);const x=Object.keys(g);if(p==null||t.isPrimitive(p))return x.length===0;if(x.length===0)return!0;if(_!=null&&_.has(g))return _.get(g)===p;_==null||_.set(g,p);try{for(let T=0;T<x.length;T++){const S=x[T];if(!t.isPrimitive(p)&&!(S in p)||g[S]===void 0&&p[S]!==void 0||g[S]===null&&p[S]!==null||!v(p[S],g[S],S,p,g,_))return!1}return!0}finally{_==null||_.delete(g)}}function l(p,g,v,_){if(g.size===0)return!0;if(!(p instanceof Map))return!1;for(const[x,T]of g.entries()){const S=p.get(x);if(v(S,T,x,p,g,_)===!1)return!1}return!0}function c(p,g,v,_){if(g.length===0)return!0;if(!Array.isArray(p))return!1;const x=new Set;for(let T=0;T<g.length;T++){const S=g[T];let w=!1;for(let I=0;I<p.length;I++){if(x.has(I))continue;const R=p[I];let D=!1;if(v(R,S,T,p,g,_)&&(D=!0),D){x.add(I),w=!0;break}}if(!w)return!1}return!0}function f(p,g,v,_){return g.size===0?!0:p instanceof Set?c([...p],[...g],v,_):!1}n.isMatchWith=r,n.isSetMatch=f})(LR)),LR}var vB;function l7(){return vB||(vB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=jge();function t(i,r){return e.isMatchWith(i,r,()=>{})}n.isMatch=t})(DR)),DR}var zR={},BR={},VR={},yB;function Hge(){return yB||(yB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Object.getOwnPropertySymbols(t).filter(i=>Object.prototype.propertyIsEnumerable.call(t,i))}n.getSymbols=e})(VR)),VR}var jR={},_B;function W3(){return _B||(_B=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}n.getTag=e})(jR)),jR}var HR={},bB;function u7(){return bB||(bB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",t="[object String]",i="[object Number]",r="[object Boolean]",a="[object Arguments]",s="[object Symbol]",l="[object Date]",c="[object Map]",f="[object Set]",p="[object Array]",g="[object Function]",v="[object ArrayBuffer]",_="[object Object]",x="[object Error]",T="[object DataView]",S="[object Uint8Array]",w="[object Uint8ClampedArray]",I="[object Uint16Array]",R="[object Uint32Array]",D="[object BigUint64Array]",B="[object Int8Array]",z="[object Int16Array]",k="[object Int32Array]",F="[object BigInt64Array]",P="[object Float32Array]",L="[object Float64Array]";n.argumentsTag=a,n.arrayBufferTag=v,n.arrayTag=p,n.bigInt64ArrayTag=F,n.bigUint64ArrayTag=D,n.booleanTag=r,n.dataViewTag=T,n.dateTag=l,n.errorTag=x,n.float32ArrayTag=P,n.float64ArrayTag=L,n.functionTag=g,n.int16ArrayTag=z,n.int32ArrayTag=k,n.int8ArrayTag=B,n.mapTag=c,n.numberTag=i,n.objectTag=_,n.regexpTag=e,n.setTag=f,n.stringTag=t,n.symbolTag=s,n.uint16ArrayTag=I,n.uint32ArrayTag=R,n.uint8ArrayTag=S,n.uint8ClampedArrayTag=w})(HR)),HR}var GR={},xB;function Gge(){return xB||(xB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}n.isTypedArray=e})(GR)),GR}var SB;function c7(){return SB||(SB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Hge(),t=W3(),i=u7(),r=s7(),a=Gge();function s(p,g){return l(p,void 0,p,new Map,g)}function l(p,g,v,_=new Map,x=void 0){const T=x==null?void 0:x(p,g,v,_);if(T!==void 0)return T;if(r.isPrimitive(p))return p;if(_.has(p))return _.get(p);if(Array.isArray(p)){const S=new Array(p.length);_.set(p,S);for(let w=0;w<p.length;w++)S[w]=l(p[w],w,v,_,x);return Object.hasOwn(p,"index")&&(S.index=p.index),Object.hasOwn(p,"input")&&(S.input=p.input),S}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const S=new RegExp(p.source,p.flags);return S.lastIndex=p.lastIndex,S}if(p instanceof Map){const S=new Map;_.set(p,S);for(const[w,I]of p)S.set(w,l(I,w,v,_,x));return S}if(p instanceof Set){const S=new Set;_.set(p,S);for(const w of p)S.add(l(w,void 0,v,_,x));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(a.isTypedArray(p)){const S=new(Object.getPrototypeOf(p)).constructor(p.length);_.set(p,S);for(let w=0;w<p.length;w++)S[w]=l(p[w],w,v,_,x);return S}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const S=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return _.set(p,S),c(S,p,v,_,x),S}if(typeof File<"u"&&p instanceof File){const S=new File([p],p.name,{type:p.type});return _.set(p,S),c(S,p,v,_,x),S}if(typeof Blob<"u"&&p instanceof Blob){const S=new Blob([p],{type:p.type});return _.set(p,S),c(S,p,v,_,x),S}if(p instanceof Error){const S=new p.constructor;return _.set(p,S),S.message=p.message,S.name=p.name,S.stack=p.stack,S.cause=p.cause,c(S,p,v,_,x),S}if(p instanceof Boolean){const S=new Boolean(p.valueOf());return _.set(p,S),c(S,p,v,_,x),S}if(p instanceof Number){const S=new Number(p.valueOf());return _.set(p,S),c(S,p,v,_,x),S}if(p instanceof String){const S=new String(p.valueOf());return _.set(p,S),c(S,p,v,_,x),S}if(typeof p=="object"&&f(p)){const S=Object.create(Object.getPrototypeOf(p));return _.set(p,S),c(S,p,v,_,x),S}return p}function c(p,g,v=p,_,x){const T=[...Object.keys(g),...e.getSymbols(g)];for(let S=0;S<T.length;S++){const w=T[S],I=Object.getOwnPropertyDescriptor(p,w);(I==null||I.writable)&&(p[w]=l(g[w],w,v,_,x))}}function f(p){switch(t.getTag(p)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}n.cloneDeepWith=s,n.cloneDeepWithImpl=l,n.copyProperties=c})(BR)),BR}var wB;function Wge(){return wB||(wB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=c7();function t(i){return e.cloneDeepWithImpl(i,void 0,i,new Map,void 0)}n.cloneDeep=t})(zR)),zR}var EB;function qge(){return EB||(EB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=l7(),t=Wge();function i(r){return r=t.cloneDeep(r),a=>e.isMatch(a,r)}n.matches=i})(OR)),OR}var WR={},qR={},$R={},TB;function $ge(){return TB||(TB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=c7(),t=W3(),i=u7();function r(a,s){return e.cloneDeepWith(a,(l,c,f,p)=>{const g=s==null?void 0:s(l,c,f,p);if(g!==void 0)return g;if(typeof a=="object"){if(t.getTag(a)===i.objectTag&&typeof a.constructor!="function"){const v={};return p.set(a,v),e.copyProperties(v,a,f,p),v}switch(Object.prototype.toString.call(a)){case i.numberTag:case i.stringTag:case i.booleanTag:{const v=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(v,a),v}case i.argumentsTag:{const v={};return e.copyProperties(v,a),v.length=a.length,v[Symbol.iterator]=a[Symbol.iterator],v}default:return}}})}n.cloneDeepWith=r})($R)),$R}var AB;function Xge(){return AB||(AB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=$ge();function t(i){return e.cloneDeepWith(i)}n.cloneDeep=t})(qR)),qR}var XR={},YR={},MB;function f7(){return MB||(MB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function t(i,r=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<r;case"symbol":return!1;case"string":return e.test(i)}}n.isIndex=t})(YR)),YR}var KR={},CB;function Yge(){return CB||(CB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=W3();function t(i){return i!==null&&typeof i=="object"&&e.getTag(i)==="[object Arguments]"}n.isArguments=t})(KR)),KR}var IB;function Kge(){return IB||(IB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=e7(),t=f7(),i=Yge(),r=B3();function a(s,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&(s==null?void 0:s[l])==null?c=r.toPath(l):c=[l],c.length===0)return!1;let f=s;for(let p=0;p<c.length;p++){const g=c[p];if((f==null||!Object.hasOwn(f,g))&&!((Array.isArray(f)||i.isArguments(f))&&t.isIndex(g)&&g<f.length))return!1;f=f[g]}return!0}n.has=a})(XR)),XR}var RB;function Zge(){return RB||(RB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=l7(),t=z3(),i=Xge(),r=V3(),a=Kge();function s(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=t.toKey(l);break}}return c=i.cloneDeep(c),function(f){const p=r.get(f,l);return p===void 0?a.has(f,l):c===void 0?p===void 0:e.isMatch(p,c)}}n.matchesProperty=s})(WR)),WR}var PB;function Qge(){return PB||(PB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=r7(),t=Vge(),i=qge(),r=Zge();function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?r.matchesProperty(s[0],s[1]):i.matches(s);case"string":case"symbol":case"number":return t.property(s)}}n.iteratee=a})(PR)),PR}var NB;function Jge(){return NB||(NB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=kge(),t=Uge(),i=r7(),r=Bge(),a=Qge();function s(l,c=i.identity){return r.isArrayLikeObject(l)?e.uniqBy(Array.from(l),t.ary(a.iteratee(c),1)):[]}n.uniqBy=s})(wR)),wR}var ZR,OB;function eve(){return OB||(OB=1,ZR=Jge().uniqBy),ZR}var tve=eve();const DB=Vu(tve);function nve(n,e,t){return e===!0?DB(n,t):typeof e=="function"?DB(n,e):n}var q3=H.createContext(null),ive=n=>n,Ia=()=>{var n=H.useContext(q3);return n?n.store.dispatch:ive},Jw=()=>{},rve=()=>Jw,ave=(n,e)=>n===e;function sn(n){var e=H.useContext(q3),t=H.useMemo(()=>e?i=>{if(i!=null)return n(i)}:Jw,[e,n]);return I8.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:rve,e?e.store.getState:Jw,e?e.store.getState:Jw,t,ave)}function sve(n,e=`expected a function, instead received ${typeof n}`){if(typeof n!="function")throw new TypeError(e)}function ove(n,e=`expected an object, instead received ${typeof n}`){if(typeof n!="object")throw new TypeError(e)}function lve(n,e="expected all items to be functions, instead received the following types: "){if(!n.every(t=>typeof t=="function")){const t=n.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${t}]`)}}var LB=n=>Array.isArray(n)?n:[n];function uve(n){const e=Array.isArray(n[0])?n[0]:n;return lve(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function cve(n,e){const t=[],{length:i}=n;for(let r=0;r<i;r++)t.push(n[r].apply(null,e));return t}var fve=class{constructor(n){this.value=n}deref(){return this.value}},hve=typeof WeakRef<"u"?WeakRef:fve,dve=0,kB=1;function ww(){return{s:dve,v:void 0,o:null,p:null}}function h7(n,e={}){let t=ww();const{resultEqualityCheck:i}=e;let r,a=0;function s(){var g;let l=t;const{length:c}=arguments;for(let v=0,_=c;v<_;v++){const x=arguments[v];if(typeof x=="function"||typeof x=="object"&&x!==null){let T=l.o;T===null&&(l.o=T=new WeakMap);const S=T.get(x);S===void 0?(l=ww(),T.set(x,l)):l=S}else{let T=l.p;T===null&&(l.p=T=new Map);const S=T.get(x);S===void 0?(l=ww(),T.set(x,l)):l=S}}const f=l;let p;if(l.s===kB)p=l.v;else if(p=n.apply(null,arguments),a++,i){const v=((g=r==null?void 0:r.deref)==null?void 0:g.call(r))??r;v!=null&&i(v,p)&&(p=v,a!==0&&a--),r=typeof p=="object"&&p!==null||typeof p=="function"?new hve(p):p}return f.s=kB,f.v=p,p}return s.clearCache=()=>{t=ww(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function pve(n,...e){const t=typeof n=="function"?{memoize:n,memoizeOptions:e}:n,i=(...r)=>{let a=0,s=0,l,c={},f=r.pop();typeof f=="object"&&(c=f,f=r.pop()),sve(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const p={...t,...c},{memoize:g,memoizeOptions:v=[],argsMemoize:_=h7,argsMemoizeOptions:x=[]}=p,T=LB(v),S=LB(x),w=uve(r),I=g(function(){return a++,f.apply(null,arguments)},...T),R=_(function(){s++;const B=cve(w,arguments);return l=I.apply(null,B),l},...S);return Object.assign(R,{resultFunc:f,memoizedResultFunc:I,dependencies:w,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>l,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:g,argsMemoize:_})};return Object.assign(i,{withTypes:()=>i}),i}var He=pve(h7),mve=Object.assign((n,e=He)=>{ove(n,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof n}`);const t=Object.keys(n),i=t.map(a=>n[a]);return e(i,(...a)=>a.reduce((s,l,c)=>(s[t[c]]=l,s),{}))},{withTypes:()=>mve}),QR={},JR={},eP={},UB;function gve(){return UB||(UB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(i){return typeof i=="symbol"?1:i===null?2:i===void 0?3:i!==i?4:0}const t=(i,r,a)=>{if(i!==r){const s=e(i),l=e(r);if(s===l&&s===0){if(i<r)return a==="desc"?1:-1;if(i>r)return a==="desc"?-1:1}return a==="desc"?l-s:s-l}return 0};n.compareValues=t})(eP)),eP}var tP={},nP={},FB;function d7(){return FB||(FB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="symbol"||t instanceof Symbol}n.isSymbol=e})(nP)),nP}var zB;function vve(){return zB||(zB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=d7(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(i.test(a)||!t.test(a))||s!=null&&Object.hasOwn(s,a)}n.isKey=r})(tP)),tP}var BB;function yve(){return BB||(BB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=gve(),t=vve(),i=B3();function r(a,s,l,c){if(a==null)return[];l=c?void 0:l,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(_=>String(_));const f=(_,x)=>{let T=_;for(let S=0;S<x.length&&T!=null;++S)T=T[x[S]];return T},p=(_,x)=>x==null||_==null?x:typeof _=="object"&&"key"in _?Object.hasOwn(x,_.key)?x[_.key]:f(x,_.path):typeof _=="function"?_(x):Array.isArray(_)?f(x,_):typeof x=="object"?x[_]:x,g=s.map(_=>(Array.isArray(_)&&_.length===1&&(_=_[0]),_==null||typeof _=="function"||Array.isArray(_)||t.isKey(_)?_:{key:_,path:i.toPath(_)}));return a.map(_=>({original:_,criteria:g.map(x=>p(x,_))})).slice().sort((_,x)=>{for(let T=0;T<g.length;T++){const S=e.compareValues(_.criteria[T],x.criteria[T],l[T]);if(S!==0)return S}return 0}).map(_=>_.original)}n.orderBy=r})(JR)),JR}var iP={},VB;function _ve(){return VB||(VB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,i=1){const r=[],a=Math.floor(i),s=(l,c)=>{for(let f=0;f<l.length;f++){const p=l[f];Array.isArray(p)&&c<a?s(p,c+1):r.push(p)}};return s(t,0),r}n.flatten=e})(iP)),iP}var rP={},jB;function p7(){return jB||(jB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=f7(),t=G3(),i=a7(),r=o7();function a(s,l,c){return i.isObject(c)&&(typeof l=="number"&&t.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?r.isEqualsSameValueZero(c[l],s):!1}n.isIterateeCall=a})(rP)),rP}var HB;function bve(){return HB||(HB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=yve(),t=_ve(),i=p7();function r(a,...s){const l=s.length;return l>1&&i.isIterateeCall(a,s[0],s[1])?s=[]:l>2&&i.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,t.flatten(s),["asc"])}n.sortBy=r})(QR)),QR}var aP,GB;function xve(){return GB||(GB=1,aP=bve().sortBy),aP}var Sve=xve();const IM=Vu(Sve);var m7=n=>n.legend.settings,wve=n=>n.legend.size,Eve=n=>n.legend.payload;He([Eve,m7],(n,e)=>{var{itemSorter:t}=e,i=n.flat(1);return t?IM(i,t):i});var Ew=1;function Tve(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,t]=H.useState({height:0,left:0,top:0,width:0}),i=H.useCallback(r=>{if(r!=null){var a=r.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>Ew||Math.abs(s.left-e.left)>Ew||Math.abs(s.top-e.top)>Ew||Math.abs(s.width-e.width)>Ew)&&t({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...n]);return[e,i]}function $a(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var Ave=typeof Symbol=="function"&&Symbol.observable||"@@observable",WB=Ave,sP=()=>Math.random().toString(36).substring(7).split("").join("."),Mve={INIT:`@@redux/INIT${sP()}`,REPLACE:`@@redux/REPLACE${sP()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${sP()}`},CT=Mve;function $3(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function g7(n,e,t){if(typeof n!="function")throw new Error($a(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error($a(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error($a(1));return t(g7)(n,e)}let i=n,r=e,a=new Map,s=a,l=0,c=!1;function f(){s===a&&(s=new Map,a.forEach((S,w)=>{s.set(w,S)}))}function p(){if(c)throw new Error($a(3));return r}function g(S){if(typeof S!="function")throw new Error($a(4));if(c)throw new Error($a(5));let w=!0;f();const I=l++;return s.set(I,S),function(){if(w){if(c)throw new Error($a(6));w=!1,f(),s.delete(I),a=null}}}function v(S){if(!$3(S))throw new Error($a(7));if(typeof S.type>"u")throw new Error($a(8));if(typeof S.type!="string")throw new Error($a(17));if(c)throw new Error($a(9));try{c=!0,r=i(r,S)}finally{c=!1}return(a=s).forEach(I=>{I()}),S}function _(S){if(typeof S!="function")throw new Error($a(10));i=S,v({type:CT.REPLACE})}function x(){const S=g;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error($a(11));function I(){const D=w;D.next&&D.next(p())}return I(),{unsubscribe:S(I)}},[WB](){return this}}}return v({type:CT.INIT}),{dispatch:v,subscribe:g,getState:p,replaceReducer:_,[WB]:x}}function Cve(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:CT.INIT})>"u")throw new Error($a(12));if(typeof t(void 0,{type:CT.PROBE_UNKNOWN_ACTION()})>"u")throw new Error($a(13))})}function v7(n){const e=Object.keys(n),t={};for(let a=0;a<e.length;a++){const s=e[a];typeof n[s]=="function"&&(t[s]=n[s])}const i=Object.keys(t);let r;try{Cve(t)}catch(a){r=a}return function(s={},l){if(r)throw r;let c=!1;const f={};for(let p=0;p<i.length;p++){const g=i[p],v=t[g],_=s[g],x=v(_,l);if(typeof x>"u")throw l&&l.type,new Error($a(14));f[g]=x,c=c||x!==_}return c=c||i.length!==Object.keys(s).length,c?f:s}}function IT(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function Ive(...n){return e=>(t,i)=>{const r=e(t,i);let a=()=>{throw new Error($a(15))};const s={getState:r.getState,dispatch:(c,...f)=>a(c,...f)},l=n.map(c=>c(s));return a=IT(...l)(r.dispatch),{...r,dispatch:a}}}function y7(n){return $3(n)&&"type"in n&&typeof n.type=="string"}var _7=Symbol.for("immer-nothing"),qB=Symbol.for("immer-draftable"),to=Symbol.for("immer-state");function Iu(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var rl=Object,Fy=rl.getPrototypeOf,RT="constructor",RM="prototype",YN="configurable",PT="enumerable",eE="writable",tx="value",dh=n=>!!n&&!!n[to];function Bu(n){var e;return n?b7(n)||NM(n)||!!n[qB]||!!((e=n[RT])!=null&&e[qB])||OM(n)||DM(n):!1}var Rve=rl[RM][RT].toString(),$B=new WeakMap;function b7(n){if(!n||!X3(n))return!1;const e=Fy(n);if(e===null||e===rl[RM])return!0;const t=rl.hasOwnProperty.call(e,RT)&&e[RT];if(t===Object)return!0;if(!ty(t))return!1;let i=$B.get(t);return i===void 0&&(i=Function.toString.call(t),$B.set(t,i)),i===Rve}function PM(n,e,t=!0){Fx(n)===0?(t?Reflect.ownKeys(n):rl.keys(n)).forEach(r=>{e(r,n[r],n)}):n.forEach((i,r)=>e(r,i,n))}function Fx(n){const e=n[to];return e?e.type_:NM(n)?1:OM(n)?2:DM(n)?3:0}var XB=(n,e,t=Fx(n))=>t===2?n.has(e):rl[RM].hasOwnProperty.call(n,e),KN=(n,e,t=Fx(n))=>t===2?n.get(e):n[e],NT=(n,e,t,i=Fx(n))=>{i===2?n.set(e,t):i===3?n.add(t):n[e]=t};function Pve(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var NM=Array.isArray,OM=n=>n instanceof Map,DM=n=>n instanceof Set,X3=n=>typeof n=="object",ty=n=>typeof n=="function",oP=n=>typeof n=="boolean";function Nve(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var Yf=n=>n.copy_||n.base_,Y3=n=>n.modified_?n.copy_:n.base_;function ZN(n,e){if(OM(n))return new Map(n);if(DM(n))return new Set(n);if(NM(n))return Array[RM].slice.call(n);const t=b7(n);if(e===!0||e==="class_only"&&!t){const i=rl.getOwnPropertyDescriptors(n);delete i[to];let r=Reflect.ownKeys(i);for(let a=0;a<r.length;a++){const s=r[a],l=i[s];l[eE]===!1&&(l[eE]=!0,l[YN]=!0),(l.get||l.set)&&(i[s]={[YN]:!0,[eE]:!0,[PT]:l[PT],[tx]:n[s]})}return rl.create(Fy(n),i)}else{const i=Fy(n);if(i!==null&&t)return{...n};const r=rl.create(i);return rl.assign(r,n)}}function K3(n,e=!1){return LM(n)||dh(n)||!Bu(n)||(Fx(n)>1&&rl.defineProperties(n,{set:Tw,add:Tw,clear:Tw,delete:Tw}),rl.freeze(n),e&&PM(n,(t,i)=>{K3(i,!0)},!1)),n}function Ove(){Iu(2)}var Tw={[tx]:Ove};function LM(n){return n===null||!X3(n)?!0:rl.isFrozen(n)}var OT="MapSet",QN="Patches",YB="ArrayMethods",x7={};function lg(n){const e=x7[n];return e||Iu(0,n),e}var KB=n=>!!x7[n],nx,S7=()=>nx,Dve=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:KB(OT)?lg(OT):void 0,arrayMethodsPlugin_:KB(YB)?lg(YB):void 0});function ZB(n,e){e&&(n.patchPlugin_=lg(QN),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function JN(n){eO(n),n.drafts_.forEach(Lve),n.drafts_=null}function eO(n){n===nx&&(nx=n.parent_)}var QB=n=>nx=Dve(nx,n);function Lve(n){const e=n[to];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function JB(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[to].modified_&&(JN(e),Iu(4)),Bu(n)&&(n=eV(e,n));const{patchPlugin_:r}=e;r&&r.generateReplacementPatches_(t[to].base_,n,e)}else n=eV(e,t);return kve(e,n,!0),JN(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==_7?n:void 0}function eV(n,e){if(LM(e))return e;const t=e[to];if(!t)return DT(e,n.handledSet_,n);if(!kM(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:i}=t;if(i)for(;i.length>0;)i.pop()(n);T7(t,n)}return t.copy_}function kve(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&K3(e,t)}function w7(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var kM=(n,e)=>n.scope_===e,Uve=[];function E7(n,e,t,i){const r=Yf(n),a=n.type_;if(i!==void 0&&KN(r,i,a)===e){NT(r,i,t,a);return}if(!n.draftLocations_){const l=n.draftLocations_=new Map;PM(r,(c,f)=>{if(dh(f)){const p=l.get(f)||[];p.push(c),l.set(f,p)}})}const s=n.draftLocations_.get(e)??Uve;for(const l of s)NT(r,l,t,a)}function Fve(n,e,t){n.callbacks_.push(function(r){var l;const a=e;if(!a||!kM(a,r))return;(l=r.mapSetPlugin_)==null||l.fixSetContents(a);const s=Y3(a);E7(n,a.draft_??a,s,t),T7(a,r)})}function T7(n,e){var i;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((i=n.assigned_)==null?void 0:i.size)??0)>0)){const{patchPlugin_:r}=e;if(r){const a=r.getPath(n);a&&r.generatePatches_(n,a,e)}w7(n)}}function zve(n,e,t){const{scope_:i}=n;if(dh(t)){const r=t[to];kM(r,i)&&r.callbacks_.push(function(){tE(n);const s=Y3(r);E7(n,t,s,e)})}else Bu(t)&&n.callbacks_.push(function(){const a=Yf(n);n.type_===3?a.has(t)&&DT(t,i.handledSet_,i):KN(a,e,n.type_)===t&&i.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&DT(KN(n.copy_,e,n.type_),i.handledSet_,i)})}function DT(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||dh(n)||e.has(n)||!Bu(n)||LM(n)||(e.add(n),PM(n,(i,r)=>{if(dh(r)){const a=r[to];if(kM(a,t)){const s=Y3(a);NT(n,i,s,n.type_),w7(a)}}else Bu(r)&&DT(r,e,t)})),n}function Bve(n,e){const t=NM(n),i={type_:t?1:0,scope_:e?e.scope_:S7(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=i,a=LT;t&&(r=[i],a=ix);const{revoke:s,proxy:l}=Proxy.revocable(r,a);return i.draft_=l,i.revoke_=s,[l,i]}var LT={get(n,e){if(e===to)return n;let t=n.scope_.arrayMethodsPlugin_;const i=n.type_===1&&typeof e=="string";if(i&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const r=Yf(n);if(!XB(r,e,n.type_))return Vve(n,r,e);const a=r[e];if(n.finalized_||!Bu(a)||i&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&Nve(e))return a;if(a===lP(n.base_,e)){tE(n);const s=n.type_===1?+e:e,l=nO(n.scope_,a,n,s);return n.copy_[s]=l}return a},has(n,e){return e in Yf(n)},ownKeys(n){return Reflect.ownKeys(Yf(n))},set(n,e,t){const i=A7(Yf(n),e);if(i!=null&&i.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const r=lP(Yf(n),e),a=r==null?void 0:r[to];if(a&&a.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(Pve(t,r)&&(t!==void 0||XB(n.base_,e,n.type_)))return!0;tE(n),tO(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),zve(n,e,t)),!0},deleteProperty(n,e){return tE(n),lP(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),tO(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Yf(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{[eE]:!0,[YN]:n.type_!==1||e!=="length",[PT]:i[PT],[tx]:t[e]}},defineProperty(){Iu(11)},getPrototypeOf(n){return Fy(n.base_)},setPrototypeOf(){Iu(12)}},ix={};for(let n in LT){let e=LT[n];ix[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}ix.deleteProperty=function(n,e){return ix.set.call(this,n,e,void 0)};ix.set=function(n,e,t){return LT.set.call(this,n[0],e,t,n[0])};function lP(n,e){const t=n[to];return(t?Yf(t):n)[e]}function Vve(n,e,t){var r;const i=A7(e,t);return i?tx in i?i[tx]:(r=i.get)==null?void 0:r.call(n.draft_):void 0}function A7(n,e){if(!(e in n))return;let t=Fy(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Fy(t)}}function tO(n){n.modified_||(n.modified_=!0,n.parent_&&tO(n.parent_))}function tE(n){n.copy_||(n.assigned_=new Map,n.copy_=ZN(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var jve=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,i,r)=>{if(ty(t)&&!ty(i)){const s=i;i=t;const l=this;return function(f=s,...p){return l.produce(f,g=>i.call(this,g,...p))}}ty(i)||Iu(6),r!==void 0&&!ty(r)&&Iu(7);let a;if(Bu(t)){const s=QB(this),l=nO(s,t,void 0);let c=!0;try{a=i(l),c=!1}finally{c?JN(s):eO(s)}return ZB(s,r),JB(a,s)}else if(!t||!X3(t)){if(a=i(t),a===void 0&&(a=t),a===_7&&(a=void 0),this.autoFreeze_&&K3(a,!0),r){const s=[],l=[];lg(QN).generateReplacementPatches_(t,a,{patches_:s,inversePatches_:l}),r(s,l)}return a}else Iu(1,t)},this.produceWithPatches=(t,i)=>{if(ty(t))return(l,...c)=>this.produceWithPatches(l,f=>t(f,...c));let r,a;return[this.produce(t,i,(l,c)=>{r=l,a=c}),r,a]},oP(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),oP(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),oP(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Bu(e)||Iu(8),dh(e)&&(e=Fu(e));const t=QB(this),i=nO(t,e,void 0);return i[to].isManual_=!0,eO(t),i}finishDraft(e,t){const i=e&&e[to];(!i||!i.isManual_)&&Iu(9);const{scope_:r}=i;return ZB(r,t),JB(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let i;for(i=t.length-1;i>=0;i--){const a=t[i];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}i>-1&&(t=t.slice(i+1));const r=lg(QN).applyPatches_;return dh(e)?r(e,t):this.produce(e,a=>r(a,t))}};function nO(n,e,t,i){const[r,a]=OM(e)?lg(OT).proxyMap_(e,t):DM(e)?lg(OT).proxySet_(e,t):Bve(e,t);return((t==null?void 0:t.scope_)??S7()).drafts_.push(r),a.callbacks_=(t==null?void 0:t.callbacks_)??[],a.key_=i,t&&i!==void 0?Fve(t,a,i):a.callbacks_.push(function(c){var p;(p=c.mapSetPlugin_)==null||p.fixSetContents(a);const{patchPlugin_:f}=c;a.modified_&&f&&f.generatePatches_(a,[],c)}),r}function Fu(n){return dh(n)||Iu(10,n),M7(n)}function M7(n){if(!Bu(n)||LM(n))return n;const e=n[to];let t,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=ZN(n,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else t=ZN(n,!0);return PM(t,(r,a)=>{NT(t,r,M7(a))},i),e&&(e.finalized_=!1),t}var Hve=new jve,C7=Hve.produce;function I7(n){return({dispatch:t,getState:i})=>r=>a=>typeof a=="function"?a(t,i,n):r(a)}var Gve=I7(),Wve=I7,qve=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?IT:IT.apply(null,arguments)};function Zl(n,e){function t(...i){if(e){let r=e(...i);if(!r)throw new Error(ol(0));return{type:n,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>y7(i)&&i.type===n,t}var R7=class rb extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,rb.prototype)}static get[Symbol.species](){return rb}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new rb(...e[0].concat(this)):new rb(...e.concat(this))}};function tV(n){return Bu(n)?C7(n,()=>{}):n}function Aw(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function $ve(n){return typeof n=="boolean"}var Xve=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:a=!0}=e??{};let s=new R7;return t&&($ve(t)?s.push(Gve):s.push(Wve(t.extraArgument))),s},P7="RTK_autoBatch",rr=()=>n=>({payload:n,meta:{[P7]:!0}}),nV=n=>e=>{setTimeout(e,n)},N7=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let r=!0,a=!1,s=!1;const l=new Set,c=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:nV(10):n.type==="callback"?n.queueNotification:nV(n.timeout),f=()=>{s=!1,a&&(a=!1,l.forEach(p=>p()))};return Object.assign({},i,{subscribe(p){const g=()=>r&&p(),v=i.subscribe(g);return l.add(p),()=>{v(),l.delete(p)}},dispatch(p){var g;try{return r=!((g=p==null?void 0:p.meta)!=null&&g[P7]),a=!r,a&&(s||(s=!0,c(f))),i.dispatch(p)}finally{r=!0}}})},Yve=n=>function(t){const{autoBatch:i=!0}=t??{};let r=new R7(n);return i&&r.push(N7(typeof i=="object"?i:void 0)),r};function Kve(n){const e=Xve(),{reducer:t=void 0,middleware:i,devTools:r=!0,preloadedState:a=void 0,enhancers:s=void 0}=n||{};let l;if(typeof t=="function")l=t;else if($3(t))l=v7(t);else throw new Error(ol(1));let c;typeof i=="function"?c=i(e):c=e();let f=IT;r&&(f=qve({trace:!1,...typeof r=="object"&&r}));const p=Ive(...c),g=Yve(p);let v=typeof s=="function"?s(g):g();const _=f(...v);return g7(l,a,_)}function O7(n){const e={},t=[];let i;const r={addCase(a,s){const l=typeof a=="string"?a:a.type;if(!l)throw new Error(ol(28));if(l in e)throw new Error(ol(29));return e[l]=s,r},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&t.push({matcher:a.settled,reducer:s.settled}),r},addMatcher(a,s){return t.push({matcher:a,reducer:s}),r},addDefaultCase(a){return i=a,r}};return n(r),[e,t,i]}function Zve(n){return typeof n=="function"}function Qve(n,e){let[t,i,r]=O7(e),a;if(Zve(n))a=()=>tV(n());else{const l=tV(n);a=()=>l}function s(l=a(),c){let f=[t[c.type],...i.filter(({matcher:p})=>p(c)).map(({reducer:p})=>p)];return f.filter(p=>!!p).length===0&&(f=[r]),f.reduce((p,g)=>{if(g)if(dh(p)){const _=g(p,c);return _===void 0?p:_}else{if(Bu(p))return C7(p,v=>g(v,c));{const v=g(p,c);if(v===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return p},l)}return s.getInitialState=a,s}var Jve="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",eye=(n=21)=>{let e="",t=n;for(;t--;)e+=Jve[Math.random()*64|0];return e},tye=Symbol.for("rtk-slice-createasyncthunk");function nye(n,e){return`${n}/${e}`}function iye({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[tye];return function(r){const{name:a,reducerPath:s=a}=r;if(!a)throw new Error(ol(11));const l=(typeof r.reducers=="function"?r.reducers(aye()):r.reducers)||{},c=Object.keys(l),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(D,B){const z=typeof D=="string"?D:D.type;if(!z)throw new Error(ol(12));if(z in f.sliceCaseReducersByType)throw new Error(ol(13));return f.sliceCaseReducersByType[z]=B,p},addMatcher(D,B){return f.sliceMatchers.push({matcher:D,reducer:B}),p},exposeAction(D,B){return f.actionCreators[D]=B,p},exposeCaseReducer(D,B){return f.sliceCaseReducersByName[D]=B,p}};c.forEach(D=>{const B=l[D],z={reducerName:D,type:nye(a,D),createNotation:typeof r.reducers=="function"};oye(B)?uye(z,B,p,e):sye(z,B,p)});function g(){const[D={},B=[],z=void 0]=typeof r.extraReducers=="function"?O7(r.extraReducers):[r.extraReducers],k={...D,...f.sliceCaseReducersByType};return Qve(r.initialState,F=>{for(let P in k)F.addCase(P,k[P]);for(let P of f.sliceMatchers)F.addMatcher(P.matcher,P.reducer);for(let P of B)F.addMatcher(P.matcher,P.reducer);z&&F.addDefaultCase(z)})}const v=D=>D,_=new Map,x=new WeakMap;let T;function S(D,B){return T||(T=g()),T(D,B)}function w(){return T||(T=g()),T.getInitialState()}function I(D,B=!1){function z(F){let P=F[D];return typeof P>"u"&&B&&(P=Aw(x,z,w)),P}function k(F=v){const P=Aw(_,B,()=>new WeakMap);return Aw(P,F,()=>{const L={};for(const[V,W]of Object.entries(r.selectors??{}))L[V]=rye(W,F,()=>Aw(x,F,w),B);return L})}return{reducerPath:D,getSelectors:k,get selectors(){return k(z)},selectSlice:z}}const R={name:a,reducer:S,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:w,...I(s),injectInto(D,{reducerPath:B,...z}={}){const k=B??s;return D.inject({reducerPath:k,reducer:S},z),{...R,...I(k,!0)}}};return R}}function rye(n,e,t,i){function r(a,...s){let l=e(a);return typeof l>"u"&&i&&(l=t()),n(l,...s)}return r.unwrapped=n,r}var ko=iye();function aye(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function sye({type:n,reducerName:e,createNotation:t},i,r){let a,s;if("reducer"in i){if(t&&!lye(i))throw new Error(ol(17));a=i.reducer,s=i.prepare}else a=i;r.addCase(n,a).exposeCaseReducer(e,a).exposeAction(e,s?Zl(n,s):Zl(n))}function oye(n){return n._reducerDefinitionType==="asyncThunk"}function lye(n){return n._reducerDefinitionType==="reducerWithPrepare"}function uye({type:n,reducerName:e},t,i,r){if(!r)throw new Error(ol(18));const{payloadCreator:a,fulfilled:s,pending:l,rejected:c,settled:f,options:p}=t,g=r(n,a,p);i.exposeAction(e,g),s&&i.addCase(g.fulfilled,s),l&&i.addCase(g.pending,l),c&&i.addCase(g.rejected,c),f&&i.addMatcher(g.settled,f),i.exposeCaseReducer(e,{fulfilled:s||Mw,pending:l||Mw,rejected:c||Mw,settled:f||Mw})}function Mw(){}var cye="task",D7="listener",L7="completed",Z3="cancelled",fye=`task-${Z3}`,hye=`task-${L7}`,iO=`${D7}-${Z3}`,dye=`${D7}-${L7}`,UM=class{constructor(n){jC(this,"name","TaskAbortError");jC(this,"message");this.code=n,this.message=`${cye} ${Z3} (reason: ${n})`}},Q3=(n,e)=>{if(typeof n!="function")throw new TypeError(ol(32))},kT=()=>{},k7=(n,e=kT)=>(n.catch(e),n),U7=(n,e)=>(n.addEventListener("abort",e,{once:!0}),()=>n.removeEventListener("abort",e)),Wm=n=>{if(n.aborted)throw new UM(n.reason)};function F7(n,e){let t=kT;return new Promise((i,r)=>{const a=()=>r(new UM(n.reason));if(n.aborted){a();return}t=U7(n,a),e.finally(()=>t()).then(i,r)}).finally(()=>{t=kT})}var pye=async(n,e)=>{try{return await Promise.resolve(),{status:"ok",value:await n()}}catch(t){return{status:t instanceof UM?"cancelled":"rejected",error:t}}finally{e==null||e()}},UT=n=>e=>k7(F7(n,e).then(t=>(Wm(n),t))),z7=n=>{const e=UT(n);return t=>e(new Promise(i=>setTimeout(i,t)))},{assign:gy}=Object,iV={},FM="listenerMiddleware",mye=(n,e)=>{const t=i=>U7(n,()=>i.abort(n.reason));return(i,r)=>{Q3(i);const a=new AbortController;t(a);const s=pye(async()=>{Wm(n),Wm(a.signal);const l=await i({pause:UT(a.signal),delay:z7(a.signal),signal:a.signal});return Wm(a.signal),l},()=>a.abort(hye));return r!=null&&r.autoJoin&&e.push(s.catch(kT)),{result:UT(n)(s),cancel(){a.abort(fye)}}}},gye=(n,e)=>{const t=async(i,r)=>{Wm(e);let a=()=>{};const l=[new Promise((c,f)=>{let p=n({predicate:i,effect:(g,v)=>{v.unsubscribe(),c([g,v.getState(),v.getOriginalState()])}});a=()=>{p(),f()}})];r!=null&&l.push(new Promise(c=>setTimeout(c,r,null)));try{const c=await F7(e,Promise.race(l));return Wm(e),c}finally{a()}};return(i,r)=>k7(t(i,r))},B7=n=>{let{type:e,actionCreator:t,matcher:i,predicate:r,effect:a}=n;if(e)r=Zl(e).match;else if(t)e=t.type,r=t.match;else if(i)r=i;else if(!r)throw new Error(ol(21));return Q3(a),{predicate:r,type:e,effect:a}},V7=gy(n=>{const{type:e,predicate:t,effect:i}=B7(n);return{id:eye(),effect:i,type:e,predicate:t,pending:new Set,unsubscribe:()=>{throw new Error(ol(22))}}},{withTypes:()=>V7}),rV=(n,e)=>{const{type:t,effect:i,predicate:r}=B7(e);return Array.from(n.values()).find(a=>(typeof t=="string"?a.type===t:a.predicate===r)&&a.effect===i)},rO=n=>{n.pending.forEach(e=>{e.abort(iO)})},vye=(n,e)=>()=>{for(const t of e.keys())rO(t);n.clear()},aV=(n,e,t)=>{try{n(e,t)}catch(i){setTimeout(()=>{throw i},0)}},j7=gy(Zl(`${FM}/add`),{withTypes:()=>j7}),yye=Zl(`${FM}/removeAll`),H7=gy(Zl(`${FM}/remove`),{withTypes:()=>H7}),_ye=(...n)=>{console.error(`${FM}/error`,...n)},zx=(n={})=>{const e=new Map,t=new Map,i=_=>{const x=t.get(_)??0;t.set(_,x+1)},r=_=>{const x=t.get(_)??1;x===1?t.delete(_):t.set(_,x-1)},{extra:a,onError:s=_ye}=n;Q3(s);const l=_=>(_.unsubscribe=()=>e.delete(_.id),e.set(_.id,_),x=>{_.unsubscribe(),x!=null&&x.cancelActive&&rO(_)}),c=_=>{const x=rV(e,_)??V7(_);return l(x)};gy(c,{withTypes:()=>c});const f=_=>{const x=rV(e,_);return x&&(x.unsubscribe(),_.cancelActive&&rO(x)),!!x};gy(f,{withTypes:()=>f});const p=async(_,x,T,S)=>{const w=new AbortController,I=gye(c,w.signal),R=[];try{_.pending.add(w),i(_),await Promise.resolve(_.effect(x,gy({},T,{getOriginalState:S,condition:(D,B)=>I(D,B).then(Boolean),take:I,delay:z7(w.signal),pause:UT(w.signal),extra:a,signal:w.signal,fork:mye(w.signal,R),unsubscribe:_.unsubscribe,subscribe:()=>{e.set(_.id,_)},cancelActiveListeners:()=>{_.pending.forEach((D,B,z)=>{D!==w&&(D.abort(iO),z.delete(D))})},cancel:()=>{w.abort(iO),_.pending.delete(w)},throwIfCancelled:()=>{Wm(w.signal)}})))}catch(D){D instanceof UM||aV(s,D,{raisedBy:"effect"})}finally{await Promise.all(R),w.abort(dye),r(_),_.pending.delete(w)}},g=vye(e,t);return{middleware:_=>x=>T=>{if(!y7(T))return x(T);if(j7.match(T))return c(T.payload);if(yye.match(T)){g();return}if(H7.match(T))return f(T.payload);let S=_.getState();const w=()=>{if(S===iV)throw new Error(ol(23));return S};let I;try{if(I=x(T),e.size>0){const R=_.getState(),D=Array.from(e.values());for(const B of D){let z=!1;try{z=B.predicate(T,R,S)}catch(k){z=!1,aV(s,k,{raisedBy:"predicate"})}z&&p(B,T,_,w)}}}finally{S=iV}return I},startListening:c,stopListening:f,clearListeners:g}};function ol(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var bye={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},G7=ko({name:"chartLayout",initialState:bye,reducers:{setLayout(n,e){n.layoutType=e.payload},setChartSize(n,e){n.width=e.payload.width,n.height=e.payload.height},setMargin(n,e){var t,i,r,a;n.margin.top=(t=e.payload.top)!==null&&t!==void 0?t:0,n.margin.right=(i=e.payload.right)!==null&&i!==void 0?i:0,n.margin.bottom=(r=e.payload.bottom)!==null&&r!==void 0?r:0,n.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(n,e){n.scale=e.payload}}}),{setMargin:xye,setLayout:Sye,setChartSize:wye,setScale:Eye}=G7.actions,Tye=G7.reducer;function W7(n,e,t){return Array.isArray(n)&&n&&e+t!==0?n.slice(e,t+1):n}function Kn(n){return Number.isFinite(n)}function nf(n){return typeof n=="number"&&n>0&&Number.isFinite(n)}function sV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ay(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sV(Object(t),!0).forEach(function(i){Aye(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):sV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Aye(n,e,t){return(e=Mye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Mye(n){var e=Cye(n,"string");return typeof e=="symbol"?e:e+""}function Cye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ts(n,e,t){return Rs(n)||Rs(e)?t:tf(e)?CM(n,e,t):typeof e=="function"?e(n):t}var Iye=(n,e,t)=>{if(e&&t){var{width:i,height:r}=t,{align:a,verticalAlign:s,layout:l}=e;if((l==="vertical"||l==="horizontal"&&s==="middle")&&a!=="center"&&qt(n[a]))return ay(ay({},n),{},{[a]:n[a]+(i||0)});if((l==="horizontal"||l==="vertical"&&a==="center")&&s!=="middle"&&qt(n[s]))return ay(ay({},n),{},{[s]:n[s]+(r||0)})}return n},lf=(n,e)=>n==="horizontal"&&e==="xAxis"||n==="vertical"&&e==="yAxis"||n==="centric"&&e==="angleAxis"||n==="radial"&&e==="radiusAxis",q7=(n,e,t,i)=>{if(i)return n.map(l=>l.coordinate);var r,a,s=n.map(l=>(l.coordinate===e&&(r=!0),l.coordinate===t&&(a=!0),l.coordinate));return r||s.push(e),a||s.push(t),s},$7=(n,e,t)=>{if(!n)return null;var{duplicateDomain:i,type:r,range:a,scale:s,realScaleType:l,isCategorical:c,categoricalDomain:f,tickCount:p,ticks:g,niceTicks:v,axisType:_}=n;if(!s)return null;var x=l==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,T=r==="category"&&s.bandwidth?s.bandwidth()/x:0;if(T=_==="angleAxis"&&a&&a.length>=2?Wl(a[0]-a[1])*2*T:T,g||v){var S=(g||v||[]).map((w,I)=>{var R=i?i.indexOf(w):w,D=s.map(R);return Kn(D)?{coordinate:D+T,value:w,offset:T,index:I}:null}).filter(Do);return S}return c&&f?f.map((w,I)=>{var R=s.map(w);return Kn(R)?{coordinate:R+T,value:w,index:I,offset:T}:null}).filter(Do):s.ticks&&p!=null?s.ticks(p).map((w,I)=>{var R=s.map(w);return Kn(R)?{coordinate:R+T,value:w,index:I,offset:T}:null}).filter(Do):s.domain().map((w,I)=>{var R=s.map(w);return Kn(R)?{coordinate:R+T,value:i?i[w]:w,index:I,offset:T}:null}).filter(Do)},Rye=n=>{var e,t=n.length;if(!(t<=0)){var i=(e=n[0])===null||e===void 0?void 0:e.length;if(!(i==null||i<=0))for(var r=0;r<i;++r)for(var a=0,s=0,l=0;l<t;++l){var c=n[l],f=c==null?void 0:c[r];if(f!=null){var p=f[1],g=f[0],v=ef(p)?g:p;v>=0?(f[0]=a,a+=v,f[1]=a):(f[0]=s,s+=v,f[1]=s)}}}},Pye=n=>{var e,t=n.length;if(!(t<=0)){var i=(e=n[0])===null||e===void 0?void 0:e.length;if(!(i==null||i<=0))for(var r=0;r<i;++r)for(var a=0,s=0;s<t;++s){var l=n[s],c=l==null?void 0:l[r];if(c!=null){var f=ef(c[1])?c[0]:c[1];f>=0?(c[0]=a,a+=f,c[1]=a):(c[0]=0,c[1]=0)}}}},Nye={sign:Rye,expand:xge,none:sg,silhouette:Sge,wiggle:wge,positive:Pye},Oye=(n,e,t)=>{var i,r=(i=Nye[t])!==null&&i!==void 0?i:sg,a=bge().keys(e).value((l,c)=>Number(ts(l,c,0))).order(XN).offset(r),s=a(n);return s.forEach((l,c)=>{l.forEach((f,p)=>{var g=ts(n[p],e[c],0);Array.isArray(g)&&g.length===2&&qt(g[0])&&qt(g[1])&&(f[0]=g[0],f[1]=g[1])})}),s};function Dye(n){return n==null?void 0:String(n)}function oV(n){var{axis:e,ticks:t,bandSize:i,entry:r,index:a,dataKey:s}=n;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Rs(r[e.dataKey])){var l=n7(t,"value",r[e.dataKey]);if(l)return l.coordinate+i/2}return t!=null&&t[a]?t[a].coordinate+i/2:null}var c=ts(r,Rs(s)?e.dataKey:s),f=e.scale.map(c);return qt(f)?f:null}var Lye=n=>{var e=n.flat(2).filter(qt);return[Math.min(...e),Math.max(...e)]},kye=n=>[n[0]===1/0?0:n[0],n[1]===-1/0?0:n[1]],Uye=(n,e,t)=>{if(n!=null)return kye(Object.keys(n).reduce((i,r)=>{var a=n[r];if(!a)return i;var{stackedData:s}=a,l=s.reduce((c,f)=>{var p=W7(f,e,t),g=Lye(p);return!Kn(g[0])||!Kn(g[1])?c:[Math.min(c[0],g[0]),Math.max(c[1],g[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]))},lV=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,uV=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,FT=(n,e,t)=>{if(n&&n.scale&&n.scale.bandwidth){var i=n.scale.bandwidth();if(!t||i>0)return i}if(n&&e&&e.length>=2){for(var r=IM(e,p=>p.coordinate),a=1/0,s=1,l=r.length;s<l;s++){var c=r[s],f=r[s-1];a=Math.min(((c==null?void 0:c.coordinate)||0)-((f==null?void 0:f.coordinate)||0),a)}return a===1/0?0:a}return t?void 0:0};function cV(n){var{tooltipEntrySettings:e,dataKey:t,payload:i,value:r,name:a}=n;return ay(ay({},e),{},{dataKey:t,payload:i,value:r,name:a})}function X7(n,e){if(n)return String(n);if(typeof e=="string")return e}var Fye=(n,e)=>{if(e==="horizontal")return n.chartX;if(e==="vertical")return n.chartY},zye=(n,e)=>e==="centric"?n.angle:n.radius,_h=n=>n.layout.width,bh=n=>n.layout.height,Bye=n=>n.layout.scale,Y7=n=>n.layout.margin,zM=He(n=>n.cartesianAxis.xAxis,n=>Object.values(n)),BM=He(n=>n.cartesianAxis.yAxis,n=>Object.values(n)),Vye="data-recharts-item-index",jye="data-recharts-item-id",Bx=60;function fV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Cw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fV(Object(t),!0).forEach(function(i){Hye(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):fV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Hye(n,e,t){return(e=Gye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Gye(n){var e=Wye(n,"string");return typeof e=="symbol"?e:e+""}function Wye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var qye=n=>n.brush.height;function $ye(n){var e=BM(n);return e.reduce((t,i)=>{if(i.orientation==="left"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:Bx;return t+r}return t},0)}function Xye(n){var e=BM(n);return e.reduce((t,i)=>{if(i.orientation==="right"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:Bx;return t+r}return t},0)}function Yye(n){var e=zM(n);return e.reduce((t,i)=>i.orientation==="top"&&!i.mirror&&!i.hide?t+i.height:t,0)}function Kye(n){var e=zM(n);return e.reduce((t,i)=>i.orientation==="bottom"&&!i.mirror&&!i.hide?t+i.height:t,0)}var is=He([_h,bh,Y7,qye,$ye,Xye,Yye,Kye,m7,wve],(n,e,t,i,r,a,s,l,c,f)=>{var p={left:(t.left||0)+r,right:(t.right||0)+a},g={top:(t.top||0)+s,bottom:(t.bottom||0)+l},v=Cw(Cw({},g),p),_=v.bottom;v.bottom+=i,v=Iye(v,c,f);var x=n-v.left-v.right,T=e-v.top-v.bottom;return Cw(Cw({brushBottom:_},v),{},{width:Math.max(x,0),height:Math.max(T,0)})}),Zye=He(is,n=>({x:n.left,y:n.top,width:n.width,height:n.height})),K7=He(_h,bh,(n,e)=>({x:0,y:0,width:n,height:e})),Qye=H.createContext(null),Uo=()=>H.useContext(Qye)!=null,VM=n=>n.brush,jM=He([VM,is,Y7],(n,e,t)=>({height:n.height,x:qt(n.x)?n.x:e.left,y:qt(n.y)?n.y:e.top+e.height+e.brushBottom-((t==null?void 0:t.bottom)||0),width:qt(n.width)?n.width:e.width})),uP={},cP={},fP={},hV;function Jye(){return hV||(hV=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,i,{signal:r,edges:a}={}){let s,l=null;const c=a!=null&&a.includes("leading"),f=a==null||a.includes("trailing"),p=()=>{l!==null&&(t.apply(s,l),s=void 0,l=null)},g=()=>{f&&p(),T()};let v=null;const _=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,g()},i)},x=()=>{v!==null&&(clearTimeout(v),v=null)},T=()=>{x(),s=void 0,l=null},S=()=>{p()},w=function(...I){if(r!=null&&r.aborted)return;s=this,l=I;const R=v==null;_(),c&&R&&p()};return w.schedule=_,w.cancel=T,w.flush=S,r==null||r.addEventListener("abort",T,{once:!0}),w}n.debounce=e})(fP)),fP}var dV;function e0e(){return dV||(dV=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Jye();function t(i,r=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:l=!0,maxWait:c}=a,f=Array(2);s&&(f[0]="leading"),l&&(f[1]="trailing");let p,g=null;const v=e.debounce(function(...T){p=i.apply(this,T),g=null},r,{edges:f}),_=function(...T){return c!=null&&(g===null&&(g=Date.now()),Date.now()-g>=c)?(p=i.apply(this,T),g=Date.now(),v.cancel(),v.schedule(),p):(v.apply(this,T),p)},x=()=>(v.flush(),p);return _.cancel=v.cancel,_.flush=x,_}n.debounce=t})(cP)),cP}var pV;function t0e(){return pV||(pV=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=e0e();function t(i,r=0,a={}){const{leading:s=!0,trailing:l=!0}=a;return e.debounce(i,r,{leading:s,maxWait:r,trailing:l})}n.throttle=t})(uP)),uP}var hP,mV;function n0e(){return mV||(mV=1,hP=t0e().throttle),hP}var i0e=n0e();const r0e=Vu(i0e);var zT=function(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(t===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(t===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(t.replace(/%s/g,()=>r[s++]))}},Uc={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},Z7=(n,e,t)=>{var{width:i=Uc.width,height:r=Uc.height,aspect:a,maxHeight:s}=t,l=og(i)?n:Number(i),c=og(r)?e:Number(r);return a&&a>0&&(l?c=l/a:c&&(l=c*a),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:l,calculatedHeight:c}},a0e={width:0,height:0,overflow:"visible"},s0e={width:0,overflowX:"visible"},o0e={height:0,overflowY:"visible"},l0e={},u0e=n=>{var{width:e,height:t}=n,i=og(e),r=og(t);return i&&r?a0e:i?s0e:r?o0e:l0e};function c0e(n){var{width:e,height:t,aspect:i}=n,r=e,a=t;return r===void 0&&a===void 0?(r=Uc.width,a=Uc.height):r===void 0?r=i&&i>0?void 0:Uc.width:a===void 0&&(a=i&&i>0?void 0:Uc.height),{width:r,height:a}}function aO(){return aO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},aO.apply(null,arguments)}function gV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function vV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gV(Object(t),!0).forEach(function(i){f0e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function f0e(n,e,t){return(e=h0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function h0e(n){var e=d0e(n,"string");return typeof e=="symbol"?e:e+""}function d0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Q7=H.createContext(Uc.initialDimension);function p0e(n){return nf(n.width)&&nf(n.height)}function J7(n){var{children:e,width:t,height:i}=n,r=H.useMemo(()=>({width:t,height:i}),[t,i]);return p0e(r)?H.createElement(Q7.Provider,{value:r},e):null}var J3=()=>H.useContext(Q7),m0e=H.forwardRef((n,e)=>{var{aspect:t,initialDimension:i=Uc.initialDimension,width:r,height:a,minWidth:s=Uc.minWidth,minHeight:l,maxHeight:c,children:f,debounce:p=Uc.debounce,id:g,className:v,onResize:_,style:x={}}=n,T=H.useRef(null),S=H.useRef();S.current=_,H.useImperativeHandle(e,()=>T.current);var[w,I]=H.useState({containerWidth:i.width,containerHeight:i.height}),R=H.useCallback((F,P)=>{I(L=>{var V=Math.round(F),W=Math.round(P);return L.containerWidth===V&&L.containerHeight===W?L:{containerWidth:V,containerHeight:W}})},[]);H.useEffect(()=>{if(T.current==null||typeof ResizeObserver>"u")return t0;var F=W=>{var q,ue=W[0];if(ue!=null){var{width:le,height:ee}=ue.contentRect;R(le,ee),(q=S.current)===null||q===void 0||q.call(S,le,ee)}};p>0&&(F=r0e(F,p,{trailing:!0,leading:!1}));var P=new ResizeObserver(F),{width:L,height:V}=T.current.getBoundingClientRect();return R(L,V),P.observe(T.current),()=>{P.disconnect()}},[R,p]);var{containerWidth:D,containerHeight:B}=w;zT(!t||t>0,"The aspect(%s) must be greater than zero.",t);var{calculatedWidth:z,calculatedHeight:k}=Z7(D,B,{width:r,height:a,aspect:t,maxHeight:c});return zT(z!=null&&z>0||k!=null&&k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,k,r,a,s,l,t),H.createElement("div",{id:g?"".concat(g):void 0,className:Zi("recharts-responsive-container",v),style:vV(vV({},x),{},{width:r,height:a,minWidth:s,minHeight:l,maxHeight:c}),ref:T},H.createElement("div",{style:u0e({width:r,height:a})},H.createElement(J7,{width:z,height:k},f)))}),g0e=H.forwardRef((n,e)=>{var t=J3();if(nf(t.width)&&nf(t.height))return n.children;var{width:i,height:r}=c0e({width:n.width,height:n.height,aspect:n.aspect}),{calculatedWidth:a,calculatedHeight:s}=Z7(void 0,void 0,{width:i,height:r,aspect:n.aspect,maxHeight:n.maxHeight});return qt(a)&&qt(s)?H.createElement(J7,{width:a,height:s},n.children):H.createElement(m0e,aO({},n,{width:i,height:r,ref:e}))});function eL(n){if(n)return{x:n.x,y:n.y,upperWidth:"upperWidth"in n?n.upperWidth:n.width,lowerWidth:"lowerWidth"in n?n.lowerWidth:n.width,width:n.width,height:n.height}}var HM=()=>{var n,e=Uo(),t=sn(Zye),i=sn(jM),r=(n=sn(VM))===null||n===void 0?void 0:n.padding;return!e||!i||!r?t:{width:i.width-r.left-r.right,height:i.height-r.top-r.bottom,x:r.left,y:r.top}},v0e={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},eW=()=>{var n;return(n=sn(is))!==null&&n!==void 0?n:v0e},tW=()=>sn(_h),nW=()=>sn(bh),sr=n=>n.layout.layoutType,n0=()=>sn(sr),tL=()=>{var n=n0();if(n==="horizontal"||n==="vertical")return n},iW=n=>{var e=n.layout.layoutType;if(e==="centric"||e==="radial")return e},y0e=()=>{var n=n0();return n!==void 0},Vx=n=>{var e=Ia(),t=Uo(),{width:i,height:r}=n,a=J3(),s=i,l=r;return a&&(s=a.width>0?a.width:i,l=a.height>0?a.height:r),H.useEffect(()=>{!t&&nf(s)&&nf(l)&&e(wye({width:s,height:l}))},[e,t,s,l]),null},rW=Symbol.for("immer-nothing"),yV=Symbol.for("immer-draftable"),ul=Symbol.for("immer-state");function Ru(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var rx=Object.getPrototypeOf;function zy(n){return!!n&&!!n[ul]}function ug(n){var e;return n?aW(n)||Array.isArray(n)||!!n[yV]||!!((e=n.constructor)!=null&&e[yV])||jx(n)||WM(n):!1}var _0e=Object.prototype.constructor.toString(),_V=new WeakMap;function aW(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);if(e===null||e===Object.prototype)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(t===Object)return!0;if(typeof t!="function")return!1;let i=_V.get(t);return i===void 0&&(i=Function.toString.call(t),_V.set(t,i)),i===_0e}function BT(n,e,t=!0){GM(n)===0?(t?Reflect.ownKeys(n):Object.keys(n)).forEach(r=>{e(r,n[r],n)}):n.forEach((i,r)=>e(r,i,n))}function GM(n){const e=n[ul];return e?e.type_:Array.isArray(n)?1:jx(n)?2:WM(n)?3:0}function sO(n,e){return GM(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function sW(n,e,t){const i=GM(n);i===2?n.set(e,t):i===3?n.add(t):n[e]=t}function b0e(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function jx(n){return n instanceof Map}function WM(n){return n instanceof Set}function wm(n){return n.copy_||n.base_}function oO(n,e){if(jx(n))return new Map(n);if(WM(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=aW(n);if(e===!0||e==="class_only"&&!t){const i=Object.getOwnPropertyDescriptors(n);delete i[ul];let r=Reflect.ownKeys(i);for(let a=0;a<r.length;a++){const s=r[a],l=i[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(i[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:n[s]})}return Object.create(rx(n),i)}else{const i=rx(n);if(i!==null&&t)return{...n};const r=Object.create(i);return Object.assign(r,n)}}function nL(n,e=!1){return qM(n)||zy(n)||!ug(n)||(GM(n)>1&&Object.defineProperties(n,{set:Iw,add:Iw,clear:Iw,delete:Iw}),Object.freeze(n),e&&Object.values(n).forEach(t=>nL(t,!0))),n}function x0e(){Ru(2)}var Iw={value:x0e};function qM(n){return n===null||typeof n!="object"?!0:Object.isFrozen(n)}var S0e={};function cg(n){const e=S0e[n];return e||Ru(0,n),e}var ax;function oW(){return ax}function w0e(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function bV(n,e){e&&(cg("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function lO(n){uO(n),n.drafts_.forEach(E0e),n.drafts_=null}function uO(n){n===ax&&(ax=n.parent_)}function xV(n){return ax=w0e(ax,n)}function E0e(n){const e=n[ul];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function SV(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[ul].modified_&&(lO(e),Ru(4)),ug(n)&&(n=VT(e,n),e.parent_||jT(e,n)),e.patches_&&cg("Patches").generateReplacementPatches_(t[ul].base_,n,e.patches_,e.inversePatches_)):n=VT(e,t,[]),lO(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==rW?n:void 0}function VT(n,e,t){if(qM(e))return e;const i=n.immer_.shouldUseStrictIteration(),r=e[ul];if(!r)return BT(e,(a,s)=>wV(n,r,e,a,s,t),i),e;if(r.scope_!==n)return e;if(!r.modified_)return jT(n,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let s=a,l=!1;r.type_===3&&(s=new Set(a),a.clear(),l=!0),BT(s,(c,f)=>wV(n,r,a,c,f,t,l),i),jT(n,a,!1),t&&n.patches_&&cg("Patches").generatePatches_(r,t,n.patches_,n.inversePatches_)}return r.copy_}function wV(n,e,t,i,r,a,s){if(r==null||typeof r!="object"&&!s)return;const l=qM(r);if(!(l&&!s)){if(zy(r)){const c=a&&e&&e.type_!==3&&!sO(e.assigned_,i)?a.concat(i):void 0,f=VT(n,r,c);if(sW(t,i,f),zy(f))n.canAutoFreeze_=!1;else return}else s&&t.add(r);if(ug(r)&&!l){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||e&&e.base_&&e.base_[i]===r&&l)return;VT(n,r),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&(jx(t)?t.has(i):Object.prototype.propertyIsEnumerable.call(t,i))&&jT(n,r)}}}function jT(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&nL(e,t)}function T0e(n,e){const t=Array.isArray(n),i={type_:t?1:0,scope_:e?e.scope_:oW(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,a=iL;t&&(r=[i],a=sx);const{revoke:s,proxy:l}=Proxy.revocable(r,a);return i.draft_=l,i.revoke_=s,l}var iL={get(n,e){if(e===ul)return n;const t=wm(n);if(!sO(t,e))return A0e(n,t,e);const i=t[e];return n.finalized_||!ug(i)?i:i===dP(n.base_,e)?(pP(n),n.copy_[e]=fO(i,n)):i},has(n,e){return e in wm(n)},ownKeys(n){return Reflect.ownKeys(wm(n))},set(n,e,t){const i=lW(wm(n),e);if(i!=null&&i.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const r=dP(wm(n),e),a=r==null?void 0:r[ul];if(a&&a.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(b0e(t,r)&&(t!==void 0||sO(n.base_,e)))return!0;pP(n),cO(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return dP(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,pP(n),cO(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=wm(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty(){Ru(11)},getPrototypeOf(n){return rx(n.base_)},setPrototypeOf(){Ru(12)}},sx={};BT(iL,(n,e)=>{sx[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});sx.deleteProperty=function(n,e){return sx.set.call(this,n,e,void 0)};sx.set=function(n,e,t){return iL.set.call(this,n[0],e,t,n[0])};function dP(n,e){const t=n[ul];return(t?wm(t):n)[e]}function A0e(n,e,t){var r;const i=lW(e,t);return i?"value"in i?i.value:(r=i.get)==null?void 0:r.call(n.draft_):void 0}function lW(n,e){if(!(e in n))return;let t=rx(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=rx(t)}}function cO(n){n.modified_||(n.modified_=!0,n.parent_&&cO(n.parent_))}function pP(n){n.copy_||(n.copy_=oO(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var M0e=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,i)=>{if(typeof e=="function"&&typeof t!="function"){const a=t;t=e;const s=this;return function(c=a,...f){return s.produce(c,p=>t.call(this,p,...f))}}typeof t!="function"&&Ru(6),i!==void 0&&typeof i!="function"&&Ru(7);let r;if(ug(e)){const a=xV(this),s=fO(e,void 0);let l=!0;try{r=t(s),l=!1}finally{l?lO(a):uO(a)}return bV(a,i),SV(r,a)}else if(!e||typeof e!="object"){if(r=t(e),r===void 0&&(r=e),r===rW&&(r=void 0),this.autoFreeze_&&nL(r,!0),i){const a=[],s=[];cg("Patches").generateReplacementPatches_(e,r,a,s),i(a,s)}return r}else Ru(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,c=>e(c,...l));let i,r;return[this.produce(e,t,(s,l)=>{i=s,r=l}),i,r]},typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof(n==null?void 0:n.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),typeof(n==null?void 0:n.useStrictIteration)=="boolean"&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){ug(n)||Ru(8),zy(n)&&(n=C0e(n));const e=xV(this),t=fO(n,void 0);return t[ul].isManual_=!0,uO(e),t}finishDraft(n,e){const t=n&&n[ul];(!t||!t.isManual_)&&Ru(9);const{scope_:i}=t;return bV(i,e),SV(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const r=e[t];if(r.path.length===0&&r.op==="replace"){n=r.value;break}}t>-1&&(e=e.slice(t+1));const i=cg("Patches").applyPatches_;return zy(n)?i(n,e):this.produce(n,r=>i(r,e))}};function fO(n,e){const t=jx(n)?cg("MapSet").proxyMap_(n,e):WM(n)?cg("MapSet").proxySet_(n,e):T0e(n,e);return(e?e.scope_:oW()).drafts_.push(t),t}function C0e(n){return zy(n)||Ru(10,n),uW(n)}function uW(n){if(!ug(n)||qM(n))return n;const e=n[ul];let t,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=oO(n,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else t=oO(n,!0);return BT(t,(r,a)=>{sW(t,r,uW(a))},i),e&&(e.finalized_=!1),t}var I0e=new M0e;I0e.produce;var R0e={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},cW=ko({name:"legend",initialState:R0e,reducers:{setLegendSize(n,e){n.size.width=e.payload.width,n.size.height=e.payload.height},setLegendSettings(n,e){n.settings.align=e.payload.align,n.settings.layout=e.payload.layout,n.settings.verticalAlign=e.payload.verticalAlign,n.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(n,e){n.payload.push(e.payload)},prepare:rr()},replaceLegendPayload:{reducer(n,e){var{prev:t,next:i}=e.payload,r=Fu(n).payload.indexOf(t);r>-1&&(n.payload[r]=i)},prepare:rr()},removeLegendPayload:{reducer(n,e){var t=Fu(n).payload.indexOf(e.payload);t>-1&&n.payload.splice(t,1)},prepare:rr()}}}),{setLegendSize:gNe,setLegendSettings:vNe,addLegendPayload:P0e,replaceLegendPayload:N0e,removeLegendPayload:O0e}=cW.actions,D0e=cW.reducer;function hO(){return hO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},hO.apply(null,arguments)}function EV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function j_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?EV(Object(t),!0).forEach(function(i){L0e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):EV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function L0e(n,e,t){return(e=k0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function k0e(n){var e=U0e(n,"string");return typeof e=="symbol"?e:e+""}function U0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function F0e(n){return Array.isArray(n)&&tf(n[0])&&tf(n[1])?n.join(" ~ "):n}var Gv={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},z0e=n=>{var{separator:e=Gv.separator,contentStyle:t,itemStyle:i,labelStyle:r=Gv.labelStyle,payload:a,formatter:s,itemSorter:l,wrapperClassName:c,labelClassName:f,label:p,labelFormatter:g,accessibilityLayer:v=Gv.accessibilityLayer}=n,_=()=>{if(a&&a.length){var B={padding:0,margin:0},z=(l?IM(a,l):a).map((k,F)=>{if(k.type==="none")return null;var P=k.formatter||s||F0e,{value:L,name:V}=k,W=L,q=V;if(P){var ue=P(L,V,k,F,a);if(Array.isArray(ue))[W,q]=ue;else if(ue!=null)W=ue;else return null}var le=j_(j_({},Gv.itemStyle),{},{color:k.color||Gv.itemStyle.color},i);return H.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(F),style:le},tf(q)?H.createElement("span",{className:"recharts-tooltip-item-name"},q):null,tf(q)?H.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,H.createElement("span",{className:"recharts-tooltip-item-value"},W),H.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return H.createElement("ul",{className:"recharts-tooltip-item-list",style:B},z)}return null},x=j_(j_({},Gv.contentStyle),t),T=j_({margin:0},r),S=!Rs(p),w=S?p:"",I=Zi("recharts-default-tooltip",c),R=Zi("recharts-tooltip-label",f);S&&g&&a!==void 0&&a!==null&&(w=g(p,a));var D=v?{role:"status","aria-live":"assertive"}:{};return H.createElement("div",hO({className:I,style:x},D),H.createElement("p",{className:R,style:T},H.isValidElement(w)?w:"".concat(w)),_())},H_="recharts-tooltip-wrapper",B0e={visibility:"hidden"};function V0e(n){var{coordinate:e,translateX:t,translateY:i}=n;return Zi(H_,{["".concat(H_,"-right")]:qt(t)&&e&&qt(e.x)&&t>=e.x,["".concat(H_,"-left")]:qt(t)&&e&&qt(e.x)&&t<e.x,["".concat(H_,"-bottom")]:qt(i)&&e&&qt(e.y)&&i>=e.y,["".concat(H_,"-top")]:qt(i)&&e&&qt(e.y)&&i<e.y})}function TV(n){var{allowEscapeViewBox:e,coordinate:t,key:i,offset:r,position:a,reverseDirection:s,tooltipDimension:l,viewBox:c,viewBoxDimension:f}=n;if(a&&qt(a[i]))return a[i];var p=t[i]-l-(r>0?r:0),g=t[i]+r;if(e[i])return s[i]?p:g;var v=c[i];if(v==null)return 0;if(s[i]){var _=p,x=v;return _<x?Math.max(g,v):Math.max(p,v)}if(f==null)return 0;var T=g+l,S=v+f;return T>S?Math.max(p,v):Math.max(g,v)}function j0e(n){var{translateX:e,translateY:t,useTranslate3d:i}=n;return{transform:i?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function H0e(n){var{allowEscapeViewBox:e,coordinate:t,offsetTop:i,offsetLeft:r,position:a,reverseDirection:s,tooltipBox:l,useTranslate3d:c,viewBox:f}=n,p,g,v;return l.height>0&&l.width>0&&t?(g=TV({allowEscapeViewBox:e,coordinate:t,key:"x",offset:r,position:a,reverseDirection:s,tooltipDimension:l.width,viewBox:f,viewBoxDimension:f.width}),v=TV({allowEscapeViewBox:e,coordinate:t,key:"y",offset:i,position:a,reverseDirection:s,tooltipDimension:l.height,viewBox:f,viewBoxDimension:f.height}),p=j0e({translateX:g,translateY:v,useTranslate3d:c})):p=B0e,{cssProperties:p,cssClasses:V0e({translateX:g,translateY:v,coordinate:t})}}function AV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Rw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?AV(Object(t),!0).forEach(function(i){dO(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):AV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function dO(n,e,t){return(e=G0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function G0e(n){var e=W0e(n,"string");return typeof e=="symbol"?e:e+""}function W0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class q0e extends H.PureComponent{constructor(){super(...arguments),dO(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),dO(this,"handleKeyDown",e=>{if(e.key==="Escape"){var t,i,r,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(t=(i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==null&&t!==void 0?t:0,y:(r=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((t=this.props.coordinate)===null||t===void 0?void 0:t.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:t,animationDuration:i,animationEasing:r,children:a,coordinate:s,hasPayload:l,isAnimationActive:c,offset:f,position:p,reverseDirection:g,useTranslate3d:v,viewBox:_,wrapperStyle:x,lastBoundingBox:T,innerRef:S,hasPortalFromProps:w}=this.props,I=typeof f=="number"?f:f.x,R=typeof f=="number"?f:f.y,{cssClasses:D,cssProperties:B}=H0e({allowEscapeViewBox:t,coordinate:s,offsetLeft:I,offsetTop:R,position:p,reverseDirection:g,tooltipBox:{height:T.height,width:T.width},useTranslate3d:v,viewBox:_}),z=w?{}:Rw(Rw({transition:c&&e?"transform ".concat(i,"ms ").concat(r):void 0},B),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),k=Rw(Rw({},z),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},x);return H.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:D,style:k,ref:S},a)}}var fW=()=>{var n;return(n=sn(e=>e.rootProps.accessibilityLayer))!==null&&n!==void 0?n:!0};function pO(){return pO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},pO.apply(null,arguments)}function MV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function CV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?MV(Object(t),!0).forEach(function(i){$0e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):MV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function $0e(n,e,t){return(e=X0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function X0e(n){var e=Y0e(n,"string");return typeof e=="symbol"?e:e+""}function Y0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var IV={curveBasisClosed:uge,curveBasisOpen:cge,curveBasis:lge,curveBumpX:sge,curveBumpY:oge,curveLinearClosed:fge,curveLinear:AM,curveMonotoneX:hge,curveMonotoneY:dge,curveNatural:pge,curveStep:mge,curveStepAfter:vge,curveStepBefore:gge},HT=n=>Kn(n.x)&&Kn(n.y),RV=n=>n.base!=null&&HT(n.base)&&HT(n),G_=n=>n.x,W_=n=>n.y,K0e=(n,e)=>{if(typeof n=="function")return n;var t="curve".concat(j3(n));if((t==="curveMonotone"||t==="curveBump")&&e){var i=IV["".concat(t).concat(e==="vertical"?"Y":"X")];if(i)return i}return IV[t]||AM},PV={connectNulls:!1,type:"linear"},Z0e=n=>{var{type:e=PV.type,points:t=[],baseLine:i,layout:r,connectNulls:a=PV.connectNulls}=n,s=K0e(e,r),l=a?t.filter(HT):t;if(Array.isArray(i)){var c,f=t.map((x,T)=>CV(CV({},x),{},{base:i[T]}));r==="vertical"?c=Sw().y(W_).x1(G_).x0(x=>x.base.x):c=Sw().x(G_).y1(W_).y0(x=>x.base.y);var p=c.defined(RV).curve(s),g=a?f.filter(RV):f;return p(g)}var v;r==="vertical"&&qt(i)?v=Sw().y(W_).x1(G_).x0(i):qt(i)?v=Sw().x(G_).y1(W_).y0(i):v=WG().x(G_).y(W_);var _=v.defined(HT).curve(s);return _(l)},nE=n=>{var{className:e,points:t,path:i,pathRef:r}=n,a=n0();if((!t||!t.length)&&!i)return null;var s={type:n.type,points:n.points,baseLine:n.baseLine,layout:n.layout||a,connectNulls:n.connectNulls},l=t&&t.length?Z0e(s):i;return H.createElement("path",pO({},zu(n),H3(n),{className:Zi("recharts-curve",e),d:l===null?void 0:l,ref:r}))},Q0e=["x","y","top","left","width","height","className"];function mO(){return mO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},mO.apply(null,arguments)}function NV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function J0e(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?NV(Object(t),!0).forEach(function(i){e_e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):NV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function e_e(n,e,t){return(e=t_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function t_e(n){var e=n_e(n,"string");return typeof e=="symbol"?e:e+""}function n_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function i_e(n,e){if(n==null)return{};var t,i,r=r_e(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function r_e(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var a_e=(n,e,t,i,r,a)=>"M".concat(n,",").concat(r,"v").concat(i,"M").concat(a,",").concat(e,"h").concat(t),s_e=n=>{var{x:e=0,y:t=0,top:i=0,left:r=0,width:a=0,height:s=0,className:l}=n,c=i_e(n,Q0e),f=J0e({x:e,y:t,top:i,left:r,width:a,height:s},c);return!qt(e)||!qt(t)||!qt(a)||!qt(s)||!qt(i)||!qt(r)?null:H.createElement("path",mO({},Kl(f),{className:Zi("recharts-cross",l),d:a_e(e,t,a,s,i,r)}))};function o_e(n,e,t,i){var r=i/2;return{stroke:"none",fill:"#ccc",x:n==="horizontal"?e.x-r:t.left+.5,y:n==="horizontal"?t.top+.5:e.y-r,width:n==="horizontal"?i:t.width-1,height:n==="horizontal"?t.height-1:i}}function OV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function DV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?OV(Object(t),!0).forEach(function(i){l_e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):OV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function l_e(n,e,t){return(e=u_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function u_e(n){var e=c_e(n,"string");return typeof e=="symbol"?e:e+""}function c_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var f_e=n=>n.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),h_e=(n,e,t)=>n.map(i=>"".concat(f_e(i)," ").concat(e,"ms ").concat(t)).join(","),d_e=(n,e)=>[Object.keys(n),Object.keys(e)].reduce((t,i)=>t.filter(r=>i.includes(r))),ox=(n,e)=>Object.keys(e).reduce((t,i)=>DV(DV({},t),{},{[i]:n(i,e[i])}),{});function LV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function sa(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?LV(Object(t),!0).forEach(function(i){p_e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):LV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function p_e(n,e,t){return(e=m_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function m_e(n){var e=g_e(n,"string");return typeof e=="symbol"?e:e+""}function g_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var GT=(n,e,t)=>n+(e-n)*t,gO=n=>{var{from:e,to:t}=n;return e!==t},hW=(n,e,t)=>{var i=ox((r,a)=>{if(gO(a)){var[s,l]=n(a.from,a.to,a.velocity);return sa(sa({},a),{},{from:s,velocity:l})}return a},e);return t<1?ox((r,a)=>gO(a)&&i[r]!=null?sa(sa({},a),{},{velocity:GT(a.velocity,i[r].velocity,t),from:GT(a.from,i[r].from,t)}):a,e):hW(n,i,t-1)};function v_e(n,e,t,i,r,a){var s,l=i.reduce((v,_)=>sa(sa({},v),{},{[_]:{from:n[_],velocity:0,to:e[_]}}),{}),c=()=>ox((v,_)=>_.from,l),f=()=>!Object.values(l).filter(gO).length,p=null,g=v=>{s||(s=v);var _=v-s,x=_/t.dt;l=hW(t,l,x),r(sa(sa(sa({},n),e),c())),s=v,f()||(p=a.setTimeout(g))};return()=>(p=a.setTimeout(g),()=>{var v;(v=p)===null||v===void 0||v()})}function y_e(n,e,t,i,r,a,s){var l=null,c=r.reduce((g,v)=>{var _=n[v],x=e[v];return _==null||x==null?g:sa(sa({},g),{},{[v]:[_,x]})},{}),f,p=g=>{f||(f=g);var v=(g-f)/i,_=ox((T,S)=>GT(...S,t(v)),c);if(a(sa(sa(sa({},n),e),_)),v<1)l=s.setTimeout(p);else{var x=ox((T,S)=>GT(...S,t(1)),c);a(sa(sa(sa({},n),e),x))}};return()=>(l=s.setTimeout(p),()=>{var g;(g=l)===null||g===void 0||g()})}const __e=(n,e,t,i,r,a)=>{var s=d_e(n,e);return t==null?()=>(r(sa(sa({},n),e)),()=>{}):t.isStepper===!0?v_e(n,e,t,s,r,a):y_e(n,e,t,i,s,r,a)};var WT=1e-4,dW=(n,e)=>[0,3*n,3*e-6*n,3*n-3*e+1],pW=(n,e)=>n.map((t,i)=>t*e**i).reduce((t,i)=>t+i),kV=(n,e)=>t=>{var i=dW(n,e);return pW(i,t)},b_e=(n,e)=>t=>{var i=dW(n,e),r=[...i.map((a,s)=>a*s).slice(1),0];return pW(r,t)},x_e=n=>{var e,t=n.split("(");if(t.length!==2||t[0]!=="cubic-bezier")return null;var i=(e=t[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(i==null||i.length!==4)return null;var r=i.map(a=>parseFloat(a));return[r[0],r[1],r[2],r[3]]},S_e=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t.length===1)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r=x_e(t[0]);if(r)return r}}return t.length===4?t:[0,0,1,1]},w_e=(n,e,t,i)=>{var r=kV(n,t),a=kV(e,i),s=b_e(n,t),l=f=>f>1?1:f<0?0:f,c=f=>{for(var p=f>1?1:f,g=p,v=0;v<8;++v){var _=r(g)-p,x=s(g);if(Math.abs(_-p)<WT||x<WT)return a(g);g=l(g-_/x)}return a(g)};return c.isStepper=!1,c},UV=function(){return w_e(...S_e(...arguments))},E_e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:t=100,damping:i=8,dt:r=17}=e,a=(s,l,c)=>{var f=-(s-l)*t,p=c*i,g=c+(f-p)*r/1e3,v=c*r/1e3+s;return Math.abs(v-l)<WT&&Math.abs(g)<WT?[l,0]:[v,g]};return a.isStepper=!0,a.dt=r,a},T_e=n=>{if(typeof n=="string")switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return UV(n);case"spring":return E_e();default:if(n.split("(")[0]==="cubic-bezier")return UV(n)}return typeof n=="function"?n:null};function A_e(n){var e,t=()=>null,i=!1,r=null,a=s=>{if(!i){if(Array.isArray(s)){if(!s.length)return;var l=s,[c,...f]=l;if(typeof c=="number"){r=n.setTimeout(a.bind(null,f),c);return}a(c),r=n.setTimeout(a.bind(null,f));return}typeof s=="string"&&(e=s,t(e)),typeof s=="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:()=>{i=!0},start:s=>{i=!1,r&&(r(),r=null),a(s)},subscribe:s=>(t=s,()=>{t=()=>null}),getTimeoutController:()=>n}}class M_e{setTimeout(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=performance.now(),r=null,a=s=>{s-i>=t?e(s):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(a))};return r=requestAnimationFrame(a),()=>{r!=null&&cancelAnimationFrame(r)}}}function C_e(){return A_e(new M_e)}var I_e=H.createContext(C_e);function R_e(n,e){var t=H.useContext(I_e);return H.useMemo(()=>e??t(n),[n,e,t])}var P_e=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Hx={isSsr:P_e()},N_e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},FV={t:0},mP={t:1};function mW(n){var e=cl(n,N_e),{isActive:t,canBegin:i,duration:r,easing:a,begin:s,onAnimationEnd:l,onAnimationStart:c,children:f}=e,p=t==="auto"?!Hx.isSsr:t,g=R_e(e.animationId,e.animationManager),[v,_]=H.useState(p?FV:mP),x=H.useRef(null);return H.useEffect(()=>{p||_(mP)},[p]),H.useEffect(()=>{if(!p||!i)return t0;var T=__e(FV,mP,T_e(a),r,_,g.getTimeoutController()),S=()=>{x.current=T()};return g.start([c,s,S,r,l]),()=>{g.stop(),x.current&&x.current(),l()}},[p,i,r,a,s,c,l,g]),f(v.t)}function gW(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",t=H.useRef(ex(e)),i=H.useRef(n);return i.current!==n&&(t.current=ex(e),i.current=n),t.current}var O_e=["radius"],D_e=["radius"],zV,BV,VV,jV,HV,GV,WV,qV,$V,XV;function YV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function KV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?YV(Object(t),!0).forEach(function(i){L_e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):YV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function L_e(n,e,t){return(e=k_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function k_e(n){var e=U_e(n,"string");return typeof e=="symbol"?e:e+""}function U_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qT(){return qT=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},qT.apply(null,arguments)}function ZV(n,e){if(n==null)return{};var t,i,r=F_e(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function F_e(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function Ac(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var QV=(n,e,t,i,r)=>{var a=jd(t),s=jd(i),l=Math.min(Math.abs(a)/2,Math.abs(s)/2),c=s>=0?1:-1,f=a>=0?1:-1,p=s>=0&&a>=0||s<0&&a<0?1:0,g;if(l>0&&Array.isArray(r)){for(var v=[0,0,0,0],_=0,x=4;_<x;_++){var T,S=(T=r[_])!==null&&T!==void 0?T:0;v[_]=S>l?l:S}g=Xa(zV||(zV=Ac(["M",",",""])),n,e+c*v[0]),v[0]>0&&(g+=Xa(BV||(BV=Ac(["A ",",",",0,0,",",",",",""])),v[0],v[0],p,n+f*v[0],e)),g+=Xa(VV||(VV=Ac(["L ",",",""])),n+t-f*v[1],e),v[1]>0&&(g+=Xa(jV||(jV=Ac(["A ",",",",0,0,",`,
        `,",",""])),v[1],v[1],p,n+t,e+c*v[1])),g+=Xa(HV||(HV=Ac(["L ",",",""])),n+t,e+i-c*v[2]),v[2]>0&&(g+=Xa(GV||(GV=Ac(["A ",",",",0,0,",`,
        `,",",""])),v[2],v[2],p,n+t-f*v[2],e+i)),g+=Xa(WV||(WV=Ac(["L ",",",""])),n+f*v[3],e+i),v[3]>0&&(g+=Xa(qV||(qV=Ac(["A ",",",",0,0,",`,
        `,",",""])),v[3],v[3],p,n,e+i-c*v[3])),g+="Z"}else if(l>0&&r===+r&&r>0){var w=Math.min(l,r);g=Xa($V||($V=Ac(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),n,e+c*w,w,w,p,n+f*w,e,n+t-f*w,e,w,w,p,n+t,e+c*w,n+t,e+i-c*w,w,w,p,n+t-f*w,e+i,n+f*w,e+i,w,w,p,n,e+i-c*w)}else g=Xa(XV||(XV=Ac(["M ",","," h "," v "," h "," Z"])),n,e,t,i,-t);return g},JV={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},z_e=n=>{var e=cl(n,JV),t=H.useRef(null),[i,r]=H.useState(-1);H.useEffect(()=>{if(t.current&&t.current.getTotalLength)try{var ie=t.current.getTotalLength();ie&&r(ie)}catch{}},[]);var{x:a,y:s,width:l,height:c,radius:f,className:p}=e,{animationEasing:g,animationDuration:v,animationBegin:_,isAnimationActive:x,isUpdateAnimationActive:T}=e,S=H.useRef(l),w=H.useRef(c),I=H.useRef(a),R=H.useRef(s),D=H.useMemo(()=>({x:a,y:s,width:l,height:c,radius:f}),[a,s,l,c,f]),B=gW(D,"rectangle-");if(a!==+a||s!==+s||l!==+l||c!==+c||l===0||c===0)return null;var z=Zi("recharts-rectangle",p);if(!T){var k=Kl(e),{radius:F}=k,P=ZV(k,O_e);return H.createElement("path",qT({},P,{x:jd(a),y:jd(s),width:jd(l),height:jd(c),radius:typeof f=="number"?f:void 0,className:z,d:QV(a,s,l,c,f)}))}var L=S.current,V=w.current,W=I.current,q=R.current,ue="0px ".concat(i===-1?1:i,"px"),le="".concat(i,"px 0px"),ee=h_e(["strokeDasharray"],v,typeof g=="string"?g:JV.animationEasing);return H.createElement(mW,{animationId:B,key:B,canBegin:i>0,duration:v,easing:g,isActive:T,begin:_},ie=>{var he=Rc(L,l,ie),we=Rc(V,c,ie),Me=Rc(W,a,ie),J=Rc(q,s,ie);t.current&&(S.current=he,w.current=we,I.current=Me,R.current=J);var pe;x?ie>0?pe={transition:ee,strokeDasharray:le}:pe={strokeDasharray:ue}:pe={strokeDasharray:le};var Ee=Kl(e),{radius:Ge}=Ee,ht=ZV(Ee,D_e);return H.createElement("path",qT({},ht,{radius:typeof f=="number"?f:void 0,className:z,d:QV(Me,J,he,we,f),ref:t,style:KV(KV({},pe),e.style)}))})};function e2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function t2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?e2(Object(t),!0).forEach(function(i){B_e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):e2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function B_e(n,e,t){return(e=V_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function V_e(n){var e=j_e(n,"string");return typeof e=="symbol"?e:e+""}function j_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var $T=Math.PI/180,H_e=n=>n*180/Math.PI,Ja=(n,e,t,i)=>({x:n+Math.cos(-$T*i)*t,y:e+Math.sin(-$T*i)*t}),G_e=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(i.left||0)-(i.right||0)),Math.abs(t-(i.top||0)-(i.bottom||0)))/2},W_e=(n,e)=>{var{x:t,y:i}=n,{x:r,y:a}=e;return Math.sqrt((t-r)**2+(i-a)**2)},q_e=(n,e)=>{var{x:t,y:i}=n,{cx:r,cy:a}=e,s=W_e({x:t,y:i},{x:r,y:a});if(s<=0)return{radius:s,angle:0};var l=(t-r)/s,c=Math.acos(l);return i>a&&(c=2*Math.PI-c),{radius:s,angle:H_e(c),angleInRadian:c}},$_e=n=>{var{startAngle:e,endAngle:t}=n,i=Math.floor(e/360),r=Math.floor(t/360),a=Math.min(i,r);return{startAngle:e-a*360,endAngle:t-a*360}},X_e=(n,e)=>{var{startAngle:t,endAngle:i}=e,r=Math.floor(t/360),a=Math.floor(i/360),s=Math.min(r,a);return n+s*360},Y_e=(n,e)=>{var{chartX:t,chartY:i}=n,{radius:r,angle:a}=q_e({x:t,y:i},e),{innerRadius:s,outerRadius:l}=e;if(r<s||r>l||r===0)return null;var{startAngle:c,endAngle:f}=$_e(e),p=a,g;if(c<=f){for(;p>f;)p-=360;for(;p<c;)p+=360;g=p>=c&&p<=f}else{for(;p>c;)p-=360;for(;p<f;)p+=360;g=p>=f&&p<=c}return g?t2(t2({},e),{},{radius:r,angle:X_e(p,e)}):null};function vW(n){var{cx:e,cy:t,radius:i,startAngle:r,endAngle:a}=n,s=Ja(e,t,i,r),l=Ja(e,t,i,a);return{points:[s,l],cx:e,cy:t,radius:i,startAngle:r,endAngle:a}}var n2,i2,r2,a2,s2,o2,l2;function vO(){return vO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},vO.apply(null,arguments)}function Dm(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var K_e=(n,e)=>{var t=Wl(e-n),i=Math.min(Math.abs(e-n),359.999);return t*i},Pw=n=>{var{cx:e,cy:t,radius:i,angle:r,sign:a,isExternal:s,cornerRadius:l,cornerIsExternal:c}=n,f=l*(s?1:-1)+i,p=Math.asin(l/f)/$T,g=c?r:r+a*p,v=Ja(e,t,f,g),_=Ja(e,t,i,g),x=c?r-a*p:r,T=Ja(e,t,f*Math.cos(p*$T),x);return{center:v,circleTangency:_,lineTangency:T,theta:p}},yW=n=>{var{cx:e,cy:t,innerRadius:i,outerRadius:r,startAngle:a,endAngle:s}=n,l=K_e(a,s),c=a+l,f=Ja(e,t,r,a),p=Ja(e,t,r,c),g=Xa(n2||(n2=Dm(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),f.x,f.y,r,r,+(Math.abs(l)>180),+(a>c),p.x,p.y);if(i>0){var v=Ja(e,t,i,a),_=Ja(e,t,i,c);g+=Xa(i2||(i2=Dm(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),_.x,_.y,i,i,+(Math.abs(l)>180),+(a<=c),v.x,v.y)}else g+=Xa(r2||(r2=Dm(["L ",","," Z"])),e,t);return g},Z_e=n=>{var{cx:e,cy:t,innerRadius:i,outerRadius:r,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:l,startAngle:c,endAngle:f}=n,p=Wl(f-c),{circleTangency:g,lineTangency:v,theta:_}=Pw({cx:e,cy:t,radius:r,angle:c,sign:p,cornerRadius:a,cornerIsExternal:l}),{circleTangency:x,lineTangency:T,theta:S}=Pw({cx:e,cy:t,radius:r,angle:f,sign:-p,cornerRadius:a,cornerIsExternal:l}),w=l?Math.abs(c-f):Math.abs(c-f)-_-S;if(w<0)return s?Xa(a2||(a2=Dm(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),v.x,v.y,a,a,a*2,a,a,-a*2):yW({cx:e,cy:t,innerRadius:i,outerRadius:r,startAngle:c,endAngle:f});var I=Xa(s2||(s2=Dm(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),v.x,v.y,a,a,+(p<0),g.x,g.y,r,r,+(w>180),+(p<0),x.x,x.y,a,a,+(p<0),T.x,T.y);if(i>0){var{circleTangency:R,lineTangency:D,theta:B}=Pw({cx:e,cy:t,radius:i,angle:c,sign:p,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),{circleTangency:z,lineTangency:k,theta:F}=Pw({cx:e,cy:t,radius:i,angle:f,sign:-p,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),P=l?Math.abs(c-f):Math.abs(c-f)-B-F;if(P<0&&a===0)return"".concat(I,"L").concat(e,",").concat(t,"Z");I+=Xa(o2||(o2=Dm(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),k.x,k.y,a,a,+(p<0),z.x,z.y,i,i,+(P>180),+(p>0),R.x,R.y,a,a,+(p<0),D.x,D.y)}else I+=Xa(l2||(l2=Dm(["L",",","Z"])),e,t);return I},Q_e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},J_e=n=>{var e=cl(n,Q_e),{cx:t,cy:i,innerRadius:r,outerRadius:a,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:c,startAngle:f,endAngle:p,className:g}=e;if(a<r||f===p)return null;var v=Zi("recharts-sector",g),_=a-r,x=lp(s,_,0,!0),T;return x>0&&Math.abs(f-p)<360?T=Z_e({cx:t,cy:i,innerRadius:r,outerRadius:a,cornerRadius:Math.min(x,_/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:f,endAngle:p}):T=yW({cx:t,cy:i,innerRadius:r,outerRadius:a,startAngle:f,endAngle:p}),H.createElement("path",vO({},Kl(e),{className:v,d:T}))};function ebe(n,e,t){if(n==="horizontal")return[{x:e.x,y:t.top},{x:e.x,y:t.top+t.height}];if(n==="vertical")return[{x:t.left,y:e.y},{x:t.left+t.width,y:e.y}];if(i7(e)){if(n==="centric"){var{cx:i,cy:r,innerRadius:a,outerRadius:s,angle:l}=e,c=Ja(i,r,a,l),f=Ja(i,r,s,l);return[{x:c.x,y:c.y},{x:f.x,y:f.y}]}return vW(e)}}var gP={},vP={},yP={},u2;function tbe(){return u2||(u2=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=d7();function t(i){return e.isSymbol(i)?NaN:Number(i)}n.toNumber=t})(yP)),yP}var c2;function nbe(){return c2||(c2=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=tbe();function t(i){return i?(i=e.toNumber(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}n.toFinite=t})(vP)),vP}var f2;function ibe(){return f2||(f2=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=p7(),t=nbe();function i(r,a,s){s&&typeof s!="number"&&e.isIterateeCall(r,a,s)&&(a=s=void 0),r=t.toFinite(r),a===void 0?(a=r,r=0):a=t.toFinite(a),s=s===void 0?r<a?1:-1:t.toFinite(s);const l=Math.max(Math.ceil((a-r)/(s||1)),0),c=new Array(l);for(let f=0;f<l;f++)c[f]=r,r+=s;return c}n.range=i})(gP)),gP}var _P,h2;function rbe(){return h2||(h2=1,_P=ibe().range),_P}var abe=rbe();const _W=Vu(abe);function Yd(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function sbe(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function rL(n){let e,t,i;n.length!==2?(e=Yd,t=(l,c)=>Yd(n(l),c),i=(l,c)=>n(l)-c):(e=n===Yd||n===sbe?n:obe,t=n,i=n);function r(l,c,f=0,p=l.length){if(f<p){if(e(c,c)!==0)return p;do{const g=f+p>>>1;t(l[g],c)<0?f=g+1:p=g}while(f<p)}return f}function a(l,c,f=0,p=l.length){if(f<p){if(e(c,c)!==0)return p;do{const g=f+p>>>1;t(l[g],c)<=0?f=g+1:p=g}while(f<p)}return f}function s(l,c,f=0,p=l.length){const g=r(l,c,f,p-1);return g>f&&i(l[g-1],c)>-i(l[g],c)?g-1:g}return{left:r,center:s,right:a}}function obe(){return 0}function bW(n){return n===null?NaN:+n}function*lbe(n,e){for(let t of n)t!=null&&(t=+t)>=t&&(yield t)}const ube=rL(Yd),Gx=ube.right;rL(bW).center;class d2 extends Map{constructor(e,t=hbe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(p2(this,e))}has(e){return super.has(p2(this,e))}set(e,t){return super.set(cbe(this,e),t)}delete(e){return super.delete(fbe(this,e))}}function p2({_intern:n,_key:e},t){const i=e(t);return n.has(i)?n.get(i):t}function cbe({_intern:n,_key:e},t){const i=e(t);return n.has(i)?n.get(i):(n.set(i,t),t)}function fbe({_intern:n,_key:e},t){const i=e(t);return n.has(i)&&(t=n.get(i),n.delete(i)),t}function hbe(n){return n!==null&&typeof n=="object"?n.valueOf():n}function dbe(n=Yd){if(n===Yd)return xW;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const i=n(e,t);return i||i===0?i:(n(t,t)===0)-(n(e,e)===0)}}function xW(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0)}const pbe=Math.sqrt(50),mbe=Math.sqrt(10),gbe=Math.sqrt(2);function XT(n,e,t){const i=(e-n)/Math.max(0,t),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),s=a>=pbe?10:a>=mbe?5:a>=gbe?2:1;let l,c,f;return r<0?(f=Math.pow(10,-r)/s,l=Math.round(n*f),c=Math.round(e*f),l/f<n&&++l,c/f>e&&--c,f=-f):(f=Math.pow(10,r)*s,l=Math.round(n/f),c=Math.round(e/f),l*f<n&&++l,c*f>e&&--c),c<l&&.5<=t&&t<2?XT(n,e,t*2):[l,c,f]}function yO(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const i=e<n,[r,a,s]=i?XT(e,n,t):XT(n,e,t);if(!(a>=r))return[];const l=a-r+1,c=new Array(l);if(i)if(s<0)for(let f=0;f<l;++f)c[f]=(a-f)/-s;else for(let f=0;f<l;++f)c[f]=(a-f)*s;else if(s<0)for(let f=0;f<l;++f)c[f]=(r+f)/-s;else for(let f=0;f<l;++f)c[f]=(r+f)*s;return c}function _O(n,e,t){return e=+e,n=+n,t=+t,XT(n,e,t)[2]}function bO(n,e,t){e=+e,n=+n,t=+t;const i=e<n,r=i?_O(e,n,t):_O(n,e,t);return(i?-1:1)*(r<0?1/-r:r)}function m2(n,e){let t;for(const i of n)i!=null&&(t<i||t===void 0&&i>=i)&&(t=i);return t}function g2(n,e){let t;for(const i of n)i!=null&&(t>i||t===void 0&&i>=i)&&(t=i);return t}function SW(n,e,t=0,i=1/0,r){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),i=Math.floor(Math.min(n.length-1,i)),!(t<=e&&e<=i))return n;for(r=r===void 0?xW:dbe(r);i>t;){if(i-t>600){const c=i-t+1,f=e-t+1,p=Math.log(c),g=.5*Math.exp(2*p/3),v=.5*Math.sqrt(p*g*(c-g)/c)*(f-c/2<0?-1:1),_=Math.max(t,Math.floor(e-f*g/c+v)),x=Math.min(i,Math.floor(e+(c-f)*g/c+v));SW(n,e,_,x,r)}const a=n[e];let s=t,l=i;for(q_(n,t,e),r(n[i],a)>0&&q_(n,t,i);s<l;){for(q_(n,s,l),++s,--l;r(n[s],a)<0;)++s;for(;r(n[l],a)>0;)--l}r(n[t],a)===0?q_(n,t,l):(++l,q_(n,l,i)),l<=e&&(t=l+1),e<=l&&(i=l-1)}return n}function q_(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}function vbe(n,e,t){if(n=Float64Array.from(lbe(n)),!(!(i=n.length)||isNaN(e=+e))){if(e<=0||i<2)return g2(n);if(e>=1)return m2(n);var i,r=(i-1)*e,a=Math.floor(r),s=m2(SW(n,a).subarray(0,a+1)),l=g2(n.subarray(a+1));return s+(l-s)*(r-a)}}function ybe(n,e,t=bW){if(!(!(i=n.length)||isNaN(e=+e))){if(e<=0||i<2)return+t(n[0],0,n);if(e>=1)return+t(n[i-1],i-1,n);var i,r=(i-1)*e,a=Math.floor(r),s=+t(n[a],a,n),l=+t(n[a+1],a+1,n);return s+(l-s)*(r-a)}}function _be(n,e,t){n=+n,e=+e,t=(r=arguments.length)<2?(e=n,n=0,1):r<3?1:+t;for(var i=-1,r=Math.max(0,Math.ceil((e-n)/t))|0,a=new Array(r);++i<r;)a[i]=n+i*t;return a}function eu(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function xh(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const xO=Symbol("implicit");function aL(){var n=new d2,e=[],t=[],i=xO;function r(a){let s=n.get(a);if(s===void 0){if(i!==xO)return i;n.set(a,s=e.push(a)-1)}return t[s%t.length]}return r.domain=function(a){if(!arguments.length)return e.slice();e=[],n=new d2;for(const s of a)n.has(s)||n.set(s,e.push(s)-1);return r},r.range=function(a){return arguments.length?(t=Array.from(a),r):t.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return aL(e,t).unknown(i)},eu.apply(r,arguments),r}function sL(){var n=aL().unknown(void 0),e=n.domain,t=n.range,i=0,r=1,a,s,l=!1,c=0,f=0,p=.5;delete n.unknown;function g(){var v=e().length,_=r<i,x=_?r:i,T=_?i:r;a=(T-x)/Math.max(1,v-c+f*2),l&&(a=Math.floor(a)),x+=(T-x-a*(v-c))*p,s=a*(1-c),l&&(x=Math.round(x),s=Math.round(s));var S=_be(v).map(function(w){return x+a*w});return t(_?S.reverse():S)}return n.domain=function(v){return arguments.length?(e(v),g()):e()},n.range=function(v){return arguments.length?([i,r]=v,i=+i,r=+r,g()):[i,r]},n.rangeRound=function(v){return[i,r]=v,i=+i,r=+r,l=!0,g()},n.bandwidth=function(){return s},n.step=function(){return a},n.round=function(v){return arguments.length?(l=!!v,g()):l},n.padding=function(v){return arguments.length?(c=Math.min(1,f=+v),g()):c},n.paddingInner=function(v){return arguments.length?(c=Math.min(1,v),g()):c},n.paddingOuter=function(v){return arguments.length?(f=+v,g()):f},n.align=function(v){return arguments.length?(p=Math.max(0,Math.min(1,v)),g()):p},n.copy=function(){return sL(e(),[i,r]).round(l).paddingInner(c).paddingOuter(f).align(p)},eu.apply(g(),arguments)}function wW(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return wW(e())},n}function bbe(){return wW(sL.apply(null,arguments).paddingInner(1))}function oL(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function EW(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function Wx(){}var lx=.7,YT=1/lx,vy="\\s*([+-]?\\d+)\\s*",ux="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xbe=/^#([0-9a-f]{3,8})$/,Sbe=new RegExp(`^rgb\\(${vy},${vy},${vy}\\)$`),wbe=new RegExp(`^rgb\\(${Wc},${Wc},${Wc}\\)$`),Ebe=new RegExp(`^rgba\\(${vy},${vy},${vy},${ux}\\)$`),Tbe=new RegExp(`^rgba\\(${Wc},${Wc},${Wc},${ux}\\)$`),Abe=new RegExp(`^hsl\\(${ux},${Wc},${Wc}\\)$`),Mbe=new RegExp(`^hsla\\(${ux},${Wc},${Wc},${ux}\\)$`),v2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oL(Wx,cx,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:y2,formatHex:y2,formatHex8:Cbe,formatHsl:Ibe,formatRgb:_2,toString:_2});function y2(){return this.rgb().formatHex()}function Cbe(){return this.rgb().formatHex8()}function Ibe(){return TW(this).formatHsl()}function _2(){return this.rgb().formatRgb()}function cx(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=xbe.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?b2(e):t===3?new Lo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Nw(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Nw(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Sbe.exec(n))?new Lo(e[1],e[2],e[3],1):(e=wbe.exec(n))?new Lo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ebe.exec(n))?Nw(e[1],e[2],e[3],e[4]):(e=Tbe.exec(n))?Nw(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Abe.exec(n))?w2(e[1],e[2]/100,e[3]/100,1):(e=Mbe.exec(n))?w2(e[1],e[2]/100,e[3]/100,e[4]):v2.hasOwnProperty(n)?b2(v2[n]):n==="transparent"?new Lo(NaN,NaN,NaN,0):null}function b2(n){return new Lo(n>>16&255,n>>8&255,n&255,1)}function Nw(n,e,t,i){return i<=0&&(n=e=t=NaN),new Lo(n,e,t,i)}function Rbe(n){return n instanceof Wx||(n=cx(n)),n?(n=n.rgb(),new Lo(n.r,n.g,n.b,n.opacity)):new Lo}function SO(n,e,t,i){return arguments.length===1?Rbe(n):new Lo(n,e,t,i??1)}function Lo(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}oL(Lo,SO,EW(Wx,{brighter(n){return n=n==null?YT:Math.pow(YT,n),new Lo(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?lx:Math.pow(lx,n),new Lo(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Lo(qm(this.r),qm(this.g),qm(this.b),KT(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:x2,formatHex:x2,formatHex8:Pbe,formatRgb:S2,toString:S2}));function x2(){return`#${Lm(this.r)}${Lm(this.g)}${Lm(this.b)}`}function Pbe(){return`#${Lm(this.r)}${Lm(this.g)}${Lm(this.b)}${Lm((isNaN(this.opacity)?1:this.opacity)*255)}`}function S2(){const n=KT(this.opacity);return`${n===1?"rgb(":"rgba("}${qm(this.r)}, ${qm(this.g)}, ${qm(this.b)}${n===1?")":`, ${n})`}`}function KT(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function qm(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Lm(n){return n=qm(n),(n<16?"0":"")+n.toString(16)}function w2(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Pu(n,e,t,i)}function TW(n){if(n instanceof Pu)return new Pu(n.h,n.s,n.l,n.opacity);if(n instanceof Wx||(n=cx(n)),!n)return new Pu;if(n instanceof Pu)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),a=Math.max(e,t,i),s=NaN,l=a-r,c=(a+r)/2;return l?(e===a?s=(t-i)/l+(t<i)*6:t===a?s=(i-e)/l+2:s=(e-t)/l+4,l/=c<.5?a+r:2-a-r,s*=60):l=c>0&&c<1?0:s,new Pu(s,l,c,n.opacity)}function Nbe(n,e,t,i){return arguments.length===1?TW(n):new Pu(n,e,t,i??1)}function Pu(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}oL(Pu,Nbe,EW(Wx,{brighter(n){return n=n==null?YT:Math.pow(YT,n),new Pu(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?lx:Math.pow(lx,n),new Pu(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new Lo(bP(n>=240?n-240:n+120,r,i),bP(n,r,i),bP(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new Pu(E2(this.h),Ow(this.s),Ow(this.l),KT(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=KT(this.opacity);return`${n===1?"hsl(":"hsla("}${E2(this.h)}, ${Ow(this.s)*100}%, ${Ow(this.l)*100}%${n===1?")":`, ${n})`}`}}));function E2(n){return n=(n||0)%360,n<0?n+360:n}function Ow(n){return Math.max(0,Math.min(1,n||0))}function bP(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const lL=n=>()=>n;function Obe(n,e){return function(t){return n+t*e}}function Dbe(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function Lbe(n){return(n=+n)==1?AW:function(e,t){return t-e?Dbe(e,t,n):lL(isNaN(e)?t:e)}}function AW(n,e){var t=e-n;return t?Obe(n,t):lL(isNaN(n)?e:n)}const T2=(function n(e){var t=Lbe(e);function i(r,a){var s=t((r=SO(r)).r,(a=SO(a)).r),l=t(r.g,a.g),c=t(r.b,a.b),f=AW(r.opacity,a.opacity);return function(p){return r.r=s(p),r.g=l(p),r.b=c(p),r.opacity=f(p),r+""}}return i.gamma=n,i})(1);function kbe(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,i=e.slice(),r;return function(a){for(r=0;r<t;++r)i[r]=n[r]*(1-a)+e[r]*a;return i}}function Ube(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Fbe(n,e){var t=e?e.length:0,i=n?Math.min(t,n.length):0,r=new Array(i),a=new Array(t),s;for(s=0;s<i;++s)r[s]=i0(n[s],e[s]);for(;s<t;++s)a[s]=e[s];return function(l){for(s=0;s<i;++s)a[s]=r[s](l);return a}}function zbe(n,e){var t=new Date;return n=+n,e=+e,function(i){return t.setTime(n*(1-i)+e*i),t}}function ZT(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function Bbe(n,e){var t={},i={},r;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in n?t[r]=i0(n[r],e[r]):i[r]=e[r];return function(a){for(r in t)i[r]=t[r](a);return i}}var wO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xP=new RegExp(wO.source,"g");function Vbe(n){return function(){return n}}function jbe(n){return function(e){return n(e)+""}}function Hbe(n,e){var t=wO.lastIndex=xP.lastIndex=0,i,r,a,s=-1,l=[],c=[];for(n=n+"",e=e+"";(i=wO.exec(n))&&(r=xP.exec(e));)(a=r.index)>t&&(a=e.slice(t,a),l[s]?l[s]+=a:l[++s]=a),(i=i[0])===(r=r[0])?l[s]?l[s]+=r:l[++s]=r:(l[++s]=null,c.push({i:s,x:ZT(i,r)})),t=xP.lastIndex;return t<e.length&&(a=e.slice(t),l[s]?l[s]+=a:l[++s]=a),l.length<2?c[0]?jbe(c[0].x):Vbe(e):(e=c.length,function(f){for(var p=0,g;p<e;++p)l[(g=c[p]).i]=g.x(f);return l.join("")})}function i0(n,e){var t=typeof e,i;return e==null||t==="boolean"?lL(e):(t==="number"?ZT:t==="string"?(i=cx(e))?(e=i,T2):Hbe:e instanceof cx?T2:e instanceof Date?zbe:Ube(e)?kbe:Array.isArray(e)?Fbe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Bbe:ZT)(n,e)}function uL(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function Gbe(n,e){e===void 0&&(e=n,n=i0);for(var t=0,i=e.length-1,r=e[0],a=new Array(i<0?0:i);t<i;)a[t]=n(r,r=e[++t]);return function(s){var l=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return a[l](s-l)}}function Wbe(n){return function(){return n}}function QT(n){return+n}var A2=[0,1];function Qs(n){return n}function EO(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:Wbe(isNaN(e)?NaN:.5)}function qbe(n,e){var t;return n>e&&(t=n,n=e,e=t),function(i){return Math.max(n,Math.min(e,i))}}function $be(n,e,t){var i=n[0],r=n[1],a=e[0],s=e[1];return r<i?(i=EO(r,i),a=t(s,a)):(i=EO(i,r),a=t(a,s)),function(l){return a(i(l))}}function Xbe(n,e,t){var i=Math.min(n.length,e.length)-1,r=new Array(i),a=new Array(i),s=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++s<i;)r[s]=EO(n[s],n[s+1]),a[s]=t(e[s],e[s+1]);return function(l){var c=Gx(n,l,1,i)-1;return a[c](r[c](l))}}function qx(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function $M(){var n=A2,e=A2,t=i0,i,r,a,s=Qs,l,c,f;function p(){var v=Math.min(n.length,e.length);return s!==Qs&&(s=qbe(n[0],n[v-1])),l=v>2?Xbe:$be,c=f=null,g}function g(v){return v==null||isNaN(v=+v)?a:(c||(c=l(n.map(i),e,t)))(i(s(v)))}return g.invert=function(v){return s(r((f||(f=l(e,n.map(i),ZT)))(v)))},g.domain=function(v){return arguments.length?(n=Array.from(v,QT),p()):n.slice()},g.range=function(v){return arguments.length?(e=Array.from(v),p()):e.slice()},g.rangeRound=function(v){return e=Array.from(v),t=uL,p()},g.clamp=function(v){return arguments.length?(s=v?!0:Qs,p()):s!==Qs},g.interpolate=function(v){return arguments.length?(t=v,p()):t},g.unknown=function(v){return arguments.length?(a=v,g):a},function(v,_){return i=v,r=_,p()}}function cL(){return $M()(Qs,Qs)}function Ybe(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function JT(n,e){if(!isFinite(n)||n===0)return null;var t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"),i=n.slice(0,t);return[i.length>1?i[0]+i.slice(2):i,+n.slice(t+1)]}function By(n){return n=JT(Math.abs(n)),n?n[1]:NaN}function Kbe(n,e){return function(t,i){for(var r=t.length,a=[],s=0,l=n[0],c=0;r>0&&l>0&&(c+l+1>i&&(l=Math.max(1,i-c)),a.push(t.substring(r-=l,r+l)),!((c+=l+1)>i));)l=n[s=(s+1)%n.length];return a.reverse().join(e)}}function Zbe(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var Qbe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fx(n){if(!(e=Qbe.exec(n)))throw new Error("invalid format: "+n);var e;return new fL({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}fx.prototype=fL.prototype;function fL(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}fL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Jbe(n){e:for(var e=n.length,t=1,i=-1,r;t<e;++t)switch(n[t]){case".":i=r=t;break;case"0":i===0&&(i=t),r=t;break;default:if(!+n[t])break e;i>0&&(i=0);break}return i>0?n.slice(0,i)+n.slice(r+1):n}var eA;function exe(n,e){var t=JT(n,e);if(!t)return eA=void 0,n.toPrecision(e);var i=t[0],r=t[1],a=r-(eA=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+JT(n,Math.max(0,e+a-1))[0]}function M2(n,e){var t=JT(n,e);if(!t)return n+"";var i=t[0],r=t[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const C2={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:Ybe,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>M2(n*100,e),r:M2,s:exe,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function I2(n){return n}var R2=Array.prototype.map,P2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function txe(n){var e=n.grouping===void 0||n.thousands===void 0?I2:Kbe(R2.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",i=n.currency===void 0?"":n.currency[1]+"",r=n.decimal===void 0?".":n.decimal+"",a=n.numerals===void 0?I2:Zbe(R2.call(n.numerals,String)),s=n.percent===void 0?"%":n.percent+"",l=n.minus===void 0?"":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function f(g,v){g=fx(g);var _=g.fill,x=g.align,T=g.sign,S=g.symbol,w=g.zero,I=g.width,R=g.comma,D=g.precision,B=g.trim,z=g.type;z==="n"?(R=!0,z="g"):C2[z]||(D===void 0&&(D=12),B=!0,z="g"),(w||_==="0"&&x==="=")&&(w=!0,_="0",x="=");var k=(v&&v.prefix!==void 0?v.prefix:"")+(S==="$"?t:S==="#"&&/[boxX]/.test(z)?"0"+z.toLowerCase():""),F=(S==="$"?i:/[%p]/.test(z)?s:"")+(v&&v.suffix!==void 0?v.suffix:""),P=C2[z],L=/[defgprs%]/.test(z);D=D===void 0?6:/[gprs]/.test(z)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D));function V(W){var q=k,ue=F,le,ee,ie;if(z==="c")ue=P(W)+ue,W="";else{W=+W;var he=W<0||1/W<0;if(W=isNaN(W)?c:P(Math.abs(W),D),B&&(W=Jbe(W)),he&&+W==0&&T!=="+"&&(he=!1),q=(he?T==="("?T:l:T==="-"||T==="("?"":T)+q,ue=(z==="s"&&!isNaN(W)&&eA!==void 0?P2[8+eA/3]:"")+ue+(he&&T==="("?")":""),L){for(le=-1,ee=W.length;++le<ee;)if(ie=W.charCodeAt(le),48>ie||ie>57){ue=(ie===46?r+W.slice(le+1):W.slice(le))+ue,W=W.slice(0,le);break}}}R&&!w&&(W=e(W,1/0));var we=q.length+W.length+ue.length,Me=we<I?new Array(I-we+1).join(_):"";switch(R&&w&&(W=e(Me+W,Me.length?I-ue.length:1/0),Me=""),x){case"<":W=q+W+ue+Me;break;case"=":W=q+Me+W+ue;break;case"^":W=Me.slice(0,we=Me.length>>1)+q+W+ue+Me.slice(we);break;default:W=Me+q+W+ue;break}return a(W)}return V.toString=function(){return g+""},V}function p(g,v){var _=Math.max(-8,Math.min(8,Math.floor(By(v)/3)))*3,x=Math.pow(10,-_),T=f((g=fx(g),g.type="f",g),{suffix:P2[8+_/3]});return function(S){return T(x*S)}}return{format:f,formatPrefix:p}}var Dw,hL,MW;nxe({thousands:",",grouping:[3],currency:["$",""]});function nxe(n){return Dw=txe(n),hL=Dw.format,MW=Dw.formatPrefix,Dw}function ixe(n){return Math.max(0,-By(Math.abs(n)))}function rxe(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(By(e)/3)))*3-By(Math.abs(n)))}function axe(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,By(e)-By(n))+1}function CW(n,e,t,i){var r=bO(n,e,t),a;switch(i=fx(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(n),Math.abs(e));return i.precision==null&&!isNaN(a=rxe(r,s))&&(i.precision=a),MW(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=axe(r,Math.max(Math.abs(n),Math.abs(e))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=ixe(r))&&(i.precision=a-(i.type==="%")*2);break}}return hL(i)}function vp(n){var e=n.domain;return n.ticks=function(t){var i=e();return yO(i[0],i[i.length-1],t??10)},n.tickFormat=function(t,i){var r=e();return CW(r[0],r[r.length-1],t??10,i)},n.nice=function(t){t==null&&(t=10);var i=e(),r=0,a=i.length-1,s=i[r],l=i[a],c,f,p=10;for(l<s&&(f=s,s=l,l=f,f=r,r=a,a=f);p-- >0;){if(f=_O(s,l,t),f===c)return i[r]=s,i[a]=l,e(i);if(f>0)s=Math.floor(s/f)*f,l=Math.ceil(l/f)*f;else if(f<0)s=Math.ceil(s*f)/f,l=Math.floor(l*f)/f;else break;c=f}return n},n}function IW(){var n=cL();return n.copy=function(){return qx(n,IW())},eu.apply(n,arguments),vp(n)}function RW(n){var e;function t(i){return i==null||isNaN(i=+i)?e:i}return t.invert=t,t.domain=t.range=function(i){return arguments.length?(n=Array.from(i,QT),t):n.slice()},t.unknown=function(i){return arguments.length?(e=i,t):e},t.copy=function(){return RW(n).unknown(e)},n=arguments.length?Array.from(n,QT):[0,1],vp(t)}function PW(n,e){n=n.slice();var t=0,i=n.length-1,r=n[t],a=n[i],s;return a<r&&(s=t,t=i,i=s,s=r,r=a,a=s),n[t]=e.floor(r),n[i]=e.ceil(a),n}function N2(n){return Math.log(n)}function O2(n){return Math.exp(n)}function sxe(n){return-Math.log(-n)}function oxe(n){return-Math.exp(-n)}function lxe(n){return isFinite(n)?+("1e"+n):n<0?0:n}function uxe(n){return n===10?lxe:n===Math.E?Math.exp:e=>Math.pow(n,e)}function cxe(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function D2(n){return(e,t)=>-n(-e,t)}function dL(n){const e=n(N2,O2),t=e.domain;let i=10,r,a;function s(){return r=cxe(i),a=uxe(i),t()[0]<0?(r=D2(r),a=D2(a),n(sxe,oxe)):n(N2,O2),e}return e.base=function(l){return arguments.length?(i=+l,s()):i},e.domain=function(l){return arguments.length?(t(l),s()):t()},e.ticks=l=>{const c=t();let f=c[0],p=c[c.length-1];const g=p<f;g&&([f,p]=[p,f]);let v=r(f),_=r(p),x,T;const S=l==null?10:+l;let w=[];if(!(i%1)&&_-v<S){if(v=Math.floor(v),_=Math.ceil(_),f>0){for(;v<=_;++v)for(x=1;x<i;++x)if(T=v<0?x/a(-v):x*a(v),!(T<f)){if(T>p)break;w.push(T)}}else for(;v<=_;++v)for(x=i-1;x>=1;--x)if(T=v>0?x/a(-v):x*a(v),!(T<f)){if(T>p)break;w.push(T)}w.length*2<S&&(w=yO(f,p,S))}else w=yO(v,_,Math.min(_-v,S)).map(a);return g?w.reverse():w},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=i===10?"s":","),typeof c!="function"&&(!(i%1)&&(c=fx(c)).precision==null&&(c.trim=!0),c=hL(c)),l===1/0)return c;const f=Math.max(1,i*l/e.ticks().length);return p=>{let g=p/a(Math.round(r(p)));return g*i<i-.5&&(g*=i),g<=f?c(p):""}},e.nice=()=>t(PW(t(),{floor:l=>a(Math.floor(r(l))),ceil:l=>a(Math.ceil(r(l)))})),e}function NW(){const n=dL($M()).domain([1,10]);return n.copy=()=>qx(n,NW()).base(n.base()),eu.apply(n,arguments),n}function L2(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function k2(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function pL(n){var e=1,t=n(L2(e),k2(e));return t.constant=function(i){return arguments.length?n(L2(e=+i),k2(e)):e},vp(t)}function OW(){var n=pL($M());return n.copy=function(){return qx(n,OW()).constant(n.constant())},eu.apply(n,arguments)}function U2(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function fxe(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function hxe(n){return n<0?-n*n:n*n}function mL(n){var e=n(Qs,Qs),t=1;function i(){return t===1?n(Qs,Qs):t===.5?n(fxe,hxe):n(U2(t),U2(1/t))}return e.exponent=function(r){return arguments.length?(t=+r,i()):t},vp(e)}function gL(){var n=mL($M());return n.copy=function(){return qx(n,gL()).exponent(n.exponent())},eu.apply(n,arguments),n}function dxe(){return gL.apply(null,arguments).exponent(.5)}function F2(n){return Math.sign(n)*n*n}function pxe(n){return Math.sign(n)*Math.sqrt(Math.abs(n))}function DW(){var n=cL(),e=[0,1],t=!1,i;function r(a){var s=pxe(n(a));return isNaN(s)?i:t?Math.round(s):s}return r.invert=function(a){return n.invert(F2(a))},r.domain=function(a){return arguments.length?(n.domain(a),r):n.domain()},r.range=function(a){return arguments.length?(n.range((e=Array.from(a,QT)).map(F2)),r):e.slice()},r.rangeRound=function(a){return r.range(a).round(!0)},r.round=function(a){return arguments.length?(t=!!a,r):t},r.clamp=function(a){return arguments.length?(n.clamp(a),r):n.clamp()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return DW(n.domain(),e).round(t).clamp(n.clamp()).unknown(i)},eu.apply(r,arguments),vp(r)}function LW(){var n=[],e=[],t=[],i;function r(){var s=0,l=Math.max(1,e.length);for(t=new Array(l-1);++s<l;)t[s-1]=ybe(n,s/l);return a}function a(s){return s==null||isNaN(s=+s)?i:e[Gx(t,s)]}return a.invertExtent=function(s){var l=e.indexOf(s);return l<0?[NaN,NaN]:[l>0?t[l-1]:n[0],l<t.length?t[l]:n[n.length-1]]},a.domain=function(s){if(!arguments.length)return n.slice();n=[];for(let l of s)l!=null&&!isNaN(l=+l)&&n.push(l);return n.sort(Yd),r()},a.range=function(s){return arguments.length?(e=Array.from(s),r()):e.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.quantiles=function(){return t.slice()},a.copy=function(){return LW().domain(n).range(e).unknown(i)},eu.apply(a,arguments)}function kW(){var n=0,e=1,t=1,i=[.5],r=[0,1],a;function s(c){return c!=null&&c<=c?r[Gx(i,c,0,t)]:a}function l(){var c=-1;for(i=new Array(t);++c<t;)i[c]=((c+1)*e-(c-t)*n)/(t+1);return s}return s.domain=function(c){return arguments.length?([n,e]=c,n=+n,e=+e,l()):[n,e]},s.range=function(c){return arguments.length?(t=(r=Array.from(c)).length-1,l()):r.slice()},s.invertExtent=function(c){var f=r.indexOf(c);return f<0?[NaN,NaN]:f<1?[n,i[0]]:f>=t?[i[t-1],e]:[i[f-1],i[f]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return i.slice()},s.copy=function(){return kW().domain([n,e]).range(r).unknown(a)},eu.apply(vp(s),arguments)}function UW(){var n=[.5],e=[0,1],t,i=1;function r(a){return a!=null&&a<=a?e[Gx(n,a,0,i)]:t}return r.domain=function(a){return arguments.length?(n=Array.from(a),i=Math.min(n.length,e.length-1),r):n.slice()},r.range=function(a){return arguments.length?(e=Array.from(a),i=Math.min(n.length,e.length-1),r):e.slice()},r.invertExtent=function(a){var s=e.indexOf(a);return[n[s-1],n[s]]},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return UW().domain(n).range(e).unknown(t)},eu.apply(r,arguments)}const SP=new Date,wP=new Date;function ha(n,e,t,i){function r(a){return n(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(n(a=new Date(+a)),a),r.ceil=a=>(n(a=new Date(a-1)),e(a,1),n(a),a),r.round=a=>{const s=r(a),l=r.ceil(a);return a-s<l-a?s:l},r.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),r.range=(a,s,l)=>{const c=[];if(a=r.ceil(a),l=l==null?1:Math.floor(l),!(a<s)||!(l>0))return c;let f;do c.push(f=new Date(+a)),e(a,l),n(a);while(f<a&&a<s);return c},r.filter=a=>ha(s=>{if(s>=s)for(;n(s),!a(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;e(s,-1),!a(s););else for(;--l>=0;)for(;e(s,1),!a(s););}),t&&(r.count=(a,s)=>(SP.setTime(+a),wP.setTime(+s),n(SP),n(wP),Math.floor(t(SP,wP))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?s=>i(s)%a===0:s=>r.count(0,s)%a===0):r)),r}const tA=ha(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);tA.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?ha(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):tA);tA.range;const nh=1e3,ql=nh*60,ih=ql*60,ph=ih*24,vL=ph*7,z2=ph*30,EP=ph*365,km=ha(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*nh)},(n,e)=>(e-n)/nh,n=>n.getUTCSeconds());km.range;const yL=ha(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*nh)},(n,e)=>{n.setTime(+n+e*ql)},(n,e)=>(e-n)/ql,n=>n.getMinutes());yL.range;const _L=ha(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*ql)},(n,e)=>(e-n)/ql,n=>n.getUTCMinutes());_L.range;const bL=ha(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*nh-n.getMinutes()*ql)},(n,e)=>{n.setTime(+n+e*ih)},(n,e)=>(e-n)/ih,n=>n.getHours());bL.range;const xL=ha(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*ih)},(n,e)=>(e-n)/ih,n=>n.getUTCHours());xL.range;const $x=ha(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*ql)/ph,n=>n.getDate()-1);$x.range;const XM=ha(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/ph,n=>n.getUTCDate()-1);XM.range;const FW=ha(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/ph,n=>Math.floor(n/ph));FW.range;function wg(n){return ha(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ql)/vL)}const YM=wg(0),nA=wg(1),mxe=wg(2),gxe=wg(3),Vy=wg(4),vxe=wg(5),yxe=wg(6);YM.range;nA.range;mxe.range;gxe.range;Vy.range;vxe.range;yxe.range;function Eg(n){return ha(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/vL)}const KM=Eg(0),iA=Eg(1),_xe=Eg(2),bxe=Eg(3),jy=Eg(4),xxe=Eg(5),Sxe=Eg(6);KM.range;iA.range;_xe.range;bxe.range;jy.range;xxe.range;Sxe.range;const SL=ha(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());SL.range;const wL=ha(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());wL.range;const mh=ha(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());mh.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:ha(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});mh.range;const gh=ha(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());gh.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:ha(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});gh.range;function zW(n,e,t,i,r,a){const s=[[km,1,nh],[km,5,5*nh],[km,15,15*nh],[km,30,30*nh],[a,1,ql],[a,5,5*ql],[a,15,15*ql],[a,30,30*ql],[r,1,ih],[r,3,3*ih],[r,6,6*ih],[r,12,12*ih],[i,1,ph],[i,2,2*ph],[t,1,vL],[e,1,z2],[e,3,3*z2],[n,1,EP]];function l(f,p,g){const v=p<f;v&&([f,p]=[p,f]);const _=g&&typeof g.range=="function"?g:c(f,p,g),x=_?_.range(f,+p+1):[];return v?x.reverse():x}function c(f,p,g){const v=Math.abs(p-f)/g,_=rL(([,,S])=>S).right(s,v);if(_===s.length)return n.every(bO(f/EP,p/EP,g));if(_===0)return tA.every(Math.max(bO(f,p,g),1));const[x,T]=s[v/s[_-1][2]<s[_][2]/v?_-1:_];return x.every(T)}return[l,c]}const[wxe,Exe]=zW(gh,wL,KM,FW,xL,_L),[Txe,Axe]=zW(mh,SL,YM,$x,bL,yL);function TP(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function AP(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function $_(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function Mxe(n){var e=n.dateTime,t=n.date,i=n.time,r=n.periods,a=n.days,s=n.shortDays,l=n.months,c=n.shortMonths,f=X_(r),p=Y_(r),g=X_(a),v=Y_(a),_=X_(s),x=Y_(s),T=X_(l),S=Y_(l),w=X_(c),I=Y_(c),R={a:ie,A:he,b:we,B:Me,c:null,d:W2,e:W2,f:Kxe,g:sSe,G:lSe,H:$xe,I:Xxe,j:Yxe,L:BW,m:Zxe,M:Qxe,p:J,q:pe,Q:X2,s:Y2,S:Jxe,u:eSe,U:tSe,V:nSe,w:iSe,W:rSe,x:null,X:null,y:aSe,Y:oSe,Z:uSe,"%":$2},D={a:Ee,A:Ge,b:ht,B:be,c:null,d:q2,e:q2,f:dSe,g:wSe,G:TSe,H:cSe,I:fSe,j:hSe,L:jW,m:pSe,M:mSe,p:Te,q:dt,Q:X2,s:Y2,S:gSe,u:vSe,U:ySe,V:_Se,w:bSe,W:xSe,x:null,X:null,y:SSe,Y:ESe,Z:ASe,"%":$2},B={a:L,A:V,b:W,B:q,c:ue,d:H2,e:H2,f:Hxe,g:j2,G:V2,H:G2,I:G2,j:zxe,L:jxe,m:Fxe,M:Bxe,p:P,q:Uxe,Q:Wxe,s:qxe,S:Vxe,u:Nxe,U:Oxe,V:Dxe,w:Pxe,W:Lxe,x:le,X:ee,y:j2,Y:V2,Z:kxe,"%":Gxe};R.x=z(t,R),R.X=z(i,R),R.c=z(e,R),D.x=z(t,D),D.X=z(i,D),D.c=z(e,D);function z(ve,Ye){return function(wt){var je=[],At=-1,Re=0,Qe=ve.length,Ve,lt,ae;for(wt instanceof Date||(wt=new Date(+wt));++At<Qe;)ve.charCodeAt(At)===37&&(je.push(ve.slice(Re,At)),(lt=B2[Ve=ve.charAt(++At)])!=null?Ve=ve.charAt(++At):lt=Ve==="e"?" ":"0",(ae=Ye[Ve])&&(Ve=ae(wt,lt)),je.push(Ve),Re=At+1);return je.push(ve.slice(Re,At)),je.join("")}}function k(ve,Ye){return function(wt){var je=$_(1900,void 0,1),At=F(je,ve,wt+="",0),Re,Qe;if(At!=wt.length)return null;if("Q"in je)return new Date(je.Q);if("s"in je)return new Date(je.s*1e3+("L"in je?je.L:0));if(Ye&&!("Z"in je)&&(je.Z=0),"p"in je&&(je.H=je.H%12+je.p*12),je.m===void 0&&(je.m="q"in je?je.q:0),"V"in je){if(je.V<1||je.V>53)return null;"w"in je||(je.w=1),"Z"in je?(Re=AP($_(je.y,0,1)),Qe=Re.getUTCDay(),Re=Qe>4||Qe===0?iA.ceil(Re):iA(Re),Re=XM.offset(Re,(je.V-1)*7),je.y=Re.getUTCFullYear(),je.m=Re.getUTCMonth(),je.d=Re.getUTCDate()+(je.w+6)%7):(Re=TP($_(je.y,0,1)),Qe=Re.getDay(),Re=Qe>4||Qe===0?nA.ceil(Re):nA(Re),Re=$x.offset(Re,(je.V-1)*7),je.y=Re.getFullYear(),je.m=Re.getMonth(),je.d=Re.getDate()+(je.w+6)%7)}else("W"in je||"U"in je)&&("w"in je||(je.w="u"in je?je.u%7:"W"in je?1:0),Qe="Z"in je?AP($_(je.y,0,1)).getUTCDay():TP($_(je.y,0,1)).getDay(),je.m=0,je.d="W"in je?(je.w+6)%7+je.W*7-(Qe+5)%7:je.w+je.U*7-(Qe+6)%7);return"Z"in je?(je.H+=je.Z/100|0,je.M+=je.Z%100,AP(je)):TP(je)}}function F(ve,Ye,wt,je){for(var At=0,Re=Ye.length,Qe=wt.length,Ve,lt;At<Re;){if(je>=Qe)return-1;if(Ve=Ye.charCodeAt(At++),Ve===37){if(Ve=Ye.charAt(At++),lt=B[Ve in B2?Ye.charAt(At++):Ve],!lt||(je=lt(ve,wt,je))<0)return-1}else if(Ve!=wt.charCodeAt(je++))return-1}return je}function P(ve,Ye,wt){var je=f.exec(Ye.slice(wt));return je?(ve.p=p.get(je[0].toLowerCase()),wt+je[0].length):-1}function L(ve,Ye,wt){var je=_.exec(Ye.slice(wt));return je?(ve.w=x.get(je[0].toLowerCase()),wt+je[0].length):-1}function V(ve,Ye,wt){var je=g.exec(Ye.slice(wt));return je?(ve.w=v.get(je[0].toLowerCase()),wt+je[0].length):-1}function W(ve,Ye,wt){var je=w.exec(Ye.slice(wt));return je?(ve.m=I.get(je[0].toLowerCase()),wt+je[0].length):-1}function q(ve,Ye,wt){var je=T.exec(Ye.slice(wt));return je?(ve.m=S.get(je[0].toLowerCase()),wt+je[0].length):-1}function ue(ve,Ye,wt){return F(ve,e,Ye,wt)}function le(ve,Ye,wt){return F(ve,t,Ye,wt)}function ee(ve,Ye,wt){return F(ve,i,Ye,wt)}function ie(ve){return s[ve.getDay()]}function he(ve){return a[ve.getDay()]}function we(ve){return c[ve.getMonth()]}function Me(ve){return l[ve.getMonth()]}function J(ve){return r[+(ve.getHours()>=12)]}function pe(ve){return 1+~~(ve.getMonth()/3)}function Ee(ve){return s[ve.getUTCDay()]}function Ge(ve){return a[ve.getUTCDay()]}function ht(ve){return c[ve.getUTCMonth()]}function be(ve){return l[ve.getUTCMonth()]}function Te(ve){return r[+(ve.getUTCHours()>=12)]}function dt(ve){return 1+~~(ve.getUTCMonth()/3)}return{format:function(ve){var Ye=z(ve+="",R);return Ye.toString=function(){return ve},Ye},parse:function(ve){var Ye=k(ve+="",!1);return Ye.toString=function(){return ve},Ye},utcFormat:function(ve){var Ye=z(ve+="",D);return Ye.toString=function(){return ve},Ye},utcParse:function(ve){var Ye=k(ve+="",!0);return Ye.toString=function(){return ve},Ye}}}var B2={"-":"",_:" ",0:"0"},Ra=/^\s*\d+/,Cxe=/^%/,Ixe=/[\\^$*+?|[\]().{}]/g;function oi(n,e,t){var i=n<0?"-":"",r=(i?-n:n)+"",a=r.length;return i+(a<t?new Array(t-a+1).join(e)+r:r)}function Rxe(n){return n.replace(Ixe,"\\$&")}function X_(n){return new RegExp("^(?:"+n.map(Rxe).join("|")+")","i")}function Y_(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function Pxe(n,e,t){var i=Ra.exec(e.slice(t,t+1));return i?(n.w=+i[0],t+i[0].length):-1}function Nxe(n,e,t){var i=Ra.exec(e.slice(t,t+1));return i?(n.u=+i[0],t+i[0].length):-1}function Oxe(n,e,t){var i=Ra.exec(e.slice(t,t+2));return i?(n.U=+i[0],t+i[0].length):-1}function Dxe(n,e,t){var i=Ra.exec(e.slice(t,t+2));return i?(n.V=+i[0],t+i[0].length):-1}function Lxe(n,e,t){var i=Ra.exec(e.slice(t,t+2));return i?(n.W=+i[0],t+i[0].length):-1}function V2(n,e,t){var i=Ra.exec(e.slice(t,t+4));return i?(n.y=+i[0],t+i[0].length):-1}function j2(n,e,t){var i=Ra.exec(e.slice(t,t+2));return i?(n.y=+i[0]+(+i[0]>68?1900:2e3),t+i[0].length):-1}function kxe(n,e,t){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return i?(n.Z=i[1]?0:-(i[2]+(i[3]||"00")),t+i[0].length):-1}function Uxe(n,e,t){var i=Ra.exec(e.slice(t,t+1));return i?(n.q=i[0]*3-3,t+i[0].length):-1}function Fxe(n,e,t){var i=Ra.exec(e.slice(t,t+2));return i?(n.m=i[0]-1,t+i[0].length):-1}function H2(n,e,t){var i=Ra.exec(e.slice(t,t+2));return i?(n.d=+i[0],t+i[0].length):-1}function zxe(n,e,t){var i=Ra.exec(e.slice(t,t+3));return i?(n.m=0,n.d=+i[0],t+i[0].length):-1}function G2(n,e,t){var i=Ra.exec(e.slice(t,t+2));return i?(n.H=+i[0],t+i[0].length):-1}function Bxe(n,e,t){var i=Ra.exec(e.slice(t,t+2));return i?(n.M=+i[0],t+i[0].length):-1}function Vxe(n,e,t){var i=Ra.exec(e.slice(t,t+2));return i?(n.S=+i[0],t+i[0].length):-1}function jxe(n,e,t){var i=Ra.exec(e.slice(t,t+3));return i?(n.L=+i[0],t+i[0].length):-1}function Hxe(n,e,t){var i=Ra.exec(e.slice(t,t+6));return i?(n.L=Math.floor(i[0]/1e3),t+i[0].length):-1}function Gxe(n,e,t){var i=Cxe.exec(e.slice(t,t+1));return i?t+i[0].length:-1}function Wxe(n,e,t){var i=Ra.exec(e.slice(t));return i?(n.Q=+i[0],t+i[0].length):-1}function qxe(n,e,t){var i=Ra.exec(e.slice(t));return i?(n.s=+i[0],t+i[0].length):-1}function W2(n,e){return oi(n.getDate(),e,2)}function $xe(n,e){return oi(n.getHours(),e,2)}function Xxe(n,e){return oi(n.getHours()%12||12,e,2)}function Yxe(n,e){return oi(1+$x.count(mh(n),n),e,3)}function BW(n,e){return oi(n.getMilliseconds(),e,3)}function Kxe(n,e){return BW(n,e)+"000"}function Zxe(n,e){return oi(n.getMonth()+1,e,2)}function Qxe(n,e){return oi(n.getMinutes(),e,2)}function Jxe(n,e){return oi(n.getSeconds(),e,2)}function eSe(n){var e=n.getDay();return e===0?7:e}function tSe(n,e){return oi(YM.count(mh(n)-1,n),e,2)}function VW(n){var e=n.getDay();return e>=4||e===0?Vy(n):Vy.ceil(n)}function nSe(n,e){return n=VW(n),oi(Vy.count(mh(n),n)+(mh(n).getDay()===4),e,2)}function iSe(n){return n.getDay()}function rSe(n,e){return oi(nA.count(mh(n)-1,n),e,2)}function aSe(n,e){return oi(n.getFullYear()%100,e,2)}function sSe(n,e){return n=VW(n),oi(n.getFullYear()%100,e,2)}function oSe(n,e){return oi(n.getFullYear()%1e4,e,4)}function lSe(n,e){var t=n.getDay();return n=t>=4||t===0?Vy(n):Vy.ceil(n),oi(n.getFullYear()%1e4,e,4)}function uSe(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+oi(e/60|0,"0",2)+oi(e%60,"0",2)}function q2(n,e){return oi(n.getUTCDate(),e,2)}function cSe(n,e){return oi(n.getUTCHours(),e,2)}function fSe(n,e){return oi(n.getUTCHours()%12||12,e,2)}function hSe(n,e){return oi(1+XM.count(gh(n),n),e,3)}function jW(n,e){return oi(n.getUTCMilliseconds(),e,3)}function dSe(n,e){return jW(n,e)+"000"}function pSe(n,e){return oi(n.getUTCMonth()+1,e,2)}function mSe(n,e){return oi(n.getUTCMinutes(),e,2)}function gSe(n,e){return oi(n.getUTCSeconds(),e,2)}function vSe(n){var e=n.getUTCDay();return e===0?7:e}function ySe(n,e){return oi(KM.count(gh(n)-1,n),e,2)}function HW(n){var e=n.getUTCDay();return e>=4||e===0?jy(n):jy.ceil(n)}function _Se(n,e){return n=HW(n),oi(jy.count(gh(n),n)+(gh(n).getUTCDay()===4),e,2)}function bSe(n){return n.getUTCDay()}function xSe(n,e){return oi(iA.count(gh(n)-1,n),e,2)}function SSe(n,e){return oi(n.getUTCFullYear()%100,e,2)}function wSe(n,e){return n=HW(n),oi(n.getUTCFullYear()%100,e,2)}function ESe(n,e){return oi(n.getUTCFullYear()%1e4,e,4)}function TSe(n,e){var t=n.getUTCDay();return n=t>=4||t===0?jy(n):jy.ceil(n),oi(n.getUTCFullYear()%1e4,e,4)}function ASe(){return"+0000"}function $2(){return"%"}function X2(n){return+n}function Y2(n){return Math.floor(+n/1e3)}var Wv,GW,WW;MSe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function MSe(n){return Wv=Mxe(n),GW=Wv.format,Wv.parse,WW=Wv.utcFormat,Wv.utcParse,Wv}function CSe(n){return new Date(n)}function ISe(n){return n instanceof Date?+n:+new Date(+n)}function EL(n,e,t,i,r,a,s,l,c,f){var p=cL(),g=p.invert,v=p.domain,_=f(".%L"),x=f(":%S"),T=f("%I:%M"),S=f("%I %p"),w=f("%a %d"),I=f("%b %d"),R=f("%B"),D=f("%Y");function B(z){return(c(z)<z?_:l(z)<z?x:s(z)<z?T:a(z)<z?S:i(z)<z?r(z)<z?w:I:t(z)<z?R:D)(z)}return p.invert=function(z){return new Date(g(z))},p.domain=function(z){return arguments.length?v(Array.from(z,ISe)):v().map(CSe)},p.ticks=function(z){var k=v();return n(k[0],k[k.length-1],z??10)},p.tickFormat=function(z,k){return k==null?B:f(k)},p.nice=function(z){var k=v();return(!z||typeof z.range!="function")&&(z=e(k[0],k[k.length-1],z??10)),z?v(PW(k,z)):p},p.copy=function(){return qx(p,EL(n,e,t,i,r,a,s,l,c,f))},p}function RSe(){return eu.apply(EL(Txe,Axe,mh,SL,YM,$x,bL,yL,km,GW).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function PSe(){return eu.apply(EL(wxe,Exe,gh,wL,KM,XM,xL,_L,km,WW).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ZM(){var n=0,e=1,t,i,r,a,s=Qs,l=!1,c;function f(g){return g==null||isNaN(g=+g)?c:s(r===0?.5:(g=(a(g)-t)*r,l?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([n,e]=g,t=a(n=+n),i=a(e=+e),r=t===i?0:1/(i-t),f):[n,e]},f.clamp=function(g){return arguments.length?(l=!!g,f):l},f.interpolator=function(g){return arguments.length?(s=g,f):s};function p(g){return function(v){var _,x;return arguments.length?([_,x]=v,s=g(_,x),f):[s(0),s(1)]}}return f.range=p(i0),f.rangeRound=p(uL),f.unknown=function(g){return arguments.length?(c=g,f):c},function(g){return a=g,t=g(n),i=g(e),r=t===i?0:1/(i-t),f}}function yp(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function qW(){var n=vp(ZM()(Qs));return n.copy=function(){return yp(n,qW())},xh.apply(n,arguments)}function $W(){var n=dL(ZM()).domain([1,10]);return n.copy=function(){return yp(n,$W()).base(n.base())},xh.apply(n,arguments)}function XW(){var n=pL(ZM());return n.copy=function(){return yp(n,XW()).constant(n.constant())},xh.apply(n,arguments)}function TL(){var n=mL(ZM());return n.copy=function(){return yp(n,TL()).exponent(n.exponent())},xh.apply(n,arguments)}function NSe(){return TL.apply(null,arguments).exponent(.5)}function YW(){var n=[],e=Qs;function t(i){if(i!=null&&!isNaN(i=+i))return e((Gx(n,i,1)-1)/(n.length-1))}return t.domain=function(i){if(!arguments.length)return n.slice();n=[];for(let r of i)r!=null&&!isNaN(r=+r)&&n.push(r);return n.sort(Yd),t},t.interpolator=function(i){return arguments.length?(e=i,t):e},t.range=function(){return n.map((i,r)=>e(r/(n.length-1)))},t.quantiles=function(i){return Array.from({length:i+1},(r,a)=>vbe(n,a/i))},t.copy=function(){return YW(e).domain(n)},xh.apply(t,arguments)}function QM(){var n=0,e=.5,t=1,i=1,r,a,s,l,c,f=Qs,p,g=!1,v;function _(T){return isNaN(T=+T)?v:(T=.5+((T=+p(T))-a)*(i*T<i*a?l:c),f(g?Math.max(0,Math.min(1,T)):T))}_.domain=function(T){return arguments.length?([n,e,t]=T,r=p(n=+n),a=p(e=+e),s=p(t=+t),l=r===a?0:.5/(a-r),c=a===s?0:.5/(s-a),i=a<r?-1:1,_):[n,e,t]},_.clamp=function(T){return arguments.length?(g=!!T,_):g},_.interpolator=function(T){return arguments.length?(f=T,_):f};function x(T){return function(S){var w,I,R;return arguments.length?([w,I,R]=S,f=Gbe(T,[w,I,R]),_):[f(0),f(.5),f(1)]}}return _.range=x(i0),_.rangeRound=x(uL),_.unknown=function(T){return arguments.length?(v=T,_):v},function(T){return p=T,r=T(n),a=T(e),s=T(t),l=r===a?0:.5/(a-r),c=a===s?0:.5/(s-a),i=a<r?-1:1,_}}function KW(){var n=vp(QM()(Qs));return n.copy=function(){return yp(n,KW())},xh.apply(n,arguments)}function ZW(){var n=dL(QM()).domain([.1,1,10]);return n.copy=function(){return yp(n,ZW()).base(n.base())},xh.apply(n,arguments)}function QW(){var n=pL(QM());return n.copy=function(){return yp(n,QW()).constant(n.constant())},xh.apply(n,arguments)}function AL(){var n=mL(QM());return n.copy=function(){return yp(n,AL()).exponent(n.exponent())},xh.apply(n,arguments)}function OSe(){return AL.apply(null,arguments).exponent(.5)}const ab=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:sL,scaleDiverging:KW,scaleDivergingLog:ZW,scaleDivergingPow:AL,scaleDivergingSqrt:OSe,scaleDivergingSymlog:QW,scaleIdentity:RW,scaleImplicit:xO,scaleLinear:IW,scaleLog:NW,scaleOrdinal:aL,scalePoint:bbe,scalePow:gL,scaleQuantile:LW,scaleQuantize:kW,scaleRadial:DW,scaleSequential:qW,scaleSequentialLog:$W,scaleSequentialPow:TL,scaleSequentialQuantile:YW,scaleSequentialSqrt:NSe,scaleSequentialSymlog:XW,scaleSqrt:dxe,scaleSymlog:OW,scaleThreshold:UW,scaleTime:RSe,scaleUtc:PSe,tickFormat:CW},Symbol.toStringTag,{value:"Module"}));var Sh=n=>n.chartData,JW=He([Sh],n=>{var e=n.chartData!=null?n.chartData.length-1:0;return{chartData:n.chartData,computedData:n.computedData,dataEndIndex:e,dataStartIndex:0}}),eq=(n,e,t,i)=>i?JW(n):Sh(n),DSe=(n,e,t)=>t?JW(n):Sh(n);function vh(n){if(Array.isArray(n)&&n.length===2){var[e,t]=n;if(Kn(e)&&Kn(t))return!0}return!1}function K2(n,e,t){return t?n:[Math.min(n[0],e[0]),Math.max(n[1],e[1])]}function tq(n,e){if(e&&typeof n!="function"&&Array.isArray(n)&&n.length===2){var[t,i]=n,r,a;if(Kn(t))r=t;else if(typeof t=="function")return;if(Kn(i))a=i;else if(typeof i=="function")return;var s=[r,a];if(vh(s))return s}}function LSe(n,e,t){if(!(!t&&e==null)){if(typeof n=="function"&&e!=null)try{var i=n(e,t);if(vh(i))return K2(i,e,t)}catch{}if(Array.isArray(n)&&n.length===2){var[r,a]=n,s,l;if(r==="auto")e!=null&&(s=Math.min(...e));else if(qt(r))s=r;else if(typeof r=="function")try{e!=null&&(s=r(e==null?void 0:e[0]))}catch{}else if(typeof r=="string"&&lV.test(r)){var c=lV.exec(r);if(c==null||c[1]==null||e==null)s=void 0;else{var f=+c[1];s=e[0]-f}}else s=e==null?void 0:e[0];if(a==="auto")e!=null&&(l=Math.max(...e));else if(qt(a))l=a;else if(typeof a=="function")try{e!=null&&(l=a(e==null?void 0:e[1]))}catch{}else if(typeof a=="string"&&uV.test(a)){var p=uV.exec(a);if(p==null||p[1]==null||e==null)l=void 0;else{var g=+p[1];l=e[1]+g}}else l=e==null?void 0:e[1];var v=[s,l];if(vh(v))return e==null?v:K2(v,e,t)}}}var r0=1e9,kSe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},CL,ar=!0,Ql="[DecimalError] ",$m=Ql+"Invalid argument: ",ML=Ql+"Exponent out of range: ",a0=Math.floor,Em=Math.pow,USe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,el,Ma=1e7,$i=7,nq=9007199254740991,rA=a0(nq/$i),Bt={};Bt.absoluteValue=Bt.abs=function(){var n=new this.constructor(this);return n.s&&(n.s=1),n};Bt.comparedTo=Bt.cmp=function(n){var e,t,i,r,a=this;if(n=new a.constructor(n),a.s!==n.s)return a.s||-n.s;if(a.e!==n.e)return a.e>n.e^a.s<0?1:-1;for(i=a.d.length,r=n.d.length,e=0,t=i<r?i:r;e<t;++e)if(a.d[e]!==n.d[e])return a.d[e]>n.d[e]^a.s<0?1:-1;return i===r?0:i>r^a.s<0?1:-1};Bt.decimalPlaces=Bt.dp=function(){var n=this,e=n.d.length-1,t=(e-n.e)*$i;if(e=n.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};Bt.dividedBy=Bt.div=function(n){return sh(this,new this.constructor(n))};Bt.dividedToIntegerBy=Bt.idiv=function(n){var e=this,t=e.constructor;return Oi(sh(e,new t(n),0,1),t.precision)};Bt.equals=Bt.eq=function(n){return!this.cmp(n)};Bt.exponent=function(){return Kr(this)};Bt.greaterThan=Bt.gt=function(n){return this.cmp(n)>0};Bt.greaterThanOrEqualTo=Bt.gte=function(n){return this.cmp(n)>=0};Bt.isInteger=Bt.isint=function(){return this.e>this.d.length-2};Bt.isNegative=Bt.isneg=function(){return this.s<0};Bt.isPositive=Bt.ispos=function(){return this.s>0};Bt.isZero=function(){return this.s===0};Bt.lessThan=Bt.lt=function(n){return this.cmp(n)<0};Bt.lessThanOrEqualTo=Bt.lte=function(n){return this.cmp(n)<1};Bt.logarithm=Bt.log=function(n){var e,t=this,i=t.constructor,r=i.precision,a=r+5;if(n===void 0)n=new i(10);else if(n=new i(n),n.s<1||n.eq(el))throw Error(Ql+"NaN");if(t.s<1)throw Error(Ql+(t.s?"NaN":"-Infinity"));return t.eq(el)?new i(0):(ar=!1,e=sh(hx(t,a),hx(n,a),a),ar=!0,Oi(e,r))};Bt.minus=Bt.sub=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?aq(e,n):iq(e,(n.s=-n.s,n))};Bt.modulo=Bt.mod=function(n){var e,t=this,i=t.constructor,r=i.precision;if(n=new i(n),!n.s)throw Error(Ql+"NaN");return t.s?(ar=!1,e=sh(t,n,0,1).times(n),ar=!0,t.minus(e)):Oi(new i(t),r)};Bt.naturalExponential=Bt.exp=function(){return rq(this)};Bt.naturalLogarithm=Bt.ln=function(){return hx(this)};Bt.negated=Bt.neg=function(){var n=new this.constructor(this);return n.s=-n.s||0,n};Bt.plus=Bt.add=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?iq(e,n):aq(e,(n.s=-n.s,n))};Bt.precision=Bt.sd=function(n){var e,t,i,r=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error($m+n);if(e=Kr(r)+1,i=r.d.length-1,t=i*$i+1,i=r.d[i],i){for(;i%10==0;i/=10)t--;for(i=r.d[0];i>=10;i/=10)t++}return n&&e>t?e:t};Bt.squareRoot=Bt.sqrt=function(){var n,e,t,i,r,a,s,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Ql+"NaN")}for(n=Kr(l),ar=!1,r=Math.sqrt(+l),r==0||r==1/0?(e=Fc(l.d),(e.length+n)%2==0&&(e+="0"),r=Math.sqrt(e),n=a0((n+1)/2)-(n<0||n%2),r==1/0?e="5e"+n:(e=r.toExponential(),e=e.slice(0,e.indexOf("e")+1)+n),i=new c(e)):i=new c(r.toString()),t=c.precision,r=s=t+3;;)if(a=i,i=a.plus(sh(l,a,s+2)).times(.5),Fc(a.d).slice(0,s)===(e=Fc(i.d)).slice(0,s)){if(e=e.slice(s-3,s+1),r==s&&e=="4999"){if(Oi(a,t+1,0),a.times(a).eq(l)){i=a;break}}else if(e!="9999")break;s+=4}return ar=!0,Oi(i,t)};Bt.times=Bt.mul=function(n){var e,t,i,r,a,s,l,c,f,p=this,g=p.constructor,v=p.d,_=(n=new g(n)).d;if(!p.s||!n.s)return new g(0);for(n.s*=p.s,t=p.e+n.e,c=v.length,f=_.length,c<f&&(a=v,v=_,_=a,s=c,c=f,f=s),a=[],s=c+f,i=s;i--;)a.push(0);for(i=f;--i>=0;){for(e=0,r=c+i;r>i;)l=a[r]+_[i]*v[r-i-1]+e,a[r--]=l%Ma|0,e=l/Ma|0;a[r]=(a[r]+e)%Ma|0}for(;!a[--s];)a.pop();return e?++t:a.shift(),n.d=a,n.e=t,ar?Oi(n,g.precision):n};Bt.toDecimalPlaces=Bt.todp=function(n,e){var t=this,i=t.constructor;return t=new i(t),n===void 0?t:(rf(n,0,r0),e===void 0?e=i.rounding:rf(e,0,8),Oi(t,n+Kr(t)+1,e))};Bt.toExponential=function(n,e){var t,i=this,r=i.constructor;return n===void 0?t=fg(i,!0):(rf(n,0,r0),e===void 0?e=r.rounding:rf(e,0,8),i=Oi(new r(i),n+1,e),t=fg(i,!0,n+1)),t};Bt.toFixed=function(n,e){var t,i,r=this,a=r.constructor;return n===void 0?fg(r):(rf(n,0,r0),e===void 0?e=a.rounding:rf(e,0,8),i=Oi(new a(r),n+Kr(r)+1,e),t=fg(i.abs(),!1,n+Kr(i)+1),r.isneg()&&!r.isZero()?"-"+t:t)};Bt.toInteger=Bt.toint=function(){var n=this,e=n.constructor;return Oi(new e(n),Kr(n)+1,e.rounding)};Bt.toNumber=function(){return+this};Bt.toPower=Bt.pow=function(n){var e,t,i,r,a,s,l=this,c=l.constructor,f=12,p=+(n=new c(n));if(!n.s)return new c(el);if(l=new c(l),!l.s){if(n.s<1)throw Error(Ql+"Infinity");return l}if(l.eq(el))return l;if(i=c.precision,n.eq(el))return Oi(l,i);if(e=n.e,t=n.d.length-1,s=e>=t,a=l.s,s){if((t=p<0?-p:p)<=nq){for(r=new c(el),e=Math.ceil(i/$i+4),ar=!1;t%2&&(r=r.times(l),Q2(r.d,e)),t=a0(t/2),t!==0;)l=l.times(l),Q2(l.d,e);return ar=!0,n.s<0?new c(el).div(r):Oi(r,i)}}else if(a<0)throw Error(Ql+"NaN");return a=a<0&&n.d[Math.max(e,t)]&1?-1:1,l.s=1,ar=!1,r=n.times(hx(l,i+f)),ar=!0,r=rq(r),r.s=a,r};Bt.toPrecision=function(n,e){var t,i,r=this,a=r.constructor;return n===void 0?(t=Kr(r),i=fg(r,t<=a.toExpNeg||t>=a.toExpPos)):(rf(n,1,r0),e===void 0?e=a.rounding:rf(e,0,8),r=Oi(new a(r),n,e),t=Kr(r),i=fg(r,n<=t||t<=a.toExpNeg,n)),i};Bt.toSignificantDigits=Bt.tosd=function(n,e){var t=this,i=t.constructor;return n===void 0?(n=i.precision,e=i.rounding):(rf(n,1,r0),e===void 0?e=i.rounding:rf(e,0,8)),Oi(new i(t),n,e)};Bt.toString=Bt.valueOf=Bt.val=Bt.toJSON=Bt[Symbol.for("nodejs.util.inspect.custom")]=function(){var n=this,e=Kr(n),t=n.constructor;return fg(n,e<=t.toExpNeg||e>=t.toExpPos)};function iq(n,e){var t,i,r,a,s,l,c,f,p=n.constructor,g=p.precision;if(!n.s||!e.s)return e.s||(e=new p(n)),ar?Oi(e,g):e;if(c=n.d,f=e.d,s=n.e,r=e.e,c=c.slice(),a=s-r,a){for(a<0?(i=c,a=-a,l=f.length):(i=f,r=s,l=c.length),s=Math.ceil(g/$i),l=s>l?s+1:l+1,a>l&&(a=l,i.length=1),i.reverse();a--;)i.push(0);i.reverse()}for(l=c.length,a=f.length,l-a<0&&(a=l,i=f,f=c,c=i),t=0;a;)t=(c[--a]=c[a]+f[a]+t)/Ma|0,c[a]%=Ma;for(t&&(c.unshift(t),++r),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=r,ar?Oi(e,g):e}function rf(n,e,t){if(n!==~~n||n<e||n>t)throw Error($m+n)}function Fc(n){var e,t,i,r=n.length-1,a="",s=n[0];if(r>0){for(a+=s,e=1;e<r;e++)i=n[e]+"",t=$i-i.length,t&&(a+=Cd(t)),a+=i;s=n[e],i=s+"",t=$i-i.length,t&&(a+=Cd(t))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var sh=(function(){function n(i,r){var a,s=0,l=i.length;for(i=i.slice();l--;)a=i[l]*r+s,i[l]=a%Ma|0,s=a/Ma|0;return s&&i.unshift(s),i}function e(i,r,a,s){var l,c;if(a!=s)c=a>s?1:-1;else for(l=c=0;l<a;l++)if(i[l]!=r[l]){c=i[l]>r[l]?1:-1;break}return c}function t(i,r,a){for(var s=0;a--;)i[a]-=s,s=i[a]<r[a]?1:0,i[a]=s*Ma+i[a]-r[a];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,a,s){var l,c,f,p,g,v,_,x,T,S,w,I,R,D,B,z,k,F,P=i.constructor,L=i.s==r.s?1:-1,V=i.d,W=r.d;if(!i.s)return new P(i);if(!r.s)throw Error(Ql+"Division by zero");for(c=i.e-r.e,k=W.length,B=V.length,_=new P(L),x=_.d=[],f=0;W[f]==(V[f]||0);)++f;if(W[f]>(V[f]||0)&&--c,a==null?I=a=P.precision:s?I=a+(Kr(i)-Kr(r))+1:I=a,I<0)return new P(0);if(I=I/$i+2|0,f=0,k==1)for(p=0,W=W[0],I++;(f<B||p)&&I--;f++)R=p*Ma+(V[f]||0),x[f]=R/W|0,p=R%W|0;else{for(p=Ma/(W[0]+1)|0,p>1&&(W=n(W,p),V=n(V,p),k=W.length,B=V.length),D=k,T=V.slice(0,k),S=T.length;S<k;)T[S++]=0;F=W.slice(),F.unshift(0),z=W[0],W[1]>=Ma/2&&++z;do p=0,l=e(W,T,k,S),l<0?(w=T[0],k!=S&&(w=w*Ma+(T[1]||0)),p=w/z|0,p>1?(p>=Ma&&(p=Ma-1),g=n(W,p),v=g.length,S=T.length,l=e(g,T,v,S),l==1&&(p--,t(g,k<v?F:W,v))):(p==0&&(l=p=1),g=W.slice()),v=g.length,v<S&&g.unshift(0),t(T,g,S),l==-1&&(S=T.length,l=e(W,T,k,S),l<1&&(p++,t(T,k<S?F:W,S))),S=T.length):l===0&&(p++,T=[0]),x[f++]=p,l&&T[0]?T[S++]=V[D]||0:(T=[V[D]],S=1);while((D++<B||T[0]!==void 0)&&I--)}return x[0]||x.shift(),_.e=c,Oi(_,s?a+Kr(_)+1:a)}})();function rq(n,e){var t,i,r,a,s,l,c=0,f=0,p=n.constructor,g=p.precision;if(Kr(n)>16)throw Error(ML+Kr(n));if(!n.s)return new p(el);for(ar=!1,l=g,s=new p(.03125);n.abs().gte(.1);)n=n.times(s),f+=5;for(i=Math.log(Em(2,f))/Math.LN10*2+5|0,l+=i,t=r=a=new p(el),p.precision=l;;){if(r=Oi(r.times(n),l),t=t.times(++c),s=a.plus(sh(r,t,l)),Fc(s.d).slice(0,l)===Fc(a.d).slice(0,l)){for(;f--;)a=Oi(a.times(a),l);return p.precision=g,e==null?(ar=!0,Oi(a,g)):a}a=s}}function Kr(n){for(var e=n.e*$i,t=n.d[0];t>=10;t/=10)e++;return e}function MP(n,e,t){if(e>n.LN10.sd())throw ar=!0,t&&(n.precision=t),Error(Ql+"LN10 precision limit exceeded");return Oi(new n(n.LN10),e)}function Cd(n){for(var e="";n--;)e+="0";return e}function hx(n,e){var t,i,r,a,s,l,c,f,p,g=1,v=10,_=n,x=_.d,T=_.constructor,S=T.precision;if(_.s<1)throw Error(Ql+(_.s?"NaN":"-Infinity"));if(_.eq(el))return new T(0);if(e==null?(ar=!1,f=S):f=e,_.eq(10))return e==null&&(ar=!0),MP(T,f);if(f+=v,T.precision=f,t=Fc(x),i=t.charAt(0),a=Kr(_),Math.abs(a)<15e14){for(;i<7&&i!=1||i==1&&t.charAt(1)>3;)_=_.times(n),t=Fc(_.d),i=t.charAt(0),g++;a=Kr(_),i>1?(_=new T("0."+t),a++):_=new T(i+"."+t.slice(1))}else return c=MP(T,f+2,S).times(a+""),_=hx(new T(i+"."+t.slice(1)),f-v).plus(c),T.precision=S,e==null?(ar=!0,Oi(_,S)):_;for(l=s=_=sh(_.minus(el),_.plus(el),f),p=Oi(_.times(_),f),r=3;;){if(s=Oi(s.times(p),f),c=l.plus(sh(s,new T(r),f)),Fc(c.d).slice(0,f)===Fc(l.d).slice(0,f))return l=l.times(2),a!==0&&(l=l.plus(MP(T,f+2,S).times(a+""))),l=sh(l,new T(g),f),T.precision=S,e==null?(ar=!0,Oi(l,S)):l;l=c,r+=2}}function Z2(n,e){var t,i,r;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(t<0&&(t=i),t+=+e.slice(i+1),e=e.substring(0,i)):t<0&&(t=e.length),i=0;e.charCodeAt(i)===48;)++i;for(r=e.length;e.charCodeAt(r-1)===48;)--r;if(e=e.slice(i,r),e){if(r-=i,t=t-i-1,n.e=a0(t/$i),n.d=[],i=(t+1)%$i,t<0&&(i+=$i),i<r){for(i&&n.d.push(+e.slice(0,i)),r-=$i;i<r;)n.d.push(+e.slice(i,i+=$i));e=e.slice(i),i=$i-e.length}else i-=r;for(;i--;)e+="0";if(n.d.push(+e),ar&&(n.e>rA||n.e<-rA))throw Error(ML+t)}else n.s=0,n.e=0,n.d=[0];return n}function Oi(n,e,t){var i,r,a,s,l,c,f,p,g=n.d;for(s=1,a=g[0];a>=10;a/=10)s++;if(i=e-s,i<0)i+=$i,r=e,f=g[p=0];else{if(p=Math.ceil((i+1)/$i),a=g.length,p>=a)return n;for(f=a=g[p],s=1;a>=10;a/=10)s++;i%=$i,r=i-$i+s}if(t!==void 0&&(a=Em(10,s-r-1),l=f/a%10|0,c=e<0||g[p+1]!==void 0||f%a,c=t<4?(l||c)&&(t==0||t==(n.s<0?3:2)):l>5||l==5&&(t==4||c||t==6&&(i>0?r>0?f/Em(10,s-r):0:g[p-1])%10&1||t==(n.s<0?8:7))),e<1||!g[0])return c?(a=Kr(n),g.length=1,e=e-a-1,g[0]=Em(10,($i-e%$i)%$i),n.e=a0(-e/$i)||0):(g.length=1,g[0]=n.e=n.s=0),n;if(i==0?(g.length=p,a=1,p--):(g.length=p+1,a=Em(10,$i-i),g[p]=r>0?(f/Em(10,s-r)%Em(10,r)|0)*a:0),c)for(;;)if(p==0){(g[0]+=a)==Ma&&(g[0]=1,++n.e);break}else{if(g[p]+=a,g[p]!=Ma)break;g[p--]=0,a=1}for(i=g.length;g[--i]===0;)g.pop();if(ar&&(n.e>rA||n.e<-rA))throw Error(ML+Kr(n));return n}function aq(n,e){var t,i,r,a,s,l,c,f,p,g,v=n.constructor,_=v.precision;if(!n.s||!e.s)return e.s?e.s=-e.s:e=new v(n),ar?Oi(e,_):e;if(c=n.d,g=e.d,i=e.e,f=n.e,c=c.slice(),s=f-i,s){for(p=s<0,p?(t=c,s=-s,l=g.length):(t=g,i=f,l=c.length),r=Math.max(Math.ceil(_/$i),l)+2,s>r&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for(r=c.length,l=g.length,p=r<l,p&&(l=r),r=0;r<l;r++)if(c[r]!=g[r]){p=c[r]<g[r];break}s=0}for(p&&(t=c,c=g,g=t,e.s=-e.s),l=c.length,r=g.length-l;r>0;--r)c[l++]=0;for(r=g.length;r>s;){if(c[--r]<g[r]){for(a=r;a&&c[--a]===0;)c[a]=Ma-1;--c[a],c[r]+=Ma}c[r]-=g[r]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--i;return c[0]?(e.d=c,e.e=i,ar?Oi(e,_):e):new v(0)}function fg(n,e,t){var i,r=Kr(n),a=Fc(n.d),s=a.length;return e?(t&&(i=t-s)>0?a=a.charAt(0)+"."+a.slice(1)+Cd(i):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(r<0?"e":"e+")+r):r<0?(a="0."+Cd(-r-1)+a,t&&(i=t-s)>0&&(a+=Cd(i))):r>=s?(a+=Cd(r+1-s),t&&(i=t-r-1)>0&&(a=a+"."+Cd(i))):((i=r+1)<s&&(a=a.slice(0,i)+"."+a.slice(i)),t&&(i=t-s)>0&&(r+1===s&&(a+="."),a+=Cd(i))),n.s<0?"-"+a:a}function Q2(n,e){if(n.length>e)return n.length=e,!0}function sq(n){var e,t,i;function r(a){var s=this;if(!(s instanceof r))return new r(a);if(s.constructor=r,a instanceof r){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error($m+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return Z2(s,a.toString())}else if(typeof a!="string")throw Error($m+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,USe.test(a))Z2(s,a);else throw Error($m+a)}if(r.prototype=Bt,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=sq,r.config=r.set=FSe,n===void 0&&(n={}),n)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<i.length;)n.hasOwnProperty(t=i[e++])||(n[t]=this[t]);return r.config(n),r}function FSe(n){if(!n||typeof n!="object")throw Error(Ql+"Object expected");var e,t,i,r=["precision",1,r0,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<r.length;e+=3)if((i=n[t=r[e]])!==void 0)if(a0(i)===i&&i>=r[e+1]&&i<=r[e+2])this[t]=i;else throw Error($m+t+": "+i);if((i=n[t="LN10"])!==void 0)if(i==Math.LN10)this[t]=new this(i);else throw Error($m+t+": "+i);return this}var CL=sq(kSe);el=new CL(1);const bi=CL;function oq(n){var e;return n===0?e=1:e=Math.floor(new bi(n).abs().log(10).toNumber())+1,e}function lq(n,e,t){for(var i=new bi(n),r=0,a=[];i.lt(e)&&r<1e5;)a.push(i.toNumber()),i=i.add(t),r++;return a}var uq=n=>{var[e,t]=n,[i,r]=[e,t];return e>t&&([i,r]=[t,e]),[i,r]},cq=(n,e,t)=>{if(n.lte(0))return new bi(0);var i=oq(n.toNumber()),r=new bi(10).pow(i),a=n.div(r),s=i!==1?.05:.1,l=new bi(Math.ceil(a.div(s).toNumber())).add(t).mul(s),c=l.mul(r);return e?new bi(c.toNumber()):new bi(Math.ceil(c.toNumber()))},zSe=(n,e,t)=>{var i=new bi(1),r=new bi(n);if(!r.isint()&&t){var a=Math.abs(n);a<1?(i=new bi(10).pow(oq(n)-1),r=new bi(Math.floor(r.div(i).toNumber())).mul(i)):a>1&&(r=new bi(Math.floor(n)))}else n===0?r=new bi(Math.floor((e-1)/2)):t||(r=new bi(Math.floor(n)));for(var s=Math.floor((e-1)/2),l=[],c=0;c<e;c++)l.push(r.add(new bi(c-s).mul(i)).toNumber());return l},fq=function(e,t,i,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(i-1)))return{step:new bi(0),tickMin:new bi(0),tickMax:new bi(0)};var s=cq(new bi(t).sub(e).div(i-1),r,a),l;e<=0&&t>=0?l=new bi(0):(l=new bi(e).add(t).div(2),l=l.sub(new bi(l).mod(s)));var c=Math.ceil(l.sub(e).div(s).toNumber()),f=Math.ceil(new bi(t).sub(l).div(s).toNumber()),p=c+f+1;return p>i?fq(e,t,i,r,a+1):(p<i&&(f=t>0?f+(i-p):f,c=t>0?c:c+(i-p)),{step:s,tickMin:l.sub(new bi(c).mul(s)),tickMax:l.add(new bi(f).mul(s))})},BSe=function(e){var[t,i]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[l,c]=uq([t,i]);if(l===-1/0||c===1/0){var f=c===1/0?[l,...Array(r-1).fill(1/0)]:[...Array(r-1).fill(-1/0),c];return t>i?f.reverse():f}if(l===c)return zSe(l,r,a);var{step:p,tickMin:g,tickMax:v}=fq(l,c,s,a,0),_=lq(g,v.add(new bi(.1).mul(p)),p);return t>i?_.reverse():_},VSe=function(e,t){var[i,r]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,l]=uq([i,r]);if(s===-1/0||l===1/0)return[i,r];if(s===l)return[s];var c=Math.max(t,2),f=cq(new bi(l).sub(s).div(c-1),a,0),p=[...lq(new bi(s),new bi(l),f),l];return a===!1&&(p=p.map(g=>Math.round(g))),i>r?p.reverse():p},jSe=n=>n.rootProps.barCategoryGap,JM=n=>n.rootProps.stackOffset,hq=n=>n.rootProps.reverseStackOrder,IL=n=>n.options.chartName,RL=n=>n.rootProps.syncId,dq=n=>n.rootProps.syncMethod,PL=n=>n.options.eventEmitter,HSe=n=>n.rootProps.baseValue,Js={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},gm={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},Mc={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},eC=(n,e)=>{if(!(!n||!e))return n!=null&&n.reversed?[e[1],e[0]]:e};function tC(n,e,t){if(t!=="auto")return t;if(n!=null)return lf(n,e)?"category":"number"}function J2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function aA(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?J2(Object(t),!0).forEach(function(i){GSe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):J2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function GSe(n,e,t){return(e=WSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function WSe(n){var e=qSe(n,"string");return typeof e=="symbol"?e:e+""}function qSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var e5={allowDataOverflow:gm.allowDataOverflow,allowDecimals:gm.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:gm.angleAxisId,includeHidden:!1,name:void 0,reversed:gm.reversed,scale:gm.scale,tick:gm.tick,tickCount:void 0,ticks:void 0,type:gm.type,unit:void 0},t5={allowDataOverflow:Mc.allowDataOverflow,allowDecimals:Mc.allowDecimals,allowDuplicatedCategory:Mc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Mc.radiusAxisId,includeHidden:Mc.includeHidden,name:void 0,reversed:Mc.reversed,scale:Mc.scale,tick:Mc.tick,tickCount:Mc.tickCount,ticks:void 0,type:Mc.type,unit:void 0},$Se=(n,e)=>{if(e!=null)return n.polarAxis.angleAxis[e]},NL=He([$Se,iW],(n,e)=>{var t;if(n!=null)return n;var i=(t=tC(e,"angleAxis",e5.type))!==null&&t!==void 0?t:"category";return aA(aA({},e5),{},{type:i})}),XSe=(n,e)=>n.polarAxis.radiusAxis[e],OL=He([XSe,iW],(n,e)=>{var t;if(n!=null)return n;var i=(t=tC(e,"radiusAxis",t5.type))!==null&&t!==void 0?t:"category";return aA(aA({},t5),{},{type:i})}),nC=n=>n.polarOptions,DL=He([_h,bh,is],G_e),pq=He([nC,DL],(n,e)=>{if(n!=null)return lp(n.innerRadius,e,0)}),mq=He([nC,DL],(n,e)=>{if(n!=null)return lp(n.outerRadius,e,e*.8)}),YSe=n=>{if(n==null)return[0,0];var{startAngle:e,endAngle:t}=n;return[e,t]},gq=He([nC],YSe);He([NL,gq],eC);var vq=He([DL,pq,mq],(n,e,t)=>{if(!(n==null||e==null||t==null))return[e,t]});He([OL,vq],eC);var yq=He([sr,nC,pq,mq,_h,bh],(n,e,t,i,r,a)=>{if(!(n!=="centric"&&n!=="radial"||e==null||t==null||i==null)){var{cx:s,cy:l,startAngle:c,endAngle:f}=e;return{cx:lp(s,r,r/2),cy:lp(l,a,a/2),innerRadius:t,outerRadius:i,startAngle:c,endAngle:f,clockWise:!1}}}),Pa=(n,e)=>e,iC=(n,e,t)=>t;function LL(n){return n==null?void 0:n.id}function _q(n,e,t){var{chartData:i=[]}=e,{allowDuplicatedCategory:r,dataKey:a}=t,s=new Map;return n.forEach(l=>{var c,f=(c=l.data)!==null&&c!==void 0?c:i;if(!(f==null||f.length===0)){var p=LL(l);f.forEach((g,v)=>{var _=a==null||r?v:String(ts(g,a,null)),x=ts(g,l.dataKey,0),T;s.has(_)?T=s.get(_):T={},Object.assign(T,{[p]:x}),s.set(_,T)})}}),Array.from(s.values())}function kL(n){return"stackId"in n&&n.stackId!=null&&n.dataKey!=null}var rC=(n,e)=>n===e?!0:n==null||e==null?!1:n[0]===e[0]&&n[1]===e[1];function aC(n,e){return Array.isArray(n)&&Array.isArray(e)&&n.length===0&&e.length===0?!0:n===e}function KSe(n,e){if(n.length===e.length){for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return!1}var Na=n=>{var e=sr(n);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},s0=n=>n.tooltip.settings.axisId;function ZSe(n){if(n in ab)return ab[n]();var e="scale".concat(j3(n));if(e in ab)return ab[e]()}function n5(n){var e=n.ticks,t=n.bandwidth,i=n.range(),r=[Math.min(...i),Math.max(...i)];return{domain:()=>n.domain(),range:(function(a){function s(){return a.apply(this,arguments)}return s.toString=function(){return a.toString()},s})(()=>r),rangeMin:()=>r[0],rangeMax:()=>r[1],isInRange(a){var s=r[0],l=r[1];return s<=l?a>=s&&a<=l:a>=l&&a<=s},bandwidth:t?()=>t.call(n):void 0,ticks:e?a=>e.call(n,a):void 0,map:(a,s)=>{var l=n(a);if(l!=null){if(n.bandwidth&&s!==null&&s!==void 0&&s.position){var c=n.bandwidth();switch(s.position){case"middle":l+=c/2;break;case"end":l+=c;break}}return l}}}}function i5(n,e,t){if(typeof n=="function")return n5(n.copy().domain(e).range(t));if(n!=null){var i=ZSe(n);if(i!=null)return i.domain(e).range(t),n5(i)}}var QSe=(n,e)=>{if(e!=null)switch(n){case"linear":{if(!vh(e)){for(var t,i,r=0;r<e.length;r++){var a=e[r];Kn(a)&&((t===void 0||a<t)&&(t=a),(i===void 0||a>i)&&(i=a))}return t!==void 0&&i!==void 0?[t,i]:void 0}return e}default:return e}};function r5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function sA(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?r5(Object(t),!0).forEach(function(i){JSe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):r5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function JSe(n,e,t){return(e=e1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function e1e(n){var e=t1e(n,"string");return typeof e=="symbol"?e:e+""}function t1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var TO=[0,"auto"],Ea={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},bq=(n,e)=>n.cartesianAxis.xAxis[e],wh=(n,e)=>{var t=bq(n,e);return t??Ea},Ta={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:TO,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Bx},xq=(n,e)=>n.cartesianAxis.yAxis[e],Eh=(n,e)=>{var t=xq(n,e);return t??Ta},n1e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},UL=(n,e)=>{var t=n.cartesianAxis.zAxis[e];return t??n1e},ro=(n,e,t)=>{switch(e){case"xAxis":return wh(n,t);case"yAxis":return Eh(n,t);case"zAxis":return UL(n,t);case"angleAxis":return NL(n,t);case"radiusAxis":return OL(n,t);default:throw new Error("Unexpected axis type: ".concat(e))}},i1e=(n,e,t)=>{switch(e){case"xAxis":return wh(n,t);case"yAxis":return Eh(n,t);default:throw new Error("Unexpected axis type: ".concat(e))}},Xx=(n,e,t)=>{switch(e){case"xAxis":return wh(n,t);case"yAxis":return Eh(n,t);case"angleAxis":return NL(n,t);case"radiusAxis":return OL(n,t);default:throw new Error("Unexpected axis type: ".concat(e))}},Sq=n=>n.graphicalItems.cartesianItems.some(e=>e.type==="bar")||n.graphicalItems.polarItems.some(e=>e.type==="radialBar");function wq(n,e){return t=>{switch(n){case"xAxis":return"xAxisId"in t&&t.xAxisId===e;case"yAxis":return"yAxisId"in t&&t.yAxisId===e;case"zAxis":return"zAxisId"in t&&t.zAxisId===e;case"angleAxis":return"angleAxisId"in t&&t.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in t&&t.radiusAxisId===e;default:return!1}}}var Eq=n=>n.graphicalItems.cartesianItems,r1e=He([Pa,iC],wq),Tq=(n,e,t)=>n.filter(t).filter(i=>(e==null?void 0:e.includeHidden)===!0?!0:!i.hide),Yx=He([Eq,ro,r1e],Tq,{memoizeOptions:{resultEqualityCheck:aC}}),Aq=He([Yx],n=>n.filter(e=>e.type==="area"||e.type==="bar").filter(kL)),Mq=n=>n.filter(e=>!("stackId"in e)||e.stackId===void 0),a1e=He([Yx],Mq),Cq=n=>n.map(e=>e.data).filter(Boolean).flat(1),s1e=He([Yx],Cq,{memoizeOptions:{resultEqualityCheck:aC}}),Iq=(n,e)=>{var{chartData:t=[],dataStartIndex:i,dataEndIndex:r}=e;return n.length>0?n:t.slice(i,r+1)},FL=He([s1e,eq],Iq),Rq=(n,e,t)=>(e==null?void 0:e.dataKey)!=null?n.map(i=>({value:ts(i,e.dataKey)})):t.length>0?t.map(i=>i.dataKey).flatMap(i=>n.map(r=>({value:ts(r,i)}))):n.map(i=>({value:i})),sC=He([FL,ro,Yx],Rq);function Pq(n,e){switch(n){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function iE(n){if(tf(n)||n instanceof Date){var e=Number(n);if(Kn(e))return e}}function a5(n){if(Array.isArray(n)){var e=[iE(n[0]),iE(n[1])];return vh(e)?e:void 0}var t=iE(n);if(t!=null)return[t,t]}function yh(n){return n.map(iE).filter(Do)}function o1e(n,e,t){return!t||typeof e!="number"||ef(e)?[]:t.length?yh(t.flatMap(i=>{var r=ts(n,i.dataKey),a,s;if(Array.isArray(r)?[a,s]=r:a=s=r,!(!Kn(a)||!Kn(s)))return[e-a,e+s]})):[]}var da=n=>{var e=Na(n),t=s0(n);return Xx(n,e,t)},Kx=He([da],n=>n==null?void 0:n.dataKey),l1e=He([Aq,eq,da],_q),Nq=(n,e,t,i)=>{var r={},a=e.reduce((s,l)=>{if(l.stackId==null)return s;var c=s[l.stackId];return c==null&&(c=[]),c.push(l),s[l.stackId]=c,s},r);return Object.fromEntries(Object.entries(a).map(s=>{var[l,c]=s,f=i?[...c].reverse():c,p=f.map(LL);return[l,{stackedData:Oye(n,p,t),graphicalItems:f}]}))},Oq=He([l1e,Aq,JM,hq],Nq),Dq=(n,e,t,i)=>{var{dataStartIndex:r,dataEndIndex:a}=e;if(i==null&&t!=="zAxis"){var s=Uye(n,r,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},u1e=He([ro],n=>n.allowDataOverflow),zL=n=>{var e;if(n==null||!("domain"in n))return TO;if(n.domain!=null)return n.domain;if("ticks"in n&&n.ticks!=null){if(n.type==="number"){var t=yh(n.ticks);return[Math.min(...t),Math.max(...t)]}if(n.type==="category")return n.ticks.map(String)}return(e=n==null?void 0:n.domain)!==null&&e!==void 0?e:TO},Lq=He([ro],zL),kq=He([Lq,u1e],tq),c1e=He([Oq,Sh,Pa,kq],Dq,{memoizeOptions:{resultEqualityCheck:rC}}),BL=n=>n.errorBars,f1e=(n,e,t)=>n.flatMap(i=>e[i.id]).filter(Boolean).filter(i=>Pq(t,i)),oA=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=t.filter(Boolean);if(r.length!==0){var a=r.flat(),s=Math.min(...a),l=Math.max(...a);return[s,l]}},Uq=(n,e,t,i,r)=>{var a,s;if(t.length>0&&n.forEach(l=>{t.forEach(c=>{var f,p,g=(f=i[c.id])===null||f===void 0?void 0:f.filter(w=>Pq(r,w)),v=ts(l,(p=e.dataKey)!==null&&p!==void 0?p:c.dataKey),_=o1e(l,v,g);if(_.length>=2){var x=Math.min(..._),T=Math.max(..._);(a==null||x<a)&&(a=x),(s==null||T>s)&&(s=T)}var S=a5(v);S!=null&&(a=a==null?S[0]:Math.min(a,S[0]),s=s==null?S[1]:Math.max(s,S[1]))})}),(e==null?void 0:e.dataKey)!=null&&n.forEach(l=>{var c=a5(ts(l,e.dataKey));c!=null&&(a=a==null?c[0]:Math.min(a,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),Kn(a)&&Kn(s))return[a,s]},h1e=He([FL,ro,a1e,BL,Pa],Uq,{memoizeOptions:{resultEqualityCheck:rC}});function d1e(n){var{value:e}=n;if(tf(e)||e instanceof Date)return e}var p1e=(n,e,t)=>{var i=n.map(d1e).filter(r=>r!=null);return t&&(e.dataKey==null||e.allowDuplicatedCategory&&t7(i))?_W(0,n.length):e.allowDuplicatedCategory?i:Array.from(new Set(i))},Fq=n=>n.referenceElements.dots,o0=(n,e,t)=>n.filter(i=>i.ifOverflow==="extendDomain").filter(i=>e==="xAxis"?i.xAxisId===t:i.yAxisId===t),m1e=He([Fq,Pa,iC],o0),zq=n=>n.referenceElements.areas,g1e=He([zq,Pa,iC],o0),Bq=n=>n.referenceElements.lines,v1e=He([Bq,Pa,iC],o0),Vq=(n,e)=>{if(n!=null){var t=yh(n.map(i=>e==="xAxis"?i.x:i.y));if(t.length!==0)return[Math.min(...t),Math.max(...t)]}},y1e=He(m1e,Pa,Vq),jq=(n,e)=>{if(n!=null){var t=yh(n.flatMap(i=>[e==="xAxis"?i.x1:i.y1,e==="xAxis"?i.x2:i.y2]));if(t.length!==0)return[Math.min(...t),Math.max(...t)]}},_1e=He([g1e,Pa],jq);function b1e(n){var e;if(n.x!=null)return yh([n.x]);var t=(e=n.segment)===null||e===void 0?void 0:e.map(i=>i.x);return t==null||t.length===0?[]:yh(t)}function x1e(n){var e;if(n.y!=null)return yh([n.y]);var t=(e=n.segment)===null||e===void 0?void 0:e.map(i=>i.y);return t==null||t.length===0?[]:yh(t)}var Hq=(n,e)=>{if(n!=null){var t=n.flatMap(i=>e==="xAxis"?b1e(i):x1e(i));if(t.length!==0)return[Math.min(...t),Math.max(...t)]}},S1e=He([v1e,Pa],Hq),w1e=He(y1e,S1e,_1e,(n,e,t)=>oA(n,t,e)),Gq=(n,e,t,i,r,a,s,l)=>{if(t!=null)return t;var c=s==="vertical"&&l==="xAxis"||s==="horizontal"&&l==="yAxis",f=c?oA(i,a,r):oA(a,r);return LSe(e,f,n.allowDataOverflow)},E1e=He([ro,Lq,kq,c1e,h1e,w1e,sr,Pa],Gq,{memoizeOptions:{resultEqualityCheck:rC}}),T1e=[0,1],Wq=(n,e,t,i,r,a,s)=>{if(!((n==null||t==null||t.length===0)&&s===void 0)){var{dataKey:l,type:c}=n,f=lf(e,a);if(f&&l==null){var p;return _W(0,(p=t==null?void 0:t.length)!==null&&p!==void 0?p:0)}return c==="category"?p1e(i,n,f):r==="expand"?T1e:s}},VL=He([ro,sr,FL,sC,JM,Pa,E1e],Wq);function A1e(n){return n in ab}var qq=(n,e,t)=>{if(n!=null){var{scale:i,type:r}=n;if(i==="auto")return r==="category"&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!e)?"point":r==="category"?"band":"linear";if(typeof i=="string"){var a="scale".concat(j3(i));return A1e(a)?a:"point"}}},l0=He([ro,Sq,IL],qq);function jL(n,e,t,i){if(!(t==null||i==null))return typeof n.scale=="function"?i5(n.scale,t,i):i5(e,t,i)}var $q=(n,e,t)=>{var i=zL(e);if(!(t!=="auto"&&t!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(i)&&(i[0]==="auto"||i[1]==="auto")&&vh(n))return BSe(n,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&vh(n))return VSe(n,e.tickCount,e.allowDecimals)}},HL=He([VL,Xx,l0],$q),Xq=(n,e,t,i)=>{if(i!=="angleAxis"&&(n==null?void 0:n.type)==="number"&&vh(e)&&Array.isArray(t)&&t.length>0){var r,a,s=e[0],l=(r=t[0])!==null&&r!==void 0?r:0,c=e[1],f=(a=t[t.length-1])!==null&&a!==void 0?a:0;return[Math.min(s,l),Math.max(c,f)]}return e},M1e=He([ro,VL,HL,Pa],Xq),C1e=He(sC,ro,(n,e)=>{if(!(!e||e.type!=="number")){var t=1/0,i=Array.from(yh(n.map(g=>g.value))).sort((g,v)=>g-v),r=i[0],a=i[i.length-1];if(r==null||a==null)return 1/0;var s=a-r;if(s===0)return 1/0;for(var l=0;l<i.length-1;l++){var c=i[l],f=i[l+1];if(!(c==null||f==null)){var p=f-c;t=Math.min(t,p)}}return t/s}}),Yq=He(C1e,sr,jSe,is,(n,e,t,i,r)=>r,(n,e,t,i,r)=>{if(!Kn(n))return 0;var a=e==="vertical"?i.height:i.width;if(r==="gap")return n*a/2;if(r==="no-gap"){var s=lp(t,n*a),l=n*a/2;return l-s-(l-s)/a*s}return 0}),I1e=(n,e,t)=>{var i=wh(n,e);return i==null||typeof i.padding!="string"?0:Yq(n,"xAxis",e,t,i.padding)},R1e=(n,e,t)=>{var i=Eh(n,e);return i==null||typeof i.padding!="string"?0:Yq(n,"yAxis",e,t,i.padding)},P1e=He(wh,I1e,(n,e)=>{var t,i;if(n==null)return{left:0,right:0};var{padding:r}=n;return typeof r=="string"?{left:e,right:e}:{left:((t=r.left)!==null&&t!==void 0?t:0)+e,right:((i=r.right)!==null&&i!==void 0?i:0)+e}}),N1e=He(Eh,R1e,(n,e)=>{var t,i;if(n==null)return{top:0,bottom:0};var{padding:r}=n;return typeof r=="string"?{top:e,bottom:e}:{top:((t=r.top)!==null&&t!==void 0?t:0)+e,bottom:((i=r.bottom)!==null&&i!==void 0?i:0)+e}}),O1e=He([is,P1e,jM,VM,(n,e,t)=>t],(n,e,t,i,r)=>{var{padding:a}=i;return r?[a.left,t.width-a.right]:[n.left+e.left,n.left+n.width-e.right]}),D1e=He([is,sr,N1e,jM,VM,(n,e,t)=>t],(n,e,t,i,r,a)=>{var{padding:s}=r;return a?[i.height-s.bottom,s.top]:e==="horizontal"?[n.top+n.height-t.bottom,n.top+t.top]:[n.top+t.top,n.top+n.height-t.bottom]}),Zx=(n,e,t,i)=>{var r;switch(e){case"xAxis":return O1e(n,t,i);case"yAxis":return D1e(n,t,i);case"zAxis":return(r=UL(n,t))===null||r===void 0?void 0:r.range;case"angleAxis":return gq(n);case"radiusAxis":return vq(n,t);default:return}},Kq=He([ro,Zx],eC),L1e=He([l0,M1e],QSe),oC=He([ro,l0,L1e,Kq],jL);He([Yx,BL,Pa],f1e);function Zq(n,e){return n.id<e.id?-1:n.id>e.id?1:0}var lC=(n,e)=>e,uC=(n,e,t)=>t,k1e=He(zM,lC,uC,(n,e,t)=>n.filter(i=>i.orientation===e).filter(i=>i.mirror===t).sort(Zq)),U1e=He(BM,lC,uC,(n,e,t)=>n.filter(i=>i.orientation===e).filter(i=>i.mirror===t).sort(Zq)),Qq=(n,e)=>({width:n.width,height:e.height}),F1e=(n,e)=>{var t=typeof e.width=="number"?e.width:Bx;return{width:t,height:n.height}},z1e=He(is,wh,Qq),B1e=(n,e,t)=>{switch(e){case"top":return n.top;case"bottom":return t-n.bottom;default:return 0}},V1e=(n,e,t)=>{switch(e){case"left":return n.left;case"right":return t-n.right;default:return 0}},j1e=He(bh,is,k1e,lC,uC,(n,e,t,i,r)=>{var a={},s;return t.forEach(l=>{var c=Qq(e,l);s==null&&(s=B1e(e,i,n));var f=i==="top"&&!r||i==="bottom"&&r;a[l.id]=s-Number(f)*c.height,s+=(f?-1:1)*c.height}),a}),H1e=He(_h,is,U1e,lC,uC,(n,e,t,i,r)=>{var a={},s;return t.forEach(l=>{var c=F1e(e,l);s==null&&(s=V1e(e,i,n));var f=i==="left"&&!r||i==="right"&&r;a[l.id]=s-Number(f)*c.width,s+=(f?-1:1)*c.width}),a}),G1e=(n,e)=>{var t=wh(n,e);if(t!=null)return j1e(n,t.orientation,t.mirror)},W1e=He([is,wh,G1e,(n,e)=>e],(n,e,t,i)=>{if(e!=null){var r=t==null?void 0:t[i];return r==null?{x:n.left,y:0}:{x:n.left,y:r}}}),q1e=(n,e)=>{var t=Eh(n,e);if(t!=null)return H1e(n,t.orientation,t.mirror)},$1e=He([is,Eh,q1e,(n,e)=>e],(n,e,t,i)=>{if(e!=null){var r=t==null?void 0:t[i];return r==null?{x:0,y:n.top}:{x:r,y:n.top}}}),X1e=He(is,Eh,(n,e)=>{var t=typeof e.width=="number"?e.width:Bx;return{width:t,height:n.height}}),Jq=(n,e,t,i)=>{if(t!=null){var{allowDuplicatedCategory:r,type:a,dataKey:s}=t,l=lf(n,i),c=e.map(f=>f.value);if(s&&l&&a==="category"&&r&&t7(c))return c}},GL=He([sr,sC,ro,Pa],Jq),e$=(n,e,t,i)=>{if(!(t==null||t.dataKey==null)){var{type:r,scale:a}=t,s=lf(n,i);if(s&&(r==="number"||a!=="auto"))return e.map(l=>l.value)}},WL=He([sr,sC,Xx,Pa],e$),s5=He([sr,i1e,l0,oC,GL,WL,Zx,HL,Pa],(n,e,t,i,r,a,s,l,c)=>{if(e!=null){var f=lf(n,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:a,duplicateDomain:r,isCategorical:f,niceTicks:l,range:s,realScaleType:t,scale:i}}}),Y1e=(n,e,t,i,r,a,s,l,c)=>{if(!(e==null||i==null)){var f=lf(n,c),{type:p,ticks:g,tickCount:v}=e,_=t==="scaleBand"&&typeof i.bandwidth=="function"?i.bandwidth()/2:2,x=p==="category"&&i.bandwidth?i.bandwidth()/_:0;x=c==="angleAxis"&&a!=null&&a.length>=2?Wl(a[0]-a[1])*2*x:x;var T=g||r;return T?T.map((S,w)=>{var I=s?s.indexOf(S):S,R=i.map(I);return Kn(R)?{index:w,coordinate:R+x,value:S,offset:x}:null}).filter(Do):f&&l?l.map((S,w)=>{var I=i.map(S);return Kn(I)?{coordinate:I+x,value:S,index:w,offset:x}:null}).filter(Do):i.ticks?i.ticks(v).map((S,w)=>{var I=i.map(S);return Kn(I)?{coordinate:I+x,value:S,index:w,offset:x}:null}).filter(Do):i.domain().map((S,w)=>{var I=i.map(S);return Kn(I)?{coordinate:I+x,value:s?s[S]:S,index:w,offset:x}:null}).filter(Do)}},t$=He([sr,Xx,l0,oC,HL,Zx,GL,WL,Pa],Y1e),K1e=(n,e,t,i,r,a,s)=>{if(!(e==null||t==null||i==null||i[0]===i[1])){var l=lf(n,s),{tickCount:c}=e,f=0;return f=s==="angleAxis"&&(i==null?void 0:i.length)>=2?Wl(i[0]-i[1])*2*f:f,l&&a?a.map((p,g)=>{var v=t.map(p);return Kn(v)?{coordinate:v+f,value:p,index:g,offset:f}:null}).filter(Do):t.ticks?t.ticks(c).map((p,g)=>{var v=t.map(p);return Kn(v)?{coordinate:v+f,value:p,index:g,offset:f}:null}).filter(Do):t.domain().map((p,g)=>{var v=t.map(p);return Kn(v)?{coordinate:v+f,value:r?r[p]:p,index:g,offset:f}:null}).filter(Do)}},n$=He([sr,Xx,oC,Zx,GL,WL,Pa],K1e),i$=He(ro,oC,(n,e)=>{if(!(n==null||e==null))return sA(sA({},n),{},{scale:e})}),Z1e=He([ro,l0,VL,Kq],jL);He((n,e,t)=>UL(n,t),Z1e,(n,e)=>{if(!(n==null||e==null))return sA(sA({},n),{},{scale:e})});var Q1e=He([sr,zM,BM],(n,e,t)=>{switch(n){case"horizontal":return e.some(i=>i.reversed)?"right-to-left":"left-to-right";case"vertical":return t.some(i=>i.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),r$=n=>n.options.defaultTooltipEventType,a$=n=>n.options.validateTooltipEventTypes;function s$(n,e,t){if(n==null)return e;var i=n?"axis":"item";return t==null?e:t.includes(i)?i:e}function qL(n,e){var t=r$(n),i=a$(n);return s$(e,t,i)}function J1e(n){return sn(e=>qL(e,n))}var o$=(n,e)=>{var t,i=Number(e);if(!(ef(i)||e==null))return i>=0?n==null||(t=n[i])===null||t===void 0?void 0:t.value:void 0},ewe=n=>n.tooltip.settings,kd={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},twe={itemInteraction:{click:kd,hover:kd},axisInteraction:{click:kd,hover:kd},keyboardInteraction:kd,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},l$=ko({name:"tooltip",initialState:twe,reducers:{addTooltipEntrySettings:{reducer(n,e){n.tooltipItemPayloads.push(e.payload)},prepare:rr()},replaceTooltipEntrySettings:{reducer(n,e){var{prev:t,next:i}=e.payload,r=Fu(n).tooltipItemPayloads.indexOf(t);r>-1&&(n.tooltipItemPayloads[r]=i)},prepare:rr()},removeTooltipEntrySettings:{reducer(n,e){var t=Fu(n).tooltipItemPayloads.indexOf(e.payload);t>-1&&n.tooltipItemPayloads.splice(t,1)},prepare:rr()},setTooltipSettingsState(n,e){n.settings=e.payload},setActiveMouseOverItemIndex(n,e){n.syncInteraction.active=!1,n.keyboardInteraction.active=!1,n.itemInteraction.hover.active=!0,n.itemInteraction.hover.index=e.payload.activeIndex,n.itemInteraction.hover.dataKey=e.payload.activeDataKey,n.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,n.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(n){n.itemInteraction.hover.active=!1,n.axisInteraction.hover.active=!1},mouseLeaveItem(n){n.itemInteraction.hover.active=!1},setActiveClickItemIndex(n,e){n.syncInteraction.active=!1,n.itemInteraction.click.active=!0,n.keyboardInteraction.active=!1,n.itemInteraction.click.index=e.payload.activeIndex,n.itemInteraction.click.dataKey=e.payload.activeDataKey,n.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,n.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(n,e){n.syncInteraction.active=!1,n.axisInteraction.hover.active=!0,n.keyboardInteraction.active=!1,n.axisInteraction.hover.index=e.payload.activeIndex,n.axisInteraction.hover.dataKey=e.payload.activeDataKey,n.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(n,e){n.syncInteraction.active=!1,n.keyboardInteraction.active=!1,n.axisInteraction.click.active=!0,n.axisInteraction.click.index=e.payload.activeIndex,n.axisInteraction.click.dataKey=e.payload.activeDataKey,n.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(n,e){n.syncInteraction=e.payload},setKeyboardInteraction(n,e){n.keyboardInteraction.active=e.payload.active,n.keyboardInteraction.index=e.payload.activeIndex,n.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:nwe,replaceTooltipEntrySettings:iwe,removeTooltipEntrySettings:rwe,setTooltipSettingsState:awe,setActiveMouseOverItemIndex:swe,mouseLeaveItem:yNe,mouseLeaveChart:u$,setActiveClickItemIndex:_Ne,setMouseOverAxisIndex:c$,setMouseClickAxisIndex:owe,setSyncInteraction:AO,setKeyboardInteraction:MO}=l$.actions,lwe=l$.reducer;function o5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Lw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?o5(Object(t),!0).forEach(function(i){uwe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):o5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function uwe(n,e,t){return(e=cwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cwe(n){var e=fwe(n,"string");return typeof e=="symbol"?e:e+""}function fwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function hwe(n,e,t){return e==="axis"?t==="click"?n.axisInteraction.click:n.axisInteraction.hover:t==="click"?n.itemInteraction.click:n.itemInteraction.hover}function dwe(n){return n.index!=null}var f$=(n,e,t,i)=>{if(e==null)return kd;var r=hwe(n,e,t);if(r==null)return kd;if(r.active)return r;if(n.keyboardInteraction.active)return n.keyboardInteraction;if(n.syncInteraction.active&&n.syncInteraction.index!=null)return n.syncInteraction;var a=n.settings.active===!0;if(dwe(r)){if(a)return Lw(Lw({},r),{},{active:!0})}else if(i!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:i,graphicalItemId:void 0};return Lw(Lw({},kd),{},{coordinate:r.coordinate})};function pwe(n){if(typeof n=="number")return Number.isFinite(n)?n:void 0;if(n instanceof Date){var e=n.valueOf();return Number.isFinite(e)?e:void 0}var t=Number(n);return Number.isFinite(t)?t:void 0}function mwe(n,e){var t=pwe(n),i=e[0],r=e[1];if(t===void 0)return!1;var a=Math.min(i,r),s=Math.max(i,r);return t>=a&&t<=s}function gwe(n,e,t){if(t==null||e==null)return!0;var i=ts(n,e);return i==null||!vh(t)?!0:mwe(i,t)}var $L=(n,e,t,i)=>{var r=n==null?void 0:n.index;if(r==null)return null;var a=Number(r);if(!Kn(a))return r;var s=0,l=1/0;e.length>0&&(l=e.length-1);var c=Math.max(s,Math.min(a,l)),f=e[c];return f==null||gwe(f,t,i)?String(c):null},h$=(n,e,t,i,r,a,s)=>{if(a!=null){var l=s[0],c=l==null?void 0:l.getPosition(a);if(c!=null)return c;var f=r==null?void 0:r[Number(a)];if(f)switch(t){case"horizontal":return{x:f.coordinate,y:(i.top+e)/2};default:return{x:(i.left+n)/2,y:f.coordinate}}}},d$=(n,e,t,i)=>{if(e==="axis")return n.tooltipItemPayloads;if(n.tooltipItemPayloads.length===0)return[];var r;if(t==="hover"?r=n.itemInteraction.hover.graphicalItemId:r=n.itemInteraction.click.graphicalItemId,r==null&&i!=null){var a=n.tooltipItemPayloads[0];return a!=null?[a]:[]}return n.tooltipItemPayloads.filter(s=>{var l;return((l=s.settings)===null||l===void 0?void 0:l.graphicalItemId)===r})},p$=n=>n.options.tooltipPayloadSearcher,u0=n=>n.tooltip;function l5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function u5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?l5(Object(t),!0).forEach(function(i){vwe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):l5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function vwe(n,e,t){return(e=ywe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ywe(n){var e=_we(n,"string");return typeof e=="symbol"?e:e+""}function _we(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function bwe(n,e){return n??e}var m$=(n,e,t,i,r,a,s)=>{if(!(e==null||a==null)){var{chartData:l,computedData:c,dataStartIndex:f,dataEndIndex:p}=t,g=[];return n.reduce((v,_)=>{var x,{dataDefinedOnItem:T,settings:S}=_,w=bwe(T,l),I=Array.isArray(w)?W7(w,f,p):w,R=(x=S==null?void 0:S.dataKey)!==null&&x!==void 0?x:i,D=S==null?void 0:S.nameKey,B;if(i&&Array.isArray(I)&&!Array.isArray(I[0])&&s==="axis"?B=n7(I,i,r):B=a(I,e,c,D),Array.isArray(B))B.forEach(k=>{var F=u5(u5({},S),{},{name:k.name,unit:k.unit,color:void 0,fill:void 0});v.push(cV({tooltipEntrySettings:F,dataKey:k.dataKey,payload:k.payload,value:ts(k.payload,k.dataKey),name:k.name}))});else{var z;v.push(cV({tooltipEntrySettings:S,dataKey:R,payload:B,value:ts(B,R),name:(z=ts(B,D))!==null&&z!==void 0?z:S==null?void 0:S.name}))}return v},g)}},XL=He([da,Sq,IL],qq),xwe=He([n=>n.graphicalItems.cartesianItems,n=>n.graphicalItems.polarItems],(n,e)=>[...n,...e]),Swe=He([Na,s0],wq),c0=He([xwe,da,Swe],Tq,{memoizeOptions:{resultEqualityCheck:aC}}),wwe=He([c0],n=>n.filter(kL)),Ewe=He([c0],Cq,{memoizeOptions:{resultEqualityCheck:aC}}),f0=He([Ewe,Sh],Iq),Twe=He([wwe,Sh,da],_q),YL=He([f0,da,c0],Rq),g$=He([da],zL),Awe=He([da],n=>n.allowDataOverflow),v$=He([g$,Awe],tq),Mwe=He([c0],n=>n.filter(kL)),Cwe=He([Twe,Mwe,JM,hq],Nq),Iwe=He([Cwe,Sh,Na,v$],Dq),Rwe=He([c0],Mq),Pwe=He([f0,da,Rwe,BL,Na],Uq,{memoizeOptions:{resultEqualityCheck:rC}}),Nwe=He([Fq,Na,s0],o0),Owe=He([Nwe,Na],Vq),Dwe=He([zq,Na,s0],o0),Lwe=He([Dwe,Na],jq),kwe=He([Bq,Na,s0],o0),Uwe=He([kwe,Na],Hq),Fwe=He([Owe,Uwe,Lwe],oA),zwe=He([da,g$,v$,Iwe,Pwe,Fwe,sr,Na],Gq),Qx=He([da,sr,f0,YL,JM,Na,zwe],Wq),Bwe=He([Qx,da,XL],$q),Vwe=He([da,Qx,Bwe,Na],Xq),y$=n=>{var e=Na(n),t=s0(n),i=!1;return Zx(n,e,t,i)},_$=He([da,y$],eC),b$=He([da,XL,Vwe,_$],jL),jwe=He([sr,YL,da,Na],Jq),Hwe=He([sr,YL,da,Na],e$),Gwe=(n,e,t,i,r,a,s,l)=>{if(e){var{type:c}=e,f=lf(n,l);if(i){var p=t==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,g=c==="category"&&i.bandwidth?i.bandwidth()/p:0;return g=l==="angleAxis"&&r!=null&&(r==null?void 0:r.length)>=2?Wl(r[0]-r[1])*2*g:g,f&&s?s.map((v,_)=>{var x=i.map(v);return Kn(x)?{coordinate:x+g,value:v,index:_,offset:g}:null}).filter(Do):i.domain().map((v,_)=>{var x=i.map(v);return Kn(x)?{coordinate:x+g,value:a?a[v]:v,index:_,offset:g}:null}).filter(Do)}}},Th=He([sr,da,XL,b$,y$,jwe,Hwe,Na],Gwe),KL=He([r$,a$,ewe],(n,e,t)=>s$(t.shared,n,e)),x$=n=>n.tooltip.settings.trigger,ZL=n=>n.tooltip.settings.defaultIndex,Jx=He([u0,KL,x$,ZL],f$),dx=He([Jx,f0,Kx,Qx],$L),S$=He([Th,dx],o$),Wwe=He([Jx],n=>{if(n)return n.dataKey});He([Jx],n=>{if(n)return n.graphicalItemId});var w$=He([u0,KL,x$,ZL],d$),qwe=He([_h,bh,sr,is,Th,ZL,w$],h$),$we=He([Jx,qwe],(n,e)=>n!=null&&n.coordinate?n.coordinate:e),Xwe=He([Jx],n=>{var e;return(e=n==null?void 0:n.active)!==null&&e!==void 0?e:!1}),Ywe=He([w$,dx,Sh,Kx,S$,p$,KL],m$),Kwe=He([Ywe],n=>{if(n!=null){var e=n.map(t=>t.payload).filter(t=>t!=null);return Array.from(new Set(e))}});function c5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function f5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?c5(Object(t),!0).forEach(function(i){Zwe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):c5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Zwe(n,e,t){return(e=Qwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Qwe(n){var e=Jwe(n,"string");return typeof e=="symbol"?e:e+""}function Jwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var eEe=()=>sn(da),tEe=()=>{var n=eEe(),e=sn(Th),t=sn(b$);return FT(!n||!t?void 0:f5(f5({},n),{},{scale:t}),e)};function h5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function qv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?h5(Object(t),!0).forEach(function(i){nEe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):h5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function nEe(n,e,t){return(e=iEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function iEe(n){var e=rEe(n,"string");return typeof e=="symbol"?e:e+""}function rEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var aEe=(n,e,t,i)=>{var r=e.find(a=>a&&a.index===t);if(r){if(n==="horizontal")return{x:r.coordinate,y:i.chartY};if(n==="vertical")return{x:i.chartX,y:r.coordinate}}return{x:0,y:0}},sEe=(n,e,t,i)=>{var r=e.find(f=>f&&f.index===t);if(r){if(n==="centric"){var a=r.coordinate,{radius:s}=i;return qv(qv(qv({},i),Ja(i.cx,i.cy,s,a)),{},{angle:a,radius:s})}var l=r.coordinate,{angle:c}=i;return qv(qv(qv({},i),Ja(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function oEe(n,e){var{chartX:t,chartY:i}=n;return t>=e.left&&t<=e.left+e.width&&i>=e.top&&i<=e.top+e.height}var E$=(n,e,t,i,r)=>{var a,s=(a=e==null?void 0:e.length)!==null&&a!==void 0?a:0;if(s<=1||n==null)return 0;if(i==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var l=0;l<s;l++){var c,f,p,g,v,_=l>0?(c=t[l-1])===null||c===void 0?void 0:c.coordinate:(f=t[s-1])===null||f===void 0?void 0:f.coordinate,x=(p=t[l])===null||p===void 0?void 0:p.coordinate,T=l>=s-1?(g=t[0])===null||g===void 0?void 0:g.coordinate:(v=t[l+1])===null||v===void 0?void 0:v.coordinate,S=void 0;if(!(_==null||x==null||T==null))if(Wl(x-_)!==Wl(T-x)){var w=[];if(Wl(T-x)===Wl(r[1]-r[0])){S=T;var I=x+r[1]-r[0];w[0]=Math.min(I,(I+_)/2),w[1]=Math.max(I,(I+_)/2)}else{S=_;var R=T+r[1]-r[0];w[0]=Math.min(x,(R+x)/2),w[1]=Math.max(x,(R+x)/2)}var D=[Math.min(x,(S+x)/2),Math.max(x,(S+x)/2)];if(n>D[0]&&n<=D[1]||n>=w[0]&&n<=w[1]){var B;return(B=t[l])===null||B===void 0?void 0:B.index}}else{var z=Math.min(_,T),k=Math.max(_,T);if(n>(z+x)/2&&n<=(k+x)/2){var F;return(F=t[l])===null||F===void 0?void 0:F.index}}}else if(e)for(var P=0;P<s;P++){var L=e[P];if(L!=null){var V=e[P+1],W=e[P-1];if(P===0&&V!=null&&n<=(L.coordinate+V.coordinate)/2||P===s-1&&W!=null&&n>(L.coordinate+W.coordinate)/2||P>0&&P<s-1&&W!=null&&V!=null&&n>(L.coordinate+W.coordinate)/2&&n<=(L.coordinate+V.coordinate)/2)return L.index}}return-1},T$=()=>sn(IL),QL=(n,e)=>e,A$=(n,e,t)=>t,JL=(n,e,t,i)=>i,lEe=He(Th,n=>IM(n,e=>e.coordinate)),ek=He([u0,QL,A$,JL],f$),tk=He([ek,f0,Kx,Qx],$L),uEe=(n,e,t)=>{if(e!=null){var i=u0(n);return e==="axis"?t==="hover"?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:t==="hover"?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}},M$=He([u0,QL,A$,JL],d$),lA=He([_h,bh,sr,is,Th,JL,M$],h$),cEe=He([ek,lA],(n,e)=>{var t;return(t=n.coordinate)!==null&&t!==void 0?t:e}),C$=He([Th,tk],o$),fEe=He([M$,tk,Sh,Kx,C$,p$,QL],m$),hEe=He([ek,tk],(n,e)=>({isActive:n.active&&e!=null,activeIndex:e})),dEe=(n,e,t,i,r,a,s)=>{if(!(!n||!t||!i||!r)&&oEe(n,s)){var l=Fye(n,e),c=E$(l,a,r,t,i),f=aEe(e,r,c,n);return{activeIndex:String(c),activeCoordinate:f}}},pEe=(n,e,t,i,r,a,s)=>{if(!(!n||!i||!r||!a||!t)){var l=Y_e(n,t);if(l){var c=zye(l,e),f=E$(c,s,a,i,r),p=sEe(e,a,f,l);return{activeIndex:String(f),activeCoordinate:p}}}},mEe=(n,e,t,i,r,a,s,l)=>{if(!(!n||!e||!i||!r||!a))return e==="horizontal"||e==="vertical"?dEe(n,e,i,r,a,s,l):pEe(n,e,t,i,r,a,s)},gEe=He(n=>n.zIndex.zIndexMap,(n,e)=>e,(n,e,t)=>t,(n,e,t)=>{if(e!=null){var i=n[e];if(i!=null)return t?i.panoramaElement:i.element}}),vEe=He(n=>n.zIndex.zIndexMap,n=>{var e=Object.keys(n).map(i=>parseInt(i,10)).concat(Object.values(Js)),t=Array.from(new Set(e));return t.sort((i,r)=>i-r)},{memoizeOptions:{resultEqualityCheck:KSe}});function d5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function p5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?d5(Object(t),!0).forEach(function(i){yEe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):d5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function yEe(n,e,t){return(e=_Ee(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _Ee(n){var e=bEe(n,"string");return typeof e=="symbol"?e:e+""}function bEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var xEe={},SEe={zIndexMap:Object.values(Js).reduce((n,e)=>p5(p5({},n),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),xEe)},wEe=new Set(Object.values(Js));function EEe(n){return wEe.has(n)}var I$=ko({name:"zIndex",initialState:SEe,reducers:{registerZIndexPortal:{reducer:(n,e)=>{var{zIndex:t}=e.payload;n.zIndexMap[t]?n.zIndexMap[t].consumers+=1:n.zIndexMap[t]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:rr()},unregisterZIndexPortal:{reducer:(n,e)=>{var{zIndex:t}=e.payload;n.zIndexMap[t]&&(n.zIndexMap[t].consumers-=1,n.zIndexMap[t].consumers<=0&&!EEe(t)&&delete n.zIndexMap[t])},prepare:rr()},registerZIndexPortalElement:{reducer:(n,e)=>{var{zIndex:t,element:i,isPanorama:r}=e.payload;n.zIndexMap[t]?r?n.zIndexMap[t].panoramaElement=i:n.zIndexMap[t].element=i:n.zIndexMap[t]={consumers:0,element:r?void 0:i,panoramaElement:r?i:void 0}},prepare:rr()},unregisterZIndexPortalElement:{reducer:(n,e)=>{var{zIndex:t}=e.payload;n.zIndexMap[t]&&(e.payload.isPanorama?n.zIndexMap[t].panoramaElement=void 0:n.zIndexMap[t].element=void 0)},prepare:rr()}}}),{registerZIndexPortal:TEe,unregisterZIndexPortal:AEe,registerZIndexPortalElement:MEe,unregisterZIndexPortalElement:CEe}=I$.actions,IEe=I$.reducer;function Ah(n){var{zIndex:e,children:t}=n,i=y0e(),r=i&&e!==void 0&&e!==0,a=Uo(),s=Ia();H.useLayoutEffect(()=>r?(s(TEe({zIndex:e})),()=>{s(AEe({zIndex:e}))}):t0,[s,e,r]);var l=sn(c=>gEe(c,e,a));return r?l?E6.createPortal(t,l):null:t}function CO(){return CO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},CO.apply(null,arguments)}function m5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function kw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?m5(Object(t),!0).forEach(function(i){REe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):m5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function REe(n,e,t){return(e=PEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function PEe(n){var e=NEe(n,"string");return typeof e=="symbol"?e:e+""}function NEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function OEe(n){var{cursor:e,cursorComp:t,cursorProps:i}=n;return H.isValidElement(e)?H.cloneElement(e,i):H.createElement(t,i)}function DEe(n){var e,{coordinate:t,payload:i,index:r,offset:a,tooltipAxisBandSize:s,layout:l,cursor:c,tooltipEventType:f,chartName:p}=n,g=t,v=i,_=r;if(!c||!g||p!=="ScatterChart"&&f!=="axis")return null;var x,T,S;if(p==="ScatterChart")x=g,T=s_e,S=Js.cursorLine;else if(p==="BarChart")x=o_e(l,g,a,s),T=z_e,S=Js.cursorRectangle;else if(l==="radial"&&i7(g)){var{cx:w,cy:I,radius:R,startAngle:D,endAngle:B}=vW(g);x={cx:w,cy:I,startAngle:D,endAngle:B,innerRadius:R,outerRadius:R},T=J_e,S=Js.cursorLine}else x={points:ebe(l,g,a)},T=nE,S=Js.cursorLine;var z=typeof c=="object"&&"className"in c?c.className:void 0,k=kw(kw(kw(kw({stroke:"#ccc",pointerEvents:"none"},a),x),TM(c)),{},{payload:v,payloadIndex:_,className:Zi("recharts-tooltip-cursor",z)});return H.createElement(Ah,{zIndex:(e=n.zIndex)!==null&&e!==void 0?e:S},H.createElement(OEe,{cursor:c,cursorComp:T,cursorProps:k}))}function LEe(n){var e=tEe(),t=eW(),i=n0(),r=T$();return e==null||t==null||i==null||r==null?null:H.createElement(DEe,CO({},n,{offset:t,layout:i,tooltipAxisBandSize:e,chartName:r}))}var R$=H.createContext(null),kEe=()=>H.useContext(R$),CP={exports:{}},g5;function UEe(){return g5||(g5=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function r(c,f,p){this.fn=c,this.context=f,this.once=p||!1}function a(c,f,p,g,v){if(typeof p!="function")throw new TypeError("The listener must be a function");var _=new r(p,g||c,v),x=t?t+f:f;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],_]:c._events[x].push(_):(c._events[x]=_,c._eventsCount++),c}function s(c,f){--c._eventsCount===0?c._events=new i:delete c._events[f]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var f=[],p,g;if(this._eventsCount===0)return f;for(g in p=this._events)e.call(p,g)&&f.push(t?g.slice(1):g);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(p)):f},l.prototype.listeners=function(f){var p=t?t+f:f,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var v=0,_=g.length,x=new Array(_);v<_;v++)x[v]=g[v].fn;return x},l.prototype.listenerCount=function(f){var p=t?t+f:f,g=this._events[p];return g?g.fn?1:g.length:0},l.prototype.emit=function(f,p,g,v,_,x){var T=t?t+f:f;if(!this._events[T])return!1;var S=this._events[T],w=arguments.length,I,R;if(S.fn){switch(S.once&&this.removeListener(f,S.fn,void 0,!0),w){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,p),!0;case 3:return S.fn.call(S.context,p,g),!0;case 4:return S.fn.call(S.context,p,g,v),!0;case 5:return S.fn.call(S.context,p,g,v,_),!0;case 6:return S.fn.call(S.context,p,g,v,_,x),!0}for(R=1,I=new Array(w-1);R<w;R++)I[R-1]=arguments[R];S.fn.apply(S.context,I)}else{var D=S.length,B;for(R=0;R<D;R++)switch(S[R].once&&this.removeListener(f,S[R].fn,void 0,!0),w){case 1:S[R].fn.call(S[R].context);break;case 2:S[R].fn.call(S[R].context,p);break;case 3:S[R].fn.call(S[R].context,p,g);break;case 4:S[R].fn.call(S[R].context,p,g,v);break;default:if(!I)for(B=1,I=new Array(w-1);B<w;B++)I[B-1]=arguments[B];S[R].fn.apply(S[R].context,I)}}return!0},l.prototype.on=function(f,p,g){return a(this,f,p,g,!1)},l.prototype.once=function(f,p,g){return a(this,f,p,g,!0)},l.prototype.removeListener=function(f,p,g,v){var _=t?t+f:f;if(!this._events[_])return this;if(!p)return s(this,_),this;var x=this._events[_];if(x.fn)x.fn===p&&(!v||x.once)&&(!g||x.context===g)&&s(this,_);else{for(var T=0,S=[],w=x.length;T<w;T++)(x[T].fn!==p||v&&!x[T].once||g&&x[T].context!==g)&&S.push(x[T]);S.length?this._events[_]=S.length===1?S[0]:S:s(this,_)}return this},l.prototype.removeAllListeners=function(f){var p;return f?(p=t?t+f:f,this._events[p]&&s(this,p)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=t,l.EventEmitter=l,n.exports=l})(CP)),CP.exports}var FEe=UEe();const zEe=Vu(FEe);var px=new zEe,IO="recharts.syncEvent.tooltip",v5="recharts.syncEvent.brush",BEe=(n,e)=>{if(e&&Array.isArray(n)){var t=Number.parseInt(e,10);if(!ef(t))return n[t]}},VEe={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},P$=ko({name:"options",initialState:VEe,reducers:{createEventEmitter:n=>{n.eventEmitter==null&&(n.eventEmitter=Symbol("rechartsEventEmitter"))}}}),jEe=P$.reducer,{createEventEmitter:HEe}=P$.actions;function GEe(n){return n.tooltip.syncInteraction}var WEe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},N$=ko({name:"chartData",initialState:WEe,reducers:{setChartData(n,e){if(n.chartData=e.payload,e.payload==null){n.dataStartIndex=0,n.dataEndIndex=0;return}e.payload.length>0&&n.dataEndIndex!==e.payload.length-1&&(n.dataEndIndex=e.payload.length-1)},setComputedData(n,e){n.computedData=e.payload},setDataStartEndIndexes(n,e){var{startIndex:t,endIndex:i}=e.payload;t!=null&&(n.dataStartIndex=t),i!=null&&(n.dataEndIndex=i)}}}),{setChartData:y5,setDataStartEndIndexes:qEe,setComputedData:bNe}=N$.actions,$Ee=N$.reducer,XEe=["x","y"];function _5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function $v(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_5(Object(t),!0).forEach(function(i){YEe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function YEe(n,e,t){return(e=KEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KEe(n){var e=ZEe(n,"string");return typeof e=="symbol"?e:e+""}function ZEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function QEe(n,e){if(n==null)return{};var t,i,r=JEe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function JEe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function eTe(){var n=sn(RL),e=sn(PL),t=Ia(),i=sn(dq),r=sn(Th),a=n0(),s=HM(),l=sn(c=>c.rootProps.className);H.useEffect(()=>{if(n==null)return t0;var c=(f,p,g)=>{if(e!==g&&n===f){if(i==="index"){var v;if(s&&p!==null&&p!==void 0&&(v=p.payload)!==null&&v!==void 0&&v.coordinate&&p.payload.sourceViewBox){var _=p.payload.coordinate,{x,y:T}=_,S=QEe(_,XEe),{x:w,y:I,width:R,height:D}=p.payload.sourceViewBox,B=$v($v({},S),{},{x:s.x+(R?(x-w)/R:0)*s.width,y:s.y+(D?(T-I)/D:0)*s.height});t($v($v({},p),{},{payload:$v($v({},p.payload),{},{coordinate:B})}))}else t(p);return}if(r!=null){var z;if(typeof i=="function"){var k={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},F=i(r,k);z=r[F]}else i==="value"&&(z=r.find(ee=>String(ee.value)===p.payload.label));var{coordinate:P}=p.payload;if(z==null||p.payload.active===!1||P==null||s==null){t(AO({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:L,y:V}=P,W=Math.min(L,s.x+s.width),q=Math.min(V,s.y+s.height),ue={x:a==="horizontal"?z.coordinate:W,y:a==="horizontal"?q:z.coordinate},le=AO({active:p.payload.active,coordinate:ue,dataKey:p.payload.dataKey,index:String(z.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox,graphicalItemId:p.payload.graphicalItemId});t(le)}}};return px.on(IO,c),()=>{px.off(IO,c)}},[l,t,e,n,i,r,a,s])}function tTe(){var n=sn(RL),e=sn(PL),t=Ia();H.useEffect(()=>{if(n==null)return t0;var i=(r,a,s)=>{e!==s&&n===r&&t(qEe(a))};return px.on(v5,i),()=>{px.off(v5,i)}},[t,e,n])}function nTe(){var n=Ia();H.useEffect(()=>{n(HEe())},[n]),eTe(),tTe()}function iTe(n,e,t,i,r,a){var s=sn(_=>uEe(_,n,e)),l=sn(PL),c=sn(RL),f=sn(dq),p=sn(GEe),g=p==null?void 0:p.active,v=HM();H.useEffect(()=>{if(!g&&c!=null&&l!=null){var _=AO({active:a,coordinate:t,dataKey:s,index:r,label:typeof i=="number"?String(i):i,sourceViewBox:v,graphicalItemId:void 0});px.emit(IO,c,_,l)}},[g,t,s,r,i,l,c,f,a,v])}function b5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function x5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?b5(Object(t),!0).forEach(function(i){rTe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):b5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function rTe(n,e,t){return(e=aTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aTe(n){var e=sTe(n,"string");return typeof e=="symbol"?e:e+""}function sTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function oTe(n){return n.dataKey}function lTe(n,e){return H.isValidElement(n)?H.cloneElement(n,e):typeof n=="function"?H.createElement(n,e):H.createElement(z0e,e)}var S5=[],uTe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function cTe(n){var e,t,i=cl(n,uTe),{active:r,allowEscapeViewBox:a,animationDuration:s,animationEasing:l,content:c,filterNull:f,isAnimationActive:p,offset:g,payloadUniqBy:v,position:_,reverseDirection:x,useTranslate3d:T,wrapperStyle:S,cursor:w,shared:I,trigger:R,defaultIndex:D,portal:B,axisId:z}=i,k=Ia(),F=typeof D=="number"?String(D):D;H.useEffect(()=>{k(awe({shared:I,trigger:R,axisId:z,active:r,defaultIndex:F}))},[k,I,R,z,r,F]);var P=HM(),L=fW(),V=J1e(I),{activeIndex:W,isActive:q}=(e=sn(Te=>hEe(Te,V,R,F)))!==null&&e!==void 0?e:{},ue=sn(Te=>fEe(Te,V,R,F)),le=sn(Te=>C$(Te,V,R,F)),ee=sn(Te=>cEe(Te,V,R,F)),ie=ue,he=kEe(),we=(t=r??q)!==null&&t!==void 0?t:!1,[Me,J]=Tve([ie,we]),pe=V==="axis"?le:void 0;iTe(V,R,ee,pe,W,we);var Ee=B??he;if(Ee==null||P==null||V==null)return null;var Ge=ie??S5;we||(Ge=S5),f&&Ge.length&&(Ge=nve(Ge.filter(Te=>Te.value!=null&&(Te.hide!==!0||i.includeHidden)),v,oTe));var ht=Ge.length>0,be=H.createElement(q0e,{allowEscapeViewBox:a,animationDuration:s,animationEasing:l,isAnimationActive:p,active:we,coordinate:ee,hasPayload:ht,offset:g,position:_,reverseDirection:x,useTranslate3d:T,viewBox:P,wrapperStyle:S,lastBoundingBox:Me,innerRef:J,hasPortalFromProps:!!B},lTe(c,x5(x5({},i),{},{payload:Ge,label:pe,active:we,activeIndex:W,coordinate:ee,accessibilityLayer:L})));return H.createElement(H.Fragment,null,E6.createPortal(be,Ee),we&&H.createElement(LEe,{cursor:w,tooltipEventType:V,coordinate:ee,payload:Ge,index:W}))}function fTe(n,e,t){return(e=hTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function hTe(n){var e=dTe(n,"string");return typeof e=="symbol"?e:e+""}function dTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class pTe{constructor(e){fTe(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return t!==void 0&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var i=this.cache.keys().next().value;i!=null&&this.cache.delete(i)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}function w5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function mTe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?w5(Object(t),!0).forEach(function(i){gTe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):w5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function gTe(n,e,t){return(e=vTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vTe(n){var e=yTe(n,"string");return typeof e=="symbol"?e:e+""}function yTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var _Te={cacheSize:2e3,enableCache:!0},O$=mTe({},_Te),E5=new pTe(O$.cacheSize),bTe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},T5="recharts_measurement_span";function xTe(n,e){var t=e.fontSize||"",i=e.fontFamily||"",r=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",l=e.textTransform||"";return"".concat(n,"|").concat(t,"|").concat(i,"|").concat(r,"|").concat(a,"|").concat(s,"|").concat(l)}var A5=(n,e)=>{try{var t=document.getElementById(T5);t||(t=document.createElement("span"),t.setAttribute("id",T5),t.setAttribute("aria-hidden","true"),document.body.appendChild(t)),Object.assign(t.style,bTe,e),t.textContent="".concat(n);var i=t.getBoundingClientRect();return{width:i.width,height:i.height}}catch{return{width:0,height:0}}},Eb=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Hx.isSsr)return{width:0,height:0};if(!O$.enableCache)return A5(e,t);var i=xTe(e,t),r=E5.get(i);if(r)return r;var a=A5(e,t);return E5.set(i,a),a},D$;function STe(n,e,t){return(e=wTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wTe(n){var e=ETe(n,"string");return typeof e=="symbol"?e:e+""}function ETe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var M5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,C5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,TTe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,ATe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,MTe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},CTe=["cm","mm","pt","pc","in","Q","px"];function ITe(n){return CTe.includes(n)}var sy="NaN";function RTe(n,e){return n*MTe[e]}class Ya{static parse(e){var t,[,i,r]=(t=ATe.exec(e))!==null&&t!==void 0?t:[];return i==null?Ya.NaN:new Ya(parseFloat(i),r??"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,ef(e)&&(this.unit=""),t!==""&&!TTe.test(t)&&(this.num=NaN,this.unit=""),ITe(t)&&(this.num=RTe(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new Ya(NaN,""):new Ya(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Ya(NaN,""):new Ya(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ya(NaN,""):new Ya(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ya(NaN,""):new Ya(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ef(this.num)}}D$=Ya;STe(Ya,"NaN",new D$(NaN,""));function L$(n){if(n==null||n.includes(sy))return sy;for(var e=n;e.includes("*")||e.includes("/");){var t,[,i,r,a]=(t=M5.exec(e))!==null&&t!==void 0?t:[],s=Ya.parse(i??""),l=Ya.parse(a??""),c=r==="*"?s.multiply(l):s.divide(l);if(c.isNaN())return sy;e=e.replace(M5,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,[,p,g,v]=(f=C5.exec(e))!==null&&f!==void 0?f:[],_=Ya.parse(p??""),x=Ya.parse(v??""),T=g==="+"?_.add(x):_.subtract(x);if(T.isNaN())return sy;e=e.replace(C5,T.toString())}return e}var I5=/\(([^()]*)\)/;function PTe(n){for(var e=n,t;(t=I5.exec(e))!=null;){var[,i]=t;e=e.replace(I5,L$(i))}return e}function NTe(n){var e=n.replace(/\s+/g,"");return e=PTe(e),e=L$(e),e}function OTe(n){try{return NTe(n)}catch{return sy}}function IP(n){var e=OTe(n.slice(5,-1));return e===sy?"":e}var DTe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],LTe=["dx","dy","angle","className","breakAll"];function RO(){return RO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},RO.apply(null,arguments)}function R5(n,e){if(n==null)return{};var t,i,r=kTe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function kTe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var k$=/[ \f\n\r\t\v\u2028\u2029]+/,U$=n=>{var{children:e,breakAll:t,style:i}=n;try{var r=[];Rs(e)||(t?r=e.toString().split(""):r=e.toString().split(k$));var a=r.map(l=>({word:l,width:Eb(l,i).width})),s=t?0:Eb("",i).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function UTe(n){return n==="start"||n==="middle"||n==="end"||n==="inherit"}var F$=(n,e,t,i)=>n.reduce((r,a)=>{var{word:s,width:l}=a,c=r[r.length-1];if(c&&l!=null&&(e==null||i||c.width+l+t<Number(e)))c.words.push(s),c.width+=l+t;else{var f={words:[s],width:l};r.push(f)}return r},[]),z$=n=>n.reduce((e,t)=>e.width>t.width?e:t),FTe="",P5=(n,e,t,i,r,a,s,l)=>{var c=n.slice(0,e),f=U$({breakAll:t,style:i,children:c+FTe});if(!f)return[!1,[]];var p=F$(f.wordsWithComputedWidth,a,s,l),g=p.length>r||z$(p).width>Number(a);return[g,p]},zTe=(n,e,t,i,r)=>{var{maxLines:a,children:s,style:l,breakAll:c}=n,f=qt(a),p=String(s),g=F$(e,i,t,r);if(!f||r)return g;var v=g.length>a||z$(g).width>Number(i);if(!v)return g;for(var _=0,x=p.length-1,T=0,S;_<=x&&T<=p.length-1;){var w=Math.floor((_+x)/2),I=w-1,[R,D]=P5(p,I,c,l,a,i,t,r),[B]=P5(p,w,c,l,a,i,t,r);if(!R&&!B&&(_=w+1),R&&B&&(x=w-1),!R&&B){S=D;break}T++}return S||g},N5=n=>{var e=Rs(n)?[]:n.toString().split(k$);return[{words:e,width:void 0}]},BTe=n=>{var{width:e,scaleToFit:t,children:i,style:r,breakAll:a,maxLines:s}=n;if((e||t)&&!Hx.isSsr){var l,c,f=U$({breakAll:a,children:i,style:r});if(f){var{wordsWithComputedWidth:p,spaceWidth:g}=f;l=p,c=g}else return N5(i);return zTe({breakAll:a,children:i,maxLines:s,style:r},l,c,e,!!t)}return N5(i)},B$="#808080",VTe={angle:0,breakAll:!1,capHeight:"0.71em",fill:B$,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},nk=H.forwardRef((n,e)=>{var t=cl(n,VTe),{x:i,y:r,lineHeight:a,capHeight:s,fill:l,scaleToFit:c,textAnchor:f,verticalAnchor:p}=t,g=R5(t,DTe),v=H.useMemo(()=>BTe({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:c,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,c,g.style,g.width]),{dx:_,dy:x,angle:T,className:S,breakAll:w}=g,I=R5(g,LTe);if(!tf(i)||!tf(r)||v.length===0)return null;var R=Number(i)+(qt(_)?_:0),D=Number(r)+(qt(x)?x:0);if(!Kn(R)||!Kn(D))return null;var B;switch(p){case"start":B=IP("calc(".concat(s,")"));break;case"middle":B=IP("calc(".concat((v.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:B=IP("calc(".concat(v.length-1," * -").concat(a,")"));break}var z=[],k=v[0];if(c&&k!=null){var F=k.width,{width:P}=g;z.push("scale(".concat(qt(P)&&qt(F)?P/F:1,")"))}return T&&z.push("rotate(".concat(T,", ").concat(R,", ").concat(D,")")),z.length&&(I.transform=z.join(" ")),H.createElement("text",RO({},Kl(I),{ref:e,x:R,y:D,className:Zi("recharts-text",S),textAnchor:f,fill:l.includes("url")?B$:l}),v.map((L,V)=>{var W=L.words.join(w?"":" ");return H.createElement("tspan",{x:R,dy:V===0?B:a,key:"".concat(W,"-").concat(V)},W)}))});nk.displayName="Text";function O5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Cc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?O5(Object(t),!0).forEach(function(i){jTe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):O5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function jTe(n,e,t){return(e=HTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function HTe(n){var e=GTe(n,"string");return typeof e=="symbol"?e:e+""}function GTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var WTe=n=>{var{viewBox:e,position:t,offset:i=0,parentViewBox:r}=n,{x:a,y:s,height:l,upperWidth:c,lowerWidth:f}=eL(e),p=a,g=a+(c-f)/2,v=(p+g)/2,_=(c+f)/2,x=p+c/2,T=l>=0?1:-1,S=T*i,w=T>0?"end":"start",I=T>0?"start":"end",R=c>=0?1:-1,D=R*i,B=R>0?"end":"start",z=R>0?"start":"end",k=r;if(t==="top"){var F={x:p+c/2,y:s-S,horizontalAnchor:"middle",verticalAnchor:w};return k&&(F.height=Math.max(s-k.y,0),F.width=c),F}if(t==="bottom"){var P={x:g+f/2,y:s+l+S,horizontalAnchor:"middle",verticalAnchor:I};return k&&(P.height=Math.max(k.y+k.height-(s+l),0),P.width=f),P}if(t==="left"){var L={x:v-D,y:s+l/2,horizontalAnchor:B,verticalAnchor:"middle"};return k&&(L.width=Math.max(L.x-k.x,0),L.height=l),L}if(t==="right"){var V={x:v+_+D,y:s+l/2,horizontalAnchor:z,verticalAnchor:"middle"};return k&&(V.width=Math.max(k.x+k.width-V.x,0),V.height=l),V}var W=k?{width:_,height:l}:{};return t==="insideLeft"?Cc({x:v+D,y:s+l/2,horizontalAnchor:z,verticalAnchor:"middle"},W):t==="insideRight"?Cc({x:v+_-D,y:s+l/2,horizontalAnchor:B,verticalAnchor:"middle"},W):t==="insideTop"?Cc({x:p+c/2,y:s+S,horizontalAnchor:"middle",verticalAnchor:I},W):t==="insideBottom"?Cc({x:g+f/2,y:s+l-S,horizontalAnchor:"middle",verticalAnchor:w},W):t==="insideTopLeft"?Cc({x:p+D,y:s+S,horizontalAnchor:z,verticalAnchor:I},W):t==="insideTopRight"?Cc({x:p+c-D,y:s+S,horizontalAnchor:B,verticalAnchor:I},W):t==="insideBottomLeft"?Cc({x:g+D,y:s+l-S,horizontalAnchor:z,verticalAnchor:w},W):t==="insideBottomRight"?Cc({x:g+f-D,y:s+l-S,horizontalAnchor:B,verticalAnchor:w},W):t&&typeof t=="object"&&(qt(t.x)||og(t.x))&&(qt(t.y)||og(t.y))?Cc({x:a+lp(t.x,_),y:s+lp(t.y,l),horizontalAnchor:"end",verticalAnchor:"end"},W):Cc({x,y:s+l/2,horizontalAnchor:"middle",verticalAnchor:"middle"},W)},qTe=["labelRef"],$Te=["content"];function D5(n,e){if(n==null)return{};var t,i,r=XTe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function XTe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function L5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function sb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?L5(Object(t),!0).forEach(function(i){YTe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):L5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function YTe(n,e,t){return(e=KTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KTe(n){var e=ZTe(n,"string");return typeof e=="symbol"?e:e+""}function ZTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Jf(){return Jf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Jf.apply(null,arguments)}var V$=H.createContext(null),QTe=n=>{var{x:e,y:t,upperWidth:i,lowerWidth:r,width:a,height:s,children:l}=n,c=H.useMemo(()=>({x:e,y:t,upperWidth:i,lowerWidth:r,width:a,height:s}),[e,t,i,r,a,s]);return H.createElement(V$.Provider,{value:c},l)},j$=()=>{var n=H.useContext(V$),e=HM();return n||(e?eL(e):void 0)},JTe=H.createContext(null),eAe=()=>{var n=H.useContext(JTe),e=sn(yq);return n||e},tAe=n=>{var{value:e,formatter:t}=n,i=Rs(n.children)?e:n.children;return typeof t=="function"?t(i):i},ik=n=>n!=null&&typeof n=="function",nAe=(n,e)=>{var t=Wl(e-n),i=Math.min(Math.abs(e-n),360);return t*i},iAe=(n,e,t,i,r)=>{var{offset:a,className:s}=n,{cx:l,cy:c,innerRadius:f,outerRadius:p,startAngle:g,endAngle:v,clockWise:_}=r,x=(f+p)/2,T=nAe(g,v),S=T>=0?1:-1,w,I;switch(e){case"insideStart":w=g+S*a,I=_;break;case"insideEnd":w=v-S*a,I=!_;break;case"end":w=v+S*a,I=_;break;default:throw new Error("Unsupported position ".concat(e))}I=T<=0?I:!I;var R=Ja(l,c,x,w),D=Ja(l,c,x,w+(I?1:-1)*359),B="M".concat(R.x,",").concat(R.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(I?0:1,`,
    `).concat(D.x,",").concat(D.y),z=Rs(n.id)?ex("recharts-radial-line-"):n.id;return H.createElement("text",Jf({},i,{dominantBaseline:"central",className:Zi("recharts-radial-bar-label",s)}),H.createElement("defs",null,H.createElement("path",{id:z,d:B})),H.createElement("textPath",{xlinkHref:"#".concat(z)},t))},rAe=(n,e,t)=>{var{cx:i,cy:r,innerRadius:a,outerRadius:s,startAngle:l,endAngle:c}=n,f=(l+c)/2;if(t==="outside"){var{x:p,y:g}=Ja(i,r,s+e,f);return{x:p,y:g,textAnchor:p>=i?"start":"end",verticalAnchor:"middle"}}if(t==="center")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(t==="centerTop")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"start"};if(t==="centerBottom")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"end"};var v=(a+s)/2,{x:_,y:x}=Ja(i,r,v,f);return{x:_,y:x,textAnchor:"middle",verticalAnchor:"middle"}},rE=n=>n!=null&&"cx"in n&&qt(n.cx),aAe={angle:0,offset:5,zIndex:Js.label,position:"middle",textBreakAll:!1};function sAe(n){if(!rE(n))return n;var{cx:e,cy:t,outerRadius:i}=n,r=i*2;return{x:e-i,y:t-i,width:r,upperWidth:r,lowerWidth:r,height:r}}function Id(n){var e=cl(n,aAe),{viewBox:t,parentViewBox:i,position:r,value:a,children:s,content:l,className:c="",textBreakAll:f,labelRef:p}=e,g=eAe(),v=j$(),_=r==="center"?v:g??v,x,T,S;t==null?x=_:rE(t)?x=t:x=eL(t);var w=sAe(x);if(!x||Rs(a)&&Rs(s)&&!H.isValidElement(l)&&typeof l!="function")return null;var I=sb(sb({},e),{},{viewBox:x});if(H.isValidElement(l)){var{labelRef:R}=I,D=D5(I,qTe);return H.cloneElement(l,D)}if(typeof l=="function"){var{content:B}=I,z=D5(I,$Te);if(T=H.createElement(l,z),H.isValidElement(T))return T}else T=tAe(e);var k=Kl(e);if(rE(x)){if(r==="insideStart"||r==="insideEnd"||r==="end")return iAe(e,r,T,k,x);S=rAe(x,e.offset,e.position)}else{if(!w)return null;var F=WTe({viewBox:w,position:r,offset:e.offset,parentViewBox:rE(i)?void 0:i});S=sb(sb({x:F.x,y:F.y,textAnchor:F.horizontalAnchor,verticalAnchor:F.verticalAnchor},F.width!==void 0?{width:F.width}:{}),F.height!==void 0?{height:F.height}:{})}return H.createElement(Ah,{zIndex:e.zIndex},H.createElement(nk,Jf({ref:p,className:Zi("recharts-label",c)},k,S,{textAnchor:UTe(k.textAnchor)?k.textAnchor:S.textAnchor,breakAll:f}),T))}Id.displayName="Label";var oAe=(n,e,t)=>{if(!n)return null;var i={viewBox:e,labelRef:t};return n===!0?H.createElement(Id,Jf({key:"label-implicit"},i)):tf(n)?H.createElement(Id,Jf({key:"label-implicit",value:n},i)):H.isValidElement(n)?n.type===Id?H.cloneElement(n,sb({key:"label-implicit"},i)):H.createElement(Id,Jf({key:"label-implicit",content:n},i)):ik(n)?H.createElement(Id,Jf({key:"label-implicit",content:n},i)):n&&typeof n=="object"?H.createElement(Id,Jf({},n,{key:"label-implicit"},i)):null};function lAe(n){var{label:e,labelRef:t}=n,i=j$();return oAe(e,i,t)||null}var RP={},PP={},k5;function uAe(){return k5||(k5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t[t.length-1]}n.last=e})(PP)),PP}var NP={},U5;function cAe(){return U5||(U5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Array.isArray(t)?t:Array.from(t)}n.toArray=e})(NP)),NP}var F5;function fAe(){return F5||(F5=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=uAe(),t=cAe(),i=G3();function r(a){if(i.isArrayLike(a))return e.last(t.toArray(a))}n.last=r})(RP)),RP}var OP,z5;function hAe(){return z5||(z5=1,OP=fAe().last),OP}var dAe=hAe();const pAe=Vu(dAe);var mAe=["valueAccessor"],gAe=["dataKey","clockWise","id","textBreakAll","zIndex"];function uA(){return uA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},uA.apply(null,arguments)}function B5(n,e){if(n==null)return{};var t,i,r=vAe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function vAe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var yAe=n=>Array.isArray(n.value)?pAe(n.value):n.value,H$=H.createContext(void 0),_Ae=H$.Provider,G$=H.createContext(void 0);G$.Provider;function bAe(){return H.useContext(H$)}function xAe(){return H.useContext(G$)}function aE(n){var{valueAccessor:e=yAe}=n,t=B5(n,mAe),{dataKey:i,clockWise:r,id:a,textBreakAll:s,zIndex:l}=t,c=B5(t,gAe),f=bAe(),p=xAe(),g=f||p;return!g||!g.length?null:H.createElement(Ah,{zIndex:l??Js.label},H.createElement(Jc,{className:"recharts-label-list"},g.map((v,_)=>{var x,T=Rs(i)?e(v,_):ts(v.payload,i),S=Rs(a)?{}:{id:"".concat(a,"-").concat(_)};return H.createElement(Id,uA({key:"label-".concat(_)},Kl(v),c,S,{fill:(x=t.fill)!==null&&x!==void 0?x:v.fill,parentViewBox:v.parentViewBox,value:T,textBreakAll:s,viewBox:v.viewBox,index:_,zIndex:0}))})))}aE.displayName="LabelList";function SAe(n){var{label:e}=n;return e?e===!0?H.createElement(aE,{key:"labelList-implicit"}):H.isValidElement(e)||ik(e)?H.createElement(aE,{key:"labelList-implicit",content:e}):typeof e=="object"?H.createElement(aE,uA({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function PO(){return PO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},PO.apply(null,arguments)}var W$=n=>{var{cx:e,cy:t,r:i,className:r}=n,a=Zi("recharts-dot",r);return qt(e)&&qt(t)&&qt(i)?H.createElement("circle",PO({},zu(n),H3(n),{className:a,cx:e,cy:t,r:i})):null},wAe={radiusAxis:{},angleAxis:{}},q$=ko({name:"polarAxis",initialState:wAe,reducers:{addRadiusAxis(n,e){n.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(n,e){delete n.radiusAxis[e.payload.id]},addAngleAxis(n,e){n.angleAxis[e.payload.id]=e.payload},removeAngleAxis(n,e){delete n.angleAxis[e.payload.id]}}}),{addRadiusAxis:xNe,removeRadiusAxis:SNe,addAngleAxis:wNe,removeAngleAxis:ENe}=q$.actions,EAe=q$.reducer;function TAe(n){return n&&typeof n=="object"&&"className"in n&&typeof n.className=="string"?n.className:""}var $$=n=>n&&typeof n=="object"&&"clipDot"in n?!!n.clipDot:!0;function AAe(n){var{tooltipEntrySettings:e}=n,t=Ia(),i=Uo(),r=H.useRef(null);return H.useLayoutEffect(()=>{i||(r.current===null?t(nwe(e)):r.current!==e&&t(iwe({prev:r.current,next:e})),r.current=e)},[e,t,i]),H.useLayoutEffect(()=>()=>{r.current&&(t(rwe(r.current)),r.current=null)},[t]),null}function MAe(n){var{legendPayload:e}=n,t=Ia(),i=Uo(),r=H.useRef(null);return H.useLayoutEffect(()=>{i||(r.current===null?t(P0e(e)):r.current!==e&&t(N0e({prev:r.current,next:e})),r.current=e)},[t,i,e]),H.useLayoutEffect(()=>()=>{r.current&&(t(O0e(r.current)),r.current=null)},[t]),null}var DP,CAe=()=>{var[n]=H.useState(()=>ex("uid-"));return n},IAe=(DP=x6.useId)!==null&&DP!==void 0?DP:CAe;function RAe(n,e){var t=IAe();return e||(n?"".concat(n,"-").concat(t):t)}var PAe=H.createContext(void 0),NAe=n=>{var{id:e,type:t,children:i}=n,r=RAe("recharts-".concat(t),e);return H.createElement(PAe.Provider,{value:r},i(r))},OAe={cartesianItems:[],polarItems:[]},X$=ko({name:"graphicalItems",initialState:OAe,reducers:{addCartesianGraphicalItem:{reducer(n,e){n.cartesianItems.push(e.payload)},prepare:rr()},replaceCartesianGraphicalItem:{reducer(n,e){var{prev:t,next:i}=e.payload,r=Fu(n).cartesianItems.indexOf(t);r>-1&&(n.cartesianItems[r]=i)},prepare:rr()},removeCartesianGraphicalItem:{reducer(n,e){var t=Fu(n).cartesianItems.indexOf(e.payload);t>-1&&n.cartesianItems.splice(t,1)},prepare:rr()},addPolarGraphicalItem:{reducer(n,e){n.polarItems.push(e.payload)},prepare:rr()},removePolarGraphicalItem:{reducer(n,e){var t=Fu(n).polarItems.indexOf(e.payload);t>-1&&n.polarItems.splice(t,1)},prepare:rr()}}}),{addCartesianGraphicalItem:DAe,replaceCartesianGraphicalItem:LAe,removeCartesianGraphicalItem:kAe,addPolarGraphicalItem:TNe,removePolarGraphicalItem:ANe}=X$.actions,UAe=X$.reducer,FAe=n=>{var e=Ia(),t=H.useRef(null);return H.useLayoutEffect(()=>{t.current===null?e(DAe(n)):t.current!==n&&e(LAe({prev:t.current,next:n})),t.current=n},[e,n]),H.useLayoutEffect(()=>()=>{t.current&&(e(kAe(t.current)),t.current=null)},[e]),null},zAe=H.memo(FAe),BAe=["points"];function V5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function LP(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?V5(Object(t),!0).forEach(function(i){VAe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):V5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function VAe(n,e,t){return(e=jAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jAe(n){var e=HAe(n,"string");return typeof e=="symbol"?e:e+""}function HAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function cA(){return cA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},cA.apply(null,arguments)}function GAe(n,e){if(n==null)return{};var t,i,r=WAe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function WAe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function qAe(n){var{option:e,dotProps:t,className:i}=n;if(H.isValidElement(e))return H.cloneElement(e,t);if(typeof e=="function")return e(t);var r=Zi(i,typeof e!="boolean"?e.className:""),a=t??{},{points:s}=a,l=GAe(a,BAe);return H.createElement(W$,cA({},l,{className:r}))}function $Ae(n,e){return n==null?!1:e?!0:n.length===1}function XAe(n){var{points:e,dot:t,className:i,dotClassName:r,dataKey:a,baseProps:s,needClip:l,clipPathId:c,zIndex:f=Js.scatter}=n;if(!$Ae(e,t))return null;var p=$$(t),g=Yme(t),v=e.map((x,T)=>{var S,w,I=LP(LP(LP({r:3},s),g),{},{index:T,cx:(S=x.x)!==null&&S!==void 0?S:void 0,cy:(w=x.y)!==null&&w!==void 0?w:void 0,dataKey:a,value:x.value,payload:x.payload,points:e});return H.createElement(qAe,{key:"dot-".concat(T),option:t,dotProps:I,className:r})}),_={};return l&&c!=null&&(_.clipPath="url(#clipPath-".concat(p?"":"dots-").concat(c,")")),H.createElement(Ah,{zIndex:f},H.createElement(Jc,cA({className:i},_),v))}function j5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function H5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?j5(Object(t),!0).forEach(function(i){YAe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):j5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function YAe(n,e,t){return(e=KAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KAe(n){var e=ZAe(n,"string");return typeof e=="symbol"?e:e+""}function ZAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Y$=0,QAe={xAxis:{},yAxis:{},zAxis:{}},K$=ko({name:"cartesianAxis",initialState:QAe,reducers:{addXAxis:{reducer(n,e){n.xAxis[e.payload.id]=e.payload},prepare:rr()},replaceXAxis:{reducer(n,e){var{prev:t,next:i}=e.payload;n.xAxis[t.id]!==void 0&&(t.id!==i.id&&delete n.xAxis[t.id],n.xAxis[i.id]=i)},prepare:rr()},removeXAxis:{reducer(n,e){delete n.xAxis[e.payload.id]},prepare:rr()},addYAxis:{reducer(n,e){n.yAxis[e.payload.id]=e.payload},prepare:rr()},replaceYAxis:{reducer(n,e){var{prev:t,next:i}=e.payload;n.yAxis[t.id]!==void 0&&(t.id!==i.id&&delete n.yAxis[t.id],n.yAxis[i.id]=i)},prepare:rr()},removeYAxis:{reducer(n,e){delete n.yAxis[e.payload.id]},prepare:rr()},addZAxis:{reducer(n,e){n.zAxis[e.payload.id]=e.payload},prepare:rr()},replaceZAxis:{reducer(n,e){var{prev:t,next:i}=e.payload;n.zAxis[t.id]!==void 0&&(t.id!==i.id&&delete n.zAxis[t.id],n.zAxis[i.id]=i)},prepare:rr()},removeZAxis:{reducer(n,e){delete n.zAxis[e.payload.id]},prepare:rr()},updateYAxisWidth(n,e){var{id:t,width:i}=e.payload,r=n.yAxis[t];if(r){var a,s=r.widthHistory||[];if(s.length===3&&s[0]===s[2]&&i===s[1]&&i!==r.width&&Math.abs(i-((a=s[0])!==null&&a!==void 0?a:0))<=1)return;var l=[...s,i].slice(-3);n.yAxis[t]=H5(H5({},r),{},{width:i,widthHistory:l})}}}}),{addXAxis:JAe,replaceXAxis:eMe,removeXAxis:tMe,addYAxis:nMe,replaceYAxis:iMe,removeYAxis:rMe,addZAxis:MNe,replaceZAxis:CNe,removeZAxis:INe,updateYAxisWidth:aMe}=K$.actions,sMe=K$.reducer,oMe=He([is],n=>({top:n.top,bottom:n.bottom,left:n.left,right:n.right})),lMe=He([oMe,_h,bh],(n,e,t)=>{if(!(!n||e==null||t==null))return{x:n.left,y:n.top,width:Math.max(0,e-n.left-n.right),height:Math.max(0,t-n.top-n.bottom)}}),rk=()=>sn(lMe),uMe=()=>sn(Kwe);function G5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function kP(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?G5(Object(t),!0).forEach(function(i){cMe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):G5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function cMe(n,e,t){return(e=fMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fMe(n){var e=hMe(n,"string");return typeof e=="symbol"?e:e+""}function hMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var dMe=n=>{var{point:e,childIndex:t,mainColor:i,activeDot:r,dataKey:a,clipPath:s}=n;if(r===!1||e.x==null||e.y==null)return null;var l={index:t,dataKey:a,cx:e.x,cy:e.y,r:4,fill:i??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},c=kP(kP(kP({},l),TM(r)),H3(r)),f;return H.isValidElement(r)?f=H.cloneElement(r,c):typeof r=="function"?f=r(c):f=H.createElement(W$,c),H.createElement(Jc,{className:"recharts-active-dot",clipPath:s},f)};function W5(n){var{points:e,mainColor:t,activeDot:i,itemDataKey:r,clipPath:a,zIndex:s=Js.activeDot}=n,l=sn(dx),c=uMe();if(e==null||c==null)return null;var f=e.find(p=>c.includes(p.payload));return Rs(f)?null:H.createElement(Ah,{zIndex:s},H.createElement(dMe,{point:f,childIndex:Number(l),mainColor:t,dataKey:r,activeDot:i,clipPath:a}))}var pMe=n=>{var{chartData:e}=n,t=Ia(),i=Uo();return H.useEffect(()=>i?()=>{}:(t(y5(e)),()=>{t(y5(void 0))}),[e,t,i]),null},q5={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Z$=ko({name:"brush",initialState:q5,reducers:{setBrushSettings(n,e){return e.payload==null?q5:e.payload}}}),{setBrushSettings:RNe}=Z$.actions,mMe=Z$.reducer;function gMe(n){return(n%180+180)%180}var vMe=function(e){var{width:t,height:i}=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=gMe(r),s=a*Math.PI/180,l=Math.atan(i/t),c=s>l&&s<Math.PI-l?i/Math.sin(s):t/Math.cos(s);return Math.abs(c)},yMe={dots:[],areas:[],lines:[]},Q$=ko({name:"referenceElements",initialState:yMe,reducers:{addDot:(n,e)=>{n.dots.push(e.payload)},removeDot:(n,e)=>{var t=Fu(n).dots.findIndex(i=>i===e.payload);t!==-1&&n.dots.splice(t,1)},addArea:(n,e)=>{n.areas.push(e.payload)},removeArea:(n,e)=>{var t=Fu(n).areas.findIndex(i=>i===e.payload);t!==-1&&n.areas.splice(t,1)},addLine:(n,e)=>{n.lines.push(e.payload)},removeLine:(n,e)=>{var t=Fu(n).lines.findIndex(i=>i===e.payload);t!==-1&&n.lines.splice(t,1)}}}),{addDot:PNe,removeDot:NNe,addArea:ONe,removeArea:DNe,addLine:LNe,removeLine:kNe}=Q$.actions,_Me=Q$.reducer,bMe=H.createContext(void 0),xMe=n=>{var{children:e}=n,[t]=H.useState("".concat(ex("recharts"),"-clip")),i=rk();if(i==null)return null;var{x:r,y:a,width:s,height:l}=i;return H.createElement(bMe.Provider,{value:t},H.createElement("defs",null,H.createElement("clipPath",{id:t},H.createElement("rect",{x:r,y:a,height:l,width:s}))),e)};function J$(n,e){if(e<1)return[];if(e===1)return n;for(var t=[],i=0;i<n.length;i+=e){var r=n[i];r!==void 0&&t.push(r)}return t}function SMe(n,e,t){var i={width:n.width+e.width,height:n.height+e.height};return vMe(i,t)}function wMe(n,e,t){var i=t==="width",{x:r,y:a,width:s,height:l}=n;return e===1?{start:i?r:a,end:i?r+s:a+l}:{start:i?r+s:a+l,end:i?r:a}}function mx(n,e,t,i,r){if(n*e<n*i||n*e>n*r)return!1;var a=t();return n*(e-n*a/2-i)>=0&&n*(e+n*a/2-r)<=0}function EMe(n,e){return J$(n,e+1)}function TMe(n,e,t,i,r){for(var a=(i||[]).slice(),{start:s,end:l}=e,c=0,f=1,p=s,g=function(){var x=i==null?void 0:i[c];if(x===void 0)return{v:J$(i,f)};var T=c,S,w=()=>(S===void 0&&(S=t(x,T)),S),I=x.coordinate,R=c===0||mx(n,I,w,p,l);R||(c=0,p=s,f+=1),R&&(p=I+n*(w()/2+r),c+=f)},v;f<=a.length;)if(v=g(),v)return v.v;return[]}function AMe(n,e,t,i,r){var a=(i||[]).slice(),s=a.length;if(s===0)return[];for(var{start:l,end:c}=e,f=1;f<=s;f++){for(var p=(s-1)%f,g=l,v=!0,_=function(){var D=i[T];if(D==null)return 0;var B=T,z,k=()=>(z===void 0&&(z=t(D,B)),z),F=D.coordinate,P=T===p||mx(n,F,k,g,c);if(!P)return v=!1,1;P&&(g=F+n*(k()/2+r))},x,T=p;T<s&&(x=_(),!(x!==0&&x===1));T+=f);if(v){for(var S=[],w=p;w<s;w+=f){var I=i[w];I!=null&&S.push(I)}return S}}return[]}function $5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ws(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$5(Object(t),!0).forEach(function(i){MMe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function MMe(n,e,t){return(e=CMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function CMe(n){var e=IMe(n,"string");return typeof e=="symbol"?e:e+""}function IMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function RMe(n,e,t,i,r){for(var a=(i||[]).slice(),s=a.length,{start:l}=e,{end:c}=e,f=function(v){var _=a[v];if(_==null)return 1;var x=_,T,S=()=>(T===void 0&&(T=t(_,v)),T);if(v===s-1){var w=n*(x.coordinate+n*S()/2-c);a[v]=x=ws(ws({},x),{},{tickCoord:w>0?x.coordinate-w*n:x.coordinate})}else a[v]=x=ws(ws({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var I=mx(n,x.tickCoord,S,l,c);I&&(c=x.tickCoord-n*(S()/2+r),a[v]=ws(ws({},x),{},{isShow:!0}))}},p=s-1;p>=0;p--)f(p);return a}function PMe(n,e,t,i,r,a){var s=(i||[]).slice(),l=s.length,{start:c,end:f}=e;if(a){var p=i[l-1];if(p!=null){var g=t(p,l-1),v=n*(p.coordinate+n*g/2-f);if(s[l-1]=p=ws(ws({},p),{},{tickCoord:v>0?p.coordinate-v*n:p.coordinate}),p.tickCoord!=null){var _=mx(n,p.tickCoord,()=>g,c,f);_&&(f=p.tickCoord-n*(g/2+r),s[l-1]=ws(ws({},p),{},{isShow:!0}))}}}for(var x=a?l-1:l,T=function(I){var R=s[I];if(R==null)return 1;var D=R,B,z=()=>(B===void 0&&(B=t(R,I)),B);if(I===0){var k=n*(D.coordinate-n*z()/2-c);s[I]=D=ws(ws({},D),{},{tickCoord:k<0?D.coordinate-k*n:D.coordinate})}else s[I]=D=ws(ws({},D),{},{tickCoord:D.coordinate});if(D.tickCoord!=null){var F=mx(n,D.tickCoord,z,c,f);F&&(c=D.tickCoord+n*(z()/2+r),s[I]=ws(ws({},D),{},{isShow:!0}))}},S=0;S<x;S++)T(S);return s}function ak(n,e,t){var{tick:i,ticks:r,viewBox:a,minTickGap:s,orientation:l,interval:c,tickFormatter:f,unit:p,angle:g}=n;if(!r||!r.length||!i)return[];if(qt(c)||Hx.isSsr){var v;return(v=EMe(r,qt(c)?c:0))!==null&&v!==void 0?v:[]}var _=[],x=l==="top"||l==="bottom"?"width":"height",T=p&&x==="width"?Eb(p,{fontSize:e,letterSpacing:t}):{width:0,height:0},S=(B,z)=>{var k=typeof f=="function"?f(B.value,z):B.value;return x==="width"?SMe(Eb(k,{fontSize:e,letterSpacing:t}),T,g):Eb(k,{fontSize:e,letterSpacing:t})[x]},w=r[0],I=r[1],R=r.length>=2&&w!=null&&I!=null?Wl(I.coordinate-w.coordinate):1,D=wMe(a,R,x);return c==="equidistantPreserveStart"?TMe(R,D,S,r,s):c==="equidistantPreserveEnd"?AMe(R,D,S,r,s):(c==="preserveStart"||c==="preserveStartEnd"?_=PMe(R,D,S,r,s,c==="preserveStartEnd"):_=RMe(R,D,S,r,s),_.filter(B=>B.isShow))}var NMe=n=>{var{ticks:e,label:t,labelGapWithTick:i=5,tickSize:r=0,tickMargin:a=0}=n,s=0;if(e){Array.from(e).forEach(p=>{if(p){var g=p.getBoundingClientRect();g.width>s&&(s=g.width)}});var l=t?t.getBoundingClientRect().width:0,c=r+a,f=s+c+l+(t?i:0);return Math.round(f)}return 0},OMe=["axisLine","width","height","className","hide","ticks","axisType"];function DMe(n,e){if(n==null)return{};var t,i,r=LMe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function LMe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function hg(){return hg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},hg.apply(null,arguments)}function X5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function wr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?X5(Object(t),!0).forEach(function(i){kMe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):X5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function kMe(n,e,t){return(e=UMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function UMe(n){var e=FMe(n,"string");return typeof e=="symbol"?e:e+""}function FMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var oh={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Js.axis};function zMe(n){var{x:e,y:t,width:i,height:r,orientation:a,mirror:s,axisLine:l,otherSvgProps:c}=n;if(!l)return null;var f=wr(wr(wr({},c),zu(l)),{},{fill:"none"});if(a==="top"||a==="bottom"){var p=+(a==="top"&&!s||a==="bottom"&&s);f=wr(wr({},f),{},{x1:e,y1:t+p*r,x2:e+i,y2:t+p*r})}else{var g=+(a==="left"&&!s||a==="right"&&s);f=wr(wr({},f),{},{x1:e+g*i,y1:t,x2:e+g*i,y2:t+r})}return H.createElement("line",hg({},f,{className:Zi("recharts-cartesian-axis-line",CM(l,"className"))}))}function BMe(n,e,t,i,r,a,s,l,c){var f,p,g,v,_,x,T=l?-1:1,S=n.tickSize||s,w=qt(n.tickCoord)?n.tickCoord:n.coordinate;switch(a){case"top":f=p=n.coordinate,v=t+ +!l*r,g=v-T*S,x=g-T*c,_=w;break;case"left":g=v=n.coordinate,p=e+ +!l*i,f=p-T*S,_=f-T*c,x=w;break;case"right":g=v=n.coordinate,p=e+ +l*i,f=p+T*S,_=f+T*c,x=w;break;default:f=p=n.coordinate,v=t+ +l*r,g=v+T*S,x=g+T*c,_=w;break}return{line:{x1:f,y1:g,x2:p,y2:v},tick:{x:_,y:x}}}function VMe(n,e){switch(n){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function jMe(n,e){switch(n){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function HMe(n){var{option:e,tickProps:t,value:i}=n,r,a=Zi(t.className,"recharts-cartesian-axis-tick-value");if(H.isValidElement(e))r=H.cloneElement(e,wr(wr({},t),{},{className:a}));else if(typeof e=="function")r=e(wr(wr({},t),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=Zi(s,TAe(e))),r=H.createElement(nk,hg({},t,{className:s}),i)}return r}var GMe=H.forwardRef((n,e)=>{var{ticks:t=[],tick:i,tickLine:r,stroke:a,tickFormatter:s,unit:l,padding:c,tickTextProps:f,orientation:p,mirror:g,x:v,y:_,width:x,height:T,tickSize:S,tickMargin:w,fontSize:I,letterSpacing:R,getTicksConfig:D,events:B,axisType:z}=n,k=ak(wr(wr({},D),{},{ticks:t}),I,R),F=VMe(p,g),P=jMe(p,g),L=zu(D),V=TM(i),W={};typeof r=="object"&&(W=r);var q=wr(wr({},L),{},{fill:"none"},W),ue=k.map(ie=>wr({entry:ie},BMe(ie,v,_,x,T,p,S,g,w))),le=ue.map(ie=>{var{entry:he,line:we}=ie;return H.createElement(Jc,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(he.value,"-").concat(he.coordinate,"-").concat(he.tickCoord)},r&&H.createElement("line",hg({},q,we,{className:Zi("recharts-cartesian-axis-tick-line",CM(r,"className"))})))}),ee=ue.map((ie,he)=>{var we,Me,{entry:J,tick:pe}=ie,Ee=wr(wr(wr(wr({verticalAnchor:P},L),{},{textAnchor:F,stroke:"none",fill:a},pe),{},{index:he,payload:J,visibleTicksCount:k.length,tickFormatter:s,padding:c},f),{},{angle:(we=(Me=f==null?void 0:f.angle)!==null&&Me!==void 0?Me:L.angle)!==null&&we!==void 0?we:0}),Ge=wr(wr({},Ee),V);return H.createElement(Jc,hg({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},Pge(B,J,he)),i&&H.createElement(HMe,{option:i,tickProps:Ge,value:"".concat(typeof s=="function"?s(J.value,he):J.value).concat(l||"")}))});return H.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(z,"-ticks")},ee.length>0&&H.createElement(Ah,{zIndex:Js.label},H.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(z,"-tick-labels"),ref:e},ee)),le.length>0&&H.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(z,"-tick-lines")},le))}),WMe=H.forwardRef((n,e)=>{var{axisLine:t,width:i,height:r,className:a,hide:s,ticks:l,axisType:c}=n,f=DMe(n,OMe),[p,g]=H.useState(""),[v,_]=H.useState(""),x=H.useRef(null);H.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var S;return NMe({ticks:x.current,label:(S=n.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:n.tickSize,tickMargin:n.tickMargin})}}));var T=H.useCallback(S=>{if(S){var w=S.getElementsByClassName("recharts-cartesian-axis-tick-value");x.current=w;var I=w[0];if(I){var R=window.getComputedStyle(I),D=R.fontSize,B=R.letterSpacing;(D!==p||B!==v)&&(g(D),_(B))}}},[p,v]);return s||i!=null&&i<=0||r!=null&&r<=0?null:H.createElement(Ah,{zIndex:n.zIndex},H.createElement(Jc,{className:Zi("recharts-cartesian-axis",a)},H.createElement(zMe,{x:n.x,y:n.y,width:i,height:r,orientation:n.orientation,mirror:n.mirror,axisLine:t,otherSvgProps:zu(n)}),H.createElement(GMe,{ref:T,axisType:c,events:f,fontSize:p,getTicksConfig:n,height:n.height,letterSpacing:v,mirror:n.mirror,orientation:n.orientation,padding:n.padding,stroke:n.stroke,tick:n.tick,tickFormatter:n.tickFormatter,tickLine:n.tickLine,tickMargin:n.tickMargin,tickSize:n.tickSize,tickTextProps:n.tickTextProps,ticks:l,unit:n.unit,width:n.width,x:n.x,y:n.y}),H.createElement(QTe,{x:n.x,y:n.y,width:n.width,height:n.height,lowerWidth:n.width,upperWidth:n.width},H.createElement(lAe,{label:n.label,labelRef:n.labelRef}),n.children)))}),sk=H.forwardRef((n,e)=>{var t=cl(n,oh);return H.createElement(WMe,hg({},t,{ref:e}))});sk.displayName="CartesianAxis";var qMe=["x1","y1","x2","y2","key"],$Me=["offset"],XMe=["xAxisId","yAxisId"],YMe=["xAxisId","yAxisId"];function Y5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function As(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Y5(Object(t),!0).forEach(function(i){KMe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Y5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function KMe(n,e,t){return(e=ZMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ZMe(n){var e=QMe(n,"string");return typeof e=="symbol"?e:e+""}function QMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Um(){return Um=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Um.apply(null,arguments)}function fA(n,e){if(n==null)return{};var t,i,r=JMe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function JMe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var eCe=n=>{var{fill:e}=n;if(!e||e==="none")return null;var{fillOpacity:t,x:i,y:r,width:a,height:s,ry:l}=n;return H.createElement("rect",{x:i,y:r,ry:l,width:a,height:s,stroke:"none",fill:e,fillOpacity:t,className:"recharts-cartesian-grid-bg"})};function eX(n){var{option:e,lineItemProps:t}=n,i;if(H.isValidElement(e))i=H.cloneElement(e,t);else if(typeof e=="function")i=e(t);else{var r,{x1:a,y1:s,x2:l,y2:c,key:f}=t,p=fA(t,qMe),g=(r=zu(p))!==null&&r!==void 0?r:{},{offset:v}=g,_=fA(g,$Me);i=H.createElement("line",Um({},_,{x1:a,y1:s,x2:l,y2:c,fill:"none",key:f}))}return i}function tCe(n){var{x:e,width:t,horizontal:i=!0,horizontalPoints:r}=n;if(!i||!r||!r.length)return null;var{xAxisId:a,yAxisId:s}=n,l=fA(n,XMe),c=r.map((f,p)=>{var g=As(As({},l),{},{x1:e,y1:f,x2:e+t,y2:f,key:"line-".concat(p),index:p});return H.createElement(eX,{key:"line-".concat(p),option:i,lineItemProps:g})});return H.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function nCe(n){var{y:e,height:t,vertical:i=!0,verticalPoints:r}=n;if(!i||!r||!r.length)return null;var{xAxisId:a,yAxisId:s}=n,l=fA(n,YMe),c=r.map((f,p)=>{var g=As(As({},l),{},{x1:f,y1:e,x2:f,y2:e+t,key:"line-".concat(p),index:p});return H.createElement(eX,{option:i,lineItemProps:g,key:"line-".concat(p)})});return H.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function iCe(n){var{horizontalFill:e,fillOpacity:t,x:i,y:r,width:a,height:s,horizontalPoints:l,horizontal:c=!0}=n;if(!c||!e||!e.length||l==null)return null;var f=l.map(g=>Math.round(g+r-r)).sort((g,v)=>g-v);r!==f[0]&&f.unshift(0);var p=f.map((g,v)=>{var _=f[v+1],x=_==null,T=x?r+s-g:_-g;if(T<=0)return null;var S=v%e.length;return H.createElement("rect",{key:"react-".concat(v),y:g,x:i,height:T,width:a,stroke:"none",fill:e[S],fillOpacity:t,className:"recharts-cartesian-grid-bg"})});return H.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function rCe(n){var{vertical:e=!0,verticalFill:t,fillOpacity:i,x:r,y:a,width:s,height:l,verticalPoints:c}=n;if(!e||!t||!t.length)return null;var f=c.map(g=>Math.round(g+r-r)).sort((g,v)=>g-v);r!==f[0]&&f.unshift(0);var p=f.map((g,v)=>{var _=f[v+1],x=_==null,T=x?r+s-g:_-g;if(T<=0)return null;var S=v%t.length;return H.createElement("rect",{key:"react-".concat(v),x:g,y:a,width:T,height:l,stroke:"none",fill:t[S],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return H.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var aCe=(n,e)=>{var{xAxis:t,width:i,height:r,offset:a}=n;return q7(ak(As(As(As({},oh),t),{},{ticks:$7(t),viewBox:{x:0,y:0,width:i,height:r}})),a.left,a.left+a.width,e)},sCe=(n,e)=>{var{yAxis:t,width:i,height:r,offset:a}=n;return q7(ak(As(As(As({},oh),t),{},{ticks:$7(t),viewBox:{x:0,y:0,width:i,height:r}})),a.top,a.top+a.height,e)},oCe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Js.grid};function tX(n){var e=tW(),t=nW(),i=eW(),r=As(As({},cl(n,oCe)),{},{x:qt(n.x)?n.x:i.left,y:qt(n.y)?n.y:i.top,width:qt(n.width)?n.width:i.width,height:qt(n.height)?n.height:i.height}),{xAxisId:a,yAxisId:s,x:l,y:c,width:f,height:p,syncWithTicks:g,horizontalValues:v,verticalValues:_}=r,x=Uo(),T=sn(P=>s5(P,"xAxis",a,x)),S=sn(P=>s5(P,"yAxis",s,x));if(!nf(f)||!nf(p)||!qt(l)||!qt(c))return null;var w=r.verticalCoordinatesGenerator||aCe,I=r.horizontalCoordinatesGenerator||sCe,{horizontalPoints:R,verticalPoints:D}=r;if((!R||!R.length)&&typeof I=="function"){var B=v&&v.length,z=I({yAxis:S?As(As({},S),{},{ticks:B?v:S.ticks}):void 0,width:e??f,height:t??p,offset:i},B?!0:g);zT(Array.isArray(z),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof z,"]")),Array.isArray(z)&&(R=z)}if((!D||!D.length)&&typeof w=="function"){var k=_&&_.length,F=w({xAxis:T?As(As({},T),{},{ticks:k?_:T.ticks}):void 0,width:e??f,height:t??p,offset:i},k?!0:g);zT(Array.isArray(F),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof F,"]")),Array.isArray(F)&&(D=F)}return H.createElement(Ah,{zIndex:r.zIndex},H.createElement("g",{className:"recharts-cartesian-grid"},H.createElement(eCe,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),H.createElement(iCe,Um({},r,{horizontalPoints:R})),H.createElement(rCe,Um({},r,{verticalPoints:D})),H.createElement(tCe,Um({},r,{offset:i,horizontalPoints:R,xAxis:T,yAxis:S})),H.createElement(nCe,Um({},r,{offset:i,verticalPoints:D,xAxis:T,yAxis:S}))))}tX.displayName="CartesianGrid";var lCe={},nX=ko({name:"errorBars",initialState:lCe,reducers:{addErrorBar:(n,e)=>{var{itemId:t,errorBar:i}=e.payload;n[t]||(n[t]=[]),n[t].push(i)},replaceErrorBar:(n,e)=>{var{itemId:t,prev:i,next:r}=e.payload;n[t]&&(n[t]=n[t].map(a=>a.dataKey===i.dataKey&&a.direction===i.direction?r:a))},removeErrorBar:(n,e)=>{var{itemId:t,errorBar:i}=e.payload;n[t]&&(n[t]=n[t].filter(r=>r.dataKey!==i.dataKey||r.direction!==i.direction))}}}),{addErrorBar:UNe,replaceErrorBar:FNe,removeErrorBar:zNe}=nX.actions,uCe=nX.reducer;function iX(n,e){var t,i,r=sn(f=>wh(f,n)),a=sn(f=>Eh(f,e)),s=(t=r==null?void 0:r.allowDataOverflow)!==null&&t!==void 0?t:Ea.allowDataOverflow,l=(i=a==null?void 0:a.allowDataOverflow)!==null&&i!==void 0?i:Ta.allowDataOverflow,c=s||l;return{needClip:c,needClipX:s,needClipY:l}}function cCe(n){var{xAxisId:e,yAxisId:t,clipPathId:i}=n,r=rk(),{needClipX:a,needClipY:s,needClip:l}=iX(e,t);if(!l||!r)return null;var{x:c,y:f,width:p,height:g}=r;return H.createElement("clipPath",{id:"clipPath-".concat(i)},H.createElement("rect",{x:a?c:c-p/2,y:s?f:f-g/2,width:a?p:p*2,height:s?g:g*2}))}function fCe(n){var e=TM(n),t=3,i=2;if(e!=null){var{r,strokeWidth:a}=e,s=Number(r),l=Number(a);return(Number.isNaN(s)||s<0)&&(s=t),(Number.isNaN(l)||l<0)&&(l=i),{r:s,strokeWidth:l}}return{r:t,strokeWidth:i}}var UP={exports:{}},FP={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K5;function hCe(){if(K5)return FP;K5=1;var n=Hy();function e(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var t=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,r=n.useRef,a=n.useEffect,s=n.useMemo,l=n.useDebugValue;return FP.useSyncExternalStoreWithSelector=function(c,f,p,g,v){var _=r(null);if(_.current===null){var x={hasValue:!1,value:null};_.current=x}else x=_.current;_=s(function(){function S(B){if(!w){if(w=!0,I=B,B=g(B),v!==void 0&&x.hasValue){var z=x.value;if(v(z,B))return R=z}return R=B}if(z=R,t(I,B))return z;var k=g(B);return v!==void 0&&v(z,k)?(I=B,z):(I=B,R=k)}var w=!1,I,R,D=p===void 0?null:p;return[function(){return S(f())},D===null?void 0:function(){return S(D())}]},[f,p,g,v]);var T=i(c,_[0],_[1]);return a(function(){x.hasValue=!0,x.value=T},[T]),l(T),T},FP}var Z5;function dCe(){return Z5||(Z5=1,UP.exports=hCe()),UP.exports}dCe();function pCe(n){n()}function mCe(){let n=null,e=null;return{clear(){n=null,e=null},notify(){pCe(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const r=e={callback:t,next:null,prev:e};return r.prev?r.prev.next=r:n=r,function(){!i||n===null||(i=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:n=r.next)}}}}var Q5={notify(){},get:()=>[]};function gCe(n,e){let t,i=Q5,r=0,a=!1;function s(T){p();const S=i.subscribe(T);let w=!1;return()=>{w||(w=!0,S(),g())}}function l(){i.notify()}function c(){x.onStateChange&&x.onStateChange()}function f(){return a}function p(){r++,t||(t=n.subscribe(c),i=mCe())}function g(){r--,t&&r===0&&(t(),t=void 0,i.clear(),i=Q5)}function v(){a||(a=!0,p())}function _(){a&&(a=!1,g())}const x={addNestedSub:s,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:f,trySubscribe:v,tryUnsubscribe:_,getListeners:()=>i};return x}var vCe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yCe=vCe(),_Ce=()=>typeof navigator<"u"&&navigator.product==="ReactNative",bCe=_Ce(),xCe=()=>yCe||bCe?H.useLayoutEffect:H.useEffect,SCe=xCe();function J5(n,e){return n===e?n!==0||e!==0||1/n===1/e:n!==n&&e!==e}function wCe(n,e){if(J5(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!J5(n[t[r]],e[t[r]]))return!1;return!0}var zP=Symbol.for("react-redux-context"),BP=typeof globalThis<"u"?globalThis:{};function ECe(){if(!H.createContext)return{};const n=BP[zP]??(BP[zP]=new Map);let e=n.get(H.createContext);return e||(e=H.createContext(null),n.set(H.createContext,e)),e}var TCe=ECe();function ACe(n){const{children:e,context:t,serverState:i,store:r}=n,a=H.useMemo(()=>{const c=gCe(r);return{store:r,subscription:c,getServerState:i?()=>i:void 0}},[r,i]),s=H.useMemo(()=>r.getState(),[r]);SCe(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const l=t||TCe;return H.createElement(l.Provider,{value:a},e)}var MCe=ACe,CCe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function ICe(n,e){return n==null&&e==null?!0:typeof n=="number"&&typeof e=="number"?n===e||n!==n&&e!==e:n===e}function ok(n,e){var t=new Set([...Object.keys(n),...Object.keys(e)]);for(var i of t)if(CCe.has(i)){if(n[i]==null&&e[i]==null)continue;if(!wCe(n[i],e[i]))return!1}else if(!ICe(n[i],e[i]))return!1;return!0}function lk(n,e){var t,i;return(t=(i=n.graphicalItems.cartesianItems.find(r=>r.id===e))===null||i===void 0?void 0:i.xAxisId)!==null&&t!==void 0?t:Y$}function uk(n,e){var t,i;return(t=(i=n.graphicalItems.cartesianItems.find(r=>r.id===e))===null||i===void 0?void 0:i.yAxisId)!==null&&t!==void 0?t:Y$}var rX=(n,e,t)=>i$(n,"xAxis",lk(n,e),t),aX=(n,e,t)=>n$(n,"xAxis",lk(n,e),t),sX=(n,e,t)=>i$(n,"yAxis",uk(n,e),t),oX=(n,e,t)=>n$(n,"yAxis",uk(n,e),t),RCe=He([sr,rX,sX,aX,oX],(n,e,t,i,r)=>lf(n,"xAxis")?FT(e,i,!1):FT(t,r,!1)),PCe=(n,e)=>e,lX=He([Eq,PCe],(n,e)=>n.filter(t=>t.type==="area").find(t=>t.id===e)),uX=n=>{var e=sr(n),t=lf(e,"xAxis");return t?"yAxis":"xAxis"},NCe=(n,e)=>{var t=uX(n);return t==="yAxis"?uk(n,e):lk(n,e)},OCe=(n,e,t)=>Oq(n,uX(n),NCe(n,e),t),DCe=He([lX,OCe],(n,e)=>{var t;if(!(n==null||e==null)){var{stackId:i}=n,r=LL(n);if(!(i==null||r==null)){var a=(t=e[i])===null||t===void 0?void 0:t.stackedData,s=a==null?void 0:a.find(l=>l.key===r);if(s!=null)return s.map(l=>[l[0],l[1]])}}}),LCe=He([sr,rX,sX,aX,oX,DCe,DSe,RCe,lX,HSe],(n,e,t,i,r,a,s,l,c,f)=>{var{chartData:p,dataStartIndex:g,dataEndIndex:v}=s;if(!(c==null||n!=="horizontal"&&n!=="vertical"||e==null||t==null||i==null||r==null||i.length===0||r.length===0||l==null)){var{data:_}=c,x;if(_&&_.length>0?x=_:x=p==null?void 0:p.slice(g,v+1),x!=null)return eIe({layout:n,xAxis:e,yAxis:t,xAxisTicks:i,yAxisTicks:r,dataStartIndex:g,areaSettings:c,stackedData:a,displayedData:x,chartBaseValue:f,bandSize:l})}}),kCe=["id"],UCe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Xm(){return Xm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Xm.apply(null,arguments)}function cX(n,e){if(n==null)return{};var t,i,r=FCe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function FCe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function e6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function oy(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?e6(Object(t),!0).forEach(function(i){zCe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):e6(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function zCe(n,e,t){return(e=BCe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function BCe(n){var e=VCe(n,"string");return typeof e=="symbol"?e:e+""}function VCe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function hA(n,e){return n&&n!=="none"?n:e}var jCe=n=>{var{dataKey:e,name:t,stroke:i,fill:r,legendType:a,hide:s}=n;return[{inactive:s,dataKey:e,type:a,color:hA(i,r),value:X7(t,e),payload:n}]},HCe=H.memo(n=>{var{dataKey:e,data:t,stroke:i,strokeWidth:r,fill:a,name:s,hide:l,unit:c,tooltipType:f,id:p}=n,g={dataDefinedOnItem:t,getPosition:t0,settings:{stroke:i,strokeWidth:r,fill:a,dataKey:e,nameKey:void 0,name:X7(s,e),hide:l,type:f,color:hA(i,a),unit:c,graphicalItemId:p}};return H.createElement(AAe,{tooltipEntrySettings:g})});function GCe(n){var{clipPathId:e,points:t,props:i}=n,{needClip:r,dot:a,dataKey:s}=i,l=zu(i);return H.createElement(XAe,{points:t,dot:a,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:s,baseProps:l,needClip:r,clipPathId:e})}function WCe(n){var{showLabels:e,children:t,points:i}=n,r=i.map(a=>{var s,l,c={x:(s=a.x)!==null&&s!==void 0?s:0,y:(l=a.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return oy(oy({},c),{},{value:a.value,payload:a.payload,parentViewBox:void 0,viewBox:c,fill:void 0})});return H.createElement(_Ae,{value:e?r:void 0},t)}function t6(n){var{points:e,baseLine:t,needClip:i,clipPathId:r,props:a}=n,{layout:s,type:l,stroke:c,connectNulls:f,isRange:p}=a,{id:g}=a,v=cX(a,kCe),_=zu(v),x=Kl(v);return H.createElement(H.Fragment,null,(e==null?void 0:e.length)>1&&H.createElement(Jc,{clipPath:i?"url(#clipPath-".concat(r,")"):void 0},H.createElement(nE,Xm({},x,{id:g,points:e,connectNulls:f,type:l,baseLine:t,layout:s,stroke:"none",className:"recharts-area-area"})),c!=="none"&&H.createElement(nE,Xm({},_,{className:"recharts-area-curve",layout:s,type:l,connectNulls:f,fill:"none",points:e})),c!=="none"&&p&&H.createElement(nE,Xm({},_,{className:"recharts-area-curve",layout:s,type:l,connectNulls:f,fill:"none",points:t}))),H.createElement(GCe,{points:e,props:v,clipPathId:r}))}function qCe(n){var e,t,{alpha:i,baseLine:r,points:a,strokeWidth:s}=n,l=(e=a[0])===null||e===void 0?void 0:e.y,c=(t=a[a.length-1])===null||t===void 0?void 0:t.y;if(!Kn(l)||!Kn(c))return null;var f=i*Math.abs(l-c),p=Math.max(...a.map(g=>g.x||0));return qt(r)?p=Math.max(r,p):r&&Array.isArray(r)&&r.length&&(p=Math.max(...r.map(g=>g.x||0),p)),qt(p)?H.createElement("rect",{x:0,y:l<c?l:l-f,width:p+(s?parseInt("".concat(s),10):1),height:Math.floor(f)}):null}function $Ce(n){var e,t,{alpha:i,baseLine:r,points:a,strokeWidth:s}=n,l=(e=a[0])===null||e===void 0?void 0:e.x,c=(t=a[a.length-1])===null||t===void 0?void 0:t.x;if(!Kn(l)||!Kn(c))return null;var f=i*Math.abs(l-c),p=Math.max(...a.map(g=>g.y||0));return qt(r)?p=Math.max(r,p):r&&Array.isArray(r)&&r.length&&(p=Math.max(...r.map(g=>g.y||0),p)),qt(p)?H.createElement("rect",{x:l<c?l:l-f,y:0,width:f,height:Math.floor(p+(s?parseInt("".concat(s),10):1))}):null}function XCe(n){var{alpha:e,layout:t,points:i,baseLine:r,strokeWidth:a}=n;return t==="vertical"?H.createElement(qCe,{alpha:e,points:i,baseLine:r,strokeWidth:a}):H.createElement($Ce,{alpha:e,points:i,baseLine:r,strokeWidth:a})}function YCe(n){var{needClip:e,clipPathId:t,props:i,previousPointsRef:r,previousBaselineRef:a}=n,{points:s,baseLine:l,isAnimationActive:c,animationBegin:f,animationDuration:p,animationEasing:g,onAnimationStart:v,onAnimationEnd:_}=i,x=H.useMemo(()=>({points:s,baseLine:l}),[s,l]),T=gW(x,"recharts-area-"),S=tL(),[w,I]=H.useState(!1),R=!w,D=H.useCallback(()=>{typeof _=="function"&&_(),I(!1)},[_]),B=H.useCallback(()=>{typeof v=="function"&&v(),I(!0)},[v]);if(S==null)return null;var z=r.current,k=a.current;return H.createElement(WCe,{showLabels:R,points:s},i.children,H.createElement(mW,{animationId:T,begin:f,duration:p,isActive:c,easing:g,onAnimationEnd:D,onAnimationStart:B,key:T},F=>{if(z){var P=z.length/s.length,L=F===1?s:s.map((W,q)=>{var ue=Math.floor(q*P);if(z[ue]){var le=z[ue];return oy(oy({},W),{},{x:Rc(le.x,W.x,F),y:Rc(le.y,W.y,F)})}return W}),V;return qt(l)?V=Rc(k,l,F):Rs(l)||ef(l)?V=Rc(k,0,F):V=l.map((W,q)=>{var ue=Math.floor(q*P);if(Array.isArray(k)&&k[ue]){var le=k[ue];return oy(oy({},W),{},{x:Rc(le.x,W.x,F),y:Rc(le.y,W.y,F)})}return W}),F>0&&(r.current=L,a.current=V),H.createElement(t6,{points:L,baseLine:V,needClip:e,clipPathId:t,props:i})}return F>0&&(r.current=s,a.current=l),H.createElement(Jc,null,c&&H.createElement("defs",null,H.createElement("clipPath",{id:"animationClipPath-".concat(t)},H.createElement(XCe,{alpha:F,points:s,baseLine:l,layout:S,strokeWidth:i.strokeWidth}))),H.createElement(Jc,{clipPath:"url(#animationClipPath-".concat(t,")")},H.createElement(t6,{points:s,baseLine:l,needClip:e,clipPathId:t,props:i})))}),H.createElement(SAe,{label:i.label}))}function KCe(n){var{needClip:e,clipPathId:t,props:i}=n,r=H.useRef(null),a=H.useRef();return H.createElement(YCe,{needClip:e,clipPathId:t,props:i,previousPointsRef:r,previousBaselineRef:a})}class ZCe extends H.PureComponent{render(){var{hide:e,dot:t,points:i,className:r,top:a,left:s,needClip:l,xAxisId:c,yAxisId:f,width:p,height:g,id:v,baseLine:_,zIndex:x}=this.props;if(e)return null;var T=Zi("recharts-area",r),S=v,{r:w,strokeWidth:I}=fCe(t),R=$$(t),D=w*2+I,B=l?"url(#clipPath-".concat(R?"":"dots-").concat(S,")"):void 0;return H.createElement(Ah,{zIndex:x},H.createElement(Jc,{className:T},l&&H.createElement("defs",null,H.createElement(cCe,{clipPathId:S,xAxisId:c,yAxisId:f}),!R&&H.createElement("clipPath",{id:"clipPath-dots-".concat(S)},H.createElement("rect",{x:s-D/2,y:a-D/2,width:p+D,height:g+D}))),H.createElement(KCe,{needClip:l,clipPathId:S,props:this.props})),H.createElement(W5,{points:i,mainColor:hA(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:B}),this.props.isRange&&Array.isArray(_)&&H.createElement(W5,{points:_,mainColor:hA(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:B}))}}var fX={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Js.area};function QCe(n){var e,t=cl(n,fX),{activeDot:i,animationBegin:r,animationDuration:a,animationEasing:s,connectNulls:l,dot:c,fill:f,fillOpacity:p,hide:g,isAnimationActive:v,legendType:_,stroke:x,xAxisId:T,yAxisId:S}=t,w=cX(t,UCe),I=n0(),R=T$(),{needClip:D}=iX(T,S),B=Uo(),{points:z,isRange:k,baseLine:F}=(e=sn(ue=>LCe(ue,n.id,B)))!==null&&e!==void 0?e:{},P=rk();if(I!=="horizontal"&&I!=="vertical"||P==null||R!=="AreaChart"&&R!=="ComposedChart")return null;var{height:L,width:V,x:W,y:q}=P;return!z||!z.length?null:H.createElement(ZCe,Xm({},w,{activeDot:i,animationBegin:r,animationDuration:a,animationEasing:s,baseLine:F,connectNulls:l,dot:c,fill:f,fillOpacity:p,height:L,hide:g,layout:I,isAnimationActive:v==="auto"?!Hx.isSsr:v,isRange:k,legendType:_,needClip:D,points:z,stroke:x,width:V,left:W,top:q,xAxisId:T,yAxisId:S}))}var JCe=(n,e,t,i,r)=>{var a=t??e;if(qt(a))return a;var s=n==="horizontal"?r:i,l=s.scale.domain();if(s.type==="number"){var c=Math.max(l[0],l[1]),f=Math.min(l[0],l[1]);return a==="dataMin"?f:a==="dataMax"||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return a==="dataMin"?l[0]:a==="dataMax"?l[1]:l[0]};function eIe(n){var{areaSettings:{connectNulls:e,baseValue:t,dataKey:i},stackedData:r,layout:a,chartBaseValue:s,xAxis:l,yAxis:c,displayedData:f,dataStartIndex:p,xAxisTicks:g,yAxisTicks:v,bandSize:_}=n,x=r&&r.length,T=JCe(a,s,t,l,c),S=a==="horizontal",w=!1,I=f.map((D,B)=>{var z,k,F,P;if(x)P=r[p+B];else{var L=ts(D,i);Array.isArray(L)?(P=L,w=!0):P=[T,L]}var V=(z=(k=P)===null||k===void 0?void 0:k[1])!==null&&z!==void 0?z:null,W=V==null||x&&!e&&ts(D,i)==null;if(S){var q;return{x:oV({axis:l,ticks:g,bandSize:_,entry:D,index:B}),y:W?null:(q=c.scale.map(V))!==null&&q!==void 0?q:null,value:P,payload:D}}return{x:W?null:(F=l.scale.map(V))!==null&&F!==void 0?F:null,y:oV({axis:c,ticks:v,bandSize:_,entry:D,index:B}),value:P,payload:D}}),R;return x||w?R=I.map(D=>{var B,z=Array.isArray(D.value)?D.value[0]:null;if(S){var k;return{x:D.x,y:z!=null&&D.y!=null&&(k=c.scale.map(z))!==null&&k!==void 0?k:null,payload:D.payload}}return{x:z!=null&&(B=l.scale.map(z))!==null&&B!==void 0?B:null,y:D.y,payload:D.payload}}):R=S?c.scale.map(T):l.scale.map(T),{points:I,baseLine:R??0,isRange:w}}function tIe(n){var e=cl(n,fX),t=Uo();return H.createElement(NAe,{id:e.id,type:"area"},i=>H.createElement(H.Fragment,null,H.createElement(MAe,{legendPayload:jCe(e)}),H.createElement(HCe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),H.createElement(zAe,{type:"area",id:i,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:Dye(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:t,connectNulls:e.connectNulls}),H.createElement(QCe,Xm({},e,{id:i}))))}var hX=H.memo(tIe,ok);hX.displayName="Area";var nIe=["domain","range"],iIe=["domain","range"];function n6(n,e){if(n==null)return{};var t,i,r=rIe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function rIe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function i6(n,e){return n===e?!0:Array.isArray(n)&&n.length===2&&Array.isArray(e)&&e.length===2?n[0]===e[0]&&n[1]===e[1]:!1}function dX(n,e){if(n===e)return!0;var{domain:t,range:i}=n,r=n6(n,nIe),{domain:a,range:s}=e,l=n6(e,iIe);return!i6(t,a)||!i6(i,s)?!1:ok(r,l)}var aIe=["type"],sIe=["dangerouslySetInnerHTML","ticks","scale"],oIe=["id","scale"];function NO(){return NO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},NO.apply(null,arguments)}function r6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function a6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?r6(Object(t),!0).forEach(function(i){lIe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):r6(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function lIe(n,e,t){return(e=uIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uIe(n){var e=cIe(n,"string");return typeof e=="symbol"?e:e+""}function cIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function OO(n,e){if(n==null)return{};var t,i,r=fIe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function fIe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function hIe(n){var e=Ia(),t=H.useRef(null),i=tL(),{type:r}=n,a=OO(n,aIe),s=tC(i,"xAxis",r),l=H.useMemo(()=>{if(s!=null)return a6(a6({},a),{},{type:s})},[a,s]);return H.useLayoutEffect(()=>{l!=null&&(t.current===null?e(JAe(l)):t.current!==l&&e(eMe({prev:t.current,next:l})),t.current=l)},[l,e]),H.useLayoutEffect(()=>()=>{t.current&&(e(tMe(t.current)),t.current=null)},[e]),null}var dIe=n=>{var{xAxisId:e,className:t}=n,i=sn(K7),r=Uo(),a="xAxis",s=sn(w=>t$(w,a,e,r)),l=sn(w=>z1e(w,e)),c=sn(w=>W1e(w,e)),f=sn(w=>bq(w,e));if(l==null||c==null||f==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:v}=n,_=OO(n,sIe),{id:x,scale:T}=f,S=OO(f,oIe);return H.createElement(sk,NO({},_,S,{x:c.x,y:c.y,width:l.width,height:l.height,className:Zi("recharts-".concat(a," ").concat(a),t),viewBox:i,ticks:s,axisType:a}))},pIe={allowDataOverflow:Ea.allowDataOverflow,allowDecimals:Ea.allowDecimals,allowDuplicatedCategory:Ea.allowDuplicatedCategory,angle:Ea.angle,axisLine:oh.axisLine,height:Ea.height,hide:!1,includeHidden:Ea.includeHidden,interval:Ea.interval,label:!1,minTickGap:Ea.minTickGap,mirror:Ea.mirror,orientation:Ea.orientation,padding:Ea.padding,reversed:Ea.reversed,scale:Ea.scale,tick:Ea.tick,tickCount:Ea.tickCount,tickLine:oh.tickLine,tickSize:oh.tickSize,type:Ea.type,xAxisId:0},mIe=n=>{var e=cl(n,pIe);return H.createElement(H.Fragment,null,H.createElement(hIe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),H.createElement(dIe,e))},pX=H.memo(mIe,dX);pX.displayName="XAxis";var gIe=["type"],vIe=["dangerouslySetInnerHTML","ticks","scale"],yIe=["id","scale"];function DO(){return DO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},DO.apply(null,arguments)}function s6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function o6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?s6(Object(t),!0).forEach(function(i){_Ie(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):s6(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function _Ie(n,e,t){return(e=bIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bIe(n){var e=xIe(n,"string");return typeof e=="symbol"?e:e+""}function xIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function LO(n,e){if(n==null)return{};var t,i,r=SIe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function SIe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function wIe(n){var e=Ia(),t=H.useRef(null),i=tL(),{type:r}=n,a=LO(n,gIe),s=tC(i,"yAxis",r),l=H.useMemo(()=>{if(s!=null)return o6(o6({},a),{},{type:s})},[s,a]);return H.useLayoutEffect(()=>{l!=null&&(t.current===null?e(nMe(l)):t.current!==l&&e(iMe({prev:t.current,next:l})),t.current=l)},[l,e]),H.useLayoutEffect(()=>()=>{t.current&&(e(rMe(t.current)),t.current=null)},[e]),null}function EIe(n){var{yAxisId:e,className:t,width:i,label:r}=n,a=H.useRef(null),s=H.useRef(null),l=sn(K7),c=Uo(),f=Ia(),p="yAxis",g=sn(z=>X1e(z,e)),v=sn(z=>$1e(z,e)),_=sn(z=>t$(z,p,e,c)),x=sn(z=>xq(z,e));if(H.useLayoutEffect(()=>{if(!(i!=="auto"||!g||ik(r)||H.isValidElement(r)||x==null)){var z=a.current;if(z){var k=z.getCalculatedWidth();Math.round(g.width)!==Math.round(k)&&f(aMe({id:e,width:k}))}}},[_,g,f,r,e,i,x]),g==null||v==null||x==null)return null;var{dangerouslySetInnerHTML:T,ticks:S,scale:w}=n,I=LO(n,vIe),{id:R,scale:D}=x,B=LO(x,yIe);return H.createElement(sk,DO({},I,B,{ref:a,labelRef:s,x:v.x,y:v.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:g.width,height:g.height,className:Zi("recharts-".concat(p," ").concat(p),t),viewBox:l,ticks:_,axisType:p}))}var TIe={allowDataOverflow:Ta.allowDataOverflow,allowDecimals:Ta.allowDecimals,allowDuplicatedCategory:Ta.allowDuplicatedCategory,angle:Ta.angle,axisLine:oh.axisLine,hide:!1,includeHidden:Ta.includeHidden,interval:Ta.interval,label:!1,minTickGap:Ta.minTickGap,mirror:Ta.mirror,orientation:Ta.orientation,padding:Ta.padding,reversed:Ta.reversed,scale:Ta.scale,tick:Ta.tick,tickCount:Ta.tickCount,tickLine:oh.tickLine,tickSize:oh.tickSize,type:Ta.type,width:Ta.width,yAxisId:0},AIe=n=>{var e=cl(n,TIe);return H.createElement(H.Fragment,null,H.createElement(wIe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),H.createElement(EIe,e))},mX=H.memo(AIe,dX);mX.displayName="YAxis";var MIe=(n,e)=>e,ck=He([MIe,sr,yq,Na,_$,Th,lEe,is],mEe),fk=n=>{var e=n.currentTarget.getBoundingClientRect(),t=e.width/n.currentTarget.offsetWidth,i=e.height/n.currentTarget.offsetHeight;return{chartX:Math.round((n.clientX-e.left)/t),chartY:Math.round((n.clientY-e.top)/i)}},gX=Zl("mouseClick"),vX=zx();vX.startListening({actionCreator:gX,effect:(n,e)=>{var t=n.payload,i=ck(e.getState(),fk(t));(i==null?void 0:i.activeIndex)!=null&&e.dispatch(owe({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var kO=Zl("mouseMove"),yX=zx(),Uw=null;yX.startListening({actionCreator:kO,effect:(n,e)=>{var t=n.payload;Uw!==null&&cancelAnimationFrame(Uw);var i=fk(t);Uw=requestAnimationFrame(()=>{var r=e.getState(),a=qL(r,r.tooltip.settings.shared);if(a==="axis"){var s=ck(r,i);(s==null?void 0:s.activeIndex)!=null?e.dispatch(c$({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(u$())}Uw=null})}});function CIe(n,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":n==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var l6={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},_X=ko({name:"rootProps",initialState:l6,reducers:{updateOptions:(n,e)=>{var t;n.accessibilityLayer=e.payload.accessibilityLayer,n.barCategoryGap=e.payload.barCategoryGap,n.barGap=(t=e.payload.barGap)!==null&&t!==void 0?t:l6.barGap,n.barSize=e.payload.barSize,n.maxBarSize=e.payload.maxBarSize,n.stackOffset=e.payload.stackOffset,n.syncId=e.payload.syncId,n.syncMethod=e.payload.syncMethod,n.className=e.payload.className,n.baseValue=e.payload.baseValue,n.reverseStackOrder=e.payload.reverseStackOrder}}}),IIe=_X.reducer,{updateOptions:RIe}=_X.actions,PIe=null,NIe={updatePolarOptions:(n,e)=>e.payload},bX=ko({name:"polarOptions",initialState:PIe,reducers:NIe}),{updatePolarOptions:BNe}=bX.actions,OIe=bX.reducer,xX=Zl("keyDown"),SX=Zl("focus"),hk=zx();hk.startListening({actionCreator:xX,effect:(n,e)=>{var t=e.getState(),i=t.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=t.tooltip,a=n.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=$L(r,f0(t),Kx(t),Qx(t)),l=s==null?-1:Number(s);if(!(!Number.isFinite(l)||l<0)){var c=Th(t);if(a==="Enter"){var f=lA(t,"axis","hover",String(r.index));e.dispatch(MO({active:!r.active,activeIndex:r.index,activeCoordinate:f}));return}var p=Q1e(t),g=p==="left-to-right"?1:-1,v=a==="ArrowRight"?1:-1,_=l+v*g;if(!(c==null||_>=c.length||_<0)){var x=lA(t,"axis","hover",String(_));e.dispatch(MO({active:!0,activeIndex:_.toString(),activeCoordinate:x}))}}}}}});hk.startListening({actionCreator:SX,effect:(n,e)=>{var t=e.getState(),i=t.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=t.tooltip;if(!r.active&&r.index==null){var a="0",s=lA(t,"axis","hover",String(a));e.dispatch(MO({active:!0,activeIndex:a,activeCoordinate:s}))}}}});var jl=Zl("externalEvent"),wX=zx(),VP=new Map;wX.startListening({actionCreator:jl,effect:(n,e)=>{var{handler:t,reactEvent:i}=n.payload;if(t!=null){i.persist();var r=i.type,a=VP.get(r);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var l=e.getState(),c={activeCoordinate:$we(l),activeDataKey:Wwe(l),activeIndex:dx(l),activeLabel:S$(l),activeTooltipIndex:dx(l),isTooltipActive:Xwe(l)};t(c,i)}finally{VP.delete(r)}});VP.set(r,s)}}});var DIe=He([u0],n=>n.tooltipItemPayloads),LIe=He([DIe,(n,e)=>e,(n,e,t)=>t],(n,e,t)=>{if(e!=null){var i=n.find(a=>a.settings.graphicalItemId===t);if(i!=null){var{getPosition:r}=i;if(r!=null)return r(e)}}}),EX=Zl("touchMove"),TX=zx();TX.startListening({actionCreator:EX,effect:(n,e)=>{var t=n.payload;if(!(t.touches==null||t.touches.length===0)){var i=e.getState(),r=qL(i,i.tooltip.settings.shared);if(r==="axis"){var a=t.touches[0];if(a==null)return;var s=ck(i,fk({clientX:a.clientX,clientY:a.clientY,currentTarget:t.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&e.dispatch(c$({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(r==="item"){var l,c=t.touches[0];if(document.elementFromPoint==null||c==null)return;var f=document.elementFromPoint(c.clientX,c.clientY);if(!f||!f.getAttribute)return;var p=f.getAttribute(Vye),g=(l=f.getAttribute(jye))!==null&&l!==void 0?l:void 0,v=c0(i).find(T=>T.id===g);if(p==null||v==null||g==null)return;var{dataKey:_}=v,x=LIe(i,p,g);e.dispatch(swe({activeDataKey:_,activeIndex:p,activeCoordinate:x,activeGraphicalItemId:g}))}}}});var kIe=v7({brush:mMe,cartesianAxis:sMe,chartData:$Ee,errorBars:uCe,graphicalItems:UAe,layout:Tye,legend:D0e,options:jEe,polarAxis:EAe,polarOptions:OIe,referenceElements:_Me,rootProps:IIe,tooltip:lwe,zIndex:IEe}),UIe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Kve({reducer:kIe,preloadedState:e,middleware:i=>{var r;return i({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([vX.middleware,yX.middleware,hk.middleware,wX.middleware,TX.middleware])},enhancers:i=>{var r=i;return typeof i=="function"&&(r=i()),r.concat(N7({type:"raf"}))},devTools:{serialize:{replacer:CIe},name:"recharts-".concat(t)}})};function FIe(n){var{preloadedState:e,children:t,reduxStoreName:i}=n,r=Uo(),a=H.useRef(null);if(r)return t;a.current==null&&(a.current=UIe(e,i));var s=q3;return H.createElement(MCe,{context:s,store:a.current},t)}function zIe(n){var{layout:e,margin:t}=n,i=Ia(),r=Uo();return H.useEffect(()=>{r||(i(Sye(e)),i(xye(t)))},[i,r,e,t]),null}var BIe=H.memo(zIe,ok);function VIe(n){var e=Ia();return H.useEffect(()=>{e(RIe(n))},[e,n]),null}function u6(n){var{zIndex:e,isPanorama:t}=n,i=H.useRef(null),r=Ia();return H.useLayoutEffect(()=>(i.current&&r(MEe({zIndex:e,element:i.current,isPanorama:t})),()=>{r(CEe({zIndex:e,isPanorama:t}))}),[r,e,t]),H.createElement("g",{tabIndex:-1,ref:i})}function c6(n){var{children:e,isPanorama:t}=n,i=sn(vEe);if(!i||i.length===0)return e;var r=i.filter(s=>s<0),a=i.filter(s=>s>0);return H.createElement(H.Fragment,null,r.map(s=>H.createElement(u6,{key:s,zIndex:s,isPanorama:t})),e,a.map(s=>H.createElement(u6,{key:s,zIndex:s,isPanorama:t})))}var jIe=["children"];function HIe(n,e){if(n==null)return{};var t,i,r=GIe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function GIe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function dA(){return dA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},dA.apply(null,arguments)}var WIe={width:"100%",height:"100%",display:"block"},qIe=H.forwardRef((n,e)=>{var t=tW(),i=nW(),r=fW();if(!nf(t)||!nf(i))return null;var{children:a,otherAttributes:s,title:l,desc:c}=n,f,p;return s!=null&&(typeof s.tabIndex=="number"?f=s.tabIndex:f=r?0:void 0,typeof s.role=="string"?p=s.role:p=r?"application":void 0),H.createElement(zG,dA({},s,{title:l,desc:c,role:p,tabIndex:f,width:t,height:i,style:WIe,ref:e}),a)}),$Ie=n=>{var{children:e}=n,t=sn(jM);if(!t)return null;var{width:i,height:r,y:a,x:s}=t;return H.createElement(zG,{width:i,height:r,x:s,y:a},e)},f6=H.forwardRef((n,e)=>{var{children:t}=n,i=HIe(n,jIe),r=Uo();return r?H.createElement($Ie,null,H.createElement(c6,{isPanorama:!0},t)):H.createElement(qIe,dA({ref:e},i),H.createElement(c6,{isPanorama:!1},t))});function XIe(){var n=Ia(),[e,t]=H.useState(null),i=sn(Bye);return H.useEffect(()=>{if(e!=null){var r=e.getBoundingClientRect(),a=r.width/e.offsetWidth;Kn(a)&&a!==i&&n(Eye(a))}},[e,n,i]),t}function h6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function YIe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?h6(Object(t),!0).forEach(function(i){KIe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):h6(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function KIe(n,e,t){return(e=ZIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ZIe(n){var e=QIe(n,"string");return typeof e=="symbol"?e:e+""}function QIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Kd(){return Kd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Kd.apply(null,arguments)}var JIe=()=>(nTe(),null);function pA(n){if(typeof n=="number")return n;if(typeof n=="string"){var e=parseFloat(n);if(!Number.isNaN(e))return e}return 0}var eRe=H.forwardRef((n,e)=>{var t,i,r=H.useRef(null),[a,s]=H.useState({containerWidth:pA((t=n.style)===null||t===void 0?void 0:t.width),containerHeight:pA((i=n.style)===null||i===void 0?void 0:i.height)}),l=H.useCallback((f,p)=>{s(g=>{var v=Math.round(f),_=Math.round(p);return g.containerWidth===v&&g.containerHeight===_?g:{containerWidth:v,containerHeight:_}})},[]),c=H.useCallback(f=>{if(typeof e=="function"&&e(f),f!=null&&typeof ResizeObserver<"u"){var{width:p,height:g}=f.getBoundingClientRect();l(p,g);var v=x=>{var T=x[0];if(T!=null){var{width:S,height:w}=T.contentRect;l(S,w)}},_=new ResizeObserver(v);_.observe(f),r.current=_}},[e,l]);return H.useEffect(()=>()=>{var f=r.current;f!=null&&f.disconnect()},[l]),H.createElement(H.Fragment,null,H.createElement(Vx,{width:a.containerWidth,height:a.containerHeight}),H.createElement("div",Kd({ref:c},n)))}),tRe=H.forwardRef((n,e)=>{var{width:t,height:i}=n,[r,a]=H.useState({containerWidth:pA(t),containerHeight:pA(i)}),s=H.useCallback((c,f)=>{a(p=>{var g=Math.round(c),v=Math.round(f);return p.containerWidth===g&&p.containerHeight===v?p:{containerWidth:g,containerHeight:v}})},[]),l=H.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:f,height:p}=c.getBoundingClientRect();s(f,p)}},[e,s]);return H.createElement(H.Fragment,null,H.createElement(Vx,{width:r.containerWidth,height:r.containerHeight}),H.createElement("div",Kd({ref:l},n)))}),nRe=H.forwardRef((n,e)=>{var{width:t,height:i}=n;return H.createElement(H.Fragment,null,H.createElement(Vx,{width:t,height:i}),H.createElement("div",Kd({ref:e},n)))}),iRe=H.forwardRef((n,e)=>{var{width:t,height:i}=n;return typeof t=="string"||typeof i=="string"?H.createElement(tRe,Kd({},n,{ref:e})):typeof t=="number"&&typeof i=="number"?H.createElement(nRe,Kd({},n,{width:t,height:i,ref:e})):H.createElement(H.Fragment,null,H.createElement(Vx,{width:t,height:i}),H.createElement("div",Kd({ref:e},n)))});function rRe(n){return n?eRe:iRe}var aRe=H.forwardRef((n,e)=>{var{children:t,className:i,height:r,onClick:a,onContextMenu:s,onDoubleClick:l,onMouseDown:c,onMouseEnter:f,onMouseLeave:p,onMouseMove:g,onMouseUp:v,onTouchEnd:_,onTouchMove:x,onTouchStart:T,style:S,width:w,responsive:I,dispatchTouchEvents:R=!0}=n,D=H.useRef(null),B=Ia(),[z,k]=H.useState(null),[F,P]=H.useState(null),L=XIe(),V=J3(),W=(V==null?void 0:V.width)>0?V.width:w,q=(V==null?void 0:V.height)>0?V.height:r,ue=H.useCallback(ve=>{L(ve),typeof e=="function"&&e(ve),k(ve),P(ve),ve!=null&&(D.current=ve)},[L,e,k,P]),le=H.useCallback(ve=>{B(gX(ve)),B(jl({handler:a,reactEvent:ve}))},[B,a]),ee=H.useCallback(ve=>{B(kO(ve)),B(jl({handler:f,reactEvent:ve}))},[B,f]),ie=H.useCallback(ve=>{B(u$()),B(jl({handler:p,reactEvent:ve}))},[B,p]),he=H.useCallback(ve=>{B(kO(ve)),B(jl({handler:g,reactEvent:ve}))},[B,g]),we=H.useCallback(()=>{B(SX())},[B]),Me=H.useCallback(ve=>{B(xX(ve.key))},[B]),J=H.useCallback(ve=>{B(jl({handler:s,reactEvent:ve}))},[B,s]),pe=H.useCallback(ve=>{B(jl({handler:l,reactEvent:ve}))},[B,l]),Ee=H.useCallback(ve=>{B(jl({handler:c,reactEvent:ve}))},[B,c]),Ge=H.useCallback(ve=>{B(jl({handler:v,reactEvent:ve}))},[B,v]),ht=H.useCallback(ve=>{B(jl({handler:T,reactEvent:ve}))},[B,T]),be=H.useCallback(ve=>{R&&B(EX(ve)),B(jl({handler:x,reactEvent:ve}))},[B,R,x]),Te=H.useCallback(ve=>{B(jl({handler:_,reactEvent:ve}))},[B,_]),dt=rRe(I);return H.createElement(R$.Provider,{value:z},H.createElement(nge.Provider,{value:F},H.createElement(dt,{width:W??(S==null?void 0:S.width),height:q??(S==null?void 0:S.height),className:Zi("recharts-wrapper",i),style:YIe({position:"relative",cursor:"default",width:W,height:q},S),onClick:le,onContextMenu:J,onDoubleClick:pe,onFocus:we,onKeyDown:Me,onMouseDown:Ee,onMouseEnter:ee,onMouseLeave:ie,onMouseMove:he,onMouseUp:Ge,onTouchEnd:Te,onTouchMove:be,onTouchStart:ht,ref:ue},H.createElement(JIe,null),t)))}),sRe=["width","height","responsive","children","className","style","compact","title","desc"];function oRe(n,e){if(n==null)return{};var t,i,r=lRe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function lRe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var uRe=H.forwardRef((n,e)=>{var{width:t,height:i,responsive:r,children:a,className:s,style:l,compact:c,title:f,desc:p}=n,g=oRe(n,sRe),v=zu(g);return c?H.createElement(H.Fragment,null,H.createElement(Vx,{width:t,height:i}),H.createElement(f6,{otherAttributes:v,title:f,desc:p},a)):H.createElement(aRe,{className:s,style:l,width:t,height:i,responsive:r??!1,onClick:n.onClick,onMouseLeave:n.onMouseLeave,onMouseEnter:n.onMouseEnter,onMouseMove:n.onMouseMove,onMouseDown:n.onMouseDown,onMouseUp:n.onMouseUp,onContextMenu:n.onContextMenu,onDoubleClick:n.onDoubleClick,onTouchStart:n.onTouchStart,onTouchMove:n.onTouchMove,onTouchEnd:n.onTouchEnd},H.createElement(f6,{otherAttributes:v,title:f,desc:p,ref:e},H.createElement(xMe,null,a)))});function UO(){return UO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},UO.apply(null,arguments)}var cRe={top:5,right:5,bottom:5,left:5},fRe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:cRe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},hRe=H.forwardRef(function(e,t){var i,r=cl(e.categoricalChartProps,fRe),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:f}=e,p={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return H.createElement(FIe,{preloadedState:{options:p},reduxStoreName:(i=f.id)!==null&&i!==void 0?i:a},H.createElement(pMe,{chartData:f.data}),H.createElement(BIe,{layout:r.layout,margin:r.margin}),H.createElement(VIe,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),H.createElement(uRe,UO({},r,{ref:t})))}),dRe=["axis"],pRe=H.forwardRef((n,e)=>H.createElement(hRe,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:dRe,tooltipPayloadSearcher:BEe,categoricalChartProps:n,ref:e}));const AX=6048e5,mRe=864e5,d6=Symbol.for("constructDateFrom");function up(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&d6 in n?n[d6](e):n instanceof Date?new n.constructor(e):new Date(e)}function Hu(n,e){return up(e||n,n)}let gRe={};function cC(){return gRe}function gx(n,e){var l,c,f,p;const t=cC(),i=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((p=(f=t.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,r=Hu(n,e==null?void 0:e.in),a=r.getDay(),s=(a<i?7:0)+a-i;return r.setDate(r.getDate()-s),r.setHours(0,0,0,0),r}function mA(n,e){return gx(n,{...e,weekStartsOn:1})}function MX(n,e){const t=Hu(n,e==null?void 0:e.in),i=t.getFullYear(),r=up(t,0);r.setFullYear(i+1,0,4),r.setHours(0,0,0,0);const a=mA(r),s=up(t,0);s.setFullYear(i,0,4),s.setHours(0,0,0,0);const l=mA(s);return t.getTime()>=a.getTime()?i+1:t.getTime()>=l.getTime()?i:i-1}function p6(n){const e=Hu(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function vRe(n,...e){const t=up.bind(null,e.find(i=>typeof i=="object"));return e.map(t)}function m6(n,e){const t=Hu(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function yRe(n,e,t){const[i,r]=vRe(t==null?void 0:t.in,n,e),a=m6(i),s=m6(r),l=+a-p6(a),c=+s-p6(s);return Math.round((l-c)/mRe)}function _Re(n,e){const t=MX(n,e),i=up(n,0);return i.setFullYear(t,0,4),i.setHours(0,0,0,0),mA(i)}function bRe(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function xRe(n){return!(!bRe(n)&&typeof n!="number"||isNaN(+Hu(n)))}function SRe(n,e){const t=Hu(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const wRe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ERe=(n,e,t)=>{let i;const r=wRe[n];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function yy(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const TRe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ARe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},MRe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},CRe={date:yy({formats:TRe,defaultWidth:"full"}),time:yy({formats:ARe,defaultWidth:"full"}),dateTime:yy({formats:MRe,defaultWidth:"full"})},IRe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},RRe=(n,e,t,i)=>IRe[n];function Nc(n){return(e,t)=>{const i=t!=null&&t.context?String(t.context):"standalone";let r;if(i==="formatting"&&n.formattingValues){const s=n.defaultFormattingWidth||n.defaultWidth,l=t!=null&&t.width?String(t.width):s;r=n.formattingValues[l]||n.formattingValues[s]}else{const s=n.defaultWidth,l=t!=null&&t.width?String(t.width):n.defaultWidth;r=n.values[l]||n.values[s]}const a=n.argumentCallback?n.argumentCallback(e):e;return r[a]}}const PRe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},NRe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ORe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},DRe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},LRe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},kRe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},URe=(n,e)=>{const t=Number(n),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},FRe={ordinalNumber:URe,era:Nc({values:PRe,defaultWidth:"wide"}),quarter:Nc({values:NRe,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Nc({values:ORe,defaultWidth:"wide"}),day:Nc({values:DRe,defaultWidth:"wide"}),dayPeriod:Nc({values:LRe,defaultWidth:"wide",formattingValues:kRe,defaultFormattingWidth:"wide"})};function Oc(n){return(e,t={})=>{const i=t.width,r=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],a=e.match(r);if(!a)return null;const s=a[0],l=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(l)?BRe(l,g=>g.test(s)):zRe(l,g=>g.test(s));let f;f=n.valueCallback?n.valueCallback(c):c,f=t.valueCallback?t.valueCallback(f):f;const p=e.slice(s.length);return{value:f,rest:p}}}function zRe(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function BRe(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function CX(n){return(e,t={})=>{const i=e.match(n.matchPattern);if(!i)return null;const r=i[0],a=e.match(n.parsePattern);if(!a)return null;let s=n.valueCallback?n.valueCallback(a[0]):a[0];s=t.valueCallback?t.valueCallback(s):s;const l=e.slice(r.length);return{value:s,rest:l}}}const VRe=/^(\d+)(th|st|nd|rd)?/i,jRe=/\d+/i,HRe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},GRe={any:[/^b/i,/^(a|c)/i]},WRe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},qRe={any:[/1/i,/2/i,/3/i,/4/i]},$Re={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},XRe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},YRe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},KRe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ZRe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},QRe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},JRe={ordinalNumber:CX({matchPattern:VRe,parsePattern:jRe,valueCallback:n=>parseInt(n,10)}),era:Oc({matchPatterns:HRe,defaultMatchWidth:"wide",parsePatterns:GRe,defaultParseWidth:"any"}),quarter:Oc({matchPatterns:WRe,defaultMatchWidth:"wide",parsePatterns:qRe,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Oc({matchPatterns:$Re,defaultMatchWidth:"wide",parsePatterns:XRe,defaultParseWidth:"any"}),day:Oc({matchPatterns:YRe,defaultMatchWidth:"wide",parsePatterns:KRe,defaultParseWidth:"any"}),dayPeriod:Oc({matchPatterns:ZRe,defaultMatchWidth:"any",parsePatterns:QRe,defaultParseWidth:"any"})},ePe={code:"en-US",formatDistance:ERe,formatLong:CRe,formatRelative:RRe,localize:FRe,match:JRe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function tPe(n,e){const t=Hu(n,e==null?void 0:e.in);return yRe(t,SRe(t))+1}function nPe(n,e){const t=Hu(n,e==null?void 0:e.in),i=+mA(t)-+_Re(t);return Math.round(i/AX)+1}function IX(n,e){var p,g,v,_;const t=Hu(n,e==null?void 0:e.in),i=t.getFullYear(),r=cC(),a=(e==null?void 0:e.firstWeekContainsDate)??((g=(p=e==null?void 0:e.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??r.firstWeekContainsDate??((_=(v=r.locale)==null?void 0:v.options)==null?void 0:_.firstWeekContainsDate)??1,s=up((e==null?void 0:e.in)||n,0);s.setFullYear(i+1,0,a),s.setHours(0,0,0,0);const l=gx(s,e),c=up((e==null?void 0:e.in)||n,0);c.setFullYear(i,0,a),c.setHours(0,0,0,0);const f=gx(c,e);return+t>=+l?i+1:+t>=+f?i:i-1}function iPe(n,e){var l,c,f,p;const t=cC(),i=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((p=(f=t.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,r=IX(n,e),a=up((e==null?void 0:e.in)||n,0);return a.setFullYear(r,0,i),a.setHours(0,0,0,0),gx(a,e)}function rPe(n,e){const t=Hu(n,e==null?void 0:e.in),i=+gx(t,e)-+iPe(t,e);return Math.round(i/AX)+1}function _i(n,e){const t=n<0?"-":"",i=Math.abs(n).toString().padStart(e,"0");return t+i}const Ad={y(n,e){const t=n.getFullYear(),i=t>0?t:1-t;return _i(e==="yy"?i%100:i,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):_i(t+1,2)},d(n,e){return _i(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return _i(n.getHours()%12||12,e.length)},H(n,e){return _i(n.getHours(),e.length)},m(n,e){return _i(n.getMinutes(),e.length)},s(n,e){return _i(n.getSeconds(),e.length)},S(n,e){const t=e.length,i=n.getMilliseconds(),r=Math.trunc(i*Math.pow(10,t-3));return _i(r,e.length)}},Xv={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},g6={G:function(n,e,t){const i=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(i,{width:"abbreviated"});case"GGGGG":return t.era(i,{width:"narrow"});case"GGGG":default:return t.era(i,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const i=n.getFullYear(),r=i>0?i:1-i;return t.ordinalNumber(r,{unit:"year"})}return Ad.y(n,e)},Y:function(n,e,t,i){const r=IX(n,i),a=r>0?r:1-r;if(e==="YY"){const s=a%100;return _i(s,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):_i(a,e.length)},R:function(n,e){const t=MX(n);return _i(t,e.length)},u:function(n,e){const t=n.getFullYear();return _i(t,e.length)},Q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return _i(i,2);case"Qo":return t.ordinalNumber(i,{unit:"quarter"});case"QQQ":return t.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return _i(i,2);case"qo":return t.ordinalNumber(i,{unit:"quarter"});case"qqq":return t.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,e,t){const i=n.getMonth();switch(e){case"M":case"MM":return Ad.M(n,e);case"Mo":return t.ordinalNumber(i+1,{unit:"month"});case"MMM":return t.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(i,{width:"wide",context:"formatting"})}},L:function(n,e,t){const i=n.getMonth();switch(e){case"L":return String(i+1);case"LL":return _i(i+1,2);case"Lo":return t.ordinalNumber(i+1,{unit:"month"});case"LLL":return t.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(i,{width:"wide",context:"standalone"})}},w:function(n,e,t,i){const r=rPe(n,i);return e==="wo"?t.ordinalNumber(r,{unit:"week"}):_i(r,e.length)},I:function(n,e,t){const i=nPe(n);return e==="Io"?t.ordinalNumber(i,{unit:"week"}):_i(i,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Ad.d(n,e)},D:function(n,e,t){const i=tPe(n);return e==="Do"?t.ordinalNumber(i,{unit:"dayOfYear"}):_i(i,e.length)},E:function(n,e,t){const i=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(i,{width:"short",context:"formatting"});case"EEEE":default:return t.day(i,{width:"wide",context:"formatting"})}},e:function(n,e,t,i){const r=n.getDay(),a=(r-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return _i(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(r,{width:"short",context:"formatting"});case"eeee":default:return t.day(r,{width:"wide",context:"formatting"})}},c:function(n,e,t,i){const r=n.getDay(),a=(r-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return _i(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(r,{width:"narrow",context:"standalone"});case"cccccc":return t.day(r,{width:"short",context:"standalone"});case"cccc":default:return t.day(r,{width:"wide",context:"standalone"})}},i:function(n,e,t){const i=n.getDay(),r=i===0?7:i;switch(e){case"i":return String(r);case"ii":return _i(r,e.length);case"io":return t.ordinalNumber(r,{unit:"day"});case"iii":return t.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(i,{width:"short",context:"formatting"});case"iiii":default:return t.day(i,{width:"wide",context:"formatting"})}},a:function(n,e,t){const r=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(n,e,t){const i=n.getHours();let r;switch(i===12?r=Xv.noon:i===0?r=Xv.midnight:r=i/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(n,e,t){const i=n.getHours();let r;switch(i>=17?r=Xv.evening:i>=12?r=Xv.afternoon:i>=4?r=Xv.morning:r=Xv.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let i=n.getHours()%12;return i===0&&(i=12),t.ordinalNumber(i,{unit:"hour"})}return Ad.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Ad.H(n,e)},K:function(n,e,t){const i=n.getHours()%12;return e==="Ko"?t.ordinalNumber(i,{unit:"hour"}):_i(i,e.length)},k:function(n,e,t){let i=n.getHours();return i===0&&(i=24),e==="ko"?t.ordinalNumber(i,{unit:"hour"}):_i(i,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Ad.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Ad.s(n,e)},S:function(n,e){return Ad.S(n,e)},X:function(n,e,t){const i=n.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return y6(i);case"XXXX":case"XX":return Tm(i);case"XXXXX":case"XXX":default:return Tm(i,":")}},x:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"x":return y6(i);case"xxxx":case"xx":return Tm(i);case"xxxxx":case"xxx":default:return Tm(i,":")}},O:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+v6(i,":");case"OOOO":default:return"GMT"+Tm(i,":")}},z:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+v6(i,":");case"zzzz":default:return"GMT"+Tm(i,":")}},t:function(n,e,t){const i=Math.trunc(+n/1e3);return _i(i,e.length)},T:function(n,e,t){return _i(+n,e.length)}};function v6(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),r=Math.trunc(i/60),a=i%60;return a===0?t+String(r):t+String(r)+e+_i(a,2)}function y6(n,e){return n%60===0?(n>0?"-":"+")+_i(Math.abs(n)/60,2):Tm(n,e)}function Tm(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),r=_i(Math.trunc(i/60),2),a=_i(i%60,2);return t+r+e+a}const _6=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},RX=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},aPe=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],i=t[1],r=t[2];if(!r)return _6(n,e);let a;switch(i){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",_6(i,e)).replace("{{time}}",RX(r,e))},sPe={p:RX,P:aPe},oPe=/^D+$/,lPe=/^Y+$/,uPe=["D","DD","YY","YYYY"];function cPe(n){return oPe.test(n)}function fPe(n){return lPe.test(n)}function hPe(n,e,t){const i=dPe(n,e,t);if(console.warn(i),uPe.includes(n))throw new RangeError(i)}function dPe(n,e,t){const i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${i} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const pPe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,mPe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,gPe=/^'([^]*?)'?$/,vPe=/''/g,yPe=/[a-zA-Z]/;function _Pe(n,e,t){var p,g,v,_,x,T,S,w;const i=cC(),r=(t==null?void 0:t.locale)??i.locale??ePe,a=(t==null?void 0:t.firstWeekContainsDate)??((g=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??i.firstWeekContainsDate??((_=(v=i.locale)==null?void 0:v.options)==null?void 0:_.firstWeekContainsDate)??1,s=(t==null?void 0:t.weekStartsOn)??((T=(x=t==null?void 0:t.locale)==null?void 0:x.options)==null?void 0:T.weekStartsOn)??i.weekStartsOn??((w=(S=i.locale)==null?void 0:S.options)==null?void 0:w.weekStartsOn)??0,l=Hu(n,t==null?void 0:t.in);if(!xRe(l))throw new RangeError("Invalid time value");let c=e.match(mPe).map(I=>{const R=I[0];if(R==="p"||R==="P"){const D=sPe[R];return D(I,r.formatLong)}return I}).join("").match(pPe).map(I=>{if(I==="''")return{isToken:!1,value:"'"};const R=I[0];if(R==="'")return{isToken:!1,value:bPe(I)};if(g6[R])return{isToken:!0,value:I};if(R.match(yPe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");return{isToken:!1,value:I}});r.localize.preprocessor&&(c=r.localize.preprocessor(l,c));const f={firstWeekContainsDate:a,weekStartsOn:s,locale:r};return c.map(I=>{if(!I.isToken)return I.value;const R=I.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&fPe(R)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&cPe(R))&&hPe(R,e,String(n));const D=g6[R[0]];return D(l,R,r.localize,f)}).join("")}function bPe(n){const e=n.match(gPe);return e?e[1].replace(vPe,"'"):n}const xPe={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},SPe=(n,e,t)=>{let i;const r=xPe[n];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"en "+i:"hace "+i:i},wPe={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},EPe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},TPe={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},APe={date:yy({formats:wPe,defaultWidth:"full"}),time:yy({formats:EPe,defaultWidth:"full"}),dateTime:yy({formats:TPe,defaultWidth:"full"})},MPe={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},CPe={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},IPe=(n,e,t,i)=>e.getHours()!==1?CPe[n]:MPe[n],RPe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},PPe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},NPe={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},OPe={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},DPe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},LPe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},kPe=(n,e)=>Number(n)+"",UPe={ordinalNumber:kPe,era:Nc({values:RPe,defaultWidth:"wide"}),quarter:Nc({values:PPe,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:Nc({values:NPe,defaultWidth:"wide"}),day:Nc({values:OPe,defaultWidth:"wide"}),dayPeriod:Nc({values:DPe,defaultWidth:"wide",formattingValues:LPe,defaultFormattingWidth:"wide"})},FPe=/^(\d+)()?/i,zPe=/\d+/i,BPe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},VPe={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},jPe={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},HPe={any:[/1/i,/2/i,/3/i,/4/i]},GPe={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},WPe={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},qPe={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},$Pe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},XPe={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},YPe={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},KPe={ordinalNumber:CX({matchPattern:FPe,parsePattern:zPe,valueCallback:function(n){return parseInt(n,10)}}),era:Oc({matchPatterns:BPe,defaultMatchWidth:"wide",parsePatterns:VPe,defaultParseWidth:"any"}),quarter:Oc({matchPatterns:jPe,defaultMatchWidth:"wide",parsePatterns:HPe,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Oc({matchPatterns:GPe,defaultMatchWidth:"wide",parsePatterns:WPe,defaultParseWidth:"any"}),day:Oc({matchPatterns:qPe,defaultMatchWidth:"wide",parsePatterns:$Pe,defaultParseWidth:"any"}),dayPeriod:Oc({matchPatterns:XPe,defaultMatchWidth:"any",parsePatterns:YPe,defaultParseWidth:"any"})},ZPe={code:"es",formatDistance:SPe,formatLong:APe,formatRelative:IPe,localize:UPe,match:KPe,options:{weekStartsOn:1,firstWeekContainsDate:1}},QPe=({orders:n})=>{const e=n.reduce((i,r)=>{try{const[a,s,l]=r.date.split("/"),c=`${l}-${s}-${a}`;i[c]||(i[c]=0),i[c]+=parseFloat(r.total)}catch{}return i},{}),t=Object.keys(e).sort().map(i=>({date:i,total:e[i],displayDate:_Pe(new Date(i),"dd MMM",{locale:ZPe})}));return O.jsxs("div",{className:"h-[300px] w-full bg-slate-800 p-4 rounded-xl border border-slate-700",children:[O.jsx("h3",{className:"text-slate-400 text-sm font-bold mb-4 uppercase",children:"Ventas (Histrico)"}),O.jsx(g0e,{width:"100%",height:"100%",children:O.jsxs(pRe,{data:t,children:[O.jsx("defs",{children:O.jsxs("linearGradient",{id:"colorTotal",x1:"0",y1:"0",x2:"0",y2:"1",children:[O.jsx("stop",{offset:"5%",stopColor:"#F59E0B",stopOpacity:.8}),O.jsx("stop",{offset:"95%",stopColor:"#F59E0B",stopOpacity:0})]})}),O.jsx(tX,{strokeDasharray:"3 3",stroke:"#374151"}),O.jsx(pX,{dataKey:"displayDate",stroke:"#9CA3AF",fontSize:12}),O.jsx(mX,{stroke:"#9CA3AF",fontSize:12,unit:"$"}),O.jsx(cTe,{contentStyle:{backgroundColor:"#1F2937",borderColor:"#374151",color:"#F3F4F6"},formatter:i=>[`$${i}`,"Ventas"]}),O.jsx(hX,{type:"monotone",dataKey:"total",stroke:"#F59E0B",fillOpacity:1,fill:"url(#colorTotal)"})]})})]})},JPe=()=>{var nt,ot,xt;const{clients:n,orders:e,leads:t,user:i,loadingAuth:r,login:a,logout:s,addClient:l,updateClient:c,addOrder:f,updateOrderStatus:p,updateOrder:g,deleteOrder:v,deleteClient:_,addLead:x,updateLeadStatus:T,importDatabase:S}=EM(),[w,I]=H.useState("dashboard"),[R,D]=H.useState(null),[B,z]=H.useState(!1),[k,F]=H.useState(!1),[P,L]=H.useState(!1),[V,W]=H.useState(!0),[q,ue]=H.useState(null),[le,ee]=H.useState(null),[ie,he]=H.useState(null),[we,Me]=H.useState([{desc:"",qty:1,price:0}]),[J,pe]=H.useState(0),[Ee,Ge]=H.useState(null);H.useMemo(()=>{const Y=we.reduce((se,Fe)=>se+parseFloat(Fe.price||0)*parseFloat(Fe.qty||1),0);pe(Y)},[we]);const[ht,be]=H.useState({status:"all",clientId:""}),[Te,dt]=H.useState(0),ve=30,[Ye,wt]=H.useState({status:"all",search:""}),je=()=>Me([...we,{desc:"",qty:1,price:0}]),At=Y=>Me(we.filter((se,Fe)=>Fe!==Y)),Re=(Y,se,Fe)=>{const oe=[...we];oe[Y][se]=Fe,Me(oe)},Qe=H.useMemo(()=>e.filter(Y=>{const se=Ye.search.toLowerCase(),Fe=n.find(Xe=>Xe.id===Y.clientId),oe=Fe?Fe.name.toLowerCase():(Y.client||"").toLowerCase(),$e=Fe?Fe.email.toLowerCase():"",qe=se===""||Y.id.toLowerCase().includes(se)||oe.includes(se)||$e.includes(se),et=Ye.status==="all"||Y.status===Ye.status;return qe&&et}),[e,n,Ye]);if(r)return O.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-900 text-white",children:"Cargando..."});if(!i)return O.jsx("div",{className:"flex flex-col items-center justify-center h-screen bg-slate-900 text-white p-4",children:O.jsxs("div",{className:"bg-slate-800 p-8 rounded-2xl border border-slate-700 text-center max-w-md w-full",children:[O.jsxs("h1",{className:"font-display font-bold text-3xl mb-2",children:["Tuna's ",O.jsx("span",{className:"text-brand-orange",children:"Admin"})]}),O.jsx("p",{className:"text-slate-400 mb-8",children:"Inicia sesin para gestionar tu negocio."}),O.jsxs("button",{onClick:a,className:"w-full bg-white text-gray-900 font-bold py-3 px-4 rounded-xl flex items-center justify-center gap-3 hover:bg-gray-100 transition-colors",children:[O.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",className:"w-6 h-6",alt:"Google"}),"Acceder con Google"]})]})});const Ve=Y=>{const se=Y.target.files[0];if(!se)return;const Fe=new FileReader;Fe.onload=oe=>{try{S(JSON.parse(oe.target.result)),alert("Base de datos importada.")}catch{alert("Error JSON")}},Fe.readAsText(se)},lt=Y=>{Y.preventDefault();const se=new FormData(Y.target),Fe=se.get("street"),oe=se.get("colony"),$e=se.get("zip"),qe=se.get("state"),et=`${Fe}, Col. ${oe}, ${$e}, ${qe}`;l({name:se.get("name"),type:se.get("type"),email:se.get("email"),phone:se.get("phone"),facebook:se.get("facebook"),instagram:se.get("instagram"),address:et,street:Fe,colony:oe,zip:$e,state:qe}),F(!1)},ae=Y=>{Y.preventDefault();const se=new FormData(Y.target),Fe=se.get("street"),oe=se.get("colony"),$e=se.get("zip"),qe=se.get("state"),et=`${Fe}, Col. ${oe}, ${$e}, ${qe}`;c(ie.id,{name:se.get("name"),email:se.get("email"),phone:se.get("phone"),facebook:se.get("facebook"),instagram:se.get("instagram"),type:se.get("type"),address:et,street:Fe,colony:oe,zip:$e,state:qe}),he(null)},Et=Y=>{Y.preventDefault();const se=new FormData(Y.target),Fe=se.get("clientId");let oe=se.get("manualName"),$e=se.get("manualEmail"),qe=se.get("manualPhone");if(Fe&&Fe!=="manual"){const Xe=n.find(We=>We.id===Fe);Xe&&(oe=Xe.name,$e=Xe.email,qe=Xe.phone)}const et={clientId:Fe!=="manual"?Fe:null,name:oe,email:$e,phone:qe,details:se.get("details"),quantity:se.get("quantity")};try{x(et),L(!1),alert("Cotizacin creada correctamente")}catch(Xe){console.error("Error adding lead:",Xe),alert("Error al crear la cotizacin")}},ft=Y=>{Y.preventDefault();const se=new FormData(Y.target),Fe=R.leadId,oe=se.get("name"),$e=se.get("email"),qe=se.get("phone"),et=se.get("street"),Xe=se.get("colony"),We=se.get("zip"),at=se.get("state"),kt=`${et}, Col. ${Xe}, ${We}, ${at}`,un=se.get("itemDesc"),Jt=parseFloat(se.get("itemQty")),ii=parseFloat(se.get("itemPrice")),Mi=parseFloat(se.get("total")),Qr=se.get("deadline"),rs=parseFloat(se.get("advance")||0);let as=null;const Jr=n.find(Cr=>$e&&Cr.email===$e||qe&&Cr.phone===qe);Jr?(as=Jr.id,c(Jr.id,{name:oe,email:$e,phone:qe,type:Jr.type,address:kt,street:et,colony:Xe,zip:We,state:at})):as=l({name:oe,email:$e,phone:qe,type:"normal",address:kt,street:et,colony:Xe,zip:We,state:at}).id,f({clientId:as,items:[{desc:un,qty:Jt,price:ii.toFixed(2)}],total:Mi.toFixed(2),advance:rs.toFixed(2),deliveryLocation:kt,status:"pedido",date:new Date().toLocaleDateString("es-MX"),deadline:Qr}),T(Fe,"Aceptada"),D(null)},Lt=async Y=>{const se=Y.target.files[0];if(!se)return;const Fe={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,fileType:"image/webp"};try{const oe=await imageCompression(se,Fe),$e=new FileReader;$e.onload=qe=>{window.updateOrderContext&&window.updateOrderContext(q.orderId,{progressImage:qe.target.result}),ue(null)},$e.readAsDataURL(oe)}catch(oe){if(console.error("Compression failed, trying raw upload for small files...",oe),se.size<2*1024*1024){const $e=new FileReader;$e.onload=qe=>{window.updateOrderContext&&window.updateOrderContext(q.orderId,{progressImage:qe.target.result}),ue(null)},$e.readAsDataURL(se)}else alert("Error: La imagen es muy grande y no se pudo comprimir. Intenta con una ms pequea.")}},pt=Y=>{var et;Y.preventDefault();const se=new FormData(Y.target),Fe=se.get("clientId");let oe=Fe;if(Fe==="new"){const Xe=se.get("newClientName"),We=se.get("newClientContact"),at="normal",kt=se.get("newClientStreet"),un=se.get("newClientColony"),Jt=se.get("newClientZip"),ii=se.get("newClientState"),Mi=se.get("newClientPhone"),Qr=`${kt}, Col. ${un}, ${Jt}, ${ii}`;oe=l({name:Xe,email:We,phone:Mi,type:at,address:Qr,street:kt,colony:un,zip:Jt,state:ii}).id}const $e=parseFloat(se.get("advance")||0);if($e>J){alert("El anticipo no puede ser mayor al total del pedido.");return}const qe={clientId:oe,items:we.map(Xe=>({...Xe,price:parseFloat(Xe.price).toFixed(2)})),total:J.toFixed(2),advance:$e.toFixed(2),deliveryLocation:se.get("delivery"),status:"pedido",date:new Date().toLocaleDateString("es-MX")};Ee?(g(Ee,{...qe,status:(et=e.find(Xe=>Xe.id===Ee))==null?void 0:et.status}),alert("Pedido actualizado")):f(qe),z(!1),Ge(null),Me([{desc:"",qty:1,price:0}])},te=Y=>{Ge(Y.id),Me(Y.items||[]),z(!0)},X=Y=>{confirm("Ests seguro de eliminar este pedido?")&&v(Y)},de=Y=>{confirm("Ests seguro de eliminar este cliente?")&&_(Y)},Le=e.reduce((Y,se)=>Y+parseFloat(se.total||0),0),Ze=e.reduce((Y,se)=>Y+parseFloat(se.advance||0),0),Oe=e.reduce((Y,se)=>Y+parseFloat(se.remaining||se.total-(se.advance||0)||0),0),Tt=t.filter(Y=>Y.status==="Nuevo"||Y.status==="Pendiente").length,gt=t.filter(Y=>Y.status==="Rechazada").length,Ht=t.filter(Y=>!(ht.status!=="all"&&Y.status!==ht.status||ht.clientId&&!Y.id.includes(ht.clientId))).slice(Te*ve,(Te+1)*ve);return O.jsxs("div",{className:"flex h-screen bg-slate-900 text-slate-100 font-sans overflow-hidden",children:[O.jsxs("aside",{className:"w-64 bg-slate-800 border-r border-slate-700 hidden md:flex flex-col p-6",children:[O.jsxs("h1",{className:"font-display font-bold text-2xl text-white mb-8",children:["Tuna's ",O.jsx("span",{className:"text-brand-orange",children:"Admin"})]}),O.jsxs("nav",{className:"space-y-2 flex-1",children:[O.jsx(Fw,{id:"dashboard",icon:O.jsx(gN,{}),label:"Dashboard",active:w,set:I}),O.jsx(Fw,{id:"orders",icon:O.jsx(rT,{}),label:"Pedidos",active:w,set:I}),O.jsx(Fw,{id:"leads",icon:O.jsx(Q8,{}),label:"Cotizaciones",active:w,set:I}),O.jsx(Fw,{id:"clients",icon:O.jsx(_oe,{}),label:"Clientes",active:w,set:I})]}),O.jsxs("div",{className:"mt-auto pt-6 border-t border-slate-700 space-y-2",children:[O.jsxs(Jo,{to:"/",className:"flex items-center gap-2 text-slate-400 hover:text-white px-2",children:[O.jsx(nM,{size:16})," Ir al Sitio"]}),O.jsxs("label",{className:"w-full bg-slate-700 hover:bg-slate-600 p-2 rounded text-center items-center justify-center flex cursor-pointer gap-2 text-sm",children:[O.jsx(vN,{size:14})," Importar DB",O.jsx("input",{type:"file",className:"hidden",accept:".json",onChange:Ve})]}),O.jsxs("button",{onClick:s,className:"w-full bg-red-900/30 hover:bg-red-900/50 text-red-200 p-2 rounded flex items-center justify-center gap-2 text-sm transition-colors",children:[O.jsx(Kv,{size:14})," Cerrar Sesin"]})]})]}),O.jsxs("main",{className:"flex-1 overflow-y-auto p-8 relative",children:[w==="dashboard"&&O.jsxs("div",{className:"space-y-6",children:[O.jsx("h2",{className:"text-3xl font-display font-bold",children:"Resumen"}),O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[O.jsx(Yv,{title:"Ventas Totales",value:`$${Le.toFixed(2)}`,icon:O.jsx(Kse,{className:"text-brand-blue"})}),O.jsx(Yv,{title:"Cobrado",value:`$${Ze.toFixed(2)}`,color:"text-green-500"}),O.jsx(Yv,{title:"Por Cobrar",value:`$${Oe.toFixed(2)}`,color:"text-brand-orange"}),O.jsx(Yv,{title:"Pedidos Activos",value:e.filter(Y=>Y.status!=="entregado").length}),O.jsx(Yv,{title:"Cotizaciones Activas",value:Tt,color:"text-blue-400"}),O.jsx(Yv,{title:"Cot. Rechazadas",value:gt,color:"text-red-400"})]}),O.jsx(QPe,{orders:e})]}),w==="orders"&&O.jsxs("div",{children:[O.jsxs("div",{className:"flex justify-between items-center mb-6",children:[O.jsx("h2",{className:"text-3xl font-display font-bold",children:"Pedidos"}),O.jsxs("div",{className:"flex gap-3",children:[O.jsxs(Jo,{to:"/venta-tienda",className:"bg-brand-orange hover:bg-orange-600 px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:[O.jsx(J8,{size:18})," Venta Mostrador"]}),O.jsxs("div",{className:"relative",children:[O.jsx("input",{placeholder:"Buscar (ID, Cliente, Correo)...",className:"bg-slate-800 border border-slate-600 rounded-lg pl-3 pr-10 py-2 w-64 text-sm focus:outline-none focus:border-brand-blue",value:Ye.search,onChange:Y=>wt({...Ye,search:Y.target.value})}),Ye.search&&O.jsx("button",{onClick:()=>wt({...Ye,search:""}),className:"absolute right-3 top-2.5 text-slate-400 hover:text-white",children:""})]}),O.jsxs("select",{className:"bg-slate-800 border border-slate-600 rounded-lg p-2 text-sm focus:outline-none focus:border-brand-blue",value:Ye.status,onChange:Y=>wt({...Ye,status:Y.target.value}),children:[O.jsx("option",{value:"all",children:"Todos los Estatus"}),O.jsx("option",{value:"pedido",children:"Pedido"}),O.jsx("option",{value:"proceso",children:"En Proceso"}),O.jsx("option",{value:"terminado",children:"Terminado"}),O.jsx("option",{value:"entregado",children:"Entregado"})]}),O.jsxs("button",{onClick:()=>z(!0),className:"bg-brand-blue hover:bg-blue-600 px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[O.jsx(J_,{size:18})," Nuevo Pedido"]})]})]}),O.jsx("div",{className:"bg-slate-800 rounded-xl overflow-hidden border border-slate-700",children:O.jsxs("table",{className:"w-full text-left",children:[O.jsx("thead",{className:"bg-slate-700/50 text-slate-300",children:O.jsxs("tr",{children:[O.jsx("th",{className:"p-4",children:"ID"}),O.jsx("th",{className:"p-4",children:"Cliente"}),O.jsx("th",{className:"p-4",children:"Entrega"}),O.jsx("th",{className:"p-4",children:"Restante"}),O.jsx("th",{className:"p-4",children:"Estatus"}),O.jsx("th",{className:"p-4",children:"Total"}),O.jsx("th",{className:"p-4 text-center",children:"Acciones"})]})}),O.jsx("tbody",{className:"divide-y divide-slate-700",children:Qe.map(Y=>{var se;return O.jsxs("tr",{className:"hover:bg-slate-700/30",children:[O.jsxs("td",{className:"p-4 text-xs text-slate-500",children:["#",Y.id.slice(-4)]}),O.jsxs("td",{className:"p-4 font-medium",children:[Y.client||((se=n.find(Fe=>Fe.id===Y.clientId))==null?void 0:se.name)||"Unknown",O.jsx("div",{className:"text-xs text-slate-500 max-w-[150px] truncate",children:Y.deliveryLocation||"Sin ubicacin"})]}),O.jsx("td",{className:"p-4 text-sm font-bold text-center",children:Y.items?Y.items.length:1}),O.jsxs("td",{className:"p-4 text-brand-orange font-bold",children:["$",Y.remaining]}),O.jsx("td",{className:"p-4",children:O.jsx("div",{className:"flex flex-col gap-2",children:O.jsxs("select",{value:Y.status,onChange:Fe=>p(Y.id,Fe.target.value),className:"bg-slate-900 border border-slate-600 rounded text-xs p-1 w-full",children:[O.jsx("option",{value:"pedido",children:"Pedido"}),O.jsx("option",{value:"proceso",children:"En Proceso"}),O.jsx("option",{value:"terminado",children:"Terminado"}),O.jsx("option",{value:"entregado",children:"Entregado"})]})})}),O.jsxs("td",{className:"p-4 font-bold",children:["$",Y.total]}),O.jsx("td",{className:"p-4",children:O.jsxs("div",{className:"flex justify-center items-center gap-2",children:[O.jsx("button",{onClick:()=>ee({type:"order",data:Y}),className:"p-2 text-brand-orange hover:bg-brand-orange/20 rounded-full transition-colors",title:"Ver Detalles",children:O.jsx(Qse,{size:18})}),O.jsx("button",{onClick:()=>te(Y),className:"p-2 text-blue-400 hover:bg-blue-400/20 rounded-full transition-colors",title:"Editar",children:O.jsx(dF,{size:18})}),O.jsx("button",{onClick:()=>ue({orderId:Y.id}),className:"p-2 text-purple-400 hover:bg-purple-400/20 rounded-full transition-colors",title:"Subir Foto",children:O.jsx(vN,{size:18})}),O.jsx("button",{onClick:()=>X(Y.id),className:"p-2 text-red-400 hover:bg-red-400/20 rounded-full transition-colors",title:"Eliminar",children:O.jsx(Kv,{size:18})})]})})]},Y.id)})})]})})]}),w==="clients"&&O.jsxs("div",{children:[O.jsxs("div",{className:"flex justify-between items-center mb-6",children:[O.jsx("h2",{className:"text-3xl font-display font-bold",children:"Clientes"}),O.jsxs("button",{onClick:()=>F(!0),className:"bg-brand-blue hover:bg-blue-600 px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[O.jsx(J_,{size:18})," Nuevo Cliente"]})]}),O.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:n.map(Y=>O.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700",children:[O.jsxs("div",{className:"flex justify-between items-start",children:[O.jsx("h3",{className:"font-bold text-lg",children:Y.name}),O.jsx("span",{className:`text-xs px-2 py-1 rounded uppercase font-bold 
                                            ${Y.type==="distribuidor"?"bg-purple-500/20 text-purple-400":Y.type==="mayorista"?"bg-blue-500/20 text-blue-400":"bg-slate-600/20 text-slate-400"}`,children:Y.type})]}),O.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["ID: ",Y.id?Y.id.slice(-6):"N/A"]}),O.jsx("p",{className:"text-sm text-slate-400",children:Y.email}),O.jsx("p",{className:"text-sm text-slate-400",children:Y.phone}),(Y.facebook||Y.instagram)&&O.jsxs("div",{className:"flex gap-2 text-xs text-slate-500 mt-1",children:[Y.facebook&&O.jsxs("span",{children:["FB: ",Y.facebook]}),Y.instagram&&O.jsxs("span",{children:["IG: ",Y.instagram]})]}),O.jsxs("p",{className:"text-xs text-slate-500 mt-2 truncate",children:[O.jsx("span",{className:"font-bold",children:"Direccin:"})," ",Y.address||"Sin direccin"]}),O.jsxs("div",{className:"flex gap-2 mt-4",children:[O.jsxs("button",{onClick:()=>he(Y),className:"flex-1 py-2 bg-slate-700 hover:bg-slate-600 rounded text-xs font-bold flex justify-center items-center gap-2",children:[O.jsx(dF,{size:14})," Editar"]}),O.jsx("button",{onClick:()=>de(Y.id),className:"py-2 px-3 bg-red-900/30 hover:bg-red-900/50 text-red-200 rounded text-xs font-bold flex justify-center items-center",children:O.jsx(Kv,{size:14})})]})]},Y.id))})]}),w==="leads"&&O.jsxs("div",{children:[O.jsxs("div",{className:"flex justify-between items-center mb-6",children:[O.jsx("h2",{className:"text-3xl font-display font-bold",children:"Cotizaciones"}),O.jsxs("div",{className:"flex gap-2",children:[O.jsxs("button",{onClick:()=>L(!0),className:"bg-brand-blue hover:bg-blue-600 px-3 py-2 rounded-lg font-bold flex items-center gap-2 text-sm",children:[O.jsx(J_,{size:16})," Nueva"]}),O.jsxs("select",{className:"bg-slate-800 border border-slate-600 rounded p-2 text-sm",onChange:Y=>be({...ht,status:Y.target.value}),children:[O.jsx("option",{value:"all",children:"Ver Todos"}),O.jsx("option",{value:"Nuevo",children:"Nuevos"}),O.jsx("option",{value:"Aceptada",children:"Aceptadas"})]})]})]}),O.jsx("div",{className:"grid gap-4",children:Ht.map(Y=>O.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700 flex justify-between items-center",children:[O.jsxs("div",{children:[O.jsx("h3",{className:"font-bold",children:Y.name}),O.jsx("p",{className:"text-sm text-slate-400",children:Y.details})]}),O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Y.status==="Aceptada"?"bg-green-500/20 text-green-400":"bg-brand-orange/20 text-brand-orange"}`,children:Y.status}),Y.status!=="Aceptada"&&O.jsx("button",{onClick:()=>D({leadId:Y.id,name:Y.name,email:Y.email,phone:Y.phone,itemDesc:Y.details,itemQty:Y.quantity||1,price:0,deadline:""}),className:"bg-green-600 hover:bg-green-500 text-white text-xs px-3 py-2 rounded",children:"Aprobar"})]})]},Y.id))}),O.jsxs("div",{className:"flex justify-center mt-6 gap-2",children:[O.jsx("button",{disabled:Te===0,onClick:()=>dt(Y=>Y-1),className:"px-3 py-1 bg-slate-800 rounded disabled:opacity-50",children:"Anterior"}),O.jsxs("span",{className:"px-3 py-1",children:["Pg ",Te+1]}),O.jsx("button",{disabled:Ht.length<ve,onClick:()=>dt(Y=>Y+1),className:"px-3 py-1 bg-slate-800 rounded disabled:opacity-50",children:"Siguiente"})]})]})]}),B&&O.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:O.jsxs("form",{onSubmit:pt,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-2xl border border-slate-700 max-h-[90vh] overflow-y-auto",children:[O.jsx("h3",{className:"text-xl font-bold mb-4",children:Ee?"Editar Pedido":"Nuevo Pedido"}),O.jsxs("div",{className:"space-y-4",children:[O.jsxs("div",{className:"bg-black/20 p-4 rounded-xl",children:[O.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Cliente"}),O.jsxs("select",{name:"clientId",defaultValue:Ee?(nt=e.find(Y=>Y.id===Ee))==null?void 0:nt.clientId:"",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 mb-2",onChange:Y=>{if(Y.target.value==="new")document.getElementById("newClientFields").style.display="block";else{document.getElementById("newClientFields").style.display="none";const se=n.find(Fe=>Fe.id===Y.target.value);se&&se.address&&(document.getElementById("deliveryInput").value=se.address)}},children:[O.jsx("option",{value:"",children:"-- Seleccionar Cliente --"}),O.jsx("option",{value:"new",children:"+ Crear Nuevo Cliente"}),n.map(Y=>O.jsxs("option",{value:Y.id,children:[Y.name," (",Y.type,")"]},Y.id))]}),O.jsxs("div",{id:"newClientFields",style:{display:"none"},className:"space-y-2 mt-2 border-t border-slate-600 pt-2",children:[O.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[O.jsx("input",{name:"newClientName",placeholder:"Nombre Completo",className:"bg-slate-900 border border-slate-600 rounded p-2"}),O.jsx("input",{name:"newClientContact",placeholder:"Email",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),O.jsx("input",{name:"newClientPhone",placeholder:"Telfono",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),O.jsx("h4",{className:"text-xs text-gray-400 font-bold uppercase mt-1",children:"Direccin"}),O.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[O.jsx("input",{name:"newClientStreet",placeholder:"Calle y Nmero",className:"bg-slate-900 border border-slate-600 rounded p-2"}),O.jsx("input",{name:"newClientColony",placeholder:"Colonia",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),O.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[O.jsx("input",{name:"newClientZip",placeholder:"C.P.",className:"bg-slate-900 border border-slate-600 rounded p-2"}),O.jsx("input",{name:"newClientState",placeholder:"Estado",className:"bg-slate-900 border border-slate-600 rounded p-2"})]})]})]}),O.jsxs("div",{className:"bg-black/20 p-4 rounded-xl",children:[O.jsxs("div",{className:"flex justify-between items-center mb-2",children:[O.jsx("label",{className:"block text-xs text-slate-400 font-bold uppercase",children:"Productos"}),O.jsxs("button",{type:"button",onClick:je,className:"text-xs text-brand-blue hover:underline flex items-center gap-1",children:[O.jsx(J_,{size:12})," Agregar"]})]}),O.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto pr-2",children:we.map((Y,se)=>O.jsxs("div",{className:"flex gap-2 items-center",children:[O.jsx("input",{placeholder:"Descripcin",value:Y.desc,onChange:Fe=>Re(se,"desc",Fe.target.value),className:"flex-1 bg-slate-900 border border-slate-600 rounded p-2 text-sm",required:!0}),O.jsx("input",{type:"number",placeholder:"Cant",value:Y.qty,onChange:Fe=>Re(se,"qty",Fe.target.value),className:"w-16 bg-slate-900 border border-slate-600 rounded p-2 text-sm",required:!0,min:"1"}),O.jsx("input",{type:"number",placeholder:"$ Unit",value:Y.price,onChange:Fe=>Re(se,"price",Fe.target.value),className:"w-24 bg-slate-900 border border-slate-600 rounded p-2 text-sm",required:!0}),we.length>1&&O.jsx("button",{type:"button",onClick:()=>At(se),className:"text-red-400 hover:text-red-300",children:O.jsx(Kv,{size:16})})]},se))})]}),O.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Totales"}),O.jsxs("div",{className:"bg-slate-900 p-3 rounded-xl border border-slate-600",children:[O.jsxs("div",{className:"flex justify-between mb-1 text-sm",children:[O.jsx("span",{children:"Subtotal:"}),O.jsxs("span",{className:"font-bold",children:["$",J.toFixed(2)]})]}),O.jsxs("div",{className:"flex justify-between items-center",children:[O.jsx("span",{className:"text-xs text-gray-400",children:"Anticipo:"}),O.jsx("input",{name:"advance",type:"number",defaultValue:"0",className:"w-24 bg-black/50 border border-slate-700 rounded p-1 text-right text-sm"})]})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Entrega"}),O.jsx("textarea",{id:"deliveryInput",name:"delivery",placeholder:"Direccin de entrega...",className:"w-full h-full bg-slate-900 border border-slate-600 rounded p-2 text-sm resize-none",required:!0})]})]})]}),O.jsxs("div",{className:"flex justify-end gap-3 mt-6 border-t border-slate-700 pt-4",children:[O.jsx("button",{type:"button",onClick:()=>z(!1),className:"text-slate-400",children:"Cancelar"}),O.jsxs("button",{type:"submit",className:"bg-brand-blue px-6 py-2 rounded font-bold hover:bg-blue-600",children:[Ee?"Actualizar Pedido":"Crear Pedido"," ($",J.toFixed(2),")"]})]})]})}),k&&O.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:O.jsxs("form",{onSubmit:lt,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-md border border-slate-700",children:[O.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo Cliente"}),O.jsxs("div",{className:"space-y-3",children:[O.jsx("input",{name:"name",placeholder:"Nombre Completo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0}),O.jsx("input",{name:"email",placeholder:"Correo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),O.jsx("input",{name:"phone",placeholder:"Telfono",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),O.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[O.jsx("input",{name:"facebook",placeholder:"Facebook",className:"bg-slate-900 border border-slate-600 rounded p-2"}),O.jsx("input",{name:"instagram",placeholder:"Instagram",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),O.jsx("h4",{className:"text-xs text-gray-400 font-bold uppercase mt-2",children:"Direccin"}),O.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[O.jsx("input",{name:"street",placeholder:"Calle y Nmero",className:"bg-slate-900 border border-slate-600 rounded p-2"}),O.jsx("input",{name:"colony",placeholder:"Colonia",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),O.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[O.jsx("input",{name:"zip",placeholder:"C.P.",className:"bg-slate-900 border border-slate-600 rounded p-2"}),O.jsx("input",{name:"state",placeholder:"Estado",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs mb-1 text-slate-400",children:"Tipo de Cliente"}),O.jsxs("select",{name:"type",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",children:[O.jsx("option",{value:"normal",children:"Normal"}),O.jsx("option",{value:"mayorista",children:"Mayorista (10% Desc)"}),O.jsx("option",{value:"distribuidor",children:"Distribuidor (25% Desc)"})]})]})]}),O.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[O.jsx("button",{type:"button",onClick:()=>F(!1),className:"text-slate-400",children:"Cancelar"}),O.jsx("button",{type:"submit",className:"bg-brand-blue px-4 py-2 rounded font-bold",children:"Guardar"})]})]})}),R&&O.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:O.jsxs("form",{onSubmit:ft,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-2xl border border-slate-700 max-h-[90vh] overflow-y-auto",children:[O.jsx("h3",{className:"text-xl font-bold mb-4",children:"Aprobar Cotizacin & Crear Pedido"}),O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[O.jsxs("div",{className:"space-y-3",children:[O.jsx("h4",{className:"text-xs text-brand-blue font-bold uppercase border-b border-brand-blue/30 pb-1",children:"Datos del Cliente"}),O.jsx("input",{name:"name",defaultValue:R.name,placeholder:"Nombre Completo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0}),O.jsx("input",{name:"email",defaultValue:R.email,placeholder:"Correo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),O.jsx("input",{name:"phone",defaultValue:R.phone,placeholder:"Telfono",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0}),O.jsxs("div",{className:"bg-black/20 p-2 rounded",children:[O.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Direccin (Opcional)"}),O.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[O.jsx("input",{name:"street",placeholder:"Calle y Nm",className:"bg-slate-900 border border-slate-600 rounded p-2 text-sm"}),O.jsx("input",{name:"colony",placeholder:"Colonia",className:"bg-slate-900 border border-slate-600 rounded p-2 text-sm"})]}),O.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[O.jsx("input",{name:"zip",placeholder:"C.P.",className:"bg-slate-900 border border-slate-600 rounded p-2 text-sm"}),O.jsx("input",{name:"state",placeholder:"Estado",className:"bg-slate-900 border border-slate-600 rounded p-2 text-sm"})]})]})]}),O.jsxs("div",{className:"space-y-3",children:[O.jsx("h4",{className:"text-xs text-brand-orange font-bold uppercase border-b border-brand-orange/30 pb-1",children:"Datos del Pedido"}),O.jsxs("div",{children:[O.jsx("label",{className:"text-xs text-gray-400",children:"Producto / Descripcin"}),O.jsx("textarea",{name:"itemDesc",defaultValue:R.itemDesc,className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-sm h-20 resize-none",required:!0})]}),O.jsxs("div",{className:"flex gap-2",children:[O.jsxs("div",{className:"flex-1",children:[O.jsx("label",{className:"text-xs text-gray-400",children:"Cantidad"}),O.jsx("input",{name:"itemQty",type:"number",defaultValue:R.itemQty,className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0})]}),O.jsxs("div",{className:"flex-1",children:[O.jsx("label",{className:"text-xs text-gray-400",children:"Precio Unit."}),O.jsx("input",{name:"itemPrice",type:"number",step:"0.01",placeholder:"$0.00",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",onChange:Y=>{const se=parseFloat(Y.target.value)||0,Fe=parseFloat(document.querySelector('input[name="itemQty"]').value)||1;document.getElementById("approvalTotal").value=(se*Fe).toFixed(2)},required:!0})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"text-xs text-gray-400",children:"Total del Pedido"}),O.jsx("input",{id:"approvalTotal",name:"total",readOnly:!0,className:"w-full bg-black/40 border border-slate-600 rounded p-2 font-bold text-white"})]}),O.jsxs("div",{className:"flex gap-2",children:[O.jsxs("div",{className:"flex-1",children:[O.jsx("label",{className:"text-xs text-gray-400",children:"Anticipo"}),O.jsx("input",{name:"advance",type:"number",defaultValue:"0",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"})]}),O.jsxs("div",{className:"flex-1",children:[O.jsx("label",{className:"text-xs text-gray-400",children:"Fecha Entrega"}),O.jsx("input",{name:"deadline",type:"date",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"})]})]})]})]}),O.jsxs("div",{className:"flex justify-end gap-3 mt-6 border-t border-slate-700 pt-4",children:[O.jsx("button",{type:"button",onClick:()=>D(null),className:"text-slate-400 hover:text-white",children:"Cancelar"}),O.jsx("button",{type:"submit",className:"bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded font-bold",children:"Generar Pedido"})]})]})}),q&&O.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:O.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl w-full max-w-sm border border-slate-700 text-center",children:[O.jsx("h3",{className:"text-xl font-bold mb-4",children:"Evidencia del Pedido"}),O.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Sube una foto de cmo va el pedido o cmo qued (Max 1MB)."}),O.jsx("input",{type:"file",accept:"image/*",onChange:Lt,className:`block w-full text-sm text-slate-500
                            file:mr-4 file:py-2 file:px-4
                            file:rounded-full file:border-0
                            file:text-sm file:font-semibold
                            file:bg-brand-blue file:text-white
                            hover:file:bg-blue-600 mb-6`}),O.jsx("button",{onClick:()=>ue(null),className:"text-slate-400 text-sm",children:"Cancelar"})]})}),le&&O.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:O.jsxs("div",{className:"bg-slate-800 p-8 rounded-2xl w-full max-w-2xl border border-slate-700 shadow-2xl relative max-h-[90vh] overflow-y-auto",children:[O.jsx("button",{onClick:()=>ee(null),className:"absolute top-4 right-4 text-slate-400 hover:text-white",children:O.jsx(Kv,{size:20,className:"rotate-45"})}),O.jsxs("h3",{className:"text-2xl font-bold mb-6 text-white flex items-center gap-2",children:[le.type==="order"?O.jsx(gN,{className:"text-brand-blue"}):O.jsx(Tag,{className:"text-brand-orange"}),"Detalle de ",le.type==="order"?"Pedido":"Cotizacin"]}),O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[O.jsxs("div",{className:"space-y-4",children:[O.jsxs("div",{children:[O.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-1",children:"Cliente"}),O.jsx("p",{className:"text-white text-lg font-bold",children:le.type==="order"?(ot=n.find(Y=>Y.id===le.data.clientId))==null?void 0:ot.name:le.data.name}),O.jsx("p",{className:"text-sm text-gray-400",children:le.type==="order"?(xt=n.find(Y=>Y.id===le.data.clientId))==null?void 0:xt.email:le.data.email})]}),le.data.items&&le.data.items.length>0&&O.jsxs("div",{children:[O.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-2",children:"Desglose de Artculos"}),O.jsx("div",{className:"bg-black/30 rounded-lg p-3 space-y-2",children:le.data.items.map((Y,se)=>O.jsxs("div",{className:"flex justify-between text-sm",children:[O.jsxs("span",{className:"text-slate-200",children:[Y.qty,"x ",Y.desc]}),Y.price&&O.jsxs("span",{className:"text-slate-500",children:["$",Y.price]})]},se))})]}),!le.data.items&&O.jsxs("div",{children:[O.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-1",children:"Descripcin"}),O.jsx("p",{className:"text-slate-300",children:le.data.desc||le.data.details}),O.jsxs("p",{className:"text-slate-300 text-sm mt-1",children:["Cantidad: ",le.data.quantity||1]})]}),le.type==="order"&&O.jsxs("div",{className:"bg-brand-blue/10 p-4 rounded-xl border border-brand-blue/30",children:[O.jsxs("div",{className:"flex justify-between mb-1",children:[O.jsx("span",{className:"text-gray-400",children:"Total"}),O.jsxs("span",{className:"text-white font-bold",children:["$",le.data.total]})]}),O.jsxs("div",{className:"flex justify-between mb-1",children:[O.jsx("span",{className:"text-gray-400",children:"Anticipo"}),O.jsxs("span",{className:"text-green-400 font-bold",children:["-$",le.data.advance]})]}),O.jsxs("div",{className:"border-t border-white/10 pt-2 flex justify-between",children:[O.jsx("span",{className:"text-brand-orange font-bold",children:"Restante"}),O.jsxs("span",{className:"text-brand-orange font-bold text-xl",children:["$",le.data.remaining]})]})]})]}),O.jsxs("div",{className:"space-y-4",children:[le.data.progressImage&&O.jsxs("div",{children:[O.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-2",children:"Evidencia / Progreso"}),O.jsx("img",{src:le.data.progressImage,className:"w-full rounded-xl border border-slate-600"})]}),le.data.refType==="link"&&le.data.refLink&&O.jsxs("div",{children:[O.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-2",children:"Referencia"}),O.jsx("a",{href:le.data.refLink,target:"_blank",className:"text-brand-blue underline break-all text-sm",children:le.data.refLink})]})]})]}),O.jsx("div",{className:"mt-8 pt-6 border-t border-slate-700 flex justify-end",children:O.jsx("button",{onClick:()=>ee(null),className:"px-6 py-2 rounded bg-slate-700 hover:bg-slate-600 text-white",children:"Cerrar"})})]})}),ie&&O.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:O.jsxs("form",{onSubmit:ae,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-md border border-slate-700",children:[O.jsx("h3",{className:"text-xl font-bold mb-4",children:"Editar Cliente"}),O.jsxs("div",{className:"space-y-3",children:[O.jsxs("div",{className:"bg-black/20 p-3 rounded border border-slate-700",children:[O.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Nombre"}),O.jsx("input",{name:"name",defaultValue:ie.name,className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0})]}),O.jsxs("div",{className:"bg-black/20 p-3 rounded border border-slate-700",children:[O.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Contacto"}),O.jsx("input",{name:"email",defaultValue:ie.email,placeholder:"Correo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 mb-2"}),O.jsx("input",{name:"phone",defaultValue:ie.phone,placeholder:"Telfono",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),O.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[O.jsx("input",{name:"facebook",defaultValue:ie.facebook,placeholder:"Facebook",className:"bg-slate-900 border border-slate-600 rounded p-2"}),O.jsx("input",{name:"instagram",defaultValue:ie.instagram,placeholder:"Instagram",className:"bg-slate-900 border border-slate-600 rounded p-2"})]})]}),O.jsxs("div",{className:"bg-black/20 p-3 rounded border border-slate-700",children:[O.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Direccin"}),O.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[O.jsx("input",{name:"street",defaultValue:ie.street,placeholder:"Calle y Nmero",className:"bg-slate-900 border border-slate-600 rounded p-2"}),O.jsx("input",{name:"colony",defaultValue:ie.colony,placeholder:"Colonia",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),O.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[O.jsx("input",{name:"zip",defaultValue:ie.zip,placeholder:"C.P.",className:"bg-slate-900 border border-slate-600 rounded p-2"}),O.jsx("input",{name:"state",defaultValue:ie.state,placeholder:"Estado",className:"bg-slate-900 border border-slate-600 rounded p-2"})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs mb-1 text-slate-400",children:"Tipo de Cliente"}),O.jsxs("select",{name:"type",defaultValue:ie.type,className:"w-full bg-slate-900 border border-slate-600 rounded p-2",children:[O.jsx("option",{value:"normal",children:"Normal"}),O.jsx("option",{value:"mayorista",children:"Mayorista (10% Desc)"}),O.jsx("option",{value:"distribuidor",children:"Distribuidor (25% Desc)"})]})]})]}),O.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[O.jsx("button",{type:"button",onClick:()=>he(null),className:"text-slate-400",children:"Cancelar"}),O.jsx("button",{type:"submit",className:"bg-brand-blue px-4 py-2 rounded font-bold",children:"Guardar Cambios"})]})]})}),P&&O.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:O.jsxs("form",{onSubmit:Et,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-lg border border-slate-700",children:[O.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nueva Cotizacin"}),O.jsxs("div",{className:"space-y-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Cliente"}),O.jsxs("select",{name:"clientId",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 mb-2",onChange:Y=>W(Y.target.value==="manual"),children:[O.jsx("option",{value:"manual",children:"-- Cliente Manual / Nuevo --"}),n.map(Y=>O.jsx("option",{value:Y.id,children:Y.name},Y.id))]}),V&&O.jsxs("div",{className:"space-y-2 border-t border-slate-600 pt-2",children:[O.jsx("input",{name:"manualName",placeholder:"Nombre Cliente",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0}),O.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[O.jsx("input",{name:"manualEmail",placeholder:"Correo",className:"bg-slate-900 border border-slate-600 rounded p-2"}),O.jsx("input",{name:"manualPhone",placeholder:"Telfono",className:"bg-slate-900 border border-slate-600 rounded p-2",required:!0})]})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Detalles"}),O.jsx("textarea",{name:"details",placeholder:"Describe lo que el cliente quiere cotizar...",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 h-24 resize-none",required:!0})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Cantidad"}),O.jsx("input",{name:"quantity",type:"number",defaultValue:"1",className:"w-24 bg-slate-900 border border-slate-600 rounded p-2",required:!0})]})]}),O.jsxs("div",{className:"flex justify-end gap-3 mt-6 border-t border-slate-700 pt-4",children:[O.jsx("button",{type:"button",onClick:()=>L(!1),className:"text-slate-400",children:"Cancelar"}),O.jsx("button",{type:"submit",className:"bg-brand-blue px-6 py-2 rounded font-bold hover:bg-blue-600",children:"Crear Cotizacin"})]})]})})]})},Fw=({id:n,icon:e,label:t,active:i,set:r})=>O.jsxs("button",{onClick:()=>r(n),className:`w-full text-left px-4 py-3 rounded-lg flex items-center gap-3 transition-colors ${i===n?"bg-slate-700 text-white":"text-slate-400 hover:bg-slate-800"}`,children:[e," ",O.jsx("span",{children:t})]}),Yv=({title:n,value:e,icon:t,color:i="text-white"})=>O.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700 flex flex-col justify-between",children:[O.jsxs("div",{className:"flex justify-between items-start mb-2",children:[O.jsx("h3",{className:"text-slate-400 text-xs font-bold uppercase",children:n}),t]}),O.jsx("p",{className:`text-3xl font-bold ${i}`,children:e})]}),eNe=()=>{const{addLead:n}=EM(),[e,t]=H.useState({name:"",email:"",phone:"",quantity:1,details:"",refType:"link",refLink:""}),[i,r]=H.useState(null),[a,s]=H.useState(!1),[l,c]=H.useState(!1),f=v=>{const{id:_,value:x}=v.target;t(T=>({...T,[_]:x}))},p=v=>{t(_=>({..._,refType:v.target.value}))},g=async v=>{if(v.preventDefault(),!a){s(!0);try{let _="";if(e.refType==="image"&&i){const w=Fme(Gme,`quotes/${Date.now()}_${i.name}`);await kme(w,i),_=await Ume(w)}const x=n({...e,imageUrl:_||null});let T=` *Nueva Solicitud de Cotizacin*

`;T+=` *Nombre:* ${e.name}
`,T+=` *Correo:* ${e.email}
`,e.phone&&(T+=` *Telfono:* ${e.phone}
`),T+=` *Piezas:* ${e.quantity}
`,e.refType==="link"&&e.refLink?T+=` *Referencia:* ${e.refLink}
`:_?T+=` *Imagen Referencia:* ${_}
`:T+=` *Referencia:* (Sin referencia adjunta)
`,e.details&&(T+=` *Detalles:* ${e.details}
`),x&&x.id&&(T+=`
ID: ${x.id}`),window.open(`https://wa.me/525619956812?text=${encodeURIComponent(T)}`,"_blank"),c(!0),t({name:"",email:"",phone:"",quantity:1,details:"",refType:"link",refLink:""}),r(null)}catch(_){console.error("Error submitting quote:",_),alert("Hubo un error al enviar la cotizacin. Intenta de nuevo.")}finally{s(!1)}}};return O.jsxs("div",{className:"bg-brand-dark min-h-screen text-slate-100 font-sans py-20 px-4 relative overflow-hidden",children:[O.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none",children:[O.jsx("div",{className:"absolute top-1/4 -right-20 w-96 h-96 bg-brand-orange/10 rounded-full blur-3xl animate-pulse"}),O.jsx("div",{className:"absolute bottom-1/4 -left-20 w-96 h-96 bg-brand-blue/10 rounded-full blur-3xl animate-pulse delay-1000"})]}),O.jsxs("div",{className:"max-w-2xl mx-auto",children:[O.jsxs(Jo,{to:"/",className:"inline-flex items-center text-gray-400 hover:text-white mb-8 transition-colors",children:[O.jsx(nM,{className:"mr-2",size:20})," Volver al Inicio"]}),O.jsxs("div",{className:"glass p-8 md:p-10 rounded-3xl shadow-2xl",children:[O.jsxs("div",{className:"text-center mb-8",children:[O.jsxs("h1",{className:"font-display text-4xl font-bold mb-4",children:["Cotiza tu ",O.jsx("span",{className:"text-brand-blue",children:"Proyecto"})]}),O.jsx("p",{className:"text-gray-400",children:"Cuntanos tu idea para imprimirla en 3D."})]}),l&&O.jsxs("div",{className:"bg-green-500/20 border border-green-500/50 text-green-400 p-4 rounded-xl mb-6 text-center animate-fade-in",children:[O.jsx("p",{className:"font-bold",children:"Cotizacin creada con xito!"}),O.jsx("p",{className:"text-sm",children:"Te hemos redirigido a WhatsApp para continuar."})]}),O.jsxs("form",{onSubmit:g,className:"space-y-6",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre Completo"}),O.jsx("input",{type:"text",id:"name",required:!0,value:e.name,onChange:f,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]}),O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Correo Electrnico"}),O.jsx("input",{type:"email",id:"email",required:!0,value:e.email,onChange:f,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Telfono / WhatsApp"}),O.jsx("input",{type:"tel",id:"phone",value:e.phone,onChange:f,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nmero de piezas"}),O.jsx("input",{type:"number",id:"quantity",min:"1",required:!0,value:e.quantity,onChange:f,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Tienes una referencia?"}),O.jsxs("div",{className:"flex gap-4 mb-4",children:[O.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[O.jsx("input",{type:"radio",name:"ref-type",value:"link",checked:e.refType==="link",onChange:p,className:"text-brand-blue"}),O.jsx("span",{children:"Enlace (Link)"})]}),O.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[O.jsx("input",{type:"radio",name:"ref-type",value:"image",checked:e.refType==="image",onChange:p,className:"text-brand-blue"}),O.jsx("span",{children:"Imagen"})]})]}),e.refType==="link"?O.jsx("input",{type:"url",id:"refLink",value:e.refLink,onChange:f,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all",placeholder:"https://..."}):O.jsxs("div",{className:"border-2 border-dashed border-white/20 rounded-xl p-6 text-center text-gray-400 hover:border-brand-orange/50 transition-colors relative",children:[O.jsx("input",{type:"file",accept:"image/*",onChange:v=>r(v.target.files[0]),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),i?O.jsxs("div",{className:"flex flex-col items-center",children:[O.jsx(Q8,{className:"text-brand-orange mb-2"}),O.jsx("span",{className:"text-white font-medium",children:i.name}),O.jsx("span",{className:"text-xs text-green-400 mt-1",children:"Listo para subir"})]}):O.jsxs(O.Fragment,{children:[O.jsx(vN,{className:"mx-auto mb-2"}),O.jsx("span",{className:"text-sm",children:"Toca para seleccionar una imagen"})]})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Detalles Adicionales"}),O.jsx("textarea",{id:"details",rows:"3",value:e.details,onChange:f,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]}),O.jsx("button",{type:"submit",disabled:a,className:`w-full bg-brand-blue hover:bg-blue-600 text-white font-bold py-4 rounded-xl shadow-lg shadow-blue-500/30 transition-all hover:scale-[1.01] ${a?"opacity-50 cursor-not-allowed":""}`,children:a?"Procesando...":"Continuar en WhatsApp"})]})]})]})]})},b6=()=>{const{addOrder:n,addClient:e,clients:t}=EM(),i=N6(),[r,a]=H.useState(""),[s,l]=H.useState(""),[c,f]=H.useState([{desc:"",qty:1,price:""}]),p=H.useMemo(()=>c.reduce((T,S)=>T+parseFloat(S.price||0)*parseFloat(S.qty||1),0),[c]),g=()=>{f([...c,{desc:"",qty:1,price:""}])},v=T=>{f(c.filter((S,w)=>w!==T))},_=(T,S,w)=>{const I=[...c];I[T][S]=w,f(I)},x=async T=>{T.preventDefault();let S=null;const w=s.trim().toLowerCase(),I=t.find(R=>R.email&&R.email.toLowerCase()===w||R.phone&&R.phone===w);I?S=I.id:S=(await e({name:r||"Cliente Mostrador",email:s.includes("@")?s:"",phone:s.includes("@")?"":s,type:"normal",address:"En Tienda",street:"En Tienda",colony:"",zip:"",state:""})).id,await n({clientId:S,items:c.map(R=>({...R,price:parseFloat(R.price).toFixed(2)})),total:p.toFixed(2),advance:p.toFixed(2),deliveryLocation:"Entregado en Tienda",status:"entregado",date:new Date().toLocaleDateString("es-MX")}),alert("Venta registrada con xito!"),i("/admin")};return O.jsx("div",{className:"min-h-screen bg-slate-900 text-slate-100 font-sans p-6 md:p-12",children:O.jsxs("div",{className:"max-w-3xl mx-auto",children:[O.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[O.jsx(Jo,{to:"/admin",className:"p-2 bg-slate-800 rounded-full hover:bg-slate-700 transition-colors",children:O.jsx(nM,{size:24})}),O.jsxs("h1",{className:"text-3xl font-display font-bold flex items-center gap-3",children:[O.jsx(J8,{className:"text-brand-orange"}),"Registro de Venta ",O.jsx("span",{className:"text-slate-500 font-normal text-xl",children:"| Mostrador"})]})]}),O.jsxs("form",{onSubmit:x,className:"bg-slate-800 p-8 rounded-2xl border border-slate-700 shadow-2xl",children:[O.jsxs("div",{className:"mb-8",children:[O.jsx("h2",{className:"text-xs font-bold text-brand-blue uppercase tracking-wider mb-4 border-b border-brand-blue/20 pb-2",children:"Datos del Cliente"}),O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Nombre Cliente"}),O.jsx("input",{type:"text",required:!0,className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 focus:border-brand-blue focus:outline-none transition-colors",placeholder:"Ej. Juan Prez",value:r,onChange:T=>a(T.target.value)})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Contacto (Email / Tel)"}),O.jsx("input",{type:"text",className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 focus:border-brand-blue focus:outline-none transition-colors",placeholder:"Opcional",value:s,onChange:T=>l(T.target.value)})]})]})]}),O.jsxs("div",{className:"mb-8",children:[O.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-white/10 pb-2",children:[O.jsx("h2",{className:"text-xs font-bold text-brand-orange uppercase tracking-wider",children:"Productos"}),O.jsxs("button",{type:"button",onClick:g,className:"text-xs bg-slate-700 hover:bg-slate-600 px-3 py-1 rounded-full flex items-center gap-1 transition-colors",children:[O.jsx(J_,{size:14})," Agregar Producto"]})]}),O.jsx("div",{className:"space-y-3",children:c.map((T,S)=>O.jsxs("div",{className:"flex gap-3 items-start animate-fade-in-up",children:[O.jsx("div",{className:"flex-1",children:O.jsx("input",{type:"text",placeholder:"Descripcin del producto...",required:!0,className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 text-sm focus:border-brand-orange focus:outline-none transition-colors",value:T.desc,onChange:w=>_(S,"desc",w.target.value)})}),O.jsx("div",{className:"w-20",children:O.jsx("input",{type:"number",placeholder:"Cant.",required:!0,min:"1",className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 text-sm text-center focus:border-brand-orange focus:outline-none transition-colors",value:T.qty,onChange:w=>_(S,"qty",w.target.value)})}),O.jsxs("div",{className:"w-32 relative",children:[O.jsx("span",{className:"absolute left-3 top-3 text-slate-500",children:"$"}),O.jsx("input",{type:"number",placeholder:"0.00",required:!0,step:"0.50",className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 pl-6 text-sm text-right focus:border-brand-orange focus:outline-none transition-colors",value:T.price,onChange:w=>_(S,"price",w.target.value)})]}),c.length>1&&O.jsx("button",{type:"button",onClick:()=>v(S),className:"p-3 text-red-400 hover:bg-red-400/10 rounded-lg transition-colors",children:O.jsx(Kv,{size:18})})]},S))})]}),O.jsxs("div",{className:"bg-slate-900 p-6 rounded-xl flex flex-col md:flex-row justify-between items-center gap-6",children:[O.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm",children:[O.jsx(rT,{size:16}),O.jsxs("span",{children:["La venta se registrar como ",O.jsx("strong",{children:"ENTREGADA"})," y pagada al 100%."]})]}),O.jsxs("div",{className:"flex items-center gap-6",children:[O.jsxs("div",{className:"text-right",children:[O.jsx("span",{className:"block text-xs text-slate-400 uppercase font-bold",children:"Total a Pagar"}),O.jsxs("span",{className:"text-3xl font-display font-bold text-white",children:["$",p.toFixed(2)]})]}),O.jsxs("button",{type:"submit",className:"bg-brand-blue hover:bg-blue-500 text-white px-8 py-4 rounded-xl font-bold text-lg shadow-lg shadow-blue-500/20 hover:scale-[1.02] transition-all flex items-center gap-2",children:[O.jsx(rT,{size:24})," Registrar Venta"]})]})]})]})]})})},tNe=()=>{const{clients:n,orders:e}=EM(),[t,i]=H.useState(""),[r,a]=H.useState(null),[s,l]=H.useState(""),c=f=>{f.preventDefault(),l(""),a(null);const p=t.trim().toLowerCase();if(!p)return;let g=[];const v=e.find(_=>_.id.toString()===p||_.id.toString().endsWith(p));if(v)g.push(v);else{const _=n.find(x=>x.id===p||x.email&&x.email.toLowerCase()===p||x.phone&&x.phone.replace(/\D/g,"")===p.replace(/\D/g,""));_&&(g=e.filter(x=>String(x.clientId)===String(_.id)))}g.length>0?a(g.reverse()):l("No se encontraron pedidos con esa informacin.")};return O.jsxs("div",{className:"min-h-screen bg-brand-dark text-slate-100 font-sans flex flex-col items-center justify-center p-4",children:[O.jsx("div",{className:"absolute top-8 left-8",children:O.jsx(Jo,{to:"/",className:"text-gray-400 hover:text-white",children:" Volver"})}),O.jsxs("div",{className:"w-full max-w-2xl",children:[O.jsxs("h1",{className:"text-3xl font-display font-bold text-center mb-2",children:["Revisa estatus de tu ",O.jsx("span",{className:"text-brand-orange",children:"Pedido"})]}),O.jsx("p",{className:"text-center text-gray-400 mb-8",children:"Ingresa tu ID de pedido, correo o telfono."}),O.jsxs("div",{className:"glass p-8 rounded-2xl shadow-xl border border-white/10 mb-8",children:[O.jsxs("form",{onSubmit:c,className:"flex gap-4",children:[O.jsx("input",{type:"text",required:!0,value:t,onChange:f=>i(f.target.value),className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue",placeholder:"ID, Correo o Telfono..."}),O.jsxs("button",{type:"submit",className:"bg-brand-blue hover:bg-blue-600 text-white font-bold px-6 py-3 rounded-lg transition-all flex items-center gap-2",children:[O.jsx(doe,{size:18})," Buscar"]})]}),s&&O.jsxs("div",{className:"mt-4 p-3 bg-red-500/10 border border-red-500/20 text-red-400 rounded-lg text-sm text-center flex items-center justify-center gap-2",children:[O.jsx(Wse,{size:16})," ",s]})]}),r&&r.length>0&&O.jsx("div",{className:"space-y-6",children:r.map(f=>O.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl p-6 shadow-2xl animate-float",children:[O.jsxs("div",{className:"flex justify-between items-start mb-6",children:[O.jsxs("div",{children:[O.jsxs("h3",{className:"font-bold text-xl text-white",children:["Pedido #",f.id.slice(-4)]}),O.jsx("p",{className:"text-xs text-gray-500",children:f.id}),O.jsxs("p",{className:"text-gray-400 text-sm",children:["Fecha: ",f.date]})]}),O.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase
                                        ${f.status==="entregado"?"bg-green-500/20 text-green-400":f.status==="terminado"?"bg-blue-500/20 text-blue-400":"bg-brand-orange/20 text-brand-orange"}`,children:f.status})]}),O.jsxs("div",{className:"space-y-4 mb-6",children:[O.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-3",children:[O.jsx("h4",{className:"text-xs font-bold text-gray-400 mb-2 uppercase",children:"Productos"}),f.items&&f.items.map((p,g)=>O.jsxs("div",{className:"flex justify-between text-sm text-slate-200 mb-1 border-b border-slate-700/50 pb-1 last:border-0 last:pb-0",children:[O.jsxs("span",{children:[p.qty,"x ",p.desc]}),p.price&&O.jsxs("span",{className:"text-gray-500",children:["$",p.price," c/u"]})]},g))]}),O.jsx("div",{className:"flex items-center gap-3 text-slate-300",children:f.status==="entregado"?O.jsxs(O.Fragment,{children:[O.jsx(rT,{className:"text-green-400"}),O.jsx("span",{className:"text-green-400 font-bold",children:"Entregado!"})]}):O.jsxs(O.Fragment,{children:[O.jsx(Xse,{className:"text-brand-orange"}),O.jsxs("span",{children:["Entrega estimada: ",f.deadline||"Pendiente"]})]})}),f.progressImage&&O.jsxs("div",{className:"mt-4",children:[O.jsx("h4",{className:"text-xs font-bold text-gray-400 mb-2 uppercase",children:"Avance del Pedido"}),O.jsx("img",{src:f.progressImage,alt:"Avance",className:"w-full rounded-lg border border-slate-600 shadow-lg"})]})]}),O.jsxs("div",{className:"bg-slate-900 rounded-xl p-4",children:[O.jsxs("div",{className:"flex justify-between mb-2",children:[O.jsx("span",{className:"text-gray-400",children:"Total"}),O.jsxs("span",{className:"text-white font-bold",children:["$",f.total]})]}),O.jsxs("div",{className:"flex justify-between mb-2",children:[O.jsx("span",{className:"text-gray-400",children:"Pagado (Anticipo)"}),O.jsxs("span",{className:"text-green-400 font-bold",children:["-$",f.advance||0]})]}),O.jsx("div",{className:"border-t border-slate-700 my-2"}),O.jsxs("div",{className:"flex justify-between",children:[O.jsx("span",{className:"text-brand-orange font-bold",children:"Por Pagar"}),O.jsxs("span",{className:"text-brand-orange font-bold text-xl",children:["$",f.remaining||f.total]})]})]})]},f.id))})]})]})},nNe=()=>{const{products:n,loading:e}=e9(),[t,i]=H.useState("all"),[r,a]=H.useState(null),s=["Todos",...new Set(n.map(c=>c.category).filter(Boolean))],l=t==="Todos"||t==="all"?n:n.filter(c=>c.category===t);return O.jsxs("div",{className:"bg-brand-dark min-h-screen text-slate-100 font-sans pb-16",children:[O.jsxs("div",{className:"pt-8 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto",children:[O.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[O.jsx(Jo,{to:"/",className:"p-2 rounded-full bg-slate-800 hover:bg-slate-700 text-white transition-colors",children:O.jsx(nM,{size:24})}),O.jsx("h1",{className:"font-display text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400",children:"Catlogo Completo"})]}),O.jsx("div",{className:"flex flex-wrap gap-3 mb-8 sticky top-4 z-40 py-4 bg-brand-dark/95 backdrop-blur rounded-2xl px-4 border border-white/5",children:s.map(c=>O.jsx("button",{onClick:()=>i(c),className:`px-5 py-2 rounded-full font-bold text-sm transition-all border 
                                ${t===c||c==="Todos"&&t==="all"?"bg-brand-orange text-white border-brand-orange shadow-lg shadow-orange-500/30":"bg-transparent text-gray-400 border-gray-700 hover:border-gray-500 hover:text-white"}`,children:c},c))}),e?O.jsx("div",{className:"flex justify-center items-center h-64 text-slate-500",children:"Cargando productos..."}):O.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:l.map((c,f)=>O.jsxs("div",{onClick:()=>a(c.image),className:"group relative overflow-hidden rounded-2xl shadow-xl aspect-square bg-gray-900 cursor-pointer hover:shadow-2xl hover:shadow-brand-blue/10 transition-all hover:scale-[1.02] border border-white/5",children:[O.jsx("div",{className:"w-full h-full bg-cover bg-center group-hover:scale-110 transition-transform duration-500",style:{backgroundImage:`url('${c.image}')`}}),O.jsx("div",{className:"absolute top-3 right-3 z-10",children:O.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-extrabold uppercase tracking-wider shadow-sm backdrop-blur-md ${c.quantity>0?"bg-green-500/90 text-white":"bg-red-500/90 text-white"}`,children:c.quantity>0?"Disponible":"Agotado"})}),O.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-4 bg-gradient-to-t from-black via-black/80 to-transparent pt-12",children:[O.jsx("h3",{className:"text-white font-bold text-lg leading-tight truncate",children:c.name}),O.jsx("p",{className:"text-brand-orange font-bold text-xl",children:c.price})]})]},f))})]}),r&&O.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/95 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>a(null),children:[O.jsx("button",{className:"absolute top-4 right-4 text-white hover:text-brand-orange p-2 bg-black/50 rounded-full",children:O.jsx(yN,{size:32})}),O.jsx("img",{src:r,alt:"Vista completa",className:"max-h-[85vh] max-w-[95vw] rounded-lg shadow-2xl border border-white/10",onClick:c=>c.stopPropagation()})]})]})};function iNe(){return O.jsx(xK,{children:O.jsxs(pK,{children:[O.jsx(Md,{path:"/",element:O.jsx(Soe,{})}),O.jsx(Md,{path:"/admin",element:O.jsx(JPe,{})}),O.jsx(Md,{path:"/quote",element:O.jsx(eNe,{})}),O.jsx(Md,{path:"/status",element:O.jsx(tNe,{})}),O.jsx(Md,{path:"/catalogo",element:O.jsx(nNe,{})}),O.jsx(Md,{path:"/venta-tienda",element:O.jsx(b6,{})}),O.jsx(Md,{path:"/venta-fisica",element:O.jsx(b6,{})})]})})}class rNe extends dg.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t),this.setState({errorInfo:t})}render(){return this.state.hasError?O.jsxs("div",{style:{color:"red",padding:"20px",background:"white"},children:[O.jsx("h1",{children:"Something went wrong."}),O.jsx("pre",{children:this.state.error&&this.state.error.toString()}),O.jsx("pre",{children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}):this.props.children}}SY.createRoot(document.getElementById("root")).render(O.jsx(dg.StrictMode,{children:O.jsx(rNe,{children:O.jsx(Wme,{children:O.jsx(iNe,{})})})}));
