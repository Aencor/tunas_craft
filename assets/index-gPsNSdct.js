var yX=Object.defineProperty;var _X=(n,e,t)=>e in n?yX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var CC=(n,e,t)=>_X(n,typeof e!="symbol"?e+"":e,t);function bX(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function ku(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var IC={exports:{}},g_={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tk;function xX(){if(Tk)return g_;Tk=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var s=null;if(a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),"key"in r){a={};for(var l in r)l!=="key"&&(a[l]=r[l])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:s,ref:r!==void 0?r:null,props:a}}return g_.Fragment=e,g_.jsx=t,g_.jsxs=t,g_}var Ak;function SX(){return Ak||(Ak=1,IC.exports=xX()),IC.exports}var k=SX(),PC={exports:{}},Sn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mk;function wX(){if(Mk)return Sn;Mk=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),v=Symbol.iterator;function _(Q){return Q===null||typeof Q!="object"?null:(Q=v&&Q[v]||Q["@@iterator"],typeof Q=="function"?Q:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,S={};function w(Q,de,Me){this.props=Q,this.context=de,this.refs=S,this.updater=Me||x}w.prototype.isReactComponent={},w.prototype.setState=function(Q,de){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,de,"setState")},w.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function I(){}I.prototype=w.prototype;function R(Q,de,Me){this.props=Q,this.context=de,this.refs=S,this.updater=Me||x}var O=R.prototype=new I;O.constructor=R,T(O,w.prototype),O.isPureReactComponent=!0;var F=Array.isArray;function B(){}var L={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function P(Q,de,Me){var We=Me.ref;return{$$typeof:n,type:Q,key:de,ref:We!==void 0?We:null,props:Me}}function D(Q,de){return P(Q.type,de,Q.props)}function j(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===n}function q(Q){var de={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(Me){return de[Me]})}var W=/\/+/g;function se(Q,de){return typeof Q=="object"&&Q!==null&&Q.key!=null?q(""+Q.key):de.toString(36)}function ue(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(B,B):(Q.status="pending",Q.then(function(de){Q.status==="pending"&&(Q.status="fulfilled",Q.value=de)},function(de){Q.status==="pending"&&(Q.status="rejected",Q.reason=de)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function J(Q,de,Me,We,vt){var be=typeof Q;(be==="undefined"||be==="boolean")&&(Q=null);var Ae=!1;if(Q===null)Ae=!0;else switch(be){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(Q.$$typeof){case n:case e:Ae=!0;break;case p:return Ae=Q._init,J(Ae(Q._payload),de,Me,We,vt)}}if(Ae)return vt=vt(Q),Ae=We===""?"."+se(Q,0):We,F(vt)?(Me="",Ae!=null&&(Me=Ae.replace(W,"$&/")+"/"),J(vt,de,Me,"",function(et){return et})):vt!=null&&(j(vt)&&(vt=D(vt,Me+(vt.key==null||Q&&Q.key===vt.key?"":(""+vt.key).replace(W,"$&/")+"/")+Ae)),de.push(vt)),1;Ae=0;var mt=We===""?".":We+":";if(F(Q))for(var ye=0;ye<Q.length;ye++)We=Q[ye],be=mt+se(We,ye),Ae+=J(We,de,Me,be,vt);else if(ye=_(Q),typeof ye=="function")for(Q=ye.call(Q),ye=0;!(We=Q.next()).done;)We=We.value,be=mt+se(We,ye++),Ae+=J(We,de,Me,be,vt);else if(be==="object"){if(typeof Q.then=="function")return J(ue(Q),de,Me,We,vt);throw de=String(Q),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function ae(Q,de,Me){if(Q==null)return Q;var We=[],vt=0;return J(Q,We,"","",function(be){return de.call(Me,be,vt++)}),We}function he(Q){if(Q._status===-1){var de=Q._result;de=de(),de.then(function(Me){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=Me)},function(Me){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=Me)}),Q._status===-1&&(Q._status=0,Q._result=de)}if(Q._status===1)return Q._result.default;throw Q._result}var Te=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var de=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(de))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)},Re={map:ae,forEach:function(Q,de,Me){ae(Q,function(){de.apply(this,arguments)},Me)},count:function(Q){var de=0;return ae(Q,function(){de++}),de},toArray:function(Q){return ae(Q,function(de){return de})||[]},only:function(Q){if(!j(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}};return Sn.Activity=g,Sn.Children=Re,Sn.Component=w,Sn.Fragment=t,Sn.Profiler=r,Sn.PureComponent=R,Sn.StrictMode=i,Sn.Suspense=c,Sn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Sn.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return L.H.useMemoCache(Q)}},Sn.cache=function(Q){return function(){return Q.apply(null,arguments)}},Sn.cacheSignal=function(){return null},Sn.cloneElement=function(Q,de,Me){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var We=T({},Q.props),vt=Q.key;if(de!=null)for(be in de.key!==void 0&&(vt=""+de.key),de)!z.call(de,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&de.ref===void 0||(We[be]=de[be]);var be=arguments.length-2;if(be===1)We.children=Me;else if(1<be){for(var Ae=Array(be),mt=0;mt<be;mt++)Ae[mt]=arguments[mt+2];We.children=Ae}return P(Q.type,vt,We)},Sn.createContext=function(Q){return Q={$$typeof:s,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:a,_context:Q},Q},Sn.createElement=function(Q,de,Me){var We,vt={},be=null;if(de!=null)for(We in de.key!==void 0&&(be=""+de.key),de)z.call(de,We)&&We!=="key"&&We!=="__self"&&We!=="__source"&&(vt[We]=de[We]);var Ae=arguments.length-2;if(Ae===1)vt.children=Me;else if(1<Ae){for(var mt=Array(Ae),ye=0;ye<Ae;ye++)mt[ye]=arguments[ye+2];vt.children=mt}if(Q&&Q.defaultProps)for(We in Ae=Q.defaultProps,Ae)vt[We]===void 0&&(vt[We]=Ae[We]);return P(Q,be,vt)},Sn.createRef=function(){return{current:null}},Sn.forwardRef=function(Q){return{$$typeof:l,render:Q}},Sn.isValidElement=j,Sn.lazy=function(Q){return{$$typeof:p,_payload:{_status:-1,_result:Q},_init:he}},Sn.memo=function(Q,de){return{$$typeof:f,type:Q,compare:de===void 0?null:de}},Sn.startTransition=function(Q){var de=L.T,Me={};L.T=Me;try{var We=Q(),vt=L.S;vt!==null&&vt(Me,We),typeof We=="object"&&We!==null&&typeof We.then=="function"&&We.then(B,Te)}catch(be){Te(be)}finally{de!==null&&Me.types!==null&&(de.types=Me.types),L.T=de}},Sn.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Sn.use=function(Q){return L.H.use(Q)},Sn.useActionState=function(Q,de,Me){return L.H.useActionState(Q,de,Me)},Sn.useCallback=function(Q,de){return L.H.useCallback(Q,de)},Sn.useContext=function(Q){return L.H.useContext(Q)},Sn.useDebugValue=function(){},Sn.useDeferredValue=function(Q,de){return L.H.useDeferredValue(Q,de)},Sn.useEffect=function(Q,de){return L.H.useEffect(Q,de)},Sn.useEffectEvent=function(Q){return L.H.useEffectEvent(Q)},Sn.useId=function(){return L.H.useId()},Sn.useImperativeHandle=function(Q,de,Me){return L.H.useImperativeHandle(Q,de,Me)},Sn.useInsertionEffect=function(Q,de){return L.H.useInsertionEffect(Q,de)},Sn.useLayoutEffect=function(Q,de){return L.H.useLayoutEffect(Q,de)},Sn.useMemo=function(Q,de){return L.H.useMemo(Q,de)},Sn.useOptimistic=function(Q,de){return L.H.useOptimistic(Q,de)},Sn.useReducer=function(Q,de,Me){return L.H.useReducer(Q,de,Me)},Sn.useRef=function(Q){return L.H.useRef(Q)},Sn.useState=function(Q){return L.H.useState(Q)},Sn.useSyncExternalStore=function(Q,de,Me){return L.H.useSyncExternalStore(Q,de,Me)},Sn.useTransition=function(){return L.H.useTransition()},Sn.version="19.2.4",Sn}var Ck;function Ny(){return Ck||(Ck=1,PC.exports=wX()),PC.exports}var H=Ny();const ng=ku(H),W2=bX({__proto__:null,default:ng},[H]);var RC={exports:{}},v_={},NC={exports:{}},OC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ik;function EX(){return Ik||(Ik=1,(function(n){function e(J,ae){var he=J.length;J.push(ae);e:for(;0<he;){var Te=he-1>>>1,Re=J[Te];if(0<r(Re,ae))J[Te]=ae,J[he]=Re,he=Te;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var ae=J[0],he=J.pop();if(he!==ae){J[0]=he;e:for(var Te=0,Re=J.length,Q=Re>>>1;Te<Q;){var de=2*(Te+1)-1,Me=J[de],We=de+1,vt=J[We];if(0>r(Me,he))We<Re&&0>r(vt,Me)?(J[Te]=vt,J[We]=he,Te=We):(J[Te]=Me,J[de]=he,Te=de);else if(We<Re&&0>r(vt,he))J[Te]=vt,J[We]=he,Te=We;else break e}}return ae}function r(J,ae){var he=J.sortIndex-ae.sortIndex;return he!==0?he:J.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();n.unstable_now=function(){return s.now()-l}}var c=[],f=[],p=1,g=null,v=3,_=!1,x=!1,T=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function O(J){for(var ae=t(f);ae!==null;){if(ae.callback===null)i(f);else if(ae.startTime<=J)i(f),ae.sortIndex=ae.expirationTime,e(c,ae);else break;ae=t(f)}}function F(J){if(T=!1,O(J),!x)if(t(c)!==null)x=!0,B||(B=!0,q());else{var ae=t(f);ae!==null&&ue(F,ae.startTime-J)}}var B=!1,L=-1,z=5,P=-1;function D(){return S?!0:!(n.unstable_now()-P<z)}function j(){if(S=!1,B){var J=n.unstable_now();P=J;var ae=!0;try{e:{x=!1,T&&(T=!1,I(L),L=-1),_=!0;var he=v;try{t:{for(O(J),g=t(c);g!==null&&!(g.expirationTime>J&&D());){var Te=g.callback;if(typeof Te=="function"){g.callback=null,v=g.priorityLevel;var Re=Te(g.expirationTime<=J);if(J=n.unstable_now(),typeof Re=="function"){g.callback=Re,O(J),ae=!0;break t}g===t(c)&&i(c),O(J)}else i(c);g=t(c)}if(g!==null)ae=!0;else{var Q=t(f);Q!==null&&ue(F,Q.startTime-J),ae=!1}}break e}finally{g=null,v=he,_=!1}ae=void 0}}finally{ae?q():B=!1}}}var q;if(typeof R=="function")q=function(){R(j)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,se=W.port2;W.port1.onmessage=j,q=function(){se.postMessage(null)}}else q=function(){w(j,0)};function ue(J,ae){L=w(function(){J(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(J){switch(v){case 1:case 2:case 3:var ae=3;break;default:ae=v}var he=v;v=ae;try{return J()}finally{v=he}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(J,ae){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var he=v;v=J;try{return ae()}finally{v=he}},n.unstable_scheduleCallback=function(J,ae,he){var Te=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Te+he:Te):he=Te,J){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=he+Re,J={id:p++,callback:ae,priorityLevel:J,startTime:he,expirationTime:Re,sortIndex:-1},he>Te?(J.sortIndex=he,e(f,J),t(c)===null&&J===t(f)&&(T?(I(L),L=-1):T=!0,ue(F,he-Te))):(J.sortIndex=Re,e(c,J),x||_||(x=!0,B||(B=!0,q()))),J},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(J){var ae=v;return function(){var he=v;v=ae;try{return J.apply(this,arguments)}finally{v=he}}}})(OC)),OC}var Pk;function q2(){return Pk||(Pk=1,NC.exports=EX()),NC.exports}var DC={exports:{}},ms={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rk;function TX(){if(Rk)return ms;Rk=1;var n=Ny();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(c,f,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:c,containerInfo:f,implementation:p}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ms.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ms.createPortal=function(c,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(c,f,null,p)},ms.flushSync=function(c){var f=s.T,p=i.p;try{if(s.T=null,i.p=2,c)return c()}finally{s.T=f,i.p=p,i.d.f()}},ms.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(c,f))},ms.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},ms.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var p=f.as,g=l(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,_=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:_}):p==="script"&&i.d.X(c,{crossOrigin:g,integrity:v,fetchPriority:_,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ms.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=l(f.as,f.crossOrigin);i.d.M(c,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(c)},ms.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,g=l(p,f.crossOrigin);i.d.L(c,p,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ms.preloadModule=function(c,f){if(typeof c=="string")if(f){var p=l(f.as,f.crossOrigin);i.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(c)},ms.requestFormReset=function(c){i.d.r(c)},ms.unstable_batchedUpdates=function(c,f){return c(f)},ms.useFormState=function(c,f,p){return s.H.useFormState(c,f,p)},ms.useFormStatus=function(){return s.H.useHostTransitionStatus()},ms.version="19.2.4",ms}var Nk;function $2(){if(Nk)return DC.exports;Nk=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),DC.exports=TX(),DC.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ok;function AX(){if(Ok)return v_;Ok=1;var n=q2(),e=Ny(),t=$2();function i(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)u+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var u=o,m=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(m=u.return),o=u.return;while(o)}return u.tag===3?m:null}function s(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function c(o){if(a(o)!==o)throw Error(i(188))}function f(o){var u=o.alternate;if(!u){if(u=a(o),u===null)throw Error(i(188));return u!==o?null:o}for(var m=o,y=u;;){var M=m.return;if(M===null)break;var C=M.alternate;if(C===null){if(y=M.return,y!==null){m=y;continue}break}if(M.child===C.child){for(C=M.child;C;){if(C===m)return c(M),o;if(C===y)return c(M),u;C=C.sibling}throw Error(i(188))}if(m.return!==y.return)m=M,y=C;else{for(var G=!1,Z=M.child;Z;){if(Z===m){G=!0,m=M,y=C;break}if(Z===y){G=!0,y=M,m=C;break}Z=Z.sibling}if(!G){for(Z=C.child;Z;){if(Z===m){G=!0,m=C,y=M;break}if(Z===y){G=!0,y=C,m=M;break}Z=Z.sibling}if(!G)throw Error(i(189))}}if(m.alternate!==y)throw Error(i(190))}if(m.tag!==3)throw Error(i(188));return m.stateNode.current===m?o:u}function p(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=p(o),u!==null)return u;o=o.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),R=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function q(o){return o===null||typeof o!="object"?null:(o=j&&o[j]||o["@@iterator"],typeof o=="function"?o:null)}var W=Symbol.for("react.client.reference");function se(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===W?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case T:return"Fragment";case w:return"Profiler";case S:return"StrictMode";case F:return"Suspense";case B:return"SuspenseList";case P:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case x:return"Portal";case R:return o.displayName||"Context";case I:return(o._context.displayName||"Context")+".Consumer";case O:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case L:return u=o.displayName||null,u!==null?u:se(o.type)||"Memo";case z:u=o._payload,o=o._init;try{return se(o(u))}catch{}}return null}var ue=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Te=[],Re=-1;function Q(o){return{current:o}}function de(o){0>Re||(o.current=Te[Re],Te[Re]=null,Re--)}function Me(o,u){Re++,Te[Re]=o.current,o.current=u}var We=Q(null),vt=Q(null),be=Q(null),Ae=Q(null);function mt(o,u){switch(Me(be,u),Me(vt,o),Me(We,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?XL(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=XL(u),o=YL(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}de(We),Me(We,o)}function ye(){de(We),de(vt),de(be)}function et(o){o.memoizedState!==null&&Me(Ae,o);var u=We.current,m=YL(u,o.type);u!==m&&(Me(vt,o),Me(We,m))}function wt(o){vt.current===o&&(de(We),de(vt)),Ae.current===o&&(de(Ae),h_._currentValue=he)}var ze,Tt;function Oe(o){if(ze===void 0)try{throw Error()}catch(m){var u=m.stack.trim().match(/\n( *(at )?)/);ze=u&&u[1]||"",Tt=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ze+o+Tt}var Ke=!1;function He(o,u){if(!o||Ke)return"";Ke=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var it=function(){throw Error()};if(Object.defineProperty(it.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(it,[])}catch(je){var De=je}Reflect.construct(o,[],it)}else{try{it.call()}catch(je){De=je}o.call(it.prototype)}}else{try{throw Error()}catch(je){De=je}(it=o())&&typeof it.catch=="function"&&it.catch(function(){})}}catch(je){if(je&&De&&typeof je.stack=="string")return[je.stack,De.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=y.DetermineComponentFrameRoot(),G=C[0],Z=C[1];if(G&&Z){var ce=G.split(`
`),Pe=Z.split(`
`);for(M=y=0;y<ce.length&&!ce[y].includes("DetermineComponentFrameRoot");)y++;for(;M<Pe.length&&!Pe[M].includes("DetermineComponentFrameRoot");)M++;if(y===ce.length||M===Pe.length)for(y=ce.length-1,M=Pe.length-1;1<=y&&0<=M&&ce[y]!==Pe[M];)M--;for(;1<=y&&0<=M;y--,M--)if(ce[y]!==Pe[M]){if(y!==1||M!==1)do if(y--,M--,0>M||ce[y]!==Pe[M]){var Xe=`
`+ce[y].replace(" at new "," at ");return o.displayName&&Xe.includes("<anonymous>")&&(Xe=Xe.replace("<anonymous>",o.displayName)),Xe}while(1<=y&&0<=M);break}}}finally{Ke=!1,Error.prepareStackTrace=m}return(m=o?o.displayName||o.name:"")?Oe(m):""}function ut(o,u){switch(o.tag){case 26:case 27:case 5:return Oe(o.type);case 16:return Oe("Lazy");case 13:return o.child!==u&&u!==null?Oe("Suspense Fallback"):Oe("Suspense");case 19:return Oe("SuspenseList");case 0:case 15:return He(o.type,!1);case 11:return He(o.type.render,!1);case 1:return He(o.type,!0);case 31:return Oe("Activity");default:return""}}function re(o){try{var u="",m=null;do u+=ut(o,m),m=o,o=o.return;while(o);return u}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}var Et=Object.prototype.hasOwnProperty,ht=n.unstable_scheduleCallback,Lt=n.unstable_cancelCallback,dt=n.unstable_shouldYield,ee=n.unstable_requestPaint,X=n.unstable_now,pe=n.unstable_getCurrentPriorityLevel,Ue=n.unstable_ImmediatePriority,Ye=n.unstable_UserBlockingPriority,Le=n.unstable_NormalPriority,At=n.unstable_LowPriority,gt=n.unstable_IdlePriority,It=n.log,Ht=n.unstable_setDisableYieldValue,nt=null,le=null;function Se(o){if(typeof It=="function"&&Ht(o),le&&typeof le.setStrictMode=="function")try{le.setStrictMode(nt,o)}catch{}}var ne=Math.clz32?Math.clz32:oe,ge=Math.log,Ze=Math.LN2;function oe(o){return o>>>=0,o===0?32:31-(ge(o)/Ze|0)|0}var Qe=256,$e=262144,at=4194304;function rt(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function qe(o,u,m){var y=o.pendingLanes;if(y===0)return 0;var M=0,C=o.suspendedLanes,G=o.pingedLanes;o=o.warmLanes;var Z=y&134217727;return Z!==0?(y=Z&~C,y!==0?M=rt(y):(G&=Z,G!==0?M=rt(G):m||(m=Z&~o,m!==0&&(M=rt(m))))):(Z=y&~C,Z!==0?M=rt(Z):G!==0?M=rt(G):m||(m=y&~o,m!==0&&(M=rt(m)))),M===0?0:u!==0&&u!==M&&(u&C)===0&&(C=M&-M,m=u&-u,C>=m||C===32&&(m&4194048)!==0)?u:M}function ot(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function Ft(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function un(){var o=at;return at<<=1,(at&62914560)===0&&(at=4194304),o}function en(o){for(var u=[],m=0;31>m;m++)u.push(o);return u}function oi(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Oi(o,u,m,y,M,C){var G=o.pendingLanes;o.pendingLanes=m,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=m,o.entangledLanes&=m,o.errorRecoveryDisabledLanes&=m,o.shellSuspendCounter=0;var Z=o.entanglements,ce=o.expirationTimes,Pe=o.hiddenUpdates;for(m=G&~m;0<m;){var Xe=31-ne(m),it=1<<Xe;Z[Xe]=0,ce[Xe]=-1;var De=Pe[Xe];if(De!==null)for(Pe[Xe]=null,Xe=0;Xe<De.length;Xe++){var je=De[Xe];je!==null&&(je.lane&=-536870913)}m&=~it}y!==0&&Xr(o,y,0),C!==0&&M===0&&o.tag!==0&&(o.suspendedLanes|=C&~(G&~u))}function Xr(o,u,m){o.pendingLanes|=u,o.suspendedLanes&=~u;var y=31-ne(u);o.entangledLanes|=u,o.entanglements[y]=o.entanglements[y]|1073741824|m&261930}function ua(o,u){var m=o.entangledLanes|=u;for(o=o.entanglements;m;){var y=31-ne(m),M=1<<y;M&u|o[y]&u&&(o[y]|=u),m&=~M}}function ns(o,u){var m=u&-u;return m=(m&42)!==0?1:to(m),(m&(o.suspendedLanes|u))!==0?0:m}function to(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Ia(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Yl(){var o=ae.p;return o!==0?o:(o=window.event,o===void 0?32:yk(o.type))}function Mi(o,u){var m=ae.p;try{return ae.p=o,u()}finally{ae.p=m}}var ca=Math.random().toString(36).slice(2),xi="__reactFiber$"+ca,zi="__reactProps$"+ca,Yr="__reactContainer$"+ca,fa="__reactEvents$"+ca,Pa="__reactListeners$"+ca,Lo="__reactHandles$"+ca,Kl="__reactResources$"+ca,ha="__reactMarker$"+ca;function no(o){delete o[xi],delete o[zi],delete o[fa],delete o[Pa],delete o[Lo]}function Is(o){var u=o[xi];if(u)return u;for(var m=o.parentNode;m;){if(u=m[Yr]||m[xi]){if(m=u.alternate,u.child!==null||m!==null&&m.child!==null)for(o=nk(o);o!==null;){if(m=o[xi])return m;o=nk(o)}return u}o=m,m=o.parentNode}return null}function Ra(o){if(o=o[xi]||o[Yr]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function da(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(i(33))}function is(o){var u=o[Kl];return u||(u=o[Kl]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function K(o){o[ha]=!0}var ve=new Set,ke={};function Ie(o,u){xe(o,u),xe(o+"Capture",u)}function xe(o,u){for(ke[o]=u,o=0;o<u.length;o++)ve.add(u[o])}var yt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ct={},ft={};function Ot(o){return Et.call(ft,o)?!0:Et.call(Ct,o)?!1:yt.test(o)?ft[o]=!0:(Ct[o]=!0,!1)}function kt(o,u,m){if(Ot(u))if(m===null)o.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var y=u.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+m)}}function Vt(o,u,m){if(m===null)o.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+m)}}function Pt(o,u,m,y){if(y===null)o.removeAttribute(m);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(m);return}o.setAttributeNS(u,m,""+y)}}function $t(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Rn(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function ii(o,u,m){var y=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var M=y.get,C=y.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return M.call(this)},set:function(G){m=""+G,C.call(this,G)}}),Object.defineProperty(o,u,{enumerable:y.enumerable}),{getValue:function(){return m},setValue:function(G){m=""+G},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Kt(o){if(!o._valueTracker){var u=Rn(o)?"checked":"value";o._valueTracker=ii(o,u,""+o[u])}}function on(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var m=u.getValue(),y="";return o&&(y=Rn(o)?o.checked?"true":"false":o.value),o=y,o!==m?(u.setValue(o),!0):!1}function St(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var An=/[\n"\\]/g;function tn(o){return o.replace(An,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Fi(o,u,m,y,M,C,G,Z){o.name="",G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?o.type=G:o.removeAttribute("type"),u!=null?G==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+$t(u)):o.value!==""+$t(u)&&(o.value=""+$t(u)):G!=="submit"&&G!=="reset"||o.removeAttribute("value"),u!=null?yi(o,G,$t(u)):m!=null?yi(o,G,$t(m)):y!=null&&o.removeAttribute("value"),M==null&&C!=null&&(o.defaultChecked=!!C),M!=null&&(o.checked=M&&typeof M!="function"&&typeof M!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?o.name=""+$t(Z):o.removeAttribute("name")}function Ps(o,u,m,y,M,C,G,Z){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(o.type=C),u!=null||m!=null){if(!(C!=="submit"&&C!=="reset"||u!=null)){Kt(o);return}m=m!=null?""+$t(m):"",u=u!=null?""+$t(u):m,Z||u===o.value||(o.value=u),o.defaultValue=u}y=y??M,y=typeof y!="function"&&typeof y!="symbol"&&!!y,o.checked=Z?o.checked:!!y,o.defaultChecked=!!y,G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"&&(o.name=G),Kt(o)}function yi(o,u,m){u==="number"&&St(o.ownerDocument)===o||o.defaultValue===""+m||(o.defaultValue=""+m)}function Kr(o,u,m,y){if(o=o.options,u){u={};for(var M=0;M<m.length;M++)u["$"+m[M]]=!0;for(m=0;m<o.length;m++)M=u.hasOwnProperty("$"+o[m].value),o[m].selected!==M&&(o[m].selected=M),M&&y&&(o[m].defaultSelected=!0)}else{for(m=""+$t(m),u=null,M=0;M<o.length;M++){if(o[M].value===m){o[M].selected=!0,y&&(o[M].defaultSelected=!0);return}u!==null||o[M].disabled||(u=o[M])}u!==null&&(u.selected=!0)}}function Zn(o,u,m){if(u!=null&&(u=""+$t(u),u!==o.value&&(o.value=u),m==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=m!=null?""+$t(m):""}function Ci(o,u,m,y){if(u==null){if(y!=null){if(m!=null)throw Error(i(92));if(ue(y)){if(1<y.length)throw Error(i(93));y=y[0]}m=y}m==null&&(m=""),u=m}m=$t(u),o.defaultValue=m,y=o.textContent,y===m&&y!==""&&y!==null&&(o.value=y),Kt(o)}function di(o,u){if(u){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=u;return}}o.textContent=u}var or=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lr(o,u,m){var y=u.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?y?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":y?o.setProperty(u,m):typeof m!="number"||m===0||or.has(u)?u==="float"?o.cssFloat=m:o[u]=(""+m).trim():o[u]=m+"px"}function sl(o,u,m){if(u!=null&&typeof u!="object")throw Error(i(62));if(o=o.style,m!=null){for(var y in m)!m.hasOwnProperty(y)||u!=null&&u.hasOwnProperty(y)||(y.indexOf("--")===0?o.setProperty(y,""):y==="float"?o.cssFloat="":o[y]="");for(var M in u)y=u[M],u.hasOwnProperty(M)&&m[M]!==y&&lr(o,M,y)}else for(var C in u)u.hasOwnProperty(C)&&lr(o,C,u[C])}function Na(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ol=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tf(o){return ol.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function ko(){}var bh=null;function Rs(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Zl=null,io=null;function Fu(o){var u=Ra(o);if(u&&(o=u.stateNode)){var m=o[zi]||null;e:switch(o=u.stateNode,u.type){case"input":if(Fi(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),u=m.name,m.type==="radio"&&u!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+tn(""+u)+'"][type="radio"]'),u=0;u<m.length;u++){var y=m[u];if(y!==o&&y.form===o.form){var M=y[zi]||null;if(!M)throw Error(i(90));Fi(y,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(u=0;u<m.length;u++)y=m[u],y.form===o.form&&on(y)}break e;case"textarea":Zn(o,m.value,m.defaultValue);break e;case"select":u=m.value,u!=null&&Kr(o,!!m.multiple,u,!1)}}}var nf=!1;function Ql(o,u,m){if(nf)return o(u,m);nf=!0;try{var y=o(u);return y}finally{if(nf=!1,(Zl!==null||io!==null)&&($o(),Zl&&(u=Zl,o=io,io=Zl=null,Fu(u),o)))for(u=0;u<o.length;u++)Fu(o[u])}}function ro(o,u){var m=o.stateNode;if(m===null)return null;var y=m[zi]||null;if(y===null)return null;m=y[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(i(231,u,typeof m));return m}var Ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rf=!1;if(Ns)try{var li={};Object.defineProperty(li,"passive",{get:function(){rf=!0}}),window.addEventListener("test",li,li),window.removeEventListener("test",li,li)}catch{rf=!1}var Oa=null,xh=null,ll=null;function Bu(){if(ll)return ll;var o,u=xh,m=u.length,y,M="value"in Oa?Oa.value:Oa.textContent,C=M.length;for(o=0;o<m&&u[o]===M[o];o++);var G=m-o;for(y=1;y<=G&&u[m-y]===M[C-y];y++);return ll=M.slice(o,1<y?1-y:void 0)}function Vu(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function Uo(){return!0}function zo(){return!1}function Lr(o){function u(m,y,M,C,G){this._reactName=m,this._targetInst=M,this.type=y,this.nativeEvent=C,this.target=G,this.currentTarget=null;for(var Z in o)o.hasOwnProperty(Z)&&(m=o[Z],this[Z]=m?m(C):C[Z]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Uo:zo,this.isPropagationStopped=zo,this}return g(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Uo)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Uo)},persist:function(){},isPersistent:Uo}),u}var ul={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fo=Lr(ul),Jl=g({},ul,{view:0,detail:0}),Sh=Lr(Jl),cl,af,Bo,ju=g({},Jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eu,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Bo&&(Bo&&o.type==="mousemove"?(cl=o.screenX-Bo.screenX,af=o.screenY-Bo.screenY):af=cl=0,Bo=o),cl)},movementY:function(o){return"movementY"in o?o.movementY:af}}),wh=Lr(ju),Hu=g({},ju,{dataTransfer:0}),fp=Lr(Hu),Eh=g({},Jl,{relatedTarget:0}),Gu=Lr(Eh),Th=g({},ul,{animationName:0,elapsedTime:0,pseudoElement:0}),dg=Lr(Th),Ah=g({},ul,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),hp=Lr(Ah),Wu=g({},ul,{data:0}),ao=Lr(Wu),sf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mh(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=pp[o])?!!u[o]:!1}function eu(){return Mh}var pa=g({},Jl,{key:function(o){if(o.key){var u=sf[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Vu(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?dp[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eu,charCode:function(o){return o.type==="keypress"?Vu(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Vu(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),fl=Lr(pa),of=g({},ju,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hl=Lr(of),E=g({},Jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eu}),V=Lr(E),$=g({},ul,{propertyName:0,elapsedTime:0,pseudoElement:0}),te=Lr($),_e=g({},ju,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Fe=Lr(_e),xt=g({},ul,{newState:0,oldState:0}),vn=Lr(xt),Qi=[9,13,27,32],Vn=Ns&&"CompositionEvent"in window,Ii=null;Ns&&"documentMode"in document&&(Ii=document.documentMode);var Da=Ns&&"TextEvent"in window&&!Ii,Vo=Ns&&(!Vn||Ii&&8<Ii&&11>=Ii),jo=" ",rs=!1;function tu(o,u){switch(o){case"keyup":return Qi.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lf(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var uf=!1;function Gx(o,u){switch(o){case"compositionend":return lf(u);case"keypress":return u.which!==32?null:(rs=!0,jo);case"textInput":return o=u.data,o===jo&&rs?null:o;default:return null}}function i0(o,u){if(uf)return o==="compositionend"||!Vn&&tu(o,u)?(o=Bu(),ll=xh=Oa=null,uf=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Vo&&u.locale!=="ko"?null:u.data;default:return null}}var r0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a0(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!r0[o.type]:u==="textarea"}function pg(o,u,m,y){Zl?io?io.push(y):io=[y]:Zl=y,u=YS(u,"onChange"),0<u.length&&(m=new Fo("onChange","change",null,m,y),o.push({event:m,listeners:u}))}var qu=null,cf=null;function Wx(o){jL(o,0)}function Ch(o){var u=da(o);if(on(u))return o}function s0(o,u){if(o==="change")return u}var dl=!1;if(Ns){var mp;if(Ns){var o0="oninput"in document;if(!o0){var l0=document.createElement("div");l0.setAttribute("oninput","return;"),o0=typeof l0.oninput=="function"}mp=o0}else mp=!1;dl=mp&&(!document.documentMode||9<document.documentMode)}function so(){qu&&(qu.detachEvent("onpropertychange",gp),cf=qu=null)}function gp(o){if(o.propertyName==="value"&&Ch(cf)){var u=[];pg(u,cf,o,Rs(o)),Ql(Wx,u)}}function qx(o,u,m){o==="focusin"?(so(),qu=u,cf=m,qu.attachEvent("onpropertychange",gp)):o==="focusout"&&so()}function u0(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Ch(cf)}function $x(o,u){if(o==="click")return Ch(u)}function Xx(o,u){if(o==="input"||o==="change")return Ch(u)}function c0(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var La=typeof Object.is=="function"?Object.is:c0;function Ih(o,u){if(La(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var m=Object.keys(o),y=Object.keys(u);if(m.length!==y.length)return!1;for(y=0;y<m.length;y++){var M=m[y];if(!Et.call(u,M)||!La(o[M],u[M]))return!1}return!0}function vp(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Ph(o,u){var m=vp(o);o=0;for(var y;m;){if(m.nodeType===3){if(y=o+m.textContent.length,o<=u&&y>=u)return{node:m,offset:u-o};o=y}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=vp(m)}}function Si(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?Si(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function Yx(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=St(o.document);u instanceof o.HTMLIFrameElement;){try{var m=typeof u.contentWindow.location.href=="string"}catch{m=!1}if(m)o=u.contentWindow;else break;u=St(o.document)}return u}function f0(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var Kx=Ns&&"documentMode"in document&&11>=document.documentMode,pl=null,ml=null,Rh=null,mg=!1;function Nh(o,u,m){var y=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;mg||pl==null||pl!==St(y)||(y=pl,"selectionStart"in y&&f0(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Rh&&Ih(Rh,y)||(Rh=y,y=YS(ml,"onSelect"),0<y.length&&(u=new Fo("onSelect","select",null,u,m),o.push({event:u,listeners:y}),u.target=pl)))}function ma(o,u){var m={};return m[o.toLowerCase()]=u.toLowerCase(),m["Webkit"+o]="webkit"+u,m["Moz"+o]="moz"+u,m}var ff={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionrun:ma("Transition","TransitionRun"),transitionstart:ma("Transition","TransitionStart"),transitioncancel:ma("Transition","TransitionCancel"),transitionend:ma("Transition","TransitionEnd")},yp={},h0={};Ns&&(h0=document.createElement("div").style,"AnimationEvent"in window||(delete ff.animationend.animation,delete ff.animationiteration.animation,delete ff.animationstart.animation),"TransitionEvent"in window||delete ff.transitionend.transition);function nu(o){if(yp[o])return yp[o];if(!ff[o])return o;var u=ff[o],m;for(m in u)if(u.hasOwnProperty(m)&&m in h0)return yp[o]=u[m];return o}var gg=nu("animationend"),_p=nu("animationiteration"),d0=nu("animationstart"),Zx=nu("transitionrun"),ZM=nu("transitionstart"),Qx=nu("transitioncancel"),p0=nu("transitionend"),oo=new Map,bp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bp.push("scrollEnd");function lo(o,u){oo.set(o,u),Ie(u,[o])}var xp=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},uo=[],iu=0,kr=0;function Sp(){for(var o=iu,u=kr=iu=0;u<o;){var m=uo[u];uo[u++]=null;var y=uo[u];uo[u++]=null;var M=uo[u];uo[u++]=null;var C=uo[u];if(uo[u++]=null,y!==null&&M!==null){var G=y.pending;G===null?M.next=M:(M.next=G.next,G.next=M),y.pending=M}C!==0&&$u(m,M,C)}}function Ur(o,u,m,y){uo[iu++]=o,uo[iu++]=u,uo[iu++]=m,uo[iu++]=y,kr|=y,o.lanes|=y,o=o.alternate,o!==null&&(o.lanes|=y)}function vg(o,u,m,y){return Ur(o,u,m,y),co(o)}function ka(o,u){return Ur(o,null,null,u),co(o)}function $u(o,u,m){o.lanes|=m;var y=o.alternate;y!==null&&(y.lanes|=m);for(var M=!1,C=o.return;C!==null;)C.childLanes|=m,y=C.alternate,y!==null&&(y.childLanes|=m),C.tag===22&&(o=C.stateNode,o===null||o._visibility&1||(M=!0)),o=C,C=C.return;return o.tag===3?(C=o.stateNode,M&&u!==null&&(M=31-ne(m),o=C.hiddenUpdates,y=o[M],y===null?o[M]=[u]:y.push(u),u.lane=m|536870912),C):null}function co(o){if(50<hc)throw hc=0,Pf=null,Error(i(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var Xu={};function m0(o,u,m,y){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bi(o,u,m,y){return new m0(o,u,m,y)}function yg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function as(o,u){var m=o.alternate;return m===null?(m=Bi(o.tag,u,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=u,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&65011712,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,u=o.dependencies,m.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m.refCleanup=o.refCleanup,m}function Oh(o,u){o.flags&=65011714;var m=o.alternate;return m===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=m.childLanes,o.lanes=m.lanes,o.child=m.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=m.memoizedProps,o.memoizedState=m.memoizedState,o.updateQueue=m.updateQueue,o.type=m.type,u=m.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function gl(o,u,m,y,M,C){var G=0;if(y=o,typeof o=="function")yg(o)&&(G=1);else if(typeof o=="string")G=sX(o,m,We.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case P:return o=Bi(31,m,u,M),o.elementType=P,o.lanes=C,o;case T:return Yu(m.children,M,C,u);case S:G=8,M|=24;break;case w:return o=Bi(12,m,u,M|2),o.elementType=w,o.lanes=C,o;case F:return o=Bi(13,m,u,M),o.elementType=F,o.lanes=C,o;case B:return o=Bi(19,m,u,M),o.elementType=B,o.lanes=C,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case R:G=10;break e;case I:G=9;break e;case O:G=11;break e;case L:G=14;break e;case z:G=16,y=null;break e}G=29,m=Error(i(130,o===null?"null":typeof o,"")),y=null}return u=Bi(G,m,u,M),u.elementType=o,u.type=y,u.lanes=C,u}function Yu(o,u,m,y){return o=Bi(7,o,y,u),o.lanes=m,o}function _g(o,u,m){return o=Bi(6,o,null,u),o.lanes=m,o}function Dh(o){var u=Bi(18,null,null,0);return u.stateNode=o,u}function bg(o,u,m){return u=Bi(4,o.children!==null?o.children:[],o.key,u),u.lanes=m,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var wp=new WeakMap;function Os(o,u){if(typeof o=="object"&&o!==null){var m=wp.get(o);return m!==void 0?m:(u={value:o,source:u,stack:re(u)},wp.set(o,u),u)}return{value:o,source:u,stack:re(u)}}var Ku=[],Zu=0,Lh=null,kh=0,ss=[],Di=0,ru=null,Vi=1,Ho="";function vl(o,u){Ku[Zu++]=kh,Ku[Zu++]=Lh,Lh=o,kh=u}function Jx(o,u,m){ss[Di++]=Vi,ss[Di++]=Ho,ss[Di++]=ru,ru=o;var y=Vi;o=Ho;var M=32-ne(y)-1;y&=~(1<<M),m+=1;var C=32-ne(u)+M;if(30<C){var G=M-M%5;C=(y&(1<<G)-1).toString(32),y>>=G,M-=G,Vi=1<<32-ne(u)+M|m<<M|y,Ho=C+o}else Vi=1<<C|m<<M|y,Ho=o}function yl(o){o.return!==null&&(vl(o,1),Jx(o,1,0))}function xg(o){for(;o===Lh;)Lh=Ku[--Zu],Ku[Zu]=null,kh=Ku[--Zu],Ku[Zu]=null;for(;o===ru;)ru=ss[--Di],ss[Di]=null,Ho=ss[--Di],ss[Di]=null,Vi=ss[--Di],ss[Di]=null}function Sg(o,u){ss[Di++]=Vi,ss[Di++]=Ho,ss[Di++]=ru,Vi=u.id,Ho=u.overflow,ru=o}var Ji=null,wi=null,Fn=!1,au=null,Ds=!1,Uh=Error(i(519));function _l(o){var u=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bl(Os(u,o)),Uh}function eS(o){var u=o.stateNode,m=o.type,y=o.memoizedProps;switch(u[xi]=o,u[zi]=y,m){case"dialog":Hn("cancel",u),Hn("close",u);break;case"iframe":case"object":case"embed":Hn("load",u);break;case"video":case"audio":for(m=0;m<Eo.length;m++)Hn(Eo[m],u);break;case"source":Hn("error",u);break;case"img":case"image":case"link":Hn("error",u),Hn("load",u);break;case"details":Hn("toggle",u);break;case"input":Hn("invalid",u),Ps(u,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0);break;case"select":Hn("invalid",u);break;case"textarea":Hn("invalid",u),Ci(u,y.value,y.defaultValue,y.children)}m=y.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||u.textContent===""+m||y.suppressHydrationWarning===!0||qL(u.textContent,m)?(y.popover!=null&&(Hn("beforetoggle",u),Hn("toggle",u)),y.onScroll!=null&&Hn("scroll",u),y.onScrollEnd!=null&&Hn("scrollend",u),y.onClick!=null&&(u.onclick=ko),u=!0):u=!1,u||_l(o,!0)}function tS(o){for(Ji=o.return;Ji;)switch(Ji.tag){case 5:case 31:case 13:Ds=!1;return;case 27:case 3:Ds=!0;return;default:Ji=Ji.return}}function zh(o){if(o!==Ji)return!1;if(!Fn)return tS(o),Fn=!0,!1;var u=o.tag,m;if((m=u!==3&&u!==27)&&((m=u===5)&&(m=o.type,m=!(m!=="form"&&m!=="button")||dC(o.type,o.memoizedProps)),m=!m),m&&wi&&_l(o),tS(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));wi=tk(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));wi=tk(o)}else u===27?(u=wi,rd(o.type)?(o=yC,yC=null,wi=o):wi=u):wi=Ji?Dl(o.stateNode.nextSibling):null;return!0}function Qu(){wi=Ji=null,Fn=!1}function wg(){var o=au;return o!==null&&(tr===null?tr=o:tr.push.apply(tr,o),au=null),o}function bl(o){au===null?au=[o]:au.push(o)}var Fh=Q(null),Ju=null,xl=null;function su(o,u,m){Me(Fh,u._currentValue),u._currentValue=m}function Sl(o){o._currentValue=Fh.current,de(Fh)}function Eg(o,u,m){for(;o!==null;){var y=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),o===m)break;o=o.return}}function Tg(o,u,m,y){var M=o.child;for(M!==null&&(M.return=o);M!==null;){var C=M.dependencies;if(C!==null){var G=M.child;C=C.firstContext;e:for(;C!==null;){var Z=C;C=M;for(var ce=0;ce<u.length;ce++)if(Z.context===u[ce]){C.lanes|=m,Z=C.alternate,Z!==null&&(Z.lanes|=m),Eg(C.return,m,o),y||(G=null);break e}C=Z.next}}else if(M.tag===18){if(G=M.return,G===null)throw Error(i(341));G.lanes|=m,C=G.alternate,C!==null&&(C.lanes|=m),Eg(G,m,o),G=null}else G=M.child;if(G!==null)G.return=M;else for(G=M;G!==null;){if(G===o){G=null;break}if(M=G.sibling,M!==null){M.return=G.return,G=M;break}G=G.return}M=G}}function wl(o,u,m,y){o=null;for(var M=u,C=!1;M!==null;){if(!C){if((M.flags&524288)!==0)C=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var G=M.alternate;if(G===null)throw Error(i(387));if(G=G.memoizedProps,G!==null){var Z=M.type;La(M.pendingProps.value,G.value)||(o!==null?o.push(Z):o=[Z])}}else if(M===Ae.current){if(G=M.alternate,G===null)throw Error(i(387));G.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(o!==null?o.push(h_):o=[h_])}M=M.return}o!==null&&Tg(u,o,m,y),u.flags|=262144}function Ep(o){for(o=o.firstContext;o!==null;){if(!La(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function ec(o){Ju=o,xl=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function cn(o){return nS(Ju,o)}function Bh(o,u){return Ju===null&&ec(o),nS(o,u)}function nS(o,u){var m=u._currentValue;if(u={context:u,memoizedValue:m,next:null},xl===null){if(o===null)throw Error(i(308));xl=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else xl=xl.next=u;return m}var iS=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(m,y){o.push(y)}};this.abort=function(){u.aborted=!0,o.forEach(function(m){return m()})}},QM=n.unstable_scheduleCallback,JM=n.unstable_NormalPriority,vr={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function g0(){return{controller:new iS,data:new Map,refCount:0}}function hf(o){o.refCount--,o.refCount===0&&QM(JM,function(){o.controller.abort()})}var Ls=null,Ag=0,ou=0,fo=null;function v0(o,u){if(Ls===null){var m=Ls=[];Ag=0,ou=Be(),fo={status:"pending",value:void 0,then:function(y){m.push(y)}}}return Ag++,u.then(y0,y0),u}function y0(){if(--Ag===0&&Ls!==null){fo!==null&&(fo.status="fulfilled");var o=Ls;Ls=null,ou=0,fo=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function _0(o,u){var m=[],y={status:"pending",value:null,reason:null,then:function(M){m.push(M)}};return o.then(function(){y.status="fulfilled",y.value=u;for(var M=0;M<m.length;M++)(0,m[M])(u)},function(M){for(y.status="rejected",y.reason=M,M=0;M<m.length;M++)(0,m[M])(void 0)}),y}var rS=J.S;J.S=function(o,u){s_=X(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&v0(o,u),rS!==null&&rS(o,u)};var tc=Q(null);function Mg(){var o=tc.current;return o!==null?o:dn.pooledCache}function Tp(o,u){u===null?Me(tc,tc.current):Me(tc,u.pool)}function b0(){var o=Mg();return o===null?null:{parent:vr._currentValue,pool:o}}var df=Error(i(460)),Ap=Error(i(474)),Mn=Error(i(542)),Cg={then:function(){}};function os(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Ig(o,u,m){switch(m=o[m],m===void 0?o.push(u):m!==u&&(u.then(ko,ko),u=m),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,gf(o),o;default:if(typeof u.status=="string")u.then(ko,ko);else{if(o=dn,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=u,o.status="pending",o.then(function(y){if(u.status==="pending"){var M=u;M.status="fulfilled",M.value=y}},function(y){if(u.status==="pending"){var M=u;M.status="rejected",M.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,gf(o),o}throw El=u,df}}function pf(o){try{var u=o._init;return u(o._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(El=m,df):m}}var El=null;function mf(){if(El===null)throw Error(i(459));var o=El;return El=null,o}function gf(o){if(o===df||o===Mn)throw Error(i(483))}var vf=null,yf=0;function Mp(o){var u=yf;return yf+=1,vf===null&&(vf=[]),Ig(vf,o,u)}function ho(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function Vh(o,u){throw u.$$typeof===v?Error(i(525)):(o=Object.prototype.toString.call(u),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function Pg(o){function u(we,me){if(o){var Ce=we.deletions;Ce===null?(we.deletions=[me],we.flags|=16):Ce.push(me)}}function m(we,me){if(!o)return null;for(;me!==null;)u(we,me),me=me.sibling;return null}function y(we){for(var me=new Map;we!==null;)we.key!==null?me.set(we.key,we):me.set(we.index,we),we=we.sibling;return me}function M(we,me){return we=as(we,me),we.index=0,we.sibling=null,we}function C(we,me,Ce){return we.index=Ce,o?(Ce=we.alternate,Ce!==null?(Ce=Ce.index,Ce<me?(we.flags|=67108866,me):Ce):(we.flags|=67108866,me)):(we.flags|=1048576,me)}function G(we){return o&&we.alternate===null&&(we.flags|=67108866),we}function Z(we,me,Ce,Je){return me===null||me.tag!==6?(me=_g(Ce,we.mode,Je),me.return=we,me):(me=M(me,Ce),me.return=we,me)}function ce(we,me,Ce,Je){var Qt=Ce.type;return Qt===T?Xe(we,me,Ce.props.children,Je,Ce.key):me!==null&&(me.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===z&&pf(Qt)===me.type)?(me=M(me,Ce.props),ho(me,Ce),me.return=we,me):(me=gl(Ce.type,Ce.key,Ce.props,null,we.mode,Je),ho(me,Ce),me.return=we,me)}function Pe(we,me,Ce,Je){return me===null||me.tag!==4||me.stateNode.containerInfo!==Ce.containerInfo||me.stateNode.implementation!==Ce.implementation?(me=bg(Ce,we.mode,Je),me.return=we,me):(me=M(me,Ce.children||[]),me.return=we,me)}function Xe(we,me,Ce,Je,Qt){return me===null||me.tag!==7?(me=Yu(Ce,we.mode,Je,Qt),me.return=we,me):(me=M(me,Ce),me.return=we,me)}function it(we,me,Ce){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return me=_g(""+me,we.mode,Ce),me.return=we,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case _:return Ce=gl(me.type,me.key,me.props,null,we.mode,Ce),ho(Ce,me),Ce.return=we,Ce;case x:return me=bg(me,we.mode,Ce),me.return=we,me;case z:return me=pf(me),it(we,me,Ce)}if(ue(me)||q(me))return me=Yu(me,we.mode,Ce,null),me.return=we,me;if(typeof me.then=="function")return it(we,Mp(me),Ce);if(me.$$typeof===R)return it(we,Bh(we,me),Ce);Vh(we,me)}return null}function De(we,me,Ce,Je){var Qt=me!==null?me.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return Qt!==null?null:Z(we,me,""+Ce,Je);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case _:return Ce.key===Qt?ce(we,me,Ce,Je):null;case x:return Ce.key===Qt?Pe(we,me,Ce,Je):null;case z:return Ce=pf(Ce),De(we,me,Ce,Je)}if(ue(Ce)||q(Ce))return Qt!==null?null:Xe(we,me,Ce,Je,null);if(typeof Ce.then=="function")return De(we,me,Mp(Ce),Je);if(Ce.$$typeof===R)return De(we,me,Bh(we,Ce),Je);Vh(we,Ce)}return null}function je(we,me,Ce,Je,Qt){if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return we=we.get(Ce)||null,Z(me,we,""+Je,Qt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case _:return we=we.get(Je.key===null?Ce:Je.key)||null,ce(me,we,Je,Qt);case x:return we=we.get(Je.key===null?Ce:Je.key)||null,Pe(me,we,Je,Qt);case z:return Je=pf(Je),je(we,me,Ce,Je,Qt)}if(ue(Je)||q(Je))return we=we.get(Ce)||null,Xe(me,we,Je,Qt,null);if(typeof Je.then=="function")return je(we,me,Ce,Mp(Je),Qt);if(Je.$$typeof===R)return je(we,me,Ce,Bh(me,Je),Qt);Vh(me,Je)}return null}function jt(we,me,Ce,Je){for(var Qt=null,ri=null,Gt=me,Nn=me=0,Wn=null;Gt!==null&&Nn<Ce.length;Nn++){Gt.index>Nn?(Wn=Gt,Gt=null):Wn=Gt.sibling;var ai=De(we,Gt,Ce[Nn],Je);if(ai===null){Gt===null&&(Gt=Wn);break}o&&Gt&&ai.alternate===null&&u(we,Gt),me=C(ai,me,Nn),ri===null?Qt=ai:ri.sibling=ai,ri=ai,Gt=Wn}if(Nn===Ce.length)return m(we,Gt),Fn&&vl(we,Nn),Qt;if(Gt===null){for(;Nn<Ce.length;Nn++)Gt=it(we,Ce[Nn],Je),Gt!==null&&(me=C(Gt,me,Nn),ri===null?Qt=Gt:ri.sibling=Gt,ri=Gt);return Fn&&vl(we,Nn),Qt}for(Gt=y(Gt);Nn<Ce.length;Nn++)Wn=je(Gt,we,Nn,Ce[Nn],Je),Wn!==null&&(o&&Wn.alternate!==null&&Gt.delete(Wn.key===null?Nn:Wn.key),me=C(Wn,me,Nn),ri===null?Qt=Wn:ri.sibling=Wn,ri=Wn);return o&&Gt.forEach(function(ud){return u(we,ud)}),Fn&&vl(we,Nn),Qt}function ln(we,me,Ce,Je){if(Ce==null)throw Error(i(151));for(var Qt=null,ri=null,Gt=me,Nn=me=0,Wn=null,ai=Ce.next();Gt!==null&&!ai.done;Nn++,ai=Ce.next()){Gt.index>Nn?(Wn=Gt,Gt=null):Wn=Gt.sibling;var ud=De(we,Gt,ai.value,Je);if(ud===null){Gt===null&&(Gt=Wn);break}o&&Gt&&ud.alternate===null&&u(we,Gt),me=C(ud,me,Nn),ri===null?Qt=ud:ri.sibling=ud,ri=ud,Gt=Wn}if(ai.done)return m(we,Gt),Fn&&vl(we,Nn),Qt;if(Gt===null){for(;!ai.done;Nn++,ai=Ce.next())ai=it(we,ai.value,Je),ai!==null&&(me=C(ai,me,Nn),ri===null?Qt=ai:ri.sibling=ai,ri=ai);return Fn&&vl(we,Nn),Qt}for(Gt=y(Gt);!ai.done;Nn++,ai=Ce.next())ai=je(Gt,we,Nn,ai.value,Je),ai!==null&&(o&&ai.alternate!==null&&Gt.delete(ai.key===null?Nn:ai.key),me=C(ai,me,Nn),ri===null?Qt=ai:ri.sibling=ai,ri=ai);return o&&Gt.forEach(function(vX){return u(we,vX)}),Fn&&vl(we,Nn),Qt}function Ai(we,me,Ce,Je){if(typeof Ce=="object"&&Ce!==null&&Ce.type===T&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case _:e:{for(var Qt=Ce.key;me!==null;){if(me.key===Qt){if(Qt=Ce.type,Qt===T){if(me.tag===7){m(we,me.sibling),Je=M(me,Ce.props.children),Je.return=we,we=Je;break e}}else if(me.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===z&&pf(Qt)===me.type){m(we,me.sibling),Je=M(me,Ce.props),ho(Je,Ce),Je.return=we,we=Je;break e}m(we,me);break}else u(we,me);me=me.sibling}Ce.type===T?(Je=Yu(Ce.props.children,we.mode,Je,Ce.key),Je.return=we,we=Je):(Je=gl(Ce.type,Ce.key,Ce.props,null,we.mode,Je),ho(Je,Ce),Je.return=we,we=Je)}return G(we);case x:e:{for(Qt=Ce.key;me!==null;){if(me.key===Qt)if(me.tag===4&&me.stateNode.containerInfo===Ce.containerInfo&&me.stateNode.implementation===Ce.implementation){m(we,me.sibling),Je=M(me,Ce.children||[]),Je.return=we,we=Je;break e}else{m(we,me);break}else u(we,me);me=me.sibling}Je=bg(Ce,we.mode,Je),Je.return=we,we=Je}return G(we);case z:return Ce=pf(Ce),Ai(we,me,Ce,Je)}if(ue(Ce))return jt(we,me,Ce,Je);if(q(Ce)){if(Qt=q(Ce),typeof Qt!="function")throw Error(i(150));return Ce=Qt.call(Ce),ln(we,me,Ce,Je)}if(typeof Ce.then=="function")return Ai(we,me,Mp(Ce),Je);if(Ce.$$typeof===R)return Ai(we,me,Bh(we,Ce),Je);Vh(we,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint"?(Ce=""+Ce,me!==null&&me.tag===6?(m(we,me.sibling),Je=M(me,Ce),Je.return=we,we=Je):(m(we,me),Je=_g(Ce,we.mode,Je),Je.return=we,we=Je),G(we)):m(we,me)}return function(we,me,Ce,Je){try{yf=0;var Qt=Ai(we,me,Ce,Je);return vf=null,Qt}catch(Gt){if(Gt===df||Gt===Mn)throw Gt;var ri=Bi(29,Gt,null,we.mode);return ri.lanes=Je,ri.return=we,ri}finally{}}}var lu=Pg(!0),Rg=Pg(!1),Ua=!1;function Cp(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function x0(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function uu(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function nc(o,u,m){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(Wt&2)!==0){var M=y.pending;return M===null?u.next=u:(u.next=M.next,M.next=u),y.pending=u,u=co(o),$u(o,null,m),u}return Ur(o,y,u,m),co(o)}function ic(o,u,m){if(u=u.updateQueue,u!==null&&(u=u.shared,(m&4194048)!==0)){var y=u.lanes;y&=o.pendingLanes,m|=y,u.lanes=m,ua(o,m)}}function Zt(o,u){var m=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,m===y)){var M=null,C=null;if(m=m.firstBaseUpdate,m!==null){do{var G={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};C===null?M=C=G:C=C.next=G,m=m.next}while(m!==null);C===null?M=C=u:C=C.next=u}else M=C=u;m={baseState:y.baseState,firstBaseUpdate:M,lastBaseUpdate:C,shared:y.shared,callbacks:y.callbacks},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=u:o.next=u,m.lastBaseUpdate=u}var S0=!1;function Ip(){if(S0){var o=fo;if(o!==null)throw o}}function jh(o,u,m,y){S0=!1;var M=o.updateQueue;Ua=!1;var C=M.firstBaseUpdate,G=M.lastBaseUpdate,Z=M.shared.pending;if(Z!==null){M.shared.pending=null;var ce=Z,Pe=ce.next;ce.next=null,G===null?C=Pe:G.next=Pe,G=ce;var Xe=o.alternate;Xe!==null&&(Xe=Xe.updateQueue,Z=Xe.lastBaseUpdate,Z!==G&&(Z===null?Xe.firstBaseUpdate=Pe:Z.next=Pe,Xe.lastBaseUpdate=ce))}if(C!==null){var it=M.baseState;G=0,Xe=Pe=ce=null,Z=C;do{var De=Z.lane&-536870913,je=De!==Z.lane;if(je?(En&De)===De:(y&De)===De){De!==0&&De===ou&&(S0=!0),Xe!==null&&(Xe=Xe.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});e:{var jt=o,ln=Z;De=u;var Ai=m;switch(ln.tag){case 1:if(jt=ln.payload,typeof jt=="function"){it=jt.call(Ai,it,De);break e}it=jt;break e;case 3:jt.flags=jt.flags&-65537|128;case 0:if(jt=ln.payload,De=typeof jt=="function"?jt.call(Ai,it,De):jt,De==null)break e;it=g({},it,De);break e;case 2:Ua=!0}}De=Z.callback,De!==null&&(o.flags|=64,je&&(o.flags|=8192),je=M.callbacks,je===null?M.callbacks=[De]:je.push(De))}else je={lane:De,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Xe===null?(Pe=Xe=je,ce=it):Xe=Xe.next=je,G|=De;if(Z=Z.next,Z===null){if(Z=M.shared.pending,Z===null)break;je=Z,Z=je.next,je.next=null,M.lastBaseUpdate=je,M.shared.pending=null}}while(!0);Xe===null&&(ce=it),M.baseState=ce,M.firstBaseUpdate=Pe,M.lastBaseUpdate=Xe,C===null&&(M.shared.lanes=0),Rl|=G,o.lanes=G,o.memoizedState=it}}function Hh(o,u){if(typeof o!="function")throw Error(i(191,o));o.call(u)}function aS(o,u){var m=o.callbacks;if(m!==null)for(o.callbacks=null,o=0;o<m.length;o++)Hh(m[o],u)}var Gh=Q(null),Ng=Q(0);function sS(o,u){o=Fs,Me(Ng,o),Me(Gh,u),Fs=o|u.baseLanes}function w0(){Me(Ng,Fs),Me(Gh,Gh.current)}function Pp(){Fs=Ng.current,de(Gh),de(Ng)}var ls=Q(null),za=null;function cu(o){var u=o.alternate;Me(Bn,Bn.current&1),Me(ls,o),za===null&&(u===null||Gh.current!==null||u.memoizedState!==null)&&(za=o)}function E0(o){Me(Bn,Bn.current),Me(ls,o),za===null&&(za=o)}function oS(o){o.tag===22?(Me(Bn,Bn.current),Me(ls,o),za===null&&(za=o)):us()}function us(){Me(Bn,Bn.current),Me(ls,ls.current)}function ur(o){de(ls),za===o&&(za=null),de(Bn)}var Bn=Q(0);function ks(o){for(var u=o;u!==null;){if(u.tag===13){var m=u.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||gC(m)||vC(m)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Li=0,bn=null,pi=null,kn=null,po=!1,Wh=!1,_f=!1,Og=0,Rp=0,qh=null,T0=0;function ji(){throw Error(i(321))}function A0(o,u){if(u===null)return!1;for(var m=0;m<u.length&&m<o.length;m++)if(!La(o[m],u[m]))return!1;return!0}function Dg(o,u,m,y,M,C){return Li=C,bn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,J.H=o===null||o.memoizedState===null?FS:q0,_f=!1,C=m(y,M),_f=!1,Wh&&(C=bf(u,m,y,M)),lS(o),C}function lS(o){J.H=$h;var u=pi!==null&&pi.next!==null;if(Li=0,kn=pi=bn=null,po=!1,Rp=0,qh=null,u)throw Error(i(300));o===null||yr||(o=o.dependencies,o!==null&&Ep(o)&&(yr=!0))}function bf(o,u,m,y){bn=o;var M=0;do{if(Wh&&(qh=null),Rp=0,Wh=!1,25<=M)throw Error(i(301));if(M+=1,kn=pi=null,o.updateQueue!=null){var C=o.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}J.H=mo,C=u(m,y)}while(Wh);return C}function xf(){var o=J.H,u=o.useState()[0];return u=typeof u.then=="function"?Np(u):u,o=o.useState()[0],(pi!==null?pi.memoizedState:null)!==o&&(bn.flags|=1024),u}function M0(){var o=Og!==0;return Og=0,o}function C0(o,u,m){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~m}function I0(o){if(po){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}po=!1}Li=0,kn=pi=bn=null,Wh=!1,Rp=Og=0,qh=null}function Ar(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?bn.memoizedState=kn=o:kn=kn.next=o,kn}function cr(){if(pi===null){var o=bn.alternate;o=o!==null?o.memoizedState:null}else o=pi.next;var u=kn===null?bn.memoizedState:kn.next;if(u!==null)kn=u,pi=o;else{if(o===null)throw bn.alternate===null?Error(i(467)):Error(i(310));pi=o,o={memoizedState:pi.memoizedState,baseState:pi.baseState,baseQueue:pi.baseQueue,queue:pi.queue,next:null},kn===null?bn.memoizedState=kn=o:kn=kn.next=o}return kn}function Lg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Np(o){var u=Rp;return Rp+=1,qh===null&&(qh=[]),o=Ig(qh,o,u),u=bn,(kn===null?u.memoizedState:kn.next)===null&&(u=u.alternate,J.H=u===null||u.memoizedState===null?FS:q0),o}function rc(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Np(o);if(o.$$typeof===R)return cn(o)}throw Error(i(438,String(o)))}function P0(o){var u=null,m=bn.updateQueue;if(m!==null&&(u=m.memoCache),u==null){var y=bn.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(M){return M.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),m===null&&(m=Lg(),bn.updateQueue=m),m.memoCache=u,m=u.data[u.index],m===void 0)for(m=u.data[u.index]=Array(o),y=0;y<o;y++)m[y]=D;return u.index++,m}function fu(o,u){return typeof u=="function"?u(o):u}function kg(o){var u=cr();return R0(u,pi,o)}function R0(o,u,m){var y=o.queue;if(y===null)throw Error(i(311));y.lastRenderedReducer=m;var M=o.baseQueue,C=y.pending;if(C!==null){if(M!==null){var G=M.next;M.next=C.next,C.next=G}u.baseQueue=M=C,y.pending=null}if(C=o.baseState,M===null)o.memoizedState=C;else{u=M.next;var Z=G=null,ce=null,Pe=u,Xe=!1;do{var it=Pe.lane&-536870913;if(it!==Pe.lane?(En&it)===it:(Li&it)===it){var De=Pe.revertLane;if(De===0)ce!==null&&(ce=ce.next={lane:0,revertLane:0,gesture:null,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),it===ou&&(Xe=!0);else if((Li&De)===De){Pe=Pe.next,De===ou&&(Xe=!0);continue}else it={lane:0,revertLane:Pe.revertLane,gesture:null,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null},ce===null?(Z=ce=it,G=C):ce=ce.next=it,bn.lanes|=De,Rl|=De;it=Pe.action,_f&&m(C,it),C=Pe.hasEagerState?Pe.eagerState:m(C,it)}else De={lane:it,revertLane:Pe.revertLane,gesture:Pe.gesture,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null},ce===null?(Z=ce=De,G=C):ce=ce.next=De,bn.lanes|=it,Rl|=it;Pe=Pe.next}while(Pe!==null&&Pe!==u);if(ce===null?G=C:ce.next=Z,!La(C,o.memoizedState)&&(yr=!0,Xe&&(m=fo,m!==null)))throw m;o.memoizedState=C,o.baseState=G,o.baseQueue=ce,y.lastRenderedState=C}return M===null&&(y.lanes=0),[o.memoizedState,y.dispatch]}function N0(o){var u=cr(),m=u.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=o;var y=m.dispatch,M=m.pending,C=u.memoizedState;if(M!==null){m.pending=null;var G=M=M.next;do C=o(C,G.action),G=G.next;while(G!==M);La(C,u.memoizedState)||(yr=!0),u.memoizedState=C,u.baseQueue===null&&(u.baseState=C),m.lastRenderedState=C}return[C,y]}function uS(o,u,m){var y=bn,M=cr(),C=Fn;if(C){if(m===void 0)throw Error(i(407));m=m()}else m=u();var G=!La((pi||M).memoizedState,m);if(G&&(M.memoizedState=m,yr=!0),M=M.queue,B0(hS.bind(null,y,M,o),[o]),M.getSnapshot!==u||G||kn!==null&&kn.memoizedState.tag&1){if(y.flags|=2048,ac(9,{destroy:void 0},fS.bind(null,y,M,m,u),null),dn===null)throw Error(i(349));C||(Li&127)!==0||cS(y,u,m)}return m}function cS(o,u,m){o.flags|=16384,o={getSnapshot:u,value:m},u=bn.updateQueue,u===null?(u=Lg(),bn.updateQueue=u,u.stores=[o]):(m=u.stores,m===null?u.stores=[o]:m.push(o))}function fS(o,u,m,y){u.value=m,u.getSnapshot=y,dS(u)&&pS(o)}function hS(o,u,m){return m(function(){dS(u)&&pS(o)})}function dS(o){var u=o.getSnapshot;o=o.value;try{var m=u();return!La(o,m)}catch{return!0}}function pS(o){var u=ka(o,2);u!==null&&In(u,o,2)}function O0(o){var u=Ar();if(typeof o=="function"){var m=o;if(o=m(),_f){Se(!0);try{m()}finally{Se(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fu,lastRenderedState:o},u}function D0(o,u,m,y){return o.baseState=m,R0(o,pi,typeof y=="function"?y:fu)}function eC(o,u,m,y,M){if(Bg(o))throw Error(i(485));if(o=u.action,o!==null){var C={payload:M,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(G){C.listeners.push(G)}};J.T!==null?m(!0):C.isTransition=!1,y(C),m=u.pending,m===null?(C.next=u.pending=C,mS(u,C)):(C.next=m.next,u.pending=m.next=C)}}function mS(o,u){var m=u.action,y=u.payload,M=o.state;if(u.isTransition){var C=J.T,G={};J.T=G;try{var Z=m(M,y),ce=J.S;ce!==null&&ce(G,Z),gS(o,u,Z)}catch(Pe){L0(o,u,Pe)}finally{C!==null&&G.types!==null&&(C.types=G.types),J.T=C}}else try{C=m(M,y),gS(o,u,C)}catch(Pe){L0(o,u,Pe)}}function gS(o,u,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(y){vS(o,u,y)},function(y){return L0(o,u,y)}):vS(o,u,m)}function vS(o,u,m){u.status="fulfilled",u.value=m,yS(u),o.state=m,u=o.pending,u!==null&&(m=u.next,m===u?o.pending=null:(m=m.next,u.next=m,mS(o,m)))}function L0(o,u,m){var y=o.pending;if(o.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=m,yS(u),u=u.next;while(u!==y)}o.action=null}function yS(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function k0(o,u){return u}function U0(o,u){if(Fn){var m=dn.formState;if(m!==null){e:{var y=bn;if(Fn){if(wi){t:{for(var M=wi,C=Ds;M.nodeType!==8;){if(!C){M=null;break t}if(M=Dl(M.nextSibling),M===null){M=null;break t}}C=M.data,M=C==="F!"||C==="F"?M:null}if(M){wi=Dl(M.nextSibling),y=M.data==="F!";break e}}_l(y)}y=!1}y&&(u=m[0])}}return m=Ar(),m.memoizedState=m.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:k0,lastRenderedState:u},m.queue=y,m=kS.bind(null,bn,y),y.dispatch=m,y=O0(!1),C=W0.bind(null,bn,!1,y.queue),y=Ar(),M={state:u,dispatch:null,action:o,pending:null},y.queue=M,m=eC.bind(null,bn,M,C,m),M.dispatch=m,y.memoizedState=o,[u,m,!1]}function _S(o){var u=cr();return z0(u,pi,o)}function z0(o,u,m){if(u=R0(o,u,k0)[0],o=kg(fu)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=Np(u)}catch(G){throw G===df?Mn:G}else y=u;u=cr();var M=u.queue,C=M.dispatch;return m!==u.memoizedState&&(bn.flags|=2048,ac(9,{destroy:void 0},bS.bind(null,M,m),null)),[y,C,o]}function bS(o,u){o.action=u}function F0(o){var u=cr(),m=pi;if(m!==null)return z0(u,m,o);cr(),u=u.memoizedState,m=cr();var y=m.queue.dispatch;return m.memoizedState=o,[u,y,!1]}function ac(o,u,m,y){return o={tag:o,create:m,deps:y,inst:u,next:null},u=bn.updateQueue,u===null&&(u=Lg(),bn.updateQueue=u),m=u.lastEffect,m===null?u.lastEffect=o.next=o:(y=m.next,m.next=o,o.next=y,u.lastEffect=o),o}function Ug(){return cr().memoizedState}function zg(o,u,m,y){var M=Ar();bn.flags|=o,M.memoizedState=ac(1|u,{destroy:void 0},m,y===void 0?null:y)}function Fg(o,u,m,y){var M=cr();y=y===void 0?null:y;var C=M.memoizedState.inst;pi!==null&&y!==null&&A0(y,pi.memoizedState.deps)?M.memoizedState=ac(u,C,m,y):(bn.flags|=o,M.memoizedState=ac(1|u,C,m,y))}function xS(o,u){zg(8390656,8,o,u)}function B0(o,u){Fg(2048,8,o,u)}function SS(o){bn.flags|=4;var u=bn.updateQueue;if(u===null)u=Lg(),bn.updateQueue=u,u.events=[o];else{var m=u.events;m===null?u.events=[o]:m.push(o)}}function wS(o){var u=cr().memoizedState;return SS({ref:u,nextImpl:o}),function(){if((Wt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}function ES(o,u){return Fg(4,2,o,u)}function TS(o,u){return Fg(4,4,o,u)}function AS(o,u){if(typeof u=="function"){o=o();var m=u(o);return function(){typeof m=="function"?m():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function MS(o,u,m){m=m!=null?m.concat([o]):null,Fg(4,4,AS.bind(null,u,o),m)}function V0(){}function CS(o,u){var m=cr();u=u===void 0?null:u;var y=m.memoizedState;return u!==null&&A0(u,y[1])?y[0]:(m.memoizedState=[o,u],o)}function IS(o,u){var m=cr();u=u===void 0?null:u;var y=m.memoizedState;if(u!==null&&A0(u,y[1]))return y[0];if(y=o(),_f){Se(!0);try{o()}finally{Se(!1)}}return m.memoizedState=[y,u],y}function j0(o,u,m){return m===void 0||(Li&1073741824)!==0&&(En&261930)===0?o.memoizedState=u:(o.memoizedState=m,o=Dn(),bn.lanes|=o,Rl|=o,m)}function PS(o,u,m,y){return La(m,u)?m:Gh.current!==null?(o=j0(o,m,y),La(o,u)||(yr=!0),o):(Li&42)===0||(Li&1073741824)!==0&&(En&261930)===0?(yr=!0,o.memoizedState=m):(o=Dn(),bn.lanes|=o,Rl|=o,u)}function RS(o,u,m,y,M){var C=ae.p;ae.p=C!==0&&8>C?C:8;var G=J.T,Z={};J.T=Z,W0(o,!1,u,m);try{var ce=M(),Pe=J.S;if(Pe!==null&&Pe(Z,ce),ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var Xe=_0(ce,y);Op(o,u,Xe,Vs(o))}else Op(o,u,y,Vs(o))}catch(it){Op(o,u,{then:function(){},status:"rejected",reason:it},Vs())}finally{ae.p=C,G!==null&&Z.types!==null&&(G.types=Z.types),J.T=G}}function tC(){}function H0(o,u,m,y){if(o.tag!==5)throw Error(i(476));var M=NS(o).queue;RS(o,M,u,he,m===null?tC:function(){return OS(o),m(y)})}function NS(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fu,lastRenderedState:he},next:null};var m={};return u.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fu,lastRenderedState:m},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function OS(o){var u=NS(o);u.next===null&&(u=o.alternate.memoizedState),Op(o,u.next.queue,{},Vs())}function G0(){return cn(h_)}function DS(){return cr().memoizedState}function LS(){return cr().memoizedState}function nC(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var m=Vs();o=uu(m);var y=nc(u,o,m);y!==null&&(In(y,u,m),ic(y,u,m)),u={cache:g0()},o.payload=u;return}u=u.return}}function iC(o,u,m){var y=Vs();m={lane:y,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Bg(o)?US(u,m):(m=vg(o,u,m,y),m!==null&&(In(m,o,y),zS(m,u,y)))}function kS(o,u,m){var y=Vs();Op(o,u,m,y)}function Op(o,u,m,y){var M={lane:y,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(Bg(o))US(u,M);else{var C=o.alternate;if(o.lanes===0&&(C===null||C.lanes===0)&&(C=u.lastRenderedReducer,C!==null))try{var G=u.lastRenderedState,Z=C(G,m);if(M.hasEagerState=!0,M.eagerState=Z,La(Z,G))return Ur(o,u,M,0),dn===null&&Sp(),!1}catch{}finally{}if(m=vg(o,u,M,y),m!==null)return In(m,o,y),zS(m,u,y),!0}return!1}function W0(o,u,m,y){if(y={lane:2,revertLane:Be(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},Bg(o)){if(u)throw Error(i(479))}else u=vg(o,m,y,2),u!==null&&In(u,o,2)}function Bg(o){var u=o.alternate;return o===bn||u!==null&&u===bn}function US(o,u){Wh=po=!0;var m=o.pending;m===null?u.next=u:(u.next=m.next,m.next=u),o.pending=u}function zS(o,u,m){if((m&4194048)!==0){var y=u.lanes;y&=o.pendingLanes,m|=y,u.lanes=m,ua(o,m)}}var $h={readContext:cn,use:rc,useCallback:ji,useContext:ji,useEffect:ji,useImperativeHandle:ji,useLayoutEffect:ji,useInsertionEffect:ji,useMemo:ji,useReducer:ji,useRef:ji,useState:ji,useDebugValue:ji,useDeferredValue:ji,useTransition:ji,useSyncExternalStore:ji,useId:ji,useHostTransitionStatus:ji,useFormState:ji,useActionState:ji,useOptimistic:ji,useMemoCache:ji,useCacheRefresh:ji};$h.useEffectEvent=ji;var FS={readContext:cn,use:rc,useCallback:function(o,u){return Ar().memoizedState=[o,u===void 0?null:u],o},useContext:cn,useEffect:xS,useImperativeHandle:function(o,u,m){m=m!=null?m.concat([o]):null,zg(4194308,4,AS.bind(null,u,o),m)},useLayoutEffect:function(o,u){return zg(4194308,4,o,u)},useInsertionEffect:function(o,u){zg(4,2,o,u)},useMemo:function(o,u){var m=Ar();u=u===void 0?null:u;var y=o();if(_f){Se(!0);try{o()}finally{Se(!1)}}return m.memoizedState=[y,u],y},useReducer:function(o,u,m){var y=Ar();if(m!==void 0){var M=m(u);if(_f){Se(!0);try{m(u)}finally{Se(!1)}}}else M=u;return y.memoizedState=y.baseState=M,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:M},y.queue=o,o=o.dispatch=iC.bind(null,bn,o),[y.memoizedState,o]},useRef:function(o){var u=Ar();return o={current:o},u.memoizedState=o},useState:function(o){o=O0(o);var u=o.queue,m=kS.bind(null,bn,u);return u.dispatch=m,[o.memoizedState,m]},useDebugValue:V0,useDeferredValue:function(o,u){var m=Ar();return j0(m,o,u)},useTransition:function(){var o=O0(!1);return o=RS.bind(null,bn,o.queue,!0,!1),Ar().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,m){var y=bn,M=Ar();if(Fn){if(m===void 0)throw Error(i(407));m=m()}else{if(m=u(),dn===null)throw Error(i(349));(En&127)!==0||cS(y,u,m)}M.memoizedState=m;var C={value:m,getSnapshot:u};return M.queue=C,xS(hS.bind(null,y,C,o),[o]),y.flags|=2048,ac(9,{destroy:void 0},fS.bind(null,y,C,m,u),null),m},useId:function(){var o=Ar(),u=dn.identifierPrefix;if(Fn){var m=Ho,y=Vi;m=(y&~(1<<32-ne(y)-1)).toString(32)+m,u="_"+u+"R_"+m,m=Og++,0<m&&(u+="H"+m.toString(32)),u+="_"}else m=T0++,u="_"+u+"r_"+m.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:G0,useFormState:U0,useActionState:U0,useOptimistic:function(o){var u=Ar();u.memoizedState=u.baseState=o;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=m,u=W0.bind(null,bn,!0,m),m.dispatch=u,[o,u]},useMemoCache:P0,useCacheRefresh:function(){return Ar().memoizedState=nC.bind(null,bn)},useEffectEvent:function(o){var u=Ar(),m={impl:o};return u.memoizedState=m,function(){if((Wt&2)!==0)throw Error(i(440));return m.impl.apply(void 0,arguments)}}},q0={readContext:cn,use:rc,useCallback:CS,useContext:cn,useEffect:B0,useImperativeHandle:MS,useInsertionEffect:ES,useLayoutEffect:TS,useMemo:IS,useReducer:kg,useRef:Ug,useState:function(){return kg(fu)},useDebugValue:V0,useDeferredValue:function(o,u){var m=cr();return PS(m,pi.memoizedState,o,u)},useTransition:function(){var o=kg(fu)[0],u=cr().memoizedState;return[typeof o=="boolean"?o:Np(o),u]},useSyncExternalStore:uS,useId:DS,useHostTransitionStatus:G0,useFormState:_S,useActionState:_S,useOptimistic:function(o,u){var m=cr();return D0(m,pi,o,u)},useMemoCache:P0,useCacheRefresh:LS};q0.useEffectEvent=wS;var mo={readContext:cn,use:rc,useCallback:CS,useContext:cn,useEffect:B0,useImperativeHandle:MS,useInsertionEffect:ES,useLayoutEffect:TS,useMemo:IS,useReducer:N0,useRef:Ug,useState:function(){return N0(fu)},useDebugValue:V0,useDeferredValue:function(o,u){var m=cr();return pi===null?j0(m,o,u):PS(m,pi.memoizedState,o,u)},useTransition:function(){var o=N0(fu)[0],u=cr().memoizedState;return[typeof o=="boolean"?o:Np(o),u]},useSyncExternalStore:uS,useId:DS,useHostTransitionStatus:G0,useFormState:F0,useActionState:F0,useOptimistic:function(o,u){var m=cr();return pi!==null?D0(m,pi,o,u):(m.baseState=o,[o,m.queue.dispatch])},useMemoCache:P0,useCacheRefresh:LS};mo.useEffectEvent=wS;function Vg(o,u,m,y){u=o.memoizedState,m=m(y,u),m=m==null?u:g({},u,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var Dp={enqueueSetState:function(o,u,m){o=o._reactInternals;var y=Vs(),M=uu(y);M.payload=u,m!=null&&(M.callback=m),u=nc(o,M,y),u!==null&&(In(u,o,y),ic(u,o,y))},enqueueReplaceState:function(o,u,m){o=o._reactInternals;var y=Vs(),M=uu(y);M.tag=1,M.payload=u,m!=null&&(M.callback=m),u=nc(o,M,y),u!==null&&(In(u,o,y),ic(u,o,y))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var m=Vs(),y=uu(m);y.tag=2,u!=null&&(y.callback=u),u=nc(o,y,m),u!==null&&(In(u,o,m),ic(u,o,m))}};function $0(o,u,m,y,M,C,G){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,C,G):u.prototype&&u.prototype.isPureReactComponent?!Ih(m,y)||!Ih(M,C):!0}function X0(o,u,m,y){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(m,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(m,y),u.state!==o&&Dp.enqueueReplaceState(u,u.state,null)}function sc(o,u){var m=u;if("ref"in u){m={};for(var y in u)y!=="ref"&&(m[y]=u[y])}if(o=o.defaultProps){m===u&&(m=g({},m));for(var M in o)m[M]===void 0&&(m[M]=o[M])}return m}function BS(o){xp(o)}function Y0(o){console.error(o)}function K0(o){xp(o)}function jg(o,u){try{var m=o.onUncaughtError;m(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function VS(o,u,m){try{var y=o.onCaughtError;y(m.value,{componentStack:m.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function Z0(o,u,m){return m=uu(m),m.tag=3,m.payload={element:null},m.callback=function(){jg(o,u)},m}function Q0(o){return o=uu(o),o.tag=3,o}function jS(o,u,m,y){var M=m.type.getDerivedStateFromError;if(typeof M=="function"){var C=y.value;o.payload=function(){return M(C)},o.callback=function(){VS(u,m,y)}}var G=m.stateNode;G!==null&&typeof G.componentDidCatch=="function"&&(o.callback=function(){VS(u,m,y),typeof M!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var Z=y.stack;this.componentDidCatch(y.value,{componentStack:Z!==null?Z:""})})}function Mr(o,u,m,y,M){if(m.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=m.alternate,u!==null&&wl(u,m,M,!0),m=ls.current,m!==null){switch(m.tag){case 31:case 13:return za===null?ed():m.alternate===null&&Hi===0&&(Hi=3),m.flags&=-257,m.flags|=65536,m.lanes=M,y===Cg?m.flags|=16384:(u=m.updateQueue,u===null?m.updateQueue=new Set([y]):u.add(y),qp(o,y,M)),!1;case 22:return m.flags|=65536,y===Cg?m.flags|=16384:(u=m.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},m.updateQueue=u):(m=u.retryQueue,m===null?u.retryQueue=new Set([y]):m.add(y)),qp(o,y,M)),!1}throw Error(i(435,m.tag))}return qp(o,y,M),ed(),!1}if(Fn)return u=ls.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=M,y!==Uh&&(o=Error(i(422),{cause:y}),bl(Os(o,m)))):(y!==Uh&&(u=Error(i(423),{cause:y}),bl(Os(u,m))),o=o.current.alternate,o.flags|=65536,M&=-M,o.lanes|=M,y=Os(y,m),M=Z0(o.stateNode,y,M),Zt(o,M),Hi!==4&&(Hi=2)),!1;var C=Error(i(520),{cause:y});if(C=Os(C,m),If===null?If=[C]:If.push(C),Hi!==4&&(Hi=2),u===null)return!0;y=Os(y,m),m=u;do{switch(m.tag){case 3:return m.flags|=65536,o=M&-M,m.lanes|=o,o=Z0(m.stateNode,y,o),Zt(m,o),!1;case 1:if(u=m.type,C=m.stateNode,(m.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(dr===null||!dr.has(C))))return m.flags|=65536,M&=-M,m.lanes|=M,M=Q0(M),jS(M,o,m,y),Zt(m,M),!1}m=m.return}while(m!==null);return!1}var Hg=Error(i(461)),yr=!1;function zr(o,u,m,y){u.child=o===null?Rg(u,null,m,y):lu(u,o.child,m,y)}function J0(o,u,m,y,M){m=m.render;var C=u.ref;if("ref"in y){var G={};for(var Z in y)Z!=="ref"&&(G[Z]=y[Z])}else G=y;return ec(u),y=Dg(o,u,m,G,C,M),Z=M0(),o!==null&&!yr?(C0(o,u,M),fr(o,u,M)):(Fn&&Z&&yl(u),u.flags|=1,zr(o,u,y,M),u.child)}function Sf(o,u,m,y,M){if(o===null){var C=m.type;return typeof C=="function"&&!yg(C)&&C.defaultProps===void 0&&m.compare===null?(u.tag=15,u.type=C,Gg(o,u,C,y,M)):(o=gl(m.type,null,y,u,u.mode,M),o.ref=u.ref,o.return=u,u.child=o)}if(C=o.child,!Kg(o,M)){var G=C.memoizedProps;if(m=m.compare,m=m!==null?m:Ih,m(G,y)&&o.ref===u.ref)return fr(o,u,M)}return u.flags|=1,o=as(C,y),o.ref=u.ref,o.return=u,u.child=o}function Gg(o,u,m,y,M){if(o!==null){var C=o.memoizedProps;if(Ih(C,y)&&o.ref===u.ref)if(yr=!1,u.pendingProps=y=C,Kg(o,M))(o.flags&131072)!==0&&(yr=!0);else return u.lanes=o.lanes,fr(o,u,M)}return Xh(o,u,m,y,M)}function wf(o,u,m,y){var M=y.children,C=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((u.flags&128)!==0){if(C=C!==null?C.baseLanes|m:m,o!==null){for(y=u.child=o.child,M=0;y!==null;)M=M|y.lanes|y.childLanes,y=y.sibling;y=M&~C}else y=0,u.child=null;return cs(o,u,C,m,y)}if((m&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&Tp(u,C!==null?C.cachePool:null),C!==null?sS(u,C):w0(),oS(u);else return y=u.lanes=536870912,cs(o,u,C!==null?C.baseLanes|m:m,m,y)}else C!==null?(Tp(u,C.cachePool),sS(u,C),us(),u.memoizedState=null):(o!==null&&Tp(u,null),w0(),us());return zr(o,u,M,m),u.child}function Tl(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function cs(o,u,m,y,M){var C=Mg();return C=C===null?null:{parent:vr._currentValue,pool:C},u.memoizedState={baseLanes:m,cachePool:C},o!==null&&Tp(u,null),w0(),oS(u),o!==null&&wl(o,u,y,!0),u.childLanes=M,null}function Wg(o,u){return u=Yg({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function HS(o,u,m){return lu(u,o.child,null,m),o=Wg(u,u.pendingProps),o.flags|=2,ur(u),u.memoizedState=null,o}function qg(o,u,m){var y=u.pendingProps,M=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(Fn){if(y.mode==="hidden")return o=Wg(u,y),u.lanes=536870912,Tl(null,o);if(E0(u),(o=wi)?(o=ek(o,Ds),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:ru!==null?{id:Vi,overflow:Ho}:null,retryLane:536870912,hydrationErrors:null},m=Dh(o),m.return=u,u.child=m,Ji=u,wi=null)):o=null,o===null)throw _l(u);return u.lanes=536870912,null}return Wg(u,y)}var C=o.memoizedState;if(C!==null){var G=C.dehydrated;if(E0(u),M)if(u.flags&256)u.flags&=-257,u=HS(o,u,m);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(i(558));else if(yr||wl(o,u,m,!1),M=(m&o.childLanes)!==0,yr||M){if(y=dn,y!==null&&(G=ns(y,m),G!==0&&G!==C.retryLane))throw C.retryLane=G,ka(o,G),In(y,o,G),Hg;ed(),u=HS(o,u,m)}else o=C.treeContext,wi=Dl(G.nextSibling),Ji=u,Fn=!0,au=null,Ds=!1,o!==null&&Sg(u,o),u=Wg(u,y),u.flags|=4096;return u}return o=as(o.child,{mode:y.mode,children:y.children}),o.ref=u.ref,u.child=o,o.return=u,o}function Ef(o,u){var m=u.ref;if(m===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(i(284));(o===null||o.ref!==m)&&(u.flags|=4194816)}}function Xh(o,u,m,y,M){return ec(u),m=Dg(o,u,m,y,void 0,M),y=M0(),o!==null&&!yr?(C0(o,u,M),fr(o,u,M)):(Fn&&y&&yl(u),u.flags|=1,zr(o,u,m,M),u.child)}function Lp(o,u,m,y,M,C){return ec(u),u.updateQueue=null,m=bf(u,y,m,M),lS(o),y=M0(),o!==null&&!yr?(C0(o,u,C),fr(o,u,C)):(Fn&&y&&yl(u),u.flags|=1,zr(o,u,m,C),u.child)}function $g(o,u,m,y,M){if(ec(u),u.stateNode===null){var C=Xu,G=m.contextType;typeof G=="object"&&G!==null&&(C=cn(G)),C=new m(y,C),u.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Dp,u.stateNode=C,C._reactInternals=u,C=u.stateNode,C.props=y,C.state=u.memoizedState,C.refs={},Cp(u),G=m.contextType,C.context=typeof G=="object"&&G!==null?cn(G):Xu,C.state=u.memoizedState,G=m.getDerivedStateFromProps,typeof G=="function"&&(Vg(u,m,G,y),C.state=u.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(G=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),G!==C.state&&Dp.enqueueReplaceState(C,C.state,null),jh(u,y,C,M),Ip(),C.state=u.memoizedState),typeof C.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(o===null){C=u.stateNode;var Z=u.memoizedProps,ce=sc(m,Z);C.props=ce;var Pe=C.context,Xe=m.contextType;G=Xu,typeof Xe=="object"&&Xe!==null&&(G=cn(Xe));var it=m.getDerivedStateFromProps;Xe=typeof it=="function"||typeof C.getSnapshotBeforeUpdate=="function",Z=u.pendingProps!==Z,Xe||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(Z||Pe!==G)&&X0(u,C,y,G),Ua=!1;var De=u.memoizedState;C.state=De,jh(u,y,C,M),Ip(),Pe=u.memoizedState,Z||De!==Pe||Ua?(typeof it=="function"&&(Vg(u,m,it,y),Pe=u.memoizedState),(ce=Ua||$0(u,m,ce,y,De,Pe,G))?(Xe||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(u.flags|=4194308)):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=Pe),C.props=y,C.state=Pe,C.context=G,y=ce):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{C=u.stateNode,x0(o,u),G=u.memoizedProps,Xe=sc(m,G),C.props=Xe,it=u.pendingProps,De=C.context,Pe=m.contextType,ce=Xu,typeof Pe=="object"&&Pe!==null&&(ce=cn(Pe)),Z=m.getDerivedStateFromProps,(Pe=typeof Z=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(G!==it||De!==ce)&&X0(u,C,y,ce),Ua=!1,De=u.memoizedState,C.state=De,jh(u,y,C,M),Ip();var je=u.memoizedState;G!==it||De!==je||Ua||o!==null&&o.dependencies!==null&&Ep(o.dependencies)?(typeof Z=="function"&&(Vg(u,m,Z,y),je=u.memoizedState),(Xe=Ua||$0(u,m,Xe,y,De,je,ce)||o!==null&&o.dependencies!==null&&Ep(o.dependencies))?(Pe||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(y,je,ce),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(y,je,ce)),typeof C.componentDidUpdate=="function"&&(u.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof C.componentDidUpdate!="function"||G===o.memoizedProps&&De===o.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||G===o.memoizedProps&&De===o.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=je),C.props=y,C.state=je,C.context=ce,y=Xe):(typeof C.componentDidUpdate!="function"||G===o.memoizedProps&&De===o.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||G===o.memoizedProps&&De===o.memoizedState||(u.flags|=1024),y=!1)}return C=y,Ef(o,u),y=(u.flags&128)!==0,C||y?(C=u.stateNode,m=y&&typeof m.getDerivedStateFromError!="function"?null:C.render(),u.flags|=1,o!==null&&y?(u.child=lu(u,o.child,null,M),u.child=lu(u,null,m,M)):zr(o,u,m,M),u.memoizedState=C.state,o=u.child):o=fr(o,u,M),o}function GS(o,u,m,y){return Qu(),u.flags|=256,zr(o,u,m,y),u.child}var e_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ga(o){return{baseLanes:o,cachePool:b0()}}function Xg(o,u,m){return o=o!==null?o.childLanes&~m:0,u&&(o|=Va),o}function WS(o,u,m){var y=u.pendingProps,M=!1,C=(u.flags&128)!==0,G;if((G=C)||(G=o!==null&&o.memoizedState===null?!1:(Bn.current&2)!==0),G&&(M=!0,u.flags&=-129),G=(u.flags&32)!==0,u.flags&=-33,o===null){if(Fn){if(M?cu(u):us(),(o=wi)?(o=ek(o,Ds),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:ru!==null?{id:Vi,overflow:Ho}:null,retryLane:536870912,hydrationErrors:null},m=Dh(o),m.return=u,u.child=m,Ji=u,wi=null)):o=null,o===null)throw _l(u);return vC(o)?u.lanes=32:u.lanes=536870912,null}var Z=y.children;return y=y.fallback,M?(us(),M=u.mode,Z=Yg({mode:"hidden",children:Z},M),y=Yu(y,M,m,null),Z.return=u,y.return=u,Z.sibling=y,u.child=Z,y=u.child,y.memoizedState=ga(m),y.childLanes=Xg(o,G,m),u.memoizedState=e_,Tl(null,y)):(cu(u),kp(u,Z))}var ce=o.memoizedState;if(ce!==null&&(Z=ce.dehydrated,Z!==null)){if(C)u.flags&256?(cu(u),u.flags&=-257,u=t_(o,u,m)):u.memoizedState!==null?(us(),u.child=o.child,u.flags|=128,u=null):(us(),Z=y.fallback,M=u.mode,y=Yg({mode:"visible",children:y.children},M),Z=Yu(Z,M,m,null),Z.flags|=2,y.return=u,Z.return=u,y.sibling=Z,u.child=y,lu(u,o.child,null,m),y=u.child,y.memoizedState=ga(m),y.childLanes=Xg(o,G,m),u.memoizedState=e_,u=Tl(null,y));else if(cu(u),vC(Z)){if(G=Z.nextSibling&&Z.nextSibling.dataset,G)var Pe=G.dgst;G=Pe,y=Error(i(419)),y.stack="",y.digest=G,bl({value:y,source:null,stack:null}),u=t_(o,u,m)}else if(yr||wl(o,u,m,!1),G=(m&o.childLanes)!==0,yr||G){if(G=dn,G!==null&&(y=ns(G,m),y!==0&&y!==ce.retryLane))throw ce.retryLane=y,ka(o,y),In(G,o,y),Hg;gC(Z)||ed(),u=t_(o,u,m)}else gC(Z)?(u.flags|=192,u.child=o.child,u=null):(o=ce.treeContext,wi=Dl(Z.nextSibling),Ji=u,Fn=!0,au=null,Ds=!1,o!==null&&Sg(u,o),u=kp(u,y.children),u.flags|=4096);return u}return M?(us(),Z=y.fallback,M=u.mode,ce=o.child,Pe=ce.sibling,y=as(ce,{mode:"hidden",children:y.children}),y.subtreeFlags=ce.subtreeFlags&65011712,Pe!==null?Z=as(Pe,Z):(Z=Yu(Z,M,m,null),Z.flags|=2),Z.return=u,y.return=u,y.sibling=Z,u.child=y,Tl(null,y),y=u.child,Z=o.child.memoizedState,Z===null?Z=ga(m):(M=Z.cachePool,M!==null?(ce=vr._currentValue,M=M.parent!==ce?{parent:ce,pool:ce}:M):M=b0(),Z={baseLanes:Z.baseLanes|m,cachePool:M}),y.memoizedState=Z,y.childLanes=Xg(o,G,m),u.memoizedState=e_,Tl(o.child,y)):(cu(u),m=o.child,o=m.sibling,m=as(m,{mode:"visible",children:y.children}),m.return=u,m.sibling=null,o!==null&&(G=u.deletions,G===null?(u.deletions=[o],u.flags|=16):G.push(o)),u.child=m,u.memoizedState=null,m)}function kp(o,u){return u=Yg({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function Yg(o,u){return o=Bi(22,o,null,u),o.lanes=0,o}function t_(o,u,m){return lu(u,o.child,null,m),o=kp(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function qS(o,u,m){o.lanes|=u;var y=o.alternate;y!==null&&(y.lanes|=u),Eg(o.return,u,m)}function Tf(o,u,m,y,M,C){var G=o.memoizedState;G===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:m,tailMode:M,treeForkCount:C}:(G.isBackwards=u,G.rendering=null,G.renderingStartTime=0,G.last=y,G.tail=m,G.tailMode=M,G.treeForkCount=C)}function fs(o,u,m){var y=u.pendingProps,M=y.revealOrder,C=y.tail;y=y.children;var G=Bn.current,Z=(G&2)!==0;if(Z?(G=G&1|2,u.flags|=128):G&=1,Me(Bn,G),zr(o,u,y,m),y=Fn?kh:0,!Z&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&qS(o,m,u);else if(o.tag===19)qS(o,m,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(M){case"forwards":for(m=u.child,M=null;m!==null;)o=m.alternate,o!==null&&ks(o)===null&&(M=m),m=m.sibling;m=M,m===null?(M=u.child,u.child=null):(M=m.sibling,m.sibling=null),Tf(u,!1,M,m,C,y);break;case"backwards":case"unstable_legacy-backwards":for(m=null,M=u.child,u.child=null;M!==null;){if(o=M.alternate,o!==null&&ks(o)===null){u.child=M;break}o=M.sibling,M.sibling=m,m=M,M=o}Tf(u,!0,m,null,C,y);break;case"together":Tf(u,!1,null,null,void 0,y);break;default:u.memoizedState=null}return u.child}function fr(o,u,m){if(o!==null&&(u.dependencies=o.dependencies),Rl|=u.lanes,(m&u.childLanes)===0)if(o!==null){if(wl(o,u,m,!1),(m&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(i(153));if(u.child!==null){for(o=u.child,m=as(o,o.pendingProps),u.child=m,m.return=u;o.sibling!==null;)o=o.sibling,m=m.sibling=as(o,o.pendingProps),m.return=u;m.sibling=null}return u.child}function Kg(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&Ep(o)))}function rC(o,u,m){switch(u.tag){case 3:mt(u,u.stateNode.containerInfo),su(u,vr,o.memoizedState.cache),Qu();break;case 27:case 5:et(u);break;case 4:mt(u,u.stateNode.containerInfo);break;case 10:su(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,E0(u),null;break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(cu(u),u.flags|=128,null):(m&u.child.childLanes)!==0?WS(o,u,m):(cu(u),o=fr(o,u,m),o!==null?o.sibling:null);cu(u);break;case 19:var M=(o.flags&128)!==0;if(y=(m&u.childLanes)!==0,y||(wl(o,u,m,!1),y=(m&u.childLanes)!==0),M){if(y)return fs(o,u,m);u.flags|=128}if(M=u.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),Me(Bn,Bn.current),y)break;return null;case 22:return u.lanes=0,wf(o,u,m,u.pendingProps);case 24:su(u,vr,o.memoizedState.cache)}return fr(o,u,m)}function Zg(o,u,m){if(o!==null)if(o.memoizedProps!==u.pendingProps)yr=!0;else{if(!Kg(o,m)&&(u.flags&128)===0)return yr=!1,rC(o,u,m);yr=(o.flags&131072)!==0}else yr=!1,Fn&&(u.flags&1048576)!==0&&Jx(u,kh,u.index);switch(u.lanes=0,u.tag){case 16:e:{var y=u.pendingProps;if(o=pf(u.elementType),u.type=o,typeof o=="function")yg(o)?(y=sc(o,y),u.tag=1,u=$g(null,u,o,y,m)):(u.tag=0,u=Xh(null,u,o,y,m));else{if(o!=null){var M=o.$$typeof;if(M===O){u.tag=11,u=J0(null,u,o,y,m);break e}else if(M===L){u.tag=14,u=Sf(null,u,o,y,m);break e}}throw u=se(o)||o,Error(i(306,u,""))}}return u;case 0:return Xh(o,u,u.type,u.pendingProps,m);case 1:return y=u.type,M=sc(y,u.pendingProps),$g(o,u,y,M,m);case 3:e:{if(mt(u,u.stateNode.containerInfo),o===null)throw Error(i(387));y=u.pendingProps;var C=u.memoizedState;M=C.element,x0(o,u),jh(u,y,null,m);var G=u.memoizedState;if(y=G.cache,su(u,vr,y),y!==C.cache&&Tg(u,[vr],m,!0),Ip(),y=G.element,C.isDehydrated)if(C={element:y,isDehydrated:!1,cache:G.cache},u.updateQueue.baseState=C,u.memoizedState=C,u.flags&256){u=GS(o,u,y,m);break e}else if(y!==M){M=Os(Error(i(424)),u),bl(M),u=GS(o,u,y,m);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(wi=Dl(o.firstChild),Ji=u,Fn=!0,au=null,Ds=!0,m=Rg(u,null,y,m),u.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Qu(),y===M){u=fr(o,u,m);break e}zr(o,u,y,m)}u=u.child}return u;case 26:return Ef(o,u),o===null?(m=sk(u.type,null,u.pendingProps,null))?u.memoizedState=m:Fn||(m=u.type,o=u.pendingProps,y=KS(be.current).createElement(m),y[xi]=u,y[zi]=o,Ha(y,m,o),K(y),u.stateNode=y):u.memoizedState=sk(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return et(u),o===null&&Fn&&(y=u.stateNode=ik(u.type,u.pendingProps,be.current),Ji=u,Ds=!0,M=wi,rd(u.type)?(yC=M,wi=Dl(y.firstChild)):wi=M),zr(o,u,u.pendingProps.children,m),Ef(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&Fn&&((M=y=wi)&&(y=$$(y,u.type,u.pendingProps,Ds),y!==null?(u.stateNode=y,Ji=u,wi=Dl(y.firstChild),Ds=!1,M=!0):M=!1),M||_l(u)),et(u),M=u.type,C=u.pendingProps,G=o!==null?o.memoizedProps:null,y=C.children,dC(M,C)?y=null:G!==null&&dC(M,G)&&(u.flags|=32),u.memoizedState!==null&&(M=Dg(o,u,xf,null,null,m),h_._currentValue=M),Ef(o,u),zr(o,u,y,m),u.child;case 6:return o===null&&Fn&&((o=m=wi)&&(m=X$(m,u.pendingProps,Ds),m!==null?(u.stateNode=m,Ji=u,wi=null,o=!0):o=!1),o||_l(u)),null;case 13:return WS(o,u,m);case 4:return mt(u,u.stateNode.containerInfo),y=u.pendingProps,o===null?u.child=lu(u,null,y,m):zr(o,u,y,m),u.child;case 11:return J0(o,u,u.type,u.pendingProps,m);case 7:return zr(o,u,u.pendingProps,m),u.child;case 8:return zr(o,u,u.pendingProps.children,m),u.child;case 12:return zr(o,u,u.pendingProps.children,m),u.child;case 10:return y=u.pendingProps,su(u,u.type,y.value),zr(o,u,y.children,m),u.child;case 9:return M=u.type._context,y=u.pendingProps.children,ec(u),M=cn(M),y=y(M),u.flags|=1,zr(o,u,y,m),u.child;case 14:return Sf(o,u,u.type,u.pendingProps,m);case 15:return Gg(o,u,u.type,u.pendingProps,m);case 19:return fs(o,u,m);case 31:return qg(o,u,m);case 22:return wf(o,u,m,u.pendingProps);case 24:return ec(u),y=cn(vr),o===null?(M=Mg(),M===null&&(M=dn,C=g0(),M.pooledCache=C,C.refCount++,C!==null&&(M.pooledCacheLanes|=m),M=C),u.memoizedState={parent:y,cache:M},Cp(u),su(u,vr,M)):((o.lanes&m)!==0&&(x0(o,u),jh(u,null,null,m),Ip()),M=o.memoizedState,C=u.memoizedState,M.parent!==y?(M={parent:y,cache:y},u.memoizedState=M,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=M),su(u,vr,y)):(y=C.cache,su(u,vr,y),y!==M.cache&&Tg(u,[vr],m,!0))),zr(o,u,u.pendingProps.children,m),u.child;case 29:throw u.pendingProps}throw Error(i(156,u.tag))}function Al(o){o.flags|=4}function Up(o,u,m,y,M){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(M&335544128)===M)if(o.stateNode.complete)o.flags|=8192;else if(Wi())o.flags|=8192;else throw El=Cg,Ap}else o.flags&=-16777217}function n_(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!fk(u))if(Wi())o.flags|=8192;else throw El=Cg,Ap}function hu(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?un():536870912,o.lanes|=u,Pi|=u)}function Ml(o,u){if(!Fn)switch(o.tailMode){case"hidden":u=o.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var y=null;m!==null;)m.alternate!==null&&(y=m),m=m.sibling;y===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function mi(o){var u=o.alternate!==null&&o.alternate.child===o.child,m=0,y=0;if(u)for(var M=o.child;M!==null;)m|=M.lanes|M.childLanes,y|=M.subtreeFlags&65011712,y|=M.flags&65011712,M.return=o,M=M.sibling;else for(M=o.child;M!==null;)m|=M.lanes|M.childLanes,y|=M.subtreeFlags,y|=M.flags,M.return=o,M=M.sibling;return o.subtreeFlags|=y,o.childLanes=m,u}function zp(o,u,m){var y=u.pendingProps;switch(xg(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mi(u),null;case 1:return mi(u),null;case 3:return m=u.stateNode,y=null,o!==null&&(y=o.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),Sl(vr),ye(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(zh(u)?Al(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,wg())),mi(u),null;case 26:var M=u.type,C=u.memoizedState;return o===null?(Al(u),C!==null?(mi(u),n_(u,C)):(mi(u),Up(u,M,null,y,m))):C?C!==o.memoizedState?(Al(u),mi(u),n_(u,C)):(mi(u),u.flags&=-16777217):(o=o.memoizedProps,o!==y&&Al(u),mi(u),Up(u,M,o,y,m)),null;case 27:if(wt(u),m=be.current,M=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==y&&Al(u);else{if(!y){if(u.stateNode===null)throw Error(i(166));return mi(u),null}o=We.current,zh(u)?eS(u):(o=ik(M,y,m),u.stateNode=o,Al(u))}return mi(u),null;case 5:if(wt(u),M=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==y&&Al(u);else{if(!y){if(u.stateNode===null)throw Error(i(166));return mi(u),null}if(C=We.current,zh(u))eS(u);else{var G=KS(be.current);switch(C){case 1:C=G.createElementNS("http://www.w3.org/2000/svg",M);break;case 2:C=G.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;default:switch(M){case"svg":C=G.createElementNS("http://www.w3.org/2000/svg",M);break;case"math":C=G.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;case"script":C=G.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof y.is=="string"?G.createElement("select",{is:y.is}):G.createElement("select"),y.multiple?C.multiple=!0:y.size&&(C.size=y.size);break;default:C=typeof y.is=="string"?G.createElement(M,{is:y.is}):G.createElement(M)}}C[xi]=u,C[zi]=y;e:for(G=u.child;G!==null;){if(G.tag===5||G.tag===6)C.appendChild(G.stateNode);else if(G.tag!==4&&G.tag!==27&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===u)break e;for(;G.sibling===null;){if(G.return===null||G.return===u)break e;G=G.return}G.sibling.return=G.return,G=G.sibling}u.stateNode=C;e:switch(Ha(C,M,y),M){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&Al(u)}}return mi(u),Up(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,m),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==y&&Al(u);else{if(typeof y!="string"&&u.stateNode===null)throw Error(i(166));if(o=be.current,zh(u)){if(o=u.stateNode,m=u.memoizedProps,y=null,M=Ji,M!==null)switch(M.tag){case 27:case 5:y=M.memoizedProps}o[xi]=u,o=!!(o.nodeValue===m||y!==null&&y.suppressHydrationWarning===!0||qL(o.nodeValue,m)),o||_l(u,!0)}else o=KS(o).createTextNode(y),o[xi]=u,u.stateNode=o}return mi(u),null;case 31:if(m=u.memoizedState,o===null||o.memoizedState!==null){if(y=zh(u),m!==null){if(o===null){if(!y)throw Error(i(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[xi]=u}else Qu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;mi(u),o=!1}else m=wg(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=m),o=!0;if(!o)return u.flags&256?(ur(u),u):(ur(u),null);if((u.flags&128)!==0)throw Error(i(558))}return mi(u),null;case 13:if(y=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(M=zh(u),y!==null&&y.dehydrated!==null){if(o===null){if(!M)throw Error(i(318));if(M=u.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(i(317));M[xi]=u}else Qu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;mi(u),M=!1}else M=wg(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=M),M=!0;if(!M)return u.flags&256?(ur(u),u):(ur(u),null)}return ur(u),(u.flags&128)!==0?(u.lanes=m,u):(m=y!==null,o=o!==null&&o.memoizedState!==null,m&&(y=u.child,M=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(M=y.alternate.memoizedState.cachePool.pool),C=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(C=y.memoizedState.cachePool.pool),C!==M&&(y.flags|=2048)),m!==o&&m&&(u.child.flags|=8192),hu(u,u.updateQueue),mi(u),null);case 4:return ye(),o===null&&lC(u.stateNode.containerInfo),mi(u),null;case 10:return Sl(u.type),mi(u),null;case 19:if(de(Bn),y=u.memoizedState,y===null)return mi(u),null;if(M=(u.flags&128)!==0,C=y.rendering,C===null)if(M)Ml(y,!1);else{if(Hi!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(C=ks(o),C!==null){for(u.flags|=128,Ml(y,!1),o=C.updateQueue,u.updateQueue=o,hu(u,o),u.subtreeFlags=0,o=m,m=u.child;m!==null;)Oh(m,o),m=m.sibling;return Me(Bn,Bn.current&1|2),Fn&&vl(u,y.treeForkCount),u.child}o=o.sibling}y.tail!==null&&X()>hr&&(u.flags|=128,M=!0,Ml(y,!1),u.lanes=4194304)}else{if(!M)if(o=ks(C),o!==null){if(u.flags|=128,M=!0,o=o.updateQueue,u.updateQueue=o,hu(u,o),Ml(y,!0),y.tail===null&&y.tailMode==="hidden"&&!C.alternate&&!Fn)return mi(u),null}else 2*X()-y.renderingStartTime>hr&&m!==536870912&&(u.flags|=128,M=!0,Ml(y,!1),u.lanes=4194304);y.isBackwards?(C.sibling=u.child,u.child=C):(o=y.last,o!==null?o.sibling=C:u.child=C,y.last=C)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=X(),o.sibling=null,m=Bn.current,Me(Bn,M?m&1|2:m&1),Fn&&vl(u,y.treeForkCount),o):(mi(u),null);case 22:case 23:return ur(u),Pp(),y=u.memoizedState!==null,o!==null?o.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(m&536870912)!==0&&(u.flags&128)===0&&(mi(u),u.subtreeFlags&6&&(u.flags|=8192)):mi(u),m=u.updateQueue,m!==null&&hu(u,m.retryQueue),m=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048),o!==null&&de(tc),null;case 24:return m=null,o!==null&&(m=o.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),Sl(vr),mi(u),null;case 25:return null;case 30:return null}throw Error(i(156,u.tag))}function go(o,u){switch(xg(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return Sl(vr),ye(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return wt(u),null;case 31:if(u.memoizedState!==null){if(ur(u),u.alternate===null)throw Error(i(340));Qu()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(ur(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(i(340));Qu()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return de(Bn),null;case 4:return ye(),null;case 10:return Sl(u.type),null;case 22:case 23:return ur(u),Pp(),o!==null&&de(tc),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return Sl(vr),null;case 25:return null;default:return null}}function Us(o,u){switch(xg(u),u.tag){case 3:Sl(vr),ye();break;case 26:case 27:case 5:wt(u);break;case 4:ye();break;case 31:u.memoizedState!==null&&ur(u);break;case 13:ur(u);break;case 19:de(Bn);break;case 10:Sl(u.type);break;case 22:case 23:ur(u),Pp(),o!==null&&de(tc);break;case 24:Sl(vr)}}function vo(o,u){try{var m=u.updateQueue,y=m!==null?m.lastEffect:null;if(y!==null){var M=y.next;m=M;do{if((m.tag&o)===o){y=void 0;var C=m.create,G=m.inst;y=C(),G.destroy=y}m=m.next}while(m!==M)}}catch(Z){Qn(u,u.return,Z)}}function Zr(o,u,m){try{var y=u.updateQueue,M=y!==null?y.lastEffect:null;if(M!==null){var C=M.next;y=C;do{if((y.tag&o)===o){var G=y.inst,Z=G.destroy;if(Z!==void 0){G.destroy=void 0,M=u;var ce=m,Pe=Z;try{Pe()}catch(Xe){Qn(M,ce,Xe)}}}y=y.next}while(y!==C)}}catch(Xe){Qn(u,u.return,Xe)}}function Go(o){var u=o.updateQueue;if(u!==null){var m=o.stateNode;try{aS(u,m)}catch(y){Qn(o,o.return,y)}}}function Fr(o,u,m){m.props=sc(o.type,o.memoizedProps),m.state=o.memoizedState;try{m.componentWillUnmount()}catch(y){Qn(o,u,y)}}function du(o,u){try{var m=o.ref;if(m!==null){switch(o.tag){case 26:case 27:case 5:var y=o.stateNode;break;case 30:y=o.stateNode;break;default:y=o.stateNode}typeof m=="function"?o.refCleanup=m(y):m.current=y}}catch(M){Qn(o,u,M)}}function Qr(o,u){var m=o.ref,y=o.refCleanup;if(m!==null)if(typeof y=="function")try{y()}catch(M){Qn(o,u,M)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(M){Qn(o,u,M)}else m.current=null}function Fp(o){var u=o.type,m=o.memoizedProps,y=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":m.autoFocus&&y.focus();break e;case"img":m.src?y.src=m.src:m.srcSet&&(y.srcset=m.srcSet)}}catch(M){Qn(o,o.return,M)}}function Cr(o,u,m){try{var y=o.stateNode;V$(y,o.type,m,u),y[zi]=u}catch(M){Qn(o,o.return,M)}}function ki(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&rd(o.type)||o.tag===4}function Un(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||ki(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&rd(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Cl(o,u,m){var y=o.tag;if(y===5||y===6)o=o.stateNode,u?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(o,u):(u=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,u.appendChild(o),m=m._reactRootContainer,m!=null||u.onclick!==null||(u.onclick=ko));else if(y!==4&&(y===27&&rd(o.type)&&(m=o.stateNode,u=null),o=o.child,o!==null))for(Cl(o,u,m),o=o.sibling;o!==null;)Cl(o,u,m),o=o.sibling}function Fa(o,u,m){var y=o.tag;if(y===5||y===6)o=o.stateNode,u?m.insertBefore(o,u):m.appendChild(o);else if(y!==4&&(y===27&&rd(o.type)&&(m=o.stateNode),o=o.child,o!==null))for(Fa(o,u,m),o=o.sibling;o!==null;)Fa(o,u,m),o=o.sibling}function Qg(o){var u=o.stateNode,m=o.memoizedProps;try{for(var y=o.type,M=u.attributes;M.length;)u.removeAttributeNode(M[0]);Ha(u,y,m),u[xi]=o,u[zi]=m}catch(C){Qn(o,o.return,C)}}var yo=!1,Ei=!1,Wo=!1,$S=typeof WeakSet=="function"?WeakSet:Set,Br=null;function aC(o,u){if(o=o.containerInfo,fC=i1,o=Yx(o),f0(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var y=m.getSelection&&m.getSelection();if(y&&y.rangeCount!==0){m=y.anchorNode;var M=y.anchorOffset,C=y.focusNode;y=y.focusOffset;try{m.nodeType,C.nodeType}catch{m=null;break e}var G=0,Z=-1,ce=-1,Pe=0,Xe=0,it=o,De=null;t:for(;;){for(var je;it!==m||M!==0&&it.nodeType!==3||(Z=G+M),it!==C||y!==0&&it.nodeType!==3||(ce=G+y),it.nodeType===3&&(G+=it.nodeValue.length),(je=it.firstChild)!==null;)De=it,it=je;for(;;){if(it===o)break t;if(De===m&&++Pe===M&&(Z=G),De===C&&++Xe===y&&(ce=G),(je=it.nextSibling)!==null)break;it=De,De=it.parentNode}it=je}m=Z===-1||ce===-1?null:{start:Z,end:ce}}else m=null}m=m||{start:0,end:0}}else m=null;for(hC={focusedElem:o,selectionRange:m},i1=!1,Br=u;Br!==null;)if(u=Br,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,Br=o;else for(;Br!==null;){switch(u=Br,C=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(m=0;m<o.length;m++)M=o[m],M.ref.impl=M.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&C!==null){o=void 0,m=u,M=C.memoizedProps,C=C.memoizedState,y=m.stateNode;try{var jt=sc(m.type,M);o=y.getSnapshotBeforeUpdate(jt,C),y.__reactInternalSnapshotBeforeUpdate=o}catch(ln){Qn(m,m.return,ln)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,m=o.nodeType,m===9)mC(o);else if(m===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":mC(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=u.sibling,o!==null){o.return=u.return,Br=o;break}Br=u.return}}function Ui(o,u,m){var y=m.flags;switch(m.tag){case 0:case 11:case 15:xo(o,m),y&4&&vo(5,m);break;case 1:if(xo(o,m),y&4)if(o=m.stateNode,u===null)try{o.componentDidMount()}catch(G){Qn(m,m.return,G)}else{var M=sc(m.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(M,u,o.__reactInternalSnapshotBeforeUpdate)}catch(G){Qn(m,m.return,G)}}y&64&&Go(m),y&512&&du(m,m.return);break;case 3:if(xo(o,m),y&64&&(o=m.updateQueue,o!==null)){if(u=null,m.child!==null)switch(m.child.tag){case 27:case 5:u=m.child.stateNode;break;case 1:u=m.child.stateNode}try{aS(o,u)}catch(G){Qn(m,m.return,G)}}break;case 27:u===null&&y&4&&Qg(m);case 26:case 5:xo(o,m),u===null&&y&4&&Fp(m),y&512&&du(m,m.return);break;case 12:xo(o,m);break;case 31:xo(o,m),y&4&&oc(o,m);break;case 13:xo(o,m),y&4&&Yh(o,m),y&64&&(o=m.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(m=b.bind(null,m),Y$(o,m))));break;case 22:if(y=m.memoizedState!==null||yo,!y){u=u!==null&&u.memoizedState!==null||Ei,M=yo;var C=Ei;yo=y,(Ei=u)&&!C?Ba(o,m,(m.subtreeFlags&8772)!==0):xo(o,m),yo=M,Ei=C}break;case 30:break;default:xo(o,m)}}function Bp(o){var u=o.alternate;u!==null&&(o.alternate=null,Bp(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&no(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var ui=null,va=!1;function _o(o,u,m){for(m=m.child;m!==null;)Jg(o,u,m),m=m.sibling}function Jg(o,u,m){if(le&&typeof le.onCommitFiberUnmount=="function")try{le.onCommitFiberUnmount(nt,m)}catch{}switch(m.tag){case 26:Ei||Qr(m,u),_o(o,u,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Ei||Qr(m,u);var y=ui,M=va;rd(m.type)&&(ui=m.stateNode,va=!1),_o(o,u,m),u_(m.stateNode),ui=y,va=M;break;case 5:Ei||Qr(m,u);case 6:if(y=ui,M=va,ui=null,_o(o,u,m),ui=y,va=M,ui!==null)if(va)try{(ui.nodeType===9?ui.body:ui.nodeName==="HTML"?ui.ownerDocument.body:ui).removeChild(m.stateNode)}catch(C){Qn(m,u,C)}else try{ui.removeChild(m.stateNode)}catch(C){Qn(m,u,C)}break;case 18:ui!==null&&(va?(o=ui,QL(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,m.stateNode),ov(o)):QL(ui,m.stateNode));break;case 4:y=ui,M=va,ui=m.stateNode.containerInfo,va=!0,_o(o,u,m),ui=y,va=M;break;case 0:case 11:case 14:case 15:Zr(2,m,u),Ei||Zr(4,m,u),_o(o,u,m);break;case 1:Ei||(Qr(m,u),y=m.stateNode,typeof y.componentWillUnmount=="function"&&Fr(m,u,y)),_o(o,u,m);break;case 21:_o(o,u,m);break;case 22:Ei=(y=Ei)||m.memoizedState!==null,_o(o,u,m),Ei=y;break;default:_o(o,u,m)}}function oc(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{ov(o)}catch(m){Qn(u,u.return,m)}}}function Yh(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{ov(o)}catch(m){Qn(u,u.return,m)}}function i_(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new $S),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new $S),u;default:throw Error(i(435,o.tag))}}function pu(o,u){var m=i_(o);u.forEach(function(y){if(!m.has(y)){m.add(y);var M=A.bind(null,o,y);y.then(M,M)}})}function Ir(o,u){var m=u.deletions;if(m!==null)for(var y=0;y<m.length;y++){var M=m[y],C=o,G=u,Z=G;e:for(;Z!==null;){switch(Z.tag){case 27:if(rd(Z.type)){ui=Z.stateNode,va=!1;break e}break;case 5:ui=Z.stateNode,va=!1;break e;case 3:case 4:ui=Z.stateNode.containerInfo,va=!0;break e}Z=Z.return}if(ui===null)throw Error(i(160));Jg(C,G,M),ui=null,va=!1,C=M.alternate,C!==null&&(C.return=null),M.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)lc(u,o),u=u.sibling}var bo=null;function lc(o,u){var m=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Ir(u,o),Pr(o),y&4&&(Zr(3,o,o.return),vo(3,o),Zr(5,o,o.return));break;case 1:Ir(u,o),Pr(o),y&512&&(Ei||m===null||Qr(m,m.return)),y&64&&yo&&(o=o.updateQueue,o!==null&&(y=o.callbacks,y!==null&&(m=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=m===null?y:m.concat(y))));break;case 26:var M=bo;if(Ir(u,o),Pr(o),y&512&&(Ei||m===null||Qr(m,m.return)),y&4){var C=m!==null?m.memoizedState:null;if(y=o.memoizedState,m===null)if(y===null)if(o.stateNode===null){e:{y=o.type,m=o.memoizedProps,M=M.ownerDocument||M;t:switch(y){case"title":C=M.getElementsByTagName("title")[0],(!C||C[ha]||C[xi]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=M.createElement(y),M.head.insertBefore(C,M.querySelector("head > title"))),Ha(C,y,m),C[xi]=o,K(C),y=C;break e;case"link":var G=uk("link","href",M).get(y+(m.href||""));if(G){for(var Z=0;Z<G.length;Z++)if(C=G[Z],C.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&C.getAttribute("rel")===(m.rel==null?null:m.rel)&&C.getAttribute("title")===(m.title==null?null:m.title)&&C.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){G.splice(Z,1);break t}}C=M.createElement(y),Ha(C,y,m),M.head.appendChild(C);break;case"meta":if(G=uk("meta","content",M).get(y+(m.content||""))){for(Z=0;Z<G.length;Z++)if(C=G[Z],C.getAttribute("content")===(m.content==null?null:""+m.content)&&C.getAttribute("name")===(m.name==null?null:m.name)&&C.getAttribute("property")===(m.property==null?null:m.property)&&C.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&C.getAttribute("charset")===(m.charSet==null?null:m.charSet)){G.splice(Z,1);break t}}C=M.createElement(y),Ha(C,y,m),M.head.appendChild(C);break;default:throw Error(i(468,y))}C[xi]=o,K(C),y=C}o.stateNode=y}else ck(M,o.type,o.stateNode);else o.stateNode=lk(M,y,o.memoizedProps);else C!==y?(C===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):C.count--,y===null?ck(M,o.type,o.stateNode):lk(M,y,o.memoizedProps)):y===null&&o.stateNode!==null&&Cr(o,o.memoizedProps,m.memoizedProps)}break;case 27:Ir(u,o),Pr(o),y&512&&(Ei||m===null||Qr(m,m.return)),m!==null&&y&4&&Cr(o,o.memoizedProps,m.memoizedProps);break;case 5:if(Ir(u,o),Pr(o),y&512&&(Ei||m===null||Qr(m,m.return)),o.flags&32){M=o.stateNode;try{di(M,"")}catch(jt){Qn(o,o.return,jt)}}y&4&&o.stateNode!=null&&(M=o.memoizedProps,Cr(o,M,m!==null?m.memoizedProps:M)),y&1024&&(Wo=!0);break;case 6:if(Ir(u,o),Pr(o),y&4){if(o.stateNode===null)throw Error(i(162));y=o.memoizedProps,m=o.stateNode;try{m.nodeValue=y}catch(jt){Qn(o,o.return,jt)}}break;case 3:if(JS=null,M=bo,bo=ZS(u.containerInfo),Ir(u,o),bo=M,Pr(o),y&4&&m!==null&&m.memoizedState.isDehydrated)try{ov(u.containerInfo)}catch(jt){Qn(o,o.return,jt)}Wo&&(Wo=!1,ev(o));break;case 4:y=bo,bo=ZS(o.stateNode.containerInfo),Ir(u,o),Pr(o),bo=y;break;case 12:Ir(u,o),Pr(o);break;case 31:Ir(u,o),Pr(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,pu(o,y)));break;case 13:Ir(u,o),Pr(o),o.child.flags&8192&&o.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(Kh=X()),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,pu(o,y)));break;case 22:M=o.memoizedState!==null;var ce=m!==null&&m.memoizedState!==null,Pe=yo,Xe=Ei;if(yo=Pe||M,Ei=Xe||ce,Ir(u,o),Ei=Xe,yo=Pe,Pr(o),y&8192)e:for(u=o.stateNode,u._visibility=M?u._visibility&-2:u._visibility|1,M&&(m===null||ce||yo||Ei||Il(o)),m=null,u=o;;){if(u.tag===5||u.tag===26){if(m===null){ce=m=u;try{if(C=ce.stateNode,M)G=C.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none";else{Z=ce.stateNode;var it=ce.memoizedProps.style,De=it!=null&&it.hasOwnProperty("display")?it.display:null;Z.style.display=De==null||typeof De=="boolean"?"":(""+De).trim()}}catch(jt){Qn(ce,ce.return,jt)}}}else if(u.tag===6){if(m===null){ce=u;try{ce.stateNode.nodeValue=M?"":ce.memoizedProps}catch(jt){Qn(ce,ce.return,jt)}}}else if(u.tag===18){if(m===null){ce=u;try{var je=ce.stateNode;M?JL(je,!0):JL(ce.stateNode,!1)}catch(jt){Qn(ce,ce.return,jt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;m===u&&(m=null),u=u.return}m===u&&(m=null),u.sibling.return=u.return,u=u.sibling}y&4&&(y=o.updateQueue,y!==null&&(m=y.retryQueue,m!==null&&(y.retryQueue=null,pu(o,m))));break;case 19:Ir(u,o),Pr(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,pu(o,y)));break;case 30:break;case 21:break;default:Ir(u,o),Pr(o)}}function Pr(o){var u=o.flags;if(u&2){try{for(var m,y=o.return;y!==null;){if(ki(y)){m=y;break}y=y.return}if(m==null)throw Error(i(160));switch(m.tag){case 27:var M=m.stateNode,C=Un(o);Fa(o,C,M);break;case 5:var G=m.stateNode;m.flags&32&&(di(G,""),m.flags&=-33);var Z=Un(o);Fa(o,Z,G);break;case 3:case 4:var ce=m.stateNode.containerInfo,Pe=Un(o);Cl(o,Pe,ce);break;default:throw Error(i(161))}}catch(Xe){Qn(o,o.return,Xe)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function ev(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;ev(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function xo(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)Ui(o,u.alternate,u),u=u.sibling}function Il(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:Zr(4,u,u.return),Il(u);break;case 1:Qr(u,u.return);var m=u.stateNode;typeof m.componentWillUnmount=="function"&&Fr(u,u.return,m),Il(u);break;case 27:u_(u.stateNode);case 26:case 5:Qr(u,u.return),Il(u);break;case 22:u.memoizedState===null&&Il(u);break;case 30:Il(u);break;default:Il(u)}o=o.sibling}}function Ba(o,u,m){for(m=m&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,M=o,C=u,G=C.flags;switch(C.tag){case 0:case 11:case 15:Ba(M,C,m),vo(4,C);break;case 1:if(Ba(M,C,m),y=C,M=y.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(Pe){Qn(y,y.return,Pe)}if(y=C,M=y.updateQueue,M!==null){var Z=y.stateNode;try{var ce=M.shared.hiddenCallbacks;if(ce!==null)for(M.shared.hiddenCallbacks=null,M=0;M<ce.length;M++)Hh(ce[M],Z)}catch(Pe){Qn(y,y.return,Pe)}}m&&G&64&&Go(C),du(C,C.return);break;case 27:Qg(C);case 26:case 5:Ba(M,C,m),m&&y===null&&G&4&&Fp(C),du(C,C.return);break;case 12:Ba(M,C,m);break;case 31:Ba(M,C,m),m&&G&4&&oc(M,C);break;case 13:Ba(M,C,m),m&&G&4&&Yh(M,C);break;case 22:C.memoizedState===null&&Ba(M,C,m),du(C,C.return);break;case 30:break;default:Ba(M,C,m)}u=u.sibling}}function uc(o,u){var m=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==m&&(o!=null&&o.refCount++,m!=null&&hf(m))}function Af(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&hf(o))}function Jr(o,u,m,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)r_(o,u,m,y),u=u.sibling}function r_(o,u,m,y){var M=u.flags;switch(u.tag){case 0:case 11:case 15:Jr(o,u,m,y),M&2048&&vo(9,u);break;case 1:Jr(o,u,m,y);break;case 3:Jr(o,u,m,y),M&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&hf(o)));break;case 12:if(M&2048){Jr(o,u,m,y),o=u.stateNode;try{var C=u.memoizedProps,G=C.id,Z=C.onPostCommit;typeof Z=="function"&&Z(G,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(ce){Qn(u,u.return,ce)}}else Jr(o,u,m,y);break;case 31:Jr(o,u,m,y);break;case 13:Jr(o,u,m,y);break;case 23:break;case 22:C=u.stateNode,G=u.alternate,u.memoizedState!==null?C._visibility&2?Jr(o,u,m,y):Pl(o,u):C._visibility&2?Jr(o,u,m,y):(C._visibility|=2,ea(o,u,m,y,(u.subtreeFlags&10256)!==0||!1)),M&2048&&uc(G,u);break;case 24:Jr(o,u,m,y),M&2048&&Af(u.alternate,u);break;default:Jr(o,u,m,y)}}function ea(o,u,m,y,M){for(M=M&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var C=o,G=u,Z=m,ce=y,Pe=G.flags;switch(G.tag){case 0:case 11:case 15:ea(C,G,Z,ce,M),vo(8,G);break;case 23:break;case 22:var Xe=G.stateNode;G.memoizedState!==null?Xe._visibility&2?ea(C,G,Z,ce,M):Pl(C,G):(Xe._visibility|=2,ea(C,G,Z,ce,M)),M&&Pe&2048&&uc(G.alternate,G);break;case 24:ea(C,G,Z,ce,M),M&&Pe&2048&&Af(G.alternate,G);break;default:ea(C,G,Z,ce,M)}u=u.sibling}}function Pl(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var m=o,y=u,M=y.flags;switch(y.tag){case 22:Pl(m,y),M&2048&&uc(y.alternate,y);break;case 24:Pl(m,y),M&2048&&Af(y.alternate,y);break;default:Pl(m,y)}u=u.sibling}}var Mf=8192;function zs(o,u,m){if(o.subtreeFlags&Mf)for(o=o.child;o!==null;)tv(o,u,m),o=o.sibling}function tv(o,u,m){switch(o.tag){case 26:zs(o,u,m),o.flags&Mf&&o.memoizedState!==null&&oX(m,bo,o.memoizedState,o.memoizedProps);break;case 5:zs(o,u,m);break;case 3:case 4:var y=bo;bo=ZS(o.stateNode.containerInfo),zs(o,u,m),bo=y;break;case 22:o.memoizedState===null&&(y=o.alternate,y!==null&&y.memoizedState!==null?(y=Mf,Mf=16777216,zs(o,u,m),Mf=y):zs(o,u,m));break;default:zs(o,u,m)}}function Cf(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function cc(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var m=0;m<u.length;m++){var y=u[m];Br=y,er(y,o)}Cf(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)hs(o),o=o.sibling}function hs(o){switch(o.tag){case 0:case 11:case 15:cc(o),o.flags&2048&&Zr(9,o,o.return);break;case 3:cc(o);break;case 12:cc(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,ds(o)):cc(o);break;default:cc(o)}}function ds(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var m=0;m<u.length;m++){var y=u[m];Br=y,er(y,o)}Cf(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:Zr(8,u,u.return),ds(u);break;case 22:m=u.stateNode,m._visibility&2&&(m._visibility&=-3,ds(u));break;default:ds(u)}o=o.sibling}}function er(o,u){for(;Br!==null;){var m=Br;switch(m.tag){case 0:case 11:case 15:Zr(8,m,u);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var y=m.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:hf(m.memoizedState.cache)}if(y=m.child,y!==null)y.return=m,Br=y;else e:for(m=o;Br!==null;){y=Br;var M=y.sibling,C=y.return;if(Bp(y),y===m){Br=null;break e}if(M!==null){M.return=C,Br=M;break e}Br=C}}}var mu={getCacheForType:function(o){var u=cn(vr),m=u.data.get(o);return m===void 0&&(m=o(),u.data.set(o,m)),m},cacheSignal:function(){return cn(vr).controller.signal}},xn=typeof WeakMap=="function"?WeakMap:Map,Wt=0,dn=null,Cn=null,En=0,jn=0,ya=null,So=!1,qo=!1,a_=!1,Fs=0,Hi=0,Rl=0,fc=0,Vp=0,Va=0,Pi=0,If=null,tr=null,nr=!1,Kh=0,s_=0,hr=1/0,Gi=null,dr=null,ci=0,Bs=null,Zh=null,wo=0,Qh=0,Jh=null,jp=null,hc=0,Pf=null;function Vs(){return(Wt&2)!==0&&En!==0?En&-En:J.T!==null?Be():Yl()}function Dn(){if(Va===0)if((En&536870912)===0||Fn){var o=$e;$e<<=1,($e&3932160)===0&&($e=262144),Va=o}else Va=536870912;return o=ls.current,o!==null&&(o.flags|=32),Va}function In(o,u,m){(o===dn&&(jn===2||jn===9)||o.cancelPendingCommit!==null)&&(pc(o,0),_r(o,En,Va,!1)),oi(o,m),((Wt&2)===0||o!==dn)&&(o===dn&&((Wt&2)===0&&(fc|=m),Hi===4&&_r(o,En,Va,!1)),pt(o))}function Ln(o,u,m){if((Wt&6)!==0)throw Error(i(327));var y=!m&&(u&127)===0&&(u&o.expiredLanes)===0||ot(o,u),M=y?Hp(o,u):ja(o,u,!0),C=y;do{if(M===0){qo&&!y&&_r(o,u,0,!1);break}else{if(m=o.current.alternate,C&&!fi(m)){M=ja(o,u,!1),C=!1;continue}if(M===2){if(C=u,o.errorRecoveryDisabledLanes&C)var G=0;else G=o.pendingLanes&-536870913,G=G!==0?G:G&536870912?536870912:0;if(G!==0){u=G;e:{var Z=o;M=If;var ce=Z.current.memoizedState.isDehydrated;if(ce&&(pc(Z,G).flags|=256),G=ja(Z,G,!1),G!==2){if(a_&&!ce){Z.errorRecoveryDisabledLanes|=C,fc|=C,M=4;break e}C=tr,tr=M,C!==null&&(tr===null?tr=C:tr.push.apply(tr,C))}M=G}if(C=!1,M!==2)continue}}if(M===1){pc(o,0),_r(o,u,0,!0);break}e:{switch(y=o,C=M,C){case 0:case 1:throw Error(i(345));case 4:if((u&4194048)!==u)break;case 6:_r(y,u,Va,!So);break e;case 2:tr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((u&62914560)===u&&(M=Kh+300-X(),10<M)){if(_r(y,u,Va,!So),qe(y,0,!0)!==0)break e;wo=u,y.timeoutHandle=KL(zn.bind(null,y,m,tr,Gi,nr,u,Va,fc,Pi,So,C,"Throttled",-0,0),M);break e}zn(y,m,tr,Gi,nr,u,Va,fc,Pi,So,C,null,-0,0)}}break}while(!0);pt(o)}function zn(o,u,m,y,M,C,G,Z,ce,Pe,Xe,it,De,je){if(o.timeoutHandle=-1,it=u.subtreeFlags,it&8192||(it&16785408)===16785408){it={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ko},tv(u,C,it);var jt=(C&62914560)===C?Kh-X():(C&4194048)===C?s_-X():0;if(jt=lX(it,jt),jt!==null){wo=C,o.cancelPendingCommit=jt(vu.bind(null,o,u,C,m,y,M,G,Z,ce,Xe,it,null,De,je)),_r(o,C,G,!Pe);return}}vu(o,u,C,m,y,M,G,Z,ce)}function fi(o){for(var u=o;;){var m=u.tag;if((m===0||m===11||m===15)&&u.flags&16384&&(m=u.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var y=0;y<m.length;y++){var M=m[y],C=M.getSnapshot;M=M.value;try{if(!La(C(),M))return!1}catch{return!1}}if(m=u.child,u.subtreeFlags&16384&&m!==null)m.return=u,u=m;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function _r(o,u,m,y){u&=~Vp,u&=~fc,o.suspendedLanes|=u,o.pingedLanes&=~u,y&&(o.warmLanes|=u),y=o.expirationTimes;for(var M=u;0<M;){var C=31-ne(M),G=1<<C;y[C]=-1,M&=~G}m!==0&&Xr(o,m,u)}function $o(){return(Wt&6)===0?(Nt(0),!1):!0}function dc(){if(Cn!==null){if(jn===0)var o=Cn.return;else o=Cn,xl=Ju=null,I0(o),vf=null,yf=0,o=Cn;for(;o!==null;)Us(o.alternate,o),o=o.return;Cn=null}}function pc(o,u){var m=o.timeoutHandle;m!==-1&&(o.timeoutHandle=-1,G$(m)),m=o.cancelPendingCommit,m!==null&&(o.cancelPendingCommit=null,m()),wo=0,dc(),dn=o,Cn=m=as(o.current,null),En=u,jn=0,ya=null,So=!1,qo=ot(o,u),a_=!1,Pi=Va=Vp=fc=Rl=Hi=0,tr=If=null,nr=!1,(u&8)!==0&&(u|=u&32);var y=o.entangledLanes;if(y!==0)for(o=o.entanglements,y&=u;0<y;){var M=31-ne(y),C=1<<M;u|=o[M],y&=~C}return Fs=u,Sp(),m}function Nl(o,u){bn=null,J.H=$h,u===df||u===Mn?(u=mf(),jn=3):u===Ap?(u=mf(),jn=4):jn=u===Hg?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ya=u,Cn===null&&(Hi=1,jg(o,Os(u,o.current)))}function Wi(){var o=ls.current;return o===null?!0:(En&4194048)===En?za===null:(En&62914560)===En||(En&536870912)!==0?o===za:!1}function gu(){var o=J.H;return J.H=$h,o===null?$h:o}function mc(){var o=J.A;return J.A=mu,o}function ed(){Hi=4,So||(En&4194048)!==En&&ls.current!==null||(qo=!0),(Rl&134217727)===0&&(fc&134217727)===0||dn===null||_r(dn,En,Va,!1)}function ja(o,u,m){var y=Wt;Wt|=2;var M=gu(),C=mc();(dn!==o||En!==u)&&(Gi=null,pc(o,u)),u=!1;var G=Hi;e:do try{if(jn!==0&&Cn!==null){var Z=Cn,ce=ya;switch(jn){case 8:dc(),G=6;break e;case 3:case 2:case 9:case 6:ls.current===null&&(u=!0);var Pe=jn;if(jn=0,ya=null,Rf(o,Z,ce,Pe),m&&qo){G=0;break e}break;default:Pe=jn,jn=0,ya=null,Rf(o,Z,ce,Pe)}}td(),G=Hi;break}catch(Xe){Nl(o,Xe)}while(!0);return u&&o.shellSuspendCounter++,xl=Ju=null,Wt=y,J.H=M,J.A=C,Cn===null&&(dn=null,En=0,Sp()),G}function td(){for(;Cn!==null;)nv(Cn)}function Hp(o,u){var m=Wt;Wt|=2;var y=gu(),M=mc();dn!==o||En!==u?(Gi=null,hr=X()+500,pc(o,u)):qo=ot(o,u);e:do try{if(jn!==0&&Cn!==null){u=Cn;var C=ya;t:switch(jn){case 1:jn=0,ya=null,Rf(o,u,C,1);break;case 2:case 9:if(os(C)){jn=0,ya=null,Gp(u);break}u=function(){jn!==2&&jn!==9||dn!==o||(jn=7),pt(o)},C.then(u,u);break e;case 3:jn=7;break e;case 4:jn=5;break e;case 7:os(C)?(jn=0,ya=null,Gp(u)):(jn=0,ya=null,Rf(o,u,C,7));break;case 5:var G=null;switch(Cn.tag){case 26:G=Cn.memoizedState;case 5:case 27:var Z=Cn;if(G?fk(G):Z.stateNode.complete){jn=0,ya=null;var ce=Z.sibling;if(ce!==null)Cn=ce;else{var Pe=Z.return;Pe!==null?(Cn=Pe,gc(Pe)):Cn=null}break t}}jn=0,ya=null,Rf(o,u,C,5);break;case 6:jn=0,ya=null,Rf(o,u,C,6);break;case 8:dc(),Hi=6;break e;default:throw Error(i(462))}}ps();break}catch(Xe){Nl(o,Xe)}while(!0);return xl=Ju=null,J.H=y,J.A=M,Wt=m,Cn!==null?0:(dn=null,En=0,Sp(),Hi)}function ps(){for(;Cn!==null&&!dt();)nv(Cn)}function nv(o){var u=Zg(o.alternate,o,Fs);o.memoizedProps=o.pendingProps,u===null?gc(o):Cn=u}function Gp(o){var u=o,m=u.alternate;switch(u.tag){case 15:case 0:u=Lp(m,u,u.pendingProps,u.type,void 0,En);break;case 11:u=Lp(m,u,u.pendingProps,u.type.render,u.ref,En);break;case 5:I0(u);default:Us(m,u),u=Cn=Oh(u,Fs),u=Zg(m,u,Fs)}o.memoizedProps=o.pendingProps,u===null?gc(o):Cn=u}function Rf(o,u,m,y){xl=Ju=null,I0(u),vf=null,yf=0;var M=u.return;try{if(Mr(o,M,u,m,En)){Hi=1,jg(o,Os(m,o.current)),Cn=null;return}}catch(C){if(M!==null)throw Cn=M,C;Hi=1,jg(o,Os(m,o.current)),Cn=null;return}u.flags&32768?(Fn||y===1?o=!0:qo||(En&536870912)!==0?o=!1:(So=o=!0,(y===2||y===9||y===3||y===6)&&(y=ls.current,y!==null&&y.tag===13&&(y.flags|=16384))),Wp(u,o)):gc(u)}function gc(o){var u=o;do{if((u.flags&32768)!==0){Wp(u,So);return}o=u.return;var m=zp(u.alternate,u,Fs);if(m!==null){Cn=m;return}if(u=u.sibling,u!==null){Cn=u;return}Cn=u=o}while(u!==null);Hi===0&&(Hi=5)}function Wp(o,u){do{var m=go(o.alternate,o);if(m!==null){m.flags&=32767,Cn=m;return}if(m=o.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!u&&(o=o.sibling,o!==null)){Cn=o;return}Cn=o=m}while(o!==null);Hi=6,Cn=null}function vu(o,u,m,y,M,C,G,Z,ce){o.cancelPendingCommit=null;do nd();while(ci!==0);if((Wt&6)!==0)throw Error(i(327));if(u!==null){if(u===o.current)throw Error(i(177));if(C=u.lanes|u.childLanes,C|=kr,Oi(o,m,C,G,Z,ce),o===dn&&(Cn=dn=null,En=0),Zh=u,Bs=o,wo=m,Qh=C,Jh=M,jp=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,N(Le,function(){return iv(),null})):(o.callbackNode=null,o.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=J.T,J.T=null,M=ae.p,ae.p=2,G=Wt,Wt|=4;try{aC(o,u,m)}finally{Wt=G,ae.p=M,J.T=y}}ci=1,br(),yu(),Nf()}}function br(){if(ci===1){ci=0;var o=Bs,u=Zh,m=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||m){m=J.T,J.T=null;var y=ae.p;ae.p=2;var M=Wt;Wt|=4;try{lc(u,o);var C=hC,G=Yx(o.containerInfo),Z=C.focusedElem,ce=C.selectionRange;if(G!==Z&&Z&&Z.ownerDocument&&Si(Z.ownerDocument.documentElement,Z)){if(ce!==null&&f0(Z)){var Pe=ce.start,Xe=ce.end;if(Xe===void 0&&(Xe=Pe),"selectionStart"in Z)Z.selectionStart=Pe,Z.selectionEnd=Math.min(Xe,Z.value.length);else{var it=Z.ownerDocument||document,De=it&&it.defaultView||window;if(De.getSelection){var je=De.getSelection(),jt=Z.textContent.length,ln=Math.min(ce.start,jt),Ai=ce.end===void 0?ln:Math.min(ce.end,jt);!je.extend&&ln>Ai&&(G=Ai,Ai=ln,ln=G);var we=Ph(Z,ln),me=Ph(Z,Ai);if(we&&me&&(je.rangeCount!==1||je.anchorNode!==we.node||je.anchorOffset!==we.offset||je.focusNode!==me.node||je.focusOffset!==me.offset)){var Ce=it.createRange();Ce.setStart(we.node,we.offset),je.removeAllRanges(),ln>Ai?(je.addRange(Ce),je.extend(me.node,me.offset)):(Ce.setEnd(me.node,me.offset),je.addRange(Ce))}}}}for(it=[],je=Z;je=je.parentNode;)je.nodeType===1&&it.push({element:je,left:je.scrollLeft,top:je.scrollTop});for(typeof Z.focus=="function"&&Z.focus(),Z=0;Z<it.length;Z++){var Je=it[Z];Je.element.scrollLeft=Je.left,Je.element.scrollTop=Je.top}}i1=!!fC,hC=fC=null}finally{Wt=M,ae.p=y,J.T=m}}o.current=u,ci=2}}function yu(){if(ci===2){ci=0;var o=Bs,u=Zh,m=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||m){m=J.T,J.T=null;var y=ae.p;ae.p=2;var M=Wt;Wt|=4;try{Ui(o,u.alternate,u)}finally{Wt=M,ae.p=y,J.T=m}}ci=3}}function Nf(){if(ci===4||ci===3){ci=0,ee();var o=Bs,u=Zh,m=wo,y=jp;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?ci=5:(ci=0,Zh=Bs=null,Ol(o,o.pendingLanes));var M=o.pendingLanes;if(M===0&&(dr=null),Ia(m),u=u.stateNode,le&&typeof le.onCommitFiberRoot=="function")try{le.onCommitFiberRoot(nt,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=J.T,M=ae.p,ae.p=2,J.T=null;try{for(var C=o.onRecoverableError,G=0;G<y.length;G++){var Z=y[G];C(Z.value,{componentStack:Z.stack})}}finally{J.T=u,ae.p=M}}(wo&3)!==0&&nd(),pt(o),M=o.pendingLanes,(m&261930)!==0&&(M&42)!==0?o===Pf?hc++:(hc=0,Pf=o):hc=0,Nt(0)}}function Ol(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,hf(u)))}function nd(){return br(),yu(),Nf(),iv()}function iv(){if(ci!==5)return!1;var o=Bs,u=Qh;Qh=0;var m=Ia(wo),y=J.T,M=ae.p;try{ae.p=32>m?32:m,J.T=null,m=Jh,Jh=null;var C=Bs,G=wo;if(ci=0,Zh=Bs=null,wo=0,(Wt&6)!==0)throw Error(i(331));var Z=Wt;if(Wt|=4,hs(C.current),r_(C,C.current,G,m),Wt=Z,Nt(0,!1),le&&typeof le.onPostCommitFiberRoot=="function")try{le.onPostCommitFiberRoot(nt,C)}catch{}return!0}finally{ae.p=M,J.T=y,Ol(o,u)}}function o_(o,u,m){u=Os(m,u),u=Z0(o.stateNode,u,2),o=nc(o,u,2),o!==null&&(oi(o,2),pt(o))}function Qn(o,u,m){if(o.tag===3)o_(o,o,m);else for(;u!==null;){if(u.tag===3){o_(u,o,m);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(dr===null||!dr.has(y))){o=Os(m,o),m=Q0(2),y=nc(u,m,2),y!==null&&(jS(m,y,u,o),oi(y,2),pt(y));break}}u=u.return}}function qp(o,u,m){var y=o.pingCache;if(y===null){y=o.pingCache=new xn;var M=new Set;y.set(u,M)}else M=y.get(u),M===void 0&&(M=new Set,y.set(u,M));M.has(m)||(a_=!0,M.add(m),o=h.bind(null,o,u,m),u.then(o,o))}function h(o,u,m){var y=o.pingCache;y!==null&&y.delete(u),o.pingedLanes|=o.suspendedLanes&m,o.warmLanes&=~m,dn===o&&(En&m)===m&&(Hi===4||Hi===3&&(En&62914560)===En&&300>X()-Kh?(Wt&2)===0&&pc(o,0):Vp|=m,Pi===En&&(Pi=0)),pt(o)}function d(o,u){u===0&&(u=un()),o=ka(o,u),o!==null&&(oi(o,u),pt(o))}function b(o){var u=o.memoizedState,m=0;u!==null&&(m=u.retryLane),d(o,m)}function A(o,u){var m=0;switch(o.tag){case 31:case 13:var y=o.stateNode,M=o.memoizedState;M!==null&&(m=M.retryLane);break;case 19:y=o.stateNode;break;case 22:y=o.stateNode._retryCache;break;default:throw Error(i(314))}y!==null&&y.delete(u),d(o,m)}function N(o,u){return ht(o,u)}var U=null,Y=null,fe=!1,Ve=!1,lt=!1,bt=0;function pt(o){o!==Y&&o.next===null&&(Y===null?U=Y=o:Y=Y.next=o),Ve=!0,fe||(fe=!0,Ee())}function Nt(o,u){if(!lt&&Ve){lt=!0;do for(var m=!1,y=U;y!==null;){if(o!==0){var M=y.pendingLanes;if(M===0)var C=0;else{var G=y.suspendedLanes,Z=y.pingedLanes;C=(1<<31-ne(42|o)+1)-1,C&=M&~(G&~Z),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(m=!0,Ne(y,C))}else C=En,C=qe(y,y===dn?C:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(C&3)===0||ot(y,C)||(m=!0,Ne(y,C));y=y.next}while(m);lt=!1}}function yn(){pr()}function pr(){Ve=fe=!1;var o=0;bt!==0&&H$()&&(o=bt);for(var u=X(),m=null,y=U;y!==null;){var M=y.next,C=id(y,u);C===0?(y.next=null,m===null?U=M:m.next=M,M===null&&(Y=m)):(m=y,(o!==0||(C&3)!==0)&&(Ve=!0)),y=M}ci!==0&&ci!==5||Nt(o),bt!==0&&(bt=0)}function id(o,u){for(var m=o.suspendedLanes,y=o.pingedLanes,M=o.expirationTimes,C=o.pendingLanes&-62914561;0<C;){var G=31-ne(C),Z=1<<G,ce=M[G];ce===-1?((Z&m)===0||(Z&y)!==0)&&(M[G]=Ft(Z,u)):ce<=u&&(o.expiredLanes|=Z),C&=~Z}if(u=dn,m=En,m=qe(o,o===u?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y=o.callbackNode,m===0||o===u&&(jn===2||jn===9)||o.cancelPendingCommit!==null)return y!==null&&y!==null&&Lt(y),o.callbackNode=null,o.callbackPriority=0;if((m&3)===0||ot(o,m)){if(u=m&-m,u===o.callbackPriority)return u;switch(y!==null&&Lt(y),Ia(m)){case 2:case 8:m=Ye;break;case 32:m=Le;break;case 268435456:m=gt;break;default:m=Le}return y=vc.bind(null,o),m=ht(m,y),o.callbackPriority=u,o.callbackNode=m,u}return y!==null&&y!==null&&Lt(y),o.callbackPriority=2,o.callbackNode=null,2}function vc(o,u){if(ci!==0&&ci!==5)return o.callbackNode=null,o.callbackPriority=0,null;var m=o.callbackNode;if(nd()&&o.callbackNode!==m)return null;var y=En;return y=qe(o,o===dn?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y===0?null:(Ln(o,y,u),id(o,X()),o.callbackNode!=null&&o.callbackNode===m?vc.bind(null,o):null)}function Ne(o,u){if(nd())return null;Ln(o,u,!0)}function Ee(){W$(function(){(Wt&6)!==0?ht(Ue,yn):pr()})}function Be(){if(bt===0){var o=ou;o===0&&(o=Qe,Qe<<=1,(Qe&261888)===0&&(Qe=256)),bt=o}return bt}function _t(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:tf(""+o)}function Jt(o,u){var m=u.ownerDocument.createElement("input");return m.name=u.name,m.value=u.value,o.id&&m.setAttribute("form",o.id),u.parentNode.insertBefore(m,u),o=new FormData(o),m.parentNode.removeChild(m),o}function qi(o,u,m,y,M){if(u==="submit"&&m&&m.stateNode===M){var C=_t((M[zi]||null).action),G=y.submitter;G&&(u=(u=G[zi]||null)?_t(u.formAction):G.getAttribute("formAction"),u!==null&&(C=u,G=null));var Z=new Fo("action","action",null,y,M);o.push({event:Z,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(bt!==0){var ce=G?Jt(M,G):new FormData(M);H0(m,{pending:!0,data:ce,method:M.method,action:C},null,ce)}}else typeof C=="function"&&(Z.preventDefault(),ce=G?Jt(M,G):new FormData(M),H0(m,{pending:!0,data:ce,method:M.method,action:C},C,ce))},currentTarget:M}]})}}for(var rn=0;rn<bp.length;rn++){var Gn=bp[rn],Vr=Gn.toLowerCase(),Jn=Gn[0].toUpperCase()+Gn.slice(1);lo(Vr,"on"+Jn)}lo(gg,"onAnimationEnd"),lo(_p,"onAnimationIteration"),lo(d0,"onAnimationStart"),lo("dblclick","onDoubleClick"),lo("focusin","onFocus"),lo("focusout","onBlur"),lo(Zx,"onTransitionRun"),lo(ZM,"onTransitionStart"),lo(Qx,"onTransitionCancel"),lo(p0,"onTransitionEnd"),xe("onMouseEnter",["mouseout","mouseover"]),xe("onMouseLeave",["mouseout","mouseover"]),xe("onPointerEnter",["pointerout","pointerover"]),xe("onPointerLeave",["pointerout","pointerover"]),Ie("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ie("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ie("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ie("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ie("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ie("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Eo));function jL(o,u){u=(u&4)!==0;for(var m=0;m<o.length;m++){var y=o[m],M=y.event;y=y.listeners;e:{var C=void 0;if(u)for(var G=y.length-1;0<=G;G--){var Z=y[G],ce=Z.instance,Pe=Z.currentTarget;if(Z=Z.listener,ce!==C&&M.isPropagationStopped())break e;C=Z,M.currentTarget=Pe;try{C(M)}catch(Xe){xp(Xe)}M.currentTarget=null,C=ce}else for(G=0;G<y.length;G++){if(Z=y[G],ce=Z.instance,Pe=Z.currentTarget,Z=Z.listener,ce!==C&&M.isPropagationStopped())break e;C=Z,M.currentTarget=Pe;try{C(M)}catch(Xe){xp(Xe)}M.currentTarget=null,C=ce}}}}function Hn(o,u){var m=u[fa];m===void 0&&(m=u[fa]=new Set);var y=o+"__bubble";m.has(y)||(HL(u,o,2,!1),m.add(y))}function oC(o,u,m){var y=0;u&&(y|=4),HL(m,o,y,u)}var XS="_reactListening"+Math.random().toString(36).slice(2);function lC(o){if(!o[XS]){o[XS]=!0,ve.forEach(function(m){m!=="selectionchange"&&(sC.has(m)||oC(m,!1,o),oC(m,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[XS]||(u[XS]=!0,oC("selectionchange",!1,u))}}function HL(o,u,m,y){switch(yk(u)){case 2:var M=fX;break;case 8:M=hX;break;default:M=wC}m=M.bind(null,u,m,o),M=void 0,!rf||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(M=!0),y?M!==void 0?o.addEventListener(u,m,{capture:!0,passive:M}):o.addEventListener(u,m,!0):M!==void 0?o.addEventListener(u,m,{passive:M}):o.addEventListener(u,m,!1)}function uC(o,u,m,y,M){var C=y;if((u&1)===0&&(u&2)===0&&y!==null)e:for(;;){if(y===null)return;var G=y.tag;if(G===3||G===4){var Z=y.stateNode.containerInfo;if(Z===M)break;if(G===4)for(G=y.return;G!==null;){var ce=G.tag;if((ce===3||ce===4)&&G.stateNode.containerInfo===M)return;G=G.return}for(;Z!==null;){if(G=Is(Z),G===null)return;if(ce=G.tag,ce===5||ce===6||ce===26||ce===27){y=C=G;continue e}Z=Z.parentNode}}y=y.return}Ql(function(){var Pe=C,Xe=Rs(m),it=[];e:{var De=oo.get(o);if(De!==void 0){var je=Fo,jt=o;switch(o){case"keypress":if(Vu(m)===0)break e;case"keydown":case"keyup":je=fl;break;case"focusin":jt="focus",je=Gu;break;case"focusout":jt="blur",je=Gu;break;case"beforeblur":case"afterblur":je=Gu;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=wh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=fp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=V;break;case gg:case _p:case d0:je=dg;break;case p0:je=te;break;case"scroll":case"scrollend":je=Sh;break;case"wheel":je=Fe;break;case"copy":case"cut":case"paste":je=hp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=hl;break;case"toggle":case"beforetoggle":je=vn}var ln=(u&4)!==0,Ai=!ln&&(o==="scroll"||o==="scrollend"),we=ln?De!==null?De+"Capture":null:De;ln=[];for(var me=Pe,Ce;me!==null;){var Je=me;if(Ce=Je.stateNode,Je=Je.tag,Je!==5&&Je!==26&&Je!==27||Ce===null||we===null||(Je=ro(me,we),Je!=null&&ln.push(l_(me,Je,Ce))),Ai)break;me=me.return}0<ln.length&&(De=new je(De,jt,null,m,Xe),it.push({event:De,listeners:ln}))}}if((u&7)===0){e:{if(De=o==="mouseover"||o==="pointerover",je=o==="mouseout"||o==="pointerout",De&&m!==bh&&(jt=m.relatedTarget||m.fromElement)&&(Is(jt)||jt[Yr]))break e;if((je||De)&&(De=Xe.window===Xe?Xe:(De=Xe.ownerDocument)?De.defaultView||De.parentWindow:window,je?(jt=m.relatedTarget||m.toElement,je=Pe,jt=jt?Is(jt):null,jt!==null&&(Ai=a(jt),ln=jt.tag,jt!==Ai||ln!==5&&ln!==27&&ln!==6)&&(jt=null)):(je=null,jt=Pe),je!==jt)){if(ln=wh,Je="onMouseLeave",we="onMouseEnter",me="mouse",(o==="pointerout"||o==="pointerover")&&(ln=hl,Je="onPointerLeave",we="onPointerEnter",me="pointer"),Ai=je==null?De:da(je),Ce=jt==null?De:da(jt),De=new ln(Je,me+"leave",je,m,Xe),De.target=Ai,De.relatedTarget=Ce,Je=null,Is(Xe)===Pe&&(ln=new ln(we,me+"enter",jt,m,Xe),ln.target=Ce,ln.relatedTarget=Ai,Je=ln),Ai=Je,je&&jt)t:{for(ln=z$,we=je,me=jt,Ce=0,Je=we;Je;Je=ln(Je))Ce++;Je=0;for(var Qt=me;Qt;Qt=ln(Qt))Je++;for(;0<Ce-Je;)we=ln(we),Ce--;for(;0<Je-Ce;)me=ln(me),Je--;for(;Ce--;){if(we===me||me!==null&&we===me.alternate){ln=we;break t}we=ln(we),me=ln(me)}ln=null}else ln=null;je!==null&&GL(it,De,je,ln,!1),jt!==null&&Ai!==null&&GL(it,Ai,jt,ln,!0)}}e:{if(De=Pe?da(Pe):window,je=De.nodeName&&De.nodeName.toLowerCase(),je==="select"||je==="input"&&De.type==="file")var ri=s0;else if(a0(De))if(dl)ri=Xx;else{ri=u0;var Gt=qx}else je=De.nodeName,!je||je.toLowerCase()!=="input"||De.type!=="checkbox"&&De.type!=="radio"?Pe&&Na(Pe.elementType)&&(ri=s0):ri=$x;if(ri&&(ri=ri(o,Pe))){pg(it,ri,m,Xe);break e}Gt&&Gt(o,De,Pe),o==="focusout"&&Pe&&De.type==="number"&&Pe.memoizedProps.value!=null&&yi(De,"number",De.value)}switch(Gt=Pe?da(Pe):window,o){case"focusin":(a0(Gt)||Gt.contentEditable==="true")&&(pl=Gt,ml=Pe,Rh=null);break;case"focusout":Rh=ml=pl=null;break;case"mousedown":mg=!0;break;case"contextmenu":case"mouseup":case"dragend":mg=!1,Nh(it,m,Xe);break;case"selectionchange":if(Kx)break;case"keydown":case"keyup":Nh(it,m,Xe)}var Nn;if(Vn)e:{switch(o){case"compositionstart":var Wn="onCompositionStart";break e;case"compositionend":Wn="onCompositionEnd";break e;case"compositionupdate":Wn="onCompositionUpdate";break e}Wn=void 0}else uf?tu(o,m)&&(Wn="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(Wn="onCompositionStart");Wn&&(Vo&&m.locale!=="ko"&&(uf||Wn!=="onCompositionStart"?Wn==="onCompositionEnd"&&uf&&(Nn=Bu()):(Oa=Xe,xh="value"in Oa?Oa.value:Oa.textContent,uf=!0)),Gt=YS(Pe,Wn),0<Gt.length&&(Wn=new ao(Wn,o,null,m,Xe),it.push({event:Wn,listeners:Gt}),Nn?Wn.data=Nn:(Nn=lf(m),Nn!==null&&(Wn.data=Nn)))),(Nn=Da?Gx(o,m):i0(o,m))&&(Wn=YS(Pe,"onBeforeInput"),0<Wn.length&&(Gt=new ao("onBeforeInput","beforeinput",null,m,Xe),it.push({event:Gt,listeners:Wn}),Gt.data=Nn)),qi(it,o,Pe,m,Xe)}jL(it,u)})}function l_(o,u,m){return{instance:o,listener:u,currentTarget:m}}function YS(o,u){for(var m=u+"Capture",y=[];o!==null;){var M=o,C=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||C===null||(M=ro(o,m),M!=null&&y.unshift(l_(o,M,C)),M=ro(o,u),M!=null&&y.push(l_(o,M,C))),o.tag===3)return y;o=o.return}return[]}function z$(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function GL(o,u,m,y,M){for(var C=u._reactName,G=[];m!==null&&m!==y;){var Z=m,ce=Z.alternate,Pe=Z.stateNode;if(Z=Z.tag,ce!==null&&ce===y)break;Z!==5&&Z!==26&&Z!==27||Pe===null||(ce=Pe,M?(Pe=ro(m,C),Pe!=null&&G.unshift(l_(m,Pe,ce))):M||(Pe=ro(m,C),Pe!=null&&G.push(l_(m,Pe,ce)))),m=m.return}G.length!==0&&o.push({event:u,listeners:G})}var F$=/\r\n?/g,B$=/\u0000|\uFFFD/g;function WL(o){return(typeof o=="string"?o:""+o).replace(F$,`
`).replace(B$,"")}function qL(o,u){return u=WL(u),WL(o)===u}function Ti(o,u,m,y,M,C){switch(m){case"children":typeof y=="string"?u==="body"||u==="textarea"&&y===""||di(o,y):(typeof y=="number"||typeof y=="bigint")&&u!=="body"&&di(o,""+y);break;case"className":Vt(o,"class",y);break;case"tabIndex":Vt(o,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Vt(o,m,y);break;case"style":sl(o,y,C);break;case"data":if(u!=="object"){Vt(o,"data",y);break}case"src":case"href":if(y===""&&(u!=="a"||m!=="href")){o.removeAttribute(m);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(m);break}y=tf(""+y),o.setAttribute(m,y);break;case"action":case"formAction":if(typeof y=="function"){o.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(m==="formAction"?(u!=="input"&&Ti(o,u,"name",M.name,M,null),Ti(o,u,"formEncType",M.formEncType,M,null),Ti(o,u,"formMethod",M.formMethod,M,null),Ti(o,u,"formTarget",M.formTarget,M,null)):(Ti(o,u,"encType",M.encType,M,null),Ti(o,u,"method",M.method,M,null),Ti(o,u,"target",M.target,M,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(m);break}y=tf(""+y),o.setAttribute(m,y);break;case"onClick":y!=null&&(o.onclick=ko);break;case"onScroll":y!=null&&Hn("scroll",o);break;case"onScrollEnd":y!=null&&Hn("scrollend",o);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(m=y.__html,m!=null){if(M.children!=null)throw Error(i(60));o.innerHTML=m}}break;case"multiple":o.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":o.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){o.removeAttribute("xlink:href");break}m=tf(""+y),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(m,""+y):o.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(m,""):o.removeAttribute(m);break;case"capture":case"download":y===!0?o.setAttribute(m,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(m,y):o.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?o.setAttribute(m,y):o.removeAttribute(m);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?o.removeAttribute(m):o.setAttribute(m,y);break;case"popover":Hn("beforetoggle",o),Hn("toggle",o),kt(o,"popover",y);break;case"xlinkActuate":Pt(o,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":Pt(o,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":Pt(o,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":Pt(o,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":Pt(o,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":Pt(o,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":Pt(o,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":Pt(o,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":Pt(o,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":kt(o,"is",y);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=cp.get(m)||m,kt(o,m,y))}}function cC(o,u,m,y,M,C){switch(m){case"style":sl(o,y,C);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(m=y.__html,m!=null){if(M.children!=null)throw Error(i(60));o.innerHTML=m}}break;case"children":typeof y=="string"?di(o,y):(typeof y=="number"||typeof y=="bigint")&&di(o,""+y);break;case"onScroll":y!=null&&Hn("scroll",o);break;case"onScrollEnd":y!=null&&Hn("scrollend",o);break;case"onClick":y!=null&&(o.onclick=ko);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ke.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(M=m.endsWith("Capture"),u=m.slice(2,M?m.length-7:void 0),C=o[zi]||null,C=C!=null?C[m]:null,typeof C=="function"&&o.removeEventListener(u,C,M),typeof y=="function")){typeof C!="function"&&C!==null&&(m in o?o[m]=null:o.hasAttribute(m)&&o.removeAttribute(m)),o.addEventListener(u,y,M);break e}m in o?o[m]=y:y===!0?o.setAttribute(m,""):kt(o,m,y)}}}function Ha(o,u,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Hn("error",o),Hn("load",o);var y=!1,M=!1,C;for(C in m)if(m.hasOwnProperty(C)){var G=m[C];if(G!=null)switch(C){case"src":y=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:Ti(o,u,C,G,m,null)}}M&&Ti(o,u,"srcSet",m.srcSet,m,null),y&&Ti(o,u,"src",m.src,m,null);return;case"input":Hn("invalid",o);var Z=C=G=M=null,ce=null,Pe=null;for(y in m)if(m.hasOwnProperty(y)){var Xe=m[y];if(Xe!=null)switch(y){case"name":M=Xe;break;case"type":G=Xe;break;case"checked":ce=Xe;break;case"defaultChecked":Pe=Xe;break;case"value":C=Xe;break;case"defaultValue":Z=Xe;break;case"children":case"dangerouslySetInnerHTML":if(Xe!=null)throw Error(i(137,u));break;default:Ti(o,u,y,Xe,m,null)}}Ps(o,C,Z,ce,Pe,G,M,!1);return;case"select":Hn("invalid",o),y=G=C=null;for(M in m)if(m.hasOwnProperty(M)&&(Z=m[M],Z!=null))switch(M){case"value":C=Z;break;case"defaultValue":G=Z;break;case"multiple":y=Z;default:Ti(o,u,M,Z,m,null)}u=C,m=G,o.multiple=!!y,u!=null?Kr(o,!!y,u,!1):m!=null&&Kr(o,!!y,m,!0);return;case"textarea":Hn("invalid",o),C=M=y=null;for(G in m)if(m.hasOwnProperty(G)&&(Z=m[G],Z!=null))switch(G){case"value":y=Z;break;case"defaultValue":M=Z;break;case"children":C=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(91));break;default:Ti(o,u,G,Z,m,null)}Ci(o,y,M,C);return;case"option":for(ce in m)if(m.hasOwnProperty(ce)&&(y=m[ce],y!=null))switch(ce){case"selected":o.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Ti(o,u,ce,y,m,null)}return;case"dialog":Hn("beforetoggle",o),Hn("toggle",o),Hn("cancel",o),Hn("close",o);break;case"iframe":case"object":Hn("load",o);break;case"video":case"audio":for(y=0;y<Eo.length;y++)Hn(Eo[y],o);break;case"image":Hn("error",o),Hn("load",o);break;case"details":Hn("toggle",o);break;case"embed":case"source":case"link":Hn("error",o),Hn("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Pe in m)if(m.hasOwnProperty(Pe)&&(y=m[Pe],y!=null))switch(Pe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:Ti(o,u,Pe,y,m,null)}return;default:if(Na(u)){for(Xe in m)m.hasOwnProperty(Xe)&&(y=m[Xe],y!==void 0&&cC(o,u,Xe,y,m,void 0));return}}for(Z in m)m.hasOwnProperty(Z)&&(y=m[Z],y!=null&&Ti(o,u,Z,y,m,null))}function V$(o,u,m,y){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,C=null,G=null,Z=null,ce=null,Pe=null,Xe=null;for(je in m){var it=m[je];if(m.hasOwnProperty(je)&&it!=null)switch(je){case"checked":break;case"value":break;case"defaultValue":ce=it;default:y.hasOwnProperty(je)||Ti(o,u,je,null,y,it)}}for(var De in y){var je=y[De];if(it=m[De],y.hasOwnProperty(De)&&(je!=null||it!=null))switch(De){case"type":C=je;break;case"name":M=je;break;case"checked":Pe=je;break;case"defaultChecked":Xe=je;break;case"value":G=je;break;case"defaultValue":Z=je;break;case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(i(137,u));break;default:je!==it&&Ti(o,u,De,je,y,it)}}Fi(o,G,Z,ce,Pe,Xe,C,M);return;case"select":je=G=Z=De=null;for(C in m)if(ce=m[C],m.hasOwnProperty(C)&&ce!=null)switch(C){case"value":break;case"multiple":je=ce;default:y.hasOwnProperty(C)||Ti(o,u,C,null,y,ce)}for(M in y)if(C=y[M],ce=m[M],y.hasOwnProperty(M)&&(C!=null||ce!=null))switch(M){case"value":De=C;break;case"defaultValue":Z=C;break;case"multiple":G=C;default:C!==ce&&Ti(o,u,M,C,y,ce)}u=Z,m=G,y=je,De!=null?Kr(o,!!m,De,!1):!!y!=!!m&&(u!=null?Kr(o,!!m,u,!0):Kr(o,!!m,m?[]:"",!1));return;case"textarea":je=De=null;for(Z in m)if(M=m[Z],m.hasOwnProperty(Z)&&M!=null&&!y.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:Ti(o,u,Z,null,y,M)}for(G in y)if(M=y[G],C=m[G],y.hasOwnProperty(G)&&(M!=null||C!=null))switch(G){case"value":De=M;break;case"defaultValue":je=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:M!==C&&Ti(o,u,G,M,y,C)}Zn(o,De,je);return;case"option":for(var jt in m)if(De=m[jt],m.hasOwnProperty(jt)&&De!=null&&!y.hasOwnProperty(jt))switch(jt){case"selected":o.selected=!1;break;default:Ti(o,u,jt,null,y,De)}for(ce in y)if(De=y[ce],je=m[ce],y.hasOwnProperty(ce)&&De!==je&&(De!=null||je!=null))switch(ce){case"selected":o.selected=De&&typeof De!="function"&&typeof De!="symbol";break;default:Ti(o,u,ce,De,y,je)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ln in m)De=m[ln],m.hasOwnProperty(ln)&&De!=null&&!y.hasOwnProperty(ln)&&Ti(o,u,ln,null,y,De);for(Pe in y)if(De=y[Pe],je=m[Pe],y.hasOwnProperty(Pe)&&De!==je&&(De!=null||je!=null))switch(Pe){case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(i(137,u));break;default:Ti(o,u,Pe,De,y,je)}return;default:if(Na(u)){for(var Ai in m)De=m[Ai],m.hasOwnProperty(Ai)&&De!==void 0&&!y.hasOwnProperty(Ai)&&cC(o,u,Ai,void 0,y,De);for(Xe in y)De=y[Xe],je=m[Xe],!y.hasOwnProperty(Xe)||De===je||De===void 0&&je===void 0||cC(o,u,Xe,De,y,je);return}}for(var we in m)De=m[we],m.hasOwnProperty(we)&&De!=null&&!y.hasOwnProperty(we)&&Ti(o,u,we,null,y,De);for(it in y)De=y[it],je=m[it],!y.hasOwnProperty(it)||De===je||De==null&&je==null||Ti(o,u,it,De,y,je)}function $L(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function j$(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,m=performance.getEntriesByType("resource"),y=0;y<m.length;y++){var M=m[y],C=M.transferSize,G=M.initiatorType,Z=M.duration;if(C&&Z&&$L(G)){for(G=0,Z=M.responseEnd,y+=1;y<m.length;y++){var ce=m[y],Pe=ce.startTime;if(Pe>Z)break;var Xe=ce.transferSize,it=ce.initiatorType;Xe&&$L(it)&&(ce=ce.responseEnd,G+=Xe*(ce<Z?1:(Z-Pe)/(ce-Pe)))}if(--y,u+=8*(C+G)/(M.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var fC=null,hC=null;function KS(o){return o.nodeType===9?o:o.ownerDocument}function XL(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function YL(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function dC(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var pC=null;function H$(){var o=window.event;return o&&o.type==="popstate"?o===pC?!1:(pC=o,!0):(pC=null,!1)}var KL=typeof setTimeout=="function"?setTimeout:void 0,G$=typeof clearTimeout=="function"?clearTimeout:void 0,ZL=typeof Promise=="function"?Promise:void 0,W$=typeof queueMicrotask=="function"?queueMicrotask:typeof ZL<"u"?function(o){return ZL.resolve(null).then(o).catch(q$)}:KL;function q$(o){setTimeout(function(){throw o})}function rd(o){return o==="head"}function QL(o,u){var m=u,y=0;do{var M=m.nextSibling;if(o.removeChild(m),M&&M.nodeType===8)if(m=M.data,m==="/$"||m==="/&"){if(y===0){o.removeChild(M),ov(u);return}y--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")y++;else if(m==="html")u_(o.ownerDocument.documentElement);else if(m==="head"){m=o.ownerDocument.head,u_(m);for(var C=m.firstChild;C;){var G=C.nextSibling,Z=C.nodeName;C[ha]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&C.rel.toLowerCase()==="stylesheet"||m.removeChild(C),C=G}}else m==="body"&&u_(o.ownerDocument.body);m=M}while(m);ov(u)}function JL(o,u){var m=o;o=0;do{var y=m.nextSibling;if(m.nodeType===1?u?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(u?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),y&&y.nodeType===8)if(m=y.data,m==="/$"){if(o===0)break;o--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||o++;m=y}while(m)}function mC(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var m=u;switch(u=u.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":mC(m),no(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}o.removeChild(m)}}function $$(o,u,m,y){for(;o.nodeType===1;){var M=m;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!y&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(y){if(!o[ha])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(C=o.getAttribute("rel"),C==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(C!==M.rel||o.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||o.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||o.getAttribute("title")!==(M.title==null?null:M.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(C=o.getAttribute("src"),(C!==(M.src==null?null:M.src)||o.getAttribute("type")!==(M.type==null?null:M.type)||o.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&C&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var C=M.name==null?null:""+M.name;if(M.type==="hidden"&&o.getAttribute("name")===C)return o}else return o;if(o=Dl(o.nextSibling),o===null)break}return null}function X$(o,u,m){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!m||(o=Dl(o.nextSibling),o===null))return null;return o}function ek(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=Dl(o.nextSibling),o===null))return null;return o}function gC(o){return o.data==="$?"||o.data==="$~"}function vC(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function Y$(o,u){var m=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||m.readyState!=="loading")u();else{var y=function(){u(),m.removeEventListener("DOMContentLoaded",y)};m.addEventListener("DOMContentLoaded",y),o._reactRetry=y}}function Dl(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var yC=null;function tk(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var m=o.data;if(m==="/$"||m==="/&"){if(u===0)return Dl(o.nextSibling);u--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||u++}o=o.nextSibling}return null}function nk(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(u===0)return o;u--}else m!=="/$"&&m!=="/&"||u++}o=o.previousSibling}return null}function ik(o,u,m){switch(u=KS(m),o){case"html":if(o=u.documentElement,!o)throw Error(i(452));return o;case"head":if(o=u.head,!o)throw Error(i(453));return o;case"body":if(o=u.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function u_(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);no(o)}var Ll=new Map,rk=new Set;function ZS(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Of=ae.d;ae.d={f:K$,r:Z$,D:Q$,C:J$,L:eX,m:tX,X:iX,S:nX,M:rX};function K$(){var o=Of.f(),u=$o();return o||u}function Z$(o){var u=Ra(o);u!==null&&u.tag===5&&u.type==="form"?OS(u):Of.r(o)}var rv=typeof document>"u"?null:document;function ak(o,u,m){var y=rv;if(y&&typeof u=="string"&&u){var M=tn(u);M='link[rel="'+o+'"][href="'+M+'"]',typeof m=="string"&&(M+='[crossorigin="'+m+'"]'),rk.has(M)||(rk.add(M),o={rel:o,crossOrigin:m,href:u},y.querySelector(M)===null&&(u=y.createElement("link"),Ha(u,"link",o),K(u),y.head.appendChild(u)))}}function Q$(o){Of.D(o),ak("dns-prefetch",o,null)}function J$(o,u){Of.C(o,u),ak("preconnect",o,u)}function eX(o,u,m){Of.L(o,u,m);var y=rv;if(y&&o&&u){var M='link[rel="preload"][as="'+tn(u)+'"]';u==="image"&&m&&m.imageSrcSet?(M+='[imagesrcset="'+tn(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(M+='[imagesizes="'+tn(m.imageSizes)+'"]')):M+='[href="'+tn(o)+'"]';var C=M;switch(u){case"style":C=av(o);break;case"script":C=sv(o)}Ll.has(C)||(o=g({rel:"preload",href:u==="image"&&m&&m.imageSrcSet?void 0:o,as:u},m),Ll.set(C,o),y.querySelector(M)!==null||u==="style"&&y.querySelector(c_(C))||u==="script"&&y.querySelector(f_(C))||(u=y.createElement("link"),Ha(u,"link",o),K(u),y.head.appendChild(u)))}}function tX(o,u){Of.m(o,u);var m=rv;if(m&&o){var y=u&&typeof u.as=="string"?u.as:"script",M='link[rel="modulepreload"][as="'+tn(y)+'"][href="'+tn(o)+'"]',C=M;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=sv(o)}if(!Ll.has(C)&&(o=g({rel:"modulepreload",href:o},u),Ll.set(C,o),m.querySelector(M)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(f_(C)))return}y=m.createElement("link"),Ha(y,"link",o),K(y),m.head.appendChild(y)}}}function nX(o,u,m){Of.S(o,u,m);var y=rv;if(y&&o){var M=is(y).hoistableStyles,C=av(o);u=u||"default";var G=M.get(C);if(!G){var Z={loading:0,preload:null};if(G=y.querySelector(c_(C)))Z.loading=5;else{o=g({rel:"stylesheet",href:o,"data-precedence":u},m),(m=Ll.get(C))&&_C(o,m);var ce=G=y.createElement("link");K(ce),Ha(ce,"link",o),ce._p=new Promise(function(Pe,Xe){ce.onload=Pe,ce.onerror=Xe}),ce.addEventListener("load",function(){Z.loading|=1}),ce.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,QS(G,u,y)}G={type:"stylesheet",instance:G,count:1,state:Z},M.set(C,G)}}}function iX(o,u){Of.X(o,u);var m=rv;if(m&&o){var y=is(m).hoistableScripts,M=sv(o),C=y.get(M);C||(C=m.querySelector(f_(M)),C||(o=g({src:o,async:!0},u),(u=Ll.get(M))&&bC(o,u),C=m.createElement("script"),K(C),Ha(C,"link",o),m.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},y.set(M,C))}}function rX(o,u){Of.M(o,u);var m=rv;if(m&&o){var y=is(m).hoistableScripts,M=sv(o),C=y.get(M);C||(C=m.querySelector(f_(M)),C||(o=g({src:o,async:!0,type:"module"},u),(u=Ll.get(M))&&bC(o,u),C=m.createElement("script"),K(C),Ha(C,"link",o),m.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},y.set(M,C))}}function sk(o,u,m,y){var M=(M=be.current)?ZS(M):null;if(!M)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(u=av(m.href),m=is(M).hoistableStyles,y=m.get(u),y||(y={type:"style",instance:null,count:0,state:null},m.set(u,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){o=av(m.href);var C=is(M).hoistableStyles,G=C.get(o);if(G||(M=M.ownerDocument||M,G={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(o,G),(C=M.querySelector(c_(o)))&&!C._p&&(G.instance=C,G.state.loading=5),Ll.has(o)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Ll.set(o,m),C||aX(M,o,m,G.state))),u&&y===null)throw Error(i(528,""));return G}if(u&&y!==null)throw Error(i(529,""));return null;case"script":return u=m.async,m=m.src,typeof m=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=sv(m),m=is(M).hoistableScripts,y=m.get(u),y||(y={type:"script",instance:null,count:0,state:null},m.set(u,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function av(o){return'href="'+tn(o)+'"'}function c_(o){return'link[rel="stylesheet"]['+o+"]"}function ok(o){return g({},o,{"data-precedence":o.precedence,precedence:null})}function aX(o,u,m,y){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?y.loading=1:(u=o.createElement("link"),y.preload=u,u.addEventListener("load",function(){return y.loading|=1}),u.addEventListener("error",function(){return y.loading|=2}),Ha(u,"link",m),K(u),o.head.appendChild(u))}function sv(o){return'[src="'+tn(o)+'"]'}function f_(o){return"script[async]"+o}function lk(o,u,m){if(u.count++,u.instance===null)switch(u.type){case"style":var y=o.querySelector('style[data-href~="'+tn(m.href)+'"]');if(y)return u.instance=y,K(y),y;var M=g({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return y=(o.ownerDocument||o).createElement("style"),K(y),Ha(y,"style",M),QS(y,m.precedence,o),u.instance=y;case"stylesheet":M=av(m.href);var C=o.querySelector(c_(M));if(C)return u.state.loading|=4,u.instance=C,K(C),C;y=ok(m),(M=Ll.get(M))&&_C(y,M),C=(o.ownerDocument||o).createElement("link"),K(C);var G=C;return G._p=new Promise(function(Z,ce){G.onload=Z,G.onerror=ce}),Ha(C,"link",y),u.state.loading|=4,QS(C,m.precedence,o),u.instance=C;case"script":return C=sv(m.src),(M=o.querySelector(f_(C)))?(u.instance=M,K(M),M):(y=m,(M=Ll.get(C))&&(y=g({},m),bC(y,M)),o=o.ownerDocument||o,M=o.createElement("script"),K(M),Ha(M,"link",y),o.head.appendChild(M),u.instance=M);case"void":return null;default:throw Error(i(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(y=u.instance,u.state.loading|=4,QS(y,m.precedence,o));return u.instance}function QS(o,u,m){for(var y=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=y.length?y[y.length-1]:null,C=M,G=0;G<y.length;G++){var Z=y[G];if(Z.dataset.precedence===u)C=Z;else if(C!==M)break}C?C.parentNode.insertBefore(o,C.nextSibling):(u=m.nodeType===9?m.head:m,u.insertBefore(o,u.firstChild))}function _C(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function bC(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var JS=null;function uk(o,u,m){if(JS===null){var y=new Map,M=JS=new Map;M.set(m,y)}else M=JS,y=M.get(m),y||(y=new Map,M.set(m,y));if(y.has(o))return y;for(y.set(o,null),m=m.getElementsByTagName(o),M=0;M<m.length;M++){var C=m[M];if(!(C[ha]||C[xi]||o==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var G=C.getAttribute(u)||"";G=o+G;var Z=y.get(G);Z?Z.push(C):y.set(G,[C])}}return y}function ck(o,u,m){o=o.ownerDocument||o,o.head.insertBefore(m,u==="title"?o.querySelector("head > title"):null)}function sX(o,u,m){if(m===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function fk(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function oX(o,u,m,y){if(m.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var M=av(y.href),C=u.querySelector(c_(M));if(C){u=C._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=e1.bind(o),u.then(o,o)),m.state.loading|=4,m.instance=C,K(C);return}C=u.ownerDocument||u,y=ok(y),(M=Ll.get(M))&&_C(y,M),C=C.createElement("link"),K(C);var G=C;G._p=new Promise(function(Z,ce){G.onload=Z,G.onerror=ce}),Ha(C,"link",y),m.instance=C}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(m,u),(u=m.state.preload)&&(m.state.loading&3)===0&&(o.count++,m=e1.bind(o),u.addEventListener("load",m),u.addEventListener("error",m))}}var xC=0;function lX(o,u){return o.stylesheets&&o.count===0&&n1(o,o.stylesheets),0<o.count||0<o.imgCount?function(m){var y=setTimeout(function(){if(o.stylesheets&&n1(o,o.stylesheets),o.unsuspend){var C=o.unsuspend;o.unsuspend=null,C()}},6e4+u);0<o.imgBytes&&xC===0&&(xC=62500*j$());var M=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&n1(o,o.stylesheets),o.unsuspend)){var C=o.unsuspend;o.unsuspend=null,C()}},(o.imgBytes>xC?50:800)+u);return o.unsuspend=m,function(){o.unsuspend=null,clearTimeout(y),clearTimeout(M)}}:null}function e1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)n1(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var t1=null;function n1(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,t1=new Map,u.forEach(uX,o),t1=null,e1.call(o))}function uX(o,u){if(!(u.state.loading&4)){var m=t1.get(o);if(m)var y=m.get(null);else{m=new Map,t1.set(o,m);for(var M=o.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<M.length;C++){var G=M[C];(G.nodeName==="LINK"||G.getAttribute("media")!=="not all")&&(m.set(G.dataset.precedence,G),y=G)}y&&m.set(null,y)}M=u.instance,G=M.getAttribute("data-precedence"),C=m.get(G)||y,C===y&&m.set(null,M),m.set(G,M),this.count++,y=e1.bind(this),M.addEventListener("load",y),M.addEventListener("error",y),C?C.parentNode.insertBefore(M,C.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(M,o.firstChild)),u.state.loading|=4}}var h_={$$typeof:R,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function cX(o,u,m,y,M,C,G,Z,ce){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=en(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=en(0),this.hiddenUpdates=en(null),this.identifierPrefix=y,this.onUncaughtError=M,this.onCaughtError=C,this.onRecoverableError=G,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ce,this.incompleteTransitions=new Map}function hk(o,u,m,y,M,C,G,Z,ce,Pe,Xe,it){return o=new cX(o,u,m,G,ce,Pe,Xe,it,Z),u=1,C===!0&&(u|=24),C=Bi(3,null,null,u),o.current=C,C.stateNode=o,u=g0(),u.refCount++,o.pooledCache=u,u.refCount++,C.memoizedState={element:y,isDehydrated:m,cache:u},Cp(C),o}function dk(o){return o?(o=Xu,o):Xu}function pk(o,u,m,y,M,C){M=dk(M),y.context===null?y.context=M:y.pendingContext=M,y=uu(u),y.payload={element:m},C=C===void 0?null:C,C!==null&&(y.callback=C),m=nc(o,y,u),m!==null&&(In(m,o,u),ic(m,o,u))}function mk(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<u?m:u}}function SC(o,u){mk(o,u),(o=o.alternate)&&mk(o,u)}function gk(o){if(o.tag===13||o.tag===31){var u=ka(o,67108864);u!==null&&In(u,o,67108864),SC(o,67108864)}}function vk(o){if(o.tag===13||o.tag===31){var u=Vs();u=to(u);var m=ka(o,u);m!==null&&In(m,o,u),SC(o,u)}}var i1=!0;function fX(o,u,m,y){var M=J.T;J.T=null;var C=ae.p;try{ae.p=2,wC(o,u,m,y)}finally{ae.p=C,J.T=M}}function hX(o,u,m,y){var M=J.T;J.T=null;var C=ae.p;try{ae.p=8,wC(o,u,m,y)}finally{ae.p=C,J.T=M}}function wC(o,u,m,y){if(i1){var M=EC(y);if(M===null)uC(o,u,y,r1,m),_k(o,y);else if(pX(M,o,u,m,y))y.stopPropagation();else if(_k(o,y),u&4&&-1<dX.indexOf(o)){for(;M!==null;){var C=Ra(M);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var G=rt(C.pendingLanes);if(G!==0){var Z=C;for(Z.pendingLanes|=2,Z.entangledLanes|=2;G;){var ce=1<<31-ne(G);Z.entanglements[1]|=ce,G&=~ce}pt(C),(Wt&6)===0&&(hr=X()+500,Nt(0))}}break;case 31:case 13:Z=ka(C,2),Z!==null&&In(Z,C,2),$o(),SC(C,2)}if(C=EC(y),C===null&&uC(o,u,y,r1,m),C===M)break;M=C}M!==null&&y.stopPropagation()}else uC(o,u,y,null,m)}}function EC(o){return o=Rs(o),TC(o)}var r1=null;function TC(o){if(r1=null,o=Is(o),o!==null){var u=a(o);if(u===null)o=null;else{var m=u.tag;if(m===13){if(o=s(u),o!==null)return o;o=null}else if(m===31){if(o=l(u),o!==null)return o;o=null}else if(m===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return r1=o,null}function yk(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pe()){case Ue:return 2;case Ye:return 8;case Le:case At:return 32;case gt:return 268435456;default:return 32}default:return 32}}var AC=!1,ad=null,sd=null,od=null,d_=new Map,p_=new Map,ld=[],dX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _k(o,u){switch(o){case"focusin":case"focusout":ad=null;break;case"dragenter":case"dragleave":sd=null;break;case"mouseover":case"mouseout":od=null;break;case"pointerover":case"pointerout":d_.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":p_.delete(u.pointerId)}}function m_(o,u,m,y,M,C){return o===null||o.nativeEvent!==C?(o={blockedOn:u,domEventName:m,eventSystemFlags:y,nativeEvent:C,targetContainers:[M]},u!==null&&(u=Ra(u),u!==null&&gk(u)),o):(o.eventSystemFlags|=y,u=o.targetContainers,M!==null&&u.indexOf(M)===-1&&u.push(M),o)}function pX(o,u,m,y,M){switch(u){case"focusin":return ad=m_(ad,o,u,m,y,M),!0;case"dragenter":return sd=m_(sd,o,u,m,y,M),!0;case"mouseover":return od=m_(od,o,u,m,y,M),!0;case"pointerover":var C=M.pointerId;return d_.set(C,m_(d_.get(C)||null,o,u,m,y,M)),!0;case"gotpointercapture":return C=M.pointerId,p_.set(C,m_(p_.get(C)||null,o,u,m,y,M)),!0}return!1}function bk(o){var u=Is(o.target);if(u!==null){var m=a(u);if(m!==null){if(u=m.tag,u===13){if(u=s(m),u!==null){o.blockedOn=u,Mi(o.priority,function(){vk(m)});return}}else if(u===31){if(u=l(m),u!==null){o.blockedOn=u,Mi(o.priority,function(){vk(m)});return}}else if(u===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function a1(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var m=EC(o.nativeEvent);if(m===null){m=o.nativeEvent;var y=new m.constructor(m.type,m);bh=y,m.target.dispatchEvent(y),bh=null}else return u=Ra(m),u!==null&&gk(u),o.blockedOn=m,!1;u.shift()}return!0}function xk(o,u,m){a1(o)&&m.delete(u)}function mX(){AC=!1,ad!==null&&a1(ad)&&(ad=null),sd!==null&&a1(sd)&&(sd=null),od!==null&&a1(od)&&(od=null),d_.forEach(xk),p_.forEach(xk)}function s1(o,u){o.blockedOn===u&&(o.blockedOn=null,AC||(AC=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,mX)))}var o1=null;function Sk(o){o1!==o&&(o1=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){o1===o&&(o1=null);for(var u=0;u<o.length;u+=3){var m=o[u],y=o[u+1],M=o[u+2];if(typeof y!="function"){if(TC(y||m)===null)continue;break}var C=Ra(m);C!==null&&(o.splice(u,3),u-=3,H0(C,{pending:!0,data:M,method:m.method,action:y},y,M))}}))}function ov(o){function u(ce){return s1(ce,o)}ad!==null&&s1(ad,o),sd!==null&&s1(sd,o),od!==null&&s1(od,o),d_.forEach(u),p_.forEach(u);for(var m=0;m<ld.length;m++){var y=ld[m];y.blockedOn===o&&(y.blockedOn=null)}for(;0<ld.length&&(m=ld[0],m.blockedOn===null);)bk(m),m.blockedOn===null&&ld.shift();if(m=(o.ownerDocument||o).$$reactFormReplay,m!=null)for(y=0;y<m.length;y+=3){var M=m[y],C=m[y+1],G=M[zi]||null;if(typeof C=="function")G||Sk(m);else if(G){var Z=null;if(C&&C.hasAttribute("formAction")){if(M=C,G=C[zi]||null)Z=G.formAction;else if(TC(M)!==null)continue}else Z=G.action;typeof Z=="function"?m[y+1]=Z:(m.splice(y,3),y-=3),Sk(m)}}}function wk(){function o(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(G){return M=G})},focusReset:"manual",scroll:"manual"})}function u(){M!==null&&(M(),M=null),y||setTimeout(m,20)}function m(){if(!y&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var y=!1,M=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(m,100),function(){y=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),M!==null&&(M(),M=null)}}}function MC(o){this._internalRoot=o}l1.prototype.render=MC.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(i(409));var m=u.current,y=Vs();pk(m,y,o,u,null,null)},l1.prototype.unmount=MC.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;pk(o.current,2,null,o,null,null),$o(),u[Yr]=null}};function l1(o){this._internalRoot=o}l1.prototype.unstable_scheduleHydration=function(o){if(o){var u=Yl();o={blockedOn:null,target:o,priority:u};for(var m=0;m<ld.length&&u!==0&&u<ld[m].priority;m++);ld.splice(m,0,o),m===0&&bk(o)}};var Ek=e.version;if(Ek!=="19.2.4")throw Error(i(527,Ek,"19.2.4"));ae.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=f(u),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var gX={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var u1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!u1.isDisabled&&u1.supportsFiber)try{nt=u1.inject(gX),le=u1}catch{}}return v_.createRoot=function(o,u){if(!r(o))throw Error(i(299));var m=!1,y="",M=BS,C=Y0,G=K0;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(M=u.onUncaughtError),u.onCaughtError!==void 0&&(C=u.onCaughtError),u.onRecoverableError!==void 0&&(G=u.onRecoverableError)),u=hk(o,1,!1,null,null,m,y,null,M,C,G,wk),o[Yr]=u.current,lC(o),new MC(u)},v_.hydrateRoot=function(o,u,m){if(!r(o))throw Error(i(299));var y=!1,M="",C=BS,G=Y0,Z=K0,ce=null;return m!=null&&(m.unstable_strictMode===!0&&(y=!0),m.identifierPrefix!==void 0&&(M=m.identifierPrefix),m.onUncaughtError!==void 0&&(C=m.onUncaughtError),m.onCaughtError!==void 0&&(G=m.onCaughtError),m.onRecoverableError!==void 0&&(Z=m.onRecoverableError),m.formState!==void 0&&(ce=m.formState)),u=hk(o,1,!0,u,m??null,y,M,ce,C,G,Z,wk),u.context=dk(null),m=u.current,y=Vs(),y=to(y),M=uu(y),M.callback=null,nc(m,M,y),m=y,u.current.lanes=m,oi(u,m),pt(u),o[Yr]=u.current,lC(o),new l1(u)},v_.version="19.2.4",v_}var Dk;function MX(){if(Dk)return RC.exports;Dk=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),RC.exports=AX(),RC.exports}var CX=MX();const IX=ku(CX);var X2=$2();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mb(){return mb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},mb.apply(this,arguments)}var Id;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Id||(Id={}));const Lk="popstate";function PX(n){n===void 0&&(n={});function e(i,r){let{pathname:a,search:s,hash:l}=i.location;return AR("",{pathname:a,search:s,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:Xw(r)}return NX(e,t,null,n)}function Wr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function bO(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RX(){return Math.random().toString(36).substr(2,8)}function kk(n,e){return{usr:n.state,key:n.key,idx:e}}function AR(n,e,t,i){return t===void 0&&(t=null),mb({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Oy(e):e,{state:t,key:e&&e.key||i||RX()})}function Xw(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Oy(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function NX(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:a=!1}=i,s=r.history,l=Id.Pop,c=null,f=p();f==null&&(f=0,s.replaceState(mb({},s.state,{idx:f}),""));function p(){return(s.state||{idx:null}).idx}function g(){l=Id.Pop;let S=p(),w=S==null?null:S-f;f=S,c&&c({action:l,location:T.location,delta:w})}function v(S,w){l=Id.Push;let I=AR(T.location,S,w);f=p()+1;let R=kk(I,f),O=T.createHref(I);try{s.pushState(R,"",O)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;r.location.assign(O)}a&&c&&c({action:l,location:T.location,delta:1})}function _(S,w){l=Id.Replace;let I=AR(T.location,S,w);f=p();let R=kk(I,f),O=T.createHref(I);s.replaceState(R,"",O),a&&c&&c({action:l,location:T.location,delta:0})}function x(S){let w=r.location.origin!=="null"?r.location.origin:r.location.href,I=typeof S=="string"?S:Xw(S);return I=I.replace(/ $/,"%20"),Wr(w,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,w)}let T={get action(){return l},get location(){return n(r,s)},listen(S){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(Lk,g),c=S,()=>{r.removeEventListener(Lk,g),c=null}},createHref(S){return e(r,S)},createURL:x,encodeLocation(S){let w=x(S);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:v,replace:_,go(S){return s.go(S)}};return T}var Uk;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Uk||(Uk={}));function OX(n,e,t){return t===void 0&&(t="/"),DX(n,e,t)}function DX(n,e,t,i){let r=typeof e=="string"?Oy(e):e,a=xO(r.pathname||"/",t);if(a==null)return null;let s=Y2(n);LX(s);let l=null;for(let c=0;l==null&&c<s.length;++c){let f=$X(a);l=GX(s[c],f)}return l}function Y2(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(a,s,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};c.relativePath.startsWith("/")&&(Wr(c.relativePath.startsWith(i),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(i.length));let f=Ld([i,c.relativePath]),p=t.concat(c);a.children&&a.children.length>0&&(Wr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),Y2(a.children,e,p,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:jX(f,a.index),routesMeta:p})};return n.forEach((a,s)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))r(a,s);else for(let c of K2(a.path))r(a,s,c)}),e}function K2(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let s=K2(i.join("/")),l=[];return l.push(...s.map(c=>c===""?a:[a,c].join("/"))),r&&l.push(...s),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function LX(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:HX(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const kX=/^:[\w-]+$/,UX=3,zX=2,FX=1,BX=10,VX=-2,zk=n=>n==="*";function jX(n,e){let t=n.split("/"),i=t.length;return t.some(zk)&&(i+=VX),e&&(i+=zX),t.filter(r=>!zk(r)).reduce((r,a)=>r+(kX.test(a)?UX:a===""?FX:BX),i)}function HX(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function GX(n,e,t){let{routesMeta:i}=n,r={},a="/",s=[];for(let l=0;l<i.length;++l){let c=i[l],f=l===i.length-1,p=a==="/"?e:e.slice(a.length)||"/",g=WX({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},p),v=c.route;if(!g)return null;Object.assign(r,g.params),s.push({params:r,pathname:Ld([a,g.pathname]),pathnameBase:QX(Ld([a,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(a=Ld([a,g.pathnameBase]))}return s}function WX(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=qX(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let a=r[0],s=a.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((f,p,g)=>{let{paramName:v,isOptional:_}=p;if(v==="*"){let T=l[g]||"";s=a.slice(0,a.length-T.length).replace(/(.)\/+$/,"$1")}const x=l[g];return _&&!x?f[v]=void 0:f[v]=(x||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:s,pattern:n}}function qX(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),bO(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,c)=>(i.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function $X(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bO(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function xO(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}const XX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YX=n=>XX.test(n);function KX(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Oy(n):n,a;if(t)if(YX(t))a=t;else{if(t.includes("//")){let s=t;t=t.replace(/\/\/+/g,"/"),bO(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+t))}t.startsWith("/")?a=Fk(t.substring(1),"/"):a=Fk(t,e)}else a=e;return{pathname:a,search:JX(i),hash:eY(r)}}function Fk(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function LC(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ZX(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Z2(n,e){let t=ZX(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Q2(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=Oy(n):(r=mb({},n),Wr(!r.pathname||!r.pathname.includes("?"),LC("?","pathname","search",r)),Wr(!r.pathname||!r.pathname.includes("#"),LC("#","pathname","hash",r)),Wr(!r.search||!r.search.includes("#"),LC("#","search","hash",r)));let a=n===""||r.pathname==="",s=a?"/":r.pathname,l;if(s==null)l=t;else{let g=e.length-1;if(!i&&s.startsWith("..")){let v=s.split("/");for(;v[0]==="..";)v.shift(),g-=1;r.pathname=v.join("/")}l=g>=0?e[g]:"/"}let c=KX(r,l),f=s&&s!=="/"&&s.endsWith("/"),p=(a||s===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(f||p)&&(c.pathname+="/"),c}const Ld=n=>n.join("/").replace(/\/\/+/g,"/"),QX=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),JX=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,eY=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function tY(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const J2=["post","put","patch","delete"];new Set(J2);const nY=["get",...J2];new Set(nY);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gb(){return gb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},gb.apply(this,arguments)}const SO=H.createContext(null),iY=H.createContext(null),ig=H.createContext(null),rA=H.createContext(null),rg=H.createContext({outlet:null,matches:[],isDataRoute:!1}),e6=H.createContext(null);function rY(n,e){let{relative:t}=e===void 0?{}:e;ox()||Wr(!1);let{basename:i,navigator:r}=H.useContext(ig),{hash:a,pathname:s,search:l}=i6(n,{relative:t}),c=s;return i!=="/"&&(c=s==="/"?i:Ld([i,s])),r.createHref({pathname:c,search:l,hash:a})}function ox(){return H.useContext(rA)!=null}function aA(){return ox()||Wr(!1),H.useContext(rA).location}function t6(n){H.useContext(ig).static||H.useLayoutEffect(n)}function n6(){let{isDataRoute:n}=H.useContext(rg);return n?vY():aY()}function aY(){ox()||Wr(!1);let n=H.useContext(SO),{basename:e,future:t,navigator:i}=H.useContext(ig),{matches:r}=H.useContext(rg),{pathname:a}=aA(),s=JSON.stringify(Z2(r,t.v7_relativeSplatPath)),l=H.useRef(!1);return t6(()=>{l.current=!0}),H.useCallback(function(f,p){if(p===void 0&&(p={}),!l.current)return;if(typeof f=="number"){i.go(f);return}let g=Q2(f,JSON.parse(s),a,p.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Ld([e,g.pathname])),(p.replace?i.replace:i.push)(g,p.state,p)},[e,i,s,a,n])}function i6(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=H.useContext(ig),{matches:r}=H.useContext(rg),{pathname:a}=aA(),s=JSON.stringify(Z2(r,i.v7_relativeSplatPath));return H.useMemo(()=>Q2(n,JSON.parse(s),a,t==="path"),[n,s,a,t])}function sY(n,e){return oY(n,e)}function oY(n,e,t,i){ox()||Wr(!1);let{navigator:r}=H.useContext(ig),{matches:a}=H.useContext(rg),s=a[a.length-1],l=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let f=aA(),p;if(e){var g;let S=typeof e=="string"?Oy(e):e;c==="/"||(g=S.pathname)!=null&&g.startsWith(c)||Wr(!1),p=S}else p=f;let v=p.pathname||"/",_=v;if(c!=="/"){let S=c.replace(/^\//,"").split("/");_="/"+v.replace(/^\//,"").split("/").slice(S.length).join("/")}let x=OX(n,{pathname:_}),T=hY(x&&x.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:Ld([c,r.encodeLocation?r.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Ld([c,r.encodeLocation?r.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,t,i);return e&&T?H.createElement(rA.Provider,{value:{location:gb({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Id.Pop}},T):T}function lY(){let n=gY(),e=tY(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:r},t):null,null)}const uY=H.createElement(lY,null);class cY extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?H.createElement(rg.Provider,{value:this.props.routeContext},H.createElement(e6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fY(n){let{routeContext:e,match:t,children:i}=n,r=H.useContext(SO);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),H.createElement(rg.Provider,{value:e},i)}function hY(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=i)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,l=(r=t)==null?void 0:r.errors;if(l!=null){let p=s.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);p>=0||Wr(!1),s=s.slice(0,Math.min(s.length,p+1))}let c=!1,f=-1;if(t&&i&&i.v7_partialHydration)for(let p=0;p<s.length;p++){let g=s[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=p),g.route.id){let{loaderData:v,errors:_}=t,x=g.route.loader&&v[g.route.id]===void 0&&(!_||_[g.route.id]===void 0);if(g.route.lazy||x){c=!0,f>=0?s=s.slice(0,f+1):s=[s[0]];break}}}return s.reduceRight((p,g,v)=>{let _,x=!1,T=null,S=null;t&&(_=l&&g.route.id?l[g.route.id]:void 0,T=g.route.errorElement||uY,c&&(f<0&&v===0?(yY("route-fallback"),x=!0,S=null):f===v&&(x=!0,S=g.route.hydrateFallbackElement||null)));let w=e.concat(s.slice(0,v+1)),I=()=>{let R;return _?R=T:x?R=S:g.route.Component?R=H.createElement(g.route.Component,null):g.route.element?R=g.route.element:R=p,H.createElement(fY,{match:g,routeContext:{outlet:p,matches:w,isDataRoute:t!=null},children:R})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?H.createElement(cY,{location:t.location,revalidation:t.revalidation,component:T,error:_,children:I(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):I()},null)}var r6=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(r6||{}),a6=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(a6||{});function dY(n){let e=H.useContext(SO);return e||Wr(!1),e}function pY(n){let e=H.useContext(iY);return e||Wr(!1),e}function mY(n){let e=H.useContext(rg);return e||Wr(!1),e}function s6(n){let e=mY(),t=e.matches[e.matches.length-1];return t.route.id||Wr(!1),t.route.id}function gY(){var n;let e=H.useContext(e6),t=pY(),i=s6();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function vY(){let{router:n}=dY(r6.UseNavigateStable),e=s6(a6.UseNavigateStable),t=H.useRef(!1);return t6(()=>{t.current=!0}),H.useCallback(function(r,a){a===void 0&&(a={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,gb({fromRouteId:e},a)))},[n,e])}const Bk={};function yY(n,e,t){Bk[n]||(Bk[n]=!0)}function _Y(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function lm(n){Wr(!1)}function bY(n){let{basename:e="/",children:t=null,location:i,navigationType:r=Id.Pop,navigator:a,static:s=!1,future:l}=n;ox()&&Wr(!1);let c=e.replace(/^\/*/,"/"),f=H.useMemo(()=>({basename:c,navigator:a,static:s,future:gb({v7_relativeSplatPath:!1},l)}),[c,l,a,s]);typeof i=="string"&&(i=Oy(i));let{pathname:p="/",search:g="",hash:v="",state:_=null,key:x="default"}=i,T=H.useMemo(()=>{let S=xO(p,c);return S==null?null:{location:{pathname:S,search:g,hash:v,state:_,key:x},navigationType:r}},[c,p,g,v,_,x,r]);return T==null?null:H.createElement(ig.Provider,{value:f},H.createElement(rA.Provider,{children:t,value:T}))}function xY(n){let{children:e,location:t}=n;return sY(MR(e),t)}new Promise(()=>{});function MR(n,e){e===void 0&&(e=[]);let t=[];return H.Children.forEach(n,(i,r)=>{if(!H.isValidElement(i))return;let a=[...e,r];if(i.type===H.Fragment){t.push.apply(t,MR(i.props.children,a));return}i.type!==lm&&Wr(!1),!i.props.index||!i.props.children||Wr(!1);let s={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(s.children=MR(i.props.children,a)),t.push(s)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function CR(){return CR=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},CR.apply(this,arguments)}function SY(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,a;for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function wY(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function EY(n,e){return n.button===0&&(!e||e==="_self")&&!wY(n)}const TY=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],AY="6";try{window.__reactRouterVersion=AY}catch{}const MY="startTransition",Vk=W2[MY];function CY(n){let{basename:e,children:t,future:i,window:r}=n,a=H.useRef();a.current==null&&(a.current=PX({window:r,v5Compat:!0}));let s=a.current,[l,c]=H.useState({action:s.action,location:s.location}),{v7_startTransition:f}=i||{},p=H.useCallback(g=>{f&&Vk?Vk(()=>c(g)):c(g)},[c,f]);return H.useLayoutEffect(()=>s.listen(p),[s,p]),H.useEffect(()=>_Y(i),[i]),H.createElement(bY,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:s,future:i})}const IY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ac=H.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:a,replace:s,state:l,target:c,to:f,preventScrollReset:p,viewTransition:g}=e,v=SY(e,TY),{basename:_}=H.useContext(ig),x,T=!1;if(typeof f=="string"&&PY.test(f)&&(x=f,IY))try{let R=new URL(window.location.href),O=f.startsWith("//")?new URL(R.protocol+f):new URL(f),F=xO(O.pathname,_);O.origin===R.origin&&F!=null?f=F+O.search+O.hash:T=!0}catch{}let S=rY(f,{relative:r}),w=RY(f,{replace:s,state:l,target:c,preventScrollReset:p,relative:r,viewTransition:g});function I(R){i&&i(R),R.defaultPrevented||w(R)}return H.createElement("a",CR({},v,{href:x||S,onClick:T||a?i:I,ref:t,target:c}))});var jk;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(jk||(jk={}));var Hk;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Hk||(Hk={}));function RY(n,e){let{target:t,replace:i,state:r,preventScrollReset:a,relative:s,viewTransition:l}=e===void 0?{}:e,c=n6(),f=aA(),p=i6(n,{relative:s});return H.useCallback(g=>{if(EY(g,t)){g.preventDefault();let v=i!==void 0?i:Xw(f)===Xw(p);c(n,{replace:v,state:r,preventScrollReset:a,relative:s,viewTransition:l})}},[f,c,p,i,r,t,n,a,s,l])}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const sA="182",um={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},cm={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},o6=0,IR=1,l6=2,NY=3,u6=0,Kv=1,Q_=2,ym=3,eh=0,Ks=1,Mc=2,Dc=0,Im=1,PR=2,RR=3,NR=4,c6=5,wd=100,f6=101,h6=102,d6=103,p6=104,m6=200,g6=201,v6=202,y6=203,Yw=204,Kw=205,_6=206,b6=207,x6=208,S6=209,w6=210,E6=211,T6=212,A6=213,M6=214,Zw=0,Qw=1,Jw=2,Fm=3,eE=4,tE=5,nE=6,iE=7,lx=0,C6=1,I6=2,Vl=0,wO=1,EO=2,TO=3,oA=4,AO=5,MO=6,CO=7,OR="attached",P6="detached",lA=300,Bc=301,Gd=302,vb=303,yb=304,Dy=306,_b=1e3,Po=1001,bb=1002,Dr=1003,IO=1004,OY=1004,Gv=1005,DY=1005,Ki=1006,J_=1007,LY=1007,Pc=1008,kY=1008,Ws=1009,PO=1010,RO=1011,oy=1012,uA=1013,jl=1014,$s=1015,Vc=1016,cA=1017,fA=1018,ly=1020,NO=35902,OO=35899,DO=1021,LO=1022,Es=1023,jc=1026,Pd=1027,hA=1028,ux=1029,Bm=1030,dA=1031,UY=1032,pA=1033,eb=33776,tb=33777,nb=33778,ib=33779,rE=35840,aE=35841,sE=35842,oE=35843,lE=36196,uE=37492,cE=37496,fE=37488,hE=37489,dE=37490,pE=37491,mE=37808,gE=37809,vE=37810,yE=37811,_E=37812,bE=37813,xE=37814,SE=37815,wE=37816,EE=37817,TE=37818,AE=37819,ME=37820,CE=37821,IE=36492,PE=36494,RE=36495,NE=36283,OE=36284,DE=36285,LE=36286,R6=2200,N6=2201,O6=2202,xb=2300,kE=2301,Mw=2302,_m=2400,bm=2401,Sb=2402,mA=2500,kO=2501,zY=0,FY=1,BY=2,D6=3200,VY=3201,jY=3202,HY=3203,np=0,L6=1,jf="",Xa="srgb",Wd="srgb-linear",wb="linear",gi="srgb",GY="",WY="rg",qY="ga",$Y=0,fm=7680,XY=7681,YY=7682,KY=7683,ZY=34055,QY=34056,JY=5386,eK=512,tK=513,nK=514,iK=515,rK=516,aK=517,sK=518,DR=519,k6=512,U6=513,z6=514,gA=515,F6=516,B6=517,vA=518,V6=519,Eb=35044,oK=35048,lK=35040,uK=35045,cK=35049,fK=35041,hK=35046,dK=35050,pK=35042,mK="100",LR="300 es",Zo=2e3,uy=2001,gK={COMPUTE:"compute",RENDER:"render"},vK={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},yK={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function j6(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const _K={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Wv(n,e){return new _K[n](e)}function H6(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Tb(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function G6(){const n=Tb("canvas");return n.style.display="block",n}const Gk={};let qd=null;function bK(n){qd=n}function xK(){return qd}function Ab(...n){const e="THREE."+n.shift();qd?qd("log",e,...n):console.log(e,...n)}function Mt(...n){const e="THREE."+n.shift();qd?qd("warn",e,...n):console.warn(e,...n)}function Yt(...n){const e="THREE."+n.shift();qd?qd("error",e,...n):console.error(e,...n)}function cy(...n){const e=n.join(" ");e in Gk||(Gk[e]=!0,Mt(...n))}function SK(n,e,t){return new Promise(function(i,r){function a(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:i()}}setTimeout(a,t)})}let Qc=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e);e.target=null}}};const gs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Wk=1234567;const Pm=Math.PI/180,fy=180/Math.PI;function el(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(gs[n&255]+gs[n>>8&255]+gs[n>>16&255]+gs[n>>24&255]+"-"+gs[e&255]+gs[e>>8&255]+"-"+gs[e>>16&15|64]+gs[e>>24&255]+"-"+gs[t&63|128]+gs[t>>8&255]+"-"+gs[t>>16&255]+gs[t>>24&255]+gs[i&255]+gs[i>>8&255]+gs[i>>16&255]+gs[i>>24&255]).toLowerCase()}function fn(n,e,t){return Math.max(e,Math.min(t,n))}function UO(n,e){return(n%e+e)%e}function wK(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function EK(n,e,t){return n!==e?(t-n)/(e-n):0}function rb(n,e,t){return(1-t)*n+t*e}function TK(n,e,t,i){return rb(n,e,1-Math.exp(-t*i))}function AK(n,e=1){return e-Math.abs(UO(n,e*2)-e)}function MK(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function CK(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function IK(n,e){return n+Math.floor(Math.random()*(e-n+1))}function PK(n,e){return n+Math.random()*(e-n)}function RK(n){return n*(.5-Math.random())}function NK(n){n!==void 0&&(Wk=n);let e=Wk+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function OK(n){return n*Pm}function DK(n){return n*fy}function LK(n){return(n&n-1)===0&&n!==0}function kK(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function UK(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function zK(n,e,t,i,r){const a=Math.cos,s=Math.sin,l=a(t/2),c=s(t/2),f=a((e+i)/2),p=s((e+i)/2),g=a((e-i)/2),v=s((e-i)/2),_=a((i-e)/2),x=s((i-e)/2);switch(r){case"XYX":n.set(l*p,c*g,c*v,l*f);break;case"YZY":n.set(c*v,l*p,c*g,l*f);break;case"ZXZ":n.set(c*g,c*v,l*p,l*f);break;case"XZX":n.set(l*p,c*x,c*_,l*f);break;case"YXY":n.set(c*_,l*p,c*x,l*f);break;case"ZYZ":n.set(c*x,c*_,l*p,l*f);break;default:Mt("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function qs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Pn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const W6={DEG2RAD:Pm,RAD2DEG:fy,generateUUID:el,clamp:fn,euclideanModulo:UO,mapLinear:wK,inverseLerp:EK,lerp:rb,damp:TK,pingpong:AK,smoothstep:MK,smootherstep:CK,randInt:IK,randFloat:PK,randFloatSpread:RK,seededRandom:NK,degToRad:OK,radToDeg:DK,isPowerOfTwo:LK,ceilPowerOfTwo:kK,floorPowerOfTwo:UK,setQuaternionFromProperEuler:zK,normalize:Pn,denormalize:qs};class tt{constructor(e=0,t=0){tt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=fn(this.x,e.x,t.x),this.y=fn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=fn(this.x,e,t),this.y=fn(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(fn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(fn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),a=this.x-e.x,s=this.y-e.y;return this.x=a*i-s*r+e.x,this.y=a*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ts{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,a,s,l){let c=i[r+0],f=i[r+1],p=i[r+2],g=i[r+3],v=a[s+0],_=a[s+1],x=a[s+2],T=a[s+3];if(l<=0){e[t+0]=c,e[t+1]=f,e[t+2]=p,e[t+3]=g;return}if(l>=1){e[t+0]=v,e[t+1]=_,e[t+2]=x,e[t+3]=T;return}if(g!==T||c!==v||f!==_||p!==x){let S=c*v+f*_+p*x+g*T;S<0&&(v=-v,_=-_,x=-x,T=-T,S=-S);let w=1-l;if(S<.9995){const I=Math.acos(S),R=Math.sin(I);w=Math.sin(w*I)/R,l=Math.sin(l*I)/R,c=c*w+v*l,f=f*w+_*l,p=p*w+x*l,g=g*w+T*l}else{c=c*w+v*l,f=f*w+_*l,p=p*w+x*l,g=g*w+T*l;const I=1/Math.sqrt(c*c+f*f+p*p+g*g);c*=I,f*=I,p*=I,g*=I}}e[t]=c,e[t+1]=f,e[t+2]=p,e[t+3]=g}static multiplyQuaternionsFlat(e,t,i,r,a,s){const l=i[r],c=i[r+1],f=i[r+2],p=i[r+3],g=a[s],v=a[s+1],_=a[s+2],x=a[s+3];return e[t]=l*x+p*g+c*_-f*v,e[t+1]=c*x+p*v+f*g-l*_,e[t+2]=f*x+p*_+l*v-c*g,e[t+3]=p*x-l*g-c*v-f*_,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,a=e._z,s=e._order,l=Math.cos,c=Math.sin,f=l(i/2),p=l(r/2),g=l(a/2),v=c(i/2),_=c(r/2),x=c(a/2);switch(s){case"XYZ":this._x=v*p*g+f*_*x,this._y=f*_*g-v*p*x,this._z=f*p*x+v*_*g,this._w=f*p*g-v*_*x;break;case"YXZ":this._x=v*p*g+f*_*x,this._y=f*_*g-v*p*x,this._z=f*p*x-v*_*g,this._w=f*p*g+v*_*x;break;case"ZXY":this._x=v*p*g-f*_*x,this._y=f*_*g+v*p*x,this._z=f*p*x+v*_*g,this._w=f*p*g-v*_*x;break;case"ZYX":this._x=v*p*g-f*_*x,this._y=f*_*g+v*p*x,this._z=f*p*x-v*_*g,this._w=f*p*g+v*_*x;break;case"YZX":this._x=v*p*g+f*_*x,this._y=f*_*g+v*p*x,this._z=f*p*x-v*_*g,this._w=f*p*g-v*_*x;break;case"XZY":this._x=v*p*g-f*_*x,this._y=f*_*g-v*p*x,this._z=f*p*x+v*_*g,this._w=f*p*g+v*_*x;break;default:Mt("Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],a=t[8],s=t[1],l=t[5],c=t[9],f=t[2],p=t[6],g=t[10],v=i+l+g;if(v>0){const _=.5/Math.sqrt(v+1);this._w=.25/_,this._x=(p-c)*_,this._y=(a-f)*_,this._z=(s-r)*_}else if(i>l&&i>g){const _=2*Math.sqrt(1+i-l-g);this._w=(p-c)/_,this._x=.25*_,this._y=(r+s)/_,this._z=(a+f)/_}else if(l>g){const _=2*Math.sqrt(1+l-i-g);this._w=(a-f)/_,this._x=(r+s)/_,this._y=.25*_,this._z=(c+p)/_}else{const _=2*Math.sqrt(1+g-i-l);this._w=(s-r)/_,this._x=(a+f)/_,this._y=(c+p)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(fn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,a=e._z,s=e._w,l=t._x,c=t._y,f=t._z,p=t._w;return this._x=i*p+s*l+r*f-a*c,this._y=r*p+s*c+a*l-i*f,this._z=a*p+s*f+i*c-r*l,this._w=s*p-i*l-r*c-a*f,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let i=e._x,r=e._y,a=e._z,s=e._w,l=this.dot(e);l<0&&(i=-i,r=-r,a=-a,s=-s,l=-l);let c=1-t;if(l<.9995){const f=Math.acos(l),p=Math.sin(f);c=Math.sin(c*f)/p,t=Math.sin(t*f)/p,this._x=this._x*c+i*t,this._y=this._y*c+r*t,this._z=this._z*c+a*t,this._w=this._w*c+s*t,this._onChangeCallback()}else this._x=this._x*c+i*t,this._y=this._y*c+r*t,this._z=this._z*c+a*t,this._w=this._w*c+s*t,this.normalize();return this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ie{constructor(e=0,t=0,i=0){ie.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(qk.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(qk.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6]*r,this.y=a[1]*t+a[4]*i+a[7]*r,this.z=a[2]*t+a[5]*i+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,a=e.elements,s=1/(a[3]*t+a[7]*i+a[11]*r+a[15]);return this.x=(a[0]*t+a[4]*i+a[8]*r+a[12])*s,this.y=(a[1]*t+a[5]*i+a[9]*r+a[13])*s,this.z=(a[2]*t+a[6]*i+a[10]*r+a[14])*s,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,a=e.x,s=e.y,l=e.z,c=e.w,f=2*(s*r-l*i),p=2*(l*t-a*r),g=2*(a*i-s*t);return this.x=t+c*f+s*g-l*p,this.y=i+c*p+l*f-a*g,this.z=r+c*g+a*p-s*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r,this.y=a[1]*t+a[5]*i+a[9]*r,this.z=a[2]*t+a[6]*i+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=fn(this.x,e.x,t.x),this.y=fn(this.y,e.y,t.y),this.z=fn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=fn(this.x,e,t),this.y=fn(this.y,e,t),this.z=fn(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(fn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,a=e.z,s=t.x,l=t.y,c=t.z;return this.x=r*c-a*l,this.y=a*s-i*c,this.z=i*l-r*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return kC.copy(this).projectOnVector(e),this.sub(kC)}reflect(e){return this.sub(kC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(fn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const kC=new ie,qk=new Ts;class Tn{constructor(e,t,i,r,a,s,l,c,f){Tn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,s,l,c,f)}set(e,t,i,r,a,s,l,c,f){const p=this.elements;return p[0]=e,p[1]=r,p[2]=l,p[3]=t,p[4]=a,p[5]=c,p[6]=i,p[7]=s,p[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,a=this.elements,s=i[0],l=i[3],c=i[6],f=i[1],p=i[4],g=i[7],v=i[2],_=i[5],x=i[8],T=r[0],S=r[3],w=r[6],I=r[1],R=r[4],O=r[7],F=r[2],B=r[5],L=r[8];return a[0]=s*T+l*I+c*F,a[3]=s*S+l*R+c*B,a[6]=s*w+l*O+c*L,a[1]=f*T+p*I+g*F,a[4]=f*S+p*R+g*B,a[7]=f*w+p*O+g*L,a[2]=v*T+_*I+x*F,a[5]=v*S+_*R+x*B,a[8]=v*w+_*O+x*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=e[6],f=e[7],p=e[8];return t*s*p-t*l*f-i*a*p+i*l*c+r*a*f-r*s*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=e[6],f=e[7],p=e[8],g=p*s-l*f,v=l*c-p*a,_=f*a-s*c,x=t*g+i*v+r*_;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const T=1/x;return e[0]=g*T,e[1]=(r*f-p*i)*T,e[2]=(l*i-r*s)*T,e[3]=v*T,e[4]=(p*t-r*c)*T,e[5]=(r*a-l*t)*T,e[6]=_*T,e[7]=(i*c-f*t)*T,e[8]=(s*t-i*a)*T,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,a,s,l){const c=Math.cos(a),f=Math.sin(a);return this.set(i*c,i*f,-i*(c*s+f*l)+s+e,-r*f,r*c,-r*(-f*s+c*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(UC.makeScale(e,t)),this}rotate(e){return this.premultiply(UC.makeRotation(-e)),this}translate(e,t){return this.premultiply(UC.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const UC=new Tn,$k=new Tn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Xk=new Tn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function FK(){const n={enabled:!0,workingColorSpace:Wd,spaces:{},convert:function(r,a,s){return this.enabled===!1||a===s||!a||!s||(this.spaces[a].transfer===gi&&(r.r=Kf(r.r),r.g=Kf(r.g),r.b=Kf(r.b)),this.spaces[a].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[a].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===gi&&(r.r=Zv(r.r),r.g=Zv(r.g),r.b=Zv(r.b))),r},workingToColorSpace:function(r,a){return this.convert(r,this.workingColorSpace,a)},colorSpaceToWorking:function(r,a){return this.convert(r,a,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===jf?wb:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,a=this.workingColorSpace){return r.fromArray(this.spaces[a].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,a,s){return r.copy(this.spaces[a].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,a){return cy("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,a)},toWorkingColorSpace:function(r,a){return cy("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,a)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Wd]:{primaries:e,whitePoint:i,transfer:wb,toXYZ:$k,fromXYZ:Xk,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Xa},outputColorSpaceConfig:{drawingBufferColorSpace:Xa}},[Xa]:{primaries:e,whitePoint:i,transfer:gi,toXYZ:$k,fromXYZ:Xk,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Xa}}}),n}const qn=FK();function Kf(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Zv(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let lv;class q6{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{lv===void 0&&(lv=Tb("canvas")),lv.width=e.width,lv.height=e.height;const r=lv.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=lv}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Tb("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),a=r.data;for(let s=0;s<a.length;s++)a[s]=Kf(a[s]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Kf(t[i]/255)*255):t[i]=Kf(t[i]);return{data:t,width:e.width,height:e.height}}else return Mt("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let BK=0;class Rd{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:BK++}),this.uuid=el(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let a;if(Array.isArray(r)){a=[];for(let s=0,l=r.length;s<l;s++)r[s].isDataTexture?a.push(zC(r[s].image)):a.push(zC(r[s]))}else a=zC(r);i.url=a}return t||(e.images[this.uuid]=i),i}}function zC(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?q6.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(Mt("Texture: Unable to serialize Texture."),{})}let VK=0;const FC=new ie;class Er extends Qc{constructor(e=Er.DEFAULT_IMAGE,t=Er.DEFAULT_MAPPING,i=Po,r=Po,a=Ki,s=Pc,l=Es,c=Ws,f=Er.DEFAULT_ANISOTROPY,p=jf){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:VK++}),this.uuid=el(),this.name="",this.source=new Rd(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=a,this.minFilter=s,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=c,this.offset=new tt(0,0),this.repeat=new tt(1,1),this.center=new tt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Tn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(FC).x}get height(){return this.source.getSize(FC).y}get depth(){return this.source.getSize(FC).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){Mt(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){Mt(`Texture.setValues(): property '${t}' does not exist.`);continue}r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==lA)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case _b:e.x=e.x-Math.floor(e.x);break;case Po:e.x=e.x<0?0:1;break;case bb:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case _b:e.y=e.y-Math.floor(e.y);break;case Po:e.y=e.y<0?0:1;break;case bb:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Er.DEFAULT_IMAGE=null;Er.DEFAULT_MAPPING=lA;Er.DEFAULT_ANISOTROPY=1;class Ri{constructor(e=0,t=0,i=0,r=1){Ri.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,a=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*a,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*a,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*a,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,a;const c=e.elements,f=c[0],p=c[4],g=c[8],v=c[1],_=c[5],x=c[9],T=c[2],S=c[6],w=c[10];if(Math.abs(p-v)<.01&&Math.abs(g-T)<.01&&Math.abs(x-S)<.01){if(Math.abs(p+v)<.1&&Math.abs(g+T)<.1&&Math.abs(x+S)<.1&&Math.abs(f+_+w-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const R=(f+1)/2,O=(_+1)/2,F=(w+1)/2,B=(p+v)/4,L=(g+T)/4,z=(x+S)/4;return R>O&&R>F?R<.01?(i=0,r=.707106781,a=.707106781):(i=Math.sqrt(R),r=B/i,a=L/i):O>F?O<.01?(i=.707106781,r=0,a=.707106781):(r=Math.sqrt(O),i=B/r,a=z/r):F<.01?(i=.707106781,r=.707106781,a=0):(a=Math.sqrt(F),i=L/a,r=z/a),this.set(i,r,a,t),this}let I=Math.sqrt((S-x)*(S-x)+(g-T)*(g-T)+(v-p)*(v-p));return Math.abs(I)<.001&&(I=1),this.x=(S-x)/I,this.y=(g-T)/I,this.z=(v-p)/I,this.w=Math.acos((f+_+w-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=fn(this.x,e.x,t.x),this.y=fn(this.y,e.y,t.y),this.z=fn(this.z,e.z,t.z),this.w=fn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=fn(this.x,e,t),this.y=fn(this.y,e,t),this.z=fn(this.z,e,t),this.w=fn(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(fn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class zO extends Qc{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ki,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new Ri(0,0,e,t),this.scissorTest=!1,this.viewport=new Ri(0,0,e,t);const r={width:e,height:t,depth:i.depth},a=new Er(r);this.textures=[];const s=i.count;for(let l=0;l<s;l++)this.textures[l]=a.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:Ki,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,a=this.textures.length;r<a;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i,this.textures[r].isData3DTexture!==!0&&(this.textures[r].isArrayTexture=this.textures[r].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new Rd(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class tl extends zO{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class yA extends Er{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Dr,this.minFilter=Dr,this.wrapR=Po,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class jK extends tl{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new yA(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class _A extends Er{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Dr,this.minFilter=Dr,this.wrapR=Po,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class HK extends tl{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new _A(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Za{constructor(e=new ie(1/0,1/0,1/0),t=new ie(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(_u.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(_u.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=_u.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const a=i.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,l=a.count;s<l;s++)e.isMesh===!0?e.getVertexPosition(s,_u):_u.fromBufferAttribute(a,s),_u.applyMatrix4(e.matrixWorld),this.expandByPoint(_u);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),c1.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),c1.copy(i.boundingBox)),c1.applyMatrix4(e.matrixWorld),this.union(c1)}const r=e.children;for(let a=0,s=r.length;a<s;a++)this.expandByObject(r[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,_u),_u.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(y_),f1.subVectors(this.max,y_),uv.subVectors(e.a,y_),cv.subVectors(e.b,y_),fv.subVectors(e.c,y_),cd.subVectors(cv,uv),fd.subVectors(fv,cv),$p.subVectors(uv,fv);let t=[0,-cd.z,cd.y,0,-fd.z,fd.y,0,-$p.z,$p.y,cd.z,0,-cd.x,fd.z,0,-fd.x,$p.z,0,-$p.x,-cd.y,cd.x,0,-fd.y,fd.x,0,-$p.y,$p.x,0];return!BC(t,uv,cv,fv,f1)||(t=[1,0,0,0,1,0,0,0,1],!BC(t,uv,cv,fv,f1))?!1:(h1.crossVectors(cd,fd),t=[h1.x,h1.y,h1.z],BC(t,uv,cv,fv,f1))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,_u).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(_u).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Df[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Df[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Df[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Df[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Df[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Df[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Df[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Df[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Df),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Df=[new ie,new ie,new ie,new ie,new ie,new ie,new ie,new ie],_u=new ie,c1=new Za,uv=new ie,cv=new ie,fv=new ie,cd=new ie,fd=new ie,$p=new ie,y_=new ie,f1=new ie,h1=new ie,Xp=new ie;function BC(n,e,t,i,r){for(let a=0,s=n.length-3;a<=s;a+=3){Xp.fromArray(n,a);const l=r.x*Math.abs(Xp.x)+r.y*Math.abs(Xp.y)+r.z*Math.abs(Xp.z),c=e.dot(Xp),f=t.dot(Xp),p=i.dot(Xp);if(Math.max(-Math.max(c,f,p),Math.min(c,f,p))>l)return!1}return!0}const GK=new Za,__=new ie,VC=new ie;class Ea{constructor(e=new ie,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):GK.setFromPoints(e).getCenter(i);let r=0;for(let a=0,s=e.length;a<s;a++)r=Math.max(r,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;__.subVectors(e,this.center);const t=__.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(__,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(VC.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(__.copy(e.center).add(VC)),this.expandByPoint(__.copy(e.center).sub(VC))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Lf=new ie,jC=new ie,d1=new ie,hd=new ie,HC=new ie,p1=new ie,GC=new ie;class ag{constructor(e=new ie,t=new ie(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Lf)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Lf.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Lf.copy(this.origin).addScaledVector(this.direction,t),Lf.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){jC.copy(e).add(t).multiplyScalar(.5),d1.copy(t).sub(e).normalize(),hd.copy(this.origin).sub(jC);const a=e.distanceTo(t)*.5,s=-this.direction.dot(d1),l=hd.dot(this.direction),c=-hd.dot(d1),f=hd.lengthSq(),p=Math.abs(1-s*s);let g,v,_,x;if(p>0)if(g=s*c-l,v=s*l-c,x=a*p,g>=0)if(v>=-x)if(v<=x){const T=1/p;g*=T,v*=T,_=g*(g+s*v+2*l)+v*(s*g+v+2*c)+f}else v=a,g=Math.max(0,-(s*v+l)),_=-g*g+v*(v+2*c)+f;else v=-a,g=Math.max(0,-(s*v+l)),_=-g*g+v*(v+2*c)+f;else v<=-x?(g=Math.max(0,-(-s*a+l)),v=g>0?-a:Math.min(Math.max(-a,-c),a),_=-g*g+v*(v+2*c)+f):v<=x?(g=0,v=Math.min(Math.max(-a,-c),a),_=v*(v+2*c)+f):(g=Math.max(0,-(s*a+l)),v=g>0?a:Math.min(Math.max(-a,-c),a),_=-g*g+v*(v+2*c)+f);else v=s>0?-a:a,g=Math.max(0,-(s*v+l)),_=-g*g+v*(v+2*c)+f;return i&&i.copy(this.origin).addScaledVector(this.direction,g),r&&r.copy(jC).addScaledVector(d1,v),_}intersectSphere(e,t){Lf.subVectors(e.center,this.origin);const i=Lf.dot(this.direction),r=Lf.dot(Lf)-i*i,a=e.radius*e.radius;if(r>a)return null;const s=Math.sqrt(a-r),l=i-s,c=i+s;return c<0?null:l<0?this.at(c,t):this.at(l,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,a,s,l,c;const f=1/this.direction.x,p=1/this.direction.y,g=1/this.direction.z,v=this.origin;return f>=0?(i=(e.min.x-v.x)*f,r=(e.max.x-v.x)*f):(i=(e.max.x-v.x)*f,r=(e.min.x-v.x)*f),p>=0?(a=(e.min.y-v.y)*p,s=(e.max.y-v.y)*p):(a=(e.max.y-v.y)*p,s=(e.min.y-v.y)*p),i>s||a>r||((a>i||isNaN(i))&&(i=a),(s<r||isNaN(r))&&(r=s),g>=0?(l=(e.min.z-v.z)*g,c=(e.max.z-v.z)*g):(l=(e.max.z-v.z)*g,c=(e.min.z-v.z)*g),i>c||l>r)||((l>i||i!==i)&&(i=l),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Lf)!==null}intersectTriangle(e,t,i,r,a){HC.subVectors(t,e),p1.subVectors(i,e),GC.crossVectors(HC,p1);let s=this.direction.dot(GC),l;if(s>0){if(r)return null;l=1}else if(s<0)l=-1,s=-s;else return null;hd.subVectors(this.origin,e);const c=l*this.direction.dot(p1.crossVectors(hd,p1));if(c<0)return null;const f=l*this.direction.dot(HC.cross(hd));if(f<0||c+f>s)return null;const p=-l*hd.dot(GC);return p<0?null:this.at(p/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class pn{constructor(e,t,i,r,a,s,l,c,f,p,g,v,_,x,T,S){pn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,s,l,c,f,p,g,v,_,x,T,S)}set(e,t,i,r,a,s,l,c,f,p,g,v,_,x,T,S){const w=this.elements;return w[0]=e,w[4]=t,w[8]=i,w[12]=r,w[1]=a,w[5]=s,w[9]=l,w[13]=c,w[2]=f,w[6]=p,w[10]=g,w[14]=v,w[3]=_,w[7]=x,w[11]=T,w[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new pn().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),i.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this)}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,i=e.elements,r=1/hv.setFromMatrixColumn(e,0).length(),a=1/hv.setFromMatrixColumn(e,1).length(),s=1/hv.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*a,t[5]=i[5]*a,t[6]=i[6]*a,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,a=e.z,s=Math.cos(i),l=Math.sin(i),c=Math.cos(r),f=Math.sin(r),p=Math.cos(a),g=Math.sin(a);if(e.order==="XYZ"){const v=s*p,_=s*g,x=l*p,T=l*g;t[0]=c*p,t[4]=-c*g,t[8]=f,t[1]=_+x*f,t[5]=v-T*f,t[9]=-l*c,t[2]=T-v*f,t[6]=x+_*f,t[10]=s*c}else if(e.order==="YXZ"){const v=c*p,_=c*g,x=f*p,T=f*g;t[0]=v+T*l,t[4]=x*l-_,t[8]=s*f,t[1]=s*g,t[5]=s*p,t[9]=-l,t[2]=_*l-x,t[6]=T+v*l,t[10]=s*c}else if(e.order==="ZXY"){const v=c*p,_=c*g,x=f*p,T=f*g;t[0]=v-T*l,t[4]=-s*g,t[8]=x+_*l,t[1]=_+x*l,t[5]=s*p,t[9]=T-v*l,t[2]=-s*f,t[6]=l,t[10]=s*c}else if(e.order==="ZYX"){const v=s*p,_=s*g,x=l*p,T=l*g;t[0]=c*p,t[4]=x*f-_,t[8]=v*f+T,t[1]=c*g,t[5]=T*f+v,t[9]=_*f-x,t[2]=-f,t[6]=l*c,t[10]=s*c}else if(e.order==="YZX"){const v=s*c,_=s*f,x=l*c,T=l*f;t[0]=c*p,t[4]=T-v*g,t[8]=x*g+_,t[1]=g,t[5]=s*p,t[9]=-l*p,t[2]=-f*p,t[6]=_*g+x,t[10]=v-T*g}else if(e.order==="XZY"){const v=s*c,_=s*f,x=l*c,T=l*f;t[0]=c*p,t[4]=-g,t[8]=f*p,t[1]=v*g+T,t[5]=s*p,t[9]=_*g-x,t[2]=x*g-_,t[6]=l*p,t[10]=T*g+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(WK,e,qK)}lookAt(e,t,i){const r=this.elements;return Xo.subVectors(e,t),Xo.lengthSq()===0&&(Xo.z=1),Xo.normalize(),dd.crossVectors(i,Xo),dd.lengthSq()===0&&(Math.abs(i.z)===1?Xo.x+=1e-4:Xo.z+=1e-4,Xo.normalize(),dd.crossVectors(i,Xo)),dd.normalize(),m1.crossVectors(Xo,dd),r[0]=dd.x,r[4]=m1.x,r[8]=Xo.x,r[1]=dd.y,r[5]=m1.y,r[9]=Xo.y,r[2]=dd.z,r[6]=m1.z,r[10]=Xo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,a=this.elements,s=i[0],l=i[4],c=i[8],f=i[12],p=i[1],g=i[5],v=i[9],_=i[13],x=i[2],T=i[6],S=i[10],w=i[14],I=i[3],R=i[7],O=i[11],F=i[15],B=r[0],L=r[4],z=r[8],P=r[12],D=r[1],j=r[5],q=r[9],W=r[13],se=r[2],ue=r[6],J=r[10],ae=r[14],he=r[3],Te=r[7],Re=r[11],Q=r[15];return a[0]=s*B+l*D+c*se+f*he,a[4]=s*L+l*j+c*ue+f*Te,a[8]=s*z+l*q+c*J+f*Re,a[12]=s*P+l*W+c*ae+f*Q,a[1]=p*B+g*D+v*se+_*he,a[5]=p*L+g*j+v*ue+_*Te,a[9]=p*z+g*q+v*J+_*Re,a[13]=p*P+g*W+v*ae+_*Q,a[2]=x*B+T*D+S*se+w*he,a[6]=x*L+T*j+S*ue+w*Te,a[10]=x*z+T*q+S*J+w*Re,a[14]=x*P+T*W+S*ae+w*Q,a[3]=I*B+R*D+O*se+F*he,a[7]=I*L+R*j+O*ue+F*Te,a[11]=I*z+R*q+O*J+F*Re,a[15]=I*P+R*W+O*ae+F*Q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],a=e[12],s=e[1],l=e[5],c=e[9],f=e[13],p=e[2],g=e[6],v=e[10],_=e[14],x=e[3],T=e[7],S=e[11],w=e[15],I=c*_-f*v,R=l*_-f*g,O=l*v-c*g,F=s*_-f*p,B=s*v-c*p,L=s*g-l*p;return t*(T*I-S*R+w*O)-i*(x*I-S*F+w*B)+r*(x*R-T*F+w*L)-a*(x*O-T*B+S*L)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=e[6],f=e[7],p=e[8],g=e[9],v=e[10],_=e[11],x=e[12],T=e[13],S=e[14],w=e[15],I=g*S*f-T*v*f+T*c*_-l*S*_-g*c*w+l*v*w,R=x*v*f-p*S*f-x*c*_+s*S*_+p*c*w-s*v*w,O=p*T*f-x*g*f+x*l*_-s*T*_-p*l*w+s*g*w,F=x*g*c-p*T*c-x*l*v+s*T*v+p*l*S-s*g*S,B=t*I+i*R+r*O+a*F;if(B===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/B;return e[0]=I*L,e[1]=(T*v*a-g*S*a-T*r*_+i*S*_+g*r*w-i*v*w)*L,e[2]=(l*S*a-T*c*a+T*r*f-i*S*f-l*r*w+i*c*w)*L,e[3]=(g*c*a-l*v*a-g*r*f+i*v*f+l*r*_-i*c*_)*L,e[4]=R*L,e[5]=(p*S*a-x*v*a+x*r*_-t*S*_-p*r*w+t*v*w)*L,e[6]=(x*c*a-s*S*a-x*r*f+t*S*f+s*r*w-t*c*w)*L,e[7]=(s*v*a-p*c*a+p*r*f-t*v*f-s*r*_+t*c*_)*L,e[8]=O*L,e[9]=(x*g*a-p*T*a-x*i*_+t*T*_+p*i*w-t*g*w)*L,e[10]=(s*T*a-x*l*a+x*i*f-t*T*f-s*i*w+t*l*w)*L,e[11]=(p*l*a-s*g*a-p*i*f+t*g*f+s*i*_-t*l*_)*L,e[12]=F*L,e[13]=(p*T*r-x*g*r+x*i*v-t*T*v-p*i*S+t*g*S)*L,e[14]=(x*l*r-s*T*r-x*i*c+t*T*c+s*i*S-t*l*S)*L,e[15]=(s*g*r-p*l*r+p*i*c-t*g*c-s*i*v+t*l*v)*L,this}scale(e){const t=this.elements,i=e.x,r=e.y,a=e.z;return t[0]*=i,t[4]*=r,t[8]*=a,t[1]*=i,t[5]*=r,t[9]*=a,t[2]*=i,t[6]*=r,t[10]*=a,t[3]*=i,t[7]*=r,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),a=1-i,s=e.x,l=e.y,c=e.z,f=a*s,p=a*l;return this.set(f*s+i,f*l-r*c,f*c+r*l,0,f*l+r*c,p*l+i,p*c-r*s,0,f*c-r*l,p*c+r*s,a*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,a,s){return this.set(1,i,a,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,a=t._x,s=t._y,l=t._z,c=t._w,f=a+a,p=s+s,g=l+l,v=a*f,_=a*p,x=a*g,T=s*p,S=s*g,w=l*g,I=c*f,R=c*p,O=c*g,F=i.x,B=i.y,L=i.z;return r[0]=(1-(T+w))*F,r[1]=(_+O)*F,r[2]=(x-R)*F,r[3]=0,r[4]=(_-O)*B,r[5]=(1-(v+w))*B,r[6]=(S+I)*B,r[7]=0,r[8]=(x+R)*L,r[9]=(S-I)*L,r[10]=(1-(v+T))*L,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;if(e.x=r[12],e.y=r[13],e.z=r[14],this.determinant()===0)return i.set(1,1,1),t.identity(),this;let a=hv.set(r[0],r[1],r[2]).length();const s=hv.set(r[4],r[5],r[6]).length(),l=hv.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),bu.copy(this);const f=1/a,p=1/s,g=1/l;return bu.elements[0]*=f,bu.elements[1]*=f,bu.elements[2]*=f,bu.elements[4]*=p,bu.elements[5]*=p,bu.elements[6]*=p,bu.elements[8]*=g,bu.elements[9]*=g,bu.elements[10]*=g,t.setFromRotationMatrix(bu),i.x=a,i.y=s,i.z=l,this}makePerspective(e,t,i,r,a,s,l=Zo,c=!1){const f=this.elements,p=2*a/(t-e),g=2*a/(i-r),v=(t+e)/(t-e),_=(i+r)/(i-r);let x,T;if(c)x=a/(s-a),T=s*a/(s-a);else if(l===Zo)x=-(s+a)/(s-a),T=-2*s*a/(s-a);else if(l===uy)x=-s/(s-a),T=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return f[0]=p,f[4]=0,f[8]=v,f[12]=0,f[1]=0,f[5]=g,f[9]=_,f[13]=0,f[2]=0,f[6]=0,f[10]=x,f[14]=T,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(e,t,i,r,a,s,l=Zo,c=!1){const f=this.elements,p=2/(t-e),g=2/(i-r),v=-(t+e)/(t-e),_=-(i+r)/(i-r);let x,T;if(c)x=1/(s-a),T=s/(s-a);else if(l===Zo)x=-2/(s-a),T=-(s+a)/(s-a);else if(l===uy)x=-1/(s-a),T=-a/(s-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return f[0]=p,f[4]=0,f[8]=0,f[12]=v,f[1]=0,f[5]=g,f[9]=0,f[13]=_,f[2]=0,f[6]=0,f[10]=x,f[14]=T,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const hv=new ie,bu=new pn,WK=new ie(0,0,0),qK=new ie(1,1,1),dd=new ie,m1=new ie,Xo=new ie,Yk=new pn,Kk=new Ts;class il{constructor(e=0,t=0,i=0,r=il.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,a=r[0],s=r[4],l=r[8],c=r[1],f=r[5],p=r[9],g=r[2],v=r[6],_=r[10];switch(t){case"XYZ":this._y=Math.asin(fn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-p,_),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(v,f),this._z=0);break;case"YXZ":this._x=Math.asin(-fn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(l,_),this._z=Math.atan2(c,f)):(this._y=Math.atan2(-g,a),this._z=0);break;case"ZXY":this._x=Math.asin(fn(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-g,_),this._z=Math.atan2(-s,f)):(this._y=0,this._z=Math.atan2(c,a));break;case"ZYX":this._y=Math.asin(-fn(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(v,_),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-s,f));break;case"YZX":this._z=Math.asin(fn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-p,f),this._y=Math.atan2(-g,a)):(this._x=0,this._y=Math.atan2(l,_));break;case"XZY":this._z=Math.asin(-fn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(v,f),this._y=Math.atan2(l,a)):(this._x=Math.atan2(-p,_),this._y=0);break;default:Mt("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return Yk.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Yk,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Kk.setFromEuler(this),this.setFromQuaternion(Kk,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}il.DEFAULT_ORDER="XYZ";class hy{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let $K=0;const Zk=new ie,dv=new Ts,kf=new pn,g1=new ie,b_=new ie,XK=new ie,YK=new Ts,Qk=new ie(1,0,0),Jk=new ie(0,1,0),eU=new ie(0,0,1),tU={type:"added"},KK={type:"removed"},pv={type:"childadded",child:null},WC={type:"childremoved",child:null};class ni extends Qc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:$K++}),this.uuid=el(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ni.DEFAULT_UP.clone();const e=new ie,t=new il,i=new Ts,r=new ie(1,1,1);function a(){i.setFromEuler(t,!1)}function s(){t.setFromQuaternion(i,void 0,!1)}t._onChange(a),i._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new pn},normalMatrix:{value:new Tn}}),this.matrix=new pn,this.matrixWorld=new pn,this.matrixAutoUpdate=ni.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ni.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new hy,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return dv.setFromAxisAngle(e,t),this.quaternion.multiply(dv),this}rotateOnWorldAxis(e,t){return dv.setFromAxisAngle(e,t),this.quaternion.premultiply(dv),this}rotateX(e){return this.rotateOnAxis(Qk,e)}rotateY(e){return this.rotateOnAxis(Jk,e)}rotateZ(e){return this.rotateOnAxis(eU,e)}translateOnAxis(e,t){return Zk.copy(e).applyQuaternion(this.quaternion),this.position.add(Zk.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Qk,e)}translateY(e){return this.translateOnAxis(Jk,e)}translateZ(e){return this.translateOnAxis(eU,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(kf.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?g1.copy(e):g1.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),b_.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?kf.lookAt(b_,g1,this.up):kf.lookAt(g1,b_,this.up),this.quaternion.setFromRotationMatrix(kf),r&&(kf.extractRotation(r.matrixWorld),dv.setFromRotationMatrix(kf),this.quaternion.premultiply(dv.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(Yt("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(tU),pv.child=e,this.dispatchEvent(pv),pv.child=null):Yt("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(KK),WC.child=e,this.dispatchEvent(WC),WC.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),kf.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),kf.multiply(e.parent.matrixWorld)),e.applyMatrix4(kf),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(tU),pv.child=e,this.dispatchEvent(pv),pv.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const s=this.children[i].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(b_,e,XK),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(b_,YK,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(l=>({...l,boundingBox:l.boundingBox?l.boundingBox.toJSON():void 0,boundingSphere:l.boundingSphere?l.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(l=>({...l})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function a(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let f=0,p=c.length;f<p;f++){const g=c[f];a(e.shapes,g)}else a(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,f=this.material.length;c<f;c++)l.push(a(e.materials,this.material[c]));r.material=l}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];r.animations.push(a(e.animations,c))}}if(t){const l=s(e.geometries),c=s(e.materials),f=s(e.textures),p=s(e.images),g=s(e.shapes),v=s(e.skeletons),_=s(e.animations),x=s(e.nodes);l.length>0&&(i.geometries=l),c.length>0&&(i.materials=c),f.length>0&&(i.textures=f),p.length>0&&(i.images=p),g.length>0&&(i.shapes=g),v.length>0&&(i.skeletons=v),_.length>0&&(i.animations=_),x.length>0&&(i.nodes=x)}return i.object=r,i;function s(l){const c=[];for(const f in l){const p=l[f];delete p.metadata,c.push(p)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}ni.DEFAULT_UP=new ie(0,1,0);ni.DEFAULT_MATRIX_AUTO_UPDATE=!0;ni.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const xu=new ie,Uf=new ie,qC=new ie,zf=new ie,mv=new ie,gv=new ie,nU=new ie,$C=new ie,XC=new ie,YC=new ie,KC=new Ri,ZC=new Ri,QC=new Ri;class Co{constructor(e=new ie,t=new ie,i=new ie){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),xu.subVectors(e,t),r.cross(xu);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,t,i,r,a){xu.subVectors(r,t),Uf.subVectors(i,t),qC.subVectors(e,t);const s=xu.dot(xu),l=xu.dot(Uf),c=xu.dot(qC),f=Uf.dot(Uf),p=Uf.dot(qC),g=s*f-l*l;if(g===0)return a.set(0,0,0),null;const v=1/g,_=(f*c-l*p)*v,x=(s*p-l*c)*v;return a.set(1-_-x,x,_)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,zf)===null?!1:zf.x>=0&&zf.y>=0&&zf.x+zf.y<=1}static getInterpolation(e,t,i,r,a,s,l,c){return this.getBarycoord(e,t,i,r,zf)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(a,zf.x),c.addScaledVector(s,zf.y),c.addScaledVector(l,zf.z),c)}static getInterpolatedAttribute(e,t,i,r,a,s){return KC.setScalar(0),ZC.setScalar(0),QC.setScalar(0),KC.fromBufferAttribute(e,t),ZC.fromBufferAttribute(e,i),QC.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(KC,a.x),s.addScaledVector(ZC,a.y),s.addScaledVector(QC,a.z),s}static isFrontFacing(e,t,i,r){return xu.subVectors(i,t),Uf.subVectors(e,t),xu.cross(Uf).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return xu.subVectors(this.c,this.b),Uf.subVectors(this.a,this.b),xu.cross(Uf).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Co.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Co.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,a){return Co.getInterpolation(e,this.a,this.b,this.c,t,i,r,a)}containsPoint(e){return Co.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Co.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,a=this.c;let s,l;mv.subVectors(r,i),gv.subVectors(a,i),$C.subVectors(e,i);const c=mv.dot($C),f=gv.dot($C);if(c<=0&&f<=0)return t.copy(i);XC.subVectors(e,r);const p=mv.dot(XC),g=gv.dot(XC);if(p>=0&&g<=p)return t.copy(r);const v=c*g-p*f;if(v<=0&&c>=0&&p<=0)return s=c/(c-p),t.copy(i).addScaledVector(mv,s);YC.subVectors(e,a);const _=mv.dot(YC),x=gv.dot(YC);if(x>=0&&_<=x)return t.copy(a);const T=_*f-c*x;if(T<=0&&f>=0&&x<=0)return l=f/(f-x),t.copy(i).addScaledVector(gv,l);const S=p*x-_*g;if(S<=0&&g-p>=0&&_-x>=0)return nU.subVectors(a,r),l=(g-p)/(g-p+(_-x)),t.copy(r).addScaledVector(nU,l);const w=1/(S+T+v);return s=T*w,l=v*w,t.copy(i).addScaledVector(mv,s).addScaledVector(gv,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const $6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},pd={h:0,s:0,l:0},v1={h:0,s:0,l:0};function JC(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let Dt=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Xa){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,qn.colorSpaceToWorking(this,t),this}setRGB(e,t,i,r=qn.workingColorSpace){return this.r=e,this.g=t,this.b=i,qn.colorSpaceToWorking(this,r),this}setHSL(e,t,i,r=qn.workingColorSpace){if(e=UO(e,1),t=fn(t,0,1),i=fn(i,0,1),t===0)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+t):i+t-i*t,s=2*i-a;this.r=JC(s,a,e+1/3),this.g=JC(s,a,e),this.b=JC(s,a,e-1/3)}return qn.colorSpaceToWorking(this,r),this}setStyle(e,t=Xa){function i(a){a!==void 0&&parseFloat(a)<1&&Mt("Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=r[1],l=r[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:Mt("Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=r[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(a,16),t);Mt("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Xa){const i=$6[e.toLowerCase()];return i!==void 0?this.setHex(i,t):Mt("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Kf(e.r),this.g=Kf(e.g),this.b=Kf(e.b),this}copyLinearToSRGB(e){return this.r=Zv(e.r),this.g=Zv(e.g),this.b=Zv(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Xa){return qn.workingToColorSpace(vs.copy(this),e),Math.round(fn(vs.r*255,0,255))*65536+Math.round(fn(vs.g*255,0,255))*256+Math.round(fn(vs.b*255,0,255))}getHexString(e=Xa){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=qn.workingColorSpace){qn.workingToColorSpace(vs.copy(this),t);const i=vs.r,r=vs.g,a=vs.b,s=Math.max(i,r,a),l=Math.min(i,r,a);let c,f;const p=(l+s)/2;if(l===s)c=0,f=0;else{const g=s-l;switch(f=p<=.5?g/(s+l):g/(2-s-l),s){case i:c=(r-a)/g+(r<a?6:0);break;case r:c=(a-i)/g+2;break;case a:c=(i-r)/g+4;break}c/=6}return e.h=c,e.s=f,e.l=p,e}getRGB(e,t=qn.workingColorSpace){return qn.workingToColorSpace(vs.copy(this),t),e.r=vs.r,e.g=vs.g,e.b=vs.b,e}getStyle(e=Xa){qn.workingToColorSpace(vs.copy(this),e);const t=vs.r,i=vs.g,r=vs.b;return e!==Xa?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(pd),this.setHSL(pd.h+e,pd.s+t,pd.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(pd),e.getHSL(v1);const i=rb(pd.h,v1.h,t),r=rb(pd.s,v1.s,t),a=rb(pd.l,v1.l,t);return this.setHSL(i,r,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,a=e.elements;return this.r=a[0]*t+a[3]*i+a[6]*r,this.g=a[1]*t+a[4]*i+a[7]*r,this.b=a[2]*t+a[5]*i+a[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const vs=new Dt;Dt.NAMES=$6;let ZK=0;class Cs extends Qc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ZK++}),this.uuid=el(),this.name="",this.type="Material",this.blending=Im,this.side=eh,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Yw,this.blendDst=Kw,this.blendEquation=wd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Dt(0,0,0),this.blendAlpha=0,this.depthFunc=Fm,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=DR,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=fm,this.stencilZFail=fm,this.stencilZPass=fm,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){Mt(`Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){Mt(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Im&&(i.blending=this.blending),this.side!==eh&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Yw&&(i.blendSrc=this.blendSrc),this.blendDst!==Kw&&(i.blendDst=this.blendDst),this.blendEquation!==wd&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Fm&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==DR&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==fm&&(i.stencilFail=this.stencilFail),this.stencilZFail!==fm&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==fm&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.allowOverride===!1&&(i.allowOverride=!1),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(a){const s=[];for(const l in a){const c=a[l];delete c.metadata,s.push(c)}return s}if(t){const a=r(e.textures),s=r(e.images);a.length>0&&(i.textures=a),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let a=0;a!==r;++a)i[a]=t[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ip extends Cs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Dt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new il,this.combine=lx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Hf=QK();function QK(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const f=c-127;f<-27?(i[c]=0,i[c|256]=32768,r[c]=24,r[c|256]=24):f<-14?(i[c]=1024>>-f-14,i[c|256]=1024>>-f-14|32768,r[c]=-f-1,r[c|256]=-f-1):f<=15?(i[c]=f+15<<10,i[c|256]=f+15<<10|32768,r[c]=13,r[c|256]=13):f<128?(i[c]=31744,i[c|256]=64512,r[c]=24,r[c|256]=24):(i[c]=31744,i[c|256]=64512,r[c]=13,r[c|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let f=c<<13,p=0;for(;(f&8388608)===0;)f<<=1,p-=8388608;f&=-8388609,p+=947912704,a[c]=f|p}for(let c=1024;c<2048;++c)a[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)s[c]=c<<23;s[31]=1199570944,s[32]=2147483648;for(let c=33;c<63;++c)s[c]=2147483648+(c-32<<23);s[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:a,exponentTable:s,offsetTable:l}}function Ao(n){Math.abs(n)>65504&&Mt("DataUtils.toHalfFloat(): Value out of range."),n=fn(n,-65504,65504),Hf.floatView[0]=n;const e=Hf.uint32View[0],t=e>>23&511;return Hf.baseTable[t]+((e&8388607)>>Hf.shiftTable[t])}function B_(n){const e=n>>10;return Hf.uint32View[0]=Hf.mantissaTable[Hf.offsetTable[e]+(n&1023)]+Hf.exponentTable[e],Hf.floatView[0]}class JK{static toHalfFloat(e){return Ao(e)}static fromHalfFloat(e){return B_(e)}}const jr=new ie,y1=new tt;let eZ=0;class hi{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:eZ++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Eb,this.updateRanges=[],this.gpuType=$s,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)y1.fromBufferAttribute(this,t),y1.applyMatrix3(e),this.setXY(t,y1.x,y1.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)jr.fromBufferAttribute(this,t),jr.applyMatrix3(e),this.setXYZ(t,jr.x,jr.y,jr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)jr.fromBufferAttribute(this,t),jr.applyMatrix4(e),this.setXYZ(t,jr.x,jr.y,jr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)jr.fromBufferAttribute(this,t),jr.applyNormalMatrix(e),this.setXYZ(t,jr.x,jr.y,jr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)jr.fromBufferAttribute(this,t),jr.transformDirection(e),this.setXYZ(t,jr.x,jr.y,jr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=qs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Pn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=qs(t,this.array)),t}setX(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=qs(t,this.array)),t}setY(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=qs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=qs(t,this.array)),t}setW(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Pn(t,this.array),i=Pn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Pn(t,this.array),i=Pn(i,this.array),r=Pn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=Pn(t,this.array),i=Pn(i,this.array),r=Pn(r,this.array),a=Pn(a,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Eb&&(e.usage=this.usage),e}}class tZ extends hi{constructor(e,t,i){super(new Int8Array(e),t,i)}}class nZ extends hi{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class iZ extends hi{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class rZ extends hi{constructor(e,t,i){super(new Int16Array(e),t,i)}}class FO extends hi{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class aZ extends hi{constructor(e,t,i){super(new Int32Array(e),t,i)}}class BO extends hi{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class sZ extends hi{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=B_(this.array[e*this.itemSize]);return this.normalized&&(t=qs(t,this.array)),t}setX(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize]=Ao(t),this}getY(e){let t=B_(this.array[e*this.itemSize+1]);return this.normalized&&(t=qs(t,this.array)),t}setY(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize+1]=Ao(t),this}getZ(e){let t=B_(this.array[e*this.itemSize+2]);return this.normalized&&(t=qs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize+2]=Ao(t),this}getW(e){let t=B_(this.array[e*this.itemSize+3]);return this.normalized&&(t=qs(t,this.array)),t}setW(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize+3]=Ao(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Pn(t,this.array),i=Pn(i,this.array)),this.array[e+0]=Ao(t),this.array[e+1]=Ao(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Pn(t,this.array),i=Pn(i,this.array),r=Pn(r,this.array)),this.array[e+0]=Ao(t),this.array[e+1]=Ao(i),this.array[e+2]=Ao(r),this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=Pn(t,this.array),i=Pn(i,this.array),r=Pn(r,this.array),a=Pn(a,this.array)),this.array[e+0]=Ao(t),this.array[e+1]=Ao(i),this.array[e+2]=Ao(r),this.array[e+3]=Ao(a),this}}class zt extends hi{constructor(e,t,i){super(new Float32Array(e),t,i)}}let oZ=0;const kl=new pn,eI=new ni,vv=new ie,Yo=new Za,x_=new Za,_a=new ie;class gn extends Qc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:oZ++}),this.uuid=el(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(j6(e)?BO:FO)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const a=new Tn().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return kl.makeRotationFromQuaternion(e),this.applyMatrix4(kl),this}rotateX(e){return kl.makeRotationX(e),this.applyMatrix4(kl),this}rotateY(e){return kl.makeRotationY(e),this.applyMatrix4(kl),this}rotateZ(e){return kl.makeRotationZ(e),this.applyMatrix4(kl),this}translate(e,t,i){return kl.makeTranslation(e,t,i),this.applyMatrix4(kl),this}scale(e,t,i){return kl.makeScale(e,t,i),this.applyMatrix4(kl),this}lookAt(e){return eI.lookAt(e),eI.updateMatrix(),this.applyMatrix4(eI.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(vv).negate(),this.translate(vv.x,vv.y,vv.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,a=e.length;r<a;r++){const s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new zt(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const a=e[r];t.setXYZ(r,a.x,a.y,a.z||0)}e.length>t.count&&Mt("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Za);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Yt("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ie(-1/0,-1/0,-1/0),new ie(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const a=t[i];Yo.setFromBufferAttribute(a),this.morphTargetsRelative?(_a.addVectors(this.boundingBox.min,Yo.min),this.boundingBox.expandByPoint(_a),_a.addVectors(this.boundingBox.max,Yo.max),this.boundingBox.expandByPoint(_a)):(this.boundingBox.expandByPoint(Yo.min),this.boundingBox.expandByPoint(Yo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Yt('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ea);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Yt("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ie,1/0);return}if(e){const i=this.boundingSphere.center;if(Yo.setFromBufferAttribute(e),t)for(let a=0,s=t.length;a<s;a++){const l=t[a];x_.setFromBufferAttribute(l),this.morphTargetsRelative?(_a.addVectors(Yo.min,x_.min),Yo.expandByPoint(_a),_a.addVectors(Yo.max,x_.max),Yo.expandByPoint(_a)):(Yo.expandByPoint(x_.min),Yo.expandByPoint(x_.max))}Yo.getCenter(i);let r=0;for(let a=0,s=e.count;a<s;a++)_a.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(_a));if(t)for(let a=0,s=t.length;a<s;a++){const l=t[a],c=this.morphTargetsRelative;for(let f=0,p=l.count;f<p;f++)_a.fromBufferAttribute(l,f),c&&(vv.fromBufferAttribute(e,f),_a.add(vv)),r=Math.max(r,i.distanceToSquared(_a))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&Yt('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){Yt("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new hi(new Float32Array(4*i.count),4));const s=this.getAttribute("tangent"),l=[],c=[];for(let z=0;z<i.count;z++)l[z]=new ie,c[z]=new ie;const f=new ie,p=new ie,g=new ie,v=new tt,_=new tt,x=new tt,T=new ie,S=new ie;function w(z,P,D){f.fromBufferAttribute(i,z),p.fromBufferAttribute(i,P),g.fromBufferAttribute(i,D),v.fromBufferAttribute(a,z),_.fromBufferAttribute(a,P),x.fromBufferAttribute(a,D),p.sub(f),g.sub(f),_.sub(v),x.sub(v);const j=1/(_.x*x.y-x.x*_.y);isFinite(j)&&(T.copy(p).multiplyScalar(x.y).addScaledVector(g,-_.y).multiplyScalar(j),S.copy(g).multiplyScalar(_.x).addScaledVector(p,-x.x).multiplyScalar(j),l[z].add(T),l[P].add(T),l[D].add(T),c[z].add(S),c[P].add(S),c[D].add(S))}let I=this.groups;I.length===0&&(I=[{start:0,count:e.count}]);for(let z=0,P=I.length;z<P;++z){const D=I[z],j=D.start,q=D.count;for(let W=j,se=j+q;W<se;W+=3)w(e.getX(W+0),e.getX(W+1),e.getX(W+2))}const R=new ie,O=new ie,F=new ie,B=new ie;function L(z){F.fromBufferAttribute(r,z),B.copy(F);const P=l[z];R.copy(P),R.sub(F.multiplyScalar(F.dot(P))).normalize(),O.crossVectors(B,P);const j=O.dot(c[z])<0?-1:1;s.setXYZW(z,R.x,R.y,R.z,j)}for(let z=0,P=I.length;z<P;++z){const D=I[z],j=D.start,q=D.count;for(let W=j,se=j+q;W<se;W+=3)L(e.getX(W+0)),L(e.getX(W+1)),L(e.getX(W+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new hi(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let v=0,_=i.count;v<_;v++)i.setXYZ(v,0,0,0);const r=new ie,a=new ie,s=new ie,l=new ie,c=new ie,f=new ie,p=new ie,g=new ie;if(e)for(let v=0,_=e.count;v<_;v+=3){const x=e.getX(v+0),T=e.getX(v+1),S=e.getX(v+2);r.fromBufferAttribute(t,x),a.fromBufferAttribute(t,T),s.fromBufferAttribute(t,S),p.subVectors(s,a),g.subVectors(r,a),p.cross(g),l.fromBufferAttribute(i,x),c.fromBufferAttribute(i,T),f.fromBufferAttribute(i,S),l.add(p),c.add(p),f.add(p),i.setXYZ(x,l.x,l.y,l.z),i.setXYZ(T,c.x,c.y,c.z),i.setXYZ(S,f.x,f.y,f.z)}else for(let v=0,_=t.count;v<_;v+=3)r.fromBufferAttribute(t,v+0),a.fromBufferAttribute(t,v+1),s.fromBufferAttribute(t,v+2),p.subVectors(s,a),g.subVectors(r,a),p.cross(g),i.setXYZ(v+0,p.x,p.y,p.z),i.setXYZ(v+1,p.x,p.y,p.z),i.setXYZ(v+2,p.x,p.y,p.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)_a.fromBufferAttribute(e,t),_a.normalize(),e.setXYZ(t,_a.x,_a.y,_a.z)}toNonIndexed(){function e(l,c){const f=l.array,p=l.itemSize,g=l.normalized,v=new f.constructor(c.length*p);let _=0,x=0;for(let T=0,S=c.length;T<S;T++){l.isInterleavedBufferAttribute?_=c[T]*l.data.stride+l.offset:_=c[T]*p;for(let w=0;w<p;w++)v[x++]=f[_++]}return new hi(v,p,g)}if(this.index===null)return Mt("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new gn,i=this.index.array,r=this.attributes;for(const l in r){const c=r[l],f=e(c,i);t.setAttribute(l,f)}const a=this.morphAttributes;for(const l in a){const c=[],f=a[l];for(let p=0,g=f.length;p<g;p++){const v=f[p],_=e(v,i);c.push(_)}t.morphAttributes[l]=c}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let l=0,c=s.length;l<c;l++){const f=s[l];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const f in c)c[f]!==void 0&&(e[f]=c[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i){const f=i[c];e.data.attributes[c]=f.toJSON(e.data)}const r={};let a=!1;for(const c in this.morphAttributes){const f=this.morphAttributes[c],p=[];for(let g=0,v=f.length;g<v;g++){const _=f[g];p.push(_.toJSON(e.data))}p.length>0&&(r[c]=p,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere=l.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const f in r){const p=r[f];this.setAttribute(f,p.clone(t))}const a=e.morphAttributes;for(const f in a){const p=[],g=a[f];for(let v=0,_=g.length;v<_;v++)p.push(g[v].clone(t));this.morphAttributes[f]=p}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let f=0,p=s.length;f<p;f++){const g=s[f];this.addGroup(g.start,g.count,g.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const iU=new pn,Yp=new ag,_1=new Ea,rU=new ie,b1=new ie,x1=new ie,S1=new ie,tI=new ie,w1=new ie,aU=new ie,E1=new ie;class $r extends ni{constructor(e=new gn,t=new ip){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const l=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,a=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(a&&l){w1.set(0,0,0);for(let c=0,f=a.length;c<f;c++){const p=l[c],g=a[c];p!==0&&(tI.fromBufferAttribute(g,e),s?w1.addScaledVector(tI,p):w1.addScaledVector(tI.sub(t),p))}t.add(w1)}return t}raycast(e,t){const i=this.geometry,r=this.material,a=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),_1.copy(i.boundingSphere),_1.applyMatrix4(a),Yp.copy(e.ray).recast(e.near),!(_1.containsPoint(Yp.origin)===!1&&(Yp.intersectSphere(_1,rU)===null||Yp.origin.distanceToSquared(rU)>(e.far-e.near)**2))&&(iU.copy(a).invert(),Yp.copy(e.ray).applyMatrix4(iU),!(i.boundingBox!==null&&Yp.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Yp)))}_computeIntersections(e,t,i){let r;const a=this.geometry,s=this.material,l=a.index,c=a.attributes.position,f=a.attributes.uv,p=a.attributes.uv1,g=a.attributes.normal,v=a.groups,_=a.drawRange;if(l!==null)if(Array.isArray(s))for(let x=0,T=v.length;x<T;x++){const S=v[x],w=s[S.materialIndex],I=Math.max(S.start,_.start),R=Math.min(l.count,Math.min(S.start+S.count,_.start+_.count));for(let O=I,F=R;O<F;O+=3){const B=l.getX(O),L=l.getX(O+1),z=l.getX(O+2);r=T1(this,w,e,i,f,p,g,B,L,z),r&&(r.faceIndex=Math.floor(O/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const x=Math.max(0,_.start),T=Math.min(l.count,_.start+_.count);for(let S=x,w=T;S<w;S+=3){const I=l.getX(S),R=l.getX(S+1),O=l.getX(S+2);r=T1(this,s,e,i,f,p,g,I,R,O),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}else if(c!==void 0)if(Array.isArray(s))for(let x=0,T=v.length;x<T;x++){const S=v[x],w=s[S.materialIndex],I=Math.max(S.start,_.start),R=Math.min(c.count,Math.min(S.start+S.count,_.start+_.count));for(let O=I,F=R;O<F;O+=3){const B=O,L=O+1,z=O+2;r=T1(this,w,e,i,f,p,g,B,L,z),r&&(r.faceIndex=Math.floor(O/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const x=Math.max(0,_.start),T=Math.min(c.count,_.start+_.count);for(let S=x,w=T;S<w;S+=3){const I=S,R=S+1,O=S+2;r=T1(this,s,e,i,f,p,g,I,R,O),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}}}function lZ(n,e,t,i,r,a,s,l){let c;if(e.side===Ks?c=i.intersectTriangle(s,a,r,!0,l):c=i.intersectTriangle(r,a,s,e.side===eh,l),c===null)return null;E1.copy(l),E1.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(E1);return f<t.near||f>t.far?null:{distance:f,point:E1.clone(),object:n}}function T1(n,e,t,i,r,a,s,l,c,f){n.getVertexPosition(l,b1),n.getVertexPosition(c,x1),n.getVertexPosition(f,S1);const p=lZ(n,e,t,i,b1,x1,S1,aU);if(p){const g=new ie;Co.getBarycoord(aU,b1,x1,S1,g),r&&(p.uv=Co.getInterpolatedAttribute(r,l,c,f,g,new tt)),a&&(p.uv1=Co.getInterpolatedAttribute(a,l,c,f,g,new tt)),s&&(p.normal=Co.getInterpolatedAttribute(s,l,c,f,g,new ie),p.normal.dot(i.direction)>0&&p.normal.multiplyScalar(-1));const v={a:l,b:c,c:f,normal:new ie,materialIndex:0};Co.getNormal(b1,x1,S1,v.normal),p.face=v,p.barycoord=g}return p}class sg extends gn{constructor(e=1,t=1,i=1,r=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:a,depthSegments:s};const l=this;r=Math.floor(r),a=Math.floor(a),s=Math.floor(s);const c=[],f=[],p=[],g=[];let v=0,_=0;x("z","y","x",-1,-1,i,t,e,s,a,0),x("z","y","x",1,-1,i,t,-e,s,a,1),x("x","z","y",1,1,e,i,t,r,s,2),x("x","z","y",1,-1,e,i,-t,r,s,3),x("x","y","z",1,-1,e,t,i,r,a,4),x("x","y","z",-1,-1,e,t,-i,r,a,5),this.setIndex(c),this.setAttribute("position",new zt(f,3)),this.setAttribute("normal",new zt(p,3)),this.setAttribute("uv",new zt(g,2));function x(T,S,w,I,R,O,F,B,L,z,P){const D=O/L,j=F/z,q=O/2,W=F/2,se=B/2,ue=L+1,J=z+1;let ae=0,he=0;const Te=new ie;for(let Re=0;Re<J;Re++){const Q=Re*j-W;for(let de=0;de<ue;de++){const Me=de*D-q;Te[T]=Me*I,Te[S]=Q*R,Te[w]=se,f.push(Te.x,Te.y,Te.z),Te[T]=0,Te[S]=0,Te[w]=B>0?1:-1,p.push(Te.x,Te.y,Te.z),g.push(de/L),g.push(1-Re/z),ae+=1}}for(let Re=0;Re<z;Re++)for(let Q=0;Q<L;Q++){const de=v+Q+ue*Re,Me=v+Q+ue*(Re+1),We=v+(Q+1)+ue*(Re+1),vt=v+(Q+1)+ue*Re;c.push(de,Me,vt),c.push(Me,We,vt),he+=6}l.addGroup(_,he,P),_+=he,v+=ae}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sg(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function dy(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(Mt("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Hs(n){const e={};for(let t=0;t<n.length;t++){const i=dy(n[t]);for(const r in i)e[r]=i[r]}return e}function uZ(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function X6(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:qn.workingColorSpace}const Y6={clone:dy,merge:Hs};var cZ=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fZ=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Hl extends Cs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=cZ,this.fragmentShader=fZ,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=dy(e.uniforms),this.uniformsGroups=uZ(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class bA extends ni{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new pn,this.projectionMatrix=new pn,this.projectionMatrixInverse=new pn,this.coordinateSystem=Zo,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const md=new ie,sU=new tt,oU=new tt;class Or extends bA{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=fy*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Pm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return fy*2*Math.atan(Math.tan(Pm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){md.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(md.x,md.y).multiplyScalar(-e/md.z),md.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(md.x,md.y).multiplyScalar(-e/md.z)}getViewSize(e,t){return this.getViewBounds(e,sU,oU),t.subVectors(oU,sU)}setViewOffset(e,t,i,r,a,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Pm*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,a=-.5*r;const s=this.view;if(this.view!==null&&this.view.enabled){const c=s.fullWidth,f=s.fullHeight;a+=s.offsetX*r/c,t-=s.offsetY*i/f,r*=s.width/c,i*=s.height/f}const l=this.filmOffset;l!==0&&(a+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const yv=-90,_v=1;class K6 extends ni{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Or(yv,_v,e,t);r.layers=this.layers,this.add(r);const a=new Or(yv,_v,e,t);a.layers=this.layers,this.add(a);const s=new Or(yv,_v,e,t);s.layers=this.layers,this.add(s);const l=new Or(yv,_v,e,t);l.layers=this.layers,this.add(l);const c=new Or(yv,_v,e,t);c.layers=this.layers,this.add(c);const f=new Or(yv,_v,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,a,s,l,c]=t;for(const f of t)this.remove(f);if(e===Zo)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===uy)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,l,c,f,p]=this.children,g=e.getRenderTarget(),v=e.getActiveCubeFace(),_=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const T=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,a),e.setRenderTarget(i,1,r),e.render(t,s),e.setRenderTarget(i,2,r),e.render(t,l),e.setRenderTarget(i,3,r),e.render(t,c),e.setRenderTarget(i,4,r),e.render(t,f),i.texture.generateMipmaps=T,e.setRenderTarget(i,5,r),e.render(t,p),e.setRenderTarget(g,v,_),e.xr.enabled=x,i.texture.needsPMREMUpdate=!0}}class cx extends Er{constructor(e=[],t=Bc,i,r,a,s,l,c,f,p){super(e,t,i,r,a,s,l,c,f,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class VO extends tl{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new cx(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new sg(5,5,5),a=new Hl({name:"CubemapFromEquirect",uniforms:dy(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ks,blending:Dc});a.uniforms.tEquirect.value=t;const s=new $r(r,a),l=t.minFilter;return t.minFilter===Pc&&(t.minFilter=Ki),new K6(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(a)}}class qv extends ni{constructor(){super(),this.isGroup=!0,this.type="Group"}}const hZ={type:"move"};class Cw{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new qv,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new qv,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ie,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ie),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new qv,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ie,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ie),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,a=null,s=null;const l=this._targetRay,c=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){s=!0;for(const T of e.hand.values()){const S=t.getJointPose(T,i),w=this._getHandJoint(f,T);S!==null&&(w.matrix.fromArray(S.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=S.radius),w.visible=S!==null}const p=f.joints["index-finger-tip"],g=f.joints["thumb-tip"],v=p.position.distanceTo(g.position),_=.02,x=.005;f.inputState.pinching&&v>_+x?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&v<=_-x&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,i),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&a!==null&&(r=a),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(hZ)))}return l!==null&&(l.visible=r!==null),c!==null&&(c.visible=a!==null),f!==null&&(f.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new qv;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class xA{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Dt(e),this.density=t}clone(){return new xA(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class SA{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Dt(e),this.near=t,this.far=i}clone(){return new SA(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class jO extends ni{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new il,this.environmentIntensity=1,this.environmentRotation=new il,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class wA{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Eb,this.updateRanges=[],this.version=0,this.uuid=el()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,a=this.stride;r<a;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=el()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=el()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const js=new ie;class Vm{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)js.fromBufferAttribute(this,t),js.applyMatrix4(e),this.setXYZ(t,js.x,js.y,js.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)js.fromBufferAttribute(this,t),js.applyNormalMatrix(e),this.setXYZ(t,js.x,js.y,js.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)js.fromBufferAttribute(this,t),js.transformDirection(e),this.setXYZ(t,js.x,js.y,js.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=qs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Pn(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Pn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Pn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Pn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Pn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=qs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=qs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=qs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=qs(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pn(t,this.array),i=Pn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pn(t,this.array),i=Pn(i,this.array),r=Pn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pn(t,this.array),i=Pn(i,this.array),r=Pn(r,this.array),a=Pn(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=a,this}clone(e){if(e===void 0){Ab("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return new hi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Vm(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){Ab("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class HO extends Cs{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Dt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let bv;const S_=new ie,xv=new ie,Sv=new ie,wv=new tt,w_=new tt,Z6=new pn,A1=new ie,E_=new ie,M1=new ie,lU=new tt,nI=new tt,uU=new tt;class Q6 extends ni{constructor(e=new HO){if(super(),this.isSprite=!0,this.type="Sprite",bv===void 0){bv=new gn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new wA(t,5);bv.setIndex([0,1,2,0,2,3]),bv.setAttribute("position",new Vm(i,3,0,!1)),bv.setAttribute("uv",new Vm(i,2,3,!1))}this.geometry=bv,this.material=e,this.center=new tt(.5,.5),this.count=1}raycast(e,t){e.camera===null&&Yt('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),xv.setFromMatrixScale(this.matrixWorld),Z6.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Sv.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&xv.multiplyScalar(-Sv.z);const i=this.material.rotation;let r,a;i!==0&&(a=Math.cos(i),r=Math.sin(i));const s=this.center;C1(A1.set(-.5,-.5,0),Sv,s,xv,r,a),C1(E_.set(.5,-.5,0),Sv,s,xv,r,a),C1(M1.set(.5,.5,0),Sv,s,xv,r,a),lU.set(0,0),nI.set(1,0),uU.set(1,1);let l=e.ray.intersectTriangle(A1,E_,M1,!1,S_);if(l===null&&(C1(E_.set(-.5,.5,0),Sv,s,xv,r,a),nI.set(0,1),l=e.ray.intersectTriangle(A1,M1,E_,!1,S_),l===null))return;const c=e.ray.origin.distanceTo(S_);c<e.near||c>e.far||t.push({distance:c,point:S_.clone(),uv:Co.getInterpolation(S_,A1,E_,M1,lU,nI,uU,new tt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function C1(n,e,t,i,r,a){wv.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(w_.x=a*wv.x-r*wv.y,w_.y=r*wv.x+a*wv.y):w_.copy(wv),n.copy(e),n.x+=w_.x,n.y+=w_.y,n.applyMatrix4(Z6)}const I1=new ie,cU=new ie;class J6 extends ni{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const a=t[i];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let a;for(a=0;a<r.length&&!(t<r[a].distance);a++);return r.splice(a,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),e<a)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){I1.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(I1);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){I1.setFromMatrixPosition(e.matrixWorld),cU.setFromMatrixPosition(this.matrixWorld);const i=I1.distanceTo(cU)/e.zoom;t[0].object.visible=!0;let r,a;for(r=1,a=t.length;r<a;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),i>=s)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<a;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,a=i.length;r<a;r++){const s=i[r];t.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return t}}const fU=new ie,hU=new Ri,dU=new Ri,dZ=new ie,pU=new pn,P1=new ie,iI=new Ea,mU=new pn,rI=new ag;class ej extends $r{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=OR,this.bindMatrix=new pn,this.bindMatrixInverse=new pn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Za),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,P1),this.boundingBox.expandByPoint(P1)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ea),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,P1),this.boundingSphere.expandByPoint(P1)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),iI.copy(this.boundingSphere),iI.applyMatrix4(r),e.ray.intersectsSphere(iI)!==!1&&(mU.copy(r).invert(),rI.copy(e.ray).applyMatrix4(mU),!(this.boundingBox!==null&&rI.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,rI)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ri,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===OR?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===P6?this.bindMatrixInverse.copy(this.bindMatrix).invert():Mt("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;hU.fromBufferAttribute(r.attributes.skinIndex,e),dU.fromBufferAttribute(r.attributes.skinWeight,e),fU.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const s=dU.getComponent(a);if(s!==0){const l=hU.getComponent(a);pU.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),t.addScaledVector(dZ.copy(fU).applyMatrix4(pU),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}class GO extends ni{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Iu extends Er{constructor(e=null,t=1,i=1,r,a,s,l,c,f=Dr,p=Dr,g,v){super(null,s,l,c,f,p,r,a,g,v),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const gU=new pn,pZ=new pn;class EA{constructor(e=[],t=[]){this.uuid=el(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){Mt("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new pn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new pn;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const l=e[a]?e[a].matrixWorld:pZ;gU.multiplyMatrices(l,t[a]),gU.toArray(i,a*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new EA(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Iu(t,e,e,Es,$s);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const a=e.bones[i];let s=t[a];s===void 0&&(Mt("Skeleton: No bone found with UUID:",a),s=new GO),this.bones.push(s),this.boneInverses.push(new pn().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,a=t.length;r<a;r++){const s=t[r];e.bones.push(s.uuid);const l=i[r];e.boneInverses.push(l.toArray())}return e}}class py extends hi{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Ev=new pn,vU=new pn,R1=[],yU=new Za,mZ=new pn,T_=new $r,A_=new Ea;class tj extends $r{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new py(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,mZ)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Za),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Ev),yU.copy(e.boundingBox).applyMatrix4(Ev),this.boundingBox.union(yU)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ea),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Ev),A_.copy(e.boundingSphere).applyMatrix4(Ev),this.boundingSphere.union(A_)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,a=i.length+1,s=e*a+1;for(let l=0;l<i.length;l++)i[l]=r[s+l]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(T_.geometry=this.geometry,T_.material=this.material,T_.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),A_.copy(this.boundingSphere),A_.applyMatrix4(i),e.ray.intersectsSphere(A_)!==!1))for(let a=0;a<r;a++){this.getMatrixAt(a,Ev),vU.multiplyMatrices(i,Ev),T_.matrixWorld=vU,T_.raycast(e,R1);for(let s=0,l=R1.length;s<l;s++){const c=R1[s];c.instanceId=a,c.object=this,t.push(c)}R1.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new py(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Iu(new Float32Array(r*this.count),r,this.count,hA,$s));const a=this.morphTexture.source.data.data;let s=0;for(let f=0;f<i.length;f++)s+=i[f];const l=this.geometry.morphTargetsRelative?1:1-s,c=r*e;a[c]=l,a.set(i,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const aI=new ie,gZ=new ie,vZ=new Tn;class Bf{constructor(e=new ie(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=aI.subVectors(i,t).cross(gZ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(aI),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:t.copy(e.start).addScaledVector(i,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||vZ.getNormalMatrix(e),r=this.coplanarPoint(aI).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Kp=new Ea,yZ=new tt(.5,.5),N1=new ie;class Ly{constructor(e=new Bf,t=new Bf,i=new Bf,r=new Bf,a=new Bf,s=new Bf){this.planes=[e,t,i,r,a,s]}set(e,t,i,r,a,s){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(i),l[3].copy(r),l[4].copy(a),l[5].copy(s),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Zo,i=!1){const r=this.planes,a=e.elements,s=a[0],l=a[1],c=a[2],f=a[3],p=a[4],g=a[5],v=a[6],_=a[7],x=a[8],T=a[9],S=a[10],w=a[11],I=a[12],R=a[13],O=a[14],F=a[15];if(r[0].setComponents(f-s,_-p,w-x,F-I).normalize(),r[1].setComponents(f+s,_+p,w+x,F+I).normalize(),r[2].setComponents(f+l,_+g,w+T,F+R).normalize(),r[3].setComponents(f-l,_-g,w-T,F-R).normalize(),i)r[4].setComponents(c,v,S,O).normalize(),r[5].setComponents(f-c,_-v,w-S,F-O).normalize();else if(r[4].setComponents(f-c,_-v,w-S,F-O).normalize(),t===Zo)r[5].setComponents(f+c,_+v,w+S,F+O).normalize();else if(t===uy)r[5].setComponents(c,v,S,O).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Kp.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Kp.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Kp)}intersectsSprite(e){Kp.center.set(0,0,0);const t=yZ.distanceTo(e.center);return Kp.radius=.7071067811865476+t,Kp.applyMatrix4(e.matrixWorld),this.intersectsSphere(Kp)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(N1.x=r.normal.x>0?e.max.x:e.min.x,N1.y=r.normal.y>0?e.max.y:e.min.y,N1.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(N1)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const yc=new pn,_c=new Ly;class TA{constructor(){this.coordinateSystem=Zo}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(yc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),_c.setFromProjectionMatrix(yc,r.coordinateSystem,r.reversedDepth),_c.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(yc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),_c.setFromProjectionMatrix(yc,r.coordinateSystem,r.reversedDepth),_c.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(yc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),_c.setFromProjectionMatrix(yc,r.coordinateSystem,r.reversedDepth),_c.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(yc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),_c.setFromProjectionMatrix(yc,r.coordinateSystem,r.reversedDepth),_c.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(yc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),_c.setFromProjectionMatrix(yc,r.coordinateSystem,r.reversedDepth),_c.containsPoint(e))return!0}return!1}clone(){return new TA}}function sI(n,e){return n-e}function _Z(n,e){return n.z-e.z}function bZ(n,e){return e.z-n.z}class xZ{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const a=this.pool,s=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const l=a[this.index];s.push(l),this.index++,l.start=e,l.count=t,l.z=i,l.index=r}reset(){this.list.length=0,this.index=0}}const To=new pn,SZ=new Dt(1,1,1),_U=new Ly,wZ=new TA,O1=new Za,Zp=new Ea,M_=new ie,bU=new ie,EZ=new ie,oI=new xZ,ys=new $r,D1=[];function TZ(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let a=0;a<r;a++)for(let s=0;s<i;s++)e.setComponent(a+t,s,n.getComponent(a,s))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function Qp(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class nj extends $r{constructor(e,t,i=t*2,r){super(new gn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Iu(t,e,e,Es,$s);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Iu(t,e,e,ux,jl);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Iu(t,e,e,Es,$s);i.colorSpace=qn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const s=e.getAttribute(a),{array:l,itemSize:c,normalized:f}=s,p=new l.constructor(i*c),g=new hi(p,c,f);t.setAttribute(a,g)}if(e.getIndex()!==null){const a=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new hi(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),a=t.getAttribute(i);if(r.itemSize!==a.itemSize||r.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Za);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,To),this.getBoundingBoxAt(a,O1).applyMatrix4(To),e.union(O1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ea);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,To),this.getBoundingSphereAt(a,Zp).applyMatrix4(To),e.union(Zp)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(sI),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const a=this._matricesTexture;To.identity().toArray(a.image.data,r*16),a.needsUpdate=!0;const s=this._colorsTexture;return s&&(SZ.toArray(s.image.data,r*4),s.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const s=e.getIndex();if(s!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?s.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(sI),c=this._availableGeometryIds.shift(),a[c]=r):(c=this._geometryCount,this._geometryCount++,a.push(r)),this.setGeometryAt(c,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,c}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,a=i.getIndex(),s=t.getIndex(),l=this._geometryInfo[e];if(r&&s.count>l.reservedIndexCount||t.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=l.vertexStart,f=l.reservedVertexCount;l.vertexCount=t.getAttribute("position").count;for(const p in i.attributes){const g=t.getAttribute(p),v=i.getAttribute(p);TZ(g,v,c);const _=g.itemSize;for(let x=g.count,T=f;x<T;x++){const S=c+x;for(let w=0;w<_;w++)v.setComponent(S,w,0)}v.needsUpdate=!0,v.addUpdateRange(c*_,f*_)}if(r){const p=l.indexStart,g=l.reservedIndexCount;l.indexCount=t.getIndex().count;for(let v=0;v<s.count;v++)a.setX(p+v,c+s.getX(v));for(let v=s.count,_=g;v<_;v++)a.setX(p+v,c);a.needsUpdate=!0,a.addUpdateRange(p,l.reservedIndexCount)}return l.start=r?l.indexStart:l.vertexStart,l.count=r?l.indexCount:l.vertexCount,l.boundingBox=null,t.boundingBox!==null&&(l.boundingBox=t.boundingBox.clone()),l.boundingSphere=null,t.boundingSphere!==null&&(l.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,a=i.length;r<a;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((s,l)=>l).sort((s,l)=>i[s].vertexStart-i[l].vertexStart),a=this.geometry;for(let s=0,l=i.length;s<l;s++){const c=r[s],f=i[c];if(f.active!==!1){if(a.index!==null){if(f.indexStart!==t){const{indexStart:p,vertexStart:g,reservedIndexCount:v}=f,_=a.index,x=_.array,T=e-g;for(let S=p;S<p+v;S++)x[S]=x[S]+T;_.array.copyWithin(t,p,p+v),_.addUpdateRange(t,v),_.needsUpdate=!0,f.indexStart=t}t+=f.reservedIndexCount}if(f.vertexStart!==e){const{vertexStart:p,reservedVertexCount:g}=f,v=a.attributes;for(const _ in v){const x=v[_],{array:T,itemSize:S}=x;T.copyWithin(e*S,p*S,(p+g)*S),x.addUpdateRange(e*S,g*S),x.needsUpdate=!0}f.vertexStart=e}e+=f.reservedVertexCount,f.start=a.index?f.indexStart:f.vertexStart,this._nextIndexStart=a.index?f.indexStart+f.reservedIndexCount:0,this._nextVertexStart=f.vertexStart+f.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const a=new Za,s=i.index,l=i.attributes.position;for(let c=r.start,f=r.start+r.count;c<f;c++){let p=c;s&&(p=s.getX(p)),a.expandByPoint(M_.fromBufferAttribute(l,p))}r.boundingBox=a}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const a=new Ea;this.getBoundingBoxAt(e,O1),O1.getCenter(a.center);const s=i.index,l=i.attributes.position;let c=0;for(let f=r.start,p=r.start+r.count;f<p;f++){let g=f;s&&(g=s.getX(g)),M_.fromBufferAttribute(l,g),c=Math.max(c,a.center.distanceToSquared(M_))}a.radius=Math.sqrt(c),r.boundingSphere=a}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(sI);t[t.length-1]===i.length-1;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),a=new Int32Array(e);Qp(this._multiDrawCounts,r),Qp(this._multiDrawStarts,a),this._multiDrawCounts=r,this._multiDrawStarts=a,this._maxInstanceCount=e;const s=this._indirectTexture,l=this._matricesTexture,c=this._colorsTexture;s.dispose(),this._initIndirectTexture(),Qp(s.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),Qp(l.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),Qp(c.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...i.map(l=>l.vertexStart+l.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(c=>c.indexStart+c.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new gn,this._initializeGeometry(a));const s=this.geometry;a.index&&Qp(a.index.array,s.index.array);for(const l in a.attributes)Qp(a.attributes[l].array,s.attributes[l].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,a=this.matrixWorld,s=this.geometry;ys.material=this.material,ys.geometry.index=s.index,ys.geometry.attributes=s.attributes,ys.geometry.boundingBox===null&&(ys.geometry.boundingBox=new Za),ys.geometry.boundingSphere===null&&(ys.geometry.boundingSphere=new Ea);for(let l=0,c=i.length;l<c;l++){if(!i[l].visible||!i[l].active)continue;const f=i[l].geometryIndex,p=r[f];ys.geometry.setDrawRange(p.start,p.count),this.getMatrixAt(l,ys.matrixWorld).premultiply(a),this.getBoundingBoxAt(f,ys.geometry.boundingBox),this.getBoundingSphereAt(f,ys.geometry.boundingSphere),ys.raycast(e,D1);for(let g=0,v=D1.length;g<v;g++){const _=D1[g];_.object=this,_.batchId=l,t.push(_)}D1.length=0}ys.material=null,ys.geometry.index=null,ys.geometry.attributes={},ys.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=r.getIndex(),l=s===null?1:s.array.BYTES_PER_ELEMENT,c=this._instanceInfo,f=this._multiDrawStarts,p=this._multiDrawCounts,g=this._geometryInfo,v=this.perObjectFrustumCulled,_=this._indirectTexture,x=_.image.data,T=i.isArrayCamera?wZ:_U;v&&!i.isArrayCamera&&(To.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),_U.setFromProjectionMatrix(To,i.coordinateSystem,i.reversedDepth));let S=0;if(this.sortObjects){To.copy(this.matrixWorld).invert(),M_.setFromMatrixPosition(i.matrixWorld).applyMatrix4(To),bU.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(To);for(let R=0,O=c.length;R<O;R++)if(c[R].visible&&c[R].active){const F=c[R].geometryIndex;this.getMatrixAt(R,To),this.getBoundingSphereAt(F,Zp).applyMatrix4(To);let B=!1;if(v&&(B=!T.intersectsSphere(Zp,i)),!B){const L=g[F],z=EZ.subVectors(Zp.center,M_).dot(bU);oI.push(L.start,L.count,z,R)}}const w=oI.list,I=this.customSort;I===null?w.sort(a.transparent?bZ:_Z):I.call(this,w,i);for(let R=0,O=w.length;R<O;R++){const F=w[R];f[S]=F.start*l,p[S]=F.count,x[S]=F.index,S++}oI.reset()}else for(let w=0,I=c.length;w<I;w++)if(c[w].visible&&c[w].active){const R=c[w].geometryIndex;let O=!1;if(v&&(this.getMatrixAt(w,To),this.getBoundingSphereAt(R,Zp).applyMatrix4(To),O=!T.intersectsSphere(Zp,i)),!O){const F=g[R];f[S]=F.start*l,p[S]=F.count,x[S]=w,S++}}_.needsUpdate=!0,this._multiDrawCount=S,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,a,s){this.onBeforeRender(e,null,r,a,s)}}class Qs extends Cs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Dt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const UE=new ie,zE=new ie,xU=new pn,C_=new ag,L1=new Ea,lI=new ie,SU=new ie;class $d extends ni{constructor(e=new gn,t=new Qs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,a=t.count;r<a;r++)UE.fromBufferAttribute(t,r-1),zE.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=UE.distanceTo(zE);e.setAttribute("lineDistance",new zt(i,1))}else Mt("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),L1.copy(i.boundingSphere),L1.applyMatrix4(r),L1.radius+=a,e.ray.intersectsSphere(L1)===!1)return;xU.copy(r).invert(),C_.copy(e.ray).applyMatrix4(xU);const l=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,f=this.isLineSegments?2:1,p=i.index,v=i.attributes.position;if(p!==null){const _=Math.max(0,s.start),x=Math.min(p.count,s.start+s.count);for(let T=_,S=x-1;T<S;T+=f){const w=p.getX(T),I=p.getX(T+1),R=k1(this,e,C_,c,w,I,T);R&&t.push(R)}if(this.isLineLoop){const T=p.getX(x-1),S=p.getX(_),w=k1(this,e,C_,c,T,S,x-1);w&&t.push(w)}}else{const _=Math.max(0,s.start),x=Math.min(v.count,s.start+s.count);for(let T=_,S=x-1;T<S;T+=f){const w=k1(this,e,C_,c,T,T+1,T);w&&t.push(w)}if(this.isLineLoop){const T=k1(this,e,C_,c,x-1,_,x-1);T&&t.push(T)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const l=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}}function k1(n,e,t,i,r,a,s){const l=n.geometry.attributes.position;if(UE.fromBufferAttribute(l,r),zE.fromBufferAttribute(l,a),t.distanceSqToSegment(UE,zE,lI,SU)>i)return;lI.applyMatrix4(n.matrixWorld);const f=e.ray.origin.distanceTo(lI);if(!(f<e.near||f>e.far))return{distance:f,point:SU.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}const wU=new ie,EU=new ie;class Jc extends $d{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,a=t.count;r<a;r+=2)wU.fromBufferAttribute(t,r),EU.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+wU.distanceTo(EU);e.setAttribute("lineDistance",new zt(i,1))}else Mt("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ij extends $d{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class WO extends Cs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Dt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const TU=new pn,kR=new ag,U1=new Ea,z1=new ie;class rj extends ni{constructor(e=new gn,t=new WO){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),U1.copy(i.boundingSphere),U1.applyMatrix4(r),U1.radius+=a,e.ray.intersectsSphere(U1)===!1)return;TU.copy(r).invert(),kR.copy(e.ray).applyMatrix4(TU);const l=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,f=i.index,g=i.attributes.position;if(f!==null){const v=Math.max(0,s.start),_=Math.min(f.count,s.start+s.count);for(let x=v,T=_;x<T;x++){const S=f.getX(x);z1.fromBufferAttribute(g,S),AU(z1,S,c,r,e,t,this)}}else{const v=Math.max(0,s.start),_=Math.min(g.count,s.start+s.count);for(let x=v,T=_;x<T;x++)z1.fromBufferAttribute(g,x),AU(z1,x,c,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const l=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}}function AU(n,e,t,i,r,a,s){const l=kR.distanceSqToPoint(n);if(l<t){const c=new ie;kR.closestPointToPoint(n,c),c.applyMatrix4(i);const f=r.ray.origin.distanceTo(c);if(f<r.near||f>r.far)return;a.push({distance:f,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}class aj extends Er{constructor(e,t,i,r,a=Ki,s=Ki,l,c,f){super(e,t,i,r,a,s,l,c,f),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const p=this;function g(){p.needsUpdate=!0,p._requestVideoFrameCallbackId=e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(g))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class AZ extends aj{constructor(e,t,i,r,a,s,l,c){super({},e,t,i,r,a,s,l,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class MZ extends Er{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Dr,this.minFilter=Dr,this.generateMipmaps=!1,this.needsUpdate=!0}}class AA extends Er{constructor(e,t,i,r,a,s,l,c,f,p,g,v){super(null,s,l,c,f,p,r,a,g,v),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class CZ extends AA{constructor(e,t,i,r,a,s){super(e,t,i,a,s),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Po,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class IZ extends AA{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Bc),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class PZ extends Er{constructor(e,t,i,r,a,s,l,c,f){super(e,t,i,r,a,s,l,c,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class my extends Er{constructor(e,t,i=jl,r,a,s,l=Dr,c=Dr,f,p=jc,g=1){if(p!==jc&&p!==Pd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const v={width:e,height:t,depth:g};super(v,r,a,s,l,c,p,i,f),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Rd(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class sj extends my{constructor(e,t=jl,i=Bc,r,a,s=Dr,l=Dr,c,f=jc){const p={width:e,height:e,depth:1},g=[p,p,p,p,p,p];super(e,e,t,i,r,a,s,l,c,f),this.image=g,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class qO extends Er{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class MA extends gn{constructor(e=1,t=1,i=4,r=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:a},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),a=Math.max(1,Math.floor(a));const s=[],l=[],c=[],f=[],p=t/2,g=Math.PI/2*e,v=t,_=2*g+v,x=i*2+a,T=r+1,S=new ie,w=new ie;for(let I=0;I<=x;I++){let R=0,O=0,F=0,B=0;if(I<=i){const P=I/i,D=P*Math.PI/2;O=-p-e*Math.cos(D),F=e*Math.sin(D),B=-e*Math.cos(D),R=P*g}else if(I<=i+a){const P=(I-i)/a;O=-p+P*t,F=e,B=0,R=g+P*v}else{const P=(I-i-a)/i,D=P*Math.PI/2;O=p+e*Math.sin(D),F=e*Math.cos(D),B=e*Math.sin(D),R=g+v+P*g}const L=Math.max(0,Math.min(1,R/_));let z=0;I===0?z=.5/r:I===x&&(z=-.5/r);for(let P=0;P<=r;P++){const D=P/r,j=D*Math.PI*2,q=Math.sin(j),W=Math.cos(j);w.x=-F*W,w.y=O,w.z=F*q,l.push(w.x,w.y,w.z),S.set(-F*W,B,F*q),S.normalize(),c.push(S.x,S.y,S.z),f.push(D+z,L)}if(I>0){const P=(I-1)*T;for(let D=0;D<r;D++){const j=P+D,q=P+D+1,W=I*T+D,se=I*T+D+1;s.push(j,q,W),s.push(q,se,W)}}}this.setIndex(s),this.setAttribute("position",new zt(l,3)),this.setAttribute("normal",new zt(c,3)),this.setAttribute("uv",new zt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new MA(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class CA extends gn{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const a=[],s=[],l=[],c=[],f=new ie,p=new tt;s.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(let g=0,v=3;g<=t;g++,v+=3){const _=i+g/t*r;f.x=e*Math.cos(_),f.y=e*Math.sin(_),s.push(f.x,f.y,f.z),l.push(0,0,1),p.x=(s[v]/e+1)/2,p.y=(s[v+1]/e+1)/2,c.push(p.x,p.y)}for(let g=1;g<=t;g++)a.push(g,g+1,0);this.setIndex(a),this.setAttribute("position",new zt(s,3)),this.setAttribute("normal",new zt(l,3)),this.setAttribute("uv",new zt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new CA(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class fx extends gn{constructor(e=1,t=1,i=1,r=32,a=1,s=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:a,openEnded:s,thetaStart:l,thetaLength:c};const f=this;r=Math.floor(r),a=Math.floor(a);const p=[],g=[],v=[],_=[];let x=0;const T=[],S=i/2;let w=0;I(),s===!1&&(e>0&&R(!0),t>0&&R(!1)),this.setIndex(p),this.setAttribute("position",new zt(g,3)),this.setAttribute("normal",new zt(v,3)),this.setAttribute("uv",new zt(_,2));function I(){const O=new ie,F=new ie;let B=0;const L=(t-e)/i;for(let z=0;z<=a;z++){const P=[],D=z/a,j=D*(t-e)+e;for(let q=0;q<=r;q++){const W=q/r,se=W*c+l,ue=Math.sin(se),J=Math.cos(se);F.x=j*ue,F.y=-D*i+S,F.z=j*J,g.push(F.x,F.y,F.z),O.set(ue,L,J).normalize(),v.push(O.x,O.y,O.z),_.push(W,1-D),P.push(x++)}T.push(P)}for(let z=0;z<r;z++)for(let P=0;P<a;P++){const D=T[P][z],j=T[P+1][z],q=T[P+1][z+1],W=T[P][z+1];(e>0||P!==0)&&(p.push(D,j,W),B+=3),(t>0||P!==a-1)&&(p.push(j,q,W),B+=3)}f.addGroup(w,B,0),w+=B}function R(O){const F=x,B=new tt,L=new ie;let z=0;const P=O===!0?e:t,D=O===!0?1:-1;for(let q=1;q<=r;q++)g.push(0,S*D,0),v.push(0,D,0),_.push(.5,.5),x++;const j=x;for(let q=0;q<=r;q++){const se=q/r*c+l,ue=Math.cos(se),J=Math.sin(se);L.x=P*J,L.y=S*D,L.z=P*ue,g.push(L.x,L.y,L.z),v.push(0,D,0),B.x=ue*.5+.5,B.y=J*.5*D+.5,_.push(B.x,B.y),x++}for(let q=0;q<r;q++){const W=F+q,se=j+q;O===!0?p.push(se,se+1,W):p.push(se+1,se,W),z+=3}f.addGroup(w,z,O===!0?1:2),w+=z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fx(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class hx extends fx{constructor(e=1,t=1,i=32,r=1,a=!1,s=0,l=Math.PI*2){super(0,e,t,i,r,a,s,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:l}}static fromJSON(e){return new hx(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class rp extends gn{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const a=[],s=[];l(r),f(i),p(),this.setAttribute("position",new zt(a,3)),this.setAttribute("normal",new zt(a.slice(),3)),this.setAttribute("uv",new zt(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(I){const R=new ie,O=new ie,F=new ie;for(let B=0;B<t.length;B+=3)_(t[B+0],R),_(t[B+1],O),_(t[B+2],F),c(R,O,F,I)}function c(I,R,O,F){const B=F+1,L=[];for(let z=0;z<=B;z++){L[z]=[];const P=I.clone().lerp(O,z/B),D=R.clone().lerp(O,z/B),j=B-z;for(let q=0;q<=j;q++)q===0&&z===B?L[z][q]=P:L[z][q]=P.clone().lerp(D,q/j)}for(let z=0;z<B;z++)for(let P=0;P<2*(B-z)-1;P++){const D=Math.floor(P/2);P%2===0?(v(L[z][D+1]),v(L[z+1][D]),v(L[z][D])):(v(L[z][D+1]),v(L[z+1][D+1]),v(L[z+1][D]))}}function f(I){const R=new ie;for(let O=0;O<a.length;O+=3)R.x=a[O+0],R.y=a[O+1],R.z=a[O+2],R.normalize().multiplyScalar(I),a[O+0]=R.x,a[O+1]=R.y,a[O+2]=R.z}function p(){const I=new ie;for(let R=0;R<a.length;R+=3){I.x=a[R+0],I.y=a[R+1],I.z=a[R+2];const O=S(I)/2/Math.PI+.5,F=w(I)/Math.PI+.5;s.push(O,1-F)}x(),g()}function g(){for(let I=0;I<s.length;I+=6){const R=s[I+0],O=s[I+2],F=s[I+4],B=Math.max(R,O,F),L=Math.min(R,O,F);B>.9&&L<.1&&(R<.2&&(s[I+0]+=1),O<.2&&(s[I+2]+=1),F<.2&&(s[I+4]+=1))}}function v(I){a.push(I.x,I.y,I.z)}function _(I,R){const O=I*3;R.x=e[O+0],R.y=e[O+1],R.z=e[O+2]}function x(){const I=new ie,R=new ie,O=new ie,F=new ie,B=new tt,L=new tt,z=new tt;for(let P=0,D=0;P<a.length;P+=9,D+=6){I.set(a[P+0],a[P+1],a[P+2]),R.set(a[P+3],a[P+4],a[P+5]),O.set(a[P+6],a[P+7],a[P+8]),B.set(s[D+0],s[D+1]),L.set(s[D+2],s[D+3]),z.set(s[D+4],s[D+5]),F.copy(I).add(R).add(O).divideScalar(3);const j=S(F);T(B,D+0,I,j),T(L,D+2,R,j),T(z,D+4,O,j)}}function T(I,R,O,F){F<0&&I.x===1&&(s[R]=I.x-1),O.x===0&&O.z===0&&(s[R]=F/2/Math.PI+.5)}function S(I){return Math.atan2(I.z,-I.x)}function w(I){return Math.atan2(-I.y,Math.sqrt(I.x*I.x+I.z*I.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rp(e.vertices,e.indices,e.radius,e.detail)}}class IA extends rp{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new IA(e.radius,e.detail)}}const F1=new ie,B1=new ie,uI=new ie,V1=new Co;class oj extends gn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),a=Math.cos(Pm*t),s=e.getIndex(),l=e.getAttribute("position"),c=s?s.count:l.count,f=[0,0,0],p=["a","b","c"],g=new Array(3),v={},_=[];for(let x=0;x<c;x+=3){s?(f[0]=s.getX(x),f[1]=s.getX(x+1),f[2]=s.getX(x+2)):(f[0]=x,f[1]=x+1,f[2]=x+2);const{a:T,b:S,c:w}=V1;if(T.fromBufferAttribute(l,f[0]),S.fromBufferAttribute(l,f[1]),w.fromBufferAttribute(l,f[2]),V1.getNormal(uI),g[0]=`${Math.round(T.x*r)},${Math.round(T.y*r)},${Math.round(T.z*r)}`,g[1]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,g[2]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let I=0;I<3;I++){const R=(I+1)%3,O=g[I],F=g[R],B=V1[p[I]],L=V1[p[R]],z=`${O}_${F}`,P=`${F}_${O}`;P in v&&v[P]?(uI.dot(v[P].normal)<=a&&(_.push(B.x,B.y,B.z),_.push(L.x,L.y,L.z)),v[P]=null):z in v||(v[z]={index0:f[I],index1:f[R],normal:uI.clone()})}}for(const x in v)if(v[x]){const{index0:T,index1:S}=v[x];F1.fromBufferAttribute(l,T),B1.fromBufferAttribute(l,S),_.push(F1.x,F1.y,F1.z),_.push(B1.x,B1.y,B1.z)}this.setAttribute("position",new zt(_,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let Uu=class{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){Mt("Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),a=0;t.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),a+=i.distanceTo(r),t.push(a),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const a=i.length;let s;t?s=t:s=e*i[a-1];let l=0,c=a-1,f;for(;l<=c;)if(r=Math.floor(l+(c-l)/2),f=i[r]-s,f<0)l=r+1;else if(f>0)c=r-1;else{c=r;break}if(r=c,i[r]===s)return r/(a-1);const p=i[r],v=i[r+1]-p,_=(s-p)/v;return(r+_)/(a-1)}getTangent(e,t){let r=e-1e-4,a=e+1e-4;r<0&&(r=0),a>1&&(a=1);const s=this.getPoint(r),l=this.getPoint(a),c=t||(s.isVector2?new tt:new ie);return c.copy(l).sub(s).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new ie,r=[],a=[],s=[],l=new ie,c=new pn;for(let _=0;_<=e;_++){const x=_/e;r[_]=this.getTangentAt(x,new ie)}a[0]=new ie,s[0]=new ie;let f=Number.MAX_VALUE;const p=Math.abs(r[0].x),g=Math.abs(r[0].y),v=Math.abs(r[0].z);p<=f&&(f=p,i.set(1,0,0)),g<=f&&(f=g,i.set(0,1,0)),v<=f&&i.set(0,0,1),l.crossVectors(r[0],i).normalize(),a[0].crossVectors(r[0],l),s[0].crossVectors(r[0],a[0]);for(let _=1;_<=e;_++){if(a[_]=a[_-1].clone(),s[_]=s[_-1].clone(),l.crossVectors(r[_-1],r[_]),l.length()>Number.EPSILON){l.normalize();const x=Math.acos(fn(r[_-1].dot(r[_]),-1,1));a[_].applyMatrix4(c.makeRotationAxis(l,x))}s[_].crossVectors(r[_],a[_])}if(t===!0){let _=Math.acos(fn(a[0].dot(a[e]),-1,1));_/=e,r[0].dot(l.crossVectors(a[0],a[e]))>0&&(_=-_);for(let x=1;x<=e;x++)a[x].applyMatrix4(c.makeRotationAxis(r[x],_*x)),s[x].crossVectors(r[x],a[x])}return{tangents:r,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}};class PA extends Uu{constructor(e=0,t=0,i=1,r=1,a=0,s=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=l,this.aRotation=c}getPoint(e,t=new tt){const i=t,r=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(s?a=0:a=r),this.aClockwise===!0&&!s&&(a===r?a=-r:a=a-r);const l=this.aStartAngle+e*a;let c=this.aX+this.xRadius*Math.cos(l),f=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const p=Math.cos(this.aRotation),g=Math.sin(this.aRotation),v=c-this.aX,_=f-this.aY;c=v*p-_*g+this.aX,f=v*g+_*p+this.aY}return i.set(c,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class lj extends PA{constructor(e,t,i,r,a,s){super(e,t,i,i,r,a,s),this.isArcCurve=!0,this.type="ArcCurve"}}function $O(){let n=0,e=0,t=0,i=0;function r(a,s,l,c){n=a,e=l,t=-3*a+3*s-2*l-c,i=2*a-2*s+l+c}return{initCatmullRom:function(a,s,l,c,f){r(s,l,f*(l-a),f*(c-s))},initNonuniformCatmullRom:function(a,s,l,c,f,p,g){let v=(s-a)/f-(l-a)/(f+p)+(l-s)/p,_=(l-s)/p-(c-s)/(p+g)+(c-l)/g;v*=p,_*=p,r(s,l,v,_)},calc:function(a){const s=a*a,l=s*a;return n+e*a+t*s+i*l}}}const j1=new ie,cI=new $O,fI=new $O,hI=new $O;class uj extends Uu{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new ie){const i=t,r=this.points,a=r.length,s=(a-(this.closed?0:1))*e;let l=Math.floor(s),c=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/a)+1)*a:c===0&&l===a-1&&(l=a-2,c=1);let f,p;this.closed||l>0?f=r[(l-1)%a]:(j1.subVectors(r[0],r[1]).add(r[0]),f=j1);const g=r[l%a],v=r[(l+1)%a];if(this.closed||l+2<a?p=r[(l+2)%a]:(j1.subVectors(r[a-1],r[a-2]).add(r[a-1]),p=j1),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let x=Math.pow(f.distanceToSquared(g),_),T=Math.pow(g.distanceToSquared(v),_),S=Math.pow(v.distanceToSquared(p),_);T<1e-4&&(T=1),x<1e-4&&(x=T),S<1e-4&&(S=T),cI.initNonuniformCatmullRom(f.x,g.x,v.x,p.x,x,T,S),fI.initNonuniformCatmullRom(f.y,g.y,v.y,p.y,x,T,S),hI.initNonuniformCatmullRom(f.z,g.z,v.z,p.z,x,T,S)}else this.curveType==="catmullrom"&&(cI.initCatmullRom(f.x,g.x,v.x,p.x,this.tension),fI.initCatmullRom(f.y,g.y,v.y,p.y,this.tension),hI.initCatmullRom(f.z,g.z,v.z,p.z,this.tension));return i.set(cI.calc(c),fI.calc(c),hI.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ie().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function MU(n,e,t,i,r){const a=(i-e)*.5,s=(r-t)*.5,l=n*n,c=n*l;return(2*t-2*i+a+s)*c+(-3*t+3*i-2*a-s)*l+a*n+t}function RZ(n,e){const t=1-n;return t*t*e}function NZ(n,e){return 2*(1-n)*n*e}function OZ(n,e){return n*n*e}function ab(n,e,t,i){return RZ(n,e)+NZ(n,t)+OZ(n,i)}function DZ(n,e){const t=1-n;return t*t*t*e}function LZ(n,e){const t=1-n;return 3*t*t*n*e}function kZ(n,e){return 3*(1-n)*n*n*e}function UZ(n,e){return n*n*n*e}function sb(n,e,t,i,r){return DZ(n,e)+LZ(n,t)+kZ(n,i)+UZ(n,r)}class XO extends Uu{constructor(e=new tt,t=new tt,i=new tt,r=new tt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new tt){const i=t,r=this.v0,a=this.v1,s=this.v2,l=this.v3;return i.set(sb(e,r.x,a.x,s.x,l.x),sb(e,r.y,a.y,s.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class cj extends Uu{constructor(e=new ie,t=new ie,i=new ie,r=new ie){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ie){const i=t,r=this.v0,a=this.v1,s=this.v2,l=this.v3;return i.set(sb(e,r.x,a.x,s.x,l.x),sb(e,r.y,a.y,s.y,l.y),sb(e,r.z,a.z,s.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class YO extends Uu{constructor(e=new tt,t=new tt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new tt){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new tt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class fj extends Uu{constructor(e=new ie,t=new ie){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ie){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ie){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class KO extends Uu{constructor(e=new tt,t=new tt,i=new tt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new tt){const i=t,r=this.v0,a=this.v1,s=this.v2;return i.set(ab(e,r.x,a.x,s.x),ab(e,r.y,a.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ZO extends Uu{constructor(e=new ie,t=new ie,i=new ie){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ie){const i=t,r=this.v0,a=this.v1,s=this.v2;return i.set(ab(e,r.x,a.x,s.x),ab(e,r.y,a.y,s.y),ab(e,r.z,a.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class QO extends Uu{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new tt){const i=t,r=this.points,a=(r.length-1)*e,s=Math.floor(a),l=a-s,c=r[s===0?s:s-1],f=r[s],p=r[s>r.length-2?r.length-1:s+1],g=r[s>r.length-3?r.length-1:s+2];return i.set(MU(l,c.x,f.x,p.x,g.x),MU(l,c.y,f.y,p.y,g.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new tt().fromArray(r))}return this}}var FE=Object.freeze({__proto__:null,ArcCurve:lj,CatmullRomCurve3:uj,CubicBezierCurve:XO,CubicBezierCurve3:cj,EllipseCurve:PA,LineCurve:YO,LineCurve3:fj,QuadraticBezierCurve:KO,QuadraticBezierCurve3:ZO,SplineCurve:QO});class hj extends Uu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new FE[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let a=0;for(;a<r.length;){if(r[a]>=i){const s=r[a]-i,l=this.curves[a],c=l.getLength(),f=c===0?0:1-s/c;return l.getPointAt(f,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,a=this.curves;r<a.length;r++){const s=a[r],l=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,c=s.getPoints(l);for(let f=0;f<c.length;f++){const p=c[f];i&&i.equals(p)||(t.push(p),i=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new FE[r.type]().fromJSON(r))}return this}}let BE=class extends hj{constructor(e){super(),this.type="Path",this.currentPoint=new tt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new YO(this.currentPoint.clone(),new tt(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const a=new KO(this.currentPoint.clone(),new tt(e,t),new tt(i,r));return this.curves.push(a),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,a,s){const l=new XO(this.currentPoint.clone(),new tt(e,t),new tt(i,r),new tt(a,s));return this.curves.push(l),this.currentPoint.set(a,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new QO(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,a,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+l,t+c,i,r,a,s),this}absarc(e,t,i,r,a,s){return this.absellipse(e,t,i,i,r,a,s),this}ellipse(e,t,i,r,a,s,l,c){const f=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+f,t+p,i,r,a,s,l,c),this}absellipse(e,t,i,r,a,s,l,c){const f=new PA(e,t,i,r,a,s,l,c);if(this.curves.length>0){const g=f.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(f);const p=f.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class Rm extends BE{constructor(e){super(e),this.uuid=el(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new BE().fromJSON(r))}return this}}function zZ(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let a=dj(n,0,r,t,!0);const s=[];if(!a||a.next===a.prev)return s;let l,c,f;if(i&&(a=HZ(n,e,a,t)),n.length>80*t){l=n[0],c=n[1];let p=l,g=c;for(let v=t;v<r;v+=t){const _=n[v],x=n[v+1];_<l&&(l=_),x<c&&(c=x),_>p&&(p=_),x>g&&(g=x)}f=Math.max(p-l,g-c),f=f!==0?32767/f:0}return Mb(a,s,t,l,c,f,0),s}function dj(n,e,t,i,r){let a;if(r===eQ(n,e,t,i)>0)for(let s=e;s<t;s+=i)a=CU(s/i|0,n[s],n[s+1],a);else for(let s=t-i;s>=e;s-=i)a=CU(s/i|0,n[s],n[s+1],a);return a&&gy(a,a.next)&&(Ib(a),a=a.next),a}function jm(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(gy(t,t.next)||mr(t.prev,t,t.next)===0)){if(Ib(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Mb(n,e,t,i,r,a,s){if(!n)return;!s&&a&&XZ(n,i,r,a);let l=n;for(;n.prev!==n.next;){const c=n.prev,f=n.next;if(a?BZ(n,i,r,a):FZ(n)){e.push(c.i,n.i,f.i),Ib(n),n=f.next,l=f.next;continue}if(n=f,n===l){s?s===1?(n=VZ(jm(n),e),Mb(n,e,t,i,r,a,2)):s===2&&jZ(n,e,t,i,r,a):Mb(jm(n),e,t,i,r,a,1);break}}}function FZ(n){const e=n.prev,t=n,i=n.next;if(mr(e,t,i)>=0)return!1;const r=e.x,a=t.x,s=i.x,l=e.y,c=t.y,f=i.y,p=Math.min(r,a,s),g=Math.min(l,c,f),v=Math.max(r,a,s),_=Math.max(l,c,f);let x=i.next;for(;x!==e;){if(x.x>=p&&x.x<=v&&x.y>=g&&x.y<=_&&V_(r,l,a,c,s,f,x.x,x.y)&&mr(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function BZ(n,e,t,i){const r=n.prev,a=n,s=n.next;if(mr(r,a,s)>=0)return!1;const l=r.x,c=a.x,f=s.x,p=r.y,g=a.y,v=s.y,_=Math.min(l,c,f),x=Math.min(p,g,v),T=Math.max(l,c,f),S=Math.max(p,g,v),w=UR(_,x,e,t,i),I=UR(T,S,e,t,i);let R=n.prevZ,O=n.nextZ;for(;R&&R.z>=w&&O&&O.z<=I;){if(R.x>=_&&R.x<=T&&R.y>=x&&R.y<=S&&R!==r&&R!==s&&V_(l,p,c,g,f,v,R.x,R.y)&&mr(R.prev,R,R.next)>=0||(R=R.prevZ,O.x>=_&&O.x<=T&&O.y>=x&&O.y<=S&&O!==r&&O!==s&&V_(l,p,c,g,f,v,O.x,O.y)&&mr(O.prev,O,O.next)>=0))return!1;O=O.nextZ}for(;R&&R.z>=w;){if(R.x>=_&&R.x<=T&&R.y>=x&&R.y<=S&&R!==r&&R!==s&&V_(l,p,c,g,f,v,R.x,R.y)&&mr(R.prev,R,R.next)>=0)return!1;R=R.prevZ}for(;O&&O.z<=I;){if(O.x>=_&&O.x<=T&&O.y>=x&&O.y<=S&&O!==r&&O!==s&&V_(l,p,c,g,f,v,O.x,O.y)&&mr(O.prev,O,O.next)>=0)return!1;O=O.nextZ}return!0}function VZ(n,e){let t=n;do{const i=t.prev,r=t.next.next;!gy(i,r)&&mj(i,t,t.next,r)&&Cb(i,r)&&Cb(r,i)&&(e.push(i.i,t.i,r.i),Ib(t),Ib(t.next),t=n=r),t=t.next}while(t!==n);return jm(t)}function jZ(n,e,t,i,r,a){let s=n;do{let l=s.next.next;for(;l!==s.prev;){if(s.i!==l.i&&ZZ(s,l)){let c=gj(s,l);s=jm(s,s.next),c=jm(c,c.next),Mb(s,e,t,i,r,a,0),Mb(c,e,t,i,r,a,0);return}l=l.next}s=s.next}while(s!==n)}function HZ(n,e,t,i){const r=[];for(let a=0,s=e.length;a<s;a++){const l=e[a]*i,c=a<s-1?e[a+1]*i:n.length,f=dj(n,l,c,i,!1);f===f.next&&(f.steiner=!0),r.push(KZ(f))}r.sort(GZ);for(let a=0;a<r.length;a++)t=WZ(r[a],t);return t}function GZ(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function WZ(n,e){const t=qZ(n,e);if(!t)return e;const i=gj(t,n);return jm(i,i.next),jm(t,t.next)}function qZ(n,e){let t=e;const i=n.x,r=n.y;let a=-1/0,s;if(gy(n,t))return t;do{if(gy(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const g=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=i&&g>a&&(a=g,s=t.x<t.next.x?t:t.next,g===i))return s}t=t.next}while(t!==e);if(!s)return null;const l=s,c=s.x,f=s.y;let p=1/0;t=s;do{if(i>=t.x&&t.x>=c&&i!==t.x&&pj(r<f?i:a,r,c,f,r<f?a:i,r,t.x,t.y)){const g=Math.abs(r-t.y)/(i-t.x);Cb(t,n)&&(g<p||g===p&&(t.x>s.x||t.x===s.x&&$Z(s,t)))&&(s=t,p=g)}t=t.next}while(t!==l);return s}function $Z(n,e){return mr(n.prev,n,e.prev)<0&&mr(e.next,n,n.next)<0}function XZ(n,e,t,i){let r=n;do r.z===0&&(r.z=UR(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,YZ(r)}function YZ(n){let e,t=1;do{let i=n,r;n=null;let a=null;for(e=0;i;){e++;let s=i,l=0;for(let f=0;f<t&&(l++,s=s.nextZ,!!s);f++);let c=t;for(;l>0||c>0&&s;)l!==0&&(c===0||!s||i.z<=s.z)?(r=i,i=i.nextZ,l--):(r=s,s=s.nextZ,c--),a?a.nextZ=r:n=r,r.prevZ=a,a=r;i=s}a.nextZ=null,t*=2}while(e>1);return n}function UR(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function KZ(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function pj(n,e,t,i,r,a,s,l){return(r-s)*(e-l)>=(n-s)*(a-l)&&(n-s)*(i-l)>=(t-s)*(e-l)&&(t-s)*(a-l)>=(r-s)*(i-l)}function V_(n,e,t,i,r,a,s,l){return!(n===s&&e===l)&&pj(n,e,t,i,r,a,s,l)}function ZZ(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!QZ(n,e)&&(Cb(n,e)&&Cb(e,n)&&JZ(n,e)&&(mr(n.prev,n,e.prev)||mr(n,e.prev,e))||gy(n,e)&&mr(n.prev,n,n.next)>0&&mr(e.prev,e,e.next)>0)}function mr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function gy(n,e){return n.x===e.x&&n.y===e.y}function mj(n,e,t,i){const r=G1(mr(n,e,t)),a=G1(mr(n,e,i)),s=G1(mr(t,i,n)),l=G1(mr(t,i,e));return!!(r!==a&&s!==l||r===0&&H1(n,t,e)||a===0&&H1(n,i,e)||s===0&&H1(t,n,i)||l===0&&H1(t,e,i))}function H1(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function G1(n){return n>0?1:n<0?-1:0}function QZ(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&mj(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Cb(n,e){return mr(n.prev,n,n.next)<0?mr(n,e,n.next)>=0&&mr(n,n.prev,e)>=0:mr(n,e,n.prev)<0||mr(n,n.next,e)<0}function JZ(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&r<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function gj(n,e){const t=zR(n.i,n.x,n.y),i=zR(e.i,e.x,e.y),r=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,a.next=i,i.prev=a,i}function CU(n,e,t,i){const r=zR(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Ib(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function zR(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function eQ(n,e,t,i){let r=0;for(let a=e,s=t-i;a<t;a+=i)r+=(n[s]-n[a])*(n[a+1]+n[s+1]),s=a;return r}class tQ{static triangulate(e,t,i=2){return zZ(e,t,i)}}class Mu{static area(e){const t=e.length;let i=0;for(let r=t-1,a=0;a<t;r=a++)i+=e[r].x*e[a].y-e[a].x*e[r].y;return i*.5}static isClockWise(e){return Mu.area(e)<0}static triangulateShape(e,t){const i=[],r=[],a=[];IU(e),PU(i,e);let s=e.length;t.forEach(IU);for(let c=0;c<t.length;c++)r.push(s),s+=t[c].length,PU(i,t[c]);const l=tQ.triangulate(i,r);for(let c=0;c<l.length;c+=3)a.push(l.slice(c,c+3));return a}}function IU(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function PU(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class RA extends gn{constructor(e=new Rm([new tt(.5,.5),new tt(-.5,.5),new tt(-.5,-.5),new tt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],a=[];for(let l=0,c=e.length;l<c;l++){const f=e[l];s(f)}this.setAttribute("position",new zt(r,3)),this.setAttribute("uv",new zt(a,2)),this.computeVertexNormals();function s(l){const c=[],f=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,g=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,_=t.bevelThickness!==void 0?t.bevelThickness:.2,x=t.bevelSize!==void 0?t.bevelSize:_-.1,T=t.bevelOffset!==void 0?t.bevelOffset:0,S=t.bevelSegments!==void 0?t.bevelSegments:3;const w=t.extrudePath,I=t.UVGenerator!==void 0?t.UVGenerator:nQ;let R,O=!1,F,B,L,z;if(w){R=w.getSpacedPoints(p),O=!0,v=!1;const Oe=w.isCatmullRomCurve3?w.closed:!1;F=w.computeFrenetFrames(p,Oe),B=new ie,L=new ie,z=new ie}v||(S=0,_=0,x=0,T=0);const P=l.extractPoints(f);let D=P.shape;const j=P.holes;if(!Mu.isClockWise(D)){D=D.reverse();for(let Oe=0,Ke=j.length;Oe<Ke;Oe++){const He=j[Oe];Mu.isClockWise(He)&&(j[Oe]=He.reverse())}}function W(Oe){const He=10000000000000001e-36;let ut=Oe[0];for(let re=1;re<=Oe.length;re++){const Et=re%Oe.length,ht=Oe[Et],Lt=ht.x-ut.x,dt=ht.y-ut.y,ee=Lt*Lt+dt*dt,X=Math.max(Math.abs(ht.x),Math.abs(ht.y),Math.abs(ut.x),Math.abs(ut.y)),pe=He*X*X;if(ee<=pe){Oe.splice(Et,1),re--;continue}ut=ht}}W(D),j.forEach(W);const se=j.length,ue=D;for(let Oe=0;Oe<se;Oe++){const Ke=j[Oe];D=D.concat(Ke)}function J(Oe,Ke,He){return Ke||Yt("ExtrudeGeometry: vec does not exist"),Oe.clone().addScaledVector(Ke,He)}const ae=D.length;function he(Oe,Ke,He){let ut,re,Et;const ht=Oe.x-Ke.x,Lt=Oe.y-Ke.y,dt=He.x-Oe.x,ee=He.y-Oe.y,X=ht*ht+Lt*Lt,pe=ht*ee-Lt*dt;if(Math.abs(pe)>Number.EPSILON){const Ue=Math.sqrt(X),Ye=Math.sqrt(dt*dt+ee*ee),Le=Ke.x-Lt/Ue,At=Ke.y+ht/Ue,gt=He.x-ee/Ye,It=He.y+dt/Ye,Ht=((gt-Le)*ee-(It-At)*dt)/(ht*ee-Lt*dt);ut=Le+ht*Ht-Oe.x,re=At+Lt*Ht-Oe.y;const nt=ut*ut+re*re;if(nt<=2)return new tt(ut,re);Et=Math.sqrt(nt/2)}else{let Ue=!1;ht>Number.EPSILON?dt>Number.EPSILON&&(Ue=!0):ht<-Number.EPSILON?dt<-Number.EPSILON&&(Ue=!0):Math.sign(Lt)===Math.sign(ee)&&(Ue=!0),Ue?(ut=-Lt,re=ht,Et=Math.sqrt(X)):(ut=ht,re=Lt,Et=Math.sqrt(X/2))}return new tt(ut/Et,re/Et)}const Te=[];for(let Oe=0,Ke=ue.length,He=Ke-1,ut=Oe+1;Oe<Ke;Oe++,He++,ut++)He===Ke&&(He=0),ut===Ke&&(ut=0),Te[Oe]=he(ue[Oe],ue[He],ue[ut]);const Re=[];let Q,de=Te.concat();for(let Oe=0,Ke=se;Oe<Ke;Oe++){const He=j[Oe];Q=[];for(let ut=0,re=He.length,Et=re-1,ht=ut+1;ut<re;ut++,Et++,ht++)Et===re&&(Et=0),ht===re&&(ht=0),Q[ut]=he(He[ut],He[Et],He[ht]);Re.push(Q),de=de.concat(Q)}let Me;if(S===0)Me=Mu.triangulateShape(ue,j);else{const Oe=[],Ke=[];for(let He=0;He<S;He++){const ut=He/S,re=_*Math.cos(ut*Math.PI/2),Et=x*Math.sin(ut*Math.PI/2)+T;for(let ht=0,Lt=ue.length;ht<Lt;ht++){const dt=J(ue[ht],Te[ht],Et);ye(dt.x,dt.y,-re),ut===0&&Oe.push(dt)}for(let ht=0,Lt=se;ht<Lt;ht++){const dt=j[ht];Q=Re[ht];const ee=[];for(let X=0,pe=dt.length;X<pe;X++){const Ue=J(dt[X],Q[X],Et);ye(Ue.x,Ue.y,-re),ut===0&&ee.push(Ue)}ut===0&&Ke.push(ee)}}Me=Mu.triangulateShape(Oe,Ke)}const We=Me.length,vt=x+T;for(let Oe=0;Oe<ae;Oe++){const Ke=v?J(D[Oe],de[Oe],vt):D[Oe];O?(L.copy(F.normals[0]).multiplyScalar(Ke.x),B.copy(F.binormals[0]).multiplyScalar(Ke.y),z.copy(R[0]).add(L).add(B),ye(z.x,z.y,z.z)):ye(Ke.x,Ke.y,0)}for(let Oe=1;Oe<=p;Oe++)for(let Ke=0;Ke<ae;Ke++){const He=v?J(D[Ke],de[Ke],vt):D[Ke];O?(L.copy(F.normals[Oe]).multiplyScalar(He.x),B.copy(F.binormals[Oe]).multiplyScalar(He.y),z.copy(R[Oe]).add(L).add(B),ye(z.x,z.y,z.z)):ye(He.x,He.y,g/p*Oe)}for(let Oe=S-1;Oe>=0;Oe--){const Ke=Oe/S,He=_*Math.cos(Ke*Math.PI/2),ut=x*Math.sin(Ke*Math.PI/2)+T;for(let re=0,Et=ue.length;re<Et;re++){const ht=J(ue[re],Te[re],ut);ye(ht.x,ht.y,g+He)}for(let re=0,Et=j.length;re<Et;re++){const ht=j[re];Q=Re[re];for(let Lt=0,dt=ht.length;Lt<dt;Lt++){const ee=J(ht[Lt],Q[Lt],ut);O?ye(ee.x,ee.y+R[p-1].y,R[p-1].x+He):ye(ee.x,ee.y,g+He)}}}be(),Ae();function be(){const Oe=r.length/3;if(v){let Ke=0,He=ae*Ke;for(let ut=0;ut<We;ut++){const re=Me[ut];et(re[2]+He,re[1]+He,re[0]+He)}Ke=p+S*2,He=ae*Ke;for(let ut=0;ut<We;ut++){const re=Me[ut];et(re[0]+He,re[1]+He,re[2]+He)}}else{for(let Ke=0;Ke<We;Ke++){const He=Me[Ke];et(He[2],He[1],He[0])}for(let Ke=0;Ke<We;Ke++){const He=Me[Ke];et(He[0]+ae*p,He[1]+ae*p,He[2]+ae*p)}}i.addGroup(Oe,r.length/3-Oe,0)}function Ae(){const Oe=r.length/3;let Ke=0;mt(ue,Ke),Ke+=ue.length;for(let He=0,ut=j.length;He<ut;He++){const re=j[He];mt(re,Ke),Ke+=re.length}i.addGroup(Oe,r.length/3-Oe,1)}function mt(Oe,Ke){let He=Oe.length;for(;--He>=0;){const ut=He;let re=He-1;re<0&&(re=Oe.length-1);for(let Et=0,ht=p+S*2;Et<ht;Et++){const Lt=ae*Et,dt=ae*(Et+1),ee=Ke+ut+Lt,X=Ke+re+Lt,pe=Ke+re+dt,Ue=Ke+ut+dt;wt(ee,X,pe,Ue)}}}function ye(Oe,Ke,He){c.push(Oe),c.push(Ke),c.push(He)}function et(Oe,Ke,He){ze(Oe),ze(Ke),ze(He);const ut=r.length/3,re=I.generateTopUV(i,r,ut-3,ut-2,ut-1);Tt(re[0]),Tt(re[1]),Tt(re[2])}function wt(Oe,Ke,He,ut){ze(Oe),ze(Ke),ze(ut),ze(Ke),ze(He),ze(ut);const re=r.length/3,Et=I.generateSideWallUV(i,r,re-6,re-3,re-2,re-1);Tt(Et[0]),Tt(Et[1]),Tt(Et[3]),Tt(Et[1]),Tt(Et[2]),Tt(Et[3])}function ze(Oe){r.push(c[Oe*3+0]),r.push(c[Oe*3+1]),r.push(c[Oe*3+2])}function Tt(Oe){a.push(Oe.x),a.push(Oe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return iQ(t,i,e)}static fromJSON(e,t){const i=[];for(let a=0,s=e.shapes.length;a<s;a++){const l=t[e.shapes[a]];i.push(l)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new FE[r.type]().fromJSON(r)),new RA(i,e.options)}}const nQ={generateTopUV:function(n,e,t,i,r){const a=e[t*3],s=e[t*3+1],l=e[i*3],c=e[i*3+1],f=e[r*3],p=e[r*3+1];return[new tt(a,s),new tt(l,c),new tt(f,p)]},generateSideWallUV:function(n,e,t,i,r,a){const s=e[t*3],l=e[t*3+1],c=e[t*3+2],f=e[i*3],p=e[i*3+1],g=e[i*3+2],v=e[r*3],_=e[r*3+1],x=e[r*3+2],T=e[a*3],S=e[a*3+1],w=e[a*3+2];return Math.abs(l-p)<Math.abs(s-f)?[new tt(s,1-c),new tt(f,1-g),new tt(v,1-x),new tt(T,1-w)]:[new tt(l,1-c),new tt(p,1-g),new tt(_,1-x),new tt(S,1-w)]}};function iQ(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const a=n[i];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class NA extends rp{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new NA(e.radius,e.detail)}}class OA extends gn{constructor(e=[new tt(0,-.5),new tt(.5,0),new tt(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=fn(r,0,Math.PI*2);const a=[],s=[],l=[],c=[],f=[],p=1/t,g=new ie,v=new tt,_=new ie,x=new ie,T=new ie;let S=0,w=0;for(let I=0;I<=e.length-1;I++)switch(I){case 0:S=e[I+1].x-e[I].x,w=e[I+1].y-e[I].y,_.x=w*1,_.y=-S,_.z=w*0,T.copy(_),_.normalize(),c.push(_.x,_.y,_.z);break;case e.length-1:c.push(T.x,T.y,T.z);break;default:S=e[I+1].x-e[I].x,w=e[I+1].y-e[I].y,_.x=w*1,_.y=-S,_.z=w*0,x.copy(_),_.x+=T.x,_.y+=T.y,_.z+=T.z,_.normalize(),c.push(_.x,_.y,_.z),T.copy(x)}for(let I=0;I<=t;I++){const R=i+I*p*r,O=Math.sin(R),F=Math.cos(R);for(let B=0;B<=e.length-1;B++){g.x=e[B].x*O,g.y=e[B].y,g.z=e[B].x*F,s.push(g.x,g.y,g.z),v.x=I/t,v.y=B/(e.length-1),l.push(v.x,v.y);const L=c[3*B+0]*O,z=c[3*B+1],P=c[3*B+0]*F;f.push(L,z,P)}}for(let I=0;I<t;I++)for(let R=0;R<e.length-1;R++){const O=R+I*e.length,F=O,B=O+e.length,L=O+e.length+1,z=O+1;a.push(F,B,z),a.push(L,z,B)}this.setIndex(a),this.setAttribute("position",new zt(s,3)),this.setAttribute("uv",new zt(l,2)),this.setAttribute("normal",new zt(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new OA(e.points,e.segments,e.phiStart,e.phiLength)}}class dx extends rp{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new dx(e.radius,e.detail)}}class ky extends gn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const a=e/2,s=t/2,l=Math.floor(i),c=Math.floor(r),f=l+1,p=c+1,g=e/l,v=t/c,_=[],x=[],T=[],S=[];for(let w=0;w<p;w++){const I=w*v-s;for(let R=0;R<f;R++){const O=R*g-a;x.push(O,-I,0),T.push(0,0,1),S.push(R/l),S.push(1-w/c)}}for(let w=0;w<c;w++)for(let I=0;I<l;I++){const R=I+f*w,O=I+f*(w+1),F=I+1+f*(w+1),B=I+1+f*w;_.push(R,O,B),_.push(O,F,B)}this.setIndex(_),this.setAttribute("position",new zt(x,3)),this.setAttribute("normal",new zt(T,3)),this.setAttribute("uv",new zt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ky(e.width,e.height,e.widthSegments,e.heightSegments)}}class DA extends gn{constructor(e=.5,t=1,i=32,r=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:s},i=Math.max(3,i),r=Math.max(1,r);const l=[],c=[],f=[],p=[];let g=e;const v=(t-e)/r,_=new ie,x=new tt;for(let T=0;T<=r;T++){for(let S=0;S<=i;S++){const w=a+S/i*s;_.x=g*Math.cos(w),_.y=g*Math.sin(w),c.push(_.x,_.y,_.z),f.push(0,0,1),x.x=(_.x/t+1)/2,x.y=(_.y/t+1)/2,p.push(x.x,x.y)}g+=v}for(let T=0;T<r;T++){const S=T*(i+1);for(let w=0;w<i;w++){const I=w+S,R=I,O=I+i+1,F=I+i+2,B=I+1;l.push(R,O,B),l.push(O,F,B)}}this.setIndex(l),this.setAttribute("position",new zt(c,3)),this.setAttribute("normal",new zt(f,3)),this.setAttribute("uv",new zt(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new DA(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class LA extends gn{constructor(e=new Rm([new tt(0,.5),new tt(-.5,-.5),new tt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],a=[],s=[];let l=0,c=0;if(Array.isArray(e)===!1)f(e);else for(let p=0;p<e.length;p++)f(e[p]),this.addGroup(l,c,p),l+=c,c=0;this.setIndex(i),this.setAttribute("position",new zt(r,3)),this.setAttribute("normal",new zt(a,3)),this.setAttribute("uv",new zt(s,2));function f(p){const g=r.length/3,v=p.extractPoints(t);let _=v.shape;const x=v.holes;Mu.isClockWise(_)===!1&&(_=_.reverse());for(let S=0,w=x.length;S<w;S++){const I=x[S];Mu.isClockWise(I)===!0&&(x[S]=I.reverse())}const T=Mu.triangulateShape(_,x);for(let S=0,w=x.length;S<w;S++){const I=x[S];_=_.concat(I)}for(let S=0,w=_.length;S<w;S++){const I=_[S];r.push(I.x,I.y,0),a.push(0,0,1),s.push(I.x,I.y)}for(let S=0,w=T.length;S<w;S++){const I=T[S],R=I[0]+g,O=I[1]+g,F=I[2]+g;i.push(R,O,F),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return rQ(t,e)}static fromJSON(e,t){const i=[];for(let r=0,a=e.shapes.length;r<a;r++){const s=t[e.shapes[r]];i.push(s)}return new LA(i,e.curveSegments)}}function rQ(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class px extends gn{constructor(e=1,t=32,i=16,r=0,a=Math.PI*2,s=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:a,thetaStart:s,thetaLength:l},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(s+l,Math.PI);let f=0;const p=[],g=new ie,v=new ie,_=[],x=[],T=[],S=[];for(let w=0;w<=i;w++){const I=[],R=w/i;let O=0;w===0&&s===0?O=.5/t:w===i&&c===Math.PI&&(O=-.5/t);for(let F=0;F<=t;F++){const B=F/t;g.x=-e*Math.cos(r+B*a)*Math.sin(s+R*l),g.y=e*Math.cos(s+R*l),g.z=e*Math.sin(r+B*a)*Math.sin(s+R*l),x.push(g.x,g.y,g.z),v.copy(g).normalize(),T.push(v.x,v.y,v.z),S.push(B+O,1-R),I.push(f++)}p.push(I)}for(let w=0;w<i;w++)for(let I=0;I<t;I++){const R=p[w][I+1],O=p[w][I],F=p[w+1][I],B=p[w+1][I+1];(w!==0||s>0)&&_.push(R,O,B),(w!==i-1||c<Math.PI)&&_.push(O,F,B)}this.setIndex(_),this.setAttribute("position",new zt(x,3)),this.setAttribute("normal",new zt(T,3)),this.setAttribute("uv",new zt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new px(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class kA extends rp{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new kA(e.radius,e.detail)}}class UA extends gn{constructor(e=1,t=.4,i=12,r=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:a},i=Math.floor(i),r=Math.floor(r);const s=[],l=[],c=[],f=[],p=new ie,g=new ie,v=new ie;for(let _=0;_<=i;_++)for(let x=0;x<=r;x++){const T=x/r*a,S=_/i*Math.PI*2;g.x=(e+t*Math.cos(S))*Math.cos(T),g.y=(e+t*Math.cos(S))*Math.sin(T),g.z=t*Math.sin(S),l.push(g.x,g.y,g.z),p.x=e*Math.cos(T),p.y=e*Math.sin(T),v.subVectors(g,p).normalize(),c.push(v.x,v.y,v.z),f.push(x/r),f.push(_/i)}for(let _=1;_<=i;_++)for(let x=1;x<=r;x++){const T=(r+1)*_+x-1,S=(r+1)*(_-1)+x-1,w=(r+1)*(_-1)+x,I=(r+1)*_+x;s.push(T,S,I),s.push(S,w,I)}this.setIndex(s),this.setAttribute("position",new zt(l,3)),this.setAttribute("normal",new zt(c,3)),this.setAttribute("uv",new zt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new UA(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class zA extends gn{constructor(e=1,t=.4,i=64,r=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:a,q:s},i=Math.floor(i),r=Math.floor(r);const l=[],c=[],f=[],p=[],g=new ie,v=new ie,_=new ie,x=new ie,T=new ie,S=new ie,w=new ie;for(let R=0;R<=i;++R){const O=R/i*a*Math.PI*2;I(O,a,s,e,_),I(O+.01,a,s,e,x),S.subVectors(x,_),w.addVectors(x,_),T.crossVectors(S,w),w.crossVectors(T,S),T.normalize(),w.normalize();for(let F=0;F<=r;++F){const B=F/r*Math.PI*2,L=-t*Math.cos(B),z=t*Math.sin(B);g.x=_.x+(L*w.x+z*T.x),g.y=_.y+(L*w.y+z*T.y),g.z=_.z+(L*w.z+z*T.z),c.push(g.x,g.y,g.z),v.subVectors(g,_).normalize(),f.push(v.x,v.y,v.z),p.push(R/i),p.push(F/r)}}for(let R=1;R<=i;R++)for(let O=1;O<=r;O++){const F=(r+1)*(R-1)+(O-1),B=(r+1)*R+(O-1),L=(r+1)*R+O,z=(r+1)*(R-1)+O;l.push(F,B,z),l.push(B,L,z)}this.setIndex(l),this.setAttribute("position",new zt(c,3)),this.setAttribute("normal",new zt(f,3)),this.setAttribute("uv",new zt(p,2));function I(R,O,F,B,L){const z=Math.cos(R),P=Math.sin(R),D=F/O*R,j=Math.cos(D);L.x=B*(2+j)*.5*z,L.y=B*(2+j)*P*.5,L.z=B*Math.sin(D)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zA(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class FA extends gn{constructor(e=new ZO(new ie(-1,-1,0),new ie(-1,1,0),new ie(1,1,0)),t=64,i=1,r=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:a};const s=e.computeFrenetFrames(t,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const l=new ie,c=new ie,f=new tt;let p=new ie;const g=[],v=[],_=[],x=[];T(),this.setIndex(x),this.setAttribute("position",new zt(g,3)),this.setAttribute("normal",new zt(v,3)),this.setAttribute("uv",new zt(_,2));function T(){for(let R=0;R<t;R++)S(R);S(a===!1?t:0),I(),w()}function S(R){p=e.getPointAt(R/t,p);const O=s.normals[R],F=s.binormals[R];for(let B=0;B<=r;B++){const L=B/r*Math.PI*2,z=Math.sin(L),P=-Math.cos(L);c.x=P*O.x+z*F.x,c.y=P*O.y+z*F.y,c.z=P*O.z+z*F.z,c.normalize(),v.push(c.x,c.y,c.z),l.x=p.x+i*c.x,l.y=p.y+i*c.y,l.z=p.z+i*c.z,g.push(l.x,l.y,l.z)}}function w(){for(let R=1;R<=t;R++)for(let O=1;O<=r;O++){const F=(r+1)*(R-1)+(O-1),B=(r+1)*R+(O-1),L=(r+1)*R+O,z=(r+1)*(R-1)+O;x.push(F,B,z),x.push(B,L,z)}}function I(){for(let R=0;R<=t;R++)for(let O=0;O<=r;O++)f.x=R/t,f.y=O/r,_.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new FA(new FE[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class vj extends gn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new ie,a=new ie;if(e.index!==null){const s=e.attributes.position,l=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let f=0,p=c.length;f<p;++f){const g=c[f],v=g.start,_=g.count;for(let x=v,T=v+_;x<T;x+=3)for(let S=0;S<3;S++){const w=l.getX(x+S),I=l.getX(x+(S+1)%3);r.fromBufferAttribute(s,w),a.fromBufferAttribute(s,I),RU(r,a,i)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let l=0,c=s.count/3;l<c;l++)for(let f=0;f<3;f++){const p=3*l+f,g=3*l+(f+1)%3;r.fromBufferAttribute(s,p),a.fromBufferAttribute(s,g),RU(r,a,i)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new zt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function RU(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var NU=Object.freeze({__proto__:null,BoxGeometry:sg,CapsuleGeometry:MA,CircleGeometry:CA,ConeGeometry:hx,CylinderGeometry:fx,DodecahedronGeometry:IA,EdgesGeometry:oj,ExtrudeGeometry:RA,IcosahedronGeometry:NA,LatheGeometry:OA,OctahedronGeometry:dx,PlaneGeometry:ky,PolyhedronGeometry:rp,RingGeometry:DA,ShapeGeometry:LA,SphereGeometry:px,TetrahedronGeometry:kA,TorusGeometry:UA,TorusKnotGeometry:zA,TubeGeometry:FA,WireframeGeometry:vj});class yj extends Cs{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Dt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class JO extends Hl{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class eD extends Cs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Dt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=np,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new il,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _j extends eD{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new tt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return fn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Dt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Dt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Dt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class bj extends Cs{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Dt(16777215),this.specular=new Dt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=np,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new il,this.combine=lx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xj extends Cs{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Dt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=np,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Sj extends Cs{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=np,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class wj extends Cs{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Dt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=np,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new il,this.combine=lx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class tD extends Cs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=D6,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class nD extends Cs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Ej extends Cs{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Dt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=np,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Tj extends Qs{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function xm(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function Aj(n){function e(r,a){return n[r]-n[a]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function FR(n,e,t){const i=n.length,r=new n.constructor(i);for(let a=0,s=0;s!==i;++a){const l=t[a]*e;for(let c=0;c!==e;++c)r[s++]=n[l+c]}return r}function iD(n,e,t,i){let r=1,a=n[0];for(;a!==void 0&&a[i]===void 0;)a=n[r++];if(a===void 0)return;let s=a[i];if(s!==void 0)if(Array.isArray(s))do s=a[i],s!==void 0&&(e.push(a.time),t.push(...s)),a=n[r++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[i],s!==void 0&&(e.push(a.time),s.toArray(t,t.length)),a=n[r++];while(a!==void 0);else do s=a[i],s!==void 0&&(e.push(a.time),t.push(s)),a=n[r++];while(a!==void 0)}function aQ(n,e,t,i,r=30){const a=n.clone();a.name=e;const s=[];for(let c=0;c<a.tracks.length;++c){const f=a.tracks[c],p=f.getValueSize(),g=[],v=[];for(let _=0;_<f.times.length;++_){const x=f.times[_]*r;if(!(x<t||x>=i)){g.push(f.times[_]);for(let T=0;T<p;++T)v.push(f.values[_*p+T])}}g.length!==0&&(f.times=xm(g,f.times.constructor),f.values=xm(v,f.values.constructor),s.push(f))}a.tracks=s;let l=1/0;for(let c=0;c<a.tracks.length;++c)l>a.tracks[c].times[0]&&(l=a.tracks[c].times[0]);for(let c=0;c<a.tracks.length;++c)a.tracks[c].shift(-1*l);return a.resetDuration(),a}function sQ(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,a=e/i;for(let s=0;s<r;++s){const l=t.tracks[s],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const f=n.tracks.find(function(w){return w.name===l.name&&w.ValueTypeName===c});if(f===void 0)continue;let p=0;const g=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=g/3);let v=0;const _=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=_/3);const x=l.times.length-1;let T;if(a<=l.times[0]){const w=p,I=g-p;T=l.values.slice(w,I)}else if(a>=l.times[x]){const w=x*g+p,I=w+g-p;T=l.values.slice(w,I)}else{const w=l.createInterpolant(),I=p,R=g-p;w.evaluate(a),T=w.resultBuffer.slice(I,R)}c==="quaternion"&&new Ts().fromArray(T).normalize().conjugate().toArray(T);const S=f.times.length;for(let w=0;w<S;++w){const I=w*_+v;if(c==="quaternion")Ts.multiplyQuaternionsFlat(f.values,I,T,0,f.values,I);else{const R=_-v*2;for(let O=0;O<R;++O)f.values[I+O]-=T[O]}}}return n.blendMode=kO,n}class oQ{static convertArray(e,t){return xm(e,t)}static isTypedArray(e){return H6(e)}static getKeyframeOrder(e){return Aj(e)}static sortedArray(e,t,i){return FR(e,t,i)}static flattenJSON(e,t,i,r){iD(e,t,i,r)}static subclip(e,t,i,r,a=30){return aQ(e,t,i,r,a)}static makeClipAdditive(e,t=0,i=e,r=30){return sQ(e,t,i,r)}}class mx{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],a=t[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let l=i+2;;){if(r===void 0){if(e<a)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(a=r,r=t[++i],e<r)break t}s=t.length;break n}if(!(e>=a)){const l=t[1];e<l&&(i=2,a=l);for(let c=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=a,a=t[--i-1],e>=a)break t}s=i,i=0;break n}break e}for(;i<s;){const l=i+s>>>1;e<t[l]?s=l:i=l+1}if(r=t[i],a=t[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,r)}return this.interpolate_(i,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r;for(let s=0;s!==r;++s)t[s]=i[a+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Mj extends mx{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:_m,endingEnd:_m}}intervalChanged_(e,t,i){const r=this.parameterPositions;let a=e-2,s=e+1,l=r[a],c=r[s];if(l===void 0)switch(this.getSettings_().endingStart){case bm:a=e,l=2*t-i;break;case Sb:a=r.length-2,l=t+r[a]-r[a+1];break;default:a=e,l=i}if(c===void 0)switch(this.getSettings_().endingEnd){case bm:s=e,c=2*i-t;break;case Sb:s=1,c=i+r[1]-r[0];break;default:s=e-1,c=t}const f=(i-t)*.5,p=this.valueSize;this._weightPrev=f/(t-l),this._weightNext=f/(c-i),this._offsetPrev=a*p,this._offsetNext=s*p}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,l=this.valueSize,c=e*l,f=c-l,p=this._offsetPrev,g=this._offsetNext,v=this._weightPrev,_=this._weightNext,x=(i-t)/(r-t),T=x*x,S=T*x,w=-v*S+2*v*T-v*x,I=(1+v)*S+(-1.5-2*v)*T+(-.5+v)*x+1,R=(-1-_)*S+(1.5+_)*T+.5*x,O=_*S-_*T;for(let F=0;F!==l;++F)a[F]=w*s[p+F]+I*s[f+F]+R*s[c+F]+O*s[g+F];return a}}class rD extends mx{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,l=this.valueSize,c=e*l,f=c-l,p=(i-t)/(r-t),g=1-p;for(let v=0;v!==l;++v)a[v]=s[f+v]*g+s[c+v]*p;return a}}class Cj extends mx{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class $l{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=xm(t,this.TimeBufferType),this.values=xm(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:xm(e.times,Array),values:xm(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Cj(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new rD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Mj(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case xb:t=this.InterpolantFactoryMethodDiscrete;break;case kE:t=this.InterpolantFactoryMethodLinear;break;case Mw:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return Mt("KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return xb;case this.InterpolantFactoryMethodLinear:return kE;case this.InterpolantFactoryMethodSmooth:return Mw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let a=0,s=r-1;for(;a!==r&&i[a]<e;)++a;for(;s!==-1&&i[s]>t;)--s;if(++s,a!==0||s!==r){a>=s&&(s=Math.max(s,1),a=s-1);const l=this.getValueSize();this.times=i.slice(a,s),this.values=this.values.slice(a*l,s*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(Yt("KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,a=i.length;a===0&&(Yt("KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let l=0;l!==a;l++){const c=i[l];if(typeof c=="number"&&isNaN(c)){Yt("KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(s!==null&&s>c){Yt("KeyframeTrack: Out of order keys.",this,l,c,s),e=!1;break}s=c}if(r!==void 0&&H6(r))for(let l=0,c=r.length;l!==c;++l){const f=r[l];if(isNaN(f)){Yt("KeyframeTrack: Value is not a valid number.",this,l,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===Mw,a=e.length-1;let s=1;for(let l=1;l<a;++l){let c=!1;const f=e[l],p=e[l+1];if(f!==p&&(l!==1||f!==e[0]))if(r)c=!0;else{const g=l*i,v=g-i,_=g+i;for(let x=0;x!==i;++x){const T=t[g+x];if(T!==t[v+x]||T!==t[_+x]){c=!0;break}}}if(c){if(l!==s){e[s]=e[l];const g=l*i,v=s*i;for(let _=0;_!==i;++_)t[v+_]=t[g+_]}++s}}if(a>0){e[s]=e[a];for(let l=a*i,c=s*i,f=0;f!==i;++f)t[c+f]=t[l+f];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}$l.prototype.ValueTypeName="";$l.prototype.TimeBufferType=Float32Array;$l.prototype.ValueBufferType=Float32Array;$l.prototype.DefaultInterpolation=kE;class og extends $l{constructor(e,t,i){super(e,t,i)}}og.prototype.ValueTypeName="bool";og.prototype.ValueBufferType=Array;og.prototype.DefaultInterpolation=xb;og.prototype.InterpolantFactoryMethodLinear=void 0;og.prototype.InterpolantFactoryMethodSmooth=void 0;class aD extends $l{constructor(e,t,i,r){super(e,t,i,r)}}aD.prototype.ValueTypeName="color";class Pb extends $l{constructor(e,t,i,r){super(e,t,i,r)}}Pb.prototype.ValueTypeName="number";class Ij extends mx{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,l=this.valueSize,c=(i-t)/(r-t);let f=e*l;for(let p=f+l;f!==p;f+=4)Ts.slerpFlat(a,0,s,f-l,s,f,c);return a}}class gx extends $l{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new Ij(this.times,this.values,this.getValueSize(),e)}}gx.prototype.ValueTypeName="quaternion";gx.prototype.InterpolantFactoryMethodSmooth=void 0;class lg extends $l{constructor(e,t,i){super(e,t,i)}}lg.prototype.ValueTypeName="string";lg.prototype.ValueBufferType=Array;lg.prototype.DefaultInterpolation=xb;lg.prototype.InterpolantFactoryMethodLinear=void 0;lg.prototype.InterpolantFactoryMethodSmooth=void 0;class Rb extends $l{constructor(e,t,i,r){super(e,t,i,r)}}Rb.prototype.ValueTypeName="vector";class Nb{constructor(e="",t=-1,i=[],r=mA){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=el(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,l=i.length;s!==l;++s)t.push(uQ(i[s]).scale(r));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a.userData=JSON.parse(e.userData||"{}"),a}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let a=0,s=i.length;a!==s;++a)t.push($l.toJSON(i[a]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const a=t.length,s=[];for(let l=0;l<a;l++){let c=[],f=[];c.push((l+a-1)%a,l,(l+1)%a),f.push(0,1,0);const p=Aj(c);c=FR(c,1,p),f=FR(f,1,p),!r&&c[0]===0&&(c.push(a),f.push(f[0])),s.push(new Pb(".morphTargetInfluences["+t[l].name+"]",c,f).scale(1/i))}return new this(e,-1,s)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},a=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const f=e[l],p=f.name.match(a);if(p&&p.length>1){const g=p[1];let v=r[g];v||(r[g]=v=[]),v.push(f)}}const s=[];for(const l in r)s.push(this.CreateFromMorphTargetSequence(l,r[l],t,i));return s}static parseAnimation(e,t){if(Mt("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return Yt("AnimationClip: No animation in JSONLoader data."),null;const i=function(g,v,_,x,T){if(_.length!==0){const S=[],w=[];iD(_,S,w,x),S.length!==0&&T.push(new g(v,S,w))}},r=[],a=e.name||"default",s=e.fps||30,l=e.blendMode;let c=e.length||-1;const f=e.hierarchy||[];for(let g=0;g<f.length;g++){const v=f[g].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const _={};let x;for(x=0;x<v.length;x++)if(v[x].morphTargets)for(let T=0;T<v[x].morphTargets.length;T++)_[v[x].morphTargets[T]]=-1;for(const T in _){const S=[],w=[];for(let I=0;I!==v[x].morphTargets.length;++I){const R=v[x];S.push(R.time),w.push(R.morphTarget===T?1:0)}r.push(new Pb(".morphTargetInfluence["+T+"]",S,w))}c=_.length*s}else{const _=".bones["+t[g].name+"]";i(Rb,_+".position",v,"pos",r),i(gx,_+".quaternion",v,"rot",r),i(Rb,_+".scale",v,"scl",r)}}return r.length===0?null:new this(a,c,r,l)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const a=this.tracks[i];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function lQ(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Pb;case"vector":case"vector2":case"vector3":case"vector4":return Rb;case"color":return aD;case"quaternion":return gx;case"bool":case"boolean":return og;case"string":return lg}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function uQ(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=lQ(n.type);if(n.times===void 0){const t=[],i=[];iD(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Rc={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class sD{constructor(e,t,i){const r=this;let a=!1,s=0,l=0,c;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this._abortController=null,this.itemStart=function(p){l++,a===!1&&r.onStart!==void 0&&r.onStart(p,s,l),a=!0},this.itemEnd=function(p){s++,r.onProgress!==void 0&&r.onProgress(p,s,l),s===l&&(a=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(p){r.onError!==void 0&&r.onError(p)},this.resolveURL=function(p){return c?c(p):p},this.setURLModifier=function(p){return c=p,this},this.addHandler=function(p,g){return f.push(p,g),this},this.removeHandler=function(p){const g=f.indexOf(p);return g!==-1&&f.splice(g,2),this},this.getHandler=function(p){for(let g=0,v=f.length;g<v;g+=2){const _=f[g],x=f[g+1];if(_.global&&(_.lastIndex=0),_.test(p))return x}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const Pj=new sD;class Js{constructor(e){this.manager=e!==void 0?e:Pj,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,a){i.load(e,r,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Js.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ff={};class cQ extends Error{constructor(e,t){super(e),this.response=t}}class Hc extends Js{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=Rc.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(Ff[e]!==void 0){Ff[e].push({onLoad:t,onProgress:i,onError:r});return}Ff[e]=[],Ff[e].push({onLoad:t,onProgress:i,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),l=this.mimeType,c=this.responseType;fetch(s).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&Mt("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const p=Ff[e],g=f.body.getReader(),v=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),_=v?parseInt(v):0,x=_!==0;let T=0;const S=new ReadableStream({start(w){I();function I(){g.read().then(({done:R,value:O})=>{if(R)w.close();else{T+=O.byteLength;const F=new ProgressEvent("progress",{lengthComputable:x,loaded:T,total:_});for(let B=0,L=p.length;B<L;B++){const z=p[B];z.onProgress&&z.onProgress(F)}w.enqueue(O),I()}},R=>{w.error(R)})}}});return new Response(S)}else throw new cQ(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(c){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(p=>new DOMParser().parseFromString(p,l));case"json":return f.json();default:if(l==="")return f.text();{const g=/charset="?([^;"\s]*)"?/i.exec(l),v=g&&g[1]?g[1].toLowerCase():void 0,_=new TextDecoder(v);return f.arrayBuffer().then(x=>_.decode(x))}}}).then(f=>{Rc.add(`file:${e}`,f);const p=Ff[e];delete Ff[e];for(let g=0,v=p.length;g<v;g++){const _=p[g];_.onLoad&&_.onLoad(f)}}).catch(f=>{const p=Ff[e];if(p===void 0)throw this.manager.itemError(e),f;delete Ff[e];for(let g=0,v=p.length;g<v;g++){const _=p[g];_.onError&&_.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class fQ extends Js{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Hc(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{t(a.parse(JSON.parse(l)))}catch(c){r?r(c):Yt(c),a.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Nb.parse(e[i]);t.push(r)}return t}}class hQ extends Js{constructor(e){super(e)}load(e,t,i,r){const a=this,s=[],l=new AA,c=new Hc(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(a.withCredentials);let f=0;function p(g){c.load(e[g],function(v){const _=a.parse(v,!0);s[g]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},f+=1,f===6&&(_.mipmapCount===1&&(l.minFilter=Ki),l.image=s,l.format=_.format,l.needsUpdate=!0,t&&t(l))},i,r)}if(Array.isArray(e))for(let g=0,v=e.length;g<v;++g)p(g);else c.load(e,function(g){const v=a.parse(g,!0);if(v.isCubemap){const _=v.mipmaps.length/v.mipmapCount;for(let x=0;x<_;x++){s[x]={mipmaps:[]};for(let T=0;T<v.mipmapCount;T++)s[x].mipmaps.push(v.mipmaps[x*v.mipmapCount+T]),s[x].format=v.format,s[x].width=v.width,s[x].height=v.height}l.image=s}else l.image.width=v.width,l.image.height=v.height,l.mipmaps=v.mipmaps;v.mipmapCount===1&&(l.minFilter=Ki),l.format=v.format,l.needsUpdate=!0,t&&t(l)},i,r);return l}}const Tv=new WeakMap;class Ob extends Js{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Rc.get(`image:${e}`);if(s!==void 0){if(s.complete===!0)a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0);else{let g=Tv.get(s);g===void 0&&(g=[],Tv.set(s,g)),g.push({onLoad:t,onError:r})}return s}const l=Tb("img");function c(){p(),t&&t(this);const g=Tv.get(this)||[];for(let v=0;v<g.length;v++){const _=g[v];_.onLoad&&_.onLoad(this)}Tv.delete(this),a.manager.itemEnd(e)}function f(g){p(),r&&r(g),Rc.remove(`image:${e}`);const v=Tv.get(this)||[];for(let _=0;_<v.length;_++){const x=v[_];x.onError&&x.onError(g)}Tv.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function p(){l.removeEventListener("load",c,!1),l.removeEventListener("error",f,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),Rc.add(`image:${e}`,l),a.manager.itemStart(e),l.src=e,l}}class dQ extends Js{constructor(e){super(e)}load(e,t,i,r){const a=new cx;a.colorSpace=Xa;const s=new Ob(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let l=0;function c(f){s.load(e[f],function(p){a.images[f]=p,l++,l===6&&(a.needsUpdate=!0,t&&t(a))},void 0,r)}for(let f=0;f<e.length;++f)c(f);return a}}class pQ extends Js{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Iu,l=new Hc(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(a.withCredentials),l.load(e,function(c){let f;try{f=a.parse(c)}catch(p){if(r!==void 0)r(p);else{p(p);return}}f.image!==void 0?s.image=f.image:f.data!==void 0&&(s.image.width=f.width,s.image.height=f.height,s.image.data=f.data),s.wrapS=f.wrapS!==void 0?f.wrapS:Po,s.wrapT=f.wrapT!==void 0?f.wrapT:Po,s.magFilter=f.magFilter!==void 0?f.magFilter:Ki,s.minFilter=f.minFilter!==void 0?f.minFilter:Ki,s.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(s.colorSpace=f.colorSpace),f.flipY!==void 0&&(s.flipY=f.flipY),f.format!==void 0&&(s.format=f.format),f.type!==void 0&&(s.type=f.type),f.mipmaps!==void 0&&(s.mipmaps=f.mipmaps,s.minFilter=Pc),f.mipmapCount===1&&(s.minFilter=Ki),f.generateMipmaps!==void 0&&(s.generateMipmaps=f.generateMipmaps),s.needsUpdate=!0,t&&t(s,f)},i,r),s}}class mQ extends Js{constructor(e){super(e)}load(e,t,i,r){const a=new Er,s=new Ob(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(l){a.image=l,a.needsUpdate=!0,t!==void 0&&t(a)},i,r),a}}class ap extends ni{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Dt(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}}class Rj extends ap{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ni.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Dt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}toJSON(e){const t=super.toJSON(e);return t.object.groundColor=this.groundColor.getHex(),t}}const dI=new pn,OU=new ie,DU=new ie;class oD{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new tt(512,512),this.mapType=Ws,this.map=null,this.mapPass=null,this.matrix=new pn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ly,this._frameExtents=new tt(1,1),this._viewportCount=1,this._viewports=[new Ri(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;OU.setFromMatrixPosition(e.matrixWorld),t.position.copy(OU),DU.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(DU),t.updateMatrixWorld(),dI.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dI,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(dI)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class gQ extends oD{constructor(){super(new Or(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,i=fy*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||t.far;(i!==t.fov||r!==t.aspect||a!==t.far)&&(t.fov=i,t.aspect=r,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Nj extends ap{constructor(e,t,i=0,r=Math.PI/3,a=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ni.DEFAULT_UP),this.updateMatrix(),this.target=new ni,this.distance=i,this.angle=r,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new gQ}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.angle=this.angle,t.object.decay=this.decay,t.object.penumbra=this.penumbra,t.object.target=this.target.uuid,this.map&&this.map.isTexture&&(t.object.map=this.map.toJSON(e).uuid),t.object.shadow=this.shadow.toJSON(),t}}class vQ extends oD{constructor(){super(new Or(90,1,.5,500)),this.isPointLightShadow=!0}}class Oj extends ap{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new vQ}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.decay=this.decay,t.object.shadow=this.shadow.toJSON(),t}}class Zf extends bA{constructor(e=-1,t=1,i=1,r=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let a=i-e,s=i+e,l=r+t,c=r-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=f*this.view.offsetX,s=a+f*this.view.width,l-=p*this.view.offsetY,c=l-p*this.view.height}this.projectionMatrix.makeOrthographic(a,s,l,c,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class yQ extends oD{constructor(){super(new Zf(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Dj extends ap{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ni.DEFAULT_UP),this.updateMatrix(),this.target=new ni,this.shadow=new yQ}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}}class Lj extends ap{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class kj extends ap{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class lD{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ie)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*r),t.addScaledVector(s[2],.488603*a),t.addScaledVector(s[3],.488603*i),t.addScaledVector(s[4],1.092548*(i*r)),t.addScaledVector(s[5],1.092548*(r*a)),t.addScaledVector(s[6],.315392*(3*a*a-1)),t.addScaledVector(s[7],1.092548*(i*a)),t.addScaledVector(s[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*r),t.addScaledVector(s[2],2*.511664*a),t.addScaledVector(s[3],2*.511664*i),t.addScaledVector(s[4],2*.429043*i*r),t.addScaledVector(s[5],2*.429043*r*a),t.addScaledVector(s[6],.743125*a*a-.247708),t.addScaledVector(s[7],2*.429043*i*a),t.addScaledVector(s[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,a=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*a,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*i*a,t[8]=.546274*(i*i-r*r)}}class Uj extends ap{constructor(e=new lD,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class BA extends Js{constructor(e){super(e),this.textures={}}load(e,t,i,r){const a=this,s=new Hc(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(l){try{t(a.parse(JSON.parse(l)))}catch(c){r?r(c):Yt(c),a.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(a){return t[a]===void 0&&Mt("MaterialLoader: Undefined texture",a),t[a]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Dt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(r.allowOverride=e.allowOverride),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(r.uniforms[a]={},s.type){case"t":r.uniforms[a].value=i(s.value);break;case"c":r.uniforms[a].value=new Dt().setHex(s.value);break;case"v2":r.uniforms[a].value=new tt().fromArray(s.value);break;case"v3":r.uniforms[a].value=new ie().fromArray(s.value);break;case"v4":r.uniforms[a].value=new Ri().fromArray(s.value);break;case"m3":r.uniforms[a].value=new Tn().fromArray(s.value);break;case"m4":r.uniforms[a].value=new pn().fromArray(s.value);break;default:r.uniforms[a].value=s.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)r.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),r.normalScale=new tt().fromArray(a)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new tt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return BA.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:yj,SpriteMaterial:HO,RawShaderMaterial:JO,ShaderMaterial:Hl,PointsMaterial:WO,MeshPhysicalMaterial:_j,MeshStandardMaterial:eD,MeshPhongMaterial:bj,MeshToonMaterial:xj,MeshNormalMaterial:Sj,MeshLambertMaterial:wj,MeshDepthMaterial:tD,MeshDistanceMaterial:nD,MeshBasicMaterial:ip,MeshMatcapMaterial:Ej,LineDashedMaterial:Tj,LineBasicMaterial:Qs,Material:Cs};return new t[e]}}class BR{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class zj extends gn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Fj extends Js{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Hc(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(l){try{t(a.parse(JSON.parse(l)))}catch(c){r?r(c):Yt(c),a.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(_,x){if(t[x]!==void 0)return t[x];const S=_.interleavedBuffers[x],w=a(_,S.buffer),I=Wv(S.type,w),R=new wA(I,S.stride);return R.uuid=S.uuid,t[x]=R,R}function a(_,x){if(i[x]!==void 0)return i[x];const S=_.arrayBuffers[x],w=new Uint32Array(S).buffer;return i[x]=w,w}const s=e.isInstancedBufferGeometry?new zj:new gn,l=e.data.index;if(l!==void 0){const _=Wv(l.type,l.array);s.setIndex(new hi(_,1))}const c=e.data.attributes;for(const _ in c){const x=c[_];let T;if(x.isInterleavedBufferAttribute){const S=r(e.data,x.data);T=new Vm(S,x.itemSize,x.offset,x.normalized)}else{const S=Wv(x.type,x.array),w=x.isInstancedBufferAttribute?py:hi;T=new w(S,x.itemSize,x.normalized)}x.name!==void 0&&(T.name=x.name),x.usage!==void 0&&T.setUsage(x.usage),s.setAttribute(_,T)}const f=e.data.morphAttributes;if(f)for(const _ in f){const x=f[_],T=[];for(let S=0,w=x.length;S<w;S++){const I=x[S];let R;if(I.isInterleavedBufferAttribute){const O=r(e.data,I.data);R=new Vm(O,I.itemSize,I.offset,I.normalized)}else{const O=Wv(I.type,I.array);R=new hi(O,I.itemSize,I.normalized)}I.name!==void 0&&(R.name=I.name),T.push(R)}s.morphAttributes[_]=T}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let _=0,x=g.length;_!==x;++_){const T=g[_];s.addGroup(T.start,T.count,T.materialIndex)}const v=e.data.boundingSphere;return v!==void 0&&(s.boundingSphere=new Ea().fromJSON(v)),e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class _Q extends Js{constructor(e){super(e)}load(e,t,i,r){const a=this,s=this.path===""?BR.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const l=new Hc(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){let f=null;try{f=JSON.parse(c)}catch(g){r!==void 0&&r(g),g("ObjectLoader: Can't parse "+e+".",g.message);return}const p=f.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),Yt("ObjectLoader: Can't load "+e);return}a.parse(f,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?BR.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const a=new Hc(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,t),l=JSON.parse(s),c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(l)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,function(){t!==void 0&&t(f)}),l=this.parseTextures(e.textures,s),c=this.parseMaterials(e.materials,l),f=this.parseObject(e.object,a,c,l,i),p=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,p),this.bindLightTargets(f),t!==void 0){let g=!1;for(const v in s)if(s[v].data instanceof HTMLImageElement){g=!0;break}g===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,s),c=this.parseObject(e.object,r,l,s,t),f=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,f),this.bindLightTargets(c),c}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const a=new Rm().fromJSON(e[i]);t[a.uuid]=a}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(a){a.isBone&&(r[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const l=new EA().fromJSON(e[a],r);i[l.uuid]=l}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new Fj;for(let a=0,s=e.length;a<s;a++){let l;const c=e[a];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":l=r.parse(c);break;default:c.type in NU?l=NU[c.type].fromJSON(c,t):Mt(`ObjectLoader: Unsupported geometry type "${c.type}"`)}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),c.userData!==void 0&&(l.userData=c.userData),i[c.uuid]=l}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const a=new BA;a.setTextures(t);for(let s=0,l=e.length;s<l;s++){const c=e[s];i[c.uuid]===void 0&&(i[c.uuid]=a.parse(c)),r[c.uuid]=i[c.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],a=Nb.parse(r);t[a.uuid]=a}return t}parseImages(e,t){const i=this,r={};let a;function s(c){return i.manager.itemStart(c),a.load(c,function(){i.manager.itemEnd(c)},void 0,function(){i.manager.itemError(c),i.manager.itemEnd(c)})}function l(c){if(typeof c=="string"){const f=c,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return s(p)}else return c.data?{data:Wv(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new sD(t);a=new Ob(c),a.setCrossOrigin(this.crossOrigin);for(let f=0,p=e.length;f<p;f++){const g=e[f],v=g.url;if(Array.isArray(v)){const _=[];for(let x=0,T=v.length;x<T;x++){const S=v[x],w=l(S);w!==null&&(w instanceof HTMLImageElement?_.push(w):_.push(new Iu(w.data,w.width,w.height)))}r[g.uuid]=new Rd(_)}else{const _=l(g.url);r[g.uuid]=new Rd(_)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function a(s){if(typeof s=="string"){const l=s,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await r.loadAsync(c)}else return s.data?{data:Wv(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){r=new Ob(this.manager),r.setCrossOrigin(this.crossOrigin);for(let s=0,l=e.length;s<l;s++){const c=e[s],f=c.url;if(Array.isArray(f)){const p=[];for(let g=0,v=f.length;g<v;g++){const _=f[g],x=await a(_);x!==null&&(x instanceof HTMLImageElement?p.push(x):p.push(new Iu(x.data,x.width,x.height)))}i[c.uuid]=new Rd(p)}else{const p=await a(c.url);i[c.uuid]=new Rd(p)}}}return i}parseTextures(e,t){function i(a,s){return typeof a=="number"?a:(Mt("ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const r={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const l=e[a];l.image===void 0&&Mt('ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&Mt("ObjectLoader: Undefined image",l.image);const c=t[l.image],f=c.data;let p;Array.isArray(f)?(p=new cx,f.length===6&&(p.needsUpdate=!0)):(f&&f.data?p=new Iu:p=new Er,f&&(p.needsUpdate=!0)),p.source=c,p.uuid=l.uuid,l.name!==void 0&&(p.name=l.name),l.mapping!==void 0&&(p.mapping=i(l.mapping,bQ)),l.channel!==void 0&&(p.channel=l.channel),l.offset!==void 0&&p.offset.fromArray(l.offset),l.repeat!==void 0&&p.repeat.fromArray(l.repeat),l.center!==void 0&&p.center.fromArray(l.center),l.rotation!==void 0&&(p.rotation=l.rotation),l.wrap!==void 0&&(p.wrapS=i(l.wrap[0],LU),p.wrapT=i(l.wrap[1],LU)),l.format!==void 0&&(p.format=l.format),l.internalFormat!==void 0&&(p.internalFormat=l.internalFormat),l.type!==void 0&&(p.type=l.type),l.colorSpace!==void 0&&(p.colorSpace=l.colorSpace),l.minFilter!==void 0&&(p.minFilter=i(l.minFilter,kU)),l.magFilter!==void 0&&(p.magFilter=i(l.magFilter,kU)),l.anisotropy!==void 0&&(p.anisotropy=l.anisotropy),l.flipY!==void 0&&(p.flipY=l.flipY),l.generateMipmaps!==void 0&&(p.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(p.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(p.compareFunction=l.compareFunction),l.userData!==void 0&&(p.userData=l.userData),r[l.uuid]=p}return r}parseObject(e,t,i,r,a){let s;function l(v){return t[v]===void 0&&Mt("ObjectLoader: Undefined geometry",v),t[v]}function c(v){if(v!==void 0){if(Array.isArray(v)){const _=[];for(let x=0,T=v.length;x<T;x++){const S=v[x];i[S]===void 0&&Mt("ObjectLoader: Undefined material",S),_.push(i[S])}return _}return i[v]===void 0&&Mt("ObjectLoader: Undefined material",v),i[v]}}function f(v){return r[v]===void 0&&Mt("ObjectLoader: Undefined texture",v),r[v]}let p,g;switch(e.type){case"Scene":s=new jO,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new Dt(e.background):s.background=f(e.background)),e.environment!==void 0&&(s.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new SA(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new xA(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new Or(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Zf(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new Lj(e.color,e.intensity);break;case"DirectionalLight":s=new Dj(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new Oj(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new kj(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new Nj(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new Rj(e.color,e.groundColor,e.intensity);break;case"LightProbe":const v=new lD().fromArray(e.sh);s=new Uj(v,e.intensity);break;case"SkinnedMesh":p=l(e.geometry),g=c(e.material),s=new ej(p,g),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":p=l(e.geometry),g=c(e.material),s=new $r(p,g);break;case"InstancedMesh":p=l(e.geometry),g=c(e.material);const _=e.count,x=e.instanceMatrix,T=e.instanceColor;s=new tj(p,g,_),s.instanceMatrix=new py(new Float32Array(x.array),16),T!==void 0&&(s.instanceColor=new py(new Float32Array(T.array),T.itemSize));break;case"BatchedMesh":p=l(e.geometry),g=c(e.material),s=new nj(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,g),s.geometry=p,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._geometryInfo=e.geometryInfo.map(S=>{let w=null,I=null;return S.boundingBox!==void 0&&(w=new Za().fromJSON(S.boundingBox)),S.boundingSphere!==void 0&&(I=new Ea().fromJSON(S.boundingSphere)),{...S,boundingBox:w,boundingSphere:I}}),s._instanceInfo=e.instanceInfo,s._availableInstanceIds=e._availableInstanceIds,s._availableGeometryIds=e._availableGeometryIds,s._nextIndexStart=e.nextIndexStart,s._nextVertexStart=e.nextVertexStart,s._geometryCount=e.geometryCount,s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._matricesTexture=f(e.matricesTexture.uuid),s._indirectTexture=f(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=f(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(s.boundingSphere=new Ea().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(s.boundingBox=new Za().fromJSON(e.boundingBox));break;case"LOD":s=new J6;break;case"Line":s=new $d(l(e.geometry),c(e.material));break;case"LineLoop":s=new ij(l(e.geometry),c(e.material));break;case"LineSegments":s=new Jc(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":s=new rj(l(e.geometry),c(e.material));break;case"Sprite":s=new Q6(c(e.material));break;case"Group":s=new qv;break;case"Bone":s=new GO;break;default:s=new ni}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(s.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let _=0;_<v.length;_++)s.add(this.parseObject(v[_],t,i,r,a))}if(e.animations!==void 0){const v=e.animations;for(let _=0;_<v.length;_++){const x=v[_];s.animations.push(a[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const v=e.levels;for(let _=0;_<v.length;_++){const x=v[_],T=s.getObjectByProperty("uuid",x.object);T!==void 0&&s.addLevel(T,x.distance,x.hysteresis)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?Mt("ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new ni}})}}const bQ={UVMapping:lA,CubeReflectionMapping:Bc,CubeRefractionMapping:Gd,EquirectangularReflectionMapping:vb,EquirectangularRefractionMapping:yb,CubeUVReflectionMapping:Dy},LU={RepeatWrapping:_b,ClampToEdgeWrapping:Po,MirroredRepeatWrapping:bb},kU={NearestFilter:Dr,NearestMipmapNearestFilter:IO,NearestMipmapLinearFilter:Gv,LinearFilter:Ki,LinearMipmapNearestFilter:J_,LinearMipmapLinearFilter:Pc},pI=new WeakMap;class xQ extends Js{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&Mt("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&Mt("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Rc.get(`image-bitmap:${e}`);if(s!==void 0){if(a.manager.itemStart(e),s.then){s.then(f=>{if(pI.has(s)===!0)r&&r(pI.get(s)),a.manager.itemError(e),a.manager.itemEnd(e);else return t&&t(f),a.manager.itemEnd(e),f});return}return setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader,l.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const c=fetch(e,l).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(f){return Rc.add(`image-bitmap:${e}`,f),t&&t(f),a.manager.itemEnd(e),f}).catch(function(f){r&&r(f),pI.set(c,f),Rc.remove(`image-bitmap:${e}`),a.manager.itemError(e),a.manager.itemEnd(e)});Rc.add(`image-bitmap:${e}`,c),a.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let W1;class uD{static getContext(){return W1===void 0&&(W1=new(window.AudioContext||window.webkitAudioContext)),W1}static setContext(e){W1=e}}class SQ extends Js{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Hc(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(c){try{const f=c.slice(0);uD.getContext().decodeAudioData(f,function(g){t(g)}).catch(l)}catch(f){l(f)}},i,r);function l(c){r?r(c):Yt(c),a.manager.itemError(e)}}}const UU=new pn,zU=new pn,Jp=new pn;class wQ{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Or,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Or,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Jp.copy(e.projectionMatrix);const r=t.eyeSep/2,a=r*t.near/t.focus,s=t.near*Math.tan(Pm*t.fov*.5)/t.zoom;let l,c;zU.elements[12]=-r,UU.elements[12]=r,l=-s*t.aspect+a,c=s*t.aspect+a,Jp.elements[0]=2*t.near/(c-l),Jp.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(Jp),l=-s*t.aspect-a,c=s*t.aspect-a,Jp.elements[0]=2*t.near/(c-l),Jp.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(Jp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(zU),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(UU)}}class Bj extends Or{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}let cD=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};const em=new ie,mI=new Ts,EQ=new ie,tm=new ie,nm=new ie;class TQ extends ni{constructor(){super(),this.type="AudioListener",this.context=uD.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new cD}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(em,mI,EQ),tm.set(0,0,-1).applyQuaternion(mI),nm.set(0,1,0).applyQuaternion(mI),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(em.x,i),t.positionY.linearRampToValueAtTime(em.y,i),t.positionZ.linearRampToValueAtTime(em.z,i),t.forwardX.linearRampToValueAtTime(tm.x,i),t.forwardY.linearRampToValueAtTime(tm.y,i),t.forwardZ.linearRampToValueAtTime(tm.z,i),t.upX.linearRampToValueAtTime(nm.x,i),t.upY.linearRampToValueAtTime(nm.y,i),t.upZ.linearRampToValueAtTime(nm.z,i)}else t.setPosition(em.x,em.y,em.z),t.setOrientation(tm.x,tm.y,tm.z,nm.x,nm.y,nm.z)}}class Vj extends ni{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){Mt("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){Mt("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){Mt("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){Mt("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){Mt("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(Mt("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){Mt("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(Mt("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const im=new ie,FU=new Ts,AQ=new ie,rm=new ie;class MQ extends Vj{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(im,FU,AQ),rm.set(0,0,1).applyQuaternion(FU);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(im.x,i),t.positionY.linearRampToValueAtTime(im.y,i),t.positionZ.linearRampToValueAtTime(im.z,i),t.orientationX.linearRampToValueAtTime(rm.x,i),t.orientationY.linearRampToValueAtTime(rm.y,i),t.orientationZ.linearRampToValueAtTime(rm.z,i)}else t.setPosition(im.x,im.y,im.z),t.setOrientation(rm.x,rm.y,rm.z)}}class CQ{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class jj{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,a,s;switch(t){case"quaternion":r=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,a=e*r+r;let s=this.cumulativeWeight;if(s===0){for(let l=0;l!==r;++l)i[a+l]=i[l];s=t}else{s+=t;const l=t/s;this._mixBufferRegion(i,a,0,l,r)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const c=t*this._origIndex;this._mixBufferRegion(i,r,c,1-a,t)}s>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let c=t,f=t+t;c!==f;++c)if(i[c]!==i[c+t]){l.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let a=i,s=r;a!==s;++a)t[a]=t[r+a%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,a){if(r>=.5)for(let s=0;s!==a;++s)e[t+s]=e[i+s]}_slerp(e,t,i,r){Ts.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,a){const s=this._workIndex*a;Ts.multiplyQuaternionsFlat(e,s,e,t,e,i),Ts.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,i,r,a){const s=1-r;for(let l=0;l!==a;++l){const c=t+l;e[c]=e[c]*s+e[i+l]*r}}_lerpAdditive(e,t,i,r,a){for(let s=0;s!==a;++s){const l=t+s;e[l]=e[l]+e[i+s]*r}}}const fD="\\[\\]\\.:\\/",IQ=new RegExp("["+fD+"]","g"),hD="[^"+fD+"]",PQ="[^"+fD.replace("\\.","")+"]",RQ=/((?:WC+[\/:])*)/.source.replace("WC",hD),NQ=/(WCOD+)?/.source.replace("WCOD",PQ),OQ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",hD),DQ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",hD),LQ=new RegExp("^"+RQ+NQ+OQ+DQ+"$"),kQ=["material","materials","bones","map"];class UQ{constructor(e,t,i){const r=i||ti.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=i.length;r!==a;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class ti{constructor(e,t,i){this.path=t,this.parsedPath=i||ti.parseTrackName(t),this.node=ti.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new ti.Composite(e,t,i):new ti(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(IQ,"")}static parseTrackName(e){const t=LQ.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const a=i.nodeName.substring(r+1);kQ.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(a){for(let s=0;s<a.length;s++){const l=a[s];if(l.name===t||l.uuid===t)return l;const c=i(l.children);if(c)return c}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let a=t.propertyIndex;if(e||(e=ti.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){Mt("PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let f=t.objectIndex;switch(i){case"materials":if(!e.material){Yt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){Yt("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){Yt("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===f){f=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){Yt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){Yt("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){Yt("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(f!==void 0){if(e[f]===void 0){Yt("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const s=e[r];if(s===void 0){const f=t.nodeName;Yt("PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?l=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){Yt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){Yt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ti.Composite=UQ;ti.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ti.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ti.prototype.GetterByBindingType=[ti.prototype._getValue_direct,ti.prototype._getValue_array,ti.prototype._getValue_arrayElement,ti.prototype._getValue_toArray];ti.prototype.SetterByBindingTypeAndVersioning=[[ti.prototype._setValue_direct,ti.prototype._setValue_direct_setNeedsUpdate,ti.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ti.prototype._setValue_array,ti.prototype._setValue_array_setNeedsUpdate,ti.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ti.prototype._setValue_arrayElement,ti.prototype._setValue_arrayElement_setNeedsUpdate,ti.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ti.prototype._setValue_fromArray,ti.prototype._setValue_fromArray_setNeedsUpdate,ti.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class zQ{constructor(){this.isAnimationObjectGroup=!0,this.uuid=el(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length;let l,c=e.length,f=this.nCachedObjects_;for(let p=0,g=arguments.length;p!==g;++p){const v=arguments[p],_=v.uuid;let x=t[_];if(x===void 0){x=c++,t[_]=x,e.push(v);for(let T=0,S=s;T!==S;++T)a[T].push(new ti(v,i[T],r[T]))}else if(x<f){l=e[x];const T=--f,S=e[T];t[S.uuid]=x,e[x]=S,t[_]=T,e[T]=v;for(let w=0,I=s;w!==I;++w){const R=a[w],O=R[T];let F=R[x];R[x]=O,F===void 0&&(F=new ti(v,i[w],r[w])),R[T]=F}}else e[x]!==l&&Yt("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_;for(let s=0,l=arguments.length;s!==l;++s){const c=arguments[s],f=c.uuid,p=t[f];if(p!==void 0&&p>=a){const g=a++,v=e[g];t[v.uuid]=p,e[p]=v,t[f]=g,e[g]=c;for(let _=0,x=r;_!==x;++_){const T=i[_],S=T[g],w=T[p];T[p]=S,T[g]=w}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_,s=e.length;for(let l=0,c=arguments.length;l!==c;++l){const f=arguments[l],p=f.uuid,g=t[p];if(g!==void 0)if(delete t[p],g<a){const v=--a,_=e[v],x=--s,T=e[x];t[_.uuid]=g,e[g]=_,t[T.uuid]=v,e[v]=T,e.pop();for(let S=0,w=r;S!==w;++S){const I=i[S],R=I[v],O=I[x];I[g]=R,I[v]=O,I.pop()}}else{const v=--s,_=e[v];v>0&&(t[_.uuid]=g),e[g]=_,e.pop();for(let x=0,T=r;x!==T;++x){const S=i[x];S[g]=S[v],S.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const a=this._bindings;if(r!==void 0)return a[r];const s=this._paths,l=this._parsedPaths,c=this._objects,f=c.length,p=this.nCachedObjects_,g=new Array(f);r=a.length,i[e]=r,s.push(e),l.push(t),a.push(g);for(let v=p,_=c.length;v!==_;++v){const x=c[v];g[v]=new ti(x,e,t)}return g}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,a=this._parsedPaths,s=this._bindings,l=s.length-1,c=s[l],f=e[l];t[f]=i,s[i]=c,s.pop(),a[i]=a[l],a.pop(),r[i]=r[l],r.pop()}}}class Hj{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const a=t.tracks,s=a.length,l=new Array(s),c={endingStart:_m,endingEnd:_m};for(let f=0;f!==s;++f){const p=a[f].createInterpolant(null);l[f]=p,p.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=N6,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,a=e._clip.duration,s=a/r,l=r/a;e.warp(1,s,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,a=r.time,s=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,f=l.sampleValues;return c[0]=a,c[1]=a+i,f[0]=e/s,f[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const c=(e-a)*i;c<0||i===0?t=0:(this._startTime=null,t=i*c)}t*=this._updateTimeScale(e);const s=this._updateTime(t),l=this._updateWeight(e);if(l>0){const c=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case kO:for(let p=0,g=c.length;p!==g;++p)c[p].evaluate(s),f[p].accumulateAdditive(l);break;case mA:default:for(let p=0,g=c.length;p!==g;++p)c[p].evaluate(s),f[p].accumulate(r,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,a=this._loopCount;const s=i===O6;if(e===0)return a===-1?r:s&&(a&1)===1?t-r:r;if(i===R6){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=t||r<0){const l=Math.floor(r/t);r-=t*l,a+=Math.abs(l);const c=this.repetitions-a;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const f=e<0;this._setEndings(f,!f,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=r;if(s&&(a&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=bm,r.endingEnd=bm):(e?r.endingStart=this.zeroSlopeAtStart?bm:_m:r.endingStart=Sb,t?r.endingEnd=this.zeroSlopeAtEnd?bm:_m:r.endingEnd=Sb)}_scheduleFading(e,t,i){const r=this._mixer,a=r.time;let s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const l=s.parameterPositions,c=s.sampleValues;return l[0]=a,c[0]=t,l[1]=a+e,c[1]=i,this}}const FQ=new Float32Array(1);class BQ extends Qc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,a=r.length,s=e._propertyBindings,l=e._interpolants,c=i.uuid,f=this._bindingsByRootAndName;let p=f[c];p===void 0&&(p={},f[c]=p);for(let g=0;g!==a;++g){const v=r[g],_=v.name;let x=p[_];if(x!==void 0)++x.referenceCount,s[g]=x;else{if(x=s[g],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,c,_));continue}const T=t&&t._propertyBindings[g].binding.parsedPath;x=new jj(ti.create(i,_,T),v.ValueTypeName,v.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,c,_),s[g]=x}l[g].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,a=this._actionsByClip[r];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,a=this._actionsByClip;let s=a[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=s;else{const l=s.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,l=s[a],c=l.knownActions,f=c[c.length-1],p=e._byClipCacheIndex;f._byClipCacheIndex=p,c[p]=f,c.pop(),e._byClipCacheIndex=null;const g=l.actionByRoot,v=(e._localRoot||this._root).uuid;delete g[v],c.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,a=this._bindings;let s=r[t];s===void 0&&(s={},r[t]=s),s[i]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,a=i.path,s=this._bindingsByRootAndName,l=s[r],c=t[t.length-1],f=e._cacheIndex;c._cacheIndex=f,t[f]=c,t.pop(),delete l[a],Object.keys(l).length===0&&delete s[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new rD(new Float32Array(2),new Float32Array(2),1,FQ),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=t[r];e.__cacheIndex=r,t[r]=e,a.__cacheIndex=i,t[i]=a}clipAction(e,t,i){const r=t||this._root,a=r.uuid;let s=typeof e=="string"?Nb.findByName(r,e):e;const l=s!==null?s.uuid:e,c=this._actionsByClip[l];let f=null;if(i===void 0&&(s!==null?i=s.blendMode:i=mA),c!==void 0){const g=c.actionByRoot[a];if(g!==void 0&&g.blendMode===i)return g;f=c.knownActions[0],s===null&&(s=f._clip)}if(s===null)return null;const p=new Hj(this,s,t,i);return this._bindAction(p,f),this._addInactiveAction(p,l,a),p}existingAction(e,t){const i=t||this._root,r=i.uuid,a=typeof e=="string"?Nb.findByName(i,e):e,s=a?a.uuid:e,l=this._actionsByClip[s];return l!==void 0&&l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let f=0;f!==i;++f)t[f]._update(r,e,a,s);const l=this._bindings,c=this._nActiveBindings;for(let f=0;f!==c;++f)l[f].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,a=r[i];if(a!==void 0){const s=a.knownActions;for(let l=0,c=s.length;l!==c;++l){const f=s[l];this._deactivateAction(f);const p=f._cacheIndex,g=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,g._cacheIndex=p,t[p]=g,t.pop(),this._removeInactiveBindingsForAction(f)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const s in i){const l=i[s].actionByRoot,c=l[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,a=r[t];if(a!==void 0)for(const s in a){const l=a[s];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class VQ extends zO{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new _A(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class dD{constructor(e){this.value=e}clone(){return new dD(this.value.clone===void 0?this.value:this.value.clone())}}let jQ=0;class HQ extends Qc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:jQ++}),this.name="",this.usage=Eb,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const a=Array.isArray(t[i])?t[i]:[t[i]];for(let s=0;s<a.length;s++)this.uniforms.push(a[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class GQ extends wA{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class WQ{constructor(e,t,i,r,a,s=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=a,this.normalized=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const BU=new pn;class Gj{constructor(e,t,i=0,r=1/0){this.ray=new ag(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new hy,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):Yt("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return BU.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(BU),this}intersectObject(e,t=!0,i=[]){return VR(e,this,i,t),i.sort(VU),i}intersectObjects(e,t=!0,i=[]){for(let r=0,a=e.length;r<a;r++)VR(e[r],this,i,t);return i.sort(VU),i}}function VU(n,e){return n.distance-e.distance}function VR(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const a=n.children;for(let s=0,l=a.length;s<l;s++)VR(a[s],e,t,!0)}}class qQ{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=$Q.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function $Q(){this._document.hidden===!1&&this.reset()}class jR{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=fn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(fn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class XQ{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class pD{constructor(e,t,i,r){pD.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const a=this.elements;return a[0]=e,a[2]=t,a[1]=i,a[3]=r,this}}const jU=new tt;class YQ{constructor(e=new tt(1/0,1/0),t=new tt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=jU.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,jU).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const HU=new ie,q1=new ie,Av=new ie,Mv=new ie,gI=new ie,KQ=new ie,ZQ=new ie;class QQ{constructor(e=new ie,t=new ie){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){HU.subVectors(e,this.start),q1.subVectors(this.end,this.start);const i=q1.dot(q1);let a=q1.dot(HU)/i;return t&&(a=fn(a,0,1)),a}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,t=KQ,i=ZQ){const r=10000000000000001e-32;let a,s;const l=this.start,c=e.start,f=this.end,p=e.end;Av.subVectors(f,l),Mv.subVectors(p,c),gI.subVectors(l,c);const g=Av.dot(Av),v=Mv.dot(Mv),_=Mv.dot(gI);if(g<=r&&v<=r)return t.copy(l),i.copy(c),t.sub(i),t.dot(t);if(g<=r)a=0,s=_/v,s=fn(s,0,1);else{const x=Av.dot(gI);if(v<=r)s=0,a=fn(-x/g,0,1);else{const T=Av.dot(Mv),S=g*v-T*T;S!==0?a=fn((T*_-x*v)/S,0,1):a=0,s=(T*a+_)/v,s<0?(s=0,a=fn(-x/g,0,1)):s>1&&(s=1,a=fn((T-x)/g,0,1))}}return t.copy(l).add(Av.multiplyScalar(a)),i.copy(c).add(Mv.multiplyScalar(s)),t.sub(i),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const GU=new ie;class JQ extends ni{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new gn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,l=1,c=32;s<c;s++,l++){const f=s/c*Math.PI*2,p=l/c*Math.PI*2;r.push(Math.cos(f),Math.sin(f),1,Math.cos(p),Math.sin(p),1)}i.setAttribute("position",new zt(r,3));const a=new Qs({fog:!1,toneMapped:!1});this.cone=new Jc(i,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),GU.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(GU),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const gd=new ie,$1=new pn,vI=new pn;class eJ extends Jc{constructor(e){const t=Wj(e),i=new gn,r=[],a=[];for(let f=0;f<t.length;f++){const p=t[f];p.parent&&p.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(0,0,0),a.push(0,0,0))}i.setAttribute("position",new zt(r,3)),i.setAttribute("color",new zt(a,3));const s=new Qs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,s),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const l=new Dt(255),c=new Dt(65280);this.setColors(l,c)}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");vI.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<t.length;a++){const l=t[a];l.parent&&l.parent.isBone&&($1.multiplyMatrices(vI,l.matrixWorld),gd.setFromMatrixPosition($1),r.setXYZ(s,gd.x,gd.y,gd.z),$1.multiplyMatrices(vI,l.parent.matrixWorld),gd.setFromMatrixPosition($1),r.setXYZ(s+1,gd.x,gd.y,gd.z),s+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const r=this.geometry.getAttribute("color");for(let a=0;a<r.count;a+=2)r.setXYZ(a,e.r,e.g,e.b),r.setXYZ(a+1,t.r,t.g,t.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function Wj(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...Wj(n.children[t]));return e}class tJ extends $r{constructor(e,t,i){const r=new px(t,4,2),a=new ip({wireframe:!0,fog:!1,toneMapped:!1});super(r,a),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const nJ=new ie,WU=new Dt,qU=new Dt;class iJ extends ni{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new dx(t);r.rotateY(Math.PI*.5),this.material=new ip({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=r.getAttribute("position"),s=new Float32Array(a.count*3);r.setAttribute("color",new hi(s,3)),this.add(new $r(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");WU.copy(this.light.color),qU.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const a=i<r/2?WU:qU;t.setXYZ(i,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(nJ.setFromMatrixPosition(this.light.matrixWorld).negate())}}class rJ extends Jc{constructor(e=10,t=10,i=4473924,r=8947848){i=new Dt(i),r=new Dt(r);const a=t/2,s=e/t,l=e/2,c=[],f=[];for(let v=0,_=0,x=-l;v<=t;v++,x+=s){c.push(-l,0,x,l,0,x),c.push(x,0,-l,x,0,l);const T=v===a?i:r;T.toArray(f,_),_+=3,T.toArray(f,_),_+=3,T.toArray(f,_),_+=3,T.toArray(f,_),_+=3}const p=new gn;p.setAttribute("position",new zt(c,3)),p.setAttribute("color",new zt(f,3));const g=new Qs({vertexColors:!0,toneMapped:!1});super(p,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class aJ extends Jc{constructor(e=10,t=16,i=8,r=64,a=4473924,s=8947848){a=new Dt(a),s=new Dt(s);const l=[],c=[];if(t>1)for(let g=0;g<t;g++){const v=g/t*(Math.PI*2),_=Math.sin(v)*e,x=Math.cos(v)*e;l.push(0,0,0),l.push(_,0,x);const T=g&1?a:s;c.push(T.r,T.g,T.b),c.push(T.r,T.g,T.b)}for(let g=0;g<i;g++){const v=g&1?a:s,_=e-e/i*g;for(let x=0;x<r;x++){let T=x/r*(Math.PI*2),S=Math.sin(T)*_,w=Math.cos(T)*_;l.push(S,0,w),c.push(v.r,v.g,v.b),T=(x+1)/r*(Math.PI*2),S=Math.sin(T)*_,w=Math.cos(T)*_,l.push(S,0,w),c.push(v.r,v.g,v.b)}}const f=new gn;f.setAttribute("position",new zt(l,3)),f.setAttribute("color",new zt(c,3));const p=new Qs({vertexColors:!0,toneMapped:!1});super(f,p),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const $U=new ie,X1=new ie,XU=new ie;class sJ extends ni{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new gn;r.setAttribute("position",new zt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new Qs({fog:!1,toneMapped:!1});this.lightPlane=new $d(r,a),this.add(this.lightPlane),r=new gn,r.setAttribute("position",new zt([0,0,0,0,0,1],3)),this.targetLine=new $d(r,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),$U.setFromMatrixPosition(this.light.matrixWorld),X1.setFromMatrixPosition(this.light.target.matrixWorld),XU.subVectors(X1,$U),this.lightPlane.lookAt(X1),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(X1),this.targetLine.scale.z=XU.length()}}const Y1=new ie,xr=new bA;class oJ extends Jc{constructor(e){const t=new gn,i=new Qs({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],a=[],s={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(x,T){c(x),c(T)}function c(x){r.push(0,0,0),a.push(0,0,0),s[x]===void 0&&(s[x]=[]),s[x].push(r.length/3-1)}t.setAttribute("position",new zt(r,3)),t.setAttribute("color",new zt(a,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const f=new Dt(16755200),p=new Dt(16711680),g=new Dt(43775),v=new Dt(16777215),_=new Dt(3355443);this.setColors(f,p,g,v,_)}setColors(e,t,i,r,a){const l=this.geometry.getAttribute("color");return l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,a.r,a.g,a.b),l.setXYZ(41,a.r,a.g,a.b),l.setXYZ(42,a.r,a.g,a.b),l.setXYZ(43,a.r,a.g,a.b),l.setXYZ(44,a.r,a.g,a.b),l.setXYZ(45,a.r,a.g,a.b),l.setXYZ(46,a.r,a.g,a.b),l.setXYZ(47,a.r,a.g,a.b),l.setXYZ(48,a.r,a.g,a.b),l.setXYZ(49,a.r,a.g,a.b),l.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;let a,s;if(xr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)a=1,s=0;else if(this.camera.coordinateSystem===Zo)a=-1,s=1;else if(this.camera.coordinateSystem===uy)a=0,s=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Rr("c",t,e,xr,0,0,a),Rr("t",t,e,xr,0,0,s),Rr("n1",t,e,xr,-i,-r,a),Rr("n2",t,e,xr,i,-r,a),Rr("n3",t,e,xr,-i,r,a),Rr("n4",t,e,xr,i,r,a),Rr("f1",t,e,xr,-i,-r,s),Rr("f2",t,e,xr,i,-r,s),Rr("f3",t,e,xr,-i,r,s),Rr("f4",t,e,xr,i,r,s),Rr("u1",t,e,xr,i*.7,r*1.1,a),Rr("u2",t,e,xr,-i*.7,r*1.1,a),Rr("u3",t,e,xr,0,r*2,a),Rr("cf1",t,e,xr,-i,0,s),Rr("cf2",t,e,xr,i,0,s),Rr("cf3",t,e,xr,0,-r,s),Rr("cf4",t,e,xr,0,r,s),Rr("cn1",t,e,xr,-i,0,a),Rr("cn2",t,e,xr,i,0,a),Rr("cn3",t,e,xr,0,-r,a),Rr("cn4",t,e,xr,0,r,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Rr(n,e,t,i,r,a,s){Y1.set(r,a,s).unproject(i);const l=e[n];if(l!==void 0){const c=t.getAttribute("position");for(let f=0,p=l.length;f<p;f++)c.setXYZ(l[f],Y1.x,Y1.y,Y1.z)}}const K1=new Za;class lJ extends Jc{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),a=new gn;a.setIndex(new hi(i,1)),a.setAttribute("position",new hi(r,3)),super(a,new Qs({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&K1.setFromObject(this.object),K1.isEmpty())return;const e=K1.min,t=K1.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class uJ extends Jc{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new gn;a.setIndex(new hi(i,1)),a.setAttribute("position",new zt(r,3)),super(a,new Qs({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class cJ extends $d{constructor(e,t=1,i=16776960){const r=i,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new gn;s.setAttribute("position",new zt(a,3)),s.computeBoundingSphere(),super(s,new Qs({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new gn;c.setAttribute("position",new zt(l,3)),c.computeBoundingSphere(),this.add(new $r(c,new ip({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const YU=new ie;let Z1,yI;class fJ extends ni{constructor(e=new ie(0,0,1),t=new ie(0,0,0),i=1,r=16776960,a=i*.2,s=a*.2){super(),this.type="ArrowHelper",Z1===void 0&&(Z1=new gn,Z1.setAttribute("position",new zt([0,0,0,0,1,0],3)),yI=new hx(.5,1,5,1),yI.translate(0,-.5,0)),this.position.copy(t),this.line=new $d(Z1,new Qs({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new $r(yI,new ip({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,a,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{YU.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(YU,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class hJ extends Jc{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new gn;r.setAttribute("position",new zt(t,3)),r.setAttribute("color",new zt(i,3));const a=new Qs({vertexColors:!0,toneMapped:!1});super(r,a),this.type="AxesHelper"}setColors(e,t,i){const r=new Dt,a=this.geometry.attributes.color.array;return r.set(e),r.toArray(a,0),r.toArray(a,3),r.set(t),r.toArray(a,6),r.toArray(a,9),r.set(i),r.toArray(a,12),r.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class dJ{constructor(){this.type="ShapePath",this.color=new Dt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new BE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,a,s){return this.currentPath.bezierCurveTo(e,t,i,r,a,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(w){const I=[];for(let R=0,O=w.length;R<O;R++){const F=w[R],B=new Rm;B.curves=F.curves,I.push(B)}return I}function i(w,I){const R=I.length;let O=!1;for(let F=R-1,B=0;B<R;F=B++){let L=I[F],z=I[B],P=z.x-L.x,D=z.y-L.y;if(Math.abs(D)>Number.EPSILON){if(D<0&&(L=I[B],P=-P,z=I[F],D=-D),w.y<L.y||w.y>z.y)continue;if(w.y===L.y){if(w.x===L.x)return!0}else{const j=D*(w.x-L.x)-P*(w.y-L.y);if(j===0)return!0;if(j<0)continue;O=!O}}else{if(w.y!==L.y)continue;if(z.x<=w.x&&w.x<=L.x||L.x<=w.x&&w.x<=z.x)return!0}}return O}const r=Mu.isClockWise,a=this.subPaths;if(a.length===0)return[];let s,l,c;const f=[];if(a.length===1)return l=a[0],c=new Rm,c.curves=l.curves,f.push(c),f;let p=!r(a[0].getPoints());p=e?!p:p;const g=[],v=[];let _=[],x=0,T;v[x]=void 0,_[x]=[];for(let w=0,I=a.length;w<I;w++)l=a[w],T=l.getPoints(),s=r(T),s=e?!s:s,s?(!p&&v[x]&&x++,v[x]={s:new Rm,p:T},v[x].s.curves=l.curves,p&&x++,_[x]=[]):_[x].push({h:l,p:T[0]});if(!v[0])return t(a);if(v.length>1){let w=!1,I=0;for(let R=0,O=v.length;R<O;R++)g[R]=[];for(let R=0,O=v.length;R<O;R++){const F=_[R];for(let B=0;B<F.length;B++){const L=F[B];let z=!0;for(let P=0;P<v.length;P++)i(L.p,v[P].p)&&(R!==P&&I++,z?(z=!1,g[P].push(L)):w=!0);z&&g[R].push(L)}}I>0&&w===!1&&(_=g)}let S;for(let w=0,I=v.length;w<I;w++){c=v[w].s,f.push(c),S=_[w];for(let R=0,O=S.length;R<O;R++)c.holes.push(S[R].h)}return f}}class pJ extends Qc{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){Mt("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function mJ(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function gJ(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function vJ(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function HR(n,e,t,i){const r=yJ(i);switch(t){case DO:return n*e;case hA:return n*e/r.components*r.byteLength;case ux:return n*e/r.components*r.byteLength;case Bm:return n*e*2/r.components*r.byteLength;case dA:return n*e*2/r.components*r.byteLength;case LO:return n*e*3/r.components*r.byteLength;case Es:return n*e*4/r.components*r.byteLength;case pA:return n*e*4/r.components*r.byteLength;case eb:case tb:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case nb:case ib:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case aE:case oE:return Math.max(n,16)*Math.max(e,8)/4;case rE:case sE:return Math.max(n,8)*Math.max(e,8)/2;case lE:case uE:case fE:case hE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case cE:case dE:case pE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case mE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case gE:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case vE:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case yE:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case _E:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case bE:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case xE:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case SE:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case wE:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case EE:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case TE:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case AE:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case ME:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case CE:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case IE:case PE:case RE:return Math.ceil(n/4)*Math.ceil(e/4)*16;case NE:case OE:return Math.ceil(n/4)*Math.ceil(e/4)*8;case DE:case LE:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function yJ(n){switch(n){case Ws:case PO:return{byteLength:1,components:1};case oy:case RO:case Vc:return{byteLength:2,components:1};case cA:case fA:return{byteLength:2,components:4};case jl:case uA:case $s:return{byteLength:4,components:1};case NO:case OO:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class _J{static contain(e,t){return mJ(e,t)}static cover(e,t){return gJ(e,t)}static fill(e){return vJ(e)}static getByteLength(e,t,i,r){return HR(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:sA}}));typeof window<"u"&&(window.__THREE__?Mt("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=sA);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function qj(){let n=null,e=!1,t=null,i=null;function r(a,s){t(a,s),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function bJ(n){const e=new WeakMap;function t(l,c){const f=l.array,p=l.usage,g=f.byteLength,v=n.createBuffer();n.bindBuffer(c,v),n.bufferData(c,f,p),l.onUploadCallback();let _;if(f instanceof Float32Array)_=n.FLOAT;else if(typeof Float16Array<"u"&&f instanceof Float16Array)_=n.HALF_FLOAT;else if(f instanceof Uint16Array)l.isFloat16BufferAttribute?_=n.HALF_FLOAT:_=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)_=n.SHORT;else if(f instanceof Uint32Array)_=n.UNSIGNED_INT;else if(f instanceof Int32Array)_=n.INT;else if(f instanceof Int8Array)_=n.BYTE;else if(f instanceof Uint8Array)_=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)_=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:v,type:_,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version,size:g}}function i(l,c,f){const p=c.array,g=c.updateRanges;if(n.bindBuffer(f,l),g.length===0)n.bufferSubData(f,0,p);else{g.sort((_,x)=>_.start-x.start);let v=0;for(let _=1;_<g.length;_++){const x=g[v],T=g[_];T.start<=x.start+x.count+1?x.count=Math.max(x.count,T.start+T.count-x.start):(++v,g[v]=T)}g.length=v+1;for(let _=0,x=g.length;_<x;_++){const T=g[_];n.bufferSubData(f,T.start*p.BYTES_PER_ELEMENT,p,T.start,T.count)}c.clearUpdateRanges()}c.onUploadCallback()}function r(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=e.get(l);c&&(n.deleteBuffer(c.buffer),e.delete(l))}function s(l,c){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const p=e.get(l);(!p||p.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const f=e.get(l);if(f===void 0)e.set(l,t(l,c));else if(f.version<l.version){if(f.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(f.buffer,l,c),f.version=l.version}}return{get:r,remove:a,update:s}}var xJ=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,SJ=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,wJ=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,EJ=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,TJ=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,AJ=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,MJ=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,CJ=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,IJ=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,PJ=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,RJ=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,NJ=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,OJ=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,DJ=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,LJ=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,kJ=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,UJ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,zJ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,FJ=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,BJ=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,VJ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,jJ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,HJ=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,GJ=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,WJ=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,qJ=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,$J=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,XJ=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,YJ=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,KJ=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,ZJ="gl_FragColor = linearToOutputTexel( gl_FragColor );",QJ=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,JJ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,eee=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,tee=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,nee=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,iee=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,ree=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,aee=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,see=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,oee=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,lee=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,uee=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,cee=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,fee=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,hee=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,dee=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,pee=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,mee=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,gee=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,vee=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,yee=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,_ee=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,bee=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,xee=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,See=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,wee=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Eee=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Tee=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Aee=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Mee=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Cee=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Iee=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Pee=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Ree=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Nee=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Oee=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Dee=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Lee=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,kee=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Uee=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,zee=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Fee=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Bee=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Vee=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,jee=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Hee=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Gee=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Wee=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,qee=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,$ee=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Xee=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Yee=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Kee=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Zee=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Qee=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Jee=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,ete=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,tte=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,nte=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,ite=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,rte=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,ate=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,ste=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,ote=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,lte=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,ute=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,cte=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,fte=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,hte=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,dte=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,pte=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,mte=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,gte=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,vte=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,yte=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,_te=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const bte=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,xte=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ste=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,wte=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ete=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Tte=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ate=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Mte=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Cte=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Ite=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,Pte=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Rte=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Nte=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Ote=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Dte=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Lte=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kte=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ute=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zte=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Fte=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Bte=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Vte=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,jte=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Hte=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Gte=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Wte=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qte=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$te=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Xte=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Yte=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Kte=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Zte=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Qte=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Jte=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,On={alphahash_fragment:xJ,alphahash_pars_fragment:SJ,alphamap_fragment:wJ,alphamap_pars_fragment:EJ,alphatest_fragment:TJ,alphatest_pars_fragment:AJ,aomap_fragment:MJ,aomap_pars_fragment:CJ,batching_pars_vertex:IJ,batching_vertex:PJ,begin_vertex:RJ,beginnormal_vertex:NJ,bsdfs:OJ,iridescence_fragment:DJ,bumpmap_pars_fragment:LJ,clipping_planes_fragment:kJ,clipping_planes_pars_fragment:UJ,clipping_planes_pars_vertex:zJ,clipping_planes_vertex:FJ,color_fragment:BJ,color_pars_fragment:VJ,color_pars_vertex:jJ,color_vertex:HJ,common:GJ,cube_uv_reflection_fragment:WJ,defaultnormal_vertex:qJ,displacementmap_pars_vertex:$J,displacementmap_vertex:XJ,emissivemap_fragment:YJ,emissivemap_pars_fragment:KJ,colorspace_fragment:ZJ,colorspace_pars_fragment:QJ,envmap_fragment:JJ,envmap_common_pars_fragment:eee,envmap_pars_fragment:tee,envmap_pars_vertex:nee,envmap_physical_pars_fragment:dee,envmap_vertex:iee,fog_vertex:ree,fog_pars_vertex:aee,fog_fragment:see,fog_pars_fragment:oee,gradientmap_pars_fragment:lee,lightmap_pars_fragment:uee,lights_lambert_fragment:cee,lights_lambert_pars_fragment:fee,lights_pars_begin:hee,lights_toon_fragment:pee,lights_toon_pars_fragment:mee,lights_phong_fragment:gee,lights_phong_pars_fragment:vee,lights_physical_fragment:yee,lights_physical_pars_fragment:_ee,lights_fragment_begin:bee,lights_fragment_maps:xee,lights_fragment_end:See,logdepthbuf_fragment:wee,logdepthbuf_pars_fragment:Eee,logdepthbuf_pars_vertex:Tee,logdepthbuf_vertex:Aee,map_fragment:Mee,map_pars_fragment:Cee,map_particle_fragment:Iee,map_particle_pars_fragment:Pee,metalnessmap_fragment:Ree,metalnessmap_pars_fragment:Nee,morphinstance_vertex:Oee,morphcolor_vertex:Dee,morphnormal_vertex:Lee,morphtarget_pars_vertex:kee,morphtarget_vertex:Uee,normal_fragment_begin:zee,normal_fragment_maps:Fee,normal_pars_fragment:Bee,normal_pars_vertex:Vee,normal_vertex:jee,normalmap_pars_fragment:Hee,clearcoat_normal_fragment_begin:Gee,clearcoat_normal_fragment_maps:Wee,clearcoat_pars_fragment:qee,iridescence_pars_fragment:$ee,opaque_fragment:Xee,packing:Yee,premultiplied_alpha_fragment:Kee,project_vertex:Zee,dithering_fragment:Qee,dithering_pars_fragment:Jee,roughnessmap_fragment:ete,roughnessmap_pars_fragment:tte,shadowmap_pars_fragment:nte,shadowmap_pars_vertex:ite,shadowmap_vertex:rte,shadowmask_pars_fragment:ate,skinbase_vertex:ste,skinning_pars_vertex:ote,skinning_vertex:lte,skinnormal_vertex:ute,specularmap_fragment:cte,specularmap_pars_fragment:fte,tonemapping_fragment:hte,tonemapping_pars_fragment:dte,transmission_fragment:pte,transmission_pars_fragment:mte,uv_pars_fragment:gte,uv_pars_vertex:vte,uv_vertex:yte,worldpos_vertex:_te,background_vert:bte,background_frag:xte,backgroundCube_vert:Ste,backgroundCube_frag:wte,cube_vert:Ete,cube_frag:Tte,depth_vert:Ate,depth_frag:Mte,distance_vert:Cte,distance_frag:Ite,equirect_vert:Pte,equirect_frag:Rte,linedashed_vert:Nte,linedashed_frag:Ote,meshbasic_vert:Dte,meshbasic_frag:Lte,meshlambert_vert:kte,meshlambert_frag:Ute,meshmatcap_vert:zte,meshmatcap_frag:Fte,meshnormal_vert:Bte,meshnormal_frag:Vte,meshphong_vert:jte,meshphong_frag:Hte,meshphysical_vert:Gte,meshphysical_frag:Wte,meshtoon_vert:qte,meshtoon_frag:$te,points_vert:Xte,points_frag:Yte,shadow_vert:Kte,shadow_frag:Zte,sprite_vert:Qte,sprite_frag:Jte},Rt={common:{diffuse:{value:new Dt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Tn},alphaMap:{value:null},alphaMapTransform:{value:new Tn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Tn}},envmap:{envMap:{value:null},envMapRotation:{value:new Tn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Tn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Tn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Tn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Tn},normalScale:{value:new tt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Tn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Tn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Tn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Tn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Dt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Dt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Tn},alphaTest:{value:0},uvTransform:{value:new Tn}},sprite:{diffuse:{value:new Dt(16777215)},opacity:{value:1},center:{value:new tt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Tn},alphaMap:{value:null},alphaMapTransform:{value:new Tn},alphaTest:{value:0}}},Su={basic:{uniforms:Hs([Rt.common,Rt.specularmap,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.fog]),vertexShader:On.meshbasic_vert,fragmentShader:On.meshbasic_frag},lambert:{uniforms:Hs([Rt.common,Rt.specularmap,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.fog,Rt.lights,{emissive:{value:new Dt(0)}}]),vertexShader:On.meshlambert_vert,fragmentShader:On.meshlambert_frag},phong:{uniforms:Hs([Rt.common,Rt.specularmap,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.fog,Rt.lights,{emissive:{value:new Dt(0)},specular:{value:new Dt(1118481)},shininess:{value:30}}]),vertexShader:On.meshphong_vert,fragmentShader:On.meshphong_frag},standard:{uniforms:Hs([Rt.common,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.roughnessmap,Rt.metalnessmap,Rt.fog,Rt.lights,{emissive:{value:new Dt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:On.meshphysical_vert,fragmentShader:On.meshphysical_frag},toon:{uniforms:Hs([Rt.common,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.gradientmap,Rt.fog,Rt.lights,{emissive:{value:new Dt(0)}}]),vertexShader:On.meshtoon_vert,fragmentShader:On.meshtoon_frag},matcap:{uniforms:Hs([Rt.common,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.fog,{matcap:{value:null}}]),vertexShader:On.meshmatcap_vert,fragmentShader:On.meshmatcap_frag},points:{uniforms:Hs([Rt.points,Rt.fog]),vertexShader:On.points_vert,fragmentShader:On.points_frag},dashed:{uniforms:Hs([Rt.common,Rt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:On.linedashed_vert,fragmentShader:On.linedashed_frag},depth:{uniforms:Hs([Rt.common,Rt.displacementmap]),vertexShader:On.depth_vert,fragmentShader:On.depth_frag},normal:{uniforms:Hs([Rt.common,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,{opacity:{value:1}}]),vertexShader:On.meshnormal_vert,fragmentShader:On.meshnormal_frag},sprite:{uniforms:Hs([Rt.sprite,Rt.fog]),vertexShader:On.sprite_vert,fragmentShader:On.sprite_frag},background:{uniforms:{uvTransform:{value:new Tn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:On.background_vert,fragmentShader:On.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Tn}},vertexShader:On.backgroundCube_vert,fragmentShader:On.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:On.cube_vert,fragmentShader:On.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:On.equirect_vert,fragmentShader:On.equirect_frag},distance:{uniforms:Hs([Rt.common,Rt.displacementmap,{referencePosition:{value:new ie},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:On.distance_vert,fragmentShader:On.distance_frag},shadow:{uniforms:Hs([Rt.lights,Rt.fog,{color:{value:new Dt(0)},opacity:{value:1}}]),vertexShader:On.shadow_vert,fragmentShader:On.shadow_frag}};Su.physical={uniforms:Hs([Su.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Tn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Tn},clearcoatNormalScale:{value:new tt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Tn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Tn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Tn},sheen:{value:0},sheenColor:{value:new Dt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Tn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Tn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Tn},transmissionSamplerSize:{value:new tt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Tn},attenuationDistance:{value:0},attenuationColor:{value:new Dt(0)},specularColor:{value:new Dt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Tn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Tn},anisotropyVector:{value:new tt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Tn}}]),vertexShader:On.meshphysical_vert,fragmentShader:On.meshphysical_frag};const Q1={r:0,b:0,g:0},am=new il,ene=new pn;function tne(n,e,t,i,r,a,s){const l=new Dt(0);let c=a===!0?0:1,f,p,g=null,v=0,_=null;function x(R){let O=R.isScene===!0?R.background:null;return O&&O.isTexture&&(O=(R.backgroundBlurriness>0?t:e).get(O)),O}function T(R){let O=!1;const F=x(R);F===null?w(l,c):F&&F.isColor&&(w(F,1),O=!0);const B=n.xr.getEnvironmentBlendMode();B==="additive"?i.buffers.color.setClear(0,0,0,1,s):B==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||O)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function S(R,O){const F=x(O);F&&(F.isCubeTexture||F.mapping===Dy)?(p===void 0&&(p=new $r(new sg(1,1,1),new Hl({name:"BackgroundCubeMaterial",uniforms:dy(Su.backgroundCube.uniforms),vertexShader:Su.backgroundCube.vertexShader,fragmentShader:Su.backgroundCube.fragmentShader,side:Ks,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(B,L,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(p)),am.copy(O.backgroundRotation),am.x*=-1,am.y*=-1,am.z*=-1,F.isCubeTexture&&F.isRenderTargetTexture===!1&&(am.y*=-1,am.z*=-1),p.material.uniforms.envMap.value=F,p.material.uniforms.flipEnvMap.value=F.isCubeTexture&&F.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=O.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(ene.makeRotationFromEuler(am)),p.material.toneMapped=qn.getTransfer(F.colorSpace)!==gi,(g!==F||v!==F.version||_!==n.toneMapping)&&(p.material.needsUpdate=!0,g=F,v=F.version,_=n.toneMapping),p.layers.enableAll(),R.unshift(p,p.geometry,p.material,0,0,null)):F&&F.isTexture&&(f===void 0&&(f=new $r(new ky(2,2),new Hl({name:"BackgroundMaterial",uniforms:dy(Su.background.uniforms),vertexShader:Su.background.vertexShader,fragmentShader:Su.background.fragmentShader,side:eh,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(f)),f.material.uniforms.t2D.value=F,f.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,f.material.toneMapped=qn.getTransfer(F.colorSpace)!==gi,F.matrixAutoUpdate===!0&&F.updateMatrix(),f.material.uniforms.uvTransform.value.copy(F.matrix),(g!==F||v!==F.version||_!==n.toneMapping)&&(f.material.needsUpdate=!0,g=F,v=F.version,_=n.toneMapping),f.layers.enableAll(),R.unshift(f,f.geometry,f.material,0,0,null))}function w(R,O){R.getRGB(Q1,X6(n)),i.buffers.color.setClear(Q1.r,Q1.g,Q1.b,O,s)}function I(){p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return l},setClearColor:function(R,O=1){l.set(R),c=O,w(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(R){c=R,w(l,c)},render:T,addToRenderList:S,dispose:I}}function nne(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=v(null);let a=r,s=!1;function l(D,j,q,W,se){let ue=!1;const J=g(W,q,j);a!==J&&(a=J,f(a.object)),ue=_(D,W,q,se),ue&&x(D,W,q,se),se!==null&&e.update(se,n.ELEMENT_ARRAY_BUFFER),(ue||s)&&(s=!1,O(D,j,q,W),se!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(se).buffer))}function c(){return n.createVertexArray()}function f(D){return n.bindVertexArray(D)}function p(D){return n.deleteVertexArray(D)}function g(D,j,q){const W=q.wireframe===!0;let se=i[D.id];se===void 0&&(se={},i[D.id]=se);let ue=se[j.id];ue===void 0&&(ue={},se[j.id]=ue);let J=ue[W];return J===void 0&&(J=v(c()),ue[W]=J),J}function v(D){const j=[],q=[],W=[];for(let se=0;se<t;se++)j[se]=0,q[se]=0,W[se]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:q,attributeDivisors:W,object:D,attributes:{},index:null}}function _(D,j,q,W){const se=a.attributes,ue=j.attributes;let J=0;const ae=q.getAttributes();for(const he in ae)if(ae[he].location>=0){const Re=se[he];let Q=ue[he];if(Q===void 0&&(he==="instanceMatrix"&&D.instanceMatrix&&(Q=D.instanceMatrix),he==="instanceColor"&&D.instanceColor&&(Q=D.instanceColor)),Re===void 0||Re.attribute!==Q||Q&&Re.data!==Q.data)return!0;J++}return a.attributesNum!==J||a.index!==W}function x(D,j,q,W){const se={},ue=j.attributes;let J=0;const ae=q.getAttributes();for(const he in ae)if(ae[he].location>=0){let Re=ue[he];Re===void 0&&(he==="instanceMatrix"&&D.instanceMatrix&&(Re=D.instanceMatrix),he==="instanceColor"&&D.instanceColor&&(Re=D.instanceColor));const Q={};Q.attribute=Re,Re&&Re.data&&(Q.data=Re.data),se[he]=Q,J++}a.attributes=se,a.attributesNum=J,a.index=W}function T(){const D=a.newAttributes;for(let j=0,q=D.length;j<q;j++)D[j]=0}function S(D){w(D,0)}function w(D,j){const q=a.newAttributes,W=a.enabledAttributes,se=a.attributeDivisors;q[D]=1,W[D]===0&&(n.enableVertexAttribArray(D),W[D]=1),se[D]!==j&&(n.vertexAttribDivisor(D,j),se[D]=j)}function I(){const D=a.newAttributes,j=a.enabledAttributes;for(let q=0,W=j.length;q<W;q++)j[q]!==D[q]&&(n.disableVertexAttribArray(q),j[q]=0)}function R(D,j,q,W,se,ue,J){J===!0?n.vertexAttribIPointer(D,j,q,se,ue):n.vertexAttribPointer(D,j,q,W,se,ue)}function O(D,j,q,W){T();const se=W.attributes,ue=q.getAttributes(),J=j.defaultAttributeValues;for(const ae in ue){const he=ue[ae];if(he.location>=0){let Te=se[ae];if(Te===void 0&&(ae==="instanceMatrix"&&D.instanceMatrix&&(Te=D.instanceMatrix),ae==="instanceColor"&&D.instanceColor&&(Te=D.instanceColor)),Te!==void 0){const Re=Te.normalized,Q=Te.itemSize,de=e.get(Te);if(de===void 0)continue;const Me=de.buffer,We=de.type,vt=de.bytesPerElement,be=We===n.INT||We===n.UNSIGNED_INT||Te.gpuType===uA;if(Te.isInterleavedBufferAttribute){const Ae=Te.data,mt=Ae.stride,ye=Te.offset;if(Ae.isInstancedInterleavedBuffer){for(let et=0;et<he.locationSize;et++)w(he.location+et,Ae.meshPerAttribute);D.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=Ae.meshPerAttribute*Ae.count)}else for(let et=0;et<he.locationSize;et++)S(he.location+et);n.bindBuffer(n.ARRAY_BUFFER,Me);for(let et=0;et<he.locationSize;et++)R(he.location+et,Q/he.locationSize,We,Re,mt*vt,(ye+Q/he.locationSize*et)*vt,be)}else{if(Te.isInstancedBufferAttribute){for(let Ae=0;Ae<he.locationSize;Ae++)w(he.location+Ae,Te.meshPerAttribute);D.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=Te.meshPerAttribute*Te.count)}else for(let Ae=0;Ae<he.locationSize;Ae++)S(he.location+Ae);n.bindBuffer(n.ARRAY_BUFFER,Me);for(let Ae=0;Ae<he.locationSize;Ae++)R(he.location+Ae,Q/he.locationSize,We,Re,Q*vt,Q/he.locationSize*Ae*vt,be)}}else if(J!==void 0){const Re=J[ae];if(Re!==void 0)switch(Re.length){case 2:n.vertexAttrib2fv(he.location,Re);break;case 3:n.vertexAttrib3fv(he.location,Re);break;case 4:n.vertexAttrib4fv(he.location,Re);break;default:n.vertexAttrib1fv(he.location,Re)}}}}I()}function F(){z();for(const D in i){const j=i[D];for(const q in j){const W=j[q];for(const se in W)p(W[se].object),delete W[se];delete j[q]}delete i[D]}}function B(D){if(i[D.id]===void 0)return;const j=i[D.id];for(const q in j){const W=j[q];for(const se in W)p(W[se].object),delete W[se];delete j[q]}delete i[D.id]}function L(D){for(const j in i){const q=i[j];if(q[D.id]===void 0)continue;const W=q[D.id];for(const se in W)p(W[se].object),delete W[se];delete q[D.id]}}function z(){P(),s=!0,a!==r&&(a=r,f(a.object))}function P(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:l,reset:z,resetDefaultState:P,dispose:F,releaseStatesOfGeometry:B,releaseStatesOfProgram:L,initAttributes:T,enableAttribute:S,disableUnusedAttributes:I}}function ine(n,e,t){let i;function r(f){i=f}function a(f,p){n.drawArrays(i,f,p),t.update(p,i,1)}function s(f,p,g){g!==0&&(n.drawArraysInstanced(i,f,p,g),t.update(p,i,g))}function l(f,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,f,0,p,0,g);let _=0;for(let x=0;x<g;x++)_+=p[x];t.update(_,i,1)}function c(f,p,g,v){if(g===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let x=0;x<f.length;x++)s(f[x],p[x],v[x]);else{_.multiDrawArraysInstancedWEBGL(i,f,0,p,0,v,0,g);let x=0;for(let T=0;T<g;T++)x+=p[T]*v[T];t.update(x,i,1)}}this.setMode=r,this.render=a,this.renderInstances=s,this.renderMultiDraw=l,this.renderMultiDrawInstances=c}function rne(n,e,t,i){let r;function a(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const L=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(L){return!(L!==Es&&i.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(L){const z=L===Vc&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(L!==Ws&&i.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&L!==$s&&!z)}function c(L){if(L==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return L==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=t.precision!==void 0?t.precision:"highp";const p=c(f);p!==f&&(Mt("WebGLRenderer:",f,"not supported, using",p,"instead."),f=p);const g=t.logarithmicDepthBuffer===!0,v=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),_=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),T=n.getParameter(n.MAX_TEXTURE_SIZE),S=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),w=n.getParameter(n.MAX_VERTEX_ATTRIBS),I=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),R=n.getParameter(n.MAX_VARYING_VECTORS),O=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),F=n.getParameter(n.MAX_SAMPLES),B=n.getParameter(n.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:c,textureFormatReadable:s,textureTypeReadable:l,precision:f,logarithmicDepthBuffer:g,reversedDepthBuffer:v,maxTextures:_,maxVertexTextures:x,maxTextureSize:T,maxCubemapSize:S,maxAttributes:w,maxVertexUniforms:I,maxVaryings:R,maxFragmentUniforms:O,maxSamples:F,samples:B}}function ane(n){const e=this;let t=null,i=0,r=!1,a=!1;const s=new Bf,l=new Tn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(g,v){const _=g.length!==0||v||i!==0||r;return r=v,i=g.length,_},this.beginShadows=function(){a=!0,p(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(g,v){t=p(g,v,0)},this.setState=function(g,v,_){const x=g.clippingPlanes,T=g.clipIntersection,S=g.clipShadows,w=n.get(g);if(!r||x===null||x.length===0||a&&!S)a?p(null):f();else{const I=a?0:i,R=I*4;let O=w.clippingState||null;c.value=O,O=p(x,v,R,_);for(let F=0;F!==R;++F)O[F]=t[F];w.clippingState=O,this.numIntersection=T?this.numPlanes:0,this.numPlanes+=I}};function f(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function p(g,v,_,x){const T=g!==null?g.length:0;let S=null;if(T!==0){if(S=c.value,x!==!0||S===null){const w=_+T*4,I=v.matrixWorldInverse;l.getNormalMatrix(I),(S===null||S.length<w)&&(S=new Float32Array(w));for(let R=0,O=_;R!==T;++R,O+=4)s.copy(g[R]).applyMatrix4(I,l),s.normal.toArray(S,O),S[O+3]=s.constant}c.value=S,c.needsUpdate=!0}return e.numPlanes=T,e.numIntersection=0,S}}function sne(n){let e=new WeakMap;function t(s,l){return l===vb?s.mapping=Bc:l===yb&&(s.mapping=Gd),s}function i(s){if(s&&s.isTexture){const l=s.mapping;if(l===vb||l===yb)if(e.has(s)){const c=e.get(s).texture;return t(c,s.mapping)}else{const c=s.image;if(c&&c.height>0){const f=new VO(c.height);return f.fromEquirectangularTexture(n,s),e.set(s,f),s.addEventListener("dispose",r),t(f.texture,s.mapping)}else return null}}return s}function r(s){const l=s.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap}return{get:i,dispose:a}}const Nd=4,KU=[.125,.215,.35,.446,.526,.582],vm=20,one=256,I_=new Zf,ZU=new Dt;let _I=null,bI=0,xI=0,SI=!1;const lne=new ie;class GR{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,i=.1,r=100,a={}){const{size:s=256,position:l=lne}=a;_I=this._renderer.getRenderTarget(),bI=this._renderer.getActiveCubeFace(),xI=this._renderer.getActiveMipmapLevel(),SI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,i,r,c,l),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=e4(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=JU(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(_I,bI,xI),this._renderer.xr.enabled=SI,e.scissorTest=!1,Cv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Bc||e.mapping===Gd?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),_I=this._renderer.getRenderTarget(),bI=this._renderer.getActiveCubeFace(),xI=this._renderer.getActiveMipmapLevel(),SI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Ki,minFilter:Ki,generateMipmaps:!1,type:Vc,format:Es,colorSpace:Wd,depthBuffer:!1},r=QU(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=QU(e,t,i);const{_lodMax:a}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=une(a)),this._blurMaterial=fne(a,e,t),this._ggxMaterial=cne(a,e,t)}return r}_compileMaterial(e){const t=new $r(new gn,e);this._renderer.compile(t,I_)}_sceneToCubeUV(e,t,i,r,a){const c=new Or(90,1,t,i),f=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],g=this._renderer,v=g.autoClear,_=g.toneMapping;g.getClearColor(ZU),g.toneMapping=Vl,g.autoClear=!1,g.state.buffers.depth.getReversed()&&(g.setRenderTarget(r),g.clearDepth(),g.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new $r(new sg,new ip({name:"PMREM.Background",side:Ks,depthWrite:!1,depthTest:!1})));const T=this._backgroundBox,S=T.material;let w=!1;const I=e.background;I?I.isColor&&(S.color.copy(I),e.background=null,w=!0):(S.color.copy(ZU),w=!0);for(let R=0;R<6;R++){const O=R%3;O===0?(c.up.set(0,f[R],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x+p[R],a.y,a.z)):O===1?(c.up.set(0,0,f[R]),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y+p[R],a.z)):(c.up.set(0,f[R],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y,a.z+p[R]));const F=this._cubeSize;Cv(r,O*F,R>2?F:0,F,F),g.setRenderTarget(r),w&&g.render(T,c),g.render(e,c)}g.toneMapping=_,g.autoClear=v,e.background=I}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Bc||e.mapping===Gd;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=e4()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=JU());const a=r?this._cubemapMaterial:this._equirectMaterial,s=this._lodMeshes[0];s.material=a;const l=a.uniforms;l.envMap.value=e;const c=this._cubeSize;Cv(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(s,I_)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodMeshes.length;for(let a=1;a<r;a++)this._applyGGXFilter(e,a-1,a);t.autoClear=i}_applyGGXFilter(e,t,i){const r=this._renderer,a=this._pingPongRenderTarget,s=this._ggxMaterial,l=this._lodMeshes[i];l.material=s;const c=s.uniforms,f=i/(this._lodMeshes.length-1),p=t/(this._lodMeshes.length-1),g=Math.sqrt(f*f-p*p),v=0+f*1.25,_=g*v,{_lodMax:x}=this,T=this._sizeLods[i],S=3*T*(i>x-Nd?i-x+Nd:0),w=4*(this._cubeSize-T);c.envMap.value=e.texture,c.roughness.value=_,c.mipInt.value=x-t,Cv(a,S,w,3*T,2*T),r.setRenderTarget(a),r.render(l,I_),c.envMap.value=a.texture,c.roughness.value=0,c.mipInt.value=x-i,Cv(e,S,w,3*T,2*T),r.setRenderTarget(e),r.render(l,I_)}_blur(e,t,i,r,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",a),this._halfBlur(s,e,i,i,r,"longitudinal",a)}_halfBlur(e,t,i,r,a,s,l){const c=this._renderer,f=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&Yt("blur direction must be either latitudinal or longitudinal!");const p=3,g=this._lodMeshes[r];g.material=f;const v=f.uniforms,_=this._sizeLods[i]-1,x=isFinite(a)?Math.PI/(2*_):2*Math.PI/(2*vm-1),T=a/x,S=isFinite(a)?1+Math.floor(p*T):vm;S>vm&&Mt(`sigmaRadians, ${a}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${vm}`);const w=[];let I=0;for(let L=0;L<vm;++L){const z=L/T,P=Math.exp(-z*z/2);w.push(P),L===0?I+=P:L<S&&(I+=2*P)}for(let L=0;L<w.length;L++)w[L]=w[L]/I;v.envMap.value=e.texture,v.samples.value=S,v.weights.value=w,v.latitudinal.value=s==="latitudinal",l&&(v.poleAxis.value=l);const{_lodMax:R}=this;v.dTheta.value=x,v.mipInt.value=R-i;const O=this._sizeLods[r],F=3*O*(r>R-Nd?r-R+Nd:0),B=4*(this._cubeSize-O);Cv(t,F,B,3*O,2*O),c.setRenderTarget(t),c.render(g,I_)}}function une(n){const e=[],t=[],i=[];let r=n;const a=n-Nd+1+KU.length;for(let s=0;s<a;s++){const l=Math.pow(2,r);e.push(l);let c=1/l;s>n-Nd?c=KU[s-n+Nd-1]:s===0&&(c=0),t.push(c);const f=1/(l-2),p=-f,g=1+f,v=[p,p,g,p,g,g,p,p,g,g,p,g],_=6,x=6,T=3,S=2,w=1,I=new Float32Array(T*x*_),R=new Float32Array(S*x*_),O=new Float32Array(w*x*_);for(let B=0;B<_;B++){const L=B%3*2/3-1,z=B>2?0:-1,P=[L,z,0,L+2/3,z,0,L+2/3,z+1,0,L,z,0,L+2/3,z+1,0,L,z+1,0];I.set(P,T*x*B),R.set(v,S*x*B);const D=[B,B,B,B,B,B];O.set(D,w*x*B)}const F=new gn;F.setAttribute("position",new hi(I,T)),F.setAttribute("uv",new hi(R,S)),F.setAttribute("faceIndex",new hi(O,w)),i.push(new $r(F,null)),r>Nd&&r--}return{lodMeshes:i,sizeLods:e,sigmas:t}}function QU(n,e,t){const i=new tl(n,e,t);return i.texture.mapping=Dy,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Cv(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function cne(n,e,t){return new Hl({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:one,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:VA(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Dc,depthTest:!1,depthWrite:!1})}function fne(n,e,t){const i=new Float32Array(vm),r=new ie(0,1,0);return new Hl({name:"SphericalGaussianBlur",defines:{n:vm,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:VA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Dc,depthTest:!1,depthWrite:!1})}function JU(){return new Hl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:VA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Dc,depthTest:!1,depthWrite:!1})}function e4(){return new Hl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:VA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Dc,depthTest:!1,depthWrite:!1})}function VA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function hne(n){let e=new WeakMap,t=null;function i(l){if(l&&l.isTexture){const c=l.mapping,f=c===vb||c===yb,p=c===Bc||c===Gd;if(f||p){let g=e.get(l);const v=g!==void 0?g.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==v)return t===null&&(t=new GR(n)),g=f?t.fromEquirectangular(l,g):t.fromCubemap(l,g),g.texture.pmremVersion=l.pmremVersion,e.set(l,g),g.texture;if(g!==void 0)return g.texture;{const _=l.image;return f&&_&&_.height>0||p&&_&&r(_)?(t===null&&(t=new GR(n)),g=f?t.fromEquirectangular(l):t.fromCubemap(l),g.texture.pmremVersion=l.pmremVersion,e.set(l,g),l.addEventListener("dispose",a),g.texture):null}}}return l}function r(l){let c=0;const f=6;for(let p=0;p<f;p++)l[p]!==void 0&&c++;return c===f}function a(l){const c=l.target;c.removeEventListener("dispose",a);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:s}}function dne(n){const e={};function t(i){if(e[i]!==void 0)return e[i];const r=n.getExtension(i);return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&cy("WebGLRenderer: "+i+" extension not supported."),r}}}function pne(n,e,t,i){const r={},a=new WeakMap;function s(g){const v=g.target;v.index!==null&&e.remove(v.index);for(const x in v.attributes)e.remove(v.attributes[x]);v.removeEventListener("dispose",s),delete r[v.id];const _=a.get(v);_&&(e.remove(_),a.delete(v)),i.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function l(g,v){return r[v.id]===!0||(v.addEventListener("dispose",s),r[v.id]=!0,t.memory.geometries++),v}function c(g){const v=g.attributes;for(const _ in v)e.update(v[_],n.ARRAY_BUFFER)}function f(g){const v=[],_=g.index,x=g.attributes.position;let T=0;if(_!==null){const I=_.array;T=_.version;for(let R=0,O=I.length;R<O;R+=3){const F=I[R+0],B=I[R+1],L=I[R+2];v.push(F,B,B,L,L,F)}}else if(x!==void 0){const I=x.array;T=x.version;for(let R=0,O=I.length/3-1;R<O;R+=3){const F=R+0,B=R+1,L=R+2;v.push(F,B,B,L,L,F)}}else return;const S=new(j6(v)?BO:FO)(v,1);S.version=T;const w=a.get(g);w&&e.remove(w),a.set(g,S)}function p(g){const v=a.get(g);if(v){const _=g.index;_!==null&&v.version<_.version&&f(g)}else f(g);return a.get(g)}return{get:l,update:c,getWireframeAttribute:p}}function mne(n,e,t){let i;function r(v){i=v}let a,s;function l(v){a=v.type,s=v.bytesPerElement}function c(v,_){n.drawElements(i,_,a,v*s),t.update(_,i,1)}function f(v,_,x){x!==0&&(n.drawElementsInstanced(i,_,a,v*s,x),t.update(_,i,x))}function p(v,_,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,_,0,a,v,0,x);let S=0;for(let w=0;w<x;w++)S+=_[w];t.update(S,i,1)}function g(v,_,x,T){if(x===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let w=0;w<v.length;w++)f(v[w]/s,_[w],T[w]);else{S.multiDrawElementsInstancedWEBGL(i,_,0,a,v,0,T,0,x);let w=0;for(let I=0;I<x;I++)w+=_[I]*T[I];t.update(w,i,1)}}this.setMode=r,this.setIndex=l,this.render=c,this.renderInstances=f,this.renderMultiDraw=p,this.renderMultiDrawInstances=g}function gne(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,s,l){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=l*(a/3);break;case n.LINES:t.lines+=l*(a/2);break;case n.LINE_STRIP:t.lines+=l*(a-1);break;case n.LINE_LOOP:t.lines+=l*a;break;case n.POINTS:t.points+=l*a;break;default:Yt("WebGLInfo: Unknown draw mode:",s);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function vne(n,e,t){const i=new WeakMap,r=new Ri;function a(s,l,c){const f=s.morphTargetInfluences,p=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,g=p!==void 0?p.length:0;let v=i.get(l);if(v===void 0||v.count!==g){let D=function(){z.dispose(),i.delete(l),l.removeEventListener("dispose",D)};var _=D;v!==void 0&&v.texture.dispose();const x=l.morphAttributes.position!==void 0,T=l.morphAttributes.normal!==void 0,S=l.morphAttributes.color!==void 0,w=l.morphAttributes.position||[],I=l.morphAttributes.normal||[],R=l.morphAttributes.color||[];let O=0;x===!0&&(O=1),T===!0&&(O=2),S===!0&&(O=3);let F=l.attributes.position.count*O,B=1;F>e.maxTextureSize&&(B=Math.ceil(F/e.maxTextureSize),F=e.maxTextureSize);const L=new Float32Array(F*B*4*g),z=new yA(L,F,B,g);z.type=$s,z.needsUpdate=!0;const P=O*4;for(let j=0;j<g;j++){const q=w[j],W=I[j],se=R[j],ue=F*B*4*j;for(let J=0;J<q.count;J++){const ae=J*P;x===!0&&(r.fromBufferAttribute(q,J),L[ue+ae+0]=r.x,L[ue+ae+1]=r.y,L[ue+ae+2]=r.z,L[ue+ae+3]=0),T===!0&&(r.fromBufferAttribute(W,J),L[ue+ae+4]=r.x,L[ue+ae+5]=r.y,L[ue+ae+6]=r.z,L[ue+ae+7]=0),S===!0&&(r.fromBufferAttribute(se,J),L[ue+ae+8]=r.x,L[ue+ae+9]=r.y,L[ue+ae+10]=r.z,L[ue+ae+11]=se.itemSize===4?r.w:1)}}v={count:g,texture:z,size:new tt(F,B)},i.set(l,v),l.addEventListener("dispose",D)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let x=0;for(let S=0;S<f.length;S++)x+=f[S];const T=l.morphTargetsRelative?1:1-x;c.getUniforms().setValue(n,"morphTargetBaseInfluence",T),c.getUniforms().setValue(n,"morphTargetInfluences",f)}c.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}return{update:a}}function yne(n,e,t,i){let r=new WeakMap;function a(c){const f=i.render.frame,p=c.geometry,g=e.get(c,p);if(r.get(g)!==f&&(e.update(g),r.set(g,f)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),r.get(c)!==f&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,f))),c.isSkinnedMesh){const v=c.skeleton;r.get(v)!==f&&(v.update(),r.set(v,f))}return g}function s(){r=new WeakMap}function l(c){const f=c.target;f.removeEventListener("dispose",l),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:a,dispose:s}}const _ne={[wO]:"LINEAR_TONE_MAPPING",[EO]:"REINHARD_TONE_MAPPING",[TO]:"CINEON_TONE_MAPPING",[oA]:"ACES_FILMIC_TONE_MAPPING",[MO]:"AGX_TONE_MAPPING",[CO]:"NEUTRAL_TONE_MAPPING",[AO]:"CUSTOM_TONE_MAPPING"};function bne(n,e,t,i,r){const a=new tl(e,t,{type:n,depthBuffer:i,stencilBuffer:r}),s=new tl(e,t,{type:Vc,depthBuffer:!1,stencilBuffer:!1}),l=new gn;l.setAttribute("position",new zt([-1,3,0,-1,-1,0,3,-1,0],3)),l.setAttribute("uv",new zt([0,2,0,0,2,0],2));const c=new JO({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),f=new $r(l,c),p=new Zf(-1,1,1,-1,0,1);let g=null,v=null,_=!1,x,T=null,S=[],w=!1;this.setSize=function(I,R){a.setSize(I,R),s.setSize(I,R);for(let O=0;O<S.length;O++){const F=S[O];F.setSize&&F.setSize(I,R)}},this.setEffects=function(I){S=I,w=S.length>0&&S[0].isRenderPass===!0;const R=a.width,O=a.height;for(let F=0;F<S.length;F++){const B=S[F];B.setSize&&B.setSize(R,O)}},this.begin=function(I,R){if(_||I.toneMapping===Vl&&S.length===0)return!1;if(T=R,R!==null){const O=R.width,F=R.height;(a.width!==O||a.height!==F)&&this.setSize(O,F)}return w===!1&&I.setRenderTarget(a),x=I.toneMapping,I.toneMapping=Vl,!0},this.hasRenderPass=function(){return w},this.end=function(I,R){I.toneMapping=x,_=!0;let O=a,F=s;for(let B=0;B<S.length;B++){const L=S[B];if(L.enabled!==!1&&(L.render(I,F,O,R),L.needsSwap!==!1)){const z=O;O=F,F=z}}if(g!==I.outputColorSpace||v!==I.toneMapping){g=I.outputColorSpace,v=I.toneMapping,c.defines={},qn.getTransfer(g)===gi&&(c.defines.SRGB_TRANSFER="");const B=_ne[v];B&&(c.defines[B]=""),c.needsUpdate=!0}c.uniforms.tDiffuse.value=O.texture,I.setRenderTarget(T),I.render(f,p),T=null,_=!1},this.isCompositing=function(){return _},this.dispose=function(){a.dispose(),s.dispose(),l.dispose(),c.dispose()}}const $j=new Er,WR=new my(1,1),Xj=new yA,Yj=new _A,Kj=new cx,t4=[],n4=[],i4=new Float32Array(16),r4=new Float32Array(9),a4=new Float32Array(4);function Uy(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let a=t4[r];if(a===void 0&&(a=new Float32Array(r),t4[r]=a),e!==0){i.toArray(a,0);for(let s=1,l=0;s!==e;++s)l+=t,n[s].toArray(a,l)}return a}function aa(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function sa(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function jA(n,e){let t=n4[e];t===void 0&&(t=new Int32Array(e),n4[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function xne(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Sne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(aa(t,e))return;n.uniform2fv(this.addr,e),sa(t,e)}}function wne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(aa(t,e))return;n.uniform3fv(this.addr,e),sa(t,e)}}function Ene(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(aa(t,e))return;n.uniform4fv(this.addr,e),sa(t,e)}}function Tne(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(aa(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),sa(t,e)}else{if(aa(t,i))return;a4.set(i),n.uniformMatrix2fv(this.addr,!1,a4),sa(t,i)}}function Ane(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(aa(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),sa(t,e)}else{if(aa(t,i))return;r4.set(i),n.uniformMatrix3fv(this.addr,!1,r4),sa(t,i)}}function Mne(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(aa(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),sa(t,e)}else{if(aa(t,i))return;i4.set(i),n.uniformMatrix4fv(this.addr,!1,i4),sa(t,i)}}function Cne(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Ine(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(aa(t,e))return;n.uniform2iv(this.addr,e),sa(t,e)}}function Pne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(aa(t,e))return;n.uniform3iv(this.addr,e),sa(t,e)}}function Rne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(aa(t,e))return;n.uniform4iv(this.addr,e),sa(t,e)}}function Nne(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function One(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(aa(t,e))return;n.uniform2uiv(this.addr,e),sa(t,e)}}function Dne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(aa(t,e))return;n.uniform3uiv(this.addr,e),sa(t,e)}}function Lne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(aa(t,e))return;n.uniform4uiv(this.addr,e),sa(t,e)}}function kne(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let a;this.type===n.SAMPLER_2D_SHADOW?(WR.compareFunction=t.isReversedDepthBuffer()?vA:gA,a=WR):a=$j,t.setTexture2D(e||a,r)}function Une(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||Yj,r)}function zne(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||Kj,r)}function Fne(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||Xj,r)}function Bne(n){switch(n){case 5126:return xne;case 35664:return Sne;case 35665:return wne;case 35666:return Ene;case 35674:return Tne;case 35675:return Ane;case 35676:return Mne;case 5124:case 35670:return Cne;case 35667:case 35671:return Ine;case 35668:case 35672:return Pne;case 35669:case 35673:return Rne;case 5125:return Nne;case 36294:return One;case 36295:return Dne;case 36296:return Lne;case 35678:case 36198:case 36298:case 36306:case 35682:return kne;case 35679:case 36299:case 36307:return Une;case 35680:case 36300:case 36308:case 36293:return zne;case 36289:case 36303:case 36311:case 36292:return Fne}}function Vne(n,e){n.uniform1fv(this.addr,e)}function jne(n,e){const t=Uy(e,this.size,2);n.uniform2fv(this.addr,t)}function Hne(n,e){const t=Uy(e,this.size,3);n.uniform3fv(this.addr,t)}function Gne(n,e){const t=Uy(e,this.size,4);n.uniform4fv(this.addr,t)}function Wne(n,e){const t=Uy(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function qne(n,e){const t=Uy(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function $ne(n,e){const t=Uy(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Xne(n,e){n.uniform1iv(this.addr,e)}function Yne(n,e){n.uniform2iv(this.addr,e)}function Kne(n,e){n.uniform3iv(this.addr,e)}function Zne(n,e){n.uniform4iv(this.addr,e)}function Qne(n,e){n.uniform1uiv(this.addr,e)}function Jne(n,e){n.uniform2uiv(this.addr,e)}function eie(n,e){n.uniform3uiv(this.addr,e)}function tie(n,e){n.uniform4uiv(this.addr,e)}function nie(n,e,t){const i=this.cache,r=e.length,a=jA(t,r);aa(i,a)||(n.uniform1iv(this.addr,a),sa(i,a));let s;this.type===n.SAMPLER_2D_SHADOW?s=WR:s=$j;for(let l=0;l!==r;++l)t.setTexture2D(e[l]||s,a[l])}function iie(n,e,t){const i=this.cache,r=e.length,a=jA(t,r);aa(i,a)||(n.uniform1iv(this.addr,a),sa(i,a));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||Yj,a[s])}function rie(n,e,t){const i=this.cache,r=e.length,a=jA(t,r);aa(i,a)||(n.uniform1iv(this.addr,a),sa(i,a));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||Kj,a[s])}function aie(n,e,t){const i=this.cache,r=e.length,a=jA(t,r);aa(i,a)||(n.uniform1iv(this.addr,a),sa(i,a));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||Xj,a[s])}function sie(n){switch(n){case 5126:return Vne;case 35664:return jne;case 35665:return Hne;case 35666:return Gne;case 35674:return Wne;case 35675:return qne;case 35676:return $ne;case 5124:case 35670:return Xne;case 35667:case 35671:return Yne;case 35668:case 35672:return Kne;case 35669:case 35673:return Zne;case 5125:return Qne;case 36294:return Jne;case 36295:return eie;case 36296:return tie;case 35678:case 36198:case 36298:case 36306:case 35682:return nie;case 35679:case 36299:case 36307:return iie;case 35680:case 36300:case 36308:case 36293:return rie;case 36289:case 36303:case 36311:case 36292:return aie}}class oie{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=Bne(t.type)}}class lie{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=sie(t.type)}}class uie{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let a=0,s=r.length;a!==s;++a){const l=r[a];l.setValue(e,t[l.id],i)}}}const wI=/(\w+)(\])?(\[|\.)?/g;function s4(n,e){n.seq.push(e),n.map[e.id]=e}function cie(n,e,t){const i=n.name,r=i.length;for(wI.lastIndex=0;;){const a=wI.exec(i),s=wI.lastIndex;let l=a[1];const c=a[2]==="]",f=a[3];if(c&&(l=l|0),f===void 0||f==="["&&s+2===r){s4(t,f===void 0?new oie(l,n,e):new lie(l,n,e));break}else{let g=t.map[l];g===void 0&&(g=new uie(l),s4(t,g)),t=g}}}class Iw{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const l=e.getActiveUniform(t,s),c=e.getUniformLocation(t,l.name);cie(l,c,this)}const r=[],a=[];for(const s of this.seq)s.type===e.SAMPLER_2D_SHADOW||s.type===e.SAMPLER_CUBE_SHADOW||s.type===e.SAMPLER_2D_ARRAY_SHADOW?r.push(s):a.push(s);r.length>0&&(this.seq=r.concat(a))}setValue(e,t,i,r){const a=this.map[t];a!==void 0&&a.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let a=0,s=t.length;a!==s;++a){const l=t[a],c=i[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,a=e.length;r!==a;++r){const s=e[r];s.id in t&&i.push(s)}return i}}function o4(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const fie=37297;let hie=0;function die(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let s=r;s<a;s++){const l=s+1;i.push(`${l===e?">":" "} ${l}: ${t[s]}`)}return i.join(`
`)}const l4=new Tn;function pie(n){qn._getMatrix(l4,qn.workingColorSpace,n);const e=`mat3( ${l4.elements.map(t=>t.toFixed(4))} )`;switch(qn.getTransfer(n)){case wb:return[e,"LinearTransferOETF"];case gi:return[e,"sRGBTransferOETF"];default:return Mt("WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function u4(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),a=(n.getShaderInfoLog(e)||"").trim();if(i&&a==="")return"";const s=/ERROR: 0:(\d+)/.exec(a);if(s){const l=parseInt(s[1]);return t.toUpperCase()+`

`+a+`

`+die(n.getShaderSource(e),l)}else return a}function mie(n,e){const t=pie(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}const gie={[wO]:"Linear",[EO]:"Reinhard",[TO]:"Cineon",[oA]:"ACESFilmic",[MO]:"AgX",[CO]:"Neutral",[AO]:"Custom"};function vie(n,e){const t=gie[e];return t===void 0?(Mt("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+n+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const J1=new ie;function yie(){qn.getLuminanceCoefficients(J1);const n=J1.x.toFixed(4),e=J1.y.toFixed(4),t=J1.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function _ie(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(j_).join(`
`)}function bie(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function xie(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const a=n.getActiveAttrib(e,r),s=a.name;let l=1;a.type===n.FLOAT_MAT2&&(l=2),a.type===n.FLOAT_MAT3&&(l=3),a.type===n.FLOAT_MAT4&&(l=4),t[s]={type:a.type,location:n.getAttribLocation(e,s),locationSize:l}}return t}function j_(n){return n!==""}function c4(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function f4(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Sie=/^[ \t]*#include +<([\w\d./]+)>/gm;function qR(n){return n.replace(Sie,Eie)}const wie=new Map;function Eie(n,e){let t=On[e];if(t===void 0){const i=wie.get(e);if(i!==void 0)t=On[i],Mt('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return qR(t)}const Tie=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function h4(n){return n.replace(Tie,Aie)}function Aie(n,e,t,i){let r="";for(let a=parseInt(e);a<parseInt(t);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function d4(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const Mie={[Kv]:"SHADOWMAP_TYPE_PCF",[ym]:"SHADOWMAP_TYPE_VSM"};function Cie(n){return Mie[n.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const Iie={[Bc]:"ENVMAP_TYPE_CUBE",[Gd]:"ENVMAP_TYPE_CUBE",[Dy]:"ENVMAP_TYPE_CUBE_UV"};function Pie(n){return n.envMap===!1?"ENVMAP_TYPE_CUBE":Iie[n.envMapMode]||"ENVMAP_TYPE_CUBE"}const Rie={[Gd]:"ENVMAP_MODE_REFRACTION"};function Nie(n){return n.envMap===!1?"ENVMAP_MODE_REFLECTION":Rie[n.envMapMode]||"ENVMAP_MODE_REFLECTION"}const Oie={[lx]:"ENVMAP_BLENDING_MULTIPLY",[C6]:"ENVMAP_BLENDING_MIX",[I6]:"ENVMAP_BLENDING_ADD"};function Die(n){return n.envMap===!1?"ENVMAP_BLENDING_NONE":Oie[n.combine]||"ENVMAP_BLENDING_NONE"}function Lie(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function kie(n,e,t,i){const r=n.getContext(),a=t.defines;let s=t.vertexShader,l=t.fragmentShader;const c=Cie(t),f=Pie(t),p=Nie(t),g=Die(t),v=Lie(t),_=_ie(t),x=bie(a),T=r.createProgram();let S,w,I=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(j_).join(`
`),S.length>0&&(S+=`
`),w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(j_).join(`
`),w.length>0&&(w+=`
`)):(S=[d4(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(j_).join(`
`),w=[d4(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Vl?"#define TONE_MAPPING":"",t.toneMapping!==Vl?On.tonemapping_pars_fragment:"",t.toneMapping!==Vl?vie("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",On.colorspace_pars_fragment,mie("linearToOutputTexel",t.outputColorSpace),yie(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(j_).join(`
`)),s=qR(s),s=c4(s,t),s=f4(s,t),l=qR(l),l=c4(l,t),l=f4(l,t),s=h4(s),l=h4(l),t.isRawShaderMaterial!==!0&&(I=`#version 300 es
`,S=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,w=["#define varying in",t.glslVersion===LR?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===LR?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const R=I+S+s,O=I+w+l,F=o4(r,r.VERTEX_SHADER,R),B=o4(r,r.FRAGMENT_SHADER,O);r.attachShader(T,F),r.attachShader(T,B),t.index0AttributeName!==void 0?r.bindAttribLocation(T,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(T,0,"position"),r.linkProgram(T);function L(j){if(n.debug.checkShaderErrors){const q=r.getProgramInfoLog(T)||"",W=r.getShaderInfoLog(F)||"",se=r.getShaderInfoLog(B)||"",ue=q.trim(),J=W.trim(),ae=se.trim();let he=!0,Te=!0;if(r.getProgramParameter(T,r.LINK_STATUS)===!1)if(he=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,T,F,B);else{const Re=u4(r,F,"vertex"),Q=u4(r,B,"fragment");Yt("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(T,r.VALIDATE_STATUS)+`

Material Name: `+j.name+`
Material Type: `+j.type+`

Program Info Log: `+ue+`
`+Re+`
`+Q)}else ue!==""?Mt("WebGLProgram: Program Info Log:",ue):(J===""||ae==="")&&(Te=!1);Te&&(j.diagnostics={runnable:he,programLog:ue,vertexShader:{log:J,prefix:S},fragmentShader:{log:ae,prefix:w}})}r.deleteShader(F),r.deleteShader(B),z=new Iw(r,T),P=xie(r,T)}let z;this.getUniforms=function(){return z===void 0&&L(this),z};let P;this.getAttributes=function(){return P===void 0&&L(this),P};let D=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return D===!1&&(D=r.getProgramParameter(T,fie)),D},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(T),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=hie++,this.cacheKey=e,this.usedTimes=1,this.program=T,this.vertexShader=F,this.fragmentShader=B,this}let Uie=0;class zie{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),a=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new Fie(e),t.set(e,i)),i}}class Fie{constructor(e){this.id=Uie++,this.code=e,this.usedTimes=0}}function Bie(n,e,t,i,r,a,s){const l=new hy,c=new zie,f=new Set,p=[],g=new Map,v=r.logarithmicDepthBuffer;let _=r.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function T(P){return f.add(P),P===0?"uv":`uv${P}`}function S(P,D,j,q,W){const se=q.fog,ue=W.geometry,J=P.isMeshStandardMaterial?q.environment:null,ae=(P.isMeshStandardMaterial?t:e).get(P.envMap||J),he=ae&&ae.mapping===Dy?ae.image.height:null,Te=x[P.type];P.precision!==null&&(_=r.getMaxPrecision(P.precision),_!==P.precision&&Mt("WebGLProgram.getParameters:",P.precision,"not supported, using",_,"instead."));const Re=ue.morphAttributes.position||ue.morphAttributes.normal||ue.morphAttributes.color,Q=Re!==void 0?Re.length:0;let de=0;ue.morphAttributes.position!==void 0&&(de=1),ue.morphAttributes.normal!==void 0&&(de=2),ue.morphAttributes.color!==void 0&&(de=3);let Me,We,vt,be;if(Te){const en=Su[Te];Me=en.vertexShader,We=en.fragmentShader}else Me=P.vertexShader,We=P.fragmentShader,c.update(P),vt=c.getVertexShaderID(P),be=c.getFragmentShaderID(P);const Ae=n.getRenderTarget(),mt=n.state.buffers.depth.getReversed(),ye=W.isInstancedMesh===!0,et=W.isBatchedMesh===!0,wt=!!P.map,ze=!!P.matcap,Tt=!!ae,Oe=!!P.aoMap,Ke=!!P.lightMap,He=!!P.bumpMap,ut=!!P.normalMap,re=!!P.displacementMap,Et=!!P.emissiveMap,ht=!!P.metalnessMap,Lt=!!P.roughnessMap,dt=P.anisotropy>0,ee=P.clearcoat>0,X=P.dispersion>0,pe=P.iridescence>0,Ue=P.sheen>0,Ye=P.transmission>0,Le=dt&&!!P.anisotropyMap,At=ee&&!!P.clearcoatMap,gt=ee&&!!P.clearcoatNormalMap,It=ee&&!!P.clearcoatRoughnessMap,Ht=pe&&!!P.iridescenceMap,nt=pe&&!!P.iridescenceThicknessMap,le=Ue&&!!P.sheenColorMap,Se=Ue&&!!P.sheenRoughnessMap,ne=!!P.specularMap,ge=!!P.specularColorMap,Ze=!!P.specularIntensityMap,oe=Ye&&!!P.transmissionMap,Qe=Ye&&!!P.thicknessMap,$e=!!P.gradientMap,at=!!P.alphaMap,rt=P.alphaTest>0,qe=!!P.alphaHash,ot=!!P.extensions;let Ft=Vl;P.toneMapped&&(Ae===null||Ae.isXRRenderTarget===!0)&&(Ft=n.toneMapping);const un={shaderID:Te,shaderType:P.type,shaderName:P.name,vertexShader:Me,fragmentShader:We,defines:P.defines,customVertexShaderID:vt,customFragmentShaderID:be,isRawShaderMaterial:P.isRawShaderMaterial===!0,glslVersion:P.glslVersion,precision:_,batching:et,batchingColor:et&&W._colorsTexture!==null,instancing:ye,instancingColor:ye&&W.instanceColor!==null,instancingMorph:ye&&W.morphTexture!==null,outputColorSpace:Ae===null?n.outputColorSpace:Ae.isXRRenderTarget===!0?Ae.texture.colorSpace:Wd,alphaToCoverage:!!P.alphaToCoverage,map:wt,matcap:ze,envMap:Tt,envMapMode:Tt&&ae.mapping,envMapCubeUVHeight:he,aoMap:Oe,lightMap:Ke,bumpMap:He,normalMap:ut,displacementMap:re,emissiveMap:Et,normalMapObjectSpace:ut&&P.normalMapType===L6,normalMapTangentSpace:ut&&P.normalMapType===np,metalnessMap:ht,roughnessMap:Lt,anisotropy:dt,anisotropyMap:Le,clearcoat:ee,clearcoatMap:At,clearcoatNormalMap:gt,clearcoatRoughnessMap:It,dispersion:X,iridescence:pe,iridescenceMap:Ht,iridescenceThicknessMap:nt,sheen:Ue,sheenColorMap:le,sheenRoughnessMap:Se,specularMap:ne,specularColorMap:ge,specularIntensityMap:Ze,transmission:Ye,transmissionMap:oe,thicknessMap:Qe,gradientMap:$e,opaque:P.transparent===!1&&P.blending===Im&&P.alphaToCoverage===!1,alphaMap:at,alphaTest:rt,alphaHash:qe,combine:P.combine,mapUv:wt&&T(P.map.channel),aoMapUv:Oe&&T(P.aoMap.channel),lightMapUv:Ke&&T(P.lightMap.channel),bumpMapUv:He&&T(P.bumpMap.channel),normalMapUv:ut&&T(P.normalMap.channel),displacementMapUv:re&&T(P.displacementMap.channel),emissiveMapUv:Et&&T(P.emissiveMap.channel),metalnessMapUv:ht&&T(P.metalnessMap.channel),roughnessMapUv:Lt&&T(P.roughnessMap.channel),anisotropyMapUv:Le&&T(P.anisotropyMap.channel),clearcoatMapUv:At&&T(P.clearcoatMap.channel),clearcoatNormalMapUv:gt&&T(P.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:It&&T(P.clearcoatRoughnessMap.channel),iridescenceMapUv:Ht&&T(P.iridescenceMap.channel),iridescenceThicknessMapUv:nt&&T(P.iridescenceThicknessMap.channel),sheenColorMapUv:le&&T(P.sheenColorMap.channel),sheenRoughnessMapUv:Se&&T(P.sheenRoughnessMap.channel),specularMapUv:ne&&T(P.specularMap.channel),specularColorMapUv:ge&&T(P.specularColorMap.channel),specularIntensityMapUv:Ze&&T(P.specularIntensityMap.channel),transmissionMapUv:oe&&T(P.transmissionMap.channel),thicknessMapUv:Qe&&T(P.thicknessMap.channel),alphaMapUv:at&&T(P.alphaMap.channel),vertexTangents:!!ue.attributes.tangent&&(ut||dt),vertexColors:P.vertexColors,vertexAlphas:P.vertexColors===!0&&!!ue.attributes.color&&ue.attributes.color.itemSize===4,pointsUvs:W.isPoints===!0&&!!ue.attributes.uv&&(wt||at),fog:!!se,useFog:P.fog===!0,fogExp2:!!se&&se.isFogExp2,flatShading:P.flatShading===!0&&P.wireframe===!1,sizeAttenuation:P.sizeAttenuation===!0,logarithmicDepthBuffer:v,reversedDepthBuffer:mt,skinning:W.isSkinnedMesh===!0,morphTargets:ue.morphAttributes.position!==void 0,morphNormals:ue.morphAttributes.normal!==void 0,morphColors:ue.morphAttributes.color!==void 0,morphTargetsCount:Q,morphTextureStride:de,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numLightProbes:D.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:P.dithering,shadowMapEnabled:n.shadowMap.enabled&&j.length>0,shadowMapType:n.shadowMap.type,toneMapping:Ft,decodeVideoTexture:wt&&P.map.isVideoTexture===!0&&qn.getTransfer(P.map.colorSpace)===gi,decodeVideoTextureEmissive:Et&&P.emissiveMap.isVideoTexture===!0&&qn.getTransfer(P.emissiveMap.colorSpace)===gi,premultipliedAlpha:P.premultipliedAlpha,doubleSided:P.side===Mc,flipSided:P.side===Ks,useDepthPacking:P.depthPacking>=0,depthPacking:P.depthPacking||0,index0AttributeName:P.index0AttributeName,extensionClipCullDistance:ot&&P.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ot&&P.extensions.multiDraw===!0||et)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:P.customProgramCacheKey()};return un.vertexUv1s=f.has(1),un.vertexUv2s=f.has(2),un.vertexUv3s=f.has(3),f.clear(),un}function w(P){const D=[];if(P.shaderID?D.push(P.shaderID):(D.push(P.customVertexShaderID),D.push(P.customFragmentShaderID)),P.defines!==void 0)for(const j in P.defines)D.push(j),D.push(P.defines[j]);return P.isRawShaderMaterial===!1&&(I(D,P),R(D,P),D.push(n.outputColorSpace)),D.push(P.customProgramCacheKey),D.join()}function I(P,D){P.push(D.precision),P.push(D.outputColorSpace),P.push(D.envMapMode),P.push(D.envMapCubeUVHeight),P.push(D.mapUv),P.push(D.alphaMapUv),P.push(D.lightMapUv),P.push(D.aoMapUv),P.push(D.bumpMapUv),P.push(D.normalMapUv),P.push(D.displacementMapUv),P.push(D.emissiveMapUv),P.push(D.metalnessMapUv),P.push(D.roughnessMapUv),P.push(D.anisotropyMapUv),P.push(D.clearcoatMapUv),P.push(D.clearcoatNormalMapUv),P.push(D.clearcoatRoughnessMapUv),P.push(D.iridescenceMapUv),P.push(D.iridescenceThicknessMapUv),P.push(D.sheenColorMapUv),P.push(D.sheenRoughnessMapUv),P.push(D.specularMapUv),P.push(D.specularColorMapUv),P.push(D.specularIntensityMapUv),P.push(D.transmissionMapUv),P.push(D.thicknessMapUv),P.push(D.combine),P.push(D.fogExp2),P.push(D.sizeAttenuation),P.push(D.morphTargetsCount),P.push(D.morphAttributeCount),P.push(D.numDirLights),P.push(D.numPointLights),P.push(D.numSpotLights),P.push(D.numSpotLightMaps),P.push(D.numHemiLights),P.push(D.numRectAreaLights),P.push(D.numDirLightShadows),P.push(D.numPointLightShadows),P.push(D.numSpotLightShadows),P.push(D.numSpotLightShadowsWithMaps),P.push(D.numLightProbes),P.push(D.shadowMapType),P.push(D.toneMapping),P.push(D.numClippingPlanes),P.push(D.numClipIntersection),P.push(D.depthPacking)}function R(P,D){l.disableAll(),D.instancing&&l.enable(0),D.instancingColor&&l.enable(1),D.instancingMorph&&l.enable(2),D.matcap&&l.enable(3),D.envMap&&l.enable(4),D.normalMapObjectSpace&&l.enable(5),D.normalMapTangentSpace&&l.enable(6),D.clearcoat&&l.enable(7),D.iridescence&&l.enable(8),D.alphaTest&&l.enable(9),D.vertexColors&&l.enable(10),D.vertexAlphas&&l.enable(11),D.vertexUv1s&&l.enable(12),D.vertexUv2s&&l.enable(13),D.vertexUv3s&&l.enable(14),D.vertexTangents&&l.enable(15),D.anisotropy&&l.enable(16),D.alphaHash&&l.enable(17),D.batching&&l.enable(18),D.dispersion&&l.enable(19),D.batchingColor&&l.enable(20),D.gradientMap&&l.enable(21),P.push(l.mask),l.disableAll(),D.fog&&l.enable(0),D.useFog&&l.enable(1),D.flatShading&&l.enable(2),D.logarithmicDepthBuffer&&l.enable(3),D.reversedDepthBuffer&&l.enable(4),D.skinning&&l.enable(5),D.morphTargets&&l.enable(6),D.morphNormals&&l.enable(7),D.morphColors&&l.enable(8),D.premultipliedAlpha&&l.enable(9),D.shadowMapEnabled&&l.enable(10),D.doubleSided&&l.enable(11),D.flipSided&&l.enable(12),D.useDepthPacking&&l.enable(13),D.dithering&&l.enable(14),D.transmission&&l.enable(15),D.sheen&&l.enable(16),D.opaque&&l.enable(17),D.pointsUvs&&l.enable(18),D.decodeVideoTexture&&l.enable(19),D.decodeVideoTextureEmissive&&l.enable(20),D.alphaToCoverage&&l.enable(21),P.push(l.mask)}function O(P){const D=x[P.type];let j;if(D){const q=Su[D];j=Y6.clone(q.uniforms)}else j=P.uniforms;return j}function F(P,D){let j=g.get(D);return j!==void 0?++j.usedTimes:(j=new kie(n,D,P,a),p.push(j),g.set(D,j)),j}function B(P){if(--P.usedTimes===0){const D=p.indexOf(P);p[D]=p[p.length-1],p.pop(),g.delete(P.cacheKey),P.destroy()}}function L(P){c.remove(P)}function z(){c.dispose()}return{getParameters:S,getProgramCacheKey:w,getUniforms:O,acquireProgram:F,releaseProgram:B,releaseShaderCache:L,programs:p,dispose:z}}function Vie(){let n=new WeakMap;function e(s){return n.has(s)}function t(s){let l=n.get(s);return l===void 0&&(l={},n.set(s,l)),l}function i(s){n.delete(s)}function r(s,l,c){n.get(s)[l]=c}function a(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:a}}function jie(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function p4(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function m4(){const n=[];let e=0;const t=[],i=[],r=[];function a(){e=0,t.length=0,i.length=0,r.length=0}function s(g,v,_,x,T,S){let w=n[e];return w===void 0?(w={id:g.id,object:g,geometry:v,material:_,groupOrder:x,renderOrder:g.renderOrder,z:T,group:S},n[e]=w):(w.id=g.id,w.object=g,w.geometry=v,w.material=_,w.groupOrder=x,w.renderOrder=g.renderOrder,w.z=T,w.group=S),e++,w}function l(g,v,_,x,T,S){const w=s(g,v,_,x,T,S);_.transmission>0?i.push(w):_.transparent===!0?r.push(w):t.push(w)}function c(g,v,_,x,T,S){const w=s(g,v,_,x,T,S);_.transmission>0?i.unshift(w):_.transparent===!0?r.unshift(w):t.unshift(w)}function f(g,v){t.length>1&&t.sort(g||jie),i.length>1&&i.sort(v||p4),r.length>1&&r.sort(v||p4)}function p(){for(let g=e,v=n.length;g<v;g++){const _=n[g];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:t,transmissive:i,transparent:r,init:a,push:l,unshift:c,finish:p,sort:f}}function Hie(){let n=new WeakMap;function e(i,r){const a=n.get(i);let s;return a===void 0?(s=new m4,n.set(i,[s])):r>=a.length?(s=new m4,a.push(s)):s=a[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function Gie(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ie,color:new Dt};break;case"SpotLight":t={position:new ie,direction:new ie,color:new Dt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ie,color:new Dt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ie,skyColor:new Dt,groundColor:new Dt};break;case"RectAreaLight":t={color:new Dt,position:new ie,halfWidth:new ie,halfHeight:new ie};break}return n[e.id]=t,t}}}function Wie(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let qie=0;function $ie(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Xie(n){const e=new Gie,t=Wie(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)i.probe.push(new ie);const r=new ie,a=new pn,s=new pn;function l(f){let p=0,g=0,v=0;for(let P=0;P<9;P++)i.probe[P].set(0,0,0);let _=0,x=0,T=0,S=0,w=0,I=0,R=0,O=0,F=0,B=0,L=0;f.sort($ie);for(let P=0,D=f.length;P<D;P++){const j=f[P],q=j.color,W=j.intensity,se=j.distance;let ue=null;if(j.shadow&&j.shadow.map&&(j.shadow.map.texture.format===Bm?ue=j.shadow.map.texture:ue=j.shadow.map.depthTexture||j.shadow.map.texture),j.isAmbientLight)p+=q.r*W,g+=q.g*W,v+=q.b*W;else if(j.isLightProbe){for(let J=0;J<9;J++)i.probe[J].addScaledVector(j.sh.coefficients[J],W);L++}else if(j.isDirectionalLight){const J=e.get(j);if(J.color.copy(j.color).multiplyScalar(j.intensity),j.castShadow){const ae=j.shadow,he=t.get(j);he.shadowIntensity=ae.intensity,he.shadowBias=ae.bias,he.shadowNormalBias=ae.normalBias,he.shadowRadius=ae.radius,he.shadowMapSize=ae.mapSize,i.directionalShadow[_]=he,i.directionalShadowMap[_]=ue,i.directionalShadowMatrix[_]=j.shadow.matrix,I++}i.directional[_]=J,_++}else if(j.isSpotLight){const J=e.get(j);J.position.setFromMatrixPosition(j.matrixWorld),J.color.copy(q).multiplyScalar(W),J.distance=se,J.coneCos=Math.cos(j.angle),J.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),J.decay=j.decay,i.spot[T]=J;const ae=j.shadow;if(j.map&&(i.spotLightMap[F]=j.map,F++,ae.updateMatrices(j),j.castShadow&&B++),i.spotLightMatrix[T]=ae.matrix,j.castShadow){const he=t.get(j);he.shadowIntensity=ae.intensity,he.shadowBias=ae.bias,he.shadowNormalBias=ae.normalBias,he.shadowRadius=ae.radius,he.shadowMapSize=ae.mapSize,i.spotShadow[T]=he,i.spotShadowMap[T]=ue,O++}T++}else if(j.isRectAreaLight){const J=e.get(j);J.color.copy(q).multiplyScalar(W),J.halfWidth.set(j.width*.5,0,0),J.halfHeight.set(0,j.height*.5,0),i.rectArea[S]=J,S++}else if(j.isPointLight){const J=e.get(j);if(J.color.copy(j.color).multiplyScalar(j.intensity),J.distance=j.distance,J.decay=j.decay,j.castShadow){const ae=j.shadow,he=t.get(j);he.shadowIntensity=ae.intensity,he.shadowBias=ae.bias,he.shadowNormalBias=ae.normalBias,he.shadowRadius=ae.radius,he.shadowMapSize=ae.mapSize,he.shadowCameraNear=ae.camera.near,he.shadowCameraFar=ae.camera.far,i.pointShadow[x]=he,i.pointShadowMap[x]=ue,i.pointShadowMatrix[x]=j.shadow.matrix,R++}i.point[x]=J,x++}else if(j.isHemisphereLight){const J=e.get(j);J.skyColor.copy(j.color).multiplyScalar(W),J.groundColor.copy(j.groundColor).multiplyScalar(W),i.hemi[w]=J,w++}}S>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Rt.LTC_FLOAT_1,i.rectAreaLTC2=Rt.LTC_FLOAT_2):(i.rectAreaLTC1=Rt.LTC_HALF_1,i.rectAreaLTC2=Rt.LTC_HALF_2)),i.ambient[0]=p,i.ambient[1]=g,i.ambient[2]=v;const z=i.hash;(z.directionalLength!==_||z.pointLength!==x||z.spotLength!==T||z.rectAreaLength!==S||z.hemiLength!==w||z.numDirectionalShadows!==I||z.numPointShadows!==R||z.numSpotShadows!==O||z.numSpotMaps!==F||z.numLightProbes!==L)&&(i.directional.length=_,i.spot.length=T,i.rectArea.length=S,i.point.length=x,i.hemi.length=w,i.directionalShadow.length=I,i.directionalShadowMap.length=I,i.pointShadow.length=R,i.pointShadowMap.length=R,i.spotShadow.length=O,i.spotShadowMap.length=O,i.directionalShadowMatrix.length=I,i.pointShadowMatrix.length=R,i.spotLightMatrix.length=O+F-B,i.spotLightMap.length=F,i.numSpotLightShadowsWithMaps=B,i.numLightProbes=L,z.directionalLength=_,z.pointLength=x,z.spotLength=T,z.rectAreaLength=S,z.hemiLength=w,z.numDirectionalShadows=I,z.numPointShadows=R,z.numSpotShadows=O,z.numSpotMaps=F,z.numLightProbes=L,i.version=qie++)}function c(f,p){let g=0,v=0,_=0,x=0,T=0;const S=p.matrixWorldInverse;for(let w=0,I=f.length;w<I;w++){const R=f[w];if(R.isDirectionalLight){const O=i.directional[g];O.direction.setFromMatrixPosition(R.matrixWorld),r.setFromMatrixPosition(R.target.matrixWorld),O.direction.sub(r),O.direction.transformDirection(S),g++}else if(R.isSpotLight){const O=i.spot[_];O.position.setFromMatrixPosition(R.matrixWorld),O.position.applyMatrix4(S),O.direction.setFromMatrixPosition(R.matrixWorld),r.setFromMatrixPosition(R.target.matrixWorld),O.direction.sub(r),O.direction.transformDirection(S),_++}else if(R.isRectAreaLight){const O=i.rectArea[x];O.position.setFromMatrixPosition(R.matrixWorld),O.position.applyMatrix4(S),s.identity(),a.copy(R.matrixWorld),a.premultiply(S),s.extractRotation(a),O.halfWidth.set(R.width*.5,0,0),O.halfHeight.set(0,R.height*.5,0),O.halfWidth.applyMatrix4(s),O.halfHeight.applyMatrix4(s),x++}else if(R.isPointLight){const O=i.point[v];O.position.setFromMatrixPosition(R.matrixWorld),O.position.applyMatrix4(S),v++}else if(R.isHemisphereLight){const O=i.hemi[T];O.direction.setFromMatrixPosition(R.matrixWorld),O.direction.transformDirection(S),T++}}}return{setup:l,setupView:c,state:i}}function g4(n){const e=new Xie(n),t=[],i=[];function r(p){f.camera=p,t.length=0,i.length=0}function a(p){t.push(p)}function s(p){i.push(p)}function l(){e.setup(t)}function c(p){e.setupView(t,p)}const f={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:f,setupLights:l,setupLightsView:c,pushLight:a,pushShadow:s}}function Yie(n){let e=new WeakMap;function t(r,a=0){const s=e.get(r);let l;return s===void 0?(l=new g4(n),e.set(r,[l])):a>=s.length?(l=new g4(n),s.push(l)):l=s[a],l}function i(){e=new WeakMap}return{get:t,dispose:i}}const Kie=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Zie=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,Qie=[new ie(1,0,0),new ie(-1,0,0),new ie(0,1,0),new ie(0,-1,0),new ie(0,0,1),new ie(0,0,-1)],Jie=[new ie(0,-1,0),new ie(0,-1,0),new ie(0,0,1),new ie(0,0,-1),new ie(0,-1,0),new ie(0,-1,0)],v4=new pn,P_=new ie,EI=new ie;function ere(n,e,t){let i=new Ly;const r=new tt,a=new tt,s=new Ri,l=new tD,c=new nD,f={},p=t.maxTextureSize,g={[eh]:Ks,[Ks]:eh,[Mc]:Mc},v=new Hl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new tt},radius:{value:4}},vertexShader:Kie,fragmentShader:Zie}),_=v.clone();_.defines.HORIZONTAL_PASS=1;const x=new gn;x.setAttribute("position",new hi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const T=new $r(x,v),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Kv;let w=this.type;this.render=function(B,L,z){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||B.length===0)return;B.type===Q_&&(Mt("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),B.type=Kv);const P=n.getRenderTarget(),D=n.getActiveCubeFace(),j=n.getActiveMipmapLevel(),q=n.state;q.setBlending(Dc),q.buffers.depth.getReversed()===!0?q.buffers.color.setClear(0,0,0,0):q.buffers.color.setClear(1,1,1,1),q.buffers.depth.setTest(!0),q.setScissorTest(!1);const W=w!==this.type;W&&L.traverse(function(se){se.material&&(Array.isArray(se.material)?se.material.forEach(ue=>ue.needsUpdate=!0):se.material.needsUpdate=!0)});for(let se=0,ue=B.length;se<ue;se++){const J=B[se],ae=J.shadow;if(ae===void 0){Mt("WebGLShadowMap:",J,"has no shadow.");continue}if(ae.autoUpdate===!1&&ae.needsUpdate===!1)continue;r.copy(ae.mapSize);const he=ae.getFrameExtents();if(r.multiply(he),a.copy(ae.mapSize),(r.x>p||r.y>p)&&(r.x>p&&(a.x=Math.floor(p/he.x),r.x=a.x*he.x,ae.mapSize.x=a.x),r.y>p&&(a.y=Math.floor(p/he.y),r.y=a.y*he.y,ae.mapSize.y=a.y)),ae.map===null||W===!0){if(ae.map!==null&&(ae.map.depthTexture!==null&&(ae.map.depthTexture.dispose(),ae.map.depthTexture=null),ae.map.dispose()),this.type===ym){if(J.isPointLight){Mt("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}ae.map=new tl(r.x,r.y,{format:Bm,type:Vc,minFilter:Ki,magFilter:Ki,generateMipmaps:!1}),ae.map.texture.name=J.name+".shadowMap",ae.map.depthTexture=new my(r.x,r.y,$s),ae.map.depthTexture.name=J.name+".shadowMapDepth",ae.map.depthTexture.format=jc,ae.map.depthTexture.compareFunction=null,ae.map.depthTexture.minFilter=Dr,ae.map.depthTexture.magFilter=Dr}else{J.isPointLight?(ae.map=new VO(r.x),ae.map.depthTexture=new sj(r.x,jl)):(ae.map=new tl(r.x,r.y),ae.map.depthTexture=new my(r.x,r.y,jl)),ae.map.depthTexture.name=J.name+".shadowMap",ae.map.depthTexture.format=jc;const Re=n.state.buffers.depth.getReversed();this.type===Kv?(ae.map.depthTexture.compareFunction=Re?vA:gA,ae.map.depthTexture.minFilter=Ki,ae.map.depthTexture.magFilter=Ki):(ae.map.depthTexture.compareFunction=null,ae.map.depthTexture.minFilter=Dr,ae.map.depthTexture.magFilter=Dr)}ae.camera.updateProjectionMatrix()}const Te=ae.map.isWebGLCubeRenderTarget?6:1;for(let Re=0;Re<Te;Re++){if(ae.map.isWebGLCubeRenderTarget)n.setRenderTarget(ae.map,Re),n.clear();else{Re===0&&(n.setRenderTarget(ae.map),n.clear());const Q=ae.getViewport(Re);s.set(a.x*Q.x,a.y*Q.y,a.x*Q.z,a.y*Q.w),q.viewport(s)}if(J.isPointLight){const Q=ae.camera,de=ae.matrix,Me=J.distance||Q.far;Me!==Q.far&&(Q.far=Me,Q.updateProjectionMatrix()),P_.setFromMatrixPosition(J.matrixWorld),Q.position.copy(P_),EI.copy(Q.position),EI.add(Qie[Re]),Q.up.copy(Jie[Re]),Q.lookAt(EI),Q.updateMatrixWorld(),de.makeTranslation(-P_.x,-P_.y,-P_.z),v4.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),ae._frustum.setFromProjectionMatrix(v4,Q.coordinateSystem,Q.reversedDepth)}else ae.updateMatrices(J);i=ae.getFrustum(),O(L,z,ae.camera,J,this.type)}ae.isPointLightShadow!==!0&&this.type===ym&&I(ae,z),ae.needsUpdate=!1}w=this.type,S.needsUpdate=!1,n.setRenderTarget(P,D,j)};function I(B,L){const z=e.update(T);v.defines.VSM_SAMPLES!==B.blurSamples&&(v.defines.VSM_SAMPLES=B.blurSamples,_.defines.VSM_SAMPLES=B.blurSamples,v.needsUpdate=!0,_.needsUpdate=!0),B.mapPass===null&&(B.mapPass=new tl(r.x,r.y,{format:Bm,type:Vc})),v.uniforms.shadow_pass.value=B.map.depthTexture,v.uniforms.resolution.value=B.mapSize,v.uniforms.radius.value=B.radius,n.setRenderTarget(B.mapPass),n.clear(),n.renderBufferDirect(L,null,z,v,T,null),_.uniforms.shadow_pass.value=B.mapPass.texture,_.uniforms.resolution.value=B.mapSize,_.uniforms.radius.value=B.radius,n.setRenderTarget(B.map),n.clear(),n.renderBufferDirect(L,null,z,_,T,null)}function R(B,L,z,P){let D=null;const j=z.isPointLight===!0?B.customDistanceMaterial:B.customDepthMaterial;if(j!==void 0)D=j;else if(D=z.isPointLight===!0?c:l,n.localClippingEnabled&&L.clipShadows===!0&&Array.isArray(L.clippingPlanes)&&L.clippingPlanes.length!==0||L.displacementMap&&L.displacementScale!==0||L.alphaMap&&L.alphaTest>0||L.map&&L.alphaTest>0||L.alphaToCoverage===!0){const q=D.uuid,W=L.uuid;let se=f[q];se===void 0&&(se={},f[q]=se);let ue=se[W];ue===void 0&&(ue=D.clone(),se[W]=ue,L.addEventListener("dispose",F)),D=ue}if(D.visible=L.visible,D.wireframe=L.wireframe,P===ym?D.side=L.shadowSide!==null?L.shadowSide:L.side:D.side=L.shadowSide!==null?L.shadowSide:g[L.side],D.alphaMap=L.alphaMap,D.alphaTest=L.alphaToCoverage===!0?.5:L.alphaTest,D.map=L.map,D.clipShadows=L.clipShadows,D.clippingPlanes=L.clippingPlanes,D.clipIntersection=L.clipIntersection,D.displacementMap=L.displacementMap,D.displacementScale=L.displacementScale,D.displacementBias=L.displacementBias,D.wireframeLinewidth=L.wireframeLinewidth,D.linewidth=L.linewidth,z.isPointLight===!0&&D.isMeshDistanceMaterial===!0){const q=n.properties.get(D);q.light=z}return D}function O(B,L,z,P,D){if(B.visible===!1)return;if(B.layers.test(L.layers)&&(B.isMesh||B.isLine||B.isPoints)&&(B.castShadow||B.receiveShadow&&D===ym)&&(!B.frustumCulled||i.intersectsObject(B))){B.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,B.matrixWorld);const W=e.update(B),se=B.material;if(Array.isArray(se)){const ue=W.groups;for(let J=0,ae=ue.length;J<ae;J++){const he=ue[J],Te=se[he.materialIndex];if(Te&&Te.visible){const Re=R(B,Te,P,D);B.onBeforeShadow(n,B,L,z,W,Re,he),n.renderBufferDirect(z,null,W,Re,B,he),B.onAfterShadow(n,B,L,z,W,Re,he)}}}else if(se.visible){const ue=R(B,se,P,D);B.onBeforeShadow(n,B,L,z,W,ue,null),n.renderBufferDirect(z,null,W,ue,B,null),B.onAfterShadow(n,B,L,z,W,ue,null)}}const q=B.children;for(let W=0,se=q.length;W<se;W++)O(q[W],L,z,P,D)}function F(B){B.target.removeEventListener("dispose",F);for(const z in f){const P=f[z],D=B.target.uuid;D in P&&(P[D].dispose(),delete P[D])}}}const tre={[Zw]:Qw,[Jw]:nE,[eE]:iE,[Fm]:tE,[Qw]:Zw,[nE]:Jw,[iE]:eE,[tE]:Fm};function nre(n,e){function t(){let oe=!1;const Qe=new Ri;let $e=null;const at=new Ri(0,0,0,0);return{setMask:function(rt){$e!==rt&&!oe&&(n.colorMask(rt,rt,rt,rt),$e=rt)},setLocked:function(rt){oe=rt},setClear:function(rt,qe,ot,Ft,un){un===!0&&(rt*=Ft,qe*=Ft,ot*=Ft),Qe.set(rt,qe,ot,Ft),at.equals(Qe)===!1&&(n.clearColor(rt,qe,ot,Ft),at.copy(Qe))},reset:function(){oe=!1,$e=null,at.set(-1,0,0,0)}}}function i(){let oe=!1,Qe=!1,$e=null,at=null,rt=null;return{setReversed:function(qe){if(Qe!==qe){const ot=e.get("EXT_clip_control");qe?ot.clipControlEXT(ot.LOWER_LEFT_EXT,ot.ZERO_TO_ONE_EXT):ot.clipControlEXT(ot.LOWER_LEFT_EXT,ot.NEGATIVE_ONE_TO_ONE_EXT),Qe=qe;const Ft=rt;rt=null,this.setClear(Ft)}},getReversed:function(){return Qe},setTest:function(qe){qe?Ae(n.DEPTH_TEST):mt(n.DEPTH_TEST)},setMask:function(qe){$e!==qe&&!oe&&(n.depthMask(qe),$e=qe)},setFunc:function(qe){if(Qe&&(qe=tre[qe]),at!==qe){switch(qe){case Zw:n.depthFunc(n.NEVER);break;case Qw:n.depthFunc(n.ALWAYS);break;case Jw:n.depthFunc(n.LESS);break;case Fm:n.depthFunc(n.LEQUAL);break;case eE:n.depthFunc(n.EQUAL);break;case tE:n.depthFunc(n.GEQUAL);break;case nE:n.depthFunc(n.GREATER);break;case iE:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}at=qe}},setLocked:function(qe){oe=qe},setClear:function(qe){rt!==qe&&(Qe&&(qe=1-qe),n.clearDepth(qe),rt=qe)},reset:function(){oe=!1,$e=null,at=null,rt=null,Qe=!1}}}function r(){let oe=!1,Qe=null,$e=null,at=null,rt=null,qe=null,ot=null,Ft=null,un=null;return{setTest:function(en){oe||(en?Ae(n.STENCIL_TEST):mt(n.STENCIL_TEST))},setMask:function(en){Qe!==en&&!oe&&(n.stencilMask(en),Qe=en)},setFunc:function(en,oi,Oi){($e!==en||at!==oi||rt!==Oi)&&(n.stencilFunc(en,oi,Oi),$e=en,at=oi,rt=Oi)},setOp:function(en,oi,Oi){(qe!==en||ot!==oi||Ft!==Oi)&&(n.stencilOp(en,oi,Oi),qe=en,ot=oi,Ft=Oi)},setLocked:function(en){oe=en},setClear:function(en){un!==en&&(n.clearStencil(en),un=en)},reset:function(){oe=!1,Qe=null,$e=null,at=null,rt=null,qe=null,ot=null,Ft=null,un=null}}}const a=new t,s=new i,l=new r,c=new WeakMap,f=new WeakMap;let p={},g={},v=new WeakMap,_=[],x=null,T=!1,S=null,w=null,I=null,R=null,O=null,F=null,B=null,L=new Dt(0,0,0),z=0,P=!1,D=null,j=null,q=null,W=null,se=null;const ue=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let J=!1,ae=0;const he=n.getParameter(n.VERSION);he.indexOf("WebGL")!==-1?(ae=parseFloat(/^WebGL (\d)/.exec(he)[1]),J=ae>=1):he.indexOf("OpenGL ES")!==-1&&(ae=parseFloat(/^OpenGL ES (\d)/.exec(he)[1]),J=ae>=2);let Te=null,Re={};const Q=n.getParameter(n.SCISSOR_BOX),de=n.getParameter(n.VIEWPORT),Me=new Ri().fromArray(Q),We=new Ri().fromArray(de);function vt(oe,Qe,$e,at){const rt=new Uint8Array(4),qe=n.createTexture();n.bindTexture(oe,qe),n.texParameteri(oe,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(oe,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let ot=0;ot<$e;ot++)oe===n.TEXTURE_3D||oe===n.TEXTURE_2D_ARRAY?n.texImage3D(Qe,0,n.RGBA,1,1,at,0,n.RGBA,n.UNSIGNED_BYTE,rt):n.texImage2D(Qe+ot,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,rt);return qe}const be={};be[n.TEXTURE_2D]=vt(n.TEXTURE_2D,n.TEXTURE_2D,1),be[n.TEXTURE_CUBE_MAP]=vt(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),be[n.TEXTURE_2D_ARRAY]=vt(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),be[n.TEXTURE_3D]=vt(n.TEXTURE_3D,n.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),l.setClear(0),Ae(n.DEPTH_TEST),s.setFunc(Fm),He(!1),ut(IR),Ae(n.CULL_FACE),Oe(Dc);function Ae(oe){p[oe]!==!0&&(n.enable(oe),p[oe]=!0)}function mt(oe){p[oe]!==!1&&(n.disable(oe),p[oe]=!1)}function ye(oe,Qe){return g[oe]!==Qe?(n.bindFramebuffer(oe,Qe),g[oe]=Qe,oe===n.DRAW_FRAMEBUFFER&&(g[n.FRAMEBUFFER]=Qe),oe===n.FRAMEBUFFER&&(g[n.DRAW_FRAMEBUFFER]=Qe),!0):!1}function et(oe,Qe){let $e=_,at=!1;if(oe){$e=v.get(Qe),$e===void 0&&($e=[],v.set(Qe,$e));const rt=oe.textures;if($e.length!==rt.length||$e[0]!==n.COLOR_ATTACHMENT0){for(let qe=0,ot=rt.length;qe<ot;qe++)$e[qe]=n.COLOR_ATTACHMENT0+qe;$e.length=rt.length,at=!0}}else $e[0]!==n.BACK&&($e[0]=n.BACK,at=!0);at&&n.drawBuffers($e)}function wt(oe){return x!==oe?(n.useProgram(oe),x=oe,!0):!1}const ze={[wd]:n.FUNC_ADD,[f6]:n.FUNC_SUBTRACT,[h6]:n.FUNC_REVERSE_SUBTRACT};ze[d6]=n.MIN,ze[p6]=n.MAX;const Tt={[m6]:n.ZERO,[g6]:n.ONE,[v6]:n.SRC_COLOR,[Yw]:n.SRC_ALPHA,[w6]:n.SRC_ALPHA_SATURATE,[x6]:n.DST_COLOR,[_6]:n.DST_ALPHA,[y6]:n.ONE_MINUS_SRC_COLOR,[Kw]:n.ONE_MINUS_SRC_ALPHA,[S6]:n.ONE_MINUS_DST_COLOR,[b6]:n.ONE_MINUS_DST_ALPHA,[E6]:n.CONSTANT_COLOR,[T6]:n.ONE_MINUS_CONSTANT_COLOR,[A6]:n.CONSTANT_ALPHA,[M6]:n.ONE_MINUS_CONSTANT_ALPHA};function Oe(oe,Qe,$e,at,rt,qe,ot,Ft,un,en){if(oe===Dc){T===!0&&(mt(n.BLEND),T=!1);return}if(T===!1&&(Ae(n.BLEND),T=!0),oe!==c6){if(oe!==S||en!==P){if((w!==wd||O!==wd)&&(n.blendEquation(n.FUNC_ADD),w=wd,O=wd),en)switch(oe){case Im:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case PR:n.blendFunc(n.ONE,n.ONE);break;case RR:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case NR:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:Yt("WebGLState: Invalid blending: ",oe);break}else switch(oe){case Im:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case PR:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case RR:Yt("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case NR:Yt("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Yt("WebGLState: Invalid blending: ",oe);break}I=null,R=null,F=null,B=null,L.set(0,0,0),z=0,S=oe,P=en}return}rt=rt||Qe,qe=qe||$e,ot=ot||at,(Qe!==w||rt!==O)&&(n.blendEquationSeparate(ze[Qe],ze[rt]),w=Qe,O=rt),($e!==I||at!==R||qe!==F||ot!==B)&&(n.blendFuncSeparate(Tt[$e],Tt[at],Tt[qe],Tt[ot]),I=$e,R=at,F=qe,B=ot),(Ft.equals(L)===!1||un!==z)&&(n.blendColor(Ft.r,Ft.g,Ft.b,un),L.copy(Ft),z=un),S=oe,P=!1}function Ke(oe,Qe){oe.side===Mc?mt(n.CULL_FACE):Ae(n.CULL_FACE);let $e=oe.side===Ks;Qe&&($e=!$e),He($e),oe.blending===Im&&oe.transparent===!1?Oe(Dc):Oe(oe.blending,oe.blendEquation,oe.blendSrc,oe.blendDst,oe.blendEquationAlpha,oe.blendSrcAlpha,oe.blendDstAlpha,oe.blendColor,oe.blendAlpha,oe.premultipliedAlpha),s.setFunc(oe.depthFunc),s.setTest(oe.depthTest),s.setMask(oe.depthWrite),a.setMask(oe.colorWrite);const at=oe.stencilWrite;l.setTest(at),at&&(l.setMask(oe.stencilWriteMask),l.setFunc(oe.stencilFunc,oe.stencilRef,oe.stencilFuncMask),l.setOp(oe.stencilFail,oe.stencilZFail,oe.stencilZPass)),Et(oe.polygonOffset,oe.polygonOffsetFactor,oe.polygonOffsetUnits),oe.alphaToCoverage===!0?Ae(n.SAMPLE_ALPHA_TO_COVERAGE):mt(n.SAMPLE_ALPHA_TO_COVERAGE)}function He(oe){D!==oe&&(oe?n.frontFace(n.CW):n.frontFace(n.CCW),D=oe)}function ut(oe){oe!==o6?(Ae(n.CULL_FACE),oe!==j&&(oe===IR?n.cullFace(n.BACK):oe===l6?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):mt(n.CULL_FACE),j=oe}function re(oe){oe!==q&&(J&&n.lineWidth(oe),q=oe)}function Et(oe,Qe,$e){oe?(Ae(n.POLYGON_OFFSET_FILL),(W!==Qe||se!==$e)&&(n.polygonOffset(Qe,$e),W=Qe,se=$e)):mt(n.POLYGON_OFFSET_FILL)}function ht(oe){oe?Ae(n.SCISSOR_TEST):mt(n.SCISSOR_TEST)}function Lt(oe){oe===void 0&&(oe=n.TEXTURE0+ue-1),Te!==oe&&(n.activeTexture(oe),Te=oe)}function dt(oe,Qe,$e){$e===void 0&&(Te===null?$e=n.TEXTURE0+ue-1:$e=Te);let at=Re[$e];at===void 0&&(at={type:void 0,texture:void 0},Re[$e]=at),(at.type!==oe||at.texture!==Qe)&&(Te!==$e&&(n.activeTexture($e),Te=$e),n.bindTexture(oe,Qe||be[oe]),at.type=oe,at.texture=Qe)}function ee(){const oe=Re[Te];oe!==void 0&&oe.type!==void 0&&(n.bindTexture(oe.type,null),oe.type=void 0,oe.texture=void 0)}function X(){try{n.compressedTexImage2D(...arguments)}catch(oe){Yt("WebGLState:",oe)}}function pe(){try{n.compressedTexImage3D(...arguments)}catch(oe){Yt("WebGLState:",oe)}}function Ue(){try{n.texSubImage2D(...arguments)}catch(oe){Yt("WebGLState:",oe)}}function Ye(){try{n.texSubImage3D(...arguments)}catch(oe){Yt("WebGLState:",oe)}}function Le(){try{n.compressedTexSubImage2D(...arguments)}catch(oe){Yt("WebGLState:",oe)}}function At(){try{n.compressedTexSubImage3D(...arguments)}catch(oe){Yt("WebGLState:",oe)}}function gt(){try{n.texStorage2D(...arguments)}catch(oe){Yt("WebGLState:",oe)}}function It(){try{n.texStorage3D(...arguments)}catch(oe){Yt("WebGLState:",oe)}}function Ht(){try{n.texImage2D(...arguments)}catch(oe){Yt("WebGLState:",oe)}}function nt(){try{n.texImage3D(...arguments)}catch(oe){Yt("WebGLState:",oe)}}function le(oe){Me.equals(oe)===!1&&(n.scissor(oe.x,oe.y,oe.z,oe.w),Me.copy(oe))}function Se(oe){We.equals(oe)===!1&&(n.viewport(oe.x,oe.y,oe.z,oe.w),We.copy(oe))}function ne(oe,Qe){let $e=f.get(Qe);$e===void 0&&($e=new WeakMap,f.set(Qe,$e));let at=$e.get(oe);at===void 0&&(at=n.getUniformBlockIndex(Qe,oe.name),$e.set(oe,at))}function ge(oe,Qe){const at=f.get(Qe).get(oe);c.get(Qe)!==at&&(n.uniformBlockBinding(Qe,at,oe.__bindingPointIndex),c.set(Qe,at))}function Ze(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},Te=null,Re={},g={},v=new WeakMap,_=[],x=null,T=!1,S=null,w=null,I=null,R=null,O=null,F=null,B=null,L=new Dt(0,0,0),z=0,P=!1,D=null,j=null,q=null,W=null,se=null,Me.set(0,0,n.canvas.width,n.canvas.height),We.set(0,0,n.canvas.width,n.canvas.height),a.reset(),s.reset(),l.reset()}return{buffers:{color:a,depth:s,stencil:l},enable:Ae,disable:mt,bindFramebuffer:ye,drawBuffers:et,useProgram:wt,setBlending:Oe,setMaterial:Ke,setFlipSided:He,setCullFace:ut,setLineWidth:re,setPolygonOffset:Et,setScissorTest:ht,activeTexture:Lt,bindTexture:dt,unbindTexture:ee,compressedTexImage2D:X,compressedTexImage3D:pe,texImage2D:Ht,texImage3D:nt,updateUBOMapping:ne,uniformBlockBinding:ge,texStorage2D:gt,texStorage3D:It,texSubImage2D:Ue,texSubImage3D:Ye,compressedTexSubImage2D:Le,compressedTexSubImage3D:At,scissor:le,viewport:Se,reset:Ze}}function ire(n,e,t,i,r,a,s){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new tt,p=new WeakMap;let g;const v=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(ee,X){return _?new OffscreenCanvas(ee,X):Tb("canvas")}function T(ee,X,pe){let Ue=1;const Ye=dt(ee);if((Ye.width>pe||Ye.height>pe)&&(Ue=pe/Math.max(Ye.width,Ye.height)),Ue<1)if(typeof HTMLImageElement<"u"&&ee instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ee instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ee instanceof ImageBitmap||typeof VideoFrame<"u"&&ee instanceof VideoFrame){const Le=Math.floor(Ue*Ye.width),At=Math.floor(Ue*Ye.height);g===void 0&&(g=x(Le,At));const gt=X?x(Le,At):g;return gt.width=Le,gt.height=At,gt.getContext("2d").drawImage(ee,0,0,Le,At),Mt("WebGLRenderer: Texture has been resized from ("+Ye.width+"x"+Ye.height+") to ("+Le+"x"+At+")."),gt}else return"data"in ee&&Mt("WebGLRenderer: Image in DataTexture is too big ("+Ye.width+"x"+Ye.height+")."),ee;return ee}function S(ee){return ee.generateMipmaps}function w(ee){n.generateMipmap(ee)}function I(ee){return ee.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:ee.isWebGL3DRenderTarget?n.TEXTURE_3D:ee.isWebGLArrayRenderTarget||ee.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function R(ee,X,pe,Ue,Ye=!1){if(ee!==null){if(n[ee]!==void 0)return n[ee];Mt("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ee+"'")}let Le=X;if(X===n.RED&&(pe===n.FLOAT&&(Le=n.R32F),pe===n.HALF_FLOAT&&(Le=n.R16F),pe===n.UNSIGNED_BYTE&&(Le=n.R8)),X===n.RED_INTEGER&&(pe===n.UNSIGNED_BYTE&&(Le=n.R8UI),pe===n.UNSIGNED_SHORT&&(Le=n.R16UI),pe===n.UNSIGNED_INT&&(Le=n.R32UI),pe===n.BYTE&&(Le=n.R8I),pe===n.SHORT&&(Le=n.R16I),pe===n.INT&&(Le=n.R32I)),X===n.RG&&(pe===n.FLOAT&&(Le=n.RG32F),pe===n.HALF_FLOAT&&(Le=n.RG16F),pe===n.UNSIGNED_BYTE&&(Le=n.RG8)),X===n.RG_INTEGER&&(pe===n.UNSIGNED_BYTE&&(Le=n.RG8UI),pe===n.UNSIGNED_SHORT&&(Le=n.RG16UI),pe===n.UNSIGNED_INT&&(Le=n.RG32UI),pe===n.BYTE&&(Le=n.RG8I),pe===n.SHORT&&(Le=n.RG16I),pe===n.INT&&(Le=n.RG32I)),X===n.RGB_INTEGER&&(pe===n.UNSIGNED_BYTE&&(Le=n.RGB8UI),pe===n.UNSIGNED_SHORT&&(Le=n.RGB16UI),pe===n.UNSIGNED_INT&&(Le=n.RGB32UI),pe===n.BYTE&&(Le=n.RGB8I),pe===n.SHORT&&(Le=n.RGB16I),pe===n.INT&&(Le=n.RGB32I)),X===n.RGBA_INTEGER&&(pe===n.UNSIGNED_BYTE&&(Le=n.RGBA8UI),pe===n.UNSIGNED_SHORT&&(Le=n.RGBA16UI),pe===n.UNSIGNED_INT&&(Le=n.RGBA32UI),pe===n.BYTE&&(Le=n.RGBA8I),pe===n.SHORT&&(Le=n.RGBA16I),pe===n.INT&&(Le=n.RGBA32I)),X===n.RGB&&(pe===n.UNSIGNED_INT_5_9_9_9_REV&&(Le=n.RGB9_E5),pe===n.UNSIGNED_INT_10F_11F_11F_REV&&(Le=n.R11F_G11F_B10F)),X===n.RGBA){const At=Ye?wb:qn.getTransfer(Ue);pe===n.FLOAT&&(Le=n.RGBA32F),pe===n.HALF_FLOAT&&(Le=n.RGBA16F),pe===n.UNSIGNED_BYTE&&(Le=At===gi?n.SRGB8_ALPHA8:n.RGBA8),pe===n.UNSIGNED_SHORT_4_4_4_4&&(Le=n.RGBA4),pe===n.UNSIGNED_SHORT_5_5_5_1&&(Le=n.RGB5_A1)}return(Le===n.R16F||Le===n.R32F||Le===n.RG16F||Le===n.RG32F||Le===n.RGBA16F||Le===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Le}function O(ee,X){let pe;return ee?X===null||X===jl||X===ly?pe=n.DEPTH24_STENCIL8:X===$s?pe=n.DEPTH32F_STENCIL8:X===oy&&(pe=n.DEPTH24_STENCIL8,Mt("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):X===null||X===jl||X===ly?pe=n.DEPTH_COMPONENT24:X===$s?pe=n.DEPTH_COMPONENT32F:X===oy&&(pe=n.DEPTH_COMPONENT16),pe}function F(ee,X){return S(ee)===!0||ee.isFramebufferTexture&&ee.minFilter!==Dr&&ee.minFilter!==Ki?Math.log2(Math.max(X.width,X.height))+1:ee.mipmaps!==void 0&&ee.mipmaps.length>0?ee.mipmaps.length:ee.isCompressedTexture&&Array.isArray(ee.image)?X.mipmaps.length:1}function B(ee){const X=ee.target;X.removeEventListener("dispose",B),z(X),X.isVideoTexture&&p.delete(X)}function L(ee){const X=ee.target;X.removeEventListener("dispose",L),D(X)}function z(ee){const X=i.get(ee);if(X.__webglInit===void 0)return;const pe=ee.source,Ue=v.get(pe);if(Ue){const Ye=Ue[X.__cacheKey];Ye.usedTimes--,Ye.usedTimes===0&&P(ee),Object.keys(Ue).length===0&&v.delete(pe)}i.remove(ee)}function P(ee){const X=i.get(ee);n.deleteTexture(X.__webglTexture);const pe=ee.source,Ue=v.get(pe);delete Ue[X.__cacheKey],s.memory.textures--}function D(ee){const X=i.get(ee);if(ee.depthTexture&&(ee.depthTexture.dispose(),i.remove(ee.depthTexture)),ee.isWebGLCubeRenderTarget)for(let Ue=0;Ue<6;Ue++){if(Array.isArray(X.__webglFramebuffer[Ue]))for(let Ye=0;Ye<X.__webglFramebuffer[Ue].length;Ye++)n.deleteFramebuffer(X.__webglFramebuffer[Ue][Ye]);else n.deleteFramebuffer(X.__webglFramebuffer[Ue]);X.__webglDepthbuffer&&n.deleteRenderbuffer(X.__webglDepthbuffer[Ue])}else{if(Array.isArray(X.__webglFramebuffer))for(let Ue=0;Ue<X.__webglFramebuffer.length;Ue++)n.deleteFramebuffer(X.__webglFramebuffer[Ue]);else n.deleteFramebuffer(X.__webglFramebuffer);if(X.__webglDepthbuffer&&n.deleteRenderbuffer(X.__webglDepthbuffer),X.__webglMultisampledFramebuffer&&n.deleteFramebuffer(X.__webglMultisampledFramebuffer),X.__webglColorRenderbuffer)for(let Ue=0;Ue<X.__webglColorRenderbuffer.length;Ue++)X.__webglColorRenderbuffer[Ue]&&n.deleteRenderbuffer(X.__webglColorRenderbuffer[Ue]);X.__webglDepthRenderbuffer&&n.deleteRenderbuffer(X.__webglDepthRenderbuffer)}const pe=ee.textures;for(let Ue=0,Ye=pe.length;Ue<Ye;Ue++){const Le=i.get(pe[Ue]);Le.__webglTexture&&(n.deleteTexture(Le.__webglTexture),s.memory.textures--),i.remove(pe[Ue])}i.remove(ee)}let j=0;function q(){j=0}function W(){const ee=j;return ee>=r.maxTextures&&Mt("WebGLTextures: Trying to use "+ee+" texture units while this GPU supports only "+r.maxTextures),j+=1,ee}function se(ee){const X=[];return X.push(ee.wrapS),X.push(ee.wrapT),X.push(ee.wrapR||0),X.push(ee.magFilter),X.push(ee.minFilter),X.push(ee.anisotropy),X.push(ee.internalFormat),X.push(ee.format),X.push(ee.type),X.push(ee.generateMipmaps),X.push(ee.premultiplyAlpha),X.push(ee.flipY),X.push(ee.unpackAlignment),X.push(ee.colorSpace),X.join()}function ue(ee,X){const pe=i.get(ee);if(ee.isVideoTexture&&ht(ee),ee.isRenderTargetTexture===!1&&ee.isExternalTexture!==!0&&ee.version>0&&pe.__version!==ee.version){const Ue=ee.image;if(Ue===null)Mt("WebGLRenderer: Texture marked for update but no image data found.");else if(Ue.complete===!1)Mt("WebGLRenderer: Texture marked for update but image is incomplete");else{be(pe,ee,X);return}}else ee.isExternalTexture&&(pe.__webglTexture=ee.sourceTexture?ee.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,pe.__webglTexture,n.TEXTURE0+X)}function J(ee,X){const pe=i.get(ee);if(ee.isRenderTargetTexture===!1&&ee.version>0&&pe.__version!==ee.version){be(pe,ee,X);return}else ee.isExternalTexture&&(pe.__webglTexture=ee.sourceTexture?ee.sourceTexture:null);t.bindTexture(n.TEXTURE_2D_ARRAY,pe.__webglTexture,n.TEXTURE0+X)}function ae(ee,X){const pe=i.get(ee);if(ee.isRenderTargetTexture===!1&&ee.version>0&&pe.__version!==ee.version){be(pe,ee,X);return}t.bindTexture(n.TEXTURE_3D,pe.__webglTexture,n.TEXTURE0+X)}function he(ee,X){const pe=i.get(ee);if(ee.isCubeDepthTexture!==!0&&ee.version>0&&pe.__version!==ee.version){Ae(pe,ee,X);return}t.bindTexture(n.TEXTURE_CUBE_MAP,pe.__webglTexture,n.TEXTURE0+X)}const Te={[_b]:n.REPEAT,[Po]:n.CLAMP_TO_EDGE,[bb]:n.MIRRORED_REPEAT},Re={[Dr]:n.NEAREST,[IO]:n.NEAREST_MIPMAP_NEAREST,[Gv]:n.NEAREST_MIPMAP_LINEAR,[Ki]:n.LINEAR,[J_]:n.LINEAR_MIPMAP_NEAREST,[Pc]:n.LINEAR_MIPMAP_LINEAR},Q={[k6]:n.NEVER,[V6]:n.ALWAYS,[U6]:n.LESS,[gA]:n.LEQUAL,[z6]:n.EQUAL,[vA]:n.GEQUAL,[F6]:n.GREATER,[B6]:n.NOTEQUAL};function de(ee,X){if(X.type===$s&&e.has("OES_texture_float_linear")===!1&&(X.magFilter===Ki||X.magFilter===J_||X.magFilter===Gv||X.magFilter===Pc||X.minFilter===Ki||X.minFilter===J_||X.minFilter===Gv||X.minFilter===Pc)&&Mt("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(ee,n.TEXTURE_WRAP_S,Te[X.wrapS]),n.texParameteri(ee,n.TEXTURE_WRAP_T,Te[X.wrapT]),(ee===n.TEXTURE_3D||ee===n.TEXTURE_2D_ARRAY)&&n.texParameteri(ee,n.TEXTURE_WRAP_R,Te[X.wrapR]),n.texParameteri(ee,n.TEXTURE_MAG_FILTER,Re[X.magFilter]),n.texParameteri(ee,n.TEXTURE_MIN_FILTER,Re[X.minFilter]),X.compareFunction&&(n.texParameteri(ee,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(ee,n.TEXTURE_COMPARE_FUNC,Q[X.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(X.magFilter===Dr||X.minFilter!==Gv&&X.minFilter!==Pc||X.type===$s&&e.has("OES_texture_float_linear")===!1)return;if(X.anisotropy>1||i.get(X).__currentAnisotropy){const pe=e.get("EXT_texture_filter_anisotropic");n.texParameterf(ee,pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(X.anisotropy,r.getMaxAnisotropy())),i.get(X).__currentAnisotropy=X.anisotropy}}}function Me(ee,X){let pe=!1;ee.__webglInit===void 0&&(ee.__webglInit=!0,X.addEventListener("dispose",B));const Ue=X.source;let Ye=v.get(Ue);Ye===void 0&&(Ye={},v.set(Ue,Ye));const Le=se(X);if(Le!==ee.__cacheKey){Ye[Le]===void 0&&(Ye[Le]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,pe=!0),Ye[Le].usedTimes++;const At=Ye[ee.__cacheKey];At!==void 0&&(Ye[ee.__cacheKey].usedTimes--,At.usedTimes===0&&P(X)),ee.__cacheKey=Le,ee.__webglTexture=Ye[Le].texture}return pe}function We(ee,X,pe){return Math.floor(Math.floor(ee/pe)/X)}function vt(ee,X,pe,Ue){const Le=ee.updateRanges;if(Le.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,X.width,X.height,pe,Ue,X.data);else{Le.sort((nt,le)=>nt.start-le.start);let At=0;for(let nt=1;nt<Le.length;nt++){const le=Le[At],Se=Le[nt],ne=le.start+le.count,ge=We(Se.start,X.width,4),Ze=We(le.start,X.width,4);Se.start<=ne+1&&ge===Ze&&We(Se.start+Se.count-1,X.width,4)===ge?le.count=Math.max(le.count,Se.start+Se.count-le.start):(++At,Le[At]=Se)}Le.length=At+1;const gt=n.getParameter(n.UNPACK_ROW_LENGTH),It=n.getParameter(n.UNPACK_SKIP_PIXELS),Ht=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,X.width);for(let nt=0,le=Le.length;nt<le;nt++){const Se=Le[nt],ne=Math.floor(Se.start/4),ge=Math.ceil(Se.count/4),Ze=ne%X.width,oe=Math.floor(ne/X.width),Qe=ge,$e=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,Ze),n.pixelStorei(n.UNPACK_SKIP_ROWS,oe),t.texSubImage2D(n.TEXTURE_2D,0,Ze,oe,Qe,$e,pe,Ue,X.data)}ee.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,gt),n.pixelStorei(n.UNPACK_SKIP_PIXELS,It),n.pixelStorei(n.UNPACK_SKIP_ROWS,Ht)}}function be(ee,X,pe){let Ue=n.TEXTURE_2D;(X.isDataArrayTexture||X.isCompressedArrayTexture)&&(Ue=n.TEXTURE_2D_ARRAY),X.isData3DTexture&&(Ue=n.TEXTURE_3D);const Ye=Me(ee,X),Le=X.source;t.bindTexture(Ue,ee.__webglTexture,n.TEXTURE0+pe);const At=i.get(Le);if(Le.version!==At.__version||Ye===!0){t.activeTexture(n.TEXTURE0+pe);const gt=qn.getPrimaries(qn.workingColorSpace),It=X.colorSpace===jf?null:qn.getPrimaries(X.colorSpace),Ht=X.colorSpace===jf||gt===It?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,X.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,X.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ht);let nt=T(X.image,!1,r.maxTextureSize);nt=Lt(X,nt);const le=a.convert(X.format,X.colorSpace),Se=a.convert(X.type);let ne=R(X.internalFormat,le,Se,X.colorSpace,X.isVideoTexture);de(Ue,X);let ge;const Ze=X.mipmaps,oe=X.isVideoTexture!==!0,Qe=At.__version===void 0||Ye===!0,$e=Le.dataReady,at=F(X,nt);if(X.isDepthTexture)ne=O(X.format===Pd,X.type),Qe&&(oe?t.texStorage2D(n.TEXTURE_2D,1,ne,nt.width,nt.height):t.texImage2D(n.TEXTURE_2D,0,ne,nt.width,nt.height,0,le,Se,null));else if(X.isDataTexture)if(Ze.length>0){oe&&Qe&&t.texStorage2D(n.TEXTURE_2D,at,ne,Ze[0].width,Ze[0].height);for(let rt=0,qe=Ze.length;rt<qe;rt++)ge=Ze[rt],oe?$e&&t.texSubImage2D(n.TEXTURE_2D,rt,0,0,ge.width,ge.height,le,Se,ge.data):t.texImage2D(n.TEXTURE_2D,rt,ne,ge.width,ge.height,0,le,Se,ge.data);X.generateMipmaps=!1}else oe?(Qe&&t.texStorage2D(n.TEXTURE_2D,at,ne,nt.width,nt.height),$e&&vt(X,nt,le,Se)):t.texImage2D(n.TEXTURE_2D,0,ne,nt.width,nt.height,0,le,Se,nt.data);else if(X.isCompressedTexture)if(X.isCompressedArrayTexture){oe&&Qe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,at,ne,Ze[0].width,Ze[0].height,nt.depth);for(let rt=0,qe=Ze.length;rt<qe;rt++)if(ge=Ze[rt],X.format!==Es)if(le!==null)if(oe){if($e)if(X.layerUpdates.size>0){const ot=HR(ge.width,ge.height,X.format,X.type);for(const Ft of X.layerUpdates){const un=ge.data.subarray(Ft*ot/ge.data.BYTES_PER_ELEMENT,(Ft+1)*ot/ge.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,rt,0,0,Ft,ge.width,ge.height,1,le,un)}X.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,rt,0,0,0,ge.width,ge.height,nt.depth,le,ge.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,rt,ne,ge.width,ge.height,nt.depth,0,ge.data,0,0);else Mt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else oe?$e&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,rt,0,0,0,ge.width,ge.height,nt.depth,le,Se,ge.data):t.texImage3D(n.TEXTURE_2D_ARRAY,rt,ne,ge.width,ge.height,nt.depth,0,le,Se,ge.data)}else{oe&&Qe&&t.texStorage2D(n.TEXTURE_2D,at,ne,Ze[0].width,Ze[0].height);for(let rt=0,qe=Ze.length;rt<qe;rt++)ge=Ze[rt],X.format!==Es?le!==null?oe?$e&&t.compressedTexSubImage2D(n.TEXTURE_2D,rt,0,0,ge.width,ge.height,le,ge.data):t.compressedTexImage2D(n.TEXTURE_2D,rt,ne,ge.width,ge.height,0,ge.data):Mt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):oe?$e&&t.texSubImage2D(n.TEXTURE_2D,rt,0,0,ge.width,ge.height,le,Se,ge.data):t.texImage2D(n.TEXTURE_2D,rt,ne,ge.width,ge.height,0,le,Se,ge.data)}else if(X.isDataArrayTexture)if(oe){if(Qe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,at,ne,nt.width,nt.height,nt.depth),$e)if(X.layerUpdates.size>0){const rt=HR(nt.width,nt.height,X.format,X.type);for(const qe of X.layerUpdates){const ot=nt.data.subarray(qe*rt/nt.data.BYTES_PER_ELEMENT,(qe+1)*rt/nt.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,qe,nt.width,nt.height,1,le,Se,ot)}X.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,nt.width,nt.height,nt.depth,le,Se,nt.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ne,nt.width,nt.height,nt.depth,0,le,Se,nt.data);else if(X.isData3DTexture)oe?(Qe&&t.texStorage3D(n.TEXTURE_3D,at,ne,nt.width,nt.height,nt.depth),$e&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,nt.width,nt.height,nt.depth,le,Se,nt.data)):t.texImage3D(n.TEXTURE_3D,0,ne,nt.width,nt.height,nt.depth,0,le,Se,nt.data);else if(X.isFramebufferTexture){if(Qe)if(oe)t.texStorage2D(n.TEXTURE_2D,at,ne,nt.width,nt.height);else{let rt=nt.width,qe=nt.height;for(let ot=0;ot<at;ot++)t.texImage2D(n.TEXTURE_2D,ot,ne,rt,qe,0,le,Se,null),rt>>=1,qe>>=1}}else if(Ze.length>0){if(oe&&Qe){const rt=dt(Ze[0]);t.texStorage2D(n.TEXTURE_2D,at,ne,rt.width,rt.height)}for(let rt=0,qe=Ze.length;rt<qe;rt++)ge=Ze[rt],oe?$e&&t.texSubImage2D(n.TEXTURE_2D,rt,0,0,le,Se,ge):t.texImage2D(n.TEXTURE_2D,rt,ne,le,Se,ge);X.generateMipmaps=!1}else if(oe){if(Qe){const rt=dt(nt);t.texStorage2D(n.TEXTURE_2D,at,ne,rt.width,rt.height)}$e&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,le,Se,nt)}else t.texImage2D(n.TEXTURE_2D,0,ne,le,Se,nt);S(X)&&w(Ue),At.__version=Le.version,X.onUpdate&&X.onUpdate(X)}ee.__version=X.version}function Ae(ee,X,pe){if(X.image.length!==6)return;const Ue=Me(ee,X),Ye=X.source;t.bindTexture(n.TEXTURE_CUBE_MAP,ee.__webglTexture,n.TEXTURE0+pe);const Le=i.get(Ye);if(Ye.version!==Le.__version||Ue===!0){t.activeTexture(n.TEXTURE0+pe);const At=qn.getPrimaries(qn.workingColorSpace),gt=X.colorSpace===jf?null:qn.getPrimaries(X.colorSpace),It=X.colorSpace===jf||At===gt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,X.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,X.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,It);const Ht=X.isCompressedTexture||X.image[0].isCompressedTexture,nt=X.image[0]&&X.image[0].isDataTexture,le=[];for(let qe=0;qe<6;qe++)!Ht&&!nt?le[qe]=T(X.image[qe],!0,r.maxCubemapSize):le[qe]=nt?X.image[qe].image:X.image[qe],le[qe]=Lt(X,le[qe]);const Se=le[0],ne=a.convert(X.format,X.colorSpace),ge=a.convert(X.type),Ze=R(X.internalFormat,ne,ge,X.colorSpace),oe=X.isVideoTexture!==!0,Qe=Le.__version===void 0||Ue===!0,$e=Ye.dataReady;let at=F(X,Se);de(n.TEXTURE_CUBE_MAP,X);let rt;if(Ht){oe&&Qe&&t.texStorage2D(n.TEXTURE_CUBE_MAP,at,Ze,Se.width,Se.height);for(let qe=0;qe<6;qe++){rt=le[qe].mipmaps;for(let ot=0;ot<rt.length;ot++){const Ft=rt[ot];X.format!==Es?ne!==null?oe?$e&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,ot,0,0,Ft.width,Ft.height,ne,Ft.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,ot,Ze,Ft.width,Ft.height,0,Ft.data):Mt("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):oe?$e&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,ot,0,0,Ft.width,Ft.height,ne,ge,Ft.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,ot,Ze,Ft.width,Ft.height,0,ne,ge,Ft.data)}}}else{if(rt=X.mipmaps,oe&&Qe){rt.length>0&&at++;const qe=dt(le[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,at,Ze,qe.width,qe.height)}for(let qe=0;qe<6;qe++)if(nt){oe?$e&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,0,0,le[qe].width,le[qe].height,ne,ge,le[qe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,Ze,le[qe].width,le[qe].height,0,ne,ge,le[qe].data);for(let ot=0;ot<rt.length;ot++){const un=rt[ot].image[qe].image;oe?$e&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,ot+1,0,0,un.width,un.height,ne,ge,un.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,ot+1,Ze,un.width,un.height,0,ne,ge,un.data)}}else{oe?$e&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,0,0,ne,ge,le[qe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,Ze,ne,ge,le[qe]);for(let ot=0;ot<rt.length;ot++){const Ft=rt[ot];oe?$e&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,ot+1,0,0,ne,ge,Ft.image[qe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,ot+1,Ze,ne,ge,Ft.image[qe])}}}S(X)&&w(n.TEXTURE_CUBE_MAP),Le.__version=Ye.version,X.onUpdate&&X.onUpdate(X)}ee.__version=X.version}function mt(ee,X,pe,Ue,Ye,Le){const At=a.convert(pe.format,pe.colorSpace),gt=a.convert(pe.type),It=R(pe.internalFormat,At,gt,pe.colorSpace),Ht=i.get(X),nt=i.get(pe);if(nt.__renderTarget=X,!Ht.__hasExternalTextures){const le=Math.max(1,X.width>>Le),Se=Math.max(1,X.height>>Le);Ye===n.TEXTURE_3D||Ye===n.TEXTURE_2D_ARRAY?t.texImage3D(Ye,Le,It,le,Se,X.depth,0,At,gt,null):t.texImage2D(Ye,Le,It,le,Se,0,At,gt,null)}t.bindFramebuffer(n.FRAMEBUFFER,ee),Et(X)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ue,Ye,nt.__webglTexture,0,re(X)):(Ye===n.TEXTURE_2D||Ye>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ye<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ue,Ye,nt.__webglTexture,Le),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ye(ee,X,pe){if(n.bindRenderbuffer(n.RENDERBUFFER,ee),X.depthBuffer){const Ue=X.depthTexture,Ye=Ue&&Ue.isDepthTexture?Ue.type:null,Le=O(X.stencilBuffer,Ye),At=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;Et(X)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,re(X),Le,X.width,X.height):pe?n.renderbufferStorageMultisample(n.RENDERBUFFER,re(X),Le,X.width,X.height):n.renderbufferStorage(n.RENDERBUFFER,Le,X.width,X.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,At,n.RENDERBUFFER,ee)}else{const Ue=X.textures;for(let Ye=0;Ye<Ue.length;Ye++){const Le=Ue[Ye],At=a.convert(Le.format,Le.colorSpace),gt=a.convert(Le.type),It=R(Le.internalFormat,At,gt,Le.colorSpace);Et(X)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,re(X),It,X.width,X.height):pe?n.renderbufferStorageMultisample(n.RENDERBUFFER,re(X),It,X.width,X.height):n.renderbufferStorage(n.RENDERBUFFER,It,X.width,X.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function et(ee,X,pe){const Ue=X.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(n.FRAMEBUFFER,ee),!(X.depthTexture&&X.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ye=i.get(X.depthTexture);if(Ye.__renderTarget=X,(!Ye.__webglTexture||X.depthTexture.image.width!==X.width||X.depthTexture.image.height!==X.height)&&(X.depthTexture.image.width=X.width,X.depthTexture.image.height=X.height,X.depthTexture.needsUpdate=!0),Ue){if(Ye.__webglInit===void 0&&(Ye.__webglInit=!0,X.depthTexture.addEventListener("dispose",B)),Ye.__webglTexture===void 0){Ye.__webglTexture=n.createTexture(),t.bindTexture(n.TEXTURE_CUBE_MAP,Ye.__webglTexture),de(n.TEXTURE_CUBE_MAP,X.depthTexture);const Ht=a.convert(X.depthTexture.format),nt=a.convert(X.depthTexture.type);let le;X.depthTexture.format===jc?le=n.DEPTH_COMPONENT24:X.depthTexture.format===Pd&&(le=n.DEPTH24_STENCIL8);for(let Se=0;Se<6;Se++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,le,X.width,X.height,0,Ht,nt,null)}}else ue(X.depthTexture,0);const Le=Ye.__webglTexture,At=re(X),gt=Ue?n.TEXTURE_CUBE_MAP_POSITIVE_X+pe:n.TEXTURE_2D,It=X.depthTexture.format===Pd?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;if(X.depthTexture.format===jc)Et(X)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,It,gt,Le,0,At):n.framebufferTexture2D(n.FRAMEBUFFER,It,gt,Le,0);else if(X.depthTexture.format===Pd)Et(X)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,It,gt,Le,0,At):n.framebufferTexture2D(n.FRAMEBUFFER,It,gt,Le,0);else throw new Error("Unknown depthTexture format")}function wt(ee){const X=i.get(ee),pe=ee.isWebGLCubeRenderTarget===!0;if(X.__boundDepthTexture!==ee.depthTexture){const Ue=ee.depthTexture;if(X.__depthDisposeCallback&&X.__depthDisposeCallback(),Ue){const Ye=()=>{delete X.__boundDepthTexture,delete X.__depthDisposeCallback,Ue.removeEventListener("dispose",Ye)};Ue.addEventListener("dispose",Ye),X.__depthDisposeCallback=Ye}X.__boundDepthTexture=Ue}if(ee.depthTexture&&!X.__autoAllocateDepthBuffer)if(pe)for(let Ue=0;Ue<6;Ue++)et(X.__webglFramebuffer[Ue],ee,Ue);else{const Ue=ee.texture.mipmaps;Ue&&Ue.length>0?et(X.__webglFramebuffer[0],ee,0):et(X.__webglFramebuffer,ee,0)}else if(pe){X.__webglDepthbuffer=[];for(let Ue=0;Ue<6;Ue++)if(t.bindFramebuffer(n.FRAMEBUFFER,X.__webglFramebuffer[Ue]),X.__webglDepthbuffer[Ue]===void 0)X.__webglDepthbuffer[Ue]=n.createRenderbuffer(),ye(X.__webglDepthbuffer[Ue],ee,!1);else{const Ye=ee.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Le=X.__webglDepthbuffer[Ue];n.bindRenderbuffer(n.RENDERBUFFER,Le),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ye,n.RENDERBUFFER,Le)}}else{const Ue=ee.texture.mipmaps;if(Ue&&Ue.length>0?t.bindFramebuffer(n.FRAMEBUFFER,X.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,X.__webglFramebuffer),X.__webglDepthbuffer===void 0)X.__webglDepthbuffer=n.createRenderbuffer(),ye(X.__webglDepthbuffer,ee,!1);else{const Ye=ee.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Le=X.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Le),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ye,n.RENDERBUFFER,Le)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function ze(ee,X,pe){const Ue=i.get(ee);X!==void 0&&mt(Ue.__webglFramebuffer,ee,ee.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),pe!==void 0&&wt(ee)}function Tt(ee){const X=ee.texture,pe=i.get(ee),Ue=i.get(X);ee.addEventListener("dispose",L);const Ye=ee.textures,Le=ee.isWebGLCubeRenderTarget===!0,At=Ye.length>1;if(At||(Ue.__webglTexture===void 0&&(Ue.__webglTexture=n.createTexture()),Ue.__version=X.version,s.memory.textures++),Le){pe.__webglFramebuffer=[];for(let gt=0;gt<6;gt++)if(X.mipmaps&&X.mipmaps.length>0){pe.__webglFramebuffer[gt]=[];for(let It=0;It<X.mipmaps.length;It++)pe.__webglFramebuffer[gt][It]=n.createFramebuffer()}else pe.__webglFramebuffer[gt]=n.createFramebuffer()}else{if(X.mipmaps&&X.mipmaps.length>0){pe.__webglFramebuffer=[];for(let gt=0;gt<X.mipmaps.length;gt++)pe.__webglFramebuffer[gt]=n.createFramebuffer()}else pe.__webglFramebuffer=n.createFramebuffer();if(At)for(let gt=0,It=Ye.length;gt<It;gt++){const Ht=i.get(Ye[gt]);Ht.__webglTexture===void 0&&(Ht.__webglTexture=n.createTexture(),s.memory.textures++)}if(ee.samples>0&&Et(ee)===!1){pe.__webglMultisampledFramebuffer=n.createFramebuffer(),pe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,pe.__webglMultisampledFramebuffer);for(let gt=0;gt<Ye.length;gt++){const It=Ye[gt];pe.__webglColorRenderbuffer[gt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,pe.__webglColorRenderbuffer[gt]);const Ht=a.convert(It.format,It.colorSpace),nt=a.convert(It.type),le=R(It.internalFormat,Ht,nt,It.colorSpace,ee.isXRRenderTarget===!0),Se=re(ee);n.renderbufferStorageMultisample(n.RENDERBUFFER,Se,le,ee.width,ee.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+gt,n.RENDERBUFFER,pe.__webglColorRenderbuffer[gt])}n.bindRenderbuffer(n.RENDERBUFFER,null),ee.depthBuffer&&(pe.__webglDepthRenderbuffer=n.createRenderbuffer(),ye(pe.__webglDepthRenderbuffer,ee,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Le){t.bindTexture(n.TEXTURE_CUBE_MAP,Ue.__webglTexture),de(n.TEXTURE_CUBE_MAP,X);for(let gt=0;gt<6;gt++)if(X.mipmaps&&X.mipmaps.length>0)for(let It=0;It<X.mipmaps.length;It++)mt(pe.__webglFramebuffer[gt][It],ee,X,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+gt,It);else mt(pe.__webglFramebuffer[gt],ee,X,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+gt,0);S(X)&&w(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(At){for(let gt=0,It=Ye.length;gt<It;gt++){const Ht=Ye[gt],nt=i.get(Ht);let le=n.TEXTURE_2D;(ee.isWebGL3DRenderTarget||ee.isWebGLArrayRenderTarget)&&(le=ee.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(le,nt.__webglTexture),de(le,Ht),mt(pe.__webglFramebuffer,ee,Ht,n.COLOR_ATTACHMENT0+gt,le,0),S(Ht)&&w(le)}t.unbindTexture()}else{let gt=n.TEXTURE_2D;if((ee.isWebGL3DRenderTarget||ee.isWebGLArrayRenderTarget)&&(gt=ee.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(gt,Ue.__webglTexture),de(gt,X),X.mipmaps&&X.mipmaps.length>0)for(let It=0;It<X.mipmaps.length;It++)mt(pe.__webglFramebuffer[It],ee,X,n.COLOR_ATTACHMENT0,gt,It);else mt(pe.__webglFramebuffer,ee,X,n.COLOR_ATTACHMENT0,gt,0);S(X)&&w(gt),t.unbindTexture()}ee.depthBuffer&&wt(ee)}function Oe(ee){const X=ee.textures;for(let pe=0,Ue=X.length;pe<Ue;pe++){const Ye=X[pe];if(S(Ye)){const Le=I(ee),At=i.get(Ye).__webglTexture;t.bindTexture(Le,At),w(Le),t.unbindTexture()}}}const Ke=[],He=[];function ut(ee){if(ee.samples>0){if(Et(ee)===!1){const X=ee.textures,pe=ee.width,Ue=ee.height;let Ye=n.COLOR_BUFFER_BIT;const Le=ee.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,At=i.get(ee),gt=X.length>1;if(gt)for(let Ht=0;Ht<X.length;Ht++)t.bindFramebuffer(n.FRAMEBUFFER,At.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ht,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,At.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ht,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,At.__webglMultisampledFramebuffer);const It=ee.texture.mipmaps;It&&It.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,At.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,At.__webglFramebuffer);for(let Ht=0;Ht<X.length;Ht++){if(ee.resolveDepthBuffer&&(ee.depthBuffer&&(Ye|=n.DEPTH_BUFFER_BIT),ee.stencilBuffer&&ee.resolveStencilBuffer&&(Ye|=n.STENCIL_BUFFER_BIT)),gt){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,At.__webglColorRenderbuffer[Ht]);const nt=i.get(X[Ht]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,nt,0)}n.blitFramebuffer(0,0,pe,Ue,0,0,pe,Ue,Ye,n.NEAREST),c===!0&&(Ke.length=0,He.length=0,Ke.push(n.COLOR_ATTACHMENT0+Ht),ee.depthBuffer&&ee.resolveDepthBuffer===!1&&(Ke.push(Le),He.push(Le),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,He)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ke))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),gt)for(let Ht=0;Ht<X.length;Ht++){t.bindFramebuffer(n.FRAMEBUFFER,At.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ht,n.RENDERBUFFER,At.__webglColorRenderbuffer[Ht]);const nt=i.get(X[Ht]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,At.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ht,n.TEXTURE_2D,nt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,At.__webglMultisampledFramebuffer)}else if(ee.depthBuffer&&ee.resolveDepthBuffer===!1&&c){const X=ee.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[X])}}}function re(ee){return Math.min(r.maxSamples,ee.samples)}function Et(ee){const X=i.get(ee);return ee.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&X.__useRenderToTexture!==!1}function ht(ee){const X=s.render.frame;p.get(ee)!==X&&(p.set(ee,X),ee.update())}function Lt(ee,X){const pe=ee.colorSpace,Ue=ee.format,Ye=ee.type;return ee.isCompressedTexture===!0||ee.isVideoTexture===!0||pe!==Wd&&pe!==jf&&(qn.getTransfer(pe)===gi?(Ue!==Es||Ye!==Ws)&&Mt("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Yt("WebGLTextures: Unsupported texture color space:",pe)),X}function dt(ee){return typeof HTMLImageElement<"u"&&ee instanceof HTMLImageElement?(f.width=ee.naturalWidth||ee.width,f.height=ee.naturalHeight||ee.height):typeof VideoFrame<"u"&&ee instanceof VideoFrame?(f.width=ee.displayWidth,f.height=ee.displayHeight):(f.width=ee.width,f.height=ee.height),f}this.allocateTextureUnit=W,this.resetTextureUnits=q,this.setTexture2D=ue,this.setTexture2DArray=J,this.setTexture3D=ae,this.setTextureCube=he,this.rebindTextures=ze,this.setupRenderTarget=Tt,this.updateRenderTargetMipmap=Oe,this.updateMultisampleRenderTarget=ut,this.setupDepthRenderbuffer=wt,this.setupFrameBufferTexture=mt,this.useMultisampledRTT=Et,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function Zj(n,e){function t(i,r=jf){let a;const s=qn.getTransfer(r);if(i===Ws)return n.UNSIGNED_BYTE;if(i===cA)return n.UNSIGNED_SHORT_4_4_4_4;if(i===fA)return n.UNSIGNED_SHORT_5_5_5_1;if(i===NO)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===OO)return n.UNSIGNED_INT_10F_11F_11F_REV;if(i===PO)return n.BYTE;if(i===RO)return n.SHORT;if(i===oy)return n.UNSIGNED_SHORT;if(i===uA)return n.INT;if(i===jl)return n.UNSIGNED_INT;if(i===$s)return n.FLOAT;if(i===Vc)return n.HALF_FLOAT;if(i===DO)return n.ALPHA;if(i===LO)return n.RGB;if(i===Es)return n.RGBA;if(i===jc)return n.DEPTH_COMPONENT;if(i===Pd)return n.DEPTH_STENCIL;if(i===hA)return n.RED;if(i===ux)return n.RED_INTEGER;if(i===Bm)return n.RG;if(i===dA)return n.RG_INTEGER;if(i===pA)return n.RGBA_INTEGER;if(i===eb||i===tb||i===nb||i===ib)if(s===gi)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===eb)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===tb)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===nb)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===ib)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===eb)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===tb)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===nb)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===ib)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===rE||i===aE||i===sE||i===oE)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===rE)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===aE)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===sE)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===oE)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===lE||i===uE||i===cE||i===fE||i===hE||i===dE||i===pE)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(i===lE||i===uE)return s===gi?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===cE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC;if(i===fE)return a.COMPRESSED_R11_EAC;if(i===hE)return a.COMPRESSED_SIGNED_R11_EAC;if(i===dE)return a.COMPRESSED_RG11_EAC;if(i===pE)return a.COMPRESSED_SIGNED_RG11_EAC}else return null;if(i===mE||i===gE||i===vE||i===yE||i===_E||i===bE||i===xE||i===SE||i===wE||i===EE||i===TE||i===AE||i===ME||i===CE)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(i===mE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===gE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===vE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===yE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===_E)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===bE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===xE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===SE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===wE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===EE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===TE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===AE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===ME)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===CE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===IE||i===PE||i===RE)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(i===IE)return s===gi?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===PE)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===RE)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===NE||i===OE||i===DE||i===LE)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(i===NE)return a.COMPRESSED_RED_RGTC1_EXT;if(i===OE)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===DE)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===LE)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===ly?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const rre=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,are=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class sre{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const i=new qO(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Hl({vertexShader:rre,fragmentShader:are,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new $r(new ky(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class ore extends Qc{constructor(e,t){super();const i=this;let r=null,a=1,s=null,l="local-floor",c=1,f=null,p=null,g=null,v=null,_=null,x=null;const T=typeof XRWebGLBinding<"u",S=new sre,w={},I=t.getContextAttributes();let R=null,O=null;const F=[],B=[],L=new tt;let z=null;const P=new Or;P.viewport=new Ri;const D=new Or;D.viewport=new Ri;const j=[P,D],q=new Bj;let W=null,se=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(be){let Ae=F[be];return Ae===void 0&&(Ae=new Cw,F[be]=Ae),Ae.getTargetRaySpace()},this.getControllerGrip=function(be){let Ae=F[be];return Ae===void 0&&(Ae=new Cw,F[be]=Ae),Ae.getGripSpace()},this.getHand=function(be){let Ae=F[be];return Ae===void 0&&(Ae=new Cw,F[be]=Ae),Ae.getHandSpace()};function ue(be){const Ae=B.indexOf(be.inputSource);if(Ae===-1)return;const mt=F[Ae];mt!==void 0&&(mt.update(be.inputSource,be.frame,f||s),mt.dispatchEvent({type:be.type,data:be.inputSource}))}function J(){r.removeEventListener("select",ue),r.removeEventListener("selectstart",ue),r.removeEventListener("selectend",ue),r.removeEventListener("squeeze",ue),r.removeEventListener("squeezestart",ue),r.removeEventListener("squeezeend",ue),r.removeEventListener("end",J),r.removeEventListener("inputsourceschange",ae);for(let be=0;be<F.length;be++){const Ae=B[be];Ae!==null&&(B[be]=null,F[be].disconnect(Ae))}W=null,se=null,S.reset();for(const be in w)delete w[be];e.setRenderTarget(R),_=null,v=null,g=null,r=null,O=null,vt.stop(),i.isPresenting=!1,e.setPixelRatio(z),e.setSize(L.width,L.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(be){a=be,i.isPresenting===!0&&Mt("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(be){l=be,i.isPresenting===!0&&Mt("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||s},this.setReferenceSpace=function(be){f=be},this.getBaseLayer=function(){return v!==null?v:_},this.getBinding=function(){return g===null&&T&&(g=new XRWebGLBinding(r,t)),g},this.getFrame=function(){return x},this.getSession=function(){return r},this.setSession=async function(be){if(r=be,r!==null){if(R=e.getRenderTarget(),r.addEventListener("select",ue),r.addEventListener("selectstart",ue),r.addEventListener("selectend",ue),r.addEventListener("squeeze",ue),r.addEventListener("squeezestart",ue),r.addEventListener("squeezeend",ue),r.addEventListener("end",J),r.addEventListener("inputsourceschange",ae),I.xrCompatible!==!0&&await t.makeXRCompatible(),z=e.getPixelRatio(),e.getSize(L),T&&"createProjectionLayer"in XRWebGLBinding.prototype){let mt=null,ye=null,et=null;I.depth&&(et=I.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,mt=I.stencil?Pd:jc,ye=I.stencil?ly:jl);const wt={colorFormat:t.RGBA8,depthFormat:et,scaleFactor:a};g=this.getBinding(),v=g.createProjectionLayer(wt),r.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),O=new tl(v.textureWidth,v.textureHeight,{format:Es,type:Ws,depthTexture:new my(v.textureWidth,v.textureHeight,ye,void 0,void 0,void 0,void 0,void 0,void 0,mt),stencilBuffer:I.stencil,colorSpace:e.outputColorSpace,samples:I.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}else{const mt={antialias:I.antialias,alpha:!0,depth:I.depth,stencil:I.stencil,framebufferScaleFactor:a};_=new XRWebGLLayer(r,t,mt),r.updateRenderState({baseLayer:_}),e.setPixelRatio(1),e.setSize(_.framebufferWidth,_.framebufferHeight,!1),O=new tl(_.framebufferWidth,_.framebufferHeight,{format:Es,type:Ws,colorSpace:e.outputColorSpace,stencilBuffer:I.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}O.isXRRenderTarget=!0,this.setFoveation(c),f=null,s=await r.requestReferenceSpace(l),vt.setContext(r),vt.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return S.getDepthTexture()};function ae(be){for(let Ae=0;Ae<be.removed.length;Ae++){const mt=be.removed[Ae],ye=B.indexOf(mt);ye>=0&&(B[ye]=null,F[ye].disconnect(mt))}for(let Ae=0;Ae<be.added.length;Ae++){const mt=be.added[Ae];let ye=B.indexOf(mt);if(ye===-1){for(let wt=0;wt<F.length;wt++)if(wt>=B.length){B.push(mt),ye=wt;break}else if(B[wt]===null){B[wt]=mt,ye=wt;break}if(ye===-1)break}const et=F[ye];et&&et.connect(mt)}}const he=new ie,Te=new ie;function Re(be,Ae,mt){he.setFromMatrixPosition(Ae.matrixWorld),Te.setFromMatrixPosition(mt.matrixWorld);const ye=he.distanceTo(Te),et=Ae.projectionMatrix.elements,wt=mt.projectionMatrix.elements,ze=et[14]/(et[10]-1),Tt=et[14]/(et[10]+1),Oe=(et[9]+1)/et[5],Ke=(et[9]-1)/et[5],He=(et[8]-1)/et[0],ut=(wt[8]+1)/wt[0],re=ze*He,Et=ze*ut,ht=ye/(-He+ut),Lt=ht*-He;if(Ae.matrixWorld.decompose(be.position,be.quaternion,be.scale),be.translateX(Lt),be.translateZ(ht),be.matrixWorld.compose(be.position,be.quaternion,be.scale),be.matrixWorldInverse.copy(be.matrixWorld).invert(),et[10]===-1)be.projectionMatrix.copy(Ae.projectionMatrix),be.projectionMatrixInverse.copy(Ae.projectionMatrixInverse);else{const dt=ze+ht,ee=Tt+ht,X=re-Lt,pe=Et+(ye-Lt),Ue=Oe*Tt/ee*dt,Ye=Ke*Tt/ee*dt;be.projectionMatrix.makePerspective(X,pe,Ue,Ye,dt,ee),be.projectionMatrixInverse.copy(be.projectionMatrix).invert()}}function Q(be,Ae){Ae===null?be.matrixWorld.copy(be.matrix):be.matrixWorld.multiplyMatrices(Ae.matrixWorld,be.matrix),be.matrixWorldInverse.copy(be.matrixWorld).invert()}this.updateCamera=function(be){if(r===null)return;let Ae=be.near,mt=be.far;S.texture!==null&&(S.depthNear>0&&(Ae=S.depthNear),S.depthFar>0&&(mt=S.depthFar)),q.near=D.near=P.near=Ae,q.far=D.far=P.far=mt,(W!==q.near||se!==q.far)&&(r.updateRenderState({depthNear:q.near,depthFar:q.far}),W=q.near,se=q.far),q.layers.mask=be.layers.mask|6,P.layers.mask=q.layers.mask&3,D.layers.mask=q.layers.mask&5;const ye=be.parent,et=q.cameras;Q(q,ye);for(let wt=0;wt<et.length;wt++)Q(et[wt],ye);et.length===2?Re(q,P,D):q.projectionMatrix.copy(P.projectionMatrix),de(be,q,ye)};function de(be,Ae,mt){mt===null?be.matrix.copy(Ae.matrixWorld):(be.matrix.copy(mt.matrixWorld),be.matrix.invert(),be.matrix.multiply(Ae.matrixWorld)),be.matrix.decompose(be.position,be.quaternion,be.scale),be.updateMatrixWorld(!0),be.projectionMatrix.copy(Ae.projectionMatrix),be.projectionMatrixInverse.copy(Ae.projectionMatrixInverse),be.isPerspectiveCamera&&(be.fov=fy*2*Math.atan(1/be.projectionMatrix.elements[5]),be.zoom=1)}this.getCamera=function(){return q},this.getFoveation=function(){if(!(v===null&&_===null))return c},this.setFoveation=function(be){c=be,v!==null&&(v.fixedFoveation=be),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=be)},this.hasDepthSensing=function(){return S.texture!==null},this.getDepthSensingMesh=function(){return S.getMesh(q)},this.getCameraTexture=function(be){return w[be]};let Me=null;function We(be,Ae){if(p=Ae.getViewerPose(f||s),x=Ae,p!==null){const mt=p.views;_!==null&&(e.setRenderTargetFramebuffer(O,_.framebuffer),e.setRenderTarget(O));let ye=!1;mt.length!==q.cameras.length&&(q.cameras.length=0,ye=!0);for(let Tt=0;Tt<mt.length;Tt++){const Oe=mt[Tt];let Ke=null;if(_!==null)Ke=_.getViewport(Oe);else{const ut=g.getViewSubImage(v,Oe);Ke=ut.viewport,Tt===0&&(e.setRenderTargetTextures(O,ut.colorTexture,ut.depthStencilTexture),e.setRenderTarget(O))}let He=j[Tt];He===void 0&&(He=new Or,He.layers.enable(Tt),He.viewport=new Ri,j[Tt]=He),He.matrix.fromArray(Oe.transform.matrix),He.matrix.decompose(He.position,He.quaternion,He.scale),He.projectionMatrix.fromArray(Oe.projectionMatrix),He.projectionMatrixInverse.copy(He.projectionMatrix).invert(),He.viewport.set(Ke.x,Ke.y,Ke.width,Ke.height),Tt===0&&(q.matrix.copy(He.matrix),q.matrix.decompose(q.position,q.quaternion,q.scale)),ye===!0&&q.cameras.push(He)}const et=r.enabledFeatures;if(et&&et.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&T){g=i.getBinding();const Tt=g.getDepthInformation(mt[0]);Tt&&Tt.isValid&&Tt.texture&&S.init(Tt,r.renderState)}if(et&&et.includes("camera-access")&&T){e.state.unbindTexture(),g=i.getBinding();for(let Tt=0;Tt<mt.length;Tt++){const Oe=mt[Tt].camera;if(Oe){let Ke=w[Oe];Ke||(Ke=new qO,w[Oe]=Ke);const He=g.getCameraImage(Oe);Ke.sourceTexture=He}}}}for(let mt=0;mt<F.length;mt++){const ye=B[mt],et=F[mt];ye!==null&&et!==void 0&&et.update(ye,Ae,f||s)}Me&&Me(be,Ae),Ae.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Ae}),x=null}const vt=new qj;vt.setAnimationLoop(We),this.setAnimationLoop=function(be){Me=be},this.dispose=function(){}}}const sm=new il,lre=new pn;function ure(n,e){function t(S,w){S.matrixAutoUpdate===!0&&S.updateMatrix(),w.value.copy(S.matrix)}function i(S,w){w.color.getRGB(S.fogColor.value,X6(n)),w.isFog?(S.fogNear.value=w.near,S.fogFar.value=w.far):w.isFogExp2&&(S.fogDensity.value=w.density)}function r(S,w,I,R,O){w.isMeshBasicMaterial||w.isMeshLambertMaterial?a(S,w):w.isMeshToonMaterial?(a(S,w),g(S,w)):w.isMeshPhongMaterial?(a(S,w),p(S,w)):w.isMeshStandardMaterial?(a(S,w),v(S,w),w.isMeshPhysicalMaterial&&_(S,w,O)):w.isMeshMatcapMaterial?(a(S,w),x(S,w)):w.isMeshDepthMaterial?a(S,w):w.isMeshDistanceMaterial?(a(S,w),T(S,w)):w.isMeshNormalMaterial?a(S,w):w.isLineBasicMaterial?(s(S,w),w.isLineDashedMaterial&&l(S,w)):w.isPointsMaterial?c(S,w,I,R):w.isSpriteMaterial?f(S,w):w.isShadowMaterial?(S.color.value.copy(w.color),S.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function a(S,w){S.opacity.value=w.opacity,w.color&&S.diffuse.value.copy(w.color),w.emissive&&S.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(S.map.value=w.map,t(w.map,S.mapTransform)),w.alphaMap&&(S.alphaMap.value=w.alphaMap,t(w.alphaMap,S.alphaMapTransform)),w.bumpMap&&(S.bumpMap.value=w.bumpMap,t(w.bumpMap,S.bumpMapTransform),S.bumpScale.value=w.bumpScale,w.side===Ks&&(S.bumpScale.value*=-1)),w.normalMap&&(S.normalMap.value=w.normalMap,t(w.normalMap,S.normalMapTransform),S.normalScale.value.copy(w.normalScale),w.side===Ks&&S.normalScale.value.negate()),w.displacementMap&&(S.displacementMap.value=w.displacementMap,t(w.displacementMap,S.displacementMapTransform),S.displacementScale.value=w.displacementScale,S.displacementBias.value=w.displacementBias),w.emissiveMap&&(S.emissiveMap.value=w.emissiveMap,t(w.emissiveMap,S.emissiveMapTransform)),w.specularMap&&(S.specularMap.value=w.specularMap,t(w.specularMap,S.specularMapTransform)),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest);const I=e.get(w),R=I.envMap,O=I.envMapRotation;R&&(S.envMap.value=R,sm.copy(O),sm.x*=-1,sm.y*=-1,sm.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1&&(sm.y*=-1,sm.z*=-1),S.envMapRotation.value.setFromMatrix4(lre.makeRotationFromEuler(sm)),S.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=w.reflectivity,S.ior.value=w.ior,S.refractionRatio.value=w.refractionRatio),w.lightMap&&(S.lightMap.value=w.lightMap,S.lightMapIntensity.value=w.lightMapIntensity,t(w.lightMap,S.lightMapTransform)),w.aoMap&&(S.aoMap.value=w.aoMap,S.aoMapIntensity.value=w.aoMapIntensity,t(w.aoMap,S.aoMapTransform))}function s(S,w){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,w.map&&(S.map.value=w.map,t(w.map,S.mapTransform))}function l(S,w){S.dashSize.value=w.dashSize,S.totalSize.value=w.dashSize+w.gapSize,S.scale.value=w.scale}function c(S,w,I,R){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,S.size.value=w.size*I,S.scale.value=R*.5,w.map&&(S.map.value=w.map,t(w.map,S.uvTransform)),w.alphaMap&&(S.alphaMap.value=w.alphaMap,t(w.alphaMap,S.alphaMapTransform)),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest)}function f(S,w){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,S.rotation.value=w.rotation,w.map&&(S.map.value=w.map,t(w.map,S.mapTransform)),w.alphaMap&&(S.alphaMap.value=w.alphaMap,t(w.alphaMap,S.alphaMapTransform)),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest)}function p(S,w){S.specular.value.copy(w.specular),S.shininess.value=Math.max(w.shininess,1e-4)}function g(S,w){w.gradientMap&&(S.gradientMap.value=w.gradientMap)}function v(S,w){S.metalness.value=w.metalness,w.metalnessMap&&(S.metalnessMap.value=w.metalnessMap,t(w.metalnessMap,S.metalnessMapTransform)),S.roughness.value=w.roughness,w.roughnessMap&&(S.roughnessMap.value=w.roughnessMap,t(w.roughnessMap,S.roughnessMapTransform)),w.envMap&&(S.envMapIntensity.value=w.envMapIntensity)}function _(S,w,I){S.ior.value=w.ior,w.sheen>0&&(S.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),S.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(S.sheenColorMap.value=w.sheenColorMap,t(w.sheenColorMap,S.sheenColorMapTransform)),w.sheenRoughnessMap&&(S.sheenRoughnessMap.value=w.sheenRoughnessMap,t(w.sheenRoughnessMap,S.sheenRoughnessMapTransform))),w.clearcoat>0&&(S.clearcoat.value=w.clearcoat,S.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(S.clearcoatMap.value=w.clearcoatMap,t(w.clearcoatMap,S.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,t(w.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(S.clearcoatNormalMap.value=w.clearcoatNormalMap,t(w.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===Ks&&S.clearcoatNormalScale.value.negate())),w.dispersion>0&&(S.dispersion.value=w.dispersion),w.iridescence>0&&(S.iridescence.value=w.iridescence,S.iridescenceIOR.value=w.iridescenceIOR,S.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(S.iridescenceMap.value=w.iridescenceMap,t(w.iridescenceMap,S.iridescenceMapTransform)),w.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=w.iridescenceThicknessMap,t(w.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),w.transmission>0&&(S.transmission.value=w.transmission,S.transmissionSamplerMap.value=I.texture,S.transmissionSamplerSize.value.set(I.width,I.height),w.transmissionMap&&(S.transmissionMap.value=w.transmissionMap,t(w.transmissionMap,S.transmissionMapTransform)),S.thickness.value=w.thickness,w.thicknessMap&&(S.thicknessMap.value=w.thicknessMap,t(w.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=w.attenuationDistance,S.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(S.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(S.anisotropyMap.value=w.anisotropyMap,t(w.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=w.specularIntensity,S.specularColor.value.copy(w.specularColor),w.specularColorMap&&(S.specularColorMap.value=w.specularColorMap,t(w.specularColorMap,S.specularColorMapTransform)),w.specularIntensityMap&&(S.specularIntensityMap.value=w.specularIntensityMap,t(w.specularIntensityMap,S.specularIntensityMapTransform))}function x(S,w){w.matcap&&(S.matcap.value=w.matcap)}function T(S,w){const I=e.get(w).light;S.referencePosition.value.setFromMatrixPosition(I.matrixWorld),S.nearDistance.value=I.shadow.camera.near,S.farDistance.value=I.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function cre(n,e,t,i){let r={},a={},s=[];const l=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(I,R){const O=R.program;i.uniformBlockBinding(I,O)}function f(I,R){let O=r[I.id];O===void 0&&(x(I),O=p(I),r[I.id]=O,I.addEventListener("dispose",S));const F=R.program;i.updateUBOMapping(I,F);const B=e.render.frame;a[I.id]!==B&&(v(I),a[I.id]=B)}function p(I){const R=g();I.__bindingPointIndex=R;const O=n.createBuffer(),F=I.__size,B=I.usage;return n.bindBuffer(n.UNIFORM_BUFFER,O),n.bufferData(n.UNIFORM_BUFFER,F,B),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,R,O),O}function g(){for(let I=0;I<l;I++)if(s.indexOf(I)===-1)return s.push(I),I;return Yt("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(I){const R=r[I.id],O=I.uniforms,F=I.__cache;n.bindBuffer(n.UNIFORM_BUFFER,R);for(let B=0,L=O.length;B<L;B++){const z=Array.isArray(O[B])?O[B]:[O[B]];for(let P=0,D=z.length;P<D;P++){const j=z[P];if(_(j,B,P,F)===!0){const q=j.__offset,W=Array.isArray(j.value)?j.value:[j.value];let se=0;for(let ue=0;ue<W.length;ue++){const J=W[ue],ae=T(J);typeof J=="number"||typeof J=="boolean"?(j.__data[0]=J,n.bufferSubData(n.UNIFORM_BUFFER,q+se,j.__data)):J.isMatrix3?(j.__data[0]=J.elements[0],j.__data[1]=J.elements[1],j.__data[2]=J.elements[2],j.__data[3]=0,j.__data[4]=J.elements[3],j.__data[5]=J.elements[4],j.__data[6]=J.elements[5],j.__data[7]=0,j.__data[8]=J.elements[6],j.__data[9]=J.elements[7],j.__data[10]=J.elements[8],j.__data[11]=0):(J.toArray(j.__data,se),se+=ae.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,q,j.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function _(I,R,O,F){const B=I.value,L=R+"_"+O;if(F[L]===void 0)return typeof B=="number"||typeof B=="boolean"?F[L]=B:F[L]=B.clone(),!0;{const z=F[L];if(typeof B=="number"||typeof B=="boolean"){if(z!==B)return F[L]=B,!0}else if(z.equals(B)===!1)return z.copy(B),!0}return!1}function x(I){const R=I.uniforms;let O=0;const F=16;for(let L=0,z=R.length;L<z;L++){const P=Array.isArray(R[L])?R[L]:[R[L]];for(let D=0,j=P.length;D<j;D++){const q=P[D],W=Array.isArray(q.value)?q.value:[q.value];for(let se=0,ue=W.length;se<ue;se++){const J=W[se],ae=T(J),he=O%F,Te=he%ae.boundary,Re=he+Te;O+=Te,Re!==0&&F-Re<ae.storage&&(O+=F-Re),q.__data=new Float32Array(ae.storage/Float32Array.BYTES_PER_ELEMENT),q.__offset=O,O+=ae.storage}}}const B=O%F;return B>0&&(O+=F-B),I.__size=O,I.__cache={},this}function T(I){const R={boundary:0,storage:0};return typeof I=="number"||typeof I=="boolean"?(R.boundary=4,R.storage=4):I.isVector2?(R.boundary=8,R.storage=8):I.isVector3||I.isColor?(R.boundary=16,R.storage=12):I.isVector4?(R.boundary=16,R.storage=16):I.isMatrix3?(R.boundary=48,R.storage=48):I.isMatrix4?(R.boundary=64,R.storage=64):I.isTexture?Mt("WebGLRenderer: Texture samplers can not be part of an uniforms group."):Mt("WebGLRenderer: Unsupported uniform value type.",I),R}function S(I){const R=I.target;R.removeEventListener("dispose",S);const O=s.indexOf(R.__bindingPointIndex);s.splice(O,1),n.deleteBuffer(r[R.id]),delete r[R.id],delete a[R.id]}function w(){for(const I in r)n.deleteBuffer(r[I]);s=[],r={},a={}}return{bind:c,update:f,dispose:w}}const fre=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let bc=null;function hre(){return bc===null&&(bc=new Iu(fre,16,16,Bm,Vc),bc.name="DFG_LUT",bc.minFilter=Ki,bc.magFilter=Ki,bc.wrapS=Po,bc.wrapT=Po,bc.generateMipmaps=!1,bc.needsUpdate=!0),bc}class Qj{constructor(e={}){const{canvas:t=G6(),context:i=null,depth:r=!0,stencil:a=!1,alpha:s=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:f=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:g=!1,reversedDepthBuffer:v=!1,outputBufferType:_=Ws}=e;this.isWebGLRenderer=!0;let x;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");x=i.getContextAttributes().alpha}else x=s;const T=_,S=new Set([pA,dA,ux]),w=new Set([Ws,jl,oy,ly,cA,fA]),I=new Uint32Array(4),R=new Int32Array(4);let O=null,F=null;const B=[],L=[];let z=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Vl,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const P=this;let D=!1;this._outputColorSpace=Xa;let j=0,q=0,W=null,se=-1,ue=null;const J=new Ri,ae=new Ri;let he=null;const Te=new Dt(0);let Re=0,Q=t.width,de=t.height,Me=1,We=null,vt=null;const be=new Ri(0,0,Q,de),Ae=new Ri(0,0,Q,de);let mt=!1;const ye=new Ly;let et=!1,wt=!1;const ze=new pn,Tt=new ie,Oe=new Ri,Ke={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let He=!1;function ut(){return W===null?Me:1}let re=i;function Et(K,ve){return t.getContext(K,ve)}try{const K={alpha:!0,depth:r,stencil:a,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:f,powerPreference:p,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${sA}`),t.addEventListener("webglcontextlost",Ft,!1),t.addEventListener("webglcontextrestored",un,!1),t.addEventListener("webglcontextcreationerror",en,!1),re===null){const ve="webgl2";if(re=Et(ve,K),re===null)throw Et(ve)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(K){throw Yt("WebGLRenderer: "+K.message),K}let ht,Lt,dt,ee,X,pe,Ue,Ye,Le,At,gt,It,Ht,nt,le,Se,ne,ge,Ze,oe,Qe,$e,at,rt;function qe(){ht=new dne(re),ht.init(),$e=new Zj(re,ht),Lt=new rne(re,ht,e,$e),dt=new nre(re,ht),Lt.reversedDepthBuffer&&v&&dt.buffers.depth.setReversed(!0),ee=new gne(re),X=new Vie,pe=new ire(re,ht,dt,X,Lt,$e,ee),Ue=new sne(P),Ye=new hne(P),Le=new bJ(re),at=new nne(re,Le),At=new pne(re,Le,ee,at),gt=new yne(re,At,Le,ee),Ze=new vne(re,Lt,pe),Se=new ane(X),It=new Bie(P,Ue,Ye,ht,Lt,at,Se),Ht=new ure(P,X),nt=new Hie,le=new Yie(ht),ge=new tne(P,Ue,Ye,dt,gt,x,c),ne=new ere(P,gt,Lt),rt=new cre(re,ee,Lt,dt),oe=new ine(re,ht,ee),Qe=new mne(re,ht,ee),ee.programs=It.programs,P.capabilities=Lt,P.extensions=ht,P.properties=X,P.renderLists=nt,P.shadowMap=ne,P.state=dt,P.info=ee}qe(),T!==Ws&&(z=new bne(T,t.width,t.height,r,a));const ot=new ore(P,re);this.xr=ot,this.getContext=function(){return re},this.getContextAttributes=function(){return re.getContextAttributes()},this.forceContextLoss=function(){const K=ht.get("WEBGL_lose_context");K&&K.loseContext()},this.forceContextRestore=function(){const K=ht.get("WEBGL_lose_context");K&&K.restoreContext()},this.getPixelRatio=function(){return Me},this.setPixelRatio=function(K){K!==void 0&&(Me=K,this.setSize(Q,de,!1))},this.getSize=function(K){return K.set(Q,de)},this.setSize=function(K,ve,ke=!0){if(ot.isPresenting){Mt("WebGLRenderer: Can't change size while VR device is presenting.");return}Q=K,de=ve,t.width=Math.floor(K*Me),t.height=Math.floor(ve*Me),ke===!0&&(t.style.width=K+"px",t.style.height=ve+"px"),z!==null&&z.setSize(t.width,t.height),this.setViewport(0,0,K,ve)},this.getDrawingBufferSize=function(K){return K.set(Q*Me,de*Me).floor()},this.setDrawingBufferSize=function(K,ve,ke){Q=K,de=ve,Me=ke,t.width=Math.floor(K*ke),t.height=Math.floor(ve*ke),this.setViewport(0,0,K,ve)},this.setEffects=function(K){if(T===Ws){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(K){for(let ve=0;ve<K.length;ve++)if(K[ve].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}z.setEffects(K||[])},this.getCurrentViewport=function(K){return K.copy(J)},this.getViewport=function(K){return K.copy(be)},this.setViewport=function(K,ve,ke,Ie){K.isVector4?be.set(K.x,K.y,K.z,K.w):be.set(K,ve,ke,Ie),dt.viewport(J.copy(be).multiplyScalar(Me).round())},this.getScissor=function(K){return K.copy(Ae)},this.setScissor=function(K,ve,ke,Ie){K.isVector4?Ae.set(K.x,K.y,K.z,K.w):Ae.set(K,ve,ke,Ie),dt.scissor(ae.copy(Ae).multiplyScalar(Me).round())},this.getScissorTest=function(){return mt},this.setScissorTest=function(K){dt.setScissorTest(mt=K)},this.setOpaqueSort=function(K){We=K},this.setTransparentSort=function(K){vt=K},this.getClearColor=function(K){return K.copy(ge.getClearColor())},this.setClearColor=function(){ge.setClearColor(...arguments)},this.getClearAlpha=function(){return ge.getClearAlpha()},this.setClearAlpha=function(){ge.setClearAlpha(...arguments)},this.clear=function(K=!0,ve=!0,ke=!0){let Ie=0;if(K){let xe=!1;if(W!==null){const yt=W.texture.format;xe=S.has(yt)}if(xe){const yt=W.texture.type,Ct=w.has(yt),ft=ge.getClearColor(),Ot=ge.getClearAlpha(),kt=ft.r,Vt=ft.g,Pt=ft.b;Ct?(I[0]=kt,I[1]=Vt,I[2]=Pt,I[3]=Ot,re.clearBufferuiv(re.COLOR,0,I)):(R[0]=kt,R[1]=Vt,R[2]=Pt,R[3]=Ot,re.clearBufferiv(re.COLOR,0,R))}else Ie|=re.COLOR_BUFFER_BIT}ve&&(Ie|=re.DEPTH_BUFFER_BIT),ke&&(Ie|=re.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),re.clear(Ie)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ft,!1),t.removeEventListener("webglcontextrestored",un,!1),t.removeEventListener("webglcontextcreationerror",en,!1),ge.dispose(),nt.dispose(),le.dispose(),X.dispose(),Ue.dispose(),Ye.dispose(),gt.dispose(),at.dispose(),rt.dispose(),It.dispose(),ot.dispose(),ot.removeEventListener("sessionstart",Ia),ot.removeEventListener("sessionend",Yl),Mi.stop()};function Ft(K){K.preventDefault(),Ab("WebGLRenderer: Context Lost."),D=!0}function un(){Ab("WebGLRenderer: Context Restored."),D=!1;const K=ee.autoReset,ve=ne.enabled,ke=ne.autoUpdate,Ie=ne.needsUpdate,xe=ne.type;qe(),ee.autoReset=K,ne.enabled=ve,ne.autoUpdate=ke,ne.needsUpdate=Ie,ne.type=xe}function en(K){Yt("WebGLRenderer: A WebGL context could not be created. Reason: ",K.statusMessage)}function oi(K){const ve=K.target;ve.removeEventListener("dispose",oi),Oi(ve)}function Oi(K){Xr(K),X.remove(K)}function Xr(K){const ve=X.get(K).programs;ve!==void 0&&(ve.forEach(function(ke){It.releaseProgram(ke)}),K.isShaderMaterial&&It.releaseShaderCache(K))}this.renderBufferDirect=function(K,ve,ke,Ie,xe,yt){ve===null&&(ve=Ke);const Ct=xe.isMesh&&xe.matrixWorld.determinant()<0,ft=ha(K,ve,ke,Ie,xe);dt.setMaterial(Ie,Ct);let Ot=ke.index,kt=1;if(Ie.wireframe===!0){if(Ot=At.getWireframeAttribute(ke),Ot===void 0)return;kt=2}const Vt=ke.drawRange,Pt=ke.attributes.position;let $t=Vt.start*kt,Rn=(Vt.start+Vt.count)*kt;yt!==null&&($t=Math.max($t,yt.start*kt),Rn=Math.min(Rn,(yt.start+yt.count)*kt)),Ot!==null?($t=Math.max($t,0),Rn=Math.min(Rn,Ot.count)):Pt!=null&&($t=Math.max($t,0),Rn=Math.min(Rn,Pt.count));const ii=Rn-$t;if(ii<0||ii===1/0)return;at.setup(xe,Ie,ft,ke,Ot);let Kt,on=oe;if(Ot!==null&&(Kt=Le.get(Ot),on=Qe,on.setIndex(Kt)),xe.isMesh)Ie.wireframe===!0?(dt.setLineWidth(Ie.wireframeLinewidth*ut()),on.setMode(re.LINES)):on.setMode(re.TRIANGLES);else if(xe.isLine){let St=Ie.linewidth;St===void 0&&(St=1),dt.setLineWidth(St*ut()),xe.isLineSegments?on.setMode(re.LINES):xe.isLineLoop?on.setMode(re.LINE_LOOP):on.setMode(re.LINE_STRIP)}else xe.isPoints?on.setMode(re.POINTS):xe.isSprite&&on.setMode(re.TRIANGLES);if(xe.isBatchedMesh)if(xe._multiDrawInstances!==null)cy("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),on.renderMultiDrawInstances(xe._multiDrawStarts,xe._multiDrawCounts,xe._multiDrawCount,xe._multiDrawInstances);else if(ht.get("WEBGL_multi_draw"))on.renderMultiDraw(xe._multiDrawStarts,xe._multiDrawCounts,xe._multiDrawCount);else{const St=xe._multiDrawStarts,An=xe._multiDrawCounts,tn=xe._multiDrawCount,Fi=Ot?Le.get(Ot).bytesPerElement:1,Ps=X.get(Ie).currentProgram.getUniforms();for(let yi=0;yi<tn;yi++)Ps.setValue(re,"_gl_DrawID",yi),on.render(St[yi]/Fi,An[yi])}else if(xe.isInstancedMesh)on.renderInstances($t,ii,xe.count);else if(ke.isInstancedBufferGeometry){const St=ke._maxInstanceCount!==void 0?ke._maxInstanceCount:1/0,An=Math.min(ke.instanceCount,St);on.renderInstances($t,ii,An)}else on.render($t,ii)};function ua(K,ve,ke){K.transparent===!0&&K.side===Mc&&K.forceSinglePass===!1?(K.side=Ks,K.needsUpdate=!0,Pa(K,ve,ke),K.side=eh,K.needsUpdate=!0,Pa(K,ve,ke),K.side=Mc):Pa(K,ve,ke)}this.compile=function(K,ve,ke=null){ke===null&&(ke=K),F=le.get(ke),F.init(ve),L.push(F),ke.traverseVisible(function(xe){xe.isLight&&xe.layers.test(ve.layers)&&(F.pushLight(xe),xe.castShadow&&F.pushShadow(xe))}),K!==ke&&K.traverseVisible(function(xe){xe.isLight&&xe.layers.test(ve.layers)&&(F.pushLight(xe),xe.castShadow&&F.pushShadow(xe))}),F.setupLights();const Ie=new Set;return K.traverse(function(xe){if(!(xe.isMesh||xe.isPoints||xe.isLine||xe.isSprite))return;const yt=xe.material;if(yt)if(Array.isArray(yt))for(let Ct=0;Ct<yt.length;Ct++){const ft=yt[Ct];ua(ft,ke,xe),Ie.add(ft)}else ua(yt,ke,xe),Ie.add(yt)}),F=L.pop(),Ie},this.compileAsync=function(K,ve,ke=null){const Ie=this.compile(K,ve,ke);return new Promise(xe=>{function yt(){if(Ie.forEach(function(Ct){X.get(Ct).currentProgram.isReady()&&Ie.delete(Ct)}),Ie.size===0){xe(K);return}setTimeout(yt,10)}ht.get("KHR_parallel_shader_compile")!==null?yt():setTimeout(yt,10)})};let ns=null;function to(K){ns&&ns(K)}function Ia(){Mi.stop()}function Yl(){Mi.start()}const Mi=new qj;Mi.setAnimationLoop(to),typeof self<"u"&&Mi.setContext(self),this.setAnimationLoop=function(K){ns=K,ot.setAnimationLoop(K),K===null?Mi.stop():Mi.start()},ot.addEventListener("sessionstart",Ia),ot.addEventListener("sessionend",Yl),this.render=function(K,ve){if(ve!==void 0&&ve.isCamera!==!0){Yt("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(D===!0)return;const ke=ot.enabled===!0&&ot.isPresenting===!0,Ie=z!==null&&(W===null||ke)&&z.begin(P,W);if(K.matrixWorldAutoUpdate===!0&&K.updateMatrixWorld(),ve.parent===null&&ve.matrixWorldAutoUpdate===!0&&ve.updateMatrixWorld(),ot.enabled===!0&&ot.isPresenting===!0&&(z===null||z.isCompositing()===!1)&&(ot.cameraAutoUpdate===!0&&ot.updateCamera(ve),ve=ot.getCamera()),K.isScene===!0&&K.onBeforeRender(P,K,ve,W),F=le.get(K,L.length),F.init(ve),L.push(F),ze.multiplyMatrices(ve.projectionMatrix,ve.matrixWorldInverse),ye.setFromProjectionMatrix(ze,Zo,ve.reversedDepth),wt=this.localClippingEnabled,et=Se.init(this.clippingPlanes,wt),O=nt.get(K,B.length),O.init(),B.push(O),ot.enabled===!0&&ot.isPresenting===!0){const Ct=P.xr.getDepthSensingMesh();Ct!==null&&ca(Ct,ve,-1/0,P.sortObjects)}ca(K,ve,0,P.sortObjects),O.finish(),P.sortObjects===!0&&O.sort(We,vt),He=ot.enabled===!1||ot.isPresenting===!1||ot.hasDepthSensing()===!1,He&&ge.addToRenderList(O,K),this.info.render.frame++,et===!0&&Se.beginShadows();const xe=F.state.shadowsArray;if(ne.render(xe,K,ve),et===!0&&Se.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Ie&&z.hasRenderPass())===!1){const Ct=O.opaque,ft=O.transmissive;if(F.setupLights(),ve.isArrayCamera){const Ot=ve.cameras;if(ft.length>0)for(let kt=0,Vt=Ot.length;kt<Vt;kt++){const Pt=Ot[kt];zi(Ct,ft,K,Pt)}He&&ge.render(K);for(let kt=0,Vt=Ot.length;kt<Vt;kt++){const Pt=Ot[kt];xi(O,K,Pt,Pt.viewport)}}else ft.length>0&&zi(Ct,ft,K,ve),He&&ge.render(K),xi(O,K,ve)}W!==null&&q===0&&(pe.updateMultisampleRenderTarget(W),pe.updateRenderTargetMipmap(W)),Ie&&z.end(P),K.isScene===!0&&K.onAfterRender(P,K,ve),at.resetDefaultState(),se=-1,ue=null,L.pop(),L.length>0?(F=L[L.length-1],et===!0&&Se.setGlobalState(P.clippingPlanes,F.state.camera)):F=null,B.pop(),B.length>0?O=B[B.length-1]:O=null};function ca(K,ve,ke,Ie){if(K.visible===!1)return;if(K.layers.test(ve.layers)){if(K.isGroup)ke=K.renderOrder;else if(K.isLOD)K.autoUpdate===!0&&K.update(ve);else if(K.isLight)F.pushLight(K),K.castShadow&&F.pushShadow(K);else if(K.isSprite){if(!K.frustumCulled||ye.intersectsSprite(K)){Ie&&Oe.setFromMatrixPosition(K.matrixWorld).applyMatrix4(ze);const Ct=gt.update(K),ft=K.material;ft.visible&&O.push(K,Ct,ft,ke,Oe.z,null)}}else if((K.isMesh||K.isLine||K.isPoints)&&(!K.frustumCulled||ye.intersectsObject(K))){const Ct=gt.update(K),ft=K.material;if(Ie&&(K.boundingSphere!==void 0?(K.boundingSphere===null&&K.computeBoundingSphere(),Oe.copy(K.boundingSphere.center)):(Ct.boundingSphere===null&&Ct.computeBoundingSphere(),Oe.copy(Ct.boundingSphere.center)),Oe.applyMatrix4(K.matrixWorld).applyMatrix4(ze)),Array.isArray(ft)){const Ot=Ct.groups;for(let kt=0,Vt=Ot.length;kt<Vt;kt++){const Pt=Ot[kt],$t=ft[Pt.materialIndex];$t&&$t.visible&&O.push(K,Ct,$t,ke,Oe.z,Pt)}}else ft.visible&&O.push(K,Ct,ft,ke,Oe.z,null)}}const yt=K.children;for(let Ct=0,ft=yt.length;Ct<ft;Ct++)ca(yt[Ct],ve,ke,Ie)}function xi(K,ve,ke,Ie){const{opaque:xe,transmissive:yt,transparent:Ct}=K;F.setupLightsView(ke),et===!0&&Se.setGlobalState(P.clippingPlanes,ke),Ie&&dt.viewport(J.copy(Ie)),xe.length>0&&Yr(xe,ve,ke),yt.length>0&&Yr(yt,ve,ke),Ct.length>0&&Yr(Ct,ve,ke),dt.buffers.depth.setTest(!0),dt.buffers.depth.setMask(!0),dt.buffers.color.setMask(!0),dt.setPolygonOffset(!1)}function zi(K,ve,ke,Ie){if((ke.isScene===!0?ke.overrideMaterial:null)!==null)return;if(F.state.transmissionRenderTarget[Ie.id]===void 0){const $t=ht.has("EXT_color_buffer_half_float")||ht.has("EXT_color_buffer_float");F.state.transmissionRenderTarget[Ie.id]=new tl(1,1,{generateMipmaps:!0,type:$t?Vc:Ws,minFilter:Pc,samples:Lt.samples,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:qn.workingColorSpace})}const yt=F.state.transmissionRenderTarget[Ie.id],Ct=Ie.viewport||J;yt.setSize(Ct.z*P.transmissionResolutionScale,Ct.w*P.transmissionResolutionScale);const ft=P.getRenderTarget(),Ot=P.getActiveCubeFace(),kt=P.getActiveMipmapLevel();P.setRenderTarget(yt),P.getClearColor(Te),Re=P.getClearAlpha(),Re<1&&P.setClearColor(16777215,.5),P.clear(),He&&ge.render(ke);const Vt=P.toneMapping;P.toneMapping=Vl;const Pt=Ie.viewport;if(Ie.viewport!==void 0&&(Ie.viewport=void 0),F.setupLightsView(Ie),et===!0&&Se.setGlobalState(P.clippingPlanes,Ie),Yr(K,ke,Ie),pe.updateMultisampleRenderTarget(yt),pe.updateRenderTargetMipmap(yt),ht.has("WEBGL_multisampled_render_to_texture")===!1){let $t=!1;for(let Rn=0,ii=ve.length;Rn<ii;Rn++){const Kt=ve[Rn],{object:on,geometry:St,material:An,group:tn}=Kt;if(An.side===Mc&&on.layers.test(Ie.layers)){const Fi=An.side;An.side=Ks,An.needsUpdate=!0,fa(on,ke,Ie,St,An,tn),An.side=Fi,An.needsUpdate=!0,$t=!0}}$t===!0&&(pe.updateMultisampleRenderTarget(yt),pe.updateRenderTargetMipmap(yt))}P.setRenderTarget(ft,Ot,kt),P.setClearColor(Te,Re),Pt!==void 0&&(Ie.viewport=Pt),P.toneMapping=Vt}function Yr(K,ve,ke){const Ie=ve.isScene===!0?ve.overrideMaterial:null;for(let xe=0,yt=K.length;xe<yt;xe++){const Ct=K[xe],{object:ft,geometry:Ot,group:kt}=Ct;let Vt=Ct.material;Vt.allowOverride===!0&&Ie!==null&&(Vt=Ie),ft.layers.test(ke.layers)&&fa(ft,ve,ke,Ot,Vt,kt)}}function fa(K,ve,ke,Ie,xe,yt){K.onBeforeRender(P,ve,ke,Ie,xe,yt),K.modelViewMatrix.multiplyMatrices(ke.matrixWorldInverse,K.matrixWorld),K.normalMatrix.getNormalMatrix(K.modelViewMatrix),xe.onBeforeRender(P,ve,ke,Ie,K,yt),xe.transparent===!0&&xe.side===Mc&&xe.forceSinglePass===!1?(xe.side=Ks,xe.needsUpdate=!0,P.renderBufferDirect(ke,ve,Ie,xe,K,yt),xe.side=eh,xe.needsUpdate=!0,P.renderBufferDirect(ke,ve,Ie,xe,K,yt),xe.side=Mc):P.renderBufferDirect(ke,ve,Ie,xe,K,yt),K.onAfterRender(P,ve,ke,Ie,xe,yt)}function Pa(K,ve,ke){ve.isScene!==!0&&(ve=Ke);const Ie=X.get(K),xe=F.state.lights,yt=F.state.shadowsArray,Ct=xe.state.version,ft=It.getParameters(K,xe.state,yt,ve,ke),Ot=It.getProgramCacheKey(ft);let kt=Ie.programs;Ie.environment=K.isMeshStandardMaterial?ve.environment:null,Ie.fog=ve.fog,Ie.envMap=(K.isMeshStandardMaterial?Ye:Ue).get(K.envMap||Ie.environment),Ie.envMapRotation=Ie.environment!==null&&K.envMap===null?ve.environmentRotation:K.envMapRotation,kt===void 0&&(K.addEventListener("dispose",oi),kt=new Map,Ie.programs=kt);let Vt=kt.get(Ot);if(Vt!==void 0){if(Ie.currentProgram===Vt&&Ie.lightsStateVersion===Ct)return Kl(K,ft),Vt}else ft.uniforms=It.getUniforms(K),K.onBeforeCompile(ft,P),Vt=It.acquireProgram(ft,Ot),kt.set(Ot,Vt),Ie.uniforms=ft.uniforms;const Pt=Ie.uniforms;return(!K.isShaderMaterial&&!K.isRawShaderMaterial||K.clipping===!0)&&(Pt.clippingPlanes=Se.uniform),Kl(K,ft),Ie.needsLights=Is(K),Ie.lightsStateVersion=Ct,Ie.needsLights&&(Pt.ambientLightColor.value=xe.state.ambient,Pt.lightProbe.value=xe.state.probe,Pt.directionalLights.value=xe.state.directional,Pt.directionalLightShadows.value=xe.state.directionalShadow,Pt.spotLights.value=xe.state.spot,Pt.spotLightShadows.value=xe.state.spotShadow,Pt.rectAreaLights.value=xe.state.rectArea,Pt.ltc_1.value=xe.state.rectAreaLTC1,Pt.ltc_2.value=xe.state.rectAreaLTC2,Pt.pointLights.value=xe.state.point,Pt.pointLightShadows.value=xe.state.pointShadow,Pt.hemisphereLights.value=xe.state.hemi,Pt.directionalShadowMap.value=xe.state.directionalShadowMap,Pt.directionalShadowMatrix.value=xe.state.directionalShadowMatrix,Pt.spotShadowMap.value=xe.state.spotShadowMap,Pt.spotLightMatrix.value=xe.state.spotLightMatrix,Pt.spotLightMap.value=xe.state.spotLightMap,Pt.pointShadowMap.value=xe.state.pointShadowMap,Pt.pointShadowMatrix.value=xe.state.pointShadowMatrix),Ie.currentProgram=Vt,Ie.uniformsList=null,Vt}function Lo(K){if(K.uniformsList===null){const ve=K.currentProgram.getUniforms();K.uniformsList=Iw.seqWithValue(ve.seq,K.uniforms)}return K.uniformsList}function Kl(K,ve){const ke=X.get(K);ke.outputColorSpace=ve.outputColorSpace,ke.batching=ve.batching,ke.batchingColor=ve.batchingColor,ke.instancing=ve.instancing,ke.instancingColor=ve.instancingColor,ke.instancingMorph=ve.instancingMorph,ke.skinning=ve.skinning,ke.morphTargets=ve.morphTargets,ke.morphNormals=ve.morphNormals,ke.morphColors=ve.morphColors,ke.morphTargetsCount=ve.morphTargetsCount,ke.numClippingPlanes=ve.numClippingPlanes,ke.numIntersection=ve.numClipIntersection,ke.vertexAlphas=ve.vertexAlphas,ke.vertexTangents=ve.vertexTangents,ke.toneMapping=ve.toneMapping}function ha(K,ve,ke,Ie,xe){ve.isScene!==!0&&(ve=Ke),pe.resetTextureUnits();const yt=ve.fog,Ct=Ie.isMeshStandardMaterial?ve.environment:null,ft=W===null?P.outputColorSpace:W.isXRRenderTarget===!0?W.texture.colorSpace:Wd,Ot=(Ie.isMeshStandardMaterial?Ye:Ue).get(Ie.envMap||Ct),kt=Ie.vertexColors===!0&&!!ke.attributes.color&&ke.attributes.color.itemSize===4,Vt=!!ke.attributes.tangent&&(!!Ie.normalMap||Ie.anisotropy>0),Pt=!!ke.morphAttributes.position,$t=!!ke.morphAttributes.normal,Rn=!!ke.morphAttributes.color;let ii=Vl;Ie.toneMapped&&(W===null||W.isXRRenderTarget===!0)&&(ii=P.toneMapping);const Kt=ke.morphAttributes.position||ke.morphAttributes.normal||ke.morphAttributes.color,on=Kt!==void 0?Kt.length:0,St=X.get(Ie),An=F.state.lights;if(et===!0&&(wt===!0||K!==ue)){const or=K===ue&&Ie.id===se;Se.setState(Ie,K,or)}let tn=!1;Ie.version===St.__version?(St.needsLights&&St.lightsStateVersion!==An.state.version||St.outputColorSpace!==ft||xe.isBatchedMesh&&St.batching===!1||!xe.isBatchedMesh&&St.batching===!0||xe.isBatchedMesh&&St.batchingColor===!0&&xe.colorTexture===null||xe.isBatchedMesh&&St.batchingColor===!1&&xe.colorTexture!==null||xe.isInstancedMesh&&St.instancing===!1||!xe.isInstancedMesh&&St.instancing===!0||xe.isSkinnedMesh&&St.skinning===!1||!xe.isSkinnedMesh&&St.skinning===!0||xe.isInstancedMesh&&St.instancingColor===!0&&xe.instanceColor===null||xe.isInstancedMesh&&St.instancingColor===!1&&xe.instanceColor!==null||xe.isInstancedMesh&&St.instancingMorph===!0&&xe.morphTexture===null||xe.isInstancedMesh&&St.instancingMorph===!1&&xe.morphTexture!==null||St.envMap!==Ot||Ie.fog===!0&&St.fog!==yt||St.numClippingPlanes!==void 0&&(St.numClippingPlanes!==Se.numPlanes||St.numIntersection!==Se.numIntersection)||St.vertexAlphas!==kt||St.vertexTangents!==Vt||St.morphTargets!==Pt||St.morphNormals!==$t||St.morphColors!==Rn||St.toneMapping!==ii||St.morphTargetsCount!==on)&&(tn=!0):(tn=!0,St.__version=Ie.version);let Fi=St.currentProgram;tn===!0&&(Fi=Pa(Ie,ve,xe));let Ps=!1,yi=!1,Kr=!1;const Zn=Fi.getUniforms(),Ci=St.uniforms;if(dt.useProgram(Fi.program)&&(Ps=!0,yi=!0,Kr=!0),Ie.id!==se&&(se=Ie.id,yi=!0),Ps||ue!==K){dt.buffers.depth.getReversed()&&K.reversedDepth!==!0&&(K._reversedDepth=!0,K.updateProjectionMatrix()),Zn.setValue(re,"projectionMatrix",K.projectionMatrix),Zn.setValue(re,"viewMatrix",K.matrixWorldInverse);const lr=Zn.map.cameraPosition;lr!==void 0&&lr.setValue(re,Tt.setFromMatrixPosition(K.matrixWorld)),Lt.logarithmicDepthBuffer&&Zn.setValue(re,"logDepthBufFC",2/(Math.log(K.far+1)/Math.LN2)),(Ie.isMeshPhongMaterial||Ie.isMeshToonMaterial||Ie.isMeshLambertMaterial||Ie.isMeshBasicMaterial||Ie.isMeshStandardMaterial||Ie.isShaderMaterial)&&Zn.setValue(re,"isOrthographic",K.isOrthographicCamera===!0),ue!==K&&(ue=K,yi=!0,Kr=!0)}if(St.needsLights&&(An.state.directionalShadowMap.length>0&&Zn.setValue(re,"directionalShadowMap",An.state.directionalShadowMap,pe),An.state.spotShadowMap.length>0&&Zn.setValue(re,"spotShadowMap",An.state.spotShadowMap,pe),An.state.pointShadowMap.length>0&&Zn.setValue(re,"pointShadowMap",An.state.pointShadowMap,pe)),xe.isSkinnedMesh){Zn.setOptional(re,xe,"bindMatrix"),Zn.setOptional(re,xe,"bindMatrixInverse");const or=xe.skeleton;or&&(or.boneTexture===null&&or.computeBoneTexture(),Zn.setValue(re,"boneTexture",or.boneTexture,pe))}xe.isBatchedMesh&&(Zn.setOptional(re,xe,"batchingTexture"),Zn.setValue(re,"batchingTexture",xe._matricesTexture,pe),Zn.setOptional(re,xe,"batchingIdTexture"),Zn.setValue(re,"batchingIdTexture",xe._indirectTexture,pe),Zn.setOptional(re,xe,"batchingColorTexture"),xe._colorsTexture!==null&&Zn.setValue(re,"batchingColorTexture",xe._colorsTexture,pe));const di=ke.morphAttributes;if((di.position!==void 0||di.normal!==void 0||di.color!==void 0)&&Ze.update(xe,ke,Fi),(yi||St.receiveShadow!==xe.receiveShadow)&&(St.receiveShadow=xe.receiveShadow,Zn.setValue(re,"receiveShadow",xe.receiveShadow)),Ie.isMeshGouraudMaterial&&Ie.envMap!==null&&(Ci.envMap.value=Ot,Ci.flipEnvMap.value=Ot.isCubeTexture&&Ot.isRenderTargetTexture===!1?-1:1),Ie.isMeshStandardMaterial&&Ie.envMap===null&&ve.environment!==null&&(Ci.envMapIntensity.value=ve.environmentIntensity),Ci.dfgLUT!==void 0&&(Ci.dfgLUT.value=hre()),yi&&(Zn.setValue(re,"toneMappingExposure",P.toneMappingExposure),St.needsLights&&no(Ci,Kr),yt&&Ie.fog===!0&&Ht.refreshFogUniforms(Ci,yt),Ht.refreshMaterialUniforms(Ci,Ie,Me,de,F.state.transmissionRenderTarget[K.id]),Iw.upload(re,Lo(St),Ci,pe)),Ie.isShaderMaterial&&Ie.uniformsNeedUpdate===!0&&(Iw.upload(re,Lo(St),Ci,pe),Ie.uniformsNeedUpdate=!1),Ie.isSpriteMaterial&&Zn.setValue(re,"center",xe.center),Zn.setValue(re,"modelViewMatrix",xe.modelViewMatrix),Zn.setValue(re,"normalMatrix",xe.normalMatrix),Zn.setValue(re,"modelMatrix",xe.matrixWorld),Ie.isShaderMaterial||Ie.isRawShaderMaterial){const or=Ie.uniformsGroups;for(let lr=0,sl=or.length;lr<sl;lr++){const Na=or[lr];rt.update(Na,Fi),rt.bind(Na,Fi)}}return Fi}function no(K,ve){K.ambientLightColor.needsUpdate=ve,K.lightProbe.needsUpdate=ve,K.directionalLights.needsUpdate=ve,K.directionalLightShadows.needsUpdate=ve,K.pointLights.needsUpdate=ve,K.pointLightShadows.needsUpdate=ve,K.spotLights.needsUpdate=ve,K.spotLightShadows.needsUpdate=ve,K.rectAreaLights.needsUpdate=ve,K.hemisphereLights.needsUpdate=ve}function Is(K){return K.isMeshLambertMaterial||K.isMeshToonMaterial||K.isMeshPhongMaterial||K.isMeshStandardMaterial||K.isShadowMaterial||K.isShaderMaterial&&K.lights===!0}this.getActiveCubeFace=function(){return j},this.getActiveMipmapLevel=function(){return q},this.getRenderTarget=function(){return W},this.setRenderTargetTextures=function(K,ve,ke){const Ie=X.get(K);Ie.__autoAllocateDepthBuffer=K.resolveDepthBuffer===!1,Ie.__autoAllocateDepthBuffer===!1&&(Ie.__useRenderToTexture=!1),X.get(K.texture).__webglTexture=ve,X.get(K.depthTexture).__webglTexture=Ie.__autoAllocateDepthBuffer?void 0:ke,Ie.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(K,ve){const ke=X.get(K);ke.__webglFramebuffer=ve,ke.__useDefaultFramebuffer=ve===void 0};const Ra=re.createFramebuffer();this.setRenderTarget=function(K,ve=0,ke=0){W=K,j=ve,q=ke;let Ie=null,xe=!1,yt=!1;if(K){const ft=X.get(K);if(ft.__useDefaultFramebuffer!==void 0){dt.bindFramebuffer(re.FRAMEBUFFER,ft.__webglFramebuffer),J.copy(K.viewport),ae.copy(K.scissor),he=K.scissorTest,dt.viewport(J),dt.scissor(ae),dt.setScissorTest(he),se=-1;return}else if(ft.__webglFramebuffer===void 0)pe.setupRenderTarget(K);else if(ft.__hasExternalTextures)pe.rebindTextures(K,X.get(K.texture).__webglTexture,X.get(K.depthTexture).__webglTexture);else if(K.depthBuffer){const Vt=K.depthTexture;if(ft.__boundDepthTexture!==Vt){if(Vt!==null&&X.has(Vt)&&(K.width!==Vt.image.width||K.height!==Vt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");pe.setupDepthRenderbuffer(K)}}const Ot=K.texture;(Ot.isData3DTexture||Ot.isDataArrayTexture||Ot.isCompressedArrayTexture)&&(yt=!0);const kt=X.get(K).__webglFramebuffer;K.isWebGLCubeRenderTarget?(Array.isArray(kt[ve])?Ie=kt[ve][ke]:Ie=kt[ve],xe=!0):K.samples>0&&pe.useMultisampledRTT(K)===!1?Ie=X.get(K).__webglMultisampledFramebuffer:Array.isArray(kt)?Ie=kt[ke]:Ie=kt,J.copy(K.viewport),ae.copy(K.scissor),he=K.scissorTest}else J.copy(be).multiplyScalar(Me).floor(),ae.copy(Ae).multiplyScalar(Me).floor(),he=mt;if(ke!==0&&(Ie=Ra),dt.bindFramebuffer(re.FRAMEBUFFER,Ie)&&dt.drawBuffers(K,Ie),dt.viewport(J),dt.scissor(ae),dt.setScissorTest(he),xe){const ft=X.get(K.texture);re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ft.__webglTexture,ke)}else if(yt){const ft=ve;for(let Ot=0;Ot<K.textures.length;Ot++){const kt=X.get(K.textures[Ot]);re.framebufferTextureLayer(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0+Ot,kt.__webglTexture,ke,ft)}}else if(K!==null&&ke!==0){const ft=X.get(K.texture);re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_2D,ft.__webglTexture,ke)}se=-1},this.readRenderTargetPixels=function(K,ve,ke,Ie,xe,yt,Ct,ft=0){if(!(K&&K.isWebGLRenderTarget)){Yt("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ot=X.get(K).__webglFramebuffer;if(K.isWebGLCubeRenderTarget&&Ct!==void 0&&(Ot=Ot[Ct]),Ot){dt.bindFramebuffer(re.FRAMEBUFFER,Ot);try{const kt=K.textures[ft],Vt=kt.format,Pt=kt.type;if(!Lt.textureFormatReadable(Vt)){Yt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Lt.textureTypeReadable(Pt)){Yt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ve>=0&&ve<=K.width-Ie&&ke>=0&&ke<=K.height-xe&&(K.textures.length>1&&re.readBuffer(re.COLOR_ATTACHMENT0+ft),re.readPixels(ve,ke,Ie,xe,$e.convert(Vt),$e.convert(Pt),yt))}finally{const kt=W!==null?X.get(W).__webglFramebuffer:null;dt.bindFramebuffer(re.FRAMEBUFFER,kt)}}},this.readRenderTargetPixelsAsync=async function(K,ve,ke,Ie,xe,yt,Ct,ft=0){if(!(K&&K.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ot=X.get(K).__webglFramebuffer;if(K.isWebGLCubeRenderTarget&&Ct!==void 0&&(Ot=Ot[Ct]),Ot)if(ve>=0&&ve<=K.width-Ie&&ke>=0&&ke<=K.height-xe){dt.bindFramebuffer(re.FRAMEBUFFER,Ot);const kt=K.textures[ft],Vt=kt.format,Pt=kt.type;if(!Lt.textureFormatReadable(Vt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Lt.textureTypeReadable(Pt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const $t=re.createBuffer();re.bindBuffer(re.PIXEL_PACK_BUFFER,$t),re.bufferData(re.PIXEL_PACK_BUFFER,yt.byteLength,re.STREAM_READ),K.textures.length>1&&re.readBuffer(re.COLOR_ATTACHMENT0+ft),re.readPixels(ve,ke,Ie,xe,$e.convert(Vt),$e.convert(Pt),0);const Rn=W!==null?X.get(W).__webglFramebuffer:null;dt.bindFramebuffer(re.FRAMEBUFFER,Rn);const ii=re.fenceSync(re.SYNC_GPU_COMMANDS_COMPLETE,0);return re.flush(),await SK(re,ii,4),re.bindBuffer(re.PIXEL_PACK_BUFFER,$t),re.getBufferSubData(re.PIXEL_PACK_BUFFER,0,yt),re.deleteBuffer($t),re.deleteSync(ii),yt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(K,ve=null,ke=0){const Ie=Math.pow(2,-ke),xe=Math.floor(K.image.width*Ie),yt=Math.floor(K.image.height*Ie),Ct=ve!==null?ve.x:0,ft=ve!==null?ve.y:0;pe.setTexture2D(K,0),re.copyTexSubImage2D(re.TEXTURE_2D,ke,0,0,Ct,ft,xe,yt),dt.unbindTexture()};const da=re.createFramebuffer(),is=re.createFramebuffer();this.copyTextureToTexture=function(K,ve,ke=null,Ie=null,xe=0,yt=null){yt===null&&(xe!==0?(cy("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),yt=xe,xe=0):yt=0);let Ct,ft,Ot,kt,Vt,Pt,$t,Rn,ii;const Kt=K.isCompressedTexture?K.mipmaps[yt]:K.image;if(ke!==null)Ct=ke.max.x-ke.min.x,ft=ke.max.y-ke.min.y,Ot=ke.isBox3?ke.max.z-ke.min.z:1,kt=ke.min.x,Vt=ke.min.y,Pt=ke.isBox3?ke.min.z:0;else{const di=Math.pow(2,-xe);Ct=Math.floor(Kt.width*di),ft=Math.floor(Kt.height*di),K.isDataArrayTexture?Ot=Kt.depth:K.isData3DTexture?Ot=Math.floor(Kt.depth*di):Ot=1,kt=0,Vt=0,Pt=0}Ie!==null?($t=Ie.x,Rn=Ie.y,ii=Ie.z):($t=0,Rn=0,ii=0);const on=$e.convert(ve.format),St=$e.convert(ve.type);let An;ve.isData3DTexture?(pe.setTexture3D(ve,0),An=re.TEXTURE_3D):ve.isDataArrayTexture||ve.isCompressedArrayTexture?(pe.setTexture2DArray(ve,0),An=re.TEXTURE_2D_ARRAY):(pe.setTexture2D(ve,0),An=re.TEXTURE_2D),re.pixelStorei(re.UNPACK_FLIP_Y_WEBGL,ve.flipY),re.pixelStorei(re.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ve.premultiplyAlpha),re.pixelStorei(re.UNPACK_ALIGNMENT,ve.unpackAlignment);const tn=re.getParameter(re.UNPACK_ROW_LENGTH),Fi=re.getParameter(re.UNPACK_IMAGE_HEIGHT),Ps=re.getParameter(re.UNPACK_SKIP_PIXELS),yi=re.getParameter(re.UNPACK_SKIP_ROWS),Kr=re.getParameter(re.UNPACK_SKIP_IMAGES);re.pixelStorei(re.UNPACK_ROW_LENGTH,Kt.width),re.pixelStorei(re.UNPACK_IMAGE_HEIGHT,Kt.height),re.pixelStorei(re.UNPACK_SKIP_PIXELS,kt),re.pixelStorei(re.UNPACK_SKIP_ROWS,Vt),re.pixelStorei(re.UNPACK_SKIP_IMAGES,Pt);const Zn=K.isDataArrayTexture||K.isData3DTexture,Ci=ve.isDataArrayTexture||ve.isData3DTexture;if(K.isDepthTexture){const di=X.get(K),or=X.get(ve),lr=X.get(di.__renderTarget),sl=X.get(or.__renderTarget);dt.bindFramebuffer(re.READ_FRAMEBUFFER,lr.__webglFramebuffer),dt.bindFramebuffer(re.DRAW_FRAMEBUFFER,sl.__webglFramebuffer);for(let Na=0;Na<Ot;Na++)Zn&&(re.framebufferTextureLayer(re.READ_FRAMEBUFFER,re.COLOR_ATTACHMENT0,X.get(K).__webglTexture,xe,Pt+Na),re.framebufferTextureLayer(re.DRAW_FRAMEBUFFER,re.COLOR_ATTACHMENT0,X.get(ve).__webglTexture,yt,ii+Na)),re.blitFramebuffer(kt,Vt,Ct,ft,$t,Rn,Ct,ft,re.DEPTH_BUFFER_BIT,re.NEAREST);dt.bindFramebuffer(re.READ_FRAMEBUFFER,null),dt.bindFramebuffer(re.DRAW_FRAMEBUFFER,null)}else if(xe!==0||K.isRenderTargetTexture||X.has(K)){const di=X.get(K),or=X.get(ve);dt.bindFramebuffer(re.READ_FRAMEBUFFER,da),dt.bindFramebuffer(re.DRAW_FRAMEBUFFER,is);for(let lr=0;lr<Ot;lr++)Zn?re.framebufferTextureLayer(re.READ_FRAMEBUFFER,re.COLOR_ATTACHMENT0,di.__webglTexture,xe,Pt+lr):re.framebufferTexture2D(re.READ_FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_2D,di.__webglTexture,xe),Ci?re.framebufferTextureLayer(re.DRAW_FRAMEBUFFER,re.COLOR_ATTACHMENT0,or.__webglTexture,yt,ii+lr):re.framebufferTexture2D(re.DRAW_FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_2D,or.__webglTexture,yt),xe!==0?re.blitFramebuffer(kt,Vt,Ct,ft,$t,Rn,Ct,ft,re.COLOR_BUFFER_BIT,re.NEAREST):Ci?re.copyTexSubImage3D(An,yt,$t,Rn,ii+lr,kt,Vt,Ct,ft):re.copyTexSubImage2D(An,yt,$t,Rn,kt,Vt,Ct,ft);dt.bindFramebuffer(re.READ_FRAMEBUFFER,null),dt.bindFramebuffer(re.DRAW_FRAMEBUFFER,null)}else Ci?K.isDataTexture||K.isData3DTexture?re.texSubImage3D(An,yt,$t,Rn,ii,Ct,ft,Ot,on,St,Kt.data):ve.isCompressedArrayTexture?re.compressedTexSubImage3D(An,yt,$t,Rn,ii,Ct,ft,Ot,on,Kt.data):re.texSubImage3D(An,yt,$t,Rn,ii,Ct,ft,Ot,on,St,Kt):K.isDataTexture?re.texSubImage2D(re.TEXTURE_2D,yt,$t,Rn,Ct,ft,on,St,Kt.data):K.isCompressedTexture?re.compressedTexSubImage2D(re.TEXTURE_2D,yt,$t,Rn,Kt.width,Kt.height,on,Kt.data):re.texSubImage2D(re.TEXTURE_2D,yt,$t,Rn,Ct,ft,on,St,Kt);re.pixelStorei(re.UNPACK_ROW_LENGTH,tn),re.pixelStorei(re.UNPACK_IMAGE_HEIGHT,Fi),re.pixelStorei(re.UNPACK_SKIP_PIXELS,Ps),re.pixelStorei(re.UNPACK_SKIP_ROWS,yi),re.pixelStorei(re.UNPACK_SKIP_IMAGES,Kr),yt===0&&ve.generateMipmaps&&re.generateMipmap(An),dt.unbindTexture()},this.initRenderTarget=function(K){X.get(K).__webglFramebuffer===void 0&&pe.setupRenderTarget(K)},this.initTexture=function(K){K.isCubeTexture?pe.setTextureCube(K,0):K.isData3DTexture?pe.setTexture3D(K,0):K.isDataArrayTexture||K.isCompressedArrayTexture?pe.setTexture2DArray(K,0):pe.setTexture2D(K,0),dt.unbindTexture()},this.resetState=function(){j=0,q=0,W=null,dt.reset(),at.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Zo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=qn._getDrawingBufferColorSpace(e),t.unpackColorSpace=qn._getUnpackColorSpace()}}const dre=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:oA,AddEquation:wd,AddOperation:I6,AdditiveAnimationBlendMode:kO,AdditiveBlending:PR,AgXToneMapping:MO,AlphaFormat:DO,AlwaysCompare:V6,AlwaysDepth:Qw,AlwaysStencilFunc:DR,AmbientLight:Lj,AnimationAction:Hj,AnimationClip:Nb,AnimationLoader:fQ,AnimationMixer:BQ,AnimationObjectGroup:zQ,AnimationUtils:oQ,ArcCurve:lj,ArrayCamera:Bj,ArrowHelper:fJ,AttachedBindMode:OR,Audio:Vj,AudioAnalyser:CQ,AudioContext:uD,AudioListener:TQ,AudioLoader:SQ,AxesHelper:hJ,BackSide:Ks,BasicDepthPacking:D6,BasicShadowMap:u6,BatchedMesh:nj,Bone:GO,BooleanKeyframeTrack:og,Box2:YQ,Box3:Za,Box3Helper:uJ,BoxGeometry:sg,BoxHelper:lJ,BufferAttribute:hi,BufferGeometry:gn,BufferGeometryLoader:Fj,ByteType:PO,Cache:Rc,Camera:bA,CameraHelper:oJ,CanvasTexture:PZ,CapsuleGeometry:MA,CatmullRomCurve3:uj,CineonToneMapping:TO,CircleGeometry:CA,ClampToEdgeWrapping:Po,Clock:cD,Color:Dt,ColorKeyframeTrack:aD,ColorManagement:qn,CompressedArrayTexture:CZ,CompressedCubeTexture:IZ,CompressedTexture:AA,CompressedTextureLoader:hQ,ConeGeometry:hx,ConstantAlphaFactor:A6,ConstantColorFactor:E6,Controls:pJ,CubeCamera:K6,CubeDepthTexture:sj,CubeReflectionMapping:Bc,CubeRefractionMapping:Gd,CubeTexture:cx,CubeTextureLoader:dQ,CubeUVReflectionMapping:Dy,CubicBezierCurve:XO,CubicBezierCurve3:cj,CubicInterpolant:Mj,CullFaceBack:IR,CullFaceFront:l6,CullFaceFrontBack:NY,CullFaceNone:o6,Curve:Uu,CurvePath:hj,CustomBlending:c6,CustomToneMapping:AO,CylinderGeometry:fx,Cylindrical:XQ,Data3DTexture:_A,DataArrayTexture:yA,DataTexture:Iu,DataTextureLoader:pQ,DataUtils:JK,DecrementStencilOp:KY,DecrementWrapStencilOp:QY,DefaultLoadingManager:Pj,DepthFormat:jc,DepthStencilFormat:Pd,DepthTexture:my,DetachedBindMode:P6,DirectionalLight:Dj,DirectionalLightHelper:sJ,DiscreteInterpolant:Cj,DodecahedronGeometry:IA,DoubleSide:Mc,DstAlphaFactor:_6,DstColorFactor:x6,DynamicCopyUsage:dK,DynamicDrawUsage:oK,DynamicReadUsage:cK,EdgesGeometry:oj,EllipseCurve:PA,EqualCompare:z6,EqualDepth:eE,EqualStencilFunc:nK,EquirectangularReflectionMapping:vb,EquirectangularRefractionMapping:yb,Euler:il,EventDispatcher:Qc,ExternalTexture:qO,ExtrudeGeometry:RA,FileLoader:Hc,Float16BufferAttribute:sZ,Float32BufferAttribute:zt,FloatType:$s,Fog:SA,FogExp2:xA,FramebufferTexture:MZ,FrontSide:eh,Frustum:Ly,FrustumArray:TA,GLBufferAttribute:WQ,GLSL1:mK,GLSL3:LR,GreaterCompare:F6,GreaterDepth:nE,GreaterEqualCompare:vA,GreaterEqualDepth:tE,GreaterEqualStencilFunc:sK,GreaterStencilFunc:rK,GridHelper:rJ,Group:qv,HalfFloatType:Vc,HemisphereLight:Rj,HemisphereLightHelper:iJ,IcosahedronGeometry:NA,ImageBitmapLoader:xQ,ImageLoader:Ob,ImageUtils:q6,IncrementStencilOp:YY,IncrementWrapStencilOp:ZY,InstancedBufferAttribute:py,InstancedBufferGeometry:zj,InstancedInterleavedBuffer:GQ,InstancedMesh:tj,Int16BufferAttribute:rZ,Int32BufferAttribute:aZ,Int8BufferAttribute:tZ,IntType:uA,InterleavedBuffer:wA,InterleavedBufferAttribute:Vm,Interpolant:mx,InterpolateDiscrete:xb,InterpolateLinear:kE,InterpolateSmooth:Mw,InterpolationSamplingMode:yK,InterpolationSamplingType:vK,InvertStencilOp:JY,KeepStencilOp:fm,KeyframeTrack:$l,LOD:J6,LatheGeometry:OA,Layers:hy,LessCompare:U6,LessDepth:Jw,LessEqualCompare:gA,LessEqualDepth:Fm,LessEqualStencilFunc:iK,LessStencilFunc:tK,Light:ap,LightProbe:Uj,Line:$d,Line3:QQ,LineBasicMaterial:Qs,LineCurve:YO,LineCurve3:fj,LineDashedMaterial:Tj,LineLoop:ij,LineSegments:Jc,LinearFilter:Ki,LinearInterpolant:rD,LinearMipMapLinearFilter:kY,LinearMipMapNearestFilter:LY,LinearMipmapLinearFilter:Pc,LinearMipmapNearestFilter:J_,LinearSRGBColorSpace:Wd,LinearToneMapping:wO,LinearTransfer:wb,Loader:Js,LoaderUtils:BR,LoadingManager:sD,LoopOnce:R6,LoopPingPong:O6,LoopRepeat:N6,MOUSE:um,Material:Cs,MaterialLoader:BA,MathUtils:W6,Matrix2:pD,Matrix3:Tn,Matrix4:pn,MaxEquation:p6,Mesh:$r,MeshBasicMaterial:ip,MeshDepthMaterial:tD,MeshDistanceMaterial:nD,MeshLambertMaterial:wj,MeshMatcapMaterial:Ej,MeshNormalMaterial:Sj,MeshPhongMaterial:bj,MeshPhysicalMaterial:_j,MeshStandardMaterial:eD,MeshToonMaterial:xj,MinEquation:d6,MirroredRepeatWrapping:bb,MixOperation:C6,MultiplyBlending:NR,MultiplyOperation:lx,NearestFilter:Dr,NearestMipMapLinearFilter:DY,NearestMipMapNearestFilter:OY,NearestMipmapLinearFilter:Gv,NearestMipmapNearestFilter:IO,NeutralToneMapping:CO,NeverCompare:k6,NeverDepth:Zw,NeverStencilFunc:eK,NoBlending:Dc,NoColorSpace:jf,NoNormalPacking:GY,NoToneMapping:Vl,NormalAnimationBlendMode:mA,NormalBlending:Im,NormalGAPacking:qY,NormalRGPacking:WY,NotEqualCompare:B6,NotEqualDepth:iE,NotEqualStencilFunc:aK,NumberKeyframeTrack:Pb,Object3D:ni,ObjectLoader:_Q,ObjectSpaceNormalMap:L6,OctahedronGeometry:dx,OneFactor:g6,OneMinusConstantAlphaFactor:M6,OneMinusConstantColorFactor:T6,OneMinusDstAlphaFactor:b6,OneMinusDstColorFactor:S6,OneMinusSrcAlphaFactor:Kw,OneMinusSrcColorFactor:y6,OrthographicCamera:Zf,PCFShadowMap:Kv,PCFSoftShadowMap:Q_,PMREMGenerator:GR,Path:BE,PerspectiveCamera:Or,Plane:Bf,PlaneGeometry:ky,PlaneHelper:cJ,PointLight:Oj,PointLightHelper:tJ,Points:rj,PointsMaterial:WO,PolarGridHelper:aJ,PolyhedronGeometry:rp,PositionalAudio:MQ,PropertyBinding:ti,PropertyMixer:jj,QuadraticBezierCurve:KO,QuadraticBezierCurve3:ZO,Quaternion:Ts,QuaternionKeyframeTrack:gx,QuaternionLinearInterpolant:Ij,R11_EAC_Format:fE,RED_GREEN_RGTC2_Format:DE,RED_RGTC1_Format:NE,REVISION:sA,RG11_EAC_Format:dE,RGBADepthPacking:VY,RGBAFormat:Es,RGBAIntegerFormat:pA,RGBA_ASTC_10x10_Format:AE,RGBA_ASTC_10x5_Format:wE,RGBA_ASTC_10x6_Format:EE,RGBA_ASTC_10x8_Format:TE,RGBA_ASTC_12x10_Format:ME,RGBA_ASTC_12x12_Format:CE,RGBA_ASTC_4x4_Format:mE,RGBA_ASTC_5x4_Format:gE,RGBA_ASTC_5x5_Format:vE,RGBA_ASTC_6x5_Format:yE,RGBA_ASTC_6x6_Format:_E,RGBA_ASTC_8x5_Format:bE,RGBA_ASTC_8x6_Format:xE,RGBA_ASTC_8x8_Format:SE,RGBA_BPTC_Format:IE,RGBA_ETC2_EAC_Format:cE,RGBA_PVRTC_2BPPV1_Format:oE,RGBA_PVRTC_4BPPV1_Format:sE,RGBA_S3TC_DXT1_Format:tb,RGBA_S3TC_DXT3_Format:nb,RGBA_S3TC_DXT5_Format:ib,RGBDepthPacking:jY,RGBFormat:LO,RGBIntegerFormat:UY,RGB_BPTC_SIGNED_Format:PE,RGB_BPTC_UNSIGNED_Format:RE,RGB_ETC1_Format:lE,RGB_ETC2_Format:uE,RGB_PVRTC_2BPPV1_Format:aE,RGB_PVRTC_4BPPV1_Format:rE,RGB_S3TC_DXT1_Format:eb,RGDepthPacking:HY,RGFormat:Bm,RGIntegerFormat:dA,RawShaderMaterial:JO,Ray:ag,Raycaster:Gj,RectAreaLight:kj,RedFormat:hA,RedIntegerFormat:ux,ReinhardToneMapping:EO,RenderTarget:zO,RenderTarget3D:VQ,RepeatWrapping:_b,ReplaceStencilOp:XY,ReverseSubtractEquation:h6,RingGeometry:DA,SIGNED_R11_EAC_Format:hE,SIGNED_RED_GREEN_RGTC2_Format:LE,SIGNED_RED_RGTC1_Format:OE,SIGNED_RG11_EAC_Format:pE,SRGBColorSpace:Xa,SRGBTransfer:gi,Scene:jO,ShaderChunk:On,ShaderLib:Su,ShaderMaterial:Hl,ShadowMaterial:yj,Shape:Rm,ShapeGeometry:LA,ShapePath:dJ,ShapeUtils:Mu,ShortType:RO,Skeleton:EA,SkeletonHelper:eJ,SkinnedMesh:ej,Source:Rd,Sphere:Ea,SphereGeometry:px,Spherical:jR,SphericalHarmonics3:lD,SplineCurve:QO,SpotLight:Nj,SpotLightHelper:JQ,Sprite:Q6,SpriteMaterial:HO,SrcAlphaFactor:Yw,SrcAlphaSaturateFactor:w6,SrcColorFactor:v6,StaticCopyUsage:hK,StaticDrawUsage:Eb,StaticReadUsage:uK,StereoCamera:wQ,StreamCopyUsage:pK,StreamDrawUsage:lK,StreamReadUsage:fK,StringKeyframeTrack:lg,SubtractEquation:f6,SubtractiveBlending:RR,TOUCH:cm,TangentSpaceNormalMap:np,TetrahedronGeometry:kA,Texture:Er,TextureLoader:mQ,TextureUtils:_J,Timer:qQ,TimestampQuery:gK,TorusGeometry:UA,TorusKnotGeometry:zA,Triangle:Co,TriangleFanDrawMode:BY,TriangleStripDrawMode:FY,TrianglesDrawMode:zY,TubeGeometry:FA,UVMapping:lA,Uint16BufferAttribute:FO,Uint32BufferAttribute:BO,Uint8BufferAttribute:nZ,Uint8ClampedBufferAttribute:iZ,Uniform:dD,UniformsGroup:HQ,UniformsLib:Rt,UniformsUtils:Y6,UnsignedByteType:Ws,UnsignedInt101111Type:OO,UnsignedInt248Type:ly,UnsignedInt5999Type:NO,UnsignedIntType:jl,UnsignedShort4444Type:cA,UnsignedShort5551Type:fA,UnsignedShortType:oy,VSMShadowMap:ym,Vector2:tt,Vector3:ie,Vector4:Ri,VectorKeyframeTrack:Rb,VideoFrameTexture:AZ,VideoTexture:aj,WebGL3DRenderTarget:HK,WebGLArrayRenderTarget:jK,WebGLCoordinateSystem:Zo,WebGLCubeRenderTarget:VO,WebGLRenderTarget:tl,WebGLRenderer:Qj,WebGLUtils:Zj,WebGPUCoordinateSystem:uy,WebXRController:Cw,WireframeGeometry:vj,WrapAroundEnding:Sb,ZeroCurvatureEnding:_m,ZeroFactor:m6,ZeroSlopeEnding:bm,ZeroStencilOp:$Y,createCanvasElement:G6,error:Yt,getConsoleFunction:xK,log:Ab,setConsoleFunction:bK,warn:Mt,warnOnce:cy},Symbol.toStringTag,{value:"Module"}));var TI={exports:{}},AI={},MI={exports:{}},CI={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y4;function pre(){if(y4)return CI;y4=1;var n=Ny();function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,a=n.useLayoutEffect,s=n.useDebugValue;function l(g,v){var _=v(),x=i({inst:{value:_,getSnapshot:v}}),T=x[0].inst,S=x[1];return a(function(){T.value=_,T.getSnapshot=v,c(T)&&S({inst:T})},[g,_,v]),r(function(){return c(T)&&S({inst:T}),g(function(){c(T)&&S({inst:T})})},[g]),s(_),_}function c(g){var v=g.getSnapshot;g=g.value;try{var _=v();return!t(g,_)}catch{return!0}}function f(g,v){return v()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return CI.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,CI}var _4;function mre(){return _4||(_4=1,MI.exports=pre()),MI.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b4;function gre(){if(b4)return AI;b4=1;var n=Ny(),e=mre();function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var i=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,a=n.useRef,s=n.useEffect,l=n.useMemo,c=n.useDebugValue;return AI.useSyncExternalStoreWithSelector=function(f,p,g,v,_){var x=a(null);if(x.current===null){var T={hasValue:!1,value:null};x.current=T}else T=x.current;x=l(function(){function w(B){if(!I){if(I=!0,R=B,B=v(B),_!==void 0&&T.hasValue){var L=T.value;if(_(L,B))return O=L}return O=B}if(L=O,i(R,B))return L;var z=v(B);return _!==void 0&&_(L,z)?(R=B,L):(R=B,O=z)}var I=!1,R,O,F=g===void 0?null:g;return[function(){return w(p())},F===null?void 0:function(){return w(F())}]},[p,g,v,_]);var S=r(f,x[0],x[1]);return s(function(){T.hasValue=!0,T.value=S},[S]),c(S),S},AI}var x4;function vre(){return x4||(x4=1,TI.exports=gre()),TI.exports}var Jj=vre();const yre=ku(Jj),S4=n=>{let e;const t=new Set,i=(f,p)=>{const g=typeof f=="function"?f(e):f;if(!Object.is(g,e)){const v=e;e=p??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(_=>_(e,v))}},r=()=>e,l={setState:i,getState:r,getInitialState:()=>c,subscribe:f=>(t.add(f),()=>t.delete(f))},c=e=n(i,r,l);return l},_re=(n=>n?S4(n):S4),{useSyncExternalStoreWithSelector:bre}=yre,xre=n=>n;function Sre(n,e=xre,t){const i=bre(n.subscribe,n.getState,n.getInitialState,e,t);return ng.useDebugValue(i),i}const w4=(n,e)=>{const t=_re(n),i=(r,a=e)=>Sre(t,r,a);return Object.assign(i,t),i},wre=((n,e)=>n?w4(n,e):w4),Ere=n=>typeof n=="object"&&typeof n.then=="function",Sm=[];function e8(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function t8(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const a of Sm)if(e8(e,a.keys,a.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return i.lifespan&&i.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,i.lifespan)),a.response;if(!t)throw a.promise}const r={keys:e,equal:i.equal,remove:()=>{const a=Sm.indexOf(r);a!==-1&&Sm.splice(a,1)},promise:(Ere(n)?n:n(...e)).then(a=>{r.response=a,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(a=>r.error=a)};if(Sm.push(r),!t)throw r.promise}const Tre=(n,e,t)=>t8(n,e,!1,t),Are=(n,e,t)=>void t8(n,e,!0,t),Mre=n=>{if(n===void 0||n.length===0)Sm.splice(0,Sm.length);else{const e=Sm.find(t=>e8(n,t.keys,t.equal));e&&e.remove()}};var $R=q2();const Cre=ku($R);function mD(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=mD(i,e,t);if(r)return r;i=e?null:i.sibling}}function n8(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const gD=n8(H.createContext(null));class i8 extends H.Component{render(){return H.createElement(gD.Provider,{value:this._reactInternals},this.props.children)}}function r8(){const n=H.useContext(gD);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=H.useId();return H.useMemo(()=>{for(const t of[n,n==null?void 0:n.alternate]){if(!t)continue;const i=mD(t,!1,r=>{let a=r.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[n,e])}const Ire=Symbol.for("react.context"),Pre=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===Ire;function Rre(){const n=r8(),[e]=H.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;Pre(i)&&i!==gD&&!e.has(i)&&e.set(i,H.use(n8(i))),t=t.return}return e}function Nre(){const n=Rre();return H.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>H.createElement(e,null,H.createElement(t.Provider,{...i,value:n.get(t)})),e=>H.createElement(i8,{...e})),[n])}function a8(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const s8=n=>n&&n.isOrthographicCamera,Ore=n=>n&&n.hasOwnProperty("current"),Dre=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),vx=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?H.useLayoutEffect:H.useEffect;function o8(n){const e=H.useRef(n);return vx(()=>void(e.current=n),[n]),e}function Lre(){const n=r8(),e=Nre();return H.useMemo(()=>({children:t})=>{const r=!!mD(n,!0,a=>a.type===H.StrictMode)?H.StrictMode:H.Fragment;return k.jsx(r,{children:k.jsx(e,{children:t})})},[n,e])}function kre({set:n}){return vx(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const Ure=(n=>(n=class extends H.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function l8(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function Iv(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const ir={obj:n=>n===Object(n)&&!ir.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(ir.str(n)||ir.num(n)||ir.boo(n))return n===e;const a=ir.obj(n);if(a&&i==="reference")return n===e;const s=ir.arr(n);if(s&&t==="reference")return n===e;if((s||a)&&n===e)return!0;let l;for(l in n)if(!(l in e))return!1;if(a&&t==="shallow"&&i==="shallow"){for(l in r?e:n)if(!ir.equ(n[l],e[l],{strict:r,objects:"reference"}))return!1}else for(l in r?e:n)if(n[l]!==e[l])return!1;if(ir.und(l)){if(s&&n.length===0&&e.length===0||a&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function zre(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function Fre(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const u8=["children","key","ref"];function Bre(n){const e={};for(const t in n)u8.includes(t)||(e[t]=n[t]);return e}function VE(n,e,t,i){const r=n;let a=r==null?void 0:r.__r3f;return a||(a={root:e,type:t,parent:null,children:[],props:Bre(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=a)),a}function Db(n,e){if(!e.includes("-"))return{root:n,key:e,target:n[e]};if(e in n)return{root:n,key:e,target:n[e]};let t=n;const i=e.split("-");for(const r of i){if(typeof t!="object"||t===null){if(t!==void 0){const a=i.slice(i.indexOf(r)).join("-");return{root:t,key:a,target:void 0}}return{root:n,key:e,target:void 0}}e=r,n=t,t=t[e]}return{root:n,key:e,target:t}}const E4=/-\d+$/;function jE(n,e){if(ir.str(e.props.attach)){if(E4.test(e.props.attach)){const r=e.props.attach.replace(E4,""),{root:a,key:s}=Db(n.object,r);Array.isArray(a[s])||(a[s]=[])}const{root:t,key:i}=Db(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else ir.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function HE(n,e){if(ir.str(e.props.attach)){const{root:t,key:i}=Db(n.object,e.props.attach),r=e.previousAttach;r===void 0?delete t[i]:t[i]=r}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const XR=[...u8,"args","dispose","attach","object","onUpdate","dispose"],T4=new Map;function Vre(n){let e=T4.get(n.constructor);try{e||(e=new n.constructor,T4.set(n.constructor,e))}catch{}return e}function jre(n,e){const t={};for(const i in e)if(!XR.includes(i)&&!ir.equ(e[i],n.props[i])){t[i]=e[i];for(const r in e)r.startsWith(`${i}-`)&&(t[r]=e[r])}for(const i in n.props){if(XR.includes(i)||e.hasOwnProperty(i))continue;const{root:r,key:a}=Db(n.object,i);if(r.constructor&&r.constructor.length===0){const s=Vre(r);ir.und(s)||(t[a]=s[a])}else t[a]=0}return t}const Hre=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Gre=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Ed(n,e){var t;const i=n.__r3f,r=i&&a8(i).getState(),a=i==null?void 0:i.eventCount;for(const l in e){let c=e[l];if(XR.includes(l))continue;if(i&&Gre.test(l)){typeof c=="function"?i.handlers[l]=c:delete i.handlers[l],i.eventCount=Object.keys(i.handlers).length;continue}if(c===void 0)continue;let{root:f,key:p,target:g}=Db(n,l);if(g===void 0&&(typeof f!="object"||f===null))throw Error(`R3F: Cannot set "${l}". Ensure it is an object before setting "${p}".`);if(g instanceof hy&&c instanceof hy)g.mask=c.mask;else if(g instanceof Dt&&Dre(c))g.set(c);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof g.copy=="function"&&c!=null&&c.constructor&&g.constructor===c.constructor)g.copy(c);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&Array.isArray(c))typeof g.fromArray=="function"?g.fromArray(c):g.set(...c);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof c=="number")typeof g.setScalar=="function"?g.setScalar(c):g.set(c);else{var s;f[p]=c,r&&!r.linear&&Hre.includes(p)&&(s=f[p])!=null&&s.isTexture&&f[p].format===Es&&f[p].type===Ws&&(f[p].colorSpace=Xa)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(t=i.object)!=null&&t.isObject3D&&a!==i.eventCount){const l=i.object,c=r.internal.interaction.indexOf(l);c>-1&&r.internal.interaction.splice(c,1),i.eventCount&&l.raycast!==null&&r.internal.interaction.push(l)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&zy(i),n}function zy(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function Wre(n,e){n.manual||(s8(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const Gs=n=>n==null?void 0:n.isObject3D;function ew(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function c8(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function qre(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{c8(t.capturedMap,e,i,r)})}function $re(n){function e(c){const{internal:f}=n.getState(),p=c.offsetX-f.initialClick[0],g=c.offsetY-f.initialClick[1];return Math.round(Math.sqrt(p*p+g*g))}function t(c){return c.filter(f=>["Move","Over","Enter","Out","Leave"].some(p=>{var g;return(g=f.__r3f)==null?void 0:g.handlers["onPointer"+p]}))}function i(c,f){const p=n.getState(),g=new Set,v=[],_=f?f(p.internal.interaction):p.internal.interaction;for(let w=0;w<_.length;w++){const I=Iv(_[w]);I&&(I.raycaster.camera=void 0)}p.previousRoot||p.events.compute==null||p.events.compute(c,p);function x(w){const I=Iv(w);if(!I||!I.events.enabled||I.raycaster.camera===null)return[];if(I.raycaster.camera===void 0){var R;I.events.compute==null||I.events.compute(c,I,(R=I.previousRoot)==null?void 0:R.getState()),I.raycaster.camera===void 0&&(I.raycaster.camera=null)}return I.raycaster.camera?I.raycaster.intersectObject(w,!0):[]}let T=_.flatMap(x).sort((w,I)=>{const R=Iv(w.object),O=Iv(I.object);return!R||!O?w.distance-I.distance:O.events.priority-R.events.priority||w.distance-I.distance}).filter(w=>{const I=ew(w);return g.has(I)?!1:(g.add(I),!0)});p.events.filter&&(T=p.events.filter(T,p));for(const w of T){let I=w.object;for(;I;){var S;(S=I.__r3f)!=null&&S.eventCount&&v.push({...w,eventObject:I}),I=I.parent}}if("pointerId"in c&&p.internal.capturedMap.has(c.pointerId))for(let w of p.internal.capturedMap.get(c.pointerId).values())g.has(ew(w.intersection))||v.push(w.intersection);return v}function r(c,f,p,g){if(c.length){const v={stopped:!1};for(const _ of c){let x=Iv(_.object);if(x||_.object.traverseAncestors(T=>{const S=Iv(T);if(S)return x=S,!1}),x){const{raycaster:T,pointer:S,camera:w,internal:I}=x,R=new ie(S.x,S.y,0).unproject(w),O=P=>{var D,j;return(D=(j=I.capturedMap.get(P))==null?void 0:j.has(_.eventObject))!=null?D:!1},F=P=>{const D={intersection:_,target:f.target};I.capturedMap.has(P)?I.capturedMap.get(P).set(_.eventObject,D):I.capturedMap.set(P,new Map([[_.eventObject,D]])),f.target.setPointerCapture(P)},B=P=>{const D=I.capturedMap.get(P);D&&c8(I.capturedMap,_.eventObject,D,P)};let L={};for(let P in f){let D=f[P];typeof D!="function"&&(L[P]=D)}let z={..._,...L,pointer:S,intersections:c,stopped:v.stopped,delta:p,unprojectedPoint:R,ray:T.ray,camera:w,stopPropagation(){const P="pointerId"in f&&I.capturedMap.get(f.pointerId);if((!P||P.has(_.eventObject))&&(z.stopped=v.stopped=!0,I.hovered.size&&Array.from(I.hovered.values()).find(D=>D.eventObject===_.eventObject))){const D=c.slice(0,c.indexOf(_));a([...D,_])}},target:{hasPointerCapture:O,setPointerCapture:F,releasePointerCapture:B},currentTarget:{hasPointerCapture:O,setPointerCapture:F,releasePointerCapture:B},nativeEvent:f};if(g(z),v.stopped===!0)break}}}return c}function a(c){const{internal:f}=n.getState();for(const p of f.hovered.values())if(!c.length||!c.find(g=>g.object===p.object&&g.index===p.index&&g.instanceId===p.instanceId)){const v=p.eventObject.__r3f;if(f.hovered.delete(ew(p)),v!=null&&v.eventCount){const _=v.handlers,x={...p,intersections:c};_.onPointerOut==null||_.onPointerOut(x),_.onPointerLeave==null||_.onPointerLeave(x)}}}function s(c,f){for(let p=0;p<f.length;p++){const g=f[p].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(c)}}function l(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return f=>{const{internal:p}=n.getState();"pointerId"in f&&p.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{p.capturedMap.has(f.pointerId)&&(p.capturedMap.delete(f.pointerId),a([]))})}}return function(p){const{onPointerMissed:g,internal:v}=n.getState();v.lastEvent.current=p;const _=c==="onPointerMove",x=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",S=i(p,_?t:void 0),w=x?e(p):0;c==="onPointerDown"&&(v.initialClick=[p.offsetX,p.offsetY],v.initialHits=S.map(R=>R.eventObject)),x&&!S.length&&w<=2&&(s(p,v.interaction),g&&g(p)),_&&a(S);function I(R){const O=R.eventObject,F=O.__r3f;if(!(F!=null&&F.eventCount))return;const B=F.handlers;if(_){if(B.onPointerOver||B.onPointerEnter||B.onPointerOut||B.onPointerLeave){const L=ew(R),z=v.hovered.get(L);z?z.stopped&&R.stopPropagation():(v.hovered.set(L,R),B.onPointerOver==null||B.onPointerOver(R),B.onPointerEnter==null||B.onPointerEnter(R))}B.onPointerMove==null||B.onPointerMove(R)}else{const L=B[c];L?(!x||v.initialHits.includes(O))&&(s(p,v.interaction.filter(z=>!v.initialHits.includes(z))),L(R)):x&&v.initialHits.includes(O)&&s(p,v.interaction.filter(z=>!v.initialHits.includes(z)))}}r(S,p,w,I)}}return{handlePointer:l}}const A4=n=>!!(n!=null&&n.render),f8=H.createContext(null),Xre=(n,e)=>{const t=wre((l,c)=>{const f=new ie,p=new ie,g=new ie;function v(w=c().camera,I=p,R=c().size){const{width:O,height:F,top:B,left:L}=R,z=O/F;I.isVector3?g.copy(I):g.set(...I);const P=w.getWorldPosition(f).distanceTo(g);if(s8(w))return{width:O/w.zoom,height:F/w.zoom,top:B,left:L,factor:1,distance:P,aspect:z};{const D=w.fov*Math.PI/180,j=2*Math.tan(D/2)*P,q=j*(O/F);return{width:q,height:j,top:B,left:L,factor:O/q,distance:P,aspect:z}}}let _;const x=w=>l(I=>({performance:{...I.performance,current:w}})),T=new tt;return{set:l,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(w=1)=>n(c(),w),advance:(w,I)=>e(w,I,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new cD,pointer:T,mouse:T,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const w=c();_&&clearTimeout(_),w.performance.current!==w.performance.min&&x(w.performance.min),_=setTimeout(()=>x(c().performance.max),w.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:w=>l(I=>({...I,events:{...I.events,...w}})),setSize:(w,I,R=0,O=0)=>{const F=c().camera,B={width:w,height:I,top:R,left:O};l(L=>({size:B,viewport:{...L.viewport,...v(F,p,B)}}))},setDpr:w=>l(I=>{const R=l8(w);return{viewport:{...I.viewport,dpr:R,initialDpr:I.viewport.initialDpr||R}}}),setFrameloop:(w="always")=>{const I=c().clock;I.stop(),I.elapsedTime=0,w!=="never"&&(I.start(),I.elapsedTime=0),l(()=>({frameloop:w}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:H.createRef(),active:!1,frames:0,priority:0,subscribe:(w,I,R)=>{const O=c().internal;return O.priority=O.priority+(I>0?1:0),O.subscribers.push({ref:w,priority:I,store:R}),O.subscribers=O.subscribers.sort((F,B)=>F.priority-B.priority),()=>{const F=c().internal;F!=null&&F.subscribers&&(F.priority=F.priority-(I>0?1:0),F.subscribers=F.subscribers.filter(B=>B.ref!==w))}}}}}),i=t.getState();let r=i.size,a=i.viewport.dpr,s=i.camera;return t.subscribe(()=>{const{camera:l,size:c,viewport:f,gl:p,set:g}=t.getState();if(c.width!==r.width||c.height!==r.height||f.dpr!==a){r=c,a=f.dpr,Wre(l,c),f.dpr>0&&p.setPixelRatio(f.dpr);const v=typeof HTMLCanvasElement<"u"&&p.domElement instanceof HTMLCanvasElement;p.setSize(c.width,c.height,v)}l!==s&&(s=l,g(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>n(l)),t};function h8(){const n=H.useContext(f8);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function vd(n=t=>t,e){return h8()(n,e)}function vD(n,e=0){const t=h8(),i=t.getState().internal.subscribe,r=o8(n);return vx(()=>i(r,e,t),[e,i,t]),null}const M4=new WeakMap,Yre=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function d8(n,e){return function(t,...i){let r;return Yre(t)?(r=M4.get(t),r||(r=new t,M4.set(t,r))):r=t,n&&n(r),Promise.all(i.map(a=>new Promise((s,l)=>r.load(a,c=>{Gs(c==null?void 0:c.scene)&&Object.assign(c,zre(c.scene)),s(c)},e,c=>l(new Error(`Could not load ${a}: ${c==null?void 0:c.message}`))))))}}function yD(n,e,t,i){const r=Array.isArray(e)?e:[e],a=Tre(d8(t,i),[n,...r],{equal:ir.equ});return Array.isArray(e)?a:a[0]}yD.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return Are(d8(t),[n,...i])};yD.clear=function(n,e){const t=Array.isArray(e)?e:[e];return Mre([n,...t])};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */const Kre=1,Zre=8,Qre=32,Jre=2;var eae={version:"9.5.0"};function tae(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var C4={exports:{}},I4={exports:{}},P4;function nae(){return P4||(P4=1,(function(n){n.exports=function(e){function t(h,d,b,A){return new g0(h,d,b,A)}function i(){}function r(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)d+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(h){var d=h,b=h;if(h.alternate)for(;d.return;)d=d.return;else{h=d;do d=h,(d.flags&4098)!==0&&(b=d.return),h=d.return;while(h)}return d.tag===3?b:null}function s(h){if(a(h)!==h)throw Error(r(188))}function l(h){var d=h.alternate;if(!d){if(d=a(h),d===null)throw Error(r(188));return d!==h?null:h}for(var b=h,A=d;;){var N=b.return;if(N===null)break;var U=N.alternate;if(U===null){if(A=N.return,A!==null){b=A;continue}break}if(N.child===U.child){for(U=N.child;U;){if(U===b)return s(N),h;if(U===A)return s(N),d;U=U.sibling}throw Error(r(188))}if(b.return!==A.return)b=N,A=U;else{for(var Y=!1,fe=N.child;fe;){if(fe===b){Y=!0,b=N,A=U;break}if(fe===A){Y=!0,A=N,b=U;break}fe=fe.sibling}if(!Y){for(fe=U.child;fe;){if(fe===b){Y=!0,b=U,A=N;break}if(fe===A){Y=!0,A=U,b=N;break}fe=fe.sibling}if(!Y)throw Error(r(189))}}if(b.alternate!==A)throw Error(r(190))}if(b.tag!==3)throw Error(r(188));return b.stateNode.current===b?h:d}function c(h){var d=h.tag;if(d===5||d===26||d===27||d===6)return h;for(h=h.child;h!==null;){if(d=c(h),d!==null)return d;h=h.sibling}return null}function f(h){var d=h.tag;if(d===5||d===26||d===27||d===6)return h;for(h=h.child;h!==null;){if(h.tag!==4&&(d=f(h),d!==null))return d;h=h.sibling}return null}function p(h){return h===null||typeof h!="object"?null:(h=uu&&h[uu]||h["@@iterator"],typeof h=="function"?h:null)}function g(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===nc?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case gf:return"Fragment";case yf:return"Profiler";case vf:return"StrictMode";case Pg:return"Suspense";case lu:return"SuspenseList";case Cp:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case mf:return"Portal";case ho:return h.displayName||"Context";case Mp:return(h._context.displayName||"Context")+".Consumer";case Vh:var d=h.render;return h=h.displayName,h||(h=d.displayName||d.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case Rg:return d=h.displayName||null,d!==null?d:g(h.type)||"Memo";case Ua:d=h._payload,h=h._init;try{return g(h(d))}catch{}}return null}function v(h){return{current:h}}function _(h){0>wf||(h.current=Gg[wf],Gg[wf]=null,wf--)}function x(h,d){wf++,Gg[wf]=h.current,h.current=d}function T(h){return h>>>=0,h===0?32:31-(Wg(h)/HS|0)|0}function S(h){var d=h&42;if(d!==0)return d;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return h&261888;case 262144:case 524288:case 1048576:case 2097152:return h&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function w(h,d,b){var A=h.pendingLanes;if(A===0)return 0;var N=0,U=h.suspendedLanes,Y=h.pingedLanes;h=h.warmLanes;var fe=A&134217727;return fe!==0?(A=fe&~U,A!==0?N=S(A):(Y&=fe,Y!==0?N=S(Y):b||(b=fe&~h,b!==0&&(N=S(b))))):(fe=A&~U,fe!==0?N=S(fe):Y!==0?N=S(Y):b||(b=A&~h,b!==0&&(N=S(b)))),N===0?0:d!==0&&d!==N&&(d&U)===0&&(U=N&-N,b=d&-d,U>=b||U===32&&(b&4194048)!==0)?d:N}function I(h,d){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&d)===0}function R(h,d){switch(h){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function O(){var h=Xh;return Xh<<=1,(Xh&62914560)===0&&(Xh=4194304),h}function F(h){for(var d=[],b=0;31>b;b++)d.push(h);return d}function B(h,d){h.pendingLanes|=d,d!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function L(h,d,b,A,N,U){var Y=h.pendingLanes;h.pendingLanes=b,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=b,h.entangledLanes&=b,h.errorRecoveryDisabledLanes&=b,h.shellSuspendCounter=0;var fe=h.entanglements,Ve=h.expirationTimes,lt=h.hiddenUpdates;for(b=Y&~b;0<b;){var bt=31-cs(b),pt=1<<bt;fe[bt]=0,Ve[bt]=-1;var Nt=lt[bt];if(Nt!==null)for(lt[bt]=null,bt=0;bt<Nt.length;bt++){var yn=Nt[bt];yn!==null&&(yn.lane&=-536870913)}b&=~pt}A!==0&&z(h,A,0),U!==0&&N===0&&h.tag!==0&&(h.suspendedLanes|=U&~(Y&~d))}function z(h,d,b){h.pendingLanes|=d,h.suspendedLanes&=~d;var A=31-cs(d);h.entangledLanes|=d,h.entanglements[A]=h.entanglements[A]|1073741824|b&261930}function P(h,d){var b=h.entangledLanes|=d;for(h=h.entanglements;b;){var A=31-cs(b),N=1<<A;N&d|h[A]&d&&(h[A]|=d),b&=~N}}function D(h,d){var b=d&-d;return b=(b&42)!==0?1:j(b),(b&(h.suspendedLanes|d))!==0?0:b}function j(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function q(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function W(h){if(typeof t_=="function"&&qS(h),fs&&typeof fs.setStrictMode=="function")try{fs.setStrictMode(Tf,h)}catch{}}function se(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}function ue(h){if(Zg===void 0)try{throw Error()}catch(b){var d=b.stack.trim().match(/\n( *(at )?)/);Zg=d&&d[1]||"",Al=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zg+h+Al}function J(h,d){if(!h||Up)return"";Up=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var A={DetermineComponentFrameRoot:function(){try{if(d){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(yn){var Nt=yn}Reflect.construct(h,[],pt)}else{try{pt.call()}catch(yn){Nt=yn}h.call(pt.prototype)}}else{try{throw Error()}catch(yn){Nt=yn}(pt=h())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(yn){if(yn&&Nt&&typeof yn.stack=="string")return[yn.stack,Nt.stack]}return[null,null]}};A.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(A.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(A.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=A.DetermineComponentFrameRoot(),Y=U[0],fe=U[1];if(Y&&fe){var Ve=Y.split(`
`),lt=fe.split(`
`);for(N=A=0;A<Ve.length&&!Ve[A].includes("DetermineComponentFrameRoot");)A++;for(;N<lt.length&&!lt[N].includes("DetermineComponentFrameRoot");)N++;if(A===Ve.length||N===lt.length)for(A=Ve.length-1,N=lt.length-1;1<=A&&0<=N&&Ve[A]!==lt[N];)N--;for(;1<=A&&0<=N;A--,N--)if(Ve[A]!==lt[N]){if(A!==1||N!==1)do if(A--,N--,0>N||Ve[A]!==lt[N]){var bt=`
`+Ve[A].replace(" at new "," at ");return h.displayName&&bt.includes("<anonymous>")&&(bt=bt.replace("<anonymous>",h.displayName)),bt}while(1<=A&&0<=N);break}}}finally{Up=!1,Error.prepareStackTrace=b}return(b=h?h.displayName||h.name:"")?ue(b):""}function ae(h,d){switch(h.tag){case 26:case 27:case 5:return ue(h.type);case 16:return ue("Lazy");case 13:return h.child!==d&&d!==null?ue("Suspense Fallback"):ue("Suspense");case 19:return ue("SuspenseList");case 0:case 15:return J(h.type,!1);case 11:return J(h.type.render,!1);case 1:return J(h.type,!0);case 31:return ue("Activity");default:return""}}function he(h){try{var d="",b=null;do d+=ae(h,b),b=h,h=h.return;while(h);return d}catch(A){return`
Error generating stack: `+A.message+`
`+A.stack}}function Te(h,d){if(typeof h=="object"&&h!==null){var b=n_.get(h);return b!==void 0?b:(d={value:h,source:d,stack:he(d)},n_.set(h,d),d)}return{value:h,source:d,stack:he(d)}}function Re(h,d){hu[Ml++]=zp,hu[Ml++]=mi,mi=h,zp=d}function Q(h,d,b){go[Us++]=Zr,go[Us++]=Go,go[Us++]=vo,vo=h;var A=Zr;h=Go;var N=32-cs(A)-1;A&=~(1<<N),b+=1;var U=32-cs(d)+N;if(30<U){var Y=N-N%5;U=(A&(1<<Y)-1).toString(32),A>>=Y,N-=Y,Zr=1<<32-cs(d)+N|b<<N|A,Go=U+h}else Zr=1<<U|b<<N|A,Go=h}function de(h){h.return!==null&&(Re(h,1),Q(h,1,0))}function Me(h){for(;h===mi;)mi=hu[--Ml],hu[Ml]=null,zp=hu[--Ml],hu[Ml]=null;for(;h===vo;)vo=go[--Us],go[Us]=null,Go=go[--Us],go[Us]=null,Zr=go[--Us],go[Us]=null}function We(h,d){go[Us++]=Zr,go[Us++]=Go,go[Us++]=vo,Zr=d.id,Go=d.overflow,vo=h}function vt(h,d){x(Qr,d),x(du,h),x(Fr,null),h=aS(d),_(Fr),x(Fr,h)}function be(){_(Fr),_(du),_(Qr)}function Ae(h){h.memoizedState!==null&&x(Fp,h);var d=Fr.current,b=Gh(d,h.type);d!==b&&(x(du,h),x(Fr,b))}function mt(h){du.current===h&&(_(Fr),_(du)),Fp.current===h&&(_(Fp),ur?xf._currentValue=bf:xf._currentValue2=bf)}function ye(h){var d=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ke(Te(d,h)),Qg}function et(h,d){if(!Li)throw Error(r(175));RS(h.stateNode,h.type,h.memoizedProps,d,h)||ye(h,!0)}function wt(h){for(Cr=h.return;Cr;)switch(Cr.tag){case 5:case 31:case 13:Fa=!1;return;case 27:case 3:Fa=!0;return;default:Cr=Cr.return}}function ze(h){if(!Li||h!==Cr)return!1;if(!Un)return wt(h),Un=!0,!1;var d=h.tag;if(Mr?d!==3&&d!==27&&(d!==5||$h(h.type)&&!za(h.type,h.memoizedProps))&&ki&&ye(h):d!==3&&(d!==5||$h(h.type)&&!za(h.type,h.memoizedProps))&&ki&&ye(h),wt(h),d===13){if(!Li)throw Error(r(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));ki=G0(h)}else if(d===31){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));ki=OS(h)}else ki=Mr&&d===27?wS(h.type,ki):Cr?SS(h.stateNode):null;return!0}function Tt(){Li&&(ki=Cr=null,Un=!1)}function Oe(){var h=Cl;return h!==null&&(ps===null?ps=h:ps.push.apply(ps,h),Cl=null),h}function Ke(h){Cl===null?Cl=[h]:Cl.push(h)}function He(h,d,b){ur?(x(yo,d._currentValue),d._currentValue=b):(x(yo,d._currentValue2),d._currentValue2=b)}function ut(h){var d=yo.current;ur?h._currentValue=d:h._currentValue2=d,_(yo)}function re(h,d,b){for(;h!==null;){var A=h.alternate;if((h.childLanes&d)!==d?(h.childLanes|=d,A!==null&&(A.childLanes|=d)):A!==null&&(A.childLanes&d)!==d&&(A.childLanes|=d),h===b)break;h=h.return}}function Et(h,d,b,A){var N=h.child;for(N!==null&&(N.return=h);N!==null;){var U=N.dependencies;if(U!==null){var Y=N.child;U=U.firstContext;e:for(;U!==null;){var fe=U;U=N;for(var Ve=0;Ve<d.length;Ve++)if(fe.context===d[Ve]){U.lanes|=b,fe=U.alternate,fe!==null&&(fe.lanes|=b),re(U.return,b,h),A||(Y=null);break e}U=fe.next}}else if(N.tag===18){if(Y=N.return,Y===null)throw Error(r(341));Y.lanes|=b,U=Y.alternate,U!==null&&(U.lanes|=b),re(Y,b,h),Y=null}else Y=N.child;if(Y!==null)Y.return=N;else for(Y=N;Y!==null;){if(Y===h){Y=null;break}if(N=Y.sibling,N!==null){N.return=Y.return,Y=N;break}Y=Y.return}N=Y}}function ht(h,d,b,A){h=null;for(var N=d,U=!1;N!==null;){if(!U){if((N.flags&524288)!==0)U=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var Y=N.alternate;if(Y===null)throw Error(r(387));if(Y=Y.memoizedProps,Y!==null){var fe=N.type;fr(N.pendingProps.value,Y.value)||(h!==null?h.push(fe):h=[fe])}}else if(N===Fp.current){if(Y=N.alternate,Y===null)throw Error(r(387));Y.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(h!==null?h.push(xf):h=[xf])}N=N.return}h!==null&&Et(d,h,b,A),d.flags|=262144}function Lt(h){for(h=h.firstContext;h!==null;){var d=h.context;if(!fr(ur?d._currentValue:d._currentValue2,h.memoizedValue))return!0;h=h.next}return!1}function dt(h){Ei=h,Wo=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function ee(h){return pe(Ei,h)}function X(h,d){return Ei===null&&dt(h),pe(h,d)}function pe(h,d){var b=ur?d._currentValue:d._currentValue2;if(d={context:d,memoizedValue:b,next:null},Wo===null){if(h===null)throw Error(r(308));Wo=d,h.dependencies={lanes:0,firstContext:d},h.flags|=524288}else Wo=Wo.next=d;return b}function Ue(){return{controller:new $S,data:new Map,refCount:0}}function Ye(h){h.refCount--,h.refCount===0&&Br(aC,function(){h.controller.abort()})}function Le(){}function At(h){h!==ui&&h.next===null&&(ui===null?Bp=ui=h:ui=ui.next=h),_o=!0,va||(va=!0,ne())}function gt(h,d){if(!Jg&&_o){Jg=!0;do for(var b=!1,A=Bp;A!==null;){if(h!==0){var N=A.pendingLanes;if(N===0)var U=0;else{var Y=A.suspendedLanes,fe=A.pingedLanes;U=(1<<31-cs(42|h)+1)-1,U&=N&~(Y&~fe),U=U&201326741?U&201326741|1:U?U|2:0}U!==0&&(b=!0,Se(A,U))}else U=zn,U=w(A,A===In?U:0,A.cancelPendingCommit!==null||A.timeoutHandle!==us),(U&3)===0||I(A,U)||(b=!0,Se(A,U));A=A.next}while(b);Jg=!1}}function It(){Ht()}function Ht(){_o=va=!1;var h=0;oc!==0&&_f()&&(h=oc);for(var d=ga(),b=null,A=Bp;A!==null;){var N=A.next,U=nt(A,d);U===0?(A.next=null,b===null?Bp=N:b.next=N,N===null&&(ui=b)):(b=A,(h!==0||(U&3)!==0)&&(_o=!0)),A=N}br!==0&&br!==5||gt(h),oc!==0&&(oc=0)}function nt(h,d){for(var b=h.suspendedLanes,A=h.pingedLanes,N=h.expirationTimes,U=h.pendingLanes&-62914561;0<U;){var Y=31-cs(U),fe=1<<Y,Ve=N[Y];Ve===-1?((fe&b)===0||(fe&A)!==0)&&(N[Y]=R(fe,d)):Ve<=d&&(h.expiredLanes|=fe),U&=~fe}if(d=In,b=zn,b=w(h,h===d?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==us),A=h.callbackNode,b===0||h===d&&(fi===2||fi===9)||h.cancelPendingCommit!==null)return A!==null&&A!==null&&$g(A),h.callbackNode=null,h.callbackPriority=0;if((b&3)===0||I(h,b)){if(d=b&-b,d===h.callbackPriority)return d;switch(A!==null&&$g(A),q(b)){case 2:case 8:b=WS;break;case 32:b=kp;break;case 268435456:b=Yg;break;default:b=kp}return A=le.bind(null,h),b=Lp(b,A),h.callbackPriority=d,h.callbackNode=b,d}return A!==null&&A!==null&&$g(A),h.callbackPriority=2,h.callbackNode=null,2}function le(h,d){if(br!==0&&br!==5)return h.callbackNode=null,h.callbackPriority=0,null;var b=h.callbackNode;if(wl()&&h.callbackNode!==b)return null;var A=zn;return A=w(h,h===In?A:0,h.cancelPendingCommit!==null||h.timeoutHandle!==us),A===0?null:(Ho(h,A,d),nt(h,ga()),h.callbackNode!=null&&h.callbackNode===b?le.bind(null,h):null)}function Se(h,d){if(wl())return null;Ho(h,d,!0)}function ne(){C0?I0(function(){(Dn&6)!==0?Lp(Xg,It):Ht()}):Lp(Xg,It)}function ge(){if(oc===0){var h=pu;h===0&&(h=qg,qg<<=1,(qg&261888)===0&&(qg=256)),oc=h}return oc}function Ze(h,d){if(Yh===null){var b=Yh=[];i_=0,pu=ge(),Ir={status:"pending",value:void 0,then:function(A){b.push(A)}}}return i_++,d.then(oe,oe),d}function oe(){if(--i_===0&&Yh!==null){Ir!==null&&(Ir.status="fulfilled");var h=Yh;Yh=null,pu=0,Ir=null;for(var d=0;d<h.length;d++)(0,h[d])()}}function Qe(h,d){var b=[],A={status:"pending",value:null,reason:null,then:function(N){b.push(N)}};return h.then(function(){A.status="fulfilled",A.value=d;for(var N=0;N<b.length;N++)(0,b[N])(d)},function(N){for(A.status="rejected",A.reason=N,N=0;N<b.length;N++)(0,b[N])(void 0)}),A}function $e(){var h=lc.current;return h!==null?h:In.pooledCache}function at(h,d){d===null?x(lc,lc.current):x(lc,d.pool)}function rt(){var h=$e();return h===null?null:{parent:ur?Ui._currentValue:Ui._currentValue2,pool:h}}function qe(h,d){if(fr(h,d))return!0;if(typeof h!="object"||h===null||typeof d!="object"||d===null)return!1;var b=Object.keys(h),A=Object.keys(d);if(b.length!==A.length)return!1;for(A=0;A<b.length;A++){var N=b[A];if(!rC.call(d,N)||!fr(h[N],d[N]))return!1}return!0}function ot(h){return h=h.status,h==="fulfilled"||h==="rejected"}function Ft(h,d,b){switch(b=h[b],b===void 0?h.push(d):b!==d&&(d.then(Le,Le),d=b),d.status){case"fulfilled":return d.value;case"rejected":throw h=d.reason,oi(h),h;default:if(typeof d.status=="string")d.then(Le,Le);else{if(h=In,h!==null&&100<h.shellSuspendCounter)throw Error(r(482));h=d,h.status="pending",h.then(function(A){if(d.status==="pending"){var N=d;N.status="fulfilled",N.value=A}},function(A){if(d.status==="pending"){var N=d;N.status="rejected",N.reason=A}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw h=d.reason,oi(h),h}throw Ba=d,Pr}}function un(h){try{var d=h._init;return d(h._payload)}catch(b){throw b!==null&&typeof b=="object"&&typeof b.then=="function"?(Ba=b,Pr):b}}function en(){if(Ba===null)throw Error(r(459));var h=Ba;return Ba=null,h}function oi(h){if(h===Pr||h===xo)throw Error(r(483))}function Oi(h){var d=Af;return Af+=1,uc===null&&(uc=[]),Ft(uc,h,d)}function Xr(h,d){d=d.props.ref,h.ref=d!==void 0?d:null}function ua(h,d){throw d.$$typeof===pf?Error(r(525)):(h=Object.prototype.toString.call(d),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":h)))}function ns(h){function d(Ne,Ee){if(h){var Be=Ne.deletions;Be===null?(Ne.deletions=[Ee],Ne.flags|=16):Be.push(Ee)}}function b(Ne,Ee){if(!h)return null;for(;Ee!==null;)d(Ne,Ee),Ee=Ee.sibling;return null}function A(Ne){for(var Ee=new Map;Ne!==null;)Ne.key!==null?Ee.set(Ne.key,Ne):Ee.set(Ne.index,Ne),Ne=Ne.sibling;return Ee}function N(Ne,Ee){return Ne=Ls(Ne,Ee),Ne.index=0,Ne.sibling=null,Ne}function U(Ne,Ee,Be){return Ne.index=Be,h?(Be=Ne.alternate,Be!==null?(Be=Be.index,Be<Ee?(Ne.flags|=67108866,Ee):Be):(Ne.flags|=67108866,Ee)):(Ne.flags|=1048576,Ee)}function Y(Ne){return h&&Ne.alternate===null&&(Ne.flags|=67108866),Ne}function fe(Ne,Ee,Be,_t){return Ee===null||Ee.tag!==6?(Ee=v0(Be,Ne.mode,_t),Ee.return=Ne,Ee):(Ee=N(Ee,Be),Ee.return=Ne,Ee)}function Ve(Ne,Ee,Be,_t){var Jt=Be.type;return Jt===gf?bt(Ne,Ee,Be.props.children,_t,Be.key):Ee!==null&&(Ee.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===Ua&&un(Jt)===Ee.type)?(Ee=N(Ee,Be.props),Xr(Ee,Be),Ee.return=Ne,Ee):(Ee=ou(Be.type,Be.key,Be.props,null,Ne.mode,_t),Xr(Ee,Be),Ee.return=Ne,Ee)}function lt(Ne,Ee,Be,_t){return Ee===null||Ee.tag!==4||Ee.stateNode.containerInfo!==Be.containerInfo||Ee.stateNode.implementation!==Be.implementation?(Ee=_0(Be,Ne.mode,_t),Ee.return=Ne,Ee):(Ee=N(Ee,Be.children||[]),Ee.return=Ne,Ee)}function bt(Ne,Ee,Be,_t,Jt){return Ee===null||Ee.tag!==7?(Ee=fo(Be,Ne.mode,_t,Jt),Ee.return=Ne,Ee):(Ee=N(Ee,Be),Ee.return=Ne,Ee)}function pt(Ne,Ee,Be){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return Ee=v0(""+Ee,Ne.mode,Be),Ee.return=Ne,Ee;if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case El:return Be=ou(Ee.type,Ee.key,Ee.props,null,Ne.mode,Be),Xr(Be,Ee),Be.return=Ne,Be;case mf:return Ee=_0(Ee,Ne.mode,Be),Ee.return=Ne,Ee;case Ua:return Ee=un(Ee),pt(Ne,Ee,Be)}if(ic(Ee)||p(Ee))return Ee=fo(Ee,Ne.mode,Be,null),Ee.return=Ne,Ee;if(typeof Ee.then=="function")return pt(Ne,Oi(Ee),Be);if(Ee.$$typeof===ho)return pt(Ne,X(Ne,Ee),Be);ua(Ne,Ee)}return null}function Nt(Ne,Ee,Be,_t){var Jt=Ee!==null?Ee.key:null;if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return Jt!==null?null:fe(Ne,Ee,""+Be,_t);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case El:return Be.key===Jt?Ve(Ne,Ee,Be,_t):null;case mf:return Be.key===Jt?lt(Ne,Ee,Be,_t):null;case Ua:return Be=un(Be),Nt(Ne,Ee,Be,_t)}if(ic(Be)||p(Be))return Jt!==null?null:bt(Ne,Ee,Be,_t,null);if(typeof Be.then=="function")return Nt(Ne,Ee,Oi(Be),_t);if(Be.$$typeof===ho)return Nt(Ne,Ee,X(Ne,Be),_t);ua(Ne,Be)}return null}function yn(Ne,Ee,Be,_t,Jt){if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return Ne=Ne.get(Be)||null,fe(Ee,Ne,""+_t,Jt);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case El:return Ne=Ne.get(_t.key===null?Be:_t.key)||null,Ve(Ee,Ne,_t,Jt);case mf:return Ne=Ne.get(_t.key===null?Be:_t.key)||null,lt(Ee,Ne,_t,Jt);case Ua:return _t=un(_t),yn(Ne,Ee,Be,_t,Jt)}if(ic(_t)||p(_t))return Ne=Ne.get(Be)||null,bt(Ee,Ne,_t,Jt,null);if(typeof _t.then=="function")return yn(Ne,Ee,Be,Oi(_t),Jt);if(_t.$$typeof===ho)return yn(Ne,Ee,Be,X(Ee,_t),Jt);ua(Ee,_t)}return null}function pr(Ne,Ee,Be,_t){for(var Jt=null,qi=null,rn=Ee,Gn=Ee=0,Vr=null;rn!==null&&Gn<Be.length;Gn++){rn.index>Gn?(Vr=rn,rn=null):Vr=rn.sibling;var Jn=Nt(Ne,rn,Be[Gn],_t);if(Jn===null){rn===null&&(rn=Vr);break}h&&rn&&Jn.alternate===null&&d(Ne,rn),Ee=U(Jn,Ee,Gn),qi===null?Jt=Jn:qi.sibling=Jn,qi=Jn,rn=Vr}if(Gn===Be.length)return b(Ne,rn),Un&&Re(Ne,Gn),Jt;if(rn===null){for(;Gn<Be.length;Gn++)rn=pt(Ne,Be[Gn],_t),rn!==null&&(Ee=U(rn,Ee,Gn),qi===null?Jt=rn:qi.sibling=rn,qi=rn);return Un&&Re(Ne,Gn),Jt}for(rn=A(rn);Gn<Be.length;Gn++)Vr=yn(rn,Ne,Gn,Be[Gn],_t),Vr!==null&&(h&&Vr.alternate!==null&&rn.delete(Vr.key===null?Gn:Vr.key),Ee=U(Vr,Ee,Gn),qi===null?Jt=Vr:qi.sibling=Vr,qi=Vr);return h&&rn.forEach(function(Eo){return d(Ne,Eo)}),Un&&Re(Ne,Gn),Jt}function id(Ne,Ee,Be,_t){if(Be==null)throw Error(r(151));for(var Jt=null,qi=null,rn=Ee,Gn=Ee=0,Vr=null,Jn=Be.next();rn!==null&&!Jn.done;Gn++,Jn=Be.next()){rn.index>Gn?(Vr=rn,rn=null):Vr=rn.sibling;var Eo=Nt(Ne,rn,Jn.value,_t);if(Eo===null){rn===null&&(rn=Vr);break}h&&rn&&Eo.alternate===null&&d(Ne,rn),Ee=U(Eo,Ee,Gn),qi===null?Jt=Eo:qi.sibling=Eo,qi=Eo,rn=Vr}if(Jn.done)return b(Ne,rn),Un&&Re(Ne,Gn),Jt;if(rn===null){for(;!Jn.done;Gn++,Jn=Be.next())Jn=pt(Ne,Jn.value,_t),Jn!==null&&(Ee=U(Jn,Ee,Gn),qi===null?Jt=Jn:qi.sibling=Jn,qi=Jn);return Un&&Re(Ne,Gn),Jt}for(rn=A(rn);!Jn.done;Gn++,Jn=Be.next())Jn=yn(rn,Ne,Gn,Jn.value,_t),Jn!==null&&(h&&Jn.alternate!==null&&rn.delete(Jn.key===null?Gn:Jn.key),Ee=U(Jn,Ee,Gn),qi===null?Jt=Jn:qi.sibling=Jn,qi=Jn);return h&&rn.forEach(function(sC){return d(Ne,sC)}),Un&&Re(Ne,Gn),Jt}function vc(Ne,Ee,Be,_t){if(typeof Be=="object"&&Be!==null&&Be.type===gf&&Be.key===null&&(Be=Be.props.children),typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case El:e:{for(var Jt=Be.key;Ee!==null;){if(Ee.key===Jt){if(Jt=Be.type,Jt===gf){if(Ee.tag===7){b(Ne,Ee.sibling),_t=N(Ee,Be.props.children),_t.return=Ne,Ne=_t;break e}}else if(Ee.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===Ua&&un(Jt)===Ee.type){b(Ne,Ee.sibling),_t=N(Ee,Be.props),Xr(_t,Be),_t.return=Ne,Ne=_t;break e}b(Ne,Ee);break}else d(Ne,Ee);Ee=Ee.sibling}Be.type===gf?(_t=fo(Be.props.children,Ne.mode,_t,Be.key),_t.return=Ne,Ne=_t):(_t=ou(Be.type,Be.key,Be.props,null,Ne.mode,_t),Xr(_t,Be),_t.return=Ne,Ne=_t)}return Y(Ne);case mf:e:{for(Jt=Be.key;Ee!==null;){if(Ee.key===Jt)if(Ee.tag===4&&Ee.stateNode.containerInfo===Be.containerInfo&&Ee.stateNode.implementation===Be.implementation){b(Ne,Ee.sibling),_t=N(Ee,Be.children||[]),_t.return=Ne,Ne=_t;break e}else{b(Ne,Ee);break}else d(Ne,Ee);Ee=Ee.sibling}_t=_0(Be,Ne.mode,_t),_t.return=Ne,Ne=_t}return Y(Ne);case Ua:return Be=un(Be),vc(Ne,Ee,Be,_t)}if(ic(Be))return pr(Ne,Ee,Be,_t);if(p(Be)){if(Jt=p(Be),typeof Jt!="function")throw Error(r(150));return Be=Jt.call(Be),id(Ne,Ee,Be,_t)}if(typeof Be.then=="function")return vc(Ne,Ee,Oi(Be),_t);if(Be.$$typeof===ho)return vc(Ne,Ee,X(Ne,Be),_t);ua(Ne,Be)}return typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint"?(Be=""+Be,Ee!==null&&Ee.tag===6?(b(Ne,Ee.sibling),_t=N(Ee,Be),_t.return=Ne,Ne=_t):(b(Ne,Ee),_t=v0(Be,Ne.mode,_t),_t.return=Ne,Ne=_t),Y(Ne)):b(Ne,Ee)}return function(Ne,Ee,Be,_t){try{Af=0;var Jt=vc(Ne,Ee,Be,_t);return uc=null,Jt}catch(rn){if(rn===Pr||rn===xo)throw rn;var qi=t(29,rn,null,Ne.mode);return qi.lanes=_t,qi.return=Ne,qi}finally{}}}function to(){for(var h=Pl,d=Mf=Pl=0;d<h;){var b=ea[d];ea[d++]=null;var A=ea[d];ea[d++]=null;var N=ea[d];ea[d++]=null;var U=ea[d];if(ea[d++]=null,A!==null&&N!==null){var Y=A.pending;Y===null?N.next=N:(N.next=Y.next,Y.next=N),A.pending=N}U!==0&&ca(b,N,U)}}function Ia(h,d,b,A){ea[Pl++]=h,ea[Pl++]=d,ea[Pl++]=b,ea[Pl++]=A,Mf|=A,h.lanes|=A,h=h.alternate,h!==null&&(h.lanes|=A)}function Yl(h,d,b,A){return Ia(h,d,b,A),xi(h)}function Mi(h,d){return Ia(h,null,null,d),xi(h)}function ca(h,d,b){h.lanes|=b;var A=h.alternate;A!==null&&(A.lanes|=b);for(var N=!1,U=h.return;U!==null;)U.childLanes|=b,A=U.alternate,A!==null&&(A.childLanes|=b),U.tag===22&&(h=U.stateNode,h===null||h._visibility&1||(N=!0)),h=U,U=U.return;return h.tag===3?(U=h.stateNode,N&&d!==null&&(N=31-cs(b),h=U.hiddenUpdates,A=h[N],A===null?h[N]=[d]:A.push(d),d.lane=b|536870912),U):null}function xi(h){if(50<Qn)throw Qn=0,qp=null,Error(r(185));for(var d=h.return;d!==null;)h=d,d=h.return;return h.tag===3?h.stateNode:null}function zi(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yr(h,d){h=h.updateQueue,d.updateQueue===h&&(d.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function fa(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Pa(h,d,b){var A=h.updateQueue;if(A===null)return null;if(A=A.shared,(Dn&2)!==0){var N=A.pending;return N===null?d.next=d:(d.next=N.next,N.next=d),A.pending=d,d=xi(h),ca(h,null,b),d}return Ia(h,A,d,b),xi(h)}function Lo(h,d,b){if(d=d.updateQueue,d!==null&&(d=d.shared,(b&4194048)!==0)){var A=d.lanes;A&=h.pendingLanes,b|=A,d.lanes=b,P(h,b)}}function Kl(h,d){var b=h.updateQueue,A=h.alternate;if(A!==null&&(A=A.updateQueue,b===A)){var N=null,U=null;if(b=b.firstBaseUpdate,b!==null){do{var Y={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};U===null?N=U=Y:U=U.next=Y,b=b.next}while(b!==null);U===null?N=U=d:U=U.next=d}else N=U=d;b={baseState:A.baseState,firstBaseUpdate:N,lastBaseUpdate:U,shared:A.shared,callbacks:A.callbacks},h.updateQueue=b;return}h=b.lastBaseUpdate,h===null?b.firstBaseUpdate=d:h.next=d,b.lastBaseUpdate=d}function ha(){if(tv){var h=Ir;if(h!==null)throw h}}function no(h,d,b,A){tv=!1;var N=h.updateQueue;zs=!1;var U=N.firstBaseUpdate,Y=N.lastBaseUpdate,fe=N.shared.pending;if(fe!==null){N.shared.pending=null;var Ve=fe,lt=Ve.next;Ve.next=null,Y===null?U=lt:Y.next=lt,Y=Ve;var bt=h.alternate;bt!==null&&(bt=bt.updateQueue,fe=bt.lastBaseUpdate,fe!==Y&&(fe===null?bt.firstBaseUpdate=lt:fe.next=lt,bt.lastBaseUpdate=Ve))}if(U!==null){var pt=N.baseState;Y=0,bt=lt=Ve=null,fe=U;do{var Nt=fe.lane&-536870913,yn=Nt!==fe.lane;if(yn?(zn&Nt)===Nt:(A&Nt)===Nt){Nt!==0&&Nt===pu&&(tv=!0),bt!==null&&(bt=bt.next={lane:0,tag:fe.tag,payload:fe.payload,callback:null,next:null});e:{var pr=h,id=fe;Nt=d;var vc=b;switch(id.tag){case 1:if(pr=id.payload,typeof pr=="function"){pt=pr.call(vc,pt,Nt);break e}pt=pr;break e;case 3:pr.flags=pr.flags&-65537|128;case 0:if(pr=id.payload,Nt=typeof pr=="function"?pr.call(vc,pt,Nt):pr,Nt==null)break e;pt=Ig({},pt,Nt);break e;case 2:zs=!0}}Nt=fe.callback,Nt!==null&&(h.flags|=64,yn&&(h.flags|=8192),yn=N.callbacks,yn===null?N.callbacks=[Nt]:yn.push(Nt))}else yn={lane:Nt,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null},bt===null?(lt=bt=yn,Ve=pt):bt=bt.next=yn,Y|=Nt;if(fe=fe.next,fe===null){if(fe=N.shared.pending,fe===null)break;yn=fe,fe=yn.next,yn.next=null,N.lastBaseUpdate=yn,N.shared.pending=null}}while(!0);bt===null&&(Ve=pt),N.baseState=Ve,N.firstBaseUpdate=lt,N.lastBaseUpdate=bt,U===null&&(N.shared.lanes=0),gu|=Y,h.lanes=Y,h.memoizedState=pt}}function Is(h,d){if(typeof h!="function")throw Error(r(191,h));h.call(d)}function Ra(h,d){var b=h.callbacks;if(b!==null)for(h.callbacks=null,h=0;h<b.length;h++)Is(b[h],d)}function da(h,d){h=Nl,x(cc,h),x(Cf,d),Nl=h|d.baseLanes}function is(){x(cc,Nl),x(Cf,Cf.current)}function K(){Nl=cc.current,_(Cf),_(cc)}function ve(h){var d=h.alternate;x(er,er.current&1),x(hs,h),ds===null&&(d===null||Cf.current!==null||d.memoizedState!==null)&&(ds=h)}function ke(h){x(er,er.current),x(hs,h),ds===null&&(ds=h)}function Ie(h){h.tag===22?(x(er,er.current),x(hs,h),ds===null&&(ds=h)):xe()}function xe(){x(er,er.current),x(hs,hs.current)}function yt(h){_(hs),ds===h&&(ds=null),_(er)}function Ct(h){for(var d=h;d!==null;){if(d.tag===13){var b=d.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||ac(b)||Ug(b)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function ft(){throw Error(r(321))}function Ot(h,d){if(d===null)return!1;for(var b=0;b<d.length&&b<h.length;b++)if(!fr(h[b],d[b]))return!1;return!0}function kt(h,d,b,A,N,U){return mu=U,xn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Zt.H=h===null||h.memoizedState===null?Hi:Rl,jn=!1,U=b(A,N),jn=!1,En&&(U=Pt(d,b,A,N)),Vt(h),U}function Vt(h){Zt.H=Fs;var d=Wt!==null&&Wt.next!==null;if(mu=0,dn=Wt=xn=null,Cn=!1,So=0,qo=null,d)throw Error(r(300));h===null||Pi||(h=h.dependencies,h!==null&&Lt(h)&&(Pi=!0))}function Pt(h,d,b,A){xn=h;var N=0;do{if(En&&(qo=null),So=0,En=!1,25<=N)throw Error(r(301));if(N+=1,dn=Wt=null,h.updateQueue!=null){var U=h.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}Zt.H=fc,U=d(b,A)}while(En);return U}function $t(){var h=Zt.H,d=h.useState()[0];return d=typeof d.then=="function"?tn(d):d,h=h.useState()[0],(Wt!==null?Wt.memoizedState:null)!==h&&(xn.flags|=1024),d}function Rn(){var h=ya!==0;return ya=0,h}function ii(h,d,b){d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~b}function Kt(h){if(Cn){for(h=h.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}Cn=!1}mu=0,dn=Wt=xn=null,En=!1,So=ya=0,qo=null}function on(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?xn.memoizedState=dn=h:dn=dn.next=h,dn}function St(){if(Wt===null){var h=xn.alternate;h=h!==null?h.memoizedState:null}else h=Wt.next;var d=dn===null?xn.memoizedState:dn.next;if(d!==null)dn=d,Wt=h;else{if(h===null)throw xn.alternate===null?Error(r(467)):Error(r(310));Wt=h,h={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},dn===null?xn.memoizedState=dn=h:dn=dn.next=h}return dn}function An(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tn(h){var d=So;return So+=1,qo===null&&(qo=[]),h=Ft(qo,h,d),d=xn,(dn===null?d.memoizedState:dn.next)===null&&(d=d.alternate,Zt.H=d===null||d.memoizedState===null?Hi:Rl),h}function Fi(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return tn(h);if(h.$$typeof===ho)return ee(h)}throw Error(r(438,String(h)))}function Ps(h){var d=null,b=xn.updateQueue;if(b!==null&&(d=b.memoCache),d==null){var A=xn.alternate;A!==null&&(A=A.updateQueue,A!==null&&(A=A.memoCache,A!=null&&(d={data:A.data.map(function(N){return N.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),b===null&&(b=An(),xn.updateQueue=b),b.memoCache=d,b=d.data[d.index],b===void 0)for(b=d.data[d.index]=Array(h),A=0;A<h;A++)b[A]=x0;return d.index++,b}function yi(h,d){return typeof d=="function"?d(h):d}function Kr(h){var d=St();return Zn(d,Wt,h)}function Zn(h,d,b){var A=h.queue;if(A===null)throw Error(r(311));A.lastRenderedReducer=b;var N=h.baseQueue,U=A.pending;if(U!==null){if(N!==null){var Y=N.next;N.next=U.next,U.next=Y}d.baseQueue=N=U,A.pending=null}if(U=h.baseState,N===null)h.memoizedState=U;else{d=N.next;var fe=Y=null,Ve=null,lt=d,bt=!1;do{var pt=lt.lane&-536870913;if(pt!==lt.lane?(zn&pt)===pt:(mu&pt)===pt){var Nt=lt.revertLane;if(Nt===0)Ve!==null&&(Ve=Ve.next={lane:0,revertLane:0,gesture:null,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),pt===pu&&(bt=!0);else if((mu&Nt)===Nt){lt=lt.next,Nt===pu&&(bt=!0);continue}else pt={lane:0,revertLane:lt.revertLane,gesture:null,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Ve===null?(fe=Ve=pt,Y=U):Ve=Ve.next=pt,xn.lanes|=Nt,gu|=Nt;pt=lt.action,jn&&b(U,pt),U=lt.hasEagerState?lt.eagerState:b(U,pt)}else Nt={lane:pt,revertLane:lt.revertLane,gesture:lt.gesture,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Ve===null?(fe=Ve=Nt,Y=U):Ve=Ve.next=Nt,xn.lanes|=pt,gu|=pt;lt=lt.next}while(lt!==null&&lt!==d);if(Ve===null?Y=U:Ve.next=fe,!fr(U,h.memoizedState)&&(Pi=!0,bt&&(b=Ir,b!==null)))throw b;h.memoizedState=U,h.baseState=Y,h.baseQueue=Ve,A.lastRenderedState=U}return N===null&&(A.lanes=0),[h.memoizedState,A.dispatch]}function Ci(h){var d=St(),b=d.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=h;var A=b.dispatch,N=b.pending,U=d.memoizedState;if(N!==null){b.pending=null;var Y=N=N.next;do U=h(U,Y.action),Y=Y.next;while(Y!==N);fr(U,d.memoizedState)||(Pi=!0),d.memoizedState=U,d.baseQueue===null&&(d.baseState=U),b.lastRenderedState=U}return[U,A]}function di(h,d,b){var A=xn,N=St(),U=Un;if(U){if(b===void 0)throw Error(r(407));b=b()}else b=d();var Y=!fr((Wt||N).memoizedState,b);if(Y&&(N.memoizedState=b,Pi=!0),N=N.queue,Uo(sl.bind(null,A,N,h),[h]),N.getSnapshot!==d||Y||dn!==null&&dn.memoizedState.tag&1){if(A.flags|=2048,Oa(9,{destroy:void 0},lr.bind(null,A,N,b,d),null),In===null)throw Error(r(349));U||(mu&127)!==0||or(A,d,b)}return b}function or(h,d,b){h.flags|=16384,h={getSnapshot:d,value:b},d=xn.updateQueue,d===null?(d=An(),xn.updateQueue=d,d.stores=[h]):(b=d.stores,b===null?d.stores=[h]:b.push(h))}function lr(h,d,b,A){d.value=b,d.getSnapshot=A,Na(d)&&cp(h)}function sl(h,d,b){return b(function(){Na(d)&&cp(h)})}function Na(h){var d=h.getSnapshot;h=h.value;try{var b=d();return!fr(h,b)}catch{return!0}}function cp(h){var d=Mi(h,2);d!==null&&Vi(d,h,2)}function ol(h){var d=on();if(typeof h=="function"){var b=h;if(h=b(),jn){W(!0);try{b()}finally{W(!1)}}}return d.memoizedState=d.baseState=h,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:h},d}function tf(h,d,b,A){return h.baseState=b,Zn(h,Wt,typeof A=="function"?A:yi)}function ko(h,d,b,A,N){if(sf(h))throw Error(r(485));if(h=d.action,h!==null){var U={payload:N,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){U.listeners.push(Y)}};Zt.T!==null?b(!0):U.isTransition=!1,A(U),b=d.pending,b===null?(U.next=d.pending=U,bh(d,U)):(U.next=b.next,d.pending=b.next=U)}}function bh(h,d){var b=d.action,A=d.payload,N=h.state;if(d.isTransition){var U=Zt.T,Y={};Zt.T=Y;try{var fe=b(N,A),Ve=Zt.S;Ve!==null&&Ve(Y,fe),Rs(h,d,fe)}catch(lt){io(h,d,lt)}finally{U!==null&&Y.types!==null&&(U.types=Y.types),Zt.T=U}}else try{U=b(N,A),Rs(h,d,U)}catch(lt){io(h,d,lt)}}function Rs(h,d,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(A){Zl(h,d,A)},function(A){return io(h,d,A)}):Zl(h,d,b)}function Zl(h,d,b){d.status="fulfilled",d.value=b,Fu(d),h.state=b,d=h.pending,d!==null&&(b=d.next,b===d?h.pending=null:(b=b.next,d.next=b,bh(h,b)))}function io(h,d,b){var A=h.pending;if(h.pending=null,A!==null){A=A.next;do d.status="rejected",d.reason=b,Fu(d),d=d.next;while(d!==A)}h.action=null}function Fu(h){h=h.listeners;for(var d=0;d<h.length;d++)(0,h[d])()}function nf(h,d){return d}function Ql(h,d){if(Un){var b=In.formState;if(b!==null){e:{var A=xn;if(Un){if(ki){var N=xS(ki,Fa);if(N){ki=SS(N),A=B0(N);break e}}ye(A)}A=!1}A&&(d=b[0])}}b=on(),b.memoizedState=b.baseState=d,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nf,lastRenderedState:d},b.queue=A,b=hp.bind(null,xn,A),A.dispatch=b,A=ol(!1);var U=ao.bind(null,xn,!1,A.queue);return A=on(),N={state:d,dispatch:null,action:h,pending:null},A.queue=N,b=ko.bind(null,xn,N,U,b),N.dispatch=b,A.memoizedState=h,[d,b,!1]}function ro(h){var d=St();return Ns(d,Wt,h)}function Ns(h,d,b){if(d=Zn(h,d,nf)[0],h=Kr(yi)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var A=tn(d)}catch(Y){throw Y===Pr?xo:Y}else A=d;d=St();var N=d.queue,U=N.dispatch;return b!==d.memoizedState&&(xn.flags|=2048,Oa(9,{destroy:void 0},rf.bind(null,N,b),null)),[A,U,h]}function rf(h,d){h.action=d}function li(h){var d=St(),b=Wt;if(b!==null)return Ns(d,b,h);St(),d=d.memoizedState,b=St();var A=b.queue.dispatch;return b.memoizedState=h,[d,A,!1]}function Oa(h,d,b,A){return h={tag:h,create:b,deps:A,inst:d,next:null},d=xn.updateQueue,d===null&&(d=An(),xn.updateQueue=d),b=d.lastEffect,b===null?d.lastEffect=h.next=h:(A=b.next,b.next=h,h.next=A,d.lastEffect=h),h}function xh(){return St().memoizedState}function ll(h,d,b,A){var N=on();xn.flags|=h,N.memoizedState=Oa(1|d,{destroy:void 0},b,A===void 0?null:A)}function Bu(h,d,b,A){var N=St();A=A===void 0?null:A;var U=N.memoizedState.inst;Wt!==null&&A!==null&&Ot(A,Wt.memoizedState.deps)?N.memoizedState=Oa(d,U,b,A):(xn.flags|=h,N.memoizedState=Oa(1|d,U,b,A))}function Vu(h,d){ll(8390656,8,h,d)}function Uo(h,d){Bu(2048,8,h,d)}function zo(h){xn.flags|=4;var d=xn.updateQueue;if(d===null)d=An(),xn.updateQueue=d,d.events=[h];else{var b=d.events;b===null?d.events=[h]:b.push(h)}}function Lr(h){var d=St().memoizedState;return zo({ref:d,nextImpl:h}),function(){if((Dn&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}function ul(h,d){return Bu(4,2,h,d)}function Fo(h,d){return Bu(4,4,h,d)}function Jl(h,d){if(typeof d=="function"){h=h();var b=d(h);return function(){typeof b=="function"?b():d(null)}}if(d!=null)return h=h(),d.current=h,function(){d.current=null}}function Sh(h,d,b){b=b!=null?b.concat([h]):null,Bu(4,4,Jl.bind(null,d,h),b)}function cl(){}function af(h,d){var b=St();d=d===void 0?null:d;var A=b.memoizedState;return d!==null&&Ot(d,A[1])?A[0]:(b.memoizedState=[h,d],h)}function Bo(h,d){var b=St();d=d===void 0?null:d;var A=b.memoizedState;if(d!==null&&Ot(d,A[1]))return A[0];if(A=h(),jn){W(!0);try{h()}finally{W(!1)}}return b.memoizedState=[A,d],A}function ju(h,d,b){return b===void 0||(mu&1073741824)!==0&&(zn&261930)===0?h.memoizedState=d:(h.memoizedState=b,h=ru(),xn.lanes|=h,gu|=h,b)}function wh(h,d,b,A){return fr(b,d)?b:Cf.current!==null?(h=ju(h,b,A),fr(h,d)||(Pi=!0),h):(mu&42)===0||(mu&1073741824)!==0&&(zn&261930)===0?(Pi=!0,h.memoizedState=b):(h=ru(),xn.lanes|=h,gu|=h,d)}function Hu(h,d,b,A,N){var U=po();kn(U!==0&&8>U?U:8);var Y=Zt.T,fe={};Zt.T=fe,ao(h,!1,d,b);try{var Ve=N(),lt=Zt.S;if(lt!==null&&lt(fe,Ve),Ve!==null&&typeof Ve=="object"&&typeof Ve.then=="function"){var bt=Qe(Ve,A);Wu(h,d,bt,Di(h))}else Wu(h,d,A,Di(h))}catch(pt){Wu(h,d,{then:function(){},status:"rejected",reason:pt},Di())}finally{kn(U),Y!==null&&fe.types!==null&&(Y.types=fe.types),Zt.T=Y}}function fp(h){var d=h.memoizedState;if(d!==null)return d;d={memoizedState:bf,baseState:bf,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:bf},next:null};var b={};return d.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:b},next:null},h.memoizedState=d,h=h.alternate,h!==null&&(h.memoizedState=d),d}function Eh(){return ee(xf)}function Gu(){return St().memoizedState}function Th(){return St().memoizedState}function dg(h){for(var d=h.return;d!==null;){switch(d.tag){case 24:case 3:var b=Di();h=fa(b);var A=Pa(d,h,b);A!==null&&(Vi(A,d,b),Lo(A,d,b)),d={cache:Ue()},h.payload=d;return}d=d.return}}function Ah(h,d,b){var A=Di();b={lane:A,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},sf(h)?dp(d,b):(b=Yl(h,d,b,A),b!==null&&(Vi(b,h,A),pp(b,d,A)))}function hp(h,d,b){var A=Di();Wu(h,d,b,A)}function Wu(h,d,b,A){var N={lane:A,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null};if(sf(h))dp(d,N);else{var U=h.alternate;if(h.lanes===0&&(U===null||U.lanes===0)&&(U=d.lastRenderedReducer,U!==null))try{var Y=d.lastRenderedState,fe=U(Y,b);if(N.hasEagerState=!0,N.eagerState=fe,fr(fe,Y))return Ia(h,d,N,0),In===null&&to(),!1}catch{}finally{}if(b=Yl(h,d,N,A),b!==null)return Vi(b,h,A),pp(b,d,A),!0}return!1}function ao(h,d,b,A){if(A={lane:2,revertLane:ge(),gesture:null,action:A,hasEagerState:!1,eagerState:null,next:null},sf(h)){if(d)throw Error(r(479))}else d=Yl(h,b,A,2),d!==null&&Vi(d,h,2)}function sf(h){var d=h.alternate;return h===xn||d!==null&&d===xn}function dp(h,d){En=Cn=!0;var b=h.pending;b===null?d.next=d:(d.next=b.next,b.next=d),h.pending=d}function pp(h,d,b){if((b&4194048)!==0){var A=d.lanes;A&=h.pendingLanes,b|=A,d.lanes=b,P(h,b)}}function Mh(h,d,b,A){d=h.memoizedState,b=b(A,d),b=b==null?d:Ig({},d,b),h.memoizedState=b,h.lanes===0&&(h.updateQueue.baseState=b)}function eu(h,d,b,A,N,U,Y){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(A,U,Y):d.prototype&&d.prototype.isPureReactComponent?!qe(b,A)||!qe(N,U):!0}function pa(h,d,b,A){h=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(b,A),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(b,A),d.state!==h&&Vp.enqueueReplaceState(d,d.state,null)}function fl(h,d){var b=d;if("ref"in d){b={};for(var A in d)A!=="ref"&&(b[A]=d[A])}if(h=h.defaultProps){b===d&&(b=Ig({},b));for(var N in h)b[N]===void 0&&(b[N]=h[N])}return b}function of(h,d){try{var b=h.onUncaughtError;b(d.value,{componentStack:d.stack})}catch(A){setTimeout(function(){throw A})}}function hl(h,d,b){try{var A=h.onCaughtError;A(b.value,{componentStack:b.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function E(h,d,b){return b=fa(b),b.tag=3,b.payload={element:null},b.callback=function(){of(h,d)},b}function V(h){return h=fa(h),h.tag=3,h}function $(h,d,b,A){var N=b.type.getDerivedStateFromError;if(typeof N=="function"){var U=A.value;h.payload=function(){return N(U)},h.callback=function(){hl(d,b,A)}}var Y=b.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(h.callback=function(){hl(d,b,A),typeof N!="function"&&(vu===null?vu=new Set([this]):vu.add(this));var fe=A.stack;this.componentDidCatch(A.value,{componentStack:fe!==null?fe:""})})}function te(h,d,b,A,N){if(b.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){if(d=b.alternate,d!==null&&ht(d,b,N,!0),b=hs.current,b!==null){switch(b.tag){case 31:case 13:return ds===null?Uh():b.alternate===null&&Wi===0&&(Wi=3),b.flags&=-257,b.flags|=65536,b.lanes=N,A===Il?b.flags|=16384:(d=b.updateQueue,d===null?b.updateQueue=new Set([A]):d.add(A),Bh(h,A,N)),!1;case 22:return b.flags|=65536,A===Il?b.flags|=16384:(d=b.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([A])},b.updateQueue=d):(b=d.retryQueue,b===null?d.retryQueue=new Set([A]):b.add(A)),Bh(h,A,N)),!1}throw Error(r(435,b.tag))}return Bh(h,A,N),Uh(),!1}if(Un)return d=hs.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=N,A!==Qg&&(h=Error(r(422),{cause:A}),Ke(Te(h,b)))):(A!==Qg&&(d=Error(r(423),{cause:A}),Ke(Te(d,b))),h=h.current.alternate,h.flags|=65536,N&=-N,h.lanes|=N,A=Te(A,b),N=E(h.stateNode,A,N),Kl(h,N),Wi!==4&&(Wi=2)),!1;var U=Error(r(520),{cause:A});if(U=Te(U,b),Hp===null?Hp=[U]:Hp.push(U),Wi!==4&&(Wi=2),d===null)return!0;A=Te(A,b),b=d;do{switch(b.tag){case 3:return b.flags|=65536,h=N&-N,b.lanes|=h,h=E(b.stateNode,A,h),Kl(b,h),!1;case 1:if(d=b.type,U=b.stateNode,(b.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(vu===null||!vu.has(U))))return b.flags|=65536,N&=-N,b.lanes|=N,N=V(N),$(N,h,b,A),Kl(b,N),!1}b=b.return}while(b!==null);return!1}function _e(h,d,b,A){d.child=h===null?r_(d,null,b,A):Jr(d,h.child,b,A)}function Fe(h,d,b,A,N){b=b.render;var U=d.ref;if("ref"in A){var Y={};for(var fe in A)fe!=="ref"&&(Y[fe]=A[fe])}else Y=A;return dt(d),A=kt(h,d,b,Y,U,N),fe=Rn(),h!==null&&!Pi?(ii(h,d,N),dl(h,d,N)):(Un&&fe&&de(d),d.flags|=1,_e(h,d,A,N),d.child)}function xt(h,d,b,A,N){if(h===null){var U=b.type;return typeof U=="function"&&!hf(U)&&U.defaultProps===void 0&&b.compare===null?(d.tag=15,d.type=U,vn(h,d,U,A,N)):(h=ou(b.type,null,A,d,d.mode,N),h.ref=d.ref,h.return=d,d.child=h)}if(U=h.child,!mp(h,N)){var Y=U.memoizedProps;if(b=b.compare,b=b!==null?b:qe,b(Y,A)&&h.ref===d.ref)return dl(h,d,N)}return d.flags|=1,h=Ls(U,A),h.ref=d.ref,h.return=d,d.child=h}function vn(h,d,b,A,N){if(h!==null){var U=h.memoizedProps;if(qe(U,A)&&h.ref===d.ref)if(Pi=!1,d.pendingProps=A=U,mp(h,N))(h.flags&131072)!==0&&(Pi=!0);else return d.lanes=h.lanes,dl(h,d,N)}return tu(h,d,b,A,N)}function Qi(h,d,b,A){var N=A.children,U=h!==null?h.memoizedState:null;if(h===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),A.mode==="hidden"){if((d.flags&128)!==0){if(U=U!==null?U.baseLanes|b:b,h!==null){for(A=d.child=h.child,N=0;A!==null;)N=N|A.lanes|A.childLanes,A=A.sibling;A=N&~U}else A=0,d.child=null;return Ii(h,d,U,b,A)}if((b&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},h!==null&&at(d,U!==null?U.cachePool:null),U!==null?da(d,U):is(),Ie(d);else return A=d.lanes=536870912,Ii(h,d,U!==null?U.baseLanes|b:b,b,A)}else U!==null?(at(d,U.cachePool),da(d,U),xe(),d.memoizedState=null):(h!==null&&at(d,null),is(),xe());return _e(h,d,N,b),d.child}function Vn(h,d){return h!==null&&h.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function Ii(h,d,b,A,N){var U=$e();return U=U===null?null:{parent:ur?Ui._currentValue:Ui._currentValue2,pool:U},d.memoizedState={baseLanes:b,cachePool:U},h!==null&&at(d,null),is(),Ie(d),h!==null&&ht(h,d,A,!0),d.childLanes=N,null}function Da(h,d){return d=qu({mode:d.mode,children:d.children},h.mode),d.ref=h.ref,h.child=d,d.return=h,d}function Vo(h,d,b){return Jr(d,h.child,null,b),h=Da(d,d.pendingProps),h.flags|=2,yt(d),d.memoizedState=null,h}function jo(h,d,b){var A=d.pendingProps,N=(d.flags&128)!==0;if(d.flags&=-129,h===null){if(Un){if(A.mode==="hidden")return h=Da(d,A),d.lanes=536870912,Vn(null,h);if(ke(d),(h=ki)?(h=j0(h,Fa),h!==null&&(d.memoizedState={dehydrated:h,treeContext:vo!==null?{id:Zr,overflow:Go}:null,retryLane:536870912,hydrationErrors:null},b=y0(h),b.return=d,d.child=b,Cr=d,ki=null)):h=null,h===null)throw ye(d);return d.lanes=536870912,null}return Da(d,A)}var U=h.memoizedState;if(U!==null){var Y=U.dehydrated;if(ke(d),N)if(d.flags&256)d.flags&=-257,d=Vo(h,d,b);else if(d.memoizedState!==null)d.child=h.child,d.flags|=128,d=null;else throw Error(r(558));else if(Pi||ht(h,d,b,!1),N=(b&h.childLanes)!==0,Pi||N){if(A=In,A!==null&&(Y=D(A,b),Y!==0&&Y!==U.retryLane))throw U.retryLane=Y,Mi(h,Y),Vi(A,h,Y),Va;Uh(),d=Vo(h,d,b)}else h=U.treeContext,Li&&(ki=AS(Y),Cr=d,Un=!0,Cl=null,Fa=!1,h!==null&&We(d,h)),d=Da(d,A),d.flags|=4096;return d}return h=Ls(h.child,{mode:A.mode,children:A.children}),h.ref=d.ref,d.child=h,h.return=d,h}function rs(h,d){var b=d.ref;if(b===null)h!==null&&h.ref!==null&&(d.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(r(284));(h===null||h.ref!==b)&&(d.flags|=4194816)}}function tu(h,d,b,A,N){return dt(d),b=kt(h,d,b,A,void 0,N),A=Rn(),h!==null&&!Pi?(ii(h,d,N),dl(h,d,N)):(Un&&A&&de(d),d.flags|=1,_e(h,d,b,N),d.child)}function lf(h,d,b,A,N,U){return dt(d),d.updateQueue=null,b=Pt(d,A,b,N),Vt(h),A=Rn(),h!==null&&!Pi?(ii(h,d,U),dl(h,d,U)):(Un&&A&&de(d),d.flags|=1,_e(h,d,b,U),d.child)}function uf(h,d,b,A,N){if(dt(d),d.stateNode===null){var U=Tl,Y=b.contextType;typeof Y=="object"&&Y!==null&&(U=ee(Y)),U=new b(A,U),d.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=Vp,d.stateNode=U,U._reactInternals=d,U=d.stateNode,U.props=A,U.state=d.memoizedState,U.refs={},zi(d),Y=b.contextType,U.context=typeof Y=="object"&&Y!==null?ee(Y):Tl,U.state=d.memoizedState,Y=b.getDerivedStateFromProps,typeof Y=="function"&&(Mh(d,b,Y,A),U.state=d.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(Y=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),Y!==U.state&&Vp.enqueueReplaceState(U,U.state,null),no(d,A,U,N),ha(),U.state=d.memoizedState),typeof U.componentDidMount=="function"&&(d.flags|=4194308),A=!0}else if(h===null){U=d.stateNode;var fe=d.memoizedProps,Ve=fl(b,fe);U.props=Ve;var lt=U.context,bt=b.contextType;Y=Tl,typeof bt=="object"&&bt!==null&&(Y=ee(bt));var pt=b.getDerivedStateFromProps;bt=typeof pt=="function"||typeof U.getSnapshotBeforeUpdate=="function",fe=d.pendingProps!==fe,bt||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(fe||lt!==Y)&&pa(d,U,A,Y),zs=!1;var Nt=d.memoizedState;U.state=Nt,no(d,A,U,N),ha(),lt=d.memoizedState,fe||Nt!==lt||zs?(typeof pt=="function"&&(Mh(d,b,pt,A),lt=d.memoizedState),(Ve=zs||eu(d,b,Ve,A,Nt,lt,Y))?(bt||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(d.flags|=4194308)):(typeof U.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=A,d.memoizedState=lt),U.props=A,U.state=lt,U.context=Y,A=Ve):(typeof U.componentDidMount=="function"&&(d.flags|=4194308),A=!1)}else{U=d.stateNode,Yr(h,d),Y=d.memoizedProps,bt=fl(b,Y),U.props=bt,pt=d.pendingProps,Nt=U.context,lt=b.contextType,Ve=Tl,typeof lt=="object"&&lt!==null&&(Ve=ee(lt)),fe=b.getDerivedStateFromProps,(lt=typeof fe=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(Y!==pt||Nt!==Ve)&&pa(d,U,A,Ve),zs=!1,Nt=d.memoizedState,U.state=Nt,no(d,A,U,N),ha();var yn=d.memoizedState;Y!==pt||Nt!==yn||zs||h!==null&&h.dependencies!==null&&Lt(h.dependencies)?(typeof fe=="function"&&(Mh(d,b,fe,A),yn=d.memoizedState),(bt=zs||eu(d,b,bt,A,Nt,yn,Ve)||h!==null&&h.dependencies!==null&&Lt(h.dependencies))?(lt||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(A,yn,Ve),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(A,yn,Ve)),typeof U.componentDidUpdate=="function"&&(d.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof U.componentDidUpdate!="function"||Y===h.memoizedProps&&Nt===h.memoizedState||(d.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||Y===h.memoizedProps&&Nt===h.memoizedState||(d.flags|=1024),d.memoizedProps=A,d.memoizedState=yn),U.props=A,U.state=yn,U.context=Ve,A=bt):(typeof U.componentDidUpdate!="function"||Y===h.memoizedProps&&Nt===h.memoizedState||(d.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||Y===h.memoizedProps&&Nt===h.memoizedState||(d.flags|=1024),A=!1)}return U=A,rs(h,d),A=(d.flags&128)!==0,U||A?(U=d.stateNode,b=A&&typeof b.getDerivedStateFromError!="function"?null:U.render(),d.flags|=1,h!==null&&A?(d.child=Jr(d,h.child,null,N),d.child=Jr(d,null,b,N)):_e(h,d,b,N),d.memoizedState=U.state,h=d.child):h=dl(h,d,N),h}function Gx(h,d,b,A){return Tt(),d.flags|=256,_e(h,d,b,A),d.child}function i0(h){return{baseLanes:h,cachePool:rt()}}function r0(h,d,b){return h=h!==null?h.childLanes&~b:0,d&&(h|=ja),h}function a0(h,d,b){var A=d.pendingProps,N=!1,U=(d.flags&128)!==0,Y;if((Y=U)||(Y=h!==null&&h.memoizedState===null?!1:(er.current&2)!==0),Y&&(N=!0,d.flags&=-129),Y=(d.flags&32)!==0,d.flags&=-33,h===null){if(Un){if(N?ve(d):xe(),(h=ki)?(h=PS(h,Fa),h!==null&&(d.memoizedState={dehydrated:h,treeContext:vo!==null?{id:Zr,overflow:Go}:null,retryLane:536870912,hydrationErrors:null},b=y0(h),b.return=d,d.child=b,Cr=d,ki=null)):h=null,h===null)throw ye(d);return Ug(h)?d.lanes=32:d.lanes=536870912,null}var fe=A.children;return A=A.fallback,N?(xe(),N=d.mode,fe=qu({mode:"hidden",children:fe},N),A=fo(A,N,b,null),fe.return=d,A.return=d,fe.sibling=A,d.child=fe,A=d.child,A.memoizedState=i0(b),A.childLanes=r0(h,Y,b),d.memoizedState=If,Vn(null,A)):(ve(d),pg(d,fe))}var Ve=h.memoizedState;if(Ve!==null&&(fe=Ve.dehydrated,fe!==null)){if(U)d.flags&256?(ve(d),d.flags&=-257,d=cf(h,d,b)):d.memoizedState!==null?(xe(),d.child=h.child,d.flags|=128,d=null):(xe(),fe=A.fallback,N=d.mode,A=qu({mode:"visible",children:A.children},N),fe=fo(fe,N,b,null),fe.flags|=2,A.return=d,fe.return=d,A.sibling=fe,d.child=A,Jr(d,h.child,null,b),A=d.child,A.memoizedState=i0(b),A.childLanes=r0(h,Y,b),d.memoizedState=If,d=Vn(null,A));else if(ve(d),Ug(fe))Y=zg(fe).digest,A=Error(r(419)),A.stack="",A.digest=Y,Ke({value:A,source:null,stack:null}),d=cf(h,d,b);else if(Pi||ht(h,d,b,!1),Y=(b&h.childLanes)!==0,Pi||Y){if(Y=In,Y!==null&&(A=D(Y,b),A!==0&&A!==Ve.retryLane))throw Ve.retryLane=A,Mi(h,A),Vi(Y,h,A),Va;ac(fe)||Uh(),d=cf(h,d,b)}else ac(fe)?(d.flags|=192,d.child=h.child,d=null):(h=Ve.treeContext,Li&&(ki=MS(fe),Cr=d,Un=!0,Cl=null,Fa=!1,h!==null&&We(d,h)),d=pg(d,A.children),d.flags|=4096);return d}return N?(xe(),fe=A.fallback,N=d.mode,Ve=h.child,U=Ve.sibling,A=Ls(Ve,{mode:"hidden",children:A.children}),A.subtreeFlags=Ve.subtreeFlags&65011712,U!==null?fe=Ls(U,fe):(fe=fo(fe,N,b,null),fe.flags|=2),fe.return=d,A.return=d,A.sibling=fe,d.child=A,Vn(null,A),A=d.child,fe=h.child.memoizedState,fe===null?fe=i0(b):(N=fe.cachePool,N!==null?(Ve=ur?Ui._currentValue:Ui._currentValue2,N=N.parent!==Ve?{parent:Ve,pool:Ve}:N):N=rt(),fe={baseLanes:fe.baseLanes|b,cachePool:N}),A.memoizedState=fe,A.childLanes=r0(h,Y,b),d.memoizedState=If,Vn(h.child,A)):(ve(d),b=h.child,h=b.sibling,b=Ls(b,{mode:"visible",children:A.children}),b.return=d,b.sibling=null,h!==null&&(Y=d.deletions,Y===null?(d.deletions=[h],d.flags|=16):Y.push(h)),d.child=b,d.memoizedState=null,b)}function pg(h,d){return d=qu({mode:"visible",children:d},h.mode),d.return=h,h.child=d}function qu(h,d){return h=t(22,h,null,d),h.lanes=0,h}function cf(h,d,b){return Jr(d,h.child,null,b),h=pg(d,d.pendingProps.children),h.flags|=2,d.memoizedState=null,h}function Wx(h,d,b){h.lanes|=d;var A=h.alternate;A!==null&&(A.lanes|=d),re(h.return,d,b)}function Ch(h,d,b,A,N,U){var Y=h.memoizedState;Y===null?h.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:A,tail:b,tailMode:N,treeForkCount:U}:(Y.isBackwards=d,Y.rendering=null,Y.renderingStartTime=0,Y.last=A,Y.tail=b,Y.tailMode=N,Y.treeForkCount=U)}function s0(h,d,b){var A=d.pendingProps,N=A.revealOrder,U=A.tail;A=A.children;var Y=er.current,fe=(Y&2)!==0;if(fe?(Y=Y&1|2,d.flags|=128):Y&=1,x(er,Y),_e(h,d,A,b),A=Un?zp:0,!fe&&h!==null&&(h.flags&128)!==0)e:for(h=d.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&Wx(h,b,d);else if(h.tag===19)Wx(h,b,d);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}switch(N){case"forwards":for(b=d.child,N=null;b!==null;)h=b.alternate,h!==null&&Ct(h)===null&&(N=b),b=b.sibling;b=N,b===null?(N=d.child,d.child=null):(N=b.sibling,b.sibling=null),Ch(d,!1,N,b,U,A);break;case"backwards":case"unstable_legacy-backwards":for(b=null,N=d.child,d.child=null;N!==null;){if(h=N.alternate,h!==null&&Ct(h)===null){d.child=N;break}h=N.sibling,N.sibling=b,b=N,N=h}Ch(d,!0,b,null,U,A);break;case"together":Ch(d,!1,null,null,void 0,A);break;default:d.memoizedState=null}return d.child}function dl(h,d,b){if(h!==null&&(d.dependencies=h.dependencies),gu|=d.lanes,(b&d.childLanes)===0)if(h!==null){if(ht(h,d,b,!1),(b&d.childLanes)===0)return null}else return null;if(h!==null&&d.child!==h.child)throw Error(r(153));if(d.child!==null){for(h=d.child,b=Ls(h,h.pendingProps),d.child=b,b.return=d;h.sibling!==null;)h=h.sibling,b=b.sibling=Ls(h,h.pendingProps),b.return=d;b.sibling=null}return d.child}function mp(h,d){return(h.lanes&d)!==0?!0:(h=h.dependencies,!!(h!==null&&Lt(h)))}function o0(h,d,b){switch(d.tag){case 3:vt(d,d.stateNode.containerInfo),He(d,Ui,h.memoizedState.cache),Tt();break;case 27:case 5:Ae(d);break;case 4:vt(d,d.stateNode.containerInfo);break;case 10:He(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,ke(d),null;break;case 13:var A=d.memoizedState;if(A!==null)return A.dehydrated!==null?(ve(d),d.flags|=128,null):(b&d.child.childLanes)!==0?a0(h,d,b):(ve(d),h=dl(h,d,b),h!==null?h.sibling:null);ve(d);break;case 19:var N=(h.flags&128)!==0;if(A=(b&d.childLanes)!==0,A||(ht(h,d,b,!1),A=(b&d.childLanes)!==0),N){if(A)return s0(h,d,b);d.flags|=128}if(N=d.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),x(er,er.current),A)break;return null;case 22:return d.lanes=0,Qi(h,d,b,d.pendingProps);case 24:He(d,Ui,h.memoizedState.cache)}return dl(h,d,b)}function l0(h,d,b){if(h!==null)if(h.memoizedProps!==d.pendingProps)Pi=!0;else{if(!mp(h,b)&&(d.flags&128)===0)return Pi=!1,o0(h,d,b);Pi=(h.flags&131072)!==0}else Pi=!1,Un&&(d.flags&1048576)!==0&&Q(d,zp,d.index);switch(d.lanes=0,d.tag){case 16:e:{var A=d.pendingProps;if(h=un(d.elementType),d.type=h,typeof h=="function")hf(h)?(A=fl(h,A),d.tag=1,d=uf(null,d,h,A,b)):(d.tag=0,d=tu(null,d,h,A,b));else{if(h!=null){var N=h.$$typeof;if(N===Vh){d.tag=11,d=Fe(null,d,h,A,b);break e}else if(N===Rg){d.tag=14,d=xt(null,d,h,A,b);break e}}throw d=g(h)||h,Error(r(306,d,""))}}return d;case 0:return tu(h,d,d.type,d.pendingProps,b);case 1:return A=d.type,N=fl(A,d.pendingProps),uf(h,d,A,N,b);case 3:e:{if(vt(d,d.stateNode.containerInfo),h===null)throw Error(r(387));var U=d.pendingProps;N=d.memoizedState,A=N.element,Yr(h,d),no(d,U,null,b);var Y=d.memoizedState;if(U=Y.cache,He(d,Ui,U),U!==N.cache&&Et(d,[Ui],b,!0),ha(),U=Y.element,Li&&N.isDehydrated)if(N={element:U,isDehydrated:!1,cache:Y.cache},d.updateQueue.baseState=N,d.memoizedState=N,d.flags&256){d=Gx(h,d,U,b);break e}else if(U!==A){A=Te(Error(r(424)),d),Ke(A),d=Gx(h,d,U,b);break e}else for(Li&&(ki=TS(d.stateNode.containerInfo),Cr=d,Un=!0,Cl=null,Fa=!0),b=r_(d,null,U,b),d.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Tt(),U===A){d=dl(h,d,b);break e}_e(h,d,U,b)}d=d.child}return d;case 26:if(mo)return rs(h,d),h===null?(b=$0(d.type,null,d.pendingProps,null))?d.memoizedState=b:Un||(d.stateNode=jg(d.type,d.pendingProps,Qr.current,d)):d.memoizedState=$0(d.type,h.memoizedProps,d.pendingProps,h.memoizedState),null;case 27:if(Mr)return Ae(d),h===null&&Mr&&Un&&(A=d.stateNode=Hg(d.type,d.pendingProps,Qr.current,Fr.current,!1),Cr=d,Fa=!0,ki=V0(d.type,A,ki)),_e(h,d,d.pendingProps.children,b),rs(h,d),h===null&&(d.flags|=4194304),d.child;case 5:return h===null&&Un&&(FS(d.type,d.pendingProps,Fr.current),(N=A=ki)&&(A=CS(A,d.type,d.pendingProps,Fa),A!==null?(d.stateNode=A,Cr=d,ki=ES(A),Fa=!1,N=!0):N=!1),N||ye(d)),Ae(d),N=d.type,U=d.pendingProps,Y=h!==null?h.memoizedProps:null,A=U.children,za(N,U)?A=null:Y!==null&&za(N,Y)&&(d.flags|=32),d.memoizedState!==null&&(N=kt(h,d,$t,null,null,b),ur?xf._currentValue=N:xf._currentValue2=N),rs(h,d),_e(h,d,A,b),d.child;case 6:return h===null&&Un&&(q0(d.pendingProps,Fr.current),(h=b=ki)&&(b=IS(b,d.pendingProps,Fa),b!==null?(d.stateNode=b,Cr=d,ki=null,h=!0):h=!1),h||ye(d)),null;case 13:return a0(h,d,b);case 4:return vt(d,d.stateNode.containerInfo),A=d.pendingProps,h===null?d.child=Jr(d,null,A,b):_e(h,d,A,b),d.child;case 11:return Fe(h,d,d.type,d.pendingProps,b);case 7:return _e(h,d,d.pendingProps,b),d.child;case 8:return _e(h,d,d.pendingProps.children,b),d.child;case 12:return _e(h,d,d.pendingProps.children,b),d.child;case 10:return A=d.pendingProps,He(d,d.type,A.value),_e(h,d,A.children,b),d.child;case 9:return N=d.type._context,A=d.pendingProps.children,dt(d),N=ee(N),A=A(N),d.flags|=1,_e(h,d,A,b),d.child;case 14:return xt(h,d,d.type,d.pendingProps,b);case 15:return vn(h,d,d.type,d.pendingProps,b);case 19:return s0(h,d,b);case 31:return jo(h,d,b);case 22:return Qi(h,d,b,d.pendingProps);case 24:return dt(d),A=ee(Ui),h===null?(N=$e(),N===null&&(N=In,U=Ue(),N.pooledCache=U,U.refCount++,U!==null&&(N.pooledCacheLanes|=b),N=U),d.memoizedState={parent:A,cache:N},zi(d),He(d,Ui,N)):((h.lanes&b)!==0&&(Yr(h,d),no(d,null,null,b),ha()),N=h.memoizedState,U=d.memoizedState,N.parent!==A?(N={parent:A,cache:A},d.memoizedState=N,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=N),He(d,Ui,A)):(A=U.cache,He(d,Ui,A),A!==N.cache&&Et(d,[Ui],b,!0))),_e(h,d,d.pendingProps.children,b),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function so(h){h.flags|=4}function gp(h){ks&&(h.flags|=8)}function qx(h,d){if(h!==null&&h.child===d.child)return!1;if((d.flags&16)!==0)return!0;for(h=d.child;h!==null;){if((h.flags&8218)!==0||(h.subtreeFlags&8218)!==0)return!0;h=h.sibling}return!1}function u0(h,d,b,A){if(Bn)for(b=d.child;b!==null;){if(b.tag===5||b.tag===6)Pp(h,b.stateNode);else if(!(b.tag===4||Mr&&b.tag===27)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===d)break;for(;b.sibling===null;){if(b.return===null||b.return===d)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else if(ks)for(var N=d.child;N!==null;){if(N.tag===5){var U=N.stateNode;b&&A&&(U=bS(U,N.type,N.memoizedProps)),Pp(h,U)}else if(N.tag===6)U=N.stateNode,b&&A&&(U=F0(U,N.memoizedProps)),Pp(h,U);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)U=N.child,U!==null&&(U.return=N),u0(h,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===d)break;for(;N.sibling===null;){if(N.return===null||N.return===d)return;N=N.return}N.sibling.return=N.return,N=N.sibling}}function $x(h,d,b,A){var N=!1;if(ks)for(var U=d.child;U!==null;){if(U.tag===5){var Y=U.stateNode;b&&A&&(Y=bS(Y,U.type,U.memoizedProps)),U0(h,Y)}else if(U.tag===6)Y=U.stateNode,b&&A&&(Y=F0(Y,U.memoizedProps)),U0(h,Y);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)N=U.child,N!==null&&(N.return=U),$x(h,U,!0,!0),N=!0;else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===d)break;for(;U.sibling===null;){if(U.return===null||U.return===d)return N;U=U.return}U.sibling.return=U.return,U=U.sibling}return N}function Xx(h,d){if(ks&&qx(h,d)){h=d.stateNode;var b=h.containerInfo,A=k0();$x(A,d,!1,!1),h.pendingChildren=A,so(d),_S(b,A)}}function c0(h,d,b,A){if(Bn)h.memoizedProps!==A&&so(d);else if(ks){var N=h.stateNode,U=h.memoizedProps;if((h=qx(h,d))||U!==A){var Y=Fr.current;U=yS(N,b,U,A,!h,null),U===N?d.stateNode=N:(gp(d),ls(U,b,A,Y)&&so(d),d.stateNode=U,h&&u0(U,d,!1,!1))}else d.stateNode=N}}function La(h,d,b,A,N){if((h.mode&32)!==0&&(b===null?Rp(d,A):qh(d,b,A))){if(h.flags|=16777216,(N&335544128)===N||T0(d,A))if(ji(h.stateNode,d,A))h.flags|=8192;else if(Fn())h.flags|=8192;else throw Ba=Il,ev}else h.flags&=-16777217}function Ih(h,d){if(Z0(d)){if(h.flags|=16777216,!Q0(d))if(Fn())h.flags|=8192;else throw Ba=Il,ev}else h.flags&=-16777217}function vp(h,d){d!==null&&(h.flags|=4),h.flags&16384&&(d=h.tag!==22?O():536870912,h.lanes|=d,td|=d)}function Ph(h,d){if(!Un)switch(h.tailMode){case"hidden":d=h.tail;for(var b=null;d!==null;)d.alternate!==null&&(b=d),d=d.sibling;b===null?h.tail=null:b.sibling=null;break;case"collapsed":b=h.tail;for(var A=null;b!==null;)b.alternate!==null&&(A=b),b=b.sibling;A===null?d||h.tail===null?h.tail=null:h.tail.sibling=null:A.sibling=null}}function Si(h){var d=h.alternate!==null&&h.alternate.child===h.child,b=0,A=0;if(d)for(var N=h.child;N!==null;)b|=N.lanes|N.childLanes,A|=N.subtreeFlags&65011712,A|=N.flags&65011712,N.return=h,N=N.sibling;else for(N=h.child;N!==null;)b|=N.lanes|N.childLanes,A|=N.subtreeFlags,A|=N.flags,N.return=h,N=N.sibling;return h.subtreeFlags|=A,h.childLanes=b,d}function Yx(h,d,b){var A=d.pendingProps;switch(Me(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Si(d),null;case 1:return Si(d),null;case 3:return b=d.stateNode,A=null,h!==null&&(A=h.memoizedState.cache),d.memoizedState.cache!==A&&(d.flags|=2048),ut(Ui),be(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(h===null||h.child===null)&&(ze(d)?so(d):h===null||h.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Oe())),Xx(h,d),Si(d),null;case 26:if(mo){var N=d.type,U=d.memoizedState;return h===null?(so(d),U!==null?(Si(d),Ih(d,U)):(Si(d),La(d,N,null,A,b))):U?U!==h.memoizedState?(so(d),Si(d),Ih(d,U)):(Si(d),d.flags&=-16777217):(U=h.memoizedProps,Bn?U!==A&&so(d):c0(h,d,N,A),Si(d),La(d,N,U,A,b)),null}case 27:if(Mr){if(mt(d),b=Qr.current,N=d.type,h!==null&&d.stateNode!=null)Bn?h.memoizedProps!==A&&so(d):c0(h,d,N,A);else{if(!A){if(d.stateNode===null)throw Error(r(166));return Si(d),null}h=Fr.current,ze(d)?et(d,h):(h=Hg(N,A,b,h,!0),d.stateNode=h,so(d))}return Si(d),null}case 5:if(mt(d),N=d.type,h!==null&&d.stateNode!=null)c0(h,d,N,A);else{if(!A){if(d.stateNode===null)throw Error(r(166));return Si(d),null}if(U=Fr.current,ze(d))et(d,U),kS(d.stateNode,N,A,U)&&(d.flags|=64);else{var Y=w0(N,A,Qr.current,U,d);gp(d),u0(Y,d,!1,!1),d.stateNode=Y,ls(Y,N,A,U)&&so(d)}}return Si(d),La(d,d.type,h===null?null:h.memoizedProps,d.pendingProps,b),null;case 6:if(h&&d.stateNode!=null)b=h.memoizedProps,Bn?b!==A&&so(d):ks&&(b!==A?(h=Qr.current,b=Fr.current,gp(d),d.stateNode=cu(A,h,b,d)):d.stateNode=h.stateNode);else{if(typeof A!="string"&&d.stateNode===null)throw Error(r(166));if(h=Qr.current,b=Fr.current,ze(d)){if(!Li)throw Error(r(176));if(h=d.stateNode,b=d.memoizedProps,A=null,N=Cr,N!==null)switch(N.tag){case 27:case 5:A=N.memoizedProps}tC(h,b,d,A)||ye(d,!0)}else gp(d),d.stateNode=cu(A,h,b,d)}return Si(d),null;case 31:if(b=d.memoizedState,h===null||h.memoizedState!==null){if(A=ze(d),b!==null){if(h===null){if(!A)throw Error(r(318));if(!Li)throw Error(r(556));if(h=d.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(557));H0(h,d)}else Tt(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Si(d),h=!1}else b=Oe(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=b),h=!0;if(!h)return d.flags&256?(yt(d),d):(yt(d),null);if((d.flags&128)!==0)throw Error(r(558))}return Si(d),null;case 13:if(A=d.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(N=ze(d),A!==null&&A.dehydrated!==null){if(h===null){if(!N)throw Error(r(318));if(!Li)throw Error(r(344));if(N=d.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(r(317));NS(N,d)}else Tt(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Si(d),N=!1}else N=Oe(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=N),N=!0;if(!N)return d.flags&256?(yt(d),d):(yt(d),null)}return yt(d),(d.flags&128)!==0?(d.lanes=b,d):(b=A!==null,h=h!==null&&h.memoizedState!==null,b&&(A=d.child,N=null,A.alternate!==null&&A.alternate.memoizedState!==null&&A.alternate.memoizedState.cachePool!==null&&(N=A.alternate.memoizedState.cachePool.pool),U=null,A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(U=A.memoizedState.cachePool.pool),U!==N&&(A.flags|=2048)),b!==h&&b&&(d.child.flags|=8192),vp(d,d.updateQueue),Si(d),null);case 4:return be(),Xx(h,d),h===null&&pi(d.stateNode.containerInfo),Si(d),null;case 10:return ut(d.type),Si(d),null;case 19:if(_(er),A=d.memoizedState,A===null)return Si(d),null;if(N=(d.flags&128)!==0,U=A.rendering,U===null)if(N)Ph(A,!1);else{if(Wi!==0||h!==null&&(h.flags&128)!==0)for(h=d.child;h!==null;){if(U=Ct(h),U!==null){for(d.flags|=128,Ph(A,!1),h=U.updateQueue,d.updateQueue=h,vp(d,h),d.subtreeFlags=0,h=b,b=d.child;b!==null;)Ag(b,h),b=b.sibling;return x(er,er.current&1|2),Un&&Re(d,A.treeForkCount),d.child}h=h.sibling}A.tail!==null&&ga()>gc&&(d.flags|=128,N=!0,Ph(A,!1),d.lanes=4194304)}else{if(!N)if(h=Ct(U),h!==null){if(d.flags|=128,N=!0,h=h.updateQueue,d.updateQueue=h,vp(d,h),Ph(A,!0),A.tail===null&&A.tailMode==="hidden"&&!U.alternate&&!Un)return Si(d),null}else 2*ga()-A.renderingStartTime>gc&&b!==536870912&&(d.flags|=128,N=!0,Ph(A,!1),d.lanes=4194304);A.isBackwards?(U.sibling=d.child,d.child=U):(h=A.last,h!==null?h.sibling=U:d.child=U,A.last=U)}return A.tail!==null?(h=A.tail,A.rendering=h,A.tail=h.sibling,A.renderingStartTime=ga(),h.sibling=null,b=er.current,x(er,N?b&1|2:b&1),Un&&Re(d,A.treeForkCount),h):(Si(d),null);case 22:case 23:return yt(d),K(),A=d.memoizedState!==null,h!==null?h.memoizedState!==null!==A&&(d.flags|=8192):A&&(d.flags|=8192),A?(b&536870912)!==0&&(d.flags&128)===0&&(Si(d),d.subtreeFlags&6&&(d.flags|=8192)):Si(d),b=d.updateQueue,b!==null&&vp(d,b.retryQueue),b=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),A=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(A=d.memoizedState.cachePool.pool),A!==b&&(d.flags|=2048),h!==null&&_(lc),null;case 24:return b=null,h!==null&&(b=h.memoizedState.cache),d.memoizedState.cache!==b&&(d.flags|=2048),ut(Ui),Si(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function f0(h,d){switch(Me(d),d.tag){case 1:return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 3:return ut(Ui),be(),h=d.flags,(h&65536)!==0&&(h&128)===0?(d.flags=h&-65537|128,d):null;case 26:case 27:case 5:return mt(d),null;case 31:if(d.memoizedState!==null){if(yt(d),d.alternate===null)throw Error(r(340));Tt()}return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 13:if(yt(d),h=d.memoizedState,h!==null&&h.dehydrated!==null){if(d.alternate===null)throw Error(r(340));Tt()}return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 19:return _(er),null;case 4:return be(),null;case 10:return ut(d.type),null;case 22:case 23:return yt(d),K(),h!==null&&_(lc),h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 24:return ut(Ui),null;case 25:return null;default:return null}}function Kx(h,d){switch(Me(d),d.tag){case 3:ut(Ui),be();break;case 26:case 27:case 5:mt(d);break;case 4:be();break;case 31:d.memoizedState!==null&&yt(d);break;case 13:yt(d);break;case 19:_(er);break;case 10:ut(d.type);break;case 22:case 23:yt(d),K(),h!==null&&_(lc);break;case 24:ut(Ui)}}function pl(h,d){try{var b=d.updateQueue,A=b!==null?b.lastEffect:null;if(A!==null){var N=A.next;b=N;do{if((b.tag&h)===h){A=void 0;var U=b.create,Y=b.inst;A=U(),Y.destroy=A}b=b.next}while(b!==N)}}catch(fe){cn(d,d.return,fe)}}function ml(h,d,b){try{var A=d.updateQueue,N=A!==null?A.lastEffect:null;if(N!==null){var U=N.next;A=U;do{if((A.tag&h)===h){var Y=A.inst,fe=Y.destroy;if(fe!==void 0){Y.destroy=void 0,N=d;var Ve=b,lt=fe;try{lt()}catch(bt){cn(N,Ve,bt)}}}A=A.next}while(A!==U)}}catch(bt){cn(d,d.return,bt)}}function Rh(h){var d=h.updateQueue;if(d!==null){var b=h.stateNode;try{Ra(d,b)}catch(A){cn(h,h.return,A)}}}function mg(h,d,b){b.props=fl(h.type,h.memoizedProps),b.state=h.memoizedState;try{b.componentWillUnmount()}catch(A){cn(h,d,A)}}function Nh(h,d){try{var b=h.ref;if(b!==null){switch(h.tag){case 26:case 27:case 5:var A=Hh(h.stateNode);break;case 30:A=h.stateNode;break;default:A=h.stateNode}typeof b=="function"?h.refCleanup=b(A):b.current=A}}catch(N){cn(h,d,N)}}function ma(h,d){var b=h.ref,A=h.refCleanup;if(b!==null)if(typeof A=="function")try{A()}catch(N){cn(h,d,N)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(N){cn(h,d,N)}else b.current=null}function ff(h){var d=h.type,b=h.memoizedProps,A=h.stateNode;try{cS(A,d,b,h)}catch(N){cn(h,h.return,N)}}function yp(h,d,b){try{fS(h.stateNode,h.type,b,d,h)}catch(A){cn(h,h.return,A)}}function h0(h){return h.tag===5||h.tag===3||(mo?h.tag===26:!1)||(Mr?h.tag===27&&Sf(h.type):!1)||h.tag===4}function nu(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||h0(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(Mr&&h.tag===27&&Sf(h.type)||h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function gg(h,d,b){var A=h.tag;if(A===5||A===6)h=h.stateNode,d?dS(b,h,d):N0(b,h);else if(A!==4&&(Mr&&A===27&&Sf(h.type)&&(b=h.stateNode,d=null),h=h.child,h!==null))for(gg(h,d,b),h=h.sibling;h!==null;)gg(h,d,b),h=h.sibling}function _p(h,d,b){var A=h.tag;if(A===5||A===6)h=h.stateNode,d?hS(b,h,d):R0(b,h);else if(A!==4&&(Mr&&A===27&&Sf(h.type)&&(b=h.stateNode),h=h.child,h!==null))for(_p(h,d,b),h=h.sibling;h!==null;)_p(h,d,b),h=h.sibling}function d0(h,d,b){h=h.containerInfo;try{z0(h,b)}catch(A){cn(d,d.return,A)}}function Zx(h){var d=h.stateNode,b=h.memoizedProps;try{yr(h.type,b,d,h)}catch(A){cn(h,h.return,A)}}function ZM(h,d){for(Ng(h.containerInfo),hr=d;hr!==null;)if(h=hr,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,hr=d;else for(;hr!==null;){h=hr;var b=h.alternate;switch(d=h.flags,h.tag){case 0:if((d&4)!==0&&(d=h.updateQueue,d=d!==null?d.events:null,d!==null))for(var A=0;A<d.length;A++){var N=d[A];N.ref.impl=N.nextImpl}break;case 11:case 15:break;case 1:if((d&1024)!==0&&b!==null){d=void 0,A=h,N=b.memoizedProps,b=b.memoizedState;var U=A.stateNode;try{var Y=fl(A.type,N);d=U.getSnapshotBeforeUpdate(Y,b),U.__reactInternalSnapshotBeforeUpdate=d}catch(fe){cn(A,A.return,fe)}}break;case 3:(d&1024)!==0&&Bn&&L0(h.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=h.sibling,d!==null){d.return=h.return,hr=d;break}hr=h.return}}function Qx(h,d,b){var A=b.flags;switch(b.tag){case 0:case 11:case 15:ka(h,b),A&4&&pl(5,b);break;case 1:if(ka(h,b),A&4)if(h=b.stateNode,d===null)try{h.componentDidMount()}catch(Y){cn(b,b.return,Y)}else{var N=fl(b.type,d.memoizedProps);d=d.memoizedState;try{h.componentDidUpdate(N,d,h.__reactInternalSnapshotBeforeUpdate)}catch(Y){cn(b,b.return,Y)}}A&64&&Rh(b),A&512&&Nh(b,b.return);break;case 3:if(ka(h,b),A&64&&(A=b.updateQueue,A!==null)){if(h=null,b.child!==null)switch(b.child.tag){case 27:case 5:h=Hh(b.child.stateNode);break;case 1:h=b.child.stateNode}try{Ra(A,h)}catch(Y){cn(b,b.return,Y)}}break;case 27:Mr&&d===null&&A&4&&Zx(b);case 26:case 5:if(ka(h,b),d===null){if(A&4)ff(b);else if(A&64){h=b.type,d=b.memoizedProps,N=b.stateNode;try{DS(N,h,d,b)}catch(Y){cn(b,b.return,Y)}}}A&512&&Nh(b,b.return);break;case 12:ka(h,b);break;case 31:ka(h,b),A&4&&lo(h,b);break;case 13:ka(h,b),A&4&&xp(h,b),A&64&&(A=b.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(b=QM.bind(null,b),Fg(A,b))));break;case 22:if(A=b.memoizedState!==null||tr,!A){d=d!==null&&d.memoizedState!==null||nr,N=tr;var U=nr;tr=A,(nr=d)&&!U?co(h,b,(b.subtreeFlags&8772)!==0):ka(h,b),tr=N,nr=U}break;case 30:break;default:ka(h,b)}}function p0(h){var d=h.alternate;d!==null&&(h.alternate=null,p0(d)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(d=h.stateNode,d!==null&&Og(d)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function oo(h,d,b){for(b=b.child;b!==null;)bp(h,d,b),b=b.sibling}function bp(h,d,b){if(fs&&typeof fs.onCommitFiberUnmount=="function")try{fs.onCommitFiberUnmount(Tf,b)}catch{}switch(b.tag){case 26:if(mo){nr||ma(b,d),oo(h,d,b),b.memoizedState?sc(b.memoizedState):b.stateNode&&K0(b.stateNode);break}case 27:if(Mr){nr||ma(b,d);var A=Gi,N=dr;Sf(b.type)&&(Gi=b.stateNode,dr=!1),oo(h,d,b),zr(b.stateNode),Gi=A,dr=N;break}case 5:nr||ma(b,d);case 6:if(Bn){if(A=Gi,N=dr,Gi=null,oo(h,d,b),Gi=A,dr=N,Gi!==null)if(dr)try{O0(Gi,b.stateNode)}catch(U){cn(b,d,U)}else try{pS(Gi,b.stateNode)}catch(U){cn(b,d,U)}}else oo(h,d,b);break;case 18:Bn&&Gi!==null&&(dr?Bg(Gi,b.stateNode):W0(Gi,b.stateNode));break;case 4:Bn?(A=Gi,N=dr,Gi=b.stateNode.containerInfo,dr=!0,oo(h,d,b),Gi=A,dr=N):(ks&&d0(b.stateNode,b,k0()),oo(h,d,b));break;case 0:case 11:case 14:case 15:ml(2,b,d),nr||ml(4,b,d),oo(h,d,b);break;case 1:nr||(ma(b,d),A=b.stateNode,typeof A.componentWillUnmount=="function"&&mg(b,d,A)),oo(h,d,b);break;case 21:oo(h,d,b);break;case 22:nr=(A=nr)||b.memoizedState!==null,oo(h,d,b),nr=A;break;default:oo(h,d,b)}}function lo(h,d){if(Li&&d.memoizedState===null&&(h=d.alternate,h!==null&&(h=h.memoizedState,h!==null))){h=h.dehydrated;try{nC(h)}catch(b){cn(d,d.return,b)}}}function xp(h,d){if(Li&&d.memoizedState===null&&(h=d.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{iC(h)}catch(b){cn(d,d.return,b)}}function uo(h){switch(h.tag){case 31:case 13:case 19:var d=h.stateNode;return d===null&&(d=h.stateNode=new s_),d;case 22:return h=h.stateNode,d=h._retryCache,d===null&&(d=h._retryCache=new s_),d;default:throw Error(r(435,h.tag))}}function iu(h,d){var b=uo(h);d.forEach(function(A){if(!b.has(A)){b.add(A);var N=JM.bind(null,h,A);A.then(N,N)}})}function kr(h,d){var b=d.deletions;if(b!==null)for(var A=0;A<b.length;A++){var N=b[A],U=h,Y=d;if(Bn){var fe=Y;e:for(;fe!==null;){switch(fe.tag){case 27:if(Mr){if(Sf(fe.type)){Gi=fe.stateNode,dr=!1;break e}break}case 5:Gi=fe.stateNode,dr=!1;break e;case 3:case 4:Gi=fe.stateNode.containerInfo,dr=!0;break e}fe=fe.return}if(Gi===null)throw Error(r(160));bp(U,Y,N),Gi=null,dr=!1}else bp(U,Y,N);U=N.alternate,U!==null&&(U.return=null),N.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)Sp(d,h),d=d.sibling}function Sp(h,d){var b=h.alternate,A=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:kr(d,h),Ur(h),A&4&&(ml(3,h,h.return),pl(3,h),ml(5,h,h.return));break;case 1:kr(d,h),Ur(h),A&512&&(nr||b===null||ma(b,b.return)),A&64&&tr&&(h=h.updateQueue,h!==null&&(A=h.callbacks,A!==null&&(b=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=b===null?A:b.concat(A))));break;case 26:if(mo){var N=ci;if(kr(d,h),Ur(h),A&512&&(nr||b===null||ma(b,b.return)),A&4){A=b!==null?b.memoizedState:null;var U=h.memoizedState;b===null?U===null?h.stateNode===null?h.stateNode=BS(N,h.type,h.memoizedProps,h):Y0(N,h.type,h.stateNode):h.stateNode=X0(N,U,h.memoizedProps):A!==U?(A===null?b.stateNode!==null&&K0(b.stateNode):sc(A),U===null?Y0(N,h.type,h.stateNode):X0(N,U,h.memoizedProps)):U===null&&h.stateNode!==null&&yp(h,h.memoizedProps,b.memoizedProps)}break}case 27:if(Mr){kr(d,h),Ur(h),A&512&&(nr||b===null||ma(b,b.return)),b!==null&&A&4&&yp(h,h.memoizedProps,b.memoizedProps);break}case 5:if(kr(d,h),Ur(h),A&512&&(nr||b===null||ma(b,b.return)),Bn){if(h.flags&32){N=h.stateNode;try{D0(N)}catch(pt){cn(h,h.return,pt)}}A&4&&h.stateNode!=null&&(N=h.memoizedProps,yp(h,N,b!==null?b.memoizedProps:N)),A&1024&&(Kh=!0)}else ks&&h.alternate!==null&&(h.alternate.stateNode=h.stateNode);break;case 6:if(kr(d,h),Ur(h),A&4&&Bn){if(h.stateNode===null)throw Error(r(162));A=h.memoizedProps,b=b!==null?b.memoizedProps:A,N=h.stateNode;try{uS(N,b,A)}catch(pt){cn(h,h.return,pt)}}break;case 3:if(mo?(VS(),N=ci,ci=Dp(d.containerInfo),kr(d,h),ci=N):kr(d,h),Ur(h),A&4){if(Bn&&Li&&b!==null&&b.memoizedState.isDehydrated)try{LS(d.containerInfo)}catch(pt){cn(h,h.return,pt)}if(ks){A=d.containerInfo,b=d.pendingChildren;try{z0(A,b)}catch(pt){cn(h,h.return,pt)}}}Kh&&(Kh=!1,vg(h));break;case 4:mo?(b=ci,ci=Dp(h.stateNode.containerInfo),kr(d,h),Ur(h),ci=b):(kr(d,h),Ur(h)),A&4&&ks&&d0(h.stateNode,h,h.stateNode.pendingChildren);break;case 12:kr(d,h),Ur(h);break;case 31:kr(d,h),Ur(h),A&4&&(A=h.updateQueue,A!==null&&(h.updateQueue=null,iu(h,A)));break;case 13:kr(d,h),Ur(h),h.child.flags&8192&&h.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(Gp=ga()),A&4&&(A=h.updateQueue,A!==null&&(h.updateQueue=null,iu(h,A)));break;case 22:N=h.memoizedState!==null;var Y=b!==null&&b.memoizedState!==null,fe=tr,Ve=nr;if(tr=fe||N,nr=Ve||Y,kr(d,h),nr=Ve,tr=fe,Ur(h),A&8192&&(d=h.stateNode,d._visibility=N?d._visibility&-2:d._visibility|1,N&&(b===null||Y||tr||nr||$u(h)),Bn)){e:if(b=null,Bn)for(d=h;;){if(d.tag===5||mo&&d.tag===26){if(b===null){Y=b=d;try{U=Y.stateNode,N?eC(U):gS(Y.stateNode,Y.memoizedProps)}catch(pt){cn(Y,Y.return,pt)}}}else if(d.tag===6){if(b===null){Y=d;try{var lt=Y.stateNode;N?mS(lt):vS(lt,Y.memoizedProps)}catch(pt){cn(Y,Y.return,pt)}}}else if(d.tag===18){if(b===null){Y=d;try{var bt=Y.stateNode;N?US(bt):zS(Y.stateNode)}catch(pt){cn(Y,Y.return,pt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===h)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;b===d&&(b=null),d=d.return}b===d&&(b=null),d.sibling.return=d.return,d=d.sibling}}A&4&&(A=h.updateQueue,A!==null&&(b=A.retryQueue,b!==null&&(A.retryQueue=null,iu(h,b))));break;case 19:kr(d,h),Ur(h),A&4&&(A=h.updateQueue,A!==null&&(h.updateQueue=null,iu(h,A)));break;case 30:break;case 21:break;default:kr(d,h),Ur(h)}}function Ur(h){var d=h.flags;if(d&2){try{for(var b,A=h.return;A!==null;){if(h0(A)){b=A;break}A=A.return}if(Bn){if(b==null)throw Error(r(160));switch(b.tag){case 27:if(Mr){var N=b.stateNode,U=nu(h);_p(h,U,N);break}case 5:var Y=b.stateNode;b.flags&32&&(D0(Y),b.flags&=-33);var fe=nu(h);_p(h,fe,Y);break;case 3:case 4:var Ve=b.stateNode.containerInfo,lt=nu(h);gg(h,lt,Ve);break;default:throw Error(r(161))}}}catch(bt){cn(h,h.return,bt)}h.flags&=-3}d&4096&&(h.flags&=-4097)}function vg(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var d=h;vg(d),d.tag===5&&d.flags&1024&&M0(d.stateNode),h=h.sibling}}function ka(h,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)Qx(h,d.alternate,d),d=d.sibling}function $u(h){for(h=h.child;h!==null;){var d=h;switch(d.tag){case 0:case 11:case 14:case 15:ml(4,d,d.return),$u(d);break;case 1:ma(d,d.return);var b=d.stateNode;typeof b.componentWillUnmount=="function"&&mg(d,d.return,b),$u(d);break;case 27:Mr&&zr(d.stateNode);case 26:case 5:ma(d,d.return),$u(d);break;case 22:d.memoizedState===null&&$u(d);break;case 30:$u(d);break;default:$u(d)}h=h.sibling}}function co(h,d,b){for(b=b&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var A=d.alternate,N=h,U=d,Y=U.flags;switch(U.tag){case 0:case 11:case 15:co(N,U,b),pl(4,U);break;case 1:if(co(N,U,b),A=U,N=A.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(lt){cn(A,A.return,lt)}if(A=U,N=A.updateQueue,N!==null){var fe=A.stateNode;try{var Ve=N.shared.hiddenCallbacks;if(Ve!==null)for(N.shared.hiddenCallbacks=null,N=0;N<Ve.length;N++)Is(Ve[N],fe)}catch(lt){cn(A,A.return,lt)}}b&&Y&64&&Rh(U),Nh(U,U.return);break;case 27:Mr&&Zx(U);case 26:case 5:co(N,U,b),b&&A===null&&Y&4&&ff(U),Nh(U,U.return);break;case 12:co(N,U,b);break;case 31:co(N,U,b),b&&Y&4&&lo(N,U);break;case 13:co(N,U,b),b&&Y&4&&xp(N,U);break;case 22:U.memoizedState===null&&co(N,U,b),Nh(U,U.return);break;case 30:break;default:co(N,U,b)}d=d.sibling}}function Xu(h,d){var b=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),h=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(h=d.memoizedState.cachePool.pool),h!==b&&(h!=null&&h.refCount++,b!=null&&Ye(b))}function m0(h,d){h=null,d.alternate!==null&&(h=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==h&&(d.refCount++,h!=null&&Ye(h))}function Bi(h,d,b,A){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)yg(h,d,b,A),d=d.sibling}function yg(h,d,b,A){var N=d.flags;switch(d.tag){case 0:case 11:case 15:Bi(h,d,b,A),N&2048&&pl(9,d);break;case 1:Bi(h,d,b,A);break;case 3:Bi(h,d,b,A),N&2048&&(h=null,d.alternate!==null&&(h=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==h&&(d.refCount++,h!=null&&Ye(h)));break;case 12:if(N&2048){Bi(h,d,b,A),h=d.stateNode;try{var U=d.memoizedProps,Y=U.id,fe=U.onPostCommit;typeof fe=="function"&&fe(Y,d.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(Ve){cn(d,d.return,Ve)}}else Bi(h,d,b,A);break;case 31:Bi(h,d,b,A);break;case 13:Bi(h,d,b,A);break;case 23:break;case 22:U=d.stateNode,Y=d.alternate,d.memoizedState!==null?U._visibility&2?Bi(h,d,b,A):Oh(h,d):U._visibility&2?Bi(h,d,b,A):(U._visibility|=2,as(h,d,b,A,(d.subtreeFlags&10256)!==0||!1)),N&2048&&Xu(Y,d);break;case 24:Bi(h,d,b,A),N&2048&&m0(d.alternate,d);break;default:Bi(h,d,b,A)}}function as(h,d,b,A,N){for(N=N&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var U=h,Y=d,fe=b,Ve=A,lt=Y.flags;switch(Y.tag){case 0:case 11:case 15:as(U,Y,fe,Ve,N),pl(8,Y);break;case 23:break;case 22:var bt=Y.stateNode;Y.memoizedState!==null?bt._visibility&2?as(U,Y,fe,Ve,N):Oh(U,Y):(bt._visibility|=2,as(U,Y,fe,Ve,N)),N&&lt&2048&&Xu(Y.alternate,Y);break;case 24:as(U,Y,fe,Ve,N),N&&lt&2048&&m0(Y.alternate,Y);break;default:as(U,Y,fe,Ve,N)}d=d.sibling}}function Oh(h,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var b=h,A=d,N=A.flags;switch(A.tag){case 22:Oh(b,A),N&2048&&Xu(A.alternate,A);break;case 24:Oh(b,A),N&2048&&m0(A.alternate,A);break;default:Oh(b,A)}d=d.sibling}}function gl(h,d,b){if(h.subtreeFlags&Bs)for(h=h.child;h!==null;)Yu(h,d,b),h=h.sibling}function Yu(h,d,b){switch(h.tag){case 26:if(gl(h,d,b),h.flags&Bs)if(h.memoizedState!==null)jS(b,ci,h.memoizedState,h.memoizedProps);else{var A=h.stateNode,N=h.type;h=h.memoizedProps,((d&335544128)===d||T0(N,h))&&Dg(b,A,N,h)}break;case 5:gl(h,d,b),h.flags&Bs&&(A=h.stateNode,N=h.type,h=h.memoizedProps,((d&335544128)===d||T0(N,h))&&Dg(b,A,N,h));break;case 3:case 4:mo?(A=ci,ci=Dp(h.stateNode.containerInfo),gl(h,d,b),ci=A):gl(h,d,b);break;case 22:h.memoizedState===null&&(A=h.alternate,A!==null&&A.memoizedState!==null?(A=Bs,Bs=16777216,gl(h,d,b),Bs=A):gl(h,d,b));break;default:gl(h,d,b)}}function _g(h){var d=h.alternate;if(d!==null&&(h=d.child,h!==null)){d.child=null;do d=h.sibling,h.sibling=null,h=d;while(h!==null)}}function Dh(h){var d=h.deletions;if((h.flags&16)!==0){if(d!==null)for(var b=0;b<d.length;b++){var A=d[b];hr=A,Os(A,h)}_g(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)bg(h),h=h.sibling}function bg(h){switch(h.tag){case 0:case 11:case 15:Dh(h),h.flags&2048&&ml(9,h,h.return);break;case 3:Dh(h);break;case 12:Dh(h);break;case 22:var d=h.stateNode;h.memoizedState!==null&&d._visibility&2&&(h.return===null||h.return.tag!==13)?(d._visibility&=-3,wp(h)):Dh(h);break;default:Dh(h)}}function wp(h){var d=h.deletions;if((h.flags&16)!==0){if(d!==null)for(var b=0;b<d.length;b++){var A=d[b];hr=A,Os(A,h)}_g(h)}for(h=h.child;h!==null;){switch(d=h,d.tag){case 0:case 11:case 15:ml(8,d,d.return),wp(d);break;case 22:b=d.stateNode,b._visibility&2&&(b._visibility&=-3,wp(d));break;default:wp(d)}h=h.sibling}}function Os(h,d){for(;hr!==null;){var b=hr;switch(b.tag){case 0:case 11:case 15:ml(8,b,d);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var A=b.memoizedState.cachePool.pool;A!=null&&A.refCount++}break;case 24:Ye(b.memoizedState.cache)}if(A=b.child,A!==null)A.return=b,hr=A;else e:for(b=h;hr!==null;){A=hr;var N=A.sibling,U=A.return;if(p0(A),A===b){hr=null;break e}if(N!==null){N.return=U,hr=N;break e}hr=U}}}function Ku(h){var d=bn(h);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(r(364));return d}if(h=cr(h),h===null)throw Error(r(362));return h.stateNode.current}function Zu(h,d){var b=h.tag;switch(d.$$typeof){case wo:if(h.type===d.value)return!0;break;case Qh:e:{for(d=d.value,h=[h,0],b=0;b<h.length;){var A=h[b++],N=A.tag,U=h[b++],Y=d[U];if(N!==5&&N!==26&&N!==27||!rc(A)){for(;Y!=null&&Zu(A,Y);)U++,Y=d[U];if(U===d.length){d=!0;break e}else for(A=A.child;A!==null;)h.push(A,U),A=A.sibling}}d=!1}return d;case Jh:if((b===5||b===26||b===27)&&P0(h.stateNode,d.value))return!0;break;case hc:if((b===5||b===6||b===26||b===27)&&(h=Np(h),h!==null&&0<=h.indexOf(d.value)))return!0;break;case jp:if((b===5||b===26||b===27)&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function Lh(h){switch(h.$$typeof){case wo:return"<"+(g(h.value)||"Unknown")+">";case Qh:return":has("+(Lh(h)||"")+")";case Jh:return'[role="'+h.value+'"]';case hc:return'"'+h.value+'"';case jp:return'[data-testname="'+h.value+'"]';default:throw Error(r(365))}}function kh(h,d){var b=[];h=[h,0];for(var A=0;A<h.length;){var N=h[A++],U=N.tag,Y=h[A++],fe=d[Y];if(U!==5&&U!==26&&U!==27||!rc(N)){for(;fe!=null&&Zu(N,fe);)Y++,fe=d[Y];if(Y===d.length)b.push(N);else for(N=N.child;N!==null;)h.push(N,Y),N=N.sibling}}return b}function ss(h,d){if(!Ar)throw Error(r(363));h=Ku(h),h=kh(h,d),d=[],h=Array.from(h);for(var b=0;b<h.length;){var A=h[b++],N=A.tag;if(N===5||N===26||N===27)rc(A)||d.push(A.stateNode);else for(A=A.child;A!==null;)h.push(A),A=A.sibling}return d}function Di(){return(Dn&2)!==0&&zn!==0?zn&-zn:Zt.T!==null?ge():Wh()}function ru(){if(ja===0)if((zn&536870912)===0||Un){var h=Ef;Ef<<=1,(Ef&3932160)===0&&(Ef=262144),ja=h}else ja=536870912;return h=hs.current,h!==null&&(h.flags|=32),ja}function Vi(h,d,b){(h===In&&(fi===2||fi===9)||h.cancelPendingCommit!==null)&&(Ji(h,0),yl(h,zn,ja,!1)),B(h,b),((Dn&2)===0||h!==In)&&(h===In&&((Dn&2)===0&&(mc|=b),Wi===4&&yl(h,zn,ja,!1)),At(h))}function Ho(h,d,b){if((Dn&6)!==0)throw Error(r(327));var A=!b&&(d&127)===0&&(d&h.expiredLanes)===0||I(h,d),N=A?tS(h,d):_l(h,d,!0),U=A;do{if(N===0){dc&&!A&&yl(h,d,0,!1);break}else{if(b=h.current.alternate,U&&!Jx(b)){N=_l(h,d,!1),U=!1;continue}if(N===2){if(U=d,h.errorRecoveryDisabledLanes&U)var Y=0;else Y=h.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){d=Y;e:{var fe=h;N=Hp;var Ve=Li&&fe.current.memoizedState.isDehydrated;if(Ve&&(Ji(fe,Y).flags|=256),Y=_l(fe,Y,!1),Y!==2){if(pc&&!Ve){fe.errorRecoveryDisabledLanes|=U,mc|=U,N=4;break e}U=ps,ps=N,U!==null&&(ps===null?ps=U:ps.push.apply(ps,U))}N=Y}if(U=!1,N!==2)continue}}if(N===1){Ji(h,0),yl(h,d,0,!0);break}e:{switch(A=h,U=N,U){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:yl(A,d,ja,!$o);break e;case 2:ps=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(N=Gp+300-ga(),10<N)){if(yl(A,d,ja,!$o),w(A,0,!0)!==0)break e;Ol=d,A.timeoutHandle=E0(vl.bind(null,A,b,ps,Wp,nv,d,ja,mc,td,$o,U,"Throttled",-0,0),N);break e}vl(A,b,ps,Wp,nv,d,ja,mc,td,$o,U,null,-0,0)}}break}while(!0);At(h)}function vl(h,d,b,A,N,U,Y,fe,Ve,lt,bt,pt,Nt,yn){if(h.timeoutHandle=us,pt=d.subtreeFlags,pt&8192||(pt&16785408)===16785408){pt=A0(),Yu(d,U,pt);var pr=(U&62914560)===U?Gp-ga():(U&4194048)===U?Rf-ga():0;if(pr=lS(pt,pr),pr!==null){Ol=U,h.cancelPendingCommit=pr(xl.bind(null,h,d,U,b,A,N,Y,fe,Ve,bt,pt,null,Nt,yn)),yl(h,U,Y,!lt);return}}xl(h,d,U,b,A,N,Y,fe,Ve)}function Jx(h){for(var d=h;;){var b=d.tag;if((b===0||b===11||b===15)&&d.flags&16384&&(b=d.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var A=0;A<b.length;A++){var N=b[A],U=N.getSnapshot;N=N.value;try{if(!fr(U(),N))return!1}catch{return!1}}if(b=d.child,d.subtreeFlags&16384&&b!==null)b.return=d,d=b;else{if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function yl(h,d,b,A){d&=~ed,d&=~mc,h.suspendedLanes|=d,h.pingedLanes&=~d,A&&(h.warmLanes|=d),A=h.expirationTimes;for(var N=d;0<N;){var U=31-cs(N),Y=1<<U;A[U]=-1,N&=~Y}b!==0&&z(h,b,d)}function xg(){return(Dn&6)===0?(gt(0),!1):!0}function Sg(){if(Ln!==null){if(fi===0)var h=Ln.return;else h=Ln,Wo=Ei=null,Kt(h),uc=null,Af=0,h=Ln;for(;h!==null;)Kx(h.alternate,h),h=h.return;Ln=null}}function Ji(h,d){var b=h.timeoutHandle;b!==us&&(h.timeoutHandle=us,oS(b)),b=h.cancelPendingCommit,b!==null&&(h.cancelPendingCommit=null,b()),Ol=0,Sg(),In=h,Ln=b=Ls(h.current,null),zn=d,fi=0,_r=null,$o=!1,dc=I(h,d),pc=!1,td=ja=ed=mc=gu=Wi=0,ps=Hp=null,nv=!1,(d&8)!==0&&(d|=d&32);var A=h.entangledLanes;if(A!==0)for(h=h.entanglements,A&=d;0<A;){var N=31-cs(A),U=1<<N;d|=h[N],A&=~U}return Nl=d,to(),b}function wi(h,d){xn=null,Zt.H=Fs,d===Pr||d===xo?(d=en(),fi=3):d===ev?(d=en(),fi=4):fi=d===Va?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,_r=d,Ln===null&&(Wi=1,of(h,Te(d,h.current)))}function Fn(){var h=hs.current;return h===null?!0:(zn&4194048)===zn?ds===null:(zn&62914560)===zn||(zn&536870912)!==0?h===ds:!1}function au(){var h=Zt.H;return Zt.H=Fs,h===null?Fs:h}function Ds(){var h=Zt.A;return Zt.A=Zh,h}function Uh(){Wi=4,$o||(zn&4194048)!==zn&&hs.current!==null||(dc=!0),(gu&134217727)===0&&(mc&134217727)===0||In===null||yl(In,zn,ja,!1)}function _l(h,d,b){var A=Dn;Dn|=2;var N=au(),U=Ds();(In!==h||zn!==d)&&(Wp=null,Ji(h,d)),d=!1;var Y=Wi;e:do try{if(fi!==0&&Ln!==null){var fe=Ln,Ve=_r;switch(fi){case 8:Sg(),Y=6;break e;case 3:case 2:case 9:case 6:hs.current===null&&(d=!0);var lt=fi;if(fi=0,_r=null,bl(h,fe,Ve,lt),b&&dc){Y=0;break e}break;default:lt=fi,fi=0,_r=null,bl(h,fe,Ve,lt)}}eS(),Y=Wi;break}catch(bt){wi(h,bt)}while(!0);return d&&h.shellSuspendCounter++,Wo=Ei=null,Dn=A,Zt.H=N,Zt.A=U,Ln===null&&(In=null,zn=0,to()),Y}function eS(){for(;Ln!==null;)Qu(Ln)}function tS(h,d){var b=Dn;Dn|=2;var A=au(),N=Ds();In!==h||zn!==d?(Wp=null,gc=ga()+500,Ji(h,d)):dc=I(h,d);e:do try{if(fi!==0&&Ln!==null){d=Ln;var U=_r;t:switch(fi){case 1:fi=0,_r=null,bl(h,d,U,1);break;case 2:case 9:if(ot(U)){fi=0,_r=null,wg(d);break}d=function(){fi!==2&&fi!==9||In!==h||(fi=7),At(h)},U.then(d,d);break e;case 3:fi=7;break e;case 4:fi=5;break e;case 7:ot(U)?(fi=0,_r=null,wg(d)):(fi=0,_r=null,bl(h,d,U,7));break;case 5:var Y=null;switch(Ln.tag){case 26:Y=Ln.memoizedState;case 5:case 27:var fe=Ln,Ve=fe.type,lt=fe.pendingProps;if(Y?Q0(Y):ji(fe.stateNode,Ve,lt)){fi=0,_r=null;var bt=fe.sibling;if(bt!==null)Ln=bt;else{var pt=fe.return;pt!==null?(Ln=pt,Fh(pt)):Ln=null}break t}}fi=0,_r=null,bl(h,d,U,5);break;case 6:fi=0,_r=null,bl(h,d,U,6);break;case 8:Sg(),Wi=6;break e;default:throw Error(r(462))}}zh();break}catch(Nt){wi(h,Nt)}while(!0);return Wo=Ei=null,Zt.H=A,Zt.A=N,Dn=b,Ln!==null?0:(In=null,zn=0,to(),Wi)}function zh(){for(;Ln!==null&&!GS();)Qu(Ln)}function Qu(h){var d=l0(h.alternate,h,Nl);h.memoizedProps=h.pendingProps,d===null?Fh(h):Ln=d}function wg(h){var d=h,b=d.alternate;switch(d.tag){case 15:case 0:d=lf(b,d,d.pendingProps,d.type,void 0,zn);break;case 11:d=lf(b,d,d.pendingProps,d.type.render,d.ref,zn);break;case 5:Kt(d);default:Kx(b,d),d=Ln=Ag(d,Nl),d=l0(b,d,Nl)}h.memoizedProps=h.pendingProps,d===null?Fh(h):Ln=d}function bl(h,d,b,A){Wo=Ei=null,Kt(d),uc=null,Af=0;var N=d.return;try{if(te(h,N,d,b,zn)){Wi=1,of(h,Te(b,h.current)),Ln=null;return}}catch(U){if(N!==null)throw Ln=N,U;Wi=1,of(h,Te(b,h.current)),Ln=null;return}d.flags&32768?(Un||A===1?h=!0:dc||(zn&536870912)!==0?h=!1:($o=h=!0,(A===2||A===9||A===3||A===6)&&(A=hs.current,A!==null&&A.tag===13&&(A.flags|=16384))),Ju(d,h)):Fh(d)}function Fh(h){var d=h;do{if((d.flags&32768)!==0){Ju(d,$o);return}h=d.return;var b=Yx(d.alternate,d,Nl);if(b!==null){Ln=b;return}if(d=d.sibling,d!==null){Ln=d;return}Ln=d=h}while(d!==null);Wi===0&&(Wi=5)}function Ju(h,d){do{var b=f0(h.alternate,h);if(b!==null){b.flags&=32767,Ln=b;return}if(b=h.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!d&&(h=h.sibling,h!==null)){Ln=h;return}Ln=h=b}while(h!==null);Wi=6,Ln=null}function xl(h,d,b,A,N,U,Y,fe,Ve){h.cancelPendingCommit=null;do wl();while(br!==0);if((Dn&6)!==0)throw Error(r(327));if(d!==null){if(d===h.current)throw Error(r(177));if(U=d.lanes|d.childLanes,U|=Mf,L(h,b,U,Y,fe,Ve),h===In&&(Ln=In=null,zn=0),Nf=d,yu=h,Ol=b,nd=U,iv=N,o_=A,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,vr(kp,function(){return Ep(),null})):(h.callbackNode=null,h.callbackPriority=0),A=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||A){A=Zt.T,Zt.T=null,N=po(),kn(2),Y=Dn,Dn|=4;try{ZM(h,d,b)}finally{Dn=Y,kn(N),Zt.T=A}}br=1,su(),Sl(),Eg()}}function su(){if(br===1){br=0;var h=yu,d=Nf,b=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||b){b=Zt.T,Zt.T=null;var A=po();kn(2);var N=Dn;Dn|=4;try{Sp(d,h),sS(h.containerInfo)}finally{Dn=N,kn(A),Zt.T=b}}h.current=d,br=2}}function Sl(){if(br===2){br=0;var h=yu,d=Nf,b=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||b){b=Zt.T,Zt.T=null;var A=po();kn(2);var N=Dn;Dn|=4;try{Qx(h,d.alternate,d)}finally{Dn=N,kn(A),Zt.T=b}}br=3}}function Eg(){if(br===4||br===3){br=0,e_();var h=yu,d=Nf,b=Ol,A=o_;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?br=5:(br=0,Nf=yu=null,Tg(h,h.pendingLanes));var N=h.pendingLanes;if(N===0&&(vu=null),q(b),d=d.stateNode,fs&&typeof fs.onCommitFiberRoot=="function")try{fs.onCommitFiberRoot(Tf,d,void 0,(d.current.flags&128)===128)}catch{}if(A!==null){d=Zt.T,N=po(),kn(2),Zt.T=null;try{for(var U=h.onRecoverableError,Y=0;Y<A.length;Y++){var fe=A[Y];U(fe.value,{componentStack:fe.stack})}}finally{Zt.T=d,kn(N)}}(Ol&3)!==0&&wl(),At(h),N=h.pendingLanes,(b&261930)!==0&&(N&42)!==0?h===qp?Qn++:(Qn=0,qp=h):Qn=0,Li&&Op(),gt(0)}}function Tg(h,d){(h.pooledCacheLanes&=d)===0&&(d=h.pooledCache,d!=null&&(h.pooledCache=null,Ye(d)))}function wl(){return su(),Sl(),Eg(),Ep()}function Ep(){if(br!==5)return!1;var h=yu,d=nd;nd=0;var b=q(Ol),A=32>b?32:b;b=Zt.T;var N=po();try{kn(A),Zt.T=null,A=iv,iv=null;var U=yu,Y=Ol;if(br=0,Nf=yu=null,Ol=0,(Dn&6)!==0)throw Error(r(331));var fe=Dn;if(Dn|=4,bg(U.current),yg(U,U.current,Y,A),Dn=fe,gt(0,!1),fs&&typeof fs.onPostCommitFiberRoot=="function")try{fs.onPostCommitFiberRoot(Tf,U)}catch{}return!0}finally{kn(N),Zt.T=b,Tg(h,d)}}function ec(h,d,b){d=Te(b,d),d=E(h.stateNode,d,2),h=Pa(h,d,2),h!==null&&(B(h,2),At(h))}function cn(h,d,b){if(h.tag===3)ec(h,h,b);else for(;d!==null;){if(d.tag===3){ec(d,h,b);break}else if(d.tag===1){var A=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(vu===null||!vu.has(A))){h=Te(b,h),b=V(2),A=Pa(d,b,2),A!==null&&($(b,A,d,h),B(A,2),At(A));break}}d=d.return}}function Bh(h,d,b){var A=h.pingCache;if(A===null){A=h.pingCache=new Vs;var N=new Set;A.set(d,N)}else N=A.get(d),N===void 0&&(N=new Set,A.set(d,N));N.has(b)||(pc=!0,N.add(b),h=nS.bind(null,h,d,b),d.then(h,h))}function nS(h,d,b){var A=h.pingCache;A!==null&&A.delete(d),h.pingedLanes|=h.suspendedLanes&b,h.warmLanes&=~b,In===h&&(zn&b)===b&&(Wi===4||Wi===3&&(zn&62914560)===zn&&300>ga()-Gp?(Dn&2)===0&&Ji(h,0):ed|=b,td===zn&&(td=0)),At(h)}function iS(h,d){d===0&&(d=O()),h=Mi(h,d),h!==null&&(B(h,d),At(h))}function QM(h){var d=h.memoizedState,b=0;d!==null&&(b=d.retryLane),iS(h,b)}function JM(h,d){var b=0;switch(h.tag){case 31:case 13:var A=h.stateNode,N=h.memoizedState;N!==null&&(b=N.retryLane);break;case 19:A=h.stateNode;break;case 22:A=h.stateNode._retryCache;break;default:throw Error(r(314))}A!==null&&A.delete(d),iS(h,b)}function vr(h,d){return Lp(h,d)}function g0(h,d,b,A){this.tag=h,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hf(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Ls(h,d){var b=h.alternate;return b===null?(b=t(h.tag,d,h.key,h.mode),b.elementType=h.elementType,b.type=h.type,b.stateNode=h.stateNode,b.alternate=h,h.alternate=b):(b.pendingProps=d,b.type=h.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=h.flags&65011712,b.childLanes=h.childLanes,b.lanes=h.lanes,b.child=h.child,b.memoizedProps=h.memoizedProps,b.memoizedState=h.memoizedState,b.updateQueue=h.updateQueue,d=h.dependencies,b.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},b.sibling=h.sibling,b.index=h.index,b.ref=h.ref,b.refCleanup=h.refCleanup,b}function Ag(h,d){h.flags&=65011714;var b=h.alternate;return b===null?(h.childLanes=0,h.lanes=d,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=b.childLanes,h.lanes=b.lanes,h.child=b.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=b.memoizedProps,h.memoizedState=b.memoizedState,h.updateQueue=b.updateQueue,h.type=b.type,d=b.dependencies,h.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),h}function ou(h,d,b,A,N,U){var Y=0;if(A=h,typeof h=="function")hf(h)&&(Y=1);else if(typeof h=="string")Y=mo&&Mr?Vg(h,b,Fr.current)?26:J0(h)?27:5:mo?Vg(h,b,Fr.current)?26:5:Mr&&J0(h)?27:5;else e:switch(h){case Cp:return h=t(31,b,d,N),h.elementType=Cp,h.lanes=U,h;case gf:return fo(b.children,N,U,d);case vf:Y=8,N|=24;break;case yf:return h=t(12,b,d,N|2),h.elementType=yf,h.lanes=U,h;case Pg:return h=t(13,b,d,N),h.elementType=Pg,h.lanes=U,h;case lu:return h=t(19,b,d,N),h.elementType=lu,h.lanes=U,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case ho:Y=10;break e;case Mp:Y=9;break e;case Vh:Y=11;break e;case Rg:Y=14;break e;case Ua:Y=16,A=null;break e}Y=29,b=Error(r(130,h===null?"null":typeof h,"")),A=null}return d=t(Y,b,d,N),d.elementType=h,d.type=A,d.lanes=U,d}function fo(h,d,b,A){return h=t(7,h,A,d),h.lanes=b,h}function v0(h,d,b){return h=t(6,h,null,d),h.lanes=b,h}function y0(h){var d=t(18,null,null,0);return d.stateNode=h,d}function _0(h,d,b){return d=t(4,h.children!==null?h.children:[],h.key,d),d.lanes=b,d.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},d}function rS(h,d,b,A,N,U,Y,fe,Ve){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=us,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=F(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=F(0),this.hiddenUpdates=F(null),this.identifierPrefix=A,this.onUncaughtError=N,this.onCaughtError=U,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ve,this.incompleteTransitions=new Map}function tc(h,d,b,A,N,U,Y,fe,Ve,lt,bt,pt){return h=new rS(h,d,b,Y,Ve,lt,bt,pt,fe),d=1,U===!0&&(d|=24),U=t(3,null,null,d),h.current=U,U.stateNode=h,d=Ue(),d.refCount++,h.pooledCache=d,d.refCount++,U.memoizedState={element:A,isDehydrated:b,cache:d},zi(U),h}function Mg(h){return h?(h=Tl,h):Tl}function Tp(h){var d=h._reactInternals;if(d===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=l(d),h=h!==null?c(h):null,h===null?null:Hh(h.stateNode)}function b0(h,d,b,A,N,U){N=Mg(N),A.context===null?A.context=N:A.pendingContext=N,A=fa(d),A.payload={element:b},U=U===void 0?null:U,U!==null&&(A.callback=U),b=Pa(h,A,d),b!==null&&(Vi(b,h,d),Lo(b,h,d))}function df(h,d){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var b=h.retryLane;h.retryLane=b!==0&&b<d?b:d}}function Ap(h,d){df(h,d),(h=h.alternate)&&df(h,d)}var Mn={},Cg=ng,os=Cre,Ig=Object.assign,pf=Symbol.for("react.element"),El=Symbol.for("react.transitional.element"),mf=Symbol.for("react.portal"),gf=Symbol.for("react.fragment"),vf=Symbol.for("react.strict_mode"),yf=Symbol.for("react.profiler"),Mp=Symbol.for("react.consumer"),ho=Symbol.for("react.context"),Vh=Symbol.for("react.forward_ref"),Pg=Symbol.for("react.suspense"),lu=Symbol.for("react.suspense_list"),Rg=Symbol.for("react.memo"),Ua=Symbol.for("react.lazy"),Cp=Symbol.for("react.activity"),x0=Symbol.for("react.memo_cache_sentinel"),uu=Symbol.iterator,nc=Symbol.for("react.client.reference"),ic=Array.isArray,Zt=Cg.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,S0=e.rendererVersion,Ip=e.rendererPackageName,jh=e.extraDevToolsConfig,Hh=e.getPublicInstance,aS=e.getRootHostContext,Gh=e.getChildHostContext,Ng=e.prepareForCommit,sS=e.resetAfterCommit,w0=e.createInstance;e.cloneMutableInstance;var Pp=e.appendInitialChild,ls=e.finalizeInitialChildren,za=e.shouldSetTextContent,cu=e.createTextInstance;e.cloneMutableTextInstance;var E0=e.scheduleTimeout,oS=e.cancelTimeout,us=e.noTimeout,ur=e.isPrimaryRenderer;e.warnsIfNotActing;var Bn=e.supportsMutation,ks=e.supportsPersistence,Li=e.supportsHydration,bn=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var pi=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var kn=e.setCurrentUpdatePriority,po=e.getCurrentUpdatePriority,Wh=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var _f=e.shouldAttemptEagerTransition,Og=e.detachDeletedInstance;e.requestPostPaintCallback;var Rp=e.maySuspendCommit,qh=e.maySuspendCommitOnUpdate,T0=e.maySuspendCommitInSyncRender,ji=e.preloadInstance,A0=e.startSuspendingCommit,Dg=e.suspendInstance;e.suspendOnActiveViewTransition;var lS=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var bf=e.NotPendingTransition,xf=e.HostTransitionContext,M0=e.resetFormInstance;e.bindToConsole;var C0=e.supportsMicrotasks,I0=e.scheduleMicrotask,Ar=e.supportsTestSelectors,cr=e.findFiberRoot,Lg=e.getBoundingRect,Np=e.getTextContent,rc=e.isHiddenSubtree,P0=e.matchAccessibilityRole,fu=e.setFocusIfFocusable,kg=e.setupIntersectionObserver,R0=e.appendChild,N0=e.appendChildToContainer,uS=e.commitTextUpdate,cS=e.commitMount,fS=e.commitUpdate,hS=e.insertBefore,dS=e.insertInContainerBefore,pS=e.removeChild,O0=e.removeChildFromContainer,D0=e.resetTextContent,eC=e.hideInstance,mS=e.hideTextInstance,gS=e.unhideInstance,vS=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var L0=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var yS=e.cloneInstance,k0=e.createContainerChildSet,U0=e.appendChildToContainerChildSet,_S=e.finalizeContainerChildren,z0=e.replaceContainerChildren,bS=e.cloneHiddenInstance,F0=e.cloneHiddenTextInstance,ac=e.isSuspenseInstancePending,Ug=e.isSuspenseInstanceFallback,zg=e.getSuspenseInstanceFallbackErrorDetails,Fg=e.registerSuspenseInstanceRetry,xS=e.canHydrateFormStateMarker,B0=e.isFormStateMarkerMatching,SS=e.getNextHydratableSibling,wS=e.getNextHydratableSiblingAfterSingleton,ES=e.getFirstHydratableChild,TS=e.getFirstHydratableChildWithinContainer,AS=e.getFirstHydratableChildWithinActivityInstance,MS=e.getFirstHydratableChildWithinSuspenseInstance,V0=e.getFirstHydratableChildWithinSingleton,CS=e.canHydrateInstance,IS=e.canHydrateTextInstance,j0=e.canHydrateActivityInstance,PS=e.canHydrateSuspenseInstance,RS=e.hydrateInstance,tC=e.hydrateTextInstance,H0=e.hydrateActivityInstance,NS=e.hydrateSuspenseInstance,OS=e.getNextHydratableInstanceAfterActivityInstance,G0=e.getNextHydratableInstanceAfterSuspenseInstance,DS=e.commitHydratedInstance,LS=e.commitHydratedContainer,nC=e.commitHydratedActivityInstance,iC=e.commitHydratedSuspenseInstance,kS=e.finalizeHydratedChildren,Op=e.flushHydrationEvents;e.clearActivityBoundary;var W0=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var Bg=e.clearSuspenseBoundaryFromContainer,US=e.hideDehydratedBoundary,zS=e.unhideDehydratedBoundary,$h=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var FS=e.validateHydratableInstance,q0=e.validateHydratableTextInstance,mo=e.supportsResources,Vg=e.isHostHoistableType,Dp=e.getHoistableRoot,$0=e.getResource,X0=e.acquireResource,sc=e.releaseResource,BS=e.hydrateHoistable,Y0=e.mountHoistable,K0=e.unmountHoistable,jg=e.createHoistableInstance,VS=e.prepareToCommitHoistables,Z0=e.mayResourceSuspendCommit,Q0=e.preloadResource,jS=e.suspendResource,Mr=e.supportsSingletons,Hg=e.resolveSingletonInstance,yr=e.acquireSingletonInstance,zr=e.releaseSingletonInstance,J0=e.isHostSingletonType,Sf=e.isSingletonScope,Gg=[],wf=-1,Tl={},cs=Math.clz32?Math.clz32:T,Wg=Math.log,HS=Math.LN2,qg=256,Ef=262144,Xh=4194304,Lp=os.unstable_scheduleCallback,$g=os.unstable_cancelCallback,GS=os.unstable_shouldYield,e_=os.unstable_requestPaint,ga=os.unstable_now,Xg=os.unstable_ImmediatePriority,WS=os.unstable_UserBlockingPriority,kp=os.unstable_NormalPriority,Yg=os.unstable_IdlePriority,t_=os.log,qS=os.unstable_setDisableYieldValue,Tf=null,fs=null,fr=typeof Object.is=="function"?Object.is:se,Kg=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},rC=Object.prototype.hasOwnProperty,Zg,Al,Up=!1,n_=new WeakMap,hu=[],Ml=0,mi=null,zp=0,go=[],Us=0,vo=null,Zr=1,Go="",Fr=v(null),du=v(null),Qr=v(null),Fp=v(null),Cr=null,ki=null,Un=!1,Cl=null,Fa=!1,Qg=Error(r(519)),yo=v(null),Ei=null,Wo=null,$S=typeof AbortController<"u"?AbortController:function(){var h=[],d=this.signal={aborted:!1,addEventListener:function(b,A){h.push(A)}};this.abort=function(){d.aborted=!0,h.forEach(function(b){return b()})}},Br=os.unstable_scheduleCallback,aC=os.unstable_NormalPriority,Ui={$$typeof:ho,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Bp=null,ui=null,va=!1,_o=!1,Jg=!1,oc=0,Yh=null,i_=0,pu=0,Ir=null,bo=Zt.S;Zt.S=function(h,d){Rf=ga(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&Ze(h,d),bo!==null&&bo(h,d)};var lc=v(null),Pr=Error(r(460)),ev=Error(r(474)),xo=Error(r(542)),Il={then:function(){}},Ba=null,uc=null,Af=0,Jr=ns(!0),r_=ns(!1),ea=[],Pl=0,Mf=0,zs=!1,tv=!1,Cf=v(null),cc=v(0),hs=v(null),ds=null,er=v(0),mu=0,xn=null,Wt=null,dn=null,Cn=!1,En=!1,jn=!1,ya=0,So=0,qo=null,a_=0,Fs={readContext:ee,use:Fi,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useLayoutEffect:ft,useInsertionEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useSyncExternalStore:ft,useId:ft,useHostTransitionStatus:ft,useFormState:ft,useActionState:ft,useOptimistic:ft,useMemoCache:ft,useCacheRefresh:ft};Fs.useEffectEvent=ft;var Hi={readContext:ee,use:Fi,useCallback:function(h,d){return on().memoizedState=[h,d===void 0?null:d],h},useContext:ee,useEffect:Vu,useImperativeHandle:function(h,d,b){b=b!=null?b.concat([h]):null,ll(4194308,4,Jl.bind(null,d,h),b)},useLayoutEffect:function(h,d){return ll(4194308,4,h,d)},useInsertionEffect:function(h,d){ll(4,2,h,d)},useMemo:function(h,d){var b=on();d=d===void 0?null:d;var A=h();if(jn){W(!0);try{h()}finally{W(!1)}}return b.memoizedState=[A,d],A},useReducer:function(h,d,b){var A=on();if(b!==void 0){var N=b(d);if(jn){W(!0);try{b(d)}finally{W(!1)}}}else N=d;return A.memoizedState=A.baseState=N,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:N},A.queue=h,h=h.dispatch=Ah.bind(null,xn,h),[A.memoizedState,h]},useRef:function(h){var d=on();return h={current:h},d.memoizedState=h},useState:function(h){h=ol(h);var d=h.queue,b=hp.bind(null,xn,d);return d.dispatch=b,[h.memoizedState,b]},useDebugValue:cl,useDeferredValue:function(h,d){var b=on();return ju(b,h,d)},useTransition:function(){var h=ol(!1);return h=Hu.bind(null,xn,h.queue,!0,!1),on().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,d,b){var A=xn,N=on();if(Un){if(b===void 0)throw Error(r(407));b=b()}else{if(b=d(),In===null)throw Error(r(349));(zn&127)!==0||or(A,d,b)}N.memoizedState=b;var U={value:b,getSnapshot:d};return N.queue=U,Vu(sl.bind(null,A,U,h),[h]),A.flags|=2048,Oa(9,{destroy:void 0},lr.bind(null,A,U,b,d),null),b},useId:function(){var h=on(),d=In.identifierPrefix;if(Un){var b=Go,A=Zr;b=(A&~(1<<32-cs(A)-1)).toString(32)+b,d="_"+d+"R_"+b,b=ya++,0<b&&(d+="H"+b.toString(32)),d+="_"}else b=a_++,d="_"+d+"r_"+b.toString(32)+"_";return h.memoizedState=d},useHostTransitionStatus:Eh,useFormState:Ql,useActionState:Ql,useOptimistic:function(h){var d=on();d.memoizedState=d.baseState=h;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=b,d=ao.bind(null,xn,!0,b),b.dispatch=d,[h,d]},useMemoCache:Ps,useCacheRefresh:function(){return on().memoizedState=dg.bind(null,xn)},useEffectEvent:function(h){var d=on(),b={impl:h};return d.memoizedState=b,function(){if((Dn&2)!==0)throw Error(r(440));return b.impl.apply(void 0,arguments)}}},Rl={readContext:ee,use:Fi,useCallback:af,useContext:ee,useEffect:Uo,useImperativeHandle:Sh,useInsertionEffect:ul,useLayoutEffect:Fo,useMemo:Bo,useReducer:Kr,useRef:xh,useState:function(){return Kr(yi)},useDebugValue:cl,useDeferredValue:function(h,d){var b=St();return wh(b,Wt.memoizedState,h,d)},useTransition:function(){var h=Kr(yi)[0],d=St().memoizedState;return[typeof h=="boolean"?h:tn(h),d]},useSyncExternalStore:di,useId:Gu,useHostTransitionStatus:Eh,useFormState:ro,useActionState:ro,useOptimistic:function(h,d){var b=St();return tf(b,Wt,h,d)},useMemoCache:Ps,useCacheRefresh:Th};Rl.useEffectEvent=Lr;var fc={readContext:ee,use:Fi,useCallback:af,useContext:ee,useEffect:Uo,useImperativeHandle:Sh,useInsertionEffect:ul,useLayoutEffect:Fo,useMemo:Bo,useReducer:Ci,useRef:xh,useState:function(){return Ci(yi)},useDebugValue:cl,useDeferredValue:function(h,d){var b=St();return Wt===null?ju(b,h,d):wh(b,Wt.memoizedState,h,d)},useTransition:function(){var h=Ci(yi)[0],d=St().memoizedState;return[typeof h=="boolean"?h:tn(h),d]},useSyncExternalStore:di,useId:Gu,useHostTransitionStatus:Eh,useFormState:li,useActionState:li,useOptimistic:function(h,d){var b=St();return Wt!==null?tf(b,Wt,h,d):(b.baseState=h,[h,b.queue.dispatch])},useMemoCache:Ps,useCacheRefresh:Th};fc.useEffectEvent=Lr;var Vp={enqueueSetState:function(h,d,b){h=h._reactInternals;var A=Di(),N=fa(A);N.payload=d,b!=null&&(N.callback=b),d=Pa(h,N,A),d!==null&&(Vi(d,h,A),Lo(d,h,A))},enqueueReplaceState:function(h,d,b){h=h._reactInternals;var A=Di(),N=fa(A);N.tag=1,N.payload=d,b!=null&&(N.callback=b),d=Pa(h,N,A),d!==null&&(Vi(d,h,A),Lo(d,h,A))},enqueueForceUpdate:function(h,d){h=h._reactInternals;var b=Di(),A=fa(b);A.tag=2,d!=null&&(A.callback=d),d=Pa(h,A,b),d!==null&&(Vi(d,h,b),Lo(d,h,b))}},Va=Error(r(461)),Pi=!1,If={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},tr=!1,nr=!1,Kh=!1,s_=typeof WeakSet=="function"?WeakSet:Set,hr=null,Gi=null,dr=!1,ci=null,Bs=8192,Zh={getCacheForType:function(h){var d=ee(Ui),b=d.data.get(h);return b===void 0&&(b=h(),d.data.set(h,b)),b},cacheSignal:function(){return ee(Ui).controller.signal}},wo=0,Qh=1,Jh=2,jp=3,hc=4;if(typeof Symbol=="function"&&Symbol.for){var Pf=Symbol.for;wo=Pf("selector.component"),Qh=Pf("selector.has_pseudo_class"),Jh=Pf("selector.role"),jp=Pf("selector.test_id"),hc=Pf("selector.text")}var Vs=typeof WeakMap=="function"?WeakMap:Map,Dn=0,In=null,Ln=null,zn=0,fi=0,_r=null,$o=!1,dc=!1,pc=!1,Nl=0,Wi=0,gu=0,mc=0,ed=0,ja=0,td=0,Hp=null,ps=null,nv=!1,Gp=0,Rf=0,gc=1/0,Wp=null,vu=null,br=0,yu=null,Nf=null,Ol=0,nd=0,iv=null,o_=null,Qn=0,qp=null;return Mn.attemptContinuousHydration=function(h){if(h.tag===13||h.tag===31){var d=Mi(h,67108864);d!==null&&Vi(d,h,67108864),Ap(h,67108864)}},Mn.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13||h.tag===31){var d=Di();d=j(d);var b=Mi(h,d);b!==null&&Vi(b,h,d),Ap(h,d)}},Mn.attemptSynchronousHydration=function(h){switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var d=S(h.pendingLanes);if(d!==0){for(h.pendingLanes|=2,h.entangledLanes|=2;d;){var b=1<<31-cs(d);h.entanglements[1]|=b,d&=~b}At(h),(Dn&6)===0&&(gc=ga()+500,gt(0))}}break;case 31:case 13:d=Mi(h,2),d!==null&&Vi(d,h,2),xg(),Ap(h,2)}},Mn.batchedUpdates=function(h,d){return h(d)},Mn.createComponentSelector=function(h){return{$$typeof:wo,value:h}},Mn.createContainer=function(h,d,b,A,N,U,Y,fe,Ve,lt){return tc(h,d,!1,null,b,A,U,null,Y,fe,Ve,lt)},Mn.createHasPseudoClassSelector=function(h){return{$$typeof:Qh,value:h}},Mn.createHydrationContainer=function(h,d,b,A,N,U,Y,fe,Ve,lt,bt,pt,Nt,yn){var pr;return h=tc(b,A,!0,h,N,U,fe,yn,Ve,lt,bt,pt),h.context=Mg(null),b=h.current,A=Di(),A=j(A),N=fa(A),N.callback=(pr=d)!=null?pr:null,Pa(b,N,A),d=A,h.current.lanes=d,B(h,d),At(h),h},Mn.createPortal=function(h,d,b){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mf,key:A==null?null:""+A,children:h,containerInfo:d,implementation:b}},Mn.createRoleSelector=function(h){return{$$typeof:Jh,value:h}},Mn.createTestNameSelector=function(h){return{$$typeof:jp,value:h}},Mn.createTextSelector=function(h){return{$$typeof:hc,value:h}},Mn.defaultOnCaughtError=function(h){console.error(h)},Mn.defaultOnRecoverableError=function(h){Kg(h)},Mn.defaultOnUncaughtError=function(h){Kg(h)},Mn.deferredUpdates=function(h){var d=Zt.T,b=po();try{return kn(32),Zt.T=null,h()}finally{kn(b),Zt.T=d}},Mn.discreteUpdates=function(h,d,b,A,N){var U=Zt.T,Y=po();try{return kn(2),Zt.T=null,h(d,b,A,N)}finally{kn(Y),Zt.T=U,Dn===0&&(gc=ga()+500)}},Mn.findAllNodes=ss,Mn.findBoundingRects=function(h,d){if(!Ar)throw Error(r(363));d=ss(h,d),h=[];for(var b=0;b<d.length;b++)h.push(Lg(d[b]));for(d=h.length-1;0<d;d--){b=h[d];for(var A=b.x,N=A+b.width,U=b.y,Y=U+b.height,fe=d-1;0<=fe;fe--)if(d!==fe){var Ve=h[fe],lt=Ve.x,bt=lt+Ve.width,pt=Ve.y,Nt=pt+Ve.height;if(A>=lt&&U>=pt&&N<=bt&&Y<=Nt){h.splice(d,1);break}else if(A!==lt||b.width!==Ve.width||Nt<U||pt>Y){if(!(U!==pt||b.height!==Ve.height||bt<A||lt>N)){lt>A&&(Ve.width+=lt-A,Ve.x=A),bt<N&&(Ve.width=N-lt),h.splice(d,1);break}}else{pt>U&&(Ve.height+=pt-U,Ve.y=U),Nt<Y&&(Ve.height=Y-pt),h.splice(d,1);break}}}return h},Mn.findHostInstance=Tp,Mn.findHostInstanceWithNoPortals=function(h){return h=l(h),h=h!==null?f(h):null,h===null?null:Hh(h.stateNode)},Mn.findHostInstanceWithWarning=function(h){return Tp(h)},Mn.flushPassiveEffects=wl,Mn.flushSyncFromReconciler=function(h){var d=Dn;Dn|=1;var b=Zt.T,A=po();try{if(kn(2),Zt.T=null,h)return h()}finally{kn(A),Zt.T=b,Dn=d,(Dn&6)===0&&gt(0)}},Mn.flushSyncWork=xg,Mn.focusWithin=function(h,d){if(!Ar)throw Error(r(363));for(h=Ku(h),d=kh(h,d),d=Array.from(d),h=0;h<d.length;){var b=d[h++],A=b.tag;if(!rc(b)){if((A===5||A===26||A===27)&&fu(b.stateNode))return!0;for(b=b.child;b!==null;)d.push(b),b=b.sibling}}return!1},Mn.getFindAllNodesFailureDescription=function(h,d){if(!Ar)throw Error(r(363));var b=0,A=[];h=[Ku(h),0];for(var N=0;N<h.length;){var U=h[N++],Y=U.tag,fe=h[N++],Ve=d[fe];if((Y!==5&&Y!==26&&Y!==27||!rc(U))&&(Zu(U,Ve)&&(A.push(Lh(Ve)),fe++,fe>b&&(b=fe)),fe<d.length))for(U=U.child;U!==null;)h.push(U,fe),U=U.sibling}if(b<d.length){for(h=[];b<d.length;b++)h.push(Lh(d[b]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},Mn.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 27:case 5:return Hh(h.child.stateNode);default:return h.child.stateNode}},Mn.injectIntoDevTools=function(){var h={bundleType:0,version:S0,rendererPackageName:Ip,currentDispatcherRef:Zt,reconcilerVersion:"19.2.0"};if(jh!==null&&(h.rendererConfig=jh),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)h=!0;else{try{Tf=d.inject(h),fs=d}catch{}h=!!d.checkDCE}}return h},Mn.isAlreadyRendering=function(){return(Dn&6)!==0},Mn.observeVisibleRects=function(h,d,b,A){if(!Ar)throw Error(r(363));h=ss(h,d);var N=kg(h,b,A).disconnect;return{disconnect:function(){N()}}},Mn.shouldError=function(){return null},Mn.shouldSuspend=function(){return!1},Mn.startHostTransition=function(h,d,b,A){if(h.tag!==5)throw Error(r(476));var N=fp(h).queue;Hu(h,N,d,bf,b===null?i:function(){var U=fp(h);return U.next===null&&(U=h.alternate.memoizedState),Wu(h,U.next.queue,{},Di()),b(A)})},Mn.updateContainer=function(h,d,b,A){var N=d.current,U=Di();return b0(N,U,h,d,b,A),U},Mn.updateContainerSync=function(h,d,b,A){return b0(d.current,2,h,d,b,A),2},Mn},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(I4)),I4.exports}var R4;function iae(){return R4||(R4=1,C4.exports=nae()),C4.exports}var rae=iae();const aae=tae(rae);function sae(n){const e=aae(n);return e.injectIntoDevTools(),e}const p8=0,vy={},oae=/^three(?=[A-Z])/,HA=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let lae=0;const uae=n=>typeof n=="function";function cae(n){if(uae(n)){const e=`${lae++}`;return vy[e]=n,e}else Object.assign(vy,n)}function m8(n,e){const t=HA(n),i=vy[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function fae(n,e,t){var i;return n=HA(n)in vy?n:n.replace(oae,""),m8(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,VE(e.object,t,n,e)}function hae(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?HE(n.parent,n):Gs(n.object)&&(n.object.visible=!1),n.isHidden=!0,zy(n)}}function g8(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?jE(n.parent,n):Gs(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,zy(n)}}function _D(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var r,a;const s=vy[HA(e.type)];e.object=(r=e.props.object)!=null?r:new s(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(Ed(e.object,e.props),e.props.attach)jE(n,e);else if(Gs(e.object)&&Gs(n.object)){const s=n.object.children.indexOf(t==null?void 0:t.object);if(t&&s!==-1){const l=n.object.children.indexOf(e.object);if(l!==-1){n.object.children.splice(l,1);const c=l<s?s-1:s;n.object.children.splice(c,0,e.object)}else e.object.parent=n.object,n.object.children.splice(s,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const s of e.children)_D(e,s);zy(e)}}function II(n,e){e&&(e.parent=n,n.children.push(e),_D(n,e))}function N4(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),_D(n,e,t)}function v8(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():$R.unstable_scheduleCallback($R.unstable_IdlePriority,e)}}function YR(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?HE(n,e):Gs(e.object)&&Gs(n.object)&&(n.object.remove(e.object),qre(a8(e),e.object));const r=e.props.dispose!==null&&t!==!1;for(let a=e.children.length-1;a>=0;a--){const s=e.children[a];YR(e,s,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&v8(e.object),t===void 0&&zy(e)}function dae(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const Pw=[];function pae(){for(const[t]of Pw){const i=t.parent;if(i){t.props.attach?HE(i,t):Gs(t.object)&&Gs(i.object)&&i.object.remove(t.object);for(const r of t.children)r.props.attach?HE(t,r):Gs(r.object)&&Gs(t.object)&&t.object.remove(r.object)}t.isHidden&&g8(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&v8(t.object)}for(const[t,i,r]of Pw){t.props=i;const a=t.parent;if(a){var n,e;const s=vy[HA(t.type)];t.object=(n=t.props.object)!=null?n:new s(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,dae(r,t.object),Ed(t.object,t.props),t.props.attach?jE(a,t):Gs(t.object)&&Gs(a.object)&&a.object.add(t.object);for(const l of t.children)l.props.attach?jE(t,l):Gs(l.object)&&Gs(t.object)&&t.object.add(l.object);zy(t)}}Pw.length=0}const PI=()=>{},O4={};let tw=p8;const mae=0,gae=4,KR=sae({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:fae,removeChild:YR,appendChild:II,appendInitialChild:II,insertBefore:N4,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||II(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||YR(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||N4(i,e,t)},getRootHostContext:()=>O4,getChildHostContext:()=>O4,commitUpdate(n,e,t,i,r){var a,s,l;m8(e,i);let c=!1;if((n.type==="primitive"&&t.object!==i.object||((a=i.args)==null?void 0:a.length)!==((s=t.args)==null?void 0:s.length)||(l=i.args)!=null&&l.some((p,g)=>{var v;return p!==((v=t.args)==null?void 0:v[g])}))&&(c=!0),c)Pw.push([n,{...i},r]);else{const p=jre(n,i);Object.keys(p).length&&(Object.assign(n.props,p),Ed(n.object,p))}(r.sibling===null||(r.flags&gae)===mae)&&pae()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n==null?void 0:n.object,prepareForCommit:()=>null,preparePortalMount:n=>VE(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:hae,unhideInstance:g8,createTextInstance:PI,hideTextInstance:PI,unhideTextInstance:PI,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:H.createContext(null),setCurrentUpdatePriority(n){tw=n},getCurrentUpdatePriority(){return tw},resolveUpdatePriority(){var n;if(tw!==p8)return tw;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Jre;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Zre;default:return Qre}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:eae.version,applyViewTransitionName(n,e,t){},restoreViewTransitionName(n,e){},cancelViewTransitionName(n,e,t){},cancelRootViewTransitionName(n){},restoreRootViewTransitionName(n){},InstanceMeasurement:null,measureInstance:n=>null,wasInstanceInViewport:n=>!0,hasInstanceChanged:(n,e)=>!1,hasInstanceAffectedParent:(n,e)=>!1,suspendOnActiveViewTransition(n,e){},startGestureTransition:()=>null,startViewTransition:()=>null,stopViewTransition(n){},createViewTransitionInstance:n=>null,getCurrentGestureOffset(n){throw new Error("startGestureTransition is not yet supported in react-three-fiber.")},cloneMutableInstance(n,e){return n},cloneMutableTextInstance(n){return n},cloneRootViewTransitionContainer(n){throw new Error("Not implemented.")},removeRootViewTransitionClone(n,e){throw new Error("Not implemented.")},createFragmentInstance:n=>null,updateFragmentInstanceFiber(n,e){},commitNewChildToFragmentInstance(n,e){},deleteChildFromFragmentInstance(n,e){},measureClonedInstance:n=>null,maySuspendCommitOnUpdate:(n,e,t)=>!1,maySuspendCommitInSyncRender:(n,e)=>!1,startSuspendingCommit:()=>null,getSuspendedCommitReason:(n,e)=>null}),Hm=new Map,Pv={objects:"shallow",strict:!1};function vae(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:a}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function yae(n){const e=Hm.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,a=i||Xre(JR,L4),s=t||KR.createContainer(a,Kre,null,!1,null,"",r,r,r,null);e||Hm.set(n,{fiber:s,store:a});let l,c,f=!1,p=null;return{async configure(g={}){let v;p=new Promise(Q=>v=Q);let{gl:_,size:x,scene:T,events:S,onCreated:w,shadows:I=!1,linear:R=!1,flat:O=!1,legacy:F=!1,orthographic:B=!1,frameloop:L="always",dpr:z=[1,2],performance:P,raycaster:D,camera:j,onPointerMissed:q}=g,W=a.getState(),se=W.gl;if(!W.gl){const Q={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},de=typeof _=="function"?await _(Q):_;A4(de)?se=de:se=new Qj({...Q,..._}),W.set({gl:se})}let ue=W.raycaster;ue||W.set({raycaster:ue=new Gj});const{params:J,...ae}=D||{};if(ir.equ(ae,ue,Pv)||Ed(ue,{...ae}),ir.equ(J,ue.params,Pv)||Ed(ue,{params:{...ue.params,...J}}),!W.camera||W.camera===c&&!ir.equ(c,j,Pv)){c=j;const Q=j==null?void 0:j.isCamera,de=Q?j:B?new Zf(0,0,0,0,.1,1e3):new Or(75,0,.1,1e3);Q||(de.position.z=5,j&&(Ed(de,j),de.manual||("aspect"in j||"left"in j||"right"in j||"bottom"in j||"top"in j)&&(de.manual=!0,de.updateProjectionMatrix())),!W.camera&&!(j!=null&&j.rotation)&&de.lookAt(0,0,0)),W.set({camera:de}),ue.camera=de}if(!W.scene){let Q;T!=null&&T.isScene?(Q=T,VE(Q,a,"",{})):(Q=new jO,VE(Q,a,"",{}),T&&Ed(Q,T)),W.set({scene:Q})}S&&!W.events.handlers&&W.set({events:S(a)});const he=vae(n,x);if(ir.equ(he,W.size,Pv)||W.setSize(he.width,he.height,he.top,he.left),z&&W.viewport.dpr!==l8(z)&&W.setDpr(z),W.frameloop!==L&&W.setFrameloop(L),W.onPointerMissed||W.set({onPointerMissed:q}),P&&!ir.equ(P,W.performance,Pv)&&W.set(Q=>({performance:{...Q.performance,...P}})),!W.xr){var Te;const Q=(We,vt)=>{const be=a.getState();be.frameloop!=="never"&&L4(We,!0,be,vt)},de=()=>{const We=a.getState();We.gl.xr.enabled=We.gl.xr.isPresenting,We.gl.xr.setAnimationLoop(We.gl.xr.isPresenting?Q:null),We.gl.xr.isPresenting||JR(We)},Me={connect(){const We=a.getState().gl;We.xr.addEventListener("sessionstart",de),We.xr.addEventListener("sessionend",de)},disconnect(){const We=a.getState().gl;We.xr.removeEventListener("sessionstart",de),We.xr.removeEventListener("sessionend",de)}};typeof((Te=se.xr)==null?void 0:Te.addEventListener)=="function"&&Me.connect(),W.set({xr:Me})}if(se.shadowMap){const Q=se.shadowMap.enabled,de=se.shadowMap.type;if(se.shadowMap.enabled=!!I,ir.boo(I))se.shadowMap.type=Q_;else if(ir.str(I)){var Re;const Me={basic:u6,percentage:Kv,soft:Q_,variance:ym};se.shadowMap.type=(Re=Me[I])!=null?Re:Q_}else ir.obj(I)&&Object.assign(se.shadowMap,I);(Q!==se.shadowMap.enabled||de!==se.shadowMap.type)&&(se.shadowMap.needsUpdate=!0)}return qn.enabled=!F,f||(se.outputColorSpace=R?Wd:Xa,se.toneMapping=O?Vl:oA),W.legacy!==F&&W.set(()=>({legacy:F})),W.linear!==R&&W.set(()=>({linear:R})),W.flat!==O&&W.set(()=>({flat:O})),_&&!ir.fun(_)&&!A4(_)&&!ir.equ(_,se,Pv)&&Ed(se,_),l=w,f=!0,v(),this},render(g){return!f&&!p&&this.configure(),p.then(()=>{KR.updateContainer(k.jsx(_ae,{store:a,children:g,onCreated:l,rootElement:n}),s,null,()=>{})}),a},unmount(){y8(n)}}}function _ae({store:n,children:e,onCreated:t,rootElement:i}){return vx(()=>{const r=n.getState();r.set(a=>({internal:{...a.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),k.jsx(f8.Provider,{value:n,children:e})}function y8(n,e){const t=Hm.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),KR.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var a,s,l,c;r.events.disconnect==null||r.events.disconnect(),(a=r.gl)==null||(s=a.renderLists)==null||s.dispose==null||s.dispose(),(l=r.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(c=r.gl)!=null&&c.xr&&r.xr.disconnect(),Fre(r.scene),Hm.delete(n)}catch{}},500)})}}const bae=new Set,xae=new Set,Sae=new Set;function RI(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function ob(n,e){switch(n){case"before":return RI(bae,e);case"after":return RI(xae,e);case"tail":return RI(Sae,e)}}let NI,OI;function ZR(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),NI=e.internal.subscribers;for(let r=0;r<NI.length;r++)OI=NI[r],OI.ref.current(OI.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let GE=!1,QR=!1,DI,D4,Rv;function _8(n){D4=requestAnimationFrame(_8),GE=!0,DI=0,ob("before",n),QR=!0;for(const t of Hm.values()){var e;Rv=t.store.getState(),Rv.internal.active&&(Rv.frameloop==="always"||Rv.internal.frames>0)&&!((e=Rv.gl.xr)!=null&&e.isPresenting)&&(DI+=ZR(n,Rv))}if(QR=!1,ob("after",n),DI===0)return ob("tail",n),GE=!1,cancelAnimationFrame(D4)}function JR(n,e=1){var t;if(!n)return Hm.forEach(i=>JR(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):QR?n.internal.frames=2:n.internal.frames=1,GE||(GE=!0,requestAnimationFrame(_8)))}function L4(n,e=!0,t,i){if(e&&ob("before",n),t)ZR(n,t,i);else for(const r of Hm.values())ZR(n,r.store.getState());e&&ob("after",n)}const LI={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function wae(n){const{handlePointer:e}=$re(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(LI).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:i,events:r}=n.getState();if(r.disconnect==null||r.disconnect(),i(a=>({events:{...a.events,connected:t}})),r.handlers)for(const a in r.handlers){const s=r.handlers[a],[l,c]=LI[a];t.addEventListener(l,s,{passive:c})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const a=i.handlers[r],[s]=LI[r];i.connected.removeEventListener(s,a)}t(r=>({events:{...r.events,connected:void 0}}))}}}}function k4(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function Eae({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=H.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=H.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),c=n?typeof n=="number"?n:n.scroll:null,f=n?typeof n=="number"?n:n.resize:null,p=H.useRef(!1);H.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[g,v,_]=H.useMemo(()=>{const w=()=>{if(!l.current.element)return;const{left:I,top:R,width:O,height:F,bottom:B,right:L,x:z,y:P}=l.current.element.getBoundingClientRect(),D={left:I,top:R,width:O,height:F,bottom:B,right:L,x:z,y:P};l.current.element instanceof HTMLElement&&i&&(D.height=l.current.element.offsetHeight,D.width=l.current.element.offsetWidth),Object.freeze(D),p.current&&!Cae(l.current.lastBounds,D)&&s(l.current.lastBounds=D)};return[w,f?k4(w,f):w,c?k4(w,c):w]},[s,i,c,f]);function x(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",_,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function T(){l.current.element&&(l.current.resizeObserver=new r(_),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(w=>w.addEventListener("scroll",_,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{_()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const S=w=>{!w||w===l.current.element||(x(),l.current.element=w,l.current.scrollContainers=b8(w),T())};return Aae(_,!!e),Tae(v),H.useEffect(()=>{x(),T()},[e,_,v]),H.useEffect(()=>x,[]),[S,a,g]}function Tae(n){H.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Aae(n,e){H.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function b8(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(a=>a==="auto"||a==="scroll")&&e.push(n),[...e,...b8(n.parentElement)]}const Mae=["x","y","top","bottom","left","right","width","height"],Cae=(n,e)=>Mae.every(t=>n[t]===e[t]);function Iae({ref:n,children:e,fallback:t,resize:i,style:r,gl:a,events:s=wae,eventSource:l,eventPrefix:c,shadows:f,linear:p,flat:g,legacy:v,orthographic:_,frameloop:x,dpr:T,performance:S,raycaster:w,camera:I,scene:R,onPointerMissed:O,onCreated:F,...B}){H.useMemo(()=>cae(dre),[]);const L=Lre(),[z,P]=Eae({scroll:!0,debounce:{scroll:50,resize:0},...i}),D=H.useRef(null),j=H.useRef(null);H.useImperativeHandle(n,()=>D.current);const q=o8(O),[W,se]=H.useState(!1),[ue,J]=H.useState(!1);if(W)throw W;if(ue)throw ue;const ae=H.useRef(null);vx(()=>{const Te=D.current;if(P.width>0&&P.height>0&&Te){ae.current||(ae.current=yae(Te));async function Re(){await ae.current.configure({gl:a,scene:R,events:s,shadows:f,linear:p,flat:g,legacy:v,orthographic:_,frameloop:x,dpr:T,performance:S,raycaster:w,camera:I,size:P,onPointerMissed:(...Q)=>q.current==null?void 0:q.current(...Q),onCreated:Q=>{Q.events.connect==null||Q.events.connect(l?Ore(l)?l.current:l:j.current),c&&Q.setEvents({compute:(de,Me)=>{const We=de[c+"X"],vt=de[c+"Y"];Me.pointer.set(We/Me.size.width*2-1,-(vt/Me.size.height)*2+1),Me.raycaster.setFromCamera(Me.pointer,Me.camera)}}),F==null||F(Q)}}),ae.current.render(k.jsx(L,{children:k.jsx(Ure,{set:J,children:k.jsx(H.Suspense,{fallback:k.jsx(kre,{set:se}),children:e??null})})}))}Re()}}),H.useEffect(()=>{const Te=D.current;if(Te)return()=>y8(Te)},[]);const he=l?"none":"auto";return k.jsx("div",{ref:j,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:he,...r},...B,children:k.jsx("div",{ref:z,style:{width:"100%",height:"100%"},children:k.jsx("canvas",{ref:D,style:{display:"block"},children:t})})})}function Pae(n){return k.jsx(i8,{children:k.jsx(Iae,{...n})})}class Rae extends Js{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Hc(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{t(a.parse(l))}catch(c){r?r(c):console.error(c),a.manager.itemError(e)}},i,r)}parse(e){function t(f){const p=new DataView(f),g=32/8*3+32/8*3*3+16/8,v=p.getUint32(80,!0);if(80+32/8+v*g===p.byteLength)return!0;const x=[115,111,108,105,100];for(let T=0;T<5;T++)if(i(x,p,T))return!1;return!0}function i(f,p,g){for(let v=0,_=f.length;v<_;v++)if(f[v]!==p.getUint8(g+v))return!1;return!0}function r(f){const p=new DataView(f),g=p.getUint32(80,!0);let v,_,x,T=!1,S,w,I,R,O;for(let j=0;j<70;j++)p.getUint32(j,!1)==1129270351&&p.getUint8(j+4)==82&&p.getUint8(j+5)==61&&(T=!0,S=new Float32Array(g*3*3),w=p.getUint8(j+6)/255,I=p.getUint8(j+7)/255,R=p.getUint8(j+8)/255,O=p.getUint8(j+9)/255);const F=84,B=50,L=new gn,z=new Float32Array(g*3*3),P=new Float32Array(g*3*3),D=new Dt;for(let j=0;j<g;j++){const q=F+j*B,W=p.getFloat32(q,!0),se=p.getFloat32(q+4,!0),ue=p.getFloat32(q+8,!0);if(T){const J=p.getUint16(q+48,!0);(J&32768)===0?(v=(J&31)/31,_=(J>>5&31)/31,x=(J>>10&31)/31):(v=w,_=I,x=R)}for(let J=1;J<=3;J++){const ae=q+J*12,he=j*3*3+(J-1)*3;z[he]=p.getFloat32(ae,!0),z[he+1]=p.getFloat32(ae+4,!0),z[he+2]=p.getFloat32(ae+8,!0),P[he]=W,P[he+1]=se,P[he+2]=ue,T&&(D.setRGB(v,_,x,Xa),S[he]=D.r,S[he+1]=D.g,S[he+2]=D.b)}}return L.setAttribute("position",new hi(z,3)),L.setAttribute("normal",new hi(P,3)),T&&(L.setAttribute("color",new hi(S,3)),L.hasColors=!0,L.alpha=O),L}function a(f){const p=new gn,g=/solid([\s\S]*?)endsolid/g,v=/facet([\s\S]*?)endfacet/g,_=/solid\s(.+)/;let x=0;const T=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,S=new RegExp("vertex"+T+T+T,"g"),w=new RegExp("normal"+T+T+T,"g"),I=[],R=[],O=[],F=new ie;let B,L=0,z=0,P=0;for(;(B=g.exec(f))!==null;){z=P;const D=B[0],j=(B=_.exec(D))!==null?B[1]:"";for(O.push(j);(B=v.exec(D))!==null;){let se=0,ue=0;const J=B[0];for(;(B=w.exec(J))!==null;)F.x=parseFloat(B[1]),F.y=parseFloat(B[2]),F.z=parseFloat(B[3]),ue++;for(;(B=S.exec(J))!==null;)I.push(parseFloat(B[1]),parseFloat(B[2]),parseFloat(B[3])),R.push(F.x,F.y,F.z),se++,P++;ue!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+x),se!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+x),x++}const q=z,W=P-z;p.userData.groupNames=O,p.addGroup(q,W,L),L++}return p.setAttribute("position",new zt(I,3)),p.setAttribute("normal",new zt(R,3)),p}function s(f){return typeof f!="string"?new TextDecoder().decode(f):f}function l(f){if(typeof f=="string"){const p=new Uint8Array(f.length);for(let g=0;g<f.length;g++)p[g]=f.charCodeAt(g)&255;return p.buffer||p}else return f}const c=l(e);return t(c)?r(c):a(s(e))}}function WE(){return WE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},WE.apply(null,arguments)}var Nae=Object.defineProperty,Oae=(n,e,t)=>e in n?Nae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Dae=(n,e,t)=>(Oae(n,e+"",t),t);class Lae{constructor(){Dae(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e);e.target=null}}}var kae=Object.defineProperty,Uae=(n,e,t)=>e in n?kae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,an=(n,e,t)=>(Uae(n,typeof e!="symbol"?e+"":e,t),t);const nw=new ag,U4=new Bf,zae=Math.cos(70*(Math.PI/180)),z4=(n,e)=>(n%e+e)%e;let Fae=class extends Lae{constructor(e,t){super(),an(this,"object"),an(this,"domElement"),an(this,"enabled",!0),an(this,"target",new ie),an(this,"minDistance",0),an(this,"maxDistance",1/0),an(this,"minZoom",0),an(this,"maxZoom",1/0),an(this,"minPolarAngle",0),an(this,"maxPolarAngle",Math.PI),an(this,"minAzimuthAngle",-1/0),an(this,"maxAzimuthAngle",1/0),an(this,"enableDamping",!1),an(this,"dampingFactor",.05),an(this,"enableZoom",!0),an(this,"zoomSpeed",1),an(this,"enableRotate",!0),an(this,"rotateSpeed",1),an(this,"enablePan",!0),an(this,"panSpeed",1),an(this,"screenSpacePanning",!0),an(this,"keyPanSpeed",7),an(this,"zoomToCursor",!1),an(this,"autoRotate",!1),an(this,"autoRotateSpeed",2),an(this,"reverseOrbit",!1),an(this,"reverseHorizontalOrbit",!1),an(this,"reverseVerticalOrbit",!1),an(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),an(this,"mouseButtons",{LEFT:um.ROTATE,MIDDLE:um.DOLLY,RIGHT:um.PAN}),an(this,"touches",{ONE:cm.ROTATE,TWO:cm.DOLLY_PAN}),an(this,"target0"),an(this,"position0"),an(this,"zoom0"),an(this,"_domElementKeyEvents",null),an(this,"getPolarAngle"),an(this,"getAzimuthalAngle"),an(this,"setPolarAngle"),an(this,"setAzimuthalAngle"),an(this,"getDistance"),an(this,"getZoomScale"),an(this,"listenToKeyEvents"),an(this,"stopListenToKeyEvents"),an(this,"saveState"),an(this,"reset"),an(this,"update"),an(this,"connect"),an(this,"dispose"),an(this,"dollyIn"),an(this,"dollyOut"),an(this,"getScale"),an(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>p.phi,this.getAzimuthalAngle=()=>p.theta,this.setPolarAngle=ne=>{let ge=z4(ne,2*Math.PI),Ze=p.phi;Ze<0&&(Ze+=2*Math.PI),ge<0&&(ge+=2*Math.PI);let oe=Math.abs(ge-Ze);2*Math.PI-oe<oe&&(ge<Ze?ge+=2*Math.PI:Ze+=2*Math.PI),g.phi=ge-Ze,i.update()},this.setAzimuthalAngle=ne=>{let ge=z4(ne,2*Math.PI),Ze=p.theta;Ze<0&&(Ze+=2*Math.PI),ge<0&&(ge+=2*Math.PI);let oe=Math.abs(ge-Ze);2*Math.PI-oe<oe&&(ge<Ze?ge+=2*Math.PI:Ze+=2*Math.PI),g.theta=ge-Ze,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=ne=>{ne.addEventListener("keydown",Le),this._domElementKeyEvents=ne},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Le),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),c=l.NONE},this.update=(()=>{const ne=new ie,ge=new ie(0,1,0),Ze=new Ts().setFromUnitVectors(e.up,ge),oe=Ze.clone().invert(),Qe=new ie,$e=new Ts,at=2*Math.PI;return function(){const qe=i.object.position;Ze.setFromUnitVectors(e.up,ge),oe.copy(Ze).invert(),ne.copy(qe).sub(i.target),ne.applyQuaternion(Ze),p.setFromVector3(ne),i.autoRotate&&c===l.NONE&&se(q()),i.enableDamping?(p.theta+=g.theta*i.dampingFactor,p.phi+=g.phi*i.dampingFactor):(p.theta+=g.theta,p.phi+=g.phi);let ot=i.minAzimuthAngle,Ft=i.maxAzimuthAngle;isFinite(ot)&&isFinite(Ft)&&(ot<-Math.PI?ot+=at:ot>Math.PI&&(ot-=at),Ft<-Math.PI?Ft+=at:Ft>Math.PI&&(Ft-=at),ot<=Ft?p.theta=Math.max(ot,Math.min(Ft,p.theta)):p.theta=p.theta>(ot+Ft)/2?Math.max(ot,p.theta):Math.min(Ft,p.theta)),p.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,p.phi)),p.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(_,i.dampingFactor):i.target.add(_),i.zoomToCursor&&P||i.object.isOrthographicCamera?p.radius=Me(p.radius):p.radius=Me(p.radius*v),ne.setFromSpherical(p),ne.applyQuaternion(oe),qe.copy(i.target).add(ne),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(g.theta*=1-i.dampingFactor,g.phi*=1-i.dampingFactor,_.multiplyScalar(1-i.dampingFactor)):(g.set(0,0,0),_.set(0,0,0));let un=!1;if(i.zoomToCursor&&P){let en=null;if(i.object instanceof Or&&i.object.isPerspectiveCamera){const oi=ne.length();en=Me(oi*v);const Oi=oi-en;i.object.position.addScaledVector(L,Oi),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const oi=new ie(z.x,z.y,0);oi.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/v)),i.object.updateProjectionMatrix(),un=!0;const Oi=new ie(z.x,z.y,0);Oi.unproject(i.object),i.object.position.sub(Oi).add(oi),i.object.updateMatrixWorld(),en=ne.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;en!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(en).add(i.object.position):(nw.origin.copy(i.object.position),nw.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(nw.direction))<zae?e.lookAt(i.target):(U4.setFromNormalAndCoplanarPoint(i.object.up,i.target),nw.intersectPlane(U4,i.target))))}else i.object instanceof Zf&&i.object.isOrthographicCamera&&(un=v!==1,un&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/v)),i.object.updateProjectionMatrix()));return v=1,P=!1,un||Qe.distanceToSquared(i.object.position)>f||8*(1-$e.dot(i.object.quaternion))>f?(i.dispatchEvent(r),Qe.copy(i.object.position),$e.copy(i.object.quaternion),un=!1,!0):!1}})(),this.connect=ne=>{i.domElement=ne,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",It),i.domElement.addEventListener("pointerdown",dt),i.domElement.addEventListener("pointercancel",X),i.domElement.addEventListener("wheel",Ye)},this.dispose=()=>{var ne,ge,Ze,oe,Qe,$e;i.domElement&&(i.domElement.style.touchAction="auto"),(ne=i.domElement)==null||ne.removeEventListener("contextmenu",It),(ge=i.domElement)==null||ge.removeEventListener("pointerdown",dt),(Ze=i.domElement)==null||Ze.removeEventListener("pointercancel",X),(oe=i.domElement)==null||oe.removeEventListener("wheel",Ye),(Qe=i.domElement)==null||Qe.ownerDocument.removeEventListener("pointermove",ee),($e=i.domElement)==null||$e.ownerDocument.removeEventListener("pointerup",X),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Le)};const i=this,r={type:"change"},a={type:"start"},s={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=l.NONE;const f=1e-6,p=new jR,g=new jR;let v=1;const _=new ie,x=new tt,T=new tt,S=new tt,w=new tt,I=new tt,R=new tt,O=new tt,F=new tt,B=new tt,L=new ie,z=new tt;let P=!1;const D=[],j={};function q(){return 2*Math.PI/60/60*i.autoRotateSpeed}function W(){return Math.pow(.95,i.zoomSpeed)}function se(ne){i.reverseOrbit||i.reverseHorizontalOrbit?g.theta+=ne:g.theta-=ne}function ue(ne){i.reverseOrbit||i.reverseVerticalOrbit?g.phi+=ne:g.phi-=ne}const J=(()=>{const ne=new ie;return function(Ze,oe){ne.setFromMatrixColumn(oe,0),ne.multiplyScalar(-Ze),_.add(ne)}})(),ae=(()=>{const ne=new ie;return function(Ze,oe){i.screenSpacePanning===!0?ne.setFromMatrixColumn(oe,1):(ne.setFromMatrixColumn(oe,0),ne.crossVectors(i.object.up,ne)),ne.multiplyScalar(Ze),_.add(ne)}})(),he=(()=>{const ne=new ie;return function(Ze,oe){const Qe=i.domElement;if(Qe&&i.object instanceof Or&&i.object.isPerspectiveCamera){const $e=i.object.position;ne.copy($e).sub(i.target);let at=ne.length();at*=Math.tan(i.object.fov/2*Math.PI/180),J(2*Ze*at/Qe.clientHeight,i.object.matrix),ae(2*oe*at/Qe.clientHeight,i.object.matrix)}else Qe&&i.object instanceof Zf&&i.object.isOrthographicCamera?(J(Ze*(i.object.right-i.object.left)/i.object.zoom/Qe.clientWidth,i.object.matrix),ae(oe*(i.object.top-i.object.bottom)/i.object.zoom/Qe.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function Te(ne){i.object instanceof Or&&i.object.isPerspectiveCamera||i.object instanceof Zf&&i.object.isOrthographicCamera?v=ne:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Re(ne){Te(v/ne)}function Q(ne){Te(v*ne)}function de(ne){if(!i.zoomToCursor||!i.domElement)return;P=!0;const ge=i.domElement.getBoundingClientRect(),Ze=ne.clientX-ge.left,oe=ne.clientY-ge.top,Qe=ge.width,$e=ge.height;z.x=Ze/Qe*2-1,z.y=-(oe/$e)*2+1,L.set(z.x,z.y,1).unproject(i.object).sub(i.object.position).normalize()}function Me(ne){return Math.max(i.minDistance,Math.min(i.maxDistance,ne))}function We(ne){x.set(ne.clientX,ne.clientY)}function vt(ne){de(ne),O.set(ne.clientX,ne.clientY)}function be(ne){w.set(ne.clientX,ne.clientY)}function Ae(ne){T.set(ne.clientX,ne.clientY),S.subVectors(T,x).multiplyScalar(i.rotateSpeed);const ge=i.domElement;ge&&(se(2*Math.PI*S.x/ge.clientHeight),ue(2*Math.PI*S.y/ge.clientHeight)),x.copy(T),i.update()}function mt(ne){F.set(ne.clientX,ne.clientY),B.subVectors(F,O),B.y>0?Re(W()):B.y<0&&Q(W()),O.copy(F),i.update()}function ye(ne){I.set(ne.clientX,ne.clientY),R.subVectors(I,w).multiplyScalar(i.panSpeed),he(R.x,R.y),w.copy(I),i.update()}function et(ne){de(ne),ne.deltaY<0?Q(W()):ne.deltaY>0&&Re(W()),i.update()}function wt(ne){let ge=!1;switch(ne.code){case i.keys.UP:he(0,i.keyPanSpeed),ge=!0;break;case i.keys.BOTTOM:he(0,-i.keyPanSpeed),ge=!0;break;case i.keys.LEFT:he(i.keyPanSpeed,0),ge=!0;break;case i.keys.RIGHT:he(-i.keyPanSpeed,0),ge=!0;break}ge&&(ne.preventDefault(),i.update())}function ze(){if(D.length==1)x.set(D[0].pageX,D[0].pageY);else{const ne=.5*(D[0].pageX+D[1].pageX),ge=.5*(D[0].pageY+D[1].pageY);x.set(ne,ge)}}function Tt(){if(D.length==1)w.set(D[0].pageX,D[0].pageY);else{const ne=.5*(D[0].pageX+D[1].pageX),ge=.5*(D[0].pageY+D[1].pageY);w.set(ne,ge)}}function Oe(){const ne=D[0].pageX-D[1].pageX,ge=D[0].pageY-D[1].pageY,Ze=Math.sqrt(ne*ne+ge*ge);O.set(0,Ze)}function Ke(){i.enableZoom&&Oe(),i.enablePan&&Tt()}function He(){i.enableZoom&&Oe(),i.enableRotate&&ze()}function ut(ne){if(D.length==1)T.set(ne.pageX,ne.pageY);else{const Ze=Se(ne),oe=.5*(ne.pageX+Ze.x),Qe=.5*(ne.pageY+Ze.y);T.set(oe,Qe)}S.subVectors(T,x).multiplyScalar(i.rotateSpeed);const ge=i.domElement;ge&&(se(2*Math.PI*S.x/ge.clientHeight),ue(2*Math.PI*S.y/ge.clientHeight)),x.copy(T)}function re(ne){if(D.length==1)I.set(ne.pageX,ne.pageY);else{const ge=Se(ne),Ze=.5*(ne.pageX+ge.x),oe=.5*(ne.pageY+ge.y);I.set(Ze,oe)}R.subVectors(I,w).multiplyScalar(i.panSpeed),he(R.x,R.y),w.copy(I)}function Et(ne){const ge=Se(ne),Ze=ne.pageX-ge.x,oe=ne.pageY-ge.y,Qe=Math.sqrt(Ze*Ze+oe*oe);F.set(0,Qe),B.set(0,Math.pow(F.y/O.y,i.zoomSpeed)),Re(B.y),O.copy(F)}function ht(ne){i.enableZoom&&Et(ne),i.enablePan&&re(ne)}function Lt(ne){i.enableZoom&&Et(ne),i.enableRotate&&ut(ne)}function dt(ne){var ge,Ze;i.enabled!==!1&&(D.length===0&&((ge=i.domElement)==null||ge.ownerDocument.addEventListener("pointermove",ee),(Ze=i.domElement)==null||Ze.ownerDocument.addEventListener("pointerup",X)),Ht(ne),ne.pointerType==="touch"?At(ne):pe(ne))}function ee(ne){i.enabled!==!1&&(ne.pointerType==="touch"?gt(ne):Ue(ne))}function X(ne){var ge,Ze,oe;nt(ne),D.length===0&&((ge=i.domElement)==null||ge.releasePointerCapture(ne.pointerId),(Ze=i.domElement)==null||Ze.ownerDocument.removeEventListener("pointermove",ee),(oe=i.domElement)==null||oe.ownerDocument.removeEventListener("pointerup",X)),i.dispatchEvent(s),c=l.NONE}function pe(ne){let ge;switch(ne.button){case 0:ge=i.mouseButtons.LEFT;break;case 1:ge=i.mouseButtons.MIDDLE;break;case 2:ge=i.mouseButtons.RIGHT;break;default:ge=-1}switch(ge){case um.DOLLY:if(i.enableZoom===!1)return;vt(ne),c=l.DOLLY;break;case um.ROTATE:if(ne.ctrlKey||ne.metaKey||ne.shiftKey){if(i.enablePan===!1)return;be(ne),c=l.PAN}else{if(i.enableRotate===!1)return;We(ne),c=l.ROTATE}break;case um.PAN:if(ne.ctrlKey||ne.metaKey||ne.shiftKey){if(i.enableRotate===!1)return;We(ne),c=l.ROTATE}else{if(i.enablePan===!1)return;be(ne),c=l.PAN}break;default:c=l.NONE}c!==l.NONE&&i.dispatchEvent(a)}function Ue(ne){if(i.enabled!==!1)switch(c){case l.ROTATE:if(i.enableRotate===!1)return;Ae(ne);break;case l.DOLLY:if(i.enableZoom===!1)return;mt(ne);break;case l.PAN:if(i.enablePan===!1)return;ye(ne);break}}function Ye(ne){i.enabled===!1||i.enableZoom===!1||c!==l.NONE&&c!==l.ROTATE||(ne.preventDefault(),i.dispatchEvent(a),et(ne),i.dispatchEvent(s))}function Le(ne){i.enabled===!1||i.enablePan===!1||wt(ne)}function At(ne){switch(le(ne),D.length){case 1:switch(i.touches.ONE){case cm.ROTATE:if(i.enableRotate===!1)return;ze(),c=l.TOUCH_ROTATE;break;case cm.PAN:if(i.enablePan===!1)return;Tt(),c=l.TOUCH_PAN;break;default:c=l.NONE}break;case 2:switch(i.touches.TWO){case cm.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ke(),c=l.TOUCH_DOLLY_PAN;break;case cm.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;He(),c=l.TOUCH_DOLLY_ROTATE;break;default:c=l.NONE}break;default:c=l.NONE}c!==l.NONE&&i.dispatchEvent(a)}function gt(ne){switch(le(ne),c){case l.TOUCH_ROTATE:if(i.enableRotate===!1)return;ut(ne),i.update();break;case l.TOUCH_PAN:if(i.enablePan===!1)return;re(ne),i.update();break;case l.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ht(ne),i.update();break;case l.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Lt(ne),i.update();break;default:c=l.NONE}}function It(ne){i.enabled!==!1&&ne.preventDefault()}function Ht(ne){D.push(ne)}function nt(ne){delete j[ne.pointerId];for(let ge=0;ge<D.length;ge++)if(D[ge].pointerId==ne.pointerId){D.splice(ge,1);return}}function le(ne){let ge=j[ne.pointerId];ge===void 0&&(ge=new tt,j[ne.pointerId]=ge),ge.set(ne.pageX,ne.pageY)}function Se(ne){const ge=ne.pointerId===D[0].pointerId?D[1]:D[0];return j[ge.pointerId]}this.dollyIn=(ne=W())=>{Q(ne),i.update()},this.dollyOut=(ne=W())=>{Re(ne),i.update()},this.getScale=()=>v,this.setScale=ne=>{Te(ne),i.update()},this.getZoomScale=()=>W(),t!==void 0&&this.connect(t),this.update()}};const Bae=H.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:a=!1,onChange:s,onStart:l,onEnd:c,...f},p)=>{const g=vd(B=>B.invalidate),v=vd(B=>B.camera),_=vd(B=>B.gl),x=vd(B=>B.events),T=vd(B=>B.setEvents),S=vd(B=>B.set),w=vd(B=>B.get),I=vd(B=>B.performance),R=e||v,O=i||x.connected||_.domElement,F=H.useMemo(()=>new Fae(R),[R]);return vD(()=>{F.enabled&&F.update()},-1),H.useEffect(()=>(a&&F.connect(a===!0?O:a),F.connect(O),()=>void F.dispose()),[a,O,t,F,g]),H.useEffect(()=>{const B=P=>{g(),t&&I.regress(),s&&s(P)},L=P=>{l&&l(P)},z=P=>{c&&c(P)};return F.addEventListener("change",B),F.addEventListener("start",L),F.addEventListener("end",z),()=>{F.removeEventListener("start",L),F.removeEventListener("end",z),F.removeEventListener("change",B)}},[s,l,c,F,g,T]),H.useEffect(()=>{if(n){const B=w().controls;return S({controls:F}),()=>S({controls:B})}},[n,F]),H.createElement("primitive",WE({ref:p,object:F,enableDamping:r},f))}),Vae=H.forwardRef(function({children:e,object:t,disable:i,disableX:r,disableY:a,disableZ:s,left:l,right:c,top:f,bottom:p,front:g,back:v,onCentered:_,precise:x=!0,cacheKey:T=0,...S},w){const I=H.useRef(null),R=H.useRef(null),O=H.useRef(null),[F]=H.useState(()=>new Za),[B]=H.useState(()=>new ie),[L]=H.useState(()=>new Ea);return H.useLayoutEffect(()=>{R.current.matrixWorld.identity(),F.setFromObject(t??O.current,x);const z=F.max.x-F.min.x,P=F.max.y-F.min.y,D=F.max.z-F.min.z;F.getCenter(B),F.getBoundingSphere(L);const j=f?P/2:p?-P/2:0,q=l?-z/2:c?z/2:0,W=g?D/2:v?-D/2:0;R.current.position.set(i||r?0:-B.x+q,i||a?0:-B.y+j,i||s?0:-B.z+W),_==null||_({parent:I.current.parent,container:I.current,width:z,height:P,depth:D,boundingBox:F,boundingSphere:L,center:B,verticalAlignment:j,horizontalAlignment:q,depthAlignment:W})},[T,_,f,l,g,i,r,a,s,t,x,c,p,v,F,B,L]),H.useImperativeHandle(w,()=>I.current,[]),H.createElement("group",WE({ref:I},S),H.createElement("group",{ref:R},H.createElement("group",{ref:O},e)))}),jae=H.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:i=1,floatIntensity:r=1,floatingRange:a=[-.1,.1],autoInvalidate:s=!1,...l},c)=>{const f=H.useRef(null);H.useImperativeHandle(c,()=>f.current,[]);const p=H.useRef(Math.random()*1e4);return vD(g=>{var v,_;if(!e||t===0)return;s&&g.invalidate();const x=p.current+g.clock.elapsedTime;f.current.rotation.x=Math.cos(x/4*t)/8*i,f.current.rotation.y=Math.sin(x/4*t)/8*i,f.current.rotation.z=Math.sin(x/4*t)/20*i;let T=Math.sin(x/4*t)/10;T=W6.mapLinear(T,-.1,.1,(v=a==null?void 0:a[0])!==null&&v!==void 0?v:-.1,(_=a==null?void 0:a[1])!==null&&_!==void 0?_:.1),f.current.position.y=T*r,f.current.updateMatrix()}),H.createElement("group",l,H.createElement("group",{ref:f,matrixAutoUpdate:!1},n))});function Hae({url:n}){const e=yD(Rae,n),t=H.useRef();return vD((i,r)=>{t.current&&(t.current.rotation.z+=r*.5)}),k.jsx("mesh",{ref:t,geometry:e,rotation:[-Math.PI/2,0,0],scale:[.5,.5,.5],children:k.jsx("meshPhongMaterial",{color:16777215,specular:1118481,shininess:200})})}function Gae(){return k.jsx("div",{className:"w-full h-full",children:k.jsxs(Pae,{camera:{position:[0,0,150],fov:50},children:[k.jsx("ambientLight",{intensity:.6}),k.jsx("directionalLight",{position:[10,10,10],intensity:1}),k.jsx("pointLight",{position:[-20,0,20],color:"#F59E0B",intensity:2,distance:100}),k.jsx("pointLight",{position:[20,0,20],color:"#2563EB",intensity:2,distance:100}),k.jsx(jae,{speed:2,rotationIntensity:.5,floatIntensity:.5,children:k.jsx(Vae,{children:k.jsx(ng.Suspense,{fallback:null,children:k.jsx(Hae,{url:"/images/Tuna-s_craft.stl"})})})}),k.jsx(Bae,{enableZoom:!1,autoRotate:!1})]})})}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wae=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qae=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=n=>{const e=qae(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $ae={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xae=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yae=H.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:s,...l},c)=>H.createElement("svg",{ref:c,...$ae,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:x8("lucide",r),...!a&&!Xae(l)&&{"aria-hidden":"true"},...l},[...s.map(([f,p])=>H.createElement(f,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=(n,e)=>{const t=H.forwardRef(({className:i,...r},a)=>H.createElement(Yae,{ref:a,iconNode:e,className:x8(`lucide-${Wae(F4(n))}`,`lucide-${n}`,i),...r}));return t.displayName=F4(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kae=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],bD=Tr("arrow-left",Kae);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Qae=Tr("circle-alert",Zae);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jae=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],qE=Tr("circle-check-big",Jae);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ese=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],tse=Tr("clock",ese);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nse=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ise=Tr("dollar-sign",nse);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rse=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ase=Tr("eye",rse);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sse=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],ose=Tr("facebook",sse);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lse=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],use=Tr("file-text",lse);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cse=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],B4=Tr("house",cse);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fse=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],hse=Tr("instagram",fse);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dse=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],pse=Tr("menu",dse);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mse=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],eN=Tr("package",mse);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gse=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],vse=Tr("palette",gse);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yse=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],H_=Tr("plus",yse);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _se=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],V4=Tr("ruler",_se);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bse=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],xse=Tr("search",bse);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sse=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],S8=Tr("shopping-bag",Sse);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wse=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],j4=Tr("square-pen",wse);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ese=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],G_=Tr("trash-2",Ese);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tse=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],tN=Tr("upload",Tse);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ase=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Mse=Tr("users",Ase);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cse=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],H4=Tr("x",Cse),Ise=()=>{const[n,e]=H.useState(!1),[t,i]=H.useState(null),[r,a]=H.useState("all"),[s,l]=H.useState([{name:"Figura Anime",price:"$450",color:"#2563EB",quantity:5,image:"/images/anime-figure.png",category:"Figuras"},{name:"Maceta Geomtrica",price:"$120",color:"#F59E0B",quantity:10,image:"/images/planter.png",category:"Decoracin"},{name:"Soporte Audfonos",price:"$250",color:"#1E40AF",quantity:0,image:"/images/headphone-stand.png",category:"Accesorios"}]);H.useEffect(()=>{const T="https://docs.google.com/spreadsheets/d/e/2PACX-1vSZQKUeUWpxU8XNWtif8j4aEKN0InJpbxQFpK4Q4Ci5zVI1ZIlUlKTU42AomgXFPfa73Rb0w1CT1mU-/pub?output=csv";(async()=>{try{const I=await(await fetch(T)).text(),R=f(I);R.length>0&&l(R)}catch(w){console.error("Error fetching gallery:",w)}})()},[]);const c=T=>{if(!T)return"";const S=/(?:\/d\/|id=)([a-zA-Z0-9_-]+)/,w=T.match(S);return w&&w[1]?`https://drive.google.com/thumbnail?id=${w[1]}&sz=w800`:T},f=T=>{const S=T.split(`
`),w=S[0].split(",").map(R=>R.trim().toLowerCase()),I=[];for(let R=1;R<S.length;R++){const O=S[R].split(",");if(O.length<w.length)continue;const F={};w.forEach((B,L)=>{let z=O[L]?O[L].trim():"";F[B]=z}),F.name&&I.push({name:F.name,price:F.price||"$0",quantity:parseInt(F.quantity||F.availability||0),category:F.category||"Otros",image:c(F.photo||F.image),color:"#2563EB"})}return I},p=["Todos",...new Set(s.map(T=>T.category).filter(Boolean))],g=r==="Todos"||r==="all"?s:s.filter(T=>T.category===r),[v,_]=H.useState(!1);H.useEffect(()=>{const T=()=>_(window.scrollY>20);return window.addEventListener("scroll",T),()=>window.removeEventListener("scroll",T)},[]);const x=()=>e(!n);return k.jsxs("div",{className:"bg-brand-dark min-h-screen text-slate-100 font-sans",children:[k.jsxs("nav",{className:`fixed w-full z-50 transition-all duration-300 ${v?"bg-brand-dark/90 backdrop-blur-md border-b border-white/10":"bg-transparent"}`,children:[k.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:k.jsxs("div",{className:"flex justify-between items-center h-20",children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("img",{className:"h-12 w-auto",src:"/logo.png",alt:"Tuna's Craft"}),k.jsx("span",{className:"font-display font-bold text-2xl tracking-tight text-white",children:"Tuna's Craft"})]}),k.jsxs("div",{className:"hidden md:flex space-x-8 items-center",children:[k.jsx("a",{href:"#services",className:"text-gray-300 hover:text-brand-orange transition-colors font-medium",children:"Servicios"}),k.jsx("a",{href:"#delivery",className:"text-gray-300 hover:text-brand-orange transition-colors font-medium",children:"Entregas"}),k.jsx("a",{href:"#gallery",className:"text-gray-300 hover:text-brand-orange transition-colors font-medium",children:"Galera"}),k.jsx(Ac,{to:"/quote",className:"bg-brand-blue hover:bg-blue-600 text-white px-6 py-2.5 rounded-full font-bold shadow-lg shadow-blue-500/30 transition-all hover:-translate-y-0.5",children:"Cotizar Ahora"})]}),k.jsx("div",{className:"md:hidden",children:k.jsx("button",{onClick:x,className:"text-gray-300 hover:text-white p-2",children:n?k.jsx(H4,{size:24}):k.jsx(pse,{size:24})})})]})}),n&&k.jsxs("div",{className:"md:hidden bg-brand-dark border-t border-white/10 absolute w-full p-4 flex flex-col gap-4 items-center",children:[k.jsx("a",{href:"#services",onClick:x,className:"text-gray-300",children:"Servicios"}),k.jsx("a",{href:"#delivery",onClick:x,className:"text-gray-300",children:"Entregas"}),k.jsx("a",{href:"#gallery",onClick:x,className:"text-gray-300",children:"Galera"}),k.jsx(Ac,{to:"/quote",onClick:x,className:"text-brand-blue font-bold",children:"Cotizar"})]})]}),k.jsxs("section",{className:"relative min-h-screen flex items-center justify-center pt-20 overflow-hidden",children:[k.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden -z-10",children:[k.jsx("div",{className:"absolute top-1/4 -left-20 w-96 h-96 bg-brand-blue/20 rounded-full blur-3xl animate-pulse"}),k.jsx("div",{className:"absolute bottom-1/4 -right-20 w-96 h-96 bg-brand-orange/10 rounded-full blur-3xl animate-pulse delay-1000"})]}),k.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center gap-12 w-full",children:[k.jsxs("div",{className:"flex-1 text-center md:text-left z-10",children:[k.jsxs("h1",{className:"font-display text-5xl md:text-7xl font-extrabold leading-tight mb-6",children:["Tus ideas, impresas en ",k.jsx("br",{}),k.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-brand-blue to-brand-orange",children:"3D Realidad"})]}),k.jsx("p",{className:"text-xl text-gray-400 mb-8 max-w-2xl mx-auto md:mx-0",children:"Creamos figuras, adornos y piezas personalizadas con la mejor calidad. Si lo imaginas, lo podemos imprimir!"}),k.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center md:justify-start",children:[k.jsx(Ac,{to:"/quote",className:"bg-brand-blue hover:bg-blue-600 text-white text-lg px-8 py-4 rounded-xl font-bold shadow-xl shadow-blue-500/20 transition-all hover:-translate-y-1",children:"Hacer un Pedido"}),k.jsx("a",{href:"#gallery",className:"glass hover:bg-white/10 text-white text-lg px-8 py-4 rounded-xl font-semibold transition-all flex items-center justify-center",children:"Ver Catlogo"})]})]}),k.jsx("div",{className:"flex-1 w-full h-[400px] md:h-[600px] relative z-10",children:k.jsx(Gae,{})})]})]}),k.jsx("section",{id:"services",className:"py-24 bg-brand-dark/50",children:k.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[k.jsxs("div",{className:"text-center mb-16",children:[k.jsxs("h2",{className:"font-display text-4xl font-bold mb-4",children:["Nuestros ",k.jsx("span",{className:"text-brand-blue",children:"Servicios"})]}),k.jsx("p",{className:"text-gray-400",children:"Calidad premium en cada capa."})]}),k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[k.jsx(kI,{icon:k.jsx(V4,{size:40,className:"text-brand-blue"}),title:"Impresin a Medida",desc:"Prototipos, refacciones y piezas tcnicas diseadas especficamente para tus necesidades."}),k.jsx(kI,{icon:k.jsx(vse,{size:40,className:"text-brand-orange"}),title:"Figuras y Arte",desc:"Coleccionables de anime, videojuegos y miniaturas de alta resolucin para pintar."}),k.jsx(kI,{icon:k.jsx(B4,{size:40,className:"text-purple-500"}),title:"Decoracin",desc:"Macetas, lmparas, litofanas y regalos nicos para darle vida a tus espacios."})]})]})}),k.jsx("section",{id:"delivery",className:"py-24 relative",children:k.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:k.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-[2rem] p-8 md:p-12 shadow-2xl flex flex-col md:flex-row gap-12",children:[k.jsxs("div",{className:"flex-1 space-y-8",children:[k.jsxs("h2",{className:"text-3xl font-display font-bold text-white",children:["Informacin de ",k.jsx("span",{className:"text-brand-orange",children:"Entregas"})]}),k.jsxs("div",{className:"space-y-6",children:[k.jsxs("div",{className:"flex gap-4",children:[k.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white shadow-lg shadow-blue-500/30",children:k.jsx(B4,{size:24})}),k.jsxs("div",{children:[k.jsx("h4",{className:"font-bold text-white text-lg",children:"Punto de Entrega Principal"}),k.jsx("p",{className:"text-gray-400",children:"Metro Chabacano, CDMX"}),k.jsx("a",{href:"https://maps.google.com/?q=Metro+Chabacano",target:"_blank",rel:"noreferrer",className:"inline-block mt-3 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold px-4 py-2 rounded-lg transition-colors",children:"Ver Ubicacin en Mapa"}),k.jsx("p",{className:"text-blue-400 text-xs font-bold mt-2",children:"Sbados: 11:00 am - 3:00 pm"})]})]}),k.jsxs("div",{className:"flex items-center gap-4",children:[k.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-slate-700 rounded-full flex items-center justify-center text-slate-300",children:k.jsx(V4,{size:24})}),k.jsxs("div",{children:[k.jsx("h4",{className:"font-bold text-white",children:"Entregas Urgentes / Entre Semana"}),k.jsx("p",{className:"text-sm text-gray-500",children:"Punto a convenir (Con costo extra)"})]})]}),k.jsxs("div",{className:"flex items-center gap-4",children:[k.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-brand-orange rounded-full flex items-center justify-center text-black font-bold shadow-lg shadow-orange-500/20",children:k.jsx(eN,{size:24})}),k.jsxs("div",{children:[k.jsx("h4",{className:"font-bold text-white",children:"Envos a todo Mxico"}),k.jsx("p",{className:"text-sm text-gray-500",children:"Paquetera segura (Con costo adicional)"})]})]})]})]}),k.jsxs("div",{className:"flex-1 bg-black/20 rounded-2xl p-8 border border-white/5",children:[k.jsx("h3",{className:"text-xl font-bold text-center mb-8 text-white",children:"Mtodos de Pago"}),k.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[k.jsx("div",{className:"bg-slate-800/50 border border-slate-700 p-4 rounded-xl flex items-center justify-center text-sm font-medium text-gray-300 hover:bg-slate-700/50 transition-colors cursor-default",children:" Tarjeta / MSI"}),k.jsx("div",{className:"bg-slate-800/50 border border-slate-700 p-4 rounded-xl flex items-center justify-center text-sm font-medium text-gray-300 hover:bg-slate-700/50 transition-colors cursor-default",children:" Transferencia"}),k.jsx("div",{className:"bg-slate-800/50 border border-slate-700 p-4 rounded-xl flex items-center justify-center text-sm font-medium text-gray-300 hover:bg-slate-700/50 transition-colors cursor-default",children:" Efectivo"}),k.jsx("div",{className:"bg-white p-4 rounded-xl flex items-center justify-center shadow-lg hover:scale-105 transition-transform cursor-pointer",children:k.jsx("span",{className:"text-blue-500 font-bold italic",children:"mercadopago"})})]}),k.jsx("div",{className:"mt-8 text-center",children:k.jsx(Ac,{to:"/status",className:"inline-flex items-center gap-2 text-brand-blue font-bold hover:text-white transition-colors",children:"Revisa estatus de tu pedido "})})]})]})})}),k.jsxs("section",{id:"gallery",className:"py-24 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[k.jsxs("h2",{className:"font-display text-4xl font-bold mb-6 text-center text-white",children:["Galera de ",k.jsx("span",{className:"text-brand-orange",children:"Trabajos"})]}),k.jsx("div",{className:"flex flex-wrap justify-center gap-3 mb-10",children:p.map(T=>k.jsx("button",{onClick:()=>a(T),className:`px-6 py-2 rounded-full font-bold text-sm transition-all border-2 
                        ${r===T||T==="Todos"&&r==="all"?"bg-brand-orange text-white border-brand-orange shadow-lg shadow-orange-500/30":"bg-transparent text-gray-300 border-gray-600 hover:border-gray-400 hover:text-white"}`,children:T},T))}),k.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:g.map((T,S)=>k.jsxs("div",{onClick:()=>i(T.image),className:"group relative overflow-hidden rounded-2xl shadow-lg aspect-square bg-gray-900 cursor-pointer hover:shadow-2xl transition-all hover:scale-[1.02]",children:[k.jsx("div",{className:"w-full h-full bg-cover bg-center group-hover:scale-110 transition-transform duration-500",style:{backgroundImage:`url('${T.image}')`}}),k.jsx("div",{className:"absolute top-4 right-4 flex flex-col items-end gap-2 z-10",children:k.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider shadow-sm ${T.quantity>0?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:T.quantity>0?"Disponible":"Agotado"})}),k.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-4 bg-gradient-to-t from-black/90 via-black/50 to-transparent",children:[k.jsx("h3",{className:"text-white font-bold text-lg drop-shadow-md leading-tight",children:T.name}),k.jsx("p",{className:"text-brand-orange font-bold text-xl mt-1",children:T.price})]})]},S))})]}),t&&k.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 flex items-center justify-center p-4",onClick:()=>i(null),children:[k.jsx("button",{className:"absolute top-4 right-4 text-white hover:text-brand-orange p-2",children:k.jsx(H4,{size:32})}),k.jsx("img",{src:t,alt:"Full view",className:"max-h-[90vh] max-w-[90vw] rounded-lg shadow-2xl",onClick:T=>T.stopPropagation()})]}),k.jsxs("footer",{className:"bg-black py-16 border-t border-white/10 text-center relative overflow-hidden",children:[k.jsxs("div",{className:"flex justify-center gap-10 mb-10",children:[k.jsx(G4,{href:"https://facebook.com/tunascraft3d",icon:k.jsx(ose,{}),label:"Facebook"}),k.jsx(G4,{href:"https://instagram.com/tunas_craft",icon:k.jsx(hse,{}),label:"Instagram"})]}),k.jsx("p",{className:"text-gray-500 font-medium text-sm",children:" 2024 Tuna's Craft. Hecho con  y ."}),k.jsx("div",{className:"mt-4",children:k.jsx(Ac,{to:"/admin",className:"text-xs text-gray-700 hover:text-brand-blue",children:"Admin Access"})})]})]})},kI=({icon:n,title:e,desc:t})=>k.jsxs("div",{className:"glass p-8 rounded-2xl hover:bg-white/5 transition-all cursor-default group",children:[k.jsx("div",{className:"w-14 h-14 bg-white/5 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform",children:n}),k.jsx("h3",{className:"font-display text-2xl font-bold mb-3",children:e}),k.jsx("p",{className:"text-gray-400 leading-relaxed",children:t})]}),G4=({href:n,icon:e,label:t})=>k.jsxs("a",{href:n,target:"_blank",rel:"noreferrer",className:"group flex flex-col items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[k.jsx("div",{className:"p-4 bg-white/5 rounded-2xl group-hover:bg-brand-blue/10 group-hover:scale-110 transition-all border border-white/5 shadow-lg",children:ng.cloneElement(e,{size:24})}),k.jsx("span",{className:"text-xs font-medium",children:t})]}),Pse=()=>{};var W4={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Rse=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=n[t++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=n[t++],s=n[t++],l=n[t++],c=((r&7)<<18|(a&63)<<12|(s&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const a=n[t++],s=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|s&63)}}return e.join("")},E8={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const a=n[r],s=r+1<n.length,l=s?n[r+1]:0,c=r+2<n.length,f=c?n[r+2]:0,p=a>>2,g=(a&3)<<4|l>>4;let v=(l&15)<<2|f>>6,_=f&63;c||(_=64,s||(v=64)),i.push(t[p],t[g],t[v],t[_])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(w8(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Rse(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const a=t[n.charAt(r++)],l=r<n.length?t[n.charAt(r)]:0;++r;const f=r<n.length?t[n.charAt(r)]:64;++r;const g=r<n.length?t[n.charAt(r)]:64;if(++r,a==null||l==null||f==null||g==null)throw new Nse;const v=a<<2|l>>4;if(i.push(v),f!==64){const _=l<<4&240|f>>2;if(i.push(_),g!==64){const x=f<<6&192|g;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Nse extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ose=function(n){const e=w8(n);return E8.encodeByteArray(e,!0)},$E=function(n){return Ose(n).replace(/\./g,"")},T8=function(n){try{return E8.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dse(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lse=()=>Dse().__FIREBASE_DEFAULTS__,kse=()=>{if(typeof process>"u"||typeof W4>"u")return;const n=W4.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Use=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&T8(n[1]);return e&&JSON.parse(e)},GA=()=>{try{return Pse()||Lse()||kse()||Use()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},A8=n=>{var e,t;return(t=(e=GA())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},zse=n=>{const e=A8(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},M8=()=>{var n;return(n=GA())==null?void 0:n.config},C8=n=>{var e;return(e=GA())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fse{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function I8(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bse(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[$E(JSON.stringify(t)),$E(JSON.stringify(s)),""].join(".")}const lb={};function Vse(){const n={prod:[],emulator:[]};for(const e of Object.keys(lb))lb[e]?n.emulator.push(e):n.prod.push(e);return n}function jse(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let q4=!1;function P8(n,e){if(typeof window>"u"||typeof document>"u"||!Fy(window.location.host)||lb[n]===e||lb[n]||q4)return;lb[n]=e;function t(v){return`__firebase__banner__${v}`}const i="__firebase__banner",a=Vse().prod.length>0;function s(){const v=document.getElementById(i);v&&v.remove()}function l(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,_){v.setAttribute("width","24"),v.setAttribute("id",_),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{q4=!0,s()},v}function p(v,_){v.setAttribute("id",_),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=jse(i),_=t("text"),x=document.getElementById(_)||document.createElement("span"),T=t("learnmore"),S=document.getElementById(T)||document.createElement("a"),w=t("preprendIcon"),I=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const R=v.element;l(R),p(S,T);const O=f();c(I,w),R.append(I,x,S,O),document.body.appendChild(R)}a?(x.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Hse(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(As())}function Gse(){var e;const n=(e=GA())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Wse(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qse(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $se(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Xse(){const n=As();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Yse(){return!Gse()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kse(){try{return typeof indexedDB=="object"}catch{return!1}}function Zse(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var a;e(((a=r.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qse="FirebaseError";class fh extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Qse,Object.setPrototypeOf(this,fh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yx.prototype.create)}}class yx{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],s=a?Jse(a,i):"Error",l=`${this.serviceName}: ${s} (${r}).`;return new fh(r,l,i)}}function Jse(n,e){return n.replace(eoe,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const eoe=/\{\$([^}]+)}/g;function toe(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Gm(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const a=n[r],s=e[r];if($4(a)&&$4(s)){if(!Gm(a,s))return!1}else if(a!==s)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function $4(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function noe(n,e){const t=new ioe(n,e);return t.subscribe.bind(t)}class ioe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");roe(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=UI),r.error===void 0&&(r.error=UI),r.complete===void 0&&(r.complete=UI);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function roe(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function UI(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(n){return n&&n._delegate?n._delegate:n}class Wm{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aoe=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Fse;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ooe(e))try{this.getOrInitializeService({instanceIdentifier:hm})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=hm){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hm){return this.instances.has(e)}getOptions(e=hm){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);i===l&&s.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&e(a,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:soe(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=hm){return this.component?this.component.multipleInstances?e:hm:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function soe(n){return n===hm?void 0:n}function ooe(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class loe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new aoe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $n;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})($n||($n={}));const uoe={debug:$n.DEBUG,verbose:$n.VERBOSE,info:$n.INFO,warn:$n.WARN,error:$n.ERROR,silent:$n.SILENT},coe=$n.INFO,foe={[$n.DEBUG]:"log",[$n.VERBOSE]:"log",[$n.INFO]:"info",[$n.WARN]:"warn",[$n.ERROR]:"error"},hoe=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=foe[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xD{constructor(e){this.name=e,this._logLevel=coe,this._logHandler=hoe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $n))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uoe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$n.DEBUG,...e),this._logHandler(this,$n.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$n.VERBOSE,...e),this._logHandler(this,$n.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$n.INFO,...e),this._logHandler(this,$n.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$n.WARN,...e),this._logHandler(this,$n.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$n.ERROR,...e),this._logHandler(this,$n.ERROR,...e)}}const doe=(n,e)=>e.some(t=>n instanceof t);let X4,Y4;function poe(){return X4||(X4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function moe(){return Y4||(Y4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const R8=new WeakMap,nN=new WeakMap,N8=new WeakMap,zI=new WeakMap,SD=new WeakMap;function goe(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",a),n.removeEventListener("error",s)},a=()=>{t(kd(n.result)),r()},s=()=>{i(n.error),r()};n.addEventListener("success",a),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&R8.set(t,n)}).catch(()=>{}),SD.set(e,n),e}function voe(n){if(nN.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",s),n.removeEventListener("abort",s)},a=()=>{t(),r()},s=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",a),n.addEventListener("error",s),n.addEventListener("abort",s)});nN.set(n,e)}let iN={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return nN.get(n);if(e==="objectStoreNames")return n.objectStoreNames||N8.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return kd(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function yoe(n){iN=n(iN)}function _oe(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(FI(this),e,...t);return N8.set(i,e.sort?e.sort():[e]),kd(i)}:moe().includes(n)?function(...e){return n.apply(FI(this),e),kd(R8.get(this))}:function(...e){return kd(n.apply(FI(this),e))}}function boe(n){return typeof n=="function"?_oe(n):(n instanceof IDBTransaction&&voe(n),doe(n,poe())?new Proxy(n,iN):n)}function kd(n){if(n instanceof IDBRequest)return goe(n);if(zI.has(n))return zI.get(n);const e=boe(n);return e!==n&&(zI.set(n,e),SD.set(e,n)),e}const FI=n=>SD.get(n);function xoe(n,e,{blocked:t,upgrade:i,blocking:r,terminated:a}={}){const s=indexedDB.open(n,e),l=kd(s);return i&&s.addEventListener("upgradeneeded",c=>{i(kd(s.result),c.oldVersion,c.newVersion,kd(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),r&&c.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const Soe=["get","getKey","getAll","getAllKeys","count"],woe=["put","add","delete","clear"],BI=new Map;function K4(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(BI.get(e))return BI.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=woe.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Soe.includes(t)))return;const a=async function(s,...l){const c=this.transaction(s,r?"readwrite":"readonly");let f=c.store;return i&&(f=f.index(l.shift())),(await Promise.all([f[t](...l),r&&c.done]))[0]};return BI.set(e,a),a}yoe(n=>({...n,get:(e,t,i)=>K4(e,t)||n.get(e,t,i),has:(e,t)=>!!K4(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eoe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Toe(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Toe(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rN="@firebase/app",Z4="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=new xD("@firebase/app"),Aoe="@firebase/app-compat",Moe="@firebase/analytics-compat",Coe="@firebase/analytics",Ioe="@firebase/app-check-compat",Poe="@firebase/app-check",Roe="@firebase/auth",Noe="@firebase/auth-compat",Ooe="@firebase/database",Doe="@firebase/data-connect",Loe="@firebase/database-compat",koe="@firebase/functions",Uoe="@firebase/functions-compat",zoe="@firebase/installations",Foe="@firebase/installations-compat",Boe="@firebase/messaging",Voe="@firebase/messaging-compat",joe="@firebase/performance",Hoe="@firebase/performance-compat",Goe="@firebase/remote-config",Woe="@firebase/remote-config-compat",qoe="@firebase/storage",$oe="@firebase/storage-compat",Xoe="@firebase/firestore",Yoe="@firebase/ai",Koe="@firebase/firestore-compat",Zoe="firebase",Qoe="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="[DEFAULT]",Joe={[rN]:"fire-core",[Aoe]:"fire-core-compat",[Coe]:"fire-analytics",[Moe]:"fire-analytics-compat",[Poe]:"fire-app-check",[Ioe]:"fire-app-check-compat",[Roe]:"fire-auth",[Noe]:"fire-auth-compat",[Ooe]:"fire-rtdb",[Doe]:"fire-data-connect",[Loe]:"fire-rtdb-compat",[koe]:"fire-fn",[Uoe]:"fire-fn-compat",[zoe]:"fire-iid",[Foe]:"fire-iid-compat",[Boe]:"fire-fcm",[Voe]:"fire-fcm-compat",[joe]:"fire-perf",[Hoe]:"fire-perf-compat",[Goe]:"fire-rc",[Woe]:"fire-rc-compat",[qoe]:"fire-gcs",[$oe]:"fire-gcs-compat",[Xoe]:"fire-fst",[Koe]:"fire-fst-compat",[Yoe]:"fire-vertex","fire-js":"fire-js",[Zoe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=new Map,ele=new Map,sN=new Map;function Q4(n,e){try{n.container.addComponent(e)}catch(t){th.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function yy(n){const e=n.name;if(sN.has(e))return th.debug(`There were multiple attempts to register component ${e}.`),!1;sN.set(e,n);for(const t of XE.values())Q4(t,n);for(const t of ele.values())Q4(t,n);return!0}function wD(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function wu(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tle={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ud=new yx("app","Firebase",tle);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nle{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Wm("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ud.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By=Qoe;function O8(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:aN,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Ud.create("bad-app-name",{appName:String(r)});if(t||(t=M8()),!t)throw Ud.create("no-options");const a=XE.get(r);if(a){if(Gm(t,a.options)&&Gm(i,a.config))return a;throw Ud.create("duplicate-app",{appName:r})}const s=new loe(r);for(const c of sN.values())s.addComponent(c);const l=new nle(t,i,s);return XE.set(r,l),l}function D8(n=aN){const e=XE.get(n);if(!e&&n===aN&&M8())return O8();if(!e)throw Ud.create("no-app",{appName:n});return e}function zd(n,e,t){let i=Joe[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const s=[`Unable to register library "${i}" with version "${e}":`];r&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),th.warn(s.join(" "));return}yy(new Wm(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ile="firebase-heartbeat-database",rle=1,Lb="firebase-heartbeat-store";let VI=null;function L8(){return VI||(VI=xoe(ile,rle,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Lb)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ud.create("idb-open",{originalErrorMessage:n.message})})),VI}async function ale(n){try{const t=(await L8()).transaction(Lb),i=await t.objectStore(Lb).get(k8(n));return await t.done,i}catch(e){if(e instanceof fh)th.warn(e.message);else{const t=Ud.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});th.warn(t.message)}}}async function J4(n,e){try{const i=(await L8()).transaction(Lb,"readwrite");await i.objectStore(Lb).put(e,k8(n)),await i.done}catch(t){if(t instanceof fh)th.warn(t.message);else{const i=Ud.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});th.warn(i.message)}}}function k8(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sle=1024,ole=30;class lle{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new cle(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=ez();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>ole){const s=fle(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){th.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ez(),{heartbeatsToSend:i,unsentEntries:r}=ule(this._heartbeatsCache.heartbeats),a=$E(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return th.warn(t),""}}}function ez(){return new Date().toISOString().substring(0,10)}function ule(n,e=sle){const t=[];let i=n.slice();for(const r of n){const a=t.find(s=>s.agent===r.agent);if(a){if(a.dates.push(r.date),tz(t)>e){a.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),tz(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class cle{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kse()?Zse().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ale(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return J4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return J4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function tz(n){return $E(JSON.stringify({version:2,heartbeats:n})).length}function fle(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hle(n){yy(new Wm("platform-logger",e=>new Eoe(e),"PRIVATE")),yy(new Wm("heartbeat",e=>new lle(e),"PRIVATE")),zd(rN,Z4,n),zd(rN,Z4,"esm2020"),zd("fire-js","")}hle("");var dle="firebase",ple="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zd(dle,ple,"app");var nz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fd,U8;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,z){function P(){}P.prototype=z.prototype,L.F=z.prototype,L.prototype=new P,L.prototype.constructor=L,L.D=function(D,j,q){for(var W=Array(arguments.length-2),se=2;se<arguments.length;se++)W[se-2]=arguments[se];return z.prototype[j].apply(D,W)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(L,z,P){P||(P=0);const D=Array(16);if(typeof z=="string")for(var j=0;j<16;++j)D[j]=z.charCodeAt(P++)|z.charCodeAt(P++)<<8|z.charCodeAt(P++)<<16|z.charCodeAt(P++)<<24;else for(j=0;j<16;++j)D[j]=z[P++]|z[P++]<<8|z[P++]<<16|z[P++]<<24;z=L.g[0],P=L.g[1],j=L.g[2];let q=L.g[3],W;W=z+(q^P&(j^q))+D[0]+3614090360&4294967295,z=P+(W<<7&4294967295|W>>>25),W=q+(j^z&(P^j))+D[1]+3905402710&4294967295,q=z+(W<<12&4294967295|W>>>20),W=j+(P^q&(z^P))+D[2]+606105819&4294967295,j=q+(W<<17&4294967295|W>>>15),W=P+(z^j&(q^z))+D[3]+3250441966&4294967295,P=j+(W<<22&4294967295|W>>>10),W=z+(q^P&(j^q))+D[4]+4118548399&4294967295,z=P+(W<<7&4294967295|W>>>25),W=q+(j^z&(P^j))+D[5]+1200080426&4294967295,q=z+(W<<12&4294967295|W>>>20),W=j+(P^q&(z^P))+D[6]+2821735955&4294967295,j=q+(W<<17&4294967295|W>>>15),W=P+(z^j&(q^z))+D[7]+4249261313&4294967295,P=j+(W<<22&4294967295|W>>>10),W=z+(q^P&(j^q))+D[8]+1770035416&4294967295,z=P+(W<<7&4294967295|W>>>25),W=q+(j^z&(P^j))+D[9]+2336552879&4294967295,q=z+(W<<12&4294967295|W>>>20),W=j+(P^q&(z^P))+D[10]+4294925233&4294967295,j=q+(W<<17&4294967295|W>>>15),W=P+(z^j&(q^z))+D[11]+2304563134&4294967295,P=j+(W<<22&4294967295|W>>>10),W=z+(q^P&(j^q))+D[12]+1804603682&4294967295,z=P+(W<<7&4294967295|W>>>25),W=q+(j^z&(P^j))+D[13]+4254626195&4294967295,q=z+(W<<12&4294967295|W>>>20),W=j+(P^q&(z^P))+D[14]+2792965006&4294967295,j=q+(W<<17&4294967295|W>>>15),W=P+(z^j&(q^z))+D[15]+1236535329&4294967295,P=j+(W<<22&4294967295|W>>>10),W=z+(j^q&(P^j))+D[1]+4129170786&4294967295,z=P+(W<<5&4294967295|W>>>27),W=q+(P^j&(z^P))+D[6]+3225465664&4294967295,q=z+(W<<9&4294967295|W>>>23),W=j+(z^P&(q^z))+D[11]+643717713&4294967295,j=q+(W<<14&4294967295|W>>>18),W=P+(q^z&(j^q))+D[0]+3921069994&4294967295,P=j+(W<<20&4294967295|W>>>12),W=z+(j^q&(P^j))+D[5]+3593408605&4294967295,z=P+(W<<5&4294967295|W>>>27),W=q+(P^j&(z^P))+D[10]+38016083&4294967295,q=z+(W<<9&4294967295|W>>>23),W=j+(z^P&(q^z))+D[15]+3634488961&4294967295,j=q+(W<<14&4294967295|W>>>18),W=P+(q^z&(j^q))+D[4]+3889429448&4294967295,P=j+(W<<20&4294967295|W>>>12),W=z+(j^q&(P^j))+D[9]+568446438&4294967295,z=P+(W<<5&4294967295|W>>>27),W=q+(P^j&(z^P))+D[14]+3275163606&4294967295,q=z+(W<<9&4294967295|W>>>23),W=j+(z^P&(q^z))+D[3]+4107603335&4294967295,j=q+(W<<14&4294967295|W>>>18),W=P+(q^z&(j^q))+D[8]+1163531501&4294967295,P=j+(W<<20&4294967295|W>>>12),W=z+(j^q&(P^j))+D[13]+2850285829&4294967295,z=P+(W<<5&4294967295|W>>>27),W=q+(P^j&(z^P))+D[2]+4243563512&4294967295,q=z+(W<<9&4294967295|W>>>23),W=j+(z^P&(q^z))+D[7]+1735328473&4294967295,j=q+(W<<14&4294967295|W>>>18),W=P+(q^z&(j^q))+D[12]+2368359562&4294967295,P=j+(W<<20&4294967295|W>>>12),W=z+(P^j^q)+D[5]+4294588738&4294967295,z=P+(W<<4&4294967295|W>>>28),W=q+(z^P^j)+D[8]+2272392833&4294967295,q=z+(W<<11&4294967295|W>>>21),W=j+(q^z^P)+D[11]+1839030562&4294967295,j=q+(W<<16&4294967295|W>>>16),W=P+(j^q^z)+D[14]+4259657740&4294967295,P=j+(W<<23&4294967295|W>>>9),W=z+(P^j^q)+D[1]+2763975236&4294967295,z=P+(W<<4&4294967295|W>>>28),W=q+(z^P^j)+D[4]+1272893353&4294967295,q=z+(W<<11&4294967295|W>>>21),W=j+(q^z^P)+D[7]+4139469664&4294967295,j=q+(W<<16&4294967295|W>>>16),W=P+(j^q^z)+D[10]+3200236656&4294967295,P=j+(W<<23&4294967295|W>>>9),W=z+(P^j^q)+D[13]+681279174&4294967295,z=P+(W<<4&4294967295|W>>>28),W=q+(z^P^j)+D[0]+3936430074&4294967295,q=z+(W<<11&4294967295|W>>>21),W=j+(q^z^P)+D[3]+3572445317&4294967295,j=q+(W<<16&4294967295|W>>>16),W=P+(j^q^z)+D[6]+76029189&4294967295,P=j+(W<<23&4294967295|W>>>9),W=z+(P^j^q)+D[9]+3654602809&4294967295,z=P+(W<<4&4294967295|W>>>28),W=q+(z^P^j)+D[12]+3873151461&4294967295,q=z+(W<<11&4294967295|W>>>21),W=j+(q^z^P)+D[15]+530742520&4294967295,j=q+(W<<16&4294967295|W>>>16),W=P+(j^q^z)+D[2]+3299628645&4294967295,P=j+(W<<23&4294967295|W>>>9),W=z+(j^(P|~q))+D[0]+4096336452&4294967295,z=P+(W<<6&4294967295|W>>>26),W=q+(P^(z|~j))+D[7]+1126891415&4294967295,q=z+(W<<10&4294967295|W>>>22),W=j+(z^(q|~P))+D[14]+2878612391&4294967295,j=q+(W<<15&4294967295|W>>>17),W=P+(q^(j|~z))+D[5]+4237533241&4294967295,P=j+(W<<21&4294967295|W>>>11),W=z+(j^(P|~q))+D[12]+1700485571&4294967295,z=P+(W<<6&4294967295|W>>>26),W=q+(P^(z|~j))+D[3]+2399980690&4294967295,q=z+(W<<10&4294967295|W>>>22),W=j+(z^(q|~P))+D[10]+4293915773&4294967295,j=q+(W<<15&4294967295|W>>>17),W=P+(q^(j|~z))+D[1]+2240044497&4294967295,P=j+(W<<21&4294967295|W>>>11),W=z+(j^(P|~q))+D[8]+1873313359&4294967295,z=P+(W<<6&4294967295|W>>>26),W=q+(P^(z|~j))+D[15]+4264355552&4294967295,q=z+(W<<10&4294967295|W>>>22),W=j+(z^(q|~P))+D[6]+2734768916&4294967295,j=q+(W<<15&4294967295|W>>>17),W=P+(q^(j|~z))+D[13]+1309151649&4294967295,P=j+(W<<21&4294967295|W>>>11),W=z+(j^(P|~q))+D[4]+4149444226&4294967295,z=P+(W<<6&4294967295|W>>>26),W=q+(P^(z|~j))+D[11]+3174756917&4294967295,q=z+(W<<10&4294967295|W>>>22),W=j+(z^(q|~P))+D[2]+718787259&4294967295,j=q+(W<<15&4294967295|W>>>17),W=P+(q^(j|~z))+D[9]+3951481745&4294967295,L.g[0]=L.g[0]+z&4294967295,L.g[1]=L.g[1]+(j+(W<<21&4294967295|W>>>11))&4294967295,L.g[2]=L.g[2]+j&4294967295,L.g[3]=L.g[3]+q&4294967295}i.prototype.v=function(L,z){z===void 0&&(z=L.length);const P=z-this.blockSize,D=this.C;let j=this.h,q=0;for(;q<z;){if(j==0)for(;q<=P;)r(this,L,q),q+=this.blockSize;if(typeof L=="string"){for(;q<z;)if(D[j++]=L.charCodeAt(q++),j==this.blockSize){r(this,D),j=0;break}}else for(;q<z;)if(D[j++]=L[q++],j==this.blockSize){r(this,D),j=0;break}}this.h=j,this.o+=z},i.prototype.A=function(){var L=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);L[0]=128;for(var z=1;z<L.length-8;++z)L[z]=0;z=this.o*8;for(var P=L.length-8;P<L.length;++P)L[P]=z&255,z/=256;for(this.v(L),L=Array(16),z=0,P=0;P<4;++P)for(let D=0;D<32;D+=8)L[z++]=this.g[P]>>>D&255;return L};function a(L,z){var P=l;return Object.prototype.hasOwnProperty.call(P,L)?P[L]:P[L]=z(L)}function s(L,z){this.h=z;const P=[];let D=!0;for(let j=L.length-1;j>=0;j--){const q=L[j]|0;D&&q==z||(P[j]=q,D=!1)}this.g=P}var l={};function c(L){return-128<=L&&L<128?a(L,function(z){return new s([z|0],z<0?-1:0)}):new s([L|0],L<0?-1:0)}function f(L){if(isNaN(L)||!isFinite(L))return g;if(L<0)return S(f(-L));const z=[];let P=1;for(let D=0;L>=P;D++)z[D]=L/P|0,P*=4294967296;return new s(z,0)}function p(L,z){if(L.length==0)throw Error("number format error: empty string");if(z=z||10,z<2||36<z)throw Error("radix out of range: "+z);if(L.charAt(0)=="-")return S(p(L.substring(1),z));if(L.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=f(Math.pow(z,8));let D=g;for(let q=0;q<L.length;q+=8){var j=Math.min(8,L.length-q);const W=parseInt(L.substring(q,q+j),z);j<8?(j=f(Math.pow(z,j)),D=D.j(j).add(f(W))):(D=D.j(P),D=D.add(f(W)))}return D}var g=c(0),v=c(1),_=c(16777216);n=s.prototype,n.m=function(){if(T(this))return-S(this).m();let L=0,z=1;for(let P=0;P<this.g.length;P++){const D=this.i(P);L+=(D>=0?D:4294967296+D)*z,z*=4294967296}return L},n.toString=function(L){if(L=L||10,L<2||36<L)throw Error("radix out of range: "+L);if(x(this))return"0";if(T(this))return"-"+S(this).toString(L);const z=f(Math.pow(L,6));var P=this;let D="";for(;;){const j=O(P,z).g;P=w(P,j.j(z));let q=((P.g.length>0?P.g[0]:P.h)>>>0).toString(L);if(P=j,x(P))return q+D;for(;q.length<6;)q="0"+q;D=q+D}},n.i=function(L){return L<0?0:L<this.g.length?this.g[L]:this.h};function x(L){if(L.h!=0)return!1;for(let z=0;z<L.g.length;z++)if(L.g[z]!=0)return!1;return!0}function T(L){return L.h==-1}n.l=function(L){return L=w(this,L),T(L)?-1:x(L)?0:1};function S(L){const z=L.g.length,P=[];for(let D=0;D<z;D++)P[D]=~L.g[D];return new s(P,~L.h).add(v)}n.abs=function(){return T(this)?S(this):this},n.add=function(L){const z=Math.max(this.g.length,L.g.length),P=[];let D=0;for(let j=0;j<=z;j++){let q=D+(this.i(j)&65535)+(L.i(j)&65535),W=(q>>>16)+(this.i(j)>>>16)+(L.i(j)>>>16);D=W>>>16,q&=65535,W&=65535,P[j]=W<<16|q}return new s(P,P[P.length-1]&-2147483648?-1:0)};function w(L,z){return L.add(S(z))}n.j=function(L){if(x(this)||x(L))return g;if(T(this))return T(L)?S(this).j(S(L)):S(S(this).j(L));if(T(L))return S(this.j(S(L)));if(this.l(_)<0&&L.l(_)<0)return f(this.m()*L.m());const z=this.g.length+L.g.length,P=[];for(var D=0;D<2*z;D++)P[D]=0;for(D=0;D<this.g.length;D++)for(let j=0;j<L.g.length;j++){const q=this.i(D)>>>16,W=this.i(D)&65535,se=L.i(j)>>>16,ue=L.i(j)&65535;P[2*D+2*j]+=W*ue,I(P,2*D+2*j),P[2*D+2*j+1]+=q*ue,I(P,2*D+2*j+1),P[2*D+2*j+1]+=W*se,I(P,2*D+2*j+1),P[2*D+2*j+2]+=q*se,I(P,2*D+2*j+2)}for(L=0;L<z;L++)P[L]=P[2*L+1]<<16|P[2*L];for(L=z;L<2*z;L++)P[L]=0;return new s(P,0)};function I(L,z){for(;(L[z]&65535)!=L[z];)L[z+1]+=L[z]>>>16,L[z]&=65535,z++}function R(L,z){this.g=L,this.h=z}function O(L,z){if(x(z))throw Error("division by zero");if(x(L))return new R(g,g);if(T(L))return z=O(S(L),z),new R(S(z.g),S(z.h));if(T(z))return z=O(L,S(z)),new R(S(z.g),z.h);if(L.g.length>30){if(T(L)||T(z))throw Error("slowDivide_ only works with positive integers.");for(var P=v,D=z;D.l(L)<=0;)P=F(P),D=F(D);var j=B(P,1),q=B(D,1);for(D=B(D,2),P=B(P,2);!x(D);){var W=q.add(D);W.l(L)<=0&&(j=j.add(P),q=W),D=B(D,1),P=B(P,1)}return z=w(L,j.j(z)),new R(j,z)}for(j=g;L.l(z)>=0;){for(P=Math.max(1,Math.floor(L.m()/z.m())),D=Math.ceil(Math.log(P)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),q=f(P),W=q.j(z);T(W)||W.l(L)>0;)P-=D,q=f(P),W=q.j(z);x(q)&&(q=v),j=j.add(q),L=w(L,W)}return new R(j,L)}n.B=function(L){return O(this,L).h},n.and=function(L){const z=Math.max(this.g.length,L.g.length),P=[];for(let D=0;D<z;D++)P[D]=this.i(D)&L.i(D);return new s(P,this.h&L.h)},n.or=function(L){const z=Math.max(this.g.length,L.g.length),P=[];for(let D=0;D<z;D++)P[D]=this.i(D)|L.i(D);return new s(P,this.h|L.h)},n.xor=function(L){const z=Math.max(this.g.length,L.g.length),P=[];for(let D=0;D<z;D++)P[D]=this.i(D)^L.i(D);return new s(P,this.h^L.h)};function F(L){const z=L.g.length+1,P=[];for(let D=0;D<z;D++)P[D]=L.i(D)<<1|L.i(D-1)>>>31;return new s(P,L.h)}function B(L,z){const P=z>>5;z%=32;const D=L.g.length-P,j=[];for(let q=0;q<D;q++)j[q]=z>0?L.i(q+P)>>>z|L.i(q+P+1)<<32-z:L.i(q+P);return new s(j,L.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,U8=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=p,Fd=s}).apply(typeof nz<"u"?nz:typeof self<"u"?self:typeof window<"u"?window:{});var iw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var z8,W_,F8,Rw,oN,B8,V8,j8;(function(){var n,e=Object.defineProperty;function t(E){E=[typeof globalThis=="object"&&globalThis,E,typeof window=="object"&&window,typeof self=="object"&&self,typeof iw=="object"&&iw];for(var V=0;V<E.length;++V){var $=E[V];if($&&$.Math==Math)return $}throw Error("Cannot find global object")}var i=t(this);function r(E,V){if(V)e:{var $=i;E=E.split(".");for(var te=0;te<E.length-1;te++){var _e=E[te];if(!(_e in $))break e;$=$[_e]}E=E[E.length-1],te=$[E],V=V(te),V!=te&&V!=null&&e($,E,{configurable:!0,writable:!0,value:V})}}r("Symbol.dispose",function(E){return E||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(E){return E||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(E){return E||function(V){var $=[],te;for(te in V)Object.prototype.hasOwnProperty.call(V,te)&&$.push([te,V[te]]);return $}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},s=this||self;function l(E){var V=typeof E;return V=="object"&&E!=null||V=="function"}function c(E,V,$){return E.call.apply(E.bind,arguments)}function f(E,V,$){return f=c,f.apply(null,arguments)}function p(E,V){var $=Array.prototype.slice.call(arguments,1);return function(){var te=$.slice();return te.push.apply(te,arguments),E.apply(this,te)}}function g(E,V){function $(){}$.prototype=V.prototype,E.Z=V.prototype,E.prototype=new $,E.prototype.constructor=E,E.Ob=function(te,_e,Fe){for(var xt=Array(arguments.length-2),vn=2;vn<arguments.length;vn++)xt[vn-2]=arguments[vn];return V.prototype[_e].apply(te,xt)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?E=>E&&AsyncContext.Snapshot.wrap(E):E=>E;function _(E){const V=E.length;if(V>0){const $=Array(V);for(let te=0;te<V;te++)$[te]=E[te];return $}return[]}function x(E,V){for(let te=1;te<arguments.length;te++){const _e=arguments[te];var $=typeof _e;if($=$!="object"?$:_e?Array.isArray(_e)?"array":$:"null",$=="array"||$=="object"&&typeof _e.length=="number"){$=E.length||0;const Fe=_e.length||0;E.length=$+Fe;for(let xt=0;xt<Fe;xt++)E[$+xt]=_e[xt]}else E.push(_e)}}class T{constructor(V,$){this.i=V,this.j=$,this.h=0,this.g=null}get(){let V;return this.h>0?(this.h--,V=this.g,this.g=V.next,V.next=null):V=this.i(),V}}function S(E){s.setTimeout(()=>{throw E},0)}function w(){var E=L;let V=null;return E.g&&(V=E.g,E.g=E.g.next,E.g||(E.h=null),V.next=null),V}class I{constructor(){this.h=this.g=null}add(V,$){const te=R.get();te.set(V,$),this.h?this.h.next=te:this.g=te,this.h=te}}var R=new T(()=>new O,E=>E.reset());class O{constructor(){this.next=this.g=this.h=null}set(V,$){this.h=V,this.g=$,this.next=null}reset(){this.next=this.g=this.h=null}}let F,B=!1,L=new I,z=()=>{const E=Promise.resolve(void 0);F=()=>{E.then(P)}};function P(){for(var E;E=w();){try{E.h.call(E.g)}catch($){S($)}var V=R;V.j(E),V.h<100&&(V.h++,E.next=V.g,V.g=E)}B=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(E,V){this.type=E,this.g=this.target=V,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var E=!1,V=Object.defineProperty({},"passive",{get:function(){E=!0}});try{const $=()=>{};s.addEventListener("test",$,V),s.removeEventListener("test",$,V)}catch{}return E})();function W(E){return/^[\s\xa0]*$/.test(E)}function se(E,V){j.call(this,E?E.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,E&&this.init(E,V)}g(se,j),se.prototype.init=function(E,V){const $=this.type=E.type,te=E.changedTouches&&E.changedTouches.length?E.changedTouches[0]:null;this.target=E.target||E.srcElement,this.g=V,V=E.relatedTarget,V||($=="mouseover"?V=E.fromElement:$=="mouseout"&&(V=E.toElement)),this.relatedTarget=V,te?(this.clientX=te.clientX!==void 0?te.clientX:te.pageX,this.clientY=te.clientY!==void 0?te.clientY:te.pageY,this.screenX=te.screenX||0,this.screenY=te.screenY||0):(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0),this.button=E.button,this.key=E.key||"",this.ctrlKey=E.ctrlKey,this.altKey=E.altKey,this.shiftKey=E.shiftKey,this.metaKey=E.metaKey,this.pointerId=E.pointerId||0,this.pointerType=E.pointerType,this.state=E.state,this.i=E,E.defaultPrevented&&se.Z.h.call(this)},se.prototype.h=function(){se.Z.h.call(this);const E=this.i;E.preventDefault?E.preventDefault():E.returnValue=!1};var ue="closure_listenable_"+(Math.random()*1e6|0),J=0;function ae(E,V,$,te,_e){this.listener=E,this.proxy=null,this.src=V,this.type=$,this.capture=!!te,this.ha=_e,this.key=++J,this.da=this.fa=!1}function he(E){E.da=!0,E.listener=null,E.proxy=null,E.src=null,E.ha=null}function Te(E,V,$){for(const te in E)V.call($,E[te],te,E)}function Re(E,V){for(const $ in E)V.call(void 0,E[$],$,E)}function Q(E){const V={};for(const $ in E)V[$]=E[$];return V}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Me(E,V){let $,te;for(let _e=1;_e<arguments.length;_e++){te=arguments[_e];for($ in te)E[$]=te[$];for(let Fe=0;Fe<de.length;Fe++)$=de[Fe],Object.prototype.hasOwnProperty.call(te,$)&&(E[$]=te[$])}}function We(E){this.src=E,this.g={},this.h=0}We.prototype.add=function(E,V,$,te,_e){const Fe=E.toString();E=this.g[Fe],E||(E=this.g[Fe]=[],this.h++);const xt=be(E,V,te,_e);return xt>-1?(V=E[xt],$||(V.fa=!1)):(V=new ae(V,this.src,Fe,!!te,_e),V.fa=$,E.push(V)),V};function vt(E,V){const $=V.type;if($ in E.g){var te=E.g[$],_e=Array.prototype.indexOf.call(te,V,void 0),Fe;(Fe=_e>=0)&&Array.prototype.splice.call(te,_e,1),Fe&&(he(V),E.g[$].length==0&&(delete E.g[$],E.h--))}}function be(E,V,$,te){for(let _e=0;_e<E.length;++_e){const Fe=E[_e];if(!Fe.da&&Fe.listener==V&&Fe.capture==!!$&&Fe.ha==te)return _e}return-1}var Ae="closure_lm_"+(Math.random()*1e6|0),mt={};function ye(E,V,$,te,_e){if(Array.isArray(V)){for(let Fe=0;Fe<V.length;Fe++)ye(E,V[Fe],$,te,_e);return null}return $=re($),E&&E[ue]?E.J(V,$,l(te)?!!te.capture:!1,_e):et(E,V,$,!1,te,_e)}function et(E,V,$,te,_e,Fe){if(!V)throw Error("Invalid event type");const xt=l(_e)?!!_e.capture:!!_e;let vn=He(E);if(vn||(E[Ae]=vn=new We(E)),$=vn.add(V,$,te,xt,Fe),$.proxy)return $;if(te=wt(),$.proxy=te,te.src=E,te.listener=$,E.addEventListener)q||(_e=xt),_e===void 0&&(_e=!1),E.addEventListener(V.toString(),te,_e);else if(E.attachEvent)E.attachEvent(Oe(V.toString()),te);else if(E.addListener&&E.removeListener)E.addListener(te);else throw Error("addEventListener and attachEvent are unavailable.");return $}function wt(){function E($){return V.call(E.src,E.listener,$)}const V=Ke;return E}function ze(E,V,$,te,_e){if(Array.isArray(V))for(var Fe=0;Fe<V.length;Fe++)ze(E,V[Fe],$,te,_e);else te=l(te)?!!te.capture:!!te,$=re($),E&&E[ue]?(E=E.i,Fe=String(V).toString(),Fe in E.g&&(V=E.g[Fe],$=be(V,$,te,_e),$>-1&&(he(V[$]),Array.prototype.splice.call(V,$,1),V.length==0&&(delete E.g[Fe],E.h--)))):E&&(E=He(E))&&(V=E.g[V.toString()],E=-1,V&&(E=be(V,$,te,_e)),($=E>-1?V[E]:null)&&Tt($))}function Tt(E){if(typeof E!="number"&&E&&!E.da){var V=E.src;if(V&&V[ue])vt(V.i,E);else{var $=E.type,te=E.proxy;V.removeEventListener?V.removeEventListener($,te,E.capture):V.detachEvent?V.detachEvent(Oe($),te):V.addListener&&V.removeListener&&V.removeListener(te),($=He(V))?(vt($,E),$.h==0&&($.src=null,V[Ae]=null)):he(E)}}}function Oe(E){return E in mt?mt[E]:mt[E]="on"+E}function Ke(E,V){if(E.da)E=!0;else{V=new se(V,this);const $=E.listener,te=E.ha||E.src;E.fa&&Tt(E),E=$.call(te,V)}return E}function He(E){return E=E[Ae],E instanceof We?E:null}var ut="__closure_events_fn_"+(Math.random()*1e9>>>0);function re(E){return typeof E=="function"?E:(E[ut]||(E[ut]=function(V){return E.handleEvent(V)}),E[ut])}function Et(){D.call(this),this.i=new We(this),this.M=this,this.G=null}g(Et,D),Et.prototype[ue]=!0,Et.prototype.removeEventListener=function(E,V,$,te){ze(this,E,V,$,te)};function ht(E,V){var $,te=E.G;if(te)for($=[];te;te=te.G)$.push(te);if(E=E.M,te=V.type||V,typeof V=="string")V=new j(V,E);else if(V instanceof j)V.target=V.target||E;else{var _e=V;V=new j(te,E),Me(V,_e)}_e=!0;let Fe,xt;if($)for(xt=$.length-1;xt>=0;xt--)Fe=V.g=$[xt],_e=Lt(Fe,te,!0,V)&&_e;if(Fe=V.g=E,_e=Lt(Fe,te,!0,V)&&_e,_e=Lt(Fe,te,!1,V)&&_e,$)for(xt=0;xt<$.length;xt++)Fe=V.g=$[xt],_e=Lt(Fe,te,!1,V)&&_e}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var E=this.i;for(const V in E.g){const $=E.g[V];for(let te=0;te<$.length;te++)he($[te]);delete E.g[V],E.h--}}this.G=null},Et.prototype.J=function(E,V,$,te){return this.i.add(String(E),V,!1,$,te)},Et.prototype.K=function(E,V,$,te){return this.i.add(String(E),V,!0,$,te)};function Lt(E,V,$,te){if(V=E.i.g[String(V)],!V)return!0;V=V.concat();let _e=!0;for(let Fe=0;Fe<V.length;++Fe){const xt=V[Fe];if(xt&&!xt.da&&xt.capture==$){const vn=xt.listener,Qi=xt.ha||xt.src;xt.fa&&vt(E.i,xt),_e=vn.call(Qi,te)!==!1&&_e}}return _e&&!te.defaultPrevented}function dt(E,V){if(typeof E!="function")if(E&&typeof E.handleEvent=="function")E=f(E.handleEvent,E);else throw Error("Invalid listener argument");return Number(V)>2147483647?-1:s.setTimeout(E,V||0)}function ee(E){E.g=dt(()=>{E.g=null,E.i&&(E.i=!1,ee(E))},E.l);const V=E.h;E.h=null,E.m.apply(null,V)}class X extends D{constructor(V,$){super(),this.m=V,this.l=$,this.h=null,this.i=!1,this.g=null}j(V){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pe(E){D.call(this),this.h=E,this.g={}}g(pe,D);var Ue=[];function Ye(E){Te(E.g,function(V,$){this.g.hasOwnProperty($)&&Tt(V)},E),E.g={}}pe.prototype.N=function(){pe.Z.N.call(this),Ye(this)},pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Le=s.JSON.stringify,At=s.JSON.parse,gt=class{stringify(E){return s.JSON.stringify(E,void 0)}parse(E){return s.JSON.parse(E,void 0)}};function It(){}function Ht(){}var nt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function le(){j.call(this,"d")}g(le,j);function Se(){j.call(this,"c")}g(Se,j);var ne={},ge=null;function Ze(){return ge=ge||new Et}ne.Ia="serverreachability";function oe(E){j.call(this,ne.Ia,E)}g(oe,j);function Qe(E){const V=Ze();ht(V,new oe(V))}ne.STAT_EVENT="statevent";function $e(E,V){j.call(this,ne.STAT_EVENT,E),this.stat=V}g($e,j);function at(E){const V=Ze();ht(V,new $e(V,E))}ne.Ja="timingevent";function rt(E,V){j.call(this,ne.Ja,E),this.size=V}g(rt,j);function qe(E,V){if(typeof E!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){E()},V)}function ot(){this.g=!0}ot.prototype.ua=function(){this.g=!1};function Ft(E,V,$,te,_e,Fe){E.info(function(){if(E.g)if(Fe){var xt="",vn=Fe.split("&");for(let Vn=0;Vn<vn.length;Vn++){var Qi=vn[Vn].split("=");if(Qi.length>1){const Ii=Qi[0];Qi=Qi[1];const Da=Ii.split("_");xt=Da.length>=2&&Da[1]=="type"?xt+(Ii+"="+Qi+"&"):xt+(Ii+"=redacted&")}}}else xt=null;else xt=Fe;return"XMLHTTP REQ ("+te+") [attempt "+_e+"]: "+V+`
`+$+`
`+xt})}function un(E,V,$,te,_e,Fe,xt){E.info(function(){return"XMLHTTP RESP ("+te+") [ attempt "+_e+"]: "+V+`
`+$+`
`+Fe+" "+xt})}function en(E,V,$,te){E.info(function(){return"XMLHTTP TEXT ("+V+"): "+Oi(E,$)+(te?" "+te:"")})}function oi(E,V){E.info(function(){return"TIMEOUT: "+V})}ot.prototype.info=function(){};function Oi(E,V){if(!E.g)return V;if(!V)return null;try{const Fe=JSON.parse(V);if(Fe){for(E=0;E<Fe.length;E++)if(Array.isArray(Fe[E])){var $=Fe[E];if(!($.length<2)){var te=$[1];if(Array.isArray(te)&&!(te.length<1)){var _e=te[0];if(_e!="noop"&&_e!="stop"&&_e!="close")for(let xt=1;xt<te.length;xt++)te[xt]=""}}}}return Le(Fe)}catch{return V}}var Xr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ua={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ns;function to(){}g(to,It),to.prototype.g=function(){return new XMLHttpRequest},ns=new to;function Ia(E){return encodeURIComponent(String(E))}function Yl(E){var V=1;E=E.split(":");const $=[];for(;V>0&&E.length;)$.push(E.shift()),V--;return E.length&&$.push(E.join(":")),$}function Mi(E,V,$,te){this.j=E,this.i=V,this.l=$,this.S=te||1,this.V=new pe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ca}function ca(){this.i=null,this.g="",this.h=!1}var xi={},zi={};function Yr(E,V,$){E.M=1,E.A=on(Pt(V)),E.u=$,E.R=!0,fa(E,null)}function fa(E,V){E.F=Date.now(),ha(E),E.B=Pt(E.A);var $=E.B,te=E.S;Array.isArray(te)||(te=[String(te)]),Na($.i,"t",te),E.C=0,$=E.j.L,E.h=new ca,E.g=pp(E.j,$?V:null,!E.u),E.P>0&&(E.O=new X(f(E.Y,E,E.g),E.P)),V=E.V,$=E.g,te=E.ba;var _e="readystatechange";Array.isArray(_e)||(_e&&(Ue[0]=_e.toString()),_e=Ue);for(let Fe=0;Fe<_e.length;Fe++){const xt=ye($,_e[Fe],te||V.handleEvent,!1,V.h||V);if(!xt)break;V.g[xt.key]=xt}V=E.J?Q(E.J):{},E.u?(E.v||(E.v="POST"),V["Content-Type"]="application/x-www-form-urlencoded",E.g.ea(E.B,E.v,E.u,V)):(E.v="GET",E.g.ea(E.B,E.v,null,V)),Qe(),Ft(E.i,E.v,E.B,E.l,E.S,E.u)}Mi.prototype.ba=function(E){E=E.target;const V=this.O;V&&zo(E)==3?V.j():this.Y(E)},Mi.prototype.Y=function(E){try{if(E==this.g)e:{const vn=zo(this.g),Qi=this.g.ya(),Vn=this.g.ca();if(!(vn<3)&&(vn!=3||this.g&&(this.h.h||this.g.la()||Lr(this.g)))){this.K||vn!=4||Qi==7||(Qi==8||Vn<=0?Qe(3):Qe(2)),Is(this);var V=this.g.ca();this.X=V;var $=Pa(this);if(this.o=V==200,un(this.i,this.v,this.B,this.l,this.S,vn,V),this.o){if(this.U&&!this.L){t:{if(this.g){var te,_e=this.g;if((te=_e.g?_e.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(te)){var Fe=te;break t}}Fe=null}if(E=Fe)en(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,is(this,E);else{this.o=!1,this.m=3,at(12),da(this),Ra(this);break e}}if(this.R){E=!0;let Ii;for(;!this.K&&this.C<$.length;)if(Ii=Kl(this,$),Ii==zi){vn==4&&(this.m=4,at(14),E=!1),en(this.i,this.l,null,"[Incomplete Response]");break}else if(Ii==xi){this.m=4,at(15),en(this.i,this.l,$,"[Invalid Chunk]"),E=!1;break}else en(this.i,this.l,Ii,null),is(this,Ii);if(Lo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vn!=4||$.length!=0||this.h.h||(this.m=1,at(16),E=!1),this.o=this.o&&E,!E)en(this.i,this.l,$,"[Invalid Chunked Response]"),da(this),Ra(this);else if($.length>0&&!this.W){this.W=!0;var xt=this.j;xt.g==this&&xt.aa&&!xt.P&&(xt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Th(xt),xt.P=!0,at(11))}}else en(this.i,this.l,$,null),is(this,$);vn==4&&da(this),this.o&&!this.K&&(vn==4?hp(this.j,this):(this.o=!1,ha(this)))}else ul(this.g),V==400&&$.indexOf("Unknown SID")>0?(this.m=3,at(12)):(this.m=0,at(13)),da(this),Ra(this)}}}catch{}finally{}};function Pa(E){if(!Lo(E))return E.g.la();const V=Lr(E.g);if(V==="")return"";let $="";const te=V.length,_e=zo(E.g)==4;if(!E.h.i){if(typeof TextDecoder>"u")return da(E),Ra(E),"";E.h.i=new s.TextDecoder}for(let Fe=0;Fe<te;Fe++)E.h.h=!0,$+=E.h.i.decode(V[Fe],{stream:!(_e&&Fe==te-1)});return V.length=0,E.h.g+=$,E.C=0,E.h.g}function Lo(E){return E.g?E.v=="GET"&&E.M!=2&&E.j.Aa:!1}function Kl(E,V){var $=E.C,te=V.indexOf(`
`,$);return te==-1?zi:($=Number(V.substring($,te)),isNaN($)?xi:(te+=1,te+$>V.length?zi:(V=V.slice(te,te+$),E.C=te+$,V)))}Mi.prototype.cancel=function(){this.K=!0,da(this)};function ha(E){E.T=Date.now()+E.H,no(E,E.H)}function no(E,V){if(E.D!=null)throw Error("WatchDog timer not null");E.D=qe(f(E.aa,E),V)}function Is(E){E.D&&(s.clearTimeout(E.D),E.D=null)}Mi.prototype.aa=function(){this.D=null;const E=Date.now();E-this.T>=0?(oi(this.i,this.B),this.M!=2&&(Qe(),at(17)),da(this),this.m=2,Ra(this)):no(this,this.T-E)};function Ra(E){E.j.I==0||E.K||hp(E.j,E)}function da(E){Is(E);var V=E.O;V&&typeof V.dispose=="function"&&V.dispose(),E.O=null,Ye(E.V),E.g&&(V=E.g,E.g=null,V.abort(),V.dispose())}function is(E,V){try{var $=E.j;if($.I!=0&&($.g==E||xe($.h,E))){if(!E.L&&xe($.h,E)&&$.I==3){try{var te=$.Ba.g.parse(V)}catch{te=null}if(Array.isArray(te)&&te.length==3){var _e=te;if(_e[0]==0){e:if(!$.v){if($.g)if($.g.F+3e3<E.F)Ah($),cl($);else break e;Gu($),at(18)}}else $.xa=_e[1],0<$.xa-$.K&&_e[2]<37500&&$.F&&$.A==0&&!$.C&&($.C=qe(f($.Va,$),6e3));Ie($.h)<=1&&$.ta&&($.ta=void 0)}else ao($,11)}else if((E.L||$.g==E)&&Ah($),!W(V))for(_e=$.Ba.g.parse(V),V=0;V<_e.length;V++){let Vn=_e[V];const Ii=Vn[0];if(!(Ii<=$.K))if($.K=Ii,Vn=Vn[1],$.I==2)if(Vn[0]=="c"){$.M=Vn[1],$.ba=Vn[2];const Da=Vn[3];Da!=null&&($.ka=Da,$.j.info("VER="+$.ka));const Vo=Vn[4];Vo!=null&&($.za=Vo,$.j.info("SVER="+$.za));const jo=Vn[5];jo!=null&&typeof jo=="number"&&jo>0&&(te=1.5*jo,$.O=te,$.j.info("backChannelRequestTimeoutMs_="+te)),te=$;const rs=E.g;if(rs){const tu=rs.g?rs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tu){var Fe=te.h;Fe.g||tu.indexOf("spdy")==-1&&tu.indexOf("quic")==-1&&tu.indexOf("h2")==-1||(Fe.j=Fe.l,Fe.g=new Set,Fe.h&&(yt(Fe,Fe.h),Fe.h=null))}if(te.G){const lf=rs.g?rs.g.getResponseHeader("X-HTTP-Session-Id"):null;lf&&(te.wa=lf,Kt(te.J,te.G,lf))}}$.I=3,$.l&&$.l.ra(),$.aa&&($.T=Date.now()-E.F,$.j.info("Handshake RTT: "+$.T+"ms")),te=$;var xt=E;if(te.na=dp(te,te.L?te.ba:null,te.W),xt.L){Ct(te.h,xt);var vn=xt,Qi=te.O;Qi&&(vn.H=Qi),vn.D&&(Is(vn),ha(vn)),te.g=xt}else Eh(te);$.i.length>0&&Bo($)}else Vn[0]!="stop"&&Vn[0]!="close"||ao($,7);else $.I==3&&(Vn[0]=="stop"||Vn[0]=="close"?Vn[0]=="stop"?ao($,7):Sh($):Vn[0]!="noop"&&$.l&&$.l.qa(Vn),$.A=0)}}Qe(4)}catch{}}var K=class{constructor(E,V){this.g=E,this.map=V}};function ve(E){this.l=E||10,s.PerformanceNavigationTiming?(E=s.performance.getEntriesByType("navigation"),E=E.length>0&&(E[0].nextHopProtocol=="hq"||E[0].nextHopProtocol=="h2")):E=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=E?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ke(E){return E.h?!0:E.g?E.g.size>=E.j:!1}function Ie(E){return E.h?1:E.g?E.g.size:0}function xe(E,V){return E.h?E.h==V:E.g?E.g.has(V):!1}function yt(E,V){E.g?E.g.add(V):E.h=V}function Ct(E,V){E.h&&E.h==V?E.h=null:E.g&&E.g.has(V)&&E.g.delete(V)}ve.prototype.cancel=function(){if(this.i=ft(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const E of this.g.values())E.cancel();this.g.clear()}};function ft(E){if(E.h!=null)return E.i.concat(E.h.G);if(E.g!=null&&E.g.size!==0){let V=E.i;for(const $ of E.g.values())V=V.concat($.G);return V}return _(E.i)}var Ot=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kt(E,V){if(E){E=E.split("&");for(let $=0;$<E.length;$++){const te=E[$].indexOf("=");let _e,Fe=null;te>=0?(_e=E[$].substring(0,te),Fe=E[$].substring(te+1)):_e=E[$],V(_e,Fe?decodeURIComponent(Fe.replace(/\+/g," ")):"")}}}function Vt(E){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let V;E instanceof Vt?(this.l=E.l,$t(this,E.j),this.o=E.o,this.g=E.g,Rn(this,E.u),this.h=E.h,ii(this,cp(E.i)),this.m=E.m):E&&(V=String(E).match(Ot))?(this.l=!1,$t(this,V[1]||"",!0),this.o=St(V[2]||""),this.g=St(V[3]||"",!0),Rn(this,V[4]),this.h=St(V[5]||"",!0),ii(this,V[6]||"",!0),this.m=St(V[7]||"")):(this.l=!1,this.i=new Ci(null,this.l))}Vt.prototype.toString=function(){const E=[];var V=this.j;V&&E.push(An(V,Fi,!0),":");var $=this.g;return($||V=="file")&&(E.push("//"),(V=this.o)&&E.push(An(V,Fi,!0),"@"),E.push(Ia($).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),$=this.u,$!=null&&E.push(":",String($))),($=this.h)&&(this.g&&$.charAt(0)!="/"&&E.push("/"),E.push(An($,$.charAt(0)=="/"?yi:Ps,!0))),($=this.i.toString())&&E.push("?",$),($=this.m)&&E.push("#",An($,Zn)),E.join("")},Vt.prototype.resolve=function(E){const V=Pt(this);let $=!!E.j;$?$t(V,E.j):$=!!E.o,$?V.o=E.o:$=!!E.g,$?V.g=E.g:$=E.u!=null;var te=E.h;if($)Rn(V,E.u);else if($=!!E.h){if(te.charAt(0)!="/")if(this.g&&!this.h)te="/"+te;else{var _e=V.h.lastIndexOf("/");_e!=-1&&(te=V.h.slice(0,_e+1)+te)}if(_e=te,_e==".."||_e==".")te="";else if(_e.indexOf("./")!=-1||_e.indexOf("/.")!=-1){te=_e.lastIndexOf("/",0)==0,_e=_e.split("/");const Fe=[];for(let xt=0;xt<_e.length;){const vn=_e[xt++];vn=="."?te&&xt==_e.length&&Fe.push(""):vn==".."?((Fe.length>1||Fe.length==1&&Fe[0]!="")&&Fe.pop(),te&&xt==_e.length&&Fe.push("")):(Fe.push(vn),te=!0)}te=Fe.join("/")}else te=_e}return $?V.h=te:$=E.i.toString()!=="",$?ii(V,cp(E.i)):$=!!E.m,$&&(V.m=E.m),V};function Pt(E){return new Vt(E)}function $t(E,V,$){E.j=$?St(V,!0):V,E.j&&(E.j=E.j.replace(/:$/,""))}function Rn(E,V){if(V){if(V=Number(V),isNaN(V)||V<0)throw Error("Bad port number "+V);E.u=V}else E.u=null}function ii(E,V,$){V instanceof Ci?(E.i=V,tf(E.i,E.l)):($||(V=An(V,Kr)),E.i=new Ci(V,E.l))}function Kt(E,V,$){E.i.set(V,$)}function on(E){return Kt(E,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),E}function St(E,V){return E?V?decodeURI(E.replace(/%25/g,"%2525")):decodeURIComponent(E):""}function An(E,V,$){return typeof E=="string"?(E=encodeURI(E).replace(V,tn),$&&(E=E.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E):null}function tn(E){return E=E.charCodeAt(0),"%"+(E>>4&15).toString(16)+(E&15).toString(16)}var Fi=/[#\/\?@]/g,Ps=/[#\?:]/g,yi=/[#\?]/g,Kr=/[#\?@]/g,Zn=/#/g;function Ci(E,V){this.h=this.g=null,this.i=E||null,this.j=!!V}function di(E){E.g||(E.g=new Map,E.h=0,E.i&&kt(E.i,function(V,$){E.add(decodeURIComponent(V.replace(/\+/g," ")),$)}))}n=Ci.prototype,n.add=function(E,V){di(this),this.i=null,E=ol(this,E);let $=this.g.get(E);return $||this.g.set(E,$=[]),$.push(V),this.h+=1,this};function or(E,V){di(E),V=ol(E,V),E.g.has(V)&&(E.i=null,E.h-=E.g.get(V).length,E.g.delete(V))}function lr(E,V){return di(E),V=ol(E,V),E.g.has(V)}n.forEach=function(E,V){di(this),this.g.forEach(function($,te){$.forEach(function(_e){E.call(V,_e,te,this)},this)},this)};function sl(E,V){di(E);let $=[];if(typeof V=="string")lr(E,V)&&($=$.concat(E.g.get(ol(E,V))));else for(E=Array.from(E.g.values()),V=0;V<E.length;V++)$=$.concat(E[V]);return $}n.set=function(E,V){return di(this),this.i=null,E=ol(this,E),lr(this,E)&&(this.h-=this.g.get(E).length),this.g.set(E,[V]),this.h+=1,this},n.get=function(E,V){return E?(E=sl(this,E),E.length>0?String(E[0]):V):V};function Na(E,V,$){or(E,V),$.length>0&&(E.i=null,E.g.set(ol(E,V),_($)),E.h+=$.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const E=[],V=Array.from(this.g.keys());for(let te=0;te<V.length;te++){var $=V[te];const _e=Ia($);$=sl(this,$);for(let Fe=0;Fe<$.length;Fe++){let xt=_e;$[Fe]!==""&&(xt+="="+Ia($[Fe])),E.push(xt)}}return this.i=E.join("&")};function cp(E){const V=new Ci;return V.i=E.i,E.g&&(V.g=new Map(E.g),V.h=E.h),V}function ol(E,V){return V=String(V),E.j&&(V=V.toLowerCase()),V}function tf(E,V){V&&!E.j&&(di(E),E.i=null,E.g.forEach(function($,te){const _e=te.toLowerCase();te!=_e&&(or(this,te),Na(this,_e,$))},E)),E.j=V}function ko(E,V){const $=new ot;if(s.Image){const te=new Image;te.onload=p(Rs,$,"TestLoadImage: loaded",!0,V,te),te.onerror=p(Rs,$,"TestLoadImage: error",!1,V,te),te.onabort=p(Rs,$,"TestLoadImage: abort",!1,V,te),te.ontimeout=p(Rs,$,"TestLoadImage: timeout",!1,V,te),s.setTimeout(function(){te.ontimeout&&te.ontimeout()},1e4),te.src=E}else V(!1)}function bh(E,V){const $=new ot,te=new AbortController,_e=setTimeout(()=>{te.abort(),Rs($,"TestPingServer: timeout",!1,V)},1e4);fetch(E,{signal:te.signal}).then(Fe=>{clearTimeout(_e),Fe.ok?Rs($,"TestPingServer: ok",!0,V):Rs($,"TestPingServer: server error",!1,V)}).catch(()=>{clearTimeout(_e),Rs($,"TestPingServer: error",!1,V)})}function Rs(E,V,$,te,_e){try{_e&&(_e.onload=null,_e.onerror=null,_e.onabort=null,_e.ontimeout=null),te($)}catch{}}function Zl(){this.g=new gt}function io(E){this.i=E.Sb||null,this.h=E.ab||!1}g(io,It),io.prototype.g=function(){return new Fu(this.i,this.h)};function Fu(E,V){Et.call(this),this.H=E,this.o=V,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Fu,Et),n=Fu.prototype,n.open=function(E,V){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=E,this.D=V,this.readyState=1,ro(this)},n.send=function(E){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const V={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};E&&(V.body=E),(this.H||s).fetch(new Request(this.D,V)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ql(this)),this.readyState=0},n.Pa=function(E){if(this.g&&(this.l=E,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=E.headers,this.readyState=2,ro(this)),this.g&&(this.readyState=3,ro(this),this.g)))if(this.responseType==="arraybuffer")E.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in E){if(this.j=E.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;nf(this)}else E.text().then(this.Oa.bind(this),this.ga.bind(this))};function nf(E){E.j.read().then(E.Ma.bind(E)).catch(E.ga.bind(E))}n.Ma=function(E){if(this.g){if(this.o&&E.value)this.response.push(E.value);else if(!this.o){var V=E.value?E.value:new Uint8Array(0);(V=this.B.decode(V,{stream:!E.done}))&&(this.response=this.responseText+=V)}E.done?Ql(this):ro(this),this.readyState==3&&nf(this)}},n.Oa=function(E){this.g&&(this.response=this.responseText=E,Ql(this))},n.Na=function(E){this.g&&(this.response=E,Ql(this))},n.ga=function(){this.g&&Ql(this)};function Ql(E){E.readyState=4,E.l=null,E.j=null,E.B=null,ro(E)}n.setRequestHeader=function(E,V){this.A.append(E,V)},n.getResponseHeader=function(E){return this.h&&this.h.get(E.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const E=[],V=this.h.entries();for(var $=V.next();!$.done;)$=$.value,E.push($[0]+": "+$[1]),$=V.next();return E.join(`\r
`)};function ro(E){E.onreadystatechange&&E.onreadystatechange.call(E)}Object.defineProperty(Fu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(E){this.m=E?"include":"same-origin"}});function Ns(E){let V="";return Te(E,function($,te){V+=te,V+=":",V+=$,V+=`\r
`}),V}function rf(E,V,$){e:{for(te in $){var te=!1;break e}te=!0}te||($=Ns($),typeof E=="string"?$!=null&&Ia($):Kt(E,V,$))}function li(E){Et.call(this),this.headers=new Map,this.L=E||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(li,Et);var Oa=/^https?$/i,xh=["POST","PUT"];n=li.prototype,n.Fa=function(E){this.H=E},n.ea=function(E,V,$,te){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+E);V=V?V.toUpperCase():"GET",this.D=E,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ns.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(V,String(E),!0),this.B=!1}catch(Fe){ll(this,Fe);return}if(E=$||"",$=new Map(this.headers),te)if(Object.getPrototypeOf(te)===Object.prototype)for(var _e in te)$.set(_e,te[_e]);else if(typeof te.keys=="function"&&typeof te.get=="function")for(const Fe of te.keys())$.set(Fe,te.get(Fe));else throw Error("Unknown input type for opt_headers: "+String(te));te=Array.from($.keys()).find(Fe=>Fe.toLowerCase()=="content-type"),_e=s.FormData&&E instanceof s.FormData,!(Array.prototype.indexOf.call(xh,V,void 0)>=0)||te||_e||$.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Fe,xt]of $)this.g.setRequestHeader(Fe,xt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(E),this.v=!1}catch(Fe){ll(this,Fe)}};function ll(E,V){E.h=!1,E.g&&(E.j=!0,E.g.abort(),E.j=!1),E.l=V,E.o=5,Bu(E),Uo(E)}function Bu(E){E.A||(E.A=!0,ht(E,"complete"),ht(E,"error"))}n.abort=function(E){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=E||7,ht(this,"complete"),ht(this,"abort"),Uo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Uo(this,!0)),li.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Vu(this):this.Xa())},n.Xa=function(){Vu(this)};function Vu(E){if(E.h&&typeof a<"u"){if(E.v&&zo(E)==4)setTimeout(E.Ca.bind(E),0);else if(ht(E,"readystatechange"),zo(E)==4){E.h=!1;try{const Fe=E.ca();e:switch(Fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var V=!0;break e;default:V=!1}var $;if(!($=V)){var te;if(te=Fe===0){let xt=String(E.D).match(Ot)[1]||null;!xt&&s.self&&s.self.location&&(xt=s.self.location.protocol.slice(0,-1)),te=!Oa.test(xt?xt.toLowerCase():"")}$=te}if($)ht(E,"complete"),ht(E,"success");else{E.o=6;try{var _e=zo(E)>2?E.g.statusText:""}catch{_e=""}E.l=_e+" ["+E.ca()+"]",Bu(E)}}finally{Uo(E)}}}}function Uo(E,V){if(E.g){E.m&&(clearTimeout(E.m),E.m=null);const $=E.g;E.g=null,V||ht(E,"ready");try{$.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function zo(E){return E.g?E.g.readyState:0}n.ca=function(){try{return zo(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(E){if(this.g){var V=this.g.responseText;return E&&V.indexOf(E)==0&&(V=V.substring(E.length)),At(V)}};function Lr(E){try{if(!E.g)return null;if("response"in E.g)return E.g.response;switch(E.F){case"":case"text":return E.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in E.g)return E.g.mozResponseArrayBuffer}return null}catch{return null}}function ul(E){const V={};E=(E.g&&zo(E)>=2&&E.g.getAllResponseHeaders()||"").split(`\r
`);for(let te=0;te<E.length;te++){if(W(E[te]))continue;var $=Yl(E[te]);const _e=$[0];if($=$[1],typeof $!="string")continue;$=$.trim();const Fe=V[_e]||[];V[_e]=Fe,Fe.push($)}Re(V,function(te){return te.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fo(E,V,$){return $&&$.internalChannelParams&&$.internalChannelParams[E]||V}function Jl(E){this.za=0,this.i=[],this.j=new ot,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Fo("failFast",!1,E),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Fo("baseRetryDelayMs",5e3,E),this.Za=Fo("retryDelaySeedMs",1e4,E),this.Ta=Fo("forwardChannelMaxRetries",2,E),this.va=Fo("forwardChannelRequestTimeoutMs",2e4,E),this.ma=E&&E.xmlHttpFactory||void 0,this.Ua=E&&E.Rb||void 0,this.Aa=E&&E.useFetchStreams||!1,this.O=void 0,this.L=E&&E.supportsCrossDomainXhr||!1,this.M="",this.h=new ve(E&&E.concurrentRequestLimit),this.Ba=new Zl,this.S=E&&E.fastHandshake||!1,this.R=E&&E.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=E&&E.Pb||!1,E&&E.ua&&this.j.ua(),E&&E.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&E&&E.detectBufferingProxy||!1,this.ia=void 0,E&&E.longPollingTimeout&&E.longPollingTimeout>0&&(this.ia=E.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Jl.prototype,n.ka=8,n.I=1,n.connect=function(E,V,$,te){at(0),this.W=E,this.H=V||{},$&&te!==void 0&&(this.H.OSID=$,this.H.OAID=te),this.F=this.X,this.J=dp(this,null,this.W),Bo(this)};function Sh(E){if(af(E),E.I==3){var V=E.V++,$=Pt(E.J);if(Kt($,"SID",E.M),Kt($,"RID",V),Kt($,"TYPE","terminate"),Hu(E,$),V=new Mi(E,E.j,V),V.M=2,V.A=on(Pt($)),$=!1,s.navigator&&s.navigator.sendBeacon)try{$=s.navigator.sendBeacon(V.A.toString(),"")}catch{}!$&&s.Image&&(new Image().src=V.A,$=!0),$||(V.g=pp(V.j,null),V.g.ea(V.A)),V.F=Date.now(),ha(V)}sf(E)}function cl(E){E.g&&(Th(E),E.g.cancel(),E.g=null)}function af(E){cl(E),E.v&&(s.clearTimeout(E.v),E.v=null),Ah(E),E.h.cancel(),E.m&&(typeof E.m=="number"&&s.clearTimeout(E.m),E.m=null)}function Bo(E){if(!ke(E.h)&&!E.m){E.m=!0;var V=E.Ea;F||z(),B||(F(),B=!0),L.add(V,E),E.D=0}}function ju(E,V){return Ie(E.h)>=E.h.j-(E.m?1:0)?!1:E.m?(E.i=V.G.concat(E.i),!0):E.I==1||E.I==2||E.D>=(E.Sa?0:E.Ta)?!1:(E.m=qe(f(E.Ea,E,V),Wu(E,E.D)),E.D++,!0)}n.Ea=function(E){if(this.m)if(this.m=null,this.I==1){if(!E){this.V=Math.floor(Math.random()*1e5),E=this.V++;const _e=new Mi(this,this.j,E);let Fe=this.o;if(this.U&&(Fe?(Fe=Q(Fe),Me(Fe,this.U)):Fe=this.U),this.u!==null||this.R||(_e.J=Fe,Fe=null),this.S)e:{for(var V=0,$=0;$<this.i.length;$++){t:{var te=this.i[$];if("__data__"in te.map&&(te=te.map.__data__,typeof te=="string")){te=te.length;break t}te=void 0}if(te===void 0)break;if(V+=te,V>4096){V=$;break e}if(V===4096||$===this.i.length-1){V=$+1;break e}}V=1e3}else V=1e3;V=fp(this,_e,V),$=Pt(this.J),Kt($,"RID",E),Kt($,"CVER",22),this.G&&Kt($,"X-HTTP-Session-Id",this.G),Hu(this,$),Fe&&(this.R?V="headers="+Ia(Ns(Fe))+"&"+V:this.u&&rf($,this.u,Fe)),yt(this.h,_e),this.Ra&&Kt($,"TYPE","init"),this.S?(Kt($,"$req",V),Kt($,"SID","null"),_e.U=!0,Yr(_e,$,null)):Yr(_e,$,V),this.I=2}}else this.I==3&&(E?wh(this,E):this.i.length==0||ke(this.h)||wh(this))};function wh(E,V){var $;V?$=V.l:$=E.V++;const te=Pt(E.J);Kt(te,"SID",E.M),Kt(te,"RID",$),Kt(te,"AID",E.K),Hu(E,te),E.u&&E.o&&rf(te,E.u,E.o),$=new Mi(E,E.j,$,E.D+1),E.u===null&&($.J=E.o),V&&(E.i=V.G.concat(E.i)),V=fp(E,$,1e3),$.H=Math.round(E.va*.5)+Math.round(E.va*.5*Math.random()),yt(E.h,$),Yr($,te,V)}function Hu(E,V){E.H&&Te(E.H,function($,te){Kt(V,te,$)}),E.l&&Te({},function($,te){Kt(V,te,$)})}function fp(E,V,$){$=Math.min(E.i.length,$);const te=E.l?f(E.l.Ka,E.l,E):null;e:{var _e=E.i;let vn=-1;for(;;){const Qi=["count="+$];vn==-1?$>0?(vn=_e[0].g,Qi.push("ofs="+vn)):vn=0:Qi.push("ofs="+vn);let Vn=!0;for(let Ii=0;Ii<$;Ii++){var Fe=_e[Ii].g;const Da=_e[Ii].map;if(Fe-=vn,Fe<0)vn=Math.max(0,_e[Ii].g-100),Vn=!1;else try{Fe="req"+Fe+"_"||"";try{var xt=Da instanceof Map?Da:Object.entries(Da);for(const[Vo,jo]of xt){let rs=jo;l(jo)&&(rs=Le(jo)),Qi.push(Fe+Vo+"="+encodeURIComponent(rs))}}catch(Vo){throw Qi.push(Fe+"type="+encodeURIComponent("_badmap")),Vo}}catch{te&&te(Da)}}if(Vn){xt=Qi.join("&");break e}}xt=void 0}return E=E.i.splice(0,$),V.G=E,xt}function Eh(E){if(!E.g&&!E.v){E.Y=1;var V=E.Da;F||z(),B||(F(),B=!0),L.add(V,E),E.A=0}}function Gu(E){return E.g||E.v||E.A>=3?!1:(E.Y++,E.v=qe(f(E.Da,E),Wu(E,E.A)),E.A++,!0)}n.Da=function(){if(this.v=null,dg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var E=4*this.T;this.j.info("BP detection timer enabled: "+E),this.B=qe(f(this.Wa,this),E)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,at(10),cl(this),dg(this))};function Th(E){E.B!=null&&(s.clearTimeout(E.B),E.B=null)}function dg(E){E.g=new Mi(E,E.j,"rpc",E.Y),E.u===null&&(E.g.J=E.o),E.g.P=0;var V=Pt(E.na);Kt(V,"RID","rpc"),Kt(V,"SID",E.M),Kt(V,"AID",E.K),Kt(V,"CI",E.F?"0":"1"),!E.F&&E.ia&&Kt(V,"TO",E.ia),Kt(V,"TYPE","xmlhttp"),Hu(E,V),E.u&&E.o&&rf(V,E.u,E.o),E.O&&(E.g.H=E.O);var $=E.g;E=E.ba,$.M=1,$.A=on(Pt(V)),$.u=null,$.R=!0,fa($,E)}n.Va=function(){this.C!=null&&(this.C=null,cl(this),Gu(this),at(19))};function Ah(E){E.C!=null&&(s.clearTimeout(E.C),E.C=null)}function hp(E,V){var $=null;if(E.g==V){Ah(E),Th(E),E.g=null;var te=2}else if(xe(E.h,V))$=V.G,Ct(E.h,V),te=1;else return;if(E.I!=0){if(V.o)if(te==1){$=V.u?V.u.length:0,V=Date.now()-V.F;var _e=E.D;te=Ze(),ht(te,new rt(te,$)),Bo(E)}else Eh(E);else if(_e=V.m,_e==3||_e==0&&V.X>0||!(te==1&&ju(E,V)||te==2&&Gu(E)))switch($&&$.length>0&&(V=E.h,V.i=V.i.concat($)),_e){case 1:ao(E,5);break;case 4:ao(E,10);break;case 3:ao(E,6);break;default:ao(E,2)}}}function Wu(E,V){let $=E.Qa+Math.floor(Math.random()*E.Za);return E.isActive()||($*=2),$*V}function ao(E,V){if(E.j.info("Error code "+V),V==2){var $=f(E.bb,E),te=E.Ua;const _e=!te;te=new Vt(te||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||$t(te,"https"),on(te),_e?ko(te.toString(),$):bh(te.toString(),$)}else at(2);E.I=0,E.l&&E.l.pa(V),sf(E),af(E)}n.bb=function(E){E?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function sf(E){if(E.I=0,E.ja=[],E.l){const V=ft(E.h);(V.length!=0||E.i.length!=0)&&(x(E.ja,V),x(E.ja,E.i),E.h.i.length=0,_(E.i),E.i.length=0),E.l.oa()}}function dp(E,V,$){var te=$ instanceof Vt?Pt($):new Vt($);if(te.g!="")V&&(te.g=V+"."+te.g),Rn(te,te.u);else{var _e=s.location;te=_e.protocol,V=V?V+"."+_e.hostname:_e.hostname,_e=+_e.port;const Fe=new Vt(null);te&&$t(Fe,te),V&&(Fe.g=V),_e&&Rn(Fe,_e),$&&(Fe.h=$),te=Fe}return $=E.G,V=E.wa,$&&V&&Kt(te,$,V),Kt(te,"VER",E.ka),Hu(E,te),te}function pp(E,V,$){if(V&&!E.L)throw Error("Can't create secondary domain capable XhrIo object.");return V=E.Aa&&!E.ma?new li(new io({ab:$})):new li(E.ma),V.Fa(E.L),V}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mh(){}n=Mh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function eu(){}eu.prototype.g=function(E,V){return new pa(E,V)};function pa(E,V){Et.call(this),this.g=new Jl(V),this.l=E,this.h=V&&V.messageUrlParams||null,E=V&&V.messageHeaders||null,V&&V.clientProtocolHeaderRequired&&(E?E["X-Client-Protocol"]="webchannel":E={"X-Client-Protocol":"webchannel"}),this.g.o=E,E=V&&V.initMessageHeaders||null,V&&V.messageContentType&&(E?E["X-WebChannel-Content-Type"]=V.messageContentType:E={"X-WebChannel-Content-Type":V.messageContentType}),V&&V.sa&&(E?E["X-WebChannel-Client-Profile"]=V.sa:E={"X-WebChannel-Client-Profile":V.sa}),this.g.U=E,(E=V&&V.Qb)&&!W(E)&&(this.g.u=E),this.A=V&&V.supportsCrossDomainXhr||!1,this.v=V&&V.sendRawJson||!1,(V=V&&V.httpSessionIdParam)&&!W(V)&&(this.g.G=V,E=this.h,E!==null&&V in E&&(E=this.h,V in E&&delete E[V])),this.j=new hl(this)}g(pa,Et),pa.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},pa.prototype.close=function(){Sh(this.g)},pa.prototype.o=function(E){var V=this.g;if(typeof E=="string"){var $={};$.__data__=E,E=$}else this.v&&($={},$.__data__=Le(E),E=$);V.i.push(new K(V.Ya++,E)),V.I==3&&Bo(V)},pa.prototype.N=function(){this.g.l=null,delete this.j,Sh(this.g),delete this.g,pa.Z.N.call(this)};function fl(E){le.call(this),E.__headers__&&(this.headers=E.__headers__,this.statusCode=E.__status__,delete E.__headers__,delete E.__status__);var V=E.__sm__;if(V){e:{for(const $ in V){E=$;break e}E=void 0}(this.i=E)&&(E=this.i,V=V!==null&&E in V?V[E]:void 0),this.data=V}else this.data=E}g(fl,le);function of(){Se.call(this),this.status=1}g(of,Se);function hl(E){this.g=E}g(hl,Mh),hl.prototype.ra=function(){ht(this.g,"a")},hl.prototype.qa=function(E){ht(this.g,new fl(E))},hl.prototype.pa=function(E){ht(this.g,new of)},hl.prototype.oa=function(){ht(this.g,"b")},eu.prototype.createWebChannel=eu.prototype.g,pa.prototype.send=pa.prototype.o,pa.prototype.open=pa.prototype.m,pa.prototype.close=pa.prototype.close,j8=function(){return new eu},V8=function(){return Ze()},B8=ne,oN={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xr.NO_ERROR=0,Xr.TIMEOUT=8,Xr.HTTP_ERROR=6,Rw=Xr,ua.COMPLETE="complete",F8=ua,Ht.EventType=nt,nt.OPEN="a",nt.CLOSE="b",nt.ERROR="c",nt.MESSAGE="d",Et.prototype.listen=Et.prototype.J,W_=Ht,li.prototype.listenOnce=li.prototype.K,li.prototype.getLastError=li.prototype.Ha,li.prototype.getLastErrorCode=li.prototype.ya,li.prototype.getStatus=li.prototype.ca,li.prototype.getResponseJson=li.prototype.La,li.prototype.getResponseText=li.prototype.la,li.prototype.send=li.prototype.ea,li.prototype.setWithCredentials=li.prototype.Fa,z8=li}).apply(typeof iw<"u"?iw:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xs.UNAUTHENTICATED=new xs(null),xs.GOOGLE_CREDENTIALS=new xs("google-credentials-uid"),xs.FIRST_PARTY=new xs("first-party-uid"),xs.MOCK_USER=new xs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vy="12.8.0";function mle(n){Vy=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm=new xD("@firebase/firestore");function zv(){return qm.logLevel}function Ut(n,...e){if(qm.logLevel<=$n.DEBUG){const t=e.map(ED);qm.debug(`Firestore (${Vy}): ${n}`,...t)}}function nh(n,...e){if(qm.logLevel<=$n.ERROR){const t=e.map(ED);qm.error(`Firestore (${Vy}): ${n}`,...t)}}function _y(n,...e){if(qm.logLevel<=$n.WARN){const t=e.map(ED);qm.warn(`Firestore (${Vy}): ${n}`,...t)}}function ED(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,H8(n,i,t)}function H8(n,e,t){let i=`FIRESTORE (${Vy}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw nh(i),new Error(i)}function vi(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||H8(e,r,i)}function wn(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xt extends fh{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gle{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(xs.UNAUTHENTICATED)))}shutdown(){}}class vle{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class yle{constructor(e){this.t=e,this.currentUser=xs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){vi(this.o===void 0,42304);let i=this.i;const r=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let a=new Nm;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Nm,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const c=a;e.enqueueRetryable((async()=>{await c.promise,await r(this.currentUser)}))},l=c=>{Ut("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Ut("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Nm)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Ut("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(vi(typeof i.accessToken=="string",31837,{l:i}),new G8(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return vi(e===null||typeof e=="string",2055,{h:e}),new xs(e)}}class _le{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=xs.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class ble{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new _le(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(xs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class iz{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xle{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wu(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){vi(this.o===void 0,3512);const i=a=>{a.error!=null&&Ut("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,Ut("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const r=a=>{Ut("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):Ut("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new iz(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(vi(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new iz(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sle(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=Sle(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<t&&(i+=e.charAt(r[a]%62))}return i}}function Xn(n,e){return n<e?-1:n>e?1:0}function lN(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),a=e.charAt(i);if(r!==a)return jI(r)===jI(a)?Xn(r,a):jI(r)?1:-1}return Xn(n.length,e.length)}const wle=55296,Ele=57343;function jI(n){const e=n.charCodeAt(0);return e>=wle&&e<=Ele}function by(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rz="__name__";class Ec{constructor(e,t,i){t===void 0?t=0:t>e.length&&hn(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&hn(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ec.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ec?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const a=Ec.compareSegments(e.get(r),t.get(r));if(a!==0)return a}return Xn(e.length,t.length)}static compareSegments(e,t){const i=Ec.isNumericId(e),r=Ec.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?Ec.extractNumericId(e).compare(Ec.extractNumericId(t)):lN(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fd.fromString(e.substring(4,e.length-2))}}class Xi extends Ec{construct(e,t,i){return new Xi(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Xt(ct.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new Xi(t)}static emptyPath(){return new Xi([])}}const Tle=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ya extends Ec{construct(e,t,i){return new Ya(e,t,i)}static isValidIdentifier(e){return Tle.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ya.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rz}static keyField(){return new Ya([rz])}static fromServerFormat(e){const t=[];let i="",r=0;const a=()=>{if(i.length===0)throw new Xt(ct.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let s=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new Xt(ct.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Xt(ct.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else l==="`"?(s=!s,r++):l!=="."||s?(i+=l,r++):(a(),r++)}if(a(),s)throw new Xt(ct.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ya(t)}static emptyPath(){return new Ya([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.path=e}static fromPath(e){return new nn(Xi.fromString(e))}static fromName(e){return new nn(Xi.fromString(e).popFirst(5))}static empty(){return new nn(Xi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xi.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Xi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nn(new Xi(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W8(n,e,t){if(!t)throw new Xt(ct.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ale(n,e,t,i){if(e===!0&&i===!0)throw new Xt(ct.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function az(n){if(!nn.isDocumentKey(n))throw new Xt(ct.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sz(n){if(nn.isDocumentKey(n))throw new Xt(ct.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function q8(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function AD(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":hn(12329,{type:typeof n})}function Bd(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Xt(ct.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=AD(n);throw new Xt(ct.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(n,e){const t={typeString:n};return e&&(t.value=e),t}function bx(n,e){if(!q8(n))throw new Xt(ct.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const s=n[i];if(r&&typeof s!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&s!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new Xt(ct.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oz=-62135596800,lz=1e6;class Yi{static now(){return Yi.fromMillis(Date.now())}static fromDate(e){return Yi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*lz);return new Yi(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Xt(ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Xt(ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<oz)throw new Xt(ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xt(ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lz}_compareTo(e){return this.seconds===e.seconds?Xn(this.nanoseconds,e.nanoseconds):Xn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Yi._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bx(e,Yi._jsonSchema))return new Yi(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-oz;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Yi._jsonSchemaVersion="firestore/timestamp/1.0",Yi._jsonSchema={type:Gr("string",Yi._jsonSchemaVersion),seconds:Gr("number"),nanoseconds:Gr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{static fromTimestamp(e){return new _n(e)}static min(){return new _n(new Yi(0,0))}static max(){return new _n(new Yi(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=-1;function Mle(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=_n.fromTimestamp(i===1e9?new Yi(t+1,0):new Yi(t,i));return new Xd(r,nn.empty(),e)}function Cle(n){return new Xd(n.readTime,n.key,kb)}class Xd{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Xd(_n.min(),nn.empty(),kb)}static max(){return new Xd(_n.max(),nn.empty(),kb)}}function Ile(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=nn.comparator(n.documentKey,e.documentKey),t!==0?t:Xn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ple="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Rle{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jy(n){if(n.code!==ct.FAILED_PRECONDITION||n.message!==Ple)throw n;Ut("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&hn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new st(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof st?t:st.resolve(t)}catch(t){return st.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):st.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):st.reject(t)}static resolve(e){return new st(((t,i)=>{t(e)}))}static reject(e){return new st(((t,i)=>{i(e)}))}static waitFor(e){return new st(((t,i)=>{let r=0,a=0,s=!1;e.forEach((l=>{++r,l.next((()=>{++a,s&&a===r&&t()}),(c=>i(c)))})),s=!0,a===r&&t()}))}static or(e){let t=st.resolve(!1);for(const i of e)t=t.next((r=>r?st.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,a)=>{i.push(t.call(this,r,a))})),this.waitFor(i)}static mapArray(e,t){return new st(((i,r)=>{const a=e.length,s=new Array(a);let l=0;for(let c=0;c<a;c++){const f=c;t(e[f]).next((p=>{s[f]=p,++l,l===a&&i(s)}),(p=>r(p)))}}))}static doWhile(e,t){return new st(((i,r)=>{const a=()=>{e()===!0?t().next((()=>{a()}),r):i()};a()}))}}function Nle(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Hy(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}WA.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=-1;function qA(n){return n==null}function YE(n){return n===0&&1/n==-1/0}function Ole(n){return typeof n=="number"&&Number.isInteger(n)&&!YE(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $8="";function Dle(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=uz(e)),e=Lle(n.get(t),e);return uz(e)}function Lle(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const a=n.charAt(r);switch(a){case"\0":t+="";break;case $8:t+="";break;default:t+=a}}return t}function uz(n){return n+$8+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cz(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function sp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function X8(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,t){this.comparator=e,this.root=t||$a.EMPTY}insert(e,t){return new gr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$a.BLACK,null,null))}remove(e){return new gr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$a.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rw(this.root,e,this.comparator,!1)}getReverseIterator(){return new rw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rw(this.root,e,this.comparator,!0)}}class rw{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $a{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=i??$a.RED,this.left=r??$a.EMPTY,this.right=a??$a.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,a){return new $a(e??this.key,t??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,i),null):a===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return $a.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return $a.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$a.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$a.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw hn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw hn(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw hn(27949);return e+(this.isRed()?0:1)}}$a.EMPTY=null,$a.RED=!0,$a.BLACK=!1;$a.EMPTY=new class{constructor(){this.size=0}get key(){throw hn(57766)}get value(){throw hn(16141)}get color(){throw hn(16727)}get left(){throw hn(29726)}get right(){throw hn(36894)}copy(e,t,i,r,a){return this}insert(e,t,i){return new $a(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.comparator=e,this.data=new gr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fz(this.data.getIterator())}getIteratorFrom(e){return new fz(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof ra)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ra(this.comparator);return t.data=e,t}}class fz{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.fields=e,e.sort(Ya.comparator)}static empty(){return new Qo([])}unionWith(e){let t=new ra(Ya.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Qo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return by(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Y8("Invalid base64 string: "+a):a}})(e);return new es(t)}static fromUint8Array(e){const t=(function(r){let a="";for(let s=0;s<r.length;++s)a+=String.fromCharCode(r[s]);return a})(e);return new es(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}es.EMPTY_BYTE_STRING=new es("");const kle=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yd(n){if(vi(!!n,39018),typeof n=="string"){let e=0;const t=kle.exec(n);if(vi(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Nr(n.seconds),nanos:Nr(n.nanos)}}function Nr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Kd(n){return typeof n=="string"?es.fromBase64String(n):es.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K8="server_timestamp",Z8="__type__",Q8="__previous_value__",J8="__local_write_time__";function CD(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Z8])==null?void 0:i.stringValue)===K8}function $A(n){const e=n.mapValue.fields[Q8];return CD(e)?$A(e):e}function Ub(n){const e=Yd(n.mapValue.fields[J8].timestampValue);return new Yi(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ule{constructor(e,t,i,r,a,s,l,c,f,p,g){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=p,this.apiKey=g}}const KE="(default)";class zb{constructor(e,t){this.projectId=e,this.database=t||KE}static empty(){return new zb("","")}get isDefaultDatabase(){return this.database===KE}isEqual(e){return e instanceof zb&&e.projectId===this.projectId&&e.database===this.database}}function zle(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Xt(ct.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zb(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e9="__type__",Fle="__max__",aw={mapValue:{}},t9="__vector__",ZE="value";function Zd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?CD(n)?4:Vle(n)?9007199254740991:Ble(n)?10:11:hn(28295,{value:n})}function Gc(n,e){if(n===e)return!0;const t=Zd(n);if(t!==Zd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ub(n).isEqual(Ub(e));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const s=Yd(r.timestampValue),l=Yd(a.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,a){return Kd(r.bytesValue).isEqual(Kd(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,a){return Nr(r.geoPointValue.latitude)===Nr(a.geoPointValue.latitude)&&Nr(r.geoPointValue.longitude)===Nr(a.geoPointValue.longitude)})(n,e);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return Nr(r.integerValue)===Nr(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const s=Nr(r.doubleValue),l=Nr(a.doubleValue);return s===l?YE(s)===YE(l):isNaN(s)&&isNaN(l)}return!1})(n,e);case 9:return by(n.arrayValue.values||[],e.arrayValue.values||[],Gc);case 10:case 11:return(function(r,a){const s=r.mapValue.fields||{},l=a.mapValue.fields||{};if(cz(s)!==cz(l))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(l[c]===void 0||!Gc(s[c],l[c])))return!1;return!0})(n,e);default:return hn(52216,{left:n})}}function Fb(n,e){return(n.values||[]).find((t=>Gc(t,e)))!==void 0}function xy(n,e){if(n===e)return 0;const t=Zd(n),i=Zd(e);if(t!==i)return Xn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xn(n.booleanValue,e.booleanValue);case 2:return(function(a,s){const l=Nr(a.integerValue||a.doubleValue),c=Nr(s.integerValue||s.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(n,e);case 3:return hz(n.timestampValue,e.timestampValue);case 4:return hz(Ub(n),Ub(e));case 5:return lN(n.stringValue,e.stringValue);case 6:return(function(a,s){const l=Kd(a),c=Kd(s);return l.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(a,s){const l=a.split("/"),c=s.split("/");for(let f=0;f<l.length&&f<c.length;f++){const p=Xn(l[f],c[f]);if(p!==0)return p}return Xn(l.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,s){const l=Xn(Nr(a.latitude),Nr(s.latitude));return l!==0?l:Xn(Nr(a.longitude),Nr(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return dz(n.arrayValue,e.arrayValue);case 10:return(function(a,s){var v,_,x,T;const l=a.fields||{},c=s.fields||{},f=(v=l[ZE])==null?void 0:v.arrayValue,p=(_=c[ZE])==null?void 0:_.arrayValue,g=Xn(((x=f==null?void 0:f.values)==null?void 0:x.length)||0,((T=p==null?void 0:p.values)==null?void 0:T.length)||0);return g!==0?g:dz(f,p)})(n.mapValue,e.mapValue);case 11:return(function(a,s){if(a===aw.mapValue&&s===aw.mapValue)return 0;if(a===aw.mapValue)return 1;if(s===aw.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),f=s.fields||{},p=Object.keys(f);c.sort(),p.sort();for(let g=0;g<c.length&&g<p.length;++g){const v=lN(c[g],p[g]);if(v!==0)return v;const _=xy(l[c[g]],f[p[g]]);if(_!==0)return _}return Xn(c.length,p.length)})(n.mapValue,e.mapValue);default:throw hn(23264,{he:t})}}function hz(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Xn(n,e);const t=Yd(n),i=Yd(e),r=Xn(t.seconds,i.seconds);return r!==0?r:Xn(t.nanos,i.nanos)}function dz(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const a=xy(t[r],i[r]);if(a)return a}return Xn(t.length,i.length)}function Sy(n){return uN(n)}function uN(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Yd(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Kd(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return nn.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const a of t.values||[])r?r=!1:i+=",",i+=uN(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",a=!0;for(const s of i)a?a=!1:r+=",",r+=`${s}:${uN(t.fields[s])}`;return r+"}"})(n.mapValue):hn(61005,{value:n})}function Nw(n){switch(Zd(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$A(n);return e?16+Nw(e):16;case 5:return 2*n.stringValue.length;case 6:return Kd(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+Nw(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return sp(i.fields,((a,s)=>{r+=a.length+Nw(s)})),r})(n.mapValue);default:throw hn(13486,{value:n})}}function cN(n){return!!n&&"integerValue"in n}function ID(n){return!!n&&"arrayValue"in n}function pz(n){return!!n&&"nullValue"in n}function mz(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ow(n){return!!n&&"mapValue"in n}function Ble(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[e9])==null?void 0:i.stringValue)===t9}function ub(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return sp(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=ub(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ub(n.arrayValue.values[t]);return e}return{...n}}function Vle(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Fle}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this.value=e}static empty(){return new Io({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ow(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ub(t)}setAll(e){let t=Ya.emptyPath(),i={},r=[];e.forEach(((s,l)=>{if(!t.isImmediateParentOf(l)){const c=this.getFieldsMap(t);this.applyChanges(c,i,r),i={},r=[],t=l.popLast()}s?i[l.lastSegment()]=ub(s):r.push(l.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,r)}delete(e){const t=this.field(e.popLast());Ow(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Ow(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){sp(t,((r,a)=>e[r]=a));for(const r of i)delete e[r]}clone(){return new Io(ub(this.value))}}function n9(n){const e=[];return sp(n.fields,((t,i)=>{const r=new Ya([t]);if(Ow(i)){const a=n9(i.mapValue).fields;if(a.length===0)e.push(r);else for(const s of a)e.push(r.child(s))}else e.push(r)})),new Qo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,t,i,r,a,s,l){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=a,this.data=s,this.documentState=l}static newInvalidDocument(e){return new Ss(e,0,_n.min(),_n.min(),_n.min(),Io.empty(),0)}static newFoundDocument(e,t,i,r){return new Ss(e,1,t,_n.min(),i,r,0)}static newNoDocument(e,t){return new Ss(e,2,t,_n.min(),_n.min(),Io.empty(),0)}static newUnknownDocument(e,t){return new Ss(e,3,t,_n.min(),_n.min(),Io.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_n.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Io.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Io.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_n.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ss&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ss(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,t){this.position=e,this.inclusive=t}}function gz(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const a=e[r],s=n.position[r];if(a.field.isKeyField()?i=nn.comparator(nn.fromName(s.referenceValue),t.key):i=xy(s,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function vz(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gc(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,t="asc"){this.field=e,this.dir=t}}function jle(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{}class na extends i9{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Gle(e,t,i):t==="array-contains"?new $le(e,i):t==="in"?new Xle(e,i):t==="not-in"?new Yle(e,i):t==="array-contains-any"?new Kle(e,i):new na(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Wle(e,i):new qle(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(xy(t,this.value)):t!==null&&Zd(this.value)===Zd(t)&&this.matchesComparison(xy(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return hn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wc extends i9{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Wc(e,t)}matches(e){return r9(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function r9(n){return n.op==="and"}function a9(n){return Hle(n)&&r9(n)}function Hle(n){for(const e of n.filters)if(e instanceof Wc)return!1;return!0}function fN(n){if(n instanceof na)return n.field.canonicalString()+n.op.toString()+Sy(n.value);if(a9(n))return n.filters.map((e=>fN(e))).join(",");{const e=n.filters.map((t=>fN(t))).join(",");return`${n.op}(${e})`}}function s9(n,e){return n instanceof na?(function(i,r){return r instanceof na&&i.op===r.op&&i.field.isEqual(r.field)&&Gc(i.value,r.value)})(n,e):n instanceof Wc?(function(i,r){return r instanceof Wc&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,s,l)=>a&&s9(s,r.filters[l])),!0):!1})(n,e):void hn(19439)}function o9(n){return n instanceof na?(function(t){return`${t.field.canonicalString()} ${t.op} ${Sy(t.value)}`})(n):n instanceof Wc?(function(t){return t.op.toString()+" {"+t.getFilters().map(o9).join(" ,")+"}"})(n):"Filter"}class Gle extends na{constructor(e,t,i){super(e,t,i),this.key=nn.fromName(i.referenceValue)}matches(e){const t=nn.comparator(e.key,this.key);return this.matchesComparison(t)}}class Wle extends na{constructor(e,t){super(e,"in",t),this.keys=l9("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class qle extends na{constructor(e,t){super(e,"not-in",t),this.keys=l9("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function l9(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>nn.fromName(i.referenceValue)))}class $le extends na{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ID(t)&&Fb(t.arrayValue,this.value)}}class Xle extends na{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Fb(this.value.arrayValue,t)}}class Yle extends na{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Fb(this.value.arrayValue,t)}}class Kle extends na{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ID(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Fb(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zle{constructor(e,t=null,i=[],r=[],a=null,s=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=s,this.endAt=l,this.Te=null}}function yz(n,e=null,t=[],i=[],r=null,a=null,s=null){return new Zle(n,e,t,i,r,a,s)}function PD(n){const e=wn(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>fN(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),qA(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Sy(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Sy(i))).join(",")),e.Te=t}return e.Te}function RD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!jle(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!s9(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!vz(n.startAt,e.startAt)&&vz(n.endAt,e.endAt)}function hN(n){return nn.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,t=null,i=[],r=[],a=null,s="F",l=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=s,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Qle(n,e,t,i,r,a,s,l){return new XA(n,e,t,i,r,a,s,l)}function ND(n){return new XA(n)}function _z(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Jle(n){return nn.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function eue(n){return n.collectionGroup!==null}function cb(n){const e=wn(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new ra(Ya.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((f=>{f.isInequality()&&(l=l.add(f.field))}))})),l})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new JE(a,i))})),t.has(Ya.keyField().canonicalString())||e.Ie.push(new JE(Ya.keyField(),i))}return e.Ie}function Lc(n){const e=wn(n);return e.Ee||(e.Ee=tue(e,cb(n))),e.Ee}function tue(n,e){if(n.limitType==="F")return yz(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new JE(r.field,a)}));const t=n.endAt?new QE(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new QE(n.startAt.position,n.startAt.inclusive):null;return yz(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function dN(n,e,t){return new XA(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function YA(n,e){return RD(Lc(n),Lc(e))&&n.limitType===e.limitType}function u9(n){return`${PD(Lc(n))}|lt:${n.limitType}`}function Fv(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>o9(r))).join(", ")}]`),qA(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>Sy(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>Sy(r))).join(",")),`Target(${i})`})(Lc(n))}; limitType=${n.limitType})`}function KA(n,e){return e.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):nn.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,r){for(const a of cb(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(s,l,c){const f=gz(s,l,c);return s.inclusive?f<=0:f<0})(i.startAt,cb(i),r)||i.endAt&&!(function(s,l,c){const f=gz(s,l,c);return s.inclusive?f>=0:f>0})(i.endAt,cb(i),r))})(n,e)}function nue(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function c9(n){return(e,t)=>{let i=!1;for(const r of cb(n)){const a=iue(r,e,t);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function iue(n,e,t){const i=n.field.isKeyField()?nn.comparator(e.key,t.key):(function(a,s,l){const c=s.data.field(a),f=l.data.field(a);return c!==null&&f!==null?xy(c,f):hn(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return hn(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){sp(this.inner,((t,i)=>{for(const[r,a]of i)e(r,a)}))}isEmpty(){return X8(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rue=new gr(nn.comparator);function ih(){return rue}const f9=new gr(nn.comparator);function q_(...n){let e=f9;for(const t of n)e=e.insert(t.key,t);return e}function h9(n){let e=f9;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function wm(){return fb()}function d9(){return fb()}function fb(){return new ug((n=>n.toString()),((n,e)=>n.isEqual(e)))}const aue=new gr(nn.comparator),sue=new ra(nn.comparator);function Yn(...n){let e=sue;for(const t of n)e=e.add(t);return e}const oue=new ra(Xn);function lue(){return oue}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:YE(e)?"-0":e}}function p9(n){return{integerValue:""+n}}function uue(n,e){return Ole(e)?p9(e):OD(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(){this._=void 0}}function cue(n,e,t){return n instanceof eT?(function(r,a){const s={fields:{[Z8]:{stringValue:K8},[J8]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&CD(a)&&(a=$A(a)),a&&(s.fields[Q8]=a),{mapValue:s}})(t,e):n instanceof Bb?g9(n,e):n instanceof Vb?v9(n,e):(function(r,a){const s=m9(r,a),l=bz(s)+bz(r.Ae);return cN(s)&&cN(r.Ae)?p9(l):OD(r.serializer,l)})(n,e)}function fue(n,e,t){return n instanceof Bb?g9(n,e):n instanceof Vb?v9(n,e):t}function m9(n,e){return n instanceof tT?(function(i){return cN(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class eT extends ZA{}class Bb extends ZA{constructor(e){super(),this.elements=e}}function g9(n,e){const t=y9(e);for(const i of n.elements)t.some((r=>Gc(r,i)))||t.push(i);return{arrayValue:{values:t}}}class Vb extends ZA{constructor(e){super(),this.elements=e}}function v9(n,e){let t=y9(e);for(const i of n.elements)t=t.filter((r=>!Gc(r,i)));return{arrayValue:{values:t}}}class tT extends ZA{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function bz(n){return Nr(n.integerValue||n.doubleValue)}function y9(n){return ID(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function hue(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof Bb&&r instanceof Bb||i instanceof Vb&&r instanceof Vb?by(i.elements,r.elements,Gc):i instanceof tT&&r instanceof tT?Gc(i.Ae,r.Ae):i instanceof eT&&r instanceof eT})(n.transform,e.transform)}class due{constructor(e,t){this.version=e,this.transformResults=t}}class Pu{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pu}static exists(e){return new Pu(void 0,e)}static updateTime(e){return new Pu(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dw(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class QA{}function _9(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new DD(n.key,Pu.none()):new xx(n.key,n.data,Pu.none());{const t=n.data,i=Io.empty();let r=new ra(Ya.comparator);for(let a of e.fields)if(!r.has(a)){let s=t.field(a);s===null&&a.length>1&&(a=a.popLast(),s=t.field(a)),s===null?i.delete(a):i.set(a,s),r=r.add(a)}return new op(n.key,i,new Qo(r.toArray()),Pu.none())}}function pue(n,e,t){n instanceof xx?(function(r,a,s){const l=r.value.clone(),c=Sz(r.fieldTransforms,a,s.transformResults);l.setAll(c),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()})(n,e,t):n instanceof op?(function(r,a,s){if(!Dw(r.precondition,a))return void a.convertToUnknownDocument(s.version);const l=Sz(r.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(b9(r)),c.setAll(l),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(r,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function hb(n,e,t,i){return n instanceof xx?(function(a,s,l,c){if(!Dw(a.precondition,s))return l;const f=a.value.clone(),p=wz(a.fieldTransforms,c,s);return f.setAll(p),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof op?(function(a,s,l,c){if(!Dw(a.precondition,s))return l;const f=wz(a.fieldTransforms,c,s),p=s.data;return p.setAll(b9(a)),p.setAll(f),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(n,e,t,i):(function(a,s,l){return Dw(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l})(n,e,t)}function mue(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),a=m9(i.transform,r||null);a!=null&&(t===null&&(t=Io.empty()),t.set(i.field,a))}return t||null}function xz(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&by(i,r,((a,s)=>hue(a,s)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class xx extends QA{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class op extends QA{constructor(e,t,i,r,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function b9(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Sz(n,e,t){const i=new Map;vi(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let r=0;r<t.length;r++){const a=n[r],s=a.transform,l=e.data.field(a.field);i.set(a.field,fue(s,l,t[r]))}return i}function wz(n,e,t){const i=new Map;for(const r of n){const a=r.transform,s=t.data.field(r.field);i.set(r.field,cue(a,s,e))}return i}class DD extends QA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gue extends QA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vue{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&pue(a,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=hb(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=hb(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=d9();return this.mutations.forEach((r=>{const a=e.get(r.key),s=a.overlayedDocument;let l=this.applyToLocalView(s,a.mutatedFields);l=t.has(r.key)?null:l;const c=_9(s,l);c!==null&&i.set(r.key,c),s.isValidDocument()||s.convertToNoDocument(_n.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Yn())}isEqual(e){return this.batchId===e.batchId&&by(this.mutations,e.mutations,((t,i)=>xz(t,i)))&&by(this.baseMutations,e.baseMutations,((t,i)=>xz(t,i)))}}class LD{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){vi(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return aue})();const a=e.mutations;for(let s=0;s<a.length;s++)r=r.insert(a[s].key,i[s].version);return new LD(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yue{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ue{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hr,ei;function bue(n){switch(n){case ct.OK:return hn(64938);case ct.CANCELLED:case ct.UNKNOWN:case ct.DEADLINE_EXCEEDED:case ct.RESOURCE_EXHAUSTED:case ct.INTERNAL:case ct.UNAVAILABLE:case ct.UNAUTHENTICATED:return!1;case ct.INVALID_ARGUMENT:case ct.NOT_FOUND:case ct.ALREADY_EXISTS:case ct.PERMISSION_DENIED:case ct.FAILED_PRECONDITION:case ct.ABORTED:case ct.OUT_OF_RANGE:case ct.UNIMPLEMENTED:case ct.DATA_LOSS:return!0;default:return hn(15467,{code:n})}}function x9(n){if(n===void 0)return nh("GRPC error has no .code"),ct.UNKNOWN;switch(n){case Hr.OK:return ct.OK;case Hr.CANCELLED:return ct.CANCELLED;case Hr.UNKNOWN:return ct.UNKNOWN;case Hr.DEADLINE_EXCEEDED:return ct.DEADLINE_EXCEEDED;case Hr.RESOURCE_EXHAUSTED:return ct.RESOURCE_EXHAUSTED;case Hr.INTERNAL:return ct.INTERNAL;case Hr.UNAVAILABLE:return ct.UNAVAILABLE;case Hr.UNAUTHENTICATED:return ct.UNAUTHENTICATED;case Hr.INVALID_ARGUMENT:return ct.INVALID_ARGUMENT;case Hr.NOT_FOUND:return ct.NOT_FOUND;case Hr.ALREADY_EXISTS:return ct.ALREADY_EXISTS;case Hr.PERMISSION_DENIED:return ct.PERMISSION_DENIED;case Hr.FAILED_PRECONDITION:return ct.FAILED_PRECONDITION;case Hr.ABORTED:return ct.ABORTED;case Hr.OUT_OF_RANGE:return ct.OUT_OF_RANGE;case Hr.UNIMPLEMENTED:return ct.UNIMPLEMENTED;case Hr.DATA_LOSS:return ct.DATA_LOSS;default:return hn(39323,{code:n})}}(ei=Hr||(Hr={}))[ei.OK=0]="OK",ei[ei.CANCELLED=1]="CANCELLED",ei[ei.UNKNOWN=2]="UNKNOWN",ei[ei.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ei[ei.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ei[ei.NOT_FOUND=5]="NOT_FOUND",ei[ei.ALREADY_EXISTS=6]="ALREADY_EXISTS",ei[ei.PERMISSION_DENIED=7]="PERMISSION_DENIED",ei[ei.UNAUTHENTICATED=16]="UNAUTHENTICATED",ei[ei.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ei[ei.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ei[ei.ABORTED=10]="ABORTED",ei[ei.OUT_OF_RANGE=11]="OUT_OF_RANGE",ei[ei.UNIMPLEMENTED=12]="UNIMPLEMENTED",ei[ei.INTERNAL=13]="INTERNAL",ei[ei.UNAVAILABLE=14]="UNAVAILABLE",ei[ei.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xue(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sue=new Fd([4294967295,4294967295],0);function Ez(n){const e=xue().encode(n),t=new U8;return t.update(e),new Uint8Array(t.digest())}function Tz(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Fd([t,i],0),new Fd([r,a],0)]}class kD{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new $_(`Invalid padding: ${t}`);if(i<0)throw new $_(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new $_(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new $_(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Fd.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(Fd.fromNumber(i)));return r.compare(Sue)===1&&(r=new Fd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Ez(e),[i,r]=Tz(t);for(let a=0;a<this.hashCount;a++){const s=this.ye(i,r,a);if(!this.we(s))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new kD(a,r,t);return i.forEach((l=>s.insert(l))),s}insert(e){if(this.ge===0)return;const t=Ez(e),[i,r]=Tz(t);for(let a=0;a<this.hashCount;a++){const s=this.ye(i,r,a);this.be(s)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class $_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,t,i,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Sx.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new JA(_n.min(),r,new gr(Xn),ih(),Yn())}}class Sx{constructor(e,t,i,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Sx(i,t,Yn(),Yn(),Yn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=r}}class S9{constructor(e,t){this.targetId=e,this.Ce=t}}class w9{constructor(e,t,i=es.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class Az{constructor(){this.ve=0,this.Fe=Mz(),this.Me=es.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Yn(),t=Yn(),i=Yn();return this.Fe.forEach(((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:hn(38017,{changeType:a})}})),new Sx(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=Mz()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,vi(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class wue{constructor(e){this.Ge=e,this.ze=new Map,this.je=ih(),this.He=sw(),this.Je=sw(),this.Ze=new gr(Xn)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:hn(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const a=r.target;if(hN(a))if(i===0){const s=new nn(a.path);this.et(t,s,Ss.newNoDocument(s,_n.min()))}else vi(i===1,20013,{expectedCount:i});else{const s=this._t(t);if(s!==i){const l=this.ut(e),c=l?this.ct(l,e,s):1;if(c!==0){this.it(t);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=t;let s,l;try{s=Kd(i).toUint8Array()}catch(c){if(c instanceof Y8)return _y("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new kD(s,r,a)}catch(c){return _y(c instanceof $_?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((a=>{const s=this.Ge.ht(),l=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.et(t,a,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((a,s)=>{const l=this.ot(s);if(l){if(a.current&&hN(l.target)){const c=new nn(l.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,Ss.newNoDocument(c,e))}a.Be&&(t.set(s,a.ke()),a.Ke())}}));let i=Yn();this.Je.forEach(((a,s)=>{let l=!0;s.forEachWhile((c=>{const f=this.ot(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(i=i.add(a))})),this.je.forEach(((a,s)=>s.setReadTime(e)));const r=new JA(e,t,this.Ze,this.je,i);return this.je=ih(),this.He=sw(),this.Je=sw(),this.Ze=new gr(Xn),r}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Az,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new ra(Xn),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new ra(Xn),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ut("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Az),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function sw(){return new gr(nn.comparator)}function Mz(){return new gr(nn.comparator)}const Eue={asc:"ASCENDING",desc:"DESCENDING"},Tue={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Aue={and:"AND",or:"OR"};class Mue{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function pN(n,e){return n.useProto3Json||qA(e)?e:{value:e}}function nT(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function E9(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Cue(n,e){return nT(n,e.toTimestamp())}function kc(n){return vi(!!n,49232),_n.fromTimestamp((function(t){const i=Yd(t);return new Yi(i.seconds,i.nanos)})(n))}function UD(n,e){return mN(n,e).canonicalString()}function mN(n,e){const t=(function(r){return new Xi(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function T9(n){const e=Xi.fromString(n);return vi(P9(e),10190,{key:e.toString()}),e}function gN(n,e){return UD(n.databaseId,e.path)}function HI(n,e){const t=T9(e);if(t.get(1)!==n.databaseId.projectId)throw new Xt(ct.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Xt(ct.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new nn(M9(t))}function A9(n,e){return UD(n.databaseId,e)}function Iue(n){const e=T9(n);return e.length===4?Xi.emptyPath():M9(e)}function vN(n){return new Xi(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function M9(n){return vi(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Cz(n,e,t){return{name:gN(n,e),fields:t.value.mapValue.fields}}function Pue(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:hn(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=(function(f,p){return f.useProto3Json?(vi(p===void 0||typeof p=="string",58123),es.fromBase64String(p||"")):(vi(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),es.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&(function(f){const p=f.code===void 0?ct.UNKNOWN:x9(f.code);return new Xt(p,f.message||"")})(s);t=new w9(i,r,a,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=HI(n,i.document.name),a=kc(i.document.updateTime),s=i.document.createTime?kc(i.document.createTime):_n.min(),l=new Io({mapValue:{fields:i.document.fields}}),c=Ss.newFoundDocument(r,a,s,l),f=i.targetIds||[],p=i.removedTargetIds||[];t=new Lw(f,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=HI(n,i.document),a=i.readTime?kc(i.readTime):_n.min(),s=Ss.newNoDocument(r,a),l=i.removedTargetIds||[];t=new Lw([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=HI(n,i.document),a=i.removedTargetIds||[];t=new Lw([],a,r,null)}else{if(!("filter"in e))return hn(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,s=new _ue(r,a),l=i.targetId;t=new S9(l,s)}}return t}function Rue(n,e){let t;if(e instanceof xx)t={update:Cz(n,e.key,e.value)};else if(e instanceof DD)t={delete:gN(n,e.key)};else if(e instanceof op)t={update:Cz(n,e.key,e.data),updateMask:Bue(e.fieldMask)};else{if(!(e instanceof gue))return hn(16599,{dt:e.type});t={verify:gN(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,s){const l=s.transform;if(l instanceof eT)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Bb)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Vb)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof tT)return{fieldPath:s.field.canonicalString(),increment:l.Ae};throw hn(20930,{transform:s.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:Cue(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:hn(27497)})(n,e.precondition)),t}function Nue(n,e){return n&&n.length>0?(vi(e!==void 0,14353),n.map((t=>(function(r,a){let s=r.updateTime?kc(r.updateTime):kc(a);return s.isEqual(_n.min())&&(s=kc(a)),new due(s,r.transformResults||[])})(t,e)))):[]}function Oue(n,e){return{documents:[A9(n,e.path)]}}function Due(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=A9(n,r);const a=(function(f){if(f.length!==0)return I9(Wc.create(f,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const s=(function(f){if(f.length!==0)return f.map((p=>(function(v){return{field:Bv(v.field),direction:Uue(v.dir)}})(p)))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=pN(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:r}}function Lue(n){let e=Iue(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){vi(i===1,65062);const p=t.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let a=[];t.where&&(a=(function(g){const v=C9(g);return v instanceof Wc&&a9(v)?v.getFilters():[v]})(t.where));let s=[];t.orderBy&&(s=(function(g){return g.map((v=>(function(x){return new JE(Vv(x.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(v)))})(t.orderBy));let l=null;t.limit&&(l=(function(g){let v;return v=typeof g=="object"?g.value:g,qA(v)?null:v})(t.limit));let c=null;t.startAt&&(c=(function(g){const v=!!g.before,_=g.values||[];return new QE(_,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(g){const v=!g.before,_=g.values||[];return new QE(_,v)})(t.endAt)),Qle(e,r,s,a,l,"F",c,f)}function kue(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return hn(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function C9(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Vv(t.unaryFilter.field);return na.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Vv(t.unaryFilter.field);return na.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Vv(t.unaryFilter.field);return na.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Vv(t.unaryFilter.field);return na.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return hn(61313);default:return hn(60726)}})(n):n.fieldFilter!==void 0?(function(t){return na.create(Vv(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return hn(58110);default:return hn(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Wc.create(t.compositeFilter.filters.map((i=>C9(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return hn(1026)}})(t.compositeFilter.op))})(n):hn(30097,{filter:n})}function Uue(n){return Eue[n]}function zue(n){return Tue[n]}function Fue(n){return Aue[n]}function Bv(n){return{fieldPath:n.canonicalString()}}function Vv(n){return Ya.fromServerFormat(n.fieldPath)}function I9(n){return n instanceof na?(function(t){if(t.op==="=="){if(mz(t.value))return{unaryFilter:{field:Bv(t.field),op:"IS_NAN"}};if(pz(t.value))return{unaryFilter:{field:Bv(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(mz(t.value))return{unaryFilter:{field:Bv(t.field),op:"IS_NOT_NAN"}};if(pz(t.value))return{unaryFilter:{field:Bv(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bv(t.field),op:zue(t.op),value:t.value}}})(n):n instanceof Wc?(function(t){const i=t.getFilters().map((r=>I9(r)));return i.length===1?i[0]:{compositeFilter:{op:Fue(t.op),filters:i}}})(n):hn(54877,{filter:n})}function Bue(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function P9(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function R9(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,t,i,r,a=_n.min(),s=_n.min(),l=es.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Od(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Od(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Od(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Od(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vue{constructor(e){this.yt=e}}function jue(n){const e=Lue({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?dN(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hue{constructor(){this.Sn=new Gue}addToCollectionParentIndex(e,t){return this.Sn.add(t),st.resolve()}getCollectionParents(e,t){return st.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return st.resolve()}deleteFieldIndex(e,t){return st.resolve()}deleteAllFieldIndexes(e){return st.resolve()}createTargetIndexes(e,t){return st.resolve()}getDocumentsMatchingTarget(e,t){return st.resolve(null)}getIndexType(e,t){return st.resolve(0)}getFieldIndexes(e,t){return st.resolve([])}getNextCollectionGroupToUpdate(e){return st.resolve(null)}getMinOffset(e,t){return st.resolve(Xd.min())}getMinOffsetFromCollectionGroup(e,t){return st.resolve(Xd.min())}updateCollectionGroup(e,t,i){return st.resolve()}updateIndexEntries(e,t){return st.resolve()}}class Gue{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new ra(Xi.comparator),a=!r.has(i);return this.index[t]=r.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new ra(Xi.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},N9=41943040;class Mo{static withCacheSize(e){return new Mo(e,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mo.DEFAULT_COLLECTION_PERCENTILE=10,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mo.DEFAULT=new Mo(N9,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mo.DISABLED=new Mo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new wy(0)}static ar(){return new wy(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pz="LruGarbageCollector",Wue=1048576;function Rz([n,e],[t,i]){const r=Xn(n,t);return r===0?Xn(e,i):r}class que{constructor(e){this.Pr=e,this.buffer=new ra(Rz),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Rz(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $ue{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ut(Pz,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Hy(t)?Ut(Pz,"Ignoring IndexedDB error during garbage collection: ",t):await jy(t)}await this.Ar(3e5)}))}}class Xue{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return st.resolve(WA.ce);const i=new que(t);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ut("LruGarbageCollector","Garbage collection skipped; disabled"),st.resolve(Iz)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Ut("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Iz):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,r,a,s,l,c,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(Ut("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,s=Date.now(),this.nthSequenceNumber(e,r)))).next((g=>(i=g,l=Date.now(),this.removeTargets(e,i,t)))).next((g=>(a=g,c=Date.now(),this.removeOrphanedDocuments(e,i)))).next((g=>(f=Date.now(),zv()<=$n.DEBUG&&Ut("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-p}ms
	Determined least recently used ${r} in `+(l-s)+`ms
	Removed ${a} targets in `+(c-l)+`ms
	Removed ${g} documents in `+(f-c)+`ms
Total Duration: ${f-p}ms`),st.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:g}))))}}function Yue(n,e){return new Xue(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kue{constructor(){this.changes=new ug((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ss.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?st.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zue{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Que{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&hb(i.mutation,r,Qo.empty(),Yi.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Yn()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Yn()){const r=wm();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((a=>{let s=q_();return a.forEach(((l,c)=>{s=s.insert(l,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,t){const i=wm();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Yn())))}populateOverlays(e,t,i){const r=[];return i.forEach((a=>{t.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(e,r).next((a=>{a.forEach(((s,l)=>{t.set(s,l)}))}))}computeViews(e,t,i,r){let a=ih();const s=fb(),l=(function(){return fb()})();return t.forEach(((c,f)=>{const p=i.get(f.key);r.has(f.key)&&(p===void 0||p.mutation instanceof op)?a=a.insert(f.key,f):p!==void 0?(s.set(f.key,p.mutation.getFieldMask()),hb(p.mutation,f,p.mutation.getFieldMask(),Yi.now())):s.set(f.key,Qo.empty())})),this.recalculateAndSaveOverlays(e,a).next((c=>(c.forEach(((f,p)=>s.set(f,p))),t.forEach(((f,p)=>l.set(f,new Zue(p,s.get(f)??null)))),l)))}recalculateAndSaveOverlays(e,t){const i=fb();let r=new gr(((s,l)=>s-l)),a=Yn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((s=>{for(const l of s)l.keys().forEach((c=>{const f=t.get(c);if(f===null)return;let p=i.get(c)||Qo.empty();p=l.applyToLocalView(f,p),i.set(c,p);const g=(r.get(l.batchId)||Yn()).add(c);r=r.insert(l.batchId,g)}))})).next((()=>{const s=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),f=c.key,p=c.value,g=d9();p.forEach((v=>{if(!a.has(v)){const _=_9(t.get(v),i.get(v));_!==null&&g.set(v,_),a=a.add(v)}})),s.push(this.documentOverlayCache.saveOverlays(e,f,g))}return st.waitFor(s)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return Jle(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):eue(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((a=>{const s=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-a.size):st.resolve(wm());let l=kb,c=a;return s.next((f=>st.forEach(f,((p,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),a.get(p)?st.resolve():this.remoteDocumentCache.getEntry(e,p).next((v=>{c=c.insert(p,v)}))))).next((()=>this.populateOverlays(e,f,a))).next((()=>this.computeViews(e,c,f,Yn()))).next((p=>({batchId:l,changes:h9(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new nn(t)).next((i=>{let r=q_();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const a=t.collectionGroup;let s=q_();return this.indexManager.getCollectionParents(e,a).next((l=>st.forEach(l,(c=>{const f=(function(g,v){return new XA(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next((p=>{p.forEach(((g,v)=>{s=s.insert(g,v)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,r)))).next((s=>{a.forEach(((c,f)=>{const p=f.getKey();s.get(p)===null&&(s=s.insert(p,Ss.newInvalidDocument(p)))}));let l=q_();return s.forEach(((c,f)=>{const p=a.get(c);p!==void 0&&hb(p.mutation,f,Qo.empty(),Yi.now()),KA(t,f)&&(l=l.insert(c,f))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jue{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return st.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:kc(r.createTime)}})(t)),st.resolve()}getNamedQuery(e,t){return st.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(r){return{name:r.name,query:jue(r.bundledQuery),readTime:kc(r.readTime)}})(t)),st.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ece{constructor(){this.overlays=new gr(nn.comparator),this.Lr=new Map}getOverlay(e,t){return st.resolve(this.overlays.get(t))}getOverlays(e,t){const i=wm();return st.forEach(t,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,a)=>{this.bt(e,t,a)})),st.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Lr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(i)),st.resolve()}getOverlaysForCollection(e,t,i){const r=wm(),a=t.length+1,s=new nn(t.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const c=l.getNext().value,f=c.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===a&&c.largestBatchId>i&&r.set(c.getKey(),c)}return st.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let a=new gr(((f,p)=>f-p));const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let p=a.get(f.largestBatchId);p===null&&(p=wm(),a=a.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const l=wm(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((f,p)=>l.set(f,p))),!(l.size()>=r)););return st.resolve(l)}bt(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const s=this.Lr.get(r.largestBatchId).delete(i.key);this.Lr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new yue(t,i));let a=this.Lr.get(t);a===void 0&&(a=Yn(),this.Lr.set(t,a)),this.Lr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tce{constructor(){this.sessionToken=es.EMPTY_BYTE_STRING}getSessionToken(e){return st.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,st.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(){this.kr=new ra(Sa.Kr),this.qr=new ra(Sa.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Sa(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Sa(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new nn(new Xi([])),i=new Sa(t,e),r=new Sa(t,e+1),a=[];return this.qr.forEachInRange([i,r],(s=>{this.Wr(s),a.push(s.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new nn(new Xi([])),i=new Sa(t,e),r=new Sa(t,e+1);let a=Yn();return this.qr.forEachInRange([i,r],(s=>{a=a.add(s.key)})),a}containsKey(e){const t=new Sa(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Sa{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return nn.comparator(e.key,t.key)||Xn(e.Hr,t.Hr)}static Ur(e,t){return Xn(e.Hr,t.Hr)||nn.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nce{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new ra(Sa.Kr)}checkEmpty(e){return st.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new vue(a,t,i,r);this.mutationQueue.push(s);for(const l of r)this.Jr=this.Jr.add(new Sa(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return st.resolve(s)}lookupMutationBatch(e,t){return st.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.Xr(i),a=r<0?0:r;return st.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return st.resolve(this.mutationQueue.length===0?MD:this.Yn-1)}getAllMutationBatches(e){return st.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Sa(t,0),r=new Sa(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([i,r],(s=>{const l=this.Zr(s.Hr);a.push(l)})),st.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ra(Xn);return t.forEach((r=>{const a=new Sa(r,0),s=new Sa(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,s],(l=>{i=i.add(l.Hr)}))})),st.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let a=i;nn.isDocumentKey(a)||(a=a.child(""));const s=new Sa(new nn(a),0);let l=new ra(Xn);return this.Jr.forEachWhile((c=>{const f=c.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(l=l.add(c.Hr)),!0)}),s),st.resolve(this.Yr(l))}Yr(e){const t=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){vi(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return st.forEach(t.mutations,(r=>{const a=new Sa(r.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Sa(t,0),r=this.Jr.firstAfterOrEqual(i);return st.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,st.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ice{constructor(e){this.ti=e,this.docs=(function(){return new gr(nn.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),a=r?r.size:0,s=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return st.resolve(i?i.document.mutableCopy():Ss.newInvalidDocument(t))}getEntries(e,t){let i=ih();return t.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():Ss.newInvalidDocument(r))})),st.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let a=ih();const s=t.path,l=new nn(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:f,value:{document:p}}=c.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||Ile(Cle(p),i)<=0||(r.has(p.key)||KA(t,p))&&(a=a.insert(p.key,p.mutableCopy()))}return st.resolve(a)}getAllFromCollectionGroup(e,t,i,r){hn(9500)}ni(e,t){return st.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new rce(this)}getSize(e){return st.resolve(this.size)}}class rce extends Kue{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(i)})),st.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ace{constructor(e){this.persistence=e,this.ri=new ug((t=>PD(t)),RD),this.lastRemoteSnapshotVersion=_n.min(),this.highestTargetId=0,this.ii=0,this.si=new zD,this.targetCount=0,this.oi=wy._r()}forEachTarget(e,t){return this.ri.forEach(((i,r)=>t(r))),st.resolve()}getLastRemoteSnapshotVersion(e){return st.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return st.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),st.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),st.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new wy(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,st.resolve()}updateTargetData(e,t){return this.lr(t),st.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,st.resolve()}removeTargets(e,t,i){let r=0;const a=[];return this.ri.forEach(((s,l)=>{l.sequenceNumber<=t&&i.get(l.targetId)===null&&(this.ri.delete(s),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)})),st.waitFor(a).next((()=>r))}getTargetCount(e){return st.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return st.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),st.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((s=>{a.push(r.markPotentiallyOrphaned(e,s))})),st.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),st.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return st.resolve(i)}containsKey(e,t){return st.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(e,t){this._i={},this.overlays={},this.ai=new WA(0),this.ui=!1,this.ui=!0,this.ci=new tce,this.referenceDelegate=e(this),this.li=new ace(this),this.indexManager=new Hue,this.remoteDocumentCache=(function(r){return new ice(r)})((i=>this.referenceDelegate.hi(i))),this.serializer=new Vue(t),this.Pi=new Jue(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ece,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new nce(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){Ut("MemoryPersistence","Starting transaction:",e);const r=new sce(this.ai.next());return this.referenceDelegate.Ti(),i(r).next((a=>this.referenceDelegate.Ii(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ei(e,t){return st.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class sce extends Rle{constructor(e){super(),this.currentSequenceNumber=e}}class FD{constructor(e){this.persistence=e,this.Ri=new zD,this.Ai=null}static Vi(e){return new FD(e)}get di(){if(this.Ai)return this.Ai;throw hn(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),st.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),st.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),st.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((r=>this.di.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((a=>this.di.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return st.forEach(this.di,(i=>{const r=nn.fromPath(i);return this.mi(e,r).next((a=>{a||t.removeEntry(r,_n.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return st.or([()=>st.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class iT{constructor(e,t){this.persistence=e,this.fi=new ug((i=>Dle(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=Yue(this,t)}static Vi(e,t){return new iT(e,t)}Ti(){}Ii(e){return st.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return st.forEach(this.fi,((i,r)=>this.wr(e,i,r).next((a=>a?st.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ni(e,(s=>this.wr(e,s,t).next((l=>{l||(i++,a.removeEntry(s,_n.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),st.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),st.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),st.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),st.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nw(e.data.value)),t}wr(e,t,i){return st.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.fi.get(t);return st.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=r}static Es(e,t){let i=Yn(),r=Yn();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new BD(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oce{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lce{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Yse()?8:Nle(As())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const a={result:null};return this.gs(e,t).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.ps(e,t,r,i).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new oce;return this.ys(e,t,s).next((l=>{if(a.result=l,this.As)return this.ws(e,t,s,l.size)}))})).next((()=>a.result))}ws(e,t,i,r){return i.documentReadCount<this.Vs?(zv()<=$n.DEBUG&&Ut("QueryEngine","SDK will not create cache indexes for query:",Fv(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),st.resolve()):(zv()<=$n.DEBUG&&Ut("QueryEngine","Query:",Fv(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ds*r?(zv()<=$n.DEBUG&&Ut("QueryEngine","The SDK decides to create cache indexes for query:",Fv(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Lc(t))):st.resolve())}gs(e,t){if(_z(t))return st.resolve(null);let i=Lc(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=dN(t,null,"F"),i=Lc(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const s=Yn(...a);return this.fs.getDocuments(e,s).next((l=>this.indexManager.getMinOffset(e,i).next((c=>{const f=this.bs(t,l);return this.Ss(t,f,s,c.readTime)?this.gs(e,dN(t,null,"F")):this.Ds(e,f,t,c)}))))})))))}ps(e,t,i,r){return _z(t)||r.isEqual(_n.min())?st.resolve(null):this.fs.getDocuments(e,i).next((a=>{const s=this.bs(t,a);return this.Ss(t,s,i,r)?st.resolve(null):(zv()<=$n.DEBUG&&Ut("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Fv(t)),this.Ds(e,s,t,Mle(r,kb)).next((l=>l)))}))}bs(e,t){let i=new ra(c9(e));return t.forEach(((r,a)=>{KA(e,a)&&(i=i.add(a))})),i}Ss(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}ys(e,t,i){return zv()<=$n.DEBUG&&Ut("QueryEngine","Using full collection scan to execute query:",Fv(t)),this.fs.getDocumentsMatchingQuery(e,t,Xd.min(),i)}Ds(e,t,i,r){return this.fs.getDocumentsMatchingQuery(e,i,r).next((a=>(t.forEach((s=>{a=a.insert(s.key,s)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD="LocalStore",uce=3e8;class cce{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new gr(Xn),this.Fs=new ug((a=>PD(a)),RD),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Que(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function fce(n,e,t,i){return new cce(n,e,t,i)}async function D9(n,e){const t=wn(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const s=[],l=[];let c=Yn();for(const f of r){s.push(f.batchId);for(const p of f.mutations)c=c.add(p.key)}for(const f of a){l.push(f.batchId);for(const p of f.mutations)c=c.add(p.key)}return t.localDocuments.getDocuments(i,c).next((f=>({Ns:f,removedBatchIds:s,addedBatchIds:l})))}))}))}function hce(n,e){const t=wn(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(l,c,f,p){const g=f.batch,v=g.keys();let _=st.resolve();return v.forEach((x=>{_=_.next((()=>p.getEntry(c,x))).next((T=>{const S=f.docVersions.get(x);vi(S!==null,48541),T.version.compareTo(S)<0&&(g.applyToRemoteDocument(T,f),T.isValidDocument()&&(T.setReadTime(f.commitVersion),p.addEntry(T)))}))})),_.next((()=>l.mutationQueue.removeMutationBatch(c,g)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(l){let c=Yn();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(c=c.add(l.batch.mutations[f].key));return c})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function L9(n){const e=wn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function dce(n,e){const t=wn(n),i=e.snapshotVersion;let r=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=t.xs.newChangeBuffer({trackRemovals:!0});r=t.vs;const l=[];e.targetChanges.forEach(((p,g)=>{const v=r.get(g);if(!v)return;l.push(t.li.removeMatchingKeys(a,p.removedDocuments,g).next((()=>t.li.addMatchingKeys(a,p.addedDocuments,g))));let _=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?_=_.withResumeToken(es.EMPTY_BYTE_STRING,_n.min()).withLastLimboFreeSnapshotVersion(_n.min()):p.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(p.resumeToken,i)),r=r.insert(g,_),(function(T,S,w){return T.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=uce?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0})(v,_,p)&&l.push(t.li.updateTargetData(a,_))}));let c=ih(),f=Yn();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(a,p))})),l.push(pce(a,s,e.documentUpdates).next((p=>{c=p.Bs,f=p.Ls}))),!i.isEqual(_n.min())){const p=t.li.getLastRemoteSnapshotVersion(a).next((g=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,i)));l.push(p)}return st.waitFor(l).next((()=>s.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,c,f))).next((()=>c))})).then((a=>(t.vs=r,a)))}function pce(n,e,t){let i=Yn(),r=Yn();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let s=ih();return t.forEach(((l,c)=>{const f=a.get(l);c.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(_n.min())?(e.removeEntry(l,c.readTime),s=s.insert(l,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),s=s.insert(l,c)):Ut(VD,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",c.version)})),{Bs:s,Ls:r}}))}function mce(n,e){const t=wn(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=MD),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function gce(n,e){const t=wn(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.li.getTargetData(i,e).next((a=>a?(r=a,st.resolve(r)):t.li.allocateTargetId(i).next((s=>(r=new Od(e,s,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.vs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function yN(n,e,t){const i=wn(n),r=i.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!Hy(s))throw s;Ut(VD,`Failed to update sequence numbers for target ${e}: ${s}`)}i.vs=i.vs.remove(e),i.Fs.delete(r.target)}function Nz(n,e,t){const i=wn(n);let r=_n.min(),a=Yn();return i.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,f,p){const g=wn(c),v=g.Fs.get(p);return v!==void 0?st.resolve(g.vs.get(v)):g.li.getTargetData(f,p)})(i,s,Lc(e)).next((l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(s,l.targetId).next((c=>{a=c}))})).next((()=>i.Cs.getDocumentsMatchingQuery(s,e,t?r:_n.min(),t?a:Yn()))).next((l=>(vce(i,nue(e),l),{documents:l,ks:a})))))}function vce(n,e,t){let i=n.Ms.get(e)||_n.min();t.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Ms.set(e,i)}class Oz{constructor(){this.activeTargetIds=lue()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yce{constructor(){this.vo=new Oz,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Oz,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ce{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dz="ConnectivityMonitor";class Lz{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ut(Dz,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ut(Dz,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ow=null;function _N(){return ow===null?ow=(function(){return 268435456+Math.round(2147483648*Math.random())})():ow++,"0x"+ow.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI="RestConnection",bce={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class xce{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.$o=this.databaseId.database===KE?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,a){const s=_N(),l=this.Qo(e,t.toUriEncodedString());Ut(GI,`Sending RPC '${e}' ${s}:`,l,i);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,r,a);const{host:f}=new URL(l),p=Fy(f);return this.zo(e,l,c,i,p).then((g=>(Ut(GI,`Received RPC '${e}' ${s}: `,g),g)),(g=>{throw _y(GI,`RPC '${e}' ${s} failed with error: `,g,"url: ",l,"request:",i),g}))}jo(e,t,i,r,a,s){return this.Wo(e,t,i,r,a)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Vy})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,a)=>e[a]=r)),i&&i.headers.forEach(((r,a)=>e[a]=r))}Qo(e,t){const i=bce[e];let r=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sce{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="WebChannelConnection",R_=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(r){setTimeout((()=>{throw r}),0)}}))};class Qv extends xce{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Qv.c_){const e=V8();R_(e,B8.STAT_EVENT,(t=>{t.stat===oN.PROXY?Ut(_s,"STAT_EVENT: detected buffering proxy"):t.stat===oN.NOPROXY&&Ut(_s,"STAT_EVENT: detected no buffering proxy")})),Qv.c_=!0}}zo(e,t,i,r,a){const s=_N();return new Promise(((l,c)=>{const f=new z8;f.setWithCredentials(!0),f.listenOnce(F8.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Rw.NO_ERROR:const g=f.getResponseJson();Ut(_s,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),l(g);break;case Rw.TIMEOUT:Ut(_s,`RPC '${e}' ${s} timed out`),c(new Xt(ct.DEADLINE_EXCEEDED,"Request time out"));break;case Rw.HTTP_ERROR:const v=f.getStatus();if(Ut(_s,`RPC '${e}' ${s} failed with status:`,v,"response text:",f.getResponseText()),v>0){let _=f.getResponseJson();Array.isArray(_)&&(_=_[0]);const x=_==null?void 0:_.error;if(x&&x.status&&x.message){const T=(function(w){const I=w.toLowerCase().replace(/_/g,"-");return Object.values(ct).indexOf(I)>=0?I:ct.UNKNOWN})(x.status);c(new Xt(T,x.message))}else c(new Xt(ct.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Xt(ct.UNAVAILABLE,"Connection failed."));break;default:hn(9055,{l_:e,streamId:s,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Ut(_s,`RPC '${e}' ${s} completed.`)}}));const p=JSON.stringify(r);Ut(_s,`RPC '${e}' ${s} sending request:`,r),f.send(t,"POST",p,i,15)}))}T_(e,t,i){const r=_N(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const f=a.join("");Ut(_s,`Creating RPC '${e}' stream ${r}: ${f}`,l);const p=s.createWebChannel(f,l);this.I_(p);let g=!1,v=!1;const _=new Sce({Ho:x=>{v?Ut(_s,`Not sending because RPC '${e}' stream ${r} is closed:`,x):(g||(Ut(_s,`Opening RPC '${e}' stream ${r} transport.`),p.open(),g=!0),Ut(_s,`RPC '${e}' stream ${r} sending:`,x),p.send(x))},Jo:()=>p.close()});return R_(p,W_.EventType.OPEN,(()=>{v||(Ut(_s,`RPC '${e}' stream ${r} transport opened.`),_.i_())})),R_(p,W_.EventType.CLOSE,(()=>{v||(v=!0,Ut(_s,`RPC '${e}' stream ${r} transport closed`),_.o_(),this.E_(p))})),R_(p,W_.EventType.ERROR,(x=>{v||(v=!0,_y(_s,`RPC '${e}' stream ${r} transport errored. Name:`,x.name,"Message:",x.message),_.o_(new Xt(ct.UNAVAILABLE,"The operation could not be completed")))})),R_(p,W_.EventType.MESSAGE,(x=>{var T;if(!v){const S=x.data[0];vi(!!S,16349);const w=S,I=(w==null?void 0:w.error)||((T=w[0])==null?void 0:T.error);if(I){Ut(_s,`RPC '${e}' stream ${r} received error:`,I);const R=I.status;let O=(function(L){const z=Hr[L];if(z!==void 0)return x9(z)})(R),F=I.message;O===void 0&&(O=ct.INTERNAL,F="Unknown error status: "+R+" with message "+I.message),v=!0,_.o_(new Xt(O,F)),p.close()}else Ut(_s,`RPC '${e}' stream ${r} received:`,S),_.__(S)}})),Qv.u_(),setTimeout((()=>{_.s_()}),0),_}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return j8()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wce(n){return new Qv(n)}function WI(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(n){return new Mue(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qv.c_=!1;class k9{constructor(e,t,i=1e3,r=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=r,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&Ut("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kz="PersistentStream";class U9{constructor(e,t,i,r,a,s,l,c){this.Ci=e,this.b_=i,this.S_=r,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new k9(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ct.RESOURCE_EXHAUSTED?(nh(t.toString()),nh("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ct.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new Xt(ct.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ut(kz,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Ut(kz,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ece extends U9{constructor(e,t,i,r,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,s),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Pue(this.serializer,e),i=(function(a){if(!("targetChange"in a))return _n.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?_n.min():s.readTime?kc(s.readTime):_n.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=vN(this.serializer),t.addTarget=(function(a,s){let l;const c=s.target;if(l=hN(c)?{documents:Oue(a,c)}:{query:Due(a,c).ft},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=E9(a,s.resumeToken);const f=pN(a,s.expectedCount);f!==null&&(l.expectedCount=f)}else if(s.snapshotVersion.compareTo(_n.min())>0){l.readTime=nT(a,s.snapshotVersion.toTimestamp());const f=pN(a,s.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,e);const i=kue(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=vN(this.serializer),t.removeTarget=e,this.K_(t)}}class Tce extends U9{constructor(e,t,i,r,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,s),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return vi(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,vi(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){vi(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Nue(e.writeResults,e.commitTime),i=kc(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=vN(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Rue(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ace{}class Mce extends Ace{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Xt(ct.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Wo(e,mN(t,i),r,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Xt(ct.UNKNOWN,a.toString())}))}jo(e,t,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,l])=>this.connection.jo(e,mN(t,i),r,s,l,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Xt(ct.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Cce(n,e,t,i){return new Mce(n,e,t,i)}class Ice{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(nh(t),this.aa=!1):Ut("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="RemoteStore";class Pce{constructor(e,t,i,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((s=>{i.enqueueAndForget((async()=>{cg(this)&&(Ut($m,"Restarting streams for network reachability change."),await(async function(c){const f=wn(c);f.Ea.add(4),await wx(f),f.Va.set("Unknown"),f.Ea.delete(4),await tM(f)})(this))}))})),this.Va=new Ice(i,r)}}async function tM(n){if(cg(n))for(const e of n.Ra)await e(!0)}async function wx(n){for(const e of n.Ra)await e(!1)}function z9(n,e){const t=wn(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),WD(t)?GD(t):Gy(t).O_()&&HD(t,e))}function jD(n,e){const t=wn(n),i=Gy(t);t.Ia.delete(e),i.O_()&&F9(t,e),t.Ia.size===0&&(i.O_()?i.L_():cg(t)&&t.Va.set("Unknown"))}function HD(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_n.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Gy(n).Z_(e)}function F9(n,e){n.da.$e(e),Gy(n).X_(e)}function GD(n){n.da=new wue({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Gy(n).start(),n.Va.ua()}function WD(n){return cg(n)&&!Gy(n).x_()&&n.Ia.size>0}function cg(n){return wn(n).Ea.size===0}function B9(n){n.da=void 0}async function Rce(n){n.Va.set("Online")}async function Nce(n){n.Ia.forEach(((e,t)=>{HD(n,e)}))}async function Oce(n,e){B9(n),WD(n)?(n.Va.ha(e),GD(n)):n.Va.set("Unknown")}async function Dce(n,e,t){if(n.Va.set("Online"),e instanceof w9&&e.state===2&&e.cause)try{await(async function(r,a){const s=a.cause;for(const l of a.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,s),r.Ia.delete(l),r.da.removeTarget(l))})(n,e)}catch(i){Ut($m,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await rT(n,i)}else if(e instanceof Lw?n.da.Xe(e):e instanceof S9?n.da.st(e):n.da.tt(e),!t.isEqual(_n.min()))try{const i=await L9(n.localStore);t.compareTo(i)>=0&&await(function(a,s){const l=a.da.Tt(s);return l.targetChanges.forEach(((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const p=a.Ia.get(f);p&&a.Ia.set(f,p.withResumeToken(c.resumeToken,s))}})),l.targetMismatches.forEach(((c,f)=>{const p=a.Ia.get(c);if(!p)return;a.Ia.set(c,p.withResumeToken(es.EMPTY_BYTE_STRING,p.snapshotVersion)),F9(a,c);const g=new Od(p.target,c,f,p.sequenceNumber);HD(a,g)})),a.remoteSyncer.applyRemoteEvent(l)})(n,t)}catch(i){Ut($m,"Failed to raise snapshot:",i),await rT(n,i)}}async function rT(n,e,t){if(!Hy(e))throw e;n.Ea.add(1),await wx(n),n.Va.set("Offline"),t||(t=()=>L9(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ut($m,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await tM(n)}))}function V9(n,e){return e().catch((t=>rT(n,t,e)))}async function nM(n){const e=wn(n),t=Qd(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:MD;for(;Lce(e);)try{const r=await mce(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,kce(e,r)}catch(r){await rT(e,r)}j9(e)&&H9(e)}function Lce(n){return cg(n)&&n.Ta.length<10}function kce(n,e){n.Ta.push(e);const t=Qd(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function j9(n){return cg(n)&&!Qd(n).x_()&&n.Ta.length>0}function H9(n){Qd(n).start()}async function Uce(n){Qd(n).ra()}async function zce(n){const e=Qd(n);for(const t of n.Ta)e.ea(t.mutations)}async function Fce(n,e,t){const i=n.Ta.shift(),r=LD.from(i,e,t);await V9(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await nM(n)}async function Bce(n,e){e&&Qd(n).Y_&&await(async function(i,r){if((function(s){return bue(s)&&s!==ct.ABORTED})(r.code)){const a=i.Ta.shift();Qd(i).B_(),await V9(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await nM(i)}})(n,e),j9(n)&&H9(n)}async function Uz(n,e){const t=wn(n);t.asyncQueue.verifyOperationInProgress(),Ut($m,"RemoteStore received new credentials");const i=cg(t);t.Ea.add(3),await wx(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await tM(t)}async function Vce(n,e){const t=wn(n);e?(t.Ea.delete(2),await tM(t)):e||(t.Ea.add(2),await wx(t),t.Va.set("Unknown"))}function Gy(n){return n.ma||(n.ma=(function(t,i,r){const a=wn(t);return a.sa(),new Ece(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:Rce.bind(null,n),Yo:Nce.bind(null,n),t_:Oce.bind(null,n),J_:Dce.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),WD(n)?GD(n):n.Va.set("Unknown")):(await n.ma.stop(),B9(n))}))),n.ma}function Qd(n){return n.fa||(n.fa=(function(t,i,r){const a=wn(t);return a.sa(),new Tce(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Uce.bind(null,n),t_:Bce.bind(null,n),ta:zce.bind(null,n),na:Fce.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await nM(n)):(await n.fa.stop(),n.Ta.length>0&&(Ut($m,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,t,i,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new Nm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,a){const s=Date.now()+i,l=new qD(e,t,s,r,a);return l.start(i),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xt(ct.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $D(n,e){if(nh("AsyncQueue",`${e}: ${n}`),Hy(n))return new Xt(ct.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{static emptySet(e){return new Jv(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||nn.comparator(t.key,i.key):(t,i)=>nn.comparator(t.key,i.key),this.keyedMap=q_(),this.sortedSet=new gr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Jv;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zz{constructor(){this.ga=new gr(nn.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):hn(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ey{constructor(e,t,i,r,a,s,l,c,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,r,a){const s=[];return t.forEach((l=>{s.push({type:0,doc:l})})),new Ey(e,t,Jv.emptySet(t),s,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&YA(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jce{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class Hce{constructor(){this.queries=Fz(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=wn(t),a=r.queries;r.queries=Fz(),a.forEach(((s,l)=>{for(const c of l.ba)c.onError(i)}))})(this,new Xt(ct.ABORTED,"Firestore shutting down"))}}function Fz(){return new ug((n=>u9(n)),YA)}async function Gce(n,e){const t=wn(n);let i=3;const r=e.query;let a=t.queries.get(r);a?!a.Sa()&&e.Da()&&(i=2):(a=new jce,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(r,!0);break;case 1:a.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(s){const l=$D(s,`Initialization of query '${Fv(e.query)}' failed`);return void e.onError(l)}t.queries.set(r,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&XD(t)}async function Wce(n,e){const t=wn(n),i=e.query;let r=3;const a=t.queries.get(i);if(a){const s=a.ba.indexOf(e);s>=0&&(a.ba.splice(s,1),a.ba.length===0?r=e.Da()?0:1:!a.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function qce(n,e){const t=wn(n);let i=!1;for(const r of e){const a=r.query,s=t.queries.get(a);if(s){for(const l of s.ba)l.Fa(r)&&(i=!0);s.wa=r}}i&&XD(t)}function $ce(n,e,t){const i=wn(n),r=i.queries.get(e);if(r)for(const a of r.ba)a.onError(t);i.queries.delete(e)}function XD(n){n.Ca.forEach((e=>{e.next()}))}var bN,Bz;(Bz=bN||(bN={})).Ma="default",Bz.Cache="cache";class Xce{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ey(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ey.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==bN.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(e){this.key=e}}class W9{constructor(e){this.key=e}}class Yce{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Yn(),this.mutatedKeys=Yn(),this.eu=c9(e),this.tu=new Jv(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new zz,r=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,s=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((p,g)=>{const v=r.get(p),_=KA(this.query,g)?g:null,x=!!v&&this.mutatedKeys.has(v.key),T=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let S=!1;v&&_?v.data.isEqual(_.data)?x!==T&&(i.track({type:3,doc:_}),S=!0):this.su(v,_)||(i.track({type:2,doc:_}),S=!0,(c&&this.eu(_,c)>0||f&&this.eu(_,f)<0)&&(l=!0)):!v&&_?(i.track({type:0,doc:_}),S=!0):v&&!_&&(i.track({type:1,doc:v}),S=!0,(c||f)&&(l=!0)),S&&(_?(s=s.add(_),a=T?a.add(p):a.delete(p)):(s=s.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const p=this.query.limitType==="F"?s.last():s.first();s=s.delete(p.key),a=a.delete(p.key),i.track({type:1,doc:p})}return{tu:s,iu:i,Ss:l,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((p,g)=>(function(_,x){const T=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return hn(20277,{Vt:S})}};return T(_)-T(x)})(p.type,g.type)||this.eu(p.doc,g.doc))),this.ou(i),r=r??!1;const l=t&&!r?this._u():[],c=this.Ya.size===0&&this.current&&!r?1:0,f=c!==this.Xa;return this.Xa=c,s.length!==0||f?{snapshot:new Ey(this.query,e.tu,a,s,e.mutatedKeys,c===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zz,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Yn(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new W9(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new G9(i))})),t}cu(e){this.Za=e.ks,this.Ya=Yn();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ey.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const YD="SyncEngine";class Kce{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Zce{constructor(e){this.key=e,this.hu=!1}}class Qce{constructor(e,t,i,r,a,s){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new ug((l=>u9(l)),YA),this.Iu=new Map,this.Eu=new Set,this.Ru=new gr(nn.comparator),this.Au=new Map,this.Vu=new zD,this.du={},this.mu=new Map,this.fu=wy.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Jce(n,e,t=!0){const i=Z9(n);let r;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await q9(i,e,t,!0),r}async function efe(n,e){const t=Z9(n);await q9(t,e,!0,!1)}async function q9(n,e,t,i){const r=await gce(n.localStore,Lc(e)),a=r.targetId,s=n.sharedClientState.addLocalQueryTarget(a,t);let l;return i&&(l=await tfe(n,e,a,s==="current",r.resumeToken)),n.isPrimaryClient&&t&&z9(n.remoteStore,r),l}async function tfe(n,e,t,i,r){n.pu=(g,v,_)=>(async function(T,S,w,I){let R=S.view.ru(w);R.Ss&&(R=await Nz(T.localStore,S.query,!1).then((({documents:L})=>S.view.ru(L,R))));const O=I&&I.targetChanges.get(S.targetId),F=I&&I.targetMismatches.get(S.targetId)!=null,B=S.view.applyChanges(R,T.isPrimaryClient,O,F);return jz(T,S.targetId,B.au),B.snapshot})(n,g,v,_);const a=await Nz(n.localStore,e,!0),s=new Yce(e,a.ks),l=s.ru(a.documents),c=Sx.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),f=s.applyChanges(l,n.isPrimaryClient,c);jz(n,t,f.au);const p=new Kce(e,t,s);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function nfe(n,e,t){const i=wn(n),r=i.Tu.get(e),a=i.Iu.get(r.targetId);if(a.length>1)return i.Iu.set(r.targetId,a.filter((s=>!YA(s,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await yN(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&jD(i.remoteStore,r.targetId),xN(i,r.targetId)})).catch(jy)):(xN(i,r.targetId),await yN(i.localStore,r.targetId,!0))}async function ife(n,e){const t=wn(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),jD(t.remoteStore,i.targetId))}async function rfe(n,e,t){const i=ffe(n);try{const r=await(function(s,l){const c=wn(s),f=Yi.now(),p=l.reduce(((_,x)=>_.add(x.key)),Yn());let g,v;return c.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let x=ih(),T=Yn();return c.xs.getEntries(_,p).next((S=>{x=S,x.forEach(((w,I)=>{I.isValidDocument()||(T=T.add(w))}))})).next((()=>c.localDocuments.getOverlayedDocuments(_,x))).next((S=>{g=S;const w=[];for(const I of l){const R=mue(I,g.get(I.key).overlayedDocument);R!=null&&w.push(new op(I.key,R,n9(R.value.mapValue),Pu.exists(!0)))}return c.mutationQueue.addMutationBatch(_,f,w,l)})).next((S=>{v=S;const w=S.applyToLocalDocumentSet(g,T);return c.documentOverlayCache.saveOverlays(_,S.batchId,w)}))})).then((()=>({batchId:v.batchId,changes:h9(g)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(s,l,c){let f=s.du[s.currentUser.toKey()];f||(f=new gr(Xn)),f=f.insert(l,c),s.du[s.currentUser.toKey()]=f})(i,r.batchId,t),await Ex(i,r.changes),await nM(i.remoteStore)}catch(r){const a=$D(r,"Failed to persist write");t.reject(a)}}async function $9(n,e){const t=wn(n);try{const i=await dce(t.localStore,e);e.targetChanges.forEach(((r,a)=>{const s=t.Au.get(a);s&&(vi(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?s.hu=!0:r.modifiedDocuments.size>0?vi(s.hu,14607):r.removedDocuments.size>0&&(vi(s.hu,42227),s.hu=!1))})),await Ex(t,i,e)}catch(i){await jy(i)}}function Vz(n,e,t){const i=wn(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((a,s)=>{const l=s.view.va(e);l.snapshot&&r.push(l.snapshot)})),(function(s,l){const c=wn(s);c.onlineState=l;let f=!1;c.queries.forEach(((p,g)=>{for(const v of g.ba)v.va(l)&&(f=!0)})),f&&XD(c)})(i.eventManager,e),r.length&&i.Pu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function afe(n,e,t){const i=wn(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),a=r&&r.key;if(a){let s=new gr(nn.comparator);s=s.insert(a,Ss.newNoDocument(a,_n.min()));const l=Yn().add(a),c=new JA(_n.min(),new Map,new gr(Xn),s,l);await $9(i,c),i.Ru=i.Ru.remove(a),i.Au.delete(e),KD(i)}else await yN(i.localStore,e,!1).then((()=>xN(i,e,t))).catch(jy)}async function sfe(n,e){const t=wn(n),i=e.batch.batchId;try{const r=await hce(t.localStore,e);Y9(t,i,null),X9(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ex(t,r)}catch(r){await jy(r)}}async function ofe(n,e,t){const i=wn(n);try{const r=await(function(s,l){const c=wn(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return c.mutationQueue.lookupMutationBatch(f,l).next((g=>(vi(g!==null,37113),p=g.keys(),c.mutationQueue.removeMutationBatch(f,g)))).next((()=>c.mutationQueue.performConsistencyCheck(f))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(f,p,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>c.localDocuments.getDocuments(f,p)))}))})(i.localStore,e);Y9(i,e,t),X9(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ex(i,r)}catch(r){await jy(r)}}function X9(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Y9(n,e,t){const i=wn(n);let r=i.du[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(t?a.reject(t):a.resolve(),r=r.remove(e)),i.du[i.currentUser.toKey()]=r}}function xN(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||K9(n,i)}))}function K9(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(jD(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),KD(n))}function jz(n,e,t){for(const i of t)i instanceof G9?(n.Vu.addReference(i.key,e),lfe(n,i)):i instanceof W9?(Ut(YD,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||K9(n,i.key)):hn(19791,{wu:i})}function lfe(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(Ut(YD,"New document in limbo: "+t),n.Eu.add(i),KD(n))}function KD(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new nn(Xi.fromString(e)),i=n.fu.next();n.Au.set(i,new Zce(t)),n.Ru=n.Ru.insert(t,i),z9(n.remoteStore,new Od(Lc(ND(t.path)),i,"TargetPurposeLimboResolution",WA.ce))}}async function Ex(n,e,t){const i=wn(n),r=[],a=[],s=[];i.Tu.isEmpty()||(i.Tu.forEach(((l,c)=>{s.push(i.pu(c,e,t).then((f=>{var p;if((f||t)&&i.isPrimaryClient){const g=f?!f.fromCache:(p=t==null?void 0:t.targetChanges.get(c.targetId))==null?void 0:p.current;i.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(f){r.push(f);const g=BD.Es(c.targetId,f);a.push(g)}})))})),await Promise.all(s),i.Pu.J_(r),await(async function(c,f){const p=wn(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>st.forEach(f,(v=>st.forEach(v.Ts,(_=>p.persistence.referenceDelegate.addReference(g,v.targetId,_))).next((()=>st.forEach(v.Is,(_=>p.persistence.referenceDelegate.removeReference(g,v.targetId,_)))))))))}catch(g){if(!Hy(g))throw g;Ut(VD,"Failed to update sequence numbers: "+g)}for(const g of f){const v=g.targetId;if(!g.fromCache){const _=p.vs.get(v),x=_.snapshotVersion,T=_.withLastLimboFreeSnapshotVersion(x);p.vs=p.vs.insert(v,T)}}})(i.localStore,a))}async function ufe(n,e){const t=wn(n);if(!t.currentUser.isEqual(e)){Ut(YD,"User change. New user:",e.toKey());const i=await D9(t.localStore,e);t.currentUser=e,(function(a,s){a.mu.forEach((l=>{l.forEach((c=>{c.reject(new Xt(ct.CANCELLED,s))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ex(t,i.Ns)}}function cfe(n,e){const t=wn(n),i=t.Au.get(e);if(i&&i.hu)return Yn().add(i.key);{let r=Yn();const a=t.Iu.get(e);if(!a)return r;for(const s of a){const l=t.Tu.get(s);r=r.unionWith(l.view.nu)}return r}}function Z9(n){const e=wn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$9.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cfe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=afe.bind(null,e),e.Pu.J_=qce.bind(null,e.eventManager),e.Pu.yu=$ce.bind(null,e.eventManager),e}function ffe(n){const e=wn(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sfe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ofe.bind(null,e),e}class aT{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=eM(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return fce(this.persistence,new lce,e.initialUser,this.serializer)}Cu(e){return new O9(FD.Vi,this.serializer)}Du(e){return new yce}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}aT.provider={build:()=>new aT};class hfe extends aT{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){vi(this.persistence.referenceDelegate instanceof iT,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new $ue(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Mo.withCacheSize(this.cacheSizeBytes):Mo.DEFAULT;return new O9((i=>iT.Vi(i,t)),this.serializer)}}class SN{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Vz(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ufe.bind(null,this.syncEngine),await Vce(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Hce})()}createDatastore(e){const t=eM(e.databaseInfo.databaseId),i=wce(e.databaseInfo);return Cce(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,a,s,l){return new Pce(i,r,a,s,l)})(this.localStore,this.datastore,e.asyncQueue,(t=>Vz(this.syncEngine,t,0)),(function(){return Lz.v()?new Lz:new _ce})())}createSyncEngine(e,t){return(function(r,a,s,l,c,f,p){const g=new Qce(r,a,s,l,c,f);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const a=wn(r);Ut($m,"RemoteStore shutting down."),a.Ea.add(5),await wx(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}SN.provider={build:()=>new SN};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dfe{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):nh("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="FirestoreClient";class pfe{constructor(e,t,i,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=r,this.user=xs.UNAUTHENTICATED,this.clientId=TD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async s=>{Ut(Jd,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,(s=>(Ut(Jd,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=$D(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function qI(n,e){n.asyncQueue.verifyOperationInProgress(),Ut(Jd,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await D9(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Hz(n,e){n.asyncQueue.verifyOperationInProgress();const t=await mfe(n);Ut(Jd,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>Uz(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>Uz(e.remoteStore,r))),n._onlineComponents=e}async function mfe(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ut(Jd,"Using user provided OfflineComponentProvider");try{await qI(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ct.FAILED_PRECONDITION||r.code===ct.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;_y("Error using user provided cache. Falling back to memory cache: "+t),await qI(n,new aT)}}else Ut(Jd,"Using default OfflineComponentProvider"),await qI(n,new hfe(void 0));return n._offlineComponents}async function Q9(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ut(Jd,"Using user provided OnlineComponentProvider"),await Hz(n,n._uninitializedComponentsProvider._online)):(Ut(Jd,"Using default OnlineComponentProvider"),await Hz(n,new SN))),n._onlineComponents}function gfe(n){return Q9(n).then((e=>e.syncEngine))}async function Gz(n){const e=await Q9(n),t=e.eventManager;return t.onListen=Jce.bind(null,e.syncEngine),t.onUnlisten=nfe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=efe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ife.bind(null,e.syncEngine),t}function vfe(n,e,t,i){const r=new dfe(i),a=new Xce(e,r,t);return n.asyncQueue.enqueueAndForget((async()=>Gce(await Gz(n),a))),()=>{r.Nu(),n.asyncQueue.enqueueAndForget((async()=>Wce(await Gz(n),a)))}}function yfe(n,e){const t=new Nm;return n.asyncQueue.enqueueAndForget((async()=>rfe(await gfe(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J9(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _fe="ComponentProvider",Wz=new Map;function bfe(n,e,t,i,r){return new Ule(n,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,J9(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eH="firestore.googleapis.com",qz=!0;class $z{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Xt(ct.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eH,this.ssl=qz}else this.host=e.host,this.ssl=e.ssl??qz;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=N9;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Wue)throw new Xt(ct.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ale("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=J9(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Xt(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Xt(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Xt(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class iM{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $z({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xt(ct.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Xt(ct.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $z(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new gle;switch(i.type){case"firstParty":return new ble(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Xt(ct.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Wz.get(t);i&&(Ut(_fe,"Removing Datastore"),Wz.delete(t),i.terminate())})(this),Promise.resolve()}}function xfe(n,e,t,i={}){var f;n=Bd(n,iM);const r=Fy(e),a=n._getSettings(),s={...a,emulatorOptions:n._getEmulatorOptions()},l=`${e}:${t}`;r&&(I8(`https://${l}`),P8("Firestore",!0)),a.host!==eH&&a.host!==l&&_y("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:l,ssl:r,emulatorOptions:i};if(!Gm(c,s)&&(n._setSettings(c),i.mockUserToken)){let p,g;if(typeof i.mockUserToken=="string")p=i.mockUserToken,g=xs.MOCK_USER;else{p=Bse(i.mockUserToken,(f=n._app)==null?void 0:f.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new Xt(ct.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new xs(v)}n._authCredentials=new vle(new G8(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new rM(this.firestore,e,this._query)}}class ia{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ia(this.firestore,e,this._key)}toJSON(){return{type:ia._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(bx(t,ia._jsonSchema))return new ia(e,i||null,new nn(Xi.fromString(t.referencePath)))}}ia._jsonSchemaVersion="firestore/documentReference/1.0",ia._jsonSchema={type:Gr("string",ia._jsonSchemaVersion),referencePath:Gr("string")};class Vd extends rM{constructor(e,t,i){super(e,t,ND(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ia(this.firestore,null,new nn(e))}withConverter(e){return new Vd(this.firestore,e,this._path)}}function $I(n,e,...t){if(n=Ja(n),W8("collection","path",e),n instanceof iM){const i=Xi.fromString(e,...t);return sz(i),new Vd(n,null,i)}{if(!(n instanceof ia||n instanceof Vd))throw new Xt(ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Xi.fromString(e,...t));return sz(i),new Vd(n.firestore,null,i)}}function jv(n,e,...t){if(n=Ja(n),arguments.length===1&&(e=TD.newId()),W8("doc","path",e),n instanceof iM){const i=Xi.fromString(e,...t);return az(i),new ia(n,null,new nn(i))}{if(!(n instanceof ia||n instanceof Vd))throw new Xt(ct.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Xi.fromString(e,...t));return az(i),new ia(n.firestore,n instanceof Vd?n.converter:null,new nn(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xz="AsyncQueue";class Yz{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new k9(this,"async_queue_retry"),this._c=()=>{const i=WI();i&&Ut(Xz,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=WI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=WI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Nm;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Hy(e))throw e;Ut(Xz,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,nh("INTERNAL UNHANDLED ERROR: ",Kz(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=qD.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&hn(47125,{Pc:Kz(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Kz(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ty extends iM{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new Yz,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yz(e),this._firestoreClient=void 0,await e}}}function Sfe(n,e){const t=typeof n=="object"?n:D8(),i=typeof n=="string"?n:KE,r=wD(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=zse("firestore");a&&xfe(r,...a)}return r}function tH(n){if(n._terminated)throw new Xt(ct.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||wfe(n),n._firestoreClient}function wfe(n){var i,r,a,s;const e=n._freezeSettings(),t=bfe(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(r=n._app)==null?void 0:r.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new pfe(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(c){const f=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zl(es.fromBase64String(e))}catch(t){throw new Xt(ct.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zl(es.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bx(e,zl._jsonSchema))return zl.fromBase64String(e.bytes)}}zl._jsonSchemaVersion="firestore/bytes/1.0",zl._jsonSchema={type:Gr("string",zl._jsonSchemaVersion),bytes:Gr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Xt(ct.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ya(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Xt(ct.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Xt(ct.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xn(this._lat,e._lat)||Xn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Uc._jsonSchemaVersion}}static fromJSON(e){if(bx(e,Uc._jsonSchema))return new Uc(e.latitude,e.longitude)}}Uc._jsonSchemaVersion="firestore/geoPoint/1.0",Uc._jsonSchema={type:Gr("string",Uc._jsonSchemaVersion),latitude:Gr("number"),longitude:Gr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ru._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bx(e,Ru._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ru(e.vectorValues);throw new Xt(ct.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ru._jsonSchemaVersion="firestore/vectorValue/1.0",Ru._jsonSchema={type:Gr("string",Ru._jsonSchemaVersion),vectorValues:Gr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Efe=/^__.*__$/;class Tfe{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new op(e,this.data,this.fieldMask,t,this.fieldTransforms):new xx(e,this.data,t,this.fieldTransforms)}}class nH{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new op(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function iH(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw hn(40011,{dataSource:n})}}class JD{constructor(e,t,i,r,a,s){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new JD({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return sT(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(iH(this.dataSource)&&Efe.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Afe{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||eM(e)}createContext(e,t,i,r=!1){return new JD({dataSource:e,methodName:t,targetDoc:i,path:Ya.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rH(n){const e=n._freezeSettings(),t=eM(n._databaseId);return new Afe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Mfe(n,e,t,i,r,a={}){const s=n.createContext(a.merge||a.mergeFields?2:0,e,t,r);e3("Data must be an object, but it was:",s,i);const l=aH(i,s);let c,f;if(a.merge)c=new Qo(s.fieldMask),f=s.fieldTransforms;else if(a.mergeFields){const p=[];for(const g of a.mergeFields){const v=jb(e,g,t);if(!s.contains(v))throw new Xt(ct.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);lH(p,v)||p.push(v)}c=new Qo(p),f=s.fieldTransforms.filter((g=>c.covers(g.field)))}else c=null,f=s.fieldTransforms;return new Tfe(new Io(l),c,f)}class aM extends QD{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof aM}}function Cfe(n,e,t,i){const r=n.createContext(1,e,t);e3("Data must be an object, but it was:",r,i);const a=[],s=Io.empty();sp(i,((c,f)=>{const p=oH(e,c,t);f=Ja(f);const g=r.childContextForFieldPath(p);if(f instanceof aM)a.push(p);else{const v=sM(f,g);v!=null&&(a.push(p),s.set(p,v))}}));const l=new Qo(a);return new nH(s,l,r.fieldTransforms)}function Ife(n,e,t,i,r,a){const s=n.createContext(1,e,t),l=[jb(e,i,t)],c=[r];if(a.length%2!=0)throw new Xt(ct.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)l.push(jb(e,a[v])),c.push(a[v+1]);const f=[],p=Io.empty();for(let v=l.length-1;v>=0;--v)if(!lH(f,l[v])){const _=l[v];let x=c[v];x=Ja(x);const T=s.childContextForFieldPath(_);if(x instanceof aM)f.push(_);else{const S=sM(x,T);S!=null&&(f.push(_),p.set(_,S))}}const g=new Qo(f);return new nH(p,g,s.fieldTransforms)}function sM(n,e){if(sH(n=Ja(n)))return e3("Unsupported field value:",e,n),aH(n,e);if(n instanceof QD)return(function(i,r){if(!iH(r.dataSource))throw r.createError(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,r){const a=[];let s=0;for(const l of i){let c=sM(l,r.childContextForArray(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}})(n,e)}return(function(i,r){if((i=Ja(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return uue(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Yi.fromDate(i);return{timestampValue:nT(r.serializer,a)}}if(i instanceof Yi){const a=new Yi(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:nT(r.serializer,a)}}if(i instanceof Uc)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof zl)return{bytesValue:E9(r.serializer,i._byteString)};if(i instanceof ia){const a=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(a))throw r.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:UD(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Ru)return(function(s,l){const c=s instanceof Ru?s.toArray():s;return{mapValue:{fields:{[e9]:{stringValue:t9},[ZE]:{arrayValue:{values:c.map((p=>{if(typeof p!="number")throw l.createError("VectorValues must only contain numeric values.");return OD(l.serializer,p)}))}}}}}})(i,r);if(R9(i))return i._toProto(r.serializer);throw r.createError(`Unsupported field value: ${AD(i)}`)})(n,e)}function aH(n,e){const t={};return X8(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sp(n,((i,r)=>{const a=sM(r,e.childContextForField(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function sH(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Yi||n instanceof Uc||n instanceof zl||n instanceof ia||n instanceof QD||n instanceof Ru||R9(n))}function e3(n,e,t){if(!sH(t)||!q8(t)){const i=AD(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function jb(n,e,t){if((e=Ja(e))instanceof ZD)return e._internalPath;if(typeof e=="string")return oH(n,e);throw sT("Field path arguments must be of type string or ",n,!1,void 0,t)}const Pfe=new RegExp("[~\\*/\\[\\]]");function oH(n,e,t){if(e.search(Pfe)>=0)throw sT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ZD(...e.split("."))._internalPath}catch{throw sT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sT(n,e,t,i,r){const a=i&&!i.isEmpty(),s=r!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${i}`),s&&(c+=` in document ${r}`),c+=")"),new Xt(ct.INVALID_ARGUMENT,l+n+c)}function lH(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rfe{convertValue(e,t="none"){switch(Zd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Kd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw hn(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return sp(e,((r,a)=>{i[r]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,r,a;const t=(a=(r=(i=e.fields)==null?void 0:i[ZE].arrayValue)==null?void 0:r.values)==null?void 0:a.map((s=>Nr(s.doubleValue)));return new Ru(t)}convertGeoPoint(e){return new Uc(Nr(e.latitude),Nr(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=$A(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ub(e));default:return null}}convertTimestamp(e){const t=Yd(e);return new Yi(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Xi.fromString(e);vi(P9(i),9688,{name:e});const r=new zb(i.get(1),i.get(3)),a=new nn(i.popFirst(5));return r.isEqual(t)||nh(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uH extends Rfe{constructor(e){super(),this.firestore=e}convertBytes(e){return new zl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ia(this.firestore,null,t)}}const Zz="@firebase/firestore",Qz="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jz(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const a of i)if(a in r&&typeof r[a]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(e,t,i,r,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ia(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Nfe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(jb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Nfe extends cH{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ofe(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Xt(ct.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function Dfe(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class X_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Om extends cH{constructor(e,t,i,r,a,s){super(e,t,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(jb("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(ct.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Om._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Om._jsonSchemaVersion="firestore/documentSnapshot/1.0",Om._jsonSchema={type:Gr("string",Om._jsonSchemaVersion),bundleSource:Gr("string","DocumentSnapshot"),bundleName:Gr("string"),bundle:Gr("string")};class kw extends Om{data(e={}){return super.data(e)}}class ey{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new X_(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new kw(this._firestore,this._userDataWriter,i.key,i,new X_(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Xt(ct.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map((l=>{const c=new kw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new X_(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((l=>a||l.type!==3)).map((l=>{const c=new kw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new X_(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,p=-1;return l.type!==0&&(f=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),p=s.indexOf(l.doc.key)),{type:Lfe(l.type),doc:c,oldIndex:f,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(ct.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ey._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=TD.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Lfe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return hn(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ey._jsonSchemaVersion="firestore/querySnapshot/1.0",ey._jsonSchema={type:Gr("string",ey._jsonSchemaVersion),bundleSource:Gr("string","QuerySnapshot"),bundleName:Gr("string"),bundle:Gr("string")};function lw(n,e,t,...i){n=Bd(n,ia);const r=Bd(n.firestore,Ty),a=rH(r);let s;return s=typeof(e=Ja(e))=="string"||e instanceof ZD?Ife(a,"updateDoc",n._key,e,t,i):Cfe(a,"updateDoc",n._key,e),t3(r,[s.toMutation(n._key,Pu.exists(!0))])}function kfe(n){return t3(Bd(n.firestore,Ty),[new DD(n._key,Pu.none())])}function XI(n,e){const t=Bd(n.firestore,Ty),i=jv(n),r=Dfe(n.converter,e),a=rH(n.firestore);return t3(t,[Mfe(a,"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Pu.exists(!1))]).then((()=>i))}function YI(n,...e){var f,p,g;n=Ja(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Jz(e[i])||(t=e[i++]);const r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Jz(e[i])){const v=e[i];e[i]=(f=v.next)==null?void 0:f.bind(v),e[i+1]=(p=v.error)==null?void 0:p.bind(v),e[i+2]=(g=v.complete)==null?void 0:g.bind(v)}let a,s,l;if(n instanceof ia)s=Bd(n.firestore,Ty),l=ND(n._key.path),a={next:v=>{e[i]&&e[i](Ufe(s,n,v))},error:e[i+1],complete:e[i+2]};else{const v=Bd(n,rM);s=Bd(v.firestore,Ty),l=v._query;const _=new uH(s);a={next:x=>{e[i]&&e[i](new ey(s,_,v,x))},error:e[i+1],complete:e[i+2]},Ofe(n._query)}const c=tH(s);return vfe(c,l,r,a)}function t3(n,e){const t=tH(n);return yfe(t,e)}function Ufe(n,e,t){const i=t.docs.get(e._key),r=new uH(n);return new Om(n,r,e._key,i,new X_(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){mle(By),yy(new Wm("firestore",((i,{instanceIdentifier:r,options:a})=>{const s=i.getProvider("app").getImmediate(),l=new Ty(new yle(i.getProvider("auth-internal")),new xle(s,i.getProvider("app-check-internal")),zle(s,r),s);return a={useFetchStreams:t,...a},l._setSettings(a),l}),"PUBLIC").setMultipleInstances(!0)),zd(Zz,Qz,e),zd(Zz,Qz,"esm2020")})();function fH(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zfe=fH,hH=new yx("auth","Firebase",fH());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=new xD("@firebase/auth");function Ffe(n,...e){oT.logLevel<=$n.WARN&&oT.warn(`Auth (${By}): ${n}`,...e)}function Uw(n,...e){oT.logLevel<=$n.ERROR&&oT.error(`Auth (${By}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(n,...e){throw i3(n,...e)}function Nu(n,...e){return i3(n,...e)}function n3(n,e,t){const i={...zfe(),[e]:t};return new yx("auth","Firebase",i).create(e,{appName:n.name})}function Dm(n){return n3(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bfe(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&qc(n,"argument-error"),n3(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function i3(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return hH.create(n,...e)}function mn(n,e,...t){if(!n)throw i3(e,...t)}function qf(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Uw(e),new Error(e)}function rh(n,e){n||qf(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function Vfe(){return eF()==="http:"||eF()==="https:"}function eF(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jfe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Vfe()||qse()||"connection"in navigator)?navigator.onLine:!0}function Hfe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t){this.shortDelay=e,this.longDelay=t,rh(t>e,"Short delay should be less than long delay!"),this.isMobile=Hse()||$se()}get(){return jfe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(n,e){rh(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gfe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wfe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qfe=new Tx(3e4,6e4);function a3(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Wy(n,e,t,i,r={}){return pH(n,r,async()=>{let a={},s={};i&&(e==="GET"?s=i:a={body:JSON.stringify(i)});const l=_x({key:n.config.apiKey,...s}).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:c,...a};return Wse()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Fy(n.emulatorConfig.host)&&(f.credentials="include"),dH.fetch()(await mH(n,n.config.apiHost,t,l),f)})}async function pH(n,e,t){n._canInitEmulator=!1;const i={...Gfe,...e};try{const r=new Xfe(n),a=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw uw(n,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const l=a.ok?s.errorMessage:s.error.message,[c,f]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw uw(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw uw(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw uw(n,"user-disabled",s);const p=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw n3(n,p,f);qc(n,p)}}catch(r){if(r instanceof fh)throw r;qc(n,"network-request-failed",{message:String(r)})}}async function $fe(n,e,t,i,r={}){const a=await Wy(n,e,t,i,r);return"mfaPendingCredential"in a&&qc(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function mH(n,e,t,i){const r=`${e}${t}?${i}`,a=n,s=a.config.emulator?r3(n.config,r):`${n.config.apiScheme}://${r}`;return Wfe.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}class Xfe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Nu(this.auth,"network-request-failed")),qfe.get())})}}function uw(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=Nu(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yfe(n,e){return Wy(n,"POST","/v1/accounts:delete",e)}async function lT(n,e){return Wy(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Kfe(n,e=!1){const t=Ja(n),i=await t.getIdToken(e),r=s3(i);mn(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:r,token:i,authTime:db(KI(r.auth_time)),issuedAtTime:db(KI(r.iat)),expirationTime:db(KI(r.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function KI(n){return Number(n)*1e3}function s3(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Uw("JWT malformed, contained fewer than 3 sections"),null;try{const r=T8(t);return r?JSON.parse(r):(Uw("Failed to decode base64 JWT payload"),null)}catch(r){return Uw("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function tF(n){const e=s3(n);return mn(e,"internal-error"),mn(typeof e.exp<"u","internal-error"),mn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hb(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof fh&&Zfe(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function Zfe({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qfe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=db(this.lastLoginAt),this.creationTime=db(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uT(n){var g;const e=n.auth,t=await n.getIdToken(),i=await Hb(n,lT(e,{idToken:t}));mn(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const a=(g=r.providerUserInfo)!=null&&g.length?gH(r.providerUserInfo):[],s=ehe(n.providerData,a),l=n.isAnonymous,c=!(n.email&&r.passwordHash)&&!(s!=null&&s.length),f=l?c:!1,p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new EN(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function Jfe(n){const e=Ja(n);await uT(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ehe(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function gH(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function the(n,e){const t=await pH(n,{},async()=>{const i=_x({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=n.config,s=await mH(n,r,"/v1/token",`key=${a}`),l=await n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:i};return n.emulatorConfig&&Fy(n.emulatorConfig.host)&&(c.credentials="include"),dH.fetch()(s,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function nhe(n,e){return Wy(n,"POST","/v2/accounts:revokeToken",a3(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){mn(e.idToken,"internal-error"),mn(typeof e.idToken<"u","internal-error"),mn(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){mn(e.length!==0,"internal-error");const t=tF(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(mn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:a}=await the(e,t);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:a}=t,s=new ty;return i&&(mn(typeof i=="string","internal-error",{appName:e}),s.refreshToken=i),r&&(mn(typeof r=="string","internal-error",{appName:e}),s.accessToken=r),a&&(mn(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ty,this.toJSON())}_performRefresh(){return qf("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(n,e){mn(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Cu{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new Qfe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new EN(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Hb(this,this.stsTokenManager.getToken(this.auth,e));return mn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Kfe(this,e)}reload(){return Jfe(this)}_assign(e){this!==e&&(mn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Cu({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){mn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await uT(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wu(this.auth.app))return Promise.reject(Dm(this.auth));const e=await this.getIdToken();return await Hb(this,Yfe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,a=t.phoneNumber??void 0,s=t.photoURL??void 0,l=t.tenantId??void 0,c=t._redirectEventId??void 0,f=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:_,providerData:x,stsTokenManager:T}=t;mn(g&&T,e,"internal-error");const S=ty.fromJSON(this.name,T);mn(typeof g=="string",e,"internal-error"),yd(i,e.name),yd(r,e.name),mn(typeof v=="boolean",e,"internal-error"),mn(typeof _=="boolean",e,"internal-error"),yd(a,e.name),yd(s,e.name),yd(l,e.name),yd(c,e.name),yd(f,e.name),yd(p,e.name);const w=new Cu({uid:g,auth:e,email:r,emailVerified:v,displayName:i,isAnonymous:_,photoURL:s,phoneNumber:a,tenantId:l,stsTokenManager:S,createdAt:f,lastLoginAt:p});return x&&Array.isArray(x)&&(w.providerData=x.map(I=>({...I}))),c&&(w._redirectEventId=c),w}static async _fromIdTokenResponse(e,t,i=!1){const r=new ty;r.updateFromServerResponse(t);const a=new Cu({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await uT(a),a}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];mn(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?gH(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),l=new ty;l.updateFromIdToken(i);const c=new Cu({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:s}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new EN(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF=new Map;function $f(n){rh(n instanceof Function,"Expected a class definition");let e=nF.get(n);return e?(rh(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,nF.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vH{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vH.type="NONE";const iF=vH;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(n,e,t){return`firebase:${n}:${e}:${t}`}class ny{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=zw(this.userKey,r.apiKey,a),this.fullPersistenceKey=zw("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await lT(this.auth,{idToken:e}).catch(()=>{});return t?Cu._fromGetAccountInfoResponse(this.auth,t,e):null}return Cu._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ny($f(iF),e,i);const r=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=r[0]||$f(iF);const s=zw(i,e.config.apiKey,e.name);let l=null;for(const f of t)try{const p=await f._get(s);if(p){let g;if(typeof p=="string"){const v=await lT(e,{idToken:p}).catch(()=>{});if(!v)break;g=await Cu._fromGetAccountInfoResponse(e,v,p)}else g=Cu._fromJSON(e,p);f!==a&&(l=g),a=f;break}}catch{}const c=r.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new ny(a,e,i):(a=c[0],l&&await a._set(s,l.toJSON()),await Promise.all(t.map(async f=>{if(f!==a)try{await f._remove(s)}catch{}})),new ny(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xH(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yH(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wH(e))return"Blackberry";if(EH(e))return"Webos";if(_H(e))return"Safari";if((e.includes("chrome/")||bH(e))&&!e.includes("edge/"))return"Chrome";if(SH(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function yH(n=As()){return/firefox\//i.test(n)}function _H(n=As()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bH(n=As()){return/crios\//i.test(n)}function xH(n=As()){return/iemobile/i.test(n)}function SH(n=As()){return/android/i.test(n)}function wH(n=As()){return/blackberry/i.test(n)}function EH(n=As()){return/webos/i.test(n)}function o3(n=As()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ihe(n=As()){var e;return o3(n)&&!!((e=window.navigator)!=null&&e.standalone)}function rhe(){return Xse()&&document.documentMode===10}function TH(n=As()){return o3(n)||SH(n)||EH(n)||wH(n)||/windows phone/i.test(n)||xH(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AH(n,e=[]){let t;switch(n){case"Browser":t=rF(As());break;case"Worker":t=`${rF(As())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${By}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ahe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((s,l)=>{try{const c=e(a);s(c)}catch(c){l(c)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function she(n,e={}){return Wy(n,"GET","/v2/passwordPolicy",a3(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ohe=6;class lhe{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??ohe,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uhe{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aF(this),this.idTokenSubscription=new aF(this),this.beforeStateQueue=new ahe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hH,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$f(t)),this._initializationPromise=this.queue(async()=>{var i,r,a;if(!this._deleted&&(this.persistenceManager=await ny.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await lT(this,{idToken:e}),i=await Cu._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(wu(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(a=this.redirectUser)==null?void 0:a._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===l)&&(c!=null&&c.user)&&(i=c.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return mn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await uT(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Hfe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wu(this.app))return Promise.reject(Dm(this));const t=e?Ja(e):null;return t&&mn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&mn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wu(this.app)?Promise.reject(Dm(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wu(this.app)?Promise.reject(Dm(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($f(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await she(this),t=new lhe(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yx("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await nhe(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&$f(e)||this._popupRedirectResolver;mn(t,this,"argument-error"),this.redirectPersistenceManager=await ny.create(this,[$f(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let s=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(mn(l,this,"internal-error"),l.then(()=>{s||a(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,i,r);return()=>{s=!0,c()}}else{const c=e.addObserver(t);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return mn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AH(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(wu(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&Ffe(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function oM(n){return Ja(n)}class aF{constructor(e){this.auth=e,this.observer=null,this.addObserver=noe(t=>this.observer=t)}get next(){return mn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l3={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function che(n){l3=n}function fhe(n){return l3.loadJS(n)}function hhe(){return l3.gapiScript}function dhe(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function phe(n,e){const t=wD(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),a=t.getOptions();if(Gm(a,e??{}))return r;qc(r,"already-initialized")}return t.initialize({options:e})}function mhe(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map($f);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function ghe(n,e,t){const i=oM(n);mn(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,a=MH(e),{host:s,port:l}=vhe(e),c=l===null?"":`:${l}`,f={url:`${a}//${s}${c}/`},p=Object.freeze({host:s,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){mn(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),mn(Gm(f,i.config.emulator)&&Gm(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,Fy(s)?(I8(`${a}//${s}${c}`),P8("Auth",!0)):yhe()}function MH(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function vhe(n){const e=MH(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:sF(i.substr(a.length+1))}}else{const[a,s]=i.split(":");return{host:a,port:sF(s)}}}function sF(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function yhe(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CH{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qf("not implemented")}_getIdTokenResponse(e){return qf("not implemented")}_linkToIdToken(e,t){return qf("not implemented")}_getReauthenticationResolver(e){return qf("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iy(n,e){return $fe(n,"POST","/v1/accounts:signInWithIdp",a3(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _he="http://localhost";class Xm extends CH{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Xm(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qc("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...a}=t;if(!i||!r)return null;const s=new Xm(i,r);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return iy(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,iy(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,iy(e,t)}buildRequest(){const e={requestUri:_he,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_x(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax extends u3{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td extends Ax{constructor(){super("facebook.com")}static credential(e){return Xm._fromParams({providerId:Td.PROVIDER_ID,signInMethod:Td.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Td.credentialFromTaggedObject(e)}static credentialFromError(e){return Td.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Td.credential(e.oauthAccessToken)}catch{return null}}}Td.FACEBOOK_SIGN_IN_METHOD="facebook.com";Td.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf extends Ax{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Xm._fromParams({providerId:Gf.PROVIDER_ID,signInMethod:Gf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Gf.credentialFromTaggedObject(e)}static credentialFromError(e){return Gf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Gf.credential(t,i)}catch{return null}}}Gf.GOOGLE_SIGN_IN_METHOD="google.com";Gf.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends Ax{constructor(){super("github.com")}static credential(e){return Xm._fromParams({providerId:Ad.PROVIDER_ID,signInMethod:Ad.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ad.credentialFromTaggedObject(e)}static credentialFromError(e){return Ad.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ad.credential(e.oauthAccessToken)}catch{return null}}}Ad.GITHUB_SIGN_IN_METHOD="github.com";Ad.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md extends Ax{constructor(){super("twitter.com")}static credential(e,t){return Xm._fromParams({providerId:Md.PROVIDER_ID,signInMethod:Md.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Md.credentialFromTaggedObject(e)}static credentialFromError(e){return Md.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Md.credential(t,i)}catch{return null}}}Md.TWITTER_SIGN_IN_METHOD="twitter.com";Md.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const a=await Cu._fromIdTokenResponse(e,i,r),s=oF(i);return new Ay({user:a,providerId:s,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=oF(i);return new Ay({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function oF(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT extends fh{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,cT.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new cT(e,t,i,r)}}function IH(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?cT._fromErrorAndOperation(n,a,e,i):a})}async function bhe(n,e,t=!1){const i=await Hb(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ay._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xhe(n,e,t=!1){const{auth:i}=n;if(wu(i.app))return Promise.reject(Dm(i));const r="reauthenticate";try{const a=await Hb(n,IH(i,r,e,n),t);mn(a.idToken,i,"internal-error");const s=s3(a.idToken);mn(s,i,"internal-error");const{sub:l}=s;return mn(n.uid===l,i,"user-mismatch"),Ay._forOperation(n,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&qc(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function She(n,e,t=!1){if(wu(n.app))return Promise.reject(Dm(n));const i="signIn",r=await IH(n,i,e),a=await Ay._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(a.user),a}function whe(n,e,t,i){return Ja(n).onIdTokenChanged(e,t,i)}function Ehe(n,e,t){return Ja(n).beforeAuthStateChanged(e,t)}function The(n,e,t,i){return Ja(n).onAuthStateChanged(e,t,i)}function Ahe(n){return Ja(n).signOut()}const fT="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PH{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(fT,"1"),this.storage.removeItem(fT),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mhe=1e3,Che=10;class RH extends PH{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TH(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,l,c)=>{this.notifyListeners(s,c)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const s=this.storage.getItem(i);!t&&this.localCache[i]===s||this.notifyListeners(i,s)},a=this.storage.getItem(i);rhe()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Che):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Mhe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}RH.type="LOCAL";const Ihe=RH;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NH extends PH{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}NH.type="SESSION";const OH=NH;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Phe(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new lM(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:a}=t.data,s=this.handlersMap[r];if(!(s!=null&&s.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(s).map(async f=>f(t.origin,a)),c=await Phe(l);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lM.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rhe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,s;return new Promise((l,c)=>{const f=c3("",20);r.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},i);s={messageChannel:r,onMessage(g){const v=g;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(v.data.response);break;default:clearTimeout(p),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(){return window}function Nhe(n){zc().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DH(){return typeof zc().WorkerGlobalScope<"u"&&typeof zc().importScripts=="function"}async function Ohe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Dhe(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Lhe(){return DH()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LH="firebaseLocalStorageDb",khe=1,hT="firebaseLocalStorage",kH="fbase_key";class Mx{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function uM(n,e){return n.transaction([hT],e?"readwrite":"readonly").objectStore(hT)}function Uhe(){const n=indexedDB.deleteDatabase(LH);return new Mx(n).toPromise()}function TN(){const n=indexedDB.open(LH,khe);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(hT,{keyPath:kH})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(hT)?e(i):(i.close(),await Uhe(),e(await TN()))})})}async function lF(n,e,t){const i=uM(n,!0).put({[kH]:e,value:t});return new Mx(i).toPromise()}async function zhe(n,e){const t=uM(n,!1).get(e),i=await new Mx(t).toPromise();return i===void 0?null:i.value}function uF(n,e){const t=uM(n,!0).delete(e);return new Mx(t).toPromise()}const Fhe=800,Bhe=3;class UH{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await TN(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Bhe)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DH()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lM._getInstance(Lhe()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await Ohe(),!this.activeServiceWorker)return;this.sender=new Rhe(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Dhe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await TN();return await lF(e,fT,"1"),await uF(e,fT),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>lF(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>zhe(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>uF(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=uM(r,!1).getAll();return new Mx(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Fhe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}UH.type="LOCAL";const Vhe=UH;new Tx(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zH(n,e){return e?$f(e):(mn(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3 extends CH{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return iy(e,this._buildIdpRequest())}_linkToIdToken(e,t){return iy(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return iy(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function jhe(n){return She(n.auth,new f3(n),n.bypassAuthState)}function Hhe(n){const{auth:e,user:t}=n;return mn(t,e,"internal-error"),xhe(t,new f3(n),n.bypassAuthState)}async function Ghe(n){const{auth:e,user:t}=n;return mn(t,e,"internal-error"),bhe(t,new f3(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FH{constructor(e,t,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:a,error:s,type:l}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jhe;case"linkViaPopup":case"linkViaRedirect":return Ghe;case"reauthViaPopup":case"reauthViaRedirect":return Hhe;default:qc(this.auth,"internal-error")}}resolve(e){rh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Whe=new Tx(2e3,1e4);async function qhe(n,e,t){if(wu(n.app))return Promise.reject(Nu(n,"operation-not-supported-in-this-environment"));const i=oM(n);Bfe(n,e,u3);const r=zH(i,t);return new Em(i,"signInViaPopup",e,r).executeNotNull()}class Em extends FH{constructor(e,t,i,r,a){super(e,t,r,a),this.provider=i,this.authWindow=null,this.pollId=null,Em.currentPopupAction&&Em.currentPopupAction.cancel(),Em.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return mn(e,this.auth,"internal-error"),e}async onExecution(){rh(this.filter.length===1,"Popup operations only handle one event");const e=c3();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Nu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Nu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Em.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Whe.get())};e()}}Em.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $he="pendingRedirect",Fw=new Map;class Xhe extends FH{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Fw.get(this.auth._key());if(!e){try{const i=await Yhe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Fw.set(this.auth._key(),e)}return this.bypassAuthState||Fw.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Yhe(n,e){const t=Qhe(e),i=Zhe(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function Khe(n,e){Fw.set(n._key(),e)}function Zhe(n){return $f(n._redirectPersistence)}function Qhe(n){return zw($he,n.config.apiKey,n.name)}async function Jhe(n,e,t=!1){if(wu(n.app))return Promise.reject(Dm(n));const i=oM(n),r=zH(i,e),s=await new Xhe(i,r,t).execute();return s&&!t&&(delete s.user._redirectEventId,await i._persistUserIfCurrent(s.user),await i._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ede=600*1e3;class tde{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nde(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!BH(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Nu(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ede&&this.cachedEventUids.clear(),this.cachedEventUids.has(cF(e))}saveEventToCache(e){this.cachedEventUids.add(cF(e)),this.lastProcessedEventTime=Date.now()}}function cF(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function BH({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function nde(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BH(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ide(n,e={}){return Wy(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rde=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ade=/^https?/;async function sde(n){if(n.config.emulator)return;const{authorizedDomains:e}=await ide(n);for(const t of e)try{if(ode(t))return}catch{}qc(n,"unauthorized-domain")}function ode(n){const e=wN(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return s.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===i}if(!ade.test(t))return!1;if(rde.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lde=new Tx(3e4,6e4);function fF(){const n=zc().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function ude(n){return new Promise((e,t)=>{var r,a,s;function i(){fF(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fF(),t(Nu(n,"network-request-failed"))},timeout:lde.get()})}if((a=(r=zc().gapi)==null?void 0:r.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((s=zc().gapi)!=null&&s.load)i();else{const l=dhe("iframefcb");return zc()[l]=()=>{gapi.load?i():t(Nu(n,"network-request-failed"))},fhe(`${hhe()}?onload=${l}`).catch(c=>t(c))}}).catch(e=>{throw Bw=null,e})}let Bw=null;function cde(n){return Bw=Bw||ude(n),Bw}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fde=new Tx(5e3,15e3),hde="__/auth/iframe",dde="emulator/auth/iframe",pde={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mde=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gde(n){const e=n.config;mn(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?r3(e,dde):`https://${n.config.authDomain}/${hde}`,i={apiKey:e.apiKey,appName:n.name,v:By},r=mde.get(n.config.apiHost);r&&(i.eid=r);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${_x(i).slice(1)}`}async function vde(n){const e=await cde(n),t=zc().gapi;return mn(t,n,"internal-error"),e.open({where:document.body,url:gde(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pde,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const s=Nu(n,"network-request-failed"),l=zc().setTimeout(()=>{a(s)},fde.get());function c(){zc().clearTimeout(l),r(i)}i.ping(c).then(c,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yde={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_de=500,bde=600,xde="_blank",Sde="http://localhost";class hF{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wde(n,e,t,i=_de,r=bde){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const c={...yde,width:i.toString(),height:r.toString(),top:a,left:s},f=As().toLowerCase();t&&(l=bH(f)?xde:t),yH(f)&&(e=e||Sde,c.scrollbars="yes");const p=Object.entries(c).reduce((v,[_,x])=>`${v}${_}=${x},`,"");if(ihe(f)&&l!=="_self")return Ede(e||"",l),new hF(null);const g=window.open(e||"",l,p);mn(g,n,"popup-blocked");try{g.focus()}catch{}return new hF(g)}function Ede(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tde="__/auth/handler",Ade="emulator/auth/handler",Mde=encodeURIComponent("fac");async function dF(n,e,t,i,r,a){mn(n.config.authDomain,n,"auth-domain-config-required"),mn(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:By,eventId:r};if(e instanceof u3){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",toe(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))s[p]=g}if(e instanceof Ax){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(s.scopes=p.join(","))}n.tenantId&&(s.tid=n.tenantId);const l=s;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await n._getAppCheckToken(),f=c?`#${Mde}=${encodeURIComponent(c)}`:"";return`${Cde(n)}?${_x(l).slice(1)}${f}`}function Cde({config:n}){return n.emulator?r3(n,Ade):`https://${n.authDomain}/${Tde}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="webStorageSupport";class Ide{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OH,this._completeRedirectFn=Jhe,this._overrideRedirectResult=Khe}async _openPopup(e,t,i,r){var s;rh((s=this.eventManagers[e._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await dF(e,t,i,wN(),r);return wde(e,a,c3())}async _openRedirect(e,t,i,r){await this._originValidation(e);const a=await dF(e,t,i,wN(),r);return Nhe(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:a}=this.eventManagers[t];return r?Promise.resolve(r):(rh(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await vde(e),i=new tde(e);return t.register("authEvent",r=>(mn(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ZI,{type:ZI},r=>{var s;const a=(s=r==null?void 0:r[0])==null?void 0:s[ZI];a!==void 0&&t(!!a),qc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sde(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return TH()||_H()||o3()}}const Pde=Ide;var pF="@firebase/auth",mF="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rde{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){mn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nde(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ode(n){yy(new Wm("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:l}=i.options;mn(s&&!s.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:s,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AH(n)},f=new uhe(i,r,a,c);return mhe(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),yy(new Wm("auth-internal",e=>{const t=oM(e.getProvider("auth").getImmediate());return(i=>new Rde(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),zd(pF,mF,Nde(n)),zd(pF,mF,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dde=300,Lde=C8("authIdTokenMaxAge")||Dde;let gF=null;const kde=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Lde)return;const r=t==null?void 0:t.token;gF!==r&&(gF=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Ude(n=D8()){const e=wD(n,"auth");if(e.isInitialized())return e.getImmediate();const t=phe(n,{popupRedirectResolver:Pde,persistence:[Vhe,Ihe,OH]}),i=C8("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const s=kde(a.toString());Ehe(t,s,()=>s(t.currentUser)),whe(t,l=>s(l))}}const r=A8("auth");return r&&ghe(t,`http://${r}`),t}function zde(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}che({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const a=Nu("internal-error");a.customData=r,t(a)},i.type="text/javascript",i.charset="UTF-8",zde().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ode("Browser");const Fde={apiKey:"AIzaSyCI9AH2vtxc9IhHdQBzA_5QPJDF5p-OTUE",authDomain:"tunas-craft.firebaseapp.com",projectId:"tunas-craft",storageBucket:"tunas-craft.firebasestorage.app",messagingSenderId:"805844799800",appId:"1:805844799800:web:8c3332ee01c3c4f9c1f1cd",measurementId:"G-BMF86Q9D45"},VH=O8(Fde),_d=Sfe(VH),QI=Ude(VH),jH=H.createContext(),cM=()=>H.useContext(jH),Bde=({children:n})=>{const[e,t]=H.useState([]),[i,r]=H.useState([]),[a,s]=H.useState([]),[l,c]=H.useState(null),[f,p]=H.useState(!0),g=$I(_d,"clients"),v=$I(_d,"orders"),_=$I(_d,"leads");H.useEffect(()=>{const P=The(QI,D=>{if(c(D),p(!1),D){const j=YI(g,se=>{t(se.docs.map(ue=>({...ue.data(),id:ue.id})))}),q=YI(v,se=>{r(se.docs.map(ue=>({...ue.data(),id:ue.id})))}),W=YI(_,se=>{s(se.docs.map(ue=>({...ue.data(),id:ue.id})))});return()=>{j(),q(),W()}}else t([]),r([]),s([])});return()=>P()},[]);const x=async()=>{const P=new Gf;try{await qhe(QI,P)}catch(D){console.error("Login failed",D),D.code==="auth/unauthorized-domain"?alert("Error: El dominio no est autorizado. Ve a Firebase Console -> Authentication -> Settings -> Authorized Domains y agrega 'tunascraft.com'."):alert("Error al iniciar sesin: "+D.message)}},T=async()=>{try{await Ahe(QI)}catch(P){console.error("Logout failed",P)}},S=async P=>{const D={...P,joinedAt:new Date().toISOString()},j=await XI(g,D);return{...D,id:j.id}},w=async(P,D)=>{const j=jv(_d,"clients",P);await lw(j,D)},I=async P=>{let D=parseFloat(P.total);const j=e.find(se=>se.id===P.clientId);j&&(j.type==="mayorista"&&(D*=.9),j.type==="distribuidor"&&(D*=.75));const q={...P,total:D.toFixed(2),remaining:(D-(P.advance||0)).toFixed(2),date:new Date().toLocaleDateString("es-MX"),status:P.status||"pedido"},W=await XI(v,q);return{...q,id:W.id}},R=async(P,D)=>{const j=jv(_d,"orders",P);await lw(j,{status:D})},O=async(P,D)=>{const j=jv(_d,"orders",P);await lw(j,D)};H.useEffect(()=>{window.updateOrderContext=O},[i]);const F=async P=>{const D=jv(_d,"orders",P);await kfe(D)},B=async P=>{const D={...P,date:new Date().toLocaleDateString("es-MX"),status:"Nuevo"},j=await XI(_,D);return{...D,id:j.id}},L=async(P,D)=>{const j=jv(_d,"leads",P);await lw(j,{status:D})},z=async P=>{console.warn("Import not fully supported in Firebase version yet.")};return k.jsx(jH.Provider,{value:{clients:e,orders:i,leads:a,user:l,loadingAuth:f,login:x,logout:T,addClient:S,updateClient:w,addOrder:I,updateOrderStatus:R,updateOrder:O,deleteOrder:F,addLead:B,updateLeadStatus:L,importDatabase:z},children:n})};function HH(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=HH(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function Zi(){for(var n,e,t=0,i="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=HH(n))&&(i&&(i+=" "),i+=e);return i}var Vde=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function h3(n){if(typeof n!="string")return!1;var e=Vde;return e.includes(n)}var jde=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Hde=new Set(jde);function GH(n){return typeof n!="string"?!1:Hde.has(n)}function WH(n){return typeof n=="string"&&n.startsWith("data-")}function Du(n){if(typeof n!="object"||n===null)return{};var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(GH(t)||WH(t))&&(e[t]=n[t]);return e}function fM(n){if(n==null)return null;if(H.isValidElement(n)&&typeof n.props=="object"&&n.props!==null){var e=n.props;return Du(e)}return typeof n=="object"&&!Array.isArray(n)?Du(n):null}function Gl(n){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(GH(t)||WH(t)||h3(t))&&(e[t]=n[t]);return e}function Gde(n){return n==null?null:H.isValidElement(n)?Gl(n.props):typeof n=="object"&&!Array.isArray(n)?Gl(n):null}var Wde=["children","width","height","viewBox","className","style","title","desc"];function AN(){return AN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},AN.apply(null,arguments)}function qde(n,e){if(n==null)return{};var t,i,r=$de(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function $de(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var qH=H.forwardRef((n,e)=>{var{children:t,width:i,height:r,viewBox:a,className:s,style:l,title:c,desc:f}=n,p=qde(n,Wde),g=a||{width:i,height:r,x:0,y:0},v=Zi("recharts-surface",s);return H.createElement("svg",AN({},Gl(p),{className:v,width:i,height:r,style:l,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:e}),H.createElement("title",null,c),H.createElement("desc",null,f),t)}),Xde=["children","className"];function MN(){return MN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},MN.apply(null,arguments)}function Yde(n,e){if(n==null)return{};var t,i,r=Kde(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function Kde(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var $c=H.forwardRef((n,e)=>{var{children:t,className:i}=n,r=Yde(n,Xde),a=Zi("recharts-layer",i);return H.createElement("g",MN({className:a},Gl(r),{ref:e}),t)}),Zde=H.createContext(null);function Sr(n){return function(){return n}}const CN=Math.PI,IN=2*CN,dm=1e-6,Qde=IN-dm;function $H(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function Jde(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return $H;const t=10**e;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*t)/t+i[r]}}class epe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?$H:Jde(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,i,r){this._append`Q${+e},${+t},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,t,i,r,a,s){this._append`C${+e},${+t},${+i},${+r},${this._x1=+a},${this._y1=+s}`}arcTo(e,t,i,r,a){if(e=+e,t=+t,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,l=this._y1,c=i-e,f=r-t,p=s-e,g=l-t,v=p*p+g*g;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(v>dm)if(!(Math.abs(g*c-f*p)>dm)||!a)this._append`L${this._x1=e},${this._y1=t}`;else{let _=i-s,x=r-l,T=c*c+f*f,S=_*_+x*x,w=Math.sqrt(T),I=Math.sqrt(v),R=a*Math.tan((CN-Math.acos((T+v-S)/(2*w*I)))/2),O=R/I,F=R/w;Math.abs(O-1)>dm&&this._append`L${e+O*p},${t+O*g}`,this._append`A${a},${a},0,0,${+(g*_>p*x)},${this._x1=e+F*c},${this._y1=t+F*f}`}}arc(e,t,i,r,a,s){if(e=+e,t=+t,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),c=i*Math.sin(r),f=e+l,p=t+c,g=1^s,v=s?r-a:a-r;this._x1===null?this._append`M${f},${p}`:(Math.abs(this._x1-f)>dm||Math.abs(this._y1-p)>dm)&&this._append`L${f},${p}`,i&&(v<0&&(v=v%IN+IN),v>Qde?this._append`A${i},${i},0,1,${g},${e-l},${t-c}A${i},${i},0,1,${g},${this._x1=f},${this._y1=p}`:v>dm&&this._append`A${i},${i},0,${+(v>=CN)},${g},${this._x1=e+i*Math.cos(a)},${this._y1=t+i*Math.sin(a)}`)}rect(e,t,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function XH(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const i=Math.floor(t);if(!(i>=0))throw new RangeError(`invalid digits: ${t}`);e=i}return n},()=>new epe(e)}function d3(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function YH(n){this._context=n}YH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:this._context.lineTo(n,e);break}}};function hM(n){return new YH(n)}function KH(n){return n[0]}function ZH(n){return n[1]}function QH(n,e){var t=Sr(!0),i=null,r=hM,a=null,s=XH(l);n=typeof n=="function"?n:n===void 0?KH:Sr(n),e=typeof e=="function"?e:e===void 0?ZH:Sr(e);function l(c){var f,p=(c=d3(c)).length,g,v=!1,_;for(i==null&&(a=r(_=s())),f=0;f<=p;++f)!(f<p&&t(g=c[f],f,c))===v&&((v=!v)?a.lineStart():a.lineEnd()),v&&a.point(+n(g,f,c),+e(g,f,c));if(_)return a=null,_+""||null}return l.x=function(c){return arguments.length?(n=typeof c=="function"?c:Sr(+c),l):n},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Sr(+c),l):e},l.defined=function(c){return arguments.length?(t=typeof c=="function"?c:Sr(!!c),l):t},l.curve=function(c){return arguments.length?(r=c,i!=null&&(a=r(i)),l):r},l.context=function(c){return arguments.length?(c==null?i=a=null:a=r(i=c),l):i},l}function cw(n,e,t){var i=null,r=Sr(!0),a=null,s=hM,l=null,c=XH(f);n=typeof n=="function"?n:n===void 0?KH:Sr(+n),e=typeof e=="function"?e:Sr(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?ZH:Sr(+t);function f(g){var v,_,x,T=(g=d3(g)).length,S,w=!1,I,R=new Array(T),O=new Array(T);for(a==null&&(l=s(I=c())),v=0;v<=T;++v){if(!(v<T&&r(S=g[v],v,g))===w)if(w=!w)_=v,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),x=v-1;x>=_;--x)l.point(R[x],O[x]);l.lineEnd(),l.areaEnd()}w&&(R[v]=+n(S,v,g),O[v]=+e(S,v,g),l.point(i?+i(S,v,g):R[v],t?+t(S,v,g):O[v]))}if(I)return l=null,I+""||null}function p(){return QH().defined(r).curve(s).context(a)}return f.x=function(g){return arguments.length?(n=typeof g=="function"?g:Sr(+g),i=null,f):n},f.x0=function(g){return arguments.length?(n=typeof g=="function"?g:Sr(+g),f):n},f.x1=function(g){return arguments.length?(i=g==null?null:typeof g=="function"?g:Sr(+g),f):i},f.y=function(g){return arguments.length?(e=typeof g=="function"?g:Sr(+g),t=null,f):e},f.y0=function(g){return arguments.length?(e=typeof g=="function"?g:Sr(+g),f):e},f.y1=function(g){return arguments.length?(t=g==null?null:typeof g=="function"?g:Sr(+g),f):t},f.lineX0=f.lineY0=function(){return p().x(n).y(e)},f.lineY1=function(){return p().x(n).y(t)},f.lineX1=function(){return p().x(i).y(e)},f.defined=function(g){return arguments.length?(r=typeof g=="function"?g:Sr(!!g),f):r},f.curve=function(g){return arguments.length?(s=g,a!=null&&(l=s(a)),f):s},f.context=function(g){return arguments.length?(g==null?a=l=null:l=s(a=g),f):a},f}class JH{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function tpe(n){return new JH(n,!0)}function npe(n){return new JH(n,!1)}function dT(){}function pT(n,e,t){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+e)/6,(n._y0+4*n._y1+t)/6)}function eG(n){this._context=n}eG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:pT(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:pT(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function ipe(n){return new eG(n)}function tG(n){this._context=n}tG.prototype={areaStart:dT,areaEnd:dT,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x2=n,this._y2=e;break;case 1:this._point=2,this._x3=n,this._y3=e;break;case 2:this._point=3,this._x4=n,this._y4=e,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+e)/6);break;default:pT(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function rpe(n){return new tG(n)}function nG(n){this._context=n}nG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+n)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 3:this._point=4;default:pT(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function ape(n){return new nG(n)}function iG(n){this._context=n}iG.prototype={areaStart:dT,areaEnd:dT,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,e){n=+n,e=+e,this._point?this._context.lineTo(n,e):(this._point=1,this._context.moveTo(n,e))}};function spe(n){return new iG(n)}function vF(n){return n<0?-1:1}function yF(n,e,t){var i=n._x1-n._x0,r=e-n._x1,a=(n._y1-n._y0)/(i||r<0&&-0),s=(t-n._y1)/(r||i<0&&-0),l=(a*r+s*i)/(i+r);return(vF(a)+vF(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(l))||0}function _F(n,e){var t=n._x1-n._x0;return t?(3*(n._y1-n._y0)/t-e)/2:e}function JI(n,e,t){var i=n._x0,r=n._y0,a=n._x1,s=n._y1,l=(a-i)/3;n._context.bezierCurveTo(i+l,r+l*e,a-l,s-l*t,a,s)}function mT(n){this._context=n}mT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:JI(this,this._t0,_F(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){var t=NaN;if(n=+n,e=+e,!(n===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,JI(this,_F(this,t=yF(this,n,e)),t);break;default:JI(this,this._t0,t=yF(this,n,e));break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e,this._t0=t}}};function rG(n){this._context=new aG(n)}(rG.prototype=Object.create(mT.prototype)).point=function(n,e){mT.prototype.point.call(this,e,n)};function aG(n){this._context=n}aG.prototype={moveTo:function(n,e){this._context.moveTo(e,n)},closePath:function(){this._context.closePath()},lineTo:function(n,e){this._context.lineTo(e,n)},bezierCurveTo:function(n,e,t,i,r,a){this._context.bezierCurveTo(e,n,i,t,a,r)}};function ope(n){return new mT(n)}function lpe(n){return new rG(n)}function sG(n){this._context=n}sG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,e=this._y,t=n.length;if(t)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),t===2)this._context.lineTo(n[1],e[1]);else for(var i=bF(n),r=bF(e),a=0,s=1;s<t;++a,++s)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],n[s],e[s]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,e){this._x.push(+n),this._y.push(+e)}};function bF(n){var e,t=n.length-1,i,r=new Array(t),a=new Array(t),s=new Array(t);for(r[0]=0,a[0]=2,s[0]=n[0]+2*n[1],e=1;e<t-1;++e)r[e]=1,a[e]=4,s[e]=4*n[e]+2*n[e+1];for(r[t-1]=2,a[t-1]=7,s[t-1]=8*n[t-1]+n[t],e=1;e<t;++e)i=r[e]/a[e-1],a[e]-=i,s[e]-=i*s[e-1];for(r[t-1]=s[t-1]/a[t-1],e=t-2;e>=0;--e)r[e]=(s[e]-r[e+1])/a[e];for(a[t-1]=(n[t]+r[t-1])/2,e=0;e<t-1;++e)a[e]=2*n[e+1]-r[e+1];return[r,a]}function upe(n){return new sG(n)}function dM(n,e){this._context=n,this._t=e}dM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(n,e);else{var t=this._x*(1-this._t)+n*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=n,this._y=e}};function cpe(n){return new dM(n,.5)}function fpe(n){return new dM(n,0)}function hpe(n){return new dM(n,1)}function Ym(n,e){if((s=n.length)>1)for(var t=1,i,r,a=n[e[0]],s,l=a.length;t<s;++t)for(r=a,a=n[e[t]],i=0;i<l;++i)a[i][1]+=a[i][0]=isNaN(r[i][1])?r[i][0]:r[i][1]}function PN(n){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=e;return t}function dpe(n,e){return n[e]}function ppe(n){const e=[];return e.key=n,e}function mpe(){var n=Sr([]),e=PN,t=Ym,i=dpe;function r(a){var s=Array.from(n.apply(this,arguments),ppe),l,c=s.length,f=-1,p;for(const g of a)for(l=0,++f;l<c;++l)(s[l][f]=[0,+i(g,s[l].key,f,a)]).data=g;for(l=0,p=d3(e(s));l<c;++l)s[p[l]].index=l;return t(s,p),s}return r.keys=function(a){return arguments.length?(n=typeof a=="function"?a:Sr(Array.from(a)),r):n},r.value=function(a){return arguments.length?(i=typeof a=="function"?a:Sr(+a),r):i},r.order=function(a){return arguments.length?(e=a==null?PN:typeof a=="function"?a:Sr(Array.from(a)),r):e},r.offset=function(a){return arguments.length?(t=a??Ym,r):t},r}function gpe(n,e){if((i=n.length)>0){for(var t,i,r=0,a=n[0].length,s;r<a;++r){for(s=t=0;t<i;++t)s+=n[t][r][1]||0;if(s)for(t=0;t<i;++t)n[t][r][1]/=s}Ym(n,e)}}function vpe(n,e){if((r=n.length)>0){for(var t=0,i=n[e[0]],r,a=i.length;t<a;++t){for(var s=0,l=0;s<r;++s)l+=n[s][t][1]||0;i[t][1]+=i[t][0]=-l/2}Ym(n,e)}}function ype(n,e){if(!(!((s=n.length)>0)||!((a=(r=n[e[0]]).length)>0))){for(var t=0,i=1,r,a,s;i<a;++i){for(var l=0,c=0,f=0;l<s;++l){for(var p=n[e[l]],g=p[i][1]||0,v=p[i-1][1]||0,_=(g-v)/2,x=0;x<l;++x){var T=n[e[x]],S=T[i][1]||0,w=T[i-1][1]||0;_+=S-w}c+=g,f+=_*g}r[i-1][1]+=r[i-1][0]=t,c&&(t-=f/c)}r[i-1][1]+=r[i-1][0]=t,Ym(n,e)}}var eP={},tP={},xF;function _pe(){return xF||(xF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==="__proto__"}n.isUnsafeProperty=e})(tP)),tP}var nP={},SF;function oG(){return SF||(SF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){switch(typeof t){case"number":case"symbol":return!1;case"string":return t.includes(".")||t.includes("[")||t.includes("]")}}n.isDeepKey=e})(nP)),nP}var iP={},wF;function p3(){return wF||(wF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){var i;return typeof t=="string"||typeof t=="symbol"?t:Object.is((i=t==null?void 0:t.valueOf)==null?void 0:i.call(t),-0)?"-0":String(t)}n.toKey=e})(iP)),iP}var rP={},aP={},EF;function bpe(){return EF||(EF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){if(t==null)return"";if(typeof t=="string")return t;if(Array.isArray(t))return t.map(e).join(",");const i=String(t);return i==="0"&&Object.is(Number(t),-0)?"-0":i}n.toString=e})(aP)),aP}var TF;function m3(){return TF||(TF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=bpe(),t=p3();function i(r){if(Array.isArray(r))return r.map(t.toKey);if(typeof r=="symbol")return[r];r=e.toString(r);const a=[],s=r.length;if(s===0)return a;let l=0,c="",f="",p=!1;for(r.charCodeAt(0)===46&&(a.push(""),l++);l<s;){const g=r[l];f?g==="\\"&&l+1<s?(l++,c+=r[l]):g===f?f="":c+=g:p?g==='"'||g==="'"?f=g:g==="]"?(p=!1,a.push(c),c=""):c+=g:g==="["?(p=!0,c&&(a.push(c),c="")):g==="."?c&&(a.push(c),c=""):c+=g,l++}return c&&a.push(c),a}n.toPath=i})(rP)),rP}var AF;function g3(){return AF||(AF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=_pe(),t=oG(),i=p3(),r=m3();function a(l,c,f){if(l==null)return f;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return f;const p=l[c];return p===void 0?t.isDeepKey(c)?a(l,r.toPath(c),f):f:p}case"number":case"symbol":{typeof c=="number"&&(c=i.toKey(c));const p=l[c];return p===void 0?f:p}default:{if(Array.isArray(c))return s(l,c,f);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return f;const p=l[c];return p===void 0?f:p}}}function s(l,c,f){if(c.length===0)return f;let p=l;for(let g=0;g<c.length;g++){if(p==null||e.isUnsafeProperty(c[g]))return f;p=p[c[g]]}return p===void 0?f:p}n.get=a})(eP)),eP}var sP,MF;function xpe(){return MF||(MF=1,sP=g3().get),sP}var Spe=xpe();const pM=ku(Spe);var wpe=4;function Dd(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wpe,t=10**e,i=Math.round(n*t)/t;return Object.is(i,-0)?0:i}function Wa(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return n.reduce((r,a,s)=>{var l=t[s-1];return typeof l=="string"?r+l+a:l!==void 0?r+Dd(l)+a:r+a},"")}var Fl=n=>n===0?0:n>0?1:-1,Xc=n=>typeof n=="number"&&n!=+n,Km=n=>typeof n=="string"&&n.indexOf("%")===n.length-1,qt=n=>(typeof n=="number"||n instanceof Number)&&!Xc(n),Yc=n=>qt(n)||typeof n=="string",Epe=0,Gb=n=>{var e=++Epe;return"".concat(n||"").concat(e)},ep=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!qt(e)&&typeof e!="string")return i;var a;if(Km(e)){if(t==null)return i;var s=e.indexOf("%");a=t*parseFloat(e.slice(0,s))/100}else a=+e;return Xc(a)&&(a=i),r&&t!=null&&a>t&&(a=t),a},lG=n=>{if(!Array.isArray(n))return!1;for(var e=n.length,t={},i=0;i<e;i++)if(!t[String(n[i])])t[String(n[i])]=!0;else return!0;return!1};function Tc(n,e,t){return qt(n)&&qt(e)?Dd(n+t*(e-n)):e}function uG(n,e,t){if(!(!n||!n.length))return n.find(i=>i&&(typeof e=="function"?e(i):pM(i,e))===t)}var Ms=n=>n===null||typeof n>"u",v3=n=>Ms(n)?n:"".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));function Ro(n){return n!=null}function qy(){}var cG=n=>"radius"in n&&"startAngle"in n&&"endAngle"in n,y3=(n,e)=>{if(!n||typeof n=="function"||typeof n=="boolean")return null;var t=n;if(H.isValidElement(n)&&(t=n.props),typeof t!="object"&&typeof t!="function")return null;var i={};return Object.keys(t).forEach(r=>{h3(r)&&(i[r]=(a=>t[r](t,a)))}),i},Tpe=(n,e,t)=>i=>(n(e,t,i),null),Ape=(n,e,t)=>{if(n===null||typeof n!="object"&&typeof n!="function")return null;var i=null;return Object.keys(n).forEach(r=>{var a=n[r];h3(r)&&typeof a=="function"&&(i||(i={}),i[r]=Tpe(a,e,t))}),i};function CF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Mpe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?CF(Object(t),!0).forEach(function(i){Cpe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):CF(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Cpe(n,e,t){return(e=Ipe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ipe(n){var e=Ppe(n,"string");return typeof e=="symbol"?e:e+""}function Ppe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function al(n,e){var t=Mpe({},n),i=e,r=Object.keys(e),a=r.reduce((s,l)=>(s[l]===void 0&&i[l]!==void 0&&(s[l]=i[l]),s),t);return a}var oP={},lP={},IF;function Rpe(){return IF||(IF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,i){const r=new Map;for(let a=0;a<t.length;a++){const s=t[a],l=i(s,a,t);r.has(l)||r.set(l,s)}return Array.from(r.values())}n.uniqBy=e})(lP)),lP}var uP={},PF;function Npe(){return PF||(PF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,i){return function(...r){return t.apply(this,r.slice(0,i))}}n.ary=e})(uP)),uP}var cP={},RF;function fG(){return RF||(RF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t}n.identity=e})(cP)),cP}var fP={},hP={},dP={},NF;function Ope(){return NF||(NF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Number.isSafeInteger(t)&&t>=0}n.isLength=e})(dP)),dP}var OF;function _3(){return OF||(OF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Ope();function t(i){return i!=null&&typeof i!="function"&&e.isLength(i.length)}n.isArrayLike=t})(hP)),hP}var pP={},DF;function Dpe(){return DF||(DF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="object"&&t!==null}n.isObjectLike=e})(pP)),pP}var LF;function Lpe(){return LF||(LF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=_3(),t=Dpe();function i(r){return t.isObjectLike(r)&&e.isArrayLike(r)}n.isArrayLikeObject=i})(fP)),fP}var mP={},gP={},kF;function kpe(){return kF||(kF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=g3();function t(i){return function(r){return e.get(r,i)}}n.property=t})(gP)),gP}var vP={},yP={},_P={},bP={},UF;function hG(){return UF||(UF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t!==null&&(typeof t=="object"||typeof t=="function")}n.isObject=e})(bP)),bP}var xP={},zF;function dG(){return zF||(zF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==null||typeof t!="object"&&typeof t!="function"}n.isPrimitive=e})(xP)),xP}var SP={},FF;function pG(){return FF||(FF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,i){return t===i||Number.isNaN(t)&&Number.isNaN(i)}n.isEqualsSameValueZero=e})(SP)),SP}var BF;function Upe(){return BF||(BF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=hG(),t=dG(),i=pG();function r(p,g,v){return typeof v!="function"?r(p,g,()=>{}):a(p,g,function _(x,T,S,w,I,R){const O=v(x,T,S,w,I,R);return O!==void 0?!!O:a(x,T,_,R)},new Map)}function a(p,g,v,_){if(g===p)return!0;switch(typeof g){case"object":return s(p,g,v,_);case"function":return Object.keys(g).length>0?a(p,{...g},v,_):i.isEqualsSameValueZero(p,g);default:return e.isObject(p)?typeof g=="string"?g==="":!0:i.isEqualsSameValueZero(p,g)}}function s(p,g,v,_){if(g==null)return!0;if(Array.isArray(g))return c(p,g,v,_);if(g instanceof Map)return l(p,g,v,_);if(g instanceof Set)return f(p,g,v,_);const x=Object.keys(g);if(p==null||t.isPrimitive(p))return x.length===0;if(x.length===0)return!0;if(_!=null&&_.has(g))return _.get(g)===p;_==null||_.set(g,p);try{for(let T=0;T<x.length;T++){const S=x[T];if(!t.isPrimitive(p)&&!(S in p)||g[S]===void 0&&p[S]!==void 0||g[S]===null&&p[S]!==null||!v(p[S],g[S],S,p,g,_))return!1}return!0}finally{_==null||_.delete(g)}}function l(p,g,v,_){if(g.size===0)return!0;if(!(p instanceof Map))return!1;for(const[x,T]of g.entries()){const S=p.get(x);if(v(S,T,x,p,g,_)===!1)return!1}return!0}function c(p,g,v,_){if(g.length===0)return!0;if(!Array.isArray(p))return!1;const x=new Set;for(let T=0;T<g.length;T++){const S=g[T];let w=!1;for(let I=0;I<p.length;I++){if(x.has(I))continue;const R=p[I];let O=!1;if(v(R,S,T,p,g,_)&&(O=!0),O){x.add(I),w=!0;break}}if(!w)return!1}return!0}function f(p,g,v,_){return g.size===0?!0:p instanceof Set?c([...p],[...g],v,_):!1}n.isMatchWith=r,n.isSetMatch=f})(_P)),_P}var VF;function mG(){return VF||(VF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Upe();function t(i,r){return e.isMatchWith(i,r,()=>{})}n.isMatch=t})(yP)),yP}var wP={},EP={},TP={},jF;function zpe(){return jF||(jF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Object.getOwnPropertySymbols(t).filter(i=>Object.prototype.propertyIsEnumerable.call(t,i))}n.getSymbols=e})(TP)),TP}var AP={},HF;function b3(){return HF||(HF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}n.getTag=e})(AP)),AP}var MP={},GF;function gG(){return GF||(GF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",t="[object String]",i="[object Number]",r="[object Boolean]",a="[object Arguments]",s="[object Symbol]",l="[object Date]",c="[object Map]",f="[object Set]",p="[object Array]",g="[object Function]",v="[object ArrayBuffer]",_="[object Object]",x="[object Error]",T="[object DataView]",S="[object Uint8Array]",w="[object Uint8ClampedArray]",I="[object Uint16Array]",R="[object Uint32Array]",O="[object BigUint64Array]",F="[object Int8Array]",B="[object Int16Array]",L="[object Int32Array]",z="[object BigInt64Array]",P="[object Float32Array]",D="[object Float64Array]";n.argumentsTag=a,n.arrayBufferTag=v,n.arrayTag=p,n.bigInt64ArrayTag=z,n.bigUint64ArrayTag=O,n.booleanTag=r,n.dataViewTag=T,n.dateTag=l,n.errorTag=x,n.float32ArrayTag=P,n.float64ArrayTag=D,n.functionTag=g,n.int16ArrayTag=B,n.int32ArrayTag=L,n.int8ArrayTag=F,n.mapTag=c,n.numberTag=i,n.objectTag=_,n.regexpTag=e,n.setTag=f,n.stringTag=t,n.symbolTag=s,n.uint16ArrayTag=I,n.uint32ArrayTag=R,n.uint8ArrayTag=S,n.uint8ClampedArrayTag=w})(MP)),MP}var CP={},WF;function Fpe(){return WF||(WF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}n.isTypedArray=e})(CP)),CP}var qF;function vG(){return qF||(qF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=zpe(),t=b3(),i=gG(),r=dG(),a=Fpe();function s(p,g){return l(p,void 0,p,new Map,g)}function l(p,g,v,_=new Map,x=void 0){const T=x==null?void 0:x(p,g,v,_);if(T!==void 0)return T;if(r.isPrimitive(p))return p;if(_.has(p))return _.get(p);if(Array.isArray(p)){const S=new Array(p.length);_.set(p,S);for(let w=0;w<p.length;w++)S[w]=l(p[w],w,v,_,x);return Object.hasOwn(p,"index")&&(S.index=p.index),Object.hasOwn(p,"input")&&(S.input=p.input),S}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const S=new RegExp(p.source,p.flags);return S.lastIndex=p.lastIndex,S}if(p instanceof Map){const S=new Map;_.set(p,S);for(const[w,I]of p)S.set(w,l(I,w,v,_,x));return S}if(p instanceof Set){const S=new Set;_.set(p,S);for(const w of p)S.add(l(w,void 0,v,_,x));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(a.isTypedArray(p)){const S=new(Object.getPrototypeOf(p)).constructor(p.length);_.set(p,S);for(let w=0;w<p.length;w++)S[w]=l(p[w],w,v,_,x);return S}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const S=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return _.set(p,S),c(S,p,v,_,x),S}if(typeof File<"u"&&p instanceof File){const S=new File([p],p.name,{type:p.type});return _.set(p,S),c(S,p,v,_,x),S}if(typeof Blob<"u"&&p instanceof Blob){const S=new Blob([p],{type:p.type});return _.set(p,S),c(S,p,v,_,x),S}if(p instanceof Error){const S=new p.constructor;return _.set(p,S),S.message=p.message,S.name=p.name,S.stack=p.stack,S.cause=p.cause,c(S,p,v,_,x),S}if(p instanceof Boolean){const S=new Boolean(p.valueOf());return _.set(p,S),c(S,p,v,_,x),S}if(p instanceof Number){const S=new Number(p.valueOf());return _.set(p,S),c(S,p,v,_,x),S}if(p instanceof String){const S=new String(p.valueOf());return _.set(p,S),c(S,p,v,_,x),S}if(typeof p=="object"&&f(p)){const S=Object.create(Object.getPrototypeOf(p));return _.set(p,S),c(S,p,v,_,x),S}return p}function c(p,g,v=p,_,x){const T=[...Object.keys(g),...e.getSymbols(g)];for(let S=0;S<T.length;S++){const w=T[S],I=Object.getOwnPropertyDescriptor(p,w);(I==null||I.writable)&&(p[w]=l(g[w],w,v,_,x))}}function f(p){switch(t.getTag(p)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}n.cloneDeepWith=s,n.cloneDeepWithImpl=l,n.copyProperties=c})(EP)),EP}var $F;function Bpe(){return $F||($F=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=vG();function t(i){return e.cloneDeepWithImpl(i,void 0,i,new Map,void 0)}n.cloneDeep=t})(wP)),wP}var XF;function Vpe(){return XF||(XF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=mG(),t=Bpe();function i(r){return r=t.cloneDeep(r),a=>e.isMatch(a,r)}n.matches=i})(vP)),vP}var IP={},PP={},RP={},YF;function jpe(){return YF||(YF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=vG(),t=b3(),i=gG();function r(a,s){return e.cloneDeepWith(a,(l,c,f,p)=>{const g=s==null?void 0:s(l,c,f,p);if(g!==void 0)return g;if(typeof a=="object"){if(t.getTag(a)===i.objectTag&&typeof a.constructor!="function"){const v={};return p.set(a,v),e.copyProperties(v,a,f,p),v}switch(Object.prototype.toString.call(a)){case i.numberTag:case i.stringTag:case i.booleanTag:{const v=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(v,a),v}case i.argumentsTag:{const v={};return e.copyProperties(v,a),v.length=a.length,v[Symbol.iterator]=a[Symbol.iterator],v}default:return}}})}n.cloneDeepWith=r})(RP)),RP}var KF;function Hpe(){return KF||(KF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=jpe();function t(i){return e.cloneDeepWith(i)}n.cloneDeep=t})(PP)),PP}var NP={},OP={},ZF;function yG(){return ZF||(ZF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function t(i,r=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<r;case"symbol":return!1;case"string":return e.test(i)}}n.isIndex=t})(OP)),OP}var DP={},QF;function Gpe(){return QF||(QF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=b3();function t(i){return i!==null&&typeof i=="object"&&e.getTag(i)==="[object Arguments]"}n.isArguments=t})(DP)),DP}var JF;function Wpe(){return JF||(JF=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=oG(),t=yG(),i=Gpe(),r=m3();function a(s,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&(s==null?void 0:s[l])==null?c=r.toPath(l):c=[l],c.length===0)return!1;let f=s;for(let p=0;p<c.length;p++){const g=c[p];if((f==null||!Object.hasOwn(f,g))&&!((Array.isArray(f)||i.isArguments(f))&&t.isIndex(g)&&g<f.length))return!1;f=f[g]}return!0}n.has=a})(NP)),NP}var eB;function qpe(){return eB||(eB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=mG(),t=p3(),i=Hpe(),r=g3(),a=Wpe();function s(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=t.toKey(l);break}}return c=i.cloneDeep(c),function(f){const p=r.get(f,l);return p===void 0?a.has(f,l):c===void 0?p===void 0:e.isMatch(p,c)}}n.matchesProperty=s})(IP)),IP}var tB;function $pe(){return tB||(tB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=fG(),t=kpe(),i=Vpe(),r=qpe();function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?r.matchesProperty(s[0],s[1]):i.matches(s);case"string":case"symbol":case"number":return t.property(s)}}n.iteratee=a})(mP)),mP}var nB;function Xpe(){return nB||(nB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Rpe(),t=Npe(),i=fG(),r=Lpe(),a=$pe();function s(l,c=i.identity){return r.isArrayLikeObject(l)?e.uniqBy(Array.from(l),t.ary(a.iteratee(c),1)):[]}n.uniqBy=s})(oP)),oP}var LP,iB;function Ype(){return iB||(iB=1,LP=Xpe().uniqBy),LP}var Kpe=Ype();const rB=ku(Kpe);function Zpe(n,e,t){return e===!0?rB(n,t):typeof e=="function"?rB(n,e):n}var x3=H.createContext(null),Qpe=n=>n,Ta=()=>{var n=H.useContext(x3);return n?n.store.dispatch:Qpe},Vw=()=>{},Jpe=()=>Vw,eme=(n,e)=>n===e;function sn(n){var e=H.useContext(x3),t=H.useMemo(()=>e?i=>{if(i!=null)return n(i)}:Vw,[e,n]);return Jj.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:Jpe,e?e.store.getState:Vw,e?e.store.getState:Vw,t,eme)}function tme(n,e=`expected a function, instead received ${typeof n}`){if(typeof n!="function")throw new TypeError(e)}function nme(n,e=`expected an object, instead received ${typeof n}`){if(typeof n!="object")throw new TypeError(e)}function ime(n,e="expected all items to be functions, instead received the following types: "){if(!n.every(t=>typeof t=="function")){const t=n.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${t}]`)}}var aB=n=>Array.isArray(n)?n:[n];function rme(n){const e=Array.isArray(n[0])?n[0]:n;return ime(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function ame(n,e){const t=[],{length:i}=n;for(let r=0;r<i;r++)t.push(n[r].apply(null,e));return t}var sme=class{constructor(n){this.value=n}deref(){return this.value}},ome=typeof WeakRef<"u"?WeakRef:sme,lme=0,sB=1;function fw(){return{s:lme,v:void 0,o:null,p:null}}function _G(n,e={}){let t=fw();const{resultEqualityCheck:i}=e;let r,a=0;function s(){var g;let l=t;const{length:c}=arguments;for(let v=0,_=c;v<_;v++){const x=arguments[v];if(typeof x=="function"||typeof x=="object"&&x!==null){let T=l.o;T===null&&(l.o=T=new WeakMap);const S=T.get(x);S===void 0?(l=fw(),T.set(x,l)):l=S}else{let T=l.p;T===null&&(l.p=T=new Map);const S=T.get(x);S===void 0?(l=fw(),T.set(x,l)):l=S}}const f=l;let p;if(l.s===sB)p=l.v;else if(p=n.apply(null,arguments),a++,i){const v=((g=r==null?void 0:r.deref)==null?void 0:g.call(r))??r;v!=null&&i(v,p)&&(p=v,a!==0&&a--),r=typeof p=="object"&&p!==null||typeof p=="function"?new ome(p):p}return f.s=sB,f.v=p,p}return s.clearCache=()=>{t=fw(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function ume(n,...e){const t=typeof n=="function"?{memoize:n,memoizeOptions:e}:n,i=(...r)=>{let a=0,s=0,l,c={},f=r.pop();typeof f=="object"&&(c=f,f=r.pop()),tme(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const p={...t,...c},{memoize:g,memoizeOptions:v=[],argsMemoize:_=_G,argsMemoizeOptions:x=[]}=p,T=aB(v),S=aB(x),w=rme(r),I=g(function(){return a++,f.apply(null,arguments)},...T),R=_(function(){s++;const F=ame(w,arguments);return l=I.apply(null,F),l},...S);return Object.assign(R,{resultFunc:f,memoizedResultFunc:I,dependencies:w,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>l,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:g,argsMemoize:_})};return Object.assign(i,{withTypes:()=>i}),i}var Ge=ume(_G),cme=Object.assign((n,e=Ge)=>{nme(n,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof n}`);const t=Object.keys(n),i=t.map(a=>n[a]);return e(i,(...a)=>a.reduce((s,l,c)=>(s[t[c]]=l,s),{}))},{withTypes:()=>cme}),kP={},UP={},zP={},oB;function fme(){return oB||(oB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(i){return typeof i=="symbol"?1:i===null?2:i===void 0?3:i!==i?4:0}const t=(i,r,a)=>{if(i!==r){const s=e(i),l=e(r);if(s===l&&s===0){if(i<r)return a==="desc"?1:-1;if(i>r)return a==="desc"?-1:1}return a==="desc"?l-s:s-l}return 0};n.compareValues=t})(zP)),zP}var FP={},BP={},lB;function bG(){return lB||(lB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="symbol"||t instanceof Symbol}n.isSymbol=e})(BP)),BP}var uB;function hme(){return uB||(uB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=bG(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(i.test(a)||!t.test(a))||s!=null&&Object.hasOwn(s,a)}n.isKey=r})(FP)),FP}var cB;function dme(){return cB||(cB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=fme(),t=hme(),i=m3();function r(a,s,l,c){if(a==null)return[];l=c?void 0:l,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(_=>String(_));const f=(_,x)=>{let T=_;for(let S=0;S<x.length&&T!=null;++S)T=T[x[S]];return T},p=(_,x)=>x==null||_==null?x:typeof _=="object"&&"key"in _?Object.hasOwn(x,_.key)?x[_.key]:f(x,_.path):typeof _=="function"?_(x):Array.isArray(_)?f(x,_):typeof x=="object"?x[_]:x,g=s.map(_=>(Array.isArray(_)&&_.length===1&&(_=_[0]),_==null||typeof _=="function"||Array.isArray(_)||t.isKey(_)?_:{key:_,path:i.toPath(_)}));return a.map(_=>({original:_,criteria:g.map(x=>p(x,_))})).slice().sort((_,x)=>{for(let T=0;T<g.length;T++){const S=e.compareValues(_.criteria[T],x.criteria[T],l[T]);if(S!==0)return S}return 0}).map(_=>_.original)}n.orderBy=r})(UP)),UP}var VP={},fB;function pme(){return fB||(fB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,i=1){const r=[],a=Math.floor(i),s=(l,c)=>{for(let f=0;f<l.length;f++){const p=l[f];Array.isArray(p)&&c<a?s(p,c+1):r.push(p)}};return s(t,0),r}n.flatten=e})(VP)),VP}var jP={},hB;function xG(){return hB||(hB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=yG(),t=_3(),i=hG(),r=pG();function a(s,l,c){return i.isObject(c)&&(typeof l=="number"&&t.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?r.isEqualsSameValueZero(c[l],s):!1}n.isIterateeCall=a})(jP)),jP}var dB;function mme(){return dB||(dB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=dme(),t=pme(),i=xG();function r(a,...s){const l=s.length;return l>1&&i.isIterateeCall(a,s[0],s[1])?s=[]:l>2&&i.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,t.flatten(s),["asc"])}n.sortBy=r})(kP)),kP}var HP,pB;function gme(){return pB||(pB=1,HP=mme().sortBy),HP}var vme=gme();const mM=ku(vme);var SG=n=>n.legend.settings,yme=n=>n.legend.size,_me=n=>n.legend.payload;Ge([_me,SG],(n,e)=>{var{itemSorter:t}=e,i=n.flat(1);return t?mM(i,t):i});var hw=1;function bme(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,t]=H.useState({height:0,left:0,top:0,width:0}),i=H.useCallback(r=>{if(r!=null){var a=r.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>hw||Math.abs(s.left-e.left)>hw||Math.abs(s.top-e.top)>hw||Math.abs(s.width-e.width)>hw)&&t({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...n]);return[e,i]}function Ga(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var xme=typeof Symbol=="function"&&Symbol.observable||"@@observable",mB=xme,GP=()=>Math.random().toString(36).substring(7).split("").join("."),Sme={INIT:`@@redux/INIT${GP()}`,REPLACE:`@@redux/REPLACE${GP()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${GP()}`},gT=Sme;function S3(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function wG(n,e,t){if(typeof n!="function")throw new Error(Ga(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Ga(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Ga(1));return t(wG)(n,e)}let i=n,r=e,a=new Map,s=a,l=0,c=!1;function f(){s===a&&(s=new Map,a.forEach((S,w)=>{s.set(w,S)}))}function p(){if(c)throw new Error(Ga(3));return r}function g(S){if(typeof S!="function")throw new Error(Ga(4));if(c)throw new Error(Ga(5));let w=!0;f();const I=l++;return s.set(I,S),function(){if(w){if(c)throw new Error(Ga(6));w=!1,f(),s.delete(I),a=null}}}function v(S){if(!S3(S))throw new Error(Ga(7));if(typeof S.type>"u")throw new Error(Ga(8));if(typeof S.type!="string")throw new Error(Ga(17));if(c)throw new Error(Ga(9));try{c=!0,r=i(r,S)}finally{c=!1}return(a=s).forEach(I=>{I()}),S}function _(S){if(typeof S!="function")throw new Error(Ga(10));i=S,v({type:gT.REPLACE})}function x(){const S=g;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(Ga(11));function I(){const O=w;O.next&&O.next(p())}return I(),{unsubscribe:S(I)}},[mB](){return this}}}return v({type:gT.INIT}),{dispatch:v,subscribe:g,getState:p,replaceReducer:_,[mB]:x}}function wme(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:gT.INIT})>"u")throw new Error(Ga(12));if(typeof t(void 0,{type:gT.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ga(13))})}function EG(n){const e=Object.keys(n),t={};for(let a=0;a<e.length;a++){const s=e[a];typeof n[s]=="function"&&(t[s]=n[s])}const i=Object.keys(t);let r;try{wme(t)}catch(a){r=a}return function(s={},l){if(r)throw r;let c=!1;const f={};for(let p=0;p<i.length;p++){const g=i[p],v=t[g],_=s[g],x=v(_,l);if(typeof x>"u")throw l&&l.type,new Error(Ga(14));f[g]=x,c=c||x!==_}return c=c||i.length!==Object.keys(s).length,c?f:s}}function vT(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function Eme(...n){return e=>(t,i)=>{const r=e(t,i);let a=()=>{throw new Error(Ga(15))};const s={getState:r.getState,dispatch:(c,...f)=>a(c,...f)},l=n.map(c=>c(s));return a=vT(...l)(r.dispatch),{...r,dispatch:a}}}function TG(n){return S3(n)&&"type"in n&&typeof n.type=="string"}var AG=Symbol.for("immer-nothing"),gB=Symbol.for("immer-draftable"),Zs=Symbol.for("immer-state");function Eu(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Jo=Object,My=Jo.getPrototypeOf,yT="constructor",gM="prototype",RN="configurable",_T="enumerable",jw="writable",Wb="value",ah=n=>!!n&&!!n[Zs];function Lu(n){var e;return n?MG(n)||yM(n)||!!n[gB]||!!((e=n[yT])!=null&&e[gB])||_M(n)||bM(n):!1}var Tme=Jo[gM][yT].toString(),vB=new WeakMap;function MG(n){if(!n||!w3(n))return!1;const e=My(n);if(e===null||e===Jo[gM])return!0;const t=Jo.hasOwnProperty.call(e,yT)&&e[yT];if(t===Object)return!0;if(!Hv(t))return!1;let i=vB.get(t);return i===void 0&&(i=Function.toString.call(t),vB.set(t,i)),i===Tme}function vM(n,e,t=!0){Cx(n)===0?(t?Reflect.ownKeys(n):Jo.keys(n)).forEach(r=>{e(r,n[r],n)}):n.forEach((i,r)=>e(r,i,n))}function Cx(n){const e=n[Zs];return e?e.type_:yM(n)?1:_M(n)?2:bM(n)?3:0}var yB=(n,e,t=Cx(n))=>t===2?n.has(e):Jo[gM].hasOwnProperty.call(n,e),NN=(n,e,t=Cx(n))=>t===2?n.get(e):n[e],bT=(n,e,t,i=Cx(n))=>{i===2?n.set(e,t):i===3?n.add(t):n[e]=t};function Ame(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var yM=Array.isArray,_M=n=>n instanceof Map,bM=n=>n instanceof Set,w3=n=>typeof n=="object",Hv=n=>typeof n=="function",WP=n=>typeof n=="boolean";function Mme(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var Vf=n=>n.copy_||n.base_,E3=n=>n.modified_?n.copy_:n.base_;function ON(n,e){if(_M(n))return new Map(n);if(bM(n))return new Set(n);if(yM(n))return Array[gM].slice.call(n);const t=MG(n);if(e===!0||e==="class_only"&&!t){const i=Jo.getOwnPropertyDescriptors(n);delete i[Zs];let r=Reflect.ownKeys(i);for(let a=0;a<r.length;a++){const s=r[a],l=i[s];l[jw]===!1&&(l[jw]=!0,l[RN]=!0),(l.get||l.set)&&(i[s]={[RN]:!0,[jw]:!0,[_T]:l[_T],[Wb]:n[s]})}return Jo.create(My(n),i)}else{const i=My(n);if(i!==null&&t)return{...n};const r=Jo.create(i);return Jo.assign(r,n)}}function T3(n,e=!1){return xM(n)||ah(n)||!Lu(n)||(Cx(n)>1&&Jo.defineProperties(n,{set:dw,add:dw,clear:dw,delete:dw}),Jo.freeze(n),e&&vM(n,(t,i)=>{T3(i,!0)},!1)),n}function Cme(){Eu(2)}var dw={[Wb]:Cme};function xM(n){return n===null||!w3(n)?!0:Jo.isFrozen(n)}var xT="MapSet",DN="Patches",_B="ArrayMethods",CG={};function Zm(n){const e=CG[n];return e||Eu(0,n),e}var bB=n=>!!CG[n],qb,IG=()=>qb,Ime=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:bB(xT)?Zm(xT):void 0,arrayMethodsPlugin_:bB(_B)?Zm(_B):void 0});function xB(n,e){e&&(n.patchPlugin_=Zm(DN),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function LN(n){kN(n),n.drafts_.forEach(Pme),n.drafts_=null}function kN(n){n===qb&&(qb=n.parent_)}var SB=n=>qb=Ime(qb,n);function Pme(n){const e=n[Zs];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function wB(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[Zs].modified_&&(LN(e),Eu(4)),Lu(n)&&(n=EB(e,n));const{patchPlugin_:r}=e;r&&r.generateReplacementPatches_(t[Zs].base_,n,e)}else n=EB(e,t);return Rme(e,n,!0),LN(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==AG?n:void 0}function EB(n,e){if(xM(e))return e;const t=e[Zs];if(!t)return ST(e,n.handledSet_,n);if(!SM(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:i}=t;if(i)for(;i.length>0;)i.pop()(n);NG(t,n)}return t.copy_}function Rme(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&T3(e,t)}function PG(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var SM=(n,e)=>n.scope_===e,Nme=[];function RG(n,e,t,i){const r=Vf(n),a=n.type_;if(i!==void 0&&NN(r,i,a)===e){bT(r,i,t,a);return}if(!n.draftLocations_){const l=n.draftLocations_=new Map;vM(r,(c,f)=>{if(ah(f)){const p=l.get(f)||[];p.push(c),l.set(f,p)}})}const s=n.draftLocations_.get(e)??Nme;for(const l of s)bT(r,l,t,a)}function Ome(n,e,t){n.callbacks_.push(function(r){var l;const a=e;if(!a||!SM(a,r))return;(l=r.mapSetPlugin_)==null||l.fixSetContents(a);const s=E3(a);RG(n,a.draft_??a,s,t),NG(a,r)})}function NG(n,e){var i;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((i=n.assigned_)==null?void 0:i.size)??0)>0)){const{patchPlugin_:r}=e;if(r){const a=r.getPath(n);a&&r.generatePatches_(n,a,e)}PG(n)}}function Dme(n,e,t){const{scope_:i}=n;if(ah(t)){const r=t[Zs];SM(r,i)&&r.callbacks_.push(function(){Hw(n);const s=E3(r);RG(n,t,s,e)})}else Lu(t)&&n.callbacks_.push(function(){const a=Vf(n);n.type_===3?a.has(t)&&ST(t,i.handledSet_,i):NN(a,e,n.type_)===t&&i.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&ST(NN(n.copy_,e,n.type_),i.handledSet_,i)})}function ST(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||ah(n)||e.has(n)||!Lu(n)||xM(n)||(e.add(n),vM(n,(i,r)=>{if(ah(r)){const a=r[Zs];if(SM(a,t)){const s=E3(a);bT(n,i,s,n.type_),PG(a)}}else Lu(r)&&ST(r,e,t)})),n}function Lme(n,e){const t=yM(n),i={type_:t?1:0,scope_:e?e.scope_:IG(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=i,a=wT;t&&(r=[i],a=$b);const{revoke:s,proxy:l}=Proxy.revocable(r,a);return i.draft_=l,i.revoke_=s,[l,i]}var wT={get(n,e){if(e===Zs)return n;let t=n.scope_.arrayMethodsPlugin_;const i=n.type_===1&&typeof e=="string";if(i&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const r=Vf(n);if(!yB(r,e,n.type_))return kme(n,r,e);const a=r[e];if(n.finalized_||!Lu(a)||i&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&Mme(e))return a;if(a===qP(n.base_,e)){Hw(n);const s=n.type_===1?+e:e,l=zN(n.scope_,a,n,s);return n.copy_[s]=l}return a},has(n,e){return e in Vf(n)},ownKeys(n){return Reflect.ownKeys(Vf(n))},set(n,e,t){const i=OG(Vf(n),e);if(i!=null&&i.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const r=qP(Vf(n),e),a=r==null?void 0:r[Zs];if(a&&a.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(Ame(t,r)&&(t!==void 0||yB(n.base_,e,n.type_)))return!0;Hw(n),UN(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),Dme(n,e,t)),!0},deleteProperty(n,e){return Hw(n),qP(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),UN(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Vf(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{[jw]:!0,[RN]:n.type_!==1||e!=="length",[_T]:i[_T],[Wb]:t[e]}},defineProperty(){Eu(11)},getPrototypeOf(n){return My(n.base_)},setPrototypeOf(){Eu(12)}},$b={};for(let n in wT){let e=wT[n];$b[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}$b.deleteProperty=function(n,e){return $b.set.call(this,n,e,void 0)};$b.set=function(n,e,t){return wT.set.call(this,n[0],e,t,n[0])};function qP(n,e){const t=n[Zs];return(t?Vf(t):n)[e]}function kme(n,e,t){var r;const i=OG(e,t);return i?Wb in i?i[Wb]:(r=i.get)==null?void 0:r.call(n.draft_):void 0}function OG(n,e){if(!(e in n))return;let t=My(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=My(t)}}function UN(n){n.modified_||(n.modified_=!0,n.parent_&&UN(n.parent_))}function Hw(n){n.copy_||(n.assigned_=new Map,n.copy_=ON(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var Ume=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,i,r)=>{if(Hv(t)&&!Hv(i)){const s=i;i=t;const l=this;return function(f=s,...p){return l.produce(f,g=>i.call(this,g,...p))}}Hv(i)||Eu(6),r!==void 0&&!Hv(r)&&Eu(7);let a;if(Lu(t)){const s=SB(this),l=zN(s,t,void 0);let c=!0;try{a=i(l),c=!1}finally{c?LN(s):kN(s)}return xB(s,r),wB(a,s)}else if(!t||!w3(t)){if(a=i(t),a===void 0&&(a=t),a===AG&&(a=void 0),this.autoFreeze_&&T3(a,!0),r){const s=[],l=[];Zm(DN).generateReplacementPatches_(t,a,{patches_:s,inversePatches_:l}),r(s,l)}return a}else Eu(1,t)},this.produceWithPatches=(t,i)=>{if(Hv(t))return(l,...c)=>this.produceWithPatches(l,f=>t(f,...c));let r,a;return[this.produce(t,i,(l,c)=>{r=l,a=c}),r,a]},WP(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),WP(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),WP(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Lu(e)||Eu(8),ah(e)&&(e=Ou(e));const t=SB(this),i=zN(t,e,void 0);return i[Zs].isManual_=!0,kN(t),i}finishDraft(e,t){const i=e&&e[Zs];(!i||!i.isManual_)&&Eu(9);const{scope_:r}=i;return xB(r,t),wB(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let i;for(i=t.length-1;i>=0;i--){const a=t[i];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}i>-1&&(t=t.slice(i+1));const r=Zm(DN).applyPatches_;return ah(e)?r(e,t):this.produce(e,a=>r(a,t))}};function zN(n,e,t,i){const[r,a]=_M(e)?Zm(xT).proxyMap_(e,t):bM(e)?Zm(xT).proxySet_(e,t):Lme(e,t);return((t==null?void 0:t.scope_)??IG()).drafts_.push(r),a.callbacks_=(t==null?void 0:t.callbacks_)??[],a.key_=i,t&&i!==void 0?Ome(t,a,i):a.callbacks_.push(function(c){var p;(p=c.mapSetPlugin_)==null||p.fixSetContents(a);const{patchPlugin_:f}=c;a.modified_&&f&&f.generatePatches_(a,[],c)}),r}function Ou(n){return ah(n)||Eu(10,n),DG(n)}function DG(n){if(!Lu(n)||xM(n))return n;const e=n[Zs];let t,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=ON(n,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else t=ON(n,!0);return vM(t,(r,a)=>{bT(t,r,DG(a))},i),e&&(e.finalized_=!1),t}var zme=new Ume,LG=zme.produce;function kG(n){return({dispatch:t,getState:i})=>r=>a=>typeof a=="function"?a(t,i,n):r(a)}var Fme=kG(),Bme=kG,Vme=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?vT:vT.apply(null,arguments)};function Wl(n,e){function t(...i){if(e){let r=e(...i);if(!r)throw new Error(nl(0));return{type:n,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>TG(i)&&i.type===n,t}var UG=class Y_ extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Y_.prototype)}static get[Symbol.species](){return Y_}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Y_(...e[0].concat(this)):new Y_(...e.concat(this))}};function TB(n){return Lu(n)?LG(n,()=>{}):n}function pw(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function jme(n){return typeof n=="boolean"}var Hme=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:a=!0}=e??{};let s=new UG;return t&&(jme(t)?s.push(Fme):s.push(Bme(t.extraArgument))),s},zG="RTK_autoBatch",rr=()=>n=>({payload:n,meta:{[zG]:!0}}),AB=n=>e=>{setTimeout(e,n)},FG=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let r=!0,a=!1,s=!1;const l=new Set,c=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:AB(10):n.type==="callback"?n.queueNotification:AB(n.timeout),f=()=>{s=!1,a&&(a=!1,l.forEach(p=>p()))};return Object.assign({},i,{subscribe(p){const g=()=>r&&p(),v=i.subscribe(g);return l.add(p),()=>{v(),l.delete(p)}},dispatch(p){var g;try{return r=!((g=p==null?void 0:p.meta)!=null&&g[zG]),a=!r,a&&(s||(s=!0,c(f))),i.dispatch(p)}finally{r=!0}}})},Gme=n=>function(t){const{autoBatch:i=!0}=t??{};let r=new UG(n);return i&&r.push(FG(typeof i=="object"?i:void 0)),r};function Wme(n){const e=Hme(),{reducer:t=void 0,middleware:i,devTools:r=!0,preloadedState:a=void 0,enhancers:s=void 0}=n||{};let l;if(typeof t=="function")l=t;else if(S3(t))l=EG(t);else throw new Error(nl(1));let c;typeof i=="function"?c=i(e):c=e();let f=vT;r&&(f=Vme({trace:!1,...typeof r=="object"&&r}));const p=Eme(...c),g=Gme(p);let v=typeof s=="function"?s(g):g();const _=f(...v);return wG(l,a,_)}function BG(n){const e={},t=[];let i;const r={addCase(a,s){const l=typeof a=="string"?a:a.type;if(!l)throw new Error(nl(28));if(l in e)throw new Error(nl(29));return e[l]=s,r},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&t.push({matcher:a.settled,reducer:s.settled}),r},addMatcher(a,s){return t.push({matcher:a,reducer:s}),r},addDefaultCase(a){return i=a,r}};return n(r),[e,t,i]}function qme(n){return typeof n=="function"}function $me(n,e){let[t,i,r]=BG(e),a;if(qme(n))a=()=>TB(n());else{const l=TB(n);a=()=>l}function s(l=a(),c){let f=[t[c.type],...i.filter(({matcher:p})=>p(c)).map(({reducer:p})=>p)];return f.filter(p=>!!p).length===0&&(f=[r]),f.reduce((p,g)=>{if(g)if(ah(p)){const _=g(p,c);return _===void 0?p:_}else{if(Lu(p))return LG(p,v=>g(v,c));{const v=g(p,c);if(v===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return p},l)}return s.getInitialState=a,s}var Xme="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Yme=(n=21)=>{let e="",t=n;for(;t--;)e+=Xme[Math.random()*64|0];return e},Kme=Symbol.for("rtk-slice-createasyncthunk");function Zme(n,e){return`${n}/${e}`}function Qme({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[Kme];return function(r){const{name:a,reducerPath:s=a}=r;if(!a)throw new Error(nl(11));const l=(typeof r.reducers=="function"?r.reducers(ege()):r.reducers)||{},c=Object.keys(l),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(O,F){const B=typeof O=="string"?O:O.type;if(!B)throw new Error(nl(12));if(B in f.sliceCaseReducersByType)throw new Error(nl(13));return f.sliceCaseReducersByType[B]=F,p},addMatcher(O,F){return f.sliceMatchers.push({matcher:O,reducer:F}),p},exposeAction(O,F){return f.actionCreators[O]=F,p},exposeCaseReducer(O,F){return f.sliceCaseReducersByName[O]=F,p}};c.forEach(O=>{const F=l[O],B={reducerName:O,type:Zme(a,O),createNotation:typeof r.reducers=="function"};nge(F)?rge(B,F,p,e):tge(B,F,p)});function g(){const[O={},F=[],B=void 0]=typeof r.extraReducers=="function"?BG(r.extraReducers):[r.extraReducers],L={...O,...f.sliceCaseReducersByType};return $me(r.initialState,z=>{for(let P in L)z.addCase(P,L[P]);for(let P of f.sliceMatchers)z.addMatcher(P.matcher,P.reducer);for(let P of F)z.addMatcher(P.matcher,P.reducer);B&&z.addDefaultCase(B)})}const v=O=>O,_=new Map,x=new WeakMap;let T;function S(O,F){return T||(T=g()),T(O,F)}function w(){return T||(T=g()),T.getInitialState()}function I(O,F=!1){function B(z){let P=z[O];return typeof P>"u"&&F&&(P=pw(x,B,w)),P}function L(z=v){const P=pw(_,F,()=>new WeakMap);return pw(P,z,()=>{const D={};for(const[j,q]of Object.entries(r.selectors??{}))D[j]=Jme(q,z,()=>pw(x,z,w),F);return D})}return{reducerPath:O,getSelectors:L,get selectors(){return L(B)},selectSlice:B}}const R={name:a,reducer:S,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:w,...I(s),injectInto(O,{reducerPath:F,...B}={}){const L=F??s;return O.inject({reducerPath:L,reducer:S},B),{...R,...I(L,!0)}}};return R}}function Jme(n,e,t,i){function r(a,...s){let l=e(a);return typeof l>"u"&&i&&(l=t()),n(l,...s)}return r.unwrapped=n,r}var Oo=Qme();function ege(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function tge({type:n,reducerName:e,createNotation:t},i,r){let a,s;if("reducer"in i){if(t&&!ige(i))throw new Error(nl(17));a=i.reducer,s=i.prepare}else a=i;r.addCase(n,a).exposeCaseReducer(e,a).exposeAction(e,s?Wl(n,s):Wl(n))}function nge(n){return n._reducerDefinitionType==="asyncThunk"}function ige(n){return n._reducerDefinitionType==="reducerWithPrepare"}function rge({type:n,reducerName:e},t,i,r){if(!r)throw new Error(nl(18));const{payloadCreator:a,fulfilled:s,pending:l,rejected:c,settled:f,options:p}=t,g=r(n,a,p);i.exposeAction(e,g),s&&i.addCase(g.fulfilled,s),l&&i.addCase(g.pending,l),c&&i.addCase(g.rejected,c),f&&i.addMatcher(g.settled,f),i.exposeCaseReducer(e,{fulfilled:s||mw,pending:l||mw,rejected:c||mw,settled:f||mw})}function mw(){}var age="task",VG="listener",jG="completed",A3="cancelled",sge=`task-${A3}`,oge=`task-${jG}`,FN=`${VG}-${A3}`,lge=`${VG}-${jG}`,wM=class{constructor(n){CC(this,"name","TaskAbortError");CC(this,"message");this.code=n,this.message=`${age} ${A3} (reason: ${n})`}},M3=(n,e)=>{if(typeof n!="function")throw new TypeError(nl(32))},ET=()=>{},HG=(n,e=ET)=>(n.catch(e),n),GG=(n,e)=>(n.addEventListener("abort",e,{once:!0}),()=>n.removeEventListener("abort",e)),Lm=n=>{if(n.aborted)throw new wM(n.reason)};function WG(n,e){let t=ET;return new Promise((i,r)=>{const a=()=>r(new wM(n.reason));if(n.aborted){a();return}t=GG(n,a),e.finally(()=>t()).then(i,r)}).finally(()=>{t=ET})}var uge=async(n,e)=>{try{return await Promise.resolve(),{status:"ok",value:await n()}}catch(t){return{status:t instanceof wM?"cancelled":"rejected",error:t}}finally{e==null||e()}},TT=n=>e=>HG(WG(n,e).then(t=>(Lm(n),t))),qG=n=>{const e=TT(n);return t=>e(new Promise(i=>setTimeout(i,t)))},{assign:ry}=Object,MB={},EM="listenerMiddleware",cge=(n,e)=>{const t=i=>GG(n,()=>i.abort(n.reason));return(i,r)=>{M3(i);const a=new AbortController;t(a);const s=uge(async()=>{Lm(n),Lm(a.signal);const l=await i({pause:TT(a.signal),delay:qG(a.signal),signal:a.signal});return Lm(a.signal),l},()=>a.abort(oge));return r!=null&&r.autoJoin&&e.push(s.catch(ET)),{result:TT(n)(s),cancel(){a.abort(sge)}}}},fge=(n,e)=>{const t=async(i,r)=>{Lm(e);let a=()=>{};const l=[new Promise((c,f)=>{let p=n({predicate:i,effect:(g,v)=>{v.unsubscribe(),c([g,v.getState(),v.getOriginalState()])}});a=()=>{p(),f()}})];r!=null&&l.push(new Promise(c=>setTimeout(c,r,null)));try{const c=await WG(e,Promise.race(l));return Lm(e),c}finally{a()}};return(i,r)=>HG(t(i,r))},$G=n=>{let{type:e,actionCreator:t,matcher:i,predicate:r,effect:a}=n;if(e)r=Wl(e).match;else if(t)e=t.type,r=t.match;else if(i)r=i;else if(!r)throw new Error(nl(21));return M3(a),{predicate:r,type:e,effect:a}},XG=ry(n=>{const{type:e,predicate:t,effect:i}=$G(n);return{id:Yme(),effect:i,type:e,predicate:t,pending:new Set,unsubscribe:()=>{throw new Error(nl(22))}}},{withTypes:()=>XG}),CB=(n,e)=>{const{type:t,effect:i,predicate:r}=$G(e);return Array.from(n.values()).find(a=>(typeof t=="string"?a.type===t:a.predicate===r)&&a.effect===i)},BN=n=>{n.pending.forEach(e=>{e.abort(FN)})},hge=(n,e)=>()=>{for(const t of e.keys())BN(t);n.clear()},IB=(n,e,t)=>{try{n(e,t)}catch(i){setTimeout(()=>{throw i},0)}},YG=ry(Wl(`${EM}/add`),{withTypes:()=>YG}),dge=Wl(`${EM}/removeAll`),KG=ry(Wl(`${EM}/remove`),{withTypes:()=>KG}),pge=(...n)=>{console.error(`${EM}/error`,...n)},Ix=(n={})=>{const e=new Map,t=new Map,i=_=>{const x=t.get(_)??0;t.set(_,x+1)},r=_=>{const x=t.get(_)??1;x===1?t.delete(_):t.set(_,x-1)},{extra:a,onError:s=pge}=n;M3(s);const l=_=>(_.unsubscribe=()=>e.delete(_.id),e.set(_.id,_),x=>{_.unsubscribe(),x!=null&&x.cancelActive&&BN(_)}),c=_=>{const x=CB(e,_)??XG(_);return l(x)};ry(c,{withTypes:()=>c});const f=_=>{const x=CB(e,_);return x&&(x.unsubscribe(),_.cancelActive&&BN(x)),!!x};ry(f,{withTypes:()=>f});const p=async(_,x,T,S)=>{const w=new AbortController,I=fge(c,w.signal),R=[];try{_.pending.add(w),i(_),await Promise.resolve(_.effect(x,ry({},T,{getOriginalState:S,condition:(O,F)=>I(O,F).then(Boolean),take:I,delay:qG(w.signal),pause:TT(w.signal),extra:a,signal:w.signal,fork:cge(w.signal,R),unsubscribe:_.unsubscribe,subscribe:()=>{e.set(_.id,_)},cancelActiveListeners:()=>{_.pending.forEach((O,F,B)=>{O!==w&&(O.abort(FN),B.delete(O))})},cancel:()=>{w.abort(FN),_.pending.delete(w)},throwIfCancelled:()=>{Lm(w.signal)}})))}catch(O){O instanceof wM||IB(s,O,{raisedBy:"effect"})}finally{await Promise.all(R),w.abort(lge),r(_),_.pending.delete(w)}},g=hge(e,t);return{middleware:_=>x=>T=>{if(!TG(T))return x(T);if(YG.match(T))return c(T.payload);if(dge.match(T)){g();return}if(KG.match(T))return f(T.payload);let S=_.getState();const w=()=>{if(S===MB)throw new Error(nl(23));return S};let I;try{if(I=x(T),e.size>0){const R=_.getState(),O=Array.from(e.values());for(const F of O){let B=!1;try{B=F.predicate(T,R,S)}catch(L){B=!1,IB(s,L,{raisedBy:"predicate"})}B&&p(F,T,_,w)}}}finally{S=MB}return I},startListening:c,stopListening:f,clearListeners:g}};function nl(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var mge={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},ZG=Oo({name:"chartLayout",initialState:mge,reducers:{setLayout(n,e){n.layoutType=e.payload},setChartSize(n,e){n.width=e.payload.width,n.height=e.payload.height},setMargin(n,e){var t,i,r,a;n.margin.top=(t=e.payload.top)!==null&&t!==void 0?t:0,n.margin.right=(i=e.payload.right)!==null&&i!==void 0?i:0,n.margin.bottom=(r=e.payload.bottom)!==null&&r!==void 0?r:0,n.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(n,e){n.scale=e.payload}}}),{setMargin:gge,setLayout:vge,setChartSize:yge,setScale:_ge}=ZG.actions,bge=ZG.reducer;function QG(n,e,t){return Array.isArray(n)&&n&&e+t!==0?n.slice(e,t+1):n}function Kn(n){return Number.isFinite(n)}function Kc(n){return typeof n=="number"&&n>0&&Number.isFinite(n)}function PB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function $v(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PB(Object(t),!0).forEach(function(i){xge(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):PB(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function xge(n,e,t){return(e=Sge(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Sge(n){var e=wge(n,"string");return typeof e=="symbol"?e:e+""}function wge(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Qa(n,e,t){return Ms(n)||Ms(e)?t:Yc(e)?pM(n,e,t):typeof e=="function"?e(n):t}var Ege=(n,e,t)=>{if(e&&t){var{width:i,height:r}=t,{align:a,verticalAlign:s,layout:l}=e;if((l==="vertical"||l==="horizontal"&&s==="middle")&&a!=="center"&&qt(n[a]))return $v($v({},n),{},{[a]:n[a]+(i||0)});if((l==="horizontal"||l==="vertical"&&a==="center")&&s!=="middle"&&qt(n[s]))return $v($v({},n),{},{[s]:n[s]+(r||0)})}return n},ef=(n,e)=>n==="horizontal"&&e==="xAxis"||n==="vertical"&&e==="yAxis"||n==="centric"&&e==="angleAxis"||n==="radial"&&e==="radiusAxis",JG=(n,e,t,i)=>{if(i)return n.map(l=>l.coordinate);var r,a,s=n.map(l=>(l.coordinate===e&&(r=!0),l.coordinate===t&&(a=!0),l.coordinate));return r||s.push(e),a||s.push(t),s},e7=(n,e,t)=>{if(!n)return null;var{duplicateDomain:i,type:r,range:a,scale:s,realScaleType:l,isCategorical:c,categoricalDomain:f,tickCount:p,ticks:g,niceTicks:v,axisType:_}=n;if(!s)return null;var x=l==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,T=r==="category"&&s.bandwidth?s.bandwidth()/x:0;if(T=_==="angleAxis"&&a&&a.length>=2?Fl(a[0]-a[1])*2*T:T,g||v){var S=(g||v||[]).map((w,I)=>{var R=i?i.indexOf(w):w,O=s.map(R);return Kn(O)?{coordinate:O+T,value:w,offset:T,index:I}:null}).filter(Ro);return S}return c&&f?f.map((w,I)=>{var R=s.map(w);return Kn(R)?{coordinate:R+T,value:w,index:I,offset:T}:null}).filter(Ro):s.ticks&&p!=null?s.ticks(p).map((w,I)=>{var R=s.map(w);return Kn(R)?{coordinate:R+T,value:w,index:I,offset:T}:null}).filter(Ro):s.domain().map((w,I)=>{var R=s.map(w);return Kn(R)?{coordinate:R+T,value:i?i[w]:w,index:I,offset:T}:null}).filter(Ro)},Tge=n=>{var e,t=n.length;if(!(t<=0)){var i=(e=n[0])===null||e===void 0?void 0:e.length;if(!(i==null||i<=0))for(var r=0;r<i;++r)for(var a=0,s=0,l=0;l<t;++l){var c=n[l],f=c==null?void 0:c[r];if(f!=null){var p=f[1],g=f[0],v=Xc(p)?g:p;v>=0?(f[0]=a,a+=v,f[1]=a):(f[0]=s,s+=v,f[1]=s)}}}},Age=n=>{var e,t=n.length;if(!(t<=0)){var i=(e=n[0])===null||e===void 0?void 0:e.length;if(!(i==null||i<=0))for(var r=0;r<i;++r)for(var a=0,s=0;s<t;++s){var l=n[s],c=l==null?void 0:l[r];if(c!=null){var f=Xc(c[1])?c[0]:c[1];f>=0?(c[0]=a,a+=f,c[1]=a):(c[0]=0,c[1]=0)}}}},Mge={sign:Tge,expand:gpe,none:Ym,silhouette:vpe,wiggle:ype,positive:Age},Cge=(n,e,t)=>{var i,r=(i=Mge[t])!==null&&i!==void 0?i:Ym,a=mpe().keys(e).value((l,c)=>Number(Qa(l,c,0))).order(PN).offset(r),s=a(n);return s.forEach((l,c)=>{l.forEach((f,p)=>{var g=Qa(n[p],e[c],0);Array.isArray(g)&&g.length===2&&qt(g[0])&&qt(g[1])&&(f[0]=g[0],f[1]=g[1])})}),s};function Ige(n){return n==null?void 0:String(n)}function RB(n){var{axis:e,ticks:t,bandSize:i,entry:r,index:a,dataKey:s}=n;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Ms(r[e.dataKey])){var l=uG(t,"value",r[e.dataKey]);if(l)return l.coordinate+i/2}return t!=null&&t[a]?t[a].coordinate+i/2:null}var c=Qa(r,Ms(s)?e.dataKey:s),f=e.scale.map(c);return qt(f)?f:null}var Pge=n=>{var e=n.flat(2).filter(qt);return[Math.min(...e),Math.max(...e)]},Rge=n=>[n[0]===1/0?0:n[0],n[1]===-1/0?0:n[1]],Nge=(n,e,t)=>{if(n!=null)return Rge(Object.keys(n).reduce((i,r)=>{var a=n[r];if(!a)return i;var{stackedData:s}=a,l=s.reduce((c,f)=>{var p=QG(f,e,t),g=Pge(p);return!Kn(g[0])||!Kn(g[1])?c:[Math.min(c[0],g[0]),Math.max(c[1],g[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]))},NB=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,OB=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,AT=(n,e,t)=>{if(n&&n.scale&&n.scale.bandwidth){var i=n.scale.bandwidth();if(!t||i>0)return i}if(n&&e&&e.length>=2){for(var r=mM(e,p=>p.coordinate),a=1/0,s=1,l=r.length;s<l;s++){var c=r[s],f=r[s-1];a=Math.min(((c==null?void 0:c.coordinate)||0)-((f==null?void 0:f.coordinate)||0),a)}return a===1/0?0:a}return t?void 0:0};function DB(n){var{tooltipEntrySettings:e,dataKey:t,payload:i,value:r,name:a}=n;return $v($v({},e),{},{dataKey:t,payload:i,value:r,name:a})}function t7(n,e){if(n)return String(n);if(typeof e=="string")return e}var Oge=(n,e)=>{if(e==="horizontal")return n.chartX;if(e==="vertical")return n.chartY},Dge=(n,e)=>e==="centric"?n.angle:n.radius,hh=n=>n.layout.width,dh=n=>n.layout.height,Lge=n=>n.layout.scale,n7=n=>n.layout.margin,TM=Ge(n=>n.cartesianAxis.xAxis,n=>Object.values(n)),AM=Ge(n=>n.cartesianAxis.yAxis,n=>Object.values(n)),kge="data-recharts-item-index",Uge="data-recharts-item-id",Px=60;function LB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function gw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?LB(Object(t),!0).forEach(function(i){zge(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):LB(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function zge(n,e,t){return(e=Fge(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Fge(n){var e=Bge(n,"string");return typeof e=="symbol"?e:e+""}function Bge(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Vge=n=>n.brush.height;function jge(n){var e=AM(n);return e.reduce((t,i)=>{if(i.orientation==="left"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:Px;return t+r}return t},0)}function Hge(n){var e=AM(n);return e.reduce((t,i)=>{if(i.orientation==="right"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:Px;return t+r}return t},0)}function Gge(n){var e=TM(n);return e.reduce((t,i)=>i.orientation==="top"&&!i.mirror&&!i.hide?t+i.height:t,0)}function Wge(n){var e=TM(n);return e.reduce((t,i)=>i.orientation==="bottom"&&!i.mirror&&!i.hide?t+i.height:t,0)}var ts=Ge([hh,dh,n7,Vge,jge,Hge,Gge,Wge,SG,yme],(n,e,t,i,r,a,s,l,c,f)=>{var p={left:(t.left||0)+r,right:(t.right||0)+a},g={top:(t.top||0)+s,bottom:(t.bottom||0)+l},v=gw(gw({},g),p),_=v.bottom;v.bottom+=i,v=Ege(v,c,f);var x=n-v.left-v.right,T=e-v.top-v.bottom;return gw(gw({brushBottom:_},v),{},{width:Math.max(x,0),height:Math.max(T,0)})}),qge=Ge(ts,n=>({x:n.left,y:n.top,width:n.width,height:n.height})),i7=Ge(hh,dh,(n,e)=>({x:0,y:0,width:n,height:e})),$ge=H.createContext(null),Do=()=>H.useContext($ge)!=null,MM=n=>n.brush,CM=Ge([MM,ts,n7],(n,e,t)=>({height:n.height,x:qt(n.x)?n.x:e.left,y:qt(n.y)?n.y:e.top+e.height+e.brushBottom-((t==null?void 0:t.bottom)||0),width:qt(n.width)?n.width:e.width})),$P={},XP={},YP={},kB;function Xge(){return kB||(kB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,i,{signal:r,edges:a}={}){let s,l=null;const c=a!=null&&a.includes("leading"),f=a==null||a.includes("trailing"),p=()=>{l!==null&&(t.apply(s,l),s=void 0,l=null)},g=()=>{f&&p(),T()};let v=null;const _=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,g()},i)},x=()=>{v!==null&&(clearTimeout(v),v=null)},T=()=>{x(),s=void 0,l=null},S=()=>{p()},w=function(...I){if(r!=null&&r.aborted)return;s=this,l=I;const R=v==null;_(),c&&R&&p()};return w.schedule=_,w.cancel=T,w.flush=S,r==null||r.addEventListener("abort",T,{once:!0}),w}n.debounce=e})(YP)),YP}var UB;function Yge(){return UB||(UB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Xge();function t(i,r=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:l=!0,maxWait:c}=a,f=Array(2);s&&(f[0]="leading"),l&&(f[1]="trailing");let p,g=null;const v=e.debounce(function(...T){p=i.apply(this,T),g=null},r,{edges:f}),_=function(...T){return c!=null&&(g===null&&(g=Date.now()),Date.now()-g>=c)?(p=i.apply(this,T),g=Date.now(),v.cancel(),v.schedule(),p):(v.apply(this,T),p)},x=()=>(v.flush(),p);return _.cancel=v.cancel,_.flush=x,_}n.debounce=t})(XP)),XP}var zB;function Kge(){return zB||(zB=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Yge();function t(i,r=0,a={}){const{leading:s=!0,trailing:l=!0}=a;return e.debounce(i,r,{leading:s,maxWait:r,trailing:l})}n.throttle=t})($P)),$P}var KP,FB;function Zge(){return FB||(FB=1,KP=Kge().throttle),KP}var Qge=Zge();const Jge=ku(Qge);var MT=function(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(t===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(t===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(t.replace(/%s/g,()=>r[s++]))}},Nc={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},r7=(n,e,t)=>{var{width:i=Nc.width,height:r=Nc.height,aspect:a,maxHeight:s}=t,l=Km(i)?n:Number(i),c=Km(r)?e:Number(r);return a&&a>0&&(l?c=l/a:c&&(l=c*a),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:l,calculatedHeight:c}},eve={width:0,height:0,overflow:"visible"},tve={width:0,overflowX:"visible"},nve={height:0,overflowY:"visible"},ive={},rve=n=>{var{width:e,height:t}=n,i=Km(e),r=Km(t);return i&&r?eve:i?tve:r?nve:ive};function ave(n){var{width:e,height:t,aspect:i}=n,r=e,a=t;return r===void 0&&a===void 0?(r=Nc.width,a=Nc.height):r===void 0?r=i&&i>0?void 0:Nc.width:a===void 0&&(a=i&&i>0?void 0:Nc.height),{width:r,height:a}}function VN(){return VN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},VN.apply(null,arguments)}function BB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function VB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?BB(Object(t),!0).forEach(function(i){sve(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):BB(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function sve(n,e,t){return(e=ove(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ove(n){var e=lve(n,"string");return typeof e=="symbol"?e:e+""}function lve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var a7=H.createContext(Nc.initialDimension);function uve(n){return Kc(n.width)&&Kc(n.height)}function s7(n){var{children:e,width:t,height:i}=n,r=H.useMemo(()=>({width:t,height:i}),[t,i]);return uve(r)?H.createElement(a7.Provider,{value:r},e):null}var C3=()=>H.useContext(a7),cve=H.forwardRef((n,e)=>{var{aspect:t,initialDimension:i=Nc.initialDimension,width:r,height:a,minWidth:s=Nc.minWidth,minHeight:l,maxHeight:c,children:f,debounce:p=Nc.debounce,id:g,className:v,onResize:_,style:x={}}=n,T=H.useRef(null),S=H.useRef();S.current=_,H.useImperativeHandle(e,()=>T.current);var[w,I]=H.useState({containerWidth:i.width,containerHeight:i.height}),R=H.useCallback((z,P)=>{I(D=>{var j=Math.round(z),q=Math.round(P);return D.containerWidth===j&&D.containerHeight===q?D:{containerWidth:j,containerHeight:q}})},[]);H.useEffect(()=>{if(T.current==null||typeof ResizeObserver>"u")return qy;var z=q=>{var W,se=q[0];if(se!=null){var{width:ue,height:J}=se.contentRect;R(ue,J),(W=S.current)===null||W===void 0||W.call(S,ue,J)}};p>0&&(z=Jge(z,p,{trailing:!0,leading:!1}));var P=new ResizeObserver(z),{width:D,height:j}=T.current.getBoundingClientRect();return R(D,j),P.observe(T.current),()=>{P.disconnect()}},[R,p]);var{containerWidth:O,containerHeight:F}=w;MT(!t||t>0,"The aspect(%s) must be greater than zero.",t);var{calculatedWidth:B,calculatedHeight:L}=r7(O,F,{width:r,height:a,aspect:t,maxHeight:c});return MT(B!=null&&B>0||L!=null&&L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,L,r,a,s,l,t),H.createElement("div",{id:g?"".concat(g):void 0,className:Zi("recharts-responsive-container",v),style:VB(VB({},x),{},{width:r,height:a,minWidth:s,minHeight:l,maxHeight:c}),ref:T},H.createElement("div",{style:rve({width:r,height:a})},H.createElement(s7,{width:B,height:L},f)))}),fve=H.forwardRef((n,e)=>{var t=C3();if(Kc(t.width)&&Kc(t.height))return n.children;var{width:i,height:r}=ave({width:n.width,height:n.height,aspect:n.aspect}),{calculatedWidth:a,calculatedHeight:s}=r7(void 0,void 0,{width:i,height:r,aspect:n.aspect,maxHeight:n.maxHeight});return qt(a)&&qt(s)?H.createElement(s7,{width:a,height:s},n.children):H.createElement(cve,VN({},n,{width:i,height:r,ref:e}))});function I3(n){if(n)return{x:n.x,y:n.y,upperWidth:"upperWidth"in n?n.upperWidth:n.width,lowerWidth:"lowerWidth"in n?n.lowerWidth:n.width,width:n.width,height:n.height}}var IM=()=>{var n,e=Do(),t=sn(qge),i=sn(CM),r=(n=sn(MM))===null||n===void 0?void 0:n.padding;return!e||!i||!r?t:{width:i.width-r.left-r.right,height:i.height-r.top-r.bottom,x:r.left,y:r.top}},hve={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},o7=()=>{var n;return(n=sn(ts))!==null&&n!==void 0?n:hve},l7=()=>sn(hh),u7=()=>sn(dh),sr=n=>n.layout.layoutType,$y=()=>sn(sr),P3=()=>{var n=$y();if(n==="horizontal"||n==="vertical")return n},c7=n=>{var e=n.layout.layoutType;if(e==="centric"||e==="radial")return e},dve=()=>{var n=$y();return n!==void 0},Rx=n=>{var e=Ta(),t=Do(),{width:i,height:r}=n,a=C3(),s=i,l=r;return a&&(s=a.width>0?a.width:i,l=a.height>0?a.height:r),H.useEffect(()=>{!t&&Kc(s)&&Kc(l)&&e(yge({width:s,height:l}))},[e,t,s,l]),null},f7=Symbol.for("immer-nothing"),jB=Symbol.for("immer-draftable"),rl=Symbol.for("immer-state");function Tu(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Xb=Object.getPrototypeOf;function Cy(n){return!!n&&!!n[rl]}function Qm(n){var e;return n?h7(n)||Array.isArray(n)||!!n[jB]||!!((e=n.constructor)!=null&&e[jB])||Nx(n)||RM(n):!1}var pve=Object.prototype.constructor.toString(),HB=new WeakMap;function h7(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);if(e===null||e===Object.prototype)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(t===Object)return!0;if(typeof t!="function")return!1;let i=HB.get(t);return i===void 0&&(i=Function.toString.call(t),HB.set(t,i)),i===pve}function CT(n,e,t=!0){PM(n)===0?(t?Reflect.ownKeys(n):Object.keys(n)).forEach(r=>{e(r,n[r],n)}):n.forEach((i,r)=>e(r,i,n))}function PM(n){const e=n[rl];return e?e.type_:Array.isArray(n)?1:Nx(n)?2:RM(n)?3:0}function jN(n,e){return PM(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function d7(n,e,t){const i=PM(n);i===2?n.set(e,t):i===3?n.add(t):n[e]=t}function mve(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function Nx(n){return n instanceof Map}function RM(n){return n instanceof Set}function pm(n){return n.copy_||n.base_}function HN(n,e){if(Nx(n))return new Map(n);if(RM(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=h7(n);if(e===!0||e==="class_only"&&!t){const i=Object.getOwnPropertyDescriptors(n);delete i[rl];let r=Reflect.ownKeys(i);for(let a=0;a<r.length;a++){const s=r[a],l=i[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(i[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:n[s]})}return Object.create(Xb(n),i)}else{const i=Xb(n);if(i!==null&&t)return{...n};const r=Object.create(i);return Object.assign(r,n)}}function R3(n,e=!1){return NM(n)||Cy(n)||!Qm(n)||(PM(n)>1&&Object.defineProperties(n,{set:vw,add:vw,clear:vw,delete:vw}),Object.freeze(n),e&&Object.values(n).forEach(t=>R3(t,!0))),n}function gve(){Tu(2)}var vw={value:gve};function NM(n){return n===null||typeof n!="object"?!0:Object.isFrozen(n)}var vve={};function Jm(n){const e=vve[n];return e||Tu(0,n),e}var Yb;function p7(){return Yb}function yve(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function GB(n,e){e&&(Jm("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function GN(n){WN(n),n.drafts_.forEach(_ve),n.drafts_=null}function WN(n){n===Yb&&(Yb=n.parent_)}function WB(n){return Yb=yve(Yb,n)}function _ve(n){const e=n[rl];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function qB(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[rl].modified_&&(GN(e),Tu(4)),Qm(n)&&(n=IT(e,n),e.parent_||PT(e,n)),e.patches_&&Jm("Patches").generateReplacementPatches_(t[rl].base_,n,e.patches_,e.inversePatches_)):n=IT(e,t,[]),GN(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==f7?n:void 0}function IT(n,e,t){if(NM(e))return e;const i=n.immer_.shouldUseStrictIteration(),r=e[rl];if(!r)return CT(e,(a,s)=>$B(n,r,e,a,s,t),i),e;if(r.scope_!==n)return e;if(!r.modified_)return PT(n,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let s=a,l=!1;r.type_===3&&(s=new Set(a),a.clear(),l=!0),CT(s,(c,f)=>$B(n,r,a,c,f,t,l),i),PT(n,a,!1),t&&n.patches_&&Jm("Patches").generatePatches_(r,t,n.patches_,n.inversePatches_)}return r.copy_}function $B(n,e,t,i,r,a,s){if(r==null||typeof r!="object"&&!s)return;const l=NM(r);if(!(l&&!s)){if(Cy(r)){const c=a&&e&&e.type_!==3&&!jN(e.assigned_,i)?a.concat(i):void 0,f=IT(n,r,c);if(d7(t,i,f),Cy(f))n.canAutoFreeze_=!1;else return}else s&&t.add(r);if(Qm(r)&&!l){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||e&&e.base_&&e.base_[i]===r&&l)return;IT(n,r),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&(Nx(t)?t.has(i):Object.prototype.propertyIsEnumerable.call(t,i))&&PT(n,r)}}}function PT(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&R3(e,t)}function bve(n,e){const t=Array.isArray(n),i={type_:t?1:0,scope_:e?e.scope_:p7(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,a=N3;t&&(r=[i],a=Kb);const{revoke:s,proxy:l}=Proxy.revocable(r,a);return i.draft_=l,i.revoke_=s,l}var N3={get(n,e){if(e===rl)return n;const t=pm(n);if(!jN(t,e))return xve(n,t,e);const i=t[e];return n.finalized_||!Qm(i)?i:i===ZP(n.base_,e)?(QP(n),n.copy_[e]=$N(i,n)):i},has(n,e){return e in pm(n)},ownKeys(n){return Reflect.ownKeys(pm(n))},set(n,e,t){const i=m7(pm(n),e);if(i!=null&&i.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const r=ZP(pm(n),e),a=r==null?void 0:r[rl];if(a&&a.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(mve(t,r)&&(t!==void 0||jN(n.base_,e)))return!0;QP(n),qN(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return ZP(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,QP(n),qN(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=pm(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty(){Tu(11)},getPrototypeOf(n){return Xb(n.base_)},setPrototypeOf(){Tu(12)}},Kb={};CT(N3,(n,e)=>{Kb[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Kb.deleteProperty=function(n,e){return Kb.set.call(this,n,e,void 0)};Kb.set=function(n,e,t){return N3.set.call(this,n[0],e,t,n[0])};function ZP(n,e){const t=n[rl];return(t?pm(t):n)[e]}function xve(n,e,t){var r;const i=m7(e,t);return i?"value"in i?i.value:(r=i.get)==null?void 0:r.call(n.draft_):void 0}function m7(n,e){if(!(e in n))return;let t=Xb(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Xb(t)}}function qN(n){n.modified_||(n.modified_=!0,n.parent_&&qN(n.parent_))}function QP(n){n.copy_||(n.copy_=HN(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var Sve=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,i)=>{if(typeof e=="function"&&typeof t!="function"){const a=t;t=e;const s=this;return function(c=a,...f){return s.produce(c,p=>t.call(this,p,...f))}}typeof t!="function"&&Tu(6),i!==void 0&&typeof i!="function"&&Tu(7);let r;if(Qm(e)){const a=WB(this),s=$N(e,void 0);let l=!0;try{r=t(s),l=!1}finally{l?GN(a):WN(a)}return GB(a,i),qB(r,a)}else if(!e||typeof e!="object"){if(r=t(e),r===void 0&&(r=e),r===f7&&(r=void 0),this.autoFreeze_&&R3(r,!0),i){const a=[],s=[];Jm("Patches").generateReplacementPatches_(e,r,a,s),i(a,s)}return r}else Tu(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,c=>e(c,...l));let i,r;return[this.produce(e,t,(s,l)=>{i=s,r=l}),i,r]},typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof(n==null?void 0:n.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),typeof(n==null?void 0:n.useStrictIteration)=="boolean"&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){Qm(n)||Tu(8),Cy(n)&&(n=wve(n));const e=WB(this),t=$N(n,void 0);return t[rl].isManual_=!0,WN(e),t}finishDraft(n,e){const t=n&&n[rl];(!t||!t.isManual_)&&Tu(9);const{scope_:i}=t;return GB(i,e),qB(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const r=e[t];if(r.path.length===0&&r.op==="replace"){n=r.value;break}}t>-1&&(e=e.slice(t+1));const i=Jm("Patches").applyPatches_;return Cy(n)?i(n,e):this.produce(n,r=>i(r,e))}};function $N(n,e){const t=Nx(n)?Jm("MapSet").proxyMap_(n,e):RM(n)?Jm("MapSet").proxySet_(n,e):bve(n,e);return(e?e.scope_:p7()).drafts_.push(t),t}function wve(n){return Cy(n)||Tu(10,n),g7(n)}function g7(n){if(!Qm(n)||NM(n))return n;const e=n[rl];let t,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=HN(n,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else t=HN(n,!0);return CT(t,(r,a)=>{d7(t,r,g7(a))},i),e&&(e.finalized_=!1),t}var Eve=new Sve;Eve.produce;var Tve={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},v7=Oo({name:"legend",initialState:Tve,reducers:{setLegendSize(n,e){n.size.width=e.payload.width,n.size.height=e.payload.height},setLegendSettings(n,e){n.settings.align=e.payload.align,n.settings.layout=e.payload.layout,n.settings.verticalAlign=e.payload.verticalAlign,n.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(n,e){n.payload.push(e.payload)},prepare:rr()},replaceLegendPayload:{reducer(n,e){var{prev:t,next:i}=e.payload,r=Ou(n).payload.indexOf(t);r>-1&&(n.payload[r]=i)},prepare:rr()},removeLegendPayload:{reducer(n,e){var t=Ou(n).payload.indexOf(e.payload);t>-1&&n.payload.splice(t,1)},prepare:rr()}}}),{setLegendSize:cPe,setLegendSettings:fPe,addLegendPayload:Ave,replaceLegendPayload:Mve,removeLegendPayload:Cve}=v7.actions,Ive=v7.reducer;function XN(){return XN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},XN.apply(null,arguments)}function XB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function N_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?XB(Object(t),!0).forEach(function(i){Pve(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):XB(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Pve(n,e,t){return(e=Rve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Rve(n){var e=Nve(n,"string");return typeof e=="symbol"?e:e+""}function Nve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ove(n){return Array.isArray(n)&&Yc(n[0])&&Yc(n[1])?n.join(" ~ "):n}var Nv={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},Dve=n=>{var{separator:e=Nv.separator,contentStyle:t,itemStyle:i,labelStyle:r=Nv.labelStyle,payload:a,formatter:s,itemSorter:l,wrapperClassName:c,labelClassName:f,label:p,labelFormatter:g,accessibilityLayer:v=Nv.accessibilityLayer}=n,_=()=>{if(a&&a.length){var F={padding:0,margin:0},B=(l?mM(a,l):a).map((L,z)=>{if(L.type==="none")return null;var P=L.formatter||s||Ove,{value:D,name:j}=L,q=D,W=j;if(P){var se=P(D,j,L,z,a);if(Array.isArray(se))[q,W]=se;else if(se!=null)q=se;else return null}var ue=N_(N_({},Nv.itemStyle),{},{color:L.color||Nv.itemStyle.color},i);return H.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:ue},Yc(W)?H.createElement("span",{className:"recharts-tooltip-item-name"},W):null,Yc(W)?H.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,H.createElement("span",{className:"recharts-tooltip-item-value"},q),H.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return H.createElement("ul",{className:"recharts-tooltip-item-list",style:F},B)}return null},x=N_(N_({},Nv.contentStyle),t),T=N_({margin:0},r),S=!Ms(p),w=S?p:"",I=Zi("recharts-default-tooltip",c),R=Zi("recharts-tooltip-label",f);S&&g&&a!==void 0&&a!==null&&(w=g(p,a));var O=v?{role:"status","aria-live":"assertive"}:{};return H.createElement("div",XN({className:I,style:x},O),H.createElement("p",{className:R,style:T},H.isValidElement(w)?w:"".concat(w)),_())},O_="recharts-tooltip-wrapper",Lve={visibility:"hidden"};function kve(n){var{coordinate:e,translateX:t,translateY:i}=n;return Zi(O_,{["".concat(O_,"-right")]:qt(t)&&e&&qt(e.x)&&t>=e.x,["".concat(O_,"-left")]:qt(t)&&e&&qt(e.x)&&t<e.x,["".concat(O_,"-bottom")]:qt(i)&&e&&qt(e.y)&&i>=e.y,["".concat(O_,"-top")]:qt(i)&&e&&qt(e.y)&&i<e.y})}function YB(n){var{allowEscapeViewBox:e,coordinate:t,key:i,offset:r,position:a,reverseDirection:s,tooltipDimension:l,viewBox:c,viewBoxDimension:f}=n;if(a&&qt(a[i]))return a[i];var p=t[i]-l-(r>0?r:0),g=t[i]+r;if(e[i])return s[i]?p:g;var v=c[i];if(v==null)return 0;if(s[i]){var _=p,x=v;return _<x?Math.max(g,v):Math.max(p,v)}if(f==null)return 0;var T=g+l,S=v+f;return T>S?Math.max(p,v):Math.max(g,v)}function Uve(n){var{translateX:e,translateY:t,useTranslate3d:i}=n;return{transform:i?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function zve(n){var{allowEscapeViewBox:e,coordinate:t,offsetTop:i,offsetLeft:r,position:a,reverseDirection:s,tooltipBox:l,useTranslate3d:c,viewBox:f}=n,p,g,v;return l.height>0&&l.width>0&&t?(g=YB({allowEscapeViewBox:e,coordinate:t,key:"x",offset:r,position:a,reverseDirection:s,tooltipDimension:l.width,viewBox:f,viewBoxDimension:f.width}),v=YB({allowEscapeViewBox:e,coordinate:t,key:"y",offset:i,position:a,reverseDirection:s,tooltipDimension:l.height,viewBox:f,viewBoxDimension:f.height}),p=Uve({translateX:g,translateY:v,useTranslate3d:c})):p=Lve,{cssProperties:p,cssClasses:kve({translateX:g,translateY:v,coordinate:t})}}function KB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function yw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KB(Object(t),!0).forEach(function(i){YN(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):KB(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function YN(n,e,t){return(e=Fve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Fve(n){var e=Bve(n,"string");return typeof e=="symbol"?e:e+""}function Bve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Vve extends H.PureComponent{constructor(){super(...arguments),YN(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),YN(this,"handleKeyDown",e=>{if(e.key==="Escape"){var t,i,r,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(t=(i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==null&&t!==void 0?t:0,y:(r=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((t=this.props.coordinate)===null||t===void 0?void 0:t.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:t,animationDuration:i,animationEasing:r,children:a,coordinate:s,hasPayload:l,isAnimationActive:c,offset:f,position:p,reverseDirection:g,useTranslate3d:v,viewBox:_,wrapperStyle:x,lastBoundingBox:T,innerRef:S,hasPortalFromProps:w}=this.props,I=typeof f=="number"?f:f.x,R=typeof f=="number"?f:f.y,{cssClasses:O,cssProperties:F}=zve({allowEscapeViewBox:t,coordinate:s,offsetLeft:I,offsetTop:R,position:p,reverseDirection:g,tooltipBox:{height:T.height,width:T.width},useTranslate3d:v,viewBox:_}),B=w?{}:yw(yw({transition:c&&e?"transform ".concat(i,"ms ").concat(r):void 0},F),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),L=yw(yw({},B),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},x);return H.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:O,style:L,ref:S},a)}}var y7=()=>{var n;return(n=sn(e=>e.rootProps.accessibilityLayer))!==null&&n!==void 0?n:!0};function KN(){return KN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},KN.apply(null,arguments)}function ZB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function QB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZB(Object(t),!0).forEach(function(i){jve(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ZB(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function jve(n,e,t){return(e=Hve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Hve(n){var e=Gve(n,"string");return typeof e=="symbol"?e:e+""}function Gve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var JB={curveBasisClosed:rpe,curveBasisOpen:ape,curveBasis:ipe,curveBumpX:tpe,curveBumpY:npe,curveLinearClosed:spe,curveLinear:hM,curveMonotoneX:ope,curveMonotoneY:lpe,curveNatural:upe,curveStep:cpe,curveStepAfter:hpe,curveStepBefore:fpe},RT=n=>Kn(n.x)&&Kn(n.y),eV=n=>n.base!=null&&RT(n.base)&&RT(n),D_=n=>n.x,L_=n=>n.y,Wve=(n,e)=>{if(typeof n=="function")return n;var t="curve".concat(v3(n));if((t==="curveMonotone"||t==="curveBump")&&e){var i=JB["".concat(t).concat(e==="vertical"?"Y":"X")];if(i)return i}return JB[t]||hM},tV={connectNulls:!1,type:"linear"},qve=n=>{var{type:e=tV.type,points:t=[],baseLine:i,layout:r,connectNulls:a=tV.connectNulls}=n,s=Wve(e,r),l=a?t.filter(RT):t;if(Array.isArray(i)){var c,f=t.map((x,T)=>QB(QB({},x),{},{base:i[T]}));r==="vertical"?c=cw().y(L_).x1(D_).x0(x=>x.base.x):c=cw().x(D_).y1(L_).y0(x=>x.base.y);var p=c.defined(eV).curve(s),g=a?f.filter(eV):f;return p(g)}var v;r==="vertical"&&qt(i)?v=cw().y(L_).x1(D_).x0(i):qt(i)?v=cw().x(D_).y1(L_).y0(i):v=QH().x(D_).y(L_);var _=v.defined(RT).curve(s);return _(l)},Gw=n=>{var{className:e,points:t,path:i,pathRef:r}=n,a=$y();if((!t||!t.length)&&!i)return null;var s={type:n.type,points:n.points,baseLine:n.baseLine,layout:n.layout||a,connectNulls:n.connectNulls},l=t&&t.length?qve(s):i;return H.createElement("path",KN({},Du(n),y3(n),{className:Zi("recharts-curve",e),d:l===null?void 0:l,ref:r}))},$ve=["x","y","top","left","width","height","className"];function ZN(){return ZN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ZN.apply(null,arguments)}function nV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Xve(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nV(Object(t),!0).forEach(function(i){Yve(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):nV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Yve(n,e,t){return(e=Kve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Kve(n){var e=Zve(n,"string");return typeof e=="symbol"?e:e+""}function Zve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Qve(n,e){if(n==null)return{};var t,i,r=Jve(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function Jve(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var eye=(n,e,t,i,r,a)=>"M".concat(n,",").concat(r,"v").concat(i,"M").concat(a,",").concat(e,"h").concat(t),tye=n=>{var{x:e=0,y:t=0,top:i=0,left:r=0,width:a=0,height:s=0,className:l}=n,c=Qve(n,$ve),f=Xve({x:e,y:t,top:i,left:r,width:a,height:s},c);return!qt(e)||!qt(t)||!qt(a)||!qt(s)||!qt(i)||!qt(r)?null:H.createElement("path",ZN({},Gl(f),{className:Zi("recharts-cross",l),d:eye(e,t,a,s,i,r)}))};function nye(n,e,t,i){var r=i/2;return{stroke:"none",fill:"#ccc",x:n==="horizontal"?e.x-r:t.left+.5,y:n==="horizontal"?t.top+.5:e.y-r,width:n==="horizontal"?i:t.width-1,height:n==="horizontal"?t.height-1:i}}function iV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function rV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?iV(Object(t),!0).forEach(function(i){iye(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):iV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function iye(n,e,t){return(e=rye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rye(n){var e=aye(n,"string");return typeof e=="symbol"?e:e+""}function aye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var sye=n=>n.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),oye=(n,e,t)=>n.map(i=>"".concat(sye(i)," ").concat(e,"ms ").concat(t)).join(","),lye=(n,e)=>[Object.keys(n),Object.keys(e)].reduce((t,i)=>t.filter(r=>i.includes(r))),Zb=(n,e)=>Object.keys(e).reduce((t,i)=>rV(rV({},t),{},{[i]:n(i,e[i])}),{});function aV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ta(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aV(Object(t),!0).forEach(function(i){uye(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):aV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function uye(n,e,t){return(e=cye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cye(n){var e=fye(n,"string");return typeof e=="symbol"?e:e+""}function fye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var NT=(n,e,t)=>n+(e-n)*t,QN=n=>{var{from:e,to:t}=n;return e!==t},_7=(n,e,t)=>{var i=Zb((r,a)=>{if(QN(a)){var[s,l]=n(a.from,a.to,a.velocity);return ta(ta({},a),{},{from:s,velocity:l})}return a},e);return t<1?Zb((r,a)=>QN(a)&&i[r]!=null?ta(ta({},a),{},{velocity:NT(a.velocity,i[r].velocity,t),from:NT(a.from,i[r].from,t)}):a,e):_7(n,i,t-1)};function hye(n,e,t,i,r,a){var s,l=i.reduce((v,_)=>ta(ta({},v),{},{[_]:{from:n[_],velocity:0,to:e[_]}}),{}),c=()=>Zb((v,_)=>_.from,l),f=()=>!Object.values(l).filter(QN).length,p=null,g=v=>{s||(s=v);var _=v-s,x=_/t.dt;l=_7(t,l,x),r(ta(ta(ta({},n),e),c())),s=v,f()||(p=a.setTimeout(g))};return()=>(p=a.setTimeout(g),()=>{var v;(v=p)===null||v===void 0||v()})}function dye(n,e,t,i,r,a,s){var l=null,c=r.reduce((g,v)=>{var _=n[v],x=e[v];return _==null||x==null?g:ta(ta({},g),{},{[v]:[_,x]})},{}),f,p=g=>{f||(f=g);var v=(g-f)/i,_=Zb((T,S)=>NT(...S,t(v)),c);if(a(ta(ta(ta({},n),e),_)),v<1)l=s.setTimeout(p);else{var x=Zb((T,S)=>NT(...S,t(1)),c);a(ta(ta(ta({},n),e),x))}};return()=>(l=s.setTimeout(p),()=>{var g;(g=l)===null||g===void 0||g()})}const pye=(n,e,t,i,r,a)=>{var s=lye(n,e);return t==null?()=>(r(ta(ta({},n),e)),()=>{}):t.isStepper===!0?hye(n,e,t,s,r,a):dye(n,e,t,i,s,r,a)};var OT=1e-4,b7=(n,e)=>[0,3*n,3*e-6*n,3*n-3*e+1],x7=(n,e)=>n.map((t,i)=>t*e**i).reduce((t,i)=>t+i),sV=(n,e)=>t=>{var i=b7(n,e);return x7(i,t)},mye=(n,e)=>t=>{var i=b7(n,e),r=[...i.map((a,s)=>a*s).slice(1),0];return x7(r,t)},gye=n=>{var e,t=n.split("(");if(t.length!==2||t[0]!=="cubic-bezier")return null;var i=(e=t[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(i==null||i.length!==4)return null;var r=i.map(a=>parseFloat(a));return[r[0],r[1],r[2],r[3]]},vye=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t.length===1)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r=gye(t[0]);if(r)return r}}return t.length===4?t:[0,0,1,1]},yye=(n,e,t,i)=>{var r=sV(n,t),a=sV(e,i),s=mye(n,t),l=f=>f>1?1:f<0?0:f,c=f=>{for(var p=f>1?1:f,g=p,v=0;v<8;++v){var _=r(g)-p,x=s(g);if(Math.abs(_-p)<OT||x<OT)return a(g);g=l(g-_/x)}return a(g)};return c.isStepper=!1,c},oV=function(){return yye(...vye(...arguments))},_ye=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:t=100,damping:i=8,dt:r=17}=e,a=(s,l,c)=>{var f=-(s-l)*t,p=c*i,g=c+(f-p)*r/1e3,v=c*r/1e3+s;return Math.abs(v-l)<OT&&Math.abs(g)<OT?[l,0]:[v,g]};return a.isStepper=!0,a.dt=r,a},bye=n=>{if(typeof n=="string")switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return oV(n);case"spring":return _ye();default:if(n.split("(")[0]==="cubic-bezier")return oV(n)}return typeof n=="function"?n:null};function xye(n){var e,t=()=>null,i=!1,r=null,a=s=>{if(!i){if(Array.isArray(s)){if(!s.length)return;var l=s,[c,...f]=l;if(typeof c=="number"){r=n.setTimeout(a.bind(null,f),c);return}a(c),r=n.setTimeout(a.bind(null,f));return}typeof s=="string"&&(e=s,t(e)),typeof s=="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:()=>{i=!0},start:s=>{i=!1,r&&(r(),r=null),a(s)},subscribe:s=>(t=s,()=>{t=()=>null}),getTimeoutController:()=>n}}class Sye{setTimeout(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=performance.now(),r=null,a=s=>{s-i>=t?e(s):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(a))};return r=requestAnimationFrame(a),()=>{r!=null&&cancelAnimationFrame(r)}}}function wye(){return xye(new Sye)}var Eye=H.createContext(wye);function Tye(n,e){var t=H.useContext(Eye);return H.useMemo(()=>e??t(n),[n,e,t])}var Aye=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ox={isSsr:Aye()},Mye={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},lV={t:0},JP={t:1};function S7(n){var e=al(n,Mye),{isActive:t,canBegin:i,duration:r,easing:a,begin:s,onAnimationEnd:l,onAnimationStart:c,children:f}=e,p=t==="auto"?!Ox.isSsr:t,g=Tye(e.animationId,e.animationManager),[v,_]=H.useState(p?lV:JP),x=H.useRef(null);return H.useEffect(()=>{p||_(JP)},[p]),H.useEffect(()=>{if(!p||!i)return qy;var T=pye(lV,JP,bye(a),r,_,g.getTimeoutController()),S=()=>{x.current=T()};return g.start([c,s,S,r,l]),()=>{g.stop(),x.current&&x.current(),l()}},[p,i,r,a,s,c,l,g]),f(v.t)}function w7(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",t=H.useRef(Gb(e)),i=H.useRef(n);return i.current!==n&&(t.current=Gb(e),i.current=n),t.current}var Cye=["radius"],Iye=["radius"],uV,cV,fV,hV,dV,pV,mV,gV,vV,yV;function _V(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function bV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_V(Object(t),!0).forEach(function(i){Pye(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_V(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Pye(n,e,t){return(e=Rye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Rye(n){var e=Nye(n,"string");return typeof e=="symbol"?e:e+""}function Nye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function DT(){return DT=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},DT.apply(null,arguments)}function xV(n,e){if(n==null)return{};var t,i,r=Oye(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function Oye(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function xc(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var SV=(n,e,t,i,r)=>{var a=Dd(t),s=Dd(i),l=Math.min(Math.abs(a)/2,Math.abs(s)/2),c=s>=0?1:-1,f=a>=0?1:-1,p=s>=0&&a>=0||s<0&&a<0?1:0,g;if(l>0&&Array.isArray(r)){for(var v=[0,0,0,0],_=0,x=4;_<x;_++){var T,S=(T=r[_])!==null&&T!==void 0?T:0;v[_]=S>l?l:S}g=Wa(uV||(uV=xc(["M",",",""])),n,e+c*v[0]),v[0]>0&&(g+=Wa(cV||(cV=xc(["A ",",",",0,0,",",",",",""])),v[0],v[0],p,n+f*v[0],e)),g+=Wa(fV||(fV=xc(["L ",",",""])),n+t-f*v[1],e),v[1]>0&&(g+=Wa(hV||(hV=xc(["A ",",",",0,0,",`,
        `,",",""])),v[1],v[1],p,n+t,e+c*v[1])),g+=Wa(dV||(dV=xc(["L ",",",""])),n+t,e+i-c*v[2]),v[2]>0&&(g+=Wa(pV||(pV=xc(["A ",",",",0,0,",`,
        `,",",""])),v[2],v[2],p,n+t-f*v[2],e+i)),g+=Wa(mV||(mV=xc(["L ",",",""])),n+f*v[3],e+i),v[3]>0&&(g+=Wa(gV||(gV=xc(["A ",",",",0,0,",`,
        `,",",""])),v[3],v[3],p,n,e+i-c*v[3])),g+="Z"}else if(l>0&&r===+r&&r>0){var w=Math.min(l,r);g=Wa(vV||(vV=xc(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),n,e+c*w,w,w,p,n+f*w,e,n+t-f*w,e,w,w,p,n+t,e+c*w,n+t,e+i-c*w,w,w,p,n+t-f*w,e+i,n+f*w,e+i,w,w,p,n,e+i-c*w)}else g=Wa(yV||(yV=xc(["M ",","," h "," v "," h "," Z"])),n,e,t,i,-t);return g},wV={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Dye=n=>{var e=al(n,wV),t=H.useRef(null),[i,r]=H.useState(-1);H.useEffect(()=>{if(t.current&&t.current.getTotalLength)try{var ae=t.current.getTotalLength();ae&&r(ae)}catch{}},[]);var{x:a,y:s,width:l,height:c,radius:f,className:p}=e,{animationEasing:g,animationDuration:v,animationBegin:_,isAnimationActive:x,isUpdateAnimationActive:T}=e,S=H.useRef(l),w=H.useRef(c),I=H.useRef(a),R=H.useRef(s),O=H.useMemo(()=>({x:a,y:s,width:l,height:c,radius:f}),[a,s,l,c,f]),F=w7(O,"rectangle-");if(a!==+a||s!==+s||l!==+l||c!==+c||l===0||c===0)return null;var B=Zi("recharts-rectangle",p);if(!T){var L=Gl(e),{radius:z}=L,P=xV(L,Cye);return H.createElement("path",DT({},P,{x:Dd(a),y:Dd(s),width:Dd(l),height:Dd(c),radius:typeof f=="number"?f:void 0,className:B,d:SV(a,s,l,c,f)}))}var D=S.current,j=w.current,q=I.current,W=R.current,se="0px ".concat(i===-1?1:i,"px"),ue="".concat(i,"px 0px"),J=oye(["strokeDasharray"],v,typeof g=="string"?g:wV.animationEasing);return H.createElement(S7,{animationId:F,key:F,canBegin:i>0,duration:v,easing:g,isActive:T,begin:_},ae=>{var he=Tc(D,l,ae),Te=Tc(j,c,ae),Re=Tc(q,a,ae),Q=Tc(W,s,ae);t.current&&(S.current=he,w.current=Te,I.current=Re,R.current=Q);var de;x?ae>0?de={transition:J,strokeDasharray:ue}:de={strokeDasharray:se}:de={strokeDasharray:ue};var Me=Gl(e),{radius:We}=Me,vt=xV(Me,Iye);return H.createElement("path",DT({},vt,{radius:typeof f=="number"?f:void 0,className:B,d:SV(Re,Q,he,Te,f),ref:t,style:bV(bV({},de),e.style)}))})};function EV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function TV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?EV(Object(t),!0).forEach(function(i){Lye(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):EV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Lye(n,e,t){return(e=kye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kye(n){var e=Uye(n,"string");return typeof e=="symbol"?e:e+""}function Uye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var LT=Math.PI/180,zye=n=>n*180/Math.PI,Ka=(n,e,t,i)=>({x:n+Math.cos(-LT*i)*t,y:e+Math.sin(-LT*i)*t}),Fye=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(i.left||0)-(i.right||0)),Math.abs(t-(i.top||0)-(i.bottom||0)))/2},Bye=(n,e)=>{var{x:t,y:i}=n,{x:r,y:a}=e;return Math.sqrt((t-r)**2+(i-a)**2)},Vye=(n,e)=>{var{x:t,y:i}=n,{cx:r,cy:a}=e,s=Bye({x:t,y:i},{x:r,y:a});if(s<=0)return{radius:s,angle:0};var l=(t-r)/s,c=Math.acos(l);return i>a&&(c=2*Math.PI-c),{radius:s,angle:zye(c),angleInRadian:c}},jye=n=>{var{startAngle:e,endAngle:t}=n,i=Math.floor(e/360),r=Math.floor(t/360),a=Math.min(i,r);return{startAngle:e-a*360,endAngle:t-a*360}},Hye=(n,e)=>{var{startAngle:t,endAngle:i}=e,r=Math.floor(t/360),a=Math.floor(i/360),s=Math.min(r,a);return n+s*360},Gye=(n,e)=>{var{chartX:t,chartY:i}=n,{radius:r,angle:a}=Vye({x:t,y:i},e),{innerRadius:s,outerRadius:l}=e;if(r<s||r>l||r===0)return null;var{startAngle:c,endAngle:f}=jye(e),p=a,g;if(c<=f){for(;p>f;)p-=360;for(;p<c;)p+=360;g=p>=c&&p<=f}else{for(;p>c;)p-=360;for(;p<f;)p+=360;g=p>=f&&p<=c}return g?TV(TV({},e),{},{radius:r,angle:Hye(p,e)}):null};function E7(n){var{cx:e,cy:t,radius:i,startAngle:r,endAngle:a}=n,s=Ka(e,t,i,r),l=Ka(e,t,i,a);return{points:[s,l],cx:e,cy:t,radius:i,startAngle:r,endAngle:a}}var AV,MV,CV,IV,PV,RV,NV;function JN(){return JN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},JN.apply(null,arguments)}function Tm(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var Wye=(n,e)=>{var t=Fl(e-n),i=Math.min(Math.abs(e-n),359.999);return t*i},_w=n=>{var{cx:e,cy:t,radius:i,angle:r,sign:a,isExternal:s,cornerRadius:l,cornerIsExternal:c}=n,f=l*(s?1:-1)+i,p=Math.asin(l/f)/LT,g=c?r:r+a*p,v=Ka(e,t,f,g),_=Ka(e,t,i,g),x=c?r-a*p:r,T=Ka(e,t,f*Math.cos(p*LT),x);return{center:v,circleTangency:_,lineTangency:T,theta:p}},T7=n=>{var{cx:e,cy:t,innerRadius:i,outerRadius:r,startAngle:a,endAngle:s}=n,l=Wye(a,s),c=a+l,f=Ka(e,t,r,a),p=Ka(e,t,r,c),g=Wa(AV||(AV=Tm(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),f.x,f.y,r,r,+(Math.abs(l)>180),+(a>c),p.x,p.y);if(i>0){var v=Ka(e,t,i,a),_=Ka(e,t,i,c);g+=Wa(MV||(MV=Tm(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),_.x,_.y,i,i,+(Math.abs(l)>180),+(a<=c),v.x,v.y)}else g+=Wa(CV||(CV=Tm(["L ",","," Z"])),e,t);return g},qye=n=>{var{cx:e,cy:t,innerRadius:i,outerRadius:r,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:l,startAngle:c,endAngle:f}=n,p=Fl(f-c),{circleTangency:g,lineTangency:v,theta:_}=_w({cx:e,cy:t,radius:r,angle:c,sign:p,cornerRadius:a,cornerIsExternal:l}),{circleTangency:x,lineTangency:T,theta:S}=_w({cx:e,cy:t,radius:r,angle:f,sign:-p,cornerRadius:a,cornerIsExternal:l}),w=l?Math.abs(c-f):Math.abs(c-f)-_-S;if(w<0)return s?Wa(IV||(IV=Tm(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),v.x,v.y,a,a,a*2,a,a,-a*2):T7({cx:e,cy:t,innerRadius:i,outerRadius:r,startAngle:c,endAngle:f});var I=Wa(PV||(PV=Tm(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),v.x,v.y,a,a,+(p<0),g.x,g.y,r,r,+(w>180),+(p<0),x.x,x.y,a,a,+(p<0),T.x,T.y);if(i>0){var{circleTangency:R,lineTangency:O,theta:F}=_w({cx:e,cy:t,radius:i,angle:c,sign:p,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),{circleTangency:B,lineTangency:L,theta:z}=_w({cx:e,cy:t,radius:i,angle:f,sign:-p,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),P=l?Math.abs(c-f):Math.abs(c-f)-F-z;if(P<0&&a===0)return"".concat(I,"L").concat(e,",").concat(t,"Z");I+=Wa(RV||(RV=Tm(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),L.x,L.y,a,a,+(p<0),B.x,B.y,i,i,+(P>180),+(p>0),R.x,R.y,a,a,+(p<0),O.x,O.y)}else I+=Wa(NV||(NV=Tm(["L",",","Z"])),e,t);return I},$ye={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Xye=n=>{var e=al(n,$ye),{cx:t,cy:i,innerRadius:r,outerRadius:a,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:c,startAngle:f,endAngle:p,className:g}=e;if(a<r||f===p)return null;var v=Zi("recharts-sector",g),_=a-r,x=ep(s,_,0,!0),T;return x>0&&Math.abs(f-p)<360?T=qye({cx:t,cy:i,innerRadius:r,outerRadius:a,cornerRadius:Math.min(x,_/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:f,endAngle:p}):T=T7({cx:t,cy:i,innerRadius:r,outerRadius:a,startAngle:f,endAngle:p}),H.createElement("path",JN({},Gl(e),{className:v,d:T}))};function Yye(n,e,t){if(n==="horizontal")return[{x:e.x,y:t.top},{x:e.x,y:t.top+t.height}];if(n==="vertical")return[{x:t.left,y:e.y},{x:t.left+t.width,y:e.y}];if(cG(e)){if(n==="centric"){var{cx:i,cy:r,innerRadius:a,outerRadius:s,angle:l}=e,c=Ka(i,r,a,l),f=Ka(i,r,s,l);return[{x:c.x,y:c.y},{x:f.x,y:f.y}]}return E7(e)}}var eR={},tR={},nR={},OV;function Kye(){return OV||(OV=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=bG();function t(i){return e.isSymbol(i)?NaN:Number(i)}n.toNumber=t})(nR)),nR}var DV;function Zye(){return DV||(DV=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=Kye();function t(i){return i?(i=e.toNumber(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}n.toFinite=t})(tR)),tR}var LV;function Qye(){return LV||(LV=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=xG(),t=Zye();function i(r,a,s){s&&typeof s!="number"&&e.isIterateeCall(r,a,s)&&(a=s=void 0),r=t.toFinite(r),a===void 0?(a=r,r=0):a=t.toFinite(a),s=s===void 0?r<a?1:-1:t.toFinite(s);const l=Math.max(Math.ceil((a-r)/(s||1)),0),c=new Array(l);for(let f=0;f<l;f++)c[f]=r,r+=s;return c}n.range=i})(eR)),eR}var iR,kV;function Jye(){return kV||(kV=1,iR=Qye().range),iR}var e0e=Jye();const A7=ku(e0e);function jd(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function t0e(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function O3(n){let e,t,i;n.length!==2?(e=jd,t=(l,c)=>jd(n(l),c),i=(l,c)=>n(l)-c):(e=n===jd||n===t0e?n:n0e,t=n,i=n);function r(l,c,f=0,p=l.length){if(f<p){if(e(c,c)!==0)return p;do{const g=f+p>>>1;t(l[g],c)<0?f=g+1:p=g}while(f<p)}return f}function a(l,c,f=0,p=l.length){if(f<p){if(e(c,c)!==0)return p;do{const g=f+p>>>1;t(l[g],c)<=0?f=g+1:p=g}while(f<p)}return f}function s(l,c,f=0,p=l.length){const g=r(l,c,f,p-1);return g>f&&i(l[g-1],c)>-i(l[g],c)?g-1:g}return{left:r,center:s,right:a}}function n0e(){return 0}function M7(n){return n===null?NaN:+n}function*i0e(n,e){for(let t of n)t!=null&&(t=+t)>=t&&(yield t)}const r0e=O3(jd),Dx=r0e.right;O3(M7).center;class UV extends Map{constructor(e,t=o0e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(zV(this,e))}has(e){return super.has(zV(this,e))}set(e,t){return super.set(a0e(this,e),t)}delete(e){return super.delete(s0e(this,e))}}function zV({_intern:n,_key:e},t){const i=e(t);return n.has(i)?n.get(i):t}function a0e({_intern:n,_key:e},t){const i=e(t);return n.has(i)?n.get(i):(n.set(i,t),t)}function s0e({_intern:n,_key:e},t){const i=e(t);return n.has(i)&&(t=n.get(i),n.delete(i)),t}function o0e(n){return n!==null&&typeof n=="object"?n.valueOf():n}function l0e(n=jd){if(n===jd)return C7;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const i=n(e,t);return i||i===0?i:(n(t,t)===0)-(n(e,e)===0)}}function C7(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0)}const u0e=Math.sqrt(50),c0e=Math.sqrt(10),f0e=Math.sqrt(2);function kT(n,e,t){const i=(e-n)/Math.max(0,t),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),s=a>=u0e?10:a>=c0e?5:a>=f0e?2:1;let l,c,f;return r<0?(f=Math.pow(10,-r)/s,l=Math.round(n*f),c=Math.round(e*f),l/f<n&&++l,c/f>e&&--c,f=-f):(f=Math.pow(10,r)*s,l=Math.round(n/f),c=Math.round(e/f),l*f<n&&++l,c*f>e&&--c),c<l&&.5<=t&&t<2?kT(n,e,t*2):[l,c,f]}function eO(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const i=e<n,[r,a,s]=i?kT(e,n,t):kT(n,e,t);if(!(a>=r))return[];const l=a-r+1,c=new Array(l);if(i)if(s<0)for(let f=0;f<l;++f)c[f]=(a-f)/-s;else for(let f=0;f<l;++f)c[f]=(a-f)*s;else if(s<0)for(let f=0;f<l;++f)c[f]=(r+f)/-s;else for(let f=0;f<l;++f)c[f]=(r+f)*s;return c}function tO(n,e,t){return e=+e,n=+n,t=+t,kT(n,e,t)[2]}function nO(n,e,t){e=+e,n=+n,t=+t;const i=e<n,r=i?tO(e,n,t):tO(n,e,t);return(i?-1:1)*(r<0?1/-r:r)}function FV(n,e){let t;for(const i of n)i!=null&&(t<i||t===void 0&&i>=i)&&(t=i);return t}function BV(n,e){let t;for(const i of n)i!=null&&(t>i||t===void 0&&i>=i)&&(t=i);return t}function I7(n,e,t=0,i=1/0,r){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),i=Math.floor(Math.min(n.length-1,i)),!(t<=e&&e<=i))return n;for(r=r===void 0?C7:l0e(r);i>t;){if(i-t>600){const c=i-t+1,f=e-t+1,p=Math.log(c),g=.5*Math.exp(2*p/3),v=.5*Math.sqrt(p*g*(c-g)/c)*(f-c/2<0?-1:1),_=Math.max(t,Math.floor(e-f*g/c+v)),x=Math.min(i,Math.floor(e+(c-f)*g/c+v));I7(n,e,_,x,r)}const a=n[e];let s=t,l=i;for(k_(n,t,e),r(n[i],a)>0&&k_(n,t,i);s<l;){for(k_(n,s,l),++s,--l;r(n[s],a)<0;)++s;for(;r(n[l],a)>0;)--l}r(n[t],a)===0?k_(n,t,l):(++l,k_(n,l,i)),l<=e&&(t=l+1),e<=l&&(i=l-1)}return n}function k_(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}function h0e(n,e,t){if(n=Float64Array.from(i0e(n)),!(!(i=n.length)||isNaN(e=+e))){if(e<=0||i<2)return BV(n);if(e>=1)return FV(n);var i,r=(i-1)*e,a=Math.floor(r),s=FV(I7(n,a).subarray(0,a+1)),l=BV(n.subarray(a+1));return s+(l-s)*(r-a)}}function d0e(n,e,t=M7){if(!(!(i=n.length)||isNaN(e=+e))){if(e<=0||i<2)return+t(n[0],0,n);if(e>=1)return+t(n[i-1],i-1,n);var i,r=(i-1)*e,a=Math.floor(r),s=+t(n[a],a,n),l=+t(n[a+1],a+1,n);return s+(l-s)*(r-a)}}function p0e(n,e,t){n=+n,e=+e,t=(r=arguments.length)<2?(e=n,n=0,1):r<3?1:+t;for(var i=-1,r=Math.max(0,Math.ceil((e-n)/t))|0,a=new Array(r);++i<r;)a[i]=n+i*t;return a}function Xl(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function ph(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const iO=Symbol("implicit");function D3(){var n=new UV,e=[],t=[],i=iO;function r(a){let s=n.get(a);if(s===void 0){if(i!==iO)return i;n.set(a,s=e.push(a)-1)}return t[s%t.length]}return r.domain=function(a){if(!arguments.length)return e.slice();e=[],n=new UV;for(const s of a)n.has(s)||n.set(s,e.push(s)-1);return r},r.range=function(a){return arguments.length?(t=Array.from(a),r):t.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return D3(e,t).unknown(i)},Xl.apply(r,arguments),r}function L3(){var n=D3().unknown(void 0),e=n.domain,t=n.range,i=0,r=1,a,s,l=!1,c=0,f=0,p=.5;delete n.unknown;function g(){var v=e().length,_=r<i,x=_?r:i,T=_?i:r;a=(T-x)/Math.max(1,v-c+f*2),l&&(a=Math.floor(a)),x+=(T-x-a*(v-c))*p,s=a*(1-c),l&&(x=Math.round(x),s=Math.round(s));var S=p0e(v).map(function(w){return x+a*w});return t(_?S.reverse():S)}return n.domain=function(v){return arguments.length?(e(v),g()):e()},n.range=function(v){return arguments.length?([i,r]=v,i=+i,r=+r,g()):[i,r]},n.rangeRound=function(v){return[i,r]=v,i=+i,r=+r,l=!0,g()},n.bandwidth=function(){return s},n.step=function(){return a},n.round=function(v){return arguments.length?(l=!!v,g()):l},n.padding=function(v){return arguments.length?(c=Math.min(1,f=+v),g()):c},n.paddingInner=function(v){return arguments.length?(c=Math.min(1,v),g()):c},n.paddingOuter=function(v){return arguments.length?(f=+v,g()):f},n.align=function(v){return arguments.length?(p=Math.max(0,Math.min(1,v)),g()):p},n.copy=function(){return L3(e(),[i,r]).round(l).paddingInner(c).paddingOuter(f).align(p)},Xl.apply(g(),arguments)}function P7(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return P7(e())},n}function m0e(){return P7(L3.apply(null,arguments).paddingInner(1))}function k3(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function R7(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function Lx(){}var Qb=.7,UT=1/Qb,ay="\\s*([+-]?\\d+)\\s*",Jb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",g0e=/^#([0-9a-f]{3,8})$/,v0e=new RegExp(`^rgb\\(${ay},${ay},${ay}\\)$`),y0e=new RegExp(`^rgb\\(${Fc},${Fc},${Fc}\\)$`),_0e=new RegExp(`^rgba\\(${ay},${ay},${ay},${Jb}\\)$`),b0e=new RegExp(`^rgba\\(${Fc},${Fc},${Fc},${Jb}\\)$`),x0e=new RegExp(`^hsl\\(${Jb},${Fc},${Fc}\\)$`),S0e=new RegExp(`^hsla\\(${Jb},${Fc},${Fc},${Jb}\\)$`),VV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};k3(Lx,ex,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:jV,formatHex:jV,formatHex8:w0e,formatHsl:E0e,formatRgb:HV,toString:HV});function jV(){return this.rgb().formatHex()}function w0e(){return this.rgb().formatHex8()}function E0e(){return N7(this).formatHsl()}function HV(){return this.rgb().formatRgb()}function ex(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=g0e.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?GV(e):t===3?new No(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?bw(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?bw(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=v0e.exec(n))?new No(e[1],e[2],e[3],1):(e=y0e.exec(n))?new No(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=_0e.exec(n))?bw(e[1],e[2],e[3],e[4]):(e=b0e.exec(n))?bw(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=x0e.exec(n))?$V(e[1],e[2]/100,e[3]/100,1):(e=S0e.exec(n))?$V(e[1],e[2]/100,e[3]/100,e[4]):VV.hasOwnProperty(n)?GV(VV[n]):n==="transparent"?new No(NaN,NaN,NaN,0):null}function GV(n){return new No(n>>16&255,n>>8&255,n&255,1)}function bw(n,e,t,i){return i<=0&&(n=e=t=NaN),new No(n,e,t,i)}function T0e(n){return n instanceof Lx||(n=ex(n)),n?(n=n.rgb(),new No(n.r,n.g,n.b,n.opacity)):new No}function rO(n,e,t,i){return arguments.length===1?T0e(n):new No(n,e,t,i??1)}function No(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}k3(No,rO,R7(Lx,{brighter(n){return n=n==null?UT:Math.pow(UT,n),new No(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Qb:Math.pow(Qb,n),new No(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new No(km(this.r),km(this.g),km(this.b),zT(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:WV,formatHex:WV,formatHex8:A0e,formatRgb:qV,toString:qV}));function WV(){return`#${Am(this.r)}${Am(this.g)}${Am(this.b)}`}function A0e(){return`#${Am(this.r)}${Am(this.g)}${Am(this.b)}${Am((isNaN(this.opacity)?1:this.opacity)*255)}`}function qV(){const n=zT(this.opacity);return`${n===1?"rgb(":"rgba("}${km(this.r)}, ${km(this.g)}, ${km(this.b)}${n===1?")":`, ${n})`}`}function zT(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function km(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Am(n){return n=km(n),(n<16?"0":"")+n.toString(16)}function $V(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Au(n,e,t,i)}function N7(n){if(n instanceof Au)return new Au(n.h,n.s,n.l,n.opacity);if(n instanceof Lx||(n=ex(n)),!n)return new Au;if(n instanceof Au)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),a=Math.max(e,t,i),s=NaN,l=a-r,c=(a+r)/2;return l?(e===a?s=(t-i)/l+(t<i)*6:t===a?s=(i-e)/l+2:s=(e-t)/l+4,l/=c<.5?a+r:2-a-r,s*=60):l=c>0&&c<1?0:s,new Au(s,l,c,n.opacity)}function M0e(n,e,t,i){return arguments.length===1?N7(n):new Au(n,e,t,i??1)}function Au(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}k3(Au,M0e,R7(Lx,{brighter(n){return n=n==null?UT:Math.pow(UT,n),new Au(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Qb:Math.pow(Qb,n),new Au(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new No(rR(n>=240?n-240:n+120,r,i),rR(n,r,i),rR(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new Au(XV(this.h),xw(this.s),xw(this.l),zT(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=zT(this.opacity);return`${n===1?"hsl(":"hsla("}${XV(this.h)}, ${xw(this.s)*100}%, ${xw(this.l)*100}%${n===1?")":`, ${n})`}`}}));function XV(n){return n=(n||0)%360,n<0?n+360:n}function xw(n){return Math.max(0,Math.min(1,n||0))}function rR(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const U3=n=>()=>n;function C0e(n,e){return function(t){return n+t*e}}function I0e(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function P0e(n){return(n=+n)==1?O7:function(e,t){return t-e?I0e(e,t,n):U3(isNaN(e)?t:e)}}function O7(n,e){var t=e-n;return t?C0e(n,t):U3(isNaN(n)?e:n)}const YV=(function n(e){var t=P0e(e);function i(r,a){var s=t((r=rO(r)).r,(a=rO(a)).r),l=t(r.g,a.g),c=t(r.b,a.b),f=O7(r.opacity,a.opacity);return function(p){return r.r=s(p),r.g=l(p),r.b=c(p),r.opacity=f(p),r+""}}return i.gamma=n,i})(1);function R0e(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,i=e.slice(),r;return function(a){for(r=0;r<t;++r)i[r]=n[r]*(1-a)+e[r]*a;return i}}function N0e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function O0e(n,e){var t=e?e.length:0,i=n?Math.min(t,n.length):0,r=new Array(i),a=new Array(t),s;for(s=0;s<i;++s)r[s]=Xy(n[s],e[s]);for(;s<t;++s)a[s]=e[s];return function(l){for(s=0;s<i;++s)a[s]=r[s](l);return a}}function D0e(n,e){var t=new Date;return n=+n,e=+e,function(i){return t.setTime(n*(1-i)+e*i),t}}function FT(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function L0e(n,e){var t={},i={},r;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in n?t[r]=Xy(n[r],e[r]):i[r]=e[r];return function(a){for(r in t)i[r]=t[r](a);return i}}var aO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aR=new RegExp(aO.source,"g");function k0e(n){return function(){return n}}function U0e(n){return function(e){return n(e)+""}}function z0e(n,e){var t=aO.lastIndex=aR.lastIndex=0,i,r,a,s=-1,l=[],c=[];for(n=n+"",e=e+"";(i=aO.exec(n))&&(r=aR.exec(e));)(a=r.index)>t&&(a=e.slice(t,a),l[s]?l[s]+=a:l[++s]=a),(i=i[0])===(r=r[0])?l[s]?l[s]+=r:l[++s]=r:(l[++s]=null,c.push({i:s,x:FT(i,r)})),t=aR.lastIndex;return t<e.length&&(a=e.slice(t),l[s]?l[s]+=a:l[++s]=a),l.length<2?c[0]?U0e(c[0].x):k0e(e):(e=c.length,function(f){for(var p=0,g;p<e;++p)l[(g=c[p]).i]=g.x(f);return l.join("")})}function Xy(n,e){var t=typeof e,i;return e==null||t==="boolean"?U3(e):(t==="number"?FT:t==="string"?(i=ex(e))?(e=i,YV):z0e:e instanceof ex?YV:e instanceof Date?D0e:N0e(e)?R0e:Array.isArray(e)?O0e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?L0e:FT)(n,e)}function z3(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function F0e(n,e){e===void 0&&(e=n,n=Xy);for(var t=0,i=e.length-1,r=e[0],a=new Array(i<0?0:i);t<i;)a[t]=n(r,r=e[++t]);return function(s){var l=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return a[l](s-l)}}function B0e(n){return function(){return n}}function BT(n){return+n}var KV=[0,1];function Xs(n){return n}function sO(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:B0e(isNaN(e)?NaN:.5)}function V0e(n,e){var t;return n>e&&(t=n,n=e,e=t),function(i){return Math.max(n,Math.min(e,i))}}function j0e(n,e,t){var i=n[0],r=n[1],a=e[0],s=e[1];return r<i?(i=sO(r,i),a=t(s,a)):(i=sO(i,r),a=t(a,s)),function(l){return a(i(l))}}function H0e(n,e,t){var i=Math.min(n.length,e.length)-1,r=new Array(i),a=new Array(i),s=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++s<i;)r[s]=sO(n[s],n[s+1]),a[s]=t(e[s],e[s+1]);return function(l){var c=Dx(n,l,1,i)-1;return a[c](r[c](l))}}function kx(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function OM(){var n=KV,e=KV,t=Xy,i,r,a,s=Xs,l,c,f;function p(){var v=Math.min(n.length,e.length);return s!==Xs&&(s=V0e(n[0],n[v-1])),l=v>2?H0e:j0e,c=f=null,g}function g(v){return v==null||isNaN(v=+v)?a:(c||(c=l(n.map(i),e,t)))(i(s(v)))}return g.invert=function(v){return s(r((f||(f=l(e,n.map(i),FT)))(v)))},g.domain=function(v){return arguments.length?(n=Array.from(v,BT),p()):n.slice()},g.range=function(v){return arguments.length?(e=Array.from(v),p()):e.slice()},g.rangeRound=function(v){return e=Array.from(v),t=z3,p()},g.clamp=function(v){return arguments.length?(s=v?!0:Xs,p()):s!==Xs},g.interpolate=function(v){return arguments.length?(t=v,p()):t},g.unknown=function(v){return arguments.length?(a=v,g):a},function(v,_){return i=v,r=_,p()}}function F3(){return OM()(Xs,Xs)}function G0e(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function VT(n,e){if(!isFinite(n)||n===0)return null;var t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"),i=n.slice(0,t);return[i.length>1?i[0]+i.slice(2):i,+n.slice(t+1)]}function Iy(n){return n=VT(Math.abs(n)),n?n[1]:NaN}function W0e(n,e){return function(t,i){for(var r=t.length,a=[],s=0,l=n[0],c=0;r>0&&l>0&&(c+l+1>i&&(l=Math.max(1,i-c)),a.push(t.substring(r-=l,r+l)),!((c+=l+1)>i));)l=n[s=(s+1)%n.length];return a.reverse().join(e)}}function q0e(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var $0e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function tx(n){if(!(e=$0e.exec(n)))throw new Error("invalid format: "+n);var e;return new B3({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}tx.prototype=B3.prototype;function B3(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}B3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function X0e(n){e:for(var e=n.length,t=1,i=-1,r;t<e;++t)switch(n[t]){case".":i=r=t;break;case"0":i===0&&(i=t),r=t;break;default:if(!+n[t])break e;i>0&&(i=0);break}return i>0?n.slice(0,i)+n.slice(r+1):n}var jT;function Y0e(n,e){var t=VT(n,e);if(!t)return jT=void 0,n.toPrecision(e);var i=t[0],r=t[1],a=r-(jT=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+VT(n,Math.max(0,e+a-1))[0]}function ZV(n,e){var t=VT(n,e);if(!t)return n+"";var i=t[0],r=t[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const QV={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:G0e,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>ZV(n*100,e),r:ZV,s:Y0e,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function JV(n){return n}var e5=Array.prototype.map,t5=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function K0e(n){var e=n.grouping===void 0||n.thousands===void 0?JV:W0e(e5.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",i=n.currency===void 0?"":n.currency[1]+"",r=n.decimal===void 0?".":n.decimal+"",a=n.numerals===void 0?JV:q0e(e5.call(n.numerals,String)),s=n.percent===void 0?"%":n.percent+"",l=n.minus===void 0?"":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function f(g,v){g=tx(g);var _=g.fill,x=g.align,T=g.sign,S=g.symbol,w=g.zero,I=g.width,R=g.comma,O=g.precision,F=g.trim,B=g.type;B==="n"?(R=!0,B="g"):QV[B]||(O===void 0&&(O=12),F=!0,B="g"),(w||_==="0"&&x==="=")&&(w=!0,_="0",x="=");var L=(v&&v.prefix!==void 0?v.prefix:"")+(S==="$"?t:S==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():""),z=(S==="$"?i:/[%p]/.test(B)?s:"")+(v&&v.suffix!==void 0?v.suffix:""),P=QV[B],D=/[defgprs%]/.test(B);O=O===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function j(q){var W=L,se=z,ue,J,ae;if(B==="c")se=P(q)+se,q="";else{q=+q;var he=q<0||1/q<0;if(q=isNaN(q)?c:P(Math.abs(q),O),F&&(q=X0e(q)),he&&+q==0&&T!=="+"&&(he=!1),W=(he?T==="("?T:l:T==="-"||T==="("?"":T)+W,se=(B==="s"&&!isNaN(q)&&jT!==void 0?t5[8+jT/3]:"")+se+(he&&T==="("?")":""),D){for(ue=-1,J=q.length;++ue<J;)if(ae=q.charCodeAt(ue),48>ae||ae>57){se=(ae===46?r+q.slice(ue+1):q.slice(ue))+se,q=q.slice(0,ue);break}}}R&&!w&&(q=e(q,1/0));var Te=W.length+q.length+se.length,Re=Te<I?new Array(I-Te+1).join(_):"";switch(R&&w&&(q=e(Re+q,Re.length?I-se.length:1/0),Re=""),x){case"<":q=W+q+se+Re;break;case"=":q=W+Re+q+se;break;case"^":q=Re.slice(0,Te=Re.length>>1)+W+q+se+Re.slice(Te);break;default:q=Re+W+q+se;break}return a(q)}return j.toString=function(){return g+""},j}function p(g,v){var _=Math.max(-8,Math.min(8,Math.floor(Iy(v)/3)))*3,x=Math.pow(10,-_),T=f((g=tx(g),g.type="f",g),{suffix:t5[8+_/3]});return function(S){return T(x*S)}}return{format:f,formatPrefix:p}}var Sw,V3,D7;Z0e({thousands:",",grouping:[3],currency:["$",""]});function Z0e(n){return Sw=K0e(n),V3=Sw.format,D7=Sw.formatPrefix,Sw}function Q0e(n){return Math.max(0,-Iy(Math.abs(n)))}function J0e(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Iy(e)/3)))*3-Iy(Math.abs(n)))}function e_e(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,Iy(e)-Iy(n))+1}function L7(n,e,t,i){var r=nO(n,e,t),a;switch(i=tx(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(n),Math.abs(e));return i.precision==null&&!isNaN(a=J0e(r,s))&&(i.precision=a),D7(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=e_e(r,Math.max(Math.abs(n),Math.abs(e))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=Q0e(r))&&(i.precision=a-(i.type==="%")*2);break}}return V3(i)}function lp(n){var e=n.domain;return n.ticks=function(t){var i=e();return eO(i[0],i[i.length-1],t??10)},n.tickFormat=function(t,i){var r=e();return L7(r[0],r[r.length-1],t??10,i)},n.nice=function(t){t==null&&(t=10);var i=e(),r=0,a=i.length-1,s=i[r],l=i[a],c,f,p=10;for(l<s&&(f=s,s=l,l=f,f=r,r=a,a=f);p-- >0;){if(f=tO(s,l,t),f===c)return i[r]=s,i[a]=l,e(i);if(f>0)s=Math.floor(s/f)*f,l=Math.ceil(l/f)*f;else if(f<0)s=Math.ceil(s*f)/f,l=Math.floor(l*f)/f;else break;c=f}return n},n}function k7(){var n=F3();return n.copy=function(){return kx(n,k7())},Xl.apply(n,arguments),lp(n)}function U7(n){var e;function t(i){return i==null||isNaN(i=+i)?e:i}return t.invert=t,t.domain=t.range=function(i){return arguments.length?(n=Array.from(i,BT),t):n.slice()},t.unknown=function(i){return arguments.length?(e=i,t):e},t.copy=function(){return U7(n).unknown(e)},n=arguments.length?Array.from(n,BT):[0,1],lp(t)}function z7(n,e){n=n.slice();var t=0,i=n.length-1,r=n[t],a=n[i],s;return a<r&&(s=t,t=i,i=s,s=r,r=a,a=s),n[t]=e.floor(r),n[i]=e.ceil(a),n}function n5(n){return Math.log(n)}function i5(n){return Math.exp(n)}function t_e(n){return-Math.log(-n)}function n_e(n){return-Math.exp(-n)}function i_e(n){return isFinite(n)?+("1e"+n):n<0?0:n}function r_e(n){return n===10?i_e:n===Math.E?Math.exp:e=>Math.pow(n,e)}function a_e(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function r5(n){return(e,t)=>-n(-e,t)}function j3(n){const e=n(n5,i5),t=e.domain;let i=10,r,a;function s(){return r=a_e(i),a=r_e(i),t()[0]<0?(r=r5(r),a=r5(a),n(t_e,n_e)):n(n5,i5),e}return e.base=function(l){return arguments.length?(i=+l,s()):i},e.domain=function(l){return arguments.length?(t(l),s()):t()},e.ticks=l=>{const c=t();let f=c[0],p=c[c.length-1];const g=p<f;g&&([f,p]=[p,f]);let v=r(f),_=r(p),x,T;const S=l==null?10:+l;let w=[];if(!(i%1)&&_-v<S){if(v=Math.floor(v),_=Math.ceil(_),f>0){for(;v<=_;++v)for(x=1;x<i;++x)if(T=v<0?x/a(-v):x*a(v),!(T<f)){if(T>p)break;w.push(T)}}else for(;v<=_;++v)for(x=i-1;x>=1;--x)if(T=v>0?x/a(-v):x*a(v),!(T<f)){if(T>p)break;w.push(T)}w.length*2<S&&(w=eO(f,p,S))}else w=eO(v,_,Math.min(_-v,S)).map(a);return g?w.reverse():w},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=i===10?"s":","),typeof c!="function"&&(!(i%1)&&(c=tx(c)).precision==null&&(c.trim=!0),c=V3(c)),l===1/0)return c;const f=Math.max(1,i*l/e.ticks().length);return p=>{let g=p/a(Math.round(r(p)));return g*i<i-.5&&(g*=i),g<=f?c(p):""}},e.nice=()=>t(z7(t(),{floor:l=>a(Math.floor(r(l))),ceil:l=>a(Math.ceil(r(l)))})),e}function F7(){const n=j3(OM()).domain([1,10]);return n.copy=()=>kx(n,F7()).base(n.base()),Xl.apply(n,arguments),n}function a5(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function s5(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function H3(n){var e=1,t=n(a5(e),s5(e));return t.constant=function(i){return arguments.length?n(a5(e=+i),s5(e)):e},lp(t)}function B7(){var n=H3(OM());return n.copy=function(){return kx(n,B7()).constant(n.constant())},Xl.apply(n,arguments)}function o5(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function s_e(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function o_e(n){return n<0?-n*n:n*n}function G3(n){var e=n(Xs,Xs),t=1;function i(){return t===1?n(Xs,Xs):t===.5?n(s_e,o_e):n(o5(t),o5(1/t))}return e.exponent=function(r){return arguments.length?(t=+r,i()):t},lp(e)}function W3(){var n=G3(OM());return n.copy=function(){return kx(n,W3()).exponent(n.exponent())},Xl.apply(n,arguments),n}function l_e(){return W3.apply(null,arguments).exponent(.5)}function l5(n){return Math.sign(n)*n*n}function u_e(n){return Math.sign(n)*Math.sqrt(Math.abs(n))}function V7(){var n=F3(),e=[0,1],t=!1,i;function r(a){var s=u_e(n(a));return isNaN(s)?i:t?Math.round(s):s}return r.invert=function(a){return n.invert(l5(a))},r.domain=function(a){return arguments.length?(n.domain(a),r):n.domain()},r.range=function(a){return arguments.length?(n.range((e=Array.from(a,BT)).map(l5)),r):e.slice()},r.rangeRound=function(a){return r.range(a).round(!0)},r.round=function(a){return arguments.length?(t=!!a,r):t},r.clamp=function(a){return arguments.length?(n.clamp(a),r):n.clamp()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return V7(n.domain(),e).round(t).clamp(n.clamp()).unknown(i)},Xl.apply(r,arguments),lp(r)}function j7(){var n=[],e=[],t=[],i;function r(){var s=0,l=Math.max(1,e.length);for(t=new Array(l-1);++s<l;)t[s-1]=d0e(n,s/l);return a}function a(s){return s==null||isNaN(s=+s)?i:e[Dx(t,s)]}return a.invertExtent=function(s){var l=e.indexOf(s);return l<0?[NaN,NaN]:[l>0?t[l-1]:n[0],l<t.length?t[l]:n[n.length-1]]},a.domain=function(s){if(!arguments.length)return n.slice();n=[];for(let l of s)l!=null&&!isNaN(l=+l)&&n.push(l);return n.sort(jd),r()},a.range=function(s){return arguments.length?(e=Array.from(s),r()):e.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.quantiles=function(){return t.slice()},a.copy=function(){return j7().domain(n).range(e).unknown(i)},Xl.apply(a,arguments)}function H7(){var n=0,e=1,t=1,i=[.5],r=[0,1],a;function s(c){return c!=null&&c<=c?r[Dx(i,c,0,t)]:a}function l(){var c=-1;for(i=new Array(t);++c<t;)i[c]=((c+1)*e-(c-t)*n)/(t+1);return s}return s.domain=function(c){return arguments.length?([n,e]=c,n=+n,e=+e,l()):[n,e]},s.range=function(c){return arguments.length?(t=(r=Array.from(c)).length-1,l()):r.slice()},s.invertExtent=function(c){var f=r.indexOf(c);return f<0?[NaN,NaN]:f<1?[n,i[0]]:f>=t?[i[t-1],e]:[i[f-1],i[f]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return i.slice()},s.copy=function(){return H7().domain([n,e]).range(r).unknown(a)},Xl.apply(lp(s),arguments)}function G7(){var n=[.5],e=[0,1],t,i=1;function r(a){return a!=null&&a<=a?e[Dx(n,a,0,i)]:t}return r.domain=function(a){return arguments.length?(n=Array.from(a),i=Math.min(n.length,e.length-1),r):n.slice()},r.range=function(a){return arguments.length?(e=Array.from(a),i=Math.min(n.length,e.length-1),r):e.slice()},r.invertExtent=function(a){var s=e.indexOf(a);return[n[s-1],n[s]]},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return G7().domain(n).range(e).unknown(t)},Xl.apply(r,arguments)}const sR=new Date,oR=new Date;function oa(n,e,t,i){function r(a){return n(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(n(a=new Date(+a)),a),r.ceil=a=>(n(a=new Date(a-1)),e(a,1),n(a),a),r.round=a=>{const s=r(a),l=r.ceil(a);return a-s<l-a?s:l},r.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),r.range=(a,s,l)=>{const c=[];if(a=r.ceil(a),l=l==null?1:Math.floor(l),!(a<s)||!(l>0))return c;let f;do c.push(f=new Date(+a)),e(a,l),n(a);while(f<a&&a<s);return c},r.filter=a=>oa(s=>{if(s>=s)for(;n(s),!a(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;e(s,-1),!a(s););else for(;--l>=0;)for(;e(s,1),!a(s););}),t&&(r.count=(a,s)=>(sR.setTime(+a),oR.setTime(+s),n(sR),n(oR),Math.floor(t(sR,oR))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?s=>i(s)%a===0:s=>r.count(0,s)%a===0):r)),r}const HT=oa(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);HT.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?oa(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):HT);HT.range;const Xf=1e3,Bl=Xf*60,Yf=Bl*60,sh=Yf*24,q3=sh*7,u5=sh*30,lR=sh*365,Mm=oa(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*Xf)},(n,e)=>(e-n)/Xf,n=>n.getUTCSeconds());Mm.range;const $3=oa(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*Xf)},(n,e)=>{n.setTime(+n+e*Bl)},(n,e)=>(e-n)/Bl,n=>n.getMinutes());$3.range;const X3=oa(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*Bl)},(n,e)=>(e-n)/Bl,n=>n.getUTCMinutes());X3.range;const Y3=oa(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*Xf-n.getMinutes()*Bl)},(n,e)=>{n.setTime(+n+e*Yf)},(n,e)=>(e-n)/Yf,n=>n.getHours());Y3.range;const K3=oa(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*Yf)},(n,e)=>(e-n)/Yf,n=>n.getUTCHours());K3.range;const Ux=oa(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*Bl)/sh,n=>n.getDate()-1);Ux.range;const DM=oa(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/sh,n=>n.getUTCDate()-1);DM.range;const W7=oa(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/sh,n=>Math.floor(n/sh));W7.range;function fg(n){return oa(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Bl)/q3)}const LM=fg(0),GT=fg(1),c_e=fg(2),f_e=fg(3),Py=fg(4),h_e=fg(5),d_e=fg(6);LM.range;GT.range;c_e.range;f_e.range;Py.range;h_e.range;d_e.range;function hg(n){return oa(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/q3)}const kM=hg(0),WT=hg(1),p_e=hg(2),m_e=hg(3),Ry=hg(4),g_e=hg(5),v_e=hg(6);kM.range;WT.range;p_e.range;m_e.range;Ry.range;g_e.range;v_e.range;const Z3=oa(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());Z3.range;const Q3=oa(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());Q3.range;const oh=oa(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());oh.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:oa(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});oh.range;const lh=oa(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());lh.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:oa(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});lh.range;function q7(n,e,t,i,r,a){const s=[[Mm,1,Xf],[Mm,5,5*Xf],[Mm,15,15*Xf],[Mm,30,30*Xf],[a,1,Bl],[a,5,5*Bl],[a,15,15*Bl],[a,30,30*Bl],[r,1,Yf],[r,3,3*Yf],[r,6,6*Yf],[r,12,12*Yf],[i,1,sh],[i,2,2*sh],[t,1,q3],[e,1,u5],[e,3,3*u5],[n,1,lR]];function l(f,p,g){const v=p<f;v&&([f,p]=[p,f]);const _=g&&typeof g.range=="function"?g:c(f,p,g),x=_?_.range(f,+p+1):[];return v?x.reverse():x}function c(f,p,g){const v=Math.abs(p-f)/g,_=O3(([,,S])=>S).right(s,v);if(_===s.length)return n.every(nO(f/lR,p/lR,g));if(_===0)return HT.every(Math.max(nO(f,p,g),1));const[x,T]=s[v/s[_-1][2]<s[_][2]/v?_-1:_];return x.every(T)}return[l,c]}const[y_e,__e]=q7(lh,Q3,kM,W7,K3,X3),[b_e,x_e]=q7(oh,Z3,LM,Ux,Y3,$3);function uR(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function cR(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function U_(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function S_e(n){var e=n.dateTime,t=n.date,i=n.time,r=n.periods,a=n.days,s=n.shortDays,l=n.months,c=n.shortMonths,f=z_(r),p=F_(r),g=z_(a),v=F_(a),_=z_(s),x=F_(s),T=z_(l),S=F_(l),w=z_(c),I=F_(c),R={a:ae,A:he,b:Te,B:Re,c:null,d:m5,e:m5,f:W_e,g:tbe,G:ibe,H:j_e,I:H_e,j:G_e,L:$7,m:q_e,M:$_e,p:Q,q:de,Q:y5,s:_5,S:X_e,u:Y_e,U:K_e,V:Z_e,w:Q_e,W:J_e,x:null,X:null,y:ebe,Y:nbe,Z:rbe,"%":v5},O={a:Me,A:We,b:vt,B:be,c:null,d:g5,e:g5,f:lbe,g:ybe,G:bbe,H:abe,I:sbe,j:obe,L:Y7,m:ube,M:cbe,p:Ae,q:mt,Q:y5,s:_5,S:fbe,u:hbe,U:dbe,V:pbe,w:mbe,W:gbe,x:null,X:null,y:vbe,Y:_be,Z:xbe,"%":v5},F={a:D,A:j,b:q,B:W,c:se,d:d5,e:d5,f:z_e,g:h5,G:f5,H:p5,I:p5,j:D_e,L:U_e,m:O_e,M:L_e,p:P,q:N_e,Q:B_e,s:V_e,S:k_e,u:M_e,U:C_e,V:I_e,w:A_e,W:P_e,x:ue,X:J,y:h5,Y:f5,Z:R_e,"%":F_e};R.x=B(t,R),R.X=B(i,R),R.c=B(e,R),O.x=B(t,O),O.X=B(i,O),O.c=B(e,O);function B(ye,et){return function(wt){var ze=[],Tt=-1,Oe=0,Ke=ye.length,He,ut,re;for(wt instanceof Date||(wt=new Date(+wt));++Tt<Ke;)ye.charCodeAt(Tt)===37&&(ze.push(ye.slice(Oe,Tt)),(ut=c5[He=ye.charAt(++Tt)])!=null?He=ye.charAt(++Tt):ut=He==="e"?" ":"0",(re=et[He])&&(He=re(wt,ut)),ze.push(He),Oe=Tt+1);return ze.push(ye.slice(Oe,Tt)),ze.join("")}}function L(ye,et){return function(wt){var ze=U_(1900,void 0,1),Tt=z(ze,ye,wt+="",0),Oe,Ke;if(Tt!=wt.length)return null;if("Q"in ze)return new Date(ze.Q);if("s"in ze)return new Date(ze.s*1e3+("L"in ze?ze.L:0));if(et&&!("Z"in ze)&&(ze.Z=0),"p"in ze&&(ze.H=ze.H%12+ze.p*12),ze.m===void 0&&(ze.m="q"in ze?ze.q:0),"V"in ze){if(ze.V<1||ze.V>53)return null;"w"in ze||(ze.w=1),"Z"in ze?(Oe=cR(U_(ze.y,0,1)),Ke=Oe.getUTCDay(),Oe=Ke>4||Ke===0?WT.ceil(Oe):WT(Oe),Oe=DM.offset(Oe,(ze.V-1)*7),ze.y=Oe.getUTCFullYear(),ze.m=Oe.getUTCMonth(),ze.d=Oe.getUTCDate()+(ze.w+6)%7):(Oe=uR(U_(ze.y,0,1)),Ke=Oe.getDay(),Oe=Ke>4||Ke===0?GT.ceil(Oe):GT(Oe),Oe=Ux.offset(Oe,(ze.V-1)*7),ze.y=Oe.getFullYear(),ze.m=Oe.getMonth(),ze.d=Oe.getDate()+(ze.w+6)%7)}else("W"in ze||"U"in ze)&&("w"in ze||(ze.w="u"in ze?ze.u%7:"W"in ze?1:0),Ke="Z"in ze?cR(U_(ze.y,0,1)).getUTCDay():uR(U_(ze.y,0,1)).getDay(),ze.m=0,ze.d="W"in ze?(ze.w+6)%7+ze.W*7-(Ke+5)%7:ze.w+ze.U*7-(Ke+6)%7);return"Z"in ze?(ze.H+=ze.Z/100|0,ze.M+=ze.Z%100,cR(ze)):uR(ze)}}function z(ye,et,wt,ze){for(var Tt=0,Oe=et.length,Ke=wt.length,He,ut;Tt<Oe;){if(ze>=Ke)return-1;if(He=et.charCodeAt(Tt++),He===37){if(He=et.charAt(Tt++),ut=F[He in c5?et.charAt(Tt++):He],!ut||(ze=ut(ye,wt,ze))<0)return-1}else if(He!=wt.charCodeAt(ze++))return-1}return ze}function P(ye,et,wt){var ze=f.exec(et.slice(wt));return ze?(ye.p=p.get(ze[0].toLowerCase()),wt+ze[0].length):-1}function D(ye,et,wt){var ze=_.exec(et.slice(wt));return ze?(ye.w=x.get(ze[0].toLowerCase()),wt+ze[0].length):-1}function j(ye,et,wt){var ze=g.exec(et.slice(wt));return ze?(ye.w=v.get(ze[0].toLowerCase()),wt+ze[0].length):-1}function q(ye,et,wt){var ze=w.exec(et.slice(wt));return ze?(ye.m=I.get(ze[0].toLowerCase()),wt+ze[0].length):-1}function W(ye,et,wt){var ze=T.exec(et.slice(wt));return ze?(ye.m=S.get(ze[0].toLowerCase()),wt+ze[0].length):-1}function se(ye,et,wt){return z(ye,e,et,wt)}function ue(ye,et,wt){return z(ye,t,et,wt)}function J(ye,et,wt){return z(ye,i,et,wt)}function ae(ye){return s[ye.getDay()]}function he(ye){return a[ye.getDay()]}function Te(ye){return c[ye.getMonth()]}function Re(ye){return l[ye.getMonth()]}function Q(ye){return r[+(ye.getHours()>=12)]}function de(ye){return 1+~~(ye.getMonth()/3)}function Me(ye){return s[ye.getUTCDay()]}function We(ye){return a[ye.getUTCDay()]}function vt(ye){return c[ye.getUTCMonth()]}function be(ye){return l[ye.getUTCMonth()]}function Ae(ye){return r[+(ye.getUTCHours()>=12)]}function mt(ye){return 1+~~(ye.getUTCMonth()/3)}return{format:function(ye){var et=B(ye+="",R);return et.toString=function(){return ye},et},parse:function(ye){var et=L(ye+="",!1);return et.toString=function(){return ye},et},utcFormat:function(ye){var et=B(ye+="",O);return et.toString=function(){return ye},et},utcParse:function(ye){var et=L(ye+="",!0);return et.toString=function(){return ye},et}}}var c5={"-":"",_:" ",0:"0"},Aa=/^\s*\d+/,w_e=/^%/,E_e=/[\\^$*+?|[\]().{}]/g;function si(n,e,t){var i=n<0?"-":"",r=(i?-n:n)+"",a=r.length;return i+(a<t?new Array(t-a+1).join(e)+r:r)}function T_e(n){return n.replace(E_e,"\\$&")}function z_(n){return new RegExp("^(?:"+n.map(T_e).join("|")+")","i")}function F_(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function A_e(n,e,t){var i=Aa.exec(e.slice(t,t+1));return i?(n.w=+i[0],t+i[0].length):-1}function M_e(n,e,t){var i=Aa.exec(e.slice(t,t+1));return i?(n.u=+i[0],t+i[0].length):-1}function C_e(n,e,t){var i=Aa.exec(e.slice(t,t+2));return i?(n.U=+i[0],t+i[0].length):-1}function I_e(n,e,t){var i=Aa.exec(e.slice(t,t+2));return i?(n.V=+i[0],t+i[0].length):-1}function P_e(n,e,t){var i=Aa.exec(e.slice(t,t+2));return i?(n.W=+i[0],t+i[0].length):-1}function f5(n,e,t){var i=Aa.exec(e.slice(t,t+4));return i?(n.y=+i[0],t+i[0].length):-1}function h5(n,e,t){var i=Aa.exec(e.slice(t,t+2));return i?(n.y=+i[0]+(+i[0]>68?1900:2e3),t+i[0].length):-1}function R_e(n,e,t){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return i?(n.Z=i[1]?0:-(i[2]+(i[3]||"00")),t+i[0].length):-1}function N_e(n,e,t){var i=Aa.exec(e.slice(t,t+1));return i?(n.q=i[0]*3-3,t+i[0].length):-1}function O_e(n,e,t){var i=Aa.exec(e.slice(t,t+2));return i?(n.m=i[0]-1,t+i[0].length):-1}function d5(n,e,t){var i=Aa.exec(e.slice(t,t+2));return i?(n.d=+i[0],t+i[0].length):-1}function D_e(n,e,t){var i=Aa.exec(e.slice(t,t+3));return i?(n.m=0,n.d=+i[0],t+i[0].length):-1}function p5(n,e,t){var i=Aa.exec(e.slice(t,t+2));return i?(n.H=+i[0],t+i[0].length):-1}function L_e(n,e,t){var i=Aa.exec(e.slice(t,t+2));return i?(n.M=+i[0],t+i[0].length):-1}function k_e(n,e,t){var i=Aa.exec(e.slice(t,t+2));return i?(n.S=+i[0],t+i[0].length):-1}function U_e(n,e,t){var i=Aa.exec(e.slice(t,t+3));return i?(n.L=+i[0],t+i[0].length):-1}function z_e(n,e,t){var i=Aa.exec(e.slice(t,t+6));return i?(n.L=Math.floor(i[0]/1e3),t+i[0].length):-1}function F_e(n,e,t){var i=w_e.exec(e.slice(t,t+1));return i?t+i[0].length:-1}function B_e(n,e,t){var i=Aa.exec(e.slice(t));return i?(n.Q=+i[0],t+i[0].length):-1}function V_e(n,e,t){var i=Aa.exec(e.slice(t));return i?(n.s=+i[0],t+i[0].length):-1}function m5(n,e){return si(n.getDate(),e,2)}function j_e(n,e){return si(n.getHours(),e,2)}function H_e(n,e){return si(n.getHours()%12||12,e,2)}function G_e(n,e){return si(1+Ux.count(oh(n),n),e,3)}function $7(n,e){return si(n.getMilliseconds(),e,3)}function W_e(n,e){return $7(n,e)+"000"}function q_e(n,e){return si(n.getMonth()+1,e,2)}function $_e(n,e){return si(n.getMinutes(),e,2)}function X_e(n,e){return si(n.getSeconds(),e,2)}function Y_e(n){var e=n.getDay();return e===0?7:e}function K_e(n,e){return si(LM.count(oh(n)-1,n),e,2)}function X7(n){var e=n.getDay();return e>=4||e===0?Py(n):Py.ceil(n)}function Z_e(n,e){return n=X7(n),si(Py.count(oh(n),n)+(oh(n).getDay()===4),e,2)}function Q_e(n){return n.getDay()}function J_e(n,e){return si(GT.count(oh(n)-1,n),e,2)}function ebe(n,e){return si(n.getFullYear()%100,e,2)}function tbe(n,e){return n=X7(n),si(n.getFullYear()%100,e,2)}function nbe(n,e){return si(n.getFullYear()%1e4,e,4)}function ibe(n,e){var t=n.getDay();return n=t>=4||t===0?Py(n):Py.ceil(n),si(n.getFullYear()%1e4,e,4)}function rbe(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+si(e/60|0,"0",2)+si(e%60,"0",2)}function g5(n,e){return si(n.getUTCDate(),e,2)}function abe(n,e){return si(n.getUTCHours(),e,2)}function sbe(n,e){return si(n.getUTCHours()%12||12,e,2)}function obe(n,e){return si(1+DM.count(lh(n),n),e,3)}function Y7(n,e){return si(n.getUTCMilliseconds(),e,3)}function lbe(n,e){return Y7(n,e)+"000"}function ube(n,e){return si(n.getUTCMonth()+1,e,2)}function cbe(n,e){return si(n.getUTCMinutes(),e,2)}function fbe(n,e){return si(n.getUTCSeconds(),e,2)}function hbe(n){var e=n.getUTCDay();return e===0?7:e}function dbe(n,e){return si(kM.count(lh(n)-1,n),e,2)}function K7(n){var e=n.getUTCDay();return e>=4||e===0?Ry(n):Ry.ceil(n)}function pbe(n,e){return n=K7(n),si(Ry.count(lh(n),n)+(lh(n).getUTCDay()===4),e,2)}function mbe(n){return n.getUTCDay()}function gbe(n,e){return si(WT.count(lh(n)-1,n),e,2)}function vbe(n,e){return si(n.getUTCFullYear()%100,e,2)}function ybe(n,e){return n=K7(n),si(n.getUTCFullYear()%100,e,2)}function _be(n,e){return si(n.getUTCFullYear()%1e4,e,4)}function bbe(n,e){var t=n.getUTCDay();return n=t>=4||t===0?Ry(n):Ry.ceil(n),si(n.getUTCFullYear()%1e4,e,4)}function xbe(){return"+0000"}function v5(){return"%"}function y5(n){return+n}function _5(n){return Math.floor(+n/1e3)}var Ov,Z7,Q7;Sbe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Sbe(n){return Ov=S_e(n),Z7=Ov.format,Ov.parse,Q7=Ov.utcFormat,Ov.utcParse,Ov}function wbe(n){return new Date(n)}function Ebe(n){return n instanceof Date?+n:+new Date(+n)}function J3(n,e,t,i,r,a,s,l,c,f){var p=F3(),g=p.invert,v=p.domain,_=f(".%L"),x=f(":%S"),T=f("%I:%M"),S=f("%I %p"),w=f("%a %d"),I=f("%b %d"),R=f("%B"),O=f("%Y");function F(B){return(c(B)<B?_:l(B)<B?x:s(B)<B?T:a(B)<B?S:i(B)<B?r(B)<B?w:I:t(B)<B?R:O)(B)}return p.invert=function(B){return new Date(g(B))},p.domain=function(B){return arguments.length?v(Array.from(B,Ebe)):v().map(wbe)},p.ticks=function(B){var L=v();return n(L[0],L[L.length-1],B??10)},p.tickFormat=function(B,L){return L==null?F:f(L)},p.nice=function(B){var L=v();return(!B||typeof B.range!="function")&&(B=e(L[0],L[L.length-1],B??10)),B?v(z7(L,B)):p},p.copy=function(){return kx(p,J3(n,e,t,i,r,a,s,l,c,f))},p}function Tbe(){return Xl.apply(J3(b_e,x_e,oh,Z3,LM,Ux,Y3,$3,Mm,Z7).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Abe(){return Xl.apply(J3(y_e,__e,lh,Q3,kM,DM,K3,X3,Mm,Q7).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function UM(){var n=0,e=1,t,i,r,a,s=Xs,l=!1,c;function f(g){return g==null||isNaN(g=+g)?c:s(r===0?.5:(g=(a(g)-t)*r,l?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([n,e]=g,t=a(n=+n),i=a(e=+e),r=t===i?0:1/(i-t),f):[n,e]},f.clamp=function(g){return arguments.length?(l=!!g,f):l},f.interpolator=function(g){return arguments.length?(s=g,f):s};function p(g){return function(v){var _,x;return arguments.length?([_,x]=v,s=g(_,x),f):[s(0),s(1)]}}return f.range=p(Xy),f.rangeRound=p(z3),f.unknown=function(g){return arguments.length?(c=g,f):c},function(g){return a=g,t=g(n),i=g(e),r=t===i?0:1/(i-t),f}}function up(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function J7(){var n=lp(UM()(Xs));return n.copy=function(){return up(n,J7())},ph.apply(n,arguments)}function eW(){var n=j3(UM()).domain([1,10]);return n.copy=function(){return up(n,eW()).base(n.base())},ph.apply(n,arguments)}function tW(){var n=H3(UM());return n.copy=function(){return up(n,tW()).constant(n.constant())},ph.apply(n,arguments)}function eL(){var n=G3(UM());return n.copy=function(){return up(n,eL()).exponent(n.exponent())},ph.apply(n,arguments)}function Mbe(){return eL.apply(null,arguments).exponent(.5)}function nW(){var n=[],e=Xs;function t(i){if(i!=null&&!isNaN(i=+i))return e((Dx(n,i,1)-1)/(n.length-1))}return t.domain=function(i){if(!arguments.length)return n.slice();n=[];for(let r of i)r!=null&&!isNaN(r=+r)&&n.push(r);return n.sort(jd),t},t.interpolator=function(i){return arguments.length?(e=i,t):e},t.range=function(){return n.map((i,r)=>e(r/(n.length-1)))},t.quantiles=function(i){return Array.from({length:i+1},(r,a)=>h0e(n,a/i))},t.copy=function(){return nW(e).domain(n)},ph.apply(t,arguments)}function zM(){var n=0,e=.5,t=1,i=1,r,a,s,l,c,f=Xs,p,g=!1,v;function _(T){return isNaN(T=+T)?v:(T=.5+((T=+p(T))-a)*(i*T<i*a?l:c),f(g?Math.max(0,Math.min(1,T)):T))}_.domain=function(T){return arguments.length?([n,e,t]=T,r=p(n=+n),a=p(e=+e),s=p(t=+t),l=r===a?0:.5/(a-r),c=a===s?0:.5/(s-a),i=a<r?-1:1,_):[n,e,t]},_.clamp=function(T){return arguments.length?(g=!!T,_):g},_.interpolator=function(T){return arguments.length?(f=T,_):f};function x(T){return function(S){var w,I,R;return arguments.length?([w,I,R]=S,f=F0e(T,[w,I,R]),_):[f(0),f(.5),f(1)]}}return _.range=x(Xy),_.rangeRound=x(z3),_.unknown=function(T){return arguments.length?(v=T,_):v},function(T){return p=T,r=T(n),a=T(e),s=T(t),l=r===a?0:.5/(a-r),c=a===s?0:.5/(s-a),i=a<r?-1:1,_}}function iW(){var n=lp(zM()(Xs));return n.copy=function(){return up(n,iW())},ph.apply(n,arguments)}function rW(){var n=j3(zM()).domain([.1,1,10]);return n.copy=function(){return up(n,rW()).base(n.base())},ph.apply(n,arguments)}function aW(){var n=H3(zM());return n.copy=function(){return up(n,aW()).constant(n.constant())},ph.apply(n,arguments)}function tL(){var n=G3(zM());return n.copy=function(){return up(n,tL()).exponent(n.exponent())},ph.apply(n,arguments)}function Cbe(){return tL.apply(null,arguments).exponent(.5)}const K_=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:L3,scaleDiverging:iW,scaleDivergingLog:rW,scaleDivergingPow:tL,scaleDivergingSqrt:Cbe,scaleDivergingSymlog:aW,scaleIdentity:U7,scaleImplicit:iO,scaleLinear:k7,scaleLog:F7,scaleOrdinal:D3,scalePoint:m0e,scalePow:W3,scaleQuantile:j7,scaleQuantize:H7,scaleRadial:V7,scaleSequential:J7,scaleSequentialLog:eW,scaleSequentialPow:eL,scaleSequentialQuantile:nW,scaleSequentialSqrt:Mbe,scaleSequentialSymlog:tW,scaleSqrt:l_e,scaleSymlog:B7,scaleThreshold:G7,scaleTime:Tbe,scaleUtc:Abe,tickFormat:L7},Symbol.toStringTag,{value:"Module"}));var mh=n=>n.chartData,sW=Ge([mh],n=>{var e=n.chartData!=null?n.chartData.length-1:0;return{chartData:n.chartData,computedData:n.computedData,dataEndIndex:e,dataStartIndex:0}}),oW=(n,e,t,i)=>i?sW(n):mh(n),Ibe=(n,e,t)=>t?sW(n):mh(n);function uh(n){if(Array.isArray(n)&&n.length===2){var[e,t]=n;if(Kn(e)&&Kn(t))return!0}return!1}function b5(n,e,t){return t?n:[Math.min(n[0],e[0]),Math.max(n[1],e[1])]}function lW(n,e){if(e&&typeof n!="function"&&Array.isArray(n)&&n.length===2){var[t,i]=n,r,a;if(Kn(t))r=t;else if(typeof t=="function")return;if(Kn(i))a=i;else if(typeof i=="function")return;var s=[r,a];if(uh(s))return s}}function Pbe(n,e,t){if(!(!t&&e==null)){if(typeof n=="function"&&e!=null)try{var i=n(e,t);if(uh(i))return b5(i,e,t)}catch{}if(Array.isArray(n)&&n.length===2){var[r,a]=n,s,l;if(r==="auto")e!=null&&(s=Math.min(...e));else if(qt(r))s=r;else if(typeof r=="function")try{e!=null&&(s=r(e==null?void 0:e[0]))}catch{}else if(typeof r=="string"&&NB.test(r)){var c=NB.exec(r);if(c==null||c[1]==null||e==null)s=void 0;else{var f=+c[1];s=e[0]-f}}else s=e==null?void 0:e[0];if(a==="auto")e!=null&&(l=Math.max(...e));else if(qt(a))l=a;else if(typeof a=="function")try{e!=null&&(l=a(e==null?void 0:e[1]))}catch{}else if(typeof a=="string"&&OB.test(a)){var p=OB.exec(a);if(p==null||p[1]==null||e==null)l=void 0;else{var g=+p[1];l=e[1]+g}}else l=e==null?void 0:e[1];var v=[s,l];if(uh(v))return e==null?v:b5(v,e,t)}}}var Yy=1e9,Rbe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},iL,ar=!0,ql="[DecimalError] ",Um=ql+"Invalid argument: ",nL=ql+"Exponent out of range: ",Ky=Math.floor,mm=Math.pow,Nbe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ko,wa=1e7,$i=7,uW=9007199254740991,qT=Ky(uW/$i),Bt={};Bt.absoluteValue=Bt.abs=function(){var n=new this.constructor(this);return n.s&&(n.s=1),n};Bt.comparedTo=Bt.cmp=function(n){var e,t,i,r,a=this;if(n=new a.constructor(n),a.s!==n.s)return a.s||-n.s;if(a.e!==n.e)return a.e>n.e^a.s<0?1:-1;for(i=a.d.length,r=n.d.length,e=0,t=i<r?i:r;e<t;++e)if(a.d[e]!==n.d[e])return a.d[e]>n.d[e]^a.s<0?1:-1;return i===r?0:i>r^a.s<0?1:-1};Bt.decimalPlaces=Bt.dp=function(){var n=this,e=n.d.length-1,t=(e-n.e)*$i;if(e=n.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};Bt.dividedBy=Bt.div=function(n){return Qf(this,new this.constructor(n))};Bt.dividedToIntegerBy=Bt.idiv=function(n){var e=this,t=e.constructor;return Ni(Qf(e,new t(n),0,1),t.precision)};Bt.equals=Bt.eq=function(n){return!this.cmp(n)};Bt.exponent=function(){return qr(this)};Bt.greaterThan=Bt.gt=function(n){return this.cmp(n)>0};Bt.greaterThanOrEqualTo=Bt.gte=function(n){return this.cmp(n)>=0};Bt.isInteger=Bt.isint=function(){return this.e>this.d.length-2};Bt.isNegative=Bt.isneg=function(){return this.s<0};Bt.isPositive=Bt.ispos=function(){return this.s>0};Bt.isZero=function(){return this.s===0};Bt.lessThan=Bt.lt=function(n){return this.cmp(n)<0};Bt.lessThanOrEqualTo=Bt.lte=function(n){return this.cmp(n)<1};Bt.logarithm=Bt.log=function(n){var e,t=this,i=t.constructor,r=i.precision,a=r+5;if(n===void 0)n=new i(10);else if(n=new i(n),n.s<1||n.eq(Ko))throw Error(ql+"NaN");if(t.s<1)throw Error(ql+(t.s?"NaN":"-Infinity"));return t.eq(Ko)?new i(0):(ar=!1,e=Qf(nx(t,a),nx(n,a),a),ar=!0,Ni(e,r))};Bt.minus=Bt.sub=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?hW(e,n):cW(e,(n.s=-n.s,n))};Bt.modulo=Bt.mod=function(n){var e,t=this,i=t.constructor,r=i.precision;if(n=new i(n),!n.s)throw Error(ql+"NaN");return t.s?(ar=!1,e=Qf(t,n,0,1).times(n),ar=!0,t.minus(e)):Ni(new i(t),r)};Bt.naturalExponential=Bt.exp=function(){return fW(this)};Bt.naturalLogarithm=Bt.ln=function(){return nx(this)};Bt.negated=Bt.neg=function(){var n=new this.constructor(this);return n.s=-n.s||0,n};Bt.plus=Bt.add=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?cW(e,n):hW(e,(n.s=-n.s,n))};Bt.precision=Bt.sd=function(n){var e,t,i,r=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(Um+n);if(e=qr(r)+1,i=r.d.length-1,t=i*$i+1,i=r.d[i],i){for(;i%10==0;i/=10)t--;for(i=r.d[0];i>=10;i/=10)t++}return n&&e>t?e:t};Bt.squareRoot=Bt.sqrt=function(){var n,e,t,i,r,a,s,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(ql+"NaN")}for(n=qr(l),ar=!1,r=Math.sqrt(+l),r==0||r==1/0?(e=Oc(l.d),(e.length+n)%2==0&&(e+="0"),r=Math.sqrt(e),n=Ky((n+1)/2)-(n<0||n%2),r==1/0?e="5e"+n:(e=r.toExponential(),e=e.slice(0,e.indexOf("e")+1)+n),i=new c(e)):i=new c(r.toString()),t=c.precision,r=s=t+3;;)if(a=i,i=a.plus(Qf(l,a,s+2)).times(.5),Oc(a.d).slice(0,s)===(e=Oc(i.d)).slice(0,s)){if(e=e.slice(s-3,s+1),r==s&&e=="4999"){if(Ni(a,t+1,0),a.times(a).eq(l)){i=a;break}}else if(e!="9999")break;s+=4}return ar=!0,Ni(i,t)};Bt.times=Bt.mul=function(n){var e,t,i,r,a,s,l,c,f,p=this,g=p.constructor,v=p.d,_=(n=new g(n)).d;if(!p.s||!n.s)return new g(0);for(n.s*=p.s,t=p.e+n.e,c=v.length,f=_.length,c<f&&(a=v,v=_,_=a,s=c,c=f,f=s),a=[],s=c+f,i=s;i--;)a.push(0);for(i=f;--i>=0;){for(e=0,r=c+i;r>i;)l=a[r]+_[i]*v[r-i-1]+e,a[r--]=l%wa|0,e=l/wa|0;a[r]=(a[r]+e)%wa|0}for(;!a[--s];)a.pop();return e?++t:a.shift(),n.d=a,n.e=t,ar?Ni(n,g.precision):n};Bt.toDecimalPlaces=Bt.todp=function(n,e){var t=this,i=t.constructor;return t=new i(t),n===void 0?t:(Zc(n,0,Yy),e===void 0?e=i.rounding:Zc(e,0,8),Ni(t,n+qr(t)+1,e))};Bt.toExponential=function(n,e){var t,i=this,r=i.constructor;return n===void 0?t=eg(i,!0):(Zc(n,0,Yy),e===void 0?e=r.rounding:Zc(e,0,8),i=Ni(new r(i),n+1,e),t=eg(i,!0,n+1)),t};Bt.toFixed=function(n,e){var t,i,r=this,a=r.constructor;return n===void 0?eg(r):(Zc(n,0,Yy),e===void 0?e=a.rounding:Zc(e,0,8),i=Ni(new a(r),n+qr(r)+1,e),t=eg(i.abs(),!1,n+qr(i)+1),r.isneg()&&!r.isZero()?"-"+t:t)};Bt.toInteger=Bt.toint=function(){var n=this,e=n.constructor;return Ni(new e(n),qr(n)+1,e.rounding)};Bt.toNumber=function(){return+this};Bt.toPower=Bt.pow=function(n){var e,t,i,r,a,s,l=this,c=l.constructor,f=12,p=+(n=new c(n));if(!n.s)return new c(Ko);if(l=new c(l),!l.s){if(n.s<1)throw Error(ql+"Infinity");return l}if(l.eq(Ko))return l;if(i=c.precision,n.eq(Ko))return Ni(l,i);if(e=n.e,t=n.d.length-1,s=e>=t,a=l.s,s){if((t=p<0?-p:p)<=uW){for(r=new c(Ko),e=Math.ceil(i/$i+4),ar=!1;t%2&&(r=r.times(l),S5(r.d,e)),t=Ky(t/2),t!==0;)l=l.times(l),S5(l.d,e);return ar=!0,n.s<0?new c(Ko).div(r):Ni(r,i)}}else if(a<0)throw Error(ql+"NaN");return a=a<0&&n.d[Math.max(e,t)]&1?-1:1,l.s=1,ar=!1,r=n.times(nx(l,i+f)),ar=!0,r=fW(r),r.s=a,r};Bt.toPrecision=function(n,e){var t,i,r=this,a=r.constructor;return n===void 0?(t=qr(r),i=eg(r,t<=a.toExpNeg||t>=a.toExpPos)):(Zc(n,1,Yy),e===void 0?e=a.rounding:Zc(e,0,8),r=Ni(new a(r),n,e),t=qr(r),i=eg(r,n<=t||t<=a.toExpNeg,n)),i};Bt.toSignificantDigits=Bt.tosd=function(n,e){var t=this,i=t.constructor;return n===void 0?(n=i.precision,e=i.rounding):(Zc(n,1,Yy),e===void 0?e=i.rounding:Zc(e,0,8)),Ni(new i(t),n,e)};Bt.toString=Bt.valueOf=Bt.val=Bt.toJSON=Bt[Symbol.for("nodejs.util.inspect.custom")]=function(){var n=this,e=qr(n),t=n.constructor;return eg(n,e<=t.toExpNeg||e>=t.toExpPos)};function cW(n,e){var t,i,r,a,s,l,c,f,p=n.constructor,g=p.precision;if(!n.s||!e.s)return e.s||(e=new p(n)),ar?Ni(e,g):e;if(c=n.d,f=e.d,s=n.e,r=e.e,c=c.slice(),a=s-r,a){for(a<0?(i=c,a=-a,l=f.length):(i=f,r=s,l=c.length),s=Math.ceil(g/$i),l=s>l?s+1:l+1,a>l&&(a=l,i.length=1),i.reverse();a--;)i.push(0);i.reverse()}for(l=c.length,a=f.length,l-a<0&&(a=l,i=f,f=c,c=i),t=0;a;)t=(c[--a]=c[a]+f[a]+t)/wa|0,c[a]%=wa;for(t&&(c.unshift(t),++r),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=r,ar?Ni(e,g):e}function Zc(n,e,t){if(n!==~~n||n<e||n>t)throw Error(Um+n)}function Oc(n){var e,t,i,r=n.length-1,a="",s=n[0];if(r>0){for(a+=s,e=1;e<r;e++)i=n[e]+"",t=$i-i.length,t&&(a+=xd(t)),a+=i;s=n[e],i=s+"",t=$i-i.length,t&&(a+=xd(t))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Qf=(function(){function n(i,r){var a,s=0,l=i.length;for(i=i.slice();l--;)a=i[l]*r+s,i[l]=a%wa|0,s=a/wa|0;return s&&i.unshift(s),i}function e(i,r,a,s){var l,c;if(a!=s)c=a>s?1:-1;else for(l=c=0;l<a;l++)if(i[l]!=r[l]){c=i[l]>r[l]?1:-1;break}return c}function t(i,r,a){for(var s=0;a--;)i[a]-=s,s=i[a]<r[a]?1:0,i[a]=s*wa+i[a]-r[a];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,a,s){var l,c,f,p,g,v,_,x,T,S,w,I,R,O,F,B,L,z,P=i.constructor,D=i.s==r.s?1:-1,j=i.d,q=r.d;if(!i.s)return new P(i);if(!r.s)throw Error(ql+"Division by zero");for(c=i.e-r.e,L=q.length,F=j.length,_=new P(D),x=_.d=[],f=0;q[f]==(j[f]||0);)++f;if(q[f]>(j[f]||0)&&--c,a==null?I=a=P.precision:s?I=a+(qr(i)-qr(r))+1:I=a,I<0)return new P(0);if(I=I/$i+2|0,f=0,L==1)for(p=0,q=q[0],I++;(f<F||p)&&I--;f++)R=p*wa+(j[f]||0),x[f]=R/q|0,p=R%q|0;else{for(p=wa/(q[0]+1)|0,p>1&&(q=n(q,p),j=n(j,p),L=q.length,F=j.length),O=L,T=j.slice(0,L),S=T.length;S<L;)T[S++]=0;z=q.slice(),z.unshift(0),B=q[0],q[1]>=wa/2&&++B;do p=0,l=e(q,T,L,S),l<0?(w=T[0],L!=S&&(w=w*wa+(T[1]||0)),p=w/B|0,p>1?(p>=wa&&(p=wa-1),g=n(q,p),v=g.length,S=T.length,l=e(g,T,v,S),l==1&&(p--,t(g,L<v?z:q,v))):(p==0&&(l=p=1),g=q.slice()),v=g.length,v<S&&g.unshift(0),t(T,g,S),l==-1&&(S=T.length,l=e(q,T,L,S),l<1&&(p++,t(T,L<S?z:q,S))),S=T.length):l===0&&(p++,T=[0]),x[f++]=p,l&&T[0]?T[S++]=j[O]||0:(T=[j[O]],S=1);while((O++<F||T[0]!==void 0)&&I--)}return x[0]||x.shift(),_.e=c,Ni(_,s?a+qr(_)+1:a)}})();function fW(n,e){var t,i,r,a,s,l,c=0,f=0,p=n.constructor,g=p.precision;if(qr(n)>16)throw Error(nL+qr(n));if(!n.s)return new p(Ko);for(ar=!1,l=g,s=new p(.03125);n.abs().gte(.1);)n=n.times(s),f+=5;for(i=Math.log(mm(2,f))/Math.LN10*2+5|0,l+=i,t=r=a=new p(Ko),p.precision=l;;){if(r=Ni(r.times(n),l),t=t.times(++c),s=a.plus(Qf(r,t,l)),Oc(s.d).slice(0,l)===Oc(a.d).slice(0,l)){for(;f--;)a=Ni(a.times(a),l);return p.precision=g,e==null?(ar=!0,Ni(a,g)):a}a=s}}function qr(n){for(var e=n.e*$i,t=n.d[0];t>=10;t/=10)e++;return e}function fR(n,e,t){if(e>n.LN10.sd())throw ar=!0,t&&(n.precision=t),Error(ql+"LN10 precision limit exceeded");return Ni(new n(n.LN10),e)}function xd(n){for(var e="";n--;)e+="0";return e}function nx(n,e){var t,i,r,a,s,l,c,f,p,g=1,v=10,_=n,x=_.d,T=_.constructor,S=T.precision;if(_.s<1)throw Error(ql+(_.s?"NaN":"-Infinity"));if(_.eq(Ko))return new T(0);if(e==null?(ar=!1,f=S):f=e,_.eq(10))return e==null&&(ar=!0),fR(T,f);if(f+=v,T.precision=f,t=Oc(x),i=t.charAt(0),a=qr(_),Math.abs(a)<15e14){for(;i<7&&i!=1||i==1&&t.charAt(1)>3;)_=_.times(n),t=Oc(_.d),i=t.charAt(0),g++;a=qr(_),i>1?(_=new T("0."+t),a++):_=new T(i+"."+t.slice(1))}else return c=fR(T,f+2,S).times(a+""),_=nx(new T(i+"."+t.slice(1)),f-v).plus(c),T.precision=S,e==null?(ar=!0,Ni(_,S)):_;for(l=s=_=Qf(_.minus(Ko),_.plus(Ko),f),p=Ni(_.times(_),f),r=3;;){if(s=Ni(s.times(p),f),c=l.plus(Qf(s,new T(r),f)),Oc(c.d).slice(0,f)===Oc(l.d).slice(0,f))return l=l.times(2),a!==0&&(l=l.plus(fR(T,f+2,S).times(a+""))),l=Qf(l,new T(g),f),T.precision=S,e==null?(ar=!0,Ni(l,S)):l;l=c,r+=2}}function x5(n,e){var t,i,r;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(t<0&&(t=i),t+=+e.slice(i+1),e=e.substring(0,i)):t<0&&(t=e.length),i=0;e.charCodeAt(i)===48;)++i;for(r=e.length;e.charCodeAt(r-1)===48;)--r;if(e=e.slice(i,r),e){if(r-=i,t=t-i-1,n.e=Ky(t/$i),n.d=[],i=(t+1)%$i,t<0&&(i+=$i),i<r){for(i&&n.d.push(+e.slice(0,i)),r-=$i;i<r;)n.d.push(+e.slice(i,i+=$i));e=e.slice(i),i=$i-e.length}else i-=r;for(;i--;)e+="0";if(n.d.push(+e),ar&&(n.e>qT||n.e<-qT))throw Error(nL+t)}else n.s=0,n.e=0,n.d=[0];return n}function Ni(n,e,t){var i,r,a,s,l,c,f,p,g=n.d;for(s=1,a=g[0];a>=10;a/=10)s++;if(i=e-s,i<0)i+=$i,r=e,f=g[p=0];else{if(p=Math.ceil((i+1)/$i),a=g.length,p>=a)return n;for(f=a=g[p],s=1;a>=10;a/=10)s++;i%=$i,r=i-$i+s}if(t!==void 0&&(a=mm(10,s-r-1),l=f/a%10|0,c=e<0||g[p+1]!==void 0||f%a,c=t<4?(l||c)&&(t==0||t==(n.s<0?3:2)):l>5||l==5&&(t==4||c||t==6&&(i>0?r>0?f/mm(10,s-r):0:g[p-1])%10&1||t==(n.s<0?8:7))),e<1||!g[0])return c?(a=qr(n),g.length=1,e=e-a-1,g[0]=mm(10,($i-e%$i)%$i),n.e=Ky(-e/$i)||0):(g.length=1,g[0]=n.e=n.s=0),n;if(i==0?(g.length=p,a=1,p--):(g.length=p+1,a=mm(10,$i-i),g[p]=r>0?(f/mm(10,s-r)%mm(10,r)|0)*a:0),c)for(;;)if(p==0){(g[0]+=a)==wa&&(g[0]=1,++n.e);break}else{if(g[p]+=a,g[p]!=wa)break;g[p--]=0,a=1}for(i=g.length;g[--i]===0;)g.pop();if(ar&&(n.e>qT||n.e<-qT))throw Error(nL+qr(n));return n}function hW(n,e){var t,i,r,a,s,l,c,f,p,g,v=n.constructor,_=v.precision;if(!n.s||!e.s)return e.s?e.s=-e.s:e=new v(n),ar?Ni(e,_):e;if(c=n.d,g=e.d,i=e.e,f=n.e,c=c.slice(),s=f-i,s){for(p=s<0,p?(t=c,s=-s,l=g.length):(t=g,i=f,l=c.length),r=Math.max(Math.ceil(_/$i),l)+2,s>r&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for(r=c.length,l=g.length,p=r<l,p&&(l=r),r=0;r<l;r++)if(c[r]!=g[r]){p=c[r]<g[r];break}s=0}for(p&&(t=c,c=g,g=t,e.s=-e.s),l=c.length,r=g.length-l;r>0;--r)c[l++]=0;for(r=g.length;r>s;){if(c[--r]<g[r]){for(a=r;a&&c[--a]===0;)c[a]=wa-1;--c[a],c[r]+=wa}c[r]-=g[r]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--i;return c[0]?(e.d=c,e.e=i,ar?Ni(e,_):e):new v(0)}function eg(n,e,t){var i,r=qr(n),a=Oc(n.d),s=a.length;return e?(t&&(i=t-s)>0?a=a.charAt(0)+"."+a.slice(1)+xd(i):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(r<0?"e":"e+")+r):r<0?(a="0."+xd(-r-1)+a,t&&(i=t-s)>0&&(a+=xd(i))):r>=s?(a+=xd(r+1-s),t&&(i=t-r-1)>0&&(a=a+"."+xd(i))):((i=r+1)<s&&(a=a.slice(0,i)+"."+a.slice(i)),t&&(i=t-s)>0&&(r+1===s&&(a+="."),a+=xd(i))),n.s<0?"-"+a:a}function S5(n,e){if(n.length>e)return n.length=e,!0}function dW(n){var e,t,i;function r(a){var s=this;if(!(s instanceof r))return new r(a);if(s.constructor=r,a instanceof r){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Um+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return x5(s,a.toString())}else if(typeof a!="string")throw Error(Um+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,Nbe.test(a))x5(s,a);else throw Error(Um+a)}if(r.prototype=Bt,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=dW,r.config=r.set=Obe,n===void 0&&(n={}),n)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<i.length;)n.hasOwnProperty(t=i[e++])||(n[t]=this[t]);return r.config(n),r}function Obe(n){if(!n||typeof n!="object")throw Error(ql+"Object expected");var e,t,i,r=["precision",1,Yy,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<r.length;e+=3)if((i=n[t=r[e]])!==void 0)if(Ky(i)===i&&i>=r[e+1]&&i<=r[e+2])this[t]=i;else throw Error(Um+t+": "+i);if((i=n[t="LN10"])!==void 0)if(i==Math.LN10)this[t]=new this(i);else throw Error(Um+t+": "+i);return this}var iL=dW(Rbe);Ko=new iL(1);const bi=iL;function pW(n){var e;return n===0?e=1:e=Math.floor(new bi(n).abs().log(10).toNumber())+1,e}function mW(n,e,t){for(var i=new bi(n),r=0,a=[];i.lt(e)&&r<1e5;)a.push(i.toNumber()),i=i.add(t),r++;return a}var gW=n=>{var[e,t]=n,[i,r]=[e,t];return e>t&&([i,r]=[t,e]),[i,r]},vW=(n,e,t)=>{if(n.lte(0))return new bi(0);var i=pW(n.toNumber()),r=new bi(10).pow(i),a=n.div(r),s=i!==1?.05:.1,l=new bi(Math.ceil(a.div(s).toNumber())).add(t).mul(s),c=l.mul(r);return e?new bi(c.toNumber()):new bi(Math.ceil(c.toNumber()))},Dbe=(n,e,t)=>{var i=new bi(1),r=new bi(n);if(!r.isint()&&t){var a=Math.abs(n);a<1?(i=new bi(10).pow(pW(n)-1),r=new bi(Math.floor(r.div(i).toNumber())).mul(i)):a>1&&(r=new bi(Math.floor(n)))}else n===0?r=new bi(Math.floor((e-1)/2)):t||(r=new bi(Math.floor(n)));for(var s=Math.floor((e-1)/2),l=[],c=0;c<e;c++)l.push(r.add(new bi(c-s).mul(i)).toNumber());return l},yW=function(e,t,i,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(i-1)))return{step:new bi(0),tickMin:new bi(0),tickMax:new bi(0)};var s=vW(new bi(t).sub(e).div(i-1),r,a),l;e<=0&&t>=0?l=new bi(0):(l=new bi(e).add(t).div(2),l=l.sub(new bi(l).mod(s)));var c=Math.ceil(l.sub(e).div(s).toNumber()),f=Math.ceil(new bi(t).sub(l).div(s).toNumber()),p=c+f+1;return p>i?yW(e,t,i,r,a+1):(p<i&&(f=t>0?f+(i-p):f,c=t>0?c:c+(i-p)),{step:s,tickMin:l.sub(new bi(c).mul(s)),tickMax:l.add(new bi(f).mul(s))})},Lbe=function(e){var[t,i]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[l,c]=gW([t,i]);if(l===-1/0||c===1/0){var f=c===1/0?[l,...Array(r-1).fill(1/0)]:[...Array(r-1).fill(-1/0),c];return t>i?f.reverse():f}if(l===c)return Dbe(l,r,a);var{step:p,tickMin:g,tickMax:v}=yW(l,c,s,a,0),_=mW(g,v.add(new bi(.1).mul(p)),p);return t>i?_.reverse():_},kbe=function(e,t){var[i,r]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,l]=gW([i,r]);if(s===-1/0||l===1/0)return[i,r];if(s===l)return[s];var c=Math.max(t,2),f=vW(new bi(l).sub(s).div(c-1),a,0),p=[...mW(new bi(s),new bi(l),f),l];return a===!1&&(p=p.map(g=>Math.round(g))),i>r?p.reverse():p},Ube=n=>n.rootProps.barCategoryGap,FM=n=>n.rootProps.stackOffset,_W=n=>n.rootProps.reverseStackOrder,rL=n=>n.options.chartName,aL=n=>n.rootProps.syncId,bW=n=>n.rootProps.syncMethod,sL=n=>n.options.eventEmitter,zbe=n=>n.rootProps.baseValue,Ys={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},om={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},Sc={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},BM=(n,e)=>{if(!(!n||!e))return n!=null&&n.reversed?[e[1],e[0]]:e};function VM(n,e,t){if(t!=="auto")return t;if(n!=null)return ef(n,e)?"category":"number"}function w5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function $T(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?w5(Object(t),!0).forEach(function(i){Fbe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):w5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Fbe(n,e,t){return(e=Bbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Bbe(n){var e=Vbe(n,"string");return typeof e=="symbol"?e:e+""}function Vbe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var E5={allowDataOverflow:om.allowDataOverflow,allowDecimals:om.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:om.angleAxisId,includeHidden:!1,name:void 0,reversed:om.reversed,scale:om.scale,tick:om.tick,tickCount:void 0,ticks:void 0,type:om.type,unit:void 0},T5={allowDataOverflow:Sc.allowDataOverflow,allowDecimals:Sc.allowDecimals,allowDuplicatedCategory:Sc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Sc.radiusAxisId,includeHidden:Sc.includeHidden,name:void 0,reversed:Sc.reversed,scale:Sc.scale,tick:Sc.tick,tickCount:Sc.tickCount,ticks:void 0,type:Sc.type,unit:void 0},jbe=(n,e)=>{if(e!=null)return n.polarAxis.angleAxis[e]},oL=Ge([jbe,c7],(n,e)=>{var t;if(n!=null)return n;var i=(t=VM(e,"angleAxis",E5.type))!==null&&t!==void 0?t:"category";return $T($T({},E5),{},{type:i})}),Hbe=(n,e)=>n.polarAxis.radiusAxis[e],lL=Ge([Hbe,c7],(n,e)=>{var t;if(n!=null)return n;var i=(t=VM(e,"radiusAxis",T5.type))!==null&&t!==void 0?t:"category";return $T($T({},T5),{},{type:i})}),jM=n=>n.polarOptions,uL=Ge([hh,dh,ts],Fye),xW=Ge([jM,uL],(n,e)=>{if(n!=null)return ep(n.innerRadius,e,0)}),SW=Ge([jM,uL],(n,e)=>{if(n!=null)return ep(n.outerRadius,e,e*.8)}),Gbe=n=>{if(n==null)return[0,0];var{startAngle:e,endAngle:t}=n;return[e,t]},wW=Ge([jM],Gbe);Ge([oL,wW],BM);var EW=Ge([uL,xW,SW],(n,e,t)=>{if(!(n==null||e==null||t==null))return[e,t]});Ge([lL,EW],BM);var TW=Ge([sr,jM,xW,SW,hh,dh],(n,e,t,i,r,a)=>{if(!(n!=="centric"&&n!=="radial"||e==null||t==null||i==null)){var{cx:s,cy:l,startAngle:c,endAngle:f}=e;return{cx:ep(s,r,r/2),cy:ep(l,a,a/2),innerRadius:t,outerRadius:i,startAngle:c,endAngle:f,clockWise:!1}}}),Ma=(n,e)=>e,HM=(n,e,t)=>t;function cL(n){return n==null?void 0:n.id}function AW(n,e,t){var{chartData:i=[]}=e,{allowDuplicatedCategory:r,dataKey:a}=t,s=new Map;return n.forEach(l=>{var c,f=(c=l.data)!==null&&c!==void 0?c:i;if(!(f==null||f.length===0)){var p=cL(l);f.forEach((g,v)=>{var _=a==null||r?v:String(Qa(g,a,null)),x=Qa(g,l.dataKey,0),T;s.has(_)?T=s.get(_):T={},Object.assign(T,{[p]:x}),s.set(_,T)})}}),Array.from(s.values())}function fL(n){return"stackId"in n&&n.stackId!=null&&n.dataKey!=null}var GM=(n,e)=>n===e?!0:n==null||e==null?!1:n[0]===e[0]&&n[1]===e[1];function WM(n,e){return Array.isArray(n)&&Array.isArray(e)&&n.length===0&&e.length===0?!0:n===e}function Wbe(n,e){if(n.length===e.length){for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return!1}var Ca=n=>{var e=sr(n);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Zy=n=>n.tooltip.settings.axisId;function qbe(n){if(n in K_)return K_[n]();var e="scale".concat(v3(n));if(e in K_)return K_[e]()}function A5(n){var e=n.ticks,t=n.bandwidth,i=n.range(),r=[Math.min(...i),Math.max(...i)];return{domain:()=>n.domain(),range:(function(a){function s(){return a.apply(this,arguments)}return s.toString=function(){return a.toString()},s})(()=>r),rangeMin:()=>r[0],rangeMax:()=>r[1],isInRange(a){var s=r[0],l=r[1];return s<=l?a>=s&&a<=l:a>=l&&a<=s},bandwidth:t?()=>t.call(n):void 0,ticks:e?a=>e.call(n,a):void 0,map:(a,s)=>{var l=n(a);if(l!=null){if(n.bandwidth&&s!==null&&s!==void 0&&s.position){var c=n.bandwidth();switch(s.position){case"middle":l+=c/2;break;case"end":l+=c;break}}return l}}}}function M5(n,e,t){if(typeof n=="function")return A5(n.copy().domain(e).range(t));if(n!=null){var i=qbe(n);if(i!=null)return i.domain(e).range(t),A5(i)}}var $be=(n,e)=>{if(e!=null)switch(n){case"linear":{if(!uh(e)){for(var t,i,r=0;r<e.length;r++){var a=e[r];Kn(a)&&((t===void 0||a<t)&&(t=a),(i===void 0||a>i)&&(i=a))}return t!==void 0&&i!==void 0?[t,i]:void 0}return e}default:return e}};function C5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function XT(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?C5(Object(t),!0).forEach(function(i){Xbe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):C5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Xbe(n,e,t){return(e=Ybe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ybe(n){var e=Kbe(n,"string");return typeof e=="symbol"?e:e+""}function Kbe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var oO=[0,"auto"],ba={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},MW=(n,e)=>n.cartesianAxis.xAxis[e],gh=(n,e)=>{var t=MW(n,e);return t??ba},xa={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:oO,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Px},CW=(n,e)=>n.cartesianAxis.yAxis[e],vh=(n,e)=>{var t=CW(n,e);return t??xa},Zbe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},hL=(n,e)=>{var t=n.cartesianAxis.zAxis[e];return t??Zbe},eo=(n,e,t)=>{switch(e){case"xAxis":return gh(n,t);case"yAxis":return vh(n,t);case"zAxis":return hL(n,t);case"angleAxis":return oL(n,t);case"radiusAxis":return lL(n,t);default:throw new Error("Unexpected axis type: ".concat(e))}},Qbe=(n,e,t)=>{switch(e){case"xAxis":return gh(n,t);case"yAxis":return vh(n,t);default:throw new Error("Unexpected axis type: ".concat(e))}},zx=(n,e,t)=>{switch(e){case"xAxis":return gh(n,t);case"yAxis":return vh(n,t);case"angleAxis":return oL(n,t);case"radiusAxis":return lL(n,t);default:throw new Error("Unexpected axis type: ".concat(e))}},IW=n=>n.graphicalItems.cartesianItems.some(e=>e.type==="bar")||n.graphicalItems.polarItems.some(e=>e.type==="radialBar");function PW(n,e){return t=>{switch(n){case"xAxis":return"xAxisId"in t&&t.xAxisId===e;case"yAxis":return"yAxisId"in t&&t.yAxisId===e;case"zAxis":return"zAxisId"in t&&t.zAxisId===e;case"angleAxis":return"angleAxisId"in t&&t.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in t&&t.radiusAxisId===e;default:return!1}}}var RW=n=>n.graphicalItems.cartesianItems,Jbe=Ge([Ma,HM],PW),NW=(n,e,t)=>n.filter(t).filter(i=>(e==null?void 0:e.includeHidden)===!0?!0:!i.hide),Fx=Ge([RW,eo,Jbe],NW,{memoizeOptions:{resultEqualityCheck:WM}}),OW=Ge([Fx],n=>n.filter(e=>e.type==="area"||e.type==="bar").filter(fL)),DW=n=>n.filter(e=>!("stackId"in e)||e.stackId===void 0),exe=Ge([Fx],DW),LW=n=>n.map(e=>e.data).filter(Boolean).flat(1),txe=Ge([Fx],LW,{memoizeOptions:{resultEqualityCheck:WM}}),kW=(n,e)=>{var{chartData:t=[],dataStartIndex:i,dataEndIndex:r}=e;return n.length>0?n:t.slice(i,r+1)},dL=Ge([txe,oW],kW),UW=(n,e,t)=>(e==null?void 0:e.dataKey)!=null?n.map(i=>({value:Qa(i,e.dataKey)})):t.length>0?t.map(i=>i.dataKey).flatMap(i=>n.map(r=>({value:Qa(r,i)}))):n.map(i=>({value:i})),qM=Ge([dL,eo,Fx],UW);function zW(n,e){switch(n){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Ww(n){if(Yc(n)||n instanceof Date){var e=Number(n);if(Kn(e))return e}}function I5(n){if(Array.isArray(n)){var e=[Ww(n[0]),Ww(n[1])];return uh(e)?e:void 0}var t=Ww(n);if(t!=null)return[t,t]}function ch(n){return n.map(Ww).filter(Ro)}function nxe(n,e,t){return!t||typeof e!="number"||Xc(e)?[]:t.length?ch(t.flatMap(i=>{var r=Qa(n,i.dataKey),a,s;if(Array.isArray(r)?[a,s]=r:a=s=r,!(!Kn(a)||!Kn(s)))return[e-a,e+s]})):[]}var la=n=>{var e=Ca(n),t=Zy(n);return zx(n,e,t)},Bx=Ge([la],n=>n==null?void 0:n.dataKey),ixe=Ge([OW,oW,la],AW),FW=(n,e,t,i)=>{var r={},a=e.reduce((s,l)=>{if(l.stackId==null)return s;var c=s[l.stackId];return c==null&&(c=[]),c.push(l),s[l.stackId]=c,s},r);return Object.fromEntries(Object.entries(a).map(s=>{var[l,c]=s,f=i?[...c].reverse():c,p=f.map(cL);return[l,{stackedData:Cge(n,p,t),graphicalItems:f}]}))},BW=Ge([ixe,OW,FM,_W],FW),VW=(n,e,t,i)=>{var{dataStartIndex:r,dataEndIndex:a}=e;if(i==null&&t!=="zAxis"){var s=Nge(n,r,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},rxe=Ge([eo],n=>n.allowDataOverflow),pL=n=>{var e;if(n==null||!("domain"in n))return oO;if(n.domain!=null)return n.domain;if("ticks"in n&&n.ticks!=null){if(n.type==="number"){var t=ch(n.ticks);return[Math.min(...t),Math.max(...t)]}if(n.type==="category")return n.ticks.map(String)}return(e=n==null?void 0:n.domain)!==null&&e!==void 0?e:oO},jW=Ge([eo],pL),HW=Ge([jW,rxe],lW),axe=Ge([BW,mh,Ma,HW],VW,{memoizeOptions:{resultEqualityCheck:GM}}),mL=n=>n.errorBars,sxe=(n,e,t)=>n.flatMap(i=>e[i.id]).filter(Boolean).filter(i=>zW(t,i)),YT=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=t.filter(Boolean);if(r.length!==0){var a=r.flat(),s=Math.min(...a),l=Math.max(...a);return[s,l]}},GW=(n,e,t,i,r)=>{var a,s;if(t.length>0&&n.forEach(l=>{t.forEach(c=>{var f,p,g=(f=i[c.id])===null||f===void 0?void 0:f.filter(w=>zW(r,w)),v=Qa(l,(p=e.dataKey)!==null&&p!==void 0?p:c.dataKey),_=nxe(l,v,g);if(_.length>=2){var x=Math.min(..._),T=Math.max(..._);(a==null||x<a)&&(a=x),(s==null||T>s)&&(s=T)}var S=I5(v);S!=null&&(a=a==null?S[0]:Math.min(a,S[0]),s=s==null?S[1]:Math.max(s,S[1]))})}),(e==null?void 0:e.dataKey)!=null&&n.forEach(l=>{var c=I5(Qa(l,e.dataKey));c!=null&&(a=a==null?c[0]:Math.min(a,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),Kn(a)&&Kn(s))return[a,s]},oxe=Ge([dL,eo,exe,mL,Ma],GW,{memoizeOptions:{resultEqualityCheck:GM}});function lxe(n){var{value:e}=n;if(Yc(e)||e instanceof Date)return e}var uxe=(n,e,t)=>{var i=n.map(lxe).filter(r=>r!=null);return t&&(e.dataKey==null||e.allowDuplicatedCategory&&lG(i))?A7(0,n.length):e.allowDuplicatedCategory?i:Array.from(new Set(i))},WW=n=>n.referenceElements.dots,Qy=(n,e,t)=>n.filter(i=>i.ifOverflow==="extendDomain").filter(i=>e==="xAxis"?i.xAxisId===t:i.yAxisId===t),cxe=Ge([WW,Ma,HM],Qy),qW=n=>n.referenceElements.areas,fxe=Ge([qW,Ma,HM],Qy),$W=n=>n.referenceElements.lines,hxe=Ge([$W,Ma,HM],Qy),XW=(n,e)=>{if(n!=null){var t=ch(n.map(i=>e==="xAxis"?i.x:i.y));if(t.length!==0)return[Math.min(...t),Math.max(...t)]}},dxe=Ge(cxe,Ma,XW),YW=(n,e)=>{if(n!=null){var t=ch(n.flatMap(i=>[e==="xAxis"?i.x1:i.y1,e==="xAxis"?i.x2:i.y2]));if(t.length!==0)return[Math.min(...t),Math.max(...t)]}},pxe=Ge([fxe,Ma],YW);function mxe(n){var e;if(n.x!=null)return ch([n.x]);var t=(e=n.segment)===null||e===void 0?void 0:e.map(i=>i.x);return t==null||t.length===0?[]:ch(t)}function gxe(n){var e;if(n.y!=null)return ch([n.y]);var t=(e=n.segment)===null||e===void 0?void 0:e.map(i=>i.y);return t==null||t.length===0?[]:ch(t)}var KW=(n,e)=>{if(n!=null){var t=n.flatMap(i=>e==="xAxis"?mxe(i):gxe(i));if(t.length!==0)return[Math.min(...t),Math.max(...t)]}},vxe=Ge([hxe,Ma],KW),yxe=Ge(dxe,vxe,pxe,(n,e,t)=>YT(n,t,e)),ZW=(n,e,t,i,r,a,s,l)=>{if(t!=null)return t;var c=s==="vertical"&&l==="xAxis"||s==="horizontal"&&l==="yAxis",f=c?YT(i,a,r):YT(a,r);return Pbe(e,f,n.allowDataOverflow)},_xe=Ge([eo,jW,HW,axe,oxe,yxe,sr,Ma],ZW,{memoizeOptions:{resultEqualityCheck:GM}}),bxe=[0,1],QW=(n,e,t,i,r,a,s)=>{if(!((n==null||t==null||t.length===0)&&s===void 0)){var{dataKey:l,type:c}=n,f=ef(e,a);if(f&&l==null){var p;return A7(0,(p=t==null?void 0:t.length)!==null&&p!==void 0?p:0)}return c==="category"?uxe(i,n,f):r==="expand"?bxe:s}},gL=Ge([eo,sr,dL,qM,FM,Ma,_xe],QW);function xxe(n){return n in K_}var JW=(n,e,t)=>{if(n!=null){var{scale:i,type:r}=n;if(i==="auto")return r==="category"&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!e)?"point":r==="category"?"band":"linear";if(typeof i=="string"){var a="scale".concat(v3(i));return xxe(a)?a:"point"}}},Jy=Ge([eo,IW,rL],JW);function vL(n,e,t,i){if(!(t==null||i==null))return typeof n.scale=="function"?M5(n.scale,t,i):M5(e,t,i)}var eq=(n,e,t)=>{var i=pL(e);if(!(t!=="auto"&&t!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(i)&&(i[0]==="auto"||i[1]==="auto")&&uh(n))return Lbe(n,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&uh(n))return kbe(n,e.tickCount,e.allowDecimals)}},yL=Ge([gL,zx,Jy],eq),tq=(n,e,t,i)=>{if(i!=="angleAxis"&&(n==null?void 0:n.type)==="number"&&uh(e)&&Array.isArray(t)&&t.length>0){var r,a,s=e[0],l=(r=t[0])!==null&&r!==void 0?r:0,c=e[1],f=(a=t[t.length-1])!==null&&a!==void 0?a:0;return[Math.min(s,l),Math.max(c,f)]}return e},Sxe=Ge([eo,gL,yL,Ma],tq),wxe=Ge(qM,eo,(n,e)=>{if(!(!e||e.type!=="number")){var t=1/0,i=Array.from(ch(n.map(g=>g.value))).sort((g,v)=>g-v),r=i[0],a=i[i.length-1];if(r==null||a==null)return 1/0;var s=a-r;if(s===0)return 1/0;for(var l=0;l<i.length-1;l++){var c=i[l],f=i[l+1];if(!(c==null||f==null)){var p=f-c;t=Math.min(t,p)}}return t/s}}),nq=Ge(wxe,sr,Ube,ts,(n,e,t,i,r)=>r,(n,e,t,i,r)=>{if(!Kn(n))return 0;var a=e==="vertical"?i.height:i.width;if(r==="gap")return n*a/2;if(r==="no-gap"){var s=ep(t,n*a),l=n*a/2;return l-s-(l-s)/a*s}return 0}),Exe=(n,e,t)=>{var i=gh(n,e);return i==null||typeof i.padding!="string"?0:nq(n,"xAxis",e,t,i.padding)},Txe=(n,e,t)=>{var i=vh(n,e);return i==null||typeof i.padding!="string"?0:nq(n,"yAxis",e,t,i.padding)},Axe=Ge(gh,Exe,(n,e)=>{var t,i;if(n==null)return{left:0,right:0};var{padding:r}=n;return typeof r=="string"?{left:e,right:e}:{left:((t=r.left)!==null&&t!==void 0?t:0)+e,right:((i=r.right)!==null&&i!==void 0?i:0)+e}}),Mxe=Ge(vh,Txe,(n,e)=>{var t,i;if(n==null)return{top:0,bottom:0};var{padding:r}=n;return typeof r=="string"?{top:e,bottom:e}:{top:((t=r.top)!==null&&t!==void 0?t:0)+e,bottom:((i=r.bottom)!==null&&i!==void 0?i:0)+e}}),Cxe=Ge([ts,Axe,CM,MM,(n,e,t)=>t],(n,e,t,i,r)=>{var{padding:a}=i;return r?[a.left,t.width-a.right]:[n.left+e.left,n.left+n.width-e.right]}),Ixe=Ge([ts,sr,Mxe,CM,MM,(n,e,t)=>t],(n,e,t,i,r,a)=>{var{padding:s}=r;return a?[i.height-s.bottom,s.top]:e==="horizontal"?[n.top+n.height-t.bottom,n.top+t.top]:[n.top+t.top,n.top+n.height-t.bottom]}),Vx=(n,e,t,i)=>{var r;switch(e){case"xAxis":return Cxe(n,t,i);case"yAxis":return Ixe(n,t,i);case"zAxis":return(r=hL(n,t))===null||r===void 0?void 0:r.range;case"angleAxis":return wW(n);case"radiusAxis":return EW(n,t);default:return}},iq=Ge([eo,Vx],BM),Pxe=Ge([Jy,Sxe],$be),$M=Ge([eo,Jy,Pxe,iq],vL);Ge([Fx,mL,Ma],sxe);function rq(n,e){return n.id<e.id?-1:n.id>e.id?1:0}var XM=(n,e)=>e,YM=(n,e,t)=>t,Rxe=Ge(TM,XM,YM,(n,e,t)=>n.filter(i=>i.orientation===e).filter(i=>i.mirror===t).sort(rq)),Nxe=Ge(AM,XM,YM,(n,e,t)=>n.filter(i=>i.orientation===e).filter(i=>i.mirror===t).sort(rq)),aq=(n,e)=>({width:n.width,height:e.height}),Oxe=(n,e)=>{var t=typeof e.width=="number"?e.width:Px;return{width:t,height:n.height}},Dxe=Ge(ts,gh,aq),Lxe=(n,e,t)=>{switch(e){case"top":return n.top;case"bottom":return t-n.bottom;default:return 0}},kxe=(n,e,t)=>{switch(e){case"left":return n.left;case"right":return t-n.right;default:return 0}},Uxe=Ge(dh,ts,Rxe,XM,YM,(n,e,t,i,r)=>{var a={},s;return t.forEach(l=>{var c=aq(e,l);s==null&&(s=Lxe(e,i,n));var f=i==="top"&&!r||i==="bottom"&&r;a[l.id]=s-Number(f)*c.height,s+=(f?-1:1)*c.height}),a}),zxe=Ge(hh,ts,Nxe,XM,YM,(n,e,t,i,r)=>{var a={},s;return t.forEach(l=>{var c=Oxe(e,l);s==null&&(s=kxe(e,i,n));var f=i==="left"&&!r||i==="right"&&r;a[l.id]=s-Number(f)*c.width,s+=(f?-1:1)*c.width}),a}),Fxe=(n,e)=>{var t=gh(n,e);if(t!=null)return Uxe(n,t.orientation,t.mirror)},Bxe=Ge([ts,gh,Fxe,(n,e)=>e],(n,e,t,i)=>{if(e!=null){var r=t==null?void 0:t[i];return r==null?{x:n.left,y:0}:{x:n.left,y:r}}}),Vxe=(n,e)=>{var t=vh(n,e);if(t!=null)return zxe(n,t.orientation,t.mirror)},jxe=Ge([ts,vh,Vxe,(n,e)=>e],(n,e,t,i)=>{if(e!=null){var r=t==null?void 0:t[i];return r==null?{x:0,y:n.top}:{x:r,y:n.top}}}),Hxe=Ge(ts,vh,(n,e)=>{var t=typeof e.width=="number"?e.width:Px;return{width:t,height:n.height}}),sq=(n,e,t,i)=>{if(t!=null){var{allowDuplicatedCategory:r,type:a,dataKey:s}=t,l=ef(n,i),c=e.map(f=>f.value);if(s&&l&&a==="category"&&r&&lG(c))return c}},_L=Ge([sr,qM,eo,Ma],sq),oq=(n,e,t,i)=>{if(!(t==null||t.dataKey==null)){var{type:r,scale:a}=t,s=ef(n,i);if(s&&(r==="number"||a!=="auto"))return e.map(l=>l.value)}},bL=Ge([sr,qM,zx,Ma],oq),P5=Ge([sr,Qbe,Jy,$M,_L,bL,Vx,yL,Ma],(n,e,t,i,r,a,s,l,c)=>{if(e!=null){var f=ef(n,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:a,duplicateDomain:r,isCategorical:f,niceTicks:l,range:s,realScaleType:t,scale:i}}}),Gxe=(n,e,t,i,r,a,s,l,c)=>{if(!(e==null||i==null)){var f=ef(n,c),{type:p,ticks:g,tickCount:v}=e,_=t==="scaleBand"&&typeof i.bandwidth=="function"?i.bandwidth()/2:2,x=p==="category"&&i.bandwidth?i.bandwidth()/_:0;x=c==="angleAxis"&&a!=null&&a.length>=2?Fl(a[0]-a[1])*2*x:x;var T=g||r;return T?T.map((S,w)=>{var I=s?s.indexOf(S):S,R=i.map(I);return Kn(R)?{index:w,coordinate:R+x,value:S,offset:x}:null}).filter(Ro):f&&l?l.map((S,w)=>{var I=i.map(S);return Kn(I)?{coordinate:I+x,value:S,index:w,offset:x}:null}).filter(Ro):i.ticks?i.ticks(v).map((S,w)=>{var I=i.map(S);return Kn(I)?{coordinate:I+x,value:S,index:w,offset:x}:null}).filter(Ro):i.domain().map((S,w)=>{var I=i.map(S);return Kn(I)?{coordinate:I+x,value:s?s[S]:S,index:w,offset:x}:null}).filter(Ro)}},lq=Ge([sr,zx,Jy,$M,yL,Vx,_L,bL,Ma],Gxe),Wxe=(n,e,t,i,r,a,s)=>{if(!(e==null||t==null||i==null||i[0]===i[1])){var l=ef(n,s),{tickCount:c}=e,f=0;return f=s==="angleAxis"&&(i==null?void 0:i.length)>=2?Fl(i[0]-i[1])*2*f:f,l&&a?a.map((p,g)=>{var v=t.map(p);return Kn(v)?{coordinate:v+f,value:p,index:g,offset:f}:null}).filter(Ro):t.ticks?t.ticks(c).map((p,g)=>{var v=t.map(p);return Kn(v)?{coordinate:v+f,value:p,index:g,offset:f}:null}).filter(Ro):t.domain().map((p,g)=>{var v=t.map(p);return Kn(v)?{coordinate:v+f,value:r?r[p]:p,index:g,offset:f}:null}).filter(Ro)}},uq=Ge([sr,zx,$M,Vx,_L,bL,Ma],Wxe),cq=Ge(eo,$M,(n,e)=>{if(!(n==null||e==null))return XT(XT({},n),{},{scale:e})}),qxe=Ge([eo,Jy,gL,iq],vL);Ge((n,e,t)=>hL(n,t),qxe,(n,e)=>{if(!(n==null||e==null))return XT(XT({},n),{},{scale:e})});var $xe=Ge([sr,TM,AM],(n,e,t)=>{switch(n){case"horizontal":return e.some(i=>i.reversed)?"right-to-left":"left-to-right";case"vertical":return t.some(i=>i.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),fq=n=>n.options.defaultTooltipEventType,hq=n=>n.options.validateTooltipEventTypes;function dq(n,e,t){if(n==null)return e;var i=n?"axis":"item";return t==null?e:t.includes(i)?i:e}function xL(n,e){var t=fq(n),i=hq(n);return dq(e,t,i)}function Xxe(n){return sn(e=>xL(e,n))}var pq=(n,e)=>{var t,i=Number(e);if(!(Xc(i)||e==null))return i>=0?n==null||(t=n[i])===null||t===void 0?void 0:t.value:void 0},Yxe=n=>n.tooltip.settings,Cd={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Kxe={itemInteraction:{click:Cd,hover:Cd},axisInteraction:{click:Cd,hover:Cd},keyboardInteraction:Cd,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},mq=Oo({name:"tooltip",initialState:Kxe,reducers:{addTooltipEntrySettings:{reducer(n,e){n.tooltipItemPayloads.push(e.payload)},prepare:rr()},replaceTooltipEntrySettings:{reducer(n,e){var{prev:t,next:i}=e.payload,r=Ou(n).tooltipItemPayloads.indexOf(t);r>-1&&(n.tooltipItemPayloads[r]=i)},prepare:rr()},removeTooltipEntrySettings:{reducer(n,e){var t=Ou(n).tooltipItemPayloads.indexOf(e.payload);t>-1&&n.tooltipItemPayloads.splice(t,1)},prepare:rr()},setTooltipSettingsState(n,e){n.settings=e.payload},setActiveMouseOverItemIndex(n,e){n.syncInteraction.active=!1,n.keyboardInteraction.active=!1,n.itemInteraction.hover.active=!0,n.itemInteraction.hover.index=e.payload.activeIndex,n.itemInteraction.hover.dataKey=e.payload.activeDataKey,n.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,n.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(n){n.itemInteraction.hover.active=!1,n.axisInteraction.hover.active=!1},mouseLeaveItem(n){n.itemInteraction.hover.active=!1},setActiveClickItemIndex(n,e){n.syncInteraction.active=!1,n.itemInteraction.click.active=!0,n.keyboardInteraction.active=!1,n.itemInteraction.click.index=e.payload.activeIndex,n.itemInteraction.click.dataKey=e.payload.activeDataKey,n.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,n.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(n,e){n.syncInteraction.active=!1,n.axisInteraction.hover.active=!0,n.keyboardInteraction.active=!1,n.axisInteraction.hover.index=e.payload.activeIndex,n.axisInteraction.hover.dataKey=e.payload.activeDataKey,n.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(n,e){n.syncInteraction.active=!1,n.keyboardInteraction.active=!1,n.axisInteraction.click.active=!0,n.axisInteraction.click.index=e.payload.activeIndex,n.axisInteraction.click.dataKey=e.payload.activeDataKey,n.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(n,e){n.syncInteraction=e.payload},setKeyboardInteraction(n,e){n.keyboardInteraction.active=e.payload.active,n.keyboardInteraction.index=e.payload.activeIndex,n.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:Zxe,replaceTooltipEntrySettings:Qxe,removeTooltipEntrySettings:Jxe,setTooltipSettingsState:eSe,setActiveMouseOverItemIndex:tSe,mouseLeaveItem:hPe,mouseLeaveChart:gq,setActiveClickItemIndex:dPe,setMouseOverAxisIndex:vq,setMouseClickAxisIndex:nSe,setSyncInteraction:lO,setKeyboardInteraction:uO}=mq.actions,iSe=mq.reducer;function R5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ww(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?R5(Object(t),!0).forEach(function(i){rSe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):R5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function rSe(n,e,t){return(e=aSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aSe(n){var e=sSe(n,"string");return typeof e=="symbol"?e:e+""}function sSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function oSe(n,e,t){return e==="axis"?t==="click"?n.axisInteraction.click:n.axisInteraction.hover:t==="click"?n.itemInteraction.click:n.itemInteraction.hover}function lSe(n){return n.index!=null}var yq=(n,e,t,i)=>{if(e==null)return Cd;var r=oSe(n,e,t);if(r==null)return Cd;if(r.active)return r;if(n.keyboardInteraction.active)return n.keyboardInteraction;if(n.syncInteraction.active&&n.syncInteraction.index!=null)return n.syncInteraction;var a=n.settings.active===!0;if(lSe(r)){if(a)return ww(ww({},r),{},{active:!0})}else if(i!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:i,graphicalItemId:void 0};return ww(ww({},Cd),{},{coordinate:r.coordinate})};function uSe(n){if(typeof n=="number")return Number.isFinite(n)?n:void 0;if(n instanceof Date){var e=n.valueOf();return Number.isFinite(e)?e:void 0}var t=Number(n);return Number.isFinite(t)?t:void 0}function cSe(n,e){var t=uSe(n),i=e[0],r=e[1];if(t===void 0)return!1;var a=Math.min(i,r),s=Math.max(i,r);return t>=a&&t<=s}function fSe(n,e,t){if(t==null||e==null)return!0;var i=Qa(n,e);return i==null||!uh(t)?!0:cSe(i,t)}var SL=(n,e,t,i)=>{var r=n==null?void 0:n.index;if(r==null)return null;var a=Number(r);if(!Kn(a))return r;var s=0,l=1/0;e.length>0&&(l=e.length-1);var c=Math.max(s,Math.min(a,l)),f=e[c];return f==null||fSe(f,t,i)?String(c):null},_q=(n,e,t,i,r,a,s)=>{if(a!=null){var l=s[0],c=l==null?void 0:l.getPosition(a);if(c!=null)return c;var f=r==null?void 0:r[Number(a)];if(f)switch(t){case"horizontal":return{x:f.coordinate,y:(i.top+e)/2};default:return{x:(i.left+n)/2,y:f.coordinate}}}},bq=(n,e,t,i)=>{if(e==="axis")return n.tooltipItemPayloads;if(n.tooltipItemPayloads.length===0)return[];var r;if(t==="hover"?r=n.itemInteraction.hover.graphicalItemId:r=n.itemInteraction.click.graphicalItemId,r==null&&i!=null){var a=n.tooltipItemPayloads[0];return a!=null?[a]:[]}return n.tooltipItemPayloads.filter(s=>{var l;return((l=s.settings)===null||l===void 0?void 0:l.graphicalItemId)===r})},xq=n=>n.options.tooltipPayloadSearcher,e0=n=>n.tooltip;function N5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function O5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?N5(Object(t),!0).forEach(function(i){hSe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):N5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function hSe(n,e,t){return(e=dSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dSe(n){var e=pSe(n,"string");return typeof e=="symbol"?e:e+""}function pSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function mSe(n,e){return n??e}var Sq=(n,e,t,i,r,a,s)=>{if(!(e==null||a==null)){var{chartData:l,computedData:c,dataStartIndex:f,dataEndIndex:p}=t,g=[];return n.reduce((v,_)=>{var x,{dataDefinedOnItem:T,settings:S}=_,w=mSe(T,l),I=Array.isArray(w)?QG(w,f,p):w,R=(x=S==null?void 0:S.dataKey)!==null&&x!==void 0?x:i,O=S==null?void 0:S.nameKey,F;if(i&&Array.isArray(I)&&!Array.isArray(I[0])&&s==="axis"?F=uG(I,i,r):F=a(I,e,c,O),Array.isArray(F))F.forEach(L=>{var z=O5(O5({},S),{},{name:L.name,unit:L.unit,color:void 0,fill:void 0});v.push(DB({tooltipEntrySettings:z,dataKey:L.dataKey,payload:L.payload,value:Qa(L.payload,L.dataKey),name:L.name}))});else{var B;v.push(DB({tooltipEntrySettings:S,dataKey:R,payload:F,value:Qa(F,R),name:(B=Qa(F,O))!==null&&B!==void 0?B:S==null?void 0:S.name}))}return v},g)}},wL=Ge([la,IW,rL],JW),gSe=Ge([n=>n.graphicalItems.cartesianItems,n=>n.graphicalItems.polarItems],(n,e)=>[...n,...e]),vSe=Ge([Ca,Zy],PW),t0=Ge([gSe,la,vSe],NW,{memoizeOptions:{resultEqualityCheck:WM}}),ySe=Ge([t0],n=>n.filter(fL)),_Se=Ge([t0],LW,{memoizeOptions:{resultEqualityCheck:WM}}),n0=Ge([_Se,mh],kW),bSe=Ge([ySe,mh,la],AW),EL=Ge([n0,la,t0],UW),wq=Ge([la],pL),xSe=Ge([la],n=>n.allowDataOverflow),Eq=Ge([wq,xSe],lW),SSe=Ge([t0],n=>n.filter(fL)),wSe=Ge([bSe,SSe,FM,_W],FW),ESe=Ge([wSe,mh,Ca,Eq],VW),TSe=Ge([t0],DW),ASe=Ge([n0,la,TSe,mL,Ca],GW,{memoizeOptions:{resultEqualityCheck:GM}}),MSe=Ge([WW,Ca,Zy],Qy),CSe=Ge([MSe,Ca],XW),ISe=Ge([qW,Ca,Zy],Qy),PSe=Ge([ISe,Ca],YW),RSe=Ge([$W,Ca,Zy],Qy),NSe=Ge([RSe,Ca],KW),OSe=Ge([CSe,NSe,PSe],YT),DSe=Ge([la,wq,Eq,ESe,ASe,OSe,sr,Ca],ZW),jx=Ge([la,sr,n0,EL,FM,Ca,DSe],QW),LSe=Ge([jx,la,wL],eq),kSe=Ge([la,jx,LSe,Ca],tq),Tq=n=>{var e=Ca(n),t=Zy(n),i=!1;return Vx(n,e,t,i)},Aq=Ge([la,Tq],BM),Mq=Ge([la,wL,kSe,Aq],vL),USe=Ge([sr,EL,la,Ca],sq),zSe=Ge([sr,EL,la,Ca],oq),FSe=(n,e,t,i,r,a,s,l)=>{if(e){var{type:c}=e,f=ef(n,l);if(i){var p=t==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,g=c==="category"&&i.bandwidth?i.bandwidth()/p:0;return g=l==="angleAxis"&&r!=null&&(r==null?void 0:r.length)>=2?Fl(r[0]-r[1])*2*g:g,f&&s?s.map((v,_)=>{var x=i.map(v);return Kn(x)?{coordinate:x+g,value:v,index:_,offset:g}:null}).filter(Ro):i.domain().map((v,_)=>{var x=i.map(v);return Kn(x)?{coordinate:x+g,value:a?a[v]:v,index:_,offset:g}:null}).filter(Ro)}}},yh=Ge([sr,la,wL,Mq,Tq,USe,zSe,Ca],FSe),TL=Ge([fq,hq,Yxe],(n,e,t)=>dq(t.shared,n,e)),Cq=n=>n.tooltip.settings.trigger,AL=n=>n.tooltip.settings.defaultIndex,Hx=Ge([e0,TL,Cq,AL],yq),ix=Ge([Hx,n0,Bx,jx],SL),Iq=Ge([yh,ix],pq),BSe=Ge([Hx],n=>{if(n)return n.dataKey});Ge([Hx],n=>{if(n)return n.graphicalItemId});var Pq=Ge([e0,TL,Cq,AL],bq),VSe=Ge([hh,dh,sr,ts,yh,AL,Pq],_q),jSe=Ge([Hx,VSe],(n,e)=>n!=null&&n.coordinate?n.coordinate:e),HSe=Ge([Hx],n=>{var e;return(e=n==null?void 0:n.active)!==null&&e!==void 0?e:!1}),GSe=Ge([Pq,ix,mh,Bx,Iq,xq,TL],Sq),WSe=Ge([GSe],n=>{if(n!=null){var e=n.map(t=>t.payload).filter(t=>t!=null);return Array.from(new Set(e))}});function D5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function L5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?D5(Object(t),!0).forEach(function(i){qSe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):D5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function qSe(n,e,t){return(e=$Se(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $Se(n){var e=XSe(n,"string");return typeof e=="symbol"?e:e+""}function XSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var YSe=()=>sn(la),KSe=()=>{var n=YSe(),e=sn(yh),t=sn(Mq);return AT(!n||!t?void 0:L5(L5({},n),{},{scale:t}),e)};function k5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Dv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?k5(Object(t),!0).forEach(function(i){ZSe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):k5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function ZSe(n,e,t){return(e=QSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function QSe(n){var e=JSe(n,"string");return typeof e=="symbol"?e:e+""}function JSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var e1e=(n,e,t,i)=>{var r=e.find(a=>a&&a.index===t);if(r){if(n==="horizontal")return{x:r.coordinate,y:i.chartY};if(n==="vertical")return{x:i.chartX,y:r.coordinate}}return{x:0,y:0}},t1e=(n,e,t,i)=>{var r=e.find(f=>f&&f.index===t);if(r){if(n==="centric"){var a=r.coordinate,{radius:s}=i;return Dv(Dv(Dv({},i),Ka(i.cx,i.cy,s,a)),{},{angle:a,radius:s})}var l=r.coordinate,{angle:c}=i;return Dv(Dv(Dv({},i),Ka(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function n1e(n,e){var{chartX:t,chartY:i}=n;return t>=e.left&&t<=e.left+e.width&&i>=e.top&&i<=e.top+e.height}var Rq=(n,e,t,i,r)=>{var a,s=(a=e==null?void 0:e.length)!==null&&a!==void 0?a:0;if(s<=1||n==null)return 0;if(i==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var l=0;l<s;l++){var c,f,p,g,v,_=l>0?(c=t[l-1])===null||c===void 0?void 0:c.coordinate:(f=t[s-1])===null||f===void 0?void 0:f.coordinate,x=(p=t[l])===null||p===void 0?void 0:p.coordinate,T=l>=s-1?(g=t[0])===null||g===void 0?void 0:g.coordinate:(v=t[l+1])===null||v===void 0?void 0:v.coordinate,S=void 0;if(!(_==null||x==null||T==null))if(Fl(x-_)!==Fl(T-x)){var w=[];if(Fl(T-x)===Fl(r[1]-r[0])){S=T;var I=x+r[1]-r[0];w[0]=Math.min(I,(I+_)/2),w[1]=Math.max(I,(I+_)/2)}else{S=_;var R=T+r[1]-r[0];w[0]=Math.min(x,(R+x)/2),w[1]=Math.max(x,(R+x)/2)}var O=[Math.min(x,(S+x)/2),Math.max(x,(S+x)/2)];if(n>O[0]&&n<=O[1]||n>=w[0]&&n<=w[1]){var F;return(F=t[l])===null||F===void 0?void 0:F.index}}else{var B=Math.min(_,T),L=Math.max(_,T);if(n>(B+x)/2&&n<=(L+x)/2){var z;return(z=t[l])===null||z===void 0?void 0:z.index}}}else if(e)for(var P=0;P<s;P++){var D=e[P];if(D!=null){var j=e[P+1],q=e[P-1];if(P===0&&j!=null&&n<=(D.coordinate+j.coordinate)/2||P===s-1&&q!=null&&n>(D.coordinate+q.coordinate)/2||P>0&&P<s-1&&q!=null&&j!=null&&n>(D.coordinate+q.coordinate)/2&&n<=(D.coordinate+j.coordinate)/2)return D.index}}return-1},Nq=()=>sn(rL),ML=(n,e)=>e,Oq=(n,e,t)=>t,CL=(n,e,t,i)=>i,i1e=Ge(yh,n=>mM(n,e=>e.coordinate)),IL=Ge([e0,ML,Oq,CL],yq),PL=Ge([IL,n0,Bx,jx],SL),r1e=(n,e,t)=>{if(e!=null){var i=e0(n);return e==="axis"?t==="hover"?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:t==="hover"?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}},Dq=Ge([e0,ML,Oq,CL],bq),KT=Ge([hh,dh,sr,ts,yh,CL,Dq],_q),a1e=Ge([IL,KT],(n,e)=>{var t;return(t=n.coordinate)!==null&&t!==void 0?t:e}),Lq=Ge([yh,PL],pq),s1e=Ge([Dq,PL,mh,Bx,Lq,xq,ML],Sq),o1e=Ge([IL,PL],(n,e)=>({isActive:n.active&&e!=null,activeIndex:e})),l1e=(n,e,t,i,r,a,s)=>{if(!(!n||!t||!i||!r)&&n1e(n,s)){var l=Oge(n,e),c=Rq(l,a,r,t,i),f=e1e(e,r,c,n);return{activeIndex:String(c),activeCoordinate:f}}},u1e=(n,e,t,i,r,a,s)=>{if(!(!n||!i||!r||!a||!t)){var l=Gye(n,t);if(l){var c=Dge(l,e),f=Rq(c,s,a,i,r),p=t1e(e,a,f,l);return{activeIndex:String(f),activeCoordinate:p}}}},c1e=(n,e,t,i,r,a,s,l)=>{if(!(!n||!e||!i||!r||!a))return e==="horizontal"||e==="vertical"?l1e(n,e,i,r,a,s,l):u1e(n,e,t,i,r,a,s)},f1e=Ge(n=>n.zIndex.zIndexMap,(n,e)=>e,(n,e,t)=>t,(n,e,t)=>{if(e!=null){var i=n[e];if(i!=null)return t?i.panoramaElement:i.element}}),h1e=Ge(n=>n.zIndex.zIndexMap,n=>{var e=Object.keys(n).map(i=>parseInt(i,10)).concat(Object.values(Ys)),t=Array.from(new Set(e));return t.sort((i,r)=>i-r)},{memoizeOptions:{resultEqualityCheck:Wbe}});function U5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function z5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?U5(Object(t),!0).forEach(function(i){d1e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):U5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function d1e(n,e,t){return(e=p1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function p1e(n){var e=m1e(n,"string");return typeof e=="symbol"?e:e+""}function m1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var g1e={},v1e={zIndexMap:Object.values(Ys).reduce((n,e)=>z5(z5({},n),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),g1e)},y1e=new Set(Object.values(Ys));function _1e(n){return y1e.has(n)}var kq=Oo({name:"zIndex",initialState:v1e,reducers:{registerZIndexPortal:{reducer:(n,e)=>{var{zIndex:t}=e.payload;n.zIndexMap[t]?n.zIndexMap[t].consumers+=1:n.zIndexMap[t]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:rr()},unregisterZIndexPortal:{reducer:(n,e)=>{var{zIndex:t}=e.payload;n.zIndexMap[t]&&(n.zIndexMap[t].consumers-=1,n.zIndexMap[t].consumers<=0&&!_1e(t)&&delete n.zIndexMap[t])},prepare:rr()},registerZIndexPortalElement:{reducer:(n,e)=>{var{zIndex:t,element:i,isPanorama:r}=e.payload;n.zIndexMap[t]?r?n.zIndexMap[t].panoramaElement=i:n.zIndexMap[t].element=i:n.zIndexMap[t]={consumers:0,element:r?void 0:i,panoramaElement:r?i:void 0}},prepare:rr()},unregisterZIndexPortalElement:{reducer:(n,e)=>{var{zIndex:t}=e.payload;n.zIndexMap[t]&&(e.payload.isPanorama?n.zIndexMap[t].panoramaElement=void 0:n.zIndexMap[t].element=void 0)},prepare:rr()}}}),{registerZIndexPortal:b1e,unregisterZIndexPortal:x1e,registerZIndexPortalElement:S1e,unregisterZIndexPortalElement:w1e}=kq.actions,E1e=kq.reducer;function _h(n){var{zIndex:e,children:t}=n,i=dve(),r=i&&e!==void 0&&e!==0,a=Do(),s=Ta();H.useLayoutEffect(()=>r?(s(b1e({zIndex:e})),()=>{s(x1e({zIndex:e}))}):qy,[s,e,r]);var l=sn(c=>f1e(c,e,a));return r?l?X2.createPortal(t,l):null:t}function cO(){return cO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},cO.apply(null,arguments)}function F5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Ew(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?F5(Object(t),!0).forEach(function(i){T1e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):F5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function T1e(n,e,t){return(e=A1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function A1e(n){var e=M1e(n,"string");return typeof e=="symbol"?e:e+""}function M1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function C1e(n){var{cursor:e,cursorComp:t,cursorProps:i}=n;return H.isValidElement(e)?H.cloneElement(e,i):H.createElement(t,i)}function I1e(n){var e,{coordinate:t,payload:i,index:r,offset:a,tooltipAxisBandSize:s,layout:l,cursor:c,tooltipEventType:f,chartName:p}=n,g=t,v=i,_=r;if(!c||!g||p!=="ScatterChart"&&f!=="axis")return null;var x,T,S;if(p==="ScatterChart")x=g,T=tye,S=Ys.cursorLine;else if(p==="BarChart")x=nye(l,g,a,s),T=Dye,S=Ys.cursorRectangle;else if(l==="radial"&&cG(g)){var{cx:w,cy:I,radius:R,startAngle:O,endAngle:F}=E7(g);x={cx:w,cy:I,startAngle:O,endAngle:F,innerRadius:R,outerRadius:R},T=Xye,S=Ys.cursorLine}else x={points:Yye(l,g,a)},T=Gw,S=Ys.cursorLine;var B=typeof c=="object"&&"className"in c?c.className:void 0,L=Ew(Ew(Ew(Ew({stroke:"#ccc",pointerEvents:"none"},a),x),fM(c)),{},{payload:v,payloadIndex:_,className:Zi("recharts-tooltip-cursor",B)});return H.createElement(_h,{zIndex:(e=n.zIndex)!==null&&e!==void 0?e:S},H.createElement(C1e,{cursor:c,cursorComp:T,cursorProps:L}))}function P1e(n){var e=KSe(),t=o7(),i=$y(),r=Nq();return e==null||t==null||i==null||r==null?null:H.createElement(I1e,cO({},n,{offset:t,layout:i,tooltipAxisBandSize:e,chartName:r}))}var Uq=H.createContext(null),R1e=()=>H.useContext(Uq),hR={exports:{}},B5;function N1e(){return B5||(B5=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function r(c,f,p){this.fn=c,this.context=f,this.once=p||!1}function a(c,f,p,g,v){if(typeof p!="function")throw new TypeError("The listener must be a function");var _=new r(p,g||c,v),x=t?t+f:f;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],_]:c._events[x].push(_):(c._events[x]=_,c._eventsCount++),c}function s(c,f){--c._eventsCount===0?c._events=new i:delete c._events[f]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var f=[],p,g;if(this._eventsCount===0)return f;for(g in p=this._events)e.call(p,g)&&f.push(t?g.slice(1):g);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(p)):f},l.prototype.listeners=function(f){var p=t?t+f:f,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var v=0,_=g.length,x=new Array(_);v<_;v++)x[v]=g[v].fn;return x},l.prototype.listenerCount=function(f){var p=t?t+f:f,g=this._events[p];return g?g.fn?1:g.length:0},l.prototype.emit=function(f,p,g,v,_,x){var T=t?t+f:f;if(!this._events[T])return!1;var S=this._events[T],w=arguments.length,I,R;if(S.fn){switch(S.once&&this.removeListener(f,S.fn,void 0,!0),w){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,p),!0;case 3:return S.fn.call(S.context,p,g),!0;case 4:return S.fn.call(S.context,p,g,v),!0;case 5:return S.fn.call(S.context,p,g,v,_),!0;case 6:return S.fn.call(S.context,p,g,v,_,x),!0}for(R=1,I=new Array(w-1);R<w;R++)I[R-1]=arguments[R];S.fn.apply(S.context,I)}else{var O=S.length,F;for(R=0;R<O;R++)switch(S[R].once&&this.removeListener(f,S[R].fn,void 0,!0),w){case 1:S[R].fn.call(S[R].context);break;case 2:S[R].fn.call(S[R].context,p);break;case 3:S[R].fn.call(S[R].context,p,g);break;case 4:S[R].fn.call(S[R].context,p,g,v);break;default:if(!I)for(F=1,I=new Array(w-1);F<w;F++)I[F-1]=arguments[F];S[R].fn.apply(S[R].context,I)}}return!0},l.prototype.on=function(f,p,g){return a(this,f,p,g,!1)},l.prototype.once=function(f,p,g){return a(this,f,p,g,!0)},l.prototype.removeListener=function(f,p,g,v){var _=t?t+f:f;if(!this._events[_])return this;if(!p)return s(this,_),this;var x=this._events[_];if(x.fn)x.fn===p&&(!v||x.once)&&(!g||x.context===g)&&s(this,_);else{for(var T=0,S=[],w=x.length;T<w;T++)(x[T].fn!==p||v&&!x[T].once||g&&x[T].context!==g)&&S.push(x[T]);S.length?this._events[_]=S.length===1?S[0]:S:s(this,_)}return this},l.prototype.removeAllListeners=function(f){var p;return f?(p=t?t+f:f,this._events[p]&&s(this,p)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=t,l.EventEmitter=l,n.exports=l})(hR)),hR.exports}var O1e=N1e();const D1e=ku(O1e);var rx=new D1e,fO="recharts.syncEvent.tooltip",V5="recharts.syncEvent.brush",L1e=(n,e)=>{if(e&&Array.isArray(n)){var t=Number.parseInt(e,10);if(!Xc(t))return n[t]}},k1e={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},zq=Oo({name:"options",initialState:k1e,reducers:{createEventEmitter:n=>{n.eventEmitter==null&&(n.eventEmitter=Symbol("rechartsEventEmitter"))}}}),U1e=zq.reducer,{createEventEmitter:z1e}=zq.actions;function F1e(n){return n.tooltip.syncInteraction}var B1e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Fq=Oo({name:"chartData",initialState:B1e,reducers:{setChartData(n,e){if(n.chartData=e.payload,e.payload==null){n.dataStartIndex=0,n.dataEndIndex=0;return}e.payload.length>0&&n.dataEndIndex!==e.payload.length-1&&(n.dataEndIndex=e.payload.length-1)},setComputedData(n,e){n.computedData=e.payload},setDataStartEndIndexes(n,e){var{startIndex:t,endIndex:i}=e.payload;t!=null&&(n.dataStartIndex=t),i!=null&&(n.dataEndIndex=i)}}}),{setChartData:j5,setDataStartEndIndexes:V1e,setComputedData:pPe}=Fq.actions,j1e=Fq.reducer,H1e=["x","y"];function H5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Lv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?H5(Object(t),!0).forEach(function(i){G1e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):H5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function G1e(n,e,t){return(e=W1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function W1e(n){var e=q1e(n,"string");return typeof e=="symbol"?e:e+""}function q1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function $1e(n,e){if(n==null)return{};var t,i,r=X1e(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function X1e(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function Y1e(){var n=sn(aL),e=sn(sL),t=Ta(),i=sn(bW),r=sn(yh),a=$y(),s=IM(),l=sn(c=>c.rootProps.className);H.useEffect(()=>{if(n==null)return qy;var c=(f,p,g)=>{if(e!==g&&n===f){if(i==="index"){var v;if(s&&p!==null&&p!==void 0&&(v=p.payload)!==null&&v!==void 0&&v.coordinate&&p.payload.sourceViewBox){var _=p.payload.coordinate,{x,y:T}=_,S=$1e(_,H1e),{x:w,y:I,width:R,height:O}=p.payload.sourceViewBox,F=Lv(Lv({},S),{},{x:s.x+(R?(x-w)/R:0)*s.width,y:s.y+(O?(T-I)/O:0)*s.height});t(Lv(Lv({},p),{},{payload:Lv(Lv({},p.payload),{},{coordinate:F})}))}else t(p);return}if(r!=null){var B;if(typeof i=="function"){var L={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},z=i(r,L);B=r[z]}else i==="value"&&(B=r.find(J=>String(J.value)===p.payload.label));var{coordinate:P}=p.payload;if(B==null||p.payload.active===!1||P==null||s==null){t(lO({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:D,y:j}=P,q=Math.min(D,s.x+s.width),W=Math.min(j,s.y+s.height),se={x:a==="horizontal"?B.coordinate:q,y:a==="horizontal"?W:B.coordinate},ue=lO({active:p.payload.active,coordinate:se,dataKey:p.payload.dataKey,index:String(B.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox,graphicalItemId:p.payload.graphicalItemId});t(ue)}}};return rx.on(fO,c),()=>{rx.off(fO,c)}},[l,t,e,n,i,r,a,s])}function K1e(){var n=sn(aL),e=sn(sL),t=Ta();H.useEffect(()=>{if(n==null)return qy;var i=(r,a,s)=>{e!==s&&n===r&&t(V1e(a))};return rx.on(V5,i),()=>{rx.off(V5,i)}},[t,e,n])}function Z1e(){var n=Ta();H.useEffect(()=>{n(z1e())},[n]),Y1e(),K1e()}function Q1e(n,e,t,i,r,a){var s=sn(_=>r1e(_,n,e)),l=sn(sL),c=sn(aL),f=sn(bW),p=sn(F1e),g=p==null?void 0:p.active,v=IM();H.useEffect(()=>{if(!g&&c!=null&&l!=null){var _=lO({active:a,coordinate:t,dataKey:s,index:r,label:typeof i=="number"?String(i):i,sourceViewBox:v,graphicalItemId:void 0});rx.emit(fO,c,_,l)}},[g,t,s,r,i,l,c,f,a,v])}function G5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function W5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?G5(Object(t),!0).forEach(function(i){J1e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):G5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function J1e(n,e,t){return(e=ewe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ewe(n){var e=twe(n,"string");return typeof e=="symbol"?e:e+""}function twe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function nwe(n){return n.dataKey}function iwe(n,e){return H.isValidElement(n)?H.cloneElement(n,e):typeof n=="function"?H.createElement(n,e):H.createElement(Dve,e)}var q5=[],rwe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function awe(n){var e,t,i=al(n,rwe),{active:r,allowEscapeViewBox:a,animationDuration:s,animationEasing:l,content:c,filterNull:f,isAnimationActive:p,offset:g,payloadUniqBy:v,position:_,reverseDirection:x,useTranslate3d:T,wrapperStyle:S,cursor:w,shared:I,trigger:R,defaultIndex:O,portal:F,axisId:B}=i,L=Ta(),z=typeof O=="number"?String(O):O;H.useEffect(()=>{L(eSe({shared:I,trigger:R,axisId:B,active:r,defaultIndex:z}))},[L,I,R,B,r,z]);var P=IM(),D=y7(),j=Xxe(I),{activeIndex:q,isActive:W}=(e=sn(Ae=>o1e(Ae,j,R,z)))!==null&&e!==void 0?e:{},se=sn(Ae=>s1e(Ae,j,R,z)),ue=sn(Ae=>Lq(Ae,j,R,z)),J=sn(Ae=>a1e(Ae,j,R,z)),ae=se,he=R1e(),Te=(t=r??W)!==null&&t!==void 0?t:!1,[Re,Q]=bme([ae,Te]),de=j==="axis"?ue:void 0;Q1e(j,R,J,de,q,Te);var Me=F??he;if(Me==null||P==null||j==null)return null;var We=ae??q5;Te||(We=q5),f&&We.length&&(We=Zpe(We.filter(Ae=>Ae.value!=null&&(Ae.hide!==!0||i.includeHidden)),v,nwe));var vt=We.length>0,be=H.createElement(Vve,{allowEscapeViewBox:a,animationDuration:s,animationEasing:l,isAnimationActive:p,active:Te,coordinate:J,hasPayload:vt,offset:g,position:_,reverseDirection:x,useTranslate3d:T,viewBox:P,wrapperStyle:S,lastBoundingBox:Re,innerRef:Q,hasPortalFromProps:!!F},iwe(c,W5(W5({},i),{},{payload:We,label:de,active:Te,activeIndex:q,coordinate:J,accessibilityLayer:D})));return H.createElement(H.Fragment,null,X2.createPortal(be,Me),Te&&H.createElement(P1e,{cursor:w,tooltipEventType:j,coordinate:J,payload:We,index:q}))}function swe(n,e,t){return(e=owe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function owe(n){var e=lwe(n,"string");return typeof e=="symbol"?e:e+""}function lwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class uwe{constructor(e){swe(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return t!==void 0&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var i=this.cache.keys().next().value;i!=null&&this.cache.delete(i)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}function $5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function cwe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$5(Object(t),!0).forEach(function(i){fwe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function fwe(n,e,t){return(e=hwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function hwe(n){var e=dwe(n,"string");return typeof e=="symbol"?e:e+""}function dwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var pwe={cacheSize:2e3,enableCache:!0},Bq=cwe({},pwe),X5=new uwe(Bq.cacheSize),mwe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Y5="recharts_measurement_span";function gwe(n,e){var t=e.fontSize||"",i=e.fontFamily||"",r=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",l=e.textTransform||"";return"".concat(n,"|").concat(t,"|").concat(i,"|").concat(r,"|").concat(a,"|").concat(s,"|").concat(l)}var K5=(n,e)=>{try{var t=document.getElementById(Y5);t||(t=document.createElement("span"),t.setAttribute("id",Y5),t.setAttribute("aria-hidden","true"),document.body.appendChild(t)),Object.assign(t.style,mwe,e),t.textContent="".concat(n);var i=t.getBoundingClientRect();return{width:i.width,height:i.height}}catch{return{width:0,height:0}}},pb=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ox.isSsr)return{width:0,height:0};if(!Bq.enableCache)return K5(e,t);var i=gwe(e,t),r=X5.get(i);if(r)return r;var a=K5(e,t);return X5.set(i,a),a},Vq;function vwe(n,e,t){return(e=ywe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ywe(n){var e=_we(n,"string");return typeof e=="symbol"?e:e+""}function _we(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Z5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Q5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bwe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,xwe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Swe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},wwe=["cm","mm","pt","pc","in","Q","px"];function Ewe(n){return wwe.includes(n)}var Xv="NaN";function Twe(n,e){return n*Swe[e]}class qa{static parse(e){var t,[,i,r]=(t=xwe.exec(e))!==null&&t!==void 0?t:[];return i==null?qa.NaN:new qa(parseFloat(i),r??"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,Xc(e)&&(this.unit=""),t!==""&&!bwe.test(t)&&(this.num=NaN,this.unit=""),Ewe(t)&&(this.num=Twe(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new qa(NaN,""):new qa(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new qa(NaN,""):new qa(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new qa(NaN,""):new qa(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new qa(NaN,""):new qa(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Xc(this.num)}}Vq=qa;vwe(qa,"NaN",new Vq(NaN,""));function jq(n){if(n==null||n.includes(Xv))return Xv;for(var e=n;e.includes("*")||e.includes("/");){var t,[,i,r,a]=(t=Z5.exec(e))!==null&&t!==void 0?t:[],s=qa.parse(i??""),l=qa.parse(a??""),c=r==="*"?s.multiply(l):s.divide(l);if(c.isNaN())return Xv;e=e.replace(Z5,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,[,p,g,v]=(f=Q5.exec(e))!==null&&f!==void 0?f:[],_=qa.parse(p??""),x=qa.parse(v??""),T=g==="+"?_.add(x):_.subtract(x);if(T.isNaN())return Xv;e=e.replace(Q5,T.toString())}return e}var J5=/\(([^()]*)\)/;function Awe(n){for(var e=n,t;(t=J5.exec(e))!=null;){var[,i]=t;e=e.replace(J5,jq(i))}return e}function Mwe(n){var e=n.replace(/\s+/g,"");return e=Awe(e),e=jq(e),e}function Cwe(n){try{return Mwe(n)}catch{return Xv}}function dR(n){var e=Cwe(n.slice(5,-1));return e===Xv?"":e}var Iwe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Pwe=["dx","dy","angle","className","breakAll"];function hO(){return hO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},hO.apply(null,arguments)}function e2(n,e){if(n==null)return{};var t,i,r=Rwe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function Rwe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var Hq=/[ \f\n\r\t\v\u2028\u2029]+/,Gq=n=>{var{children:e,breakAll:t,style:i}=n;try{var r=[];Ms(e)||(t?r=e.toString().split(""):r=e.toString().split(Hq));var a=r.map(l=>({word:l,width:pb(l,i).width})),s=t?0:pb("",i).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function Nwe(n){return n==="start"||n==="middle"||n==="end"||n==="inherit"}var Wq=(n,e,t,i)=>n.reduce((r,a)=>{var{word:s,width:l}=a,c=r[r.length-1];if(c&&l!=null&&(e==null||i||c.width+l+t<Number(e)))c.words.push(s),c.width+=l+t;else{var f={words:[s],width:l};r.push(f)}return r},[]),qq=n=>n.reduce((e,t)=>e.width>t.width?e:t),Owe="",t2=(n,e,t,i,r,a,s,l)=>{var c=n.slice(0,e),f=Gq({breakAll:t,style:i,children:c+Owe});if(!f)return[!1,[]];var p=Wq(f.wordsWithComputedWidth,a,s,l),g=p.length>r||qq(p).width>Number(a);return[g,p]},Dwe=(n,e,t,i,r)=>{var{maxLines:a,children:s,style:l,breakAll:c}=n,f=qt(a),p=String(s),g=Wq(e,i,t,r);if(!f||r)return g;var v=g.length>a||qq(g).width>Number(i);if(!v)return g;for(var _=0,x=p.length-1,T=0,S;_<=x&&T<=p.length-1;){var w=Math.floor((_+x)/2),I=w-1,[R,O]=t2(p,I,c,l,a,i,t,r),[F]=t2(p,w,c,l,a,i,t,r);if(!R&&!F&&(_=w+1),R&&F&&(x=w-1),!R&&F){S=O;break}T++}return S||g},n2=n=>{var e=Ms(n)?[]:n.toString().split(Hq);return[{words:e,width:void 0}]},Lwe=n=>{var{width:e,scaleToFit:t,children:i,style:r,breakAll:a,maxLines:s}=n;if((e||t)&&!Ox.isSsr){var l,c,f=Gq({breakAll:a,children:i,style:r});if(f){var{wordsWithComputedWidth:p,spaceWidth:g}=f;l=p,c=g}else return n2(i);return Dwe({breakAll:a,children:i,maxLines:s,style:r},l,c,e,!!t)}return n2(i)},$q="#808080",kwe={angle:0,breakAll:!1,capHeight:"0.71em",fill:$q,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},RL=H.forwardRef((n,e)=>{var t=al(n,kwe),{x:i,y:r,lineHeight:a,capHeight:s,fill:l,scaleToFit:c,textAnchor:f,verticalAnchor:p}=t,g=e2(t,Iwe),v=H.useMemo(()=>Lwe({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:c,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,c,g.style,g.width]),{dx:_,dy:x,angle:T,className:S,breakAll:w}=g,I=e2(g,Pwe);if(!Yc(i)||!Yc(r)||v.length===0)return null;var R=Number(i)+(qt(_)?_:0),O=Number(r)+(qt(x)?x:0);if(!Kn(R)||!Kn(O))return null;var F;switch(p){case"start":F=dR("calc(".concat(s,")"));break;case"middle":F=dR("calc(".concat((v.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:F=dR("calc(".concat(v.length-1," * -").concat(a,")"));break}var B=[],L=v[0];if(c&&L!=null){var z=L.width,{width:P}=g;B.push("scale(".concat(qt(P)&&qt(z)?P/z:1,")"))}return T&&B.push("rotate(".concat(T,", ").concat(R,", ").concat(O,")")),B.length&&(I.transform=B.join(" ")),H.createElement("text",hO({},Gl(I),{ref:e,x:R,y:O,className:Zi("recharts-text",S),textAnchor:f,fill:l.includes("url")?$q:l}),v.map((D,j)=>{var q=D.words.join(w?"":" ");return H.createElement("tspan",{x:R,dy:j===0?F:a,key:"".concat(q,"-").concat(j)},q)}))});RL.displayName="Text";function i2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function wc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?i2(Object(t),!0).forEach(function(i){Uwe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):i2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Uwe(n,e,t){return(e=zwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zwe(n){var e=Fwe(n,"string");return typeof e=="symbol"?e:e+""}function Fwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Bwe=n=>{var{viewBox:e,position:t,offset:i=0,parentViewBox:r}=n,{x:a,y:s,height:l,upperWidth:c,lowerWidth:f}=I3(e),p=a,g=a+(c-f)/2,v=(p+g)/2,_=(c+f)/2,x=p+c/2,T=l>=0?1:-1,S=T*i,w=T>0?"end":"start",I=T>0?"start":"end",R=c>=0?1:-1,O=R*i,F=R>0?"end":"start",B=R>0?"start":"end",L=r;if(t==="top"){var z={x:p+c/2,y:s-S,horizontalAnchor:"middle",verticalAnchor:w};return L&&(z.height=Math.max(s-L.y,0),z.width=c),z}if(t==="bottom"){var P={x:g+f/2,y:s+l+S,horizontalAnchor:"middle",verticalAnchor:I};return L&&(P.height=Math.max(L.y+L.height-(s+l),0),P.width=f),P}if(t==="left"){var D={x:v-O,y:s+l/2,horizontalAnchor:F,verticalAnchor:"middle"};return L&&(D.width=Math.max(D.x-L.x,0),D.height=l),D}if(t==="right"){var j={x:v+_+O,y:s+l/2,horizontalAnchor:B,verticalAnchor:"middle"};return L&&(j.width=Math.max(L.x+L.width-j.x,0),j.height=l),j}var q=L?{width:_,height:l}:{};return t==="insideLeft"?wc({x:v+O,y:s+l/2,horizontalAnchor:B,verticalAnchor:"middle"},q):t==="insideRight"?wc({x:v+_-O,y:s+l/2,horizontalAnchor:F,verticalAnchor:"middle"},q):t==="insideTop"?wc({x:p+c/2,y:s+S,horizontalAnchor:"middle",verticalAnchor:I},q):t==="insideBottom"?wc({x:g+f/2,y:s+l-S,horizontalAnchor:"middle",verticalAnchor:w},q):t==="insideTopLeft"?wc({x:p+O,y:s+S,horizontalAnchor:B,verticalAnchor:I},q):t==="insideTopRight"?wc({x:p+c-O,y:s+S,horizontalAnchor:F,verticalAnchor:I},q):t==="insideBottomLeft"?wc({x:g+O,y:s+l-S,horizontalAnchor:B,verticalAnchor:w},q):t==="insideBottomRight"?wc({x:g+f-O,y:s+l-S,horizontalAnchor:F,verticalAnchor:w},q):t&&typeof t=="object"&&(qt(t.x)||Km(t.x))&&(qt(t.y)||Km(t.y))?wc({x:a+ep(t.x,_),y:s+ep(t.y,l),horizontalAnchor:"end",verticalAnchor:"end"},q):wc({x,y:s+l/2,horizontalAnchor:"middle",verticalAnchor:"middle"},q)},Vwe=["labelRef"],jwe=["content"];function r2(n,e){if(n==null)return{};var t,i,r=Hwe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function Hwe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function a2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Z_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?a2(Object(t),!0).forEach(function(i){Gwe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):a2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Gwe(n,e,t){return(e=Wwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Wwe(n){var e=qwe(n,"string");return typeof e=="symbol"?e:e+""}function qwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Wf(){return Wf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Wf.apply(null,arguments)}var Xq=H.createContext(null),$we=n=>{var{x:e,y:t,upperWidth:i,lowerWidth:r,width:a,height:s,children:l}=n,c=H.useMemo(()=>({x:e,y:t,upperWidth:i,lowerWidth:r,width:a,height:s}),[e,t,i,r,a,s]);return H.createElement(Xq.Provider,{value:c},l)},Yq=()=>{var n=H.useContext(Xq),e=IM();return n||(e?I3(e):void 0)},Xwe=H.createContext(null),Ywe=()=>{var n=H.useContext(Xwe),e=sn(TW);return n||e},Kwe=n=>{var{value:e,formatter:t}=n,i=Ms(n.children)?e:n.children;return typeof t=="function"?t(i):i},NL=n=>n!=null&&typeof n=="function",Zwe=(n,e)=>{var t=Fl(e-n),i=Math.min(Math.abs(e-n),360);return t*i},Qwe=(n,e,t,i,r)=>{var{offset:a,className:s}=n,{cx:l,cy:c,innerRadius:f,outerRadius:p,startAngle:g,endAngle:v,clockWise:_}=r,x=(f+p)/2,T=Zwe(g,v),S=T>=0?1:-1,w,I;switch(e){case"insideStart":w=g+S*a,I=_;break;case"insideEnd":w=v-S*a,I=!_;break;case"end":w=v+S*a,I=_;break;default:throw new Error("Unsupported position ".concat(e))}I=T<=0?I:!I;var R=Ka(l,c,x,w),O=Ka(l,c,x,w+(I?1:-1)*359),F="M".concat(R.x,",").concat(R.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(I?0:1,`,
    `).concat(O.x,",").concat(O.y),B=Ms(n.id)?Gb("recharts-radial-line-"):n.id;return H.createElement("text",Wf({},i,{dominantBaseline:"central",className:Zi("recharts-radial-bar-label",s)}),H.createElement("defs",null,H.createElement("path",{id:B,d:F})),H.createElement("textPath",{xlinkHref:"#".concat(B)},t))},Jwe=(n,e,t)=>{var{cx:i,cy:r,innerRadius:a,outerRadius:s,startAngle:l,endAngle:c}=n,f=(l+c)/2;if(t==="outside"){var{x:p,y:g}=Ka(i,r,s+e,f);return{x:p,y:g,textAnchor:p>=i?"start":"end",verticalAnchor:"middle"}}if(t==="center")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(t==="centerTop")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"start"};if(t==="centerBottom")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"end"};var v=(a+s)/2,{x:_,y:x}=Ka(i,r,v,f);return{x:_,y:x,textAnchor:"middle",verticalAnchor:"middle"}},qw=n=>n!=null&&"cx"in n&&qt(n.cx),eEe={angle:0,offset:5,zIndex:Ys.label,position:"middle",textBreakAll:!1};function tEe(n){if(!qw(n))return n;var{cx:e,cy:t,outerRadius:i}=n,r=i*2;return{x:e-i,y:t-i,width:r,upperWidth:r,lowerWidth:r,height:r}}function Sd(n){var e=al(n,eEe),{viewBox:t,parentViewBox:i,position:r,value:a,children:s,content:l,className:c="",textBreakAll:f,labelRef:p}=e,g=Ywe(),v=Yq(),_=r==="center"?v:g??v,x,T,S;t==null?x=_:qw(t)?x=t:x=I3(t);var w=tEe(x);if(!x||Ms(a)&&Ms(s)&&!H.isValidElement(l)&&typeof l!="function")return null;var I=Z_(Z_({},e),{},{viewBox:x});if(H.isValidElement(l)){var{labelRef:R}=I,O=r2(I,Vwe);return H.cloneElement(l,O)}if(typeof l=="function"){var{content:F}=I,B=r2(I,jwe);if(T=H.createElement(l,B),H.isValidElement(T))return T}else T=Kwe(e);var L=Gl(e);if(qw(x)){if(r==="insideStart"||r==="insideEnd"||r==="end")return Qwe(e,r,T,L,x);S=Jwe(x,e.offset,e.position)}else{if(!w)return null;var z=Bwe({viewBox:w,position:r,offset:e.offset,parentViewBox:qw(i)?void 0:i});S=Z_(Z_({x:z.x,y:z.y,textAnchor:z.horizontalAnchor,verticalAnchor:z.verticalAnchor},z.width!==void 0?{width:z.width}:{}),z.height!==void 0?{height:z.height}:{})}return H.createElement(_h,{zIndex:e.zIndex},H.createElement(RL,Wf({ref:p,className:Zi("recharts-label",c)},L,S,{textAnchor:Nwe(L.textAnchor)?L.textAnchor:S.textAnchor,breakAll:f}),T))}Sd.displayName="Label";var nEe=(n,e,t)=>{if(!n)return null;var i={viewBox:e,labelRef:t};return n===!0?H.createElement(Sd,Wf({key:"label-implicit"},i)):Yc(n)?H.createElement(Sd,Wf({key:"label-implicit",value:n},i)):H.isValidElement(n)?n.type===Sd?H.cloneElement(n,Z_({key:"label-implicit"},i)):H.createElement(Sd,Wf({key:"label-implicit",content:n},i)):NL(n)?H.createElement(Sd,Wf({key:"label-implicit",content:n},i)):n&&typeof n=="object"?H.createElement(Sd,Wf({},n,{key:"label-implicit"},i)):null};function iEe(n){var{label:e,labelRef:t}=n,i=Yq();return nEe(e,i,t)||null}var pR={},mR={},s2;function rEe(){return s2||(s2=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t[t.length-1]}n.last=e})(mR)),mR}var gR={},o2;function aEe(){return o2||(o2=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Array.isArray(t)?t:Array.from(t)}n.toArray=e})(gR)),gR}var l2;function sEe(){return l2||(l2=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=rEe(),t=aEe(),i=_3();function r(a){if(i.isArrayLike(a))return e.last(t.toArray(a))}n.last=r})(pR)),pR}var vR,u2;function oEe(){return u2||(u2=1,vR=sEe().last),vR}var lEe=oEe();const uEe=ku(lEe);var cEe=["valueAccessor"],fEe=["dataKey","clockWise","id","textBreakAll","zIndex"];function ZT(){return ZT=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ZT.apply(null,arguments)}function c2(n,e){if(n==null)return{};var t,i,r=hEe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function hEe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var dEe=n=>Array.isArray(n.value)?uEe(n.value):n.value,Kq=H.createContext(void 0),pEe=Kq.Provider,Zq=H.createContext(void 0);Zq.Provider;function mEe(){return H.useContext(Kq)}function gEe(){return H.useContext(Zq)}function $w(n){var{valueAccessor:e=dEe}=n,t=c2(n,cEe),{dataKey:i,clockWise:r,id:a,textBreakAll:s,zIndex:l}=t,c=c2(t,fEe),f=mEe(),p=gEe(),g=f||p;return!g||!g.length?null:H.createElement(_h,{zIndex:l??Ys.label},H.createElement($c,{className:"recharts-label-list"},g.map((v,_)=>{var x,T=Ms(i)?e(v,_):Qa(v.payload,i),S=Ms(a)?{}:{id:"".concat(a,"-").concat(_)};return H.createElement(Sd,ZT({key:"label-".concat(_)},Gl(v),c,S,{fill:(x=t.fill)!==null&&x!==void 0?x:v.fill,parentViewBox:v.parentViewBox,value:T,textBreakAll:s,viewBox:v.viewBox,index:_,zIndex:0}))})))}$w.displayName="LabelList";function vEe(n){var{label:e}=n;return e?e===!0?H.createElement($w,{key:"labelList-implicit"}):H.isValidElement(e)||NL(e)?H.createElement($w,{key:"labelList-implicit",content:e}):typeof e=="object"?H.createElement($w,ZT({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function dO(){return dO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},dO.apply(null,arguments)}var Qq=n=>{var{cx:e,cy:t,r:i,className:r}=n,a=Zi("recharts-dot",r);return qt(e)&&qt(t)&&qt(i)?H.createElement("circle",dO({},Du(n),y3(n),{className:a,cx:e,cy:t,r:i})):null},yEe={radiusAxis:{},angleAxis:{}},Jq=Oo({name:"polarAxis",initialState:yEe,reducers:{addRadiusAxis(n,e){n.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(n,e){delete n.radiusAxis[e.payload.id]},addAngleAxis(n,e){n.angleAxis[e.payload.id]=e.payload},removeAngleAxis(n,e){delete n.angleAxis[e.payload.id]}}}),{addRadiusAxis:mPe,removeRadiusAxis:gPe,addAngleAxis:vPe,removeAngleAxis:yPe}=Jq.actions,_Ee=Jq.reducer;function bEe(n){return n&&typeof n=="object"&&"className"in n&&typeof n.className=="string"?n.className:""}var e$=n=>n&&typeof n=="object"&&"clipDot"in n?!!n.clipDot:!0;function xEe(n){var{tooltipEntrySettings:e}=n,t=Ta(),i=Do(),r=H.useRef(null);return H.useLayoutEffect(()=>{i||(r.current===null?t(Zxe(e)):r.current!==e&&t(Qxe({prev:r.current,next:e})),r.current=e)},[e,t,i]),H.useLayoutEffect(()=>()=>{r.current&&(t(Jxe(r.current)),r.current=null)},[t]),null}function SEe(n){var{legendPayload:e}=n,t=Ta(),i=Do(),r=H.useRef(null);return H.useLayoutEffect(()=>{i||(r.current===null?t(Ave(e)):r.current!==e&&t(Mve({prev:r.current,next:e})),r.current=e)},[t,i,e]),H.useLayoutEffect(()=>()=>{r.current&&(t(Cve(r.current)),r.current=null)},[t]),null}var yR,wEe=()=>{var[n]=H.useState(()=>Gb("uid-"));return n},EEe=(yR=W2.useId)!==null&&yR!==void 0?yR:wEe;function TEe(n,e){var t=EEe();return e||(n?"".concat(n,"-").concat(t):t)}var AEe=H.createContext(void 0),MEe=n=>{var{id:e,type:t,children:i}=n,r=TEe("recharts-".concat(t),e);return H.createElement(AEe.Provider,{value:r},i(r))},CEe={cartesianItems:[],polarItems:[]},t$=Oo({name:"graphicalItems",initialState:CEe,reducers:{addCartesianGraphicalItem:{reducer(n,e){n.cartesianItems.push(e.payload)},prepare:rr()},replaceCartesianGraphicalItem:{reducer(n,e){var{prev:t,next:i}=e.payload,r=Ou(n).cartesianItems.indexOf(t);r>-1&&(n.cartesianItems[r]=i)},prepare:rr()},removeCartesianGraphicalItem:{reducer(n,e){var t=Ou(n).cartesianItems.indexOf(e.payload);t>-1&&n.cartesianItems.splice(t,1)},prepare:rr()},addPolarGraphicalItem:{reducer(n,e){n.polarItems.push(e.payload)},prepare:rr()},removePolarGraphicalItem:{reducer(n,e){var t=Ou(n).polarItems.indexOf(e.payload);t>-1&&n.polarItems.splice(t,1)},prepare:rr()}}}),{addCartesianGraphicalItem:IEe,replaceCartesianGraphicalItem:PEe,removeCartesianGraphicalItem:REe,addPolarGraphicalItem:_Pe,removePolarGraphicalItem:bPe}=t$.actions,NEe=t$.reducer,OEe=n=>{var e=Ta(),t=H.useRef(null);return H.useLayoutEffect(()=>{t.current===null?e(IEe(n)):t.current!==n&&e(PEe({prev:t.current,next:n})),t.current=n},[e,n]),H.useLayoutEffect(()=>()=>{t.current&&(e(REe(t.current)),t.current=null)},[e]),null},DEe=H.memo(OEe),LEe=["points"];function f2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function _R(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?f2(Object(t),!0).forEach(function(i){kEe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):f2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function kEe(n,e,t){return(e=UEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function UEe(n){var e=zEe(n,"string");return typeof e=="symbol"?e:e+""}function zEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function QT(){return QT=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},QT.apply(null,arguments)}function FEe(n,e){if(n==null)return{};var t,i,r=BEe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function BEe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function VEe(n){var{option:e,dotProps:t,className:i}=n;if(H.isValidElement(e))return H.cloneElement(e,t);if(typeof e=="function")return e(t);var r=Zi(i,typeof e!="boolean"?e.className:""),a=t??{},{points:s}=a,l=FEe(a,LEe);return H.createElement(Qq,QT({},l,{className:r}))}function jEe(n,e){return n==null?!1:e?!0:n.length===1}function HEe(n){var{points:e,dot:t,className:i,dotClassName:r,dataKey:a,baseProps:s,needClip:l,clipPathId:c,zIndex:f=Ys.scatter}=n;if(!jEe(e,t))return null;var p=e$(t),g=Gde(t),v=e.map((x,T)=>{var S,w,I=_R(_R(_R({r:3},s),g),{},{index:T,cx:(S=x.x)!==null&&S!==void 0?S:void 0,cy:(w=x.y)!==null&&w!==void 0?w:void 0,dataKey:a,value:x.value,payload:x.payload,points:e});return H.createElement(VEe,{key:"dot-".concat(T),option:t,dotProps:I,className:r})}),_={};return l&&c!=null&&(_.clipPath="url(#clipPath-".concat(p?"":"dots-").concat(c,")")),H.createElement(_h,{zIndex:f},H.createElement($c,QT({className:i},_),v))}function h2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function d2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?h2(Object(t),!0).forEach(function(i){GEe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):h2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function GEe(n,e,t){return(e=WEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function WEe(n){var e=qEe(n,"string");return typeof e=="symbol"?e:e+""}function qEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var n$=0,$Ee={xAxis:{},yAxis:{},zAxis:{}},i$=Oo({name:"cartesianAxis",initialState:$Ee,reducers:{addXAxis:{reducer(n,e){n.xAxis[e.payload.id]=e.payload},prepare:rr()},replaceXAxis:{reducer(n,e){var{prev:t,next:i}=e.payload;n.xAxis[t.id]!==void 0&&(t.id!==i.id&&delete n.xAxis[t.id],n.xAxis[i.id]=i)},prepare:rr()},removeXAxis:{reducer(n,e){delete n.xAxis[e.payload.id]},prepare:rr()},addYAxis:{reducer(n,e){n.yAxis[e.payload.id]=e.payload},prepare:rr()},replaceYAxis:{reducer(n,e){var{prev:t,next:i}=e.payload;n.yAxis[t.id]!==void 0&&(t.id!==i.id&&delete n.yAxis[t.id],n.yAxis[i.id]=i)},prepare:rr()},removeYAxis:{reducer(n,e){delete n.yAxis[e.payload.id]},prepare:rr()},addZAxis:{reducer(n,e){n.zAxis[e.payload.id]=e.payload},prepare:rr()},replaceZAxis:{reducer(n,e){var{prev:t,next:i}=e.payload;n.zAxis[t.id]!==void 0&&(t.id!==i.id&&delete n.zAxis[t.id],n.zAxis[i.id]=i)},prepare:rr()},removeZAxis:{reducer(n,e){delete n.zAxis[e.payload.id]},prepare:rr()},updateYAxisWidth(n,e){var{id:t,width:i}=e.payload,r=n.yAxis[t];if(r){var a,s=r.widthHistory||[];if(s.length===3&&s[0]===s[2]&&i===s[1]&&i!==r.width&&Math.abs(i-((a=s[0])!==null&&a!==void 0?a:0))<=1)return;var l=[...s,i].slice(-3);n.yAxis[t]=d2(d2({},r),{},{width:i,widthHistory:l})}}}}),{addXAxis:XEe,replaceXAxis:YEe,removeXAxis:KEe,addYAxis:ZEe,replaceYAxis:QEe,removeYAxis:JEe,addZAxis:xPe,replaceZAxis:SPe,removeZAxis:wPe,updateYAxisWidth:eTe}=i$.actions,tTe=i$.reducer,nTe=Ge([ts],n=>({top:n.top,bottom:n.bottom,left:n.left,right:n.right})),iTe=Ge([nTe,hh,dh],(n,e,t)=>{if(!(!n||e==null||t==null))return{x:n.left,y:n.top,width:Math.max(0,e-n.left-n.right),height:Math.max(0,t-n.top-n.bottom)}}),OL=()=>sn(iTe),rTe=()=>sn(WSe);function p2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function bR(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?p2(Object(t),!0).forEach(function(i){aTe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):p2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function aTe(n,e,t){return(e=sTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sTe(n){var e=oTe(n,"string");return typeof e=="symbol"?e:e+""}function oTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var lTe=n=>{var{point:e,childIndex:t,mainColor:i,activeDot:r,dataKey:a,clipPath:s}=n;if(r===!1||e.x==null||e.y==null)return null;var l={index:t,dataKey:a,cx:e.x,cy:e.y,r:4,fill:i??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},c=bR(bR(bR({},l),fM(r)),y3(r)),f;return H.isValidElement(r)?f=H.cloneElement(r,c):typeof r=="function"?f=r(c):f=H.createElement(Qq,c),H.createElement($c,{className:"recharts-active-dot",clipPath:s},f)};function m2(n){var{points:e,mainColor:t,activeDot:i,itemDataKey:r,clipPath:a,zIndex:s=Ys.activeDot}=n,l=sn(ix),c=rTe();if(e==null||c==null)return null;var f=e.find(p=>c.includes(p.payload));return Ms(f)?null:H.createElement(_h,{zIndex:s},H.createElement(lTe,{point:f,childIndex:Number(l),mainColor:t,dataKey:r,activeDot:i,clipPath:a}))}var uTe=n=>{var{chartData:e}=n,t=Ta(),i=Do();return H.useEffect(()=>i?()=>{}:(t(j5(e)),()=>{t(j5(void 0))}),[e,t,i]),null},g2={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},r$=Oo({name:"brush",initialState:g2,reducers:{setBrushSettings(n,e){return e.payload==null?g2:e.payload}}}),{setBrushSettings:EPe}=r$.actions,cTe=r$.reducer;function fTe(n){return(n%180+180)%180}var hTe=function(e){var{width:t,height:i}=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=fTe(r),s=a*Math.PI/180,l=Math.atan(i/t),c=s>l&&s<Math.PI-l?i/Math.sin(s):t/Math.cos(s);return Math.abs(c)},dTe={dots:[],areas:[],lines:[]},a$=Oo({name:"referenceElements",initialState:dTe,reducers:{addDot:(n,e)=>{n.dots.push(e.payload)},removeDot:(n,e)=>{var t=Ou(n).dots.findIndex(i=>i===e.payload);t!==-1&&n.dots.splice(t,1)},addArea:(n,e)=>{n.areas.push(e.payload)},removeArea:(n,e)=>{var t=Ou(n).areas.findIndex(i=>i===e.payload);t!==-1&&n.areas.splice(t,1)},addLine:(n,e)=>{n.lines.push(e.payload)},removeLine:(n,e)=>{var t=Ou(n).lines.findIndex(i=>i===e.payload);t!==-1&&n.lines.splice(t,1)}}}),{addDot:TPe,removeDot:APe,addArea:MPe,removeArea:CPe,addLine:IPe,removeLine:PPe}=a$.actions,pTe=a$.reducer,mTe=H.createContext(void 0),gTe=n=>{var{children:e}=n,[t]=H.useState("".concat(Gb("recharts"),"-clip")),i=OL();if(i==null)return null;var{x:r,y:a,width:s,height:l}=i;return H.createElement(mTe.Provider,{value:t},H.createElement("defs",null,H.createElement("clipPath",{id:t},H.createElement("rect",{x:r,y:a,height:l,width:s}))),e)};function s$(n,e){if(e<1)return[];if(e===1)return n;for(var t=[],i=0;i<n.length;i+=e){var r=n[i];r!==void 0&&t.push(r)}return t}function vTe(n,e,t){var i={width:n.width+e.width,height:n.height+e.height};return hTe(i,t)}function yTe(n,e,t){var i=t==="width",{x:r,y:a,width:s,height:l}=n;return e===1?{start:i?r:a,end:i?r+s:a+l}:{start:i?r+s:a+l,end:i?r:a}}function ax(n,e,t,i,r){if(n*e<n*i||n*e>n*r)return!1;var a=t();return n*(e-n*a/2-i)>=0&&n*(e+n*a/2-r)<=0}function _Te(n,e){return s$(n,e+1)}function bTe(n,e,t,i,r){for(var a=(i||[]).slice(),{start:s,end:l}=e,c=0,f=1,p=s,g=function(){var x=i==null?void 0:i[c];if(x===void 0)return{v:s$(i,f)};var T=c,S,w=()=>(S===void 0&&(S=t(x,T)),S),I=x.coordinate,R=c===0||ax(n,I,w,p,l);R||(c=0,p=s,f+=1),R&&(p=I+n*(w()/2+r),c+=f)},v;f<=a.length;)if(v=g(),v)return v.v;return[]}function xTe(n,e,t,i,r){var a=(i||[]).slice(),s=a.length;if(s===0)return[];for(var{start:l,end:c}=e,f=1;f<=s;f++){for(var p=(s-1)%f,g=l,v=!0,_=function(){var O=i[T];if(O==null)return 0;var F=T,B,L=()=>(B===void 0&&(B=t(O,F)),B),z=O.coordinate,P=T===p||ax(n,z,L,g,c);if(!P)return v=!1,1;P&&(g=z+n*(L()/2+r))},x,T=p;T<s&&(x=_(),!(x!==0&&x===1));T+=f);if(v){for(var S=[],w=p;w<s;w+=f){var I=i[w];I!=null&&S.push(I)}return S}}return[]}function v2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function bs(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?v2(Object(t),!0).forEach(function(i){STe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):v2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function STe(n,e,t){return(e=wTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wTe(n){var e=ETe(n,"string");return typeof e=="symbol"?e:e+""}function ETe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function TTe(n,e,t,i,r){for(var a=(i||[]).slice(),s=a.length,{start:l}=e,{end:c}=e,f=function(v){var _=a[v];if(_==null)return 1;var x=_,T,S=()=>(T===void 0&&(T=t(_,v)),T);if(v===s-1){var w=n*(x.coordinate+n*S()/2-c);a[v]=x=bs(bs({},x),{},{tickCoord:w>0?x.coordinate-w*n:x.coordinate})}else a[v]=x=bs(bs({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var I=ax(n,x.tickCoord,S,l,c);I&&(c=x.tickCoord-n*(S()/2+r),a[v]=bs(bs({},x),{},{isShow:!0}))}},p=s-1;p>=0;p--)f(p);return a}function ATe(n,e,t,i,r,a){var s=(i||[]).slice(),l=s.length,{start:c,end:f}=e;if(a){var p=i[l-1];if(p!=null){var g=t(p,l-1),v=n*(p.coordinate+n*g/2-f);if(s[l-1]=p=bs(bs({},p),{},{tickCoord:v>0?p.coordinate-v*n:p.coordinate}),p.tickCoord!=null){var _=ax(n,p.tickCoord,()=>g,c,f);_&&(f=p.tickCoord-n*(g/2+r),s[l-1]=bs(bs({},p),{},{isShow:!0}))}}}for(var x=a?l-1:l,T=function(I){var R=s[I];if(R==null)return 1;var O=R,F,B=()=>(F===void 0&&(F=t(R,I)),F);if(I===0){var L=n*(O.coordinate-n*B()/2-c);s[I]=O=bs(bs({},O),{},{tickCoord:L<0?O.coordinate-L*n:O.coordinate})}else s[I]=O=bs(bs({},O),{},{tickCoord:O.coordinate});if(O.tickCoord!=null){var z=ax(n,O.tickCoord,B,c,f);z&&(c=O.tickCoord+n*(B()/2+r),s[I]=bs(bs({},O),{},{isShow:!0}))}},S=0;S<x;S++)T(S);return s}function DL(n,e,t){var{tick:i,ticks:r,viewBox:a,minTickGap:s,orientation:l,interval:c,tickFormatter:f,unit:p,angle:g}=n;if(!r||!r.length||!i)return[];if(qt(c)||Ox.isSsr){var v;return(v=_Te(r,qt(c)?c:0))!==null&&v!==void 0?v:[]}var _=[],x=l==="top"||l==="bottom"?"width":"height",T=p&&x==="width"?pb(p,{fontSize:e,letterSpacing:t}):{width:0,height:0},S=(F,B)=>{var L=typeof f=="function"?f(F.value,B):F.value;return x==="width"?vTe(pb(L,{fontSize:e,letterSpacing:t}),T,g):pb(L,{fontSize:e,letterSpacing:t})[x]},w=r[0],I=r[1],R=r.length>=2&&w!=null&&I!=null?Fl(I.coordinate-w.coordinate):1,O=yTe(a,R,x);return c==="equidistantPreserveStart"?bTe(R,O,S,r,s):c==="equidistantPreserveEnd"?xTe(R,O,S,r,s):(c==="preserveStart"||c==="preserveStartEnd"?_=ATe(R,O,S,r,s,c==="preserveStartEnd"):_=TTe(R,O,S,r,s),_.filter(F=>F.isShow))}var MTe=n=>{var{ticks:e,label:t,labelGapWithTick:i=5,tickSize:r=0,tickMargin:a=0}=n,s=0;if(e){Array.from(e).forEach(p=>{if(p){var g=p.getBoundingClientRect();g.width>s&&(s=g.width)}});var l=t?t.getBoundingClientRect().width:0,c=r+a,f=s+c+l+(t?i:0);return Math.round(f)}return 0},CTe=["axisLine","width","height","className","hide","ticks","axisType"];function ITe(n,e){if(n==null)return{};var t,i,r=PTe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function PTe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function tg(){return tg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},tg.apply(null,arguments)}function y2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function wr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?y2(Object(t),!0).forEach(function(i){RTe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):y2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function RTe(n,e,t){return(e=NTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NTe(n){var e=OTe(n,"string");return typeof e=="symbol"?e:e+""}function OTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Jf={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ys.axis};function DTe(n){var{x:e,y:t,width:i,height:r,orientation:a,mirror:s,axisLine:l,otherSvgProps:c}=n;if(!l)return null;var f=wr(wr(wr({},c),Du(l)),{},{fill:"none"});if(a==="top"||a==="bottom"){var p=+(a==="top"&&!s||a==="bottom"&&s);f=wr(wr({},f),{},{x1:e,y1:t+p*r,x2:e+i,y2:t+p*r})}else{var g=+(a==="left"&&!s||a==="right"&&s);f=wr(wr({},f),{},{x1:e+g*i,y1:t,x2:e+g*i,y2:t+r})}return H.createElement("line",tg({},f,{className:Zi("recharts-cartesian-axis-line",pM(l,"className"))}))}function LTe(n,e,t,i,r,a,s,l,c){var f,p,g,v,_,x,T=l?-1:1,S=n.tickSize||s,w=qt(n.tickCoord)?n.tickCoord:n.coordinate;switch(a){case"top":f=p=n.coordinate,v=t+ +!l*r,g=v-T*S,x=g-T*c,_=w;break;case"left":g=v=n.coordinate,p=e+ +!l*i,f=p-T*S,_=f-T*c,x=w;break;case"right":g=v=n.coordinate,p=e+ +l*i,f=p+T*S,_=f+T*c,x=w;break;default:f=p=n.coordinate,v=t+ +l*r,g=v+T*S,x=g+T*c,_=w;break}return{line:{x1:f,y1:g,x2:p,y2:v},tick:{x:_,y:x}}}function kTe(n,e){switch(n){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function UTe(n,e){switch(n){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function zTe(n){var{option:e,tickProps:t,value:i}=n,r,a=Zi(t.className,"recharts-cartesian-axis-tick-value");if(H.isValidElement(e))r=H.cloneElement(e,wr(wr({},t),{},{className:a}));else if(typeof e=="function")r=e(wr(wr({},t),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=Zi(s,bEe(e))),r=H.createElement(RL,tg({},t,{className:s}),i)}return r}var FTe=H.forwardRef((n,e)=>{var{ticks:t=[],tick:i,tickLine:r,stroke:a,tickFormatter:s,unit:l,padding:c,tickTextProps:f,orientation:p,mirror:g,x:v,y:_,width:x,height:T,tickSize:S,tickMargin:w,fontSize:I,letterSpacing:R,getTicksConfig:O,events:F,axisType:B}=n,L=DL(wr(wr({},O),{},{ticks:t}),I,R),z=kTe(p,g),P=UTe(p,g),D=Du(O),j=fM(i),q={};typeof r=="object"&&(q=r);var W=wr(wr({},D),{},{fill:"none"},q),se=L.map(ae=>wr({entry:ae},LTe(ae,v,_,x,T,p,S,g,w))),ue=se.map(ae=>{var{entry:he,line:Te}=ae;return H.createElement($c,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(he.value,"-").concat(he.coordinate,"-").concat(he.tickCoord)},r&&H.createElement("line",tg({},W,Te,{className:Zi("recharts-cartesian-axis-tick-line",pM(r,"className"))})))}),J=se.map((ae,he)=>{var Te,Re,{entry:Q,tick:de}=ae,Me=wr(wr(wr(wr({verticalAnchor:P},D),{},{textAnchor:z,stroke:"none",fill:a},de),{},{index:he,payload:Q,visibleTicksCount:L.length,tickFormatter:s,padding:c},f),{},{angle:(Te=(Re=f==null?void 0:f.angle)!==null&&Re!==void 0?Re:D.angle)!==null&&Te!==void 0?Te:0}),We=wr(wr({},Me),j);return H.createElement($c,tg({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Q.value,"-").concat(Q.coordinate,"-").concat(Q.tickCoord)},Ape(F,Q,he)),i&&H.createElement(zTe,{option:i,tickProps:We,value:"".concat(typeof s=="function"?s(Q.value,he):Q.value).concat(l||"")}))});return H.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(B,"-ticks")},J.length>0&&H.createElement(_h,{zIndex:Ys.label},H.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(B,"-tick-labels"),ref:e},J)),ue.length>0&&H.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(B,"-tick-lines")},ue))}),BTe=H.forwardRef((n,e)=>{var{axisLine:t,width:i,height:r,className:a,hide:s,ticks:l,axisType:c}=n,f=ITe(n,CTe),[p,g]=H.useState(""),[v,_]=H.useState(""),x=H.useRef(null);H.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var S;return MTe({ticks:x.current,label:(S=n.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:n.tickSize,tickMargin:n.tickMargin})}}));var T=H.useCallback(S=>{if(S){var w=S.getElementsByClassName("recharts-cartesian-axis-tick-value");x.current=w;var I=w[0];if(I){var R=window.getComputedStyle(I),O=R.fontSize,F=R.letterSpacing;(O!==p||F!==v)&&(g(O),_(F))}}},[p,v]);return s||i!=null&&i<=0||r!=null&&r<=0?null:H.createElement(_h,{zIndex:n.zIndex},H.createElement($c,{className:Zi("recharts-cartesian-axis",a)},H.createElement(DTe,{x:n.x,y:n.y,width:i,height:r,orientation:n.orientation,mirror:n.mirror,axisLine:t,otherSvgProps:Du(n)}),H.createElement(FTe,{ref:T,axisType:c,events:f,fontSize:p,getTicksConfig:n,height:n.height,letterSpacing:v,mirror:n.mirror,orientation:n.orientation,padding:n.padding,stroke:n.stroke,tick:n.tick,tickFormatter:n.tickFormatter,tickLine:n.tickLine,tickMargin:n.tickMargin,tickSize:n.tickSize,tickTextProps:n.tickTextProps,ticks:l,unit:n.unit,width:n.width,x:n.x,y:n.y}),H.createElement($we,{x:n.x,y:n.y,width:n.width,height:n.height,lowerWidth:n.width,upperWidth:n.width},H.createElement(iEe,{label:n.label,labelRef:n.labelRef}),n.children)))}),LL=H.forwardRef((n,e)=>{var t=al(n,Jf);return H.createElement(BTe,tg({},t,{ref:e}))});LL.displayName="CartesianAxis";var VTe=["x1","y1","x2","y2","key"],jTe=["offset"],HTe=["xAxisId","yAxisId"],GTe=["xAxisId","yAxisId"];function _2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ws(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_2(Object(t),!0).forEach(function(i){WTe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function WTe(n,e,t){return(e=qTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qTe(n){var e=$Te(n,"string");return typeof e=="symbol"?e:e+""}function $Te(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Cm(){return Cm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Cm.apply(null,arguments)}function JT(n,e){if(n==null)return{};var t,i,r=XTe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function XTe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var YTe=n=>{var{fill:e}=n;if(!e||e==="none")return null;var{fillOpacity:t,x:i,y:r,width:a,height:s,ry:l}=n;return H.createElement("rect",{x:i,y:r,ry:l,width:a,height:s,stroke:"none",fill:e,fillOpacity:t,className:"recharts-cartesian-grid-bg"})};function o$(n){var{option:e,lineItemProps:t}=n,i;if(H.isValidElement(e))i=H.cloneElement(e,t);else if(typeof e=="function")i=e(t);else{var r,{x1:a,y1:s,x2:l,y2:c,key:f}=t,p=JT(t,VTe),g=(r=Du(p))!==null&&r!==void 0?r:{},{offset:v}=g,_=JT(g,jTe);i=H.createElement("line",Cm({},_,{x1:a,y1:s,x2:l,y2:c,fill:"none",key:f}))}return i}function KTe(n){var{x:e,width:t,horizontal:i=!0,horizontalPoints:r}=n;if(!i||!r||!r.length)return null;var{xAxisId:a,yAxisId:s}=n,l=JT(n,HTe),c=r.map((f,p)=>{var g=ws(ws({},l),{},{x1:e,y1:f,x2:e+t,y2:f,key:"line-".concat(p),index:p});return H.createElement(o$,{key:"line-".concat(p),option:i,lineItemProps:g})});return H.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function ZTe(n){var{y:e,height:t,vertical:i=!0,verticalPoints:r}=n;if(!i||!r||!r.length)return null;var{xAxisId:a,yAxisId:s}=n,l=JT(n,GTe),c=r.map((f,p)=>{var g=ws(ws({},l),{},{x1:f,y1:e,x2:f,y2:e+t,key:"line-".concat(p),index:p});return H.createElement(o$,{option:i,lineItemProps:g,key:"line-".concat(p)})});return H.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function QTe(n){var{horizontalFill:e,fillOpacity:t,x:i,y:r,width:a,height:s,horizontalPoints:l,horizontal:c=!0}=n;if(!c||!e||!e.length||l==null)return null;var f=l.map(g=>Math.round(g+r-r)).sort((g,v)=>g-v);r!==f[0]&&f.unshift(0);var p=f.map((g,v)=>{var _=f[v+1],x=_==null,T=x?r+s-g:_-g;if(T<=0)return null;var S=v%e.length;return H.createElement("rect",{key:"react-".concat(v),y:g,x:i,height:T,width:a,stroke:"none",fill:e[S],fillOpacity:t,className:"recharts-cartesian-grid-bg"})});return H.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function JTe(n){var{vertical:e=!0,verticalFill:t,fillOpacity:i,x:r,y:a,width:s,height:l,verticalPoints:c}=n;if(!e||!t||!t.length)return null;var f=c.map(g=>Math.round(g+r-r)).sort((g,v)=>g-v);r!==f[0]&&f.unshift(0);var p=f.map((g,v)=>{var _=f[v+1],x=_==null,T=x?r+s-g:_-g;if(T<=0)return null;var S=v%t.length;return H.createElement("rect",{key:"react-".concat(v),x:g,y:a,width:T,height:l,stroke:"none",fill:t[S],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return H.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var eAe=(n,e)=>{var{xAxis:t,width:i,height:r,offset:a}=n;return JG(DL(ws(ws(ws({},Jf),t),{},{ticks:e7(t),viewBox:{x:0,y:0,width:i,height:r}})),a.left,a.left+a.width,e)},tAe=(n,e)=>{var{yAxis:t,width:i,height:r,offset:a}=n;return JG(DL(ws(ws(ws({},Jf),t),{},{ticks:e7(t),viewBox:{x:0,y:0,width:i,height:r}})),a.top,a.top+a.height,e)},nAe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Ys.grid};function l$(n){var e=l7(),t=u7(),i=o7(),r=ws(ws({},al(n,nAe)),{},{x:qt(n.x)?n.x:i.left,y:qt(n.y)?n.y:i.top,width:qt(n.width)?n.width:i.width,height:qt(n.height)?n.height:i.height}),{xAxisId:a,yAxisId:s,x:l,y:c,width:f,height:p,syncWithTicks:g,horizontalValues:v,verticalValues:_}=r,x=Do(),T=sn(P=>P5(P,"xAxis",a,x)),S=sn(P=>P5(P,"yAxis",s,x));if(!Kc(f)||!Kc(p)||!qt(l)||!qt(c))return null;var w=r.verticalCoordinatesGenerator||eAe,I=r.horizontalCoordinatesGenerator||tAe,{horizontalPoints:R,verticalPoints:O}=r;if((!R||!R.length)&&typeof I=="function"){var F=v&&v.length,B=I({yAxis:S?ws(ws({},S),{},{ticks:F?v:S.ticks}):void 0,width:e??f,height:t??p,offset:i},F?!0:g);MT(Array.isArray(B),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof B,"]")),Array.isArray(B)&&(R=B)}if((!O||!O.length)&&typeof w=="function"){var L=_&&_.length,z=w({xAxis:T?ws(ws({},T),{},{ticks:L?_:T.ticks}):void 0,width:e??f,height:t??p,offset:i},L?!0:g);MT(Array.isArray(z),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof z,"]")),Array.isArray(z)&&(O=z)}return H.createElement(_h,{zIndex:r.zIndex},H.createElement("g",{className:"recharts-cartesian-grid"},H.createElement(YTe,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),H.createElement(QTe,Cm({},r,{horizontalPoints:R})),H.createElement(JTe,Cm({},r,{verticalPoints:O})),H.createElement(KTe,Cm({},r,{offset:i,horizontalPoints:R,xAxis:T,yAxis:S})),H.createElement(ZTe,Cm({},r,{offset:i,verticalPoints:O,xAxis:T,yAxis:S}))))}l$.displayName="CartesianGrid";var iAe={},u$=Oo({name:"errorBars",initialState:iAe,reducers:{addErrorBar:(n,e)=>{var{itemId:t,errorBar:i}=e.payload;n[t]||(n[t]=[]),n[t].push(i)},replaceErrorBar:(n,e)=>{var{itemId:t,prev:i,next:r}=e.payload;n[t]&&(n[t]=n[t].map(a=>a.dataKey===i.dataKey&&a.direction===i.direction?r:a))},removeErrorBar:(n,e)=>{var{itemId:t,errorBar:i}=e.payload;n[t]&&(n[t]=n[t].filter(r=>r.dataKey!==i.dataKey||r.direction!==i.direction))}}}),{addErrorBar:RPe,replaceErrorBar:NPe,removeErrorBar:OPe}=u$.actions,rAe=u$.reducer;function c$(n,e){var t,i,r=sn(f=>gh(f,n)),a=sn(f=>vh(f,e)),s=(t=r==null?void 0:r.allowDataOverflow)!==null&&t!==void 0?t:ba.allowDataOverflow,l=(i=a==null?void 0:a.allowDataOverflow)!==null&&i!==void 0?i:xa.allowDataOverflow,c=s||l;return{needClip:c,needClipX:s,needClipY:l}}function aAe(n){var{xAxisId:e,yAxisId:t,clipPathId:i}=n,r=OL(),{needClipX:a,needClipY:s,needClip:l}=c$(e,t);if(!l||!r)return null;var{x:c,y:f,width:p,height:g}=r;return H.createElement("clipPath",{id:"clipPath-".concat(i)},H.createElement("rect",{x:a?c:c-p/2,y:s?f:f-g/2,width:a?p:p*2,height:s?g:g*2}))}function sAe(n){var e=fM(n),t=3,i=2;if(e!=null){var{r,strokeWidth:a}=e,s=Number(r),l=Number(a);return(Number.isNaN(s)||s<0)&&(s=t),(Number.isNaN(l)||l<0)&&(l=i),{r:s,strokeWidth:l}}return{r:t,strokeWidth:i}}var xR={exports:{}},SR={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b2;function oAe(){if(b2)return SR;b2=1;var n=Ny();function e(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var t=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,r=n.useRef,a=n.useEffect,s=n.useMemo,l=n.useDebugValue;return SR.useSyncExternalStoreWithSelector=function(c,f,p,g,v){var _=r(null);if(_.current===null){var x={hasValue:!1,value:null};_.current=x}else x=_.current;_=s(function(){function S(F){if(!w){if(w=!0,I=F,F=g(F),v!==void 0&&x.hasValue){var B=x.value;if(v(B,F))return R=B}return R=F}if(B=R,t(I,F))return B;var L=g(F);return v!==void 0&&v(B,L)?(I=F,B):(I=F,R=L)}var w=!1,I,R,O=p===void 0?null:p;return[function(){return S(f())},O===null?void 0:function(){return S(O())}]},[f,p,g,v]);var T=i(c,_[0],_[1]);return a(function(){x.hasValue=!0,x.value=T},[T]),l(T),T},SR}var x2;function lAe(){return x2||(x2=1,xR.exports=oAe()),xR.exports}lAe();function uAe(n){n()}function cAe(){let n=null,e=null;return{clear(){n=null,e=null},notify(){uAe(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const r=e={callback:t,next:null,prev:e};return r.prev?r.prev.next=r:n=r,function(){!i||n===null||(i=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:n=r.next)}}}}var S2={notify(){},get:()=>[]};function fAe(n,e){let t,i=S2,r=0,a=!1;function s(T){p();const S=i.subscribe(T);let w=!1;return()=>{w||(w=!0,S(),g())}}function l(){i.notify()}function c(){x.onStateChange&&x.onStateChange()}function f(){return a}function p(){r++,t||(t=n.subscribe(c),i=cAe())}function g(){r--,t&&r===0&&(t(),t=void 0,i.clear(),i=S2)}function v(){a||(a=!0,p())}function _(){a&&(a=!1,g())}const x={addNestedSub:s,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:f,trySubscribe:v,tryUnsubscribe:_,getListeners:()=>i};return x}var hAe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dAe=hAe(),pAe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",mAe=pAe(),gAe=()=>dAe||mAe?H.useLayoutEffect:H.useEffect,vAe=gAe();function w2(n,e){return n===e?n!==0||e!==0||1/n===1/e:n!==n&&e!==e}function yAe(n,e){if(w2(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!w2(n[t[r]],e[t[r]]))return!1;return!0}var wR=Symbol.for("react-redux-context"),ER=typeof globalThis<"u"?globalThis:{};function _Ae(){if(!H.createContext)return{};const n=ER[wR]??(ER[wR]=new Map);let e=n.get(H.createContext);return e||(e=H.createContext(null),n.set(H.createContext,e)),e}var bAe=_Ae();function xAe(n){const{children:e,context:t,serverState:i,store:r}=n,a=H.useMemo(()=>{const c=fAe(r);return{store:r,subscription:c,getServerState:i?()=>i:void 0}},[r,i]),s=H.useMemo(()=>r.getState(),[r]);vAe(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const l=t||bAe;return H.createElement(l.Provider,{value:a},e)}var SAe=xAe,wAe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function EAe(n,e){return n==null&&e==null?!0:typeof n=="number"&&typeof e=="number"?n===e||n!==n&&e!==e:n===e}function kL(n,e){var t=new Set([...Object.keys(n),...Object.keys(e)]);for(var i of t)if(wAe.has(i)){if(n[i]==null&&e[i]==null)continue;if(!yAe(n[i],e[i]))return!1}else if(!EAe(n[i],e[i]))return!1;return!0}function UL(n,e){var t,i;return(t=(i=n.graphicalItems.cartesianItems.find(r=>r.id===e))===null||i===void 0?void 0:i.xAxisId)!==null&&t!==void 0?t:n$}function zL(n,e){var t,i;return(t=(i=n.graphicalItems.cartesianItems.find(r=>r.id===e))===null||i===void 0?void 0:i.yAxisId)!==null&&t!==void 0?t:n$}var f$=(n,e,t)=>cq(n,"xAxis",UL(n,e),t),h$=(n,e,t)=>uq(n,"xAxis",UL(n,e),t),d$=(n,e,t)=>cq(n,"yAxis",zL(n,e),t),p$=(n,e,t)=>uq(n,"yAxis",zL(n,e),t),TAe=Ge([sr,f$,d$,h$,p$],(n,e,t,i,r)=>ef(n,"xAxis")?AT(e,i,!1):AT(t,r,!1)),AAe=(n,e)=>e,m$=Ge([RW,AAe],(n,e)=>n.filter(t=>t.type==="area").find(t=>t.id===e)),g$=n=>{var e=sr(n),t=ef(e,"xAxis");return t?"yAxis":"xAxis"},MAe=(n,e)=>{var t=g$(n);return t==="yAxis"?zL(n,e):UL(n,e)},CAe=(n,e,t)=>BW(n,g$(n),MAe(n,e),t),IAe=Ge([m$,CAe],(n,e)=>{var t;if(!(n==null||e==null)){var{stackId:i}=n,r=cL(n);if(!(i==null||r==null)){var a=(t=e[i])===null||t===void 0?void 0:t.stackedData,s=a==null?void 0:a.find(l=>l.key===r);if(s!=null)return s.map(l=>[l[0],l[1]])}}}),PAe=Ge([sr,f$,d$,h$,p$,IAe,Ibe,TAe,m$,zbe],(n,e,t,i,r,a,s,l,c,f)=>{var{chartData:p,dataStartIndex:g,dataEndIndex:v}=s;if(!(c==null||n!=="horizontal"&&n!=="vertical"||e==null||t==null||i==null||r==null||i.length===0||r.length===0||l==null)){var{data:_}=c,x;if(_&&_.length>0?x=_:x=p==null?void 0:p.slice(g,v+1),x!=null)return YAe({layout:n,xAxis:e,yAxis:t,xAxisTicks:i,yAxisTicks:r,dataStartIndex:g,areaSettings:c,stackedData:a,displayedData:x,chartBaseValue:f,bandSize:l})}}),RAe=["id"],NAe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function zm(){return zm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},zm.apply(null,arguments)}function v$(n,e){if(n==null)return{};var t,i,r=OAe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function OAe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function E2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Yv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?E2(Object(t),!0).forEach(function(i){DAe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):E2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function DAe(n,e,t){return(e=LAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function LAe(n){var e=kAe(n,"string");return typeof e=="symbol"?e:e+""}function kAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function eA(n,e){return n&&n!=="none"?n:e}var UAe=n=>{var{dataKey:e,name:t,stroke:i,fill:r,legendType:a,hide:s}=n;return[{inactive:s,dataKey:e,type:a,color:eA(i,r),value:t7(t,e),payload:n}]},zAe=H.memo(n=>{var{dataKey:e,data:t,stroke:i,strokeWidth:r,fill:a,name:s,hide:l,unit:c,tooltipType:f,id:p}=n,g={dataDefinedOnItem:t,getPosition:qy,settings:{stroke:i,strokeWidth:r,fill:a,dataKey:e,nameKey:void 0,name:t7(s,e),hide:l,type:f,color:eA(i,a),unit:c,graphicalItemId:p}};return H.createElement(xEe,{tooltipEntrySettings:g})});function FAe(n){var{clipPathId:e,points:t,props:i}=n,{needClip:r,dot:a,dataKey:s}=i,l=Du(i);return H.createElement(HEe,{points:t,dot:a,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:s,baseProps:l,needClip:r,clipPathId:e})}function BAe(n){var{showLabels:e,children:t,points:i}=n,r=i.map(a=>{var s,l,c={x:(s=a.x)!==null&&s!==void 0?s:0,y:(l=a.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Yv(Yv({},c),{},{value:a.value,payload:a.payload,parentViewBox:void 0,viewBox:c,fill:void 0})});return H.createElement(pEe,{value:e?r:void 0},t)}function T2(n){var{points:e,baseLine:t,needClip:i,clipPathId:r,props:a}=n,{layout:s,type:l,stroke:c,connectNulls:f,isRange:p}=a,{id:g}=a,v=v$(a,RAe),_=Du(v),x=Gl(v);return H.createElement(H.Fragment,null,(e==null?void 0:e.length)>1&&H.createElement($c,{clipPath:i?"url(#clipPath-".concat(r,")"):void 0},H.createElement(Gw,zm({},x,{id:g,points:e,connectNulls:f,type:l,baseLine:t,layout:s,stroke:"none",className:"recharts-area-area"})),c!=="none"&&H.createElement(Gw,zm({},_,{className:"recharts-area-curve",layout:s,type:l,connectNulls:f,fill:"none",points:e})),c!=="none"&&p&&H.createElement(Gw,zm({},_,{className:"recharts-area-curve",layout:s,type:l,connectNulls:f,fill:"none",points:t}))),H.createElement(FAe,{points:e,props:v,clipPathId:r}))}function VAe(n){var e,t,{alpha:i,baseLine:r,points:a,strokeWidth:s}=n,l=(e=a[0])===null||e===void 0?void 0:e.y,c=(t=a[a.length-1])===null||t===void 0?void 0:t.y;if(!Kn(l)||!Kn(c))return null;var f=i*Math.abs(l-c),p=Math.max(...a.map(g=>g.x||0));return qt(r)?p=Math.max(r,p):r&&Array.isArray(r)&&r.length&&(p=Math.max(...r.map(g=>g.x||0),p)),qt(p)?H.createElement("rect",{x:0,y:l<c?l:l-f,width:p+(s?parseInt("".concat(s),10):1),height:Math.floor(f)}):null}function jAe(n){var e,t,{alpha:i,baseLine:r,points:a,strokeWidth:s}=n,l=(e=a[0])===null||e===void 0?void 0:e.x,c=(t=a[a.length-1])===null||t===void 0?void 0:t.x;if(!Kn(l)||!Kn(c))return null;var f=i*Math.abs(l-c),p=Math.max(...a.map(g=>g.y||0));return qt(r)?p=Math.max(r,p):r&&Array.isArray(r)&&r.length&&(p=Math.max(...r.map(g=>g.y||0),p)),qt(p)?H.createElement("rect",{x:l<c?l:l-f,y:0,width:f,height:Math.floor(p+(s?parseInt("".concat(s),10):1))}):null}function HAe(n){var{alpha:e,layout:t,points:i,baseLine:r,strokeWidth:a}=n;return t==="vertical"?H.createElement(VAe,{alpha:e,points:i,baseLine:r,strokeWidth:a}):H.createElement(jAe,{alpha:e,points:i,baseLine:r,strokeWidth:a})}function GAe(n){var{needClip:e,clipPathId:t,props:i,previousPointsRef:r,previousBaselineRef:a}=n,{points:s,baseLine:l,isAnimationActive:c,animationBegin:f,animationDuration:p,animationEasing:g,onAnimationStart:v,onAnimationEnd:_}=i,x=H.useMemo(()=>({points:s,baseLine:l}),[s,l]),T=w7(x,"recharts-area-"),S=P3(),[w,I]=H.useState(!1),R=!w,O=H.useCallback(()=>{typeof _=="function"&&_(),I(!1)},[_]),F=H.useCallback(()=>{typeof v=="function"&&v(),I(!0)},[v]);if(S==null)return null;var B=r.current,L=a.current;return H.createElement(BAe,{showLabels:R,points:s},i.children,H.createElement(S7,{animationId:T,begin:f,duration:p,isActive:c,easing:g,onAnimationEnd:O,onAnimationStart:F,key:T},z=>{if(B){var P=B.length/s.length,D=z===1?s:s.map((q,W)=>{var se=Math.floor(W*P);if(B[se]){var ue=B[se];return Yv(Yv({},q),{},{x:Tc(ue.x,q.x,z),y:Tc(ue.y,q.y,z)})}return q}),j;return qt(l)?j=Tc(L,l,z):Ms(l)||Xc(l)?j=Tc(L,0,z):j=l.map((q,W)=>{var se=Math.floor(W*P);if(Array.isArray(L)&&L[se]){var ue=L[se];return Yv(Yv({},q),{},{x:Tc(ue.x,q.x,z),y:Tc(ue.y,q.y,z)})}return q}),z>0&&(r.current=D,a.current=j),H.createElement(T2,{points:D,baseLine:j,needClip:e,clipPathId:t,props:i})}return z>0&&(r.current=s,a.current=l),H.createElement($c,null,c&&H.createElement("defs",null,H.createElement("clipPath",{id:"animationClipPath-".concat(t)},H.createElement(HAe,{alpha:z,points:s,baseLine:l,layout:S,strokeWidth:i.strokeWidth}))),H.createElement($c,{clipPath:"url(#animationClipPath-".concat(t,")")},H.createElement(T2,{points:s,baseLine:l,needClip:e,clipPathId:t,props:i})))}),H.createElement(vEe,{label:i.label}))}function WAe(n){var{needClip:e,clipPathId:t,props:i}=n,r=H.useRef(null),a=H.useRef();return H.createElement(GAe,{needClip:e,clipPathId:t,props:i,previousPointsRef:r,previousBaselineRef:a})}class qAe extends H.PureComponent{render(){var{hide:e,dot:t,points:i,className:r,top:a,left:s,needClip:l,xAxisId:c,yAxisId:f,width:p,height:g,id:v,baseLine:_,zIndex:x}=this.props;if(e)return null;var T=Zi("recharts-area",r),S=v,{r:w,strokeWidth:I}=sAe(t),R=e$(t),O=w*2+I,F=l?"url(#clipPath-".concat(R?"":"dots-").concat(S,")"):void 0;return H.createElement(_h,{zIndex:x},H.createElement($c,{className:T},l&&H.createElement("defs",null,H.createElement(aAe,{clipPathId:S,xAxisId:c,yAxisId:f}),!R&&H.createElement("clipPath",{id:"clipPath-dots-".concat(S)},H.createElement("rect",{x:s-O/2,y:a-O/2,width:p+O,height:g+O}))),H.createElement(WAe,{needClip:l,clipPathId:S,props:this.props})),H.createElement(m2,{points:i,mainColor:eA(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:F}),this.props.isRange&&Array.isArray(_)&&H.createElement(m2,{points:_,mainColor:eA(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:F}))}}var y$={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Ys.area};function $Ae(n){var e,t=al(n,y$),{activeDot:i,animationBegin:r,animationDuration:a,animationEasing:s,connectNulls:l,dot:c,fill:f,fillOpacity:p,hide:g,isAnimationActive:v,legendType:_,stroke:x,xAxisId:T,yAxisId:S}=t,w=v$(t,NAe),I=$y(),R=Nq(),{needClip:O}=c$(T,S),F=Do(),{points:B,isRange:L,baseLine:z}=(e=sn(se=>PAe(se,n.id,F)))!==null&&e!==void 0?e:{},P=OL();if(I!=="horizontal"&&I!=="vertical"||P==null||R!=="AreaChart"&&R!=="ComposedChart")return null;var{height:D,width:j,x:q,y:W}=P;return!B||!B.length?null:H.createElement(qAe,zm({},w,{activeDot:i,animationBegin:r,animationDuration:a,animationEasing:s,baseLine:z,connectNulls:l,dot:c,fill:f,fillOpacity:p,height:D,hide:g,layout:I,isAnimationActive:v==="auto"?!Ox.isSsr:v,isRange:L,legendType:_,needClip:O,points:B,stroke:x,width:j,left:q,top:W,xAxisId:T,yAxisId:S}))}var XAe=(n,e,t,i,r)=>{var a=t??e;if(qt(a))return a;var s=n==="horizontal"?r:i,l=s.scale.domain();if(s.type==="number"){var c=Math.max(l[0],l[1]),f=Math.min(l[0],l[1]);return a==="dataMin"?f:a==="dataMax"||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return a==="dataMin"?l[0]:a==="dataMax"?l[1]:l[0]};function YAe(n){var{areaSettings:{connectNulls:e,baseValue:t,dataKey:i},stackedData:r,layout:a,chartBaseValue:s,xAxis:l,yAxis:c,displayedData:f,dataStartIndex:p,xAxisTicks:g,yAxisTicks:v,bandSize:_}=n,x=r&&r.length,T=XAe(a,s,t,l,c),S=a==="horizontal",w=!1,I=f.map((O,F)=>{var B,L,z,P;if(x)P=r[p+F];else{var D=Qa(O,i);Array.isArray(D)?(P=D,w=!0):P=[T,D]}var j=(B=(L=P)===null||L===void 0?void 0:L[1])!==null&&B!==void 0?B:null,q=j==null||x&&!e&&Qa(O,i)==null;if(S){var W;return{x:RB({axis:l,ticks:g,bandSize:_,entry:O,index:F}),y:q?null:(W=c.scale.map(j))!==null&&W!==void 0?W:null,value:P,payload:O}}return{x:q?null:(z=l.scale.map(j))!==null&&z!==void 0?z:null,y:RB({axis:c,ticks:v,bandSize:_,entry:O,index:F}),value:P,payload:O}}),R;return x||w?R=I.map(O=>{var F,B=Array.isArray(O.value)?O.value[0]:null;if(S){var L;return{x:O.x,y:B!=null&&O.y!=null&&(L=c.scale.map(B))!==null&&L!==void 0?L:null,payload:O.payload}}return{x:B!=null&&(F=l.scale.map(B))!==null&&F!==void 0?F:null,y:O.y,payload:O.payload}}):R=S?c.scale.map(T):l.scale.map(T),{points:I,baseLine:R??0,isRange:w}}function KAe(n){var e=al(n,y$),t=Do();return H.createElement(MEe,{id:e.id,type:"area"},i=>H.createElement(H.Fragment,null,H.createElement(SEe,{legendPayload:UAe(e)}),H.createElement(zAe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),H.createElement(DEe,{type:"area",id:i,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:Ige(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:t,connectNulls:e.connectNulls}),H.createElement($Ae,zm({},e,{id:i}))))}var _$=H.memo(KAe,kL);_$.displayName="Area";var ZAe=["domain","range"],QAe=["domain","range"];function A2(n,e){if(n==null)return{};var t,i,r=JAe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function JAe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function M2(n,e){return n===e?!0:Array.isArray(n)&&n.length===2&&Array.isArray(e)&&e.length===2?n[0]===e[0]&&n[1]===e[1]:!1}function b$(n,e){if(n===e)return!0;var{domain:t,range:i}=n,r=A2(n,ZAe),{domain:a,range:s}=e,l=A2(e,QAe);return!M2(t,a)||!M2(i,s)?!1:kL(r,l)}var eMe=["type"],tMe=["dangerouslySetInnerHTML","ticks","scale"],nMe=["id","scale"];function pO(){return pO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},pO.apply(null,arguments)}function C2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function I2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?C2(Object(t),!0).forEach(function(i){iMe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):C2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function iMe(n,e,t){return(e=rMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rMe(n){var e=aMe(n,"string");return typeof e=="symbol"?e:e+""}function aMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function mO(n,e){if(n==null)return{};var t,i,r=sMe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function sMe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function oMe(n){var e=Ta(),t=H.useRef(null),i=P3(),{type:r}=n,a=mO(n,eMe),s=VM(i,"xAxis",r),l=H.useMemo(()=>{if(s!=null)return I2(I2({},a),{},{type:s})},[a,s]);return H.useLayoutEffect(()=>{l!=null&&(t.current===null?e(XEe(l)):t.current!==l&&e(YEe({prev:t.current,next:l})),t.current=l)},[l,e]),H.useLayoutEffect(()=>()=>{t.current&&(e(KEe(t.current)),t.current=null)},[e]),null}var lMe=n=>{var{xAxisId:e,className:t}=n,i=sn(i7),r=Do(),a="xAxis",s=sn(w=>lq(w,a,e,r)),l=sn(w=>Dxe(w,e)),c=sn(w=>Bxe(w,e)),f=sn(w=>MW(w,e));if(l==null||c==null||f==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:v}=n,_=mO(n,tMe),{id:x,scale:T}=f,S=mO(f,nMe);return H.createElement(LL,pO({},_,S,{x:c.x,y:c.y,width:l.width,height:l.height,className:Zi("recharts-".concat(a," ").concat(a),t),viewBox:i,ticks:s,axisType:a}))},uMe={allowDataOverflow:ba.allowDataOverflow,allowDecimals:ba.allowDecimals,allowDuplicatedCategory:ba.allowDuplicatedCategory,angle:ba.angle,axisLine:Jf.axisLine,height:ba.height,hide:!1,includeHidden:ba.includeHidden,interval:ba.interval,label:!1,minTickGap:ba.minTickGap,mirror:ba.mirror,orientation:ba.orientation,padding:ba.padding,reversed:ba.reversed,scale:ba.scale,tick:ba.tick,tickCount:ba.tickCount,tickLine:Jf.tickLine,tickSize:Jf.tickSize,type:ba.type,xAxisId:0},cMe=n=>{var e=al(n,uMe);return H.createElement(H.Fragment,null,H.createElement(oMe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),H.createElement(lMe,e))},x$=H.memo(cMe,b$);x$.displayName="XAxis";var fMe=["type"],hMe=["dangerouslySetInnerHTML","ticks","scale"],dMe=["id","scale"];function gO(){return gO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},gO.apply(null,arguments)}function P2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function R2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?P2(Object(t),!0).forEach(function(i){pMe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):P2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function pMe(n,e,t){return(e=mMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mMe(n){var e=gMe(n,"string");return typeof e=="symbol"?e:e+""}function gMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function vO(n,e){if(n==null)return{};var t,i,r=vMe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function vMe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function yMe(n){var e=Ta(),t=H.useRef(null),i=P3(),{type:r}=n,a=vO(n,fMe),s=VM(i,"yAxis",r),l=H.useMemo(()=>{if(s!=null)return R2(R2({},a),{},{type:s})},[s,a]);return H.useLayoutEffect(()=>{l!=null&&(t.current===null?e(ZEe(l)):t.current!==l&&e(QEe({prev:t.current,next:l})),t.current=l)},[l,e]),H.useLayoutEffect(()=>()=>{t.current&&(e(JEe(t.current)),t.current=null)},[e]),null}function _Me(n){var{yAxisId:e,className:t,width:i,label:r}=n,a=H.useRef(null),s=H.useRef(null),l=sn(i7),c=Do(),f=Ta(),p="yAxis",g=sn(B=>Hxe(B,e)),v=sn(B=>jxe(B,e)),_=sn(B=>lq(B,p,e,c)),x=sn(B=>CW(B,e));if(H.useLayoutEffect(()=>{if(!(i!=="auto"||!g||NL(r)||H.isValidElement(r)||x==null)){var B=a.current;if(B){var L=B.getCalculatedWidth();Math.round(g.width)!==Math.round(L)&&f(eTe({id:e,width:L}))}}},[_,g,f,r,e,i,x]),g==null||v==null||x==null)return null;var{dangerouslySetInnerHTML:T,ticks:S,scale:w}=n,I=vO(n,hMe),{id:R,scale:O}=x,F=vO(x,dMe);return H.createElement(LL,gO({},I,F,{ref:a,labelRef:s,x:v.x,y:v.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:g.width,height:g.height,className:Zi("recharts-".concat(p," ").concat(p),t),viewBox:l,ticks:_,axisType:p}))}var bMe={allowDataOverflow:xa.allowDataOverflow,allowDecimals:xa.allowDecimals,allowDuplicatedCategory:xa.allowDuplicatedCategory,angle:xa.angle,axisLine:Jf.axisLine,hide:!1,includeHidden:xa.includeHidden,interval:xa.interval,label:!1,minTickGap:xa.minTickGap,mirror:xa.mirror,orientation:xa.orientation,padding:xa.padding,reversed:xa.reversed,scale:xa.scale,tick:xa.tick,tickCount:xa.tickCount,tickLine:Jf.tickLine,tickSize:Jf.tickSize,type:xa.type,width:xa.width,yAxisId:0},xMe=n=>{var e=al(n,bMe);return H.createElement(H.Fragment,null,H.createElement(yMe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),H.createElement(_Me,e))},S$=H.memo(xMe,b$);S$.displayName="YAxis";var SMe=(n,e)=>e,FL=Ge([SMe,sr,TW,Ca,Aq,yh,i1e,ts],c1e),BL=n=>{var e=n.currentTarget.getBoundingClientRect(),t=e.width/n.currentTarget.offsetWidth,i=e.height/n.currentTarget.offsetHeight;return{chartX:Math.round((n.clientX-e.left)/t),chartY:Math.round((n.clientY-e.top)/i)}},w$=Wl("mouseClick"),E$=Ix();E$.startListening({actionCreator:w$,effect:(n,e)=>{var t=n.payload,i=FL(e.getState(),BL(t));(i==null?void 0:i.activeIndex)!=null&&e.dispatch(nSe({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var yO=Wl("mouseMove"),T$=Ix(),Tw=null;T$.startListening({actionCreator:yO,effect:(n,e)=>{var t=n.payload;Tw!==null&&cancelAnimationFrame(Tw);var i=BL(t);Tw=requestAnimationFrame(()=>{var r=e.getState(),a=xL(r,r.tooltip.settings.shared);if(a==="axis"){var s=FL(r,i);(s==null?void 0:s.activeIndex)!=null?e.dispatch(vq({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(gq())}Tw=null})}});function wMe(n,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":n==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var N2={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},A$=Oo({name:"rootProps",initialState:N2,reducers:{updateOptions:(n,e)=>{var t;n.accessibilityLayer=e.payload.accessibilityLayer,n.barCategoryGap=e.payload.barCategoryGap,n.barGap=(t=e.payload.barGap)!==null&&t!==void 0?t:N2.barGap,n.barSize=e.payload.barSize,n.maxBarSize=e.payload.maxBarSize,n.stackOffset=e.payload.stackOffset,n.syncId=e.payload.syncId,n.syncMethod=e.payload.syncMethod,n.className=e.payload.className,n.baseValue=e.payload.baseValue,n.reverseStackOrder=e.payload.reverseStackOrder}}}),EMe=A$.reducer,{updateOptions:TMe}=A$.actions,AMe=null,MMe={updatePolarOptions:(n,e)=>e.payload},M$=Oo({name:"polarOptions",initialState:AMe,reducers:MMe}),{updatePolarOptions:DPe}=M$.actions,CMe=M$.reducer,C$=Wl("keyDown"),I$=Wl("focus"),VL=Ix();VL.startListening({actionCreator:C$,effect:(n,e)=>{var t=e.getState(),i=t.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=t.tooltip,a=n.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=SL(r,n0(t),Bx(t),jx(t)),l=s==null?-1:Number(s);if(!(!Number.isFinite(l)||l<0)){var c=yh(t);if(a==="Enter"){var f=KT(t,"axis","hover",String(r.index));e.dispatch(uO({active:!r.active,activeIndex:r.index,activeCoordinate:f}));return}var p=$xe(t),g=p==="left-to-right"?1:-1,v=a==="ArrowRight"?1:-1,_=l+v*g;if(!(c==null||_>=c.length||_<0)){var x=KT(t,"axis","hover",String(_));e.dispatch(uO({active:!0,activeIndex:_.toString(),activeCoordinate:x}))}}}}}});VL.startListening({actionCreator:I$,effect:(n,e)=>{var t=e.getState(),i=t.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=t.tooltip;if(!r.active&&r.index==null){var a="0",s=KT(t,"axis","hover",String(a));e.dispatch(uO({active:!0,activeIndex:a,activeCoordinate:s}))}}}});var Ul=Wl("externalEvent"),P$=Ix(),TR=new Map;P$.startListening({actionCreator:Ul,effect:(n,e)=>{var{handler:t,reactEvent:i}=n.payload;if(t!=null){i.persist();var r=i.type,a=TR.get(r);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var l=e.getState(),c={activeCoordinate:jSe(l),activeDataKey:BSe(l),activeIndex:ix(l),activeLabel:Iq(l),activeTooltipIndex:ix(l),isTooltipActive:HSe(l)};t(c,i)}finally{TR.delete(r)}});TR.set(r,s)}}});var IMe=Ge([e0],n=>n.tooltipItemPayloads),PMe=Ge([IMe,(n,e)=>e,(n,e,t)=>t],(n,e,t)=>{if(e!=null){var i=n.find(a=>a.settings.graphicalItemId===t);if(i!=null){var{getPosition:r}=i;if(r!=null)return r(e)}}}),R$=Wl("touchMove"),N$=Ix();N$.startListening({actionCreator:R$,effect:(n,e)=>{var t=n.payload;if(!(t.touches==null||t.touches.length===0)){var i=e.getState(),r=xL(i,i.tooltip.settings.shared);if(r==="axis"){var a=t.touches[0];if(a==null)return;var s=FL(i,BL({clientX:a.clientX,clientY:a.clientY,currentTarget:t.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&e.dispatch(vq({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(r==="item"){var l,c=t.touches[0];if(document.elementFromPoint==null||c==null)return;var f=document.elementFromPoint(c.clientX,c.clientY);if(!f||!f.getAttribute)return;var p=f.getAttribute(kge),g=(l=f.getAttribute(Uge))!==null&&l!==void 0?l:void 0,v=t0(i).find(T=>T.id===g);if(p==null||v==null||g==null)return;var{dataKey:_}=v,x=PMe(i,p,g);e.dispatch(tSe({activeDataKey:_,activeIndex:p,activeCoordinate:x,activeGraphicalItemId:g}))}}}});var RMe=EG({brush:cTe,cartesianAxis:tTe,chartData:j1e,errorBars:rAe,graphicalItems:NEe,layout:bge,legend:Ive,options:U1e,polarAxis:_Ee,polarOptions:CMe,referenceElements:pTe,rootProps:EMe,tooltip:iSe,zIndex:E1e}),NMe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Wme({reducer:RMe,preloadedState:e,middleware:i=>{var r;return i({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([E$.middleware,T$.middleware,VL.middleware,P$.middleware,N$.middleware])},enhancers:i=>{var r=i;return typeof i=="function"&&(r=i()),r.concat(FG({type:"raf"}))},devTools:{serialize:{replacer:wMe},name:"recharts-".concat(t)}})};function OMe(n){var{preloadedState:e,children:t,reduxStoreName:i}=n,r=Do(),a=H.useRef(null);if(r)return t;a.current==null&&(a.current=NMe(e,i));var s=x3;return H.createElement(SAe,{context:s,store:a.current},t)}function DMe(n){var{layout:e,margin:t}=n,i=Ta(),r=Do();return H.useEffect(()=>{r||(i(vge(e)),i(gge(t)))},[i,r,e,t]),null}var LMe=H.memo(DMe,kL);function kMe(n){var e=Ta();return H.useEffect(()=>{e(TMe(n))},[e,n]),null}function O2(n){var{zIndex:e,isPanorama:t}=n,i=H.useRef(null),r=Ta();return H.useLayoutEffect(()=>(i.current&&r(S1e({zIndex:e,element:i.current,isPanorama:t})),()=>{r(w1e({zIndex:e,isPanorama:t}))}),[r,e,t]),H.createElement("g",{tabIndex:-1,ref:i})}function D2(n){var{children:e,isPanorama:t}=n,i=sn(h1e);if(!i||i.length===0)return e;var r=i.filter(s=>s<0),a=i.filter(s=>s>0);return H.createElement(H.Fragment,null,r.map(s=>H.createElement(O2,{key:s,zIndex:s,isPanorama:t})),e,a.map(s=>H.createElement(O2,{key:s,zIndex:s,isPanorama:t})))}var UMe=["children"];function zMe(n,e){if(n==null)return{};var t,i,r=FMe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function FMe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function tA(){return tA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},tA.apply(null,arguments)}var BMe={width:"100%",height:"100%",display:"block"},VMe=H.forwardRef((n,e)=>{var t=l7(),i=u7(),r=y7();if(!Kc(t)||!Kc(i))return null;var{children:a,otherAttributes:s,title:l,desc:c}=n,f,p;return s!=null&&(typeof s.tabIndex=="number"?f=s.tabIndex:f=r?0:void 0,typeof s.role=="string"?p=s.role:p=r?"application":void 0),H.createElement(qH,tA({},s,{title:l,desc:c,role:p,tabIndex:f,width:t,height:i,style:BMe,ref:e}),a)}),jMe=n=>{var{children:e}=n,t=sn(CM);if(!t)return null;var{width:i,height:r,y:a,x:s}=t;return H.createElement(qH,{width:i,height:r,x:s,y:a},e)},L2=H.forwardRef((n,e)=>{var{children:t}=n,i=zMe(n,UMe),r=Do();return r?H.createElement(jMe,null,H.createElement(D2,{isPanorama:!0},t)):H.createElement(VMe,tA({ref:e},i),H.createElement(D2,{isPanorama:!1},t))});function HMe(){var n=Ta(),[e,t]=H.useState(null),i=sn(Lge);return H.useEffect(()=>{if(e!=null){var r=e.getBoundingClientRect(),a=r.width/e.offsetWidth;Kn(a)&&a!==i&&n(_ge(a))}},[e,n,i]),t}function k2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function GMe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?k2(Object(t),!0).forEach(function(i){WMe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):k2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function WMe(n,e,t){return(e=qMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qMe(n){var e=$Me(n,"string");return typeof e=="symbol"?e:e+""}function $Me(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Hd(){return Hd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Hd.apply(null,arguments)}var XMe=()=>(Z1e(),null);function nA(n){if(typeof n=="number")return n;if(typeof n=="string"){var e=parseFloat(n);if(!Number.isNaN(e))return e}return 0}var YMe=H.forwardRef((n,e)=>{var t,i,r=H.useRef(null),[a,s]=H.useState({containerWidth:nA((t=n.style)===null||t===void 0?void 0:t.width),containerHeight:nA((i=n.style)===null||i===void 0?void 0:i.height)}),l=H.useCallback((f,p)=>{s(g=>{var v=Math.round(f),_=Math.round(p);return g.containerWidth===v&&g.containerHeight===_?g:{containerWidth:v,containerHeight:_}})},[]),c=H.useCallback(f=>{if(typeof e=="function"&&e(f),f!=null&&typeof ResizeObserver<"u"){var{width:p,height:g}=f.getBoundingClientRect();l(p,g);var v=x=>{var T=x[0];if(T!=null){var{width:S,height:w}=T.contentRect;l(S,w)}},_=new ResizeObserver(v);_.observe(f),r.current=_}},[e,l]);return H.useEffect(()=>()=>{var f=r.current;f!=null&&f.disconnect()},[l]),H.createElement(H.Fragment,null,H.createElement(Rx,{width:a.containerWidth,height:a.containerHeight}),H.createElement("div",Hd({ref:c},n)))}),KMe=H.forwardRef((n,e)=>{var{width:t,height:i}=n,[r,a]=H.useState({containerWidth:nA(t),containerHeight:nA(i)}),s=H.useCallback((c,f)=>{a(p=>{var g=Math.round(c),v=Math.round(f);return p.containerWidth===g&&p.containerHeight===v?p:{containerWidth:g,containerHeight:v}})},[]),l=H.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:f,height:p}=c.getBoundingClientRect();s(f,p)}},[e,s]);return H.createElement(H.Fragment,null,H.createElement(Rx,{width:r.containerWidth,height:r.containerHeight}),H.createElement("div",Hd({ref:l},n)))}),ZMe=H.forwardRef((n,e)=>{var{width:t,height:i}=n;return H.createElement(H.Fragment,null,H.createElement(Rx,{width:t,height:i}),H.createElement("div",Hd({ref:e},n)))}),QMe=H.forwardRef((n,e)=>{var{width:t,height:i}=n;return typeof t=="string"||typeof i=="string"?H.createElement(KMe,Hd({},n,{ref:e})):typeof t=="number"&&typeof i=="number"?H.createElement(ZMe,Hd({},n,{width:t,height:i,ref:e})):H.createElement(H.Fragment,null,H.createElement(Rx,{width:t,height:i}),H.createElement("div",Hd({ref:e},n)))});function JMe(n){return n?YMe:QMe}var eCe=H.forwardRef((n,e)=>{var{children:t,className:i,height:r,onClick:a,onContextMenu:s,onDoubleClick:l,onMouseDown:c,onMouseEnter:f,onMouseLeave:p,onMouseMove:g,onMouseUp:v,onTouchEnd:_,onTouchMove:x,onTouchStart:T,style:S,width:w,responsive:I,dispatchTouchEvents:R=!0}=n,O=H.useRef(null),F=Ta(),[B,L]=H.useState(null),[z,P]=H.useState(null),D=HMe(),j=C3(),q=(j==null?void 0:j.width)>0?j.width:w,W=(j==null?void 0:j.height)>0?j.height:r,se=H.useCallback(ye=>{D(ye),typeof e=="function"&&e(ye),L(ye),P(ye),ye!=null&&(O.current=ye)},[D,e,L,P]),ue=H.useCallback(ye=>{F(w$(ye)),F(Ul({handler:a,reactEvent:ye}))},[F,a]),J=H.useCallback(ye=>{F(yO(ye)),F(Ul({handler:f,reactEvent:ye}))},[F,f]),ae=H.useCallback(ye=>{F(gq()),F(Ul({handler:p,reactEvent:ye}))},[F,p]),he=H.useCallback(ye=>{F(yO(ye)),F(Ul({handler:g,reactEvent:ye}))},[F,g]),Te=H.useCallback(()=>{F(I$())},[F]),Re=H.useCallback(ye=>{F(C$(ye.key))},[F]),Q=H.useCallback(ye=>{F(Ul({handler:s,reactEvent:ye}))},[F,s]),de=H.useCallback(ye=>{F(Ul({handler:l,reactEvent:ye}))},[F,l]),Me=H.useCallback(ye=>{F(Ul({handler:c,reactEvent:ye}))},[F,c]),We=H.useCallback(ye=>{F(Ul({handler:v,reactEvent:ye}))},[F,v]),vt=H.useCallback(ye=>{F(Ul({handler:T,reactEvent:ye}))},[F,T]),be=H.useCallback(ye=>{R&&F(R$(ye)),F(Ul({handler:x,reactEvent:ye}))},[F,R,x]),Ae=H.useCallback(ye=>{F(Ul({handler:_,reactEvent:ye}))},[F,_]),mt=JMe(I);return H.createElement(Uq.Provider,{value:B},H.createElement(Zde.Provider,{value:z},H.createElement(mt,{width:q??(S==null?void 0:S.width),height:W??(S==null?void 0:S.height),className:Zi("recharts-wrapper",i),style:GMe({position:"relative",cursor:"default",width:q,height:W},S),onClick:ue,onContextMenu:Q,onDoubleClick:de,onFocus:Te,onKeyDown:Re,onMouseDown:Me,onMouseEnter:J,onMouseLeave:ae,onMouseMove:he,onMouseUp:We,onTouchEnd:Ae,onTouchMove:be,onTouchStart:vt,ref:se},H.createElement(XMe,null),t)))}),tCe=["width","height","responsive","children","className","style","compact","title","desc"];function nCe(n,e){if(n==null)return{};var t,i,r=iCe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function iCe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var rCe=H.forwardRef((n,e)=>{var{width:t,height:i,responsive:r,children:a,className:s,style:l,compact:c,title:f,desc:p}=n,g=nCe(n,tCe),v=Du(g);return c?H.createElement(H.Fragment,null,H.createElement(Rx,{width:t,height:i}),H.createElement(L2,{otherAttributes:v,title:f,desc:p},a)):H.createElement(eCe,{className:s,style:l,width:t,height:i,responsive:r??!1,onClick:n.onClick,onMouseLeave:n.onMouseLeave,onMouseEnter:n.onMouseEnter,onMouseMove:n.onMouseMove,onMouseDown:n.onMouseDown,onMouseUp:n.onMouseUp,onContextMenu:n.onContextMenu,onDoubleClick:n.onDoubleClick,onTouchStart:n.onTouchStart,onTouchMove:n.onTouchMove,onTouchEnd:n.onTouchEnd},H.createElement(L2,{otherAttributes:v,title:f,desc:p,ref:e},H.createElement(gTe,null,a)))});function _O(){return _O=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},_O.apply(null,arguments)}var aCe={top:5,right:5,bottom:5,left:5},sCe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:aCe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},oCe=H.forwardRef(function(e,t){var i,r=al(e.categoricalChartProps,sCe),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:f}=e,p={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return H.createElement(OMe,{preloadedState:{options:p},reduxStoreName:(i=f.id)!==null&&i!==void 0?i:a},H.createElement(uTe,{chartData:f.data}),H.createElement(LMe,{layout:r.layout,margin:r.margin}),H.createElement(kMe,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),H.createElement(rCe,_O({},r,{ref:t})))}),lCe=["axis"],uCe=H.forwardRef((n,e)=>H.createElement(oCe,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:lCe,tooltipPayloadSearcher:L1e,categoricalChartProps:n,ref:e}));const O$=6048e5,cCe=864e5,U2=Symbol.for("constructDateFrom");function tp(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&U2 in n?n[U2](e):n instanceof Date?new n.constructor(e):new Date(e)}function zu(n,e){return tp(e||n,n)}let fCe={};function KM(){return fCe}function sx(n,e){var l,c,f,p;const t=KM(),i=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((p=(f=t.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,r=zu(n,e==null?void 0:e.in),a=r.getDay(),s=(a<i?7:0)+a-i;return r.setDate(r.getDate()-s),r.setHours(0,0,0,0),r}function iA(n,e){return sx(n,{...e,weekStartsOn:1})}function D$(n,e){const t=zu(n,e==null?void 0:e.in),i=t.getFullYear(),r=tp(t,0);r.setFullYear(i+1,0,4),r.setHours(0,0,0,0);const a=iA(r),s=tp(t,0);s.setFullYear(i,0,4),s.setHours(0,0,0,0);const l=iA(s);return t.getTime()>=a.getTime()?i+1:t.getTime()>=l.getTime()?i:i-1}function z2(n){const e=zu(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function hCe(n,...e){const t=tp.bind(null,e.find(i=>typeof i=="object"));return e.map(t)}function F2(n,e){const t=zu(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function dCe(n,e,t){const[i,r]=hCe(t==null?void 0:t.in,n,e),a=F2(i),s=F2(r),l=+a-z2(a),c=+s-z2(s);return Math.round((l-c)/cCe)}function pCe(n,e){const t=D$(n,e),i=tp(n,0);return i.setFullYear(t,0,4),i.setHours(0,0,0,0),iA(i)}function mCe(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function gCe(n){return!(!mCe(n)&&typeof n!="number"||isNaN(+zu(n)))}function vCe(n,e){const t=zu(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const yCe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_Ce=(n,e,t)=>{let i;const r=yCe[n];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function sy(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const bCe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},xCe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},SCe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},wCe={date:sy({formats:bCe,defaultWidth:"full"}),time:sy({formats:xCe,defaultWidth:"full"}),dateTime:sy({formats:SCe,defaultWidth:"full"})},ECe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},TCe=(n,e,t,i)=>ECe[n];function Cc(n){return(e,t)=>{const i=t!=null&&t.context?String(t.context):"standalone";let r;if(i==="formatting"&&n.formattingValues){const s=n.defaultFormattingWidth||n.defaultWidth,l=t!=null&&t.width?String(t.width):s;r=n.formattingValues[l]||n.formattingValues[s]}else{const s=n.defaultWidth,l=t!=null&&t.width?String(t.width):n.defaultWidth;r=n.values[l]||n.values[s]}const a=n.argumentCallback?n.argumentCallback(e):e;return r[a]}}const ACe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},MCe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},CCe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ICe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},PCe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},RCe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},NCe=(n,e)=>{const t=Number(n),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},OCe={ordinalNumber:NCe,era:Cc({values:ACe,defaultWidth:"wide"}),quarter:Cc({values:MCe,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Cc({values:CCe,defaultWidth:"wide"}),day:Cc({values:ICe,defaultWidth:"wide"}),dayPeriod:Cc({values:PCe,defaultWidth:"wide",formattingValues:RCe,defaultFormattingWidth:"wide"})};function Ic(n){return(e,t={})=>{const i=t.width,r=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],a=e.match(r);if(!a)return null;const s=a[0],l=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(l)?LCe(l,g=>g.test(s)):DCe(l,g=>g.test(s));let f;f=n.valueCallback?n.valueCallback(c):c,f=t.valueCallback?t.valueCallback(f):f;const p=e.slice(s.length);return{value:f,rest:p}}}function DCe(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function LCe(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function L$(n){return(e,t={})=>{const i=e.match(n.matchPattern);if(!i)return null;const r=i[0],a=e.match(n.parsePattern);if(!a)return null;let s=n.valueCallback?n.valueCallback(a[0]):a[0];s=t.valueCallback?t.valueCallback(s):s;const l=e.slice(r.length);return{value:s,rest:l}}}const kCe=/^(\d+)(th|st|nd|rd)?/i,UCe=/\d+/i,zCe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},FCe={any:[/^b/i,/^(a|c)/i]},BCe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},VCe={any:[/1/i,/2/i,/3/i,/4/i]},jCe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},HCe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},GCe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},WCe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},qCe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$Ce={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},XCe={ordinalNumber:L$({matchPattern:kCe,parsePattern:UCe,valueCallback:n=>parseInt(n,10)}),era:Ic({matchPatterns:zCe,defaultMatchWidth:"wide",parsePatterns:FCe,defaultParseWidth:"any"}),quarter:Ic({matchPatterns:BCe,defaultMatchWidth:"wide",parsePatterns:VCe,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Ic({matchPatterns:jCe,defaultMatchWidth:"wide",parsePatterns:HCe,defaultParseWidth:"any"}),day:Ic({matchPatterns:GCe,defaultMatchWidth:"wide",parsePatterns:WCe,defaultParseWidth:"any"}),dayPeriod:Ic({matchPatterns:qCe,defaultMatchWidth:"any",parsePatterns:$Ce,defaultParseWidth:"any"})},YCe={code:"en-US",formatDistance:_Ce,formatLong:wCe,formatRelative:TCe,localize:OCe,match:XCe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function KCe(n,e){const t=zu(n,e==null?void 0:e.in);return dCe(t,vCe(t))+1}function ZCe(n,e){const t=zu(n,e==null?void 0:e.in),i=+iA(t)-+pCe(t);return Math.round(i/O$)+1}function k$(n,e){var p,g,v,_;const t=zu(n,e==null?void 0:e.in),i=t.getFullYear(),r=KM(),a=(e==null?void 0:e.firstWeekContainsDate)??((g=(p=e==null?void 0:e.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??r.firstWeekContainsDate??((_=(v=r.locale)==null?void 0:v.options)==null?void 0:_.firstWeekContainsDate)??1,s=tp((e==null?void 0:e.in)||n,0);s.setFullYear(i+1,0,a),s.setHours(0,0,0,0);const l=sx(s,e),c=tp((e==null?void 0:e.in)||n,0);c.setFullYear(i,0,a),c.setHours(0,0,0,0);const f=sx(c,e);return+t>=+l?i+1:+t>=+f?i:i-1}function QCe(n,e){var l,c,f,p;const t=KM(),i=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((p=(f=t.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,r=k$(n,e),a=tp((e==null?void 0:e.in)||n,0);return a.setFullYear(r,0,i),a.setHours(0,0,0,0),sx(a,e)}function JCe(n,e){const t=zu(n,e==null?void 0:e.in),i=+sx(t,e)-+QCe(t,e);return Math.round(i/O$)+1}function _i(n,e){const t=n<0?"-":"",i=Math.abs(n).toString().padStart(e,"0");return t+i}const bd={y(n,e){const t=n.getFullYear(),i=t>0?t:1-t;return _i(e==="yy"?i%100:i,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):_i(t+1,2)},d(n,e){return _i(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return _i(n.getHours()%12||12,e.length)},H(n,e){return _i(n.getHours(),e.length)},m(n,e){return _i(n.getMinutes(),e.length)},s(n,e){return _i(n.getSeconds(),e.length)},S(n,e){const t=e.length,i=n.getMilliseconds(),r=Math.trunc(i*Math.pow(10,t-3));return _i(r,e.length)}},kv={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},B2={G:function(n,e,t){const i=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(i,{width:"abbreviated"});case"GGGGG":return t.era(i,{width:"narrow"});case"GGGG":default:return t.era(i,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const i=n.getFullYear(),r=i>0?i:1-i;return t.ordinalNumber(r,{unit:"year"})}return bd.y(n,e)},Y:function(n,e,t,i){const r=k$(n,i),a=r>0?r:1-r;if(e==="YY"){const s=a%100;return _i(s,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):_i(a,e.length)},R:function(n,e){const t=D$(n);return _i(t,e.length)},u:function(n,e){const t=n.getFullYear();return _i(t,e.length)},Q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return _i(i,2);case"Qo":return t.ordinalNumber(i,{unit:"quarter"});case"QQQ":return t.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return _i(i,2);case"qo":return t.ordinalNumber(i,{unit:"quarter"});case"qqq":return t.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,e,t){const i=n.getMonth();switch(e){case"M":case"MM":return bd.M(n,e);case"Mo":return t.ordinalNumber(i+1,{unit:"month"});case"MMM":return t.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(i,{width:"wide",context:"formatting"})}},L:function(n,e,t){const i=n.getMonth();switch(e){case"L":return String(i+1);case"LL":return _i(i+1,2);case"Lo":return t.ordinalNumber(i+1,{unit:"month"});case"LLL":return t.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(i,{width:"wide",context:"standalone"})}},w:function(n,e,t,i){const r=JCe(n,i);return e==="wo"?t.ordinalNumber(r,{unit:"week"}):_i(r,e.length)},I:function(n,e,t){const i=ZCe(n);return e==="Io"?t.ordinalNumber(i,{unit:"week"}):_i(i,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):bd.d(n,e)},D:function(n,e,t){const i=KCe(n);return e==="Do"?t.ordinalNumber(i,{unit:"dayOfYear"}):_i(i,e.length)},E:function(n,e,t){const i=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(i,{width:"short",context:"formatting"});case"EEEE":default:return t.day(i,{width:"wide",context:"formatting"})}},e:function(n,e,t,i){const r=n.getDay(),a=(r-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return _i(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(r,{width:"short",context:"formatting"});case"eeee":default:return t.day(r,{width:"wide",context:"formatting"})}},c:function(n,e,t,i){const r=n.getDay(),a=(r-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return _i(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(r,{width:"narrow",context:"standalone"});case"cccccc":return t.day(r,{width:"short",context:"standalone"});case"cccc":default:return t.day(r,{width:"wide",context:"standalone"})}},i:function(n,e,t){const i=n.getDay(),r=i===0?7:i;switch(e){case"i":return String(r);case"ii":return _i(r,e.length);case"io":return t.ordinalNumber(r,{unit:"day"});case"iii":return t.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(i,{width:"short",context:"formatting"});case"iiii":default:return t.day(i,{width:"wide",context:"formatting"})}},a:function(n,e,t){const r=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(n,e,t){const i=n.getHours();let r;switch(i===12?r=kv.noon:i===0?r=kv.midnight:r=i/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(n,e,t){const i=n.getHours();let r;switch(i>=17?r=kv.evening:i>=12?r=kv.afternoon:i>=4?r=kv.morning:r=kv.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let i=n.getHours()%12;return i===0&&(i=12),t.ordinalNumber(i,{unit:"hour"})}return bd.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):bd.H(n,e)},K:function(n,e,t){const i=n.getHours()%12;return e==="Ko"?t.ordinalNumber(i,{unit:"hour"}):_i(i,e.length)},k:function(n,e,t){let i=n.getHours();return i===0&&(i=24),e==="ko"?t.ordinalNumber(i,{unit:"hour"}):_i(i,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):bd.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):bd.s(n,e)},S:function(n,e){return bd.S(n,e)},X:function(n,e,t){const i=n.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return j2(i);case"XXXX":case"XX":return gm(i);case"XXXXX":case"XXX":default:return gm(i,":")}},x:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"x":return j2(i);case"xxxx":case"xx":return gm(i);case"xxxxx":case"xxx":default:return gm(i,":")}},O:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+V2(i,":");case"OOOO":default:return"GMT"+gm(i,":")}},z:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+V2(i,":");case"zzzz":default:return"GMT"+gm(i,":")}},t:function(n,e,t){const i=Math.trunc(+n/1e3);return _i(i,e.length)},T:function(n,e,t){return _i(+n,e.length)}};function V2(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),r=Math.trunc(i/60),a=i%60;return a===0?t+String(r):t+String(r)+e+_i(a,2)}function j2(n,e){return n%60===0?(n>0?"-":"+")+_i(Math.abs(n)/60,2):gm(n,e)}function gm(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),r=_i(Math.trunc(i/60),2),a=_i(i%60,2);return t+r+e+a}const H2=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},U$=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},eIe=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],i=t[1],r=t[2];if(!r)return H2(n,e);let a;switch(i){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",H2(i,e)).replace("{{time}}",U$(r,e))},tIe={p:U$,P:eIe},nIe=/^D+$/,iIe=/^Y+$/,rIe=["D","DD","YY","YYYY"];function aIe(n){return nIe.test(n)}function sIe(n){return iIe.test(n)}function oIe(n,e,t){const i=lIe(n,e,t);if(console.warn(i),rIe.includes(n))throw new RangeError(i)}function lIe(n,e,t){const i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${i} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const uIe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,cIe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fIe=/^'([^]*?)'?$/,hIe=/''/g,dIe=/[a-zA-Z]/;function pIe(n,e,t){var p,g,v,_,x,T,S,w;const i=KM(),r=(t==null?void 0:t.locale)??i.locale??YCe,a=(t==null?void 0:t.firstWeekContainsDate)??((g=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??i.firstWeekContainsDate??((_=(v=i.locale)==null?void 0:v.options)==null?void 0:_.firstWeekContainsDate)??1,s=(t==null?void 0:t.weekStartsOn)??((T=(x=t==null?void 0:t.locale)==null?void 0:x.options)==null?void 0:T.weekStartsOn)??i.weekStartsOn??((w=(S=i.locale)==null?void 0:S.options)==null?void 0:w.weekStartsOn)??0,l=zu(n,t==null?void 0:t.in);if(!gCe(l))throw new RangeError("Invalid time value");let c=e.match(cIe).map(I=>{const R=I[0];if(R==="p"||R==="P"){const O=tIe[R];return O(I,r.formatLong)}return I}).join("").match(uIe).map(I=>{if(I==="''")return{isToken:!1,value:"'"};const R=I[0];if(R==="'")return{isToken:!1,value:mIe(I)};if(B2[R])return{isToken:!0,value:I};if(R.match(dIe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");return{isToken:!1,value:I}});r.localize.preprocessor&&(c=r.localize.preprocessor(l,c));const f={firstWeekContainsDate:a,weekStartsOn:s,locale:r};return c.map(I=>{if(!I.isToken)return I.value;const R=I.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&sIe(R)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&aIe(R))&&oIe(R,e,String(n));const O=B2[R[0]];return O(l,R,r.localize,f)}).join("")}function mIe(n){const e=n.match(fIe);return e?e[1].replace(hIe,"'"):n}const gIe={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},vIe=(n,e,t)=>{let i;const r=gIe[n];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"en "+i:"hace "+i:i},yIe={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},_Ie={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},bIe={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},xIe={date:sy({formats:yIe,defaultWidth:"full"}),time:sy({formats:_Ie,defaultWidth:"full"}),dateTime:sy({formats:bIe,defaultWidth:"full"})},SIe={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},wIe={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},EIe=(n,e,t,i)=>e.getHours()!==1?wIe[n]:SIe[n],TIe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},AIe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},MIe={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},CIe={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},IIe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},PIe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},RIe=(n,e)=>Number(n)+"",NIe={ordinalNumber:RIe,era:Cc({values:TIe,defaultWidth:"wide"}),quarter:Cc({values:AIe,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:Cc({values:MIe,defaultWidth:"wide"}),day:Cc({values:CIe,defaultWidth:"wide"}),dayPeriod:Cc({values:IIe,defaultWidth:"wide",formattingValues:PIe,defaultFormattingWidth:"wide"})},OIe=/^(\d+)()?/i,DIe=/\d+/i,LIe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},kIe={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},UIe={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},zIe={any:[/1/i,/2/i,/3/i,/4/i]},FIe={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},BIe={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},VIe={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},jIe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},HIe={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},GIe={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},WIe={ordinalNumber:L$({matchPattern:OIe,parsePattern:DIe,valueCallback:function(n){return parseInt(n,10)}}),era:Ic({matchPatterns:LIe,defaultMatchWidth:"wide",parsePatterns:kIe,defaultParseWidth:"any"}),quarter:Ic({matchPatterns:UIe,defaultMatchWidth:"wide",parsePatterns:zIe,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Ic({matchPatterns:FIe,defaultMatchWidth:"wide",parsePatterns:BIe,defaultParseWidth:"any"}),day:Ic({matchPatterns:VIe,defaultMatchWidth:"wide",parsePatterns:jIe,defaultParseWidth:"any"}),dayPeriod:Ic({matchPatterns:HIe,defaultMatchWidth:"any",parsePatterns:GIe,defaultParseWidth:"any"})},qIe={code:"es",formatDistance:vIe,formatLong:xIe,formatRelative:EIe,localize:NIe,match:WIe,options:{weekStartsOn:1,firstWeekContainsDate:1}},$Ie=({orders:n})=>{const e=n.reduce((i,r)=>{try{const[a,s,l]=r.date.split("/"),c=`${l}-${s}-${a}`;i[c]||(i[c]=0),i[c]+=parseFloat(r.total)}catch{}return i},{}),t=Object.keys(e).sort().map(i=>({date:i,total:e[i],displayDate:pIe(new Date(i),"dd MMM",{locale:qIe})}));return k.jsxs("div",{className:"h-[300px] w-full bg-slate-800 p-4 rounded-xl border border-slate-700",children:[k.jsx("h3",{className:"text-slate-400 text-sm font-bold mb-4 uppercase",children:"Ventas (Histrico)"}),k.jsx(fve,{width:"100%",height:"100%",children:k.jsxs(uCe,{data:t,children:[k.jsx("defs",{children:k.jsxs("linearGradient",{id:"colorTotal",x1:"0",y1:"0",x2:"0",y2:"1",children:[k.jsx("stop",{offset:"5%",stopColor:"#F59E0B",stopOpacity:.8}),k.jsx("stop",{offset:"95%",stopColor:"#F59E0B",stopOpacity:0})]})}),k.jsx(l$,{strokeDasharray:"3 3",stroke:"#374151"}),k.jsx(x$,{dataKey:"displayDate",stroke:"#9CA3AF",fontSize:12}),k.jsx(S$,{stroke:"#9CA3AF",fontSize:12,unit:"$"}),k.jsx(awe,{contentStyle:{backgroundColor:"#1F2937",borderColor:"#374151",color:"#F3F4F6"},formatter:i=>[`$${i}`,"Ventas"]}),k.jsx(_$,{type:"monotone",dataKey:"total",stroke:"#F59E0B",fillOpacity:1,fill:"url(#colorTotal)"})]})})]})},XIe=()=>{var It,Ht,nt;const{clients:n,orders:e,leads:t,user:i,loadingAuth:r,login:a,logout:s,addClient:l,updateClient:c,addOrder:f,updateOrderStatus:p,updateOrder:g,deleteOrder:v,addLead:_,updateLeadStatus:x,importDatabase:T}=cM();if(r)return k.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-900 text-white",children:"Cargando..."});if(!i)return k.jsx("div",{className:"flex flex-col items-center justify-center h-screen bg-slate-900 text-white p-4",children:k.jsxs("div",{className:"bg-slate-800 p-8 rounded-2xl border border-slate-700 text-center max-w-md w-full",children:[k.jsxs("h1",{className:"font-display font-bold text-3xl mb-2",children:["Tuna's ",k.jsx("span",{className:"text-brand-orange",children:"Admin"})]}),k.jsx("p",{className:"text-slate-400 mb-8",children:"Inicia sesin para gestionar tu negocio."}),k.jsxs("button",{onClick:a,className:"w-full bg-white text-gray-900 font-bold py-3 px-4 rounded-xl flex items-center justify-center gap-3 hover:bg-gray-100 transition-colors",children:[k.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",className:"w-6 h-6",alt:"Google"}),"Acceder con Google"]})]})});const[S,w]=H.useState("dashboard"),[I,R]=H.useState(null),[O,F]=H.useState(!1),[B,L]=H.useState(!1),[z,P]=H.useState(!1),[D,j]=H.useState(!0),[q,W]=H.useState(null),[se,ue]=H.useState(null),[J,ae]=H.useState(null),[he,Te]=H.useState([{desc:"",qty:1,price:0}]),[Re,Q]=H.useState(0),[de,Me]=H.useState(null);H.useMemo(()=>{const le=he.reduce((Se,ne)=>Se+parseFloat(ne.price||0)*parseFloat(ne.qty||1),0);Q(le)},[he]);const We=()=>Te([...he,{desc:"",qty:1,price:0}]),vt=le=>Te(he.filter((Se,ne)=>ne!==le)),be=(le,Se,ne)=>{const ge=[...he];ge[le][Se]=ne,Te(ge)},[Ae,mt]=H.useState({status:"all",clientId:""}),[ye,et]=H.useState(0),wt=30,[ze,Tt]=H.useState({status:"all",search:""}),Oe=e.filter(le=>{const Se=ze.search.toLowerCase(),ne=n.find($e=>$e.id===le.clientId),ge=ne?ne.name.toLowerCase():(le.client||"").toLowerCase(),Ze=ne?ne.email.toLowerCase():"",oe=Se===""||le.id.toLowerCase().includes(Se)||ge.includes(Se)||Ze.includes(Se),Qe=ze.status==="all"||le.status===ze.status;return oe&&Qe}),Ke=le=>{const Se=le.target.files[0];if(!Se)return;const ne=new FileReader;ne.onload=ge=>{try{T(JSON.parse(ge.target.result)),alert("Base de datos importada.")}catch{alert("Error JSON")}},ne.readAsText(Se)},He=le=>{le.preventDefault();const Se=new FormData(le.target),ne=Se.get("street"),ge=Se.get("colony"),Ze=Se.get("zip"),oe=Se.get("state"),Qe=`${ne}, Col. ${ge}, ${Ze}, ${oe}`;l({name:Se.get("name"),type:Se.get("type"),email:Se.get("email"),phone:Se.get("phone"),facebook:Se.get("facebook"),instagram:Se.get("instagram"),address:Qe,street:ne,colony:ge,zip:Ze,state:oe}),L(!1)},ut=le=>{le.preventDefault();const Se=new FormData(le.target),ne=Se.get("street"),ge=Se.get("colony"),Ze=Se.get("zip"),oe=Se.get("state"),Qe=`${ne}, Col. ${ge}, ${Ze}, ${oe}`;c(J.id,{name:Se.get("name"),email:Se.get("email"),phone:Se.get("phone"),facebook:Se.get("facebook"),instagram:Se.get("instagram"),type:Se.get("type"),address:Qe,street:ne,colony:ge,zip:Ze,state:oe}),ae(null)},re=le=>{le.preventDefault();const Se=new FormData(le.target),ne=Se.get("clientId");let ge=Se.get("manualName"),Ze=Se.get("manualEmail"),oe=Se.get("manualPhone");if(ne&&ne!=="manual"){const $e=n.find(at=>at.id===ne);$e&&(ge=$e.name,Ze=$e.email,oe=$e.phone)}const Qe={clientId:ne!=="manual"?ne:null,name:ge,email:Ze,phone:oe,details:Se.get("details"),quantity:Se.get("quantity")};try{_(Qe),P(!1),alert("Cotizacin creada correctamente")}catch($e){console.error("Error adding lead:",$e),alert("Error al crear la cotizacin")}},Et=le=>{le.preventDefault();const Se=new FormData(le.target),ne=I.leadId,ge=Se.get("name"),Ze=Se.get("email"),oe=Se.get("phone"),Qe=Se.get("street"),$e=Se.get("colony"),at=Se.get("zip"),rt=Se.get("state"),qe=`${Qe}, Col. ${$e}, ${at}, ${rt}`,ot=Se.get("itemDesc"),Ft=parseFloat(Se.get("itemQty")),un=parseFloat(Se.get("itemPrice")),en=parseFloat(Se.get("total")),oi=Se.get("deadline"),Oi=parseFloat(Se.get("advance")||0);let Xr=null;const ua=n.find(ns=>Ze&&ns.email===Ze||oe&&ns.phone===oe);ua?(Xr=ua.id,c(ua.id,{name:ge,email:Ze,phone:oe,type:ua.type,address:qe,street:Qe,colony:$e,zip:at,state:rt})):Xr=l({name:ge,email:Ze,phone:oe,type:"normal",address:qe,street:Qe,colony:$e,zip:at,state:rt}).id,f({clientId:Xr,items:[{desc:ot,qty:Ft,price:un.toFixed(2)}],total:en.toFixed(2),advance:Oi.toFixed(2),deliveryLocation:qe,status:"pedido",date:new Date().toLocaleDateString("es-MX"),deadline:oi}),x(ne,"Aceptada"),R(null)},ht=async le=>{const Se=le.target.files[0];if(!Se)return;const ne={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,fileType:"image/webp"};try{const ge=await imageCompression(Se,ne),Ze=new FileReader;Ze.onload=oe=>{window.updateOrderContext&&window.updateOrderContext(q.orderId,{progressImage:oe.target.result}),W(null)},Ze.readAsDataURL(ge)}catch(ge){if(console.error("Compression failed, trying raw upload for small files...",ge),Se.size<2*1024*1024){const Ze=new FileReader;Ze.onload=oe=>{window.updateOrderContext&&window.updateOrderContext(q.orderId,{progressImage:oe.target.result}),W(null)},Ze.readAsDataURL(Se)}else alert("Error: La imagen es muy grande y no se pudo comprimir. Intenta con una ms pequea.")}},Lt=le=>{var Qe;le.preventDefault();const Se=new FormData(le.target),ne=Se.get("clientId");let ge=ne;if(ne==="new"){const $e=Se.get("newClientName"),at=Se.get("newClientContact"),rt="normal",qe=Se.get("newClientStreet"),ot=Se.get("newClientColony"),Ft=Se.get("newClientZip"),un=Se.get("newClientState"),en=Se.get("newClientPhone"),oi=`${qe}, Col. ${ot}, ${Ft}, ${un}`;ge=l({name:$e,email:at,phone:en,type:rt,address:oi,street:qe,colony:ot,zip:Ft,state:un}).id}const Ze=parseFloat(Se.get("advance")||0);if(Ze>Re){alert("El anticipo no puede ser mayor al total del pedido.");return}const oe={clientId:ge,items:he.map($e=>({...$e,price:parseFloat($e.price).toFixed(2)})),total:Re.toFixed(2),advance:Ze.toFixed(2),deliveryLocation:Se.get("delivery"),status:"pedido",date:new Date().toLocaleDateString("es-MX")};de?(g(de,{...oe,status:(Qe=e.find($e=>$e.id===de))==null?void 0:Qe.status}),alert("Pedido actualizado")):f(oe),F(!1),Me(null),Te([{desc:"",qty:1,price:0}])},dt=le=>{Me(le.id),Te(le.items||[]),F(!0)},ee=le=>{confirm("Ests seguro de eliminar este pedido?")&&v(le)},X=e.reduce((le,Se)=>le+parseFloat(Se.total||0),0),pe=e.reduce((le,Se)=>le+parseFloat(Se.advance||0),0),Ue=e.reduce((le,Se)=>le+parseFloat(Se.remaining||Se.total-(Se.advance||0)||0),0),Ye=t.filter(le=>le.status==="Nuevo"||le.status==="Pendiente").length,Le=t.filter(le=>le.status==="Rechazada").length,gt=t.filter(le=>!(Ae.status!=="all"&&le.status!==Ae.status||Ae.clientId&&!le.id.includes(Ae.clientId))).slice(ye*wt,(ye+1)*wt);return k.jsxs("div",{className:"flex h-screen bg-slate-900 text-slate-100 font-sans overflow-hidden",children:[k.jsxs("aside",{className:"w-64 bg-slate-800 border-r border-slate-700 hidden md:flex flex-col p-6",children:[k.jsxs("h1",{className:"font-display font-bold text-2xl text-white mb-8",children:["Tuna's ",k.jsx("span",{className:"text-brand-orange",children:"Admin"})]}),k.jsxs("nav",{className:"space-y-2 flex-1",children:[k.jsx(Aw,{id:"dashboard",icon:k.jsx(eN,{}),label:"Dashboard",active:S,set:w}),k.jsx(Aw,{id:"orders",icon:k.jsx(qE,{}),label:"Pedidos",active:S,set:w}),k.jsx(Aw,{id:"leads",icon:k.jsx(use,{}),label:"Cotizaciones",active:S,set:w}),k.jsx(Aw,{id:"clients",icon:k.jsx(Mse,{}),label:"Clientes",active:S,set:w})]}),k.jsxs("div",{className:"mt-auto pt-6 border-t border-slate-700 space-y-2",children:[k.jsxs(Ac,{to:"/",className:"flex items-center gap-2 text-slate-400 hover:text-white px-2",children:[k.jsx(bD,{size:16})," Ir al Sitio"]}),k.jsxs("label",{className:"w-full bg-slate-700 hover:bg-slate-600 p-2 rounded text-center items-center justify-center flex cursor-pointer gap-2 text-sm",children:[k.jsx(tN,{size:14})," Importar DB",k.jsx("input",{type:"file",className:"hidden",accept:".json",onChange:Ke})]}),k.jsxs("button",{onClick:s,className:"w-full bg-red-900/30 hover:bg-red-900/50 text-red-200 p-2 rounded flex items-center justify-center gap-2 text-sm transition-colors",children:[k.jsx(G_,{size:14})," Cerrar Sesin"]})]})]}),k.jsxs("main",{className:"flex-1 overflow-y-auto p-8 relative",children:[S==="dashboard"&&k.jsxs("div",{className:"space-y-6",children:[k.jsx("h2",{className:"text-3xl font-display font-bold",children:"Resumen"}),k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[k.jsx(Uv,{title:"Ventas Totales",value:`$${X.toFixed(2)}`,icon:k.jsx(ise,{className:"text-brand-blue"})}),k.jsx(Uv,{title:"Cobrado",value:`$${pe.toFixed(2)}`,color:"text-green-500"}),k.jsx(Uv,{title:"Por Cobrar",value:`$${Ue.toFixed(2)}`,color:"text-brand-orange"}),k.jsx(Uv,{title:"Pedidos Activos",value:e.filter(le=>le.status!=="entregado").length}),k.jsx(Uv,{title:"Cotizaciones Activas",value:Ye,color:"text-blue-400"}),k.jsx(Uv,{title:"Cot. Rechazadas",value:Le,color:"text-red-400"})]}),k.jsx($Ie,{orders:e})]}),S==="orders"&&k.jsxs("div",{children:[k.jsxs("div",{className:"flex justify-between items-center mb-6",children:[k.jsx("h2",{className:"text-3xl font-display font-bold",children:"Pedidos"}),k.jsxs("div",{className:"flex gap-3",children:[k.jsxs(Ac,{to:"/venta-tienda",className:"bg-brand-orange hover:bg-orange-600 px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:[k.jsx(S8,{size:18})," Venta Mostrador"]}),k.jsxs("div",{className:"relative",children:[k.jsx("input",{placeholder:"Buscar (ID, Cliente, Correo)...",className:"bg-slate-800 border border-slate-600 rounded-lg pl-3 pr-10 py-2 w-64 text-sm focus:outline-none focus:border-brand-blue",value:ze.search,onChange:le=>Tt({...ze,search:le.target.value})}),ze.search&&k.jsx("button",{onClick:()=>Tt({...ze,search:""}),className:"absolute right-3 top-2.5 text-slate-400 hover:text-white",children:""})]}),k.jsxs("select",{className:"bg-slate-800 border border-slate-600 rounded-lg p-2 text-sm focus:outline-none focus:border-brand-blue",value:ze.status,onChange:le=>Tt({...ze,status:le.target.value}),children:[k.jsx("option",{value:"all",children:"Todos los Estatus"}),k.jsx("option",{value:"pedido",children:"Pedido"}),k.jsx("option",{value:"proceso",children:"En Proceso"}),k.jsx("option",{value:"terminado",children:"Terminado"}),k.jsx("option",{value:"entregado",children:"Entregado"})]}),k.jsxs("button",{onClick:()=>F(!0),className:"bg-brand-blue hover:bg-blue-600 px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[k.jsx(H_,{size:18})," Nuevo Pedido"]})]})]}),k.jsx("div",{className:"bg-slate-800 rounded-xl overflow-hidden border border-slate-700",children:k.jsxs("table",{className:"w-full text-left",children:[k.jsx("thead",{className:"bg-slate-700/50 text-slate-300",children:k.jsxs("tr",{children:[k.jsx("th",{className:"p-4",children:"ID"}),k.jsx("th",{className:"p-4",children:"Cliente"}),k.jsx("th",{className:"p-4",children:"Entrega"}),k.jsx("th",{className:"p-4",children:"Restante"}),k.jsx("th",{className:"p-4",children:"Estatus"}),k.jsx("th",{className:"p-4",children:"Total"}),k.jsx("th",{className:"p-4 text-center",children:"Acciones"})]})}),k.jsx("tbody",{className:"divide-y divide-slate-700",children:Oe.map(le=>{var Se;return k.jsxs("tr",{className:"hover:bg-slate-700/30",children:[k.jsxs("td",{className:"p-4 text-xs text-slate-500",children:["#",le.id.slice(-4)]}),k.jsxs("td",{className:"p-4 font-medium",children:[le.client||((Se=n.find(ne=>ne.id===le.clientId))==null?void 0:Se.name)||"Unknown",k.jsx("div",{className:"text-xs text-slate-500 max-w-[150px] truncate",children:le.deliveryLocation||"Sin ubicacin"})]}),k.jsx("td",{className:"p-4 text-sm font-bold text-center",children:le.items?le.items.length:1}),k.jsxs("td",{className:"p-4 text-brand-orange font-bold",children:["$",le.remaining]}),k.jsx("td",{className:"p-4",children:k.jsx("div",{className:"flex flex-col gap-2",children:k.jsxs("select",{value:le.status,onChange:ne=>p(le.id,ne.target.value),className:"bg-slate-900 border border-slate-600 rounded text-xs p-1 w-full",children:[k.jsx("option",{value:"pedido",children:"Pedido"}),k.jsx("option",{value:"proceso",children:"En Proceso"}),k.jsx("option",{value:"terminado",children:"Terminado"}),k.jsx("option",{value:"entregado",children:"Entregado"})]})})}),k.jsxs("td",{className:"p-4 font-bold",children:["$",le.total]}),k.jsx("td",{className:"p-4",children:k.jsxs("div",{className:"flex justify-center items-center gap-2",children:[k.jsx("button",{onClick:()=>ue({type:"order",data:le}),className:"p-2 text-brand-orange hover:bg-brand-orange/20 rounded-full transition-colors",title:"Ver Detalles",children:k.jsx(ase,{size:18})}),k.jsx("button",{onClick:()=>dt(le),className:"p-2 text-blue-400 hover:bg-blue-400/20 rounded-full transition-colors",title:"Editar",children:k.jsx(j4,{size:18})}),k.jsx("button",{onClick:()=>W({orderId:le.id}),className:"p-2 text-purple-400 hover:bg-purple-400/20 rounded-full transition-colors",title:"Subir Foto",children:k.jsx(tN,{size:18})}),k.jsx("button",{onClick:()=>ee(le.id),className:"p-2 text-red-400 hover:bg-red-400/20 rounded-full transition-colors",title:"Eliminar",children:k.jsx(G_,{size:18})})]})})]},le.id)})})]})})]}),S==="clients"&&k.jsxs("div",{children:[k.jsxs("div",{className:"flex justify-between items-center mb-6",children:[k.jsx("h2",{className:"text-3xl font-display font-bold",children:"Clientes"}),k.jsxs("button",{onClick:()=>L(!0),className:"bg-brand-blue hover:bg-blue-600 px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[k.jsx(H_,{size:18})," Nuevo Cliente"]})]}),k.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:n.map(le=>k.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700",children:[k.jsxs("div",{className:"flex justify-between items-start",children:[k.jsx("h3",{className:"font-bold text-lg",children:le.name}),k.jsx("span",{className:`text-xs px-2 py-1 rounded uppercase font-bold 
                                            ${le.type==="distribuidor"?"bg-purple-500/20 text-purple-400":le.type==="mayorista"?"bg-blue-500/20 text-blue-400":"bg-slate-600/20 text-slate-400"}`,children:le.type})]}),k.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["ID: ",le.id?le.id.slice(-6):"N/A"]}),k.jsx("p",{className:"text-sm text-slate-400",children:le.email}),k.jsx("p",{className:"text-sm text-slate-400",children:le.phone}),(le.facebook||le.instagram)&&k.jsxs("div",{className:"flex gap-2 text-xs text-slate-500 mt-1",children:[le.facebook&&k.jsxs("span",{children:["FB: ",le.facebook]}),le.instagram&&k.jsxs("span",{children:["IG: ",le.instagram]})]}),k.jsxs("p",{className:"text-xs text-slate-500 mt-2 truncate",children:[k.jsx("span",{className:"font-bold",children:"Direccin:"})," ",le.address||"Sin direccin"]}),k.jsxs("button",{onClick:()=>ae(le),className:"mt-4 w-full py-2 bg-slate-700 hover:bg-slate-600 rounded text-xs font-bold flex justify-center items-center gap-2",children:[k.jsx(j4,{size:14})," Editar"]})]},le.id))})]}),S==="leads"&&k.jsxs("div",{children:[k.jsxs("div",{className:"flex justify-between items-center mb-6",children:[k.jsx("h2",{className:"text-3xl font-display font-bold",children:"Cotizaciones"}),k.jsxs("div",{className:"flex gap-2",children:[k.jsxs("button",{onClick:()=>P(!0),className:"bg-brand-blue hover:bg-blue-600 px-3 py-2 rounded-lg font-bold flex items-center gap-2 text-sm",children:[k.jsx(H_,{size:16})," Nueva"]}),k.jsxs("select",{className:"bg-slate-800 border border-slate-600 rounded p-2 text-sm",onChange:le=>mt({...Ae,status:le.target.value}),children:[k.jsx("option",{value:"all",children:"Ver Todos"}),k.jsx("option",{value:"Nuevo",children:"Nuevos"}),k.jsx("option",{value:"Aceptada",children:"Aceptadas"})]})]})]}),k.jsx("div",{className:"grid gap-4",children:gt.map(le=>k.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700 flex justify-between items-center",children:[k.jsxs("div",{children:[k.jsx("h3",{className:"font-bold",children:le.name}),k.jsx("p",{className:"text-sm text-slate-400",children:le.details})]}),k.jsxs("div",{className:"flex items-center gap-4",children:[k.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${le.status==="Aceptada"?"bg-green-500/20 text-green-400":"bg-brand-orange/20 text-brand-orange"}`,children:le.status}),le.status!=="Aceptada"&&k.jsx("button",{onClick:()=>R({leadId:le.id,name:le.name,email:le.email,phone:le.phone,itemDesc:le.details,itemQty:le.quantity||1,price:0,deadline:""}),className:"bg-green-600 hover:bg-green-500 text-white text-xs px-3 py-2 rounded",children:"Aprobar"})]})]},le.id))}),k.jsxs("div",{className:"flex justify-center mt-6 gap-2",children:[k.jsx("button",{disabled:ye===0,onClick:()=>et(le=>le-1),className:"px-3 py-1 bg-slate-800 rounded disabled:opacity-50",children:"Anterior"}),k.jsxs("span",{className:"px-3 py-1",children:["Pg ",ye+1]}),k.jsx("button",{disabled:gt.length<wt,onClick:()=>et(le=>le+1),className:"px-3 py-1 bg-slate-800 rounded disabled:opacity-50",children:"Siguiente"})]})]})]}),O&&k.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:k.jsxs("form",{onSubmit:Lt,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-2xl border border-slate-700 max-h-[90vh] overflow-y-auto",children:[k.jsx("h3",{className:"text-xl font-bold mb-4",children:de?"Editar Pedido":"Nuevo Pedido"}),k.jsxs("div",{className:"space-y-4",children:[k.jsxs("div",{className:"bg-black/20 p-4 rounded-xl",children:[k.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Cliente"}),k.jsxs("select",{name:"clientId",defaultValue:de?(It=e.find(le=>le.id===de))==null?void 0:It.clientId:"",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 mb-2",onChange:le=>{if(le.target.value==="new")document.getElementById("newClientFields").style.display="block";else{document.getElementById("newClientFields").style.display="none";const Se=n.find(ne=>ne.id===le.target.value);Se&&Se.address&&(document.getElementById("deliveryInput").value=Se.address)}},children:[k.jsx("option",{value:"",children:"-- Seleccionar Cliente --"}),k.jsx("option",{value:"new",children:"+ Crear Nuevo Cliente"}),n.map(le=>k.jsxs("option",{value:le.id,children:[le.name," (",le.type,")"]},le.id))]}),k.jsxs("div",{id:"newClientFields",style:{display:"none"},className:"space-y-2 mt-2 border-t border-slate-600 pt-2",children:[k.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[k.jsx("input",{name:"newClientName",placeholder:"Nombre Completo",className:"bg-slate-900 border border-slate-600 rounded p-2"}),k.jsx("input",{name:"newClientContact",placeholder:"Email",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),k.jsx("input",{name:"newClientPhone",placeholder:"Telfono",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),k.jsx("h4",{className:"text-xs text-gray-400 font-bold uppercase mt-1",children:"Direccin"}),k.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[k.jsx("input",{name:"newClientStreet",placeholder:"Calle y Nmero",className:"bg-slate-900 border border-slate-600 rounded p-2"}),k.jsx("input",{name:"newClientColony",placeholder:"Colonia",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),k.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[k.jsx("input",{name:"newClientZip",placeholder:"C.P.",className:"bg-slate-900 border border-slate-600 rounded p-2"}),k.jsx("input",{name:"newClientState",placeholder:"Estado",className:"bg-slate-900 border border-slate-600 rounded p-2"})]})]})]}),k.jsxs("div",{className:"bg-black/20 p-4 rounded-xl",children:[k.jsxs("div",{className:"flex justify-between items-center mb-2",children:[k.jsx("label",{className:"block text-xs text-slate-400 font-bold uppercase",children:"Productos"}),k.jsxs("button",{type:"button",onClick:We,className:"text-xs text-brand-blue hover:underline flex items-center gap-1",children:[k.jsx(H_,{size:12})," Agregar"]})]}),k.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto pr-2",children:he.map((le,Se)=>k.jsxs("div",{className:"flex gap-2 items-center",children:[k.jsx("input",{placeholder:"Descripcin",value:le.desc,onChange:ne=>be(Se,"desc",ne.target.value),className:"flex-1 bg-slate-900 border border-slate-600 rounded p-2 text-sm",required:!0}),k.jsx("input",{type:"number",placeholder:"Cant",value:le.qty,onChange:ne=>be(Se,"qty",ne.target.value),className:"w-16 bg-slate-900 border border-slate-600 rounded p-2 text-sm",required:!0,min:"1"}),k.jsx("input",{type:"number",placeholder:"$ Unit",value:le.price,onChange:ne=>be(Se,"price",ne.target.value),className:"w-24 bg-slate-900 border border-slate-600 rounded p-2 text-sm",required:!0}),he.length>1&&k.jsx("button",{type:"button",onClick:()=>vt(Se),className:"text-red-400 hover:text-red-300",children:k.jsx(G_,{size:16})})]},Se))})]}),k.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Totales"}),k.jsxs("div",{className:"bg-slate-900 p-3 rounded-xl border border-slate-600",children:[k.jsxs("div",{className:"flex justify-between mb-1 text-sm",children:[k.jsx("span",{children:"Subtotal:"}),k.jsxs("span",{className:"font-bold",children:["$",Re.toFixed(2)]})]}),k.jsxs("div",{className:"flex justify-between items-center",children:[k.jsx("span",{className:"text-xs text-gray-400",children:"Anticipo:"}),k.jsx("input",{name:"advance",type:"number",defaultValue:"0",className:"w-24 bg-black/50 border border-slate-700 rounded p-1 text-right text-sm"})]})]})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Entrega"}),k.jsx("textarea",{id:"deliveryInput",name:"delivery",placeholder:"Direccin de entrega...",className:"w-full h-full bg-slate-900 border border-slate-600 rounded p-2 text-sm resize-none",required:!0})]})]})]}),k.jsxs("div",{className:"flex justify-end gap-3 mt-6 border-t border-slate-700 pt-4",children:[k.jsx("button",{type:"button",onClick:()=>F(!1),className:"text-slate-400",children:"Cancelar"}),k.jsxs("button",{type:"submit",className:"bg-brand-blue px-6 py-2 rounded font-bold hover:bg-blue-600",children:[de?"Actualizar Pedido":"Crear Pedido"," ($",Re.toFixed(2),")"]})]})]})}),B&&k.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:k.jsxs("form",{onSubmit:He,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-md border border-slate-700",children:[k.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo Cliente"}),k.jsxs("div",{className:"space-y-3",children:[k.jsx("input",{name:"name",placeholder:"Nombre Completo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0}),k.jsx("input",{name:"email",placeholder:"Correo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),k.jsx("input",{name:"phone",placeholder:"Telfono",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),k.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[k.jsx("input",{name:"facebook",placeholder:"Facebook",className:"bg-slate-900 border border-slate-600 rounded p-2"}),k.jsx("input",{name:"instagram",placeholder:"Instagram",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),k.jsx("h4",{className:"text-xs text-gray-400 font-bold uppercase mt-2",children:"Direccin"}),k.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[k.jsx("input",{name:"street",placeholder:"Calle y Nmero",className:"bg-slate-900 border border-slate-600 rounded p-2"}),k.jsx("input",{name:"colony",placeholder:"Colonia",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),k.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[k.jsx("input",{name:"zip",placeholder:"C.P.",className:"bg-slate-900 border border-slate-600 rounded p-2"}),k.jsx("input",{name:"state",placeholder:"Estado",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-xs mb-1 text-slate-400",children:"Tipo de Cliente"}),k.jsxs("select",{name:"type",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",children:[k.jsx("option",{value:"normal",children:"Normal"}),k.jsx("option",{value:"mayorista",children:"Mayorista (10% Desc)"}),k.jsx("option",{value:"distribuidor",children:"Distribuidor (25% Desc)"})]})]})]}),k.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[k.jsx("button",{type:"button",onClick:()=>L(!1),className:"text-slate-400",children:"Cancelar"}),k.jsx("button",{type:"submit",className:"bg-brand-blue px-4 py-2 rounded font-bold",children:"Guardar"})]})]})}),I&&k.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:k.jsxs("form",{onSubmit:Et,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-2xl border border-slate-700 max-h-[90vh] overflow-y-auto",children:[k.jsx("h3",{className:"text-xl font-bold mb-4",children:"Aprobar Cotizacin & Crear Pedido"}),k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[k.jsxs("div",{className:"space-y-3",children:[k.jsx("h4",{className:"text-xs text-brand-blue font-bold uppercase border-b border-brand-blue/30 pb-1",children:"Datos del Cliente"}),k.jsx("input",{name:"name",defaultValue:I.name,placeholder:"Nombre Completo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0}),k.jsx("input",{name:"email",defaultValue:I.email,placeholder:"Correo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),k.jsx("input",{name:"phone",defaultValue:I.phone,placeholder:"Telfono",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0}),k.jsxs("div",{className:"bg-black/20 p-2 rounded",children:[k.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Direccin (Opcional)"}),k.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[k.jsx("input",{name:"street",placeholder:"Calle y Nm",className:"bg-slate-900 border border-slate-600 rounded p-2 text-sm"}),k.jsx("input",{name:"colony",placeholder:"Colonia",className:"bg-slate-900 border border-slate-600 rounded p-2 text-sm"})]}),k.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[k.jsx("input",{name:"zip",placeholder:"C.P.",className:"bg-slate-900 border border-slate-600 rounded p-2 text-sm"}),k.jsx("input",{name:"state",placeholder:"Estado",className:"bg-slate-900 border border-slate-600 rounded p-2 text-sm"})]})]})]}),k.jsxs("div",{className:"space-y-3",children:[k.jsx("h4",{className:"text-xs text-brand-orange font-bold uppercase border-b border-brand-orange/30 pb-1",children:"Datos del Pedido"}),k.jsxs("div",{children:[k.jsx("label",{className:"text-xs text-gray-400",children:"Producto / Descripcin"}),k.jsx("textarea",{name:"itemDesc",defaultValue:I.itemDesc,className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-sm h-20 resize-none",required:!0})]}),k.jsxs("div",{className:"flex gap-2",children:[k.jsxs("div",{className:"flex-1",children:[k.jsx("label",{className:"text-xs text-gray-400",children:"Cantidad"}),k.jsx("input",{name:"itemQty",type:"number",defaultValue:I.itemQty,className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0})]}),k.jsxs("div",{className:"flex-1",children:[k.jsx("label",{className:"text-xs text-gray-400",children:"Precio Unit."}),k.jsx("input",{name:"itemPrice",type:"number",step:"0.01",placeholder:"$0.00",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",onChange:le=>{const Se=parseFloat(le.target.value)||0,ne=parseFloat(document.querySelector('input[name="itemQty"]').value)||1;document.getElementById("approvalTotal").value=(Se*ne).toFixed(2)},required:!0})]})]}),k.jsxs("div",{children:[k.jsx("label",{className:"text-xs text-gray-400",children:"Total del Pedido"}),k.jsx("input",{id:"approvalTotal",name:"total",readOnly:!0,className:"w-full bg-black/40 border border-slate-600 rounded p-2 font-bold text-white"})]}),k.jsxs("div",{className:"flex gap-2",children:[k.jsxs("div",{className:"flex-1",children:[k.jsx("label",{className:"text-xs text-gray-400",children:"Anticipo"}),k.jsx("input",{name:"advance",type:"number",defaultValue:"0",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"})]}),k.jsxs("div",{className:"flex-1",children:[k.jsx("label",{className:"text-xs text-gray-400",children:"Fecha Entrega"}),k.jsx("input",{name:"deadline",type:"date",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"})]})]})]})]}),k.jsxs("div",{className:"flex justify-end gap-3 mt-6 border-t border-slate-700 pt-4",children:[k.jsx("button",{type:"button",onClick:()=>R(null),className:"text-slate-400 hover:text-white",children:"Cancelar"}),k.jsx("button",{type:"submit",className:"bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded font-bold",children:"Generar Pedido"})]})]})}),q&&k.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:k.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl w-full max-w-sm border border-slate-700 text-center",children:[k.jsx("h3",{className:"text-xl font-bold mb-4",children:"Evidencia del Pedido"}),k.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Sube una foto de cmo va el pedido o cmo qued (Max 1MB)."}),k.jsx("input",{type:"file",accept:"image/*",onChange:ht,className:`block w-full text-sm text-slate-500
                            file:mr-4 file:py-2 file:px-4
                            file:rounded-full file:border-0
                            file:text-sm file:font-semibold
                            file:bg-brand-blue file:text-white
                            hover:file:bg-blue-600 mb-6`}),k.jsx("button",{onClick:()=>W(null),className:"text-slate-400 text-sm",children:"Cancelar"})]})}),se&&k.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:k.jsxs("div",{className:"bg-slate-800 p-8 rounded-2xl w-full max-w-2xl border border-slate-700 shadow-2xl relative max-h-[90vh] overflow-y-auto",children:[k.jsx("button",{onClick:()=>ue(null),className:"absolute top-4 right-4 text-slate-400 hover:text-white",children:k.jsx(G_,{size:20,className:"rotate-45"})}),k.jsxs("h3",{className:"text-2xl font-bold mb-6 text-white flex items-center gap-2",children:[se.type==="order"?k.jsx(eN,{className:"text-brand-blue"}):k.jsx(Tag,{className:"text-brand-orange"}),"Detalle de ",se.type==="order"?"Pedido":"Cotizacin"]}),k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[k.jsxs("div",{className:"space-y-4",children:[k.jsxs("div",{children:[k.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-1",children:"Cliente"}),k.jsx("p",{className:"text-white text-lg font-bold",children:se.type==="order"?(Ht=n.find(le=>le.id===se.data.clientId))==null?void 0:Ht.name:se.data.name}),k.jsx("p",{className:"text-sm text-gray-400",children:se.type==="order"?(nt=n.find(le=>le.id===se.data.clientId))==null?void 0:nt.email:se.data.email})]}),se.data.items&&se.data.items.length>0&&k.jsxs("div",{children:[k.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-2",children:"Desglose de Artculos"}),k.jsx("div",{className:"bg-black/30 rounded-lg p-3 space-y-2",children:se.data.items.map((le,Se)=>k.jsxs("div",{className:"flex justify-between text-sm",children:[k.jsxs("span",{className:"text-slate-200",children:[le.qty,"x ",le.desc]}),le.price&&k.jsxs("span",{className:"text-slate-500",children:["$",le.price]})]},Se))})]}),!se.data.items&&k.jsxs("div",{children:[k.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-1",children:"Descripcin"}),k.jsx("p",{className:"text-slate-300",children:se.data.desc||se.data.details}),k.jsxs("p",{className:"text-slate-300 text-sm mt-1",children:["Cantidad: ",se.data.quantity||1]})]}),se.type==="order"&&k.jsxs("div",{className:"bg-brand-blue/10 p-4 rounded-xl border border-brand-blue/30",children:[k.jsxs("div",{className:"flex justify-between mb-1",children:[k.jsx("span",{className:"text-gray-400",children:"Total"}),k.jsxs("span",{className:"text-white font-bold",children:["$",se.data.total]})]}),k.jsxs("div",{className:"flex justify-between mb-1",children:[k.jsx("span",{className:"text-gray-400",children:"Anticipo"}),k.jsxs("span",{className:"text-green-400 font-bold",children:["-$",se.data.advance]})]}),k.jsxs("div",{className:"border-t border-white/10 pt-2 flex justify-between",children:[k.jsx("span",{className:"text-brand-orange font-bold",children:"Restante"}),k.jsxs("span",{className:"text-brand-orange font-bold text-xl",children:["$",se.data.remaining]})]})]})]}),k.jsxs("div",{className:"space-y-4",children:[se.data.progressImage&&k.jsxs("div",{children:[k.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-2",children:"Evidencia / Progreso"}),k.jsx("img",{src:se.data.progressImage,className:"w-full rounded-xl border border-slate-600"})]}),se.data.refType==="link"&&se.data.refLink&&k.jsxs("div",{children:[k.jsx("h4",{className:"text-xs uppercase text-gray-500 font-bold mb-2",children:"Referencia"}),k.jsx("a",{href:se.data.refLink,target:"_blank",className:"text-brand-blue underline break-all text-sm",children:se.data.refLink})]})]})]}),k.jsx("div",{className:"mt-8 pt-6 border-t border-slate-700 flex justify-end",children:k.jsx("button",{onClick:()=>ue(null),className:"px-6 py-2 rounded bg-slate-700 hover:bg-slate-600 text-white",children:"Cerrar"})})]})}),J&&k.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:k.jsxs("form",{onSubmit:ut,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-md border border-slate-700",children:[k.jsx("h3",{className:"text-xl font-bold mb-4",children:"Editar Cliente"}),k.jsxs("div",{className:"space-y-3",children:[k.jsxs("div",{className:"bg-black/20 p-3 rounded border border-slate-700",children:[k.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Nombre"}),k.jsx("input",{name:"name",defaultValue:J.name,className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0})]}),k.jsxs("div",{className:"bg-black/20 p-3 rounded border border-slate-700",children:[k.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Contacto"}),k.jsx("input",{name:"email",defaultValue:J.email,placeholder:"Correo",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 mb-2"}),k.jsx("input",{name:"phone",defaultValue:J.phone,placeholder:"Telfono",className:"w-full bg-slate-900 border border-slate-600 rounded p-2"}),k.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[k.jsx("input",{name:"facebook",defaultValue:J.facebook,placeholder:"Facebook",className:"bg-slate-900 border border-slate-600 rounded p-2"}),k.jsx("input",{name:"instagram",defaultValue:J.instagram,placeholder:"Instagram",className:"bg-slate-900 border border-slate-600 rounded p-2"})]})]}),k.jsxs("div",{className:"bg-black/20 p-3 rounded border border-slate-700",children:[k.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Direccin"}),k.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[k.jsx("input",{name:"street",defaultValue:J.street,placeholder:"Calle y Nmero",className:"bg-slate-900 border border-slate-600 rounded p-2"}),k.jsx("input",{name:"colony",defaultValue:J.colony,placeholder:"Colonia",className:"bg-slate-900 border border-slate-600 rounded p-2"})]}),k.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[k.jsx("input",{name:"zip",defaultValue:J.zip,placeholder:"C.P.",className:"bg-slate-900 border border-slate-600 rounded p-2"}),k.jsx("input",{name:"state",defaultValue:J.state,placeholder:"Estado",className:"bg-slate-900 border border-slate-600 rounded p-2"})]})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-xs mb-1 text-slate-400",children:"Tipo de Cliente"}),k.jsxs("select",{name:"type",defaultValue:J.type,className:"w-full bg-slate-900 border border-slate-600 rounded p-2",children:[k.jsx("option",{value:"normal",children:"Normal"}),k.jsx("option",{value:"mayorista",children:"Mayorista (10% Desc)"}),k.jsx("option",{value:"distribuidor",children:"Distribuidor (25% Desc)"})]})]})]}),k.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[k.jsx("button",{type:"button",onClick:()=>ae(null),className:"text-slate-400",children:"Cancelar"}),k.jsx("button",{type:"submit",className:"bg-brand-blue px-4 py-2 rounded font-bold",children:"Guardar Cambios"})]})]})}),z&&k.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:k.jsxs("form",{onSubmit:re,className:"bg-slate-800 p-6 rounded-2xl w-full max-w-lg border border-slate-700",children:[k.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nueva Cotizacin"}),k.jsxs("div",{className:"space-y-4",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Cliente"}),k.jsxs("select",{name:"clientId",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 mb-2",onChange:le=>j(le.target.value==="manual"),children:[k.jsx("option",{value:"manual",children:"-- Cliente Manual / Nuevo --"}),n.map(le=>k.jsx("option",{value:le.id,children:le.name},le.id))]}),D&&k.jsxs("div",{className:"space-y-2 border-t border-slate-600 pt-2",children:[k.jsx("input",{name:"manualName",placeholder:"Nombre Cliente",className:"w-full bg-slate-900 border border-slate-600 rounded p-2",required:!0}),k.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[k.jsx("input",{name:"manualEmail",placeholder:"Correo",className:"bg-slate-900 border border-slate-600 rounded p-2"}),k.jsx("input",{name:"manualPhone",placeholder:"Telfono",className:"bg-slate-900 border border-slate-600 rounded p-2",required:!0})]})]})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Detalles"}),k.jsx("textarea",{name:"details",placeholder:"Describe lo que el cliente quiere cotizar...",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 h-24 resize-none",required:!0})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-xs mb-1 text-slate-400 font-bold uppercase",children:"Cantidad"}),k.jsx("input",{name:"quantity",type:"number",defaultValue:"1",className:"w-24 bg-slate-900 border border-slate-600 rounded p-2",required:!0})]})]}),k.jsxs("div",{className:"flex justify-end gap-3 mt-6 border-t border-slate-700 pt-4",children:[k.jsx("button",{type:"button",onClick:()=>P(!1),className:"text-slate-400",children:"Cancelar"}),k.jsx("button",{type:"submit",className:"bg-brand-blue px-6 py-2 rounded font-bold hover:bg-blue-600",children:"Crear Cotizacin"})]})]})})]})},Aw=({id:n,icon:e,label:t,active:i,set:r})=>k.jsxs("button",{onClick:()=>r(n),className:`w-full text-left px-4 py-3 rounded-lg flex items-center gap-3 transition-colors ${i===n?"bg-slate-700 text-white":"text-slate-400 hover:bg-slate-800"}`,children:[e," ",k.jsx("span",{children:t})]}),Uv=({title:n,value:e,icon:t,color:i="text-white"})=>k.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700 flex flex-col justify-between",children:[k.jsxs("div",{className:"flex justify-between items-start mb-2",children:[k.jsx("h3",{className:"text-slate-400 text-xs font-bold uppercase",children:n}),t]}),k.jsx("p",{className:`text-3xl font-bold ${i}`,children:e})]}),YIe=()=>{const{addLead:n}=cM(),[e,t]=H.useState({name:"",email:"",phone:"",quantity:1,details:"",refType:"link",refLink:""}),[i,r]=H.useState(!1),[a,s]=H.useState(!1),l=p=>{const{id:g,value:v}=p.target;t(_=>({..._,[g]:v}))},c=p=>{t(g=>({...g,refType:p.target.value}))},f=p=>{if(p.preventDefault(),i)return;r(!0);const g=n(e);let v=` *Nueva Solicitud de Cotizacin*

`;v+=` *Nombre:* ${e.name}
`,v+=` *Correo:* ${e.email}
`,e.phone&&(v+=` *Telfono:* ${e.phone}
`),v+=` *Piezas:* ${e.quantity}
`,e.refType==="link"&&e.refLink?v+=` *Referencia:* ${e.refLink}
`:v+=` *Referencia:* (Envo imagen a continuacin)
`,e.details&&(v+=` *Detalles:* ${e.details}
`),g&&g.id&&(v+=`
ID: ${g.id}`),window.open(`https://wa.me/525619956812?text=${encodeURIComponent(v)}`,"_blank"),s(!0),r(!1),t({name:"",email:"",phone:"",quantity:1,details:"",refType:"link",refLink:""})};return k.jsxs("div",{className:"bg-brand-dark min-h-screen text-slate-100 font-sans py-20 px-4 relative overflow-hidden",children:[k.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none",children:[k.jsx("div",{className:"absolute top-1/4 -right-20 w-96 h-96 bg-brand-orange/10 rounded-full blur-3xl animate-pulse"}),k.jsx("div",{className:"absolute bottom-1/4 -left-20 w-96 h-96 bg-brand-blue/10 rounded-full blur-3xl animate-pulse delay-1000"})]}),k.jsxs("div",{className:"max-w-2xl mx-auto",children:[k.jsxs(Ac,{to:"/",className:"inline-flex items-center text-gray-400 hover:text-white mb-8 transition-colors",children:[k.jsx(bD,{className:"mr-2",size:20})," Volver al Inicio"]}),k.jsxs("div",{className:"glass p-8 md:p-10 rounded-3xl shadow-2xl",children:[k.jsxs("div",{className:"text-center mb-8",children:[k.jsxs("h1",{className:"font-display text-4xl font-bold mb-4",children:["Cotiza tu ",k.jsx("span",{className:"text-brand-blue",children:"Proyecto"})]}),k.jsx("p",{className:"text-gray-400",children:"Cuntanos tu idea para imprimirla en 3D."})]}),a&&k.jsxs("div",{className:"bg-green-500/20 border border-green-500/50 text-green-400 p-4 rounded-xl mb-6 text-center animate-fade-in",children:[k.jsx("p",{className:"font-bold",children:"Cotizacin creada con xito!"}),k.jsx("p",{className:"text-sm",children:"Te hemos redirigido a WhatsApp para continuar."})]}),k.jsxs("form",{onSubmit:f,className:"space-y-6",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre Completo"}),k.jsx("input",{type:"text",id:"name",required:!0,value:e.name,onChange:l,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]}),k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Correo Electrnico"}),k.jsx("input",{type:"email",id:"email",required:!0,value:e.email,onChange:l,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Telfono / WhatsApp"}),k.jsx("input",{type:"tel",id:"phone",value:e.phone,onChange:l,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nmero de piezas"}),k.jsx("input",{type:"number",id:"quantity",min:"1",required:!0,value:e.quantity,onChange:l,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Tienes una referencia?"}),k.jsxs("div",{className:"flex gap-4 mb-4",children:[k.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[k.jsx("input",{type:"radio",name:"ref-type",value:"link",checked:e.refType==="link",onChange:c,className:"text-brand-blue"}),k.jsx("span",{children:"Enlace (Link)"})]}),k.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[k.jsx("input",{type:"radio",name:"ref-type",value:"image",checked:e.refType==="image",onChange:c,className:"text-brand-blue"}),k.jsx("span",{children:"Imagen"})]})]}),e.refType==="link"?k.jsx("input",{type:"url",id:"refLink",value:e.refLink,onChange:l,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all",placeholder:"https://..."}):k.jsxs("div",{className:"border-2 border-dashed border-white/20 rounded-xl p-6 text-center text-gray-400",children:[k.jsx(tN,{className:"mx-auto mb-2"}),k.jsx("span",{className:"text-sm",children:"La imagen se enviar en el chat de WhatsApp"})]})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Detalles Adicionales"}),k.jsx("textarea",{id:"details",rows:"3",value:e.details,onChange:l,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all"})]}),k.jsx("button",{type:"submit",disabled:i,className:`w-full bg-brand-blue hover:bg-blue-600 text-white font-bold py-4 rounded-xl shadow-lg shadow-blue-500/30 transition-all hover:scale-[1.01] ${i?"opacity-50 cursor-not-allowed":""}`,children:i?"Procesando...":"Continuar en WhatsApp"})]})]})]})]})},G2=()=>{const{addOrder:n,addClient:e,clients:t}=cM(),i=n6(),[r,a]=H.useState(""),[s,l]=H.useState(""),[c,f]=H.useState([{desc:"",qty:1,price:""}]),p=H.useMemo(()=>c.reduce((T,S)=>T+parseFloat(S.price||0)*parseFloat(S.qty||1),0),[c]),g=()=>{f([...c,{desc:"",qty:1,price:""}])},v=T=>{f(c.filter((S,w)=>w!==T))},_=(T,S,w)=>{const I=[...c];I[T][S]=w,f(I)},x=async T=>{T.preventDefault();let S=null;const w=s.trim().toLowerCase(),I=t.find(R=>R.email&&R.email.toLowerCase()===w||R.phone&&R.phone===w);I?S=I.id:S=(await e({name:r||"Cliente Mostrador",email:s.includes("@")?s:"",phone:s.includes("@")?"":s,type:"normal",address:"En Tienda",street:"En Tienda",colony:"",zip:"",state:""})).id,await n({clientId:S,items:c.map(R=>({...R,price:parseFloat(R.price).toFixed(2)})),total:p.toFixed(2),advance:p.toFixed(2),deliveryLocation:"Entregado en Tienda",status:"entregado",date:new Date().toLocaleDateString("es-MX")}),alert("Venta registrada con xito!"),i("/admin")};return k.jsx("div",{className:"min-h-screen bg-slate-900 text-slate-100 font-sans p-6 md:p-12",children:k.jsxs("div",{className:"max-w-3xl mx-auto",children:[k.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[k.jsx(Ac,{to:"/admin",className:"p-2 bg-slate-800 rounded-full hover:bg-slate-700 transition-colors",children:k.jsx(bD,{size:24})}),k.jsxs("h1",{className:"text-3xl font-display font-bold flex items-center gap-3",children:[k.jsx(S8,{className:"text-brand-orange"}),"Registro de Venta ",k.jsx("span",{className:"text-slate-500 font-normal text-xl",children:"| Mostrador"})]})]}),k.jsxs("form",{onSubmit:x,className:"bg-slate-800 p-8 rounded-2xl border border-slate-700 shadow-2xl",children:[k.jsxs("div",{className:"mb-8",children:[k.jsx("h2",{className:"text-xs font-bold text-brand-blue uppercase tracking-wider mb-4 border-b border-brand-blue/20 pb-2",children:"Datos del Cliente"}),k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Nombre Cliente"}),k.jsx("input",{type:"text",required:!0,className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 focus:border-brand-blue focus:outline-none transition-colors",placeholder:"Ej. Juan Prez",value:r,onChange:T=>a(T.target.value)})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Contacto (Email / Tel)"}),k.jsx("input",{type:"text",className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 focus:border-brand-blue focus:outline-none transition-colors",placeholder:"Opcional",value:s,onChange:T=>l(T.target.value)})]})]})]}),k.jsxs("div",{className:"mb-8",children:[k.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-white/10 pb-2",children:[k.jsx("h2",{className:"text-xs font-bold text-brand-orange uppercase tracking-wider",children:"Productos"}),k.jsxs("button",{type:"button",onClick:g,className:"text-xs bg-slate-700 hover:bg-slate-600 px-3 py-1 rounded-full flex items-center gap-1 transition-colors",children:[k.jsx(H_,{size:14})," Agregar Producto"]})]}),k.jsx("div",{className:"space-y-3",children:c.map((T,S)=>k.jsxs("div",{className:"flex gap-3 items-start animate-fade-in-up",children:[k.jsx("div",{className:"flex-1",children:k.jsx("input",{type:"text",placeholder:"Descripcin del producto...",required:!0,className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 text-sm focus:border-brand-orange focus:outline-none transition-colors",value:T.desc,onChange:w=>_(S,"desc",w.target.value)})}),k.jsx("div",{className:"w-20",children:k.jsx("input",{type:"number",placeholder:"Cant.",required:!0,min:"1",className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 text-sm text-center focus:border-brand-orange focus:outline-none transition-colors",value:T.qty,onChange:w=>_(S,"qty",w.target.value)})}),k.jsxs("div",{className:"w-32 relative",children:[k.jsx("span",{className:"absolute left-3 top-3 text-slate-500",children:"$"}),k.jsx("input",{type:"number",placeholder:"0.00",required:!0,step:"0.50",className:"w-full bg-slate-900 border border-slate-600 rounded-lg p-3 pl-6 text-sm text-right focus:border-brand-orange focus:outline-none transition-colors",value:T.price,onChange:w=>_(S,"price",w.target.value)})]}),c.length>1&&k.jsx("button",{type:"button",onClick:()=>v(S),className:"p-3 text-red-400 hover:bg-red-400/10 rounded-lg transition-colors",children:k.jsx(G_,{size:18})})]},S))})]}),k.jsxs("div",{className:"bg-slate-900 p-6 rounded-xl flex flex-col md:flex-row justify-between items-center gap-6",children:[k.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm",children:[k.jsx(qE,{size:16}),k.jsxs("span",{children:["La venta se registrar como ",k.jsx("strong",{children:"ENTREGADA"})," y pagada al 100%."]})]}),k.jsxs("div",{className:"flex items-center gap-6",children:[k.jsxs("div",{className:"text-right",children:[k.jsx("span",{className:"block text-xs text-slate-400 uppercase font-bold",children:"Total a Pagar"}),k.jsxs("span",{className:"text-3xl font-display font-bold text-white",children:["$",p.toFixed(2)]})]}),k.jsxs("button",{type:"submit",className:"bg-brand-blue hover:bg-blue-500 text-white px-8 py-4 rounded-xl font-bold text-lg shadow-lg shadow-blue-500/20 hover:scale-[1.02] transition-all flex items-center gap-2",children:[k.jsx(qE,{size:24})," Registrar Venta"]})]})]})]})]})})},KIe=()=>{const{clients:n,orders:e}=cM(),[t,i]=H.useState(""),[r,a]=H.useState(null),[s,l]=H.useState(""),c=f=>{f.preventDefault(),l(""),a(null);const p=t.trim().toLowerCase();if(!p)return;let g=[];const v=e.find(_=>_.id.toString()===p||_.id.toString().endsWith(p));if(v)g.push(v);else{const _=n.find(x=>x.id===p||x.email&&x.email.toLowerCase()===p||x.phone&&x.phone.replace(/\D/g,"")===p.replace(/\D/g,""));_&&(g=e.filter(x=>String(x.clientId)===String(_.id)))}g.length>0?a(g.reverse()):l("No se encontraron pedidos con esa informacin.")};return k.jsxs("div",{className:"min-h-screen bg-brand-dark text-slate-100 font-sans flex flex-col items-center justify-center p-4",children:[k.jsx("div",{className:"absolute top-8 left-8",children:k.jsx(Ac,{to:"/",className:"text-gray-400 hover:text-white",children:" Volver"})}),k.jsxs("div",{className:"w-full max-w-2xl",children:[k.jsxs("h1",{className:"text-3xl font-display font-bold text-center mb-2",children:["Revisa estatus de tu ",k.jsx("span",{className:"text-brand-orange",children:"Pedido"})]}),k.jsx("p",{className:"text-center text-gray-400 mb-8",children:"Ingresa tu ID de pedido, correo o telfono."}),k.jsxs("div",{className:"glass p-8 rounded-2xl shadow-xl border border-white/10 mb-8",children:[k.jsxs("form",{onSubmit:c,className:"flex gap-4",children:[k.jsx("input",{type:"text",required:!0,value:t,onChange:f=>i(f.target.value),className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-blue",placeholder:"ID, Correo o Telfono..."}),k.jsxs("button",{type:"submit",className:"bg-brand-blue hover:bg-blue-600 text-white font-bold px-6 py-3 rounded-lg transition-all flex items-center gap-2",children:[k.jsx(xse,{size:18})," Buscar"]})]}),s&&k.jsxs("div",{className:"mt-4 p-3 bg-red-500/10 border border-red-500/20 text-red-400 rounded-lg text-sm text-center flex items-center justify-center gap-2",children:[k.jsx(Qae,{size:16})," ",s]})]}),r&&r.length>0&&k.jsx("div",{className:"space-y-6",children:r.map(f=>k.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl p-6 shadow-2xl animate-float",children:[k.jsxs("div",{className:"flex justify-between items-start mb-6",children:[k.jsxs("div",{children:[k.jsxs("h3",{className:"font-bold text-xl text-white",children:["Pedido #",f.id.slice(-4)]}),k.jsx("p",{className:"text-xs text-gray-500",children:f.id}),k.jsxs("p",{className:"text-gray-400 text-sm",children:["Fecha: ",f.date]})]}),k.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase
                                        ${f.status==="entregado"?"bg-green-500/20 text-green-400":f.status==="terminado"?"bg-blue-500/20 text-blue-400":"bg-brand-orange/20 text-brand-orange"}`,children:f.status})]}),k.jsxs("div",{className:"space-y-4 mb-6",children:[k.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-3",children:[k.jsx("h4",{className:"text-xs font-bold text-gray-400 mb-2 uppercase",children:"Productos"}),f.items&&f.items.map((p,g)=>k.jsxs("div",{className:"flex justify-between text-sm text-slate-200 mb-1 border-b border-slate-700/50 pb-1 last:border-0 last:pb-0",children:[k.jsxs("span",{children:[p.qty,"x ",p.desc]}),p.price&&k.jsxs("span",{className:"text-gray-500",children:["$",p.price," c/u"]})]},g))]}),k.jsx("div",{className:"flex items-center gap-3 text-slate-300",children:f.status==="entregado"?k.jsxs(k.Fragment,{children:[k.jsx(qE,{className:"text-green-400"}),k.jsx("span",{className:"text-green-400 font-bold",children:"Entregado!"})]}):k.jsxs(k.Fragment,{children:[k.jsx(tse,{className:"text-brand-orange"}),k.jsxs("span",{children:["Entrega estimada: ",f.deadline||"Pendiente"]})]})}),f.progressImage&&k.jsxs("div",{className:"mt-4",children:[k.jsx("h4",{className:"text-xs font-bold text-gray-400 mb-2 uppercase",children:"Avance del Pedido"}),k.jsx("img",{src:f.progressImage,alt:"Avance",className:"w-full rounded-lg border border-slate-600 shadow-lg"})]})]}),k.jsxs("div",{className:"bg-slate-900 rounded-xl p-4",children:[k.jsxs("div",{className:"flex justify-between mb-2",children:[k.jsx("span",{className:"text-gray-400",children:"Total"}),k.jsxs("span",{className:"text-white font-bold",children:["$",f.total]})]}),k.jsxs("div",{className:"flex justify-between mb-2",children:[k.jsx("span",{className:"text-gray-400",children:"Pagado (Anticipo)"}),k.jsxs("span",{className:"text-green-400 font-bold",children:["-$",f.advance||0]})]}),k.jsx("div",{className:"border-t border-slate-700 my-2"}),k.jsxs("div",{className:"flex justify-between",children:[k.jsx("span",{className:"text-brand-orange font-bold",children:"Por Pagar"}),k.jsxs("span",{className:"text-brand-orange font-bold text-xl",children:["$",f.remaining||f.total]})]})]})]},f.id))})]})]})};function ZIe(){return k.jsx(CY,{children:k.jsxs(xY,{children:[k.jsx(lm,{path:"/",element:k.jsx(Ise,{})}),k.jsx(lm,{path:"/admin",element:k.jsx(XIe,{})}),k.jsx(lm,{path:"/quote",element:k.jsx(YIe,{})}),k.jsx(lm,{path:"/status",element:k.jsx(KIe,{})}),k.jsx(lm,{path:"/venta-tienda",element:k.jsx(G2,{})}),k.jsx(lm,{path:"/venta-fisica",element:k.jsx(G2,{})})]})})}class QIe extends ng.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t),this.setState({errorInfo:t})}render(){return this.state.hasError?k.jsxs("div",{style:{color:"red",padding:"20px",background:"white"},children:[k.jsx("h1",{children:"Something went wrong."}),k.jsx("pre",{children:this.state.error&&this.state.error.toString()}),k.jsx("pre",{children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}):this.props.children}}IX.createRoot(document.getElementById("root")).render(k.jsx(ng.StrictMode,{children:k.jsx(QIe,{children:k.jsx(Bde,{children:k.jsx(ZIe,{})})})}));
